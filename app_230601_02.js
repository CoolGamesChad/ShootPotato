var f;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function q(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function ba(a){if(!(a instanceof Array)){a=q(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
var ea="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,fa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function ia(a,b){if(b){var c=ea;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&fa(c,a,{configurable:!0,writable:!0,value:b})}}
ia("Promise",function(a){function b(g){this.Ja=0;this.Gb=void 0;this.S=[];var k=this.kb();try{g(k.resolve,k.reject)}catch(l){k.reject(l)}}function c(){this.S=null}function d(g){return g instanceof b?g:new b(function(k){k(g)})}if(a)return a;c.prototype.Ja=function(g){if(null==this.S){this.S=[];var k=this;this.kb(function(){k.Gb()})}this.S.push(g)};var e=ea.setTimeout;c.prototype.kb=function(g){e(g,0)};c.prototype.Gb=function(){for(;this.S&&this.S.length;){var g=this.S;this.S=[];for(var k=0;k<g.length;++k){var l=
g[k];g[k]=null;try{l()}catch(m){this.tb(m)}}}this.S=null};c.prototype.tb=function(g){this.kb(function(){throw g;})};b.prototype.kb=function(){function g(m){return function(n){l||(l=!0,m.call(k,n))}}var k=this,l=!1;return{resolve:g(this.gf),reject:g(this.tb)}};b.prototype.gf=function(g){if(g===this)this.tb(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.$f(g);else{a:switch(typeof g){case "object":var k=null!=g;break a;case "function":k=!0;break a;default:k=!1}k?this.ff(g):
this.Dc(g)}};b.prototype.ff=function(g){var k=void 0;try{k=g.then}catch(l){this.tb(l);return}"function"==typeof k?this.Ah(k,g):this.Dc(g)};b.prototype.tb=function(g){this.Sc(2,g)};b.prototype.Dc=function(g){this.Sc(1,g)};b.prototype.Sc=function(g,k){if(0!=this.Ja)throw Error("Cannot settle("+g+", "+k+"): Promise already settled in state"+this.Ja);this.Ja=g;this.Gb=k;this.Me()};b.prototype.Me=function(){if(null!=this.S){for(var g=0;g<this.S.length;++g)h.Ja(this.S[g]);this.S=null}};var h=new c;b.prototype.$f=
function(g){var k=this.kb();g.Eh(k.resolve,k.reject)};b.prototype.Ah=function(g,k){var l=this.kb();try{g.call(k,l.resolve,l.reject)}catch(m){l.reject(m)}};b.prototype.then=function(g,k){function l(p,u){return"function"==typeof p?function(z){try{m(p(z))}catch(y){n(y)}}:u}var m,n,r=new b(function(p,u){m=p;n=u});this.Eh(l(g,m),l(k,n));return r};b.prototype.catch=function(g){return this.then(void 0,g)};b.prototype.Eh=function(g,k){function l(){switch(m.Ja){case 1:g(m.Gb);break;case 2:k(m.Gb);break;default:throw Error("Unexpected state: "+
m.Ja);}}var m=this;null==this.S?h.Ja(l):this.S.push(l)};b.resolve=d;b.reject=function(g){return new b(function(k,l){l(g)})};b.race=function(g){return new b(function(k,l){for(var m=q(g),n=m.next();!n.done;n=m.next())d(n.value).Eh(k,l)})};b.all=function(g){var k=q(g),l=k.next();return l.done?d([]):new b(function(m,n){function r(z){return function(y){p[z]=y;u--;0==u&&m(p)}}var p=[],u=0;do p.push(void 0),u++,d(l.value).Eh(r(p.length-1),n),l=k.next();while(!l.done)})};return b});
function la(){la=function(){};ea.Symbol||(ea.Symbol=ma)}function na(a,b){this.S=a;fa(this,"description",{configurable:!0,writable:!0,value:b})}na.prototype.toString=function(){return this.S};var ma=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new na("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function ta(){la();var a=ea.Symbol.iterator;a||(a=ea.Symbol.iterator=ea.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&fa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ua(aa(this))}});ta=function(){}}function ua(a){ta();a={next:a};a[ea.Symbol.iterator]=function(){return this};return a}function wa(){this.tb=!1;this.Ja=null;this.Gb=void 0;this.S=1;this.Sc=0;this.kb=null}function xa(a){if(a.tb)throw new TypeError("Generator is already running");a.tb=!0}
wa.prototype.Dc=function(a){this.Gb=a};function ya(a,b){a.kb={pl:b,Dl:!0};a.S=a.Sc}wa.prototype.return=function(a){this.kb={return:a};this.S=this.Sc};function za(a){this.S=new wa;this.Ja=a}function Ba(a,b){xa(a.S);var c=a.S.Ja;if(c)return Ca(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.S.return);a.S.return(b);return Ea(a)}
function Ca(a,b,c,d){try{var e=b.call(a.S.Ja,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.S.tb=!1,e;var h=e.value}catch(g){return a.S.Ja=null,ya(a.S,g),Ea(a)}a.S.Ja=null;d.call(a.S,h);return Ea(a)}
function Ea(a){for(;a.S.S;)try{var b=a.Ja(a.S);if(b)return a.S.tb=!1,{value:b.value,done:!1}}catch(c){a.S.Gb=void 0,ya(a.S,c)}a.S.tb=!1;if(a.S.kb){b=a.S.kb;a.S.kb=null;if(b.Dl)throw b.pl;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function Fa(a){this.next=function(b){xa(a.S);a.S.Ja?b=Ca(a,a.S.Ja.next,b,a.S.Dc):(a.S.Dc(b),b=Ea(a));return b};this.throw=function(b){xa(a.S);a.S.Ja?b=Ca(a,a.S.Ja["throw"],b,a.S.Dc):(ya(a.S,b),b=Ea(a));return b};this.return=function(b){return Ba(a,b)};ta();this[Symbol.iterator]=function(){return this}}
function Ha(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function h(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(h,e)}h(a.next())})}ia("Math.sign",function(a){return a?a:function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1}});
function Ia(a,b){ta();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}ia("Array.prototype.keys",function(a){return a?a:function(){return Ia(this,function(b){return b})}});var t={},v;t.canvas=document.createElement("canvas");t.canvas.width=480;t.canvas.height=296;var Ja=document.body;Ja.style.position="relative";
Ja.style.left=(window.innerWidth-t.canvas.width>>1)+"px";Ja.style.width=t.canvas.width+"px";Ja.style.margin="0px";Ja.style.marginBottom="20px";Ja.style.padding="0px";Ja.style.display="flex";Ja.style.flexFlow="column nowrap";Ja.style.justifyContent="flex-start";Ja.style.alignItems="center";Ja.style.alignContent="flex-start";Ja.style.backgroundColor="#404040";Ja.style.fontFamily="sans-serif";Ja.style.fontSize="12pt";Ja.style.color="white";Ja.style.imageRendering="pixelated";
Ja.style.transformOrigin="top center";var Ma=document.createElement("img");Ma.width=320;Ma.height=44;Ma.src="WebsiteBanner_230507_01.png";Ma.style.margin="0 auto";document.body.appendChild(Ma);var Pa=t.Ie=document.createElement("div");Pa.style.position="relative";Pa.style.width=t.canvas.width+"px";Pa.style.height=t.canvas.height+"px";Pa.style.margin="6px 0";Pa.style.outline="5px solid black";Pa.style.backgroundColor="black";Pa.oncontextmenu=function(a){return a.preventDefault()};document.body.appendChild(Pa);
t.Ie.appendChild(t.canvas);function Qa(a,b){for(var c=0,d=a.length,e=c+(d-c>>1);c<d;){var h=a.cmp.call(null,b,a[e]);if(0>h)d=e,e=c+(d-c>>1);else if(0<h)c=e+1,e=c+(d-c>>1);else break}return e}function Ra(a,b){var c=Qa(a,b);return a[c]&&0==a.cmp(a[c],b)?a[c]:null}function Sa(a,b){var c=Qa(a,b);if(a[c]&&0==a.cmp(a[c],b))return a[c];a.splice(c,0,b);return b}function Ta(a,b){var c=Qa(a,b);a[c]&&0==a.cmp(a[c],b)&&a.splice(c,1)};for(var Ua=new Uint8Array(256),Xa=0;256>Xa;Xa++)Ua[Xa]=Ua[Xa>>>1]+(Xa&1);function Ya(a,b,c){return a<b?b:a>c?c:a}function Za(a,b,c){return a*(1-c)+b*c}function ab(a,b){return a==b?a:0==a?b:0==b?a:0==(a&1)?0==(b&1)?ab(a>>1,b>>1)<<1:ab(a>>1,b):0==(b&1)?ab(a,b>>1):a>=b?ab(a-b>>1,b):ab(b-a>>1,a)}function bb(a,b,c){var d=b*b-4*a*c;if(0<d){c={};d=Math.sqrt(d);a=2*a;var e=(-b+d)/a;a=(-b-d)/a;a>e?(c.Ka=e,c.Ac=a):(c.Ka=a,c.Ac=e);return c}return 0==d?(c={},c.Ka=-b/(2*a),c.Ac=c.Ka,c):null}
function db(a){this.cmp=a;this.elements=[]}f=db.prototype;f.get=function(a){var b=eb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements[b]};f.contains=function(a){var b=eb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?-1:b};f.add=function(a){return this.push(a)};f.push=function(a){var b=eb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return!1;this.elements.splice(b,0,a);return!0};
f.replace=function(a){var b=eb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b]=a,!0;this.elements.splice(b,0,a);return!0};f.Ha=function(a){var b=eb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b];this.elements.splice(b,0,a);return a};f.remove=function(a){var b=eb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements.splice(b,1)[0]};
function eb(a,b){for(var c=0,d=a.elements.length,e=Math.floor(c/2+d/2);c<d;){var h=a.cmp.call(a,b,a.elements[e]);if(0>h)d=e,e=Math.floor(c/2+d/2);else if(0<h)c=e+1,e=Math.floor(c/2+d/2);else break}return e}f.clear=function(){this.elements.length=0};f.Yh=function(){return 0==this.elements.length};function fb(){this.start=new gb(null);return this}f=fb.prototype;f.Yh=function(){return!this.first().item};f.size=function(){for(var a=0,b=this.first();b.item;b=b.next)a++;return a};f.first=function(){return this.start.next};
f.clear=function(){ib(this.start);return this};function jb(a,b){nb(b,a.start);return a}f.add=function(a){return jb(this,new gb(a))};function ob(a){for(var b=pb,c=qb,d=b.first();d.item;d=d.next)if(0>c.call(null,a.item,d.item)){nb(a,d);return}nb(a,b.start)}f.get=function(a){for(var b=this.first();b.item;b=b.next)if(b.item==a)return b;return null};f.remove=function(a){a=this.get(a);if(null==a)return null;ib(a);return this};
f.sort=function(a){for(var b,c=this.first();c.item;c=b){b=c.next;var d=c;for(var e=d.rb;e.item&&!(0<=a(d.item,e.item));)e=e.rb;d=e;d!=c.rb&&(ib(c),c.rb=d,c.next=d.next,c.rb.next=c,c.next.rb=c)}};function gb(a){this.item=a;this.rb=this;this.next=this;return this}function nb(a,b){a.next=b;a.rb=b.rb;a.next.rb=a;a.rb.next=a}function ib(a){a.rb.next=a.next;a.next.rb=a.rb;a.next=a.rb=a};function rb(){var a;isNaN(a)&&(a=(new Date).getTime()|0);this.r=a+643709624|0}rb.prototype.next=function(){this.r^=this.r<<13;this.r^=this.r>>17;this.r^=this.r<<5;this.r>>>=0};function sb(){var a=w;a.next();return a.r}function E(a){a.next();return a.r/4294967295}var w=new rb;function tb(a){return Math.floor(E(w)*a)}function ub(a){return 1>E(w)*a}function vb(a){return a[tb(a.length)]}function wb(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return vb(b)};function xb(a,b,c){for(var d=0,e=a.length,h=d+(e-d>>1);d<e;){var g=c.call(null,b,a[h]);if(0>g)e=h,h=d+(e-d>>1);else if(0<g)d=h+1,h=d+(e-d>>1);else break}return h}function yb(a,b){var c=a.splice(0);c=q(c);for(var d=c.next();!d.done;d=c.next())d=d.value,a.splice(xb(a,d,b),0,d)}function qb(a,b){return isNaN(a)?a.index<b.index?-1:a.index>b.index?1:0:a<b.index?-1:a>b.index?1:0}function zb(a,b){return"string"==typeof a?a<b.name?-1:a>b.name?1:0:a.name<b.name?-1:a.name>b.name?1:0};function Bb(a){var b=Cb(a);a=a.slice(a.position,a.position+=b);return String.fromCharCode.apply(null,a)}function Db(a,b){Eb(a,b.length);for(var c=0;c<b.length;c++)a[a.position++]=b.charCodeAt(c)}function Gb(a){var b=Hb(a);a=a.slice(a.position,a.position+=b);var c;console.log(t.ma.od.format(performance.now())+" unscramble...");void 0==c&&(c=0);if(void 0==d)var d=a.length;b=53;for(var e=c;e<c+d;e++){var h=a[e];a[e]=a[e]-193*b-53&255;b=h}return String.fromCharCode.apply(null,a)}
function Lb(a,b){Mb(a,b.length);for(var c=a.position,d=0;d<b.length;d++)a[a.position++]=b.charCodeAt(d);b=b.length;void 0==c&&(c=0);void 0==b&&(b=a.length);d=53;for(var e=c;e<c+b;e++)a[e]=a[e]+193*d+53&255,d=a[e]}function Cb(a){return a[a.position++]}function Eb(a,b){a[a.position++]=b&255}function Ob(a){var b=0|a[a.position++]<<0;return b|=a[a.position++]<<8}function Sb(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}
function Tb(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;return(b>>>0)-32768}function Ub(a,b){b+=32768;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}function Hb(a){var b=a[a.position++]<<0;b+=a[a.position++]<<8;b+=a[a.position++]<<16;return b+=a[a.position++]<<24}function Mb(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}
function Vb(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;b|=a[a.position++]<<16;b|=a[a.position++]<<24;return(b>>>0)-2147483648}function Wb(a,b){b+=2147483648;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}function Xb(a){var b=new Uint8Array(4);b[0]=a[a.position++];b[1]=a[a.position++];b[2]=a[a.position++];b[3]=a[a.position++];return(new Float32Array(b.buffer))[0]}
function Zb(a,b){var c=new Float32Array(1);c[0]=b;c=new Uint8Array(c.buffer);a[a.position++]=c[0];a[a.position++]=c[1];a[a.position++]=c[2];a[a.position++]=c[3]};function bc(){this.size=0;this.root=new cc;this.root.update=function(){};this.dc=null}bc.prototype.Yh=function(){return 0==this.size};bc.prototype.pop=function(){if(this.Yh())return null;var a=this.root.re.ig(),b=a.value;this.remove(a);return b};
bc.prototype.add=function(a,b){this.dc=new dc;if(0==this.size)this.root.re=this.dc,this.dc.parent=this.root;else{var c=this.root;var d=this.size;d=Ua[d>>>0&255]+Ua[d>>>8&255]+Ua[d>>>16&255]+Ua[d>>>24];for(var e=0;e<d;e++)c=c.re;d=new cc;d.parent=c.parent;c.parent.re=d;d.Hi=c;c.parent=d;d.re=this.dc;this.dc.parent=d}c=this.dc;c.value=a;c.key=b;c.parent.update();this.size++;return this.dc};
bc.prototype.remove=function(a){if(a==this.dc)1==this.size?this.root.re=this.dc=null:ec(this);else{var b=this.dc.value,c=this.dc.key;ec(this);a.value=b;a.key=c;a.parent.update()}this.size--};function ec(a){var b=a.dc.parent,c=b.Hi;a.dc=c.dc();c.parent=b.parent;c.parent.re=c;c.parent.update()}function cc(){}cc.prototype.ig=function(){return this.first};cc.prototype.dc=function(){return this.re.dc()};
cc.prototype.update=function(){this.first=this.re.ig().key<this.Hi.ig().key?this.re.ig():this.Hi.ig();this.parent.update()};function dc(){}dc.prototype.ig=function(){return this};dc.prototype.dc=function(){return this};Math.Cg=2*Math.PI;function fc(a){return a*Math.PI/180}function gc(a){return Math.PI/2147483648*a}function hc(a,b,c,d){return ic(new G(a.x-c.x,a.y-c.y,a.z-c.z),b,d)}function ic(a,b,c){return bb(jc(b,b),2*jc(a,b),jc(a,a)-c*c)}function kc(a,b,c){.7071>a.y&&-.7071<a.y?(b.set(a.z,0,-a.x),pc(a,b,c).ra(1),pc(c,a,b)):(c.set(0,a.z,-a.y),pc(c,a,b).ra(1),pc(a,b,c))}
function qc(a,b){var c;c||(c=new rc);for(var d=[],e=0;;){for(var h=-1,g=null,k=Number.POSITIVE_INFINITY,l=0;l<b.length;l++)if(!(e&1<<l)){var m=b[l],n=jc(m,a);n<k&&(h=l,g=m,k=n)}if(0<=k)break;c=c.dj(a,g,k);d.push(g);e|=1<<h;if(!c)break}a.round()}function rc(){}rc.prototype.dj=function(a,b,c){a.x-=b.x*c;a.y-=b.y*c;a.z-=b.z*c;return new uc(b)};function uc(a){this.n=a}uc.prototype.dj=function(a,b){b=pc(this.n,b,new G(0,0,0));if(0==b.ra(1))return null;var c=jc(a,b);a.x=b.x*c;a.y=b.y*c;a.z=b.z*c;return new vc(b)};
function vc(a){this.n=a}vc.prototype.dj=function(a,b,c){b=c/jc(this.n,b);if(!isFinite(b))return null;a.x-=this.n.x*b;a.y-=this.n.y*b;a.z-=this.n.z*b;return null};function wc(a,b,c){null==a?(this.b=b*c,this.i=b,this.ratio=c):null==b?(this.b=a,this.i=a/c,this.ratio=c):null==c?(this.b=a,this.i=b,this.ratio=a/b):(this.b=a,this.i=b,this.ratio=c);this.y=this.x=0;a=a>b?a:b;for(this.bufferSize=8;this.bufferSize<a;this.bufferSize*=2);}
function xc(a,b,c,d,e){a=Math.round(a);b=Math.round(b);c=Math.round(c);d=Math.round(d);this.j=a;this.g=b;this.B=c;this.A=d;if(!e)return this.fa=c-a,this.$=d-b,this.Nb=this.wa=NaN,this.length=Math.sqrt(this.fa*this.fa+this.$*this.$),a=this.fa,b=this.$,0>a?0>b?-a<-b?(this.type=9,this.wa=-a/b,this.Nb=-b/this.length,a=ab(-a,-b),this.fa/=a,this.$/=a):-a>-b?(this.type=7,this.wa=b/a,this.Nb=-a/this.length,a=ab(-a,-b),this.fa/=a,this.$/=a):(this.type=8,this.wa=this.$=this.fa=-1,this.Nb=Math.SQRT1_2):0<b?
-a<b?(this.type=3,this.wa=-a/b,this.Nb=b/this.length,a=ab(-a,b),this.fa/=a,this.$/=a):-a>b?(this.type=5,this.wa=b/a,this.Nb=-a/this.length,a=ab(-a,b),this.fa/=a,this.$/=a):(this.type=4,this.fa=-1,this.$=1,this.wa=-1,this.Nb=Math.SQRT1_2):(this.type=6,this.fa=-1):0<a?0>b?a<-b?(this.type=11,this.wa=-a/b,this.Nb=-b/this.length,a=ab(a,-b),this.fa/=a,this.$/=a):a>-b?(this.type=13,this.wa=b/a,this.Nb=a/this.length,a=ab(a,-b),this.fa/=a,this.$/=a):(this.type=12,this.fa=1,this.wa=this.$=-1,this.Nb=Math.SQRT1_2):
0<b?a<b?(this.type=1,this.wa=-a/b,this.Nb=b/this.length,a=ab(a,b),this.fa/=a,this.$/=a):a>b?(this.type=15,this.wa=b/a,this.Nb=a/this.length,a=ab(a,b),this.fa/=a,this.$/=a):(this.type=0,this.$=this.fa=1,this.wa=-1,this.Nb=Math.SQRT1_2):(this.type=14,this.fa=1):a<b?(this.type=2,this.$=1):a>b&&(this.type=10,this.$=-1),this}function Bc(a,b){return a.j<b.j?-1:a.j>b.j?1:a.g<b.g?-1:a.g>b.g?1:a.B<b.B?-1:a.B>b.B?1:a.A<b.A?-1:a.A>b.A?1:0}f=xc.prototype;
f.replace=function(a){this.remove=!0;if(this.Xd){a=q(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b.Xd){var c=q(this.Xd);for(d=c.next();!d.done;d=c.next())d=d.value,0<=b.Xd.indexOf(d)||(b.Xd.push(d),d.push(b))}else{b.Xd=this.Xd.slice();c=q(b.Xd);for(var d=c.next();!d.done;d=c.next())d.value.push(b)}a=q(this.Xd);for(d=a.next();!d.done;d=a.next())b=d.value,b.splice(b.indexOf(this),1);delete this.Xd}};
function Cc(a,b){var c=a.j+b.fa;b=a.g+b.$;return Math.atan2(Dc(a,c,b),a.getParameter(c,b))}function Ec(a,b,c){for(var d={ll:[],code:0},e=0;e<c.length;e++)d.ll.push(Dc(c[e],a,b)),1==Fc(c[e],a,b)&&(d.code+=1<<e);return d}
function Gc(a){var b;var c=Number.NEGATIVE_INFINITY;var d=Number.POSITIVE_INFINITY;var e=b=null;var h=a[a.length-1];a=q(a);for(var g=a.next();!g.done;g=a.next()){g=g.value;var k=g.j-g.g;k>c?(c=k,d=g.g,b=h,e=g):k==c&&g.g<d&&(d=g.g,b=h,e=g);h=g}c=b.type&7;d=e.type;return c<d?!0:c>d?!1:b.wa<e.wa?!0:b.wa>e.wa?!1:!0}
function Hc(a,b,c){var d=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,h=null,g=null;c=q(c);for(var k=c.next();!k.done;k=c.next()){k=k.value;var l=Ic(k,a,b);0>l?(l=-l,l<d&&(d=l,h=k)):0<l&&l<e&&(e=l,g=k)}--d;--e;return 0==d||0==e?0:h&&g?d<e?-1:d>e||h.B<g.j?1:-1:g?1:-1}
function Jc(a){var b=a.bound;if(!b){b=new Kc;for(var c=q(a),d=c.next();!d.done;d=c.next()){var e=d.value;b.Ha(e.B,e.A)}}b=b.l+(b.u-b.l>>1);e=c=Number.POSITIVE_INFINITY;a=q(a);for(d=a.next();!d.done;d=a.next())d=d.value,0<d.$?(d=Lc(d,b),d<e&&(e=d)):0>d.$&&(d=Lc(d,b),d<c&&(c=d));return new L(c+(e-c>>1),b)}
function Mc(a,b){var c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;b=q(b);for(var e=b.next();!e.done;e=b.next()){var h=e.value,g=Dc(a,h.j,h.g),k=Dc(a,h.B,h.A);e=a.getParameter(h.j,h.g);h=a.getParameter(h.B,h.A);if(g<k)g/=g-k,e=e*(1-g)+h*g,e<d&&(d=e);else if(g>k)g/=g-k,e=e*(1-g)+h*g,e>c&&(c=e);else if(0>g){if(e>h)return null}else if(0<g&&e<h)return null}return!isFinite(c)||!isFinite(d)||c>=d?null:[c,d]}
function Fc(a,b,c){if(void 0==a.type)return 0;switch(a.type){case 0:case 1:case 3:var d=0;a=(c-a.g)*-a.wa+a.j;b<=a&&(d+=2);b>=a&&(d+=1);return d;case 2:return d=0,b<=a.j&&(d+=2),b>=a.j&&(d+=1),d;case 4:case 5:case 7:return d=0,a=(b-a.j)*a.wa+a.g,c<=a&&(d+=2),c>=a&&(d+=1),d;case 6:return d=0,c<=a.g&&(d+=2),c>=a.g&&(d+=1),d;case 8:case 9:case 11:return d=0,a=(c-a.g)*-a.wa+a.j,b<=a&&(d+=1),b>=a&&(d+=2),d;case 10:return d=0,b<=a.j&&(d+=1),b>=a.j&&(d+=2),d;case 12:case 13:case 15:return d=0,a=(b-a.j)*
a.wa+a.g,c<=a&&(d+=1),c>=a&&(d+=2),d;case 14:return d=0,c<=a.g&&(d+=1),c>=a.g&&(d+=2),d}}
function Dc(a,b,c){switch(a.type){case 0:case 1:case 3:b-=a.j;c-=a.g;var d=Math.floor(c/a.$);b-=d*a.fa;c-=d*a.$;return(c*-a.wa-b)*a.Nb;case 2:return a.j-b;case 4:case 5:case 7:return b-=a.j,c-=a.g,d=Math.floor(b/-a.fa),b+=d*a.fa,c+=d*a.$,(b*a.wa-c)*a.Nb;case 6:return a.g-c;case 8:case 9:case 11:return b-=a.j,c-=a.g,d=Math.floor(c/-a.$),b+=d*a.fa,c+=d*a.$,(b-c*-a.wa)*a.Nb;case 10:return b-a.j;case 12:case 13:case 15:return b-=a.j,c-=a.g,d=Math.floor(b/a.fa),b-=d*a.fa,c-=d*a.$,(c-b*a.wa)*a.Nb;case 14:return c-
a.g}return NaN}f.getParameter=function(a,b){var c=this.type,d=this.fa,e=this.$;this.type=(c+12)%16;this.fa=e;this.$=-d;a=Dc(this,a,b);this.type=c;this.fa=d;this.$=e;return a};f.evaluate=function(a){a/=this.length;return(new L(this.j+(this.B-this.j)*a,this.g+(this.A-this.g)*a)).round()};f.nb=function(a,b){var c=(this.B-this.j)/this.length,d=(this.A-this.g)/this.length;return(new L(this.j+c*a-d*b,this.g+d*a+c*b)).round()};f.Hf=function(a,b){return(new L(this.getParameter(a,b),Dc(this,a,b))).round()};
function Nc(a){return(new L(a.B-a.j,a.A-a.g)).scale(5E4/a.length)}function Tc(a,b){return(new L(a.g-a.A,a.B-a.j)).scale(b/a.length)}f.Qf=function(a,b){a=this.getParameter(a,b);a/=this.length;return 0>=a?new L(this.j,this.g):1<=a?new L(this.B,this.A):(new L(this.j+(this.B-this.j)*a,this.g+(this.A-this.g)*a)).round()};
function Lc(a,b){var c=0;switch(a.type){case 0:case 1:case 3:if(b<a.g)break;if(b>=a.A)break;c-=a.j;b-=a.g;var d=Math.floor(b/a.$);c-=d*a.fa;b-=d*a.$;return b*-a.wa-c;case 2:if(b<a.g)break;if(b>=a.A)break;return a.j-c;case 4:case 5:if(b<a.g)break;if(b>=a.A)break;c-=a.j;b-=a.g;d=Math.floor(b/a.$);c-=d*a.fa;b-=d*a.$;return b/a.wa-c;case 7:if(b<a.A)break;if(b>=a.g)break;c-=a.j;b-=a.g;d=Math.floor(b/-a.$);c+=d*a.fa;b+=d*a.$;return b/a.wa-c;case 8:case 9:case 11:if(b<a.A)break;if(b>=a.g)break;c-=a.j;b-=
a.g;d=Math.floor(b/-a.$);c+=d*a.fa;b+=d*a.$;return b*-a.wa-c;case 10:if(b<a.A)break;if(b>=a.g)break;return a.j-c;case 12:case 13:if(b<a.A)break;if(b>=a.g)break;c-=a.j;b-=a.g;d=Math.floor(b/-a.$);c+=d*a.fa;b+=d*a.$;return b/a.wa-c;case 15:if(!(b<a.g||b>=a.A))return c-=a.j,b-=a.g,d=Math.floor(b/a.$),c-=d*a.fa,b-=d*a.$,b/a.wa-c}return NaN}
function Ic(a,b,c){switch(a.type){case 0:case 1:case 3:if(c<a.g)break;if(c>=a.A)break;b-=a.j;c-=a.g;var d=Math.floor(c/a.$);b-=d*a.fa;c-=d*a.$;a=c*-a.wa-b;if(0>a)break;return a+1;case 2:if(c<a.g)break;if(c>=a.A)break;a=a.j-b;if(0>a)break;return a+1;case 4:case 5:if(c<a.g)break;if(c>=a.A)break;b-=a.j;c-=a.g;d=Math.floor(c/a.$);b-=d*a.fa;c-=d*a.$;a=c/a.wa-b;if(0>a)break;return a+1;case 7:if(c<a.A)break;if(c>=a.g)break;b-=a.j;c-=a.g;d=Math.floor(c/-a.$);b+=d*a.fa;c+=d*a.$;a=c/a.wa-b;if(0>a)break;return-a-
1;case 8:case 9:case 11:if(c<a.A)break;if(c>=a.g)break;b-=a.j;c-=a.g;d=Math.floor(c/-a.$);b+=d*a.fa;c+=d*a.$;a=c*-a.wa-b;if(0>a)break;return-a-1;case 10:if(c<a.A)break;if(c>=a.g)break;a=a.j-b;if(0>a)break;return-a-1;case 12:case 13:if(c<a.A)break;if(c>=a.g)break;b-=a.j;c-=a.g;d=Math.floor(c/-a.$);b+=d*a.fa;c+=d*a.$;a=c/a.wa-b;if(0>a)break;return-a-1;case 15:if(!(c<a.g||c>=a.A||(b-=a.j,c-=a.g,d=Math.floor(c/a.$),b-=d*a.fa,c-=d*a.$,a=c/a.wa-b,0>a)))return a+1}return NaN}
f.log=function(){console.log(this.j+" "+this.g+" "+this.fa+" "+this.$+" type: "+this.type+" slope: "+this.wa)};f.da=function(){var a=this.bb(this.j,this.g,this.B,this.A);a.type=this.type;a.wa=this.wa;a.Nb=this.Nb;a.length=this.length;a.fa=this.fa;a.$=this.$;return a};function Uc(a){var b=a.bb(a.B,a.A,a.j,a.g);b.type=(a.type+8)%16;b.wa=a.wa;b.Nb=a.Nb;b.length=a.length;b.fa=-a.fa;b.$=-a.$;return b}f.bb=function(a,b,c,d){return new xc(a,b,c,d)};
function Vc(a){if(a.ca)return a.ca;var b=Uc(a);b.ca=a;return a.ca=b}function Wc(a,b){return a.type<b.type?-1:a.type>b.type?1:a.wa<b.wa?-1:a.wa>b.wa?1:0}function Xc(a){var b=[];a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(new L(c.j,c.g));return b}function Yc(a){var b=[];a.bound&&(b.bound=a.bound);a=q(a);for(var c=a.next();!c.done;c=a.next())b.unshift(Vc(c.value));return b}
function M(a,b,c,d){this.set(void 0===a?255:a,void 0===b?255:b,void 0===c?255:c,void 0===d?255:d);return this}function Zc(a,b){return a.r<b.r?-1:a.r>b.r?1:a.Ya<b.Ya?-1:a.Ya>b.Ya?1:a.ka<b.ka?-1:a.ka>b.ka?1:a.Ia<b.Ia?-1:a.Ia>b.Ia?1:0}M.prototype.set=function(a,b,c,d){255<a&&(a=255);0>a&&(a=0);255<b&&(b=255);0>b&&(b=0);255<c&&(c=255);0>c&&(c=0);255<d&&(d=255);0>d&&(d=0);this.r=a;this.Ya=b;this.ka=c;this.Ia=d;return this};
M.prototype.scale=function(a){this.r=Math.round(this.r*a);this.Ya=Math.round(this.Ya*a);this.ka=Math.round(this.ka*a);return this};M.prototype.save=function(a){Eb(a,this.r);Eb(a,this.Ya);Eb(a,this.ka);Eb(a,this.Ia);return this};function $c(a){return new M(Cb(a),Cb(a),Cb(a),Cb(a))}new M(0,0,0,0);var ad=new M(255,255,255,255),bd=new M(0,0,0,255),gd=new M(255,0,0,255);new M(255,255,0,255);new M(0,255,0,255);new M(0,255,255,255);new M(0,0,255,255);new M(255,0,255,255);
function hd(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.ti=this.si=this.Ge=this.Fe=this.Oc=this.Nc=this.Mb=this.Ec=this.jc=this.oe=this.ne=this.me=this.le=this.ke=this.je=0;this.Ca=this.vd=this.wd=this.ja=255;return this}
function id(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:a.z<b.z?-1:a.z>b.z?1:a.je<b.je?-1:a.je>b.je?1:a.ke<b.ke?-1:a.ke>b.ke?1:a.le<b.le?-1:a.le>b.le?1:a.me<b.me?-1:a.me>b.me?1:a.ne<b.ne?-1:a.ne>b.ne?1:a.oe<b.oe?-1:a.oe>b.oe?1:a.jc<b.jc?-1:a.jc>b.jc?1:a.Ec<b.Ec?-1:a.Ec>b.Ec?1:a.Mb<b.Mb?-1:a.Mb>b.Mb?1:a.Nc<b.Nc?-1:a.Nc>b.Nc?1:a.Oc<b.Oc?-1:a.Oc>b.Oc?1:a.Fe<b.Fe?-1:a.Fe>b.Fe?1:a.Ge<b.Ge?-1:a.Ge>b.Ge?1:a.si<b.si?-1:a.si>b.si?1:a.ti<b.ti?-1:a.ti>b.ti?1:a.ja<b.ja?-1:a.ja>b.ja?1:a.wd<b.wd?-1:a.wd>
b.wd?1:a.vd<b.vd?-1:a.vd>b.vd?1:a.Ca<b.Ca?-1:a.Ca>b.Ca?1:0}function jd(a,b,c){var d=1-c,e=new hd(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c);e.je=a.je*d+b.je*c;e.ke=a.ke*d+b.ke*c;e.le=a.le*d+b.le*c;e.me=a.me*d+b.me*c;e.ne=a.ne*d+b.ne*c;e.oe=a.oe*d+b.oe*c;e.jc=a.jc*d+b.jc*c;e.Ec=a.Ec*d+b.Ec*c;e.Mb=a.Mb*d+b.Mb*c;e.Nc=a.Nc*d+b.Nc*c;e.Oc=a.Oc*d+b.Oc*c;e.Fe=a.Fe*d+b.Fe*c;e.Ge=a.Ge*d+b.Ge*c;e.ja=a.ja*d+b.ja*c;e.wd=a.wd*d+b.wd*c;e.vd=a.vd*d+b.vd*c;e.Ca=a.Ca*d+b.Ca*c;return e}
hd.prototype.da=function(){var a=new hd(this.x,this.y,this.z);a.je=this.je;a.ke=this.ke;a.le=this.le;a.me=this.me;a.ne=this.ne;a.oe=this.oe;a.jc=this.jc;a.Ec=this.Ec;a.Mb=this.Mb;a.Nc=this.Nc;a.Oc=this.Oc;a.Fe=this.Fe;a.Ge=this.Ge;a.ja=this.ja;a.wd=this.wd;a.vd=this.vd;a.Ca=this.Ca;return a};function kd(a,b){a.ja=b.r;a.wd=b.Ya;a.vd=b.ka;a.Ca=b.Ia}function ld(a,b,c){a.Nc=b;a.Oc=c;return a};function L(a,b){this.x=void 0===a?0:a;this.y=void 0===b?0:b;return this}f=L.prototype;f.set=function(a,b){this.x=a;this.y=b;return this};f.Lf=function(){return this.x*this.x+this.y*this.y};f.length=function(){return Math.sqrt(this.Lf())};f.ra=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.ra(1);return this};f.scale=function(a){this.x*=a;this.y*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.sub=function(a){this.x=this.x-a.x;this.y=this.y-a.y;return this};f.da=function(){return new L(this.x,this.y)};f.Hd=function(a){a||(a=new Float32Array(2));a[0]=this.x;a[1]=this.y;return a};function md(a,b){return a.x*b.x+a.y*b.y}function nd(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0}f.Wi=function(){return 0!=this.x||0!=this.y?!1:!0};function G(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;return this}
function jc(a,b){return a.x*b.x+a.y*b.y+a.z*b.z}function pc(a,b,c){c.x=a.y*b.z-a.z*b.y;c.y=b.x*a.z-b.z*a.x;c.z=a.x*b.y-a.y*b.x;return c}function od(a,b,c){c.x=a.x-b.x;c.y=a.y-b.y;c.z=a.z-b.z;return c}function pd(a,b,c){var d=1-c;return new G(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c)}function qd(a,b){b.x=a.x;b.y=a.y;b.z=a.z}f=G.prototype;f.da=function(){return new G(this.x,this.y,this.z)};f.set=function(a,b,c){this.x=a;this.y=b;this.z=c;return this};
f.Lf=function(){return this.x*this.x+this.y*this.y+this.z*this.z};f.length=function(){return Math.sqrt(this.Lf())};f.ra=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.ra(1);return this};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.sub=function(a){return od(this,a,this)};f.Hd=function(a){a||(a=new Float32Array(3));a[0]=this.x;a[1]=this.y;a[2]=this.z;return a};f.Wi=function(){return 0!=this.x||0!=this.y||0!=this.z?!1:!0};function rd(a,b,c,d){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.b=void 0===d?0:d;return this}rd.prototype.set=function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.b=d;return this};
rd.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.b=Math.round(this.b);return this};rd.prototype.Hd=function(a){a||(a=new Float32Array(4));a[0]=this.x;a[1]=this.y;a[2]=this.z;a[3]=this.b;return a};rd.prototype.Wi=function(){return 0!=this.x||0!=this.y||0!=this.z||0!=this.b?!1:!0};function sd(){this.reset();return this}f=sd.prototype;
f.set=function(a){this.I=a.I;this.L=a.L;this.M=a.M;this.J=a.J;this.m11=a.m11;this.m12=a.m12;this.K=a.K;this.m21=a.m21;this.m22=a.m22;return this};f.reset=function(){this.I=1;this.J=this.M=this.L=0;this.m11=1;this.m21=this.K=this.m12=0;this.m22=1;return this};
f.rotate=function(a,b,c){var d=Math.cos(c);c=Math.sin(c);var e=c*this.I+d*this.L,h=d*this.J-c*this.m11,g=c*this.J+d*this.m11,k=d*this.K-c*this.m21,l=c*this.K+d*this.m21;this.I=d*this.I-c*this.L;this.L=e;this.J=h;this.m11=g;this.K=k;this.m21=l;d=Math.cos(b);b=Math.sin(b);c=d*this.M-b*this.L;e=b*this.m12+d*this.m11;h=d*this.m12-b*this.m11;g=b*this.m22+d*this.m21;k=d*this.m22-b*this.m21;this.L=b*this.M+d*this.L;this.M=c;this.m11=e;this.m12=h;this.m21=g;this.m22=k;b=Math.cos(a);a=Math.sin(a);d=a*this.M+
b*this.I;c=b*this.m12-a*this.J;e=a*this.m12+b*this.J;h=b*this.m22-a*this.K;g=a*this.m22+b*this.K;this.M=b*this.M-a*this.I;this.I=d;this.m12=c;this.J=e;this.m22=h;this.K=g;return this};f.oj=function(a,b){var c=Math.cos(b),d=Math.sin(b);b=1-c;var e=a.x*a.y,h=a.y*a.z,g=a.z*a.x,k=a.x*d,l=a.y*d;d*=a.z;this.I=a.x*a.x*b+c;this.L=e*b+d;this.M=g*b-l;this.J=e*b-d;this.m11=a.y*a.y*b+c;this.m12=h*b+k;this.K=g*b+l;this.m21=h*b-k;this.m22=a.z*a.z*b+c;return this};
f.lj=function(a,b){a=(new sd).oj(a,b);td(a,this,this);return this};f.scale=function(a,b,c){this.I*=a;this.L*=a;this.M*=a;this.J*=b;this.m11*=b;this.m12*=b;this.K*=c;this.m21*=c;this.m22*=c;return this};
f.Vi=function(a){a||(a=this);var b=this.Li();if(0==b)return a;var c=-(this.J*this.m22+this.m12*-this.K),d=this.J*this.m21+this.m11*-this.K,e=-(this.L*this.m22+this.M*-this.m21),h=this.I*this.m22+this.M*-this.K,g=-(this.I*this.m21+this.L*-this.K),k=this.L*this.m12+this.M*-this.m11,l=-(this.I*this.m12+this.M*-this.J),m=this.I*this.m11+this.L*-this.J;b=1/b;a.I=(this.m11*this.m22+this.m12*-this.m21)*b;a.J=c*b;a.K=d*b;a.L=e*b;a.m11=h*b;a.m21=g*b;a.M=k*b;a.m12=l*b;a.m22=m*b;return a};
f.Li=function(){return this.I*(this.m11*this.m22-this.m12*this.m21)+this.L*(this.m12*this.K-this.J*this.m22)+this.M*(this.J*this.m21-this.m11*this.K)};f.Hd=function(a){a||(a=new Float32Array(9));a[0]=this.I;a[1]=this.L;a[2]=this.M;a[3]=this.J;a[4]=this.m11;a[5]=this.m12;a[6]=this.K;a[7]=this.m21;a[8]=this.m22;return a};
function td(a,b,c){var d=a.L*b.I+a.m11*b.L+a.m21*b.M,e=a.M*b.I+a.m12*b.L+a.m22*b.M,h=a.I*b.J+a.J*b.m11+a.K*b.m12,g=a.L*b.J+a.m11*b.m11+a.m21*b.m12,k=a.M*b.J+a.m12*b.m11+a.m22*b.m12,l=a.I*b.K+a.J*b.m21+a.K*b.m22,m=a.L*b.K+a.m11*b.m21+a.m21*b.m22,n=a.M*b.K+a.m12*b.m21+a.m22*b.m22;c.I=a.I*b.I+a.J*b.L+a.K*b.M;c.J=h;c.K=l;c.L=d;c.m11=g;c.m21=m;c.M=e;c.m12=k;c.m22=n;return c}
f.transform=function(a,b){return b.set(this.I*a.x+this.J*a.y+this.K*a.z,this.L*a.x+this.m11*a.y+this.m21*a.z,this.M*a.x+this.m12*a.y+this.m22*a.z)};f.gg=function(){return new G(this.I,this.L,this.M)};f.hg=function(){return new G(this.J,this.m11,this.m12)};f.xe=function(){return new G(this.K,this.m21,this.m22)};f.pg=function(a){this.I=a.x;this.L=a.y;this.M=a.z;return this};f.qg=function(a){this.J=a.x;this.m11=a.y;this.m12=a.z;return this};f.rg=function(a){this.K=a.x;this.m21=a.y;this.m22=a.z;return this};
f.save=function(a){var b=new Uint8Array((new Float32Array([this.I,this.L,this.M,this.J,this.m11,this.m12,this.K,this.m21,this.m22])).buffer);a.set(b,a.position);a.position+=36};f.load=function(a){a=a.slice(a.position,a.position+=36);a=new Float32Array(a.buffer);a=q(a);this.I=a.next().value;this.L=a.next().value;this.M=a.next().value;this.J=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.K=a.next().value;this.m21=a.next().value;this.m22=a.next().value};new sd;
function R(){this.reset();return this}f=R.prototype;f.set=function(a){this.I=a.I;this.L=a.L;this.M=a.M;this.cb=a.cb;this.J=a.J;this.m11=a.m11;this.m12=a.m12;this.m13=a.m13;this.K=a.K;this.m21=a.m21;this.m22=a.m22;this.m23=a.m23;this.H=a.H;this.m31=a.m31;this.m32=a.m32;this.m33=a.m33;return this};f.reset=function(){this.I=1;this.J=this.cb=this.M=this.L=0;this.m11=1;this.m21=this.K=this.m13=this.m12=0;this.m22=1;this.m32=this.m31=this.H=this.m23=0;this.m33=1;return this};
function ud(a){sd.prototype.reset.call(a)}f.translate=function(a,b,c){this.H+=a;this.m31+=b;this.m32+=c;return this};f.rotate=sd.prototype.rotate;f.oj=sd.prototype.oj;f.lj=sd.prototype.lj;f.scale=sd.prototype.scale;
f.Vi=function(a){function b(D,I,J,O,pa,ra,ca,da,Fb){return D*(pa*Fb-ra*da)+I*(ra*ca-O*Fb)+J*(O*da-pa*ca)}a||(a=this);var c=this.Li();if(0==c)return a;var d=b(this.m11,this.m12,this.m13,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),e=-b(this.J,this.m12,this.m13,this.K,this.m22,this.m23,this.H,this.m32,this.m33),h=b(this.J,this.m11,this.m13,this.K,this.m21,this.m23,this.H,this.m31,this.m33),g=-b(this.J,this.m11,this.m12,this.K,this.m21,this.m22,this.H,this.m31,this.m32),k=-b(this.L,this.M,
this.cb,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),l=b(this.I,this.M,this.cb,this.K,this.m22,this.m23,this.H,this.m32,this.m33),m=-b(this.I,this.L,this.cb,this.K,this.m21,this.m23,this.H,this.m31,this.m33),n=b(this.I,this.L,this.M,this.K,this.m21,this.m22,this.H,this.m31,this.m32),r=b(this.L,this.M,this.cb,this.m11,this.m12,this.m13,this.m31,this.m32,this.m33),p=-b(this.I,this.M,this.cb,this.J,this.m12,this.m13,this.H,this.m32,this.m33),u=b(this.I,this.L,this.cb,this.J,this.m11,this.m13,
this.H,this.m31,this.m33),z=-b(this.I,this.L,this.M,this.J,this.m11,this.m12,this.H,this.m31,this.m32),y=-b(this.L,this.M,this.cb,this.m11,this.m12,this.m13,this.m21,this.m22,this.m23),x=b(this.I,this.M,this.cb,this.J,this.m12,this.m13,this.K,this.m22,this.m23),C=-b(this.I,this.L,this.cb,this.J,this.m11,this.m13,this.K,this.m21,this.m23),A=b(this.I,this.L,this.M,this.J,this.m11,this.m12,this.K,this.m21,this.m22);c=1/c;a.I=d*c;a.J=e*c;a.K=h*c;a.H=g*c;a.L=k*c;a.m11=l*c;a.m21=m*c;a.m31=n*c;a.M=r*c;a.m12=
p*c;a.m22=u*c;a.m32=z*c;a.cb=y*c;a.m13=x*c;a.m23=C*c;a.m33=A*c;return a};
f.Li=function(){var a=this.I*(this.m11*this.m22*this.m33+this.m12*this.m23*this.m31+this.m13*this.m21*this.m32-(this.m13*this.m22*this.m31+this.m11*this.m23*this.m32+this.m12*this.m21*this.m33));a-=this.L*(this.J*this.m22*this.m33+this.m12*this.m23*this.H+this.m13*this.K*this.m32-(this.m13*this.m22*this.H+this.J*this.m23*this.m32+this.m12*this.K*this.m33));a+=this.M*(this.J*this.m21*this.m33+this.m11*this.m23*this.H+this.m13*this.K*this.m31-(this.m13*this.m21*this.H+this.J*this.m23*this.m31+this.m11*
this.K*this.m33));return a-=this.cb*(this.J*this.m21*this.m32+this.m11*this.m22*this.H+this.m12*this.K*this.m31-(this.m12*this.m21*this.H+this.J*this.m22*this.m31+this.m11*this.K*this.m32))};f.Hd=function(a){a||(a=new Float32Array(16));a[0]=this.I;a[1]=this.L;a[2]=this.M;a[3]=this.cb;a[4]=this.J;a[5]=this.m11;a[6]=this.m12;a[7]=this.m13;a[8]=this.K;a[9]=this.m21;a[10]=this.m22;a[11]=this.m23;a[12]=this.H;a[13]=this.m31;a[14]=this.m32;a[15]=this.m33;return a};
function Cd(a,b,c){var d=a.L*b.I+a.m11*b.L+a.m21*b.M+a.m31*b.cb,e=a.M*b.I+a.m12*b.L+a.m22*b.M+a.m32*b.cb,h=a.cb*b.I+a.m13*b.L+a.m23*b.M+a.m33*b.cb,g=a.I*b.J+a.J*b.m11+a.K*b.m12+a.H*b.m13,k=a.L*b.J+a.m11*b.m11+a.m21*b.m12+a.m31*b.m13,l=a.M*b.J+a.m12*b.m11+a.m22*b.m12+a.m32*b.m13,m=a.cb*b.J+a.m13*b.m11+a.m23*b.m12+a.m33*b.m13,n=a.I*b.K+a.J*b.m21+a.K*b.m22+a.H*b.m23,r=a.L*b.K+a.m11*b.m21+a.m21*b.m22+a.m31*b.m23,p=a.M*b.K+a.m12*b.m21+a.m22*b.m22+a.m32*b.m23,u=a.cb*b.K+a.m13*b.m21+a.m23*b.m22+a.m33*b.m23,
z=a.I*b.H+a.J*b.m31+a.K*b.m32+a.H*b.m33,y=a.L*b.H+a.m11*b.m31+a.m21*b.m32+a.m31*b.m33,x=a.M*b.H+a.m12*b.m31+a.m22*b.m32+a.m32*b.m33,C=a.cb*b.H+a.m13*b.m31+a.m23*b.m32+a.m33*b.m33;c.I=a.I*b.I+a.J*b.L+a.K*b.M+a.H*b.cb;c.J=g;c.K=n;c.H=z;c.L=d;c.m11=k;c.m21=r;c.m31=y;c.M=e;c.m12=l;c.m22=p;c.m32=x;c.cb=h;c.m13=m;c.m23=u;c.m33=C}
f.transform=function(a,b){return b.set(this.I*a.x+this.J*a.y+this.K*a.z+this.H*a.b,this.L*a.x+this.m11*a.y+this.m21*a.z+this.m31*a.b,this.M*a.x+this.m12*a.y+this.m22*a.z+this.m32*a.b,this.cb*a.x+this.m13*a.y+this.m23*a.z+this.m33*a.b)};f.nb=function(a,b){return b.set(this.I*a.x+this.J*a.y+this.K*a.z+this.H,this.L*a.x+this.m11*a.y+this.m21*a.z+this.m31,this.M*a.x+this.m12*a.y+this.m22*a.z+this.m32)};
function Dd(a,b,c){c.set(a.I*b.x+a.J*b.y+a.K*b.z,a.L*b.x+a.m11*b.y+a.m21*b.z,a.M*b.x+a.m12*b.y+a.m22*b.z)}f.gg=sd.prototype.gg;f.hg=sd.prototype.hg;f.xe=sd.prototype.xe;function Ed(a){return new G(a.H,a.m31,a.m32)}f.pg=sd.prototype.pg;f.qg=sd.prototype.qg;f.rg=sd.prototype.rg;function Fd(a,b){a.H=b.x;a.m31=b.y;a.m32=b.z}
f.save=function(a){var b=new Uint8Array((new Float32Array([this.I,this.L,this.M,this.cb,this.J,this.m11,this.m12,this.m13,this.K,this.m21,this.m22,this.m23,this.H,this.m31,this.m32,this.m33])).buffer);a.set(b,a.position);a.position+=64};
f.load=function(a){a=a.slice(a.position,a.position+=64);a=new Float32Array(a.buffer);a=q(a);this.I=a.next().value;this.L=a.next().value;this.M=a.next().value;this.cb=a.next().value;this.J=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.m13=a.next().value;this.K=a.next().value;this.m21=a.next().value;this.m22=a.next().value;this.m23=a.next().value;this.H=a.next().value;this.m31=a.next().value;this.m32=a.next().value;this.m33=a.next().value};var Gd=new R;
function Kc(){this.s=Number.POSITIVE_INFINITY;this.v=Number.NEGATIVE_INFINITY;this.l=Number.POSITIVE_INFINITY;this.u=Number.NEGATIVE_INFINITY}Kc.prototype.Ha=function(a,b){a<this.s&&(this.s=a);a>this.v&&(this.v=a);b<this.l&&(this.l=b);b>this.u&&(this.u=b);return this};Kc.prototype.ik=function(a){this.Ha(a.s,a.l);this.Ha(a.v,a.u)};Kc.prototype.da=function(){var a=new Kc;a.s=this.s;a.v=this.v;a.l=this.l;a.u=this.u;return a};
Kc.prototype.Oe=function(a,b){return a<=this.s||a>=this.v||b<=this.l||b>=this.u?!1:!0};function Hd(){this.s=Number.POSITIVE_INFINITY;this.v=Number.NEGATIVE_INFINITY;this.l=Number.POSITIVE_INFINITY;this.u=Number.NEGATIVE_INFINITY;this.C=Number.POSITIVE_INFINITY;this.G=Number.NEGATIVE_INFINITY}Hd.prototype.Ha=function(a,b,c){a<this.s&&(this.s=a);a>this.v&&(this.v=a);b<this.l&&(this.l=b);b>this.u&&(this.u=b);c<this.C&&(this.C=c);c>this.G&&(this.G=c);return this};
Hd.prototype.ik=function(a){this.Ha(a.s,a.l,a.C);this.Ha(a.v,a.u,a.G)};Hd.prototype.da=function(){var a=new Hd;a.s=this.s;a.v=this.v;a.l=this.l;a.u=this.u;a.C=this.C;a.G=this.G;return a};function Id(a,b){return a.s>=b.v||a.v<=b.s||a.l>=b.u||a.u<=b.l||a.C>=b.G||a.G<=b.C?!1:!0}Hd.prototype.Oe=function(a,b){return a<=this.s||a>=this.v||b<=this.l||b>=this.u||void 0<=this.C||void 0>=this.G?!1:!0};t.Node=function(a){this.name=a;this.children=this.parent=null;this.Fk=new gb(this);this.La=1;this.ia=t.ia;this.xa=-2147483648;return this};f=t.Node.prototype;f.create=function(){};f.remove=function(){S(this,null)};function Jd(a,b){if(0!=b.call(a)&&a.children)for(a=a.children.first();null!=a.item;a=a.next)Jd(a.item,b)}f.step=function(){};f.Ze=function(){};f.Xa=function(){};function Kd(a){Jd(a,function(){if(!this.rh())return!1;this.Xa(void 0)})}f.rh=function(){return!this.La||this.ia.xa<t.h?!1:!0};
function S(a,b){if(a.parent)return a.parent=b,t.jj.push(a),a;if(b)return a.parent=b,Ld(a)}function Ld(a){ib(a.Fk);if(!a.parent)return a;a.parent.children||(a.parent.children=new fb);jb(a.parent.children,a.Fk);return a}function Md(a,b){a.ia=b;if(a.children)for(a=a.children.first();null!=a.item;a=a.next)Md(a.item,b)}
f.log=function(){this.name?console.group(this.constructor.name+": "+this.name):console.group(this.constructor.name);if(this.children)for(var a=this.children.first();null!=a.item;a=a.next)a.item.log();console.groupEnd()};t.za=function(a){t.Node.call(this,a);this.transform=new R;this.Ga=null;this.O=new R};t.za.prototype=Object.create(t.Node.prototype);t.za.prototype.constructor=t.za;function Nd(a,b){var c=a.sg=new t.kf;c.ia=a.ia;c.ab=1.75*b;c.Ga=a.O;S(c,t.ph)}
t.za.prototype.remove=function(){this.sg&&this.sg.remove();t.Node.prototype.remove.call(this)};t.za.prototype.save=function(a){Db(a,"NG.Node3D");this.O.save()};t.za.prototype.step=function(){Od(this)};function Od(a){a.Ga?Cd(a.Ga,a.transform,a.O):a.O.set(a.transform)}t.ia={xa:NaN,sb:new G(1,1,1)};t.jj=[];t.nj=new t.Node("schedule");t.Ic=S(new t.Node("scene"),t.nj);t.inputs=S(new t.Node("inputs"),t.nj);function Pd(){this.Ab=new db(zb);this.nc=new db(zb);this.sa=new db(zb);this.P=new db(zb);this.ha=new db(zb);return this}
Pd.prototype.save=function(a){Sb(a,this.Ab.elements.length);for(var b=0;b<this.Ab.elements.length;b++)this.Ab.elements[b].save(a);Sb(a,this.nc.elements.length);for(b=0;b<this.nc.elements.length;b++)this.nc.elements[b].save(a);Sb(a,this.sa.elements.length);for(b=0;b<this.sa.elements.length;b++)this.sa.elements[b].save(a);Sb(a,this.P.elements.length);for(b=0;b<this.P.elements.length;b++)this.P.elements[b].save(a);Sb(a,this.ha.elements.length);for(b=0;b<this.ha.elements.length;b++)this.ha.elements[b].save(a)};
Pd.prototype.load=function(a){this.nf=0;console.log(t.ma.od.format(performance.now())+" materials...");var b=Ob(a);for(var c=0;c<b;c++){var d=new Qd;d.load(a);this.Ab.replace(d)}console.log(t.ma.od.format(performance.now())+" models...");b=Ob(a);for(c=0;c<b;c++)d=new Rd,d.load(a),this.nc.replace(d);console.log(t.ma.od.format(performance.now())+" shaders...");b=Ob(a);for(c=0;c<b;c++)d=new ee,d.load(a),this.sa.replace(d);console.log(t.ma.od.format(performance.now())+" textures...");b=Ob(a);this.nf+=
b;for(c=0;c<b;c++)d=new t.ge,d.Xg=this,d.load(a),this.P.replace(d);console.log(t.ma.od.format(performance.now())+" audio...");b=Ob(a);this.nf+=b;for(c=0;c<b;c++)d=new t.Audio,d.Xg=this,d.load(a),this.ha.replace(d);0==this.nf&&this.ready&&this.ready.call(this)};function fe(a){a.nf--;0<a.nf||a.ready&&a.ready.call(a)};t.Da={difficulty:1,musicEnabled:1,viewportFitWindow:1,viewportSize:16,lightingFancy:1,mouseRaw:1,mouseDPI:1600,mouseScale:3};var ge=parseFloat(window.localStorage.getItem("version"));(isNaN(ge)||.006>ge)&&window.localStorage.clear();window.localStorage.setItem("version",.007);for(var he in t.Da){var ie=window.localStorage.getItem(he);null==ie?window.localStorage.setItem(he,t.Da[he]):t.Da[he]=parseFloat(ie)}t.ji=function(){t.Il=4294967296/(t.Da.mouseDPI*t.Da.mouseScale)};t.ji();t.Qg={};
t.Qg.overflowX=document.body.style.overflowX;t.Qg.overflowY=document.body.style.overflowY;t.Qg.userSelect=document.body.style.userSelect;v=t.canvas.getContext("webgl2",{alpha:!1,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1,lm:!0});t.hc={};t.h=NaN;t.Ph=0;t.Vg=1E3/60;t.xa=-2147483648;t.Rf=function(){2147483647==t.xa&&(t.xa=-2147483648);t.xa++};t.Xb=new M(0,0,0,0);t.Bl=new M(255,255,255,0);t.c=new Pd;t.D=null;t.wi=null;t.Xj=null;t.ua=null;t.viewport=null;
t.Ml=function(){t.canvas.width=480;t.canvas.height=296;t.Kg=new wc(480,296,null);t.nh.width=480;t.nh.height=296;t.nh.create();t.Ie.style.width=t.canvas.width+"px";t.Ie.style.height=t.canvas.height+"px";document.body.style.width=t.canvas.width+"px";t.Uf()};t.sk=0;
t.Uf=function(a){var b=Math.min(window.innerWidth/document.body.clientWidth,window.innerHeight/document.body.clientHeight);b=Math.floor(8*b);b=Math.max(b,12);var c=t.Da.viewportFitWindow?b:t.Da.viewportSize;a&&(c+=a,t.Da.viewportFitWindow=0,t.hh?t.hh.checked=!1:window.localStorage.setItem("viewportFitWindow",0));b=t.sk=Math.max(t.sk,b);c=Ya(c,12,b);t.Da.viewportSize=c;t.hh||window.localStorage.setItem("viewportSize",c);document.body.style.transform="scale("+c/8+")"};
window.onresize=function(){document.body.style.left=(window.innerWidth-t.canvas.width>>1)+"px";t.Uf()};t.qh=function(a){v.viewport(a.x,a.y,a.b,a.i);t.viewport=a;t.hc.Tc.N("viewport",new L(a.b,a.i),!0);t.hc.Tc.upload()};t.Hk=function(a){t.ua=a};t.eb=function(a){t.D!=a&&(t.D=a.bind())};t.Cb=function(a){t.wi!=a&&(t.wi=a.bind())};t.De=function(a){a&&t.Xj!=a&&(t.Xj=a.bind())};
t.Wb=function(a,b){v.activeTexture(v.TEXTURE0+a);b?(v.bindTexture(v.TEXTURE_2D,b.object),t.D.N("enableTexture"+a,1,!0)):(v.bindTexture(v.TEXTURE_2D,null),t.D.N("enableTexture"+a,0,!0))};t.xb=function(a){if(t.Fa!=a){switch(a){case 0:v.disable(v.BLEND);break;case 1:v.enable(v.BLEND);v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA);break;case 2:v.enable(v.BLEND),v.blendFunc(v.SRC_ALPHA,v.ONE_MINUS_SRC_ALPHA)}t.Fa=a}};
t.Sb=function(a){if(t.depth!=a){switch(a){case 0:v.disable(v.DEPTH_TEST);break;case 1:v.enable(v.DEPTH_TEST);v.depthMask(!1);break;case 2:v.enable(v.DEPTH_TEST),v.depthMask(!0)}t.depth=a}};t.$b=function(a){if(t.facing!=a){switch(a){case 0:v.disable(v.CULL_FACE);break;case 1:v.enable(v.CULL_FACE);v.frontFace(v.CCW);break;case 2:v.enable(v.CULL_FACE),v.frontFace(v.CW)}t.facing=a}};for(var je=0;4>je;je++)v.enableVertexAttribArray(je);v.clearColor(0,0,0,0);v.depthFunc(v.LEQUAL);
t.start=function(){t.hc.Tc.create(["u_eyeMatrix","u_viewMatrix","u_cameraPos","u_viewport"]);t.hc.Dk.create([]);requestAnimationFrame(function(a){t.Se.time=a;t.Se.$l=a;t.Sh=a;t.loop(a)})};t.Se={};t.Se.time=0;t.Se.wb=0;t.Se.kk=0;t.Se.Ll=function(a){this.$l=a;a>=this.time+1E3&&(this.kk=this.wb=0,this.time+=1E3);this.wb++};t.paused=!0;
t.loop=function(a){var b=(t.Sh-a)/t.Vg;if(!(.5<b))if(-.5>b&&(t.Sh=a,t.Se.kk++),t.Sh+=t.Vg,2==t.li&&t.a.pause(),t.paused)t.a&&t.a.Yl(),t.Ph++;else{t.Se.Ll(a);if(t.Jk){t.Jk--;requestAnimationFrame(t.loop);return}t.nl=a+t.Vg;Jd(t.nj,function(){this.step()});a=q(t.jj);for(b=a.next();!b.done;b=a.next())Ld(b.value);t.jj.length=0;t.h++}requestAnimationFrame(t.loop)};t.qm=function(a,b){for(var c=[],d=Math.floor(640/a);1920>=a*d;d++)c.push([a*d,b*d]);return c};function ke(a,b){a=v.createShader(a);v.shaderSource(a,b);v.compileShader(a);if(v.getShaderParameter(a,v.COMPILE_STATUS))return a;console.log(b);console.log(v.getShaderInfoLog(a));v.deleteShader(a)}function ee(){this.name=void 0;this.Pa={};this.vi={}}f=ee.prototype;
f.create=function(){this.Sl=ke(v.VERTEX_SHADER,this.vj);this.Rl=ke(v.FRAGMENT_SHADER,this.uj);var a=this.Rl;var b=this.im;var c=v.createProgram();v.attachShader(c,this.Sl);v.attachShader(c,a);if(b)for(a=0;a<b.length;a++)v.bindAttribLocation(c,a,b[a]);else v.bindAttribLocation(c,0,"a_position"),v.bindAttribLocation(c,1,"a_texture0"),v.bindAttribLocation(c,2,"a_color"),v.bindAttribLocation(c,3,"a_basisZ");v.linkProgram(c);v.getProgramParameter(c,v.LINK_STATUS)?b=c:(console.log(v.getProgramInfoLog(c)),
v.deleteShader(c),b=void 0);this.ng=b;t.eb(this)};
f.N=function(a,b,c){a="u_"+a;this.Pa.hasOwnProperty(a)||(this.Pa[a]=v.getUniformLocation(this.ng,a));var d=this.vi[a];c?d!=b&&(this.vi[a]=b,v.uniform1i(this.Pa[a],b)):isNaN(b)?b instanceof Float32Array?v.uniform3fv(this.Pa[a],b):b instanceof R?v.uniformMatrix4fv(this.Pa[a],!1,b.Hd()):b instanceof M?(this.vi[a]=b,v.uniform4f(this.Pa[a],b.r/255,b.Ya/255,b.ka/255,b.Ia/255)):b instanceof rd?v.uniform4f(this.Pa[a],b.x,b.y,b.z,b.b):b instanceof G?v.uniform3f(this.Pa[a],b.x,b.y,b.z):b instanceof L&&v.uniform2f(this.Pa[a],
b.x,b.y):d!=b&&(this.vi[a]=b,v.uniform1f(this.Pa[a],b))};f.bind=function(){v.useProgram(this.ng);return this};f.load=function(a){this.name=Bb(a);this.vj=Gb(a);this.uj=Gb(a);console.log(t.ma.od.format(performance.now())+" compile shader...");this.create();delete this.vj;delete this.uj};f.save=function(a){Db(a,this.name);Lb(a,this.vj);Lb(a,this.uj)};function le(){this.usage=this.target=null;this.hk=v.createBuffer();this.buffer=null}le.prototype.bind=function(){v.bindBuffer(this.target,this.hk);return this};function me(a,b){a.buffer=new ArrayBuffer(b);v.bufferData(a.target,a.buffer,a.usage)}le.prototype.upload=function(){v.bufferSubData(this.target,0,this.buffer);return this};function ne(){le.call(this);this.target=v.ARRAY_BUFFER;this.usage=v.STATIC_DRAW;this.Ib=32;t.wi=null;t.Cb(this)}ne.prototype=Object.create(le.prototype);
ne.prototype.constructor=ne;ne.prototype.bind=function(){le.prototype.bind.call(this);v.vertexAttribPointer(0,3,v.FLOAT,!1,this.Ib,0);v.vertexAttribPointer(1,2,v.FLOAT,!1,this.Ib,12);v.vertexAttribPointer(2,4,v.UNSIGNED_BYTE,!0,this.Ib,20);v.vertexAttribPointer(3,3,v.SHORT,!0,this.Ib,24);return this};ne.prototype.upload=function(a){this.write(a);le.prototype.upload.call(this);return this};
function oe(a){var b=t.wi;b.buffer=new ArrayBuffer(a.length*b.Ib);b.write(a);v.bufferData(b.target,b.buffer,b.usage)}
ne.prototype.write=function(a,b){b*=this.Ib;var c=new Float32Array(this.buffer,b),d=new Int16Array(this.buffer,b);b=new Uint8Array(this.buffer,b);for(var e=0;e<a.length;e++){var h=a[e];var g=c;var k=e*this.Ib>>>2;g[k]=h.x;g[k+1]=h.y;g[k+2]=h.z;k=e*this.Ib+12>>>2;g[k]=h.Nc;g[k+1]=h.Oc;g=b;k=e*this.Ib+20;g[k]=h.ja;g[k+1]=h.wd;g[k+2]=h.vd;g[k+3]=h.Ca;g=d;k=e*this.Ib+24>>>1;g[k]=h.jc;g[k+1]=h.Ec;g[k+2]=h.Mb}return this};
function pe(){le.call(this);this.target=v.ELEMENT_ARRAY_BUFFER;this.usage=v.STATIC_DRAW;t.De(this)}pe.prototype=Object.create(le.prototype);pe.prototype.constructor=pe;pe.prototype.upload=function(a){(new Uint16Array(this.buffer)).set(a);return le.prototype.upload.call(this)};function qe(){le.call(this);this.target=v.UNIFORM_BUFFER;this.usage=v.DYNAMIC_DRAW;this.Ei=null;this.ri=this.Dh=0;this.Pa={};le.prototype.bind.call(this)}qe.prototype=Object.create(le.prototype);qe.prototype.constructor=qe;
qe.prototype.create=function(a){v.bindBufferBase(this.target,this.Dh,this.hk);for(var b=0;b<t.c.sa.elements.length;b++){var c=t.c.sa.elements[b];t.eb(c);v.uniformBlockBinding(c.ng,v.getUniformBlockIndex(c.ng,this.Ei),this.Dh)}b=v.getUniformIndices(t.D.ng,a);c=q(b);for(var d=c.next();!d.done;d=c.next())if(d.value==v.INVALID_INDEX)return console.log("uniform not found ",this),this;b=v.getActiveUniforms(t.D.ng,b,v.UNIFORM_OFFSET);for(c=0;c<a.length;c++)this.Pa[a[c]]=b[c];return this};
qe.prototype.N=function(a,b,c){a="u_"+a;b instanceof R?b.Hd(new Float32Array(this.buffer,this.Pa[a],16)):b instanceof M||(b instanceof rd?b.Hd(new Float32Array(this.buffer,this.Pa[a],4)):b instanceof G||b instanceof L&&(c?b.Hd(new Uint32Array(this.buffer,this.Pa[a],2)):b.Hd(new Float32Array(this.buffer,this.Pa[a],2))))};qe.prototype.upload=function(){le.prototype.bind.call(this);v.bufferData(this.target,this.buffer.byteLength,this.usage);v.bufferSubData(this.target,0,this.buffer);return this};
var re,se=re=new ne;se.usage=v.STATIC_DRAW;se.wh=[];var te,ue=te=new pe;ue.usage=v.STATIC_DRAW;ue.elements=[];var ve=t.hc.Tc=new qe;ve.Ei="Common";ve.Dh=0;ve.ri=160;me(ve,ve.ri);var we=t.hc.Dk=new qe;we.Ei="PortalLights";we.Dh=1;we.ri=48;me(we,6144);function Qd(){this.name="defaultMaterial";this.Md=new M(255,255,255,255);this.rd=new M(255,255,255,51);this.Kc=4;this.Lc=1;this.Bf=new M(0,0,0,0);this.Fa=0;return this}function xe(a,b){if(a.name<b.name)return-1;if(a.name>b.name)return 1;var c=Zc(a.Md,b.Md);if(0!=c)return c;c=Zc(a.rd,b.rd);if(0!=c)return c;c=Zc(a.Bf,b.Bf);return 0!=c?c:a.Kc<b.Kc?-1:a.Kc>b.Kc?1:a.Lc<b.Lc?-1:a.Lc>b.Lc?1:a.Fa<b.Fa?-1:a.Fa>b.Fa?1:0}
Qd.prototype.da=function(){var a=new Qd;a.Md=this.Md;a.rd=this.rd;a.Kc=this.Kc;a.Lc=this.Lc;a.Bf=this.Bf;a.Fa=this.Fa;return a};Qd.prototype.bind=function(){t.D.N("color",this.Md);t.D.N("specularColor",this.rd);t.D.N("specularExponent",this.Kc);t.D.N("specularSheen",this.Lc);t.D.N("emissiveColor",this.Bf)};Qd.prototype.save=function(a){Db(a,this.name);this.Md.save(a);this.rd.save(a);Sb(a,Math.floor(1024*this.Kc));Eb(a,Math.floor(255*this.Lc));this.Bf.save(a);Eb(a,this.Fa);return a};
Qd.prototype.load=function(a){this.name=Bb(a);this.Md=$c(a);this.rd=$c(a);this.Kc=Ob(a)/1024;this.Lc=Cb(a)/255;this.Bf=$c(a);this.Fa=Cb(a)};var ye=t.c,Ke=new Qd;ye.Ab.replace(Ke);t.ge=function(){this.Xh=v.RGBA8;this.height=this.width=2;this.border=0;this.format=v.RGBA;this.type=v.UNSIGNED_BYTE;this.data=null;this.Te=t.ge.Te;this.kg=t.ge.kg;this.Hj=this.Gj=v.CLAMP_TO_EDGE};t.ge.Te=v.NEAREST;t.ge.kg=v.NEAREST;
t.ge.prototype.create=function(){this.Xg&&fe(this.Xg);v.activeTexture(v.TEXTURE0);this.object=v.createTexture();v.bindTexture(v.TEXTURE_2D,this.object);v.texImage2D(v.TEXTURE_2D,0,this.Xh,this.width,this.height,this.border,this.format,this.type,this.data);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,this.Te);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,this.kg);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,this.Gj);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,this.Hj);9984<=this.Te&&9987>=
this.Te&&v.generateMipmap(v.TEXTURE_2D)};
t.ge.prototype.load=function(a){this.name=Bb(a);this.Xh=Ob(a);this.width=Ob(a);this.height=Ob(a);this.border=Ob(a);this.format=Ob(a);this.type=Ob(a);this.Te=Ob(a);this.kg=Ob(a);this.Gj=Ob(a);this.Hj=Ob(a);this.Kd=new M(Cb(a),Cb(a),Cb(a),Cb(a));var b=Hb(a);a=a.slice(a.position,a.position+=b);a=new Blob([a],{type:"image/png"});this.data=new Image;this.data.parent=this;this.data.onload=function(){this.parent.width=this.width;this.parent.height=this.height;this.parent.create()};this.data.src=URL.createObjectURL(a)};
t.ge.prototype.save=function(a){Db(a,this.name);Sb(a,this.Xh);Sb(a,this.width);Sb(a,this.height);Sb(a,this.border);Sb(a,this.format);Sb(a,this.type);Sb(a,this.Te);Sb(a,this.kg);Sb(a,this.Gj);Sb(a,this.Hj);Eb(a,this.Kd.r);Eb(a,this.Kd.Ya);Eb(a,this.Kd.ka);Eb(a,this.Kd.Ia);Mb(a,this.Ug.length);a.set(this.Ug,a.position);a.position+=this.Ug.length};
t.Wh=function(a){a.fk=[];a.gk=[];for(var b=0,c=0,d=0;d<a.Rd.length;d++)b+a.Rd[d]+1>a.width&&(b=0,c+=a.ye+1),a.fk.push(b/a.width),a.gk.push(c/a.width),b+=a.Rd[d]+1,a.Rd[d]/=a.width,a.jg[d]/=a.width,a.If[d]/=a.width;a.ye/=a.height;a.dk=function(e){switch(e){case "0":return 0;case "1":return 1;case "2":return 2;case "3":return 3;case "4":return 4;case "5":return 5;case "6":return 6;case "7":return 7;case "8":return 8;case "9":return 9;case ",":return 10;case "/":return 11;case " ":return 12}return-1}};
t.Qh=function(a,b,c){for(var d=[],e=0,h=0;h<b.length;h++){var g=a.dk(b.charAt(h)),k=a.fk[g],l=a.gk[g],m=a.Rd[g],n=a.ye;e+=a.jg[g];c&&(l+=.5);d.push(ld(new hd(e,0+n,0),k,l));d.push(ld(new hd(e,0,0),k,l+n));d.push(ld(new hd(e+m,0,0),k+m,l+n));d.push(ld(new hd(e+m,0,0),k+m,l+n));d.push(ld(new hd(e+m,0+n,0),k+m,l));d.push(ld(new hd(e,0+n,0),k,l));e+=m;e+=a.If[g]}d.width=e;d.height=a.ye;d.Vf=a;return d};var Le=new t.Node("mouse");Le.lock=!1;Le.d={};Le.p={};document.addEventListener("mousedown",function(a){document.pointerLockElement&&(a.preventDefault(),a.stopPropagation());Le.p[a.button]=!0;Le.d[a.button]=!0});Le.r={};document.addEventListener("mouseup",function(a){Le.r[a.button]=!0;Le.d[a.button]=!1});Le.b=0;document.addEventListener("wheel",function(a){Le.b=0<a.deltaY?1:-1});Le.f=new L(0,0);Le.vc=new L(0,0);
document.addEventListener("mousemove",function(a){Le.f.set(a.clientX,a.clientY);Le.vc.x+=a.movementX;Le.vc.y+=a.movementY});Le.step=function(){t.Node.prototype.step.call(this);this.vc.set(0,0);var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;this.b=0};
Le.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=q(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1;Le.b=0;Le.f.set(0,0);Le.vc.set(0,0)};S(Le,t.inputs);Le.Ql=function(){document.documentElement.requestPointerLock({unadjustedMovement:t.Da.mouseRaw})};
document.addEventListener("pointerlockchange",function(){if(document.pointerLockElement)Le.lock=!0,document.body.style.overflowX="hidden",document.body.style.overflowY="hidden",document.body.style.userSelect="none";else{Le.lock=!1;for(var a=q(Object.getOwnPropertyNames(t.Qg)),b=a.next();!b.done;b=a.next())b=b.value,document.body.style[b]=t.Qg[b]}});var Ne=new t.Node("keyboard");Ne.d={};Ne.p={};
document.addEventListener("keydown",function(a){document.pointerLockElement&&"Tab"==a.code&&(a.preventDefault(),a.stopPropagation());"Minus"==a.code?(t.c.ha.get("hit02").play({gain:1,pitch:.875}),t.Uf(-1)):"Equal"==a.code?(t.c.ha.get("hit02").play({gain:1,pitch:1.125}),t.Uf(1)):"KeyM"==a.code&&(t.Audio.Gb(1-t.Da.musicEnabled),t.ci?t.ci.checked=t.Da.musicEnabled:window.localStorage.setItem("musicEnabled",t.Da.musicEnabled));Ne.d[a.code]||(Ne.p[a.code]=!0);Ne.d[a.code]=!0});Ne.r={};
document.addEventListener("keyup",function(a){Ne.r[a.code]=!0;Ne.d[a.code]=!1});Ne.step=function(){t.Node.prototype.step.call(this);var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1};
Ne.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=q(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1};S(Ne,t.inputs);t.Audio=function(){this.buffer=null;return this};t.Audio.S=new AudioContext;var Oe=t.Audio.Dc=t.Audio.S.createGain();Oe.gain.value=.5;Oe.connect(t.Audio.S.destination);var Pe=t.Audio.tb=t.Audio.S.createGain();Pe.gain.value=0;Pe.connect(t.Audio.S.destination);t.Audio.$f=function(a){t.Audio.Dc.gain.value=a};t.Audio.Gb=function(a){t.Audio.tb.gain.value=a;t.Da.musicEnabled=a};
t.Audio.prototype.play=function(a){a?(void 0===a.gain&&(a.gain=1),void 0===a.pitch&&(a.pitch=1),void 0===a.gi&&(a.gi=0),void 0===a.delay&&(a.delay=0)):a={gain:1,pitch:1,gi:0,delay:0};var b=t.Audio.S.createGain();b.gain.value=a.gain;b.connect(t.Audio.Dc);var c=new AudioBufferSourceNode(t.Audio.S);c.connect(b);a.loop?c.loop=!0:c.onended=function(){b.disconnect(t.Audio.Dc)};c.Qd=b;c.playbackRate.value=(1-a.gi+Math.random()*a.gi*2)*a.pitch;c.buffer=this.buffer;void 0===a.time?c.start(t.Audio.S.currentTime+
a.delay):c.start(a.time+a.delay);return c};t.Audio.prototype.load=function(a){this.name=Bb(a);var b=Hb(a);a=a.slice(a.position,a.position+=b);var c=this;t.Audio.S.decodeAudioData(a.buffer).then(function(d){c.buffer=d;c.Xg&&fe(c.Xg)})};t.Audio.prototype.save=function(a){Db(a,this.name);Mb(a,this.Ug.length);a.set(this.Ug,a.position);a.position+=this.Ug.length};function Qe(){this.pf=NaN;this.Ui=-1;this.ai=new BiquadFilterNode(t.Audio.S,{type:"lowpass",Q:12,frequency:140});this.ai.connect(t.Audio.tb);this.Qd=t.Audio.S.createGain();this.Qd.gain.value=1;this.Qd.connect(this.ai)}
Qe.prototype.play=function(a){var b=this;if(a.audio){var c=new AudioBufferSourceNode(t.Audio.S);c.buffer=a.audio.buffer;c.connect(this.Qd);this.pf+=a.um;c.start(this.pf);setTimeout(function(){switch(b.Ui){case 2:t.a.Vd=7;break;case 3:t.a.Vd=9;break;case 3:t.a.Vd=11;break;default:t.a.Vd=0}},1E3*(this.pf-t.Audio.S.currentTime));c.onended=function(){this.disconnect(this.Qd)}}setTimeout(function(){b.play(a.pm())},1E3*(this.pf-t.Audio.S.currentTime+a.duration)-100);this.pf+=a.duration};var Re,Se=[],Te=0;function Ue(a){return Se[a-Te]}var Ve=new db(qb),We=new fb,pb=new fb,Xe=new R;Xe.scale(.99609375,.99609375,.99609375);function Ye(a){var b=Ve.get(a);if(b)return b;b=new Ze(a);Ve.push(b);return b}function $e(a){a=af(a);return new L(a.x-4096<<19,a.y-4096<<19)}function bf(a,b){function c(d){d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;return(d|d<<1)&1431655765}return c(a)<<1|c(b)}
function af(a){function b(c){c=(c|c>>1)&858993459;c=(c|c>>2)&252645135;c=(c|c>>4)&16711935;return(c|c>>8)&65535}a=new L(a>>>1&1431655765,a>>>0&1431655765);a.x=b(a.x);a.y=b(a.y);return a}
function cf(a,b){isNaN(a)&&(a=0);isNaN(b)&&(b=Ve.elements.length-1);if(a==b)return Ve.elements[a];for(var c=Ve.elements[a].index,d=c^Ve.elements[b].index,e=0;d>>=1;)e++;var h=1<<e,g=(2<<e)-1,k=a,l=b+1;for(d=Math.floor(k/2+l/2);k<l;){var m=Ve.elements[d].index&g;if(h<m)l=d,d=Math.floor(k/2+l/2);else if(h>m)k=d+1,d=Math.floor(k/2+l/2);else break}c=e&1?new df(af(c&~g|h).x):new ef(af(c&~g|h).y);c.value-=4096;c.value<<=19;c.sf=cf(a,d-1);c.tf=cf(d,b);return c}function df(a){this.value=a}
function ef(a){this.value=a}function ff(a,b,c){this.start=a;this.vc=b;this.ab=c;this.zc=[new gf(Re,0,1)];this.t=0}function gf(a,b,c){this.node=a;this.Ra=b;this.Vc=c}ff.prototype.next=function(){for(;this.zc.length;){var a=this.zc.shift();this.t=a.Ra;if(a.node instanceof Ze)return a;this.$e(a)}return null};
ff.prototype.$e=function(a){var b=a.node;if(b instanceof df){var c=this.start.z;var d=this.vc.z}else c=this.start.x,d=this.vc.x;if(0<d){var e=new gf(b.tf,(b.value-this.ab-c)/d,a.Vc);e.Ra<=a.Vc&&e.Vc>=a.Ra&&this.zc.unshift(e);c=new gf(b.sf,a.Ra,(b.value+this.ab-c)/d);c.Ra<=a.Vc&&c.Vc>=a.Ra&&this.zc.unshift(c)}else 0>d?(e=new gf(b.sf,(b.value+this.ab-c)/d,a.Vc),e.Ra<=a.Vc&&e.Vc>=a.Ra&&this.zc.unshift(e),c=new gf(b.tf,a.Ra,(b.value-this.ab-c)/d),c.Ra<=a.Vc&&c.Vc>=a.Ra&&this.zc.unshift(c)):(c>=b.value-
this.ab&&this.zc.unshift(new gf(b.tf,a.Ra,a.Vc)),c<=b.value+this.ab&&this.zc.unshift(new gf(b.sf,a.Ra,a.Vc)))};
function hf(a,b,c){c=void 0===c?jf:c;if(!Ve.elements.length)return null;for(var d=b.length(),e=new ff(a,b,0),h,g=null,k=1;(h=e.next())&&!(h.t>k);){for(var l=function(r){if(c(r.flags)){var p=r.qf(a,0,0,b);!p||p.t>k||(p.d=p.t*d,-1>p.d||(r.item&&(p.item=r.item),g=p,k=p.t))}},m=q(h.node.qa),n=m.next();!n.done;n=m.next())l(n.value);h=q(h.node.hd);for(n=h.next();!n.done;n=h.next())l(n.value)}return g}
function kf(a,b){var c=void 0===c?jf:c;if(!Ve.elements.length)return null;var d=b.length(),e=new ff(a,b,0),h,g=[];for(g.cmp=lf;(h=e.next())&&!(1<h.t);){for(var k=function(r){if(c(r.flags)){var p=r.qf(a,0,0,b);!p||1<p.t||(p.d=p.t*d,-1>p.d||(r.item&&(p.item=r.item),p.Ra=!0,Sa(g,p)))}},l=function(r){r=r.Wg();if(c(r.flags)){var p=r.qf(a,0,0,b);!p||1<p.t||(p.d=p.t*d,-1>p.d||(r.item&&(p.item=r.item),p.Ra=!1,Sa(g,p)))}},m=q(h.node.qa),n=m.next();!n.done;n=m.next())k(n.value);m=q(h.node.hd);for(n=m.next();!n.done;n=
m.next())k(n.value);k=q(h.node.qa);for(n=k.next();!n.done;n=k.next())l(n.value);h=q(h.node.hd);for(n=h.next();!n.done;n=h.next())l(n.value)}return g}
function mf(a,b){var c=void 0===c?jf:c;if(0==Ve.elements.length)return null;for(var d=new ff(a,new G(240*b.x,0,240*b.z),0),e,h=null,g=240;(e=d.next())&&!(240*e.t>g);){for(var k=function(n){c(n.flags)&&(!(n=n.zj(a,b))||n.t>g||(h=n,g=n.t))},l=q(e.node.qa),m=l.next();!m.done;m=l.next())k(m.value);e=q(e.node.hd);for(m=e.next();!m.done;m=e.next())k(m.value)}return h}function nf(a,b){return of(a.z-b,a.x-b,a.z+b,a.x+b,void 0)}
function of(a,b,c,d,e){e||(e=[]);for(var h=[Re];h.length;){var g=h.shift();g instanceof df?(a<=g.value&&h.push(g.sf),c>=g.value&&h.push(g.tf)):g instanceof ef?(b<=g.value&&h.push(g.sf),d>=g.value&&h.push(g.tf)):e.push(g)}return e};var pf,qf,rf,sf;
function tf(){pf=!1;qf=[];var a=rf;rf=[[Array(Se.length),Array(Se.length),Array(Se.length)],[Array(Se.length),Array(Se.length),Array(Se.length)]];if(a)for(var b=q(Se),c=b.next();!c.done;c=b.next()){var d=c.value;c=d.index-Te;d=d.index-a.aa;for(var e=0;2>e;e++)rf[e][0][c]=a[e][0][d],rf[e][1][c]=a[e][1][d],rf[e][2][c]=a[e][2][d]}rf.aa=Te;sf=0;a=q(Se);for(c=a.next();!c.done;c=a.next()){b=c.value;b.Bc||(c=new uf,c.$g=b,c.Sf=b,c.cd=b.cd,c.ii=[Za(.05,.95,b.Jb.x),Za(.05,.95,b.Jb.y),Za(.05,.95,b.Jb.z)],qf.push(c));
b.wj=b.cd;c=q(b.rc);for(d=c.next();!d.done;d=c.next())b.wj+=vf(d.value);for(c=0;c<b.rc.length;c++)d=new uf,d.$g=b,d.Sf=Ue(b.rc[c].Zc.aa),d.pc=b.rc[c],d.cd=vf(d.pc),d.ii=[1,1,1],qf.push(d),d=new uf,d.$g=b,d.Sf=b,d.pc=b.rc[c],d.cd=wf(d.pc),d.ii=[.625,.625,.625],qf.push(d)}}function uf(){this.Sf=this.$g=null;this.cd=0;this.ii=null}
function Qf(a,b,c){this.Z=a;this.n=new L(a.g-a.A,a.B-a.j);this.n.x/=a.length;this.n.y/=a.length;this.vk=this.Z.j*this.n.x+this.Z.g*this.n.y;this.l=b;this.u=c;this.height=c-b}Qf.prototype.Hd=function(a){var b=0,c=Rf(this);a[b++]=c.x;a[b++]=c.y;a[b++]=c.z;a[b++]=this.vk;a[b++]=this.Z.j;a[b++]=this.Z.g;a[b++]=this.Z.B;a[b++]=this.Z.A;a[b++]=this.n.x;a[b++]=this.n.y;a[b++]=this.l;a[b++]=this.u;return a};function Rf(a){return pd(Sf[a.aa-Tf].ia.sb,Sf[a.Zc.aa-Tf].ia.sb,.5)}
function Uf(a,b){function c(h,g){return Math.acos(Ya(md(h,g)/Math.sqrt(md(h,h)*md(g,g)),-1,1))/Math.PI}var d=b.z*a.n.x+b.x*a.n.y-a.vk;if(0>=d)return 0;var e=c(new L(a.Z.B-b.z,a.Z.A-b.x),new L(a.Z.j-b.z,a.Z.g-b.x));a=c(new L(d,a.u-b.y),new L(d,a.l-b.y));return Ya(e*a,0,1)}function vf(a){return a.Z.length/1E5*((a.u-a.l)/1E5)}function wf(a){return a.Z.length/1E5*((a.height-(a.u-a.l))/1E5)}
function Vf(a,b,c){c.set(0,0,0);for(var d=1,e=q(b.rc),h=e.next();!h.done;h=e.next()){var g=h.value;h=Uf(g,a);d-=h;g=Rf(g);c.x+=g.x*h;c.y+=g.y*h;c.z+=g.z*h}0<d&&(a=b.ia.sb,c.x+=a.x*d,c.y+=a.y*d,c.z+=a.z*d)};function Wf(a){t.za.call(this,a);this.ej=new R;this.yd=45*Math.PI/180;this.Pf=1E4;this.Ff=1E9;this.rect=null;this.Mh=new R;this.Dj=new R}Wf.prototype=Object.create(t.za.prototype);Wf.prototype.constructor=Wf;Wf.gf=Math.tan(fc(30));Wf.Wk=function(a,b,c,d){d.I=2/a.b;d.L=0;d.M=0;d.cb=0;d.J=0;d.m11=2/a.i;d.m12=0;d.m13=0;d.K=0;d.m21=0;d.m22=-2/(c-b);d.m23=0;d.H=0;d.m31=0;d.m32=-(c+b)/(c-b);d.m33=1};Wf.Uk=function(a,b,c){c=Math.tan(c)*a;var d=c*t.viewport.ratio;return{n:a,nm:b,t:c,ka:2*-c+c,r:d,El:-d}};
Wf.Tk=function(a,b,c,d,e,h,g){g.I=2*a/(d-c);g.L=0;g.M=0;g.cb=0;g.J=0;g.m11=2*a/(e-h);g.m12=0;g.m13=0;g.K=(d+c)/(d-c);g.m21=(e+h)/(e-h);g.m22=(b+a)/(a-b);g.m23=-1;g.H=0;g.m31=0;g.m32=2*b*a/(a-b);g.m33=0};Wf.dm=function(a,b,c,d,e){var h=b*Wf.gf;c*=Wf.gf;d=Math.tan(d);b=h/d;c/=d;e.I=b/(h*a.ratio);e.L=0;e.M=0;e.cb=0;e.J=0;e.m11=b/h;e.m12=0;e.m13=0;e.K=0;e.m21=0;e.m22=-(c+b)/(c-b);e.m23=-1;e.H=0;e.m31=0;e.m32=-(2*c*b)/(c-b);e.m33=0;return e};Wf.prototype.step=function(){t.za.prototype.step.call(this)};
function Xf(a){if(a.rect)Wf.Wk(a.rect,a.Pf,a.Ff,a.ej);else{var b=Wf.Uk(a.Pf,a.Ff,a.yd);Wf.Tk(a.Pf,a.Ff,b.El,b.r,b.t,b.ka,a.ej)}a.O.Vi(a.Mh);Cd(a.ej,a.Mh,a.Dj);t.hc.Tc.N("eyeMatrix",a.Mh);t.hc.Tc.N("viewMatrix",a.Dj);t.hc.Tc.N("cameraPos",new rd(a.O.H,a.O.m31,a.O.m32,a.O.m33));t.hc.Tc.upload()}
function Yf(){function a(d){t.Hk(d);Xf(d);Wf.Xk(d);Kd(t.Ic)}var b=t.a.ua;if(b.Zl){var c=new wc(b.rect.b/2,b.rect.i,null);c.x=t.Kg.x;c.y=t.Kg.y;t.qh(c);a(b.Mj);c=new wc(b.rect.b/2,b.rect.i,null);c.x=t.Kg.x+c.b;c.y=t.Kg.y;t.qh(c);a(b.Lj)}else t.qh(t.Kg),a(b)}
Wf.Xk=function(a){function b(m,n){function r(y){function x(I){C.Ha(Math.atan2(I.x,-I.z),Math.atan2(I.y,-I.z))}var C=new Kc;C.pc=y;y=[new G(y.Z.A,y.l,y.Z.B),new G(y.Z.g,y.l,y.Z.j),new G(y.Z.g,y.u,y.Z.j),new G(y.Z.A,y.u,y.Z.B)];for(var A=q(y),D=A.next();!D.done;D=A.next())D=D.value,a.Mh.nb(D,D);A=y[y.length-1];y=q(y);for(D=y.next();!D.done;D=y.next())D=D.value,0>=D.z&&x(D),2==Math.abs(Math.sign(D.z)-Math.sign(A.z))&&x(pd(A,D,A.z/(A.z-D.z))),A=D;return C}if((!t.xm||n!=a.Yc)&&n.ia.xa!=t.h){n.ia.xa=t.h;
n.Pk=l++;for(var p=q(n.cells.elements),u=p.next();!u.done;u=p.next())if(u=u.value,u.xh!=t.h)for(u.xh<t.h-1&&ob(u.Ok),u.xh=t.h,u=u.hi.first();null!=u.item;u=u.next)u.item.ia.xa=t.h}n=q(n.rc);for(p=n.next();!p.done;p=n.next())if(p=p.value,!(isNaN(p.index)||p.u<=p.l)){if(m.pc){if(0<=Dc(m.pc.Z,p.Z.j,p.Z.g)&&0<=Dc(m.pc.Z,p.Z.B,p.Z.A))continue;if(0>=Dc(p.Z,m.pc.Z.j,m.pc.Z.g)&&0>=Dc(p.Z,m.pc.Z.B,m.pc.Z.A))continue}if(!(0>=Dc(p.Z,c.z,c.x))){(u=e[p.index])||(e[p.index]=u=r(p));var z=u.da();z.pc=u.pc;z.s<m.s&&
(z.s=m.s);z.v>m.v&&(z.v=m.v);z.l<m.l&&(z.l=m.l);z.u>m.u&&(z.u=m.u);z.s>=z.v||z.l>=z.u||b(z,Ue(p.Zc.aa))}}}var c=Ed(a.O),d=hf(c,new G(0,-4294967295,0),Zf);if(d){var e={},h=a.yd,g=Math.atan(Math.tan(h)*t.viewport.ratio),k=new Kc;k.s=-g;k.v=g;k.l=-h;k.u=h;var l=0;if(d=Ue(d.item.aa))a.Yc=d,b(k,a.Yc)}};function Rd(){this.name=null;this.ld=[]}Rd.prototype.save=function(a){Db(a,this.name);Sb(a,Math.ceil(this.Lb/1E3));Eb(a,this.ld.length);for(var b=q(this.ld),c=b.next();!c.done;c=b.next())c.value.save(a)};Rd.prototype.load=function(a){this.name=Bb(a);this.Lb=1E3*Ob(a);for(var b=Cb(a),c=0;c<b;c++){var d=new $f;d.load(a);this.ld.push(d)}};function $f(){this.X=t.c.Ab.get("defaultMaterial");this.Kb=[];this.Tb=[];this.wc=[]}
$f.prototype.compile=function(){this.Cj=re.wh.length;re.wh=re.wh.concat(this.Kb);for(var a=0;a<this.Tb.length;a++)this.Tb[a]+=this.Cj;for(a=0;a<this.wc.length;a++)this.wc[a]+=this.Cj;this.am=te.elements.length;te.elements=te.elements.concat(this.Tb);this.Wj=te.elements.length;te.elements=te.elements.concat(this.wc)};$f.prototype.da=function(){var a=new $f;a.Kb=this.Kb;a.Va=this.Va;a.Tb=this.Tb;a.Od=this.Od;a.wc=this.wc;a.Nd=this.Nd;return a};
$f.prototype.save=function(a){Db(a,this.X.name);Sb(a,this.Kb.length);for(var b=q(this.Kb),c=b.next();!c.done;c=b.next())c=c.value,Wb(a,c.x),Wb(a,c.y),Wb(a,c.z);b=q(this.Kb);for(c=b.next();!c.done;c=b.next())c=c.value,Ub(a,c.jc),Ub(a,c.Ec),Ub(a,c.Mb);b=q(this.Kb);for(c=b.next();!c.done;c=b.next())c=c.value,Zb(a,c.Nc),Zb(a,c.Oc);Sb(a,this.Tb.length);b=q(this.Tb);for(c=b.next();!c.done;c=b.next())Sb(a,c.value);Sb(a,this.wc.length);b=q(this.wc);for(c=b.next();!c.done;c=b.next())Sb(a,c.value);Sb(a,this.We);
return a};$f.prototype.load=function(a){this.X=t.c.Ab.get(Bb(a));for(var b=Ob(a),c=0;c<b;c++){var d=new hd(Vb(a),Vb(a),Vb(a));this.Kb.push(d)}for(c=0;c<b;c++)d=this.Kb[c],d.jc=Tb(a),d.Ec=Tb(a),d.Mb=Tb(a);for(c=0;c<b;c++)d=this.Kb[c],d.Nc=Xb(a),d.Oc=Xb(a);b=Ob(a);for(c=0;c<b;c++)this.Tb.push(Ob(a));b=Ob(a);for(c=0;c<b;c++)this.wc.push(Ob(a));this.We=Ob(a);this.compile()};
function ag(){function a(p,u){return p.y<u.y?-1:p.y>u.y?1:0}function b(p,u){return p.z<u.z?-1:p.z>u.z?1:p.x<u.x?-1:p.x>u.x?1:0}var c=bg,d=[];d.cmp=b;for(var e=q(c),h=e.next();!h.done;h=e.next()){var g=h.value;h=g[g.length-1];g=q(g);for(var k=g.next();!k.done;k=g.next()){k=k.value;if(0==b(h,k)){var l=[];l.cmp=a;l.z=h.z;l.x=h.x;l=Sa(d,l);Sa(l,h);Sa(l,k)}h=k}}c=q(c);for(h=c.next();!h.done;h=c.next())for(e=h.value,k=e.length-1,k=e[k],h=0;h<e.length;h++){g=e[h];if(0==b(k,g))if(l=Ra(d,k),k.y<g.y){var m=
Qa(l,k),n=Qa(l,g);for(m+=1;m<l.length&&!(m>=n);){var r=jd(k,g,(l[m].y-k.y)/(g.y-k.y));r.y=l[m].y;e.splice(h++,0,r);m++}}else for(m=Qa(l,k),n=Qa(l,g),--m;0<=m&&!(m<=n);)r=jd(k,g,(l[m].y-k.y)/(g.y-k.y)),r.y=l[m].y,e.splice(h++,0,r),m--;k=h;k=g}}function cg(){$f.call(this);this.Pd=[];this.Va=new ne;this.Nd=this.Od=null;this.We=0}cg.prototype=Object.create($f.prototype);cg.prototype.constructor=cg;
cg.prototype.compile=function(){this.Tb=[];for(var a=q(this.Pd),b=a.next();!b.done;b=a.next()){b=b.value;for(var c=2;c<b.length;c++)this.Tb.push(b[0]),this.Tb.push(b[c-1]),this.Tb.push(b[c])}t.Cb(this.Va);me(this.Va,this.Kb.length*this.Va.Ib);this.Va.upload(this.Kb);this.Tb.length?(this.Od||(this.Od=new pe),t.De(this.Od),me(this.Od,2*this.Tb.length),this.Od.upload(this.Tb)):this.Od=null;this.wc.length?(this.Nd||(this.Nd=new pe),t.De(this.Nd),me(this.Nd,2*this.wc.length),this.Nd.upload(this.wc)):this.Nd=
null};function dg(a,b){b||(b=a.name);t.za.call(this,b);this.src=a}dg.prototype=Object.create(t.za.prototype);dg.prototype.constructor=dg;dg.prototype.create=function(){this.ld=[];for(var a=q(this.src.ld),b=a.next();!b.done;b=a.next())b=b.value,b=b instanceof cg?new eg(b):new fg(b),this.ld.push(b),this.Gf&&(b.Gf=this.Gf),b.Ga=this.O,S(b,this)};function fg(a,b){t.za.call(this,b);this.src=a;this.facing=1;this.Ul=this.Tl=!1}fg.prototype=Object.create(t.za.prototype);fg.prototype.constructor=fg;
function gg(a){var b=null;a.parent&&(b=a.parent.D);b||(b=a.D);b||(b=a.src.D);b||(b=t.c.sa.get("physical"));return b}function hg(a){var b=null;a.parent&&(b=a.parent.X);b||(b=a.X);b||(b=a.src.X);b||(b=t.c.Ab.get("defaultMaterial"));return b}function ig(a){var b=null;a.parent&&(b=a.parent.ba);b||(b=a.ba);b||(b=a.src.ba);return b}
fg.prototype.Xa=function(){t.Cb(re);t.eb(gg(this));t.D.N("modelMatrix",this.O);t.Wb(0,ig(this));var a=hg(this);a.bind();t.D.N("lightingFancy",t.Da.lightingFancy,!0);this.Ch?t.D.N("architectureLighting",1,!0):t.D.N("architectureLighting",0,!0);t.D.N("ambientLight",this.ia.sb,!1);if(this.Pa)for(var b=0;b<this.Pa.length;b+=3)t.D.N(this.Pa[b],this.Pa[b+1],this.Pa[b+2]);t.xb(a.Fa);t.Sb(a.Fa?1:2);t.$b(this.facing);this.src.Tb.length?(t.De(te),v.drawElements(v.TRIANGLES,this.src.Tb.length,v.UNSIGNED_SHORT,
2*this.src.am)):v.drawArrays(v.TRIANGLES,this.src.Cj,this.src.Kb.length);this.src.wc.length&&(this.Tl&&this.Uj(),this.Ul&&this.Vj())};
fg.prototype.Uj=function(){t.xb(1);t.Sb(1);t.eb(t.c.sa.get("edge"));t.D.N("toonMinDist",Infinity,!1);t.D.N("modelMatrix",this.O);var a=new G(this.O.I,this.O.L,this.O.M),b=new G(this.O.J,this.O.m11,this.O.m12),c=new G(this.O.K,this.O.m21,this.O.m22);a.ra(1);b.ra(1);c.ra(1);var d=new G(t.ua.O.H-this.O.H,t.ua.O.m31-this.O.m31,t.ua.O.m32-this.O.m32);a=jc(a,d);b=jc(b,d);c=jc(c,d);t.D.N("eyeVector",new G(a,b,c));v.drawElements(v.LINES,this.src.wc.length-this.src.We,v.UNSIGNED_SHORT,2*this.src.Wj+2*this.src.We)};
fg.prototype.Vj=function(){t.xb(1);t.Sb(1);t.eb(t.c.sa.get("toon"));t.D.N("toonMinDist",Infinity,!1);t.D.N("modelMatrix",this.O);v.drawElements(v.LINES,this.src.We,v.UNSIGNED_SHORT,2*this.src.Wj)};function eg(a,b){fg.call(this,a,b)}eg.prototype=Object.create(fg.prototype);f=eg.prototype;f.constructor=eg;f.step=function(){fg.prototype.step.call(this)};
f.Xa=function(){t.Cb(this.src.Va);t.eb(gg(this));t.D.N("modelMatrix",this.O);t.Wb(0,ig(this));var a=hg(this);a.bind();t.D.N("lightingFancy",t.Da.lightingFancy,!0);this.Ch?t.D.N("architectureLighting",1,!0):t.D.N("architectureLighting",0,!0);t.D.N("ambientLight",this.ia.sb,!1);if(this.Pa)for(var b=0;b<this.Pa.length;b+=3)t.D.N(this.Pa[b],this.Pa[b+1],this.Pa[b+2]);t.xb(a.Fa);t.Sb(a.Fa?1:2);t.$b(this.facing);this.src.Tb.length?(t.De(this.src.Od),v.drawElements(v.TRIANGLES,this.src.Tb.length,v.UNSIGNED_SHORT,
0)):v.drawArrays(v.TRIANGLES,0,this.src.Kb.length)};
f.Uj=function(){t.xb(1);t.Sb(1);t.eb(t.c.sa.get("edge"));t.D.N("toonMinDist",Math.pow(5E5,2),!1);t.D.N("modelMatrix",this.O);var a=new G(this.O.I,this.O.L,this.O.M),b=new G(this.O.J,this.O.m11,this.O.m12),c=new G(this.O.K,this.O.m21,this.O.m22);a.ra(1);b.ra(1);c.ra(1);var d=new G(t.ua.O.H-this.O.H,t.ua.O.m31-this.O.m31,t.ua.O.m32-this.O.m32);a=jc(a,d);b=jc(b,d);c=jc(c,d);t.D.N("eyeVector",new G(a,b,c));a=this.src.wc.length-this.src.We;b=2*this.src.We;t.De(this.src.Nd);v.drawElements(v.LINES,a,v.UNSIGNED_SHORT,
b)};f.Vj=function(){t.xb(1);t.Sb(1);t.eb(t.c.sa.get("toon"));t.D.N("toonMinDist",Math.pow(5E5,2),!1);t.D.N("modelMatrix",this.O);var a=this.src.We;t.De(this.src.Nd);v.drawElements(v.LINES,a,v.UNSIGNED_SHORT,0)};function jg(){this.scale=1;this.ab=25E3;this.Pc=0;this.Gf=!1;this.frame=0;this.wb=1}function kg(a){a.I=t.ua.O.I;a.L=t.ua.O.L;a.M=t.ua.O.M;a.J=t.ua.O.J;a.m11=t.ua.O.m11;a.m12=t.ua.O.m12;a.K=t.ua.O.K;a.m21=t.ua.O.m21;a.m22=t.ua.O.m22;var b=this.scale*this.ab,c=this.Gf?-b:b,d=Math.cos(this.Pc),e=Math.sin(this.Pc),h=new R;h.I=d*c;h.L=e*c;h.J=-e*b;h.m11=d*b;td(a,h,a)}
function lg(){0>this.frame||(kg.call(this,this.O),t.Cb(mg),t.eb(this.D),t.Wb(0,this.ba),this.X.bind(),t.D.N("ambientLight",this.ia.sb,!1),t.xb(this.X.Fa),t.Sb(this.X.Fa?1:2),t.$b(0),t.D.N("modelMatrix",this.O),t.D.N("color",this.color),v.drawArrays(v.TRIANGLE_FAN,ng(this.frame,this.wb),4))}
for(var og=[],pg=0;4>pg;pg++)for(var qg=1<<pg,rg=qg<<pg,sg=1/qg,tg=0;tg<rg;tg++){var ug=tg%qg,vg=tg/qg|0;ug*=sg;vg*=sg;var wg=void 0;wg=new hd(-1,-1,0);ld(wg,ug,vg);wg.Mb=32767;og.push(wg);wg=new hd(1,-1,0);ld(wg,ug+sg,vg);wg.Mb=32767;og.push(wg);wg=new hd(1,1,0);ld(wg,ug+sg,vg+sg);wg.Mb=32767;og.push(wg);wg=new hd(-1,1,0);ld(wg,ug,vg+sg);wg.Mb=32767;og.push(wg)}var mg=new ne;me(mg,og.length*mg.Ib);mg.upload(og);
function xg(a,b){for(var c=0;b>Math.pow(1<<c,2);)c++;var d=1<<c;b=1/d;c=a%d*b;a=(a/d|0)*b;return[c,a,c+b,a+b]}function ng(a,b){switch(b){default:return 4*a;case 4:return 4+4*a;case 16:return 20+4*a;case 64:return 84+4*a}};function yg(){this.color=this.ba=this.D=null;this.Fa=NaN;this.se=[];this.zc=[];this.zc.cmp=zg;this.Gl=64}yg.prototype.clear=function(){this.se.length=0;this.zc.length=0};yg.prototype.Xa=function(){t.eb(this.D);t.D.N("modelMatrix",Xe);t.Wb(0,this.ba);t.D.N("color",this.color);t.xb(this.Fa);t.Sb(1);t.$b(0);for(var a=q(this.zc),b=a.next();!b.done;b=a.next())b.value.Xa()};
function Ag(a,b,c,d,e,h,g){function k(y,x){if(jf(x)&&Ue(x.aa)){var C=[];if(x instanceof Cg){if(x.u<b.y-z||x.l>b.y+z)return;var A=Dc(x.W,b.z,b.x);if(A<-z||A>z)return;A=x.W.getParameter(b.z,b.x);if(A<-z||A>x.W.length+z||.707107>jc(new G((x.W.B-x.W.j)/x.W.length,0,(x.W.g-x.W.A)/x.W.length),c))return;C.push(new G(x.W.A,x.l,x.W.B),new G(x.W.g,x.l,x.W.j),new G(x.W.g,x.u,x.W.j),new G(x.W.A,x.u,x.W.B))}else{if(x.y<b.y-z||x.y>b.y+z)return;var D=q(x.ga);for(A=D.next();!A.done;A=D.next())if(Dc(A.value,b.z,b.x)<
-z)return;if(x instanceof Dg){if(.707107>c.y)return}else if(-.707107<c.y)return;D=q(x.ga);for(A=D.next();!A.done;A=D.next())A=A.value,C.push(new G(A.A,x.y,A.B));x instanceof Eg&&C.reverse()}(function(){function I(da,Fb){var hb=[],Yb=da[da.length-1],sc=Fb(Yb);da=q(da);for(var Nb=da.next();!Nb.done;Nb=da.next()){Nb=Nb.value;var tc=Fb(Nb);2==Math.abs(Math.sign(tc)-Math.sign(sc))&&hb.push(pd(Yb,Nb,sc/(sc-tc)));0<=tc&&hb.push(Nb);sc=tc;Yb=Nb}return 3>hb.length?null:hb}for(var J=q(C),O=J.next();!O.done;O=
J.next())O=O.value,p.nb(O,O);J=q([function(da){return 1-da.x},function(da){return 1+da.x},function(da){return 1-da.y},function(da){return 1+da.y},function(da){return 1-da.z},function(da){return 1+da.z}]);for(O=J.next();!O.done;O=J.next())if(C=I(C,O.value),!C)return;for(J=0;J<C.length;J++){O=C[J];var pa=.5*O.x+.5,ra=.5*O.y+.5;r.nb(O,O);var ca=new hd;ca.x=O.x;ca.y=O.y;ca.z=O.z;ca.Nc=u[0]*(1-pa)+u[2]*pa;ca.Oc=u[1]*(1-ra)+u[3]*ra;C[J]=ca}J=[];J.aa=x.aa;J.cellIndex=y.index;J=Sa(l,J);for(O=2;O<C.length;O++)J.push(C[0]),
J.push(C[O-1]),J.push(C[O])})()}}a.se.length==a.Gl&&a.se.shift().remove();var l=[];l.cmp=zg;var m=new G,n=new G;kc(c,m,n);var r=new R;r.I=m.x;r.J=n.x;r.K=c.x;r.H=b.x;r.L=m.y;r.m11=n.y;r.m21=c.y;r.m31=b.y;r.M=m.z;r.m12=n.z;r.m22=c.z;r.m32=b.z;m=new R;n=Math.cos(d)*e;d=Math.sin(d)*e;m.I=n;m.J=-d;m.L=d;m.m11=n;m.m22=e;Cd(r,m,r);var p=r.Vi(new R),u=xg(h,g),z=1.733*e;e=nf(b,z);e=q(e);for(h=e.next();!h.done;h=e.next())for(h=h.value,g=q(h.qa),d=g.next();!d.done;d=g.next())k(h,d.value);e=new Fg;h=q(l);for(g=
h.next();!g.done;g=h.next())g=g.value,d=Ra(a.zc,g),d||(d=new Gg(a),d.aa=g.aa,d.cellIndex=g.cellIndex,d.ia=Ue(d.aa).ia,d.create(),Sa(a.zc,d)),Hg(d,g),e.Ek.push({node:d,Qc:g.length});a.se.push(e)}function Gg(a){this.kl=a;this.cellIndex=this.aa=NaN;this.ia=null;this.Qc=this.ee=0}function zg(a,b){return a.aa<b.aa?-1:a.aa>b.aa?1:a.cellIndex<b.cellIndex?-1:a.cellIndex>b.cellIndex?1:0}Gg.prototype.create=function(){this.Va=new ne;this.Va.usage=v.DYNAMIC_DRAW;me(this.Va,48*this.Va.Ib)};
function Ig(a,b){var c=a.Qc+b;if(0>=c)Ta(a.kl.zc,a);else{c*=a.Va.Ib;if((a.ee+a.Qc+b)*a.Va.Ib>a.Va.buffer.byteLength)b=new ArrayBuffer(c<<1);else if(48<=a.ee)b=a.Va.buffer;else return;c=new Uint8Array(a.Va.buffer,a.ee*a.Va.Ib,a.Qc*a.Va.Ib);(new Uint8Array(b)).set(c);a.Va.buffer=b;a.Va.bind();v.bufferData(a.Va.target,a.Va.buffer,a.Va.usage);a.ee=0}}
function Hg(a,b){Ig(a,b.length);a.Va.bind();a.Va.write(b,a.ee+a.Qc);v.bufferSubData(a.Va.target,(a.ee+a.Qc)*a.Va.Ib,new Uint8Array(a.Va.buffer,(a.ee+a.Qc)*a.Va.Ib,b.length*a.Va.Ib));a.Qc+=b.length}Gg.prototype.Xa=function(){if(this.ia.xa<t.h)return!1;t.Cb(this.Va);t.D.N("ambientLight",this.ia.sb);v.drawArrays(v.TRIANGLES,this.ee,this.Qc)};function Fg(){this.Ek=[]}Fg.prototype.remove=function(){for(var a=q(this.Ek),b=a.next();!b.done;b=a.next())b=b.value,b.node.ee+=b.Qc,b.node.Qc-=b.Qc,Ig(b.node,0)};var Jg={},Kg,Lg,Mg,Ng,T,U,W,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg=new M(192,192,192,255),Wg=new M(64,64,64,255),Xg=new M(160,160,160,255),Yg=new M(160,160,160,255),Zg=new M(144,144,144,255),$g,ah=$g=new Qd;$g.name="concrete";$g.rd=new M(255,255,255,3.984375);$g.Kc=4;$g.Lc=1;$g.Fa=0;var bh=$g=new Qd;$g.name="paint";$g.rd=new M(255,255,255,31.875);$g.Kc=128;$g.Lc=1;$g.Fa=0;var ch=$g=new Qd;$g.name="plaster";$g.rd=new M(255,255,255,15.9375);$g.Kc=32;$g.Lc=1;$g.Fa=0;var dh=$g=new Qd;$g.name="metal";
$g.rd=new M(255,255,255,95.625);$g.Kc=64;$g.Lc=1;$g.Fa=0;var eh=$g=new Qd;$g.name="glass";$g.rd=new M(255,255,255,63.75);$g.Kc=256;$g.Lc=1;$g.Fa=1;
function fh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new gh(c,c+h);b.push(g);c+=h;return g}}this.floor.ba=t.c.P.get("concr01");this.floor.X=ah;this.floor.color=Vg;this.oa.ba=t.c.P.get("concr01");this.oa.X=ah;this.oa.color=Yg;var b=[],c=this.df,d=this.u,e;if(e=a(25E3))e.Y.ba=t.c.P.get("brick01"),e.Y.X=bh,e.Y.color=Wg;if(e=a(this.Ua))e.Y.ba=t.c.P.get("brick01"),e.Y.X=bh,e.Y.color=this.color;if(e=a(0))e.Y.ba=t.c.P.get("brick01"),e.Y.X=ah,e.Y.color=Xg;return b}
function hh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new gh(c,c+h);b.push(g);c+=h;return g}}this.floor.ba=t.c.P.get("concr01");this.floor.X=ah;this.floor.color=Vg;this.oa.ba=t.c.P.get("concr01");this.oa.X=ah;this.oa.color=Yg;var b=[],c=this.df,d=this.u,e;if(e=a(25E3))e.Y.ba=t.c.P.get("brick01"),e.Y.X=bh,e.Y.color=Wg;if(e=a(this.Ua))e.Y.ba=t.c.P.get("brick01"),e.Y.X=bh,e.Y.color=this.color;if(e=a(-25E3))e.Y.ba=t.c.P.get("brick01"),e.Y.X=ah,e.Y.color=Xg;if(e=a(0))e.Y.ba=
t.c.P.get("concr01"),e.Y.X=ah,e.Y.color=Zg;return b}
function ih(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new gh(c,c+h);b.push(g);c+=h;return g}}this.floor.ba=t.c.P.get("concr01");this.floor.X=ah;this.floor.color=Vg;this.oa.ba=t.c.P.get("concr01");this.oa.X=ah;this.oa.color=Yg;var b=[],c=this.df,d=this.u,e;if(e=a(25E3))e.Y.ba=t.c.P.get("metal01"),e.Y.X=dh,e.Y.color=Wg;if(e=a(this.Ua))e.Y.ba=t.c.P.get("metal01"),e.Y.X=bh,e.Y.color=this.color;if(e=a(0))e.Y.ba=t.c.P.get("metal01"),e.Y.X=dh,e.Y.color=Xg;return b}
function jh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new gh(c,c+h);b.push(g);c+=h;return g}}this.floor.ba=t.c.P.get("concr01");this.floor.X=ah;this.floor.color=Vg;this.oa.ba=t.c.P.get("concr01");this.oa.X=ah;this.oa.color=Yg;var b=[],c=this.df,d=this.u,e;if(e=a(25E3))e.Y.ba=t.c.P.get("metal01"),e.Y.X=dh,e.Y.color=Wg;if(e=a(this.Ua))e.Y.ba=t.c.P.get("metal01"),e.Y.X=bh,e.Y.color=this.color;if(e=a(-25E3))e.Y.ba=t.c.P.get("metal01"),e.Y.X=dh,e.Y.color=Xg;if(e=a(0))e.Y.ba=
t.c.P.get("concr01"),e.Y.X=ah,e.Y.color=Zg;return b}
function kh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new gh(c,c+h);b.push(g);c+=h;return g}}this.floor.ba=t.c.P.get("concr01");this.floor.X=ah;this.floor.color=Vg;this.oa.ba=t.c.P.get("concr01");this.oa.X=ah;this.oa.color=Yg;var b=[],c=this.df,d=this.u,e;if(e=a(25E3))e.Y.ba=t.c.P.get("plaster01"),e.Y.X=bh,e.Y.color=Wg;if(e=a(this.Ua))e.Y.ba=t.c.P.get("plaster01"),e.Y.X=ch,e.Y.color=this.color;if(e=a(0))e.Y.ba=t.c.P.get("plaster01"),e.Y.X=ch,e.Y.color=new M(248,248,
248,255);return b}var lh=new rb;function mh(a){return Math.floor(E(lh)*a)}function nh(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return b[mh(b.length)]}function oh(a){for(var b=0;b<a.length;b++){var c=mh(a.length-b),d=a[b];a[b]=a[c];a[c]=d}}function ph(){for(var a=[],b=q(Sf),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next())a=a.concat(d.value)}return a}
function qh(){for(var a=[],b=q(Sf),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;for(var e=q(d.ob),h=e.next();!h.done;h=e.next())h=h.value,h.pa==d&&a.push(h)}}return a}function rh(a,b,c){var d=[];a=q(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.translate(b,c));return d}function sh(a,b){var c=[];a=q(a);for(var d=a.next();!d.done;d=a.next())c.push(d.value.Xf(b));return c}
function th(a,b,c){a:{switch((4-c)%4){case 0:a=new L(a,b);break a;case 1:a=new L(-b,a);break a;case 2:a=new L(-a,-b);break a;case 3:a=new L(b,-a);break a}a=void 0}return a}function uh(a,b,c){var d=[];a=q(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.expand(b,c));return d}function vh(a,b){var c=[];a=q(a);for(var d=a.next();!d.done;d=a.next())c.push(wh(d.value,b));return c}
function xh(a,b){b=q(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=a.length,e=0;e<d;e++)a[e].vg(c,a)&&(a.splice(e--,1),d--)}return a}function yh(a,b){for(var c=new zh,d=q(a),e=d.next();!e.done;e=d.next())Ah(c,e.value);d=q(b);for(e=d.next();!e.done;e=d.next())Ah(c,e.value);c=[c];xh(c,b);return xh(a.slice(),c)}function Bh(a,b){b=void 0===b?0:b;for(var c=new zh,d=q(a),e=d.next();!e.done;e=d.next())Ah(c,e.value);b=[c.expand(b,b)];xh(b,a);return b}
function Ch(a){var b=[];b.cmp=function(h,g){return h.s<g.s?-1:h.s>g.s?1:h.C<g.C?-1:h.C>g.C?1:0};a=q(a);for(var c=a.next();!c.done;c=a.next())Sa(b,c.value);for(a=0;a<b.length;a++){c=b[a];var d=Qa(b,{s:c.v,C:c.C}),e=b[d];e&&e.s==c.v&&e.C==c.C&&e.G==c.G&&(b.splice(d,1),b[a--]=c.da(c.C,c.G,c.s,e.v))}return b}function Dh(a,b,c){var d=Infinity;c=q(c);for(var e=c.next();!e.done;e=c.next())if(e=e.value,!(e.s>=b||e.v<=b||e.G<=a||e.C>=d)){if(e.C<a){d=a;break}d=e.C}return d}
function Eh(a){for(var b=[],c=q(a),d=c.next();!d.done;d=c.next())Fh(d.value,b);xh(b,a);return b}function Gh(a){a.bound=new Kc;for(var b=0;b<a.length;b++){var c=a[b].vf();a.bound.Ha(c.B,c.A);a[b]=c}}
function Hh(a){var b=[];b.cmp=function(m,n){return m.x<n.x?-1:m.x>n.x?1:m.y<n.y?-1:m.y>n.y?1:m.type<n.type?-1:m.type>n.type?1:0};a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,Sa(b,{x:c.mc(),y:c.lc(),type:c.zb(),Z:c});a=[];c=[];for(var d={};b.length;){var e=!1;d.ed=[];d.ed.bound=new zh;d.uc=null;d.cc=null;var h=function(m){return function(n){n.Z.zb()==m.cc.zb()?m.cc.T+=n.Z.T-n.Z.R:((m.cc.zb()+3&3)==n.Z.zb()&&(m.cc.Sg=!0,n.Z.th=!0),m.ed.push(n.Z),m.cc=n.Z);m.uc=new L(m.cc.Pb(),m.cc.Ob());m.uc.type=
-1;Ih(m.ed.bound,m.uc.x,m.uc.y)}}(d);d.cc=b.shift().Z;d.cc.zb()&&(e=!0,d.cc.th=!0);d.ed.push(d.cc);d.uc=new L(d.cc.Pb(),d.cc.Ob());d.uc.type=-1;for(Ih(d.ed.bound,d.uc.x,d.uc.y);;){var g=[],k=Qa(b,d.uc),l=b[k];if(!l)break;if(l.x!=d.uc.x)break;if(l.y!=d.uc.y)break;g[0]=k;g[1]=k;k++;(l=b[k])&&l.x==d.uc.x&&l.y==d.uc.y&&(g[1]=k);switch(d.cc.zb()){case 0:k=g[0];break;case 1:k=g[1];break;case 2:k=g[1];break;case 3:k=g[0]}h(b.splice(k,1)[0])}e?(d.ed[d.ed.length-1].Sg=!0,c.push(d.ed)):(d.ed.mb=[],a.push(d.ed));
d={cc:d.cc,ed:d.ed,uc:d.uc}}b=q(c);for(c=b.next();!c.done;c=b.next())Jh(c.value,a);return a}function Kh(a,b){b||(b=[]);a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(c),c.mb&&Kh(c.mb,b);return b}
function Jh(a,b){var c=null;b=q(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.C<=d.bound.C||a.bound.s<=d.bound.s||a.bound.G>=d.bound.G||a.bound.v>=d.bound.v)){if(c){if(d.bound.C<=c.bound.C)continue;if(d.bound.s<=c.bound.s)continue;if(d.bound.G>=c.bound.G)continue;if(d.bound.v>=c.bound.v)continue}c=d}c&&c.mb.push(a)}
function Lh(a){var b=162500,c=162500;b=void 0===b?0:b;c=void 0===c?0:c;var d=Eh(a);a=[];d=q(d);for(var e=d.next();!e.done;e=d.next())e.value.Rh(b,c,a);d=ph();d=q(d);for(e=d.next();!e.done;e=d.next()){e=e.value;for(var h=0;h<a.length;h++)e.expand(b,c).Oe(a[h].x,a[h].y)&&a.splice(h--,1)}return a}var Mh=-1,Nh=-1,Oh=0,Ph=1,Qh=[],Sf=[],Tf=0;
function Rh(){if(!Kg){var a=Kg={};Mg=Lg=1;a.Ih=Ph;a.Pe=NaN;a.tc=NaN;Ng=Qh;Qh=[]}if(!T){if(!Mg){Sh();ph();Kg=null;Mh++;if(Mh<Oh+2)return!0;Th();return!0}T=[];T.Ad=Kg;T.Of=3;T.Mc=new M(233,234,85,255);T.Ua=-75E3;T.parent=null;T.children=[];T.Kh=1;T.ud=0;Qh.push(T);Mg--}if(!U){if(!T.Of){if(T.parent){a=T.parent;a.children.push(T);do a.Kh++,T.ud++,a=a.parent;while(a)}T=null;return!0}U=[];Uh.call(U);U.index=Sf.length+Tf;U.Db=T;U.Nf=nh(1,2);1==U.index&&(U.Bc=!0);U.style={};U.style.height=225E3+5E4*mh(4);
U.style.Mc=T.Mc;U.Bc?(U.style.xc=nh(hh,jh),U.style.Ua=1E5):(U.style.xc=nh(fh,ih),U.style.Ua=T.Ua);T.push(U);Sf.push(U);T.Of--}if(!W){if(!U.Nf)return Vh(),U=null,!0;W=[];W.index=Wh++;W.ob=[];W.Vb=nh(1,2)}if(!W.Vb){if(Og){Sh();a=W;var b=Og,c=Xh([b],[a]);c||b.U.Db!=a.U.Db&&(c=Yh([b],[a]));if(!c)return W.length=0,W.Vb=nh(1,2),U.pop(),!0}Pg=W=Og=null;U.Nf--;return!0}if(W.length)return(a=Zh([W],0))?(a.platform=W,W.push(a),W.Vb--):(W.length=0,W.Vb=nh(1,2),U.pop()),!0;if(U.length)return a=U,Pg||(Pg={}),(a=
Zh(a,0,Pg))?(Og=a.Fd,W.y=Og.y+5E4*nh(-2,-1,1,2),W.y=Math.min(W.y,-4E5),W.U=U,U.push(W),a.platform=W,W.push(a),W.Vb--):(Pg=W=null,U.Nf=0),!0;if(1<T.length){b=[];c=q(T);for(a=c.next();!a.done;a=c.next())b.push.apply(b,ba(a.value));Pg||(Pg={});(a=Zh(b,0,Pg))?(Og=a.Fd,W.y=Og.y,W.U=U,U.push(W),a.platform=W,W.push(a),W.Vb--):(T.pop(),Sf.pop(),Pg=W=U=null,T.Of=0);return!0}if(1<Qh.length){b=[];c=q(Qh);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length)){var d=q(a);for(a=d.next();!a.done;a=
d.next())b.push.apply(b,ba(a.value))}Pg||(Pg={});if(a=Zh(b,6E5,Pg))Og=a.Fd,T.parent=Og.U.Db,W.y=Og.y+5E4*nh(-2,-1,0,0,0,1,2),W.y=Math.min(W.y,-4E5),W.U=U,U.push(W),a.platform=W,W.push(a),W.Vb--;else{for(;;){a=Sf[Sf.length-1];if(a.na<=Mh)break;b=q(a);for(a=b.next();!a.done;a=b.next())for(c=q(a.value.ob),a=c.next();!a.done;a=c.next())$h(a.value);Sf.pop()}T=null;Qh.length=0;Mg=Lg;Pg=Og=W=U=null}return!0}if(Ng.length){b=[];c=q(Ng);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length))for(d=
q(a),a=d.next();!a.done;a=d.next())b.push.apply(b,ba(a.value));Pg||(Pg={cmp:function(e,h){return e.ec<h.ec?-1:e.ec>h.ec?1:e.x<h.x?-1:e.x>h.x?1:e.y<h.y?-1:e.y>h.y?1:0}});if(a=Zh(b,0,Pg))Og=a.Fd,W.y=Og.y+5E4*nh(-2,-1,0,0,0,1,2),W.y=Math.min(W.y,-4E5),W.U=U,U.push(W),a.platform=W,W.push(a),W.Vb--;else{for(;;){a=Sf[Sf.length-1];if(a.na<=Mh)break;b=q(a);for(a=b.next();!a.done;a=b.next())for(c=q(a.value.ob),a=c.next();!a.done;a=c.next())$h(a.value);Sf.pop()}T=null;Qh.length=0;Mg=Lg;Pg=Og=W=U=null}return!0}a=
Zh(null,0);W.y=-4E5;W.U=U;U.push(W);a.platform=W;W.push(a);W.Vb--;return!0}function ai(){if(!Kg){var a=Kg={};Mg=Lg=1;a.Ih=Ph;a.Pe=NaN;a.tc=NaN;Ng=Qh;Qh=[]}if(!T&&!Mg){Sh();ph();Kg=null;Mh++;if(Mh<Oh+2)return!0;Th();return!0}return bi()}
function ci(){if(!Kg){var a=Kg={};Ph++;3<Ph&&(Ph=3);Mg=Lg=5;a.Ih=Ph;a.Pe=0;a.tc=NaN;Ng=Qh;Qh=[];Qg=-1}if(0<=Qg){var b=Qh[Qg];if(!b){Sh();ph();di();Kg=null;Mh++;if(Mh<Oh+2)return!0;Th();return!0}if(2==b.children.length&&3<=b.Kh){var c=function(g,k){if(!g)return k;for(var l=q(g),m=l.next();!m.done;m=l.next())k.push.apply(k,ba(m.value));c(g.children[0],k);c(g.children[1],k);return k};a=c(b.children[0],[]);b=c(b.children[1],[]);var d=Xh(a,b);d||(d=Yh(a,b))}Qg++;return!0}if(!T&&!Mg){var e=[],h=function(g){g&&
(g.index=e.length,e.push(g),h(g.children[0]),h(g.children[1]))};h(Qh[0]);Qh=e;Qg=0;return!0}return bi()}
function bi(){if(!T){T=[];T.Ad=Kg;T.Of=nh(2,3);var a=[new M(233,234,85,255),new M(85,85,234,255),new M(234,85,85,255),new M(41,166,191,255)];T.Mc=a[Qh.length%a.length];T.Ua=-75E3;T.parent=null;T.children=[];T.Kh=1;T.ud=0;Qh.push(T);Mg--}if(!U){if(!T.Of){if(T.parent){a=T.parent;a.children.push(T);do a.Kh++,T.ud++,a=a.parent;while(a)}T=null;return!0}U=[];Uh.call(U);U.index=Sf.length+Tf;U.Db=T;U.Nf=nh(1,2);0==U.index%5&&(U.Bc=!0);U.style={};U.style.height=225E3;U.style.height+=5E4*mh(4);U.style.Mc=T.Mc;
U.Bc?(U.style.xc=nh(hh,jh),U.style.Ua=1E5):(U.style.xc=nh(fh,ih),U.style.Ua=T.Ua);T.push(U);Sf.push(U);T.Of--}if(!W){if(!U.Nf)return Vh(),U=null,!0;W=[];W.index=Wh++;W.ob=[];W.Vb=nh(1,2)}if(!W.Vb){if(Og){Sh();a=W;var b=Og,c=Xh([b],[a]);c||b.U.Db!=a.U.Db&&(c=Yh([b],[a]));if(!c)return W.length=0,W.Vb=nh(1,2),U.pop(),!0}Pg=W=Og=null;U.Nf--;return!0}if(W.length)return(a=Zh([W],0))?(a.platform=W,W.push(a),W.Vb--):(W.length=0,W.Vb=nh(1,2),U.pop()),!0;if(U.length)return a=U,Pg||(Pg={}),(a=Zh(a,0,Pg))?(Og=
a.Fd,W.y=Og.y+5E4*nh(-2,-1,1,2),W.y=Math.min(W.y,-4E5),W.U=U,U.push(W),a.platform=W,W.push(a),W.Vb--):(Pg=W=null,U.Nf=0),!0;if(1<T.length){b=[];c=q(T);for(a=c.next();!a.done;a=c.next())b.push.apply(b,ba(a.value));Pg||(Pg={});(a=Zh(b,0,Pg))?(Og=a.Fd,W.y=Og.y,W.U=U,U.push(W),a.platform=W,W.push(a),W.Vb--):(T.pop(),Sf.pop(),Pg=W=U=null,T.Of=0);return!0}if(1<Qh.length){b=[];c=q(Qh);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length)){var d=q(a);for(a=d.next();!a.done;a=d.next())b.push.apply(b,
ba(a.value))}Pg||(Pg={});if(a=Zh(b,6E5,Pg))Og=a.Fd,T.parent=Og.U.Db,W.y=Og.y+5E4*nh(-2,-1,0,0,0,1,2),W.y=Math.min(W.y,-4E5),W.U=U,U.push(W),a.platform=W,W.push(a),W.Vb--;else{for(;;){a=Sf[Sf.length-1];if(a.na<=Mh)break;b=q(a);for(a=b.next();!a.done;a=b.next())for(c=q(a.value.ob),a=c.next();!a.done;a=c.next())$h(a.value);Sf.pop()}T=null;Qh.length=0;Mg=Lg;Pg=Og=W=U=null}return!0}if(Ng.length){b=[];c=q(Ng);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length))for(d=q(a),a=d.next();!a.done;a=
d.next())b.push.apply(b,ba(a.value));Pg||(Pg={cmp:function(e,h){return e.ec<h.ec?-1:e.ec>h.ec?1:e.x<h.x?-1:e.x>h.x?1:e.y<h.y?-1:e.y>h.y?1:0}});if(a=Zh(b,0,Pg))Og=a.Fd,W.y=Og.y+5E4*nh(-2,-1,0,0,0,1,2),W.y=Math.min(W.y,-4E5),W.U=U,U.push(W),a.platform=W,W.push(a),W.Vb--;else{for(;;){a=Sf[Sf.length-1];if(a.na<=Mh)break;b=q(a);for(a=b.next();!a.done;a=b.next())for(c=q(a.value.ob),a=c.next();!a.done;a=c.next())$h(a.value);Sf.pop()}T=null;Qh.length=0;Mg=Lg;Pg=Og=W=U=null}return!0}a=Zh(null,0);W.y=-4E5;
W.U=U;U.push(W);a.platform=W;W.push(a);W.Vb--;return!0}
function Zh(a,b,c){if(c){if(c.ni)return ei(c)}else c={};c.cmp||(c.cmp=function(n,r){return n.ud<r.ud?-1:n.ud>r.ud?1:n.ec>r.ec?-1:n.ec<r.ec?1:n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0});c.Fb=5E4*Math.floor(mh(2)+4);c.Je=5E4*Math.floor(mh(2)+4);mh(12)||(c.Fb*=2,c.Je*=2);if(!a)return new zh(-c.Fb,c.Fb,-c.Je,c.Je);c.from=a;c.margin=b;c.al=0;for(var d=ph(),e=[],h=q(a),g=h.next();!g.done;g=h.next()){g=g.value;for(var k=[],l=q(g),m=l.next();!m.done;m=l.next())fi(m.value,c.Fb,c.Je,b,k);l=d;l=vh(l,new zh(-c.Fb+
1,c.Fb,-c.Je+1,c.Je));k=xh(k,l);k=q(k);for(l=k.next();!l.done;l=k.next())l=l.value,m=void 0,m=new L(l.C,l.s),m.Fd=g,m.ud=g.U.Db.ud,e.push(m),m=new L(l.G-1,l.v-1),m.Fd=g,m.ud=g.U.Db.ud,e.push(m)}if(!e.length)return null;c.ni=[];c.ni.cmp=c.cmp;b=[];a=q(a);for(d=a.next();!d.done;d=a.next())b.push.apply(b,ba(d.value));e=q(e);for(a=e.next();!a.done;a=e.next())a=a.value,a.ec=gi(b,a.x,a.y),Sa(c.ni,a);return ei(c)}
function ei(a){var b=a.ni[a.al++];if(!b)return null;a=new zh(b.x-a.Fb,b.x+a.Fb,b.y-a.Je,b.y+a.Je);a.Fd=b.Fd;return a}
function Th(){Rg=qh();if(Jg.mm){for(var a=q(Rg),b=a.next();!b.done;b=a.next())b.value.Fj();Sg=[];Tg=[];Ug=[];a=q(Qh);for(b=a.next();!b.done;b=a.next()){for(var c=[],d=q(b.value),e=d.next();!e.done;e=d.next()){var h=[];e=q(e.value);for(b=e.next();!b.done;b=e.next())b=b.value,h=h.concat(b),Ug=Ug.concat(Eh(b));c=c.concat(h);Tg=Tg.concat(Eh(h))}Sg=Sg.concat(Eh(c))}for(;Sf.length&&!(Sf[0].na>=Oh);)Sf.shift(),Tf++;Nh=Oh+1;hi=0}else{b=q(Sf);for(e=b.next();!e.done;e=b.next()){a=e.value;if(a.na>=Oh)break;
a.xf=!0;e=q(a.ub);for(c=e.next();!c.done;c=e.next())ii(c.value);a=q(a);for(e=a.next();!e.done;e=a.next())for(e=q(e.value.ob),c=e.next();!c.done;c=e.next())c.value.Ki()}a=q(Sf);for(e=a.next();!e.done;e=a.next())if(e=e.value,!(e.na<=Nh)){if(e.na>Oh+1)break;e.bound.C-=1E5;e.bound.G+=1E5;e.bound.s-=1E5;e.bound.v+=1E5;c=q(e);for(b=c.next();!b.done;b=c.next())b=b.value,b.y<e.floor&&(e.floor=b.y),b.y>e.oa&&(e.oa=b.y);e.oa+=e.style.height;e.l=e.floor;e.Yb||(e.Yb=e.Bc?new G(.8,.8,.8):new G);c=q(e);for(b=c.next();!b.done;b=
c.next())for(b=b.value,b.$j=[],d=q(b),h=d.next();!h.done;h=d.next()){h=h.value;var g=[];Fh(h,g);Gh(g);b.$j.push(g);h.z=.5*h.C+.5*h.G;h.x=.5*h.s+.5*h.v;h.y=h.platform.y;h.C<e.bound.C&&(e.bound.C=h.C);h.G>e.bound.G&&(e.bound.G=h.G);h.s<e.bound.s&&(e.bound.s=h.s);h.v>e.bound.v&&(e.bound.v=h.v)}}a=q(Sf);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.na<=Nh)){if(b.na>Oh+1)break;e=q(b);for(b=e.next();!b.done;b=e.next())for(c=q(b.value.ob),b=c.next();!b.done;b=c.next())b.value.Ii()}a=q(Sf);for(e=a.next();!e.done;e=
a.next())if(e=e.value,!(e.na<=Nh)){if(e.na>Oh+1)break;e.oa=e.Bc?0:Math.min(-18750,e.oa);c=[];d=q(e);for(b=d.next();!b.done;b=d.next())c.push.apply(c,ba(b.value));d=c;d=uh(d,9375,9375);b=[];d=q(d);for(h=d.next();!h.done;h=d.next()){h=h.value;g=b.length;for(var k=0;k<g;k++)b[k].vg(h,b)&&(b.splice(k--,1),g--);b.push(h)}d=b;e.ql=[];d=q(d);for(b=d.next();!b.done;b=d.next())h=[],Fh(b.value,h),Gh(h),e.ql.push(h);b=c;b=Bh(b,1);b=uh(b,9375,9375);b=Bh(b,0);e.ak=[];c=q(b);for(b=c.next();!b.done;b=c.next())d=
[],Fh(b.value,d),Gh(d),e.ak.push(d)}b=q(Sf);for(e=b.next();!e.done;e=b.next())if(a=e.value,!(a.na<=Nh)){if(a.na>Oh+1)break;ji(a);c=a;a=ki(Infinity,c.index,t.c.P.get("HandRail01"),bh);a.facing=0;a.Fa=2;e=c.style.Mc;c=q(c.xl);for(d=c.next();!d.done;d=c.next())for(d=d.value,h=q(d),g=h.next();!g.done;g=h.next()){g=g.value;var l=[];k=(g.T-g.R)/2E5;for(var m=Math.round(k),n=.5*(k-m);.125>n;)--m,n+=.5;if(!(0>m))for(l.push({Eb:.5,zg:0,length:n}),l.push({Eb:1,zg:0,length:k-2*n}),l.push({Eb:.5,zg:1-n,length:n}),
k=0,m=new L(g.mc(),g.lc()),l=q(l),n=l.next();!n.done;n=l.next()){n=n.value;k+=2E5*n.length;var r=g.Hf(k,0),p=[];var u=new hd(m.y,d.y,m.x);ld(u,n.zg,n.Eb);kd(u,e);p.push(u);u=new hd(r.y,d.y,r.x);ld(u,n.zg+n.length,n.Eb);kd(u,e);p.push(u);u=new hd(r.y,d.y+112500,r.x);ld(u,n.zg+n.length,n.Eb-.5);kd(u,e);p.push(u);u=new hd(m.y,d.y+112500,m.x);ld(u,n.zg,n.Eb-.5);kd(u,e);p.push(u);a.Pd.push(p);m=r}}}a=q(Sf);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.na<=Nh)){if(b.na>Oh+1)break;e=q(b);for(b=e.next();!b.done;b=
e.next())for(c=q(b.value.ob),b=c.next();!b.done;b=c.next())b.value.Fi()}b=q(Sf);for(e=b.next();!e.done;e=b.next())if(a=e.value,!(a.na<=Nh)){if(a.na>Oh+1)break;a=q(a.ub);for(e=a.next();!e.done;e=a.next())e.value.stroke()}a=q(Sf);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.na<=Nh)){if(b.na>Oh+1)break;e=q(b);for(b=e.next();!b.done;b=e.next())for(c=q(b.value.ob),b=c.next();!b.done;b=c.next())b.value.ij()}hi++}}
function Xh(a,b){Rg=qh();var c=[];c.length=0;for(var d=q(a),e=d.next();!e.done;e=d.next()){var h=e.value,g=q(b);for(e=g.next();!e.done;e=g.next()){var k=e.value,l=[];if(h.U==k.U&&h.y!=k.y){if(h.Ub){var m=void 0,n=q(h.Ub);for(e=n.next();!e.done;e=n.next())e=e.value,e.target==k&&(m||(m=li(h)),l.push(mi(h,k,m,e.direction)))}if(k.Ub)for(m=void 0,n=q(k.Ub),e=n.next();!e.done;e=n.next())e=e.value,e.target==h&&(m||(m=li(k)),l.push(mi(k,h,m,e.direction)));h.Ub||k.Ub||(l.push(ni(h,k)),l.push(ni(k,h)),!mh(2)&&
l.reverse());c=c.concat(l)}}}d=q(c);for(e=d.next();!e.done;e=d.next())for(e=e.value,oh(e),h=q(e),e=h.next();!e.done;e=h.next())if(e=e.value,oi(e))return e.pa.ob.push(e),e;c.length=0;d=q(a);for(e=d.next();!e.done;e=d.next())for(h=e.value,g=q(b),e=g.next();!e.done;e=g.next())e=e.value,h.U!=e.U&&h.y==e.y&&(c=h.U.na==e.U.na&&h.U.Db==e.U.Db?c.concat(pi(h,e)):c.concat(qi(h,e,112500)));oh(c);d=q(c);for(e=d.next();!e.done;e=d.next())if(e=e.value,oi(e))return e.pa.ob.push(e),e.Ta.ob.push(e),e;c.length=0;a=
q(a);for(e=a.next();!e.done;e=a.next())for(d=e.value,h=q(b),e=h.next();!e.done;e=h.next())if(g=e.value,k=[],d.U!=g.U&&d.y!=g.y){if(d.Ub)for(l=void 0,m=q(d.Ub),e=m.next();!e.done;e=m.next())e=e.value,e.target==g&&(l||(l=li(d)),k.push(mi(d,g,l,e.direction)));if(g.Ub)for(l=void 0,m=q(g.Ub),e=m.next();!e.done;e=m.next())e=e.value,e.target==d&&(l||(l=li(g)),k.push(mi(g,d,l,e.direction)));d.Ub||g.Ub||(k.push(ni(d,g)),k.push(ni(g,d)),!mh(2)&&k.reverse());c=c.concat(k)}b=q(c);for(e=b.next();!e.done;e=b.next())for(c=
e.value,oh(c),c=q(c),e=c.next();!e.done;e=c.next())if(a=e.value,oi(a)){a.pa.ob.push(a);if(e=a.lk)e=a,h=e.lk,g=[],g.index=Wh++,g.ob=[],g.y=e.Ta.y,g.U=e.pa.U,g.U.push(g),h.platform=g,g.push(h),d=e.pa.slice(),xh(e.pa,[h]),Sh(),h=Xh([g],[e.Ta]),h||(e.pa.length=0,e.pa.push.apply(e.pa,ba(d)),e.pa.U.pop(),Wh--),e=!h;if(e)a.pa.ob.pop();else return a}}
function Yh(a,b){function c(y,x,C){-x.d<=y.R||-x.d>y.T||x.R>=y.d||x.T<y.d||(C=[(new ri).raw(y.d,y.R,-x.d).rotate(C),(new si).raw(-x.d,-y.d,-x.R).rotate(C)],C.ug=y.source,C.Df=x.source,C.Qa=C[0].T-C[0].R+(C[1].T-C[1].R),14E5>=C.Qa&&Sa(h,C))}function d(y,x,C){y.d!=-x.d||-x.R<=y.R||-x.T>y.T||(C=[(new ri).raw(y.d,y.R,-x.R).rotate(C)],C.ug=y.source,C.Df=x.source,C.Qa=C[0].T-C[0].R,14E5>=C.Qa&&Sa(h,C))}var e=uh(ph(),162500,162500),h=[];h.cmp=function(y,x){return y.Qa<x.Qa?-1:1};var g=[],k=[];a=q(a);for(var l=
a.next();!l.done;l=a.next())g=g.concat(Lh(l.value));b=q(b);for(a=b.next();!a.done;a=b.next())k=k.concat(Lh(a.value));b=[[],[],[],[]];a=[[],[],[],[]];for(l=0;4>l;l++){for(var m=sh(e,l),n=q(g),r=n.next();!r.done;r=n.next()){var p=r.value;r=p.source.source;p=th(p.x,p.y,l);var u=p.y,z=p.x;p=Dh(p.x,p.y,m);p<=z||(u=new ri(u,z,p),u.source=r,b[l].push(u))}n=q(k);for(r=n.next();!r.done;r=n.next())p=r.value,r=p.source.source,p=th(p.x,p.y,l),u=p.y,z=p.x,p=Dh(p.x,p.y,m),p<=z||(u=new ri(u,z,p),u.source=r,a[l].push(u))}for(e=
1;4>e;e++){g=void 0;g=(e+1)%4;k=q(b[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=q(a[g]),r=m.next();!r.done;r=m.next())c(l,r.value,e,g);k=q(a[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=q(b[g]),r=m.next();!r.done;r=m.next())c(l,r.value,e,g);g=(e+2)%4;k=q(b[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=q(a[g]),r=m.next();!r.done;r=m.next())d(l,r.value,e,g)}for(b=0;b<h.length;b++){a=h[b];e=a[0];g=a[a.length-1];k=a.ug.platform;l=a.Df.platform;m=Math.min(k.y,l.y);r=Math.max(k.y,
l.y);if(e==g){if(n=25E3*(Math.floor((e.T-e.R-325E3)/5E4)-1),0>n&&(n=0),Math.abs(l.y-k.y)>n){h.splice(b--,1);continue}}else if(n=25E3*(Math.floor((e.T-e.R-325E3)/5E4)-1),0>n&&(n=0),m=Math.max(m,k.y-n),r=Math.min(r,k.y+n),n=25E3*(Math.floor((g.T-g.R-325E3)/5E4)-1),0>n&&(n=0),m=Math.max(m,l.y-n),r=Math.min(r,l.y+n),m>r){h.splice(b--,1);continue}a.y=nh(m,r);a.Ub=[];Math.abs(k.y-a.y)/25E3&&a.Ub.push({direction:(e.zb()+2+3)%4,target:k});Math.abs(l.y-a.y)/25E3&&a.Ub.push({direction:(g.zb()+3)%4,target:l});
a.Ub.length||delete a.Ub}for(b=0;4>b;b++){a=h[b];if(!a)break;g=a.ug.platform;k=a.Df.platform;e=[];Uh.call(e);e.index=Sf.length+Tf;e.Db=g.U.na>k.U.na?g.U.Db:k.U.Db;e.Db.push(e);Sf.push(e);0==e.index%5&&(e.Bc=!0);e.style={};e.style.height=225E3;e.style.height+=5E4*mh(4);e.style.Mc=e.Db.Mc;e.Bc?(e.style.xc=nh(hh,jh),e.style.Ua=1E5):(e.style.xc=nh(fh,ih,kh),e.style.Ua=e.Db.Ua);g=[];g.index=Wh++;g.ob=[];g.y=a.y;a.Ub&&(g.Ub=a.Ub);g.U=e;e.push(g);k=q(a);for(l=k.next();!l.done;l=k.next())l=l.value.vh().expand(162500,
162500),l.platform=g,g.push(l);Sh();k=k=void 0;if(g.y==a.Df.platform.y){if(k=Xh([a.ug.platform],[g])){if(k=Xh([g],[a.Df.platform]))return a;a.ug.platform.ob.pop()}}else if(k=Xh([g],[a.Df.platform])){if(k=Xh([a.ug.platform],[g]))return a;a.Df.platform.ob.pop()}Sf.pop();e.Db.pop()}return!1}
function qi(a,b,c){a.ue=ti(a,c);b.ue=ti(b,c);var d=[],e=[],h=c+37500,g=rh(a.ue,h,0),k=rh(b.ue,-h,0);k=yh(g,k);var l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=0;e=e.concat(k);g=rh(a.ue,0,h);k=rh(b.ue,0,-h);k=yh(g,k);l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=1;e=e.concat(k);g=rh(a.ue,-h,0);k=rh(b.ue,h,0);k=yh(g,k);l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=2;e=e.concat(k);g=rh(a.ue,0,-h);h=rh(b.ue,0,h);h=yh(g,h);k=q(h);for(g=k.next();!g.done;g=k.next())g.value.direction=
3;e=e.concat(h);oh(e);h=new zh(-9375,9375,-c,c);e=q(e);for(g=e.next();!g.done;g=e.next()){g=g.value;k=h.Xf(g.direction);l=q([{z:g.C,x:g.s},{z:g.G-1,x:g.v-1}]);for(var m=l.next();!m.done;m=l.next())m=m.value,m=k.translate(m.z,m.x),m.y=a.y,m.direction=g.direction,d.push(new ui(m,c,a,b))}return d}function ti(a,b){b+=37500;var c=vh(a,new zh(0,1,0,1));a=Bh(c,1);a=vh(a,new zh(-b,b,-b,b));xh(c,a);return c}
function pi(a,b){for(var c=[],d=q(a),e=d.next();!e.done;e=d.next())Fh(e.value,c);d=[];c=q(c);for(e=c.next();!e.done;e=c.next()){e=e.value;for(var h=q(b),g=h.next();!g.done;g=h.next())e.ah(g.value,d)}for(c=[];d.length;){e=d.pop();for(h=0;h<d.length;h++)g=d[h],e.zb()==g.zb()&&e.d==g.d&&(e.T==g.R?(d.splice(h,1),e.T=g.T,h=-1):e.R==g.T&&(d.splice(h,1),e.R=g.R,h=-1));225E3>e.T-e.R||c.push(e)}d=[];c=q(c);for(e=c.next();!e.done;e=c.next())d.push(new vi(e.value,a,b));return d}
function Vh(){var a=U;if(!a.Bc){for(var b=new zh,c=q(a),d=c.next();!d.done;d=c.next()){var e=q(d.value);for(d=e.next();!d.done;d=e.next())Ah(b,d.value)}var h=b.G-b.C-2E5-2E5-30625-30625;d=b.v-b.s-2E5-2E5-30625-30625;c=Math.round(h/625E3);e=Math.round(d/625E3);h=b.C+2E5+30625+.5*(h-625E3*(c-1));b=b.s+2E5+30625+.5*(d-625E3*(e-1));var g=[],k=q(a);for(d=k.next();!d.done;d=k.next())g=g.concat(d.value);g=Bh(g,1);g=uh(g,2E5,2E5);for(k=0;k<c;k++){for(var l=b,m={},n=0;n<e;m={yh:m.yh},n++){d=function(p){return function(){for(var u=
q(g),z=u.next();!z.done;z=u.next())if(wi(p.yh,z.value))return!1;return!0}}(m);m.yh=new zh(h-30625,h+30625,l-30625,l+30625);if(d()){var r=q(a);for(d=r.next();!d.done;d=r.next())xh(d.value,[m.yh])}l+=625E3}h+=625E3}}}function ni(a,b){for(var c=li(a),d=[],e=0;4>e;e++)d=d.concat(mi(a,b,c,e));return d}
function mi(a,b,c,d){var e=25E3*Math.ceil(Math.abs(b.y-a.y)/25E3),h=a.U!=b.U?325E3:0,g=function(l,m,n){function r(y){for(var x=0;x<y.length;x++)for(var C=y[x],A=x+1;A<y.length;A++){var D=y[A];if(C.C==D.C&&C.G==D.G){if(D.v==C.s){y.splice(A--,1);C.s=D.s;x--;break}if(D.s==C.v){y.splice(A--,1);C.v=D.v;x--;break}}}y=q(y);for(x=y.next();!x.done;x=y.next())x=x.value,x.s=x.v-1,x.direction=d}var p=Bh(l,1);p=vh(p,new zh(-162499,162500,-e-h+1,e+162500+162500));l=p=Bh(p,0);p=vh(n,new zh(0,0,-e-h+1,e));p=Bh(p,
1);p=vh(p,new zh(-162500,162501,0,0));l=p=yh(l,p);p=Bh(m,1);p=vh(p,new zh(-162499,162500,-162499,162500));p=Bh(p,0);n=[];m=yh(l,rh(p,0,-e-h-162500));r(m);for(var u=q(m),z=u.next();!z.done;z=u.next())z.value.type=1;n=n.concat(m);if(0!=h){m=yh(l,rh(p,-325E3,-e-162500));r(m);u=q(m);for(z=u.next();!z.done;z=u.next())z.value.type=0;n=n.concat(m);m=yh(l,rh(p,325E3,-e-162500));r(m);l=q(m);for(z=l.next();!z.done;z=l.next())z.value.type=2;n=n.concat(m)}return n}(sh(a,d),sh(b,d),sh(c,d));c=[];g=q(g);for(var k=
g.next();!k.done;k=g.next())c.push(new xi(k.value,e,h,a,b));return c}function li(a){for(var b=a.slice(),c=q(a.lf),d=c.next();!d.done;d=c.next())d=d.value,d=d.Ia.platform!=a?d.Ia.platform:d.ka.platform,d.U==a.U&&(b=b.concat(d));return b}
function Sh(){for(var a=[],b=q(Sf),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;d.lf=[];for(var e=q(d),h=e.next();!h.done;h=e.next())h.value.lf=[];a=a.concat(d)}}for(b=0;b<a.length;b++)for(c=a[b],d=b+1;d<a.length;d++)if(e=a[d],h=yi(c,e))h.Ia=c,h.ka=e,c.lf.push(h),e.lf.push(h),c.platform!=e.platform&&(c.platform.lf.push(h),e.platform.lf.push(h))}
function di(){Rg=qh();var a=q(Sf),b=a.next();a:for(;!b.done;b=a.next())if(b=b.value,!b.bm){b.bm=!0;b=q(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=q(c.lf),e=d.next();!e.done;e=d.next())if(e=e.value,e=e.Ia.platform!=c?e.Ia.platform:e.ka.platform,c.U.na==e.U.na&&!(c.index<=e.index)&&c.U!=e.U){var h=qi(c,e,87500);oh(h);h=q(h);for(var g=h.next();!g.done;g=h.next())if(g=g.value,oi(g)){g.Wc=!0;c.ob.push(g);e.ob.push(g);continue a}}}}}
function Uh(){this.na=Mh+1;this.xl=[];this.ub=[];this.rc=[];this.bound=new Hd;this.oa=-Infinity;this.floor=Infinity;this.l=-Infinity;this.ia={};this.ia.xa=-2147483648;this.ia.sb=new G(1,1,1);this.cd=0;this.Jb=new G;this.cells=new db(qb)}var Wh=0;
function ui(a,b,c,d){this.Oa=a;this.direction=a.direction;this.b=b;this.pa=c;this.Ta=d;this.z=.5*a.C+.5*a.G;this.x=.5*a.s+.5*a.v;this.y=Math.max(c.y,d.y);this.ac=[];this.Cf=[];this.nd=[];this.Bd=[];this.ub=[];c=new zh(a.C,a.G,a.s,a.v);c.l=a.y;c.u=c.l+225E3;this.nd.push(c);this.Cf.push(c);b=new zh(2*-b,2*b,-b,b);b=b.rotate(this.direction);b=b.translate(this.z,this.x);b.u=a.y;b.l=b.u-18750;this.nd.push(b);b=new zh(b.C,b.G,b.s,b.v);b.l=a.y;b.u=b.l+225E3;this.Bd.push(b)}f=ui.prototype;f.Fj=function(){Jg.cl.push(this.Oa)};
f.translate=function(a,b){this.z+=a;this.x+=b};
f.Fi=function(){if(!this.ub.length){this.$c=0;var a=new ri(0,0,1);a=a.rotate(this.direction);this.Aa=new xc(a.mc()+this.z,a.lc()+this.x,a.Pb()+this.z,a.Ob()+this.x);a=new zi;a.add=!0;a.Ua=0;a.color=Xg;this.Wc?(a.l=this.y+87500,a.u=a.l+125E3):(a.l=this.y,a.u=this.y+225E3);for(var b=[new L(0,-this.b),new L(0,this.b),new L(-9375,this.b),new L(-9375,-this.b)],c=[new L(0,this.b),new L(0,-this.b),new L(9375,-this.b),new L(9375,this.b)],d=0;d<b.length;d++)b[d]=this.Aa.nb(b[d].x,b[d].y);for(d=0;d<c.length;d++)c[d]=
this.Aa.nb(c[d].x,c[d].y);a.aa=this.pa.U.index;Ai(a,b);this.ub.push(a);a=a.da();a.aa=this.Ta.U.index;Ai(a,c);this.ub.push(a);this.qc=new Qf(new xc(b[0].x,b[0].y,b[1].x,b[1].y),a.l,a.u);this.Hc=new Qf(new xc(c[0].x,c[0].y,c[1].x,c[1].y),a.l,a.u);this.qc.Zc=this.Hc;this.Hc.Zc=this.qc;this.qc.aa=this.pa.U.index;this.Hc.aa=this.Ta.U.index;this.qc.Wc=this.Wc;this.Hc.Wc=this.Wc}};
f.ij=function(){if(0==this.$c){for(var a=q(this.ub),b=a.next();!b.done;b=a.next())b.value.stroke();this.$c=1}1!=this.$c||this.pa.U.na>Oh+1||this.Ta.U.na>Oh+1||(this.pa.U.rc.push(this.qc),this.Ta.U.rc.push(this.Hc),this.$c=2)};f.create=function(){if(this.Qi)this.Qi.update();else if(0<this.$c)if(this.Wc)this.Qi=new Bi(this.Aa,this.y+87500,this.pa.U,this.Ta.U);else if(this.pa.U.na!=this.Ta.U.na||this.pa.U.Bc!=this.Ta.U.Bc)this.Qi=new Ci(this.Aa,this.y,this.qc,this.Hc,this.pa.U,this.Ta.U)};
f.Ki=function(){if(!this.xf){for(var a=q(this.ub),b=a.next();!b.done;b=a.next())ii(b.value);this.xf=!0}};function $h(a){var b=a.pa.ob,c=b.indexOf(a);0>c||b.splice(c,1);b=a.Ta.ob;a=b.indexOf(a);0>a||b.splice(a,1)}f.Ii=function(){if(this.Wc){var a=this.y+87500;var b=a+125E3}else a=this.y,b=this.y+225E3;this.pa.U.oa=Math.max(this.pa.U.oa,b);this.Ta.U.oa=Math.max(this.Ta.U.oa,b);this.pa.U.l=Math.min(this.pa.U.l,a);this.Ta.U.l=Math.min(this.Ta.U.l,a)};
function vi(a,b,c){var d=.5*(a.T-a.R)-9375,e=a.vh();this.direction=(a.zb()+3)%4;this.b=d;this.Oa=e;this.pa=b;this.Ta=c;this.z=.5*e.C+.5*e.G;this.x=.5*e.s+.5*e.v;this.y=Math.max(b.y,c.y);e.y=this.y;this.ac=[];this.Cf=[];this.nd=[];this.Bd=[];this.ub=[];a=new zh(e.C,e.G,e.s,e.v);a.l=e.y;a.u=a.l+225E3;this.nd.push(a);this.Cf.push(a);d=new zh(-225E3,225E3,-d,d);d=d.rotate(this.direction);d=d.translate(this.z,this.x);d.u=e.y;d.l=d.u-18750;this.nd.push(d);d=new zh(d.C,d.G,d.s,d.v);d.l=e.y;d.u=d.l+225E3;
this.Bd.push(d)}f=vi.prototype;f.Fj=function(){Jg.cl.push(this.Oa)};f.translate=function(a,b){this.z+=a;this.x+=b};
f.Fi=function(){if(!this.ub.length){this.$c=0;var a=new ri(0,0,1);a=a.rotate(this.direction);this.Aa=new xc(a.mc()+this.z,a.lc()+this.x,a.Pb()+this.z,a.Ob()+this.x);a=new zi;a.add=!0;a.Ua=0;a.color=Xg;this.Wc?(a.l=this.y+87500,a.u=a.l+125E3):(a.l=this.y,a.u=Math.min(this.pa.U.oa,this.Ta.U.oa));for(var b=[new L(0,-this.b),new L(0,this.b),new L(-9375,this.b),new L(-9375,-this.b)],c=[new L(0,this.b),new L(0,-this.b),new L(9375,-this.b),new L(9375,this.b)],d=0;d<b.length;d++)b[d]=this.Aa.nb(b[d].x,b[d].y);
for(d=0;d<c.length;d++)c[d]=this.Aa.nb(c[d].x,c[d].y);a.aa=this.pa.U.index;Ai(a,b);this.ub.push(a);a=a.da();a.aa=this.Ta.U.index;Ai(a,c);this.ub.push(a);this.qc=new Qf(new xc(b[0].x,b[0].y,b[1].x,b[1].y),a.l,a.u);this.Hc=new Qf(new xc(c[0].x,c[0].y,c[1].x,c[1].y),a.l,a.u);this.qc.Zc=this.Hc;this.Hc.Zc=this.qc;this.qc.aa=this.pa.U.index;this.Hc.aa=this.Ta.U.index;this.qc.Wc=this.Wc;this.Hc.Wc=this.Wc}};
f.ij=function(){if(0==this.$c){for(var a=q(this.ub),b=a.next();!b.done;b=a.next())b.value.stroke();this.$c=1}1!=this.$c||this.pa.U.na>Oh+1||this.Ta.U.na>Oh+1||(this.pa.U.rc.push(this.qc),this.Ta.U.rc.push(this.Hc),this.$c=2)};f.create=function(){};f.Ki=function(){if(!this.xf){for(var a=q(this.ub),b=a.next();!b.done;b=a.next())ii(b.value);this.xf=!0}};f.Ii=function(){};
function xi(a,b,c,d,e){this.Oa=a;this.direction=a.direction;this.type=a.type;this.Fb=162500;this.Ud=b;this.pa=d;this.Ta=e;var h=Math.min(d.y,e.y),g=Math.max(d.y,e.y);this.ac=[];this.Cf=[];this.nd=[];this.Bd=[];this.ub=[];var k=new zh(-162500,162500,-b,b);k=k.translate(a.C,a.s);k=k.rotate(this.direction);k.l=h-18750;k.u=g;this.ac.push(k);this.Cf.push(k);k=new zh(k.C,k.G,k.s,k.v);k.l=h;k.u=g+2E5;this.Bd.push(k);k=new zh(-162500,162500,-b-162500-162500,-b);k=k.translate(a.C,a.s);k=k.rotate(this.direction);
k.l=d.y;k.u=g+2E5;this.Bd.push(k);k=new zh(k.C,k.G,k.s,k.v);k.l=h-18750;k.u=d.y;this.ac.push(k);this.nd.push(k);if(c){d=new zh(-162500,162500,b,b+c);d=d.translate(a.C,a.s);d=d.rotate(this.direction);d.l=e.y;d.u=g+2E5;this.Bd.push(d);d=new zh(d.C,d.G,d.s,d.v);d.l=h-18750;d.u=e.y;this.ac.push(d);this.nd.push(d);this.lk=d;var l;0==this.type?l=new zh(162500,487500,b,b+c):1==this.type?l=new zh(-162500,162500,b+c,b+c+325E3):2==this.type&&(l=new zh(-487500,-162500,b,b+c));l=l.translate(a.C,a.s);l=l.rotate(this.direction);
l.l=e.y;l.u=g+2E5;this.Bd.push(l);l=new zh(l.C,l.G,l.s,l.v);l.l=h-18750;l.u=e.y;this.ac.push(l);this.nd.push(l)}else b=new zh(-162500,162500,b,b+162500),b=b.translate(a.C,a.s),b=b.rotate(this.direction),b.l=e.y,b.u=g+2E5,this.Bd.push(b),b=new zh(b.C,b.G,b.s,b.v),b.l=h-18750,b.u=e.y,this.ac.push(b),this.nd.push(b)}f=xi.prototype;
f.Fj=function(){var a=(this.Ta.y-this.pa.y)/25E3;if(this.Ta.y>this.pa.y)for(var b=0;b<=a;b++){var c=new ri(this.Oa.s-this.Ud+5E4*b,this.Oa.C-this.Fb,this.Oa.C+this.Fb);c=c.rotate(this.direction);c.y=this.pa.y+25E3*b;Jg.Pl.push(c)}else for(a=-a,b=0;b<=a;b++)c=new ri(this.Oa.s-this.Ud+5E4*b,this.Oa.C-this.Fb,this.Oa.C+this.Fb),c=c.rotate(this.direction),c.y=this.pa.y-25E3*b,Jg.Pl.push(c)};
f.translate=function(a,b){this.z+=a;this.x+=b;this.Oa=this.Oa.rotate(this.direction);this.Oa.C+=a;this.Oa.G+=a;this.Oa.s+=b;this.Oa.v+=b;this.Oa=this.Oa.Xf(this.direction);this.ac[0].C+=a;this.ac[0].G+=a;this.ac[0].s+=b;this.ac[0].v+=b};
f.Fi=function(){if(!this.ub.length){this.$c=0;var a=this.pa.U,b=(this.Ta.y-this.pa.y)/25E3,c=function(h){return 1!=h.Nh?!1:!0};if(this.Ta.y>this.pa.y)for(c=0;c<b;c++){var d=new zh(this.Oa.C-this.Fb,this.Oa.C+this.Fb,this.Oa.s-this.Ud+5E4*c,this.Oa.s-this.Ud+5E4*(c+1));d=d.rotate(this.direction);d=[new L(d.C,d.s),new L(d.G,d.s),new L(d.G,d.v),new L(d.C,d.v)];a=new zi;a.add=!1;a.aa=this.pa.U.index;a.Ua=0;a.color=Xg;a.l=this.pa.y;a.u=this.pa.y+25E3*(c+1);Ai(a,d);this.ub.push(a)}else for(b=-b,d=new zi,
d.add=!0,d.Nh=1,d.aa=this.pa.U.index,d.bh=c,d.xc=a.style.xc,d.Ua=a.style.Ua,d.df=a.l,d.color=a.style.Mc,d.l=this.Ta.y,d.u=this.pa.y,a=this.ac[0],Ai(d,[new L(a.C,a.s),new L(a.G,a.s),new L(a.G,a.v),new L(a.C,a.v)]),this.ub.push(d),d=0;d<b;d++){a=new zh(this.Oa.C-this.Fb,this.Oa.C+this.Fb,this.Oa.s-this.Ud+5E4*d,this.Oa.s-this.Ud+5E4*(d+1));a=a.rotate(this.direction);a=[new L(a.C,a.s),new L(a.G,a.s),new L(a.G,a.v),new L(a.C,a.v)];var e=new zi;e.add=!1;e.aa=this.pa.U.index;e.bh=c;e.Ua=0;e.color=Xg;e.l=
this.Ta.y;e.u=this.pa.y-25E3*d;Ai(e,a);this.ub.push(e)}}};f.ij=function(){if(0==this.$c){for(var a=q(this.ub),b=a.next();!b.done;b=a.next())b.value.stroke();this.$c=2}};f.create=function(){};f.Ki=function(){if(!this.xf){for(var a=q(this.ub),b=a.next();!b.done;b=a.next())ii(b.value);this.xf=!0}};f.Ii=function(){this.pa.U.l=Math.min(this.pa.U.l,this.Ta.y);this.Ta.U.l=Math.min(this.Ta.U.l,this.pa.y)};
function Di(a,b){for(var c=q(a.nd),d=c.next();!d.done;d=c.next()){var e=d.value,h=q(b.Cf);for(d=h.next();!d.done;d=h.next())if(Ei(e,d.value))return!1}c=q(a.Cf);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=q(b.nd),d=h.next();!d.done;d=h.next())if(Ei(e,d.value))return!1;c=q(a.Bd);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=q(b.ac),d=h.next();!d.done;d=h.next())if(Ei(e,d.value))return!1;a=q(a.ac);for(d=a.next();!d.done;d=a.next())for(c=d.value,e=q(b.Bd),d=e.next();!d.done;d=e.next())if(Ei(c,
d.value))return!1;return!0}function oi(a){for(var b=q(Rg),c=b.next();!c.done;c=b.next())if(!Di(a,c.value))return!1;return!0}
function ji(a){function b(k){return k.add&&k.aa==this.aa?!0:!1}0>a.style.Ua&&(a.style.Ua+=a.oa-a.floor);for(var c=q(a.ak),d=c.next();!d.done;d=c.next()){d=d.value;var e=new zi;e.add=!0;e.Nh=1;e.aa=a.index;e.Ua=a.style.Ua;e.color=a.style.Mc;e.xc=a.style.xc;e.df=a.l;e.l=a.l;e.u=a.oa;Ai(e,Xc(d));a.ub.push(e);a.Bc&&(e.oa=null)}if(a.rl)for(c=q(a.rl),d=c.next();!d.done;d=c.next())d=d.value,e=new zi,e.add=!0,e.Nh=1,e.aa=a.index,e.Ua=a.style.Ua,e.color=a.style.Mc,e.xc=a.style.xc,e.df=a.l,e.l=a.l,e.u=a.oa,
Ai(e,Xc(d)),a.ub.push(e);c=q(a);for(d=c.next();!d.done;d=c.next())if(e=d.value,!(e.y<=a.l)){var h=q(e.$j);for(d=h.next();!d.done;d=h.next()){d=d.value;var g=new zi;g.add=!1;g.Nh=1;g.aa=a.index;g.bh=b;g.Ua=a.style.Ua;g.color=a.style.Mc;g.xc=a.style.xc;g.df=a.floor;g.l=a.l;g.u=e.y;Ai(g,Xc(d));a.ub.push(g)}}};function zh(a,b,c,d){a=void 0===a?NaN:a;b=void 0===b?NaN:b;c=void 0===c?NaN:c;d=void 0===d?NaN:d;this.C=a;this.G=b;this.s=c;this.v=d}f=zh.prototype;f.Oe=function(a,b){return a<=this.C||a>=this.G||b<=this.s||b>=this.v?!1:!0};f.Qf=function(a,b){a<this.C?a=this.C:a>this.G&&(a=this.G);b<this.s?b=this.s:b>this.v&&(b=this.v);return new L(a,b)};function Fi(a,b,c){var d=0;b<a.C?d+=a.C-b:b>a.G&&(d+=b-a.G);c<a.s?d+=a.s-c:c>a.v&&(d+=c-a.v);return d}
function Ih(a,b,c){b>=a.C||(a.C=b);b<=a.G||(a.G=b);c>=a.s||(a.s=c);c<=a.v||(a.v=c)}function Ah(a,b){b.C>=a.C||(a.C=b.C);b.G<=a.G||(a.G=b.G);b.s>=a.s||(a.s=b.s);b.v<=a.v||(a.v=b.v)}f.ec=function(a,b){a-=.5*this.G+.5*this.C;b-=.5*this.v+.5*this.s;return 1E5/Math.sqrt(a*a+b*b)};f.expand=function(a,b){return this.da(this.C-a,this.G+a,this.s-b,this.v+b)};
function Fh(a,b){var c=new ri(a.s,a.C,a.G);c.source=a;b.push(c);c=new Gi(a.G,a.s,a.v);c.source=a;b.push(c);c=new Hi(a.v,a.G,a.C);c.source=a;b.push(c);c=new si(a.C,a.v,a.s);c.source=a;b.push(c)}
function fi(a,b,c,d,e){var h=new zh(a.G+b+d,a.G+b+d,Math.min(a.s+c,a.v-c)-d,Math.max(a.s+c,a.v-c)+d);h.G+=1;h.v+=1;e.push(h);h=new zh(Math.min(a.C+b,a.G-b)-d,Math.max(a.C+b,a.G-b)+d,a.v+c,a.v+c+d);h.G+=1;h.v+=1;e.push(h);h=new zh(a.C-b-d,a.C-b-d,Math.min(a.s+c,a.v-c)-d,Math.max(a.s+c,a.v-c)+d);h.G+=1;h.v+=1;e.push(h);h=new zh(Math.min(a.C+b,a.G-b)-d,Math.max(a.C+b,a.G-b)+d,a.s-c-d,a.s-c-d);h.G+=1;h.v+=1;e.push(h)}
f.da=function(a,b,c,d){a=new zh(a,b,c,d);this.Oj&&(a.Oj=this.Oj);this.platform&&(a.platform=this.platform);this.U&&(a.U=this.U);void 0!==this.direction&&(a.direction=this.direction);void 0!==this.type&&(a.type=this.type);return a};
f.vg=function(a,b){if(!wi(this,a))return!1;var c=this.s,d=this.v;this.v>a.v&&(b.push(this.da(this.C,this.G,a.v,this.v)),d=a.v);this.s<a.s&&(b.push(this.da(this.C,this.G,this.s,a.s)),c=a.s);this.G>a.G&&b.push(this.da(a.G,this.G,c,d));this.C<a.C&&b.push(this.da(this.C,a.C,c,d));return!0};f.ah=function(a,b){a=this.da(Math.max(this.C,a.C),Math.min(this.G,a.G),Math.max(this.s,a.s),Math.min(this.v,a.v));a.G<=a.C||a.v<=a.s||b.push(a)};function wh(a,b){return a.da(a.C+b.C,a.G+b.G,a.s+b.s,a.v+b.v)}
f.rotate=function(a){switch(a){case 0:return this.da(this.C,this.G,this.s,this.v);case 1:return this.da(-this.v,-this.s,this.C,this.G);case 2:return this.da(-this.G,-this.C,-this.v,-this.s);case 3:return this.da(this.s,this.v,-this.G,-this.C)}};f.Xf=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return this.da(this.C+a,this.G+a,this.s+b,this.v+b)};function yi(a,b){a=new zh(Math.max(a.C,b.C),Math.min(a.G,b.G),Math.max(a.s,b.s),Math.min(a.v,b.v));return a.G<a.C||a.v<a.s?null:a}
function wi(a,b){return a.C>=b.G||a.G<=b.C||a.s>=b.v||a.v<=b.s?!1:!0}function Ei(a,b){return!wi(a,b)||a.l>=b.u||a.u<=b.l?!1:!0}function gi(a,b,c){var d=0;a=q(a);for(var e=a.next();!e.done;e=a.next())d+=e.value.ec(b,c);return d}function ri(a,b,c){this.d=a;this.R=b;this.T=c}function Gi(a,b,c){this.d=-a;this.R=b;this.T=c}function Hi(a,b,c){this.d=-a;this.R=-b;this.T=-c}function si(a,b,c){this.d=a;this.R=-b;this.T=-c}f=ri.prototype;f.zb=function(){return 0};f.mc=function(){return this.R};f.lc=function(){return this.d};
f.Pb=function(){return this.T};f.Ob=function(){return this.d};f.raw=function(a,b,c){this.d=a;this.R=b;this.T=c;return this};f.vf=function(){return new xc(this.mc(),this.lc(),this.Pb(),this.Ob())};f.da=function(a,b,c){a=new ri(a,b,c);a.source=this.source;return a};f.Rh=function(a,b,c){if(!this.th){var d=new L(this.R+a,this.d-b);d.source=this;c.push(d)}this.Sg||(a=new L(this.T-a,this.d-b),a.source=this,c.push(a))};f.Hf=function(a,b){return new L(this.R+a,this.d+b)};
f.Oe=function(a,b){return b>this.d||b<this.d||a<this.R||a>=this.T?!1:!0};f.Qf=function(a){return a<this.R?new L(this.R,this.d):a>this.T?new L(this.T,this.d):new L(a,this.d)};f.vg=function(a,b){if(this.d>a.v||this.d<=a.s||this.R>=a.G||this.T<=a.C)return!1;this.R<a.C&&b.push(this.da(this.d,this.R,a.C));this.T>a.G&&b.push(this.da(this.d,a.G,this.T));return!0};f.ah=function(a,b){this.d>a.v||this.d<=a.s||this.R>=a.G||this.T<=a.C||b.push(this.da(this.d,Math.max(this.R,a.C),Math.min(this.T,a.G)))};
f.vh=function(){return new zh(this.R,this.T,this.d,this.d)};f.rotate=function(a){switch(a){case 0:return(new ri).raw(this.d,this.R,this.T);case 1:return(new Gi).raw(this.d,this.R,this.T);case 2:return(new Hi).raw(this.d,this.R,this.T);case 3:return(new si).raw(this.d,this.R,this.T)}};f.Xf=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new ri).raw(this.d+b,this.R+a,this.T+a)};f=Gi.prototype;f.zb=function(){return 1};f.mc=function(){return-this.d};f.lc=function(){return this.R};
f.Pb=function(){return-this.d};f.Ob=function(){return this.T};f.raw=ri.prototype.raw;f.vf=ri.prototype.vf;f.da=function(a,b,c){a=new Gi(-a,b,c);a.source=this.source;return a};f.Rh=function(a,b,c){if(!this.th){var d=new L(-this.d+a,this.R+b);d.source=this;c.push(d)}this.Sg||(a=new L(-this.d+a,this.T-b),a.source=this,c.push(a))};f.Hf=function(a,b){return new L(-this.d-b,this.R+a)};f.Oe=function(a,b){return a>-this.d||a<-this.d||b<this.R||b>=this.T?!1:!0};
f.Qf=function(a,b){return b<this.R?new L(-this.d,this.R):b>this.T?new L(-this.d,this.T):new L(-this.d,b)};f.vg=function(a,b){if(-this.d>=a.G||-this.d<a.C||this.R>=a.v||this.T<=a.s)return!1;this.R<a.s&&b.push(this.da(this.d,this.R,a.s));this.T>a.v&&b.push(this.da(this.d,a.v,this.T));return!0};f.ah=function(a,b){-this.d>=a.G||-this.d<a.C||this.R>=a.v||this.T<=a.s||b.push(this.da(this.d,Math.max(this.R,a.s),Math.min(this.T,a.v)))};f.vh=function(){return new zh(-this.d,-this.d,this.R,this.T)};
f.rotate=function(a){switch(a){case 0:return(new Gi).raw(this.d,this.R,this.T);case 1:return(new Hi).raw(this.d,this.R,this.T);case 2:return(new si).raw(this.d,this.R,this.T);case 3:return(new ri).raw(this.d,this.R,this.T)}};f.Xf=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Gi).raw(this.d-a,this.R+b,this.T+b)};f=Hi.prototype;f.zb=function(){return 2};f.mc=function(){return-this.R};f.lc=function(){return-this.d};f.Pb=function(){return-this.T};f.Ob=function(){return-this.d};
f.raw=ri.prototype.raw;f.vf=ri.prototype.vf;f.da=function(a,b,c){a=new Hi(-a,-b,-c);a.source=this.source;return a};f.Rh=function(a,b,c){if(!this.th){var d=new L(-this.R-a,-this.d+b);d.source=this;c.push(d)}this.Sg||(a=new L(-this.T+a,-this.d+b),a.source=this,c.push(a))};f.Hf=function(a,b){return new L(-this.R-a,-this.d-b)};f.Oe=function(a,b){return b>-this.d||b<-this.d||a>-this.R||a<=-this.T?!1:!0};f.Qf=function(a){return a<-this.T?new L(-this.T,-this.d):a>-this.R?new L(-this.R,-this.d):new L(a,-this.d)};
f.vg=function(a,b){if(-this.d>=a.v||-this.d<a.s||-this.T>=a.G||-this.R<=a.C)return!1;-this.T<a.C&&b.push(this.da(this.d,-a.C,this.T));-this.R>a.G&&b.push(this.da(this.d,this.R,-a.G));return!0};f.ah=function(a,b){-this.d>=a.v||-this.d<a.s||-this.T>=a.G||-this.R<=a.C||b.push(this.da(this.d,Math.max(this.R,-a.G),Math.min(this.T,-a.C)))};f.vh=function(){return new zh(-this.T,-this.R,-this.d,-this.d)};
f.rotate=function(a){switch(a){case 0:return(new Hi).raw(this.d,this.R,this.T);case 1:return(new si).raw(this.d,this.R,this.T);case 2:return(new ri).raw(this.d,this.R,this.T);case 3:return(new Gi).raw(this.d,this.R,this.T)}};f.Xf=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Hi).raw(this.d-b,this.R-a,this.T-a)};f=si.prototype;f.zb=function(){return 3};f.mc=function(){return this.d};f.lc=function(){return-this.R};f.Pb=function(){return this.d};f.Ob=function(){return-this.T};
f.raw=ri.prototype.raw;f.vf=ri.prototype.vf;f.da=function(a,b,c){a=new si(a,-b,-c);a.source=this.source;return a};f.Rh=function(a,b,c){if(!this.th){var d=new L(this.d-a,-this.R-b);d.source=this;c.push(d)}this.Sg||(a=new L(this.d-a,-this.T+b),a.source=this,c.push(a))};f.Hf=function(a,b){return new L(this.d+b,-this.R-a)};f.Oe=function(a,b){return a>this.d||a<this.d||b>-this.R||b<=-this.T?!1:!0};f.Qf=function(a,b){return b<-this.T?new L(this.d,-this.T):b>-this.R?new L(this.d,-this.R):new L(this.d,b)};
f.vg=function(a,b){if(this.d>a.G||this.d<=a.C||-this.T>=a.v||-this.R<=a.s)return!1;-this.T<a.s&&b.push(this.da(this.d,-a.s,this.T));-this.R>a.v&&b.push(this.da(this.d,this.R,-a.v));return!0};f.ah=function(a,b){this.d>a.G||this.d<=a.C||-this.T>=a.v||-this.R<=a.s||b.push(this.da(this.d,Math.max(this.R,-a.v),Math.min(this.T,-a.s)))};f.vh=function(){return new zh(this.d,this.d,-this.T,-this.R)};
f.rotate=function(a){switch(a){case 0:return(new si).raw(this.d,this.R,this.T);case 1:return(new ri).raw(this.d,this.R,this.T);case 2:return(new Gi).raw(this.d,this.R,this.T);case 3:return(new Hi).raw(this.d,this.R,this.T)}};f.Xf=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new si).raw(this.d+a,this.R-b,this.T-b)};
function Ii(a,b){function c(){for(var n=new db(Bc),r=q(a),p=r.next();!p.done;p=r.next())p=p.value,n.add(p),n.add(p.ca);r=q(a);for(p=r.next();!p.done;p=r.next())if(p=p.value,!p.remove){var u=n.get(p);u!=p&&(p.replace([u]),p.ca.replace([u.ca]))}return n.elements}function d(){for(var n=q(m),r=n.next();!r.done;r=n.next()){r=r.value;var p=r.x&-524288,u=r.y&-524288,z=!1;r.x<=p+256?(r.x=p,z=!0):r.x>=p+524288-256&&(r.x=p+524288,z=!0);r.y<=u+256?(r.y=u,z=!0):r.y>=u+524288-256&&(r.y=u+524288,z=!0);if(z){u=
q(r.inputs);for(p=u.next();!p.done;p=u.next())p.value.Mg=!0;r=q(r.outputs);for(p=r.next();!p.done;p=r.next())p.value.Mg=!0}}}function e(n,r,p){var u=Dc(r,n.j,n.g),z=Dc(r,n.B,n.A),y=Dc(n,r.j,r.g),x=Dc(n,r.B,r.A);if(-256>y&&256<x&&(-256>u&&256<z||256<u&&-256>z)||256<y&&-256>x&&(-256>u&&256<z||256<u&&-256>z)){u/=u-z;z=1-u;x=new L(Math.round(n.j*z+n.B*u),Math.round(n.g*z+n.A*u));u=n.bb(n.j,n.g,x.x,x.y);z=n.bb(x.x,x.y,n.B,n.A);y=r.bb(r.j,r.g,x.x,x.y);x=r.bb(x.x,x.y,r.B,r.A);var C=Vc(u),A=Vc(z),D=Vc(y),
I=Vc(x);n.replace([u,z]);n.ca.replace([A,C]);r.replace([y,x]);r.ca.replace([I,D]);p.push(u,z,y,x);p.push(C,A,D,I);n=!0}else n=!1;return n}function h(n,r){if(!n.remove){for(var p=q(m),u=p.next();!u.done;u=p.next())if(u=u.value,u.x!=n.j||u.y!=n.g)if(u.x!=n.B||u.y!=n.A){var z=n.Hf(u.x,u.y);if(!(0>=z.x||z.x>=n.length||-256>z.y||256<z.y)){p=n.bb(n.j,n.g,u.x,u.y);u=n.bb(u.x,u.y,n.B,n.A);z=n.bb(p.B,p.A,p.j,p.g);var y=n.bb(u.B,u.A,u.j,u.g);p.ca=z;z.ca=p;u.ca=y;y.ca=u;n.replace([p,u]);n.ca.replace([y,z]);
h(p,r);h(u,r);h(z,r);h(y,r);return}}r.push(n)}}for(var g=[],k=q(a),l=k.next();!l.done;l=k.next())l=l.value,l.remove||g.push(l);a=g;a=c();b&&(a=Ji(null,a,e));var m=new db(nd);b=q(a);for(l=b.next();!l.done;l=b.next())g=l.value,k=new L(g.j,g.g),k.inputs=[],k.outputs=[],k.b=1,g.Ia=m.Ha(k),g.Ia.outputs.push(g),g.Ia.b++,k=new L(g.B,g.A),k.inputs=[],k.outputs=[],k.b=1,g.ka=m.Ha(k),g.ka.inputs.push(g),g.ka.b++;m=m.elements;d();m=Ji(null,m,function(n,r,p){if(256>(Math.abs(r.x-n.x)+Math.abs(r.y-n.y))*Math.SQRT1_2){var u=
new L(n.x*n.b+r.x*r.b,n.y*n.b+r.y*r.b);u.b=n.b+r.b;u.x/=u.b;u.y/=u.b;u.round();u.inputs=n.inputs.concat(r.inputs);u.outputs=n.outputs.concat(r.outputs);n=q(u.inputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.ka=u,r.Mg=!0;n=q(u.outputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.Ia=u,r.Mg=!0;p.push(u);p=!0}else p=!1;return p});d();for(b=0;b<a.length;b++)g=a[b],g.remove?a.splice(b--,1):g.Ia==g.ka?(g.replace([]),g.ca.replace([]),a.splice(b--,1)):g.Mg&&(k=g.bb(g.Ia.x,g.Ia.y,g.ka.x,g.ka.y),l=Vc(k),
g.replace([k]),g.ca.replace([l]),a.splice(b++,1,k,l)),delete g.Ia,delete g.ka,delete g.Mg;(function(){for(var n=[],r=q(a),p=r.next();!p.done;p=r.next())h(p.value,n);a=n})();return a=c()}
function Ji(a,b,c){var d=[];if(a)for(var e=0;e<a.length;e++){var h=a[e];if(h.remove)a.splice(e--,1);else for(var g=0;g<b.length;g++){var k=b[g];if(k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);a.splice(e--,1);break}}}for(e=0;e<b.length;e++)if(h=b[e],h.remove)b.splice(e--,1);else for(g=e+1;g<b.length;g++)if(k=b[g],k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);b.splice(e--,1);break}a&&(b=a.concat(b));return d.length?Ji(b,d,c):b};var Ki,Li,Mi,Ni,Oi,Pi=0;
function Qi(){function a(c){function d(x,C,A){return th(C,A,x.zb()).y>=x.d}function e(x){x.Qa=0;var C=x.j,A=x.g;if(1==x.action)if(x.qb.length){var D=x.qb[0],I=D.mc()-C;D=D.lc()-A;x.Qa+=Math.sqrt(I*I+D*D);I=q(x.qb);for(D=I.next();!D.done;D=I.next())A=D.value,x.Qa+=A.T-A.R,C=A.Pb(),A=A.Ob()}else I=x.Z.Pb(),D=x.Z.Ob(),C=I-C,A=D-A,x.Qa+=Math.sqrt(C*C+A*A),C=I,A=D;else if(2==x.action)if(x.qb.length)for(D=x.qb[0],I=D.Pb()-C,D=D.Ob()-A,x.Qa+=Math.sqrt(I*I+D*D),I=q(x.qb),D=I.next();!D.done;D=I.next())A=D.value,
x.Qa+=A.T-A.R,C=A.mc(),A=A.lc();else I=x.Z.Pb(),D=x.Z.Ob(),C=I-C,A=D-A,x.Qa+=Math.sqrt(C*C+A*A),C=I,A=D;C=x.B-C;A=x.A-A;x.Qa+=Math.sqrt(C*C+A*A)}function h(x){x.fc=0;for(var C=q(x),A=C.next();!A.done;A=C.next())A=A.value,x.fc=A.complete?x.fc+.5*A.Qa:x.fc+A.Qa}for(var g=null,k=0,l=0;l<c.length;l++)if(!c[l].complete){k=l;g=c[l];break}if(!g)return!0;if(1==g.action){g.Z=g.Z.next;l=g.Z.Pb();var m=g.Z.Ob();if(l==g.j&&m==g.g||l==g.B&&m==g.A)return!1;for(var n=g.Z,r=g.Z.next;0<k;){var p=c[k-1],u=Dc(p,l,m);
if(1==p.pb&&0<=u||2==p.pb&&0>=u)p=new xc(p.j,p.g,g.B,g.A),p.action=g.action,p.complete=g.complete,p.pb=g.pb,p.Z=g.Z,p.qb=g.qb,p.max=p,c=c.slice(),c.splice(--k,2,p),Sa(Mi,c),g=p;else break}p=!d(n,g.B,g.A)&&d(r,g.B,g.A);if(g.qb.length){if(th(r.Pb(),r.Ob(),n.zb()).y>n.d||p){l=[];m=g.qb[0];m=new xc(g.j,g.g,m.mc(),m.lc());m.Qa=m.length;m.action=0;m.pb=g.action;l.push(m);m=q(g.qb);for(n=m.next();!n.done;n=m.next())n=n.value,n=new xc(n.mc(),n.lc(),n.Pb(),n.Ob()),n.Qa=n.length,n.complete=1,n.action=0,n.pb=
g.action,l.push(n);m=g.qb[g.qb.length-1];m=new xc(m.Pb(),m.Ob(),g.B,g.A);m.Qa=m.length;m.action=0;m.pb=g.pb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(ba(l)));e(g);h(c);Sa(Mi,c)==c&&Sa(Ki,c);return!1}g.qb.push(r)}else{u=r.Pb();var z=r.Ob();if(0<=Dc(g.max,l,m)&&(g.max=new xc(g.j,g.g,l,m),th(u,z,n.zb()).y<n.d&&!d(r,g.j,g.g))){if(p)return n=[],r=new xc(g.j,g.g,l,m),r.Qa=r.length,r.action=0,r.pb=g.action,n.push(r),l=new xc(l,m,g.B,g.A),l.Qa=l.length,l.action=0,l.pb=g.pb,n.push(l),c=c.slice(),
c.splice.apply(c,[k,1].concat(ba(n))),e(g),h(c),Sa(Mi,c)==c&&Sa(Ki,c),!1;g.qb.push(r)}}e(g);h(c);Sa(Ki,c)}else if(2==g.action){g.Z=g.Z.rb;l=g.Z.Pb();m=g.Z.Ob();if(l==g.j&&m==g.g||l==g.B&&m==g.A)return!1;n=g.Z.next;for(r=g.Z;0<k;)if(p=c[k-1],u=Dc(p,l,m),1==p.pb&&0<=u||2==p.pb&&0>=u)p=new xc(p.j,p.g,g.B,g.A),p.action=g.action,p.complete=g.complete,p.pb=g.pb,p.Z=g.Z,p.qb=g.qb,p.max=p,c=c.slice(),c.splice(--k,2,p),Sa(Mi,c),g=p;else break;p=!d(n,g.B,g.A)&&d(r,g.B,g.A);if(g.qb.length){if(th(r.mc(),r.lc(),
n.zb()).y>n.d||p){l=[];m=g.qb[0];m=new xc(g.j,g.g,m.Pb(),m.Ob());m.Qa=m.length;m.action=0;m.pb=g.action;l.push(m);m=q(g.qb);for(n=m.next();!n.done;n=m.next())n=n.value,n=new xc(n.Pb(),n.Ob(),n.mc(),n.lc()),n.Qa=n.length,n.complete=1,n.action=0,n.pb=g.action,l.push(n);m=g.qb[g.qb.length-1];m=new xc(m.mc(),m.lc(),g.B,g.A);m.Qa=m.length;m.action=0;m.pb=g.pb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(ba(l)));e(g);h(c);Sa(Mi,c)==c&&Sa(Ki,c);return!1}g.qb.push(r)}else if(u=r.mc(),z=r.lc(),0>=Dc(g.max,
l,m)&&(g.max=new xc(g.j,g.g,l,m),th(u,z,n.zb()).y<n.d&&!d(r,g.j,g.g))){if(p)return n=[],r=new xc(g.j,g.g,l,m),r.Qa=r.length,r.action=0,r.pb=g.action,n.push(r),l=new xc(l,m,g.B,g.A),l.Qa=l.length,l.action=0,l.pb=g.pb,n.push(l),c=c.slice(),c.splice.apply(c,[k,1].concat(ba(n))),e(g),h(c),Sa(Mi,c)==c&&Sa(Ki,c),!1;g.qb.push(r)}e(g);h(c);Sa(Ki,c)}else{l=[];l.cmp=function(x,C){return x.t<C.t?-1:x.t>C.t?1:x.Qe<C.Qe?-1:x.Qe>C.Qe?1:x.Z.next==C.Z?-x.Qe:x.Z.rb==C.Z?x.Qe:0};m=q(Ni);for(n=m.next();!n.done;n=m.next())if(n=
n.value,!n.disabled)if(r=th(g.j,g.g,n.zb()),p=th(g.B,g.A,n.zb()),p.y==r.y){if(p.y==n.d){var y=z=void 0;u=void 0;if(p.x>r.x)z=Math.max(r.x,n.R),y=Math.min(p.x,n.T),u=1;else if(p.x<r.x)z=Math.max(p.x,n.R),y=Math.min(r.x,n.T),u=-1;else continue;z>=y||(z=Math.round(.5*z+.5*y),Sa(l,{t:(z-r.x)/(p.x-r.x),Jg:-1,Qe:u,Z:n,x:z,y:n.d}))}}else u=p.x<r.x?-1:1,z=(n.d-r.y)/(p.y-r.y),0>z||1<z||(y=Math.round(r.x+(p.x-r.x)*z),p.y<r.y?y<n.R||y>n.T||Sa(l,{t:z,Jg:0,Qe:u,Z:n,x:y,y:n.d}):p.y>r.y&&!(y<n.R)&&(y>n.T||Sa(l,
{t:z,Jg:1,Qe:u,Z:n,x:y,y:n.d})));m=null;for(n=1;n<l.length;n++)if(r=l[n-1],p=l[n],0==r.Jg&&1==p.Jg&&r.t<p.t){m=r;break}if(!m)return g.complete=1,Sa(Ki,c),!1;l=g.da();l.action=1;l.max=l;l.pb=g.pb;l.Z=m.x==m.Z.T?m.Z:m.Z.rb;l.qb=[];n=c.slice();n[k]=l;n.fc=0;Sa(Mi,n)==n&&Sa(Ki,n);l=g.da();l.action=2;l.max=l;l.pb=g.pb;l.Z=m.x==m.Z.R?m.Z.rb:m.Z;l.qb=[];c=c.slice();c[k]=l;c.fc=0;Sa(Mi,c)==c&&Sa(Ki,c)}return!1}for(;Pi&&Ki.length;){Li++;Pi--;var b=Ki.shift();if(a(b))return Ki=null,b}if(0==Ki.length)return Ki=
null}
function Ri(a,b,c,d){var e=Ni;Ni=e;Mi=[];Mi.cmp=function(l,m){if(l.length<m.length)return-1;if(l.length>m.length)return 1;for(var n=0;n<l.length;n++){var r=l[n],p=m[n];if(r.j<p.j)return-1;if(r.j>p.j)return 1;if(r.g<p.g)return-1;if(r.g>p.g)return 1;if(r.B<p.B)return-1;if(r.B>p.B)return 1;if(r.A<p.A)return-1;if(r.A>p.A)return 1;if(r.action<p.action)return-1;if(r.action>p.action)return 1}return 0};a=(new L(a,b)).round();c=(new L(c,d)).round();b=null;var h=NaN,g=q(e.bj);for(d=g.next();!d.done;d=g.next()){d=
d.value;var k=Fi(d,a.x,a.y);k>=h||(h=k,b=d)}a=b.Qf(a.x,a.y);b=null;h=NaN;e=q(e.bj);for(d=e.next();!d.done;d=e.next())d=d.value,g=Fi(d,c.x,c.y),g>=h||(h=g,b=d);c=b.Qf(c.x,c.y);Li=0;Ki=[];Ki.cmp=function(l,m){return l.fc<m.fc?-1:1};a=new xc(a.x,a.y,c.x,c.y);a.Qa=a.length;a.action=0;a=[a];a.fc=0;Sa(Ki,a);return Qi()};var bg,Si,Ti,Ui,Vi=new xc(0,0,1,0),Wi=4095/741455.429632,Xi=[];Xi.cmp=function(a,b){return a.index-b.index};var Yi=new db(function(a,b){return a.y<b.y?-1:a.y>b.y?1:a.aa<b.aa?-1:a.aa>b.aa?1:a.ba.name<b.ba.name?-1:a.ba.name>b.ba.name?1:xe(a.X,b.X)});function Zi(a,b){return a.y>b.y?-1:a.y<b.y?1:0}function $i(a,b){a=Ue(a.src.aa).Pk;b=Ue(b.src.aa).Pk;return a-b}function ki(a,b,c,d){var e=new cg;e.y=a;e.aa=b;e.ba=c;e.X=d;e.Pd=[];return Yi.Ha(e)}var hi=0;
function aj(){if(0==hi){if(Mh>=Oh+2)var a=!1;else{var b=[ci,ai,ai];a=0>Mh?Rh():b[Mh%b.length].call()}return a}if(1==hi){var c=Xi.slice();t.Rf();for(var d=q(c),e=d.next();!e.done;e=d.next())e.value.xa=t.xa;var h=q(c);for(e=h.next();!e.done;e=h.next())for(var g=e.value,k=0;4>k;k++){var l=bj(g,k);l&&l.xa!=t.xa&&(l.xa=t.xa,Sa(Xi,l))}bg=[];hi++;Si=0;return!0}if(2==hi){var m=Xi[Si];if(m)return cj(m),Si++,!0;hi++;Si=0}if(3==hi){t.Rf();Ti=t.xa;var n=Xi[Si];if(n){for(var r=0;4>r;r++){var p=bj(n,r);if(p&&p.xa!=
Ti){var u=n,z=p,y=[];switch(r){case 0:var x=$e(u.index);var C=x.x+512;for(var A=q(u.ga),D=A.next();!D.done;D=A.next()){var I=D.value;(I.j<=C||I.B<=C)&&y.push(I)}C=x.x-512;var J=q(z.ga);for(D=J.next();!D.done;D=J.next()){var O=D.value;(O.j>=C||O.B>=C)&&y.push(O)}break;case 1:x=$e(u.index);C=x.y+512;var pa=q(u.ga);for(D=pa.next();!D.done;D=pa.next()){var ra=D.value;(ra.g<=C||ra.A<=C)&&y.push(ra)}C=x.y-512;var ca=q(z.ga);for(D=ca.next();!D.done;D=ca.next()){var da=D.value;(da.g>=C||da.A>=C)&&y.push(da)}break;
case 2:x=$e(z.index);C=x.x+512;var Fb=q(z.ga);for(D=Fb.next();!D.done;D=Fb.next()){var hb=D.value;(hb.j<=C||hb.B<=C)&&y.push(hb)}C=x.x-512;var Yb=q(u.ga);for(D=Yb.next();!D.done;D=Yb.next()){var sc=D.value;(sc.j>=C||sc.B>=C)&&y.push(sc)}break;case 3:x=$e(z.index);C=x.y+512;var Nb=q(z.ga);for(D=Nb.next();!D.done;D=Nb.next()){var tc=D.value;(tc.g<=C||tc.A<=C)&&y.push(tc)}C=x.y-512;var Da=q(u.ga);for(D=Da.next();!D.done;D=Da.next()){var Ib=D.value;(Ib.g>=C||Ib.A>=C)&&y.push(Ib)}}Ii(y,!1)}}n.xa=Ti;Si++;
return!0}hi++;Si=0}if(4==hi){var xf=Xi[Si];if(xf)return xf.evaluate(),Si++,!0;hi++;Si=0}if(5==hi){var va=Xi[Si];if(va){for(var yf=q(va.Ik),ze=yf.next();!ze.done;ze=yf.next())ze.value.evaluate();Si++;return!0}hi++;Si=0}if(6==hi){var zf=Xi[Si];if(zf)return dj(zf),Si++,!0;hi++;Si=0}if(7==hi){var lc=Xi[Si];if(lc)return ej(lc),Si++,!0;hi++;Si=0}if(8==hi)return ag(),hi++,!0;if(9==hi)return Re=cf(),fj.Wd=new cg,fj.Wd.X=new Qd,fj.Wd.X.name="creaseShading",fj.Wd.X.Fa=1,fj.Wd.X.Md=new M(0,0,0,127.5),fj.Wd.D=
t.c.sa.get("creaseShading"),gj=0,fj.Af=Array(Ve.elements.length),hj=0,hi++,!0;if(10==hi){if(ij())return!0;hi++;return!0}if(11==hi){if(Ui&&0!=t.h%1)return!1;for(;Sf.length&&Sf[0].xf;)Sf.shift(),Tf++;Se.length=0;Te=Tf;for(var Af=q(Sf),kb=Af.next();!kb.done;kb=Af.next()){var Sd=kb.value;if(Sd.na>Oh+1)break;Se.push(Sd)}var Bf=q(Se);for(kb=Bf.next();!kb.done;kb=Bf.next())for(var Ae=kb.value,Td=0;Td<Ae.rc.length;Td++)Ae.rc[Td].Zc.aa>=Te||Ae.rc.splice(Td--,1);for(var Ud=0;Ud<Yi.elements.length;Ud++){var Cf=
Yi.elements[Ud];Cf.aa<Tf&&(Yi.elements.splice(Ud--,1),Cf.kd.parent=null,Ld(Cf.kd))}var Be=q(Se);for(kb=Be.next();!kb.done;kb=Be.next()){var lb=kb.value;lb.na<=Nh||(lb.Jb.x/=lb.cd,lb.Jb.y/=lb.cd,lb.Jb.z/=lb.cd,lb.Jb.x/=255,lb.Jb.y/=255,lb.Jb.z/=255)}var Pb=q(Se);for(kb=Pb.next();!kb.done;kb=Pb.next()){var Df=kb.value;if(!(Df.na<=Nh))for(var vd=q(Df),cd=vd.next();!cd.done;cd=vd.next())for(var Ef=q(cd.value.ob),Jb=Ef.next();!Jb.done;Jb=Ef.next())Jb.value.create()}qf?pf=!0:tf();Nh=Oh+1;for(var Ff=q(t.fj.elements),
Ce=Ff.next();!Ce.done;Ce=Ff.next())jj(Ce.value);for(var Gf=q(Yi.elements),Hf=Gf.next();!Hf.done;Hf=Gf.next()){var Na=Hf.value;if(!Na.kd){var Ab=Ue(Na.aa);if(Ab&&!(Ab.na>Nh)){var Oc=Na;Oc.Kb.cmp=id;for(var Qb=q(Oc.Pd),cb=Qb.next();!cb.done;cb=Qb.next())for(var yc=cb.value,Vd=0;Vd<yc.length;Vd++)yc[Vd]=Sa(Oc.Kb,yc[Vd]);for(var mc=0;mc<Oc.Kb.length;mc++)Oc.Kb[mc].index=mc;var If=q(Oc.Pd);for(cb=If.next();!cb.done;cb=If.next())for(var wd=cb.value,$b=0;$b<wd.length;$b++)wd[$b]=wd[$b].index;delete Oc.Kb.cmp;
Na.compile();delete Na.Pd;Na.kd=new eg(Na,"worldMesh");isNaN(Na.facing)||(Na.kd.facing=Na.facing);Na.kd.ia=Ab.ia;Na.kd.Ch=!0;Na.kd.Pa=["portalLightIndex",Ab.Xe,!0];Infinity!=Na.y?(Na.kd.y=Na.y,S(Na.kd,t.af)):S(Na.kd,t.Gk);delete Na.y;0==Na.facing&&(Na.D=t.c.sa.get("physicalThreshold"))}}}hi++;return!0}if(12==hi){for(var sa=[],Pc=q(Se),zc=Pc.next();!zc.done;zc=Pc.next())for(var De=q(zc.value),Qc=De.next();!Qc.done;Qc=De.next())sa=sa.concat(Qc.value);var Ee=[],Wd=[],Xd=[],Jf=[],Fe=q(Se);for(zc=Fe.next();!zc.done;zc=
Fe.next()){var Kf=q(zc.value);for(Qc=Kf.next();!Qc.done;Qc=Kf.next())for(var Yd=q(Qc.value.ob),Kb=Yd.next();!Kb.done;Kb=Yd.next()){var xd=Kb.value;if(xd instanceof xi){if(!Ue(xd.pa.U.index))continue}else{if(!Ue(xd.pa.U.index))continue;if(!Ue(xd.Ta.U.index))continue}Jf.push(xd)}}var yd=q(Jf);for(Kb=yd.next();!Kb.done;Kb=yd.next()){var Z=Kb.value;if(Z instanceof ui){if(!Z.Wc){var Ka=new zh(-40675,40675,-Z.b+40675,Z.b-40675);Z.fb=[];var Aa=new Gi(Ka.C,Ka.s,Ka.v);Aa=Aa.rotate(Z.direction);Aa=Aa.translate(Z.z,
Z.x);Aa.source=Ka;Z.fb.push(Aa);Aa=new ri(Ka.s,Ka.C,Ka.G);Aa=Aa.rotate(Z.direction);Aa=Aa.translate(Z.z,Z.x);Aa.source=Ka;Z.fb.push(Aa);Aa=new si(Ka.G,Ka.v,Ka.s);Aa=Aa.rotate(Z.direction);Aa=Aa.translate(Z.z,Z.x);Aa.source=Ka;Z.fb.push(Aa);Aa=new Hi(Ka.v,Ka.G,Ka.C);Aa=Aa.rotate(Z.direction);Aa=Aa.translate(Z.z,Z.x);Aa.source=Ka;Z.fb.push(Aa);Ka=Ka.rotate(Z.direction);Ka=Ka.translate(Z.z,Z.x);Ka.Mi=Z;Wd.push(Ka)}}else if(Z instanceof vi){var dd=new zh(-40675,40675,-Z.b-9375+40675,Z.b+9375-40675);dd=
dd.rotate(Z.direction);dd=dd.translate(Z.z,Z.x);Xd.push(dd)}else if(Z instanceof xi){var zd=new zh(-Z.Fb+40675,Z.Fb-40675,-Z.Ud-40675,Z.Ud+40675);zd=zd.translate(Z.Oa.C,Z.Oa.s);zd=zd.rotate(Z.direction);Ee.push(zd);var Ad=new zh(-Z.Fb,Z.Fb,-Z.Ud,Z.Ud);Ad=Ad.translate(Z.Oa.C,Z.Oa.s);Ad=Ad.rotate(Z.direction);sa=xh(sa,[Ad])}}for(var nc=[],Rc=0;Rc<sa.length;Rc++)for(var Ge=sa[Rc],He=Rc+1;He<sa.length;He++){var Lf=sa[He];if(Ge.platform.U!=Lf.platform.U||25E3<Math.abs(Lf.platform.y-Ge.platform.y)){var Mf=
yi(Ge,Lf);Mf&&nc.push(Mf)}}sa=Bh(sa,1);sa=sa.concat(nc);sa=uh(sa,40675,40675);sa=Bh(sa);sa=Ch(sa);sa=sa.concat(Ee);sa=sa.concat(Xd);for(var Zd=[],$d=q(sa),Rb=$d.next();!Rb.done;Rb=$d.next())Fh(Rb.value,Zd);var Sc=q(Wd);for(Rb=Sc.next();!Rb.done;Rb=Sc.next()){var Nf=Rb.value;Zd.push(Nf.Mi.fb[1],Nf.Mi.fb[3])}sa=sa.concat(Wd);xh(Zd,sa);for(var ac=Kh(Hh(Zd)),ae=0,Of=q(ac),Ie=Of.next();!Ie.done;Ie=Of.next())for(var be=Ie.value,ed=be[be.length-1],Bg=q(be),ce=Bg.next();!ce.done;ce=Bg.next()){var de=ce.value;
de.index=ae++;ed.next=de;de.rb=ed;ed=de}for(var Je=[],oc=q(ac),fd=oc.next();!fd.done;fd=oc.next())Je=Je.concat(fd.value);ac=Je;ac.bj=sa;var Pf=q(Wd);for(Rb=Pf.next();!Rb.done;Rb=Pf.next()){var mb=Rb.value.Mi;mb.md=[mb.fb[1].rb,mb.fb[1].next,mb.fb[3].rb,mb.fb[3].next];mb.fb[0].rb=mb.md[0];mb.fb[0].next=mb.md[3];mb.fb[2].rb=mb.md[2];mb.fb[2].next=mb.md[1];ac.push(mb.fb[0]);ac.push(mb.fb[2]);var $a=mb;$a.md[0]&&$a.md[1]&&$a.md[2]&&$a.md[3]&&($a.md[0].next=$a.fb[1],$a.md[1].rb=$a.fb[1],$a.md[2].next=
$a.fb[3],$a.md[3].rb=$a.fb[3],$a.fb[0].disabled=!0,$a.fb[1].disabled=!1,$a.fb[2].disabled=!0,$a.fb[3].disabled=!1,$a.fb[0].y=-5E4,$a.fb[1].y=0,$a.fb[2].y=-5E4,$a.fb[3].y=0)}Ni=ac;hi=0}return!1}function kj(a,b){var c=new db(nd);a=q(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var e=new db(Wc);e.x=d.j;e.y=d.g;e=c.Ha(e);e.add(d);b&&(d=Vc(d),e=new db(Wc),e.x=d.j,e.y=d.g,e=c.Ha(e),e.add(d))}return c}
function lj(a){var b=[];b.bound=new Kc;var c=0,d=a.elements[c],e=d.elements.pop();d.elements.length||a.elements.splice(c,1);if(!e)return null;for(;;){b.push(e);b.bound.Ha(e.B,e.A);if(e.B==b[0].j&&e.A==b[0].g)return b;c=a.contains(new L(e.B,e.A));if(0>c)return null;d=a.elements[c];e=eb(d,Uc(e))-1;0>e&&(e+=d.elements.length);e=d.elements.splice(e,1)[0];d.elements.length||a.elements.splice(c,1)}}
function mj(a){for(var b=[],c=a[a.length-1],d=0;d<a.length;d++){var e=a[d];b.push(Cc(c,e));c=e}a.Ci=b;a.og=[];a.xj=0;b=q(a.Ci);for(c=b.next();!c.done;c=b.next())c=c.value,0>c?(a.xj-=c,a.og.push(-c)):a.og.push(0)}
function nj(a,b){var c=null;b=q(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.s<=d.bound.s||a.bound.l<=d.bound.l||a.bound.v>=d.bound.v||a.bound.u>=d.bound.u)){if(c){if(d.bound.s<=c.bound.s)continue;if(d.bound.l<=c.bound.l)continue;if(d.bound.v>=c.bound.v)continue;if(d.bound.u>=c.bound.u)continue}0>=Hc(a[0].B,a[0].A,d)||(c=d)}c&&c.mb.push(a)}
function oj(a){if(0==a.mb.length)return a;var b=[a].concat(a.mb),c={};c.fc=Number.NEGATIVE_INFINITY;for(var d=0;d<b.length;d++)for(var e=b[d],h=d+1;h<b.length;h++)for(var g=b[h],k=0;k<e.length;k++)for(var l=(k+1)%e.length,m=0;m<g.length;m++)c=pj(e,k,l,g,m,(m+1)%g.length,c,b);if(0>c.fc)return console.log("could not solve holes"),a.mb=[],a;e=c.Cd[c.ka].bb(c.Cd[c.ka].j,c.Cd[c.ka].g,c.Yd[c.d].j,c.Yd[c.d].g);d=e.bb(e.B,e.A,e.j,e.g);e.ca=d;d.ca=e;b=[];for(h=0;h<c.ka;h++)b.push(c.Cd[h]);b.push(e);e=c.d;
for(h=0;h<c.Yd.length;h++)b.push(c.Yd[e]),++e==c.Yd.length&&(e=0);b.push(d);for(d=c.ka;d<c.Cd.length;d++)b.push(c.Cd[d]);if(c.Cd==a)return a.mb.splice(a.mb.indexOf(c.Yd),1),b.mb=a.mb,mj(b),oj(b);a.mb.splice(a.mb.indexOf(c.Cd),1,b);a.mb.splice(a.mb.indexOf(c.Yd),1);mj(b);return oj(a)}
function pj(a,b,c,d,e,h,g,k){function l(p,u){function z(D,I,J){if(I==D.j&&J==D.g||I==D.B&&J==D.A)return!1;I=D.Hf(I,J);return 0>=I.x||I.x>=D.length||-256>I.y||256<I.y?!1:!0}var y=Dc(u,p.j,p.g),x=Dc(u,p.B,p.A),C=Dc(p,u.j,u.g),A=Dc(p,u.B,u.A);if(-256>C&&256<A&&(-256>y&&256<x||256<y&&-256>x)||256<C&&-256>A&&(-256>y&&256<x||256<y&&-256>x)||z(p,u.j,u.g)||z(p,u.B,u.A)||z(u,p.j,p.g)||z(u,p.B,p.A))return!0}var m=a[c],n=d[h];m=new xc(m.j,m.g,n.j,n.g);if(0==a.og[c]){if(0>=Dc(a[b],m.B,m.A)||0>=Dc(a[c],m.B,m.A))return g}else if(0>=
Dc(a[b],m.B,m.A)&&0>=Dc(a[c],m.B,m.A))return g;if(0==d.og[h]){if(0>=Dc(d[e],m.j,m.g)||0>=Dc(d[h],m.j,m.g))return g}else if(0>=Dc(d[e],m.j,m.g)&&0>=Dc(d[h],m.j,m.g))return g;if(k)for(k=q(k),n=k.next();!n.done;n=k.next()){var r=q(n.value);for(n=r.next();!n.done;n=r.next())if(l(m,n.value))return g}else for(k=q(a),n=k.next();!n.done;n=k.next())if(l(m,n.value))return g;k={};k.Cd=a;k.Ia=b;k.ka=c;k.Yd=d;k.Jg=e;k.d=h;k.Z=m;qj(k);return k.fc>g.fc?k:g}
function qj(a){a.fc=4095-a.Z.length*Wi;var b=Cc(a.Cd[a.Ia],a.Z),c=b-a.Cd.Ci[a.ka],d=Cc(a.Z,a.Yd[a.d]),e=d-a.Yd.Ci[a.d];a.fc+=.5/Math.PI*(a.Cd.og[a.ka]-(0>b?-b:0)-(0>c?-c:0)+(a.Yd.og[a.d]-(0>d?-d:0)-(0>e?-e:0)))*1048575}
function rj(a){if(3>a.length)return[];mj(a);if(0>=a.xj)return[a];for(var b={fc:Number.NEGATIVE_INFINITY},c=a.length-1,d=0;d<a.length;d++){for(var e=d+1,h=e+1;h<a.length;h++)b=pj(a,c,d,a,e,h,b),e=h;c=d}if(0>b.fc)return[a];h=new sj(a[b.ka].j,a[b.ka].g,a[b.d].j,a[b.d].g);c=new sj(a[b.d].j,a[b.d].g,a[b.ka].j,a[b.ka].g);h.ca=c;c.ca=h;d=[];e=[];for(var g=0;g<b.ka;g++)d.push(a[g]);d.push(h);for(h=b.d;h<a.length;h++)d.push(a[h]);for(h=b.ka;h<b.d;h++)e.push(a[h]);e.push(c);return rj(d).concat(rj(e))}
function wj(a){this.ga=null;this.l=Number.POSITIVE_INFINITY;this.u=Number.NEGATIVE_INFINITY;this.oa=this.floor=null;this.ea=a}wj.prototype.eg=function(a,b){if(this.u<=a.l||this.l>=a.u)b.push(this);else{if(this.l<a.l){var c=new wj(this.ea);c.l=this.l;c.u=a.l;c.floor=this.floor;c.oa=a.oa;b.push(c)}this.u>a.u&&(c=new wj(this.ea),c.l=a.u,c.u=this.u,c.floor=a.floor,c.oa=this.oa,b.push(c))}};function Cg(a,b,c){this.W=a;this.l=b;this.u=c;this.flags=0}function Dg(a,b){this.ga=a;this.y=b;this.flags=0}
function Eg(a,b){this.ga=a;this.y=b;this.flags=0}Dg.prototype.Wg=function(){if(this.ca)return this.ca;this.ca=new Eg(this.ga,this.y);this.ca.flags=this.flags;return this.ca};Eg.prototype.Wg=function(){if(this.ca)return this.ca;this.ca=new Dg(this.ga,this.y);this.ca.flags=this.flags;return this.ca};Cg.prototype.Wg=function(){if(this.ca)return this.ca;this.ca=new Cg(Vc(this.W),this.l,this.u);this.ca.flags=this.flags;return this.ca};function Ze(a){this.index=a;this.xh=this.xa=-2147483648;this.Ok=new gb(this);this.bd=new db(qb);this.hd=[];this.hi=new fb}function bj(a,b){a=af(a.index);switch(b){case 0:if(0==a.x)break;return Ve.get(bf(a.x-1,a.y));case 1:if(0==a.y)break;return Ve.get(bf(a.x,a.y-1));case 2:if(8191==a.x)break;return Ve.get(bf(a.x+1,a.y));case 3:if(8191!=a.y)return Ve.get(bf(a.x,a.y+1))}return null}
function cj(a){function b(g,k){return g.ea.index<k.ea.index?-1:g.ea.index>k.ea.index?1:0}a.Ik=[];a.ga=[];for(var c=q(a.bd.elements),d=c.next();!d.done;d=c.next()){d=q(d.value.ga);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=e.da();Vc(h);e.sh&&(h.Zb=[e]);h.Xd=[a.ga];a.ga.push(h)}}Ii(a.ga.slice(),!0);a=q(a.ga);for(e=a.next();!e.done;e=a.next())c=e.value,c.Zb&&yb(c.Zb,b),c.ca.Zb&&yb(c.ca.Zb,b)}
Ze.prototype.evaluate=function(){this.gj=[];this.hj=[];for(var a=kj(this.ga,!0),b=[],c=[];a.elements.length;){var d=lj(a);d&&(Gc(d)?c.push(d):(d.mb=[],b.push(d)))}a=q(c);for(c=a.next();!c.done;c=a.next())nj(c.value,b);a=[];b=q(b);for(c=b.next();!c.done;c=b.next())if(d=c.value,0==d.mb.length)a.push(d);else{mj(d);var e=q(d.mb);for(c=e.next();!c.done;c=e.next())mj(c.value);a.push(oj(d))}b=[];a=q(a);for(c=a.next();!c.done;c=a.next())b=b.concat(rj(c.value));a=q(b);for(c=a.next();!c.done;c=a.next())this.Ik.push(new xj(c.value,
this))};
function dj(a){function b(z,y){return z.sd<y.sd?-1:z.sd>y.sd?1:z.ea.aa<y.ea.aa?-1:z.ea.aa>y.ea.aa?1:yj(z.Y,y.Y)}function c(z,y){var x=fc(1/60);var C=-1;for(var A=1;A<z.length;A++){var D=Math.abs(Cc(z[A-1].W,z[A].W));D<x&&(x=D,C=A)}if(0>C)y.push.apply(y,ba(z));else{x=z[C-1];A=z[C];D=x.W.bb(x.W.j,x.W.g,A.W.B,A.W.A);var I=Vc(D);x.dd&&(0>x.dd.sd?x.dd.splice(x.dd.indexOf(x.W),2,D):x.dd.splice(x.dd.indexOf(A.W.ca),2,I));x.Xc&&(0<x.Xc.sd?x.Xc.splice(x.Xc.indexOf(x.W),2,D):x.Xc.splice(x.Xc.indexOf(A.W.ca),2,
I));x.W=D;z.splice(C,1);c(z,y)}}function d(z){var y=fc(1/60);var x=-1;for(var C=1;C<z.length;C++){var A=Math.abs(Cc(z[C-1],z[C]));A<y&&(y=A,x=C)}if(!(0>x)){y=z[x-1];C=z[x];A=y.bb(y.j,y.g,C.B,C.A);var D=Vc(A);A.Uc=y.Uc;y.Uc.splice(y.Uc.indexOf(y),2,A);C.ca&&(D.Uc=C.ca.Uc,C.ca.Uc.splice(C.ca.Uc.indexOf(C.ca),2,D));z.splice(x-1,2,A);d(z)}}for(var e=0,h=new db(function(z,y){return z.y<y.y?-1:z.y>y.y?1:0}),g=q(a.gj),k=g.next();!k.done;k=g.next()){var l=k.value,m=new db(b);m.y=l.y;m=h.Ha(m);k=[];k.sd=l.sd;
k.ea=l.ea;k.Y=l.Y;k=m.Ha(k);k.push(l)}g=q(h.elements);for(l=g.next();!l.done;l=g.next()){l=l.value;m=q(l.elements);for(k=m.next();!k.done;k=m.next()){var n=k.value,r=new db(Bc),p=q(n);for(k=p.next();!k.done;k=p.next()){var u=q(k.value);for(k=u.next();!k.done;k=u.next())k=k.value,r.remove(Uc(k))||r.push(k)}n.length=0;for(r=kj(r.elements);r.elements.length;){p=lj(r);if(!p)break;p.y=l.y;p.sd=n.sd;p.ea=n.ea;p.Y=n.Y;p.index=e++;u=q(p);for(k=u.next();!k.done;k=u.next())k.value.Uc=p;n.push(p)}}l.Ni=new db(Bc);
m=q(l.elements);for(k=m.next();!k.done;k=m.next())for(n=q(k.value),k=n.next();!k.done;k=n.next())for(r=q(k.value),k=r.next();!k.done;k=r.next())k=k.value,(p=l.Ni.remove(Uc(k)))?(k.ca=p,p.ca=k):l.Ni.push(k)}e=q(a.hj);for(g=e.next();!g.done;g=e.next())g=g.value,l=function(z,y){y=h.get({y:y});if(!y)return null;y=y.Ni.remove(z);if(!y)return null;y.Uc.splice(y.Uc.indexOf(y),1,z);return y.Uc},m=g.W,k=Vc(m),g.Xc=l(m,g.l)||l(k,g.l),g.dd=l(m,g.u)||l(k,g.u);g=function(z){var y=[],x=new db(function(I,J){I=I[0];
J=J[0];if(I.l<J.l)return-1;if(I.l>J.l)return 1;if(I.u<J.u)return-1;if(I.u>J.u)return 1;if(I.Xc)if(J.Xc){if(I.Xc.index<J.Xc.index)return-1;if(I.Xc.index>J.Xc.index)return 1}else return 1;else if(J.Xc)return-1;if(I.dd)if(J.dd){if(I.dd.index<J.dd.index)return-1;if(I.dd.index>J.dd.index)return 1}else return 1;else if(J.dd)return-1;if(I.length<J.length)return-1;if(I.length>J.length)return 1;for(var O=0;O<I.length;O++){var pa=I[O],ra=J[O];if(pa.l<ra.l)return-1;if(pa.l>ra.l)return 1;if(pa.u<ra.u)return-1;
if(pa.u>ra.u)return 1;pa=yj(pa.Y,ra.Y);if(0!=pa)return pa}return 0});z=q(z);for(var C=z.next();!C.done;C=z.next()){C=C.value;var A=[C],D=x.Ha(A);D!=A&&D.push(C)}z={};x=q(x.elements);for(C=x.next();!C.done;z={Le:z.Le},C=x.next())for(z.Le=C.value,C={};z.Le.length;)C.Bg=function(I,J){return function(O,pa,ra){for(var ca=0;ca<I.Le.length;ca++){var da=I.Le[ca];if(da.W.j==ra.B&&da.W.g==ra.A)return I.Le.splice(ca,1),O.push(da),da.W.qd=O,da.W.ca.qd=O,J.Bg(O,pa,da.W);if(da.W.B==pa.j&&da.W.A==pa.g)return I.Le.splice(ca,
1),O.unshift(da),da.W.qd=O,da.W.ca.qd=O,J.Bg(O,da.W,ra)}return O}}(z,C),A=z.Le.shift(),D=[A],A.W.qd=D,A.W.ca.qd=D,y.push(C.Bg(D,A.W,A.W)),C={Bg:C.Bg};return y}(a.hj);e=function(){for(var z=[],y=q(h.elements),x=y.next();!x.done;x=y.next()){x=q(x.value.elements);for(var C=x.next();!C.done;C=x.next()){C=q(C.value);for(var A=C.next();!A.done;A=C.next()){A=A.value;for(var D=function(ca,da){return ca.qd||da.qd?!1:ca.ca?da.ca?ca.ca.Uc==da.ca.Uc:!1:da.ca?!1:!0},I=0,J=A[A.length-1],O=A[0];I<A.length&&(O=A[I],
D(J,O));I++,J=O);if(I==A.length){D=[];J=q(A);for(A=J.next();!A.done;A=J.next())A=A.value,A.qd=D,A.ca&&(A.ca.qd=D),D.push(A);z.push(D)}else{A.unshift.apply(A,ba(A.splice(I)));I=[];var pa=null;J=A[0];I.push(pa=[]);pa.push(J);for(var ra=1;ra<A.length;ra++,J=O)O=A[ra],D(J,O)||I.push(pa=[]),pa.push(O);D=q(I);for(A=D.next();!A.done;A=D.next())if(J=A.value,!J[0].qd){O=q(J);for(A=O.next();!A.done;A=O.next())A=A.value,A.qd=J,A.ca&&(A.ca.qd=J);z.push(J)}}}}}return z}();a.yk=[];l=q(g);for(g=l.next();!g.done;g=
l.next())c(g.value,a.yk);a.xk=[];e=q(e);for(g=e.next();!g.done;g=e.next())d(g.value);e=q(h.elements);for(l=e.next();!l.done;l=e.next())for(g=q(l.value.elements),k=g.next();!k.done;k=g.next())for(l=q(k.value),k=l.next();!k.done;k=l.next())m=k.value,m.Ak=rj(m),a.xk.push(m)}
function ej(a){function b(r,p,u){var z=[],y=new Dg(p,r.y);y.flags|=zj;y.aa=r.ea.aa;h.push(y);if((y=Sf[u.aa-Tf])&&!(y.na<=Nh||y.na>Oh+1)){for(y=0;y<p.length;y++){var x=new hd(p[y].g,r.y,p[y].j);kd(x,r.Y.color);ld(x,x.z/4E5,x.x/4E5);x.Ec=32767;z.push(x)}u.Pd.push(z);bg.push(z);e(Sf[r.ea.aa-Tf],z,r.Y)}}function c(r,p,u){var z=[],y=new Eg(p,r.y);y.flags|=zj;y.aa=r.ea.aa;h.push(y);if((y=Sf[u.aa-Tf])&&!(y.na<=Nh||y.na>Oh+1)){for(y=p.length-1;0<=y;y--){var x=new hd(p[y].A,r.y,p[y].B);kd(x,r.Y.color);ld(x,
-x.z/4E5,x.x/4E5);x.Ec=-32767;z.push(x)}u.Pd.push(z);bg.push(z);e(Sf[r.ea.aa-Tf],z,r.Y)}}function d(r,p,u){var z=ki(Infinity,r.ea.aa,p.Y.ba,p.Y.X),y=Sf[z.aa-Tf];if(y&&!(y.na<=Nh||y.na>Oh+1)){y=[];var x=r.W.j/4E5+r.W.g/4E5,C=r.W.B/4E5+r.W.A/4E5;var A=new hd(r.W.A,p.l,r.W.B);kd(A,p.Y.color);ld(A,C,-A.y/4E5);A.Mb=u.x;A.jc=u.y;y.push(A);A=new hd(r.W.g,p.l,r.W.j);kd(A,p.Y.color);ld(A,x,-A.y/4E5);A.Mb=u.x;A.jc=u.y;y.push(A);A=new hd(r.W.g,p.u,r.W.j);kd(A,p.Y.color);ld(A,x,-A.y/4E5);A.Mb=u.x;A.jc=u.y;y.push(A);
A=new hd(r.W.A,p.u,r.W.B);kd(A,p.Y.color);ld(A,C,-A.y/4E5);A.Mb=u.x;A.jc=u.y;y.push(A);z.Pd.push(y);bg.push(y);e(Sf[r.ea.aa-Tf],y,p.Y)}}function e(r,p,u){var z=0,y=p[0],x=od(p[1],y,new G);x.scale(1E-5);for(var C=2;C<p.length;C++){var A=od(p[C],y,new G);A.scale(1E-5);z+=pc(x,A,new G).length();x=A}p=.5*z;z=u.ba;u=u.color;y=(z.Kd.r-z.Kd.Ya)/255;u=new M(u.r*y+z.Kd.Ya,u.Ya*y+z.Kd.Ya,u.ka*y+z.Kd.Ya,z.Kd.Ia);r.Jb.x+=u.r*p;r.Jb.y+=u.Ya*p;r.Jb.z+=u.ka*p;r.cd+=p}a.qa=[];for(var h=a.qa,g=q(a.xk),k=g.next();!k.done;k=
g.next())if(k=k.value,0<k.sd){for(var l=ki(k.y,k.ea.aa,k.Y.ba,k.Y.X),m=q(k.Ak),n=m.next();!n.done;n=m.next())b(k,n.value,l);(k=Sf[k.ea.aa-Tf])&&(k.na>Oh+1||k.cells.push(a))}else if(k.Y)for(l=ki(Infinity,k.ea.aa,k.Y.ba,k.Y.X),m=q(k.Ak),n=m.next();!n.done;n=m.next())c(k,n.value,l);a=q(a.yk);for(k=a.next();!k.done;k=a.next())for(g=k.value,k=new Cg(g.W,g.l,g.u),k.flags|=zj,k.aa=g[0].ea.aa,h.push(k),k=new L(g.W.g-g.W.A,g.W.B-g.W.j),k.ra(32767),n=q(g),l=n.next();!l.done;l=n.next())d(g,l.value,k)}
function xj(a,b){this.index=Aj++;this.ga=a;this.rf=b;a=new db(Bj);for(var c=new L(0,0),d=1/this.ga.length,e=q(this.ga),h=e.next();!h.done;h=e.next())h=h.value,h.tg=this,c.x+=h.B*d,c.y+=h.A*d;b=q(b.bd.elements);for(d=b.next();!d.done;d=b.next())d=d.value,0>=Hc(c.x,c.y,d.ga)||a.add(d);this.bd=a.elements;Cj(this);this.tk=[];a=Number.NEGATIVE_INFINITY;c=q(this.Ae);for(b=c.next();!b.done;b=c.next())if(b=b.value,b.ea.add){if(b.l>a){var g=new wj(b.ea);g.l=b.l;g.u=b.u;g.floor=b.floor;g.oa=b.oa;g.ga=this.ga;
this.tk.push(g)}else g.u=b.u,g.oa=b.oa;a=g.u}}var Aj=-2147483648;
function Cj(a){var b=new wj;b.l=-2147483648;b.u=2147483647;b.ea={};a.Ae=[b];b=q(a.bd);for(var c=b.next();!c.done;c=b.next()){c=c.value;var d=new wj(c.ea);d.l=c.ea.l;d.u=c.ea.u;d.floor=c.ea.floor;d.oa=c.ea.oa;c=[d];d=q(a.Ae);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=[];c=q(c);for(var g=c.next();!g.done;g=c.next())g=g.value,g.ea.bh(e.ea)?h.push(g):g.eg(e,h);c=h}d=q(c);for(g=d.next();!g.done;g=d.next()){h=g.value;g=[];var k=q(a.Ae);for(e=k.next();!e.done;e=k.next())e.value.eg(h,g);a.Ae=
g}a.Ae.push.apply(a.Ae,ba(c))}yb(a.Ae,function(l,m){return l.l<m.l?-1:l.l>m.l?1:0})}
xj.prototype.evaluate=function(){for(var a=q(this.tk),b=a.next();!b.done;b=a.next()){b=b.value;if(b.floor){for(var c=[],d=q(this.ga),e=d.next();!e.done;e=d.next())e=e.value,e=e.da(),c.push(e);c.y=b.l;c.Y=b.floor;c.sd=1;c.ea=b.ea;this.rf.gj.push(c)}if(b.oa){c=[];d=q(this.ga);for(e=d.next();!e.done;e=d.next())e=e.value,e=e.da(),c.push(e);c.y=b.u;c.Y=b.oa;c.sd=-1;c.ea=b.ea;this.rf.gj.push(c)}}a=[];b=[];e=q(this.Ae);for(d=e.next();!d.done;d=e.next())c=d.value,(c.ea.add?a:b).push(c);b=q(this.ga);for(e=
b.next();!e.done;e=b.next()){e=e.value;var h=function(p,u){var z=[];p=q(p);for(var y=p.next();!y.done;y=p.next()){var x=y.value,C=q(u);for(y=C.next();!y.done;y=C.next()){var A=y.value,D=[];x.Ha(A.l,A.u,D);var I=q(D);for(y=I.next();!y.done;y=I.next())y.value.ea=A.ea;z.push.apply(z,ba(D))}}return z},g=function(p,u){u=q(u);for(var z=u.next();!z.done;z=u.next()){z=z.value;var y=[];p=q(p);for(var x=p.next();!x.done;x=p.next())x.value.eg(z.l,z.u,y);p=y}return p};c=function(p){for(var u=p[0],z=1;z<p.length;z++)if(yj(u.Y,
p[z].Y))u=p[z];else{var y=u.da(u.l,p[z].u);p.splice(--z,2,y)}};d=function(p,u,z){var y=[];if(!p.Zb)return y;u=q(u);for(var x=u.next();!x.done;x=u.next()){x=x.value;var C=p.Zb;var A=x,D=Bj,I=xb(C,A,D);(C=I==C.length||0!=D.call(null,A,C[I])?null:C[I])&&C.ea.add==z&&y.push(new gh(x.ea.l,x.ea.u,C))}return y};var k=d(e,this.bd,!0),l=[],m=[],n=[];if(e.ca.tg){l=d(e.ca,e.ca.tg.bd,!1);var r=q(e.ca.tg.Ae);for(d=r.next();!d.done;d=r.next())d=d.value,(d.ea.add?m:n).push(d)}k=g(k,m);l=g(l,m);k=h(k,a);l=h(l,a);
h=function(p){yb(p,function(D,I){return D.Wf.ea.index-I.Wf.ea.index});var u=[];p=q(p);for(var z=p.next();!z.done;z=p.next()){z=[z.value];for(var y=q(u),x=y.next();!x.done;x=y.next()){x=x.value;var C=[];z=q(z);for(var A=z.next();!A.done;A=z.next())A=A.value,A.Wf.ea.bh(x.Wf.ea)?C.push(A):A.eg(x.l,x.u,C);z=C}y=q(z);for(A=y.next();!A.done;A=y.next()){C=A.value;A=[];u=q(u);for(x=u.next();!x.done;x=u.next())x.value.eg(C.l,C.u,A);u=A}u.push.apply(u,ba(z))}return u}(l.concat(k));if(h.length){d=[];g=q(h);
for(h=g.next();!h.done;h=g.next())if(k=h.value,k.Wf.sh){l=[];m=q(k.Wf.sh);for(h=m.next();!h.done;h=m.next())h.value.Ha(k.l,k.u,l);m=q(l);for(h=m.next();!h.done;h=m.next())h.value.ea=k.ea;d.push.apply(d,ba(l))}yb(d,function(p,u){return p.l<u.l?-1:p.l>u.l?1:0});g=void 0;k=Number.NEGATIVE_INFINITY;d=q(d);for(h=d.next();!h.done;h=d.next())h=h.value,h.l>k?(g&&c(g),g=[h],g.W=e.da(),g.ea=h.ea,g.l=h.l,g.u=h.u,this.rf.hj.push(g)):(g.push(h),g.u=h.u),k=h.u;g&&c(g)}}};
function sj(a,b,c,d){xc.call(this,a,b,c,d);this.index=sj.index++;this.ca=null}sj.index=-2147483648;sj.prototype=Object.create(xc.prototype);sj.prototype.constructor=sj;sj.prototype.bb=function(a,b,c,d){return new sj(a,b,c,d)};
sj.prototype.replace=function(a){xc.prototype.replace.call(this,a);if(this.tg)for(var b=0;b<a.length;b++)a[b].tg=this.tg;if(this.Zb)for(a=q(a),b=a.next();!b.done;b=a.next())if(b=b.value,b.Zb)for(var c=q(this.Zb),d=c.next();!d.done;d=c.next())d=d.value,0<=b.Zb.indexOf(d)||b.Zb.push(d);else b.Zb=this.Zb.slice()};function gh(a,b,c){this.Y=new Dj;this.l=a;this.u=b;this.Wf=c;this.ea=null}gh.prototype.da=function(a,b){a=new gh(a,b,this.Wf);a.Y=this.Y;a.ea=this.ea;return a};
gh.prototype.eg=function(a,b,c){this.u<=a||this.l>=b?c.push(this):(this.l<a&&c.push(this.da(this.l,a)),this.u>b&&c.push(this.da(b,this.u)))};gh.prototype.Ha=function(a,b,c){this.u<=a||this.l>=b||(this.u<=b&&this.l>=a?c.push(this):(b=b<this.u?b:this.u,a=a>this.l?a:this.l,c.push(this.da(a,b))))};function Dj(){this.ba=t.c.P.get("concr01");this.X=ah;this.color=ad;this.y=this.x=0}
function yj(a,b){if(a.ba.name<b.ba.name)return-1;if(a.ba.name>b.ba.name)return 1;var c=xe(a.X,b.X);return 0!=c?c:a.color.r<b.color.r?-1:a.color.r>b.color.r?1:a.color.Ya<b.color.Ya?-1:a.color.Ya>b.color.Ya?1:a.color.ka<b.color.ka?-1:a.color.ka>b.color.ka?1:a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0};function zi(){this.index=Ej++;this.add=!0;this.ga=null;this.l=Number.POSITIVE_INFINITY;this.u=Number.NEGATIVE_INFINITY;this.floor=new Dj;this.oa=new Dj;this.color=ad;this.Ua=-1;this.bd=[]}var Ej=-2147483648;function Ai(a,b){a.floor&&(a.floor.color=Vg);a.oa&&(a.oa.color=Yg);a.ga=[];for(var c=[],d=0;d<b.length;d++)c.push(Vi.nb(b[d].x,b[d].y));b=c;var e=b[b.length-1];for(c=0;c<b.length;c++)d=b[c],e=new sj(e.x,e.y,d.x,d.y),e.ea=a,e.sh=a.xc(),a.ga.push(e),e=d}
zi.prototype.xc=function(){var a=new gh(this.l,this.u);a.Y.color=this.color;return[a]};
zi.prototype.stroke=function(){if(Gc(this.ga)){console.trace();debugger}if(this.u<=this.l){console.trace();debugger}for(var a=[],b=q(this.ga),c=b.next();!c.done;c=b.next()){c=c.value;var d=c.da();d.Zb=[c.sh];a.push(d);Vc(d);delete d.ca.Zb}b=new Kc;c=q(a);for(d=c.next();!d.done;d=c.next())d=d.value,b.Ha(d.B,d.A);d=b.s&-524288;c=b.l&-524288;d+=524288;for(c+=524288;d<b.v;){var e=new sj(d,b.l,d,b.u);Vc(e);a.push(e);d+=524288}for(;c<b.u;)d=new sj(b.s,c,b.v,c),Vc(d),a.push(d),c+=524288;a=Ii(a.slice(),!0);
a=kj(a);for(b={};a.elements.length;){a:if(c=function(g){return function(){for(var k=q(g.fe),l=k.next();!l.done;l=k.next())if(l.value.Zb)return!0;return!1}}(b),b.fe=lj(a),b.fe&&!Gc(b.fe)){if(!c()&&(c=Jc(b.fe),0>=Hc(c.x,c.y,this.ga)))break a;d=new Fj(this);e=q(b.fe);for(c=e.next();!c.done;c=e.next()){c=c.value;var h=c.da();Vc(h);h.ea=this;c.Zb&&(h.sh=c.Zb[0]);d.ga.push(h)}d.stroke(Ye(bf(b.fe.bound.s+2147483648>>>19,b.fe.bound.l+2147483648>>>19)))}b={fe:b.fe}}};
function ii(a){for(var b=q(a.bd),c=b.next();!c.done;c=b.next())c.value.remove();a.bd.length=0}zi.prototype.da=function(){var a=new zi;a.add=this.add;a.l=this.l;a.u=this.u;a.floor=this.floor;a.oa=this.oa;a.color=this.color;a.Ua=this.Ua;return a};zi.prototype.bh=function(){return!0};function Fj(a){this.index=Gj++;this.ea=a;this.ga=[];this.rf=null}var Gj=-2147483648;function Bj(a,b){return a.ea.index<b.ea.index?-1:a.ea.index>b.ea.index?1:0}
Fj.prototype.stroke=function(a){if(Gc(this.ga)){console.trace();debugger}this.ea.bd.push(this);a=this.rf=a;a.bd.add(this);Sa(Xi,a)};Fj.prototype.remove=function(){var a=this.rf;a.bd.remove(this);if(a.bd.elements.length)Sa(Xi,a);else{for(var b=a.hi.first();null!=b.item;){var c=b.next;ib(b);ib(b.Zc);b=c}ib(a.Ok);Ve.remove(a);Ta(Xi,a)}};var fj={},gj,Hj,hj=-1;fj.Af=[];
function ij(){function a(B,H){if(B.Aa.fa<H.Aa.fa)return-1;if(B.Aa.fa>H.Aa.fa)return 1;if(B.Aa.$<H.Aa.$)return-1;if(B.Aa.$>H.Aa.$)return 1;B=Dc(H.Aa,B.Aa.j,B.Aa.g);return 0>B?-1:0<B?1:0}function b(B,H){B=B[0];H=H[0];return B.y<H.y?-1:B.y>H.y?1:0}function c(B){if(!(2>B.length)){var H=2.197265625E7;var K=-1;for(var F,N,P=1;P<B.length;P++)F=B[P-1],N=B[P],F=new xc(F.j,F.g,N.B,N.A),N=(F.length>>3)*(Dc(F,N.j,N.g)>>3),N>=H||-2E3>=N||(H=N,K=P);0>K||(F=B[K-1],N=B[K],H=N.bb(F.j,F.g,N.B,N.A),P=N.length/(F.length+
N.length),H.weight=F.weight*(1-P)+N.weight*P,B.splice(K-1,2,H),c(B))}}function d(B){if(!(2>B.length)){var H=2.197265625E7;var K=-1;for(var F=B[B.length-1],N,P=0;P<B.length;P++,F=N)N=B[P],F=new xc(F.j,F.g,N.B,N.A),F=(F.length>>3)*(Dc(F,N.j,N.g)>>3),F>=H||-2E3>=F||(H=F,K=P);0>K||(B.unshift.apply(B,ba(B.splice(K))),F=B.pop(),N=B.shift(),H=N.bb(F.j,F.g,N.B,N.A),K=N.length/(F.length+N.length),H.weight=F.weight*(1-K)+N.weight*K,B.unshift(H),d(B))}}function e(B){function H(Q,V){var Oa=Nc(Q),ka=Nc(V),Va=
-Cc(Q,V)+Math.PI;if(Va<fc(165)){var ha=new L(Q.B,Q.A);ha.round();ha.ja=Q.weight;ha.Ca=255;F.push(ha);var Wa=new L(Q.B-Oa.y,Q.A+Oa.x);Wa.round();Wa.ja=ha.ja;Wa.Ca=0;N.push(Wa);K(Q);var La=new L(V.j,V.g);La.round();La.ja=V.weight;La.Ca=255;F.push(La);var Ac=new L(V.j-ka.y,V.g+ka.x);Ac.round();Ac.ja=La.ja;Ac.Ca=0;N.push(Ac);Va<=fc(90)||(Q=new L(Q.B+Oa.x,Q.A+Oa.y),Q.round(),Q.ja=ha.ja,Q.Ca=0,P.push([Wa,ha,Q]),V=new L(V.j-ka.x,V.g-ka.y),V.round(),V.ja=La.ja,V.Ca=0,P.push([V,La,Ac]))}else La=new L(V.j,
V.g),La.ja=(Q.weight+V.weight)*(1-Va/Math.Cg),La.Ca=255,F.push(La),Va<=fc(195)?(ka=new L(-Oa.y-ka.y,Oa.x+ka.x),ka.scale(5E9/ka.Lf()),ka.x+=V.j,ka.y+=V.g,ka.round(),ka.ja=La.ja,ka.Ca=0,N.push(ka),K(Q)):(Ac=new L(Q.B-Oa.y,Q.A+Oa.x),Ac.round(),Ac.ja=La.ja,Ac.Ca=0,N.push(Ac),K(Q),V=new L(V.j-ka.y,V.g+ka.x),V.round(),V.ja=La.ja,V.Ca=0,N.push(V),P.push([Ac,La,V]))}function K(Q){if(ja)ja=!1;else{var V=N[N.length-2],Oa=F[F.length-2],ka=F[F.length-1],Va=N[N.length-1];if(Oa.ja!=Q.weight&&ka.ja!=Q.weight)if(1E5<
Q.length){var ha=Q.nb(5E4,0);ha.round();ha.ja=Q.weight;ha.Ca=255;var Wa=Q.nb(Q.length-5E4,0);Wa.round();Wa.ja=Q.weight;Wa.Ca=255;P.push([V,Oa,ha]);P.push([V,ha,Wa,Va]);P.push([Wa,ka,Va])}else if(ha=new L(Q.j+Q.B>>1,Q.g+Q.A>>1),ha.round(),1E5>Q.length){var La=5E4/Q.length-.5;Wa=Q.length/1E5;ha.ja=.5*(Oa.ja+ka.ja)*(1-Wa)+Q.weight*Wa;ha.Ca=255;La=new L(ha.x+(Q.g-Q.A)*La,ha.y+(Q.B-Q.j)*La);La.ja=ha.ja;La.Ca=Q.weight*Wa*255;La.round();P.push([V,Oa,ha,La]);P.push([V,La,Va]);P.push([La,ha,ka,Va])}else ha.ja=
Q.weight,ha.Ca=255,P.push([V,Oa,ha]),P.push([V,ha,Va]),P.push([ha,ka,Va]);else Oa.ja!=Q.weight?5E4<Q.length?(ha=Q.nb(5E4,0),ha.round(),ha.ja=Q.weight,ha.Ca=255,P.push([V,Oa,ha]),P.push([V,ha,ka,Va])):P.push([V,Oa,ka,Va]):ka.ja!=Q.weight?5E4<Q.length?(ha=Q.nb(Q.length-5E4,0),ha.round(),ha.ja=Q.weight,ha.Ca=255,P.push([V,Oa,ha,Va]),P.push([ha,ka,Va])):P.push([Oa,ka,Va,V]):P.push([V,Oa,ka,Va])}}var F=[],N=[],P=[],ja=!1;if(B[0].j==B[B.length-1].B&&B[0].g==B[B.length-1].A){ja=!0;H(B[B.length-1],B[0]);
P=[];for(var oa=1;oa<B.length;oa++)H(B[oa-1],B[oa]);H(B[B.length-1],B[0])}else{var qa=B[0],Ga=Nc(qa);oa=new L(qa.j,qa.g);oa.round();oa.ja=qa.weight;oa.Ca=255;F.push(oa);qa=new L(qa.j-Ga.y,qa.g+Ga.x);qa.round();qa.ja=oa.ja;qa.Ca=0;N.push(qa);for(oa=1;oa<B.length;oa++)H(B[oa-1],B[oa]);B=B[B.length-1];qa=Nc(B);oa=new L(B.B,B.A);oa.round();oa.ja=B.weight;oa.Ca=255;F.push(oa);qa=new L(B.B-qa.y,B.A+qa.x);qa.round();qa.ja=oa.ja;qa.Ca=0;N.push(qa);K(B)}return P}function h(B){var H=new db(qb);B=q(B);for(var K=
B.next();!K.done;K=B.next())K=K.value,of(K.bound.C-5E4,K.bound.s-5E4,K.bound.G+5E4,K.bound.v+5E4,H);return H.elements}function g(B){var H=new db(Bc);B=q(B);for(var K=B.next();!K.done;K=B.next())K=K.value,H.remove(Uc(K))||H.add(K);return H.elements}function k(B){var H=kj(B,!1);B=[];for(var K=[];H.elements.length;){var F=lj(H);F?Gc(F)?K.push(F):(F.mb=[],B.push(F)):console.log("failed circuit")}K=q(K);for(H=K.next();!H.done;H=K.next())nj(H.value,B);K=[];B=q(B);for(H=B.next();!H.done;H=B.next())if(F=
H.value,0==F.mb.length)K.push(F);else{mj(F);var N=q(F.mb);for(H=N.next();!H.done;H=N.next())mj(H.value);K.push(oj(F))}return K}function l(B,H,K){var F=kj(B,!1);B=[];for(var N=new db(nd);F.elements.length;){a:{var P=F;var ja=[];ja.bound=new Kc;var oa=0,qa=P.elements[oa],Ga=qa.elements.pop();qa.elements.length||P.elements.splice(oa,1);if(Ga)for(ja.bound.Ha(Ga.j,Ga.g);;){ja.push(Ga);ja.bound.Ha(Ga.B,Ga.A);if(Ga.B==ja[0].j&&Ga.A==ja[0].g)break a;oa=P.contains(new L(Ga.B,Ga.A));if(0>oa)break a;qa=P.elements[oa];
Ga=eb(qa,Uc(Ga))-1;0>Ga&&(Ga+=qa.elements.length);Ga=qa.elements.splice(Ga,1)[0];qa.elements.length||P.elements.splice(oa,1)}else ja=null}B.push(ja);if(ja[0].j!=ja[ja.length-1].B||ja[0].g!=ja[ja.length-1].A)P=ja[0],P.ki=ja,ja=new db(Wc),ja.x=P.j,ja.y=P.g,ja=N.Ha(ja),ja.add(P)}for(F=0;F<B.length;F++)if(P=B[F],P[0].j!=P[P.length-1].B||P[0].g!=P[P.length-1].A)ja=P[P.length-1],oa=N.contains(new L(ja.B,ja.A)),0>oa||(qa=N.elements[oa],ja=eb(qa,Uc(ja))-1,0>ja&&(ja+=qa.elements.length),ja=qa.elements.splice(ja,
1)[0],qa.elements.length||N.elements.splice(oa,1),oa=B.indexOf(ja.ki),B.splice(oa,1),oa<F&&F--,P.push.apply(P,ba(ja.ki)),P.bound.ik(ja.ki.bound),F--);N=q(B);for(F=N.next();!F.done;F=N.next())delete F.value.ki;N=q(B);for(F=N.next();!F.done;F=N.next())F=F.value,F[0].j==F[F.length-1].B&&F[0].g==F[F.length-1].A?d(F):c(F);N=[];B=q(B);for(F=B.next();!F.done;F=B.next())N=N.concat(e(F.value));B=[];N=q(N);for(F=N.next();!F.done;F=N.next())for(F=F.value,P=q(H),oa=P.next();!oa.done;oa=P.next()){a:for(ja=F,oa=
q(oa.value),qa=oa.next();!qa.done;qa=oa.next()){qa=qa.value;Ga=[];for(var Q=ja[ja.length-1],V=Dc(qa,Q.x,Q.y),Oa=0;Oa<ja.length;Oa++){var ka=ja[Oa],Va=Dc(qa,ka.x,ka.y);if(0<Va){if(0>V){V/=V-Va;var ha=1-V,Wa=new L(Q.x*ha+ka.x*V,Q.y*ha+ka.y*V);Wa.ja=Q.ja*ha+ka.ja*V;Wa.Ca=Q.Ca*ha+ka.Ca*V;Ga.push(Wa)}Ga.push(ka)}else 0>Va?0<V&&(V/=V-Va,ha=1-V,Wa=new L(Q.x*ha+ka.x*V,Q.y*ha+ka.y*V),Wa.ja=Q.ja*ha+ka.ja*V,Wa.Ca=Q.Ca*ha+ka.Ca*V,Ga.push(Wa)):Ga.push(ka);Q=ka;V=Va}if(3>Ga.length){ja=null;break a}ja=Ga}ja&&B.push(ja)}H=
q(B);for(F=H.next();!F.done;F=H.next()){B=F.value;for(N=0;N<B.length;N++)F=B[N],F.index?B[N]=F.index:(F.index=fj.Wd.Kb.length,B[N]=F.index,P=K(F),P.ja=225*F.ja,P.Ca=F.Ca,fj.Wd.Kb.push(P));gj+=3*(B.length-2);fj.Wd.Pd.push(B)}}var m=Ve.elements[hj];if(m){fj.Af[2*hj]=gj;for(var n=new db(a),r=new db(b),p=new db(b),u={},z=q(m.qa),y=z.next();!y.done;u={Rc:u.Rc,td:u.td,zi:u.zi},y=z.next())if(u.td=y.value,u.td instanceof Cg){u.zi=function(B){return function(H){var K=H.Aa,F=Math.atan2(K.$,K.fa)-Math.atan2(B.Rc.$,
B.Rc.fa);if(Math.abs(F>Math.PI?F-Math.Cg:F<-Math.PI?F+Math.Cg:F)>fc(5))return!1;F=K.weight/(K.weight+1);var N=1-F;F=K.bb(Math.round(K.j*F+B.Rc.j*N),Math.round(K.g*F+B.Rc.g*N),Math.round(K.B*F+B.Rc.B*N),Math.round(K.A*F+B.Rc.A*N));if(500<=Math.abs(Dc(F,B.Rc.j,B.Rc.g))||500<=Math.abs(Dc(F,B.Rc.B,B.Rc.A))||500<=Math.abs(Dc(F,K.j,K.g))||500<=Math.abs(Dc(F,K.B,K.A)))return!1;H.Aa=F;F.weight=K.weight+1;H.push(B.td);return!0}}(u);var x=function(B){return function(){for(var H=q(n.elements),K=H.next();!K.done;K=
H.next())if(B.zi(K.value))return!0;return!1}}(u);u.Rc=Uc(u.td.W);if(!x()){var C=[u.td];C.Aa=u.Rc;C.Aa.weight=1;var A=n.Ha(C);A!=C&&A.push(u.td)}}else{var D=[u.td],I=void 0;u.td instanceof Dg?I=r.Ha(D):u.td instanceof Eg&&(I=p.Ha(D));I!=D&&I.push(u.td)}n=n.elements;r=r.elements;p=p.elements;for(var J={},O=q(n),pa=O.next();!pa.done;J={ic:J.ic,Ke:J.Ke},pa=O.next()){var ra=pa.value;J.Ke=Tc(ra.Aa,-1E3);ra.Aa=ra.Aa.bb(ra.Aa.j+J.Ke.x,ra.Aa.g+J.Ke.y,ra.Aa.B+J.Ke.x,ra.Aa.A+J.Ke.y);J.ic=ra.Aa;var ca=[[],[],
[],[]],da=[],Fb=q(ra);for(y=Fb.next();!y.done;y=Fb.next()){var hb=y.value,Yb=function(B,H,K){B.j<H.s||B.j>H.v||B.A>H.u||B.g<H.l?K.push(B):(B.A<H.l&&K.push(B.bb(B.j,H.l,B.B,B.A)),B.g>H.u&&K.push(B.bb(B.j,B.g,B.B,H.u)))},sc=function(B,H,K){B.g<H.l||B.g>H.u||B.B>H.v||B.j<H.s?K.push(B):(B.B<H.s&&K.push(B.bb(H.s,B.g,B.B,B.A)),B.j>H.v&&K.push(B.bb(B.j,B.g,H.v,B.A)))},Nb=function(B,H,K){B.j<H.s||B.j>H.v||B.g>H.u||B.A<H.l?K.push(B):(B.g<H.l&&K.push(B.bb(B.j,B.g,B.B,H.l)),B.A>H.u&&K.push(B.bb(B.j,H.u,B.B,
B.A)))},tc=function(B,H,K){B.g<H.l||B.g>H.u||B.j>H.v||B.B<H.s?K.push(B):(B.j<H.s&&K.push(B.bb(B.j,B.g,H.s,B.A)),B.B>H.v&&K.push(B.bb(H.v,B.g,B.B,B.A)))},Da=new Kc;Da.s=Math.round(J.ic.getParameter(hb.W.B,hb.W.A));Da.v=Math.round(J.ic.getParameter(hb.W.j,hb.W.g));Da.l=hb.l;Da.u=hb.u;for(var Ib=[[],[],[],[]],xf=q(ca[0]),va=xf.next();!va.done;va=xf.next())tc(va.value,Da,Ib[0]);var yf=q(ca[1]);for(va=yf.next();!va.done;va=yf.next())Nb(va.value,Da,Ib[1]);var ze=q(ca[2]);for(va=ze.next();!va.done;va=ze.next())sc(va.value,
Da,Ib[2]);var zf=q(ca[3]);for(va=zf.next();!va.done;va=zf.next())Yb(va.value,Da,Ib[3]);ca=Ib;for(var lc=[[new xc(Da.s,Da.l,Da.v,Da.l)],[new xc(Da.v,Da.l,Da.v,Da.u)],[new xc(Da.v,Da.u,Da.s,Da.u)],[new xc(Da.s,Da.u,Da.s,Da.l)]],Af=q(da),kb=Af.next();!kb.done;kb=Af.next()){var Sd=kb.value;Ib=[[],[],[],[]];var Bf=q(lc[0]);for(va=Bf.next();!va.done;va=Bf.next())tc(va.value,Sd,Ib[0]);var Ae=q(lc[1]);for(va=Ae.next();!va.done;va=Ae.next())Nb(va.value,Sd,Ib[1]);var Td=q(lc[2]);for(va=Td.next();!va.done;va=
Td.next())sc(va.value,Sd,Ib[2]);var Ud=q(lc[3]);for(va=Ud.next();!va.done;va=Ud.next())Yb(va.value,Sd,Ib[3]);lc=Ib}ca[0].push.apply(ca[0],ba(lc[0]));ca[1].push.apply(ca[1],ba(lc[1]));ca[2].push.apply(ca[2],ba(lc[2]));ca[3].push.apply(ca[3],ba(lc[3]));da.push(Da)}ca=ca[0].concat(ca[1].concat(ca[2].concat(ca[3])));ra.length=0;for(var Cf=k(ca),Be=[],lb=q(Cf),Pb=lb.next();!Pb.done;Pb=lb.next()){for(var Df=Pb.value,vd=Df.slice(),cd=new Kc,Ef=q(Df),Jb=Ef.next();!Jb.done;Jb=Ef.next()){var Ff=Jb.value;cd.Ha(Ff.B,
Ff.A)}var Ce=J.ic.nb(cd.s,0),Gf=J.ic.nb(cd.v,0);vd.bound=new Hd;vd.bound.Ha(Ce.y,cd.l,Ce.x);vd.bound.Ha(Gf.y,cd.u,Gf.x);Be.push.apply(Be,ba(rj(vd)));ra.push(vd)}var Hf=h(ra);ca=[];for(var Na=q(Hf),Ab=Na.next();!Ab.done;Ab=Na.next())for(var Oc=q(Ab.value.qa),Qb=Oc.next();!Qb.done;Qb=Oc.next()){var cb=Qb.value;if(cb instanceof Eg){var yc=Mc(J.ic,cb.ga);if(yc){yc[0]=Math.round(yc[0]);yc[1]=Math.round(yc[1]);var Vd=new xc(yc[1],cb.y,yc[0],cb.y);Vd.weight=1;ca.push(Vd)}}else if(cb instanceof Dg){var mc=
Mc(J.ic,cb.ga);if(mc){mc[0]=Math.round(mc[0]);mc[1]=Math.round(mc[1]);var If=new xc(mc[0],cb.y,mc[1],cb.y);If.weight=1;ca.push(If)}}else{var wd=J.ic,$b=cb.W,sa=Dc(wd,$b.j,$b.g),Pc=Dc(wd,$b.B,$b.A),zc=wd.getParameter($b.j,$b.g),De=wd.getParameter($b.B,$b.A);if(sa<Pc){if(!(-256>Pc||256<sa)){var Qc=sa/(sa-Pc),Ee=Math.round(zc*(1-Qc)+De*Qc),Wd=Math.atan2(-sa,zc-Ee);if(!(Wd<fc(15))){var Xd=new xc(Ee,cb.l,Ee,cb.u);Xd.weight=(180*Wd/Math.PI-15)/75;1<Xd.weight&&(Xd.weight=1);ca.push(Xd)}}}else if(sa>Pc&&
!(-256>sa)&&!(256<Pc)){var Jf=sa/(sa-Pc),Fe=Math.round(zc*(1-Jf)+De*Jf),Kf=Math.atan2(-Pc,Fe-De);if(!(Kf<fc(15))){var Yd=new xc(Fe,cb.u,Fe,cb.l);Yd.weight=(180*Kf/Math.PI-15)/75;1<Yd.weight&&(Yd.weight=1);ca.push(Yd)}}}}l(ca,Be,function(B){return function(H){var K=Math.round(H.x);H=Math.round(H.y);K/=B.ic.length;return new hd(Math.round(B.ic.g+(B.ic.A-B.ic.g)*K)-B.Ke.y,H,Math.round(B.ic.j+(B.ic.B-B.ic.j)*K)-B.Ke.x)}}(J))}var Kb={},xd=q(r);for(pa=xd.next();!pa.done;Kb={Yf:Kb.Yf},pa=xd.next()){var yd=
pa.value;Kb.Yf=yd[0].y;var Z=[],Ka=q(yd);for(y=Ka.next();!y.done;y=Ka.next())Z.push.apply(Z,ba(y.value.ga));yd.length=0;var Aa=k(g(Z)),dd=[],zd=q(Aa);for(Pb=zd.next();!Pb.done;Pb=zd.next()){var Ad=Pb.value,nc=Ad.slice(),Rc=new Kc,Ge=q(Ad);for(Jb=Ge.next();!Jb.done;Jb=Ge.next()){var He=Jb.value;Rc.Ha(He.B,He.A)}nc.bound=new Hd;nc.bound.C=Rc.s;nc.bound.G=Rc.v;nc.bound.s=Rc.l;nc.bound.v=Rc.u;nc.bound.l=nc.bound.u=Kb.Yf;dd.push.apply(dd,ba(rj(nc)));yd.push(nc)}var Lf=h(yd);Z=[];var Mf=q(Lf);for(Ab=Mf.next();!Ab.done;Ab=
Mf.next()){var Zd=q(Ab.value.qa);for(Qb=Zd.next();!Qb.done;Qb=Zd.next()){var $d=Qb.value;if($d instanceof Cg&&!($d.l>Kb.Yf||$d.u<=Kb.Yf)){var Rb=$d.W.da();Rb.weight=1;Z.push(Rb)}}}l(Z,dd,function(B){return function(H){return new hd(Math.round(H.y),B.Yf,Math.round(H.x))}}(Kb))}var Sc={},Nf=q(p);for(pa=Nf.next();!pa.done;Sc={Zf:Sc.Zf},pa=Nf.next()){var ac=pa.value;Sc.Zf=ac[0].y;var ae=[],Of=q(ac);for(y=Of.next();!y.done;y=Of.next())for(var Ie=q(y.value.ga),be=Ie.next();!be.done;be=Ie.next()){var ed=
be.value;ae.push(ed.bb(-ed.B,ed.A,-ed.j,ed.g))}ac.length=0;var Bg=k(g(ae)),ce=[],de=q(Bg);for(Pb=de.next();!Pb.done;Pb=de.next()){var Je=Pb.value,oc=Je.slice(),fd=new Kc,Pf=q(Je);for(Jb=Pf.next();!Jb.done;Jb=Pf.next()){var mb=Jb.value;fd.Ha(mb.B,mb.A)}oc.bound=new Hd;oc.bound.C=-fd.v;oc.bound.G=-fd.s;oc.bound.s=fd.l;oc.bound.v=fd.u;oc.bound.l=oc.bound.u=Sc.Zf;ce.push.apply(ce,ba(rj(oc)));ac.push(oc)}var $a=h(ac);ae=[];var tj=q($a);for(Ab=tj.next();!Ab.done;Ab=tj.next()){var uj=q(Ab.value.qa);for(Qb=
uj.next();!Qb.done;Qb=uj.next()){var Bd=Qb.value;if(Bd instanceof Cg&&!(Bd.l>=Sc.Zf||Bd.u<Sc.Zf)){var vj=Bd.W.bb(-Bd.W.B,Bd.W.A,-Bd.W.j,Bd.W.g);vj.weight=1;ae.push(vj)}}}l(ae,ce,function(B){return function(H){return new hd(Math.round(H.y),B.Zf,-Math.round(H.x))}}(Sc))}fj.Af[2*hj+1]=gj-fj.Af[2*hj];hj++;return!0}Hj=fj.Wd;delete fj.Wd;for(var Me=0;Me<Ve.elements.length;Me++)Ve.elements[Me].Qj=fj.Af[2*Me],Ve.elements[Me].Pj=fj.Af[2*Me+1];delete fj.Af;hj=-1;Hj.compile();return!1};t.Wa=function(a){t.za.call(this,a);this.f=new G(0,0,0);this.Yc=null;this.uk=NaN;this.Lb=0;this.ia={xa:-2147483648,sb:new G(1,1,1)};this.Nj=new fb;this.Lg=new Kc};t.Wa.prototype=Object.create(t.za.prototype);t.Wa.prototype.constructor=t.Wa;t.Wa.index=-2147483648;t.Wa.prototype.create=function(){this.index=t.Wa.index++;t.fj.push(this);t.za.prototype.create.call(this)};t.Wa.prototype.remove=function(){for(var a=this.Nj.first();null!=a.item;){var b=a.next;ib(a);ib(a.Zc);a=b}t.fj.remove(this);t.za.prototype.remove.call(this)};
t.Wa.prototype.step=function(){this.Lg.Oe(this.f.z,this.f.x)||jj(this);var a=null,b=hf(this.f,new G(0,-1E8,0),Zf);b&&(a=Ue(b.item.aa));a?(a!=this.Yc&&(this.uk=t.h),this.Yc=a,Vf(this.f,a,this.ia.sb)):this.wk();t.za.prototype.step.call(this)};t.Wa.prototype.wk=function(){this.remove()};
function jj(a){for(var b=a.f.z-a.Lb,c=a.f.z+a.Lb,d=a.f.x-a.Lb,e=a.f.x+a.Lb,h=a.Nj.first(),g=[Re];g.length;){var k=g.shift();if(k instanceof df)b<=k.value&&g.push(k.sf),c>=k.value&&g.push(k.tf);else if(k instanceof ef)d<=k.value&&g.push(k.sf),e>=k.value&&g.push(k.tf);else{for(;null!=h.item&&!(h.item.index>=k.index);){var l=h.next;ib(h);ib(h.Zc);h=l}if(h.item==k)h=h.next;else{l=new gb(k);var m=new gb(a);l.Zc=m;m.Zc=l;nb(l,h);jb(k.hi,m)}}}for(;null!=h.item;)g=h.next,ib(h),ib(h.Zc),h=g;a.Lg.s=(b>>19<<
19)+a.Lb;a.Lg.v=((c>>19)+1<<19)-a.Lb;a.Lg.l=(d>>19<<19)+a.Lb;a.Lg.u=((e>>19)+1<<19)-a.Lb}t.fj=new db(qb);t.kf=function(a){t.Node.call(this,a);this.ab=1E5};t.kf.prototype=Object.create(t.Node.prototype);t.kf.prototype.constructor=t.kf;t.kf.color=new M(0,0,0,64);
t.kf.prototype.Xa=function(){var a=new R;a.I=0;a.L=0;a.M=this.ab;a.J=this.ab;a.m11=0;a.m12=0;a.K=0;a.m21=1;a.m22=0;a.H=this.Ga.H;a.m31=this.Ga.m31+500;a.m32=this.Ga.m32;var b=hf(new G(this.Ga.H,this.Ga.m31,this.Ga.m32),new G(0,-1E8,0));b&&(a.m31-=b.d);t.D.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,0,4);t.Node.prototype.Xa.call(this)};var Ij,Jj=980700/3600*2,Kj=new G(0,-Jj,0),Lj=new db(qb),Mj=new t.Node("physProcessor");
Mj.step=function(){Ij=new bc;for(var a=q(Lj.elements),b=a.next();!b.done;b=a.next()){b=b.value;b.ve=0;b.t=0;b.dl=b.Og(b.f,b.Ba,b.lb);var c=b.Mk();b.input();b.ec&&!b.Yg()&&0<b.mg&&(b.w.x+=Kj.x,b.w.y+=Kj.y,b.w.z+=Kj.z);b.w.scale(b.Kl);var d=od(b.w,b.gb,new G(0,0,0));if(0<b.lh){for(var e=b,h=b.dl,g=new G(0,0,0),k=0;k<h.length;k++){var l=h[k],m=-jc(d,l);if(!(0>=m)){m*=e.lh;var n=jc(e.w,l);l=new G(e.w.x-l.x*n,e.w.y-l.y*n,e.w.z-l.z*n);m/=l.length();1<m&&(m=1);g.x-=l.x*m;g.y-=l.y*m;g.z-=l.z*m}}e.w.add(g)}b.$a.set(.5*
b.gb.x+.5*b.w.x,.5*b.gb.y+.5*b.w.y,.5*b.gb.z+.5*b.w.z);b.$a.y+=c;b.$a.round();b.bound=Nj(b.f,b.Ba,b.lb,b.$a)}a=q(Lj.elements);for(b=a.next();!b.done;b=a.next())b.value.handleEvent();for(a=0;!Ij.Yh();){b=Ij.pop();if(10<++a)break;b.target?(c=b.source,e=b.target,c.ve==b.Zj&&e.ve==b.ol&&(c.ve++,e.ve++,Oj(c,b),Oj(e,b),c.handleEvent(),e.handleEvent(),c.cj(e),e.cj(c))):(c=b.source,c.ve==b.Zj&&(c.ve++,Oj(c,b),c.handleEvent()))}a=q(Lj.elements);for(b=a.next();!b.done;b=a.next())b=b.value,b.f.x+=b.$a.x,b.f.y+=
b.$a.y,b.f.z+=b.$a.z,b.gb.set(b.w.x,b.w.y,b.w.z),b.transform.H=b.f.x,b.transform.m31=b.f.y,b.transform.m32=b.f.z};function Pj(a){t.Wa.call(this,a);this.w=new G(0,0,0);this.gb=new G(0,0,0);this.lb=this.Ba=0;this.mg=1;this.lh=0;this.Kl=1;this.kh=0;this.uf=new db(qb);this.t=this.ve=0;this.$a=new G(0,0,0);this.ec=!0}Pj.prototype=Object.create(t.Wa.prototype);f=Pj.prototype;f.constructor=Pj;f.create=function(){t.Wa.prototype.create.call(this);Lj.add(this)};
f.remove=function(){t.Wa.prototype.remove.call(this);Lj.remove(this)};f.Mk=function(){return 0};function Oj(a,b){var c=(b.t-a.t)/(1-a.t);c=new G(a.$a.x*c,a.$a.y*c,a.$a.z*c);c.round();a.f.add(c);a.$a.sub(c);a.t=b.t}
f.handleEvent=function(){for(var a=new G(this.w.x,this.w.y,this.w.z),b=this.Og(this.f,this.Ba,this.lb),c=Qj(this),d=0;d<b.length;d++){var e=b[d],h=!1,g=-jc(this.w,e);0<g&&(2E3<g*this.kh&&(h=!0,g*=1+this.kh),this.w.x+=e.x*g,this.w.y+=e.y*g,this.w.z+=e.z*g);g=-jc(this.$a,e);0<g&&(h&&(g*=1+this.kh),this.$a.x+=e.x*g,this.$a.y+=e.y*g,this.$a.z+=e.z*g)}for(d=0;d<c.length;d++){h=function(m,n){var r=jc(m,e),p=jc(n,e);var u=k.mg;var z=l.mg;r>=p?u=[r,p]:(u=(u*r+z*p)/(u+z),u=[u+(u-r)*k.kh,u+(u-p)*l.kh]);r=u[0]-
r;p=u[1]-p;m.x+=e.x*r;m.y+=e.y*r;m.z+=e.z*r;n.x+=e.x*p;n.y+=e.y*p;n.z+=e.z*p};e=c[d];var k=this,l=e.source;l.index<k.index||(h(k.$a,l.$a),h(k.w,l.w))}qc(this.$a,b);qc(this.w,b);0<b.length+c.length&&(od(this.w,a,a),a.ra(1),this.Bk());this.bound=Nj(this.f,this.Ba,this.lb,this.$a);if(this.$a.Wi())return null;t.Rf();b=q(b);for(a=b.next();!a.done;a=b.next())a.value.source.xa=t.xa;c=q(c);for(a=c.next();!a.done;a=c.next())a.value.source.xa=t.xa;0>=this.Ba||!(c=this.Hh(this.f,this.Ba,this.lb,this.$a,!0))||
(c.source=this,c.Zj=this.ve,c.target&&(c.ol=c.target.ve),Ij.add(c,c.t))};
f.Hh=function(a,b,c,d,e){for(var h=this,g=new ff(a,d,b),k=null,l=1,m=g.next();m&&!(m.t>l);){for(var n=function(u){u.xa!=t.xa&&(u=u.qf(a,b,c,d))&&(u.d=u.t*d.length(),-1>u.d||(u.t=h.t+u.t*(1-h.t),u.t>=l||(k=u,l=u.t)))},r=q(m.node.qa),p=r.next();!p.done;p=r.next())n(p.value);m=q(m.node.hd);for(p=m.next();!p.done;p=m.next())n(p.value);m=g.next()}if(!e)return k;for(e=0;e<Lj.elements.length;e++)if(g=Lj.elements[e],this!=g&&g.xa!=t.xa&&!this.uf.get(g)&&!g.uf.get(this)&&Id(this.bound,g.bound)&&(n=this.t>
g.t?this.t:g.t,p=Rj(this,n),m=Rj(g,n),r=Sj(p.fi,p.r,p.i,p.Eb,m.fi,m.r,m.i,m.Eb)))r.d=r.t*od(p.Eb,m.Eb,new G(0,0,0)).length(),-1>r.d||(r.t=n+r.t*(1-n),r.t>=l||(r.target=g,k=r,l=r.t));return k};function Rj(a,b){b=(b-a.t)/(1-a.t);b=new G(a.$a.x*b,a.$a.y*b,a.$a.z*b);b.round();var c={};c.fi=(new G(a.f.x,a.f.y,a.f.z)).add(b);c.r=a.Ba;c.i=a.lb;c.Eb=(new G(a.$a.x,a.$a.y,a.$a.z)).sub(b);return c}
f.Og=function(a,b,c){var d=nf(a,b),e=[];t.Rf();d=q(d);for(var h=d.next();!h.done;h=d.next()){h=h.value;for(var g=q(h.qa),k=g.next();!k.done;k=g.next())k=k.value,k.xa!=t.xa&&k.ag(a,b,c,e);h=q(h.hd);for(k=h.next();!k.done;k=h.next())g=k.value,g.xa!=t.xa&&g.ag(a,b,c,e)}return e};
function Qj(a){for(var b=[],c=0;c<Lj.elements.length;c++){var d=Lj.elements[c];if(a!=d&&!a.uf.get(d)&&!d.uf.get(a)){var e=a.f;var h=a.Ba,g=a.lb,k=d.f,l=d.Ba,m=d.lb;if(0==g&&0==m){e=new G(e.x-k.x,e.y-k.y,e.z-k.z);var n=e.ra(1);e.d=jc(new G(k.x+e.x*l,k.y+e.y*l,k.z+e.z*l),e)+h;n-=h+l;e=2<n||n<-h?null:e}else{if(e.y-g>k.y+m){n=new G(e.x-k.x,e.y-g-(k.y+m),e.z-k.z);var r=n.ra(1);e=new G(k.x+n.x*l,k.y+n.y*l,k.z+n.z*l)}else e.y+g<k.y-m?(n=new G(e.x-k.x,e.y+g-(k.y-m),e.z-k.z),r=n.ra(1),e=new G(k.x+n.x*l,k.y+
n.y*l,k.z+n.z*l)):(n=new G(e.x-k.x,0,e.z-k.z),r=n.ra(1),e=new G(k.x+n.x*l,(e.y*m+k.y*g)/(g+m),k.z+n.z*l));n.d=jc(e,n)+h;r-=h+l;e=2<r||r<-h?null:n}e&&(e.source=d,b.push(e))}}return b}f.Bk=function(){};f.cj=function(){};f.input=function(){};f.Yg=function(){return!1};function Tj(a){Pj.call(this,a);this.yj=this.Ji=this.be=this.Xi=this.lg=this.oc=0;this.Yi=this.yg=Number.NEGATIVE_INFINITY;this.il=this.dh=!1;this.we=0;this.Oh=18}Tj.prototype=Object.create(Pj.prototype);Tj.prototype.constructor=Tj;
Tj.prototype.Hh=function(a,b,c,d,e){for(var h=this,g=new ff(a,d,b),k=null,l=1,m=g.next();m&&!(m.t>l);){for(var n=function(u){u.xa==t.xa||u.flags&1||!(u=u.qf(a,b,c,d))||(u.d=u.t*d.length(),-1>u.d||(u.t=h.t+u.t*(1-h.t),u.t>=l||(k=u,l=u.t)))},r=q(m.node.qa),p=r.next();!p.done;p=r.next())n(p.value);m=q(m.node.hd);for(p=m.next();!p.done;p=m.next())n(p.value);m=g.next()}if(!e)return k;for(e=0;e<Lj.elements.length;e++)if(g=Lj.elements[e],this!=g&&g.xa!=t.xa&&!this.uf.get(g)&&!g.uf.get(this)&&Id(this.bound,
g.bound)&&(n=this.t>g.t?this.t:g.t,p=Rj(this,n),m=Rj(g,n),r=Sj(p.fi,p.r,p.i,p.Eb,m.fi,m.r,m.i,m.Eb)))r.d=r.t*od(p.Eb,m.Eb,new G(0,0,0)).length(),-1>r.d||(r.t=n+r.t*(1-n),r.t>=l||(r.target=g,k=r,l=r.t));return k};
Pj.prototype.Og=function(a,b,c){var d=nf(a,b),e=[];t.Rf();d=q(d);for(var h=d.next();!h.done;h=d.next()){h=h.value;for(var g=q(h.qa),k=g.next();!k.done;k=g.next())k=k.value,k.xa==t.xa||k.flags&1||k.ag(a,b,c,e);h=q(h.hd);for(k=h.next();!k.done;k=h.next())g=k.value,g.xa==t.xa||g.flags&1||g.ag(a,b,c,e)}return e};Tj.Ah=function(a){return Math.sqrt(2*a*Jj)};f=Tj.prototype;f.Yg=function(){return this.yg<t.h-1?!1:!0};
f.Mk=function(){var a=0,b=this.il?this.Ji:this.be,c=new G(this.f.x,this.f.y-this.lb-.5*this.Ba,this.f.z);0>=this.w.y&&(this.dh=!1);if(this.Yg()){this.dh=!1;var d=0;t.Rf();var e=this.yj;if(e=this.Hh(c,.5*this.Ba,0,new G(0,-e,0)))d=e.d;c.y+=.5*this.Ba;c.y-=d;c=this.Og(c,this.Ba,0);e=Number.NEGATIVE_INFINITY;for(var h=0;h<c.length;h++){var g=c[h];g.y>e&&(e=g.y)}0<e&&(this.yg=t.h,a=b-2*(this.Ba+this.lb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}else if(!this.dh){d=0;t.Rf();e=this.be-2*this.lb-this.Ba;if(e=
this.Hh(c,.5*this.Ba,0,new G(0,-e,0)))d=e.d;c.y+=.5*this.Ba;c.y-=d;c=this.Og(c,this.Ba,0);e=Number.NEGATIVE_INFINITY;for(h=0;h<c.length;h++)g=c[h],g.y>e&&(e=g.y);0<e&&(this.yg=t.h,a=b-2*(this.Ba+this.lb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}return a};f.Ri=function(){return new G(0,0,0)};f.ek=function(){};
f.input=function(){Pj.prototype.input.call(this);this.ek();var a=this.Ri();if(t.a.va==this){var b=this.transform;a.set(b.I*a.x+b.K*a.z,0,b.M*a.x+b.m22*a.z)}b=a.ra(1);0==b&&(this.we=0);if(this.Yg())0<b&&(this.w.x+=a.x*this.lg,this.w.z+=a.z*this.lg,this==t.a.va&&(this.we>=2*this.Oh&&(this.we=0),0==this.we?t.c.ha.get("stepConcrete01").play({gain:.5}):this.we==this.Oh&&t.c.ha.get("stepConcrete02").play({gain:.5})),this.we=this.Za&&.5<this.Za.focus?this.we+.5:this.we+1),this.w.scale(this.oc/(this.oc+this.lg));
else{b=.25*this.lg;var c=new L(this.w.z,this.w.x),d=c.length(),e=jc(this.w,a);0>e&&(e=0);e>this.oc&&(e=this.oc);b=this.oc/(this.oc+b)*(e+b)-e;d>this.oc&&c.scale(Math.max(0,d-b)/d);c.x+=a.z*b;c.y+=a.x*b;this.w.z=c.x;this.w.x=c.y}this.Yi<t.h||this.yg<t.h-15||(this.w.y=this.Xi,this.Yi=this.yg=Number.NEGATIVE_INFINITY,this.dh=!0)};var Uj=2,Vj=4,zj=8;function Wj(a){return a&Uj||a&Vj?!1:!0}function jf(a){return a&Vj?!1:!0}function Zf(a){return a&zj?!0:!1}function Xj(){this.index=Yj++;this.t=NaN;this.n=this.p=null;this.Ra=!0}var Yj=-2147483648;function lf(a,b){return a.t<b.t?-1:a.t>b.t?1:1==a.Ra&&0==b.Ra?-1:0==a.Ra&&1==b.Ra?1:a.index<b.index?-1:a.index>b.index?1:0}
function Nj(a,b,c,d){var e=new Hd,h=a.z-b;h<e.C&&(e.C=h);h=a.z+b;h>e.G&&(e.G=h);h=a.z+d.z-b;h<e.C&&(e.C=h);h=a.z+d.z+b;h>e.G&&(e.G=h);h=a.x-b;h<e.s&&(e.s=h);h=a.x+b;h>e.v&&(e.v=h);h=a.x+d.x-b;h<e.s&&(e.s=h);h=a.x+d.x+b;h>e.v&&(e.v=h);b+=c;c=a.y-b;c<e.l&&(e.l=c);c=a.y+b;c>e.u&&(e.u=c);c=a.y+d.y-b;c<e.l&&(e.l=c);c=a.y+d.y+b;c>e.u&&(e.u=c);return e}
function Zj(a,b,c,d,e){var h=ic(new G(a.x-c.x,0,a.z-c.z),new G(b.x,0,b.z),d);if(!h)return null;d=new Xj;d.t=h.Ka;d.p=new G(a.x+b.x*d.t,a.y+b.y*d.t,a.z+b.z*d.t);d.n=new G(d.p.x-c.x,0,d.p.z-c.z);d.n.ra(1);var g=new Xj;g.t=h.Ac;g.p=new G(a.x+b.x*g.t,a.y+b.y*g.t,a.z+b.z*g.t);g.n=new G(g.p.x-c.x,0,g.p.z-c.z);g.n.ra(1);if(0<b.y){h=(c.y-e-a.y)/b.y;var k=(c.y+e-a.y)/b.y;h>d.t&&(d=new Xj,d.t=h,d.p=new G(a.x+b.x*d.t,c.y-e,a.z+b.z*d.t),d.n=new G(0,-1,0));k<g.t&&(g=new Xj,g.t=k,g.p=new G(a.x+b.x*g.t,c.y+e,a.z+
b.z*g.t),g.n=new G(0,1,0))}else if(0>b.y)h=(c.y+e-a.y)/b.y,k=(c.y-e-a.y)/b.y,h>d.t&&(d=new Xj,d.t=h,d.p=new G(a.x+b.x*d.t,c.y+e,a.z+b.z*d.t),d.n=new G(0,1,0)),k<g.t&&(g=new Xj,g.t=k,g.p=new G(a.x+b.x*g.t,c.y-e,a.z+b.z*g.t),g.n=new G(0,-1,0));else if(a.y>c.y+e||a.y<c.y-e)return null;if(d.t>g.t)return null;d.Ra=!0;g.Ra=!1;return d}
function ak(a,b,c,d,e){var h=new G(c.x,NaN,c.z),g=new G,k=new G,l=new L(c.z-a.z,c.x-a.x);var m=new L(b.z,b.x);var n=m.ra(1);l=md(l,m);h.y=a.y+b.y/n*l;h.y>c.y+e?(h.y=c.y+e,m=jc((new G(c.x,c.y+e,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):h.y<c.y-e?(h.y=c.y-e,m=jc((new G(c.x,c.y-e,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):g.set(a.x+m.y*l,h.y,a.z+m.x*l);od(h,g,k);m=k.ra(1);if(m<d){l=n=null;var r=ic(new G(a.x-c.x,0,a.z-c.z),new G(b.x,0,b.z),d);if(r){var p=new Xj;p.t=r.Ka;p.p=new G(a.x+
b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t);p.p.y<=c.y+e&&p.p.y>=c.y-e&&(p.n=new G(p.p.x-c.x,0,p.p.z-c.z),p.n.ra(1),p.Ra=!0,n=p);p=new Xj;p.t=r.Ac;p.p=new G(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t);p.p.y<=c.y+e&&p.p.y>=c.y-e&&(p.n=new G(p.p.x-c.x,0,p.p.z-c.z),p.n.ra(1),p.Ra=!1,l=p)}if(!n||!l)if(r=hc(a,b,new G(c.x,c.y+e,c.z),d))n||(p=new Xj,p.t=r.Ka,p.p=new G(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y>c.y+e&&(p.n=new G(p.p.x-c.x,p.p.y-(c.y+e),p.p.z-c.z),p.n.ra(1),p.Ra=!0,n=p)),l||(p=new Xj,p.t=r.Ac,p.p=new G(a.x+
b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y>c.y+e&&(p.n=new G(p.p.x-c.x,p.p.y-(c.y+e),p.p.z-c.z),p.n.ra(1),p.Ra=!1,l=p));if(!n||!l)if(r=hc(a,b,new G(c.x,c.y-e,c.z),d))n||(p=new Xj,p.t=r.Ka,p.p=new G(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y<c.y-e&&(p.n=new G(p.p.x-c.x,p.p.y-(c.y-e),p.p.z-c.z),p.n.ra(1),p.Ra=!0,n=p)),l||(p=new Xj,p.t=r.Ac,p.p=new G(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y<c.y-e&&(p.n=new G(p.p.x-c.x,p.p.y-(c.y-e),p.p.z-c.z),p.n.ra(1),p.Ra=!1,l=p));if(n&&l)return{Ef:n,Vc:l}}return{mh:g,
km:h,he:k,Di:m,jm:d}}function bk(a,b,c,d){b=hc(d,c,a,b);if(!b)return null;var e=new Xj;e.t=-b.Ac;e.p=d;e.n=(new G(a.x-(d.x+c.x*b.Ac),a.y-(d.y+c.y*b.Ac),a.z-(d.z+c.z*b.Ac))).round();e.n.ra(1);e.Ra=!0;return e}
function ck(a,b,c,d,e){var h=jc(c,e);c=new G(c.x-e.x*h,c.y-e.y*h,c.z-e.z*h);d=new G(d.x-a.x,d.y-a.y,d.z-a.z);var g=jc(d,e);d.set(d.x-e.x*g,d.y-e.y*g,d.z-e.z*g);b=ic(d,c,b);if(!b)return null;g=new Xj;g.t=-b.Ac;g.p=(new G(a.x+d.x+e.x*h*g.t,a.y+d.y+e.y*h*g.t,a.z+d.z+e.z*h*g.t)).round();g.n=new G(-(d.x+c.x*b.Ac),-(d.y+c.y*b.Ac),-(d.z+c.z*b.Ac));g.n.ra(1);g.Ra=!0;return g}
function Sj(a,b,c,d,e,h,g,k){if(0==c&&0==g)return c=od(a,e,new G(0,0,0)),g=od(d,k,new G(0,0,0)),0==g.length()?h=null:(c=ic(c,g,b+h))?(a=new G(a.x+d.x*c.Ka,a.y+d.y*c.Ka,a.z+d.z*c.Ka),e=new G(e.x+k.x*c.Ka,e.y+k.y*c.Ka,e.z+k.z*c.Ka),k=new Xj,k.t=c.Ka,b=h/(h+b),d=1-b,k.p=(new G(e.x*d+a.x*b,e.y*d+a.y*b,e.z*d+a.z*b)).round(),k.n=new G((k.p.x-e.x)/h,(k.p.y-e.y)/h,(k.p.z-e.z)/h),h=k):h=null,h;var l=new G(a.x-e.x,0,a.z-e.z),m=new G(d.x-k.x,0,d.z-k.z);if(0==m.length())return null;l=ic(l,m,b+h);if(!l)return null;
var n=new G(a.x+d.x*l.Ka,a.y+d.y*l.Ka,a.z+d.z*l.Ka);m=new G(e.x+k.x*l.Ka,e.y+k.y*l.Ka,e.z+k.z*l.Ka);var r=h/(h+b),p=1-r;n=new G(m.x*p+n.x*r,m.y*p+n.y*r,m.z*p+n.z*r);n.round();if(n.y>m.y+g){l=new G(a.x-e.x,a.y-c-(e.y+g),a.z-e.z);m=od(d,k,new G(0,0,0));l=ic(l,m,b+h);if(!l)return null;n=new G(a.x+d.x*l.Ka,a.y-c+d.y*l.Ka,a.z+d.z*l.Ka);m=new G(e.x+k.x*l.Ka,e.y+g+k.y*l.Ka,e.z+k.z*l.Ka);e=new Xj;e.t=l.Ka;r=h/(h+b);p=1-r;e.p=(new G(m.x*p+n.x*r,(m.y+g)*p+(n.y-c)*r,m.z*p+n.z*r)).round();e.n=new G((e.p.x-m.x)/
h,(e.p.y-(m.y+g))/h,(e.p.z-m.z)/h)}else if(n.y<m.y-g){l=new G(a.x-e.x,a.y+c-(e.y-g),a.z-e.z);m=od(d,k,new G(0,0,0));l=ic(l,m,b+h);if(!l)return null;n=new G(a.x+d.x*l.Ka,a.y+c+d.y*l.Ka,a.z+d.z*l.Ka);m=new G(e.x+k.x*l.Ka,e.y-g+k.y*l.Ka,e.z+k.z*l.Ka);e=new Xj;e.t=l.Ka;r=h/(h+b);p=1-r;e.p=(new G(m.x*p+n.x*r,(m.y-g)*p+(n.y+c)*r,m.z*p+n.z*r)).round();e.n=new G((e.p.x-m.x)/h,(e.p.y-(m.y-g))/h,(e.p.z-m.z)/h)}else e=new Xj,e.t=l.Ka,e.p=n,e.n=new G((e.p.x-m.x)/h,0,(e.p.z-m.z)/h);return e}
Dg.prototype.qf=function(a,b,c,d){c=this.y+c;if(0<=d.y)var e=null;else{var h=new Xj;h.t=-(a.y-c-b)/d.y;h.p=(new G(a.x+d.x*h.t,a.y-b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new G(0,1,0);e=h}if(!e)return null;if(0==Ec(e.p.z,e.p.x,this.ga).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ga.length;l++){var m=this.ga[l];e=new G(m.g,c,m.j);var n=new G(m.A-m.g,0,m.B-m.j);n.scale(1/m.length);(e=ck(a,b,d,e,n))?(n=m.getParameter(e.p.z,e.p.x),!(0>n||n>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.ga.length-1)+1:h|3<<l-1}for(l=0;l<this.ga.length;l++)h&1<<l||(m=this.ga[l],(e=bk(a,b,d,new G(m.A,c,m.B)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
Eg.prototype.qf=function(a,b,c,d){c=this.y-c;if(0>=d.y)var e=null;else{var h=new Xj;h.t=-(c-a.y-b)/-d.y;h.p=(new G(a.x+d.x*h.t,a.y+b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new G(0,-1,0);e=h}if(!e)return null;if(0==Ec(e.p.z,e.p.x,this.ga).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ga.length;l++){var m=this.ga[l];e=new G(m.g,c,m.j);var n=new G(m.A-m.g,0,m.B-m.j);n.scale(1/m.length);(e=ck(a,b,d,e,n))?(n=m.getParameter(e.p.z,e.p.x),!(0>n||n>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.ga.length-1)+1:h|3<<l-1}for(l=0;l<this.ga.length;l++)h&1<<l||(m=this.ga[l],(e=bk(a,b,d,new G(m.A,c,m.B)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
Cg.prototype.qf=function(a,b,c,d){var e=this.W,h=this.l-c;c=this.u+c;if(0<=Dc(e,e.j+d.z,e.g+d.x))var g=null;else{var k=new G(e.B-e.j,0,e.g-e.A);k.scale(1/e.length);var l=jc(d,k),m=new Xj;m.t=-(Dc(e,a.z,a.x)-b)/l;m.p=(new G(a.x-k.x*b+d.x*m.t,a.y-k.y*b+d.y*m.t,a.z-k.z*b+d.z*m.t)).round();m.n=k;g=m}if(!g)return null;k=0;var n=e.getParameter(g.p.z,g.p.x);0>n&&(k|=1);g.p.y>c&&(k|=2);n>e.length&&(k|=4);g.p.y<h&&(k|=8);if(0==k)return g.item=this,g;if(0==b)return null;k=0;l=null;m=Number.POSITIVE_INFINITY;
g=new G(e.g,h,e.j);n=new G(0,1,0);g=ck(a,b,d,g,n);g?!(g.p.y<h||g.p.y>c)&&g.t<m&&(m=g.t,l=g):k|=9;g=new G(e.g,c,e.j);n=new G(e.A-e.g,0,e.B-e.j);n.scale(1/e.length);(g=ck(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<m&&(m=g.t,l=g)):k|=3;g=new G(e.A,c,e.B);n=new G(0,-1,0);g=ck(a,b,d,g,n);g?!(g.p.y>c||g.p.y<h)&&g.t<m&&(m=g.t,l=g):k|=6;g=new G(e.A,h,e.B);n=new G(e.g-e.A,0,e.j-e.B);n.scale(1/e.length);(g=ck(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<m&&(m=g.t,
l=g)):k|=18;0==(k&1)&&(g=new G(e.g,c,e.j),(g=bk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&2)&&(g=new G(e.A,c,e.B),(g=bk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&4)&&(g=new G(e.A,h,e.B),(g=bk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&8)&&(g=new G(e.g,h,e.j),(g=bk(a,b,d,g))&&g.t<m&&(l=g));return l?(l.item=this,l):null};
Dg.prototype.ag=function(a,b,c,d){c=this.y+c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ga.length;k++){e=this.ga[k];var l=Dc(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new G(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new G(e.g,c,e.j):h>e.length?e=new G(e.A,c,e.B):(h/=e.length,g=1-h,e=new G(e.g*g+e.A*h,c,e.j*g+e.B*h),e.round()));c=new G(a.x-e.x,a.y-e.y,a.z-e.z);c.ra(1);c.d=jc(e,c)+b;a=jc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Eg.prototype.ag=function(a,b,c,d){c=this.y-c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ga.length;k++){e=this.ga[k];var l=Dc(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new G(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new G(e.g,c,e.j):h>e.length?e=new G(e.A,c,e.B):(h/=e.length,g=1-h,e=new G(e.g*g+e.A*h,c,e.j*g+e.B*h),e.round()));c=new G(a.x-e.x,a.y-e.y,a.z-e.z);c.ra(1);c.d=jc(e,c)+b;a=jc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Cg.prototype.ag=function(a,b,c,d){var e=this.l-c,h=this.u+c;c=null;var g=this.W;var k=g.getParameter(a.z,a.x);if(0>k)k=new G(g.g,a.y,g.j),k.y>h?k.y=h:k.y<e&&(k.y=e);else if(k>g.length)k=new G(g.A,a.y,g.B),k.y>h?k.y=h:k.y<e&&(k.y=e);else{k/=g.length;var l=1-k;k=new G(g.g*l+g.A*k,a.y,g.j*l+g.B*k);k.y>h?k.y=h:k.y<e?k.y=e:(c=new G(g.B-g.j,0,g.g-g.A),c.scale(1/g.length));k.round()}null==c&&(c=new G(a.x-k.x,a.y-k.y,a.z-k.z),c.ra(1));c.d=jc(k,c)+b;a=jc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Dg.prototype.zj=function(a,b){var c=bb(.5*Kj.y,b.y,a.y-this.y);if(!c)return null;var d=new Xj;d.t=c.Ac;if(0>d.t)return null;d.p=(new G(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=q(this.ga);for(b=a.next();!b.done;b=a.next())if(0>Dc(b.value,d.p.z,d.p.x))return null;d.item=this;d.n=new G(0,1,0);return d};
Eg.prototype.zj=function(a,b){if(a.y>=this.y)return null;var c=bb(.5*Kj.y,b.y,a.y-this.y);if(!c)return null;var d=new Xj;d.t=c.Ka;if(0>d.t)return null;d.p=(new G(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=q(this.ga);for(b=a.next();!b.done;b=a.next())if(0>Dc(b.value,d.p.z,d.p.x))return null;d.item=this;d.n=new G(0,-1,0);return d};
Cg.prototype.zj=function(a,b){var c=Dc(this.W,a.z,a.x);if(0>c)return null;var d=Tc(this.W,1),e=d.x*b.z+d.y*b.x;if(0<=e)return null;var h=new Xj;h.t=-c/e;if(0>h.t)return null;h.p=(new G(a.x+b.x*h.t,a.y+.5*(2*b.y+Kj.y*h.t)*h.t,a.z+b.z*h.t)).round();if(h.p.y>=this.u||h.p.y<this.l)return null;a=this.W.getParameter(h.p.z,h.p.x);if(0>a||a>=this.W.length)return null;h.item=this;h.n=new G(d.y,0,d.x);return h};
Dg.prototype.Oi=function(a){for(var b=q(this.ga),c=b.next();!c.done;c=b.next())c=c.value,a.Ha(c.A,this.y,c.B)};Eg.prototype.Oi=function(a){for(var b=q(this.ga),c=b.next();!c.done;c=b.next())c=c.value,a.Ha(c.A,this.y,c.B)};Cg.prototype.Oi=function(a){a.Ha(this.W.g,this.l,this.W.j);a.Ha(this.W.A,this.u,this.W.B)};
function dk(){if(this.qa){for(var a=new Hd,b=q(this.qa),c=b.next();!c.done;c=b.next())c.value.Oi(a);this.Gh=of(a.C,a.s,a.G,a.v);a=q(this.Gh);for(b=a.next();!b.done;b=a.next())b=b.value,b.hd.push.apply(b.hd,ba(this.qa))}}function ek(){if(this.Gh){for(var a=q(this.Gh),b=a.next();!b.done;b=a.next())b=b.value,b.hd.splice(b.hd.indexOf(this.qa[0]),this.qa.length);delete this.Gh}};function fk(){this.height=this.width=2;this.depth=this.color=null}
fk.prototype.create=function(){this.object=v.createFramebuffer();v.bindFramebuffer(v.FRAMEBUFFER,this.object);var a=this.color=new t.ge;a.width=this.width;a.height=this.height;a.Xh=v.RGBA8;a.format=v.RGBA;a.type=v.UNSIGNED_BYTE;a.Te=v.NEAREST;a.kg=v.NEAREST;a.create();v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,a.object,0);a=this.depth=v.createRenderbuffer();v.bindRenderbuffer(v.RENDERBUFFER,a);v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH24_STENCIL8,this.width,this.height);
v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.RENDERBUFFER,a)};function gk(a){Wf.call(this,a);this.Ga=new R;this.pitch=this.heading=0;this.Rg=112;this.yd=fc(40);this.Zl=!1;this.pi=8E3}gk.prototype=Object.create(Wf.prototype);gk.prototype.constructor=gk;gk.prototype.create=function(){var a=this.Lj=new Wf;a.Ga=this.O;S(a,this);a=this.Mj=new Wf;a.Ga=this.O;S(a,this);return this};
gk.prototype.step=function(){this.Rg+=Le.b;0>this.Rg&&(this.Rg=0);this.transform.m32=Math.pow(1.125,this.Rg);Le.d[2]&&(this.heading-=4E6*Le.vc.x,this.pitch+=4E6*Le.vc.y);var a=gc(this.heading),b=gc(this.pitch);ud(this.Ga);this.Ga.rotate(a,b,0);a=this.Ga.gg();var c=this.Ga.hg();b=this.Ga.xe();if(Le.d[1]){var d=2*Math.tan(this.yd)*this.transform.m32/t.canvas.height,e=-Le.vc.x*d;d*=Le.vc.y;this.Ga.H+=e*a.x+d*c.x;this.Ga.m31+=e*a.y+d*c.y;this.Ga.m32+=e*a.z+d*c.z}c=new G(0,0,0);Ne.d.KeyW&&--c.z;Ne.d.KeyS&&
(c.z+=1);Ne.d.KeyA&&--c.x;Ne.d.KeyD&&(c.x+=1);if(e=c.length())c.scale(this.transform.m32/(60*e)),this.Ga.H+=c.x*a.x+c.z*b.x,this.Ga.m31+=c.x*a.y+c.z*b.y,this.Ga.m32+=c.x*a.z+c.z*b.z;a=this.Lj;ud(a.transform);a.transform.H=-this.pi;a.transform.rotate(Math.atan(.5*-this.pi/this.transform.m32),0,0);a.yd=this.yd;a=this.Mj;ud(a.transform);a.transform.H=this.pi;a.transform.rotate(Math.atan(.5*this.pi/this.transform.m32),0,0);a.yd=this.yd;Wf.prototype.step.call(this);return this};t.Animation=function(){t.Node.call(this);this.length=0;this.Hb=NaN;this.Ng={}};t.Animation.prototype=Object.create(Node.prototype);f=t.Animation.prototype;f.constructor=t.Animation;f.step=function(){Node.prototype.step.call(this)};f.play=function(){this.Hb=t.h};f.key=function(a,b,c){var d=this.Ng[a];d||(d=this.Ng[a]=new hk);return d.key(b,c)};f.print=function(){console.log("{");console.log("let a = new NG.Animation();");for(var a in this.Ng)this.Ng.hasOwnProperty(a)&&this.Ng[a].print(a);console.log("}")};
t.Animation.S=function(a,b){b.reset();b.translate(a[0],a[1],a[2]);b.rotate(a[3],a[4],a[5]);return b};function hk(){this.keys=new db(ik)}hk.prototype.key=function(a,b){var c=this.keys.get(a);c||(c=new jk,c.t=a,this.keys.add(c));c.Eb=b;return c};hk.prototype.print=function(a){for(var b=0;b<this.keys.elements.length;b++){var c=this.keys.elements[b];console.log("a.key('"+a+"', "+c.t+", "+c.Eb+");")}};function jk(){this.Eb=this.t=0}
function ik(a,b){return isNaN(a)?a.t<b.t?-1:a.t>b.t?1:0:a<b.t?-1:a>b.t?1:0};function Ci(a,b,c,d,e,h){t.Node.call(this);this.f=new G(a.g,b+112500,a.j);this.fd=-Infinity;this.Dg=NaN;this.open=this.state=0;e.na!=h.na&&(this.ih=Math.max(e.na,h.na));S(this,t.Tf);var g=new dg(t.c.nc.get("bayDoor01"));g.transform.H=this.f.x;g.transform.m31=this.f.y;g.transform.m32=this.f.z;g.transform.I=-a.fa;g.transform.M=a.$;g.transform.K=-a.$;g.transform.m22=-a.fa;S(g,t.Tf);g.create();Md(g,e.ia);var k=q(g.ld);for(b=k.next();!b.done;b=k.next())b=b.value,b.Ch=!0,b.D=t.c.sa.get("physical"),b.ba=
t.c.P.get("BayDoor01"),b.X=dh,b.Pa=["portalLightIndex",e.Xe,!0,"color",ad,!1];this.ei=g;this.qc=c;this.Ce=e;c=new dg(t.c.nc.get("bayDoor01"));c.transform.H=this.f.x;c.transform.m31=this.f.y;c.transform.m32=this.f.z;c.transform.I=a.fa;c.transform.M=-a.$;c.transform.K=a.$;c.transform.m22=a.fa;S(c,t.Tf);c.create();Md(c,h.ia);e=q(c.ld);for(b=e.next();!b.done;b=e.next())b=b.value,b.Ch=!0,b.D=t.c.sa.get("physical"),b.ba=t.c.P.get("BayDoor01"),b.X=dh,b.Pa=["portalLightIndex",h.Xe,!0,"color",ad,!1];this.di=
c;this.Hc=d;this.Be=h;this.qa=[];h=[new L(-6250,-112500),new L(6250,-112500),new L(6250,112500),new L(-6250,112500)];for(d=0;d<h.length;d++)h[d]=a.nb(h[d].x,h[d].y);a=[];d=h[h.length-1];h=q(h);for(c=h.next();!c.done;c=h.next())c=c.value,a.push(new xc(d.x,d.y,c.x,c.y)),d=c;this.qa.push(new Eg(a,this.f.y-112500));this.qa.push(new Cg(Vc(a[0]),this.f.y-112500,this.f.y+112500),new Cg(Vc(a[2]),this.f.y-112500,this.f.y+112500));a=q(this.qa);for(d=a.next();!d.done;d=a.next())d=d.value,d.item=this,d.Wg();
dk.call(this);this.update()}Ci.prototype=Object.create(t.Node.prototype);f=Ci.prototype;f.constructor=Ci;
f.step=function(){if(!(t.h%4)){var a=Infinity,b=0;this.Ce.na<=Nh&&this.Ce.na>=Oh&&b++;this.Be.na<=Nh&&this.Be.na>=Oh&&b++;b||this.remove();for(var c=q(t.a.ad),d=c.next();!d.done;d=c.next())d=d.value,d.ib&&(d=Math.abs(d.f.x-this.f.x)+Math.abs(d.f.y-this.f.y)+Math.abs(d.f.z-this.f.z),d<a&&(a=d));t.a.va&&(c=t.a.va,c=Math.abs(c.f.x-this.f.x)+Math.abs(c.f.y-this.f.y)+Math.abs(c.f.z-this.f.z),c<a&&(a=c));if(0==this.state&&0==this.open)2==b&&5E5>a&&(isNaN(this.ih)?(this.state=1,this.fd=4*Math.floor(t.h/
4),this.Dg=NaN):t.a.tc||(this.state=1,this.fd=4*Math.floor(t.h/4),this.Dg=NaN));else if(1==this.state&&1==this.open)if(isNaN(this.ih))1E6<=a&&(isNaN(this.Dg)&&(this.Dg=t.h),0<=t.h-this.Dg&&(this.state=0,this.fd=t.h));else if(1E6<=a||t.a.ua.Yc.na==this.ih)this.state=0,this.fd=t.h;a=(t.h-this.fd)/36;if(!(1<a)){0==this.state?(this.open=1-Math.pow(a,2),1==a&&t.a.ua.Yc.na==this.ih&&(Oh=this.ih)):1==this.state&&(this.open=Math.pow(a,2));a=q(this.qa);for(b=a.next();!b.done;b=a.next())b.value.fd=t.h;this.update()}}};
f.update=function(){var a=this.qc.l+(this.qc.height-12500)*this.open;this.qc.u=this.Hc.u=this.qa[0].y=this.qa[1].l=this.qa[2].l=a;this.qa[0].ca.y=this.qa[1].ca.l=this.qa[2].ca.l=a;this.ei.transform.m31=this.di.transform.m31=a+112500;this.ei.ld[0].Pa[1]=this.Ce.Xe;this.di.ld[0].Pa[1]=this.Be.Xe;this.ei.ld[0].Pa[4]=this.Ce.style.Mc;this.di.ld[0].Pa[4]=this.Be.style.Mc};f.Xa=function(){t.D.N("clipY",this.f.y+225E3,!1)};
f.remove=function(){this.ei.remove();this.di.remove();ek.call(this);for(var a=q(this.qa),b=a.next();!b.done;b=a.next())b.value.fd=t.h;t.Node.prototype.remove.call(this)};
function Bi(a,b,c,d){t.za.call(this);this.f=new G(a.g,b+62500,a.j);this.transform.H=this.f.x;this.transform.m31=this.f.y;this.transform.m32=this.f.z;this.transform.I=-a.fa;this.transform.M=a.$;this.transform.K=-a.$;this.transform.m22=-a.fa;this.transform.I*=87500;this.transform.L*=87500;this.transform.M*=87500;this.transform.J*=62500;this.transform.m11*=62500;this.transform.m12*=62500;S(this,t.bf);this.Ce=c;this.Be=d;this.qa=[];b=[new L(-625,-87500),new L(625,-87500),new L(625,87500),new L(-625,87500)];
for(c=0;c<b.length;c++)b[c]=a.nb(b[c].x,b[c].y);c=[];d=b[b.length-1];var e=q(b);for(b=e.next();!b.done;b=e.next())b=b.value,c.push(new xc(d.x,d.y,b.x,b.y)),d=b;this.qa.push(new Cg(Vc(c[0]),this.f.y-112500,this.f.y+112500),new Cg(Vc(c[2]),this.f.y-112500,this.f.y+112500));for(b=0;2>b;b++)c=this.qa[b],c.item=this,c.flags|=Uj,c.Wg();this.qa[0].aa=this.Ce.index;this.qa[1].aa=this.Be.index;b=[new L(-9375,-87500),new L(9375,-87500),new L(9375,87500),new L(-9375,87500)];for(c=0;c<b.length;c++)b[c]=a.nb(b[c].x,
b[c].y);a=[];c=b[b.length-1];d=q(b);for(b=d.next();!b.done;b=d.next())b=b.value,a.push(new xc(c.x,c.y,b.x,b.y)),c=b;this.qa.push(new Cg(Vc(a[0]),this.f.y-112500,this.f.y+112500),new Cg(Vc(a[2]),this.f.y-112500,this.f.y+112500));for(a=2;4>a;a++)this.qa[a].flags|=Vj;dk.call(this)}Bi.prototype=Object.create(t.za.prototype);Bi.prototype.constructor=Bi;Bi.S=function(a,b){return a.depth-b.depth};Bi.prototype.update=function(){};
Bi.prototype.rh=function(){return!this.La||this.Ce.ia.xa<t.h&&this.Be.ia.xa<t.h?!1:!0};Bi.Ze=function(){t.Cb(mg);t.eb(t.c.sa.get("physical"));t.Wb(0,t.c.P.get("Window01"));eh.bind();t.xb(1);t.$b(1);t.D.N("color",ad);t.D.N("architectureLighting",1,!0);t.D.N("lightingFancy",t.Da.lightingFancy,!0)};
Bi.prototype.Xa=function(){t.D.N("modelMatrix",this.O);t.D.N("portalLightIndex",this.Ce.Xe,!0);t.D.N("ambientLight",this.Ce.ia.sb,!1);v.drawArrays(v.TRIANGLE_FAN,ng(0,1),4);var a=(new R).set(this.O);a.I=-a.I;a.L=-a.L;a.M=-a.M;a.K=-a.K;a.m21=-a.m21;a.m22=-a.m22;t.D.N("modelMatrix",a);t.D.N("portalLightIndex",this.Be.Xe,!0);t.D.N("ambientLight",this.Be.ia.sb,!1);v.drawArrays(v.TRIANGLE_FAN,ng(0,1),4)};
Bi.prototype.remove=function(){ek.call(this);for(var a=q(this.qa),b=a.next();!b.done;b=a.next())b.value.fd=t.h;t.za.prototype.remove.call(this)};
function kk(a,b,c){t.Wa.call(this,"crate");this.yb=20;this.f.x=a;this.f.y=b+5E4;this.f.z=c;Fd(this.transform,this.f);a=[new G(-5E4,0,-5E4),new G(-5E4,0,5E4),new G(5E4,0,5E4),new G(5E4,0,-5E4)];b=q(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.nb(c,c),c.round();a=[new xc(a[0].z,a[0].x,a[1].z,a[1].x),new xc(a[1].z,a[1].x,a[2].z,a[2].x),new xc(a[2].z,a[2].x,a[3].z,a[3].x),new xc(a[3].z,a[3].x,a[0].z,a[0].x)];this.qa=[];this.qa.push(new Dg(a,this.f.y+5E4),new Eg(a,this.f.y-5E4));a=Yc(a);
this.qa.push(new Cg(a[0],this.f.y-5E4,this.f.y+5E4),new Cg(a[1],this.f.y-5E4,this.f.y+5E4),new Cg(a[2],this.f.y-5E4,this.f.y+5E4),new Cg(a[3],this.f.y-5E4,this.f.y+5E4));a=q(this.qa);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;dk.call(this)}kk.prototype=Object.create(t.Wa.prototype);f=kk.prototype;f.constructor=kk;
f.create=function(){var a=this.Sa=new dg(t.c.nc.get("lootBox"));a.Ga=this.O;S(a,this);a.create();this.Lb=a.src.Lb;Md(a,this.ia);Nd(a,6E4);t.a.Pg.push(this);lk.push(this);t.Wa.prototype.create.call(this)};
f.step=function(){if(t.a.va){var a=od(t.a.va.f,this.f,new G(0,0,0));a.y=0;a.ra(1);this.transform.I=a.z;this.transform.M=-a.x;this.transform.K=a.x;this.transform.m22=a.z;this.transform.rotate(fc(-15),0,0)}10==t.h-this.dg&&this.Gi();t.h==this.ae+4?(this.Sa.D=t.c.sa.get("flash"),this.Sa.X=t.c.Ab.get("flashWhite")):t.h==this.ae+6?this.Sa.X=t.c.Ab.get("flashRed"):t.h==this.ae+8&&(delete this.Sa.X,delete this.Sa.D);t.Wa.prototype.step.call(this)};
f.wf=function(a){isNaN(this.dg)&&(this.ae=t.h,this.yb-=a,0>=this.yb&&(this.dg=t.h))};
f.Gi=function(){if(t.a.va){var a=[];t.a.tc&&X.Vk(Math.min(t.a.tc,Math.max(Math.floor(t.a.tc/5),tb(21)+5)),a);for(var b=q(t.a.va.Za.Td),c=b.next();!c.done;c=b.next()){var d=c.value;c=d.constructor;var e=t.a.Re[c.name];isNaN(e)&&(e=0,t.a.Re[c.name]=e);d=d.pe-e;0>=d||(c=c.Bi,d/=c.ya,d*=.5,ub(1/d)&&a.push(new X(c)))}a=q(a);for(b=a.next();!b.done;b=a.next())b=b.value,b.f.set(this.f.x,this.f.y,this.f.z),b.f.z+=5E4*(E(w)-.5),b.f.x+=5E4*(E(w)-.5),b.w.set(6E3*(E(w)-.5),9E3*(E(w)+1),6E3*(E(w)-.5)),S(b,t.Ol),
b.create()}t.c.ha.get("hit02").play({gain:1});this.remove()};f.remove=function(){t.Wa.prototype.remove.call(this);this.Sa.remove();t.a.Pg.splice(t.a.Pg.indexOf(this),1);mk.call(this);ek.call(this);for(var a=q(this.qa),b=a.next();!b.done;b=a.next())b.value.fd=t.h};
function nk(a,b,c){t.Wa.call(this,"barrel");this.yb=20;this.f.x=a;this.f.y=b+65E3;this.f.z=c;Fd(this.transform,this.f);a=[new G(-5E4,0,-5E4),new G(-5E4,0,5E4),new G(5E4,0,5E4),new G(5E4,0,-5E4)];b=q(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.nb(c,c),c.round();a=[new xc(a[0].z,a[0].x,a[1].z,a[1].x),new xc(a[1].z,a[1].x,a[2].z,a[2].x),new xc(a[2].z,a[2].x,a[3].z,a[3].x),new xc(a[3].z,a[3].x,a[0].z,a[0].x)];this.qa=[];this.qa.push(new Dg(a,this.f.y+5E4),new Eg(a,this.f.y-5E4));a=Yc(a);
this.qa.push(new Cg(a[0],this.f.y-5E4,this.f.y+5E4),new Cg(a[1],this.f.y-5E4,this.f.y+5E4),new Cg(a[2],this.f.y-5E4,this.f.y+5E4),new Cg(a[3],this.f.y-5E4,this.f.y+5E4));a=q(this.qa);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;dk.call(this)}nk.prototype=Object.create(t.Wa.prototype);f=nk.prototype;f.constructor=nk;
f.create=function(){var a=this.Sa=new dg(t.c.nc.get("nitroBarrel"));a.Ga=this.O;S(a,this);a.create();this.Lb=a.src.Lb;Md(a,this.ia);Nd(a,6E4);t.a.Ig.push(this);lk.push(this);t.Wa.prototype.create.call(this)};
f.step=function(){if(isNaN(this.dg)){if(t.a.va){var a=od(t.a.va.f,this.f,new G(0,0,0));a.y=0;a.ra(1);this.transform.I=a.z;this.transform.M=-a.x;this.transform.K=a.x;this.transform.m22=a.z;this.transform.rotate(fc(15),0,0)}a=1+.25*Math.sin(t.h*Math.PI/3)*(1-this.yb/20);this.yb=Math.min(this.yb+2,20);ud(this.Sa.transform);this.Sa.transform.scale(a,a,a);t.h==this.ae+4?(this.Sa.D=t.c.sa.get("flash"),this.Sa.X=t.c.Ab.get("flashWhite")):t.h==this.ae+6?this.Sa.X=t.c.Ab.get("flashRed"):t.h==this.ae+8&&(delete this.Sa.X,
delete this.Sa.D);t.Wa.prototype.step.call(this)}else{a=t.h-this.dg;var b=1+1/12*a;ud(this.Sa.transform);this.Sa.transform.scale(b,b,b);6==a&&this.Gi()}};f.wf=function(a){isNaN(this.dg)&&(this.ae=t.h,this.yb-=a,0>=this.yb&&(this.dg=t.h))};
f.Gi=function(){function a(d){var e=od(d.f,this.f,new G),h=e.ra(1);if(d instanceof ok){var g=(h-5E5)/2E6;g=1-g;g=Ya(g,0,1);d.Ma+=fc(10)*g}5E5<=h||(d instanceof Y&&(d.yb=0,d.Lh()),d instanceof ok&&(d.yg=Number.NEGATIVE_INFINITY,d.dh=!0,d.Ma+=fc(10)),h=1E4,e.y+=1,d.w.x+=e.x*h,d.w.y+=e.y*h,d.w.z+=e.z*h)}t.c.ha.get("explode01").play({gain:1});for(var b=q(t.a.ad),c=b.next();!c.done;c=b.next())c=c.value,pk(c,this.f),a.call(this,c);b=q(t.a.Ig);for(c=b.next();!c.done;c=b.next())c=c.value,5E5>od(c.f,this.f,
new G(0,0,0)).ra(1)&&c.wf(Number.POSITIVE_INFINITY);b=q(t.a.Pg);for(c=b.next();!c.done;c=b.next())c=c.value,5E5>od(c.f,this.f,new G(0,0,0)).ra(1)&&c.wf(Number.POSITIVE_INFINITY);t.a.va&&a.call(this,t.a.va);c=new qk(1E5);c.transform.H=this.f.x;c.transform.m31=this.f.y;c.transform.m32=this.f.z;S(c,t.Dd);c.create();this.remove()};
f.remove=function(){t.Wa.prototype.remove.call(this);this.Sa.remove();t.a.Ig.splice(t.a.Ig.indexOf(this),1);mk.call(this);ek.call(this);for(var a=q(this.qa),b=a.next();!b.done;b=a.next())b.value.fd=t.h};function rk(a){t.Node.call(this,"GunManager "+a.name);this.la=a;this.Td=[];this.F=null;this.action="ready";this.V=NaN;this.focus=0;this.gc=!1;this.Tg=null;this.Bb=this.bc=this.gd=0;this.jb=null;this.zf=this.yf=0;this.sc=[];this.Jc=0}rk.prototype=Object.create(t.Node.prototype);f=rk.prototype;f.constructor=rk;
f.create=function(){var a=this.Ve=new t.za("muzzleFlare");jg.call(a);a.Xa=lg;a.D=t.c.sa.get("image");a.ba=t.c.P.get("muzzleFlare01");a.X=new Qd;a.X.Fa=1;a.color=new M(255,255,255,0);a.ab=12500;a.La=0;a.Ga=this.la.Ed.O;S(a,t.$d)};
f.step=function(){t.h==this.sl+1&&(this.fg.Yb.x-=this.bk,this.fg.Yb.y-=this.bk,this.fg.Yb.z-=this.bk,this.sl=NaN,this.fg=null);if(this.F){var a=this.la;a.Eg=null;var b=a.Cc.O,c=new G(b.H,b.m31,b.m32);b=new G(-b.K,-b.m21,-b.m22);for(var d=q(t.a.ad),e=d.next();!e.done;e=d.next()){e=e.value;var h=ak(c,b,e.f,e.Ba,e.lb);if(h.Ef){h=h.Ef;if(0>h.t)continue;if(1E8<=h.t)continue;h=od(h.p,c,new G)}else{var g=h.mh.da(),k=h.Di-e.Ba;g.x+=h.he.x*k;g.y+=h.he.y*k;g.z+=h.he.z*k;h=od(g,c,new G);if(0>=jc(h,b))continue}hf(c,
h,Wj)||(e.bi=t.h)}if(c=a.Za.F.mj(a.Cc.O))a.Eg=c}--this.Jc;0>this.Jc&&(this.Jc=0);a=q(this.Td);c=a.next();a:for(;!c.done;c=a.next())if(c=c.value,c!=this.F)for(b=q(c.Zi),d=b.next();!d.done;d=b.next())if(Ne.p[d.value]){this.Tg=c;break a}Le.p[0]&&(this.bc=1);Le.r[0]&&(this.bc=0);Le.p[2]&&(this.gd=1);Le.r[2]&&(this.gd=0);this.gd||(this.focus-=1/6,0>this.focus&&(this.focus=0));Ne.p.KeyR&&(this.Bb=1);if(this.F)this.F[this.action].call(this);else for(sk(this),a=0;a<this.sc.length;a++)c=this.sc[a],0<c.alpha||
(this.sc.splice(a--,1),S(c,null))};
f.Xa=function(){if(this.jb){var a=ad;90>t.h-this.la.Zh&&(a=0==Math.floor(t.h/3)%2?new M(255,255,255,128):new M(255,255,255,0));v.enable(v.SCISSOR_TEST);t.hc.Tc.N("viewMatrix",Gd);t.hc.Tc.upload();t.Sb(0);t.$b(0);t.xb(2);t.Cb(mg);t.eb(t.c.sa.get("physicalCardThreshold"));t.D.N("color",a);t.D.N("ambientLight",this.la.ia.sb,!1);a=this.F.constructor.Ej;t.Wb(0,a);var b=Math.round(a.width/2-this.jb.x+this.jb.m+this.yf),c=Math.round(a.height/2-this.jb.y+this.jb.o+this.zf);v.scissor(this.jb.m+Math.round(this.yf),
-this.jb.o-Math.round(this.zf)+t.canvas.height-this.jb.i,this.jb.b,this.jb.i);var d=new R;d.I=a.width/t.canvas.width;d.m11=-a.height/t.canvas.height;d.H=-1+2*b/t.canvas.width;d.m31=1-2*c/t.canvas.height;t.D.N("modelMatrix",d);v.drawArrays(v.TRIANGLE_FAN,0,4);v.disable(v.SCISSOR_TEST)}};function sk(a){if(!a.Tg)return!1;a.jb=null;a.focus=0;a.bc=0;a.Bb=0;a.Jc=0;a.gc=!1;a.F=a.Tg;t.a.Id();a.action="equip";a.V=t.h+1;a.Tg=null;return!0}
f.Fc=function(){var a=400*this.la.ze;a*=1-2/3*this.focus;this.yf=this.la.Uh*a;this.zf=this.la.Fc*a};rk.tb=function(a,b,c,d,e,h){var g=new R;b*=1E5;c*=1E5;a*=1E5;g.rotate(fc(h),fc(e),fc(d));g.scale(1,1,1);g.translate(b,c,a);d=g;e=new R;e.I=d.m22;e.L=d.K;e.M=d.m21;e.J=d.M;e.m11=d.I;e.m12=d.L;e.K=d.m12;e.m21=d.J;e.m22=d.m11;e.H=d.m32;e.m31=d.H;e.m32=d.m31;d=e;e=new R;e.I=d.I;e.L=d.L;e.M=d.M;e.J=d.K;e.m11=d.m21;e.m12=d.m22;e.K=-d.J;e.m21=-d.m11;e.m22=-d.m12;e.H=d.H;e.m31=d.m32;e.m32=-d.m31;return e};
function tk(a){this.aj=a;this.actions={};this.kc=this.ta=this.Ea=0;this.Ld=this.pe=-1;this.Pi=2/3;this.Hg=this.gh=this.mf=this.pd=0}function uk(a){return a.kc+a.ta+a.Ea}tk.prototype.yi=function(){return!1};tk.prototype.Ag=function(){return!1};
function vk(a){var b=new G(a.H,a.m31,a.m32);a=new G(-a.K,-a.m21,-a.m22);var c=[];c.cmp=function(m,n){return m.Jf>n.Jf?-1:1};for(var d=q(t.a.ad),e=d.next();!e.done;e=d.next())if(e=e.value,e.ib||!(t.h>e.V)){var h=ak(b,a,e.f,e.Ba-this.Hg,e.lb);if(h.Ef){var g=h.Ef;0>g.t||1E8<=g.t||(g.p.Jf=1E8-g.t,g.p.item=e,Sa(c,g.p))}else{g=h.mh.da();var k=h.Di-(e.Ba-this.Hg);g.x+=h.he.x*k;g.y+=h.he.y*k;g.z+=h.he.z*k;k=od(h.mh,b,new G);h=k.ra(1);var l=od(g,b,new G);0>=jc(l,a)||(l.normalize(),k=jc(k,l),l=this.gh,5E5<
h&&(l=Math.atan(5E5*Math.tan(l)/h)),Math.acos(k)>=l||(g.Jf=k-1,g.item=e,Sa(c,g)))}}a=q(c);for(c=a.next();!c.done;c=a.next())if(c=c.value,!hf(b,od(c,b,new G)))return c;return null}
function wk(a,b,c){function d(m){m=new xk(m);m.transform.H=a.p.x;m.transform.m31=a.p.y;m.transform.m32=a.p.z;S(m,t.Dd);m.create();m.step()}function e(){var m=new yk;m.$h=120*(E(w)+.5);m.ab=2E4;m.transform.H=a.p.x;m.transform.m31=a.p.y;m.transform.m32=a.p.z;m.w.x=a.n.x;m.w.y=a.n.y;m.w.z=a.n.z;m.w.scale(2E4*E(w)+1E4);S(m,t.Dd);m.create();m.step()}if(a.item instanceof Y){var h=new R,g=new G,k=new G,l=a.Eb.da();kc(l,g,k);h.pg(g);h.qg(k);h.rg(l);Fd(h,a.p);zk(a.item,h,c);S(new Ak,t.Nl);a.item.wf(b)}else a.item instanceof
nk?(d(31250),e(),a.item.wf(b)):a.item instanceof kk?(d(31250),e(),a.item.wf(b)):(d(12500),e(),Ag(t.a.Sj,new G(2343.75*Math.round(a.p.x/2343.75),2343.75*Math.round(a.p.y/2343.75),2343.75*Math.round(a.p.z/2343.75)),a.n,Math.PI,18750,tb(16),16))}function Bk(a){tk.call(this,a);this.pe=420;this.ta=this.Ld=30;this.Ea=this.pe-this.ta;this.Pi=1;this.gh=fc(4);this.Hg=8E3}Bk.prototype=Object.create(tk.prototype);Bk.prototype.constructor=Bk;
Bk.hb={CarbineEquip02:{m:291,o:265,x:1204,y:1548,b:189,i:31},CarbineEquip03:{m:90,o:191,x:814,y:1548,b:390,i:105},CarbineEquip04:{m:126,o:152,x:0,y:1548,b:354,i:144},CarbineEquip05:{m:46,o:96,x:1012,y:255,b:434,i:200},CarbineEquip06:{m:92,o:68,x:1281,y:0,b:356,i:228},CarbineEquip07:{m:106,o:65,x:960,y:0,b:321,i:231},CarbineEquip08:{m:129,o:76,x:0,y:255,b:282,i:220},CarbineEquip09:{m:145,o:91,x:282,y:255,b:250,i:205},CarbineEquip10:{m:163,o:109,x:1231,y:670,b:220,i:187},CarbineEquip11:{m:184,o:125,
x:292,y:1047,b:220,i:171},CarbineEquip12:{m:198,o:133,x:1541,y:1047,b:253,i:163},CarbineEquip13:{m:207,o:132,x:1296,y:1047,b:245,i:164},CarbineAim01:{m:194,o:133,x:0,y:1225,b:229,i:163},CarbineAim02:{m:170,o:136,x:1247,y:1225,b:187,i:160},CarbineAim03:{m:157,o:137,x:184,y:1388,b:174,i:159},CarbineFire01:{m:209,o:131,x:1030,y:1047,b:266,i:165},CarbineFire02:{m:213,o:128,x:512,y:1047,b:246,i:168},CarbineFire03:{m:212,o:133,x:229,y:1225,b:248,i:163},CarbineAimFire01:{m:147,o:136,x:1434,y:1225,b:193,
i:160},CarbineAimFire02:{m:152,o:136,x:0,y:1388,b:184,i:160},CarbineAimFire03:{m:155,o:134,x:730,y:1225,b:178,i:162},CarbineReload01:{m:185,o:133,x:477,y:1225,b:253,i:163},CarbineReload02:{m:101,o:134,x:908,y:1225,b:339,i:162},CarbineReload03:{m:14,o:144,x:838,y:1388,b:432,i:152},CarbineReload04:{m:0,o:153,x:354,y:1548,b:460,i:143},CarbineReload05:{m:0,o:149,x:1270,y:1388,b:480,i:147},CarbineReload06:{m:0,o:139,x:358,y:1388,b:480,i:157},CarbineReload07:{m:0,o:107,x:271,y:670,b:480,i:189},CarbineReload08:{m:0,
o:41,x:0,y:0,b:480,i:255},CarbineReload09:{m:0,o:47,x:480,y:0,b:480,i:249},CarbineReload10:{m:0,o:95,x:532,y:255,b:480,i:201},CarbineReload11:{m:0,o:107,x:751,y:670,b:480,i:189},CarbineReload12:{m:0,o:111,x:311,y:860,b:480,i:185},CarbineReload13:{m:0,o:114,x:791,y:860,b:480,i:182},CarbineReload14:{m:59,o:115,x:1271,y:860,b:421,i:181},CarbineReload15:{m:200,o:109,x:1451,y:670,b:280,i:187},CarbineReload16:{m:235,o:103,x:309,y:475,b:245,i:193},CarbineReload17:{m:246,o:104,x:838,y:475,b:234,i:192},CarbineReload18:{m:241,
o:105,x:1072,y:475,b:239,i:191},CarbineReload19:{m:209,o:106,x:0,y:670,b:271,i:190},CarbineReload20:{m:172,o:99,x:1446,y:255,b:308,i:197},CarbineReload21:{m:171,o:101,x:0,y:475,b:309,i:195},CarbineReload22:{m:196,o:103,x:554,y:475,b:284,i:193},CarbineReload23:{m:164,o:105,x:1311,y:475,b:316,i:191},CarbineReload24:{m:158,o:109,x:0,y:860,b:311,i:187},CarbineReload25:{m:173,o:118,x:0,y:1047,b:292,i:178},CarbineReload26:{m:175,o:128,x:758,y:1047,b:272,i:168}};
Bk.prototype.fire=function(){var a=t.h-this.V;this.Fc();if(0==a){t.c.ha.get("CarbineFire01").play({gain:.375,pitch:1.5});t.c.ha.get("CarbineFire02").play({gain:.75,pitch:1.5});--this.F.ta;!this.F.ta&&this.F.Ea&&(this.Bb=1);t.a.Id();this.Jc+=35;this.yc=rk.tb(.053697,.319573,-.058355,-.833,.006,-179.61);var b=this.Ve;b.La=1;var c=255*(8*E(w)+1)/12&255;b.color.r=c;b.color.Ya=c;b.color.ka=c;b.scale=E(w)+1;b.Pc=gc(sb());c=new R;c.translate(0,-35E3,0);Cd(this.yc,c,b.transform);b=(new R).rotate(0,fc(2.5*
E(w)),0);c=(new R).rotate(0,0,E(w)*Math.PI*2);var d=Ck(this.la);Cd(d,c,d);Cd(d,b,d);b=this.F.$e(d);b=q(b);for(c=b.next();!c.done;c=b.next())wk(c.value,72,1.2);b=new Dk("CartridgeCarbineSpent");b.qj=fc(6*(3*E(w)+1));b.transform.H-=2E3;b.transform.m31+=2100;c=new R;Cd(this.la.Ed.O,this.yc,c);Cd(c,b.transform,b.transform);b.w.x-=3E3*(2*E(w)+1);b.w.z=-b.w.x;Dd(c,b.w,b.w);b.f.set(b.transform.H,b.transform.m31,b.transform.m32);b.w.add(this.la.w);qd(b.w,b.gb);S(b,t.$d);b.create();180<=this.Jc&&(this.Jc-=
180,b=new Ek,b.ab=6E4,b.transform.m31-=45E3,c=new R,Cd(this.la.Ed.O,this.yc,c),Cd(c,b.transform,b.transform),b.w.y=-37500,Dd(c,b.w,b.w),b.w.add(this.la.w),qd(b.w,b.gb),b.ia=this.la.ia,S(b,t.Dd),b.create(),b.step(),this.sc.push(b));3<this.sc.length&&(S(this.sc[0],null),this.sc.splice(0,1))}1==a&&(this.Ve.La=0);2==a&&(this.la.Ma+=fc(1));if(3<=a){if(sk(this))return;if(!this.gd&&this.bc){if(this.F.ta){this.action="fire";this.V=t.h+1;return}this.F.Ea&&(this.Bb=1)}this.F.te()}4<=a?this.action="ready":(a=
("00"+a).slice(-2),this.jb=this.F.constructor.hb["CarbineFire"+a]||this.F.constructor.hb.CarbineEquip13)};
Bk.prototype.aimFire=function(){var a=t.h-this.V;this.Fc();if(0==a){t.c.ha.get("CarbineFire01").play({gain:.375,pitch:1.5});t.c.ha.get("CarbineFire02").play({gain:.75,pitch:1.5});--this.F.ta;!this.F.ta&&this.F.Ea&&(this.Bb=1);t.a.Id();this.Jc+=35;this.yc=rk.tb(0,.270042,-.06106,0,0,180);var b=this.Ve;b.La=1;var c=255*(8*E(w)+1)/12&255;b.color.r=c;b.color.Ya=c;b.color.ka=c;b.scale=E(w)+1;b.Pc=gc(sb());c=new R;c.translate(0,-35E3,0);Cd(this.yc,c,b.transform);b=(new R).rotate(0,fc(1*E(w)),0);c=(new R).rotate(0,
0,E(w)*Math.PI*2);var d=Ck(this.la);Cd(d,c,d);Cd(d,b,d);b=this.F.$e(d);b=q(b);for(c=b.next();!c.done;c=b.next())wk(c.value,72,1.2);b=new Dk("CartridgeCarbineSpent");b.qj=fc(6*(3*E(w)+1));b.transform.H-=2E3;b.transform.m31+=2100;c=new R;Cd(this.la.Ed.O,this.yc,c);Cd(c,b.transform,b.transform);b.w.x-=3E3*(2*E(w)+1);b.w.z=-b.w.x;Dd(c,b.w,b.w);b.f.set(b.transform.H,b.transform.m31,b.transform.m32);b.w.add(this.la.w);qd(b.w,b.gb);S(b,t.$d);b.create();210<=this.Jc&&(this.Jc-=210,b=new Ek,b.ab=4E4,b.scale=
1,b.transform.m31-=45E3,c=new R,Cd(this.la.Ed.O,this.yc,c),Cd(c,b.transform,b.transform),b.w.y=-2E4,Dd(c,b.w,b.w),b.w.add(this.la.w),qd(b.w,b.gb),b.ia=this.la.ia,S(b,t.Dd),b.create(),b.step(),this.sc.push(b));3<this.sc.length&&(S(this.sc[0],null),this.sc.splice(0,1))}1==a&&(this.Ve.La=0);2==a&&(this.la.Ma+=fc(.5));if(3<=a){if(sk(this))return;if(this.gd&&this.bc){if(this.F.ta){this.action="aimFire";this.V=t.h+1;return}this.F.Ea&&(this.Bb=1)}}4<=a?this.action="ready":(a=("00"+a).slice(-2),this.jb=this.F.constructor.hb["CarbineAimFire"+
a]||this.F.constructor.hb.CarbineAim03)};
Bk.prototype.equip=function(){var a=t.h-this.V+5;if(!sk(this))if(this.Bb)this.action="reload",this.V=t.h+1;else{this.gc=this.F.ta;this.zf=this.yf=0;9==a&&(this.la.Ma+=fc(1));a=Math.floor(a/2.5);if(9<=a)if(this.F.Kf.call(this),1==this.focus){if(this.bc){if(this.F.ta){this.action="aimFire";this.V=t.h+1;return}this.F.Ea&&(this.Bb=1)}}else if(0==this.focus&&this.bc){if(this.F.ta){this.action="fire";this.V=t.h+1;return}this.F.Ea&&(this.Bb=1)}14<=a?this.action="ready":0==this.focus&&(a=("00"+a).slice(-2),
this.jb=this.F.constructor.hb["CarbineEquip"+a])}};Bk.prototype.reload=function(){var a=t.h-this.V+3;this.Bb=0;if(!sk(this)){this.gc=!1;this.zf=this.yf=0;3==a&&(this.F.Ea+=this.F.ta,this.F.ta=0,t.a.Id());if(60==a){this.la.Ma+=fc(1);var b=Math.min(this.F.Ld-this.F.ta,this.F.Ea);this.F.ta+=b;this.F.Ea-=b;t.a.Id()}a=Math.floor(a/3);27<=a?this.action="ready":(a=("00"+a).slice(-2),this.jb=this.F.constructor.hb["CarbineReload"+a])}};
Bk.prototype.ready=function(){this.gc=this.F.ta;if(!sk(this))if(this.Bb)this.action="reload",this.V=t.h+1;else{this.Fc();this.F.Kf.call(this);if(1==this.focus){if(this.bc){if(this.F.ta){this.action="aimFire";this.V=t.h+1;return}this.F.Ea&&(this.Bb=1)}}else if(0==this.focus&&this.bc){if(this.F.ta){this.action="fire";this.V=t.h+1;return}this.F.Ea&&(this.Bb=1)}this.F.te()}};f=Bk.prototype;
f.Kf=function(){this.gd&&(this.focus+=1/6,1<this.focus&&(this.focus=1));this.gc=this.F.ta;if(0<this.focus){var a=Math.floor(3*this.focus);a=("00"+a).slice(-2);this.jb=this.F.constructor.hb["CarbineAim"+a]||this.F.constructor.hb.CarbineEquip13}else this.jb=this.F.constructor.hb.CarbineEquip13};f.mj=vk;
f.$e=function(a){var b=new G(a.H,a.m31,a.m32),c=new G(-a.K,-a.m21,-a.m22),d=1E8;if(a=hf(b,new G(c.x*d,c.y*d,c.z*d)))d=a.d;var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=q(t.a.ad),g=h.next();!g.done;g=h.next())if(g=g.value,g.ib||!(t.h>g.V)){var k=ak(b,c,g.f,g.Ba,g.lb).Ef;!k||0>k.t||k.t>=d||(k.item=g,k.Eb=c,Sa(e,k))}b=null;d=c=NaN;e=q(e);for(h=e.next();!h.done;h=e.next())h=h.value,h.item.Vh>c||h.item.Vh==c&&h.t>d||(b=h,
c=h.item.Vh,d=h.t);e=[];b&&e.push(b);a&&e.push(a);return e};f.yi=function(){return 0>=this.Ea||"reload"==this.aj.action||10<this.ta?!1:!0};f.Ag=function(){var a=uk(this);return 0>=a?2:30>a?1:0};f.te=function(){this.ta>=this.Ld||!this.Ea?this.pd=0:(this.pd+=1,5.2<=this.pd&&(this.pd-=5.2,--this.Ea,this.ta+=1))};function Fk(a){tk.call(this,a);this.pe=12;this.Ld=0;this.kc=1;this.ta=this.Ld;this.Ea=this.pe-this.ta-this.kc;this.pj=!1;this.gh=fc(0)}Fk.prototype=Object.create(tk.prototype);
Fk.prototype.constructor=Fk;
Fk.hb={ShotgunEquip01:{m:170,o:185,x:874,y:1644,b:310,i:111},ShotgunEquip02:{m:183,o:151,x:569,y:1351,b:297,i:145},ShotgunEquip03:{m:331,o:128,x:1175,y:704,b:149,i:168},ShotgunEquip04:{m:111,o:20,x:871,y:0,b:369,i:276},ShotgunEquip05:{m:140,o:0,x:0,y:0,b:340,i:296},ShotgunEquip06:{m:158,o:0,x:340,y:0,b:277,i:296},ShotgunEquip07:{m:173,o:0,x:617,y:0,b:254,i:296},ShotgunEquip08:{m:188,o:100,x:0,y:508,b:257,i:196},ShotgunEquip09:{m:195,o:152,x:1432,y:1351,b:258,i:144},ShotgunEquip10:{m:199,o:159,x:0,
y:1644,b:257,i:137},ShotgunEquip11:{m:201,o:160,x:257,y:1644,b:253,i:136},ShotgunEquip12:{m:197,o:156,x:1248,y:1500,b:254,i:140},ShotgunEquip13:{m:195,o:152,x:0,y:1500,b:254,i:144},ShotgunFire01:{m:202,o:152,x:254,y:1500,b:278,i:144},ShotgunFire02:{m:181,o:147,x:0,y:1351,b:299,i:149},ShotgunFire03:{m:175,o:133,x:0,y:884,b:305,i:163},ShotgunFire04:{m:177,o:118,x:299,y:704,b:303,i:178},ShotgunFire05:{m:182,o:112,x:651,y:508,b:298,i:184},ShotgunFire06:{m:184,o:112,x:949,y:508,b:296,i:184},ShotgunFire07:{m:183,
o:113,x:1245,y:508,b:297,i:183},ShotgunFire08:{m:181,o:116,x:0,y:704,b:299,i:180},ShotgunFire09:{m:187,o:120,x:602,y:704,b:293,i:176},ShotgunFire10:{m:200,o:125,x:895,y:704,b:280,i:171},ShotgunFire11:{m:211,o:132,x:1324,y:704,b:269,i:164},ShotgunFire12:{m:215,o:139,x:305,y:884,b:265,i:157},ShotgunFire13:{m:212,o:145,x:1320,y:1199,b:268,i:151},ShotgunFire14:{m:203,o:149,x:299,y:1351,b:270,i:147},ShotgunFire15:{m:196,o:152,x:532,y:1500,b:256,i:144},ShotgunCycle01:{m:187,o:139,x:570,y:884,b:209,i:157},
ShotgunCycle02:{m:162,o:109,x:475,y:508,b:176,i:187},ShotgunCycle03:{m:123,o:88,x:1399,y:296,b:176,i:208},ShotgunCycle04:{m:101,o:84,x:0,y:296,b:176,i:212},ShotgunCycle05:{m:103,o:84,x:176,y:296,b:174,i:212},ShotgunCycle06:{m:126,o:84,x:350,y:296,b:173,i:212},ShotgunCycle07:{m:126,o:86,x:1220,y:296,b:179,i:210},ShotgunCycle08:{m:127,o:85,x:1045,y:296,b:175,i:211},ShotgunCycle09:{m:126,o:84,x:523,y:296,b:173,i:212},ShotgunCycle10:{m:123,o:84,x:696,y:296,b:173,i:212},ShotgunCycle11:{m:101,o:84,x:869,
y:296,b:176,i:212},ShotgunCycle12:{m:97,o:82,x:1240,y:0,b:181,i:214},ShotgunCycle13:{m:93,o:83,x:1421,y:0,b:192,i:213},ShotgunCycle14:{m:114,o:108,x:257,y:508,b:218,i:188},ShotgunCycle15:{m:166,o:139,x:779,y:884,b:250,i:157},ShotgunReload01:{m:196,o:153,x:788,y:1500,b:230,i:143},ShotgunReload02:{m:209,o:156,x:1502,y:1500,b:158,i:140},ShotgunReload03:{m:183,o:164,x:510,y:1644,b:182,i:132},ShotgunReload04:{m:150,o:151,x:866,y:1351,b:283,i:145},ShotgunReload05:{m:124,o:144,x:1029,y:884,b:356,i:152},
ShotgunReload06:{m:108,o:144,x:1385,y:884,b:372,i:152},ShotgunReload07:{m:108,o:144,x:0,y:1047,b:372,i:152},ShotgunReload08:{m:108,o:144,x:372,y:1047,b:308,i:152},ShotgunReload09:{m:108,o:144,x:680,y:1047,b:262,i:152},ShotgunReload10:{m:108,o:144,x:942,y:1047,b:262,i:152},ShotgunReload11:{m:107,o:144,x:1204,y:1047,b:373,i:152},ShotgunReload12:{m:108,o:144,x:0,y:1199,b:262,i:152},ShotgunReload13:{m:108,o:144,x:262,y:1199,b:262,i:152},ShotgunReload14:{m:108,o:144,x:524,y:1199,b:262,i:152},ShotgunReload15:{m:108,
o:144,x:786,y:1199,b:262,i:152},ShotgunReload16:{m:124,o:144,x:1048,y:1199,b:272,i:152},ShotgunReload17:{m:150,o:151,x:1149,y:1351,b:283,i:145},ShotgunReload18:{m:183,o:164,x:692,y:1644,b:182,i:132},ShotgunReload19:{m:209,o:156,x:1588,y:1199,b:158,i:140},ShotgunReload20:{m:196,o:153,x:1018,y:1500,b:230,i:143}};
Fk.prototype.equip=function(){var a=t.h-this.V+2;sk(this)||(this.gc=this.F.kc,9==a&&(this.la.Ma+=fc(1)),a=Math.floor(a/2.5),9<=a&&this.bc&&this.F.kc?(this.action="fire",this.V=t.h+1,this.bc=0):9<=a&&(this.gd||!this.F.kc&&this.F.Ea)?(this.action="cycleOpen",this.V=t.h+1-6):14<=a?this.action="ready":(a=("00"+a).slice(-2),this.jb=this.F.constructor.hb["ShotgunEquip"+a],this.zf=this.yf=0))};
Fk.prototype.ready=function(){sk(this)||(this.gc=this.F.kc,this.bc&&this.F.kc?(this.action="fire",this.V=t.h+1,this.bc=0):this.gd?(this.action="cycleOpen",this.V=t.h+1,this.gc=!1):(this.Fc(),this.F.te(),this.jb=this.F.constructor.hb.ShotgunEquip13))};
Fk.prototype.fire=function(){var a=t.h-this.V;this.Fc();this.gc=!1;if(0==a){t.c.ha.get("ShotgunFire01").play({gain:.9375,pitch:.75});t.c.ha.get("explode01").play({gain:.9375,pitch:1.5});this.F.kc=0;this.F.pj=!0;t.a.Id();this.yc=rk.tb(.04499,.31957,-.038305,-.596,.007,-179.3);var b=this.Ve;b.La=1;var c=255*(E(w)+4)/5&255;b.color.r=c;b.color.Ya=c;b.color.ka=c;b.scale=E(w)+1;b.Pc=gc(sb());c=new R;c.translate(0,-4E4,0);Cd(this.yc,c,b.transform);b=Ck(this.la);var d=Fk.Sc.length;c=Array(d);for(var e=0;e<
d;e++){var h=tb(e+1);h!=e&&(c[e]=c[h]);c[h]=e}d=E(w)*Math.Cg;for(e=0;e<c.length;e++){h=(new R).rotate(0,Fk.Sc[8-e],0);var g=(new R).rotate(0,0,d+c[e]*Math.Cg/9),k=new R;Cd(b,g,k);Cd(k,h,k);g=this.F.$e(k);h=270;g=q(g);for(k=g.next();!k.done;k=g.next()){k=k.value;var l=h;k.item instanceof Y&&(l=Math.min(h,k.item.yb));wk(k,l,1.2);h-=l;if(0>=h)break}}b=new Ek;b.ab=6E4;b.scale=1;b.transform.m31-=45E3;c=new R;Cd(this.la.Ed.O,this.yc,c);Cd(c,b.transform,b.transform);b.w.y=-37500;Dd(c,b.w,b.w);b.w.add(this.la.w);
qd(b.w,b.gb);b.ia=this.la.ia;S(b,t.Dd);b.create();b.step();this.sc.push(b);3<this.sc.length&&(S(this.sc[0],null),this.sc.splice(0,1));this.la.Ma+=fc(2)}1==a&&(this.Ve.La=0);3==a&&(this.la.Ma+=fc(4));if(4<=a){if(sk(this))return;if(this.gd){this.action="cycleOpen";this.V=t.h+1;return}this.F.te()}7<=a&&(a=7+Math.floor((a-7)/4));16<=a?this.action="ready":(a=("00"+a).slice(-2),this.jb=this.F.constructor.hb["ShotgunFire"+a]||this.F.constructor.hb.ShotgunEquip13)};
Fk.prototype.cycleOpen=function(){var a=t.h-this.V;if(!sk(this)){this.gc=!1;this.Fc();12==a&&t.c.ha.get("ShotgunOpen01").play({gain:1,pitch:.8125});if(21==a){this.la.Ma+=fc(1);this.F.Ea+=this.F.kc;this.yc=rk.tb(-.018192,.25469,-.045699,-19.3,39.9,177);if(this.F.pj||this.F.kc){var b=new Dk("CartridgeShotgunSpent");b.Kj=.65;b.qj=fc(24*(1*E(w)+1));b.transform.m31+=6E3;var c=new R;Cd(this.la.Ed.O,this.yc,c);Cd(c,b.transform,b.transform);b.w.x=-3E3;b.w.z=-b.w.x;Dd(c,b.w,b.w);b.f.set(b.transform.H,b.transform.m31,
b.transform.m32);b.w.add(this.la.w);qd(b.w,b.gb);S(b,t.$d);b.create();this.F.pj=!1}this.F.kc=0}a=Math.floor(a/3);if(9<=a){a=9;if(!this.gd){this.action="cycleShut";this.V=t.h+1-27;return}this.F.te()}a=("00"+a).slice(-2);this.jb=this.F.constructor.hb["ShotgunCycle"+a]||this.F.constructor.hb.ShotgunEquip13}};
Fk.prototype.cycleShut=function(){var a=t.h-this.V;sk(this)||(this.Fc(),30==a&&(t.c.ha.get("ShotgunShut01").play({gain:1,pitch:.8125}),1<=this.F.Ea&&(--this.F.Ea,this.F.kc+=1),t.a.Id()),39==a&&(this.gc=this.F.kc),a=Math.floor(a/3),13<=a&&sk(this)||(16<=a?this.action="ready":(a=("00"+a).slice(-2),this.jb=this.F.constructor.hb["ShotgunCycle"+a]||this.F.constructor.hb.ShotgunEquip13)))};f=Fk.prototype;f.mj=vk;
f.$e=function(a){var b=new G(a.H,a.m31,a.m32);a=new G(-a.K,-a.m21,-a.m22);var c=1E8,d=hf(b,new G(a.x*c,a.y*c,a.z*c));d&&(c=d.d);var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=q(t.a.ad),g=h.next();!g.done;g=h.next())if(g=g.value,g.ib||!(t.h>g.V)){var k=Zj(b,a,g.f,g.Ba,g.lb+g.Ba);!k||0>k.t||k.t>=c||(k.item=g,k.Eb=a,Sa(e,k))}d&&e.push(d);return e};f.yi=function(){return!1};
f.Ag=function(){var a=uk(this);return 0>=a?2:5>a?1:0};f.te=function(){};function Gk(a){tk.call(this,a);this.pe=24;this.ta=this.Ld=6;this.Ea=this.pe-this.ta;this.gh=fc(4);this.oi=0}Gk.prototype=Object.create(tk.prototype);Gk.prototype.constructor=Gk;
Gk.hb={RevolverEquip00:{m:0,o:255,x:1099,y:1692,b:480,i:41},RevolverEquip01:{m:32,o:246,x:651,y:1692,b:448,i:50},RevolverEquip02:{m:129,o:224,x:300,y:1692,b:351,i:72},RevolverEquip03:{m:180,o:199,x:0,y:1692,b:300,i:97},RevolverEquip04:{m:193,o:176,x:858,y:1443,b:287,i:120},RevolverEquip05:{m:194,o:157,x:1382,y:1296,b:249,i:139},RevolverEquip06:{m:184,o:144,x:343,y:845,b:232,i:152},RevolverEquip07:{m:172,o:148,x:258,y:999,b:255,i:148},RevolverAim01:{m:178,o:152,x:808,y:1296,b:226,i:144},RevolverAim02:{m:150,
o:150,x:341,y:1296,b:214,i:146},RevolverAim03:{m:133,o:148,x:513,y:999,b:208,i:148},RevolverFire01:{m:184,o:149,x:208,y:1148,b:238,i:147},RevolverFire02:{m:184,o:149,x:446,y:1148,b:238,i:147},RevolverFire03:{m:184,o:149,x:684,y:1148,b:238,i:147},RevolverFire04:{m:184,o:149,x:922,y:1148,b:238,i:147},RevolverFire05:{m:195,o:149,x:1160,y:1148,b:217,i:147},RevolverFire06:{m:201,o:111,x:1563,y:269,b:148,i:185},RevolverFire07:{m:197,o:71,x:0,y:269,b:144,i:225},RevolverFire08:{m:212,o:100,x:660,y:269,b:192,
i:196},RevolverFire09:{m:173,o:114,x:486,y:494,b:253,i:182},RevolverFire10:{m:180,o:111,x:0,y:494,b:242,i:185},RevolverFire11:{m:176,o:113,x:242,y:494,b:244,i:183},RevolverFire12:{m:169,o:126,x:1548,y:494,b:266,i:170},RevolverFire13:{m:171,o:139,x:759,y:679,b:269,i:157},RevolverFire14:{m:171,o:147,x:0,y:999,b:258,i:149},RevolverFire15:{m:185,o:149,x:1377,y:1148,b:237,i:147},RevolverAimFire01:{m:133,o:148,x:721,y:999,b:208,i:148},RevolverAimFire02:{m:133,o:148,x:929,y:999,b:208,i:148},RevolverAimFire03:{m:133,
o:148,x:1137,y:999,b:208,i:148},RevolverAimFire04:{m:133,o:148,x:1345,y:999,b:208,i:148},RevolverAimFire05:{m:138,o:148,x:1553,y:999,b:200,i:148},RevolverAimFire06:{m:144,o:119,x:739,y:494,b:168,i:177},RevolverAimFire07:{m:140,o:87,x:338,y:269,b:146,i:209},RevolverAimFire08:{m:153,o:110,x:1370,y:269,b:193,i:186},RevolverAimFire09:{m:126,o:121,x:1329,y:494,b:219,i:175},RevolverAimFire10:{m:135,o:119,x:907,y:494,b:211,i:177},RevolverAimFire11:{m:130,o:120,x:1118,y:494,b:211,i:176},RevolverAimFire12:{m:126,
o:130,x:0,y:679,b:219,i:166},RevolverAimFire13:{m:127,o:141,x:1028,y:679,b:219,i:155},RevolverAimFire14:{m:131,o:146,x:922,y:845,b:212,i:150},RevolverAimFire15:{m:133,o:148,x:0,y:1148,b:208,i:148},RevolverReload01:{m:181,o:136,x:560,y:679,b:199,i:160},RevolverReload02:{m:171,o:107,x:1194,y:269,b:176,i:189},RevolverReload03:{m:141,o:71,x:144,y:269,b:194,i:225},RevolverReload04:{m:113,o:40,x:1337,y:0,b:216,i:256},RevolverReload05:{m:95,o:28,x:503,y:0,b:222,i:268},RevolverReload06:{m:91,o:27,x:0,y:0,
b:238,i:269},RevolverReload07:{m:90,o:27,x:238,y:0,b:265,i:269},RevolverReload08:{m:107,o:35,x:725,y:0,b:204,i:261},RevolverReload09:{m:107,o:36,x:929,y:0,b:204,i:260},RevolverReload10:{m:107,o:36,x:1133,y:0,b:204,i:260},RevolverReload11:{m:117,o:51,x:1553,y:0,b:193,i:245},RevolverReload12:{m:135,o:90,x:484,y:269,b:176,i:206},RevolverReload13:{m:141,o:141,x:1247,y:679,b:175,i:155},RevolverReload14:{m:139,o:149,x:0,y:1296,b:341,i:147},RevolverReload15:{m:137,o:142,x:0,y:845,b:343,i:154},RevolverReload16:{m:138,
o:103,x:852,y:269,b:342,i:193},RevolverReload17:{m:139,o:130,x:219,y:679,b:341,i:166},RevolverReload18:{m:139,o:141,x:1422,y:679,b:341,i:155},RevolverReload19:{m:133,o:145,x:575,y:845,b:347,i:151},RevolverReload20:{m:132,o:146,x:1134,y:845,b:348,i:150},RevolverReload21:{m:132,o:146,x:1482,y:845,b:348,i:150},RevolverReload22:{m:132,o:152,x:1034,y:1296,b:348,i:144},RevolverReload23:{m:139,o:174,x:517,y:1443,b:341,i:122},RevolverReload24:{m:153,o:184,x:0,y:1580,b:327,i:112},RevolverReload25:{m:163,o:187,
x:985,y:1580,b:317,i:109},RevolverReload26:{m:155,o:187,x:1302,y:1580,b:325,i:109},RevolverReload27:{m:142,o:186,x:647,y:1580,b:338,i:110},RevolverReload28:{m:156,o:185,x:327,y:1580,b:320,i:111},RevolverReload29:{m:144,o:182,x:1424,y:1443,b:293,i:114},RevolverReload30:{m:128,o:177,x:1145,y:1443,b:279,i:119},RevolverReload31:{m:136,o:169,x:256,y:1443,b:261,i:127},RevolverReload32:{m:150,o:159,x:0,y:1443,b:256,i:137},RevolverReload33:{m:167,o:151,x:555,y:1296,b:253,i:145}};
Gk.prototype.equip=function(){var a=t.h-this.V;if(!sk(this))if(this.Bb)this.action="reload",this.V=t.h+1;else{this.gc=!0;0==a&&(this.la.Ma+=fc(1));a=Math.floor(a/2.5);if(5<=a&&(this.F.Kf.call(this),this.bc)){if(this.F.ta){this.action="fire";this.V=t.h+1;return}this.F.Ea&&(this.Bb=1)}8<=a?this.action="ready":0==this.focus&&(a=("00"+a).slice(-2),this.jb=this.F.constructor.hb["RevolverEquip"+a])}};
Gk.prototype.ready=function(){if(!sk(this))if(this.gc=!0,this.Bb)this.action="reload",this.V=t.h+1;else{if(this.bc){if(this.F.ta){this.action="fire";this.V=t.h+1;return}this.F.Ea&&(this.Bb=1)}this.Fc();this.F.Kf.call(this);this.F.te()}};
Gk.prototype.fire=function(){var a=t.h-this.V;this.Fc();if(4==a){t.c.ha.get("CarbineFire01").play({gain:1,pitch:1});t.c.ha.get("ShotgunFire01").play({gain:.5,pitch:1.5});this.bc=0;this.F.ta--;this.F.oi++;!this.F.ta&&this.F.Ea&&(this.Bb=1);t.a.Id();this.yc=.5<this.focus?rk.tb(0,.49195,-.017475,-.713,0,0):rk.tb(.032225,.49195,-.022213,.367,-.151,.525);var b=this.Ve;b.La=1;var c=255*(E(w)+4)/5&255;b.color.r=c;b.color.Ya=c;b.color.ka=c;b.scale=E(w)+1;b.Pc=gc(sb());c=new R;c.translate(0,-21E3,0);Cd(this.yc,
c,b.transform);b=new Ek;b.ab=6E4;b.scale=1;b.transform.m31-=45E3;c=new R;Cd(this.la.Ed.O,this.yc,c);Cd(c,b.transform,b.transform);b.w.y=-37500;Dd(c,b.w,b.w);b.w.add(this.la.w);qd(b.w,b.gb);b.ia=this.la.ia;S(b,t.Dd);b.create();b.step();this.sc.push(b);b=(new R).rotate(0,fc(0*E(w)),0);c=(new R).rotate(0,0,E(w)*Math.PI*2);var d=Ck(this.la);Cd(d,c,d);Cd(d,b,d);b=this.F.$e(d);b=q(b);for(c=b.next();!c.done;c=b.next()){c=c.value;d=c.item instanceof Y?3:1;for(var e=0;e<d;e++)wk(c,360,1.7)}}5==a&&(this.Ve.La=
0);7==a&&(this.la.Ma+=fc(3));if(7<=a){if(sk(this))return;a=7+Math.floor((a-7)/3)}if(8<=a){if(this.bc){if(this.F.ta){this.action="fire";this.V=t.h+1;return}this.F.Ea&&(this.Bb=1)}if(this.Bb){this.action="reload";this.V=t.h+1;return}this.F.te()}16<=a?this.action="ready":(a=("00"+a).slice(-2),this.F.Kf.call(this),this.jb=.5<this.focus?this.F.constructor.hb["RevolverAimFire"+a]||this.F.constructor.hb.RevolverAim03:this.F.constructor.hb["RevolverFire"+a]||this.F.constructor.hb.RevolverEquip07)};
Gk.prototype.reload=function(){var a=t.h-this.V+3;this.Bb=0;if(!sk(this)){this.gc=!1;this.focus-=1/6;0>this.focus&&(this.focus=0);this.zf=this.yf=0;if(24==a){this.la.Ma+=fc(.5);for(var b=0;b<this.F.oi;b++)t.c.ha.get("shellCasing0"+(tb(3)+1)).play({gain:.625,pitch:.65,delay:.125+.15*b});this.F.oi=0;this.F.Ea+=this.F.ta;this.F.ta=0;t.a.Id()}57==a&&(this.la.Ma+=fc(1),b=Math.min(this.F.Ld-this.F.ta,this.F.Ea),this.F.ta+=b,this.F.Ea-=b,t.a.Id());84==a&&(this.gc=!0);if(84<=a){if(this.Bb){this.action="reload";
this.V=t.h+1;return}if(this.bc&&this.F.ta){this.action="fire";this.V=t.h+1;return}this.gd&&(this.action="ready");this.F.Kf.call(this)}102<=a?this.action="ready":(a=("00"+Math.floor(a/3)).slice(-2),this.jb=this.F.constructor.hb["RevolverReload"+a])}};f=Gk.prototype;
f.Kf=function(){this.gd?(this.focus+=1/6,1<this.focus&&(this.focus=1)):this.gc=!0;if(0<this.focus){var a=Math.floor(3*this.focus);a=("00"+a).slice(-2);this.jb=this.F.constructor.hb["RevolverAim"+a]||this.F.constructor.hb.RevolverEquip07}else this.jb=this.F.constructor.hb.RevolverEquip07};f.mj=function(a){return.5<this.aj.focus?Hk(this,a):vk.call(this,a)};
function Hk(a,b){function c(n){var r=od(n,d,new G);n=r.length();var p=26512.5/n;r=kf(d,r);for(var u=0,z=!0;;){var y=r.shift();if(!y){if(!z){u+=p;break}u=1;break}if(!z){z=y.t-u;if(z>p){u+=p;break}p-=z}u=y.t;z=!y.Ra}return u*n>=n-1E3}var d=new G(b.H,b.m31,b.m32),e=new G(-b.K,-b.m21,-b.m22);b=[];b.cmp=function(n,r){return n.Jf>r.Jf?-1:1};for(var h=q(t.a.ad),g=h.next();!g.done;g=h.next())if(g=g.value,(g.ib||!(t.h>g.V))&&600>t.h-g.bi){var k=ak(d,e,g.f,g.Ba-a.Hg,g.lb);if(k.Ef){var l=k.Ef;0>l.t||1E8<=l.t||
(l.p.Jf=1E8-l.t,l.p.item=g,Sa(b,l.p))}else{l=k.mh.da();var m=k.Di-(g.Ba-a.Hg);l.x+=k.he.x*m;l.y+=k.he.y*m;l.z+=k.he.z*m;k=od(k.mh,d,new G).normalize();m=od(l,d,new G).normalize();0>=jc(m,e)||(k=jc(k,m),l.Jf=k-1,l.item=g,Sa(b,l),Math.acos(k)>=a.gh&&(l.Jl=!0))}}a=null;b=q(b);for(e=b.next();!e.done;e=b.next())e=e.value,c(e)&&(e.item.Al=t.h,e.Jl||a||(a=e));return a}
f.$e=function(a){var b=new G(a.H,a.m31,a.m32),c=new G(-a.K,-a.m21,-a.m22),d=1E8;a=[];for(var e=kf(b,new G(c.x*d,c.y*d,c.z*d)),h=26512.5/d,g=0,k=!0;;){var l=e.shift();if(!l){k||(d*=g+h);break}if(!k){k=l.t-g;if(k>h){d*=g+h;break}h-=k}g=l.t;l.Ra&&a.push(l);k=!l.Ra}e=[];e.cmp=function(m,n){return m.t<n.t?-1:m.t>n.t?1:m.item.index<n.item.index?-1:m.item.index>n.item.index?1:0};h=q(t.a.ad);for(g=h.next();!g.done;g=h.next())g=g.value,!g.ib&&t.h>g.V||!(l=Zj(b,c,g.f,g.Ba,g.lb+g.Ba))||0>l.t||l.t>=d||(l.item=
g,l.Eb=c,Sa(e,l));b=[];e.length&&b.push(e[0]);b.push.apply(b,ba(a));return b};f.yi=function(){return 0>=this.Ea||"reload"==this.aj.action||2<this.ta?!1:!0};f.Ag=function(){var a=uk(this);return 0>=a?2:6>a?1:0};f.te=function(){this.ta>=this.Ld||!this.Ea?this.pd=0:(this.pd+=1,56<=this.pd&&(this.pd-=56,--this.Ea,this.ta+=1,this.oi--))};function Dk(a){Pj.call(this,a);this.Lb=12500;this.mg=1;this.start=t.h;this.Kk=new G(E(w)-.5,E(w)-.5,E(w)-.5);this.Kk.ra(1);this.Kj=1}Dk.prototype=Object.create(Pj.prototype);
Dk.prototype.constructor=Dk;Dk.prototype.create=function(){Pj.prototype.create.call(this);var a=new dg(t.c.nc.get(this.name));a.Ga=this.O;a.transform.scale(.1,.1,.1);a.transform.rotate(0,-90,0);S(a,this);a.create();Md(a,this.ia)};Dk.prototype.step=function(){this.transform.lj(this.Kk,this.qj);30<=t.h-this.start&&this.remove();Pj.prototype.step.call(this)};Dk.prototype.remove=function(){t.c.ha.get("shellCasing0"+(tb(3)+1)).play({gain:.625,pitch:this.Kj});Pj.prototype.remove.call(this)};
function Ak(a){t.Node.call(this,a);this.Hb=t.h}Ak.prototype=Object.create(t.Node.prototype);Ak.prototype.constructor=Ak;Ak.prototype.step=function(){t.Node.prototype.step.call(this);var a=t.h-this.Hb-6;0>a||(0==a&&t.c.ha.get(wb("woodSnap01","woodSnap02","woodSnap03")).play({gain:10/60}),5<=(1<=a?a-1:0)&&this.remove())};var lk=[];function mk(){var a=lk.indexOf(this);0>a||lk.splice(a,1)};function ok(a){Tj.call(this,a);this.mg=100;this.lh=0;this.Ba=4E4;this.be=18E4;this.Ji=9E4;this.lb=.5*(this.be-2*this.Ba-6E4);this.yj=12E4;this.oc=12500;this.lg=2/3*this.oc;this.Xi=Tj.Ah(125E3);this.Lb=2E5;this.Oh=16;this.Th=this.Uh=this.Fc=this.ze=this.Si=this.Ti=this.xi=this.Ma=this.Fg=this.Bh=0;this.yb=360;this.fh=[];this.Zh=-Infinity;this.ib=!0;this.Zg=0;this.mk=-Infinity;this.nk=Number.NEGATIVE_INFINITY;this.pk=4E5;this.Gd={}}ok.prototype=Object.create(Tj.prototype);f=ok.prototype;
f.constructor=ok;f.create=function(){Pj.prototype.create.call(this);var a=this.Cc=new Wf("worldCamera");a.Pf=6E3;a.Ff=5E7;a.Ga=this.O;S(a,this);t.a.ua=a;a=this.Ed=new Wf("selfCamera");a.Pf=this.Cc.Pf;a.Ff=this.Cc.Ff;a.Ga=this.Cc.O;S(a,t.$d);a=this.Za=new rk(this);a.La=0;S(a,t.$d);a.create();a=new Bk(this.Za);a.Zi=["KeyE","Digit1"];this.Za.Td.push(a);a=new Gk(this.Za);a.Zi=["KeyQ","Digit2"];this.Za.Td.push(a);a=new Fk(this.Za);a.Zi=["KeyC","Digit3"];this.Za.Td.push(a);this.Za.Tg=this.Za.Td[0]};
f.step=function(){Tj.prototype.step.call(this);if(!(this.Yc.Bc||this.Yc.Fl||10>t.h-this.uk)){var a=this.Yc.ia.sb;.015<.2126*a.x+.7152*a.y+.0722*a.z||(a=wb(.1125,.175),this.Yc.Yb=new G(a,a,a),this.Yc.Fl=!0,t.c.ha.get("hit02").play({gain:.5,pitch:2}))}a=this.Yc.Db.Ad;if(t.a.Ad!=a){t.a.Ad=a;var b=t.a.Ue;b.Ui=a.Ih;switch(b.Ui){case 2:t.a.Vd=7;break;case 3:t.a.Vd=9;break;case 3:t.a.Vd=11;break;default:t.a.Vd=0}t.a.tc=a.tc;t.a.Aj();t.a.Pe=a.Pe;t.a.Yj=a.Pe}if(this.ib){for(a=0;a<this.fh.length;a++){b=this.fh[a];
var c=t.h-30-b.jl;0>c||(0<b.ya?(b=b.ya-2*c,0>=b&&this.fh.splice(a--,1)):0>b.ya&&(b=b.ya+2*c,0<=b&&this.fh.splice(a--,1)))}this.ib&&(Le.lock&&(a=1,this.Za.F&&(a=Za(1,this.Za.F.Pi,this.Za.focus)),a=t.Il*a,this.Bh-=Le.vc.x*a,this.Fg+=Le.vc.y*a),this.Fg=Ya(this.Fg,-1073741824,1073741824));a=gc(this.Bh);b=gc(this.Fg)+fc(1.5*this.Si);c=fc(1.5*this.Ti);ud(this.transform);this.transform.rotate(a,0,0);ud(this.Cc.transform);this.Cc.transform.rotate(0,b,c);t.Jk||(this.Cc.transform.rotate((E(w)-.5)*this.Ma,(E(w)-
.5)*this.Ma,0),this.Ma*=.8125);0==(t.h&1)&&(this.Yg()?(a=this.we*Math.PI/this.Oh,this.xi=6E3*Math.abs(Math.sin(a)),this.Uh=Math.sin(a)*Math.PI/210,this.Fc=(1-Math.abs(Math.sin(a)))*Math.PI/210):(this.xi*=.75,this.Fc*=.75,this.Uh*=.75),this.Th-=fc(3),0>this.Th&&(this.Th=0));this.Cc.transform.m31=this.lb+this.Ba-6E3-6E3+this.xi;a=1;this.Za.F&&(a=Za(1,this.Za.F.Pi,this.Za.focus));this.oc=11E3*Za(1,2/3,this.Za.focus);this.Ed.yd=fc(24*a);this.Cc.yd=fc(30*a);a=this.pk;a*=a;for(var d in this.Gd)b=this.Gd[d],
od(this.f,b.f,new G(0,0,0)).Lf()>=a?Ik(b):(b.species.zd.call(b,this),b.ya||b.remove());if(!(2>t.h-this.nk)){d=a;a=null;b=nf(this.f,this.pk);b=q(b);for(c=b.next();!c.done;c=b.next())for(c=c.value.hi.first();null!=c.item;c=c.next)if(c.item instanceof X&&!(c.item.Sd||c.item.Gd||0>=c.item.species.de.call(c.item,this))){var e=od(this.f,c.item.f,new G(0,0,0)).Lf();e<d&&(d=e,a=c.item)}if(a){d=a;d.Sd=this;d.vl=d.f.da();if(d.wl=d.ib)d.ib=!1,Lj.remove(d);d.species.Zd.call(d,d.Sd);this.nk=d.V=t.h}}}};
f.cj=function(a){if(a instanceof Jk){if(a.$k)debugger;a.$k=!0;90>t.h-this.Zh||(t.c.ha.get("hit02").play({pitch:.5,gain:1}),t.c.ha.get(wb("woodSnap01","woodSnap02","woodSnap03")).play({pitch:.5,gain:1}),Kk(this,-60),this.Ma+=fc(6))}};f.Ri=function(){var a=new G(0,0,0);if(!this.ib)return a;Ne.d.KeyW&&--a.z;Ne.d.KeyS&&(a.z+=1);Ne.d.KeyA&&--a.x;Ne.d.KeyD&&(a.x+=1);a.ra(1)?(this.ze+=1/6,1<this.ze&&(this.ze=1)):(this.ze-=1/6,0>this.ze&&(this.ze=0));this.Ti=(5*this.Ti-a.x)/6;this.Si=(5*this.Si-a.z)/6;return a};
f.ek=function(){this.ib&&Ne.p.Space&&(this.Yi=t.h)};function Ck(a){if(!a.Eg){var b=new R;b.set(a.Cc.O);return b}b=od(Ed(a.Cc.O),a.Eg,new G).normalize();var c=new G(b.z,0,-b.x),d=new G(0,1,0);pc(b,c,d).ra(1);pc(d,b,c);var e=new R;e.I=c.x;e.L=c.y;e.M=c.z;e.J=d.x;e.m11=d.y;e.m12=d.z;e.K=b.x;e.m21=b.y;e.m22=b.z;e.H=a.Cc.O.H;e.m31=a.Cc.O.m31;e.m32=a.Cc.O.m32;return e}function Kk(a,b){0>b&&(a.Zh=t.h);b=Ya(a.yb+b,0,360)-a.yb;a.fh.push({jl:t.h,ya:b});a.yb+=b;0>=a.yb&&a.Lh()}
f.Lh=function(){if(this.ib){this.ib=!1;for(var a=q(t.a.ad),b=a.next();!b.done;b=a.next())b=b.value,b.ib&&(b.action.length=0,b.action.unshift("idle"),b.V=NaN,b.path=null);this.Za.remove();this.Za=null;t.a.va=null}};function Y(){Tj.call(this,"mantato");this.mg=150;this.lh=0;this.Ba=30800;this.be=189200;this.Ji=86E3;this.lb=.5*(this.be-2*this.Ba-6E4);this.yj=12E4;this.oc=1/3*14887;this.lg=2/3*this.oc;this.Xi=Tj.Ah(3E5);this.Lb=2E5;this.Vh=-Infinity;this.ib=!0;this.yb=360;this.mb=[];this.se=[];this.Na=new R;this.h=this.ui=this.He=0;this.Ye=new R;this.Fh=0;this.qe=11E4;this.D=t.c.sa.get("physicalCardThreshold");this.ba=t.c.P.get("monsterWalk01");this.color=ad;this.action=["idle"];this.V=NaN;this.Al=this.bi=-Infinity;
this.Gg=0;return this}Y.prototype=Object.create(Tj.prototype);Y.prototype.constructor=Y;Y.Me=12;Y.Ja=NaN;
Y.gf=function(){Y.X=t.c.Ab.get("defaultMaterial");var a=t.c.Ab.get("monsterSkin").da();a.name="monsterSplatter";a.Fa=1;t.c.Ab.add(a);Lk.D=t.c.sa.get("gib");Lk.ba=t.c.P.get("spudGib01");a=[];var b=new R;b.I=1;b.L=0;b.M=-0;b.J=0;b.m11=1;b.m12=0;b.K=0;b.m21=-0;b.m22=1;b.H=0;b.m31=0;b.m32=-0;a.push(b);b=new R;b.I=.9916;b.L=-.1173;b.M=.055;b.J=.1259;b.m11=.9725;b.m12=-.1958;b.K=-.0305;b.m21=.201;b.m22=.9791;b.H=-3498;b.m31=3796;b.m32=6804;a.push(b);b=new R;b.I=.9749;b.L=-.1934;b.M=.1102;b.J=.2213;b.m11=
.8963;b.m12=-.3843;b.K=-.0244;b.m21=.399;b.m22=.9166;b.H=-6400;b.m31=-2683;b.m32=15101;a.push(b);b=new R;b.I=.9601;b.L=-.2246;b.M=.1669;b.J=.2797;b.m11=.7517;b.m12=-.5972;b.K=.0087;b.m21=.62;b.m22=.7845;b.H=-8393;b.m31=-17164;b.m32=25181;a.push(b);b=new R;b.I=.9541;b.L=-.2123;b.M=.2114;b.J=.2942;b.m11=.5306;b.m12=-.795;b.K=.0566;b.m21=.8206;b.m22=.5686;b.H=-9429;b.m31=-39030;b.m32=35202;a.push(b);b=new R;b.I=.9591;b.L=-.1521;b.M=.2388;b.J=.2712;b.m11=.2519;b.m12=-.929;b.K=.0811;b.m21=.9557;b.m22=
.2828;b.H=-9721;b.m31=-68375;b.m32=44142;a.push(b);b=new R;b.I=.9359;b.L=-.2158;b.M=.2785;b.J=.2565;b.m11=-.1246;b.m12=-.9585;b.K=.2415;b.m21=.9685;b.m22=-.0613;b.H=-7782;b.m31=-63561;b.m32=42925;a.push(b);b=new R;b.I=.9573;b.L=-.1734;b.M=.2312;b.J=.1975;b.m11=-.1913;b.m12=-.9614;b.K=.2109;b.m21=.9661;b.m22=-.1489;b.H=-4587;b.m31=-61424;b.m32=39511;a.push(b);b=new R;b.I=.9812;b.L=-.1297;b.M=.143;b.J=.1237;b.m11=-.1466;b.m12=-.9814;b.K=.1482;b.m21=.9807;b.m22=-.1278;b.H=-2376;b.m31=-62808;b.m32=37771;
a.push(b);b=new R;b.I=.9889;b.L=-.134;b.M=.0638;b.J=.053;b.m11=-.0825;b.m12=-.9952;b.K=.1386;b.m21=.9875;b.m22=-.0745;b.H=-104;b.m31=-64955;b.m32=38224;a.push(b);b=new R;b.I=.9803;b.L=-.1963;b.M=.0226;b.J=.0119;b.m11=-.0555;b.m12=-.9984;b.K=.1973;b.m21=.979;b.m22=-.0521;b.H=2290;b.m31=-66053;b.m32=39447;a.push(b);b=new R;b.I=.9587;b.L=-.2839;b.M=.017;b.J=.0035;b.m11=-.0481;b.m12=-.9988;b.K=.2843;b.m21=.9577;b.m22=-.0451;b.H=4830;b.m31=-66621;b.m32=39607;a.push(b);b=new R;b.I=.939;b.L=-.3438;b.M=.0072;
b.J=-.0041;b.m11=-.0323;b.m12=-.9995;b.K=.3439;b.m21=.9385;b.m22=-.0317;b.H=6758;b.m31=-66864;b.m32=40168;a.push(b);b=new R;b.I=.9324;b.L=-.3614;b.M=5E-4;b.J=-.0114;b.m11=-.0308;b.m12=-.9995;b.K=.3612;b.m21=.9319;b.m22=-.0328;b.H=7520;b.m31=-66863;b.m32=40232;a.push(b);Y.ff=a;a=[];b=new R;b.I=1;b.L=0;b.M=-0;b.J=0;b.m11=1;b.m12=-0;b.K=0;b.m21=0;b.m22=1;b.H=0;b.m31=-0;b.m32=0;a.push(b);b=new R;b.I=.9927;b.L=-.0183;b.M=-.119;b.J=.0277;b.m11=.9966;b.m12=.0773;b.K=.1171;b.m21=-.0801;b.m22=.9899;b.H=70;
b.m31=-3027;b.m32=-619;a.push(b);b=new R;b.I=.9816;b.L=-.0289;b.M=-.1886;b.J=.022;b.m11=.999;b.m12=-.0389;b.K=.1895;b.m21=.034;b.m22=.9813;b.H=288;b.m31=-5629;b.m32=253;a.push(b);b=new R;b.I=.9973;b.L=.0022;b.M=.074;b.J=.0054;b.m11=.9948;b.m12=-.1019;b.K=-.0738;b.m21=.1021;b.m22=.992;b.H=-219;b.m31=-2573;b.m32=764;a.push(b);b=new R;b.I=.9877;b.L=-.0202;b.M=-.155;b.J=.0055;b.m11=.9955;b.m12=-.0949;b.K=.1562;b.m21=.0929;b.m22=.9833;b.H=335;b.m31=259;b.m32=689;a.push(b);b=new R;b.I=.9986;b.L=.0123;b.M=
-.0519;b.J=-.0065;b.m11=.9937;b.m12=.1115;b.K=.053;b.m21=-.111;b.m22=.9924;b.H=178;b.m31=-3079;b.m32=-875;a.push(b);b=new R;b.I=.9996;b.L=.007;b.M=-.0256;b.J=-.0062;b.m11=.9994;b.m12=.0327;b.K=.0258;b.m21=-.0326;b.m22=.9991;b.H=110;b.m31=-5793;b.m32=-254;a.push(b);b=new R;b.I=.9893;b.L=-.0894;b.M=.1151;b.J=.0859;b.m11=.9957;b.m12=.0348;b.K=-.1177;b.m21=-.0245;b.m22=.9928;b.H=-944;b.m31=-2885;b.m32=-285;a.push(b);Y.kb=a};
Y.prototype.create=function(){this.transform.rotate(E(w)*Math.PI*2,0,0);Nd(this,37500);lk.push(this);Tj.prototype.create.call(this);t.a.ad.push(this)};Y.prototype.step=function(){Y.prototype[this.action[0]].call(this);this.y=this.f.y+this.lb+this.Ba-this.be+12500;Tj.prototype.step.call(this)};
Y.prototype.Ze=function(){var a=Ed(this.O);a.y+=this.lb+this.Ba-this.be+103400;var b=od(Ed(t.ua.O),a,new G),c=b.ra(1);c=Math.min(1,c/(2*this.be));var d=new G(0,1,0),e=pc(d,b,new G).normalize();pc(b,e,d);var h=t.ua.O.hg(),g=t.ua.O.xe();this.Na.pg(pd(t.ua.O.gg(),e,c).normalize());this.Na.qg(pd(h,d,c).normalize());this.Na.rg(pd(g,b,c).normalize());Fd(this.Na,a);this.ie?this.Ye.set(this.ie[this.h%this.ie.length]):this.Ye.reset();this.ib&&(a=this.O,a=Math.round(4*(Math.atan2(a.K,a.m22)-Math.atan2(t.ua.O.H-
a.H,t.ua.O.m32-a.m32))/Math.PI),0>a&&(a+=8),8<=a&&(a-=8),this.ui=a,this.Ye.rotate(this.ui*Math.PI/4,0,0));Cd(this.Na,this.Ye,this.Ye);this.Na.H+=this.Na.J*this.Fh;this.Na.m31+=this.Na.m11*this.Fh;this.Na.m32+=this.Na.m12*this.Fh;if(this.jh){a=q(this.jh);for(b=a.next();!b.done;b=a.next()){c=b.value;c.Mf.H+=this.f.x;c.Mf.m31+=this.f.y;c.Mf.m32+=this.f.z;b=c.bl;c=Ed(c.Mf);d=this.Ye;e=new R;h=d.I*-d.H+d.L*-d.m31+d.M*-d.m32;g=d.J*-d.H+d.m11*-d.m31+d.m12*-d.m32;var k=d.K*-d.H+d.m21*-d.m31+d.m22*-d.m32,
l=d.J,m=d.K,n=d.L,r=d.m11,p=d.m21,u=d.M,z=d.m12,y=d.m22;e.I=d.I;e.J=n;e.K=u;e.H=h;e.L=l;e.m11=r;e.m21=z;e.m31=g;e.M=m;e.m12=p;e.m22=y;e.m32=k;e.nb(c,c);d={};d.f=c;d.Hb=t.h+1;e=7E3*b;h=ub(2)?-e:e;k=sb()*(180/2147483648);g=Math.cos(k);k=Math.sin(k);d.Aa=new sd;d.Aa.I=g*h;d.Aa.L=k*h;d.Aa.J=-k*e;d.Aa.m11=g*e;this.mb.push(d);this.mb.length>Y.Me&&this.mb.shift();d={};d.f=c;d.Hb=t.h+1;b=7E3*b+3500;c=ub(2)?-b:b;h=sb()*(180/2147483648);e=Math.cos(h);h=Math.sin(h);d.Aa=new sd;d.Aa.I=e*c;d.Aa.L=h*c;d.Aa.J=-h*
b;d.Aa.m11=e*b;this.se.push(d);this.se.length>Y.Me&&this.se.shift()}delete this.jh}};
Y.prototype.Xa=function(){Y.Ja+=2;255<Y.Ja&&(v.clear(v.STENCIL_BUFFER_BIT),Y.Ja=130);t.Sb(1);v.colorMask(!1,!1,!1,!1);v.stencilFunc(v.ALWAYS,Y.Ja-128,255);v.stencilOp(v.KEEP,v.KEEP,v.REPLACE);var a=this.Na.xe(),b=jc(a,Ed(this.Na));t.Cb(mg);t.eb(t.c.sa.get("monoThresholdEffect"));t.Wb(0,t.c.P.get("smokePuff01"));Y.X.bind();t.xb(0);t.$b(0);t.D.N("color",ad);for(var c=q(this.mb),d=c.next();!d.done;d=c.next()){var e=d.value;d=this.Ye.nb(e.f,new G);if(!(0>jc(d,a)-b)){var h=4>t.h-e.Hb?1.4:1;e=(new sd).set(e.Aa);
e.I*=h;e.L*=h;e.J*=h;e.m11*=h;e=td(this.Na,e,new R);Fd(e,d);t.D.N("modelMatrix",e);v.drawArrays(v.TRIANGLE_FAN,ng(0,1),4)}}t.Sb(2);v.colorMask(!0,!0,!0,!0);v.stencilFunc(v.GEQUAL,Y.Ja-1,127);v.stencilOp(v.KEEP,v.KEEP,v.REPLACE);t.h==this.ae+1?this.D=t.c.sa.get("flashCardThreshold"):t.h==this.ae+3&&(this.D=t.c.sa.get("physicalCardThreshold"));t.Cb(mg);t.eb(this.D);t.Wb(0,this.ba);Y.X.bind();t.D.N("ambientLight",this.ia.sb,!1);t.xb(0);t.$b(0);t.D.N("color",this.color);a=new R;a.set(this.Na);b=this.qe;
a.I*=b;a.L*=b;a.M*=b;a.J*=-b;a.m11*=-b;a.m12*=-b;t.D.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,ng(this.ui*this.He+this.h,this.wb),4);if("flashCardThreshold"!=this.D.name)for(t.Sb(0),v.stencilFunc(v.EQUAL,Y.Ja-1,255),v.stencilOp(v.KEEP,v.KEEP,v.KEEP),a=this.Na.xe(),b=jc(a,Ed(this.Na)),t.Cb(mg),t.eb(t.c.sa.get("monoEffect")),t.Wb(0,t.c.P.get("splatter01")),t.c.Ab.get("monsterSplatter").bind(),t.xb(1),t.$b(0),t.D.N("ambientLight",this.ia.sb,!1),t.D.N("color",Lk.xd),c=q(this.se),d=c.next();!d.done;d=
c.next())e=d.value,d=this.Ye.nb(e.f,new G),0>jc(d,a)-b||(h=4>t.h-e.Hb?1.4:1,e=(new sd).set(e.Aa),e.I*=h,e.L*=h,e.J*=h,e.m11*=h,e=td(this.Na,e,new R),Fd(e,d),t.D.N("modelMatrix",e),v.drawArrays(v.TRIANGLE_FAN,ng(0,1),4))};
Y.prototype.idle=function(){isNaN(this.V)&&(this.V=t.h,this.ba=t.c.P.get("monsterWalk01"),this.wb=64,this.He=8,this.ie=Y.kb);var a=t.h-this.V;this.h=0;0==a%30&&(pk(this,t.a.va.f),this.action[0]="rush",this.action.unshift("alert"),this.V=NaN,this.path=null);this.h=(Math.floor(a/8)%3+6)%8};
Y.prototype.wander=function(){isNaN(this.V)&&(this.V=t.h,this.ba=t.c.P.get("monsterWalk01"),this.wb=64,this.He=8,this.ie=Y.kb,this.oc=1/3*14887);var a=t.h-this.V;if(!this.path){var b=vb(Ni.bj),c=tb(b.G-b.C)+b.C;b=tb(b.v-b.s)+b.s;Mk(this,c,b)}0==a%30&&(pk(this,t.a.va.f),this.action[0]="rush",this.action.unshift("alert"),this.V=NaN,this.path=null);this.h=Math.floor(a/3)%8};
Y.prototype.alert=function(){isNaN(this.V)&&(this.V=t.h,this.ba=t.c.P.get("monsterWalk01"),this.wb=64,this.He=8,this.ie=Y.kb);var a=t.h-this.V;this.h=0;a==18-0*t.Da.difficulty&&(this.action.shift(),this.Gg&&(this.action.unshift("attack"),this.V=NaN))};Y.prototype.hit=function(){isNaN(this.V)&&(this.V=t.h,this.ba=t.c.P.get("monsterWalk01"),this.wb=64,this.He=8,this.ie=Y.kb,this.tl=tb(8));var a=t.h-this.V;this.h=(this.tl+Math.floor(a/2))%8;240==a&&(this.action.shift(),this.V=NaN)};
Y.prototype.attack=function(){isNaN(this.V)&&(this.V=t.h,this.ba=t.c.P.get("monsterWalk01"),this.wb=64,this.He=8,this.ie=Y.kb,pk(this,t.a.va.f));var a=t.h-this.V;this.h=Math.floor(a/6)%8;if(15==a){var b=new Jk;b.zk=this;--this.Gg;b.f.set(this.f.x,this.f.y,this.f.z);var c=t.a.va.f.da();c.y+=t.a.va.lb+t.a.va.Ba-12500;b.w.x=c.x-this.f.x;b.w.y=c.y-this.f.y;b.w.z=c.z-this.f.z;b.w.ra(28E3);Fd(b.transform,b.f);S(b,t.cf);b.create();b.uf.push(this)}45==a&&(this.action.shift(),this.V=NaN)};
Y.prototype.rush=function(){isNaN(this.V)&&(this.V=t.h,this.ba=t.c.P.get("monsterWalk01"),this.wb=64,this.He=8,this.ie=Y.kb,this.oc=7443.5,this.oc*=1+1/3*(t.Da.difficulty-1));var a=t.h-this.V;t.h<this.ul+12||Mk(this,t.a.va.f.z,t.a.va.f.x);0<a&&0==a%6&&this.Gg&&(this.action.unshift("attack"),this.V=NaN);this.h=Math.floor(a/2)%8};
Y.prototype.death=function(){isNaN(this.V)&&(this.V=t.h,this.ba=t.c.P.get("monsterDeath01"),this.wb=16,this.He=0,this.ie=Y.ff);var a=t.h-this.V;4<=a&&(a-=4);this.h=Math.floor(a/4);13<this.h&&(this.h=13);6==a&&t.a.Yk();20==a&&(this.Fh=.5*-this.qe);24==a&&t.c.ha.get(wb("bodyThud01","bodyThud02")).play({gain:.5});300<=a&&this.remove()};function Mk(a,b,c){t.h!=Oi&&(Oi=a.ul=t.h,Pi=300,a.path=Ri(a.f.z,a.f.x,b,c))}
Y.prototype.Ri=function(){var a=new G;if(!this.path||"alert"==this.action[0]||"hit"==this.action[0]||"attack"==this.action[0])return a;for(var b,c;;){b=this.path[0];c=b.getParameter(this.f.z,this.f.x);if(c<b.length)break;this.path.shift();if(!this.path.length)return this.path=null,a}b=b.evaluate(c+1E5);a.z=b.x-this.f.z;a.x=b.y-this.f.x;pk(this,new G(b.y,0,b.x));return a};Y.prototype.wf=function(a){this.ib&&(this.ae=t.h,this.w.x=0,this.w.z=0,this.yb-=a,0>=this.yb&&this.Lh())};
Y.prototype.Lh=function(){this.ib&&(this.ib=!1,this.action=["death"],this.V=NaN,t.a.Pe--,this.path=null,mk.call(this),Lj.remove(this))};Y.prototype.remove=function(){this.sg&&this.sg.remove();var a=t.a.ad.indexOf(this);0<=a&&t.a.ad.splice(a,1);Tj.prototype.remove.call(this);this.ib&&(mk.call(this),t.a.Pe--)};function pk(a,b){b=od(b,a.f,new G(0,0,0));b.y=0;b.ra(1);a.transform.I=b.z;a.transform.M=-b.x;a.transform.K=b.x;a.transform.m22=b.z}
function zk(a,b,c){a.ib&&("attack"==a.action[0]&&a.action.shift(),"hit"!=a.action[0]&&a.action.unshift("hit"),a.V=NaN,a.Vh=t.h);var d=c*(E(w)+1),e=new Lk;e.frame=tb(16);e.ab=12E3*(E(w)+1);e.ab*=c;e.f.set(0,0,5E4);b.nb(e.f,e.f);e.w.x=5E3*(2*E(w)-1);e.w.y=5E3*(2*E(w)-1);e.w.z=2E4*(E(w)+1);Dd(b,e.w,e.w);e.Ee=fc(60*(.25+E(w)));ub(2)&&(e.Ee=-e.Ee);S(e,t.cf);e.create();e=new Lk;e.frame=tb(16);e.ab=8E3*(E(w)+1);e.ab*=c;e.f.set(0,0,5E4);b.nb(e.f,e.f);e.w.x=5E3*(2*E(w)-1);e.w.y=5E3*(2*E(w)-1);e.w.z=2E4*(E(w)+
1);Dd(b,e.w,e.w);e.bg=Lk.xd;S(e,t.cf);e.create();c=Math.sqrt(3*c)+E(w)-.5;for(e=0;e<c;e++){var h=new Lk;h.$h=120;h.frame=tb(16);h.ab=12E3;h.f.set(0,0,5E4);b.nb(h.f,h.f);h.w.x=2*E(w)-1;h.w.y=2*E(w)-1;h.w.z=2*E(w);h.w.ra(1E4*(E(w)+1));h.w.y+=6E3*E(w);Dd(b,h.w,h.w);h.Ee=fc(60*(.25+E(w)));ub(2)&&(h.Ee=-h.Ee);ub(2)&&(h.bg=Lk.xd);S(h,t.cf);h.create()}pk(a,Ed(t.ua.O));Od(a);a.jh||(a.jh=[]);b.H-=a.f.x;b.m31-=a.f.y;b.m32-=a.f.z;a.jh.push({Mf:b,bl:d})}
function Jk(){Pj.call(this,"potato");this.Lb=1E5;this.Ba=12500;this.lb=0;this.ec=!1;return this}Jk.prototype=Object.create(Pj.prototype);f=Jk.prototype;f.constructor=Jk;f.create=function(){this.V=t.h;this.Na=new R;this.h=0;this.wb=16;this.qe=25E3;this.D=t.c.sa.get("physicalCardThreshold");this.ba=t.c.P.get("Potato");Nd(this,18750);Pj.prototype.create.call(this)};f.Bk=function(){this.remove()};
f.Ze=function(){var a=Ed(this.O),b=od(Ed(t.ua.O),a,new G),c=b.ra(1);c=Math.min(1,c/(4*this.Ba));var d=new G(0,1,0),e=pc(d,b,new G).normalize();pc(b,e,d);var h=t.ua.O.hg(),g=t.ua.O.xe();this.Na.pg(pd(t.ua.O.gg(),e,c).normalize());this.Na.qg(pd(h,d,c).normalize());this.Na.rg(pd(g,b,c).normalize());Fd(this.Na,a);a=t.h-this.V;this.h=3*Math.floor(a/2);this.h%=this.wb;0==Math.floor(a/2)%13?(this.D=t.c.sa.get("flashCardThreshold"),this.color=ad):1==Math.floor(a/2)%13?(this.D=t.c.sa.get("flashCardThreshold"),
this.color=bd):(this.D=t.c.sa.get("physicalCardThreshold"),this.color=ad)};f.Xa=function(){this.Ze();t.Cb(mg);t.eb(this.D);t.Wb(0,this.ba);Y.X.bind();t.D.N("ambientLight",this.ia.sb,!1);t.xb(0);t.$b(0);t.D.N("color",this.color);var a=new R;a.set(this.Na);var b=this.qe;a.I*=b;a.L*=b;a.M*=b;a.J*=-b;a.m11*=-b;a.m12*=-b;t.D.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,ng(this.h,this.wb),4)};f.remove=function(){this.zk.Gg+=1;Pj.prototype.remove.call(this)};
function Lk(){t.Wa.call(this,"SpudGib");jg.call(this);this.wb=16;this.frame=0;this.ab=25E3;this.scale=1;this.Gf=ub(2);this.Pc=gc(sb());this.Ee=0;this.Lb=2*this.ab;this.V=this.sj=t.h+4;this.w=new G(0,0,0);this.$h=600;this.bg=Lk.bg;this.xd=Lk.xd}Lk.prototype=Object.create(t.Wa.prototype);Lk.prototype.constructor=Lk;Lk.bg=new M(191,158,101,255);Lk.xd=new M(255,255,95,255);
Lk.prototype.create=function(){this.transform.H=this.f.x;this.transform.m31=this.f.y;this.transform.m32=this.f.z;t.Wa.prototype.create.call(this);Nk(this)};function Nk(a){a.oh=t.h;a.ce=a.f.da();var b=mf(a.ce,a.w);b?(a.wg=b.p,a.uh=b.n,a.ef=Math.ceil(t.h+b.t),a.xg=b.item):a.ef=Number.POSITIVE_INFINITY}
Lk.prototype.step=function(){this.xg&&this.xg.fd>this.oh&&Nk(this);if(t.h<this.ef){this.tj&&this.tj.fd>this.oh&&(this.tj=null,this.V=t.h,this.w.set(0,0,0),this.mi=!1,Nk(this));var a=t.h-this.V;0>a||(this.mi?(this.f.y=this.ce.y+this.w.y*a,this.transform.m31=this.f.y):(this.f.set(this.ce.x+this.w.x*a,this.ce.y+.5*(2*this.w.y+Kj.y*a)*a,this.ce.z+this.w.z*a),this.transform.H=this.f.x,this.transform.m31=this.f.y,this.transform.m32=this.f.z,t.h%3||(this.Pc+=this.Ee)))}else t.h==this.ef&&(this.f.set(this.wg.x,
this.wg.y,this.wg.z),this.tj=this.xg,this.transform.H=this.f.x,this.transform.m31=this.f.y,this.transform.m32=this.f.z,this.bg==this.xd&&(Ag(t.a.Tj,this.wg,this.uh,gc(sb()),this.ab*this.scale*2.5,tb(4),4),this.remove()),-1==this.uh.y?(this.ce=this.f.da(),this.V=t.h+180+tb(360),this.w.set(0,0,0),this.Ee=0,this.mi=!1,this.oh=t.h,(a=hf(this.ce,this.w))?(this.wg=a.p,this.uh=a.n,this.ef=Math.ceil(t.h+a.t),this.xg=a.item):this.ef=Number.POSITIVE_INFINITY):0==this.uh.y?(this.ce=this.f.da(),this.V=t.h+180+
tb(360),this.w.set(0,-500,0),this.mi=!0,this.oh=t.h,(a=hf(this.ce,this.w))?(this.wg=a.p,this.uh=a.n,this.ef=Math.ceil(t.h+a.t),this.xg=a.item):this.ef=Number.POSITIVE_INFINITY):(this.ce=this.f.da(),this.V=Number.POSITIVE_INFINITY,this.w.set(0,0,0),this.Ee=0,this.mi=!1,this.oh=t.h,this.ef=Number.POSITIVE_INFINITY,this.xg=null));t.h-this.sj>this.$h&&this.remove();t.Wa.prototype.step.call(this)};
Lk.prototype.Xa=function(){kg.call(this,this.O);t.Cb(mg);t.eb(Lk.D);t.Wb(0,Lk.ba);t.xb(0);t.Sb(2);t.$b(0);t.D.N("modelMatrix",this.O);t.D.N("color1",this.bg);t.D.N("color2",this.xd);t.D.N("ambientLight",this.ia.sb);v.drawArrays(v.TRIANGLE_FAN,ng(this.frame,this.wb),4);t.Wa.prototype.Xa.call(this)};function X(a){Pj.call(this,"loot");this.species=a;this.ya=a.ya;this.Ba=37500;this.lb=0;this.lh=.8;this.Hb=t.h+tb(600);this.ib=!0}X.prototype=Object.create(Pj.prototype);X.prototype.constructor=X;
X.Sk=function(){var a=[t.c.ha.get("coinPurse01"),t.c.ha.get("coinPurse02"),t.c.ha.get("coinPurse03"),t.c.ha.get("coinPurse04")],b=[t.c.ha.get("ingot01"),t.c.ha.get("ingot02")],c=[t.c.ha.get("gem01"),t.c.ha.get("gem02"),t.c.ha.get("gem03")],d=[t.c.ha.get("crumplePaper01"),t.c.ha.get("crumplePaper02")],e={Sa:t.c.nc.get("moneyNugget"),ya:1,ha:c,de:X.kb,Zd:X.Ja,zd:X.S};a={Sa:t.c.nc.get("moneyCoin"),ya:5,ha:a,de:X.kb,Zd:X.Ja,zd:X.S};d={Sa:t.c.nc.get("moneyBundle"),ya:25,ha:d,de:X.kb,Zd:X.Ja,zd:X.S};b=
{Sa:t.c.nc.get("moneyBar"),ya:125,ha:b,de:X.kb,Zd:X.Ja,zd:X.S};var h={Sa:t.c.nc.get("gemRuby"),ya:2,ha:c,de:X.kb,Zd:X.Ja,zd:X.S},g={Sa:t.c.nc.get("gemEmerald"),ya:10,ha:c,de:X.kb,Zd:X.Ja,zd:X.S};c={Sa:t.c.nc.get("gemSapphire"),ya:50,ha:c,de:X.kb,Zd:X.Ja,zd:X.S};X.Dc=[e,h,a,a,a,a,a,g,d,c,b]};X.Vk=function(a,b){for(;a;){for(var c=0;c<X.Dc.length&&!(X.Dc[c].ya>a);)c++;c=X.Dc[c-1];a-=c.ya;b.push(new X(c))}};
X.prototype.create=function(){this.V=t.h;this.species.jd&&(t.a.Re[this.species.jd.name]+=this.ya);this.Na=new R;this.h=0;this.wb=16;this.D=t.c.sa.get("physicalCardThreshold");this.transform.scale(1,1,1);if(this.species.Sa){var a=this.Sa=new dg(this.species.Sa);a.Ga=this.O;S(a,this);a.create();this.Lb=1*a.src.Lb;Md(a,this.ia)}Nd(this,18E3);Pj.prototype.create.call(this)};
X.prototype.step=function(){if(this.Sa){var a=t.h-this.Hb;a=3*Math.floor(a/3);ud(this.Sa.transform);this.Sa.transform.rotate((a+.5*Math.sin(a))/6,Math.PI/4,0)}this.Gd?t.Wa.prototype.step.call(this):(this.ib?(60==t.h-this.Hb&&(this.ib=!1,Lj.remove(this)),Pj.prototype.step.call(this)):(this.Sd&&(a=od(new G(this.Sd.f.x,this.Sd.f.y,this.Sd.f.z),this.f,new G(0,0,0)),a.Lf()<Math.pow(5E4,2)?(a=this.Sd,this.Sd=null,this.species.zd.call(this,a),vb(this.species.ha).play({gain:.5}),a.mk=t.h,this.ya?(this.Gd=
a,a.Gd[this.index]=this,qd(this.vl,this.f),this.wl&&(this.Hb=t.h,this.ib=!0,this.w.set(0,0,0),this.gb.set(0,0,0),Lj.add(this)),this.La=0,this.sg.La=0):this.remove()):(a.y*=5,a.ra(25E3),this.f.x+=a.x,this.f.y+=a.y,this.f.z+=a.z),this.transform.H=this.f.x,this.transform.m31=this.f.y,this.transform.m32=this.f.z),t.Wa.prototype.step.call(this)),this.Sa&&X.Rk(this))};
X.prototype.remove=function(){this.Gd&&Ik(this);t.Wa.prototype.remove.call(this);Lj.remove(this);this.species.jd&&(t.a.Re[this.species.jd.name]-=this.ya);this.Sa&&this.Sa.remove()};X.prototype.wk=function(){this.Sd||this.remove()};X.Rk=function(a){a=a.ia.sb;a.x=Math.min(1,6*a.x);a.y=Math.min(1,6*a.y);a.z=Math.min(1,6*a.z)};
X.prototype.Ze=function(){var a=Ed(this.O);this.ya<this.species.ya&&(a.y-=21875);var b=od(Ed(t.ua.O),a,new G),c=b.ra(1);c=Math.min(1,c/(4*this.Ba));var d=new G(0,1,0),e=pc(d,b,new G).normalize();pc(b,e,d);var h=t.ua.O.hg(),g=t.ua.O.xe();this.Na.pg(pd(t.ua.O.gg(),e,c).normalize());this.Na.qg(pd(h,d,c).normalize());this.Na.rg(pd(g,b,c).normalize());Fd(this.Na,a);this.h=this.Sd?Math.floor(Math.min(15,(t.h-this.V)/2+8)):this.ya<this.species.ya?12:Math.floor((t.h-this.V)/3)%8};
X.prototype.Xa=function(){this.Ze();t.Cb(mg);t.eb(this.D);t.Wb(0,this.species.rj);Y.X.bind();t.D.N("ambientLight",this.ia.sb,!1);t.xb(0);t.$b(0);t.D.N("color",ad);var a=new R;a.set(this.Na);var b=this.species.qe;a.I*=b;a.L*=b;a.M*=b;a.J*=-b;a.m11*=-b;a.m12*=-b;t.D.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,ng(this.h,this.wb),4)};X.$f=function(a){a=q(a.Za.Td);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b instanceof this.species.jd)return Math.min(b.pe-uk(b)-b.mf,this.ya);return 0};
X.ff=function(a){a=q(a.Za.Td);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b instanceof this.species.jd){b.mf+=this.ya;break}};X.Me=function(a){a=q(a.Za.Td);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b instanceof this.species.jd){var c=Math.min(this.ya,b.pe-uk(b));b.Ea+=c;b.mf-=c;this.ya-=c;t.a.Re[b.constructor.name]-=c;t.a.Zk(this.species,c);t.a.Id()}};X.kb=function(){return this.ya};X.Ja=function(){};X.S=function(){t.a.tc-=this.ya;this.ya=0;0>t.a.tc&&(t.a.tc=0);t.a.Aj()};
function Ik(a){for(var b=q(a.Gd.Za.Td),c=b.next();!c.done;c=b.next())c=c.value,c instanceof a.species.jd&&(c.mf-=a.ya);a.La=-1;a.sg.La=-1;delete a.Gd.Gd[a.index];a.Gd=null}X.fm=function(a){return Math.min(360-a.yb-a.Zg,this.ya)};X.em=function(a){a.Zg+=this.species.ya};X.cm=function(a){Kk(a,this.species.ya);a.Zg-=this.species.ya};function Ek(a){t.za.call(this,a);jg.call(this);this.D=t.c.sa.get("physicalCard");this.ba=t.c.P.get("smokePuff02");this.X=Ek.X;this.color=new M(Ek.color.r,Ek.color.Ya,Ek.color.ka,255);this.frame=0;this.wb=16;this.w=new G;this.gb=new G;this.scale=1;this.Pc=gc(sb());this.Hb=t.h}Ek.prototype=Object.create(t.za.prototype);Ek.prototype.constructor=Ek;Ek.X=new Qd;Ek.X.Fa=2;Ek.color=new M(144,144,144,255);
Ek.prototype.step=function(){var a=t.h-this.Hb;a=Math.pow(a/540,.625);this.frame=Math.floor(9*a);this.alpha=.25*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.Ia=this.alpha*Ek.color.Ia&255;this.transform.m31+=200;this.w.scale(.8125);a=new G(.5*this.gb.x+.5*this.w.x,.5*this.gb.y+.5*this.w.y,.5*this.gb.z+.5*this.w.z);this.transform.H+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.gb.set(this.w.x,this.w.y,this.w.z);t.za.prototype.step.call(this)};
Ek.prototype.Xa=function(){lg.call(this);t.za.prototype.Xa.call(this)};function yk(a){t.za.call(this,a);jg.call(this);this.D=t.c.sa.get("physicalCard");this.ba=t.c.P.get("smokePuff02");this.X=Ek.X;this.color=new M(yk.color.r,yk.color.Ya,yk.color.ka,255);this.frame=0;this.wb=16;this.w=new G;this.gb=new G;this.scale=1;this.Pc=gc(sb());this.ia={xa:4294967295,sb:new G(1,1,1)};this.Hb=t.h}yk.prototype=Object.create(t.za.prototype);yk.prototype.constructor=yk;yk.color=new M(212,212,212,255);
yk.prototype.step=function(){var a=t.h-this.Hb;a/=this.$h;a=Math.pow(a,.75);this.frame=Math.floor(9*a);this.alpha=.375*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.Ia=this.alpha*yk.color.Ia&255;this.w.scale(.8125);var b=new G(.5*this.gb.x+.5*this.w.x,.5*this.gb.y+.5*this.w.y,.5*this.gb.z+.5*this.w.z);this.transform.H+=b.x;this.transform.m31+=b.y;this.transform.m32+=b.z;this.gb.set(this.w.x,this.w.y,this.w.z);if(0==a||0==t.h%4)a=Ed(this.transform),(b=hf(a,new G(0,-1E8,0),Zf))&&(b=Ue(b.item.aa))&&
Vf(a,b,this.ia.sb);t.za.prototype.step.call(this)};yk.prototype.Xa=function(){lg.call(this);t.za.prototype.Xa.call(this)};function Ok(a){t.za.call(this,a);jg.call(this);this.D=t.c.sa.get("spray");this.ba=t.c.P.get("spray01");this.X=Ok.X;this.color=new M(Lk.xd.r,Lk.xd.Ya,Lk.xd.ka,255);this.w=new G;this.gb=new G;this.scale=1;this.Pc=gc(sb());this.Hb=t.h}Ok.prototype=Object.create(t.za.prototype);Ok.prototype.constructor=Ok;Ok.X=new Qd;Ok.X.Fa=0;
Ok.prototype.step=function(){var a=t.h-this.Hb;a/=this.rm;this.scale=15*a;1<=a&&this.remove();this.color.Ia=254*(a+1)&255;this.w.add(Kj);a=new G(.5*this.gb.x+.5*this.w.x,.5*this.gb.y+.5*this.w.y,.5*this.gb.z+.5*this.w.z);this.transform.H+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.gb.set(this.w.x,this.w.y,this.w.z);t.za.prototype.step.call(this)};Ok.prototype.Xa=function(){lg.call(this);t.za.prototype.Xa.call(this)};
function qk(a,b){t.za.call(this,b);jg.call(this);this.D=t.c.sa.get("image");this.ba=t.c.P.get("explode");this.X=qk.X;this.color=new M(255,255,255,255);this.scale=1;this.ab=a;this.Gf=ub(2);this.Pc=gc(sb());this.Hb=t.h+1;this.wb=16}qk.prototype=Object.create(t.za.prototype);qk.prototype.constructor=qk;qk.X=new Qd;qk.X.Fa=1;
qk.prototype.step=function(){var a=t.h-this.Hb;50<=a&&this.remove();this.scale+=.02;this.transform.m31+=3E3*(1-a/50);this.frame=Math.floor(16*(1-Math.pow(.9375,a)));a=255*(1-(a-15)/35);255<a&&(a=255);a&=255;this.color.r=a;this.color.Ya=a;this.color.ka=a;this.color.Ia=a;t.za.prototype.step.call(this)};qk.prototype.Xa=function(){lg.call(this);t.za.prototype.Xa.call(this)};
function xk(a,b){t.za.call(this,b);jg.call(this);this.D=t.c.sa.get("image");this.ba=t.c.P.get("bulletFlare01");this.X=xk.X;this.color=new M(255,255,255,0);this.scale=1;this.ab=a;this.Gf=ub(2);this.Pc=gc(sb());this.Hb=t.h+1;this.wb=4}xk.prototype=Object.create(t.za.prototype);xk.prototype.constructor=xk;xk.X=new Qd;xk.X.Fa=1;xk.prototype.step=function(){var a=t.h-this.Hb;0<=a&&(3<=a&&this.remove(),this.scale+=.25);this.frame=Math.floor(a);t.za.prototype.step.call(this)};
xk.prototype.Xa=function(){lg.call(this);t.za.prototype.Xa.call(this)};t.a=new t.Node("game");t.ck=new t.Node("gameDraw");t.a.Lk=0;t.a.Ad=null;t.a.Vd=0;t.a.rk=0;t.a.qk=0;t.a.ad=[];t.a.Pg=[];t.a.Ig=[];t.a.$i=0;t.a.eh=0;t.a.jk=NaN;t.a.tc=Infinity;t.a.Pe=NaN;t.a.Yj=0;t.a.Re={};t.a.Jj=[];t.a.hf=!0;t.a.Id=function(){var a=t.a.va.Za.F,b=-170,c=119;!(a instanceof Gk)&&a instanceof Bk&&(b+=6,c-=10);var d=uk(a).toLocaleString("en-US");var e=t.c.P.get("HUDNumerals24Bold");d=t.Qh(e,d,0);d.color=bd;d.x=b;d.y=c;d.x-=d.width*d.Vf.width;a.Ai=d;t.a.hf=!0};
t.a.Aj=function(){var a=t.a.tc;var b=t.c.P.get("HUDNumeralsSilverAndGold");if(a)a=t.Qh(b,a.toLocaleString("en-US"),0);else{a=[];var c=b.dk("1");a.width=b.Rd[c]+b.If[c];a.height=b.ye;a.Vf=b}a.color=ad;a.x=209;a.y=-127;a.x-=a.width*a.Vf.width;t.a.zh=a;t.a.hf=!0};t.a.wm=function(){};
t.a.Zk=function(a,b){if(b){for(var c=null,d=0,e=q(t.a.Ne),h=e.next();!h.done;h=e.next())if(h=h.value,h.species!=a)d=h.y+h.species.jf.height;else{c=h;break}c||(c={},c.species=a,c.ya=0,c.y=d,t.a.Ne.push(c));c.ya+=b;c.V=t.h;a=t.c.P.get("HUDNumerals14Bold");c.Ij=t.Qh(a,c.ya.toLocaleString("en-US"),0);t.a.hf=!0}};t.a.zl=function(){for(var a=0,b=0;b<t.a.Ne.length;b++){var c=t.a.Ne[b];240<=t.h-c.V?(t.a.Ne.splice(b--,1),t.a.hf=!0):(c.y=Math.max(c.y-.5,a),a+=c.species.jf.height)}};
t.a.Yk=function(){t.a.$i+=1;t.a.eh+=1};t.a.yl=function(){0>=t.a.eh||t.h<t.a.jk+2||(t.a.eh--,t.a.jk=t.h,t.c.ha.get("hit02").play({gain:1}),t.a.Jj=t.Qh(t.c.P.get("HUDNumerals24Bold"),(t.a.$i-t.a.eh).toLocaleString("en-US"),1),t.a.Jj.om=t.h,t.a.hf=!0)};t.a.gm=function(a){var b=document.createElement("div");b.style.position="relative";b.style.padding="8px";b.style.marginTop="4px";b.style.fontSize="14pt";b.style.background="#2c80fd";b.style.boxShadow="-2px 5px 0px black";b.innerHTML=a;b.sj=t.h;t.a.Nk.appendChild(b)};
t.a.vm=function(a){t.a.Nk.removeChild(a)};
t.c.ready=function(){t.a.Nk=document.getElementById("tutorialDiv");var a=t.c.P.get("HUDNumerals10");a.Rd=[7,5,7,7,8,7,7,7,7,7,3];a.ye=10;a.jg=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.If=[0,1,0,0,-1,0,0,0,0,0,0];t.Wh(a);a=t.c.P.get("HUDNumerals14Bold");a.Rd=[9,6,9,9,9,9,9,9,9,9,4];a.ye=14;a.jg=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.If=[0,1,0,0,0,0,0,0,0,0,0];t.Wh(a);a=t.c.P.get("HUDNumerals24Bold");a.Rd=[13,9,13,13,14,13,13,13,13,13,5];a.ye=23;a.jg=[0,1,0,0,-1,0,0,0,0,0,0];a.If=[0,3,0,0,0,0,0,0,0,0,0];t.Wh(a);
a=t.c.P.get("HUDNumeralsSilverAndGold");a.Rd=[9,6,9,9,9,9,9,9,9,9,4,6,0];a.ye=14;a.jg=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,0];a.If=[0,1,0,0,0,0,0,0,0,0,0,-1,4];t.Wh(a);t.Gk=S(new t.Node("scnBuilderMeshes"),t.Ic);t.cf=S(new t.Node("scnWorld"),t.Ic);t.Tf=S(new t.Node("scnDoors"),t.cf);t.Tf.La=0;t.af=S(new t.Node("scnSpuds"),t.Ic);t.af.La=0;t.Ol=S(new t.Node("scnLoot"),t.Ic);t.ph=S(new t.Node("scnShadows"),t.Ic);t.ph.La=0;t.bf=S(new t.Node("scnWindowPanes"),t.Ic);t.bf.La=0;t.Dd=S(new t.Node("scnEffects"),
t.Ic);t.Dd.La=0;t.$d=S(new t.Node("scnSelf"),t.Ic);t.$d.La=0;t.Nl=S(new t.Node("scnHUD"),t.Ic);S(Mj,t.Ic);S(t.a,t.Ic);t.Vg=1E3/60;t.h=0;a=[new G(135/255,223/255,206/255),new G(230/255,230/255,172/255),new G(135/255,223/255,206/255),new G(135/255,223/255,206/255),new G(0,213/255,1),new G(135/255,223/255,206/255)];t.a.hm=a;for(var b=new Float32Array(36),c=0;c<a.length;c++)a[c].x=.1*a[c].x+.65,a[c].y=.1*a[c].y+.65,a[c].z=.1*a[c].z+.65,a[c].scale(.75),b[3*c]=a[c].x,b[3*c+1]=a[c].y,b[3*c+2]=a[c].z;t.eb(t.c.sa.get("physical"));
t.D.N("ambient",b);t.D.N("clipY",Infinity,!1);t.eb(t.c.sa.get("imageContrast"));t.D.N("contrastOffset",0);t.D.N("contrastScale",1.0625);t.Cb(re);me(re,re.wh.length*re.Ib);re.upload(re.wh);t.De(te);me(te,2*te.elements.length);te.upload(te.elements);t.a.Ue=new Qe;t.c.Ab.get("gemRuby").Fa=0;t.c.Ab.get("gemEmerald").Fa=0;t.c.Ab.get("gemSapphire").Fa=0;t.c.Ab.get("bulbGreen").Fa=0;Y.gf();a=fc(5);Fk.Sc=[];for(b=0;9>b;b++)c=b,c*=1/9,c=Math.pow(c,.5),Fk.Sc[b]=c*a;Bk.Ej=t.c.P.get("ViewCarbine");Bk.kj=t.c.P.get("HUDReticleCarbine");
Bk.Gb=t.c.P.get("HUDItemCarbine");Bk.Gb.offsetY=-12;Fk.Ej=t.c.P.get("ViewShotgun");Fk.kj=t.c.P.get("HUDReticleShotgun");Fk.Gb=t.c.P.get("HUDItemShotgun");Fk.Gb.offsetY=-10;Gk.Ej=t.c.P.get("ViewRevolver");Gk.kj=t.c.P.get("HUDReticleRevolver");Gk.Gb=t.c.P.get("HUDItemRevolver");Gk.Gb.offsetY=-9;a=[t.c.ha.get("ShotgunShut01")];Bk.Bi={rj:t.c.P.get("CarbineMag"),jf:t.c.P.get("HUDCartridgeCarbine"),qe:5E4,ha:a,de:X.$f,Zd:X.ff,zd:X.Me,jd:Bk,ya:100};Fk.Bi={rj:t.c.P.get("ShotshellBox"),jf:t.c.P.get("HUDCartridgeShotgun"),
qe:5E4,ha:a,de:X.$f,Zd:X.ff,zd:X.Me,jd:Fk,ya:8};Gk.Bi={rj:t.c.P.get("RevolverLoader"),jf:t.c.P.get("HUDCartridgeRevolver"),qe:25E3,ha:a,de:X.$f,Zd:X.ff,zd:X.Me,jd:Gk,ya:6};X.Sk();a=t.a.Tj=new yg;a.D=t.c.sa.get("splatter");a.ba=t.c.P.get("splatter02");a.color=Lk.xd;a.Fa=1;a=t.a.Sj=new yg;a.D=t.c.sa.get("image");a.ba=t.c.P.get("bulletPock01");a.color=new M(255,255,255,128);a.Fa=2;a=new Qd;a.name="flashWhite";a.Md=ad;a.Fa=0;t.c.Ab.add(a);a=new Qd;a.name="flashRed";a.Md=gd;a.Fa=0;t.c.Ab.add(a);t.a.Cl();
t.a.Aj();t.a.Ne=[];S(t.ck,t.Ic);t.start()};
t.a.Cl=function(){var a=performance.now();for(t.ma.insertAdjacentHTML("beforeend","Generating world... ");aj(););Ui=!0;t.ma.insertAdjacentHTML("beforeend","done ("+t.ma.od.format(performance.now()-a)+" ms).<br />");t.ma.insertAdjacentHTML("beforeend","<br />Ready. Click to play!<br />");t.a.Vd=0;t.a.qk=3;t.a.rk=5;if(t.a.Lk)a=new gk("devCamera"),S(a,t.Ic),a.create(),t.a.ua=a;else{a=Ue(0)[0][0];var b=t.a.va=new ok("player");b.Bh=Math.floor(2147483648/180*90);b.f.y=a.y+.5*b.be;b.f.z=a.z;b.f.x=a.x;S(b,
t.cf);b.create()}t.a.hl()};t.a.Xl=function(){if(!(t.a.ad.length>=t.a.Vd)){var a=vb(Se);if(a.Db.Ad==t.a.Ad){var b=vb(a);b=vb(b);var c=b.G-b.C-5E4-5E4;a=new G(tb(b.v-b.s-5E4-5E4)+b.s+5E4,a.oa-1E3,tb(c)+b.C+5E4);if(b=hf(a,new G(0,-1E8,0),Zf))a.y=b.p.y+1E5,t.a.va?(b=od(t.a.va.f,a,new G),b=hf(a,b,Wj)?!0:!1):b=!0,b&&(b=new Y,b.f.x=a.x,b.f.y=a.y,b.f.z=a.z,Fd(b.transform,b.f),S(b,t.af),b.create(),t.a.Yj--)}}};
t.a.Wl=function(){if(!(this.Pg.length>=t.a.rk*Se.length/20)){var a=vb(Se);if(a.Db.Ad==t.a.Ad){var b=vb(a);b=vb(b);var c=b.G-b.C-5E4-5E4;a=new G(tb(b.v-b.s-5E4-5E4)+b.s+5E4,a.oa-1E3,tb(c)+b.C+5E4);if(b=hf(a,new G(0,-1E8,0),Zf))a.y=b.p.y+1E5,t.a.va?(b=od(t.a.va.f,a,new G),b=hf(a,b,Wj)?!0:!1):b=!0,b&&(a=new kk(a.x,a.y-1E5,a.z),S(a,t.cf),a.create())}}};
t.a.Vl=function(){if(!(this.Ig.length>=t.a.qk*Se.length/20)){var a=vb(Se);if(a.Db.Ad==t.a.Ad){var b=vb(a);b=vb(b);var c=b.G-b.C-5E4-5E4;a=new G(tb(b.v-b.s-5E4-5E4)+b.s+5E4,a.oa-1E3,tb(c)+b.C+5E4);if(b=hf(a,new G(0,-1E8,0),Zf))a.y=b.p.y+1E5,t.a.va?(b=od(t.a.va.f,a,new G),b=hf(a,b,Wj)?!0:!1):b=!0,b&&(a=new nk(a.x,a.y-1E5,a.z),S(a,t.cf),a.create())}}};
t.a.step=function(){for(var a,b,c=0;16>c;c++){sf=1-sf;a=rf[sf];b=rf[1-sf];for(var d=q(Se),e=d.next();!e.done;e=d.next()){e=e.value;var h=e.index-rf.aa;5==t.a.Ih?(b[0][h]=.2*e.Yb.x+.8*e.Yb.x*(e.Bc?1:Math.max(0,Math.cos(t.h/30*Math.PI))),b[1][h]=.2*e.Yb.y,b[2][h]=.2*e.Yb.z):(b[0][h]=e.Yb.x,b[1][h]=e.Yb.y,b[2][h]=e.Yb.z)}for(d=0;3>d;d++)for(e=q(qf),h=e.next();!h.done;h=e.next()){h=h.value;var g=h.cd*a[d][h.$g.index-rf.aa];g*=h.ii[d];b[d][h.Sf.index-rf.aa]+=g/h.Sf.wj}a=q(Se);for(e=a.next();!e.done;e=
a.next())d=e.value,d.Bc&&(e=d.index-rf.aa,b[0][e]=d.Yb.x,b[1][e]=d.Yb.y,b[2][e]=d.Yb.z)}if(0==t.h%1){c=q(Se);for(e=c.next();!e.done;e=c.next())a=e.value,d=a.index-rf.aa,a.ia.sb.x=b[0][d],a.ia.sb.y=b[1][d],a.ia.sb.z=b[2][d],b[0][d]=0,b[1][d]=0,b[2][d]=0;b=q(qf);for(h=b.next();!h.done;h=b.next())c=h.value,c.pc&&(c.cd=c.$g==c.Sf?wf(c.pc):vf(c.pc));b=0;c=t.hc.Dk;a=q(Se);for(d=a.next();!d.done;d=a.next())for(d=d.value,d.Xe=b&255|d.rc.length<<16,d=q(d.rc),e=d.next();!e.done;e=d.next())e=e.value,e.Hd(new Float32Array(c.buffer,
b*c.ri,12)),e.index=b,b++;c.upload();b=q(Yi.elements);for(c=b.next();!c.done;c=b.next())c=c.value,(a=Ue(c.aa))&&c.kd&&(c.kd.Pa[1]=a.Xe);pf&&tf()}t.a.Lk||0!=t.h%5||(this.Xl(),this.Wl(),this.Vl());t.a.yl();for(t.a.zl();!(performance.now()>=t.nl-4)&&aj(););};
t.ck.step=function(){t.Xb.r=0;t.Xb.Ya=0;t.Xb.ka=0;t.Xb.Ia=0;t.a.va&&4>t.h-t.a.va.mk&&(t.Xb.r+=24,t.Xb.Ya+=24,t.Xb.ka+=24,t.Xb.Ia+=24);if(t.a.va){var a=t.h-t.a.va.Zh;a=1.5-a/6;0>a&&(a=0);1<a&&(a=1);t.Xb.r+=170*a;t.Xb.Ia+=170*a}a=1-t.h/180;0<=a&&(t.Xb.Ia=255*a,t.a.Ue.Qd.gain.value=1-a);v.bindFramebuffer(v.FRAMEBUFFER,t.nh.object);t.Sb(2);v.clear(v.DEPTH_BUFFER_BIT|v.STENCIL_BUFFER_BIT);0==t.h%60&&t.Gk.children.sort($i);Yf();t.eb(t.c.sa.get("physical"));t.Tf.La=1;Kd(t.Tf);t.Tf.La=0;t.D.N("clipY",Infinity,
!1);var b=pb.first();for(a=We.first();b.item;){if(a.item){if(a.item.xh<t.h){var c=a.next;ib(a);a=c;continue}if(0<qb(b.item,a.item)){a=a.next;continue}}c=b.next;ib(b);nb(b,a);b=c}for(;a.item;)b=a.next,a.item.xh<t.h&&ib(a),a=b;Xe.H=.00390625*t.ua.O.H;Xe.m31=.00390625*t.ua.O.m31;Xe.m32=.00390625*t.ua.O.m32;t.Cb(mg);t.eb(t.c.sa.get("sky"));t.Wb(0,t.c.P.get("concr01"));t.D.N("texture1",1,!0);t.Wb(1,t.c.P.get("sky01"));t.D.N("color",ad);t.xb(0);t.Sb(1);t.$b(0);a=new R;b=(.5*t.ua.Pf+.5*t.ua.Ff)*Wf.gf;a.scale(b*
t.viewport.ratio,b,1);a.m32=-b/Math.tan(t.ua.yd);Cd(t.ua.O,a,a);t.D.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,0,4);if(t.af.children){t.af.children.sort(Zi);Y.Ja=128;for(a=t.af.children.first();a.item;a=a.next)a.item.rh()&&a.item instanceof Y&&a.item.Ze();v.enable(v.STENCIL_TEST);for(a=t.af.children.first();a.item;a=a.next)a.item.rh()&&(a.item instanceof Y||(v.stencilFunc(v.GEQUAL,128,255),v.stencilOp(v.KEEP,v.KEEP,v.KEEP)),a.item.Xa());v.disable(v.STENCIL_TEST)}if(t.a.va&&t.a.va.Za.F instanceof
Gk&&.5<t.a.va.Za.focus){t.eb(t.c.sa.get("flashCardThreshold"));t.xb(1);t.Sb(1);v.depthFunc(v.GREATER);for(a=t.af.children.first();a.item;a=a.next)if(a.item instanceof Y&&a.item.La&&600>t.h-a.item.bi){t.D.N("color",new M(0,0,0,32*(1-(t.h-a.item.bi)/600)));b=a.item;t.Cb(mg);t.Wb(0,b.ba);t.$b(0);c=new R;c.set(b.Na);var d=b.qe;c.I*=d;c.L*=d;c.M*=d;c.J*=-d;c.m11*=-d;c.m12*=-d;t.D.N("modelMatrix",c);v.drawArrays(v.TRIANGLE_FAN,ng(b.ui*b.He+b.h,b.wb),4)}t.D.N("color",ad);v.depthFunc(v.LEQUAL)}t.a.Tj.Xa();
t.a.Sj.Xa();t.eb(Hj.D);t.D.N("modelMatrix",Xe);Hj.X.bind();t.xb(1);t.Sb(1);t.$b(1);t.Cb(Hj.Va);t.De(Hj.Od);b=a=0;for(c=We.first();c.item;c=c.next)c.item.Qj==a+b?b+=c.item.Pj:(b&&v.drawElements(v.TRIANGLES,b,v.UNSIGNED_SHORT,2*a),a=c.item.Qj,b=c.item.Pj);b&&v.drawElements(v.TRIANGLES,b,v.UNSIGNED_SHORT,2*a);t.xb(1);t.Sb(1);t.$b(0);t.eb(t.c.sa.get("monoEffect"));t.Cb(mg);v.activeTexture(v.TEXTURE0);v.bindTexture(v.TEXTURE_2D,t.c.P.get("shadow").object);t.D.N("enableTexture0",1,!0);t.D.N("color",t.kf.color);
t.ph.La=1;Kd(t.ph);t.ph.La=0;if(t.bf.children){a=t.ua.O.xe();for(b=t.bf.children.first();b.item;b=b.next)b.item.rh()&&(b.item.depth=jc(a,b.item.f));t.bf.children.sort(Bi.S);Bi.Ze();t.bf.La=1;Kd(t.bf);t.bf.La=0}t.Dd.La=1;Kd(t.Dd);t.Dd.La=0;t.a.va&&(t.Hk(t.a.va.Ed),Xf(t.a.va.Ed),t.$d.La=1,Kd(t.$d),t.$d.La=0);t.a.va&&(a=t.a.va.Za,a.La=1,a.Xa(),a.La=0);t.xb(0);t.Sb(0);t.$b(0);v.bindFramebuffer(v.FRAMEBUFFER,null);t.hc.Tc.N("viewMatrix",Gd);t.hc.Tc.upload();t.Cb(mg);t.qh(new wc(t.canvas.width,t.canvas.height));
t.eb(t.c.sa.get("imageContrast"));v.activeTexture(v.TEXTURE0);v.bindTexture(v.TEXTURE_2D,t.nh.color.object);t.D.N("texture0",0,!0);t.D.N("enableTexture0",1,!0);t.D.N("modelMatrix",Gd);t.D.N("color",ad);t.D.N("imageAdd",t.Xb);t.D.N("imageSub",t.Bl);v.drawArrays(v.TRIANGLE_FAN,0,4);t.a.va&&t.a.ml()};
t.a.ml=function(){function a(D,I,J,O,pa,ra,ca){t.Wb(0,D);var da=t.canvas.width>>1,Fb=t.canvas.height>>1,hb=.5*D.width,Yb=.5*D.height;0==k?I-=da:1==k&&(I+=da);2==l?J-=Fb:3==l&&(J+=Fb);0==h?I+=hb:1==h&&(I-=hb);2==g?J+=Yb:3==g&&(J-=Yb);I=Math.round(I);J=Math.round(J);a.S&&(void 0===O?v.scissor(0,0,t.canvas.width,t.canvas.height):v.scissor(I+da-hb+O,-J+Fb-Yb+pa,ra,ca));O=new R;O.I=D.width/t.canvas.width*m;O.m11=-D.height/t.canvas.height*n;O.H=2*I/t.canvas.width;O.m31=-2*J/t.canvas.height;t.D.N("modelMatrix",
O);v.drawArrays(v.TRIANGLE_FAN,0,4)}if(1==t.li)t.li=2;else{var b=t.a.va.Za.F;if(t.a.hf){t.a.Qk=new ne;var c=[];b&&(c=c.concat(b.Ai));c=c.concat(t.a.zh);for(var d=q(t.a.Ne),e=d.next();!e.done;e=d.next())c=c.concat(e.value.Ij);oe(c);t.a.hf=!1}t.qh(new wc(t.canvas.width,t.canvas.height));t.hc.Tc.N("viewMatrix",Gd);t.hc.Tc.upload();t.Sb(0);t.$b(0);var h=0,g=2,k=0,l=2,m=1,n=1;t.xb(2);v.enable(v.SCISSOR_TEST);a.S=!0;t.Cb(mg);t.eb(t.c.sa.get("image"));t.D.N("color",ad);a.S=!1;h=1;g=2;k=4;l=5;c=q(t.a.Ne);
for(e=c.next();!e.done;e=c.next()){d=e.value;e=d.species.jf.height;var r=Ya(-3+(t.h-d.V)/60,0,1)*e*.5;v.scissor(0,(t.canvas.height>>1)-44+d.y-e+r,t.canvas.width,t.canvas.height);a(d.species.jf,-189,44-d.y+r)}a.S=!0;v.scissor(0,0,t.canvas.width,t.canvas.height);b&&(b.yi()&&(h=4,g=2,k=4,l=5,c=Math.cos(60*t.h/Math.PI),c=Ya(c,0,1),t.D.N("color",new M(255,255*c,255*c,127+128*c)),c=t.c.P.get("HUDWarnReload"),a(c,0,30),t.D.N("color",ad)),d=[ad,new M(255,255,64,255),new M(208,0,0,255)],b instanceof Gk?(e=
b.ta,h=0,g=3,k=4,l=5,c=t.c.P.get("HUDMagRevolver"),a(c,-158-34*e,123,34*e,0,34,34),g=2,c=t.c.P.get("HUDAmmo2"),t.D.N("color",d[b.Ag()]),a(c,-201,91),t.D.N("color",ad)):b instanceof Bk?(e=b.ta,h=0,g=3,k=4,l=5,c=t.c.P.get("HUDMagCarbine"),a(c,-208,124+13*e,0,13*e,97,13),g=2,c=t.c.P.get("HUDAmmo3"),t.D.N("color",d[b.Ag()]),a(c,-208,81),t.D.N("color",ad)):b instanceof Fk&&(e=b.kc,h=0,g=3,k=4,l=5,c=t.c.P.get("HUDMagShotgun"),a(c,-150-18*e,123,18*e,0,18,34),g=2,c=t.c.P.get("HUDAmmo2"),t.D.N("color",d[b.Ag()]),
a(c,-201,91),t.D.N("color",ad)));isNaN(t.a.tc)||(h=1,g=2,k=4,l=5,c=t.a.zh,c=209-c.width*c.Vf.width,d=t.c.P.get("HUDTreasure"),a(d,c,-146),t.a.tc||(d=t.c.P.get("HUDChecked"),t.D.N("color",new M(90,145,255,255)),a(d,c+14,-142),t.D.N("color",ad)));b&&t.a.va.Za.gc&&(t.xb(1),t.eb(t.c.sa.get("monoEffect")),c=new rd,t.a.va.Eg?(t.D.N("color",new M(255,0,0,255)),d=t.a.va.Eg,t.a.ua.Dj.transform(new rd(d.x,d.y,d.z,1),c),c.x/=2*c.b,c.y/=2*c.b):t.D.N("color",new M(0,128,255,255)),t.D.N("ambientLight",new G(1,
1,1)),h=4,g=5,k=4,l=5,(d=b.constructor.kj)&&a(d,Math.round(c.x*t.canvas.width),Math.round(-c.y*t.canvas.height)),t.xb(2),t.eb(t.c.sa.get("image")),t.D.N("color",ad));v.disable(v.SCISSOR_TEST);t.Cb(t.a.Qk);c=function(){z.I=m*C.width/p;z.m11=n*C.height/u;z.H=y/p;z.m31=-x/u;t.D.N("modelMatrix",z)};e=d=0;var p=t.canvas.width>>1,u=t.canvas.height>>1,z=new R;if(b&&b.Ai){b=b.Ai;var y=b.x;var x=b.y;var C=b.Vf;t.Wb(0,C);c();t.D.N("color",b.color);e=b.length;v.drawArrays(v.TRIANGLES,d,e);d+=e}t.a.zh&&(b=t.a.zh,
C=b.Vf,t.Wb(0,C),e=b.length,y=b.x+1,x=b.y+2,c(),t.D.N("color",bd),v.drawArrays(v.TRIANGLES,d,e),y=b.x,x=b.y,c(),t.D.N("color",b.color),v.drawArrays(v.TRIANGLES,d,e),d+=e);v.enable(v.SCISSOR_TEST);b=q(t.a.Ne);for(e=b.next();!e.done;e=b.next()){r=e.value;y=-188;x=44;e=r.species.jf.height;var A=Ya(-3+(t.h-r.V)/60,0,1)*e*.5;v.scissor(0,(t.canvas.height>>1)-x+r.y-e+A,t.canvas.width,t.canvas.height);e=r.Ij;C=e.Vf;t.Wb(0,C);e=e.length;x+=-r.y+19;x+=A;--y;x+=2;c();t.D.N("color",bd);v.drawArrays(v.TRIANGLES,
d,e);y+=1;x-=2;c();t.D.N("color",ad);v.drawArrays(v.TRIANGLES,d,e);d+=e}v.scissor(0,0,t.canvas.width,t.canvas.height);v.disable(v.SCISSOR_TEST)}};t.a.Yl=function(){if(t.a.Gc)for(var a=q(t.a.Gc),b=a.next();!b.done;b=a.next()){b=b.value;var c=b.Qb,d=b.Rb,e=1-(t.Ph-b.Jd)/20;0<e?(c-=240*e*e,b.style.left=c+"px",b.style.top=d+"px"):0!=t.Ph%4||b.vb||(c+=Math.floor(2*Math.random()),d+=Math.floor(2*Math.random()),b.style.left=c+"px",b.style.top=d+"px")}};
t.a.Rj=function(){var a=t.Hl=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor="#2c80fd";a.style.mixBlendMode="color";t.Ie.appendChild(a)};
t.a.Jh=function(){t.ma&&t.Ie.removeChild(t.ma);var a=t.ma=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor="#2c80fdc0";a.style.overflow="hidden";t.Ie.appendChild(a);t.a.Gc=[];t.Ph=0};
t.a.cg=function(){function a(){t.c.ha.get("hit02").play({gain:.5})}function b(){t.c.ha.get("woodSnap02").play()}t.a.Jh();var c=62,d=18,e=document.createElement("button");e.style.zIndex=2;e.style.width="134px";e.style.height="44px";e.style.position="absolute";e.Rb=c;c+=44;e.Qb=29;e.Jd=d;d+=-6;isNaN(t.a.Ck)||(e.Jd=Math.max(e.Jd,(t.a.Ck+1E3-performance.now())/t.Vg));t.a.Gc.push(e);e.style.border="none";e.style.background='url("'+t.c.P.get("MenuButtonPlay").data.src+'")';e.style.backgroundPosition="0px 0px";
e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -44px";Le.Ql()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.vb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.vb=1;this.style.left=this.Qb+"px";this.style.top=this.Rb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.vb=0};t.sm=e;t.ma.appendChild(e);e=document.createElement("button");e.style.zIndex=2;e.style.width=
"133px";e.style.height="42px";e.style.position="absolute";e.Rb=c;c+=44;e.Qb=29;e.Jd=d;d+=-6;t.a.Gc.push(e);e.style.border="none";e.style.background='url("'+t.c.P.get("MenuButtonOptions").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -44px";t.a.fl()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.vb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";
this.vb=1;this.style.left=this.Qb+"px";this.style.top=this.Rb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.vb=0};t.ma.appendChild(e);e=document.createElement("button");e.style.zIndex=2;e.style.width="133px";e.style.height="42px";e.style.position="absolute";e.Rb=c;c+=44;e.Qb=29;e.Jd=d;d+=-6;t.a.Gc.push(e);e.style.border="none";e.style.background='url("'+t.c.P.get("MenuButtonReadme").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=
function(){this.style.backgroundPosition="0px -44px";t.a.gl()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.vb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.vb=1;this.style.left=this.Qb+"px";this.style.top=this.Rb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.vb=0};t.ma.appendChild(e);e=document.createElement("button");e.style.zIndex=2;e.style.width="133px";e.style.height="42px";e.style.position=
"absolute";e.Rb=c;c+=44;e.Qb=29;e.Jd=d;d+=-6;t.a.Gc.push(e);e.style.border="none";e.style.background='url("'+t.c.P.get("MenuButtonDonate").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -44px";t.a.el()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.vb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.vb=1;this.style.left=this.Qb+"px";this.style.top=
this.Rb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.vb=0};t.ma.appendChild(e);c=q(t.a.Gc);for(d=c.next();!d.done;d=c.next())d=d.value,d.style.left=d.Qb+"px",d.style.top=d.Rb+"px"};
t.a.fl=function(){function a(){t.c.ha.get("hit02").play({gain:.5})}function b(){t.c.ha.get("woodSnap02").play()}t.a.Jh();t.Bj={};for(var c in t.Da)t.Bj[c]=t.Da[c];var d=document.createElement("div");d.style.height="100%";d.style.fontSize="6pt";d.style.lineHeight="1.5em";d.style.overflowY="scroll";d.style.padding="0";d.style.background="#505050";d.style.userSelect="none";t.ma.appendChild(d);c=t.ma.S=document.createElement("div");c.style.position="absolute";c.style.top="40px";c.style.right="56px";c.style.width=
"240px";c.style.fontSize="6pt";c.style.lineHeight="1.5em";t.ma.appendChild(c);c=document.createElement("div");c.style.padding="5px 102px 5px 20px";d.appendChild(c);c.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Options</h2>\n\t\t');d=document.createElement("input");d.id="inputCheckbox_musicEnabled";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Da.musicEnabled;d.oninput=function(h){b();t.Da.musicEnabled=h.target.checked?1:0;t.Audio.Gb(t.Da.musicEnabled)};
d.style.marginTop="8px";t.ci=d;var e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Music";d.onmouseenter=e.onmouseenter=function(){t.ma.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Music</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tBoots and Pants and Boots and Pants.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tYou can also press <b>M</b> to toggle the music at any time.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';a()};c.appendChild(d);c.insertAdjacentHTML("beforeend",
" ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputCheckbox_viewportFitWindow";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Da.viewportFitWindow;d.oninput=function(h){b();t.Da.viewportFitWindow=h.target.checked?1:0;t.Uf()};d.style.marginTop="8px";t.hh=d;e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Fit window";d.onmouseenter=e.onmouseenter=function(){t.ma.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Fit Window</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tHave the game display as big as possible inside the browser window.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tYou can also use the <b>-</b> and <b>+</b> keys to adjust the size at any time.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputCheckbox_lightingFancy";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Da.lightingFancy;d.oninput=function(h){b();t.Da.lightingFancy=h.target.checked?1:0};d.style.marginTop="8px";e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Illumination Sampling";d.onmouseenter=e.onmouseenter=function(){t.ma.S.innerHTML=
'\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Illumination Sampling</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tAllow global illumination sampling in the fragment shader, for a realistic-looking world.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDisabling this might improve your framerate.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");
d.id="inputCheckbox_mouseRaw";d.name="mouseRaw";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Da.mouseRaw;d.oninput=function(h){b();t.Da.mouseRaw=h.target.checked?1:0};d.style.marginTop="8px";e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Raw mouse input";d.onmouseenter=e.onmouseenter=function(){t.ma.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Raw Mouse Input</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tEnable unadjusted hardware mouse input.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tThis will make your aiming rotation based on the movement of your mouse, regardless of how fast you move it, which is recommended for first-person gaming.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tCurrently supported only in Chrome, Edge, Opera, and <em>not</em> available in Firefox, Safari, or Linux.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputNumber_mouseDPI";d.name="mouseDPI";d.type="number";d.min=100;d.step=100;d.style.fontSize="7pt";d.value=t.Da.mouseDPI;d.oninput=function(h){h.target.checkValidity()&&(t.Da.mouseDPI=parseFloat(h.target.value),t.ji())};d.style.marginTop="8px";d.style.width="5em";e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Mouse DPI:";
d.onmouseenter=e.onmouseenter=function(){t.ma.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Mouse DPI</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tFor gamers: if you know the DPI of your mouse, enter it here.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tOtherwise, just leave this value at its default.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: 1600\n\t\t\t\t\t</p>\n\t\t\t\t\t';a()};c.appendChild(e);c.insertAdjacentHTML("beforeend"," ");c.appendChild(d);c.insertAdjacentHTML("beforeend","<br />");d=
document.createElement("input");d.id="inputNumber_mouseScale";d.name="mouseScale";d.type="number";d.min=.125;d.step=.125;d.style.fontSize="7pt";d.value=t.Da.mouseScale;d.oninput=function(h){h.target.checkValidity()&&(t.Da.mouseScale=parseFloat(h.target.value),t.ji())};d.style.marginTop="8px";d.style.width="5em";e=document.createElement("label");e.setAttribute("for",d.id);e.title=" ";e.innerHTML="Mouse scale:";d.onmouseenter=e.onmouseenter=function(){t.ma.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Mouse Scale</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tInches of mouse movement at the given DPI to perform a 360\u00b0 rotation in the game.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tLower values will increase the aiming sensitivity.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: 3\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(e);c.insertAdjacentHTML("beforeend"," ");c.appendChild(d);c.insertAdjacentHTML("beforeend","<br />");c=293;d=0;e=document.createElement("button");e.style.zIndex=2;e.style.width="76px";e.style.height="34px";e.style.position="absolute";e.Rb=250;e.Qb=c;c+=80;e.Jd=d;d+=6;t.a.Gc.push(e);e.style.border="none";e.style.background='url("'+t.c.P.get("MenuButtonCancel").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition=
"0px -36px";delete t.ma.S;delete t.ci;delete t.hh;for(var h in t.Da)t.Da[h]=t.Bj[h];delete t.Bj;t.Uf();t.ji();t.Audio.Gb(t.Da.musicEnabled);t.a.cg()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -72px";this.vb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.vb=1;this.style.left=this.Qb+"px";this.style.top=this.Rb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.vb=0};t.ma.appendChild(e);e=document.createElement("button");
e.style.zIndex=2;e.style.width="76px";e.style.height="34px";e.style.position="absolute";e.Rb=250;e.Qb=c;c+=80;e.Jd=d;d+=6;t.a.Gc.push(e);e.style.border="none";e.style.background='url("'+t.c.P.get("MenuButtonOK").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -36px";delete t.ma.S;delete t.ci;delete t.hh;for(var h in t.Da)window.localStorage.setItem(h,t.Da[h]);t.Uf();t.a.cg()};e.onmousedown=function(h){h.preventDefault();
this.style.backgroundPosition="0px -72px";this.vb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.vb=1;this.style.left=this.Qb+"px";this.style.top=this.Rb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.vb=0};t.ma.appendChild(e);c=q(t.a.Gc);for(d=c.next();!d.done;d=c.next())d=d.value,d.style.left=d.Qb+"px",d.style.top=d.Rb+"px"};
t.a.gl=function(){t.a.Jh();var a=document.createElement("div");a.style.height="100%";a.style.fontSize="6pt";a.style.lineHeight="1.5em";a.style.overflowY="scroll";a.style.padding="0";a.style.background="#505050";a.style.userSelect="auto";t.ma.appendChild(a);var b=document.createElement("div");b.style.padding="5px 102px 5px 20px";a.appendChild(b);b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">How to Play</h2>\n\t\t\t\u2022 Use\t<b>W,A,S,D</b> and <b>Space</b> to move and jump.<br />\n\t\t\t\u2022 Use the <b>Mouse</b> to aim and shoot.<br />\n\t\t\t<br />\n\t\t');
a=document.createElement("img");a.src=t.c.P.get("HUDItemCarbine").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend","\n\t\t\t<br />\n\t\t\t\u2022 Press <span style=\"color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;\">E</span> to equip the <b>Carbine</b>.<br />\n\t\t\tIt's a short-barreled assault rifle with <em>lots of ammo</em> and a <em>high rate of fire</em>.<br />\n\t\t\tBullets will juggle-strike all the targets in your line-of-fire!<br />\n\t\t\t\u2022 Hold the <b>Right Mouse Button</b> to improve accuracy.<br />\n\t\t\t\u2022 Press <b>R</b> to reload.<br />\n\t\t\tThe 30-round magazine will regenerate whenever you're not shooting.<br />\n\t\t\t<br />\n\t\t");
a=document.createElement("img");a.src=t.c.P.get("HUDItemShotgun").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">C</span> to equip the <b>Shotgun</b>.<br />\n\t\t\tIt\'s a pump-action 12-gauge with great <em>multi-damage</em> stopping power.<br />\n\t\t\tPellets will continually dig through enemies until their full damage has been delivered!<br />\n\t\t\t\u2022 Press the <b>Right Mouse Button</b> to cycle it.<br />\n\t\t\tYou must cycle the shotgun before each shot.<br />\n\t\t\t<br />\n\t\t');
a=document.createElement("img");a.src=t.c.P.get("HUDItemRevolver").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend","\n\t\t\t<br />\n\t\t\t\u2022 Press <span style=\"color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;\">Q</span> to equip the <b>Revolver</b>.<br />\n\t\t\tIt's a six-shot double-action with great <em>accuracy</em> and <em>reach</em>.<br />\n\t\t\tBullets will go through walls, if not too thick!<br />\n\t\t\t\u2022 Hold the <b>Right Mouse Button</b> to track enemies you've glimpsed.<br />\n\t\t\t\u2022 Press <b>R</b> to reload.<br />\n\t\t\t<br />\n\t\t");
b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Contact</h2>\n\t\t\t<p>\n\t\t\tThis game is a preview of a work in progress.<br />\n\t\t\tPlease email me about any technical problems so I can fix them!<br />\n\t\t\tchad.chisholm@protonmail.com<br />\n\t\t\t</p>\n\t\t');b=373;a=0;var c=document.createElement("button");c.style.zIndex=2;c.style.width="76px";c.style.height="34px";c.style.position="absolute";c.Rb=250;c.Qb=b;b+=80;c.Jd=a;a+=6;t.a.Gc.push(c);
c.style.border="none";c.style.background='url("'+t.c.P.get("MenuButtonOK").data.src+'")';c.style.backgroundPosition="0px 0px";c.style.cursor="pointer";c.onclick=function(){this.style.backgroundPosition="0px -36px";t.a.cg()};c.onmousedown=function(d){d.preventDefault();this.style.backgroundPosition="0px -72px";this.vb=2;t.c.ha.get("woodSnap02").play()};c.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.vb=1;this.style.left=this.Qb+"px";this.style.top=this.Rb+"px";t.c.ha.get("hit02").play({gain:.5})};
c.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.vb=0};t.ma.appendChild(c);b=q(t.a.Gc);for(a=b.next();!a.done;a=b.next())a=a.value,a.style.left=a.Qb+"px",a.style.top=a.Rb+"px"};
t.a.el=function(){t.a.Jh();var a=document.createElement("div");a.style.height="100%";a.style.fontSize="6pt";a.style.lineHeight="1.5em";a.style.overflowY="scroll";a.style.padding="0";a.style.background="#505050";a.style.userSelect="auto";t.ma.appendChild(a);var b=document.createElement("div");b.style.padding="5px 102px 5px 20px";a.appendChild(b);b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Support the Project</h2>\n\t\t\t<p>\n\t\t\t<b>ShootPotato.com</b> is a free game for everyone. If you like it, and want it to be completed, then please consider making a donation to represent a purchase. This enables me to devote time and resources to continuing its development.\n\t\t\t<br />\n\t\t\t</p><p>\n\t\t');
b.insertAdjacentHTML("beforeend",'\n\t\t\t<form action="https://www.paypal.com/donate" method="post" target="_blank">\n\t\t\t<input type="hidden" name="hosted_button_id" value="8X4ZJS35NSYYJ" />\n\t\t\t<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />\n\t\t\t<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />\n\t\t\t</form>\n\t\t');
b.insertAdjacentHTML("beforeend",'\n\t\t\t</p>\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Coming Soon...</h2>\n\t\t\t<p>\n\t\t\t\u2022 melee weapon<br />\n\t\t\t\u2022 grenades!<br />\n\t\t\t\u2022 breakable glass<br />\n\t\t\t\u2022 organized enemy and loot spawning<br />\n\t\t\t\u2022 enemy NPC attacks<br />\n\t\t\t\u2022 enemy NPC hit, attack, and death animations<br />\n\t\t\t\u2022 enemy NPC behavioral logic, strategy<br />\n\t\t\t\u2022 collectible goodies, treasure, keys<br />\n\t\t\t\u2022 architectural art assets, textures, variation<br />\n\t\t\t\u2022 ambient sound effects, dynamic music<br />\n\t\t\t\u2022 more/better weapon and character sounds<br />\n\t\t\t\u2022 player death<br />\n\t\t\t\u2022 score and high score table<br />\n\t\t\t\u2022 more...<br />\n\t\t\t</p>\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Past Updates</h2>\n\t\t\t<p>\n\t\t\t<b>May 28th, 2023:</b><br />\n\t\t\t\u2022 app loading console<br />\n\t\t\t\u2022 window resizing<br />\n\t\t\t\u2022 main menu<br />\n\t\t\t\u2022 main menu music<br />\n\t\t\t\u2022 options menu<br />\n\t\t\t\u2022 readme page with pictures<br />\n\t\t\t\u2022 donation via PayPal<br />\n\t\t\t\u2022 large rooms with pillars<br />\n\t\t\t\u2022 improved color palette<br />\n\t\t\t</p><p>\n\t\t\t<b>May 7th, 2023:</b><br />\n\t\t\t\u2022 maze world generator<br />\n\t\t\t\u2022 global illumination at 60 FPS<br />\n\t\t\t\u2022 room lights switching on<br />\n\t\t\t\u2022 improved performance of collision scans<br />\n\t\t\t\u2022 gibs colliding with props<br />\n\t\t\t\u2022 HUD cards for ammo collection<br />\n\t\t\t</p><p>\n\t\t\t<b>Dec 18th, 2022:</b><br />\n\t\t\t\u2022 endless world generation<br />\n\t\t\t\u2022 user settings panel<br />\n\t\t\t\u2022 weapons reloading<br />\n\t\t\t\u2022 ammo collectibles<br />\n\t\t\t</p><p>\n\t\t\t<b>Oct 30th, 2022:</b><br />\n\t\t\t\u2022 NPC navigation graph<br />\n\t\t\t</p><p>\n\t\t\t<b>Oct 11th, 2022:</b><br />\n\t\t\t\u2022 website launched<br />\n\t\t\t</p><p>\n\t\t');
a=373;b=0;var c=document.createElement("button");c.style.zIndex=2;c.style.width="76px";c.style.height="34px";c.style.position="absolute";c.Rb=250;c.Qb=a;a+=80;c.Jd=b;b+=6;t.a.Gc.push(c);c.style.border="none";c.style.background='url("'+t.c.P.get("MenuButtonOK").data.src+'")';c.style.backgroundPosition="0px 0px";c.style.cursor="pointer";c.onclick=function(){this.style.backgroundPosition="0px -36px";t.a.cg()};c.onmousedown=function(d){d.preventDefault();this.style.backgroundPosition="0px -72px";this.vb=
2;t.c.ha.get("woodSnap02").play()};c.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.vb=1;this.style.left=this.Qb+"px";this.style.top=this.Rb+"px";t.c.ha.get("hit02").play({gain:.5})};c.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.vb=0};t.ma.appendChild(c);a=q(t.a.Gc);for(b=a.next();!b.done;b=a.next())b=b.value,b.style.left=b.Qb+"px",b.style.top=b.Rb+"px"};
t.a.hl=function(){var a=document.createElement("button");a.style.zIndex=2;a.style.position="absolute";a.style.width="64px";a.style.height="64px";a.style.left=(t.canvas.width-64>>1)+"px";a.style.top=(t.canvas.height-64>>1)+"px";a.style.border="none";a.style.background='url("WebsitePlay_230507_01.png")';a.style.backgroundSize="64px 64px";a.style.backgroundPosition="center";a.style.backgroundRepeat="no-repeat";a.style.opacity="75%";a.style.cursor="pointer";a.onclick=function(){t.c.ha.get("woodSnap02").play();
t.tm=!0;t.a.Rj();t.a.cg();t.Audio.Gb(t.Da.musicEnabled);var b=t.c.ha.get("MusicFactoryBeat01");t.Audio.Sc&&t.Audio.Sc.stop();var c=t.Audio.S.createGain();c.gain.value=1;c.connect(t.Audio.tb);var d=new AudioBufferSourceNode(t.Audio.S);d.connect(c);d.loop=!0;d.buffer=b.buffer;d.start();t.Audio.Sc=d};a.onmouseenter=function(){this.style.opacity="100%"};a.onmouseleave=function(){this.style.opacity="75%"};t.ma.appendChild(a)};
document.addEventListener("pointerlockchange",function(){document.pointerLockElement?(t.Ie.removeChild(t.Hl),t.Ie.removeChild(t.ma),t.ma=null,t.Audio.Sc.stop(),Ne.clear(),Le.clear(),t.paused=!1,t.a.Ue.Qd.disconnect(t.a.Ue.ai),t.a.Ue.Qd.connect(t.Audio.tb)):(t.li=1,t.a.Ck=performance.now(),t.a.Ue.Qd.disconnect(t.Audio.tb),t.a.Ue.Qd.connect(t.a.Ue.ai))});t.a.pause=function(){t.li=0;t.paused=!0;t.a.Rj();t.a.cg()};
(function(){var a,b,c,d,e,h;return Ha(new Fa(new za(function(g){if(1==g.S){t.nh=new fk;t.Ml();a=t.ma=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor="black";a.style.overflow="hidden";a.style.fontFamily="monospace";a.style.fontSize="8pt";a.style.color="white";t.Ie.appendChild(a);t.ma.od=new Intl.NumberFormat("en-US",{maximumFractionDigits:2});t.ma.insertAdjacentHTML("beforeend",
"\n\t----------------------------------------------------------------------------<br />\n\tThis game is a preview of a work in progress.<br />\n\tPlease email me about any technical problems so I can fix them!<br />\n\tchad.chisholm@protonmail.com<br />\n\t----------------------------------------------------------------------------<br />\n\t<br />\n\t");t.ma.insertAdjacentHTML("beforeend","ShootPotato v0.007<br />");t.ma.insertAdjacentHTML("beforeend","June 01, 2023<br />");t.ma.insertAdjacentHTML("beforeend",
"GL Vendor: "+v.getParameter(v.VENDOR)+"<br />");t.ma.insertAdjacentHTML("beforeend","GL Version: "+v.getParameter(v.VERSION)+"<br />");t.ma.insertAdjacentHTML("beforeend","GL Renderer: "+v.getParameter(v.RENDERER)+"<br />");t.ma.insertAdjacentHTML("beforeend","Fetching resources... ");c=b=performance.now();var k=fetch("resources_230601_01.gob");g.S=2;return{value:k}}if(3!=g.S)return d=g.Gb,c=performance.now(),t.ma.insertAdjacentHTML("beforeend","done ("+t.ma.od.format(c-b)+" ms).<br />"),b=c,t.ma.insertAdjacentHTML("beforeend",
"Unpacking resources... "),console.log(t.ma.od.format(performance.now())+" get arraybuffer..."),e=Uint8Array,k=d.arrayBuffer(),g.S=3,{value:k};h=new e(g.Gb);h.position=0;t.c.load(h);console.log(t.ma.od.format(performance.now())+" resources unpacked.");c=performance.now();t.ma.insertAdjacentHTML("beforeend","done ("+t.ma.od.format(c-b)+" ms).<br />");g.S=0})))})();
