var f;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function p(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function ba(a){if(!(a instanceof Array)){a=p(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
var da="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ea="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function fa(a,b){if(b){var c=da;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ea(c,a,{configurable:!0,writable:!0,value:b})}}
fa("Promise",function(a){function b(g){this.Oa=0;this.Ob=void 0;this.S=[];var k=this.nb();try{g(k.resolve,k.reject)}catch(l){k.reject(l)}}function c(){this.S=null}function d(g){return g instanceof b?g:new b(function(k){k(g)})}if(a)return a;c.prototype.Oa=function(g){if(null==this.S){this.S=[];var k=this;this.nb(function(){k.Ob()})}this.S.push(g)};var e=da.setTimeout;c.prototype.nb=function(g){e(g,0)};c.prototype.Ob=function(){for(;this.S&&this.S.length;){var g=this.S;this.S=[];for(var k=0;k<g.length;++k){var l=
g[k];g[k]=null;try{l()}catch(m){this.wb(m)}}}this.S=null};c.prototype.wb=function(g){this.nb(function(){throw g;})};b.prototype.nb=function(){function g(m){return function(n){l||(l=!0,m.call(k,n))}}var k=this,l=!1;return{resolve:g(this.yf),reject:g(this.wb)}};b.prototype.yf=function(g){if(g===this)this.wb(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.Xf(g);else{a:switch(typeof g){case "object":var k=null!=g;break a;case "function":k=!0;break a;default:k=!1}k?this.Fe(g):
this.zc(g)}};b.prototype.Fe=function(g){var k=void 0;try{k=g.then}catch(l){this.wb(l);return}"function"==typeof k?this.th(k,g):this.zc(g)};b.prototype.wb=function(g){this.Sc(2,g)};b.prototype.zc=function(g){this.Sc(1,g)};b.prototype.Sc=function(g,k){if(0!=this.Oa)throw Error("Cannot settle("+g+", "+k+"): Promise already settled in state"+this.Oa);this.Oa=g;this.Ob=k;this.ie()};b.prototype.ie=function(){if(null!=this.S){for(var g=0;g<this.S.length;++g)h.Oa(this.S[g]);this.S=null}};var h=new c;b.prototype.Xf=
function(g){var k=this.nb();g.zi(k.resolve,k.reject)};b.prototype.th=function(g,k){var l=this.nb();try{g.call(k,l.resolve,l.reject)}catch(m){l.reject(m)}};b.prototype.then=function(g,k){function l(q,v){return"function"==typeof q?function(B){try{m(q(B))}catch(y){n(y)}}:v}var m,n,r=new b(function(q,v){m=q;n=v});this.zi(l(g,m),l(k,n));return r};b.prototype.catch=function(g){return this.then(void 0,g)};b.prototype.zi=function(g,k){function l(){switch(m.Oa){case 1:g(m.Ob);break;case 2:k(m.Ob);break;default:throw Error("Unexpected state: "+
m.Oa);}}var m=this;null==this.S?h.Oa(l):this.S.push(l)};b.resolve=d;b.reject=function(g){return new b(function(k,l){l(g)})};b.race=function(g){return new b(function(k,l){for(var m=p(g),n=m.next();!n.done;n=m.next())d(n.value).zi(k,l)})};b.all=function(g){var k=p(g),l=k.next();return l.done?d([]):new b(function(m,n){function r(B){return function(y){q[B]=y;v--;0==v&&m(q)}}var q=[],v=0;do q.push(void 0),v++,d(l.value).zi(r(q.length-1),n),l=k.next();while(!l.done)})};return b});
function ha(){ha=function(){};da.Symbol||(da.Symbol=ja)}function ka(a,b){this.S=a;ea(this,"description",{configurable:!0,writable:!0,value:b})}ka.prototype.toString=function(){return this.S};var ja=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new ka("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function na(){ha();var a=da.Symbol.iterator;a||(a=da.Symbol.iterator=da.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ea(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ra(aa(this))}});na=function(){}}function ra(a){na();a={next:a};a[da.Symbol.iterator]=function(){return this};return a}function sa(){this.wb=!1;this.Oa=null;this.Ob=void 0;this.S=1;this.Sc=0;this.nb=null}function ua(a){if(a.wb)throw new TypeError("Generator is already running");a.wb=!0}
sa.prototype.zc=function(a){this.Ob=a};function wa(a,b){a.nb={vm:b,Km:!0};a.S=a.Sc}sa.prototype.return=function(a){this.nb={return:a};this.S=this.Sc};function xa(a){this.S=new sa;this.Oa=a}function ya(a,b){ua(a.S);var c=a.S.Oa;if(c)return Ba(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.S.return);a.S.return(b);return Ca(a)}
function Ba(a,b,c,d){try{var e=b.call(a.S.Oa,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.S.wb=!1,e;var h=e.value}catch(g){return a.S.Oa=null,wa(a.S,g),Ca(a)}a.S.Oa=null;d.call(a.S,h);return Ca(a)}
function Ca(a){for(;a.S.S;)try{var b=a.Oa(a.S);if(b)return a.S.wb=!1,{value:b.value,done:!1}}catch(c){a.S.Ob=void 0,wa(a.S,c)}a.S.wb=!1;if(a.S.nb){b=a.S.nb;a.S.nb=null;if(b.Km)throw b.vm;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function Ea(a){this.next=function(b){ua(a.S);a.S.Oa?b=Ba(a,a.S.Oa.next,b,a.S.zc):(a.S.zc(b),b=Ca(a));return b};this.throw=function(b){ua(a.S);a.S.Oa?b=Ba(a,a.S.Oa["throw"],b,a.S.zc):(wa(a.S,b),b=Ca(a));return b};this.return=function(b){return ya(a,b)};na();this[Symbol.iterator]=function(){return this}}
function Ha(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function h(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(h,e)}h(a.next())})}fa("Math.sign",function(a){return a?a:function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1}});
function Ja(a,b){na();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}fa("Array.prototype.keys",function(a){return a?a:function(){return Ja(this,function(b){return b})}});var t={},u;t.canvas=document.createElement("canvas");t.canvas.width=480;t.canvas.height=296;var Ka=document.body;Ka.style.position="relative";
Ka.style.left=(window.innerWidth-t.canvas.width>>1)+"px";Ka.style.width=t.canvas.width+"px";Ka.style.margin="0px";Ka.style.marginBottom="20px";Ka.style.padding="0px";Ka.style.display="flex";Ka.style.flexFlow="column nowrap";Ka.style.justifyContent="flex-start";Ka.style.alignItems="center";Ka.style.alignContent="flex-start";Ka.style.backgroundColor="#404040";Ka.style.fontFamily="sans-serif";Ka.style.fontSize="12pt";Ka.style.color="white";Ka.style.imageRendering="pixelated";
Ka.style.transformOrigin="top center";var La=document.createElement("img");La.width=320;La.height=44;La.src="WebsiteBanner_230507_01.png";La.style.margin="0 auto";document.body.appendChild(La);var Na=t.ge=document.createElement("div");Na.style.position="relative";Na.style.width=t.canvas.width+"px";Na.style.height=t.canvas.height+"px";Na.style.margin="6px 0";Na.style.outline="5px solid black";Na.style.backgroundColor="black";Na.oncontextmenu=function(a){return a.preventDefault()};document.body.appendChild(Na);
t.ge.appendChild(t.canvas);function Pa(a,b){for(var c=0,d=a.length,e=c+(d-c>>1);c<d;){var h=a.cmp.call(null,b,a[e]);if(0>h)d=e,e=c+(d-c>>1);else if(0<h)c=e+1,e=c+(d-c>>1);else break}return e}function Qa(a,b){var c=Pa(a,b);return a[c]&&0==a.cmp(a[c],b)?a[c]:null}function Ra(a,b){var c=Pa(a,b);if(a[c]&&0==a.cmp(a[c],b))return a[c];a.splice(c,0,b);return b}function Ta(a,b){var c=Pa(a,b);a[c]&&0==a.cmp(a[c],b)&&a.splice(c,1)};for(var Ua=new Uint8Array(256),Va=0;256>Va;Va++)Ua[Va]=Ua[Va>>>1]+(Va&1);function Wa(a,b,c){return a<b?b:a>c?c:a}function Xa(a,b,c){return a*(1-c)+b*c}function Ya(a,b){return a==b?a:0==a?b:0==b?a:0==(a&1)?0==(b&1)?Ya(a>>1,b>>1)<<1:Ya(a>>1,b):0==(b&1)?Ya(a,b>>1):a>=b?Ya(a-b>>1,b):Ya(b-a>>1,a)}function $a(a,b,c){var d=b*b-4*a*c;if(0<d){c={};d=Math.sqrt(d);a=2*a;var e=(-b+d)/a;a=(-b-d)/a;a>e?(c.Qa=e,c.Qc=a):(c.Qa=a,c.Qc=e);return c}return 0==d?(c={},c.Qa=-b/(2*a),c.Qc=c.Qa,c):null}
function ab(a,b,c){a[b]=void 0==a[b]?c:a[b]+c}function bb(a){this.cmp=a;this.elements=[]}f=bb.prototype;f.get=function(a){var b=cb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements[b]};f.contains=function(a){var b=cb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?-1:b};f.add=function(a){return this.push(a)};
f.push=function(a){var b=cb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return!1;this.elements.splice(b,0,a);return!0};f.replace=function(a){var b=cb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b]=a,!0;this.elements.splice(b,0,a);return!0};f.Ma=function(a){var b=cb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b];this.elements.splice(b,0,a);return a};
f.remove=function(a){var b=cb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements.splice(b,1)[0]};function cb(a,b){for(var c=0,d=a.elements.length,e=Math.floor(c/2+d/2);c<d;){var h=a.cmp.call(a,b,a.elements[e]);if(0>h)d=e,e=Math.floor(c/2+d/2);else if(0<h)c=e+1,e=Math.floor(c/2+d/2);else break}return e}f.clear=function(){this.elements.length=0};f.Oi=function(){return 0==this.elements.length};function db(){this.start=new eb(null);return this}f=db.prototype;
f.Oi=function(){return!this.first().item};f.size=function(){for(var a=0,b=this.first();b.item;b=b.next)a++;return a};f.first=function(){return this.start.next};f.clear=function(){fb(this.start);return this};function gb(a,b){hb(b,a.start);return a}f.add=function(a){return gb(this,new eb(a))};function ib(a){for(var b=kb,c=lb,d=b.first();d.item;d=d.next)if(0>c.call(null,a.item,d.item)){hb(a,d);return}hb(a,b.start)}f.get=function(a){for(var b=this.first();b.item;b=b.next)if(b.item==a)return b;return null};
f.remove=function(a){a=this.get(a);if(null==a)return null;fb(a);return this};f.sort=function(a){for(var b,c=this.first();c.item;c=b){b=c.next;var d=c;for(var e=d.rb;e.item&&!(0<=a(d.item,e.item));)e=e.rb;d=e;d!=c.rb&&(fb(c),c.rb=d,c.next=d.next,c.rb.next=c,c.next.rb=c)}};function eb(a){this.item=a;this.rb=this;this.next=this;return this}function hb(a,b){a.next=b;a.rb=b.rb;a.next.rb=a;a.rb.next=a}function fb(a){a.rb.next=a.next;a.next.rb=a.rb;a.next=a.rb=a};function mb(){var a;isNaN(a)&&(a=Date.now()|0);this.r=a+643709624|0}mb.prototype.next=function(){this.r^=this.r<<13;this.r^=this.r>>17;this.r^=this.r<<5;this.r>>>=0};function nb(){var a=ob;a.next();return a.r}function pb(a){a.next();return a.r/4294967295}var ob=new mb;function rb(a){return Math.floor(pb(ob)*a)}function sb(a){return 1>pb(ob)*a}function wb(a){return a[rb(a.length)]}function xb(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return wb(b)};function yb(a,b,c){for(var d=0,e=a.length,h=d+(e-d>>1);d<e;){var g=c.call(null,b,a[h]);if(0>g)e=h,h=d+(e-d>>1);else if(0<g)d=h+1,h=d+(e-d>>1);else break}return h}function zb(a,b){var c=a.splice(0);c=p(c);for(var d=c.next();!d.done;d=c.next())d=d.value,a.splice(yb(a,d,b),0,d)}function lb(a,b){return isNaN(a)?a.index<b.index?-1:a.index>b.index?1:0:a<b.index?-1:a>b.index?1:0}function Ab(a,b){return"string"==typeof a?a<b.name?-1:a>b.name?1:0:a.name<b.name?-1:a.name>b.name?1:0};function Bb(a){var b=Cb(a);a=a.slice(a.position,a.position+=b);return String.fromCharCode.apply(null,a)}function Fb(a,b){Gb(a,b.length);for(var c=0;c<b.length;c++)a[a.position++]=b.charCodeAt(c)}function Hb(a){var b=Ib(a);a=a.slice(a.position,a.position+=b);var c;void 0==c&&(c=0);if(void 0==d)var d=a.length;b=53;for(var e=c;e<c+d;e++){var h=a[e];a[e]=a[e]-193*b-53&255;b=h}return String.fromCharCode.apply(null,a)}
function Jb(a,b){Kb(a,b.length);for(var c=a.position,d=0;d<b.length;d++)a[a.position++]=b.charCodeAt(d);b=b.length;void 0==c&&(c=0);void 0==b&&(b=a.length);d=53;for(var e=c;e<c+b;e++)a[e]=a[e]+193*d+53&255,d=a[e]}function Cb(a){return a[a.position++]}function Gb(a,b){a[a.position++]=b&255}function Nb(a){var b=0|a[a.position++]<<0;return b|=a[a.position++]<<8}function Rb(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}
function Sb(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;return(b>>>0)-32768}function Ub(a,b){b+=32768;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}function Ib(a){var b=a[a.position++]<<0;b+=a[a.position++]<<8;b+=a[a.position++]<<16;return b+=a[a.position++]<<24}function Kb(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}
function Vb(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;b|=a[a.position++]<<16;b|=a[a.position++]<<24;return(b>>>0)-2147483648}function Wb(a,b){b+=2147483648;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}function dc(a){var b=new Uint8Array(4);b[0]=a[a.position++];b[1]=a[a.position++];b[2]=a[a.position++];b[3]=a[a.position++];return(new Float32Array(b.buffer))[0]}
function ec(a,b){var c=new Float32Array(1);c[0]=b;c=new Uint8Array(c.buffer);a[a.position++]=c[0];a[a.position++]=c[1];a[a.position++]=c[2];a[a.position++]=c[3]};function fc(){this.size=0;this.root=new gc;this.root.update=function(){};this.rc=null}fc.prototype.Oi=function(){return 0==this.size};fc.prototype.pop=function(){if(this.Oi())return null;var a=this.root.Pe.Ug(),b=a.value;this.remove(a);return b};
fc.prototype.add=function(a,b){this.rc=new hc;if(0==this.size)this.root.Pe=this.rc,this.rc.parent=this.root;else{var c=this.root;var d=this.size;d=Ua[d>>>0&255]+Ua[d>>>8&255]+Ua[d>>>16&255]+Ua[d>>>24];for(var e=0;e<d;e++)c=c.Pe;d=new gc;d.parent=c.parent;c.parent.Pe=d;d.xj=c;c.parent=d;d.Pe=this.rc;this.rc.parent=d}c=this.rc;c.value=a;c.key=b;c.parent.update();this.size++;return this.rc};
fc.prototype.remove=function(a){if(a==this.rc)1==this.size?this.root.Pe=this.rc=null:ic(this);else{var b=this.rc.value,c=this.rc.key;ic(this);a.value=b;a.key=c;a.parent.update()}this.size--};function ic(a){var b=a.rc.parent,c=b.xj;a.rc=c.rc();c.parent=b.parent;c.parent.Pe=c;c.parent.update()}function gc(){}gc.prototype.Ug=function(){return this.first};gc.prototype.rc=function(){return this.Pe.rc()};
gc.prototype.update=function(){this.first=this.Pe.Ug().key<this.xj.Ug().key?this.Pe.Ug():this.xj.Ug();this.parent.update()};function hc(){}hc.prototype.Ug=function(){return this};hc.prototype.rc=function(){return this};Math.uh=2*Math.PI;function jc(a){return a*Math.PI/180}function lc(a){return Math.PI/2147483648*a}function oc(a,b,c,d){return pc(new w(a.x-c.x,a.y-c.y,a.z-c.z),b,d)}function pc(a,b,c){return $a(qc(b,b),2*qc(a,b),qc(a,a)-c*c)}function rc(a,b,c){.7071>a.y&&-.7071<a.y?(b.set(a.z,0,-a.x),sc(a,b,c).ta(1),sc(c,a,b)):(c.set(0,a.z,-a.y),sc(c,a,b).ta(1),sc(a,b,c))}function tc(a){var b=pb(ob)*Math.PI*2;void 0==a&&(a=2*pb(ob)-1);var c=Math.sqrt(1-a*a);return new w(Math.sin(b)*c,a,Math.cos(b)*c)}
function uc(a,b){var c;c||(c=new vc);for(var d=[],e=0;;){for(var h=-1,g=null,k=Number.POSITIVE_INFINITY,l=0;l<b.length;l++)if(!(e&1<<l)){var m=b[l],n=qc(m,a);n<k&&(h=l,g=m,k=n)}if(0<=k)break;c=c.bk(a,g,k);d.push(g);e|=1<<h;if(!c)break}a.round()}function vc(){}vc.prototype.bk=function(a,b,c){a.x-=b.x*c;a.y-=b.y*c;a.z-=b.z*c;return new wc(b)};function wc(a){this.n=a}wc.prototype.bk=function(a,b){b=sc(this.n,b,new w(0,0,0));if(0==b.ta(1))return null;var c=qc(a,b);a.x=b.x*c;a.y=b.y*c;a.z=b.z*c;return new xc(b)};
function xc(a){this.n=a}xc.prototype.bk=function(a,b,c){b=c/qc(this.n,b);if(!isFinite(b))return null;a.x-=this.n.x*b;a.y-=this.n.y*b;a.z-=this.n.z*b;return null};function Dc(a,b,c){null==a?(this.a=b*c,this.c=b,this.ratio=c):null==b?(this.a=a,this.c=a/c,this.ratio=c):null==c?(this.a=a,this.c=b,this.ratio=a/b):(this.a=a,this.c=b,this.ratio=c);this.y=this.x=0;a=a>b?a:b;for(this.bufferSize=8;this.bufferSize<a;this.bufferSize*=2);}
function Ec(a,b,c,d,e){a=Math.round(a);b=Math.round(b);c=Math.round(c);d=Math.round(d);this.m=a;this.l=b;this.K=c;this.H=d;if(!e)return this.ga=c-a,this.ba=d-b,this.$b=this.za=NaN,this.length=Math.sqrt(this.ga*this.ga+this.ba*this.ba),a=this.ga,b=this.ba,0>a?0>b?-a<-b?(this.type=9,this.za=-a/b,this.$b=-b/this.length,a=Ya(-a,-b),this.ga/=a,this.ba/=a):-a>-b?(this.type=7,this.za=b/a,this.$b=-a/this.length,a=Ya(-a,-b),this.ga/=a,this.ba/=a):(this.type=8,this.za=this.ba=this.ga=-1,this.$b=Math.SQRT1_2):
0<b?-a<b?(this.type=3,this.za=-a/b,this.$b=b/this.length,a=Ya(-a,b),this.ga/=a,this.ba/=a):-a>b?(this.type=5,this.za=b/a,this.$b=-a/this.length,a=Ya(-a,b),this.ga/=a,this.ba/=a):(this.type=4,this.ga=-1,this.ba=1,this.za=-1,this.$b=Math.SQRT1_2):(this.type=6,this.ga=-1):0<a?0>b?a<-b?(this.type=11,this.za=-a/b,this.$b=-b/this.length,a=Ya(a,-b),this.ga/=a,this.ba/=a):a>-b?(this.type=13,this.za=b/a,this.$b=a/this.length,a=Ya(a,-b),this.ga/=a,this.ba/=a):(this.type=12,this.ga=1,this.za=this.ba=-1,this.$b=
Math.SQRT1_2):0<b?a<b?(this.type=1,this.za=-a/b,this.$b=b/this.length,a=Ya(a,b),this.ga/=a,this.ba/=a):a>b?(this.type=15,this.za=b/a,this.$b=a/this.length,a=Ya(a,b),this.ga/=a,this.ba/=a):(this.type=0,this.ba=this.ga=1,this.za=-1,this.$b=Math.SQRT1_2):(this.type=14,this.ga=1):a<b?(this.type=2,this.ba=1):a>b&&(this.type=10,this.ba=-1),this}function Fc(a,b){return a.m<b.m?-1:a.m>b.m?1:a.l<b.l?-1:a.l>b.l?1:a.K<b.K?-1:a.K>b.K?1:a.H<b.H?-1:a.H>b.H?1:0}f=Ec.prototype;
f.replace=function(a){this.remove=!0;if(this.ue){a=p(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b.ue){var c=p(this.ue);for(d=c.next();!d.done;d=c.next())d=d.value,0<=b.ue.indexOf(d)||(b.ue.push(d),d.push(b))}else{b.ue=this.ue.slice();c=p(b.ue);for(var d=c.next();!d.done;d=c.next())d.value.push(b)}a=p(this.ue);for(d=a.next();!d.done;d=a.next())b=d.value,b.splice(b.indexOf(this),1);delete this.ue}};
function Gc(a,b){var c=a.m+b.ga;b=a.l+b.ba;return Math.atan2(Ic(a,c,b),a.getParameter(c,b))}function Jc(a,b,c){for(var d={rm:[],code:0},e=0;e<c.length;e++)d.rm.push(Ic(c[e],a,b)),1==Kc(c[e],a,b)&&(d.code+=1<<e);return d}
function Oc(a){var b;var c=Number.NEGATIVE_INFINITY;var d=Number.POSITIVE_INFINITY;var e=b=null;var h=a[a.length-1];a=p(a);for(var g=a.next();!g.done;g=a.next()){g=g.value;var k=g.m-g.l;k>c?(c=k,d=g.l,b=h,e=g):k==c&&g.l<d&&(d=g.l,b=h,e=g);h=g}c=b.type&7;d=e.type;return c<d?!0:c>d?!1:b.za<e.za?!0:b.za>e.za?!1:!0}
function Pc(a,b,c){var d=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,h=null,g=null;c=p(c);for(var k=c.next();!k.done;k=c.next()){k=k.value;var l=Qc(k,a,b);0>l?(l=-l,l<d&&(d=l,h=k)):0<l&&l<e&&(e=l,g=k)}--d;--e;return 0==d||0==e?0:h&&g?d<e?-1:d>e||h.K<g.m?1:-1:g?1:-1}
function Rc(a){var b=a.bound;if(!b){b=new Sc;for(var c=p(a),d=c.next();!d.done;d=c.next()){var e=d.value;b.Ma(e.K,e.H)}}b=b.o+(b.F-b.o>>1);e=c=Number.POSITIVE_INFINITY;a=p(a);for(d=a.next();!d.done;d=a.next())d=d.value,0<d.ba?(d=Tc(d,b),d<e&&(e=d)):0>d.ba&&(d=Tc(d,b),d<c&&(c=d));return new E(c+(e-c>>1),b)}
function Uc(a,b){var c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;b=p(b);for(var e=b.next();!e.done;e=b.next()){var h=e.value,g=Ic(a,h.m,h.l),k=Ic(a,h.K,h.H);e=a.getParameter(h.m,h.l);h=a.getParameter(h.K,h.H);if(g<k)g/=g-k,e=e*(1-g)+h*g,e<d&&(d=e);else if(g>k)g/=g-k,e=e*(1-g)+h*g,e>c&&(c=e);else if(0>g){if(e>h)return null}else if(0<g&&e<h)return null}return!isFinite(c)||!isFinite(d)||c>=d?null:[c,d]}
function Kc(a,b,c){if(void 0==a.type)return 0;switch(a.type){case 0:case 1:case 3:var d=0;a=(c-a.l)*-a.za+a.m;b<=a&&(d+=2);b>=a&&(d+=1);return d;case 2:return d=0,b<=a.m&&(d+=2),b>=a.m&&(d+=1),d;case 4:case 5:case 7:return d=0,a=(b-a.m)*a.za+a.l,c<=a&&(d+=2),c>=a&&(d+=1),d;case 6:return d=0,c<=a.l&&(d+=2),c>=a.l&&(d+=1),d;case 8:case 9:case 11:return d=0,a=(c-a.l)*-a.za+a.m,b<=a&&(d+=1),b>=a&&(d+=2),d;case 10:return d=0,b<=a.m&&(d+=1),b>=a.m&&(d+=2),d;case 12:case 13:case 15:return d=0,a=(b-a.m)*
a.za+a.l,c<=a&&(d+=1),c>=a&&(d+=2),d;case 14:return d=0,c<=a.l&&(d+=1),c>=a.l&&(d+=2),d}}
function Ic(a,b,c){switch(a.type){case 0:case 1:case 3:b-=a.m;c-=a.l;var d=Math.floor(c/a.ba);b-=d*a.ga;c-=d*a.ba;return(c*-a.za-b)*a.$b;case 2:return a.m-b;case 4:case 5:case 7:return b-=a.m,c-=a.l,d=Math.floor(b/-a.ga),b+=d*a.ga,c+=d*a.ba,(b*a.za-c)*a.$b;case 6:return a.l-c;case 8:case 9:case 11:return b-=a.m,c-=a.l,d=Math.floor(c/-a.ba),b+=d*a.ga,c+=d*a.ba,(b-c*-a.za)*a.$b;case 10:return b-a.m;case 12:case 13:case 15:return b-=a.m,c-=a.l,d=Math.floor(b/a.ga),b-=d*a.ga,c-=d*a.ba,(c-b*a.za)*a.$b;
case 14:return c-a.l}return NaN}f.getParameter=function(a,b){var c=this.type,d=this.ga,e=this.ba;this.type=(c+12)%16;this.ga=e;this.ba=-d;a=Ic(this,a,b);this.type=c;this.ga=d;this.ba=e;return a};f.evaluate=function(a){a/=this.length;return(new E(this.m+(this.K-this.m)*a,this.l+(this.H-this.l)*a)).round()};f.tb=function(a,b){var c=(this.K-this.m)/this.length,d=(this.H-this.l)/this.length;return(new E(this.m+c*a-d*b,this.l+d*a+c*b)).round()};
f.Ef=function(a,b){return(new E(this.getParameter(a,b),Ic(this,a,b))).round()};function Vc(a){return(new E(a.K-a.m,a.H-a.l)).scale(5E4/a.length)}function Wc(a,b){return(new E(a.l-a.H,a.K-a.m)).scale(b/a.length)}f.fh=function(a,b){a=this.getParameter(a,b);a/=this.length;return 0>=a?new E(this.m,this.l):1<=a?new E(this.K,this.H):(new E(this.m+(this.K-this.m)*a,this.l+(this.H-this.l)*a)).round()};
function Tc(a,b){var c=0;switch(a.type){case 0:case 1:case 3:if(b<a.l)break;if(b>=a.H)break;c-=a.m;b-=a.l;var d=Math.floor(b/a.ba);c-=d*a.ga;b-=d*a.ba;return b*-a.za-c;case 2:if(b<a.l)break;if(b>=a.H)break;return a.m-c;case 4:case 5:if(b<a.l)break;if(b>=a.H)break;c-=a.m;b-=a.l;d=Math.floor(b/a.ba);c-=d*a.ga;b-=d*a.ba;return b/a.za-c;case 7:if(b<a.H)break;if(b>=a.l)break;c-=a.m;b-=a.l;d=Math.floor(b/-a.ba);c+=d*a.ga;b+=d*a.ba;return b/a.za-c;case 8:case 9:case 11:if(b<a.H)break;if(b>=a.l)break;c-=
a.m;b-=a.l;d=Math.floor(b/-a.ba);c+=d*a.ga;b+=d*a.ba;return b*-a.za-c;case 10:if(b<a.H)break;if(b>=a.l)break;return a.m-c;case 12:case 13:if(b<a.H)break;if(b>=a.l)break;c-=a.m;b-=a.l;d=Math.floor(b/-a.ba);c+=d*a.ga;b+=d*a.ba;return b/a.za-c;case 15:if(!(b<a.l||b>=a.H))return c-=a.m,b-=a.l,d=Math.floor(b/a.ba),c-=d*a.ga,b-=d*a.ba,b/a.za-c}return NaN}
function Qc(a,b,c){switch(a.type){case 0:case 1:case 3:if(c<a.l)break;if(c>=a.H)break;b-=a.m;c-=a.l;var d=Math.floor(c/a.ba);b-=d*a.ga;c-=d*a.ba;a=c*-a.za-b;if(0>a)break;return a+1;case 2:if(c<a.l)break;if(c>=a.H)break;a=a.m-b;if(0>a)break;return a+1;case 4:case 5:if(c<a.l)break;if(c>=a.H)break;b-=a.m;c-=a.l;d=Math.floor(c/a.ba);b-=d*a.ga;c-=d*a.ba;a=c/a.za-b;if(0>a)break;return a+1;case 7:if(c<a.H)break;if(c>=a.l)break;b-=a.m;c-=a.l;d=Math.floor(c/-a.ba);b+=d*a.ga;c+=d*a.ba;a=c/a.za-b;if(0>a)break;
return-a-1;case 8:case 9:case 11:if(c<a.H)break;if(c>=a.l)break;b-=a.m;c-=a.l;d=Math.floor(c/-a.ba);b+=d*a.ga;c+=d*a.ba;a=c*-a.za-b;if(0>a)break;return-a-1;case 10:if(c<a.H)break;if(c>=a.l)break;a=a.m-b;if(0>a)break;return-a-1;case 12:case 13:if(c<a.H)break;if(c>=a.l)break;b-=a.m;c-=a.l;d=Math.floor(c/-a.ba);b+=d*a.ga;c+=d*a.ba;a=c/a.za-b;if(0>a)break;return-a-1;case 15:if(!(c<a.l||c>=a.H||(b-=a.m,c-=a.l,d=Math.floor(c/a.ba),b-=d*a.ga,c-=d*a.ba,a=c/a.za-b,0>a)))return a+1}return NaN}
f.log=function(){console.log(this.m+" "+this.l+" "+this.ga+" "+this.ba+" type: "+this.type+" slope: "+this.za)};f.X=function(){var a=this.hb(this.m,this.l,this.K,this.H);a.type=this.type;a.za=this.za;a.$b=this.$b;a.length=this.length;a.ga=this.ga;a.ba=this.ba;return a};function Xc(a){var b=a.hb(a.K,a.H,a.m,a.l);b.type=(a.type+8)%16;b.za=a.za;b.$b=a.$b;b.length=a.length;b.ga=-a.ga;b.ba=-a.ba;return b}f.hb=function(a,b,c,d){return new Ec(a,b,c,d)};
function Yc(a){if(a.da)return a.da;var b=Xc(a);b.da=a;return a.da=b}function Zc(a,b){return a.type<b.type?-1:a.type>b.type?1:a.za<b.za?-1:a.za>b.za?1:0}function dd(a){var b=[];a=p(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(new E(c.m,c.l));return b}function ed(a){var b=[];a.bound&&(b.bound=a.bound);a=p(a);for(var c=a.next();!c.done;c=a.next())b.unshift(Yc(c.value));return b}
function F(a,b,c,d){this.set(void 0===a?255:a,void 0===b?255:b,void 0===c?255:c,void 0===d?255:d);return this}function fd(a,b){return a.r<b.r?-1:a.r>b.r?1:a.bb<b.bb?-1:a.bb>b.bb?1:a.qa<b.qa?-1:a.qa>b.qa?1:a.Ka<b.Ka?-1:a.Ka>b.Ka?1:0}F.prototype.set=function(a,b,c,d){255<a&&(a=255);0>a&&(a=0);255<b&&(b=255);0>b&&(b=0);255<c&&(c=255);0>c&&(c=0);255<d&&(d=255);0>d&&(d=0);this.r=a;this.bb=b;this.qa=c;this.Ka=d;return this};
F.prototype.scale=function(a){this.r=Math.round(this.r*a);this.bb=Math.round(this.bb*a);this.qa=Math.round(this.qa*a);return this};F.prototype.save=function(a){Gb(a,this.r);Gb(a,this.bb);Gb(a,this.qa);Gb(a,this.Ka);return this};function gd(a){return new F(Cb(a),Cb(a),Cb(a),Cb(a))}new F(0,0,0,0);var hd=new F(255,255,255,255),id=new F(0,0,0,255),jd=new F(255,0,0,255),kd=new F(255,255,0,255);new F(0,255,0,255);new F(0,255,255,255);new F(0,0,255,255);new F(255,0,255,255);
function ld(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.ij=this.hj=this.sf=this.rf=this.gd=this.fd=this.Eb=this.Tc=this.Ac=this.Oe=this.Ne=this.Me=this.Le=this.Ke=this.Je=0;this.Fa=this.Sd=this.Td=this.ma=255;return this}
function md(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:a.z<b.z?-1:a.z>b.z?1:a.Je<b.Je?-1:a.Je>b.Je?1:a.Ke<b.Ke?-1:a.Ke>b.Ke?1:a.Le<b.Le?-1:a.Le>b.Le?1:a.Me<b.Me?-1:a.Me>b.Me?1:a.Ne<b.Ne?-1:a.Ne>b.Ne?1:a.Oe<b.Oe?-1:a.Oe>b.Oe?1:a.Ac<b.Ac?-1:a.Ac>b.Ac?1:a.Tc<b.Tc?-1:a.Tc>b.Tc?1:a.Eb<b.Eb?-1:a.Eb>b.Eb?1:a.fd<b.fd?-1:a.fd>b.fd?1:a.gd<b.gd?-1:a.gd>b.gd?1:a.rf<b.rf?-1:a.rf>b.rf?1:a.sf<b.sf?-1:a.sf>b.sf?1:a.hj<b.hj?-1:a.hj>b.hj?1:a.ij<b.ij?-1:a.ij>b.ij?1:a.ma<b.ma?-1:a.ma>b.ma?1:a.Td<b.Td?-1:a.Td>
b.Td?1:a.Sd<b.Sd?-1:a.Sd>b.Sd?1:a.Fa<b.Fa?-1:a.Fa>b.Fa?1:0}function qd(a,b,c){var d=1-c,e=new ld(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c);e.Je=a.Je*d+b.Je*c;e.Ke=a.Ke*d+b.Ke*c;e.Le=a.Le*d+b.Le*c;e.Me=a.Me*d+b.Me*c;e.Ne=a.Ne*d+b.Ne*c;e.Oe=a.Oe*d+b.Oe*c;e.Ac=a.Ac*d+b.Ac*c;e.Tc=a.Tc*d+b.Tc*c;e.Eb=a.Eb*d+b.Eb*c;e.fd=a.fd*d+b.fd*c;e.gd=a.gd*d+b.gd*c;e.rf=a.rf*d+b.rf*c;e.sf=a.sf*d+b.sf*c;e.ma=a.ma*d+b.ma*c;e.Td=a.Td*d+b.Td*c;e.Sd=a.Sd*d+b.Sd*c;e.Fa=a.Fa*d+b.Fa*c;return e}
ld.prototype.X=function(){var a=new ld(this.x,this.y,this.z);a.Je=this.Je;a.Ke=this.Ke;a.Le=this.Le;a.Me=this.Me;a.Ne=this.Ne;a.Oe=this.Oe;a.Ac=this.Ac;a.Tc=this.Tc;a.Eb=this.Eb;a.fd=this.fd;a.gd=this.gd;a.rf=this.rf;a.sf=this.sf;a.ma=this.ma;a.Td=this.Td;a.Sd=this.Sd;a.Fa=this.Fa;return a};function rd(a,b){a.ma=b.r;a.Td=b.bb;a.Sd=b.qa;a.Fa=b.Ka}function sd(a,b,c){a.fd=b;a.gd=c;return a};function E(a,b){this.x=void 0===a?0:a;this.y=void 0===b?0:b;return this}f=E.prototype;f.set=function(a,b){this.x=a;this.y=b;return this};f.uc=function(){return this.x*this.x+this.y*this.y};f.length=function(){return Math.sqrt(this.uc())};f.ta=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.ta(1);return this};f.scale=function(a){this.x*=a;this.y*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.sub=function(a){this.x=this.x-a.x;this.y=this.y-a.y;return this};f.X=function(){return new E(this.x,this.y)};f.bi=function(){this.x=-this.x;this.y=-this.y;return this};f.ee=function(a){a||(a=new Float32Array(2));a[0]=this.x;a[1]=this.y;return a};function td(a,b){return a.x*b.x+a.y*b.y}function ud(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0}f.Qj=function(){return 0!=this.x||0!=this.y?!1:!0};
function w(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;return this}function qc(a,b){return a.x*b.x+a.y*b.y+a.z*b.z}function sc(a,b,c){c.x=a.y*b.z-a.z*b.y;c.y=b.x*a.z-b.z*a.x;c.z=a.x*b.y-a.y*b.x;return c}function vd(a,b,c){c.x=a.x-b.x;c.y=a.y-b.y;c.z=a.z-b.z;return c}function wd(a,b,c){var d=1-c;return new w(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c)}function xd(a,b){b.x=a.x;b.y=a.y;b.z=a.z}f=w.prototype;f.X=function(){return new w(this.x,this.y,this.z)};
f.set=function(a,b,c){this.x=a;this.y=b;this.z=c;return this};f.bi=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};f.uc=function(){return this.x*this.x+this.y*this.y+this.z*this.z};f.length=function(){return Math.sqrt(this.uc())};f.ta=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.ta(1);return this};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};
f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};f.sub=function(a){return vd(this,a,this)};f.ee=function(a){a||(a=new Float32Array(3));a[0]=this.x;a[1]=this.y;a[2]=this.z;return a};f.Qj=function(){return 0!=this.x||0!=this.y||0!=this.z?!1:!0};function yd(a,b,c,d){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.a=void 0===d?0:d;return this}
yd.prototype.set=function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.a=d;return this};yd.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.a=Math.round(this.a);return this};yd.prototype.ee=function(a){a||(a=new Float32Array(4));a[0]=this.x;a[1]=this.y;a[2]=this.z;a[3]=this.a;return a};yd.prototype.Qj=function(){return 0!=this.x||0!=this.y||0!=this.z||0!=this.a?!1:!0};function zd(){this.reset();return this}f=zd.prototype;
f.set=function(a){this.u=a.u;this.A=a.A;this.B=a.B;this.w=a.w;this.m11=a.m11;this.m12=a.m12;this.C=a.C;this.m21=a.m21;this.m22=a.m22;return this};f.reset=function(){this.u=1;this.w=this.B=this.A=0;this.m11=1;this.m21=this.C=this.m12=0;this.m22=1;return this};
f.rotate=function(a,b,c){var d=Math.cos(c);c=Math.sin(c);var e=c*this.u+d*this.A,h=d*this.w-c*this.m11,g=c*this.w+d*this.m11,k=d*this.C-c*this.m21,l=c*this.C+d*this.m21;this.u=d*this.u-c*this.A;this.A=e;this.w=h;this.m11=g;this.C=k;this.m21=l;d=Math.cos(b);b=Math.sin(b);c=d*this.B-b*this.A;e=b*this.m12+d*this.m11;h=d*this.m12-b*this.m11;g=b*this.m22+d*this.m21;k=d*this.m22-b*this.m21;this.A=b*this.B+d*this.A;this.B=c;this.m11=e;this.m12=h;this.m21=g;this.m22=k;b=Math.cos(a);a=Math.sin(a);d=a*this.B+
b*this.u;c=b*this.m12-a*this.w;e=a*this.m12+b*this.w;h=b*this.m22-a*this.C;g=a*this.m22+b*this.C;this.B=b*this.B-a*this.u;this.u=d;this.m12=c;this.w=e;this.m22=h;this.C=g;return this};f.kk=function(a,b){var c=Math.cos(b),d=Math.sin(b);b=1-c;var e=a.x*a.y,h=a.y*a.z,g=a.z*a.x,k=a.x*d,l=a.y*d;d*=a.z;this.u=a.x*a.x*b+c;this.A=e*b+d;this.B=g*b-l;this.w=e*b-d;this.m11=a.y*a.y*b+c;this.m12=h*b+k;this.C=g*b+l;this.m21=h*b-k;this.m22=a.z*a.z*b+c;return this};
f.ik=function(a,b){a=(new zd).kk(a,b);Ad(a,this,this);return this};f.scale=function(a,b,c){this.u*=a;this.A*=a;this.B*=a;this.w*=b;this.m11*=b;this.m12*=b;this.C*=c;this.m21*=c;this.m22*=c;return this};
f.Pj=function(a){a||(a=this);var b=this.Cj();if(0==b)return a;var c=-(this.w*this.m22+this.m12*-this.C),d=this.w*this.m21+this.m11*-this.C,e=-(this.A*this.m22+this.B*-this.m21),h=this.u*this.m22+this.B*-this.C,g=-(this.u*this.m21+this.A*-this.C),k=this.A*this.m12+this.B*-this.m11,l=-(this.u*this.m12+this.B*-this.w),m=this.u*this.m11+this.A*-this.w;b=1/b;a.u=(this.m11*this.m22+this.m12*-this.m21)*b;a.w=c*b;a.C=d*b;a.A=e*b;a.m11=h*b;a.m21=g*b;a.B=k*b;a.m12=l*b;a.m22=m*b;return a};
f.Cj=function(){return this.u*(this.m11*this.m22-this.m12*this.m21)+this.A*(this.m12*this.C-this.w*this.m22)+this.B*(this.w*this.m21-this.m11*this.C)};f.ee=function(a){a||(a=new Float32Array(9));a[0]=this.u;a[1]=this.A;a[2]=this.B;a[3]=this.w;a[4]=this.m11;a[5]=this.m12;a[6]=this.C;a[7]=this.m21;a[8]=this.m22;return a};
function Ad(a,b,c){var d=a.A*b.u+a.m11*b.A+a.m21*b.B,e=a.B*b.u+a.m12*b.A+a.m22*b.B,h=a.u*b.w+a.w*b.m11+a.C*b.m12,g=a.A*b.w+a.m11*b.m11+a.m21*b.m12,k=a.B*b.w+a.m12*b.m11+a.m22*b.m12,l=a.u*b.C+a.w*b.m21+a.C*b.m22,m=a.A*b.C+a.m11*b.m21+a.m21*b.m22,n=a.B*b.C+a.m12*b.m21+a.m22*b.m22;c.u=a.u*b.u+a.w*b.A+a.C*b.B;c.w=h;c.C=l;c.A=d;c.m11=g;c.m21=m;c.B=e;c.m12=k;c.m22=n;return c}
f.transform=function(a,b){return b.set(this.u*a.x+this.w*a.y+this.C*a.z,this.A*a.x+this.m11*a.y+this.m21*a.z,this.B*a.x+this.m12*a.y+this.m22*a.z)};f.$e=function(){return new w(this.u,this.A,this.B)};f.af=function(){return new w(this.w,this.m11,this.m12)};f.Fd=function(){return new w(this.C,this.m21,this.m22)};f.ze=function(a){this.u=a.x;this.A=a.y;this.B=a.z;return this};f.Ae=function(a){this.w=a.x;this.m11=a.y;this.m12=a.z;return this};f.Be=function(a){this.C=a.x;this.m21=a.y;this.m22=a.z;return this};
f.save=function(a){var b=new Uint8Array((new Float32Array([this.u,this.A,this.B,this.w,this.m11,this.m12,this.C,this.m21,this.m22])).buffer);a.set(b,a.position);a.position+=36};f.load=function(a){a=a.slice(a.position,a.position+=36);a=new Float32Array(a.buffer);a=p(a);this.u=a.next().value;this.A=a.next().value;this.B=a.next().value;this.w=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.C=a.next().value;this.m21=a.next().value;this.m22=a.next().value};new zd;
function H(){this.reset();return this}f=H.prototype;f.set=function(a){this.u=a.u;this.A=a.A;this.B=a.B;this.kb=a.kb;this.w=a.w;this.m11=a.m11;this.m12=a.m12;this.m13=a.m13;this.C=a.C;this.m21=a.m21;this.m22=a.m22;this.m23=a.m23;this.s=a.s;this.m31=a.m31;this.m32=a.m32;this.m33=a.m33;return this};f.reset=function(){this.u=1;this.w=this.kb=this.B=this.A=0;this.m11=1;this.m21=this.C=this.m13=this.m12=0;this.m22=1;this.m32=this.m31=this.s=this.m23=0;this.m33=1;return this};
function Bd(a){zd.prototype.reset.call(a)}f.translate=function(a,b,c){this.s+=a;this.m31+=b;this.m32+=c;return this};f.rotate=zd.prototype.rotate;f.kk=zd.prototype.kk;f.ik=zd.prototype.ik;f.scale=zd.prototype.scale;
f.Pj=function(a){function b(D,I,L,R,qa,ta,ia,oa,Lb){return D*(qa*Lb-ta*oa)+I*(ta*ia-R*Lb)+L*(R*oa-qa*ia)}a||(a=this);var c=this.Cj();if(0==c)return a;var d=b(this.m11,this.m12,this.m13,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),e=-b(this.w,this.m12,this.m13,this.C,this.m22,this.m23,this.s,this.m32,this.m33),h=b(this.w,this.m11,this.m13,this.C,this.m21,this.m23,this.s,this.m31,this.m33),g=-b(this.w,this.m11,this.m12,this.C,this.m21,this.m22,this.s,this.m31,this.m32),k=-b(this.A,this.B,
this.kb,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),l=b(this.u,this.B,this.kb,this.C,this.m22,this.m23,this.s,this.m32,this.m33),m=-b(this.u,this.A,this.kb,this.C,this.m21,this.m23,this.s,this.m31,this.m33),n=b(this.u,this.A,this.B,this.C,this.m21,this.m22,this.s,this.m31,this.m32),r=b(this.A,this.B,this.kb,this.m11,this.m12,this.m13,this.m31,this.m32,this.m33),q=-b(this.u,this.B,this.kb,this.w,this.m12,this.m13,this.s,this.m32,this.m33),v=b(this.u,this.A,this.kb,this.w,this.m11,this.m13,
this.s,this.m31,this.m33),B=-b(this.u,this.A,this.B,this.w,this.m11,this.m12,this.s,this.m31,this.m32),y=-b(this.A,this.B,this.kb,this.m11,this.m12,this.m13,this.m21,this.m22,this.m23),x=b(this.u,this.B,this.kb,this.w,this.m12,this.m13,this.C,this.m22,this.m23),A=-b(this.u,this.A,this.kb,this.w,this.m11,this.m13,this.C,this.m21,this.m23),z=b(this.u,this.A,this.B,this.w,this.m11,this.m12,this.C,this.m21,this.m22);c=1/c;a.u=d*c;a.w=e*c;a.C=h*c;a.s=g*c;a.A=k*c;a.m11=l*c;a.m21=m*c;a.m31=n*c;a.B=r*c;a.m12=
q*c;a.m22=v*c;a.m32=B*c;a.kb=y*c;a.m13=x*c;a.m23=A*c;a.m33=z*c;return a};
f.Cj=function(){var a=this.u*(this.m11*this.m22*this.m33+this.m12*this.m23*this.m31+this.m13*this.m21*this.m32-(this.m13*this.m22*this.m31+this.m11*this.m23*this.m32+this.m12*this.m21*this.m33));a-=this.A*(this.w*this.m22*this.m33+this.m12*this.m23*this.s+this.m13*this.C*this.m32-(this.m13*this.m22*this.s+this.w*this.m23*this.m32+this.m12*this.C*this.m33));a+=this.B*(this.w*this.m21*this.m33+this.m11*this.m23*this.s+this.m13*this.C*this.m31-(this.m13*this.m21*this.s+this.w*this.m23*this.m31+this.m11*
this.C*this.m33));return a-=this.kb*(this.w*this.m21*this.m32+this.m11*this.m22*this.s+this.m12*this.C*this.m31-(this.m12*this.m21*this.s+this.w*this.m22*this.m31+this.m11*this.C*this.m32))};f.ee=function(a){a||(a=new Float32Array(16));a[0]=this.u;a[1]=this.A;a[2]=this.B;a[3]=this.kb;a[4]=this.w;a[5]=this.m11;a[6]=this.m12;a[7]=this.m13;a[8]=this.C;a[9]=this.m21;a[10]=this.m22;a[11]=this.m23;a[12]=this.s;a[13]=this.m31;a[14]=this.m32;a[15]=this.m33;return a};
function Cd(a,b,c){var d=a.A*b.u+a.m11*b.A+a.m21*b.B+a.m31*b.kb,e=a.B*b.u+a.m12*b.A+a.m22*b.B+a.m32*b.kb,h=a.kb*b.u+a.m13*b.A+a.m23*b.B+a.m33*b.kb,g=a.u*b.w+a.w*b.m11+a.C*b.m12+a.s*b.m13,k=a.A*b.w+a.m11*b.m11+a.m21*b.m12+a.m31*b.m13,l=a.B*b.w+a.m12*b.m11+a.m22*b.m12+a.m32*b.m13,m=a.kb*b.w+a.m13*b.m11+a.m23*b.m12+a.m33*b.m13,n=a.u*b.C+a.w*b.m21+a.C*b.m22+a.s*b.m23,r=a.A*b.C+a.m11*b.m21+a.m21*b.m22+a.m31*b.m23,q=a.B*b.C+a.m12*b.m21+a.m22*b.m22+a.m32*b.m23,v=a.kb*b.C+a.m13*b.m21+a.m23*b.m22+a.m33*b.m23,
B=a.u*b.s+a.w*b.m31+a.C*b.m32+a.s*b.m33,y=a.A*b.s+a.m11*b.m31+a.m21*b.m32+a.m31*b.m33,x=a.B*b.s+a.m12*b.m31+a.m22*b.m32+a.m32*b.m33,A=a.kb*b.s+a.m13*b.m31+a.m23*b.m32+a.m33*b.m33;c.u=a.u*b.u+a.w*b.A+a.C*b.B+a.s*b.kb;c.w=g;c.C=n;c.s=B;c.A=d;c.m11=k;c.m21=r;c.m31=y;c.B=e;c.m12=l;c.m22=q;c.m32=x;c.kb=h;c.m13=m;c.m23=v;c.m33=A}
function Dd(a){var b=new H,c=a.u*-a.s+a.A*-a.m31+a.B*-a.m32,d=a.w*-a.s+a.m11*-a.m31+a.m12*-a.m32,e=a.C*-a.s+a.m21*-a.m31+a.m22*-a.m32,h=a.w,g=a.C,k=a.A,l=a.m11,m=a.m21,n=a.B,r=a.m12,q=a.m22;b.u=a.u;b.w=k;b.C=n;b.s=c;b.A=h;b.m11=l;b.m21=r;b.m31=d;b.B=g;b.m12=m;b.m22=q;b.m32=e;return b}
f.transform=function(a,b){return b.set(this.u*a.x+this.w*a.y+this.C*a.z+this.s*a.a,this.A*a.x+this.m11*a.y+this.m21*a.z+this.m31*a.a,this.B*a.x+this.m12*a.y+this.m22*a.z+this.m32*a.a,this.kb*a.x+this.m13*a.y+this.m23*a.z+this.m33*a.a)};f.tb=function(a,b){return b.set(this.u*a.x+this.w*a.y+this.C*a.z+this.s,this.A*a.x+this.m11*a.y+this.m21*a.z+this.m31,this.B*a.x+this.m12*a.y+this.m22*a.z+this.m32)};
function Nd(a,b,c){c.set(a.u*b.x+a.w*b.y+a.C*b.z,a.A*b.x+a.m11*b.y+a.m21*b.z,a.B*b.x+a.m12*b.y+a.m22*b.z)}f.$e=zd.prototype.$e;f.af=zd.prototype.af;f.Fd=zd.prototype.Fd;function Od(a){return new w(a.s,a.m31,a.m32)}f.ze=zd.prototype.ze;f.Ae=zd.prototype.Ae;f.Be=zd.prototype.Be;function Pd(a,b){a.s=b.x;a.m31=b.y;a.m32=b.z}
f.save=function(a){var b=new Uint8Array((new Float32Array([this.u,this.A,this.B,this.kb,this.w,this.m11,this.m12,this.m13,this.C,this.m21,this.m22,this.m23,this.s,this.m31,this.m32,this.m33])).buffer);a.set(b,a.position);a.position+=64};
f.load=function(a){a=a.slice(a.position,a.position+=64);a=new Float32Array(a.buffer);a=p(a);this.u=a.next().value;this.A=a.next().value;this.B=a.next().value;this.kb=a.next().value;this.w=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.m13=a.next().value;this.C=a.next().value;this.m21=a.next().value;this.m22=a.next().value;this.m23=a.next().value;this.s=a.next().value;this.m31=a.next().value;this.m32=a.next().value;this.m33=a.next().value};var Qd=new H;
function Sc(){this.v=Number.POSITIVE_INFINITY;this.D=Number.NEGATIVE_INFINITY;this.o=Number.POSITIVE_INFINITY;this.F=Number.NEGATIVE_INFINITY}Sc.prototype.Ma=function(a,b){a<this.v&&(this.v=a);a>this.D&&(this.D=a);b<this.o&&(this.o=b);b>this.F&&(this.F=b);return this};Sc.prototype.ql=function(a){this.Ma(a.v,a.o);this.Ma(a.D,a.F)};Sc.prototype.X=function(){var a=new Sc;a.v=this.v;a.D=this.D;a.o=this.o;a.F=this.F;return a};
Sc.prototype.Cf=function(a,b){return a<=this.v||a>=this.D||b<=this.o||b>=this.F?!1:!0};function Rd(){this.v=Number.POSITIVE_INFINITY;this.D=Number.NEGATIVE_INFINITY;this.o=Number.POSITIVE_INFINITY;this.F=Number.NEGATIVE_INFINITY;this.J=Number.POSITIVE_INFINITY;this.L=Number.NEGATIVE_INFINITY}Rd.prototype.Ma=function(a,b,c){a<this.v&&(this.v=a);a>this.D&&(this.D=a);b<this.o&&(this.o=b);b>this.F&&(this.F=b);c<this.J&&(this.J=c);c>this.L&&(this.L=c);return this};
Rd.prototype.ql=function(a){this.Ma(a.v,a.o,a.J);this.Ma(a.D,a.F,a.L)};Rd.prototype.X=function(){var a=new Rd;a.v=this.v;a.D=this.D;a.o=this.o;a.F=this.F;a.J=this.J;a.L=this.L;return a};function Sd(a,b){return a.v>=b.D||a.D<=b.v||a.o>=b.F||a.F<=b.o||a.J>=b.L||a.L<=b.J?!1:!0}Rd.prototype.Cf=function(a,b){return a<=this.v||a>=this.D||b<=this.o||b>=this.F||void 0<=this.J||void 0>=this.L?!1:!0};t.Node=function(a){this.name=a;this.children=this.parent=null;this.Kl=new eb(this);this.Ra=1;this.ja=t.ja;this.pa=-2147483648;return this};f=t.Node.prototype;f.create=function(){};f.remove=function(){K(this,null)};function Td(a,b){if(0!=b.call(a)&&a.children)for(a=a.children.first();null!=a.item;a=a.next)Td(a.item,b)}f.step=function(){};f.Xc=function(){};f.ab=function(){};function Ud(a){Td(a,function(){if(!this.ji())return!1;this.ab(void 0)})}f.ji=function(){return!this.Ra||this.ja.pa<t.j?!1:!0};
function K(a,b){if(a.parent)return a.parent=b,t.hk.push(a),a;if(b)return a.parent=b,Vd(a)}function Vd(a){fb(a.Kl);if(!a.parent)return a;a.parent.children||(a.parent.children=new db);gb(a.parent.children,a.Kl);return a}function Wd(a,b){a.ja=b;if(a.children)for(a=a.children.first();null!=a.item;a=a.next)Wd(a.item,b)}
f.log=function(){this.name?console.group(this.constructor.name+": "+this.name):console.group(this.constructor.name);if(this.children)for(var a=this.children.first();null!=a.item;a=a.next)a.item.log();console.groupEnd()};t.Ha=function(a){t.Node.call(this,a);this.transform=new H;this.La=null;this.O=new H};t.Ha.prototype=Object.create(t.Node.prototype);t.Ha.prototype.constructor=t.Ha;function Xd(a,b){var c=a.jh=new t.Yf;c.ja=a.ja;c.mb=1.75*b;c.La=a.O;K(c,t.hi)}
t.Ha.prototype.remove=function(){this.jh&&this.jh.remove();t.Node.prototype.remove.call(this)};t.Ha.prototype.save=function(a){Fb(a,"NG.Node3D");this.O.save()};t.Ha.prototype.step=function(){Yd(this)};function Yd(a){a.La?Cd(a.La,a.transform,a.O):a.O.set(a.transform)}t.ja={pa:NaN,lb:new w(1,1,1)};t.hk=[];t.jk=new t.Node("schedule");t.Zc=K(new t.Node("scene"),t.jk);t.inputs=K(new t.Node("inputs"),t.jk);function Zd(){this.Pb=new bb(Ab);this.Dc=new bb(Ab);this.va=new bb(Ab);this.P=new bb(Ab);this.W=new bb(Ab);return this}
Zd.prototype.save=function(a){Rb(a,this.Pb.elements.length);for(var b=0;b<this.Pb.elements.length;b++)this.Pb.elements[b].save(a);Rb(a,this.Dc.elements.length);for(b=0;b<this.Dc.elements.length;b++)this.Dc.elements[b].save(a);Rb(a,this.va.elements.length);for(b=0;b<this.va.elements.length;b++)this.va.elements[b].save(a);Rb(a,this.P.elements.length);for(b=0;b<this.P.elements.length;b++)this.P.elements[b].save(a);Rb(a,this.W.elements.length);for(b=0;b<this.W.elements.length;b++)this.W.elements[b].save(a)};
Zd.prototype.load=function(a){this.ag=0;var b=Nb(a);for(var c=0;c<b;c++){var d=new $d;d.load(a);this.Pb.replace(d)}b=Nb(a);for(c=0;c<b;c++)d=new he,d.load(a),this.Dc.replace(d);b=Nb(a);if(this.va.elements.length){for(c=0;c<b;c++)Bb(a),Hb(a),Hb(a);b=p(this.va.elements);for(c=b.next();!c.done;c=b.next())c.value.create()}else for(c=0;c<b;c++)d=new ie,d.load(a),this.va.replace(d);b=Nb(a);this.ag+=b;for(c=0;c<b;c++)d=new t.Ge,d.Sh=this,d.load(a),this.P.replace(d);b=Nb(a);this.ag+=b;for(c=0;c<b;c++)d=new t.Audio,
d.Sh=this,d.load(a),this.W.replace(d);0==this.ag&&this.ready&&this.ready.call(this)};function je(a){a.ag--;0<a.ag||a.ready&&a.ready.call(a)};t.Ba={musicEnabled:1,viewportFitWindow:1,viewportSize:16,lightingFancy:1,mouseRaw:1,mouseDPI:1600,mouseScale:3,wheelScale:1};
t.Zm=function(){t.xa={MoveForwardKey:"KeyW",MoveForwardMouseButton:"",MoveBackwardKey:"KeyS",MoveBackwardMouseButton:"",MoveLeftKey:"KeyA",MoveLeftMouseButton:"",MoveRightKey:"KeyD",MoveRightMouseButton:"",JumpKey:"Space",JumpMouseButton:"",ReloadKey:"KeyR",ReloadMouseButton:"",MasherKey:"KeyF",MasherMouseButton:"1",RevolverKey:"KeyQ",RevolverMouseButton:"",CarbineKey:"KeyE",CarbineMouseButton:"",ShotgunKey:"KeyC",ShotgunMouseButton:"",GrenadeKey:"KeyG",GrenadeMouseButton:"3",NextGunKey:"",NextGunMouseButton:"",
PrevGunKey:"",PrevGunMouseButton:"",GunFireKey:"",GunFireMouseButton:"0",GunActionKey:"",GunActionMouseButton:"2"}};t.Zm();
t.we=function(a,b){0==a?(ke.md=null,N.md=null,document.removeEventListener("keydown",ke.Zk),document.removeEventListener("keydown",ke.Mh),document.removeEventListener("mousedown",N.Mh),document.removeEventListener("wheel",N.$k),document.addEventListener("keydown",ke.bl),document.addEventListener("keyup",ke.cl),document.addEventListener("mousedown",N.dl),document.addEventListener("mouseup",N.el),document.addEventListener("wheel",N.fl),t.yk&&t.yk.remove()):(document.removeEventListener("keydown",ke.bl),
document.removeEventListener("keyup",ke.cl),document.removeEventListener("mousedown",N.dl),document.removeEventListener("mouseup",N.el),document.removeEventListener("wheel",N.fl),1==a?(ke.md=b,document.addEventListener("keydown",ke.Zk)):2==a&&(N.md=b,document.addEventListener("keydown",ke.Mh),document.addEventListener("mousedown",N.Mh),document.addEventListener("wheel",N.$k)))};var le=parseFloat(window.localStorage.getItem("version"));(isNaN(le)||.011>le)&&window.localStorage.clear();
window.localStorage.setItem("version",.019);for(var me in t.Ba){var ne=window.localStorage.getItem(me);null==ne?window.localStorage.setItem(me,t.Ba[me]):t.Ba[me]=parseFloat(ne)}for(var oe in t.xa){var pe=window.localStorage.getItem(oe);null==pe?window.localStorage.setItem(oe,t.xa[oe]):t.xa[oe]=pe}t.$i=function(){t.Qm=4294967296/(t.Ba.mouseDPI*t.Ba.mouseScale)};t.$i();t.Jh={};t.Jh.overflowX=document.body.style.overflowX;t.Jh.overflowY=document.body.style.overflowY;t.Jh.userSelect=document.body.style.userSelect;
u=t.canvas.getContext("webgl2",{alpha:!1,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1,vn:!0});t.xc={};t.j=NaN;t.Oh=0;t.Gi=1E3/60;t.pa=-2147483648;t.gf=function(){2147483647==t.pa&&(t.pa=-2147483648);t.pa++};t.dc=new F(0,0,0,0);t.Oj=new F(255,255,255,0);t.i=new Zd;t.G=null;t.lj=null;t.Xk=null;t.na=null;t.viewport=null;
t.Wm=function(){t.canvas.width=480;t.canvas.height=296;t.Dh=new Dc(480,296,null);t.di.width=480;t.di.height=296;t.di.create();t.ge.style.width=t.canvas.width+"px";t.ge.style.height=t.canvas.height+"px";document.body.style.width=t.canvas.width+"px";t.Dg()};t.zl=0;
t.Dg=function(a){var b=Math.min(window.innerWidth/document.body.clientWidth,window.innerHeight/document.body.clientHeight);b=Math.floor(8*b);b=Math.max(b,12);var c=t.Ba.viewportFitWindow?b:t.Ba.viewportSize;a&&(c+=a,t.Ba.viewportFitWindow=0,t.Zh?t.Zh.checked=!1:window.localStorage.setItem("viewportFitWindow",0));b=t.zl=Math.max(t.zl,b);c=Wa(c,12,b);t.Ba.viewportSize=c;t.Zh||window.localStorage.setItem("viewportSize",c);document.body.style.transform="scale("+c/8+")"};
window.onresize=function(){document.body.style.left=(window.innerWidth-t.canvas.width>>1)+"px";t.Dg()};t.ii=function(a){u.viewport(a.x,a.y,a.a,a.c);t.viewport=a;t.xc.kd.M("viewport",new E(a.a,a.c),!0);t.xc.kd.upload()};t.Ml=function(a){t.na=a};t.eb=function(a){t.G!=a&&(t.G=a.bind())};t.Cb=function(a){t.lj!=a&&(t.lj=a.bind())};t.lf=function(a){a&&t.Xk!=a&&(t.Xk=a.bind())};
t.Ib=function(a,b){u.activeTexture(u.TEXTURE0+a);b?(u.bindTexture(u.TEXTURE_2D,b.object),t.G.M("enableTexture"+a,1,!0)):(u.bindTexture(u.TEXTURE_2D,null),t.G.M("enableTexture"+a,0,!0))};t.sb=function(a){if(t.Ia!=a){switch(a){case 0:u.disable(u.BLEND);break;case 1:u.enable(u.BLEND);u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case 2:u.enable(u.BLEND),u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA)}t.Ia=a}};
t.ec=function(a){if(t.depth!=a){switch(a){case 0:u.disable(u.DEPTH_TEST);break;case 1:u.enable(u.DEPTH_TEST);u.depthMask(!1);break;case 2:u.enable(u.DEPTH_TEST),u.depthMask(!0)}t.depth=a}};t.Xb=function(a){if(t.facing!=a){switch(a){case 0:u.disable(u.CULL_FACE);break;case 1:u.enable(u.CULL_FACE);u.frontFace(u.CCW);break;case 2:u.enable(u.CULL_FACE),u.frontFace(u.CW)}t.facing=a}};for(var qe=0;4>qe;qe++)u.enableVertexAttribArray(qe);u.clearColor(0,0,0,0);u.depthFunc(u.LEQUAL);
t.start=function(){t.xc.kd.create(["u_eyeMatrix","u_viewMatrix","u_cameraPos","u_viewport"]);t.xc.Hl.create([]);requestAnimationFrame(function(a){t.Lf.time=a;t.Lf.ln=a;t.Ii=a;t.loop(a)})};t.Lf={};t.Lf.time=0;t.Lf.Bb=0;t.Lf.sl=0;t.Lf.Vm=function(a){this.ln=a;a>=this.time+1E3&&(this.sl=this.Bb=0,this.time+=1E3);this.Bb++};t.paused=!0;
t.loop=function(a){var b=(t.Ii-a)/t.Gi;if(!(.5<b))if(-.5>b&&(t.Ii=a,t.Lf.sl++),t.Ii+=t.Gi,2==t.bj&&t.b.pause(),t.paused)t.b&&t.b.hn(),t.Oh++;else{t.Lf.Vm(a);if(t.Ol){t.Ol--;requestAnimationFrame(t.loop);return}t.tm=a+t.Gi;Td(t.jk,function(){this.step()});a=p(t.hk);for(b=a.next();!b.done;b=a.next())Vd(b.value);t.hk.length=0;t.j++}requestAnimationFrame(t.loop)};t.zn=function(a,b){for(var c=[],d=Math.floor(640/a);1920>=a*d;d++)c.push([a*d,b*d]);return c};function re(a,b){a=u.createShader(a);u.shaderSource(a,b);u.compileShader(a);if(u.getShaderParameter(a,u.COMPILE_STATUS))return a;console.log(b);console.log(u.getShaderInfoLog(a));u.deleteShader(a)}function ie(){this.name=void 0;this.Ga={};this.kj={}}f=ie.prototype;
f.create=function(){this.an=re(u.VERTEX_SHADER,this.sk);this.$m=re(u.FRAGMENT_SHADER,this.rk);var a=this.$m;var b=this.sn;var c=u.createProgram();u.attachShader(c,this.an);u.attachShader(c,a);if(b)for(a=0;a<b.length;a++)u.bindAttribLocation(c,a,b[a]);else u.bindAttribLocation(c,0,"a_position"),u.bindAttribLocation(c,1,"a_texture0"),u.bindAttribLocation(c,2,"a_color"),u.bindAttribLocation(c,3,"a_basisZ");u.linkProgram(c);u.getProgramParameter(c,u.LINK_STATUS)?b=c:(console.log(u.getProgramInfoLog(c)),
u.deleteShader(c),b=void 0);this.hh=b;t.eb(this)};
f.M=function(a,b,c){a="u_"+a;this.Ga.hasOwnProperty(a)||(this.Ga[a]=u.getUniformLocation(this.hh,a));var d=this.kj[a];c?d!=b&&(this.kj[a]=b,u.uniform1i(this.Ga[a],b)):isNaN(b)?b instanceof Float32Array?u.uniform3fv(this.Ga[a],b):b instanceof H?u.uniformMatrix4fv(this.Ga[a],!1,b.ee()):b instanceof F?(this.kj[a]=b,u.uniform4f(this.Ga[a],b.r/255,b.bb/255,b.qa/255,b.Ka/255)):b instanceof yd?u.uniform4f(this.Ga[a],b.x,b.y,b.z,b.a):b instanceof w?u.uniform3f(this.Ga[a],b.x,b.y,b.z):b instanceof E&&u.uniform2f(this.Ga[a],
b.x,b.y):d!=b&&(this.kj[a]=b,u.uniform1f(this.Ga[a],b))};f.bind=function(){u.useProgram(this.hh);return this};f.load=function(a){this.name=Bb(a);this.sk=Hb(a);this.rk=Hb(a);this.create();delete this.sk;delete this.rk};f.save=function(a){Fb(a,this.name);Jb(a,this.sk);Jb(a,this.rk)};function se(){this.usage=this.target=null;this.pl=u.createBuffer();this.buffer=null}se.prototype.bind=function(){u.bindBuffer(this.target,this.pl);return this};function te(a,b){a.buffer=new ArrayBuffer(b);u.bufferData(a.target,a.buffer,a.usage)}se.prototype.upload=function(){u.bufferSubData(this.target,0,this.buffer);return this};function ue(){se.call(this);this.target=u.ARRAY_BUFFER;this.usage=u.STATIC_DRAW;this.Qb=32;t.lj=null;t.Cb(this)}ue.prototype=Object.create(se.prototype);
ue.prototype.constructor=ue;ue.prototype.bind=function(){se.prototype.bind.call(this);u.vertexAttribPointer(0,3,u.FLOAT,!1,this.Qb,0);u.vertexAttribPointer(1,2,u.FLOAT,!1,this.Qb,12);u.vertexAttribPointer(2,4,u.UNSIGNED_BYTE,!0,this.Qb,20);u.vertexAttribPointer(3,3,u.SHORT,!0,this.Qb,24);return this};ue.prototype.upload=function(a){this.write(a);se.prototype.upload.call(this);return this};
function ve(a){var b=t.lj;b.buffer=new ArrayBuffer(a.length*b.Qb);b.write(a);u.bufferData(b.target,b.buffer,b.usage)}
ue.prototype.write=function(a,b){b*=this.Qb;var c=new Float32Array(this.buffer,b),d=new Int16Array(this.buffer,b);b=new Uint8Array(this.buffer,b);for(var e=0;e<a.length;e++){var h=a[e];var g=c;var k=e*this.Qb>>>2;g[k]=h.x;g[k+1]=h.y;g[k+2]=h.z;k=e*this.Qb+12>>>2;g[k]=h.fd;g[k+1]=h.gd;g=b;k=e*this.Qb+20;g[k]=h.ma;g[k+1]=h.Td;g[k+2]=h.Sd;g[k+3]=h.Fa;g=d;k=e*this.Qb+24>>>1;g[k]=h.Ac;g[k+1]=h.Tc;g[k+2]=h.Eb}return this};
function we(){se.call(this);this.target=u.ELEMENT_ARRAY_BUFFER;this.usage=u.STATIC_DRAW;t.lf(this)}we.prototype=Object.create(se.prototype);we.prototype.constructor=we;we.prototype.upload=function(a){(new Uint16Array(this.buffer)).set(a);return se.prototype.upload.call(this)};function xe(){se.call(this);this.target=u.UNIFORM_BUFFER;this.usage=u.DYNAMIC_DRAW;this.uj=null;this.ni=this.yi=0;this.Ga={};se.prototype.bind.call(this)}xe.prototype=Object.create(se.prototype);xe.prototype.constructor=xe;
xe.prototype.create=function(a){u.bindBufferBase(this.target,this.yi,this.pl);for(var b=0;b<t.i.va.elements.length;b++){var c=t.i.va.elements[b];t.eb(c);u.uniformBlockBinding(c.hh,u.getUniformBlockIndex(c.hh,this.uj),this.yi)}b=u.getUniformIndices(t.G.hh,a);c=p(b);for(var d=c.next();!d.done;d=c.next())if(d.value==u.INVALID_INDEX)return console.log("uniform not found ",this),this;b=u.getActiveUniforms(t.G.hh,b,u.UNIFORM_OFFSET);for(c=0;c<a.length;c++)this.Ga[a[c]]=b[c];return this};
xe.prototype.M=function(a,b,c){a="u_"+a;b instanceof H?b.ee(new Float32Array(this.buffer,this.Ga[a],16)):b instanceof F||(b instanceof yd?b.ee(new Float32Array(this.buffer,this.Ga[a],4)):b instanceof w||b instanceof E&&(c?b.ee(new Uint32Array(this.buffer,this.Ga[a],2)):b.ee(new Float32Array(this.buffer,this.Ga[a],2))))};xe.prototype.upload=function(){se.prototype.bind.call(this);u.bufferData(this.target,this.buffer.byteLength,this.usage);u.bufferSubData(this.target,0,this.buffer);return this};
var ye,ze=ye=new ue;ze.usage=u.STATIC_DRAW;ze.pi=[];var Ae,Be=Ae=new we;Be.usage=u.STATIC_DRAW;Be.elements=[];var Me=t.xc.kd=new xe;Me.uj="Common";Me.yi=0;Me.ni=160;te(Me,Me.ni);var Ne=t.xc.Hl=new xe;Ne.uj="PortalLights";Ne.yi=1;Ne.ni=480;te(Ne,64*Ne.ni);function $d(){this.name="defaultMaterial";this.me=new F(255,255,255,255);this.Md=new F(255,255,255,51);this.ad=4;this.bd=1;this.lg=new F(0,0,0,0);this.Ia=0;return this}function Oe(a,b){if(a.name<b.name)return-1;if(a.name>b.name)return 1;var c=fd(a.me,b.me);if(0!=c)return c;c=fd(a.Md,b.Md);if(0!=c)return c;c=fd(a.lg,b.lg);return 0!=c?c:a.ad<b.ad?-1:a.ad>b.ad?1:a.bd<b.bd?-1:a.bd>b.bd?1:a.Ia<b.Ia?-1:a.Ia>b.Ia?1:0}
$d.prototype.X=function(){var a=new $d;a.me=this.me;a.Md=this.Md;a.ad=this.ad;a.bd=this.bd;a.lg=this.lg;a.Ia=this.Ia;return a};$d.prototype.bind=function(){t.G.M("color",this.me);t.G.M("specularColor",this.Md);t.G.M("specularExponent",this.ad);t.G.M("specularSheen",this.bd);t.G.M("emissiveColor",this.lg)};$d.prototype.save=function(a){Fb(a,this.name);this.me.save(a);this.Md.save(a);Rb(a,Math.floor(1024*this.ad));Gb(a,Math.floor(255*this.bd));this.lg.save(a);Gb(a,this.Ia);return a};
$d.prototype.load=function(a){this.name=Bb(a);this.me=gd(a);this.Md=gd(a);this.ad=Nb(a)/1024;this.bd=Cb(a)/255;this.lg=gd(a);this.Ia=Cb(a)};var Pe=t.i,Qe=new $d;Pe.Pb.replace(Qe);t.Ge=function(){this.Ni=u.RGBA8;this.height=this.width=2;this.border=0;this.format=u.RGBA;this.type=u.UNSIGNED_BYTE;this.data=null;this.Mf=t.Ge.Mf;this.Zg=t.Ge.Zg;this.Fk=this.Ek=u.CLAMP_TO_EDGE};t.Ge.Mf=u.NEAREST;t.Ge.Zg=u.NEAREST;
t.Ge.prototype.create=function(){this.Sh&&je(this.Sh);u.activeTexture(u.TEXTURE0);this.object=u.createTexture();u.bindTexture(u.TEXTURE_2D,this.object);u.texImage2D(u.TEXTURE_2D,0,this.Ni,this.width,this.height,this.border,this.format,this.type,this.data);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.Mf);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,this.Zg);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,this.Ek);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,this.Fk);9984<=this.Mf&&9987>=
this.Mf&&u.generateMipmap(u.TEXTURE_2D)};
t.Ge.prototype.load=function(a){this.name=Bb(a);this.Ni=Nb(a);this.width=Nb(a);this.height=Nb(a);this.border=Nb(a);this.format=Nb(a);this.type=Nb(a);this.Mf=Nb(a);this.Zg=Nb(a);this.Ek=Nb(a);this.Fk=Nb(a);this.ke=new F(Cb(a),Cb(a),Cb(a),Cb(a));var b=Ib(a);a=a.slice(a.position,a.position+=b);a=new Blob([a],{type:"image/png"});this.data=new Image;this.data.parent=this;this.data.onload=function(){this.parent.width=this.width;this.parent.height=this.height;this.parent.create()};this.data.src=URL.createObjectURL(a)};
t.Ge.prototype.save=function(a){Fb(a,this.name);Rb(a,this.Ni);Rb(a,this.width);Rb(a,this.height);Rb(a,this.border);Rb(a,this.format);Rb(a,this.type);Rb(a,this.Mf);Rb(a,this.Zg);Rb(a,this.Ek);Rb(a,this.Fk);Gb(a,this.ke.r);Gb(a,this.ke.bb);Gb(a,this.ke.qa);Gb(a,this.ke.Ka);Kb(a,this.Nh.length);a.set(this.Nh,a.position);a.position+=this.Nh.length};
t.Mi=function(a){a.ml=[];a.nl=[];for(var b=0,c=0,d=0;d<a.qe.length;d++)b+a.qe[d]+1>a.width&&(b=0,c+=a.bf+1),a.ml.push(b/a.width),a.nl.push(c/a.width),b+=a.qe[d]+1,a.qe[d]/=a.width,a.Vg[d]/=a.width,a.rg[d]/=a.width;a.bf/=a.height;a.kl=function(e){switch(e){case "0":return 0;case "1":return 1;case "2":return 2;case "3":return 3;case "4":return 4;case "5":return 5;case "6":return 6;case "7":return 7;case "8":return 8;case "9":return 9;case ",":return 10;case "/":return 11;case " ":return 12}return-1}};
t.Rh=function(a,b,c){for(var d=[],e=0,h=0;h<b.length;h++){var g=a.kl(b.charAt(h)),k=a.ml[g],l=a.nl[g],m=a.qe[g],n=a.bf;e+=a.Vg[g];c&&(l+=.5);d.push(sd(new ld(e,0+n,0),k,l));d.push(sd(new ld(e,0,0),k,l+n));d.push(sd(new ld(e+m,0,0),k+m,l+n));d.push(sd(new ld(e+m,0,0),k+m,l+n));d.push(sd(new ld(e+m,0+n,0),k+m,l));d.push(sd(new ld(e,0+n,0),k,l));e+=m;e+=a.rg[g]}d.width=e;d.height=a.bf;d.Fg=a;return d};var N=new t.Node("mouse");N.lock=!1;N.d={};N.p={};N.Mh=function(a){t.xa[N.md.name+"MouseButton"]=a.button;N.md.innerHTML=""+a.button;t.i.W.get("woodSnap02").play();t.we(0)};N.$k=function(a){a=0<a.deltaY?"WheelDown":"WheelUp";t.xa[N.md.name+"MouseButton"]=a;N.md.innerHTML=a;t.i.W.get("woodSnap02").play();t.we(0)};N.dl=function(a){document.pointerLockElement&&(a.preventDefault(),a.stopPropagation());N.p[a.button]=!0;N.d[a.button]=!0};N.r={};N.el=function(a){N.r[a.button]=!0;N.d[a.button]=!1};N.a=0;
N.Vl=-Infinity;N.fl=function(a){var b=performance.now();375>b-N.Vl?1<Math.abs(Math.sign(a.deltaY)-Math.sign(N.a))&&(N.a=0):N.a=0;N.a+=a.deltaY;N.Vl=b;N.a<=-t.Ba.wheelScale?(N.p.WheelUp=!0,N.a=0):N.a>=t.Ba.wheelScale&&(N.p.WheelDown=!0,N.a=0)};N.h=new E(0,0);N.Lc=new E(0,0);document.addEventListener("mousemove",function(a){N.h.set(a.clientX,a.clientY);N.Lc.x+=a.movementX;N.Lc.y+=a.movementY});
N.step=function(){t.Node.prototype.step.call(this);N.Lc.set(0,0);var a=Object.getOwnPropertyNames(N.r);var b=p(a);for(a=b.next();!a.done;a=b.next())N.r[a.value]=!1;N.r.WheelDown=N.p.WheelDown;N.r.WheelUp=N.p.WheelUp;a=Object.getOwnPropertyNames(N.p);b=p(a);for(a=b.next();!a.done;a=b.next())N.p[a.value]=!1};
N.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=p(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=p(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=p(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1;N.a=0;N.h.set(0,0);N.Lc.set(0,0)};K(N,t.inputs);N.lk=function(a){a?document.documentElement.requestPointerLock({unadjustedMovement:t.Ba.mouseRaw}):document.pointerLockElement&&document.exitPointerLock()};
document.addEventListener("pointerlockchange",function(){if(document.pointerLockElement)N.lock=!0,document.body.style.overflowX="hidden",document.body.style.overflowY="hidden",document.body.style.userSelect="none";else{N.lock=!1;for(var a=p(Object.getOwnPropertyNames(t.Jh)),b=a.next();!b.done;b=a.next())b=b.value,document.body.style[b]=t.Jh[b]}});var ke=new t.Node("keyboard");ke.d={};ke.p={};ke.Zk=function(a){"Backspace"==a.code?(t.xa[ke.md.name+"Key"]="",ke.md.innerHTML="",t.i.W.get("woodSnap02").play(),t.we(0)):"Escape"==a.code?t.we(0):("Tab"==a.code&&(a.preventDefault(),a.stopPropagation()),"ControlLeft"!=a.code&&"ControlRight"!=a.code&&"ShiftLeft"!=a.code&&"ShiftRight"!=a.code&&(t.xa[ke.md.name+"Key"]=a.code,ke.md.innerHTML=""+a.code,t.i.W.get("woodSnap02").play(),t.we(0)))};
ke.Mh=function(a){"Backspace"==a.code?(t.xa[N.md.name+"MouseButton"]="",N.md.innerHTML="",t.i.W.get("woodSnap02").play(),t.we(0)):"Escape"==a.code?t.we(0):"Tab"==a.code&&(a.preventDefault(),a.stopPropagation())};
ke.bl=function(a){a.code&&(document.pointerLockElement&&"Tab"==a.code&&(a.preventDefault(),a.stopPropagation()),"ControlLeft"!=a.code&&"ControlRight"!=a.code&&"ShiftLeft"!=a.code&&"ShiftRight"!=a.code&&("Minus"==a.code?(t.i.W.get("hit02").play({gain:1,pitch:.875}),t.Dg(-1)):"Equal"==a.code?(t.i.W.get("hit02").play({gain:1,pitch:1.125}),t.Dg(1)):"KeyM"==a.code&&(t.Audio.Ob(1-t.Ba.musicEnabled),t.Vi?t.Vi.checked=t.Ba.musicEnabled:window.localStorage.setItem("musicEnabled",t.Ba.musicEnabled)),ke.d[a.code]||
(ke.p[a.code]=!0),ke.d[a.code]=!0))};ke.r={};ke.cl=function(a){a.code&&(ke.r[a.code]=!0,ke.d[a.code]=!1)};ke.step=function(){t.Node.prototype.step.call(this);var a=Object.getOwnPropertyNames(this.p);var b=p(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=p(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1};
ke.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=p(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=p(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=p(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1};K(ke,t.inputs);t.Audio=function(){this.buffer=null;return this};t.Audio.S=new AudioContext;var Re=t.Audio.Sc=t.Audio.S.createGain();Re.gain.value=.5;Re.connect(t.Audio.S.destination);var Se=t.Audio.wb=t.Audio.S.createGain();Se.gain.value=0;Se.connect(t.Audio.S.destination);t.Audio.Xf=function(a){t.Audio.Sc.gain.value=a};t.Audio.Ob=function(a){t.Audio.wb.gain.value=a;t.Ba.musicEnabled=a};
t.Audio.prototype.play=function(a){a?(void 0===a.gain&&(a.gain=1),void 0===a.pitch&&(a.pitch=1),void 0===a.Pf&&(a.Pf=0),void 0===a.delay&&(a.delay=0)):a={gain:1,pitch:1,Pf:0,delay:0};var b=t.Audio.S.createGain();b.gain.value=a.gain;b.connect(t.Audio.Sc);var c=new AudioBufferSourceNode(t.Audio.S);c.connect(b);a.loop?c.loop=!0:c.onended=function(){b.disconnect(t.Audio.Sc)};c.Ze=b;c.playbackRate.value=(1-a.Pf+Math.random()*a.Pf*2)*a.pitch;c.buffer=this.buffer;void 0===a.time?c.start(t.Audio.S.currentTime+
a.delay):c.start(a.time+a.delay);return c};t.Audio.prototype.load=function(a){this.name=Bb(a);var b=Ib(a);a=a.slice(a.position,a.position+=b);var c=this;t.Audio.S.decodeAudioData(a.buffer).then(function(d){c.buffer=d;c.Sh&&je(c.Sh)})};t.Audio.prototype.save=function(a){Fb(a,this.name);Kb(a,this.Nh.length);a.set(this.Nh,a.position);a.position+=this.Nh.length};function Te(){this.bg=NaN;this.Uh=-1;this.Si=new BiquadFilterNode(t.Audio.S,{type:"lowpass",Q:12,frequency:140});this.Si.connect(t.Audio.wb);this.Ze=t.Audio.S.createGain();this.Ze.gain.value=1;this.Ze.connect(this.Si)}function Ue(a){var b=t.b.ff;b.Uh=a;t.b.Ui=2<=b.Uh?Math.round(3+10*(t.b.ea.Da.je-1)/4):0}
Te.prototype.play=function(a){var b=this;if(a.audio){var c=new AudioBufferSourceNode(t.Audio.S);c.buffer=a.audio.buffer;c.connect(this.Ze);this.bg+=a.Dn;c.start(this.bg);setTimeout(function(){t.b.Ui=2<=b.Uh?Math.round(3+10*(t.b.ea.Da.je-1)/4):0},1E3*(this.bg-t.Audio.S.currentTime));c.onended=function(){this.disconnect(this.Ze)}}setTimeout(function(){b.play(a.yn())},1E3*(this.bg-t.Audio.S.currentTime+a.duration)-100);this.bg+=a.duration};var Ve,We=[],Xe=0;function Ye(a){return We[a-Xe]}var Ze=new bb(lb),$e=new db,kb=new db,af=new H;af.scale(.99609375,.99609375,.99609375);function bf(a){var b=Ze.get(a);if(b)return b;b=new cf(a);Ze.push(b);return b}function df(a){a=ef(a);return new E(a.x-4096<<19,a.y-4096<<19)}function ff(a,b){function c(d){d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;return(d|d<<1)&1431655765}return c(a)<<1|c(b)}
function ef(a){function b(c){c=(c|c>>1)&858993459;c=(c|c>>2)&252645135;c=(c|c>>4)&16711935;return(c|c>>8)&65535}a=new E(a>>>1&1431655765,a>>>0&1431655765);a.x=b(a.x);a.y=b(a.y);return a}
function gf(a,b){isNaN(a)&&(a=0);isNaN(b)&&(b=Ze.elements.length-1);if(a==b)return Ze.elements[a];for(var c=Ze.elements[a].index,d=c^Ze.elements[b].index,e=0;d>>=1;)e++;var h=1<<e,g=(2<<e)-1,k=a,l=b+1;for(d=Math.floor(k/2+l/2);k<l;){var m=Ze.elements[d].index&g;if(h<m)l=d,d=Math.floor(k/2+l/2);else if(h>m)k=d+1,d=Math.floor(k/2+l/2);else break}c=e&1?new hf(ef(c&~g|h).x):new jf(ef(c&~g|h).y);c.value-=4096;c.value<<=19;c.Qe=gf(a,d-1);c.Re=gf(d,b);return c}function hf(a){this.value=a}
function jf(a){this.value=a}function kf(a,b,c){this.start=a;this.Lc=b;this.mb=c;this.Pc=[new lf(Ve,0,1)];this.t=0}function lf(a,b,c){this.node=a;this.Wa=b;this.od=c}kf.prototype.next=function(){for(;this.Pc.length;){var a=this.Pc.shift();this.t=a.Wa;if(a.node instanceof cf)return a;this.Yc(a)}return null};
kf.prototype.Yc=function(a){var b=a.node;if(b instanceof hf){var c=this.start.z;var d=this.Lc.z}else c=this.start.x,d=this.Lc.x;if(0<d){var e=new lf(b.Re,(b.value-this.mb-c)/d,a.od);e.Wa<=a.od&&e.od>=a.Wa&&this.Pc.unshift(e);c=new lf(b.Qe,a.Wa,(b.value+this.mb-c)/d);c.Wa<=a.od&&c.od>=a.Wa&&this.Pc.unshift(c)}else 0>d?(e=new lf(b.Qe,(b.value+this.mb-c)/d,a.od),e.Wa<=a.od&&e.od>=a.Wa&&this.Pc.unshift(e),c=new lf(b.Re,a.Wa,(b.value-this.mb-c)/d),c.Wa<=a.od&&c.od>=a.Wa&&this.Pc.unshift(c)):(c>=b.value-
this.mb&&this.Pc.unshift(new lf(b.Re,a.Wa,a.od)),c<=b.value+this.mb&&this.Pc.unshift(new lf(b.Qe,a.Wa,a.od)))};
function mf(a,b,c){c=void 0===c?nf:c;if(!Ze.elements.length)return null;for(var d=b.length(),e=new kf(a,b,0),h,g=null,k=1;(h=e.next())&&!(h.t>k);){for(var l=function(r){if(c(r.flags)){var q=r.eg(a,0,0,b);!q||q.t>k||(q.d=q.t*d,-1>q.d||(r.item&&(q.item=r.item),g=q,k=q.t))}},m=p(h.node.wa),n=m.next();!n.done;n=m.next())l(n.value);h=p(h.node.Ed);for(n=h.next();!n.done;n=h.next())l(n.value)}return g}
function of(a,b){var c=void 0===c?nf:c;if(!Ze.elements.length)return null;var d=b.length(),e=new kf(a,b,0),h,g=[];for(g.cmp=pf;(h=e.next())&&!(1<h.t);){for(var k=function(r){if(c(r.flags)){var q=r.eg(a,0,0,b);!q||1<q.t||(q.d=q.t*d,-1>q.d||(r.item&&(q.item=r.item),q.Wa=!0,Ra(g,q)))}},l=function(r){r=r.Qh();if(c(r.flags)){var q=r.eg(a,0,0,b);!q||1<q.t||(q.d=q.t*d,-1>q.d||(r.item&&(q.item=r.item),q.Wa=!1,Ra(g,q)))}},m=p(h.node.wa),n=m.next();!n.done;n=m.next())k(n.value);m=p(h.node.Ed);for(n=m.next();!n.done;n=
m.next())k(n.value);k=p(h.node.wa);for(n=k.next();!n.done;n=k.next())l(n.value);h=p(h.node.Ed);for(n=h.next();!n.done;n=h.next())l(n.value)}return g}
function qf(a,b){var c=void 0===c?nf:c;if(0==Ze.elements.length)return null;for(var d=new kf(a,new w(240*b.x,0,240*b.z),0),e,h=null,g=240;(e=d.next())&&!(240*e.t>g);){for(var k=function(n){c(n.flags)&&(!(n=n.wk(a,b))||n.t>g||(h=n,g=n.t))},l=p(e.node.wa),m=l.next();!m.done;m=l.next())k(m.value);e=p(e.node.Ed);for(m=e.next();!m.done;m=e.next())k(m.value)}return h}function rf(a,b){return sf(a.z-b,a.x-b,a.z+b,a.x+b,void 0)}
function sf(a,b,c,d,e){e||(e=[]);for(var h=[Ve];h.length;){var g=h.shift();g instanceof hf?(a<=g.value&&h.push(g.Qe),c>=g.value&&h.push(g.Re)):g instanceof jf?(b<=g.value&&h.push(g.Qe),d>=g.value&&h.push(g.Re)):e.push(g)}return e};var tf,uf,vf,wf;
function xf(){tf=!1;uf=[];var a=vf;vf=[[Array(We.length),Array(We.length),Array(We.length)],[Array(We.length),Array(We.length),Array(We.length)]];if(a)for(var b=p(We),c=b.next();!c.done;c=b.next()){var d=c.value;c=d.index-Xe;d=d.index-a.ca;for(var e=0;2>e;e++)vf[e][0][c]=a[e][0][d],vf[e][1][c]=a[e][1][d],vf[e][2][c]=a[e][2][d]}vf.ca=Xe;wf=0;a=p(We);for(c=a.next();!c.done;c=a.next()){b=c.value;b.$c||(c=new yf,c.Vh=b,c.xg=b,c.ed=b.ed,c.Zi=[Xa(.05,.95,b.Yb.x),Xa(.05,.95,b.Yb.y),Xa(.05,.95,b.Yb.z)],uf.push(c));
b.tk=b.ed;c=p(b.Hb);for(d=c.next();!d.done;d=c.next())b.tk+=zf(d.value);for(c=0;c<b.Hb.length;c++)d=new yf,d.Vh=b,d.xg=Ye(b.Hb[c].td.ca),d.Fc=b.Hb[c],d.ed=zf(d.Fc),d.Zi=[1,1,1],uf.push(d),d=new yf,d.Vh=b,d.xg=b,d.Fc=b.Hb[c],d.ed=Af(d.Fc),d.Zi=[.625,.625,.625],uf.push(d)}}function yf(){this.xg=this.Vh=null;this.ed=0;this.Zi=null}
function Bf(a,b,c){this.Z=a;this.n=new E(a.l-a.H,a.K-a.m);this.n.x/=a.length;this.n.y/=a.length;this.Bl=this.Z.m*this.n.x+this.Z.l*this.n.y;this.o=b;this.F=c;this.height=c-b}Bf.prototype.ee=function(a){var b=0,c=Cf(this);a[b++]=c.x;a[b++]=c.y;a[b++]=c.z;a[b++]=this.Bl;a[b++]=this.Z.m;a[b++]=this.Z.l;a[b++]=this.Z.K;a[b++]=this.Z.H;a[b++]=this.n.x;a[b++]=this.n.y;a[b++]=this.o;a[b++]=this.F;return a};function Cf(a){return wd(bg[a.ca-cg].ja.lb,bg[a.td.ca-cg].ja.lb,.5)}
function dg(a,b){function c(h,g){return Math.acos(Wa(td(h,g)/Math.sqrt(td(h,h)*td(g,g)),-1,1))/Math.PI}var d=b.z*a.n.x+b.x*a.n.y-a.Bl;if(0>=d)return 0;var e=c(new E(a.Z.K-b.z,a.Z.H-b.x),new E(a.Z.m-b.z,a.Z.l-b.x));a=c(new E(d,a.F-b.y),new E(d,a.o-b.y));return Wa(e*a,0,1)}function zf(a){return a.Z.length/1E5*((a.F-a.o)/1E5)}function Af(a){return a.Z.length/1E5*((a.height-(a.F-a.o))/1E5)}
function eg(a,b,c){c.set(0,0,0);for(var d=1,e=p(b.Hb),h=e.next();!h.done;h=e.next()){var g=h.value;h=dg(g,a);d-=h;g=Cf(g);c.x+=g.x*h;c.y+=g.y*h;c.z+=g.z*h}0<d&&(a=b.ja.lb,c.x+=a.x*d,c.y+=a.y*d,c.z+=a.z*d)};function fg(a){t.Ha.call(this,a);this.ck=new H;this.Ud=45*Math.PI/180;this.wg=1E4;this.og=1E9;this.rect=null;this.Di=new H;this.Ck=new H}fg.prototype=Object.create(t.Ha.prototype);fg.prototype.constructor=fg;fg.qj=Math.tan(jc(30));fg.bm=function(a,b,c,d){d.u=2/a.a;d.A=0;d.B=0;d.kb=0;d.w=0;d.m11=2/a.c;d.m12=0;d.m13=0;d.C=0;d.m21=0;d.m22=-2/(c-b);d.m23=0;d.s=0;d.m31=0;d.m32=-(c+b)/(c-b);d.m33=1};fg.$l=function(a,b,c){c=Math.tan(c)*a;var d=c*t.viewport.ratio;return{n:a,xn:b,t:c,qa:2*-c+c,r:d,Lm:-d}};
fg.Zl=function(a,b,c,d,e,h,g){g.u=2*a/(d-c);g.A=0;g.B=0;g.kb=0;g.w=0;g.m11=2*a/(e-h);g.m12=0;g.m13=0;g.C=(d+c)/(d-c);g.m21=(e+h)/(e-h);g.m22=(b+a)/(a-b);g.m23=-1;g.s=0;g.m31=0;g.m32=2*b*a/(a-b);g.m33=0};fg.qn=function(a,b,c,d,e){var h=b*fg.qj;c*=fg.qj;d=Math.tan(d);b=h/d;c/=d;e.u=b/(h*a.ratio);e.A=0;e.B=0;e.kb=0;e.w=0;e.m11=b/h;e.m12=0;e.m13=0;e.C=0;e.m21=0;e.m22=-(c+b)/(c-b);e.m23=-1;e.s=0;e.m31=0;e.m32=-(2*c*b)/(c-b);e.m33=0;return e};fg.prototype.step=function(){t.Ha.prototype.step.call(this)};
function gg(a){if(a.rect)fg.bm(a.rect,a.wg,a.og,a.ck);else{var b=fg.$l(a.wg,a.og,a.Ud);fg.Zl(a.wg,a.og,b.Lm,b.r,b.t,b.qa,a.ck)}a.O.Pj(a.Di);Cd(a.ck,a.Di,a.Ck);t.xc.kd.M("eyeMatrix",a.Di);t.xc.kd.M("viewMatrix",a.Ck);t.xc.kd.M("cameraPos",new yd(a.O.s,a.O.m31,a.O.m32,a.O.m33));t.xc.kd.upload()}
function hg(){function a(d){t.Ml(d);gg(d);fg.em(d);Ud(t.Zc)}var b=t.b.na;if(b.jn){var c=new Dc(b.rect.a/2,b.rect.c,null);c.x=t.Dh.x;c.y=t.Dh.y;t.ii(c);a(b.Mk);c=new Dc(b.rect.a/2,b.rect.c,null);c.x=t.Dh.x+c.a;c.y=t.Dh.y;t.ii(c);a(b.Lk)}else t.ii(t.Dh),a(b)}
fg.em=function(a){function b(m,n){function r(y){function x(I){A.Ma(Math.atan2(I.x,-I.z),Math.atan2(I.y,-I.z))}var A=new Sc;A.Fc=y;y=[new w(y.Z.H,y.o,y.Z.K),new w(y.Z.l,y.o,y.Z.m),new w(y.Z.l,y.F,y.Z.m),new w(y.Z.H,y.F,y.Z.K)];for(var z=p(y),D=z.next();!D.done;D=z.next())D=D.value,a.Di.tb(D,D);z=y[y.length-1];y=p(y);for(D=y.next();!D.done;D=y.next())D=D.value,0>=D.z&&x(D),2==Math.abs(Math.sign(D.z)-Math.sign(z.z))&&x(wd(z,D,z.z/(z.z-D.z))),z=D;return A}if((!t.Hn||n!=a.Pa)&&n.ja.pa!=t.j){n.ja.pa=t.j;
n.Ul=l++;for(var q=p(n.cells.elements),v=q.next();!v.done;v=q.next())if(v=v.value,v.si!=t.j)for(v.si<t.j-1&&ib(v.Tl),v.si=t.j,v=v.Yi.first();null!=v.item;v=v.next)v.item.ja.pa=t.j}n=p(n.Hb);for(q=n.next();!q.done;q=n.next())if(q=q.value,!(isNaN(q.index)||q.F<=q.o)){if(m.Fc){if(0<=Ic(m.Fc.Z,q.Z.m,q.Z.l)&&0<=Ic(m.Fc.Z,q.Z.K,q.Z.H))continue;if(0>=Ic(q.Z,m.Fc.Z.m,m.Fc.Z.l)&&0>=Ic(q.Z,m.Fc.Z.K,m.Fc.Z.H))continue}if(!(0>=Ic(q.Z,c.z,c.x))){(v=e[q.index])||(e[q.index]=v=r(q));var B=v.X();B.Fc=v.Fc;B.v<m.v&&
(B.v=m.v);B.D>m.D&&(B.D=m.D);B.o<m.o&&(B.o=m.o);B.F>m.F&&(B.F=m.F);B.v>=B.D||B.o>=B.F||b(B,Ye(q.td.ca))}}}var c=Od(a.O),d=mf(c,new w(0,-4294967295,0),ig);if(d){var e={},h=a.Ud,g=Math.atan(Math.tan(h)*t.viewport.ratio),k=new Sc;k.v=-g;k.D=g;k.o=-h;k.F=h;var l=0;if(d=Ye(d.item.ca))a.Pa=d,b(k,a.Pa)}};function he(){this.name=null;this.Oc=[]}he.prototype.save=function(a){Fb(a,this.name);Rb(a,Math.ceil(this.Rb/1E3));Gb(a,this.Oc.length);for(var b=p(this.Oc),c=b.next();!c.done;c=b.next())c.value.save(a)};he.prototype.load=function(a){this.name=Bb(a);this.Rb=1E3*Nb(a);for(var b=Cb(a),c=0;c<b;c++){var d=new jg;d.load(a);this.Oc.push(d)}};function jg(){this.aa=t.i.Pb.get("defaultMaterial");this.Zb=[];this.gc=[];this.Mc=[]}
jg.prototype.compile=function(){this.Bk=ye.pi.length;ye.pi=ye.pi.concat(this.Zb);for(var a=0;a<this.gc.length;a++)this.gc[a]+=this.Bk;for(a=0;a<this.Mc.length;a++)this.Mc[a]+=this.Bk;this.mn=Ae.elements.length;Ae.elements=Ae.elements.concat(this.gc);this.Wk=Ae.elements.length;Ae.elements=Ae.elements.concat(this.Mc)};jg.prototype.X=function(){var a=new jg;a.Zb=this.Zb;a.Ja=this.Ja;a.gc=this.gc;a.oe=this.oe;a.Mc=this.Mc;a.ne=this.ne;return a};
jg.prototype.save=function(a){Fb(a,this.aa.name);Rb(a,this.Zb.length);for(var b=p(this.Zb),c=b.next();!c.done;c=b.next())c=c.value,Wb(a,c.x),Wb(a,c.y),Wb(a,c.z);b=p(this.Zb);for(c=b.next();!c.done;c=b.next())c=c.value,Ub(a,c.Ac),Ub(a,c.Tc),Ub(a,c.Eb);b=p(this.Zb);for(c=b.next();!c.done;c=b.next())c=c.value,ec(a,c.fd),ec(a,c.gd);Rb(a,this.gc.length);b=p(this.gc);for(c=b.next();!c.done;c=b.next())Rb(a,c.value);Rb(a,this.Mc.length);b=p(this.Mc);for(c=b.next();!c.done;c=b.next())Rb(a,c.value);Rb(a,this.Nf);
return a};jg.prototype.load=function(a){this.aa=t.i.Pb.get(Bb(a));for(var b=Nb(a),c=0;c<b;c++){var d=new ld(Vb(a),Vb(a),Vb(a));this.Zb.push(d)}for(c=0;c<b;c++)d=this.Zb[c],d.Ac=Sb(a),d.Tc=Sb(a),d.Eb=Sb(a);for(c=0;c<b;c++)d=this.Zb[c],d.fd=dc(a),d.gd=dc(a);b=Nb(a);for(c=0;c<b;c++)this.gc.push(Nb(a));b=Nb(a);for(c=0;c<b;c++)this.Mc.push(Nb(a));this.Nf=Nb(a);this.compile()};
function kg(){function a(q,v){return q.y<v.y?-1:q.y>v.y?1:0}function b(q,v){return q.z<v.z?-1:q.z>v.z?1:q.x<v.x?-1:q.x>v.x?1:0}var c=lg,d=[];d.cmp=b;for(var e=p(c),h=e.next();!h.done;h=e.next()){var g=h.value;h=g[g.length-1];g=p(g);for(var k=g.next();!k.done;k=g.next()){k=k.value;if(0==b(h,k)){var l=[];l.cmp=a;l.z=h.z;l.x=h.x;l=Ra(d,l);Ra(l,h);Ra(l,k)}h=k}}c=p(c);for(h=c.next();!h.done;h=c.next())for(e=h.value,k=e.length-1,k=e[k],h=0;h<e.length;h++){g=e[h];if(0==b(k,g))if(l=Qa(d,k),k.y<g.y){var m=
Pa(l,k),n=Pa(l,g);for(m+=1;m<l.length&&!(m>=n);){var r=qd(k,g,(l[m].y-k.y)/(g.y-k.y));r.y=l[m].y;e.splice(h++,0,r);m++}}else for(m=Pa(l,k),n=Pa(l,g),--m;0<=m&&!(m<=n);)r=qd(k,g,(l[m].y-k.y)/(g.y-k.y)),r.y=l[m].y,e.splice(h++,0,r),m--;k=h;k=g}}function mg(){jg.call(this);this.pe=[];this.Ja=new ue;this.ne=this.oe=null;this.Nf=0}mg.prototype=Object.create(jg.prototype);mg.prototype.constructor=mg;
mg.prototype.compile=function(){this.gc=[];for(var a=p(this.pe),b=a.next();!b.done;b=a.next()){b=b.value;for(var c=2;c<b.length;c++)this.gc.push(b[0]),this.gc.push(b[c-1]),this.gc.push(b[c])}t.Cb(this.Ja);te(this.Ja,this.Zb.length*this.Ja.Qb);this.Ja.upload(this.Zb);this.gc.length?(this.oe||(this.oe=new we),t.lf(this.oe),te(this.oe,2*this.gc.length),this.oe.upload(this.gc)):this.oe=null;this.Mc.length?(this.ne||(this.ne=new we),t.lf(this.ne),te(this.ne,2*this.Mc.length),this.ne.upload(this.Mc)):this.ne=
null};function ng(a,b){b||(b=a.name);t.Ha.call(this,b);this.src=a}ng.prototype=Object.create(t.Ha.prototype);ng.prototype.constructor=ng;ng.prototype.create=function(){this.Oc=[];for(var a=p(this.src.Oc),b=a.next();!b.done;b=a.next())b=b.value,b=b instanceof mg?new og(b):new pg(b),this.Oc.push(b),this.pg&&(b.pg=this.pg),b.La=this.O,K(b,this)};function pg(a,b){t.Ha.call(this,b);this.src=a;this.facing=1;this.cn=this.bn=!1}pg.prototype=Object.create(t.Ha.prototype);pg.prototype.constructor=pg;
function qg(a){var b=null;a.parent&&(b=a.parent.G);b||(b=a.G);b||(b=a.src.G);b||(b=t.i.va.get("physical"));return b}function rg(a){var b=null;a.parent&&(b=a.parent.aa);b||(b=a.aa);b||(b=a.src.aa);b||(b=t.i.Pb.get("defaultMaterial"));return b}function sg(a){var b=null;a.parent&&(b=a.parent.ia);b||(b=a.ia);b||(b=a.src.ia);return b}
pg.prototype.ab=function(){t.Cb(ye);t.eb(qg(this));t.G.M("modelMatrix",this.O);t.Ib(0,sg(this));var a=rg(this);a.bind();t.G.M("lightingFancy",t.Ba.lightingFancy,!0);this.xi?t.G.M("architectureLighting",1,!0):t.G.M("architectureLighting",0,!0);t.G.M("ambientLight",this.ja.lb,!1);if(this.Ga)for(var b=0;b<this.Ga.length;b+=3)t.G.M(this.Ga[b],this.Ga[b+1],this.Ga[b+2]);t.sb(a.Ia);t.ec(a.Ia?1:2);t.Xb(this.facing);this.src.gc.length?(t.lf(Ae),u.drawElements(u.TRIANGLES,this.src.gc.length,u.UNSIGNED_SHORT,
2*this.src.mn)):u.drawArrays(u.TRIANGLES,this.src.Bk,this.src.Zb.length);this.src.Mc.length&&(this.bn&&this.Uk(),this.cn&&this.Vk())};
pg.prototype.Uk=function(){t.sb(1);t.ec(1);t.eb(t.i.va.get("edge"));t.G.M("toonMinDist",Infinity,!1);t.G.M("modelMatrix",this.O);var a=new w(this.O.u,this.O.A,this.O.B),b=new w(this.O.w,this.O.m11,this.O.m12),c=new w(this.O.C,this.O.m21,this.O.m22);a.ta(1);b.ta(1);c.ta(1);var d=new w(t.na.O.s-this.O.s,t.na.O.m31-this.O.m31,t.na.O.m32-this.O.m32);a=qc(a,d);b=qc(b,d);c=qc(c,d);t.G.M("eyeVector",new w(a,b,c));u.drawElements(u.LINES,this.src.Mc.length-this.src.Nf,u.UNSIGNED_SHORT,2*this.src.Wk+2*this.src.Nf)};
pg.prototype.Vk=function(){t.sb(1);t.ec(1);t.eb(t.i.va.get("toon"));t.G.M("toonMinDist",Infinity,!1);t.G.M("modelMatrix",this.O);u.drawElements(u.LINES,this.src.Nf,u.UNSIGNED_SHORT,2*this.src.Wk)};function og(a,b){pg.call(this,a,b)}og.prototype=Object.create(pg.prototype);f=og.prototype;f.constructor=og;f.step=function(){pg.prototype.step.call(this)};
f.ab=function(){t.Cb(this.src.Ja);t.eb(qg(this));t.G.M("modelMatrix",this.O);t.Ib(0,sg(this));var a=rg(this);a.bind();t.G.M("lightingFancy",t.Ba.lightingFancy,!0);this.xi?t.G.M("architectureLighting",1,!0):t.G.M("architectureLighting",0,!0);t.G.M("ambientLight",this.ja.lb,!1);if(this.Ga)for(var b=0;b<this.Ga.length;b+=3)t.G.M(this.Ga[b],this.Ga[b+1],this.Ga[b+2]);t.sb(a.Ia);t.ec(a.Ia?1:2);t.Xb(this.facing);this.src.gc.length?(t.lf(this.src.oe),u.drawElements(u.TRIANGLES,this.src.gc.length,u.UNSIGNED_SHORT,
0)):u.drawArrays(u.TRIANGLES,0,this.src.Zb.length)};
f.Uk=function(){t.sb(1);t.ec(1);t.eb(t.i.va.get("edge"));t.G.M("toonMinDist",Math.pow(5E5,2),!1);t.G.M("modelMatrix",this.O);var a=new w(this.O.u,this.O.A,this.O.B),b=new w(this.O.w,this.O.m11,this.O.m12),c=new w(this.O.C,this.O.m21,this.O.m22);a.ta(1);b.ta(1);c.ta(1);var d=new w(t.na.O.s-this.O.s,t.na.O.m31-this.O.m31,t.na.O.m32-this.O.m32);a=qc(a,d);b=qc(b,d);c=qc(c,d);t.G.M("eyeVector",new w(a,b,c));a=this.src.Mc.length-this.src.Nf;b=2*this.src.Nf;t.lf(this.src.ne);u.drawElements(u.LINES,a,u.UNSIGNED_SHORT,
b)};f.Vk=function(){t.sb(1);t.ec(1);t.eb(t.i.va.get("toon"));t.G.M("toonMinDist",Math.pow(5E5,2),!1);t.G.M("modelMatrix",this.O);var a=this.src.Nf;t.lf(this.src.ne);u.drawElements(u.LINES,a,u.UNSIGNED_SHORT,0)};function tg(){this.scale=1;this.mb=25E3;this.Nd=0;this.pg=!1;this.frame=0;this.Bb=1}function ug(a){a.u=t.na.O.u;a.A=t.na.O.A;a.B=t.na.O.B;a.w=t.na.O.w;a.m11=t.na.O.m11;a.m12=t.na.O.m12;a.C=t.na.O.C;a.m21=t.na.O.m21;a.m22=t.na.O.m22;var b=this.scale*this.mb,c=this.pg?-b:b,d=Math.cos(this.Nd),e=Math.sin(this.Nd),h=new H;h.u=d*c;h.A=e*c;h.w=-e*b;h.m11=d*b;Ad(a,h,a)}
function vg(){0>this.frame||(ug.call(this,this.O),t.Cb(wg),t.eb(this.G),t.Ib(0,this.ia),this.aa.bind(),t.G.M("ambientLight",this.ja.lb,!1),t.sb(this.aa.Ia),t.ec(this.aa.Ia?1:2),t.Xb(0),t.G.M("modelMatrix",this.O),t.G.M("color",this.color),u.drawArrays(u.TRIANGLE_FAN,xg(this.frame,this.Bb),4))}
for(var yg=[],zg=0;4>zg;zg++)for(var Ag=1<<zg,Bg=Ag<<zg,Cg=1/Ag,Dg=0;Dg<Bg;Dg++){var Eg=Dg%Ag,Fg=Dg/Ag|0;Eg*=Cg;Fg*=Cg;var Gg=void 0;Gg=new ld(-1,-1,0);sd(Gg,Eg,Fg);Gg.Eb=32767;yg.push(Gg);Gg=new ld(1,-1,0);sd(Gg,Eg+Cg,Fg);Gg.Eb=32767;yg.push(Gg);Gg=new ld(1,1,0);sd(Gg,Eg+Cg,Fg+Cg);Gg.Eb=32767;yg.push(Gg);Gg=new ld(-1,1,0);sd(Gg,Eg,Fg+Cg);Gg.Eb=32767;yg.push(Gg)}var wg=new ue;te(wg,yg.length*wg.Qb);wg.upload(yg);
function Hg(a,b){for(var c=0;b>Math.pow(1<<c,2);)c++;var d=1<<c;b=1/d;c=a%d*b;a=(a/d|0)*b;return[c,a,c+b,a+b]}function xg(a,b){switch(b){default:return 4*a;case 4:return 4+4*a;case 16:return 20+4*a;case 64:return 84+4*a}};function Ig(){this.color=this.ia=this.G=null;this.Ia=NaN;this.Se=[];this.Pc=[];this.Pc.cmp=Jg;this.Om=64}Ig.prototype.clear=function(){this.Se.length=0;this.Pc.length=0};Ig.prototype.ab=function(){t.eb(this.G);t.G.M("modelMatrix",af);t.Ib(0,this.ia);t.G.M("color",this.color);t.sb(this.Ia);t.ec(1);t.Xb(0);for(var a=p(this.Pc),b=a.next();!b.done;b=a.next())b.value.ab()};
function Kg(a,b,c,d,e,h,g){function k(y,x){if(nf(x)&&Ye(x.ca)){var A=[];if(x instanceof Lg){if(x.F<b.y-B||x.o>b.y+B)return;var z=Ic(x.Y,b.z,b.x);if(z<-B||z>B)return;z=x.Y.getParameter(b.z,b.x);if(z<-B||z>x.Y.length+B||.707107>qc(new w((x.Y.K-x.Y.m)/x.Y.length,0,(x.Y.l-x.Y.H)/x.Y.length),c))return;A.push(new w(x.Y.H,x.o,x.Y.K),new w(x.Y.l,x.o,x.Y.m),new w(x.Y.l,x.F,x.Y.m),new w(x.Y.H,x.F,x.Y.K))}else{if(x.y<b.y-B||x.y>b.y+B)return;var D=p(x.ha);for(z=D.next();!z.done;z=D.next())if(Ic(z.value,b.z,b.x)<
-B)return;if(x instanceof Mg){if(.707107>c.y)return}else if(-.707107<c.y)return;D=p(x.ha);for(z=D.next();!z.done;z=D.next())z=z.value,A.push(new w(z.H,x.y,z.K));x instanceof Og&&A.reverse()}(function(){function I(oa,Lb){var qb=[],kc=oa[oa.length-1],Mb=Lb(kc);oa=p(oa);for(var Tb=oa.next();!Tb.done;Tb=oa.next()){Tb=Tb.value;var Hc=Lb(Tb);2==Math.abs(Math.sign(Hc)-Math.sign(Mb))&&qb.push(wd(kc,Tb,Mb/(Mb-Hc)));0<=Hc&&qb.push(Tb);Mb=Hc;kc=Tb}return 3>qb.length?null:qb}for(var L=p(A),R=L.next();!R.done;R=
L.next())R=R.value,q.tb(R,R);L=p([function(oa){return 1-oa.x},function(oa){return 1+oa.x},function(oa){return 1-oa.y},function(oa){return 1+oa.y},function(oa){return 1-oa.z},function(oa){return 1+oa.z}]);for(R=L.next();!R.done;R=L.next())if(A=I(A,R.value),!A)return;for(L=0;L<A.length;L++){R=A[L];var qa=.5*R.x+.5,ta=.5*R.y+.5;r.tb(R,R);var ia=new ld;ia.x=R.x;ia.y=R.y;ia.z=R.z;ia.fd=v[0]*(1-qa)+v[2]*qa;ia.gd=v[1]*(1-ta)+v[3]*ta;A[L]=ia}L=[];L.ca=x.ca;L.cellIndex=y.index;L=Ra(l,L);for(R=2;R<A.length;R++)L.push(A[0]),
L.push(A[R-1]),L.push(A[R])})()}}a.Se.length==a.Om&&a.Se.shift().remove();var l=[];l.cmp=Jg;var m=new w,n=new w;rc(c,m,n);var r=new H;r.u=m.x;r.w=n.x;r.C=c.x;r.s=b.x;r.A=m.y;r.m11=n.y;r.m21=c.y;r.m31=b.y;r.B=m.z;r.m12=n.z;r.m22=c.z;r.m32=b.z;m=new H;n=Math.cos(d)*e;d=Math.sin(d)*e;m.u=n;m.w=-d;m.A=d;m.m11=n;m.m22=e;Cd(r,m,r);var q=r.Pj(new H),v=Hg(h,g),B=1.733*e;e=rf(b,B);e=p(e);for(h=e.next();!h.done;h=e.next())for(h=h.value,g=p(h.wa),d=g.next();!d.done;d=g.next())k(h,d.value);e=new Pg;h=p(l);for(g=
h.next();!g.done;g=h.next())g=g.value,d=Qa(a.Pc,g),d||(d=new Qg(a),d.ca=g.ca,d.cellIndex=g.cellIndex,d.ja=Ye(d.ca).ja,d.create(),Ra(a.Pc,d)),Rg(d,g),e.Jl.push({node:d,hd:g.length});a.Se.push(e)}function Qg(a){this.qm=a;this.cellIndex=this.ca=NaN;this.ja=null;this.hd=this.zd=0}function Jg(a,b){return a.ca<b.ca?-1:a.ca>b.ca?1:a.cellIndex<b.cellIndex?-1:a.cellIndex>b.cellIndex?1:0}Qg.prototype.create=function(){this.Ja=new ue;this.Ja.usage=u.DYNAMIC_DRAW;te(this.Ja,48*this.Ja.Qb)};
function Sg(a,b){var c=a.hd+b;if(0>=c)Ta(a.qm.Pc,a);else{c*=a.Ja.Qb;if((a.zd+a.hd+b)*a.Ja.Qb>a.Ja.buffer.byteLength)b=new ArrayBuffer(c<<1);else if(48<=a.zd)b=a.Ja.buffer;else return;c=new Uint8Array(a.Ja.buffer,a.zd*a.Ja.Qb,a.hd*a.Ja.Qb);(new Uint8Array(b)).set(c);a.Ja.buffer=b;a.Ja.bind();u.bufferData(a.Ja.target,a.Ja.buffer,a.Ja.usage);a.zd=0}}
function Rg(a,b){Sg(a,b.length);a.Ja.bind();a.Ja.write(b,a.zd+a.hd);u.bufferSubData(a.Ja.target,(a.zd+a.hd)*a.Ja.Qb,new Uint8Array(a.Ja.buffer,(a.zd+a.hd)*a.Ja.Qb,b.length*a.Ja.Qb));a.hd+=b.length}Qg.prototype.ab=function(){if(this.ja.pa<t.j)return!1;t.Cb(this.Ja);t.G.M("ambientLight",this.ja.lb);u.drawArrays(u.TRIANGLES,this.zd,this.hd)};function Pg(){this.Jl=[]}Pg.prototype.remove=function(){for(var a=p(this.Jl),b=a.next();!b.done;b=a.next())b=b.value,b.node.zd+=b.hd,b.node.hd-=b.hd,Sg(b.node,0)};var Tg={},Ug,Vg,Wg,Xg,P,T,U,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh=new F(192,192,192,255),hh=new F(64,64,64,255),ih=new F(160,160,160,255),jh=new F(160,160,160,255),kh=new F(144,144,144,255),lh,mh=lh=new $d;lh.name="concrete";lh.Md=new F(255,255,255,3.984375);lh.ad=4;lh.bd=1;lh.Ia=0;var nh=lh=new $d;lh.name="paint";lh.Md=new F(255,255,255,31.875);lh.ad=128;lh.bd=1;lh.Ia=0;var oh=lh=new $d;lh.name="plaster";lh.Md=new F(255,255,255,15.9375);lh.ad=32;lh.bd=1;lh.Ia=0;var ph=lh=new $d;lh.name="metal";
lh.Md=new F(255,255,255,95.625);lh.ad=64;lh.bd=1;lh.Ia=0;var qh=lh=new $d;lh.name="glass";lh.Md=new F(255,255,255,63.75);lh.ad=256;lh.bd=1;lh.Ia=1;
function rh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new sh(c,c+h);b.push(g);c+=h;return g}}this.floor.ia=t.i.P.get("concr01");this.floor.aa=mh;this.floor.color=gh;this.sa.ia=t.i.P.get("concr01");this.sa.aa=mh;this.sa.color=jh;var b=[],c=this.Tf,d=this.F,e;if(e=a(25E3))e.$.ia=t.i.P.get("brick01"),e.$.aa=nh,e.$.color=hh;if(e=a(this.Za))e.$.ia=t.i.P.get("brick01"),e.$.aa=nh,e.$.color=this.color;if(e=a(0))e.$.ia=t.i.P.get("brick01"),e.$.aa=mh,e.$.color=ih;return b}
function th(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new sh(c,c+h);b.push(g);c+=h;return g}}this.floor.ia=t.i.P.get("concr01");this.floor.aa=mh;this.floor.color=gh;this.sa.ia=t.i.P.get("concr01");this.sa.aa=mh;this.sa.color=jh;var b=[],c=this.Tf,d=this.F,e;if(e=a(25E3))e.$.ia=t.i.P.get("brick01"),e.$.aa=nh,e.$.color=hh;if(e=a(this.Za))e.$.ia=t.i.P.get("brick01"),e.$.aa=nh,e.$.color=this.color;if(e=a(-25E3))e.$.ia=t.i.P.get("brick01"),e.$.aa=mh,e.$.color=ih;if(e=a(0))e.$.ia=
t.i.P.get("concr01"),e.$.aa=mh,e.$.color=kh;return b}
function uh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new sh(c,c+h);b.push(g);c+=h;return g}}this.floor.ia=t.i.P.get("concr01");this.floor.aa=mh;this.floor.color=gh;this.sa.ia=t.i.P.get("concr01");this.sa.aa=mh;this.sa.color=jh;var b=[],c=this.Tf,d=this.F,e;if(e=a(25E3))e.$.ia=t.i.P.get("metal01"),e.$.aa=ph,e.$.color=hh;if(e=a(this.Za))e.$.ia=t.i.P.get("metal01"),e.$.aa=nh,e.$.color=this.color;if(e=a(0))e.$.ia=t.i.P.get("metal01"),e.$.aa=ph,e.$.color=ih;return b}
function vh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new sh(c,c+h);b.push(g);c+=h;return g}}this.floor.ia=t.i.P.get("concr01");this.floor.aa=mh;this.floor.color=gh;this.sa.ia=t.i.P.get("concr01");this.sa.aa=mh;this.sa.color=jh;var b=[],c=this.Tf,d=this.F,e;if(e=a(25E3))e.$.ia=t.i.P.get("metal01"),e.$.aa=ph,e.$.color=hh;if(e=a(this.Za))e.$.ia=t.i.P.get("metal01"),e.$.aa=nh,e.$.color=this.color;if(e=a(-25E3))e.$.ia=t.i.P.get("metal01"),e.$.aa=ph,e.$.color=ih;if(e=a(0))e.$.ia=
t.i.P.get("concr01"),e.$.aa=mh,e.$.color=kh;return b}
function wh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new sh(c,c+h);b.push(g);c+=h;return g}}this.floor.ia=t.i.P.get("concr01");this.floor.aa=mh;this.floor.color=gh;this.sa.ia=t.i.P.get("concr01");this.sa.aa=mh;this.sa.color=jh;var b=[],c=this.Tf,d=this.F,e;if(e=a(25E3))e.$.ia=t.i.P.get("plaster01"),e.$.aa=nh,e.$.color=hh;if(e=a(this.Za))e.$.ia=t.i.P.get("plaster01"),e.$.aa=oh,e.$.color=this.color;if(e=a(0))e.$.ia=t.i.P.get("plaster01"),e.$.aa=oh,e.$.color=new F(248,
248,248,255);return b}var xh=new mb;function yh(a){return Math.floor(pb(xh)*a)}function zh(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return b[yh(b.length)]}function Ah(a){for(var b=0;b<a.length;b++){var c=yh(a.length-b),d=a[b];a[b]=a[c];a[c]=d}}function Bh(){for(var a=[],b=p(bg),c=b.next();!c.done;c=b.next()){c=p(c.value);for(var d=c.next();!d.done;d=c.next())a=a.concat(d.value)}return a}
function Ch(){for(var a=[],b=p(bg),c=b.next();!c.done;c=b.next()){c=p(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;for(var e=p(d.xb),h=e.next();!h.done;h=e.next())h=h.value,h.ua==d&&a.push(h)}}return a}function Dh(a,b,c){var d=[];a=p(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.translate(b,c));return d}function Eh(a,b){var c=[];a=p(a);for(var d=a.next();!d.done;d=a.next())c.push(d.value.Hg(b));return c}
function Fh(a,b,c){a:{switch((4-c)%4){case 0:a=new E(a,b);break a;case 1:a=new E(-b,a);break a;case 2:a=new E(-a,-b);break a;case 3:a=new E(b,-a);break a}a=void 0}return a}function Gh(a,b,c){var d=[];a=p(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.expand(b,c));return d}function Hh(a,b){var c=[];a=p(a);for(var d=a.next();!d.done;d=a.next())c.push(Ih(d.value,b));return c}
function Jh(a,b){b=p(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=a.length,e=0;e<d;e++)a[e].mh(c,a)&&(a.splice(e--,1),d--)}return a}function Kh(a,b){for(var c=new Lh,d=p(a),e=d.next();!e.done;e=d.next())Mh(c,e.value);d=p(b);for(e=d.next();!e.done;e=d.next())Mh(c,e.value);c=[c];Jh(c,b);return Jh(a.slice(),c)}function Nh(a,b){b=void 0===b?0:b;for(var c=new Lh,d=p(a),e=d.next();!e.done;e=d.next())Mh(c,e.value);b=[c.expand(b,b)];Jh(b,a);return b}
function Oh(a){var b=[];b.cmp=function(h,g){return h.v<g.v?-1:h.v>g.v?1:h.J<g.J?-1:h.J>g.J?1:0};a=p(a);for(var c=a.next();!c.done;c=a.next())Ra(b,c.value);for(a=0;a<b.length;a++){c=b[a];var d=Pa(b,{v:c.D,J:c.J}),e=b[d];e&&e.v==c.D&&e.J==c.J&&e.L==c.L&&(b.splice(d,1),b[a--]=c.X(c.J,c.L,c.v,e.D))}return b}function Ph(a,b,c){var d=Infinity;c=p(c);for(var e=c.next();!e.done;e=c.next())if(e=e.value,!(e.v>=b||e.D<=b||e.L<=a||e.J>=d)){if(e.J<a){d=a;break}d=e.J}return d}
function Qh(a){for(var b=[],c=p(a),d=c.next();!d.done;d=c.next())Rh(d.value,b);Jh(b,a);return b}function Sh(a){a.bound=new Sc;for(var b=0;b<a.length;b++){var c=a[b].gg();a.bound.Ma(c.K,c.H);a[b]=c}}
function Th(a){var b=[];b.cmp=function(m,n){return m.x<n.x?-1:m.x>n.x?1:m.y<n.y?-1:m.y>n.y?1:m.type<n.type?-1:m.type>n.type?1:0};a=p(a);for(var c=a.next();!c.done;c=a.next())c=c.value,Ra(b,{x:c.Cc(),y:c.Bc(),type:c.ub(),Z:c});a=[];c=[];for(var d={};b.length;){var e=!1;d.Ad=[];d.Ad.bound=new Lh;d.Ic=null;d.oc=null;var h=function(m){return function(n){n.Z.ub()==m.oc.ub()?m.oc.T+=n.Z.T-n.Z.R:((m.oc.ub()+3&3)==n.Z.ub()&&(m.oc.Lh=!0,n.Z.mi=!0),m.Ad.push(n.Z),m.oc=n.Z);m.Ic=new E(m.oc.bc(),m.oc.ac());m.Ic.type=
-1;Uh(m.Ad.bound,m.Ic.x,m.Ic.y)}}(d);d.oc=b.shift().Z;d.oc.ub()&&(e=!0,d.oc.mi=!0);d.Ad.push(d.oc);d.Ic=new E(d.oc.bc(),d.oc.ac());d.Ic.type=-1;for(Uh(d.Ad.bound,d.Ic.x,d.Ic.y);;){var g=[],k=Pa(b,d.Ic),l=b[k];if(!l)break;if(l.x!=d.Ic.x)break;if(l.y!=d.Ic.y)break;g[0]=k;g[1]=k;k++;(l=b[k])&&l.x==d.Ic.x&&l.y==d.Ic.y&&(g[1]=k);switch(d.oc.ub()){case 0:k=g[0];break;case 1:k=g[1];break;case 2:k=g[1];break;case 3:k=g[0]}h(b.splice(k,1)[0])}e?(d.Ad[d.Ad.length-1].Lh=!0,c.push(d.Ad)):(d.Ad.vb=[],a.push(d.Ad));
d={oc:d.oc,Ad:d.Ad,Ic:d.Ic}}b=p(c);for(c=b.next();!c.done;c=b.next())Vh(c.value,a);return a}function Wh(a,b){b||(b=[]);a=p(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(c),c.vb&&Wh(c.vb,b);return b}
function Vh(a,b){var c=null;b=p(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.J<=d.bound.J||a.bound.v<=d.bound.v||a.bound.L>=d.bound.L||a.bound.D>=d.bound.D)){if(c){if(d.bound.J<=c.bound.J)continue;if(d.bound.v<=c.bound.v)continue;if(d.bound.L>=c.bound.L)continue;if(d.bound.D>=c.bound.D)continue}c=d}c&&c.vb.push(a)}
function Xh(a){var b=162500,c=162500;b=void 0===b?0:b;c=void 0===c?0:c;var d=Qh(a);a=[];d=p(d);for(var e=d.next();!e.done;e=d.next())e.value.Hi(b,c,a);d=Bh();d=p(d);for(e=d.next();!e.done;e=d.next()){e=e.value;for(var h=0;h<a.length;h++)e.expand(b,c).Cf(a[h].x,a[h].y)&&a.splice(h--,1)}return a}var Yh=-1,Zh=-1,$h=0,ai=1,bi=0,ci=2,di=[],bg=[],cg=0;
function ei(){if(!Ug){var a=Ug={};Vg=1;Ug.Lj=ci;Wg=Vg;a.yj=ai;a.Df=NaN;a.xd=NaN;a.Hd=[];Xg=di;di=[]}if(!P){if(!Wg){fi();Bh();Ug=null;Yh++;if(Yh<$h+2)return!0;gi();return!0}P=[];P.Gb=Ug;P.vg=3;P.dd=new F(233,234,85,255);P.Za=-75E3;P.parent=null;P.children=[];P.Ci=1;P.Rd=0;di.push(P);Wg--}if(!T){if(!P.vg){if(P.parent){a=P.parent;a.children.push(P);do a.Ci++,P.Rd++,a=a.parent;while(a)}P=null;return!0}T=[];hi.call(T);T.index=bg.length+cg;T.Jb=P;T.ug=zh(1,2);1==T.index&&(T.$c=!0);T.style={};T.style.height=
225E3+5E4*yh(4);T.style.dd=P.dd;T.$c?(T.style.Nc=zh(th,vh),T.style.Za=1E5):(T.style.Nc=zh(rh,uh),T.style.Za=P.Za);P.push(T);bg.push(T);P.vg--}if(!U){if(!T.ug)return ii(),T=null,!0;U=[];U.index=ji++;U.xb=[];U.ic=zh(1,2)}if(!U.ic){if(Yg){fi();a=U;var b=Yg,c=ki([b],[a]);c||b.U.Jb!=a.U.Jb&&(c=li([b],[a]));if(!c)return U.length=0,U.ic=zh(1,2),T.pop(),!0}Zg=U=Yg=null;T.ug--;return!0}if(U.length)return(a=mi([U],0))?(a.platform=U,U.push(a),U.ic--):(U.length=0,U.ic=zh(1,2),T.pop()),!0;if(T.length)return a=
T,Zg||(Zg={}),(a=mi(a,0,Zg))?(Yg=a.de,U.y=Yg.y+5E4*zh(-2,-1,1,2),U.y=Math.min(U.y,-4E5),U.U=T,T.push(U),a.platform=U,U.push(a),U.ic--):(Zg=U=null,T.ug=0),!0;if(1<P.length){b=[];c=p(P);for(a=c.next();!a.done;a=c.next())b.push.apply(b,ba(a.value));Zg||(Zg={});(a=mi(b,0,Zg))?(Yg=a.de,U.y=Yg.y,U.U=T,T.push(U),a.platform=U,U.push(a),U.ic--):(P.pop(),bg.pop(),Zg=U=T=null,P.vg=0);return!0}if(1<di.length){b=[];c=p(di);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length)){var d=p(a);for(a=
d.next();!a.done;a=d.next())b.push.apply(b,ba(a.value))}Zg||(Zg={});if(a=mi(b,6E5,Zg))Yg=a.de,P.parent=Yg.U.Jb,U.y=Yg.y+5E4*zh(-2,-1,0,0,0,1,2),U.y=Math.min(U.y,-4E5),U.U=T,T.push(U),a.platform=U,U.push(a),U.ic--;else{for(;;){a=bg[bg.length-1];if(a.oa<=Yh)break;b=p(a);for(a=b.next();!a.done;a=b.next())for(c=p(a.value.xb),a=c.next();!a.done;a=c.next())ni(a.value);bg.pop()}P=null;di.length=0;Wg=Vg;Zg=Yg=U=T=null}return!0}if(Xg.length){b=[];c=p(Xg);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=
a.children.length))for(d=p(a),a=d.next();!a.done;a=d.next())b.push.apply(b,ba(a.value));Zg||(Zg={cmp:function(e,h){return e.tc<h.tc?-1:e.tc>h.tc?1:e.x<h.x?-1:e.x>h.x?1:e.y<h.y?-1:e.y>h.y?1:0}});if(a=mi(b,0,Zg))Yg=a.de,U.y=Yg.y+5E4*zh(-2,-1,0,0,0,1,2),U.y=Math.min(U.y,-4E5),U.U=T,T.push(U),a.platform=U,U.push(a),U.ic--;else{for(;;){a=bg[bg.length-1];if(a.oa<=Yh)break;b=p(a);for(a=b.next();!a.done;a=b.next())for(c=p(a.value.xb),a=c.next();!a.done;a=c.next())ni(a.value);bg.pop()}P=null;di.length=0;Wg=
Vg;Zg=Yg=U=T=null}return!0}a=mi(null,0);U.y=-4E5;U.U=T;T.push(U);a.platform=U;U.push(a);U.ic--;return!0}function oi(){if(!Ug){var a=Ug={};Vg=1;Ug.Lj=ci;Wg=Vg;a.yj=ai;a.Df=NaN;a.xd=NaN;a.Hd=[];Xg=di;di=[]}if(!P&&!Wg){fi();Bh();Ug=null;Yh++;if(Yh<$h+2)return!0;gi();return!0}return pi()}
function qi(){if(!Ug){var a=Ug={};ai++;3<ai&&(ai=3);0>=bi?Vg=2:1>=bi?(Vg=3,ci++):3>=bi?(Vg=3,ci++):4>=bi?(Vg=4,ci++):Vg=4;bi++;Ug.Lj=ci;Wg=Vg;a.yj=ai;a.Df=0;a.xd=NaN;a.Hd=[];Xg=di;di=[];$g=-1}if(0<=$g){var b=di[$g];if(!b){fi();Bh();ri();Ug=null;Yh++;if(Yh<$h+2)return!0;gi();return!0}if(2==b.children.length&&3<=b.Ci){var c=function(g,k){if(!g)return k;for(var l=p(g),m=l.next();!m.done;m=l.next())k.push.apply(k,ba(m.value));c(g.children[0],k);c(g.children[1],k);return k};a=c(b.children[0],[]);b=c(b.children[1],
[]);var d=ki(a,b);d||(d=li(a,b))}$g++;return!0}if(!P&&!Wg){var e=[],h=function(g){g&&(g.index=e.length,e.push(g),h(g.children[0]),h(g.children[1]))};h(di[0]);di=e;$g=0;return!0}return pi()}
function pi(){if(!P){P=[];P.Gb=Ug;P.vg=zh(2,3);var a=[new F(233,234,85,255),new F(85,85,234,255),new F(234,85,85,255),new F(41,166,191,255)];P.dd=a[di.length%a.length];P.Za=-75E3;P.parent=null;P.children=[];P.Ci=1;P.Rd=0;di.push(P);Wg--}if(!T){if(!P.vg){if(P.parent){a=P.parent;a.children.push(P);do a.Ci++,P.Rd++,a=a.parent;while(a)}P=null;return!0}T=[];hi.call(T);T.index=bg.length+cg;T.Jb=P;T.ug=zh(1,2);0==T.index%5&&(T.$c=!0);T.style={};T.style.height=225E3;T.style.height+=5E4*yh(4);T.style.dd=P.dd;
T.$c?(T.style.Nc=zh(th,vh),T.style.Za=1E5):(T.style.Nc=zh(rh,uh),T.style.Za=P.Za);P.push(T);bg.push(T);P.vg--}if(!U){if(!T.ug)return ii(),T=null,!0;U=[];U.index=ji++;U.xb=[];U.ic=zh(1,2)}if(!U.ic){if(Yg){fi();a=U;var b=Yg,c=ki([b],[a]);c||b.U.Jb!=a.U.Jb&&(c=li([b],[a]));if(!c)return U.length=0,U.ic=zh(1,2),T.pop(),!0}Zg=U=Yg=null;T.ug--;return!0}if(U.length)return(a=mi([U],0))?(a.platform=U,U.push(a),U.ic--):(U.length=0,U.ic=zh(1,2),T.pop()),!0;if(T.length)return a=T,Zg||(Zg={}),(a=mi(a,0,Zg))?(Yg=
a.de,U.y=Yg.y+5E4*zh(-2,-1,1,2),U.y=Math.min(U.y,-4E5),U.U=T,T.push(U),a.platform=U,U.push(a),U.ic--):(Zg=U=null,T.ug=0),!0;if(1<P.length){b=[];c=p(P);for(a=c.next();!a.done;a=c.next())b.push.apply(b,ba(a.value));Zg||(Zg={});(a=mi(b,0,Zg))?(Yg=a.de,U.y=Yg.y,U.U=T,T.push(U),a.platform=U,U.push(a),U.ic--):(P.pop(),bg.pop(),Zg=U=T=null,P.vg=0);return!0}if(1<di.length){b=[];c=p(di);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length)){var d=p(a);for(a=d.next();!a.done;a=d.next())b.push.apply(b,
ba(a.value))}Zg||(Zg={});if(a=mi(b,6E5,Zg))Yg=a.de,P.parent=Yg.U.Jb,U.y=Yg.y+5E4*zh(-2,-1,0,0,0,1,2),U.y=Math.min(U.y,-4E5),U.U=T,T.push(U),a.platform=U,U.push(a),U.ic--;else{for(;;){a=bg[bg.length-1];if(a.oa<=Yh)break;b=p(a);for(a=b.next();!a.done;a=b.next())for(c=p(a.value.xb),a=c.next();!a.done;a=c.next())ni(a.value);bg.pop()}P=null;di.length=0;Wg=Vg;Zg=Yg=U=T=null}return!0}if(Xg.length){b=[];c=p(Xg);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length))for(d=p(a),a=d.next();!a.done;a=
d.next())b.push.apply(b,ba(a.value));Zg||(Zg={cmp:function(e,h){return e.tc<h.tc?-1:e.tc>h.tc?1:e.x<h.x?-1:e.x>h.x?1:e.y<h.y?-1:e.y>h.y?1:0}});if(a=mi(b,0,Zg))Yg=a.de,U.y=Yg.y+5E4*zh(-2,-1,0,0,0,1,2),U.y=Math.min(U.y,-4E5),U.U=T,T.push(U),a.platform=U,U.push(a),U.ic--;else{for(;;){a=bg[bg.length-1];if(a.oa<=Yh)break;b=p(a);for(a=b.next();!a.done;a=b.next())for(c=p(a.value.xb),a=c.next();!a.done;a=c.next())ni(a.value);bg.pop()}P=null;di.length=0;Wg=Vg;Zg=Yg=U=T=null}return!0}a=mi(null,0);U.y=-4E5;
U.U=T;T.push(U);a.platform=U;U.push(a);U.ic--;return!0}
function mi(a,b,c){if(c){if(c.fj)return si(c)}else c={};c.cmp||(c.cmp=function(n,r){return n.Rd<r.Rd?-1:n.Rd>r.Rd?1:n.tc>r.tc?-1:n.tc<r.tc?1:n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0});c.Sb=5E4*Math.floor(yh(2)+4);c.vf=5E4*Math.floor(yh(2)+4);yh(12)||(c.Sb*=2,c.vf*=2);if(!a)return new Lh(-c.Sb,c.Sb,-c.vf,c.vf);c.from=a;c.margin=b;c.hm=0;for(var d=Bh(),e=[],h=p(a),g=h.next();!g.done;g=h.next()){g=g.value;for(var k=[],l=p(g),m=l.next();!m.done;m=l.next())ti(m.value,c.Sb,c.vf,b,k);l=d;l=Hh(l,new Lh(-c.Sb+
1,c.Sb,-c.vf+1,c.vf));k=Jh(k,l);k=p(k);for(l=k.next();!l.done;l=k.next())l=l.value,m=void 0,m=new E(l.J,l.v),m.de=g,m.Rd=g.U.Jb.Rd,e.push(m),m=new E(l.L-1,l.D-1),m.de=g,m.Rd=g.U.Jb.Rd,e.push(m)}if(!e.length)return null;c.fj=[];c.fj.cmp=c.cmp;b=[];a=p(a);for(d=a.next();!d.done;d=a.next())b.push.apply(b,ba(d.value));e=p(e);for(a=e.next();!a.done;a=e.next())a=a.value,a.tc=ui(b,a.x,a.y),Ra(c.fj,a);return si(c)}
function si(a){var b=a.fj[a.hm++];if(!b)return null;a=new Lh(b.x-a.Sb,b.x+a.Sb,b.y-a.vf,b.y+a.vf);a.de=b.de;return a}
function gi(){ah=Ch();if(Tg.wn){for(var a=p(ah),b=a.next();!b.done;b=a.next())b.value.Dk();bh=[];ch=[];dh=[];a=p(di);for(b=a.next();!b.done;b=a.next()){for(var c=[],d=p(b.value),e=d.next();!e.done;e=d.next()){var h=[];e=p(e.value);for(b=e.next();!b.done;b=e.next())b=b.value,h=h.concat(b),dh=dh.concat(Qh(b));c=c.concat(h);ch=ch.concat(Qh(h))}bh=bh.concat(Qh(c))}for(;bg.length&&!(bg[0].oa>=$h);)bg.shift(),cg++;Zh=$h+1;vi=0}else{b=p(bg);for(e=b.next();!e.done;e=b.next()){a=e.value;if(a.oa>=$h)break;
a.jg=!0;e=p(a.Db);for(c=e.next();!c.done;c=e.next())wi(c.value);a=p(a);for(e=a.next();!e.done;e=a.next())for(e=p(e.value.xb),c=e.next();!c.done;c=e.next())c.value.Bj()}a=p(bg);for(e=a.next();!e.done;e=a.next())if(e=e.value,!(e.oa<=Zh)){if(e.oa>$h+1)break;e.bound.J-=1E5;e.bound.L+=1E5;e.bound.v-=1E5;e.bound.D+=1E5;c=p(e);for(b=c.next();!b.done;b=c.next())b=b.value,b.y<e.floor&&(e.floor=b.y),b.y>e.sa&&(e.sa=b.y);e.sa+=e.style.height;e.o=e.floor;e.Sf||(e.Ab=new w,e.Sf=new w);c=p(e);for(b=c.next();!b.done;b=
c.next())for(b=b.value,b.gl=[],d=p(b),h=d.next();!h.done;h=d.next()){h=h.value;var g=[];Rh(h,g);Sh(g);b.gl.push(g);h.z=.5*h.J+.5*h.L;h.x=.5*h.v+.5*h.D;h.y=h.platform.y;h.J<e.bound.J&&(e.bound.J=h.J);h.L>e.bound.L&&(e.bound.L=h.L);h.v<e.bound.v&&(e.bound.v=h.v);h.D>e.bound.D&&(e.bound.D=h.D)}}a=p(bg);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.oa<=Zh)){if(b.oa>$h+1)break;e=p(b);for(b=e.next();!b.done;b=e.next())for(c=p(b.value.xb),b=c.next();!b.done;b=c.next())b.value.zj()}a=p(bg);for(e=a.next();!e.done;e=
a.next())if(e=e.value,!(e.oa<=Zh)){if(e.oa>$h+1)break;e.sa=e.$c?0:Math.min(-18750,e.sa);c=[];d=p(e);for(b=d.next();!b.done;b=d.next())c.push.apply(c,ba(b.value));d=c;d=Gh(d,9375,9375);b=[];d=p(d);for(h=d.next();!h.done;h=d.next()){h=h.value;g=b.length;for(var k=0;k<g;k++)b[k].mh(h,b)&&(b.splice(k--,1),g--);b.push(h)}d=b;e.wm=[];d=p(d);for(b=d.next();!b.done;b=d.next())h=[],Rh(b.value,h),Sh(h),e.wm.push(h);b=c;b=Nh(b,1);b=Gh(b,9375,9375);b=Nh(b,0);e.hl=[];c=p(b);for(b=c.next();!b.done;b=c.next())d=
[],Rh(b.value,d),Sh(d),e.hl.push(d)}b=p(bg);for(e=b.next();!e.done;e=b.next())if(a=e.value,!(a.oa<=Zh)){if(a.oa>$h+1)break;xi(a);c=a;a=yi(!1,Infinity,c.index,t.i.P.get("HandRail01"),nh);a.facing=0;a.Ia=2;e=c.style.dd;c=p(c.Dm);for(d=c.next();!d.done;d=c.next())for(d=d.value,h=p(d),g=h.next();!g.done;g=h.next()){g=g.value;var l=[];k=(g.T-g.R)/2E5;for(var m=Math.round(k),n=.5*(k-m);.125>n;)--m,n+=.5;if(!(0>m))for(l.push({ob:.5,rh:0,length:n}),l.push({ob:1,rh:0,length:k-2*n}),l.push({ob:.5,rh:1-n,length:n}),
k=0,m=new E(g.Cc(),g.Bc()),l=p(l),n=l.next();!n.done;n=l.next()){n=n.value;k+=2E5*n.length;var r=g.Ef(k,0),q=[];var v=new ld(m.y,d.y,m.x);sd(v,n.rh,n.ob);rd(v,e);q.push(v);v=new ld(r.y,d.y,r.x);sd(v,n.rh+n.length,n.ob);rd(v,e);q.push(v);v=new ld(r.y,d.y+112500,r.x);sd(v,n.rh+n.length,n.ob-.5);rd(v,e);q.push(v);v=new ld(m.y,d.y+112500,m.x);sd(v,n.rh,n.ob-.5);rd(v,e);q.push(v);a.pe.push(q);m=r}}}a=p(bg);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.oa<=Zh)){if(b.oa>$h+1)break;e=p(b);for(b=e.next();!b.done;b=
e.next())for(c=p(b.value.xb),b=c.next();!b.done;b=c.next())b.value.vj()}b=p(bg);for(e=b.next();!e.done;e=b.next())if(a=e.value,!(a.oa<=Zh)){if(a.oa>$h+1)break;a=p(a.Db);for(e=a.next();!e.done;e=a.next())e.value.stroke()}a=p(bg);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.oa<=Zh)){if(b.oa>$h+1)break;e=p(b);for(b=e.next();!b.done;b=e.next())for(c=p(b.value.xb),b=c.next();!b.done;b=c.next())b.value.gk()}vi++}}
function ki(a,b){ah=Ch();var c=[];c.length=0;for(var d=p(a),e=d.next();!e.done;e=d.next()){var h=e.value,g=p(b);for(e=g.next();!e.done;e=g.next()){var k=e.value,l=[];if(h.U==k.U&&h.y!=k.y){if(h.hc){var m=void 0,n=p(h.hc);for(e=n.next();!e.done;e=n.next())e=e.value,e.target==k&&(m||(m=zi(h)),l.push(Ai(h,k,m,e.direction)))}if(k.hc)for(m=void 0,n=p(k.hc),e=n.next();!e.done;e=n.next())e=e.value,e.target==h&&(m||(m=zi(k)),l.push(Ai(k,h,m,e.direction)));h.hc||k.hc||(l.push(Bi(h,k)),l.push(Bi(k,h)),!yh(2)&&
l.reverse());c=c.concat(l)}}}d=p(c);for(e=d.next();!e.done;e=d.next())for(e=e.value,Ah(e),h=p(e),e=h.next();!e.done;e=h.next())if(e=e.value,Ci(e))return e.ua.xb.push(e),e;c.length=0;d=p(a);for(e=d.next();!e.done;e=d.next())for(h=e.value,g=p(b),e=g.next();!e.done;e=g.next())e=e.value,h.U!=e.U&&h.y==e.y&&(c=h.U.oa==e.U.oa&&h.U.Jb==e.U.Jb?c.concat(Di(h,e)):c.concat(Ei(h,e,112500)));Ah(c);d=p(c);for(e=d.next();!e.done;e=d.next())if(e=e.value,Ci(e))return e.ua.xb.push(e),e.Ya.xb.push(e),e;c.length=0;a=
p(a);for(e=a.next();!e.done;e=a.next())for(d=e.value,h=p(b),e=h.next();!e.done;e=h.next())if(g=e.value,k=[],d.U!=g.U&&d.y!=g.y){if(d.hc)for(l=void 0,m=p(d.hc),e=m.next();!e.done;e=m.next())e=e.value,e.target==g&&(l||(l=zi(d)),k.push(Ai(d,g,l,e.direction)));if(g.hc)for(l=void 0,m=p(g.hc),e=m.next();!e.done;e=m.next())e=e.value,e.target==d&&(l||(l=zi(g)),k.push(Ai(g,d,l,e.direction)));d.hc||g.hc||(k.push(Bi(d,g)),k.push(Bi(g,d)),!yh(2)&&k.reverse());c=c.concat(k)}b=p(c);for(e=b.next();!e.done;e=b.next())for(c=
e.value,Ah(c),c=p(c),e=c.next();!e.done;e=c.next())if(a=e.value,Ci(a)){a.ua.xb.push(a);if(e=a.tl)e=a,h=e.tl,g=[],g.index=ji++,g.xb=[],g.y=e.Ya.y,g.U=e.ua.U,g.U.push(g),h.platform=g,g.push(h),d=e.ua.slice(),Jh(e.ua,[h]),fi(),h=ki([g],[e.Ya]),h||(e.ua.length=0,e.ua.push.apply(e.ua,ba(d)),e.ua.U.pop(),ji--),e=!h;if(e)a.ua.xb.pop();else return a}}
function li(a,b){function c(y,x,A){-x.d<=y.R||-x.d>y.T||x.R>=y.d||x.T<y.d||(A=[(new Fi).raw(y.d,y.R,-x.d).rotate(A),(new Gi).raw(-x.d,-y.d,-x.R).rotate(A)],A.lh=y.source,A.ng=x.source,A.Ua=A[0].T-A[0].R+(A[1].T-A[1].R),14E5>=A.Ua&&Ra(h,A))}function d(y,x,A){y.d!=-x.d||-x.R<=y.R||-x.T>y.T||(A=[(new Fi).raw(y.d,y.R,-x.R).rotate(A)],A.lh=y.source,A.ng=x.source,A.Ua=A[0].T-A[0].R,14E5>=A.Ua&&Ra(h,A))}var e=Gh(Bh(),162500,162500),h=[];h.cmp=function(y,x){return y.Ua<x.Ua?-1:1};var g=[],k=[];a=p(a);for(var l=
a.next();!l.done;l=a.next())g=g.concat(Xh(l.value));b=p(b);for(a=b.next();!a.done;a=b.next())k=k.concat(Xh(a.value));b=[[],[],[],[]];a=[[],[],[],[]];for(l=0;4>l;l++){for(var m=Eh(e,l),n=p(g),r=n.next();!r.done;r=n.next()){var q=r.value;r=q.source.source;q=Fh(q.x,q.y,l);var v=q.y,B=q.x;q=Ph(q.x,q.y,m);q<=B||(v=new Fi(v,B,q),v.source=r,b[l].push(v))}n=p(k);for(r=n.next();!r.done;r=n.next())q=r.value,r=q.source.source,q=Fh(q.x,q.y,l),v=q.y,B=q.x,q=Ph(q.x,q.y,m),q<=B||(v=new Fi(v,B,q),v.source=r,a[l].push(v))}for(e=
1;4>e;e++){g=void 0;g=(e+1)%4;k=p(b[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=p(a[g]),r=m.next();!r.done;r=m.next())c(l,r.value,e,g);k=p(a[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=p(b[g]),r=m.next();!r.done;r=m.next())c(l,r.value,e,g);g=(e+2)%4;k=p(b[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=p(a[g]),r=m.next();!r.done;r=m.next())d(l,r.value,e,g)}for(b=0;b<h.length;b++){a=h[b];e=a[0];g=a[a.length-1];k=a.lh.platform;l=a.ng.platform;m=Math.min(k.y,l.y);r=Math.max(k.y,
l.y);if(e==g){if(n=25E3*(Math.floor((e.T-e.R-325E3)/5E4)-1),0>n&&(n=0),Math.abs(l.y-k.y)>n){h.splice(b--,1);continue}}else if(n=25E3*(Math.floor((e.T-e.R-325E3)/5E4)-1),0>n&&(n=0),m=Math.max(m,k.y-n),r=Math.min(r,k.y+n),n=25E3*(Math.floor((g.T-g.R-325E3)/5E4)-1),0>n&&(n=0),m=Math.max(m,l.y-n),r=Math.min(r,l.y+n),m>r){h.splice(b--,1);continue}a.y=zh(m,r);a.hc=[];Math.abs(k.y-a.y)/25E3&&a.hc.push({direction:(e.ub()+2+3)%4,target:k});Math.abs(l.y-a.y)/25E3&&a.hc.push({direction:(g.ub()+3)%4,target:l});
a.hc.length||delete a.hc}for(b=0;4>b;b++){a=h[b];if(!a)break;g=a.lh.platform;k=a.ng.platform;e=[];hi.call(e);e.index=bg.length+cg;e.Jb=g.U.oa>k.U.oa?g.U.Jb:k.U.Jb;e.Jb.push(e);bg.push(e);0==e.index%5&&(e.$c=!0);e.style={};e.style.height=225E3;e.style.height+=5E4*yh(4);e.style.dd=e.Jb.dd;e.$c?(e.style.Nc=zh(th,vh),e.style.Za=1E5):(e.style.Nc=zh(rh,uh,wh),e.style.Za=e.Jb.Za);g=[];g.index=ji++;g.xb=[];g.y=a.y;a.hc&&(g.hc=a.hc);g.U=e;e.push(g);k=p(a);for(l=k.next();!l.done;l=k.next())l=l.value.ph().expand(162500,
162500),l.platform=g,g.push(l);fi();k=k=void 0;if(g.y==a.ng.platform.y){if(k=ki([a.lh.platform],[g])){if(k=ki([g],[a.ng.platform]))return a;a.lh.platform.xb.pop()}}else if(k=ki([g],[a.ng.platform])){if(k=ki([a.lh.platform],[g]))return a;a.ng.platform.xb.pop()}bg.pop();e.Jb.pop()}return!1}
function Ei(a,b,c){a.Te=Hi(a,c);b.Te=Hi(b,c);var d=[],e=[],h=c+37500,g=Dh(a.Te,h,0),k=Dh(b.Te,-h,0);k=Kh(g,k);var l=p(k);for(g=l.next();!g.done;g=l.next())g.value.direction=0;e=e.concat(k);g=Dh(a.Te,0,h);k=Dh(b.Te,0,-h);k=Kh(g,k);l=p(k);for(g=l.next();!g.done;g=l.next())g.value.direction=1;e=e.concat(k);g=Dh(a.Te,-h,0);k=Dh(b.Te,h,0);k=Kh(g,k);l=p(k);for(g=l.next();!g.done;g=l.next())g.value.direction=2;e=e.concat(k);g=Dh(a.Te,0,-h);h=Dh(b.Te,0,h);h=Kh(g,h);k=p(h);for(g=k.next();!g.done;g=k.next())g.value.direction=
3;e=e.concat(h);Ah(e);h=new Lh(-9375,9375,-c,c);e=p(e);for(g=e.next();!g.done;g=e.next()){g=g.value;k=h.Hg(g.direction);l=p([{z:g.J,x:g.v},{z:g.L-1,x:g.D-1}]);for(var m=l.next();!m.done;m=l.next())m=m.value,m=k.translate(m.z,m.x),m.y=a.y,m.direction=g.direction,d.push(new Ii(m,c,a,b))}return d}function Hi(a,b){b+=37500;var c=Hh(a,new Lh(0,1,0,1));a=Nh(c,1);a=Hh(a,new Lh(-b,b,-b,b));Jh(c,a);return c}
function Di(a,b){for(var c=[],d=p(a),e=d.next();!e.done;e=d.next())Rh(e.value,c);d=[];c=p(c);for(e=c.next();!e.done;e=c.next()){e=e.value;for(var h=p(b),g=h.next();!g.done;g=h.next())e.Wh(g.value,d)}for(c=[];d.length;){e=d.pop();for(h=0;h<d.length;h++)g=d[h],e.ub()==g.ub()&&e.d==g.d&&(e.T==g.R?(d.splice(h,1),e.T=g.T,h=-1):e.R==g.T&&(d.splice(h,1),e.R=g.R,h=-1));225E3>e.T-e.R||c.push(e)}d=[];c=p(c);for(e=c.next();!e.done;e=c.next())d.push(new Ji(e.value,a,b));return d}
function ii(){var a=T;if(!a.$c){for(var b=new Lh,c=p(a),d=c.next();!d.done;d=c.next()){var e=p(d.value);for(d=e.next();!d.done;d=e.next())Mh(b,d.value)}var h=b.L-b.J-2E5-2E5-30625-30625;d=b.D-b.v-2E5-2E5-30625-30625;c=Math.round(h/625E3);e=Math.round(d/625E3);h=b.J+2E5+30625+.5*(h-625E3*(c-1));b=b.v+2E5+30625+.5*(d-625E3*(e-1));var g=[],k=p(a);for(d=k.next();!d.done;d=k.next())g=g.concat(d.value);g=Nh(g,1);g=Gh(g,2E5,2E5);for(k=0;k<c;k++){for(var l=b,m={},n=0;n<e;m={ti:m.ti},n++){d=function(q){return function(){for(var v=
p(g),B=v.next();!B.done;B=v.next())if(Ki(q.ti,B.value))return!1;return!0}}(m);m.ti=new Lh(h-30625,h+30625,l-30625,l+30625);if(d()){var r=p(a);for(d=r.next();!d.done;d=r.next())Jh(d.value,[m.ti])}l+=625E3}h+=625E3}}}function Bi(a,b){for(var c=zi(a),d=[],e=0;4>e;e++)d=d.concat(Ai(a,b,c,e));return d}
function Ai(a,b,c,d){var e=25E3*Math.ceil(Math.abs(b.y-a.y)/25E3),h=a.U!=b.U?325E3:0,g=function(l,m,n){function r(y){for(var x=0;x<y.length;x++)for(var A=y[x],z=x+1;z<y.length;z++){var D=y[z];if(A.J==D.J&&A.L==D.L){if(D.D==A.v){y.splice(z--,1);A.v=D.v;x--;break}if(D.v==A.D){y.splice(z--,1);A.D=D.D;x--;break}}}y=p(y);for(x=y.next();!x.done;x=y.next())x=x.value,x.v=x.D-1,x.direction=d}var q=Nh(l,1);q=Hh(q,new Lh(-162499,162500,-e-h+1,e+162500+162500));l=q=Nh(q,0);q=Hh(n,new Lh(0,0,-e-h+1,e));q=Nh(q,
1);q=Hh(q,new Lh(-162500,162501,0,0));l=q=Kh(l,q);q=Nh(m,1);q=Hh(q,new Lh(-162499,162500,-162499,162500));q=Nh(q,0);n=[];m=Kh(l,Dh(q,0,-e-h-162500));r(m);for(var v=p(m),B=v.next();!B.done;B=v.next())B.value.type=1;n=n.concat(m);if(0!=h){m=Kh(l,Dh(q,-325E3,-e-162500));r(m);v=p(m);for(B=v.next();!B.done;B=v.next())B.value.type=0;n=n.concat(m);m=Kh(l,Dh(q,325E3,-e-162500));r(m);l=p(m);for(B=l.next();!B.done;B=l.next())B.value.type=2;n=n.concat(m)}return n}(Eh(a,d),Eh(b,d),Eh(c,d));c=[];g=p(g);for(var k=
g.next();!k.done;k=g.next())c.push(new Li(k.value,e,h,a,b));return c}function zi(a){for(var b=a.slice(),c=p(a.Zf),d=c.next();!d.done;d=c.next())d=d.value,d=d.Ka.platform!=a?d.Ka.platform:d.qa.platform,d.U==a.U&&(b=b.concat(d));return b}
function fi(){for(var a=[],b=p(bg),c=b.next();!c.done;c=b.next()){c=p(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;d.Zf=[];for(var e=p(d),h=e.next();!h.done;h=e.next())h.value.Zf=[];a=a.concat(d)}}for(b=0;b<a.length;b++)for(c=a[b],d=b+1;d<a.length;d++)if(e=a[d],h=Mi(c,e))h.Ka=c,h.qa=e,c.Zf.push(h),e.Zf.push(h),c.platform!=e.platform&&(c.platform.Zf.push(h),e.platform.Zf.push(h))}
function ri(){ah=Ch();var a=p(bg),b=a.next();a:for(;!b.done;b=a.next())if(b=b.value,!b.nn){b.nn=!0;b=p(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=p(c.Zf),e=d.next();!e.done;e=d.next())if(e=e.value,e=e.Ka.platform!=c?e.Ka.platform:e.qa.platform,c.U.oa==e.U.oa&&!(c.index<=e.index)&&c.U!=e.U){var h=Ei(c,e,87500);Ah(h);h=p(h);for(var g=h.next();!g.done;g=h.next())if(g=g.value,Ci(g)){g.rd=!0;c.xb.push(g);e.xb.push(g);continue a}}}}}
function hi(){this.oa=Yh+1;this.Dm=[];this.Db=[];this.Hb=[];this.bound=new Rd;this.sa=-Infinity;this.floor=Infinity;this.o=-Infinity;this.ja={};this.ja.pa=-2147483648;this.ja.lb=new w(1,1,1);this.ed=0;this.Yb=new w;this.cells=new bb(lb)}var ji=0;
function Ii(a,b,c,d){this.Ta=a;this.direction=a.direction;this.a=b;this.ua=c;this.Ya=d;this.z=.5*a.J+.5*a.L;this.x=.5*a.v+.5*a.D;this.y=Math.max(c.y,d.y);this.mc=[];this.mg=[];this.Jd=[];this.Yd=[];this.Db=[];c=new Lh(a.J,a.L,a.v,a.D);c.o=a.y;c.F=c.o+225E3;this.Jd.push(c);this.mg.push(c);b=new Lh(2*-b,2*b,-b,b);b=b.rotate(this.direction);b=b.translate(this.z,this.x);b.F=a.y;b.o=b.F-18750;this.Jd.push(b);b=new Lh(b.J,b.L,b.v,b.D);b.o=a.y;b.F=b.o+225E3;this.Yd.push(b)}f=Ii.prototype;f.Dk=function(){Tg.im.push(this.Ta)};
f.translate=function(a,b){this.z+=a;this.x+=b};
f.vj=function(){if(!this.Db.length){this.ud=0;var a=new Fi(0,0,1);a=a.rotate(this.direction);this.Aa=new Ec(a.Cc()+this.z,a.Bc()+this.x,a.bc()+this.z,a.ac()+this.x);a=new Ni;a.add=!0;a.Za=0;a.color=ih;this.rd?(a.o=this.y+87500,a.F=a.o+125E3):(a.o=this.y,a.F=this.y+225E3);for(var b=[new E(0,-this.a),new E(0,this.a),new E(-9375,this.a),new E(-9375,-this.a)],c=[new E(0,this.a),new E(0,-this.a),new E(9375,-this.a),new E(9375,this.a)],d=0;d<b.length;d++)b[d]=this.Aa.tb(b[d].x,b[d].y);for(d=0;d<c.length;d++)c[d]=
this.Aa.tb(c[d].x,c[d].y);a.ca=this.ua.U.index;Oi(a,b);this.Db.push(a);a=a.X();a.ca=this.Ya.U.index;Oi(a,c);this.Db.push(a);this.Gc=new Bf(new Ec(b[0].x,b[0].y,b[1].x,b[1].y),a.o,a.F);this.Wc=new Bf(new Ec(c[0].x,c[0].y,c[1].x,c[1].y),a.o,a.F);this.Gc.td=this.Wc;this.Wc.td=this.Gc;this.Gc.ca=this.ua.U.index;this.Wc.ca=this.Ya.U.index;this.Gc.rd=this.rd;this.Wc.rd=this.rd}};
f.gk=function(){if(0==this.ud){for(var a=p(this.Db),b=a.next();!b.done;b=a.next())b.value.stroke();this.ud=1}1!=this.ud||this.ua.U.oa>$h+1||this.Ya.U.oa>$h+1||(this.ua.U.Hb.push(this.Gc),this.Ya.U.Hb.push(this.Wc),this.ud=2)};f.create=function(){if(this.Jj)this.Jj.update();else if(0<this.ud)if(this.rd)this.Jj=new Pi(this.Aa,this.y+87500,this.ua.U,this.Ya.U);else if(this.ua.U.oa!=this.Ya.U.oa||this.ua.U.$c!=this.Ya.U.$c)this.Jj=new Qi(this.Aa,this.y,this.Gc,this.Wc,this.ua.U,this.Ya.U)};
f.Bj=function(){if(!this.jg){for(var a=p(this.Db),b=a.next();!b.done;b=a.next())wi(b.value);this.jg=!0}};function ni(a){var b=a.ua.xb,c=b.indexOf(a);0>c||b.splice(c,1);b=a.Ya.xb;a=b.indexOf(a);0>a||b.splice(a,1)}f.zj=function(){if(this.rd){var a=this.y+87500;var b=a+125E3}else a=this.y,b=this.y+225E3;this.ua.U.sa=Math.max(this.ua.U.sa,b);this.Ya.U.sa=Math.max(this.Ya.U.sa,b);this.ua.U.o=Math.min(this.ua.U.o,a);this.Ya.U.o=Math.min(this.Ya.U.o,a)};
function Ji(a,b,c){var d=.5*(a.T-a.R)-9375,e=a.ph();this.direction=(a.ub()+3)%4;this.a=d;this.Ta=e;this.ua=b;this.Ya=c;this.z=.5*e.J+.5*e.L;this.x=.5*e.v+.5*e.D;this.y=Math.max(b.y,c.y);e.y=this.y;this.mc=[];this.mg=[];this.Jd=[];this.Yd=[];this.Db=[];a=new Lh(e.J,e.L,e.v,e.D);a.o=e.y;a.F=a.o+225E3;this.Jd.push(a);this.mg.push(a);d=new Lh(-225E3,225E3,-d,d);d=d.rotate(this.direction);d=d.translate(this.z,this.x);d.F=e.y;d.o=d.F-18750;this.Jd.push(d);d=new Lh(d.J,d.L,d.v,d.D);d.o=e.y;d.F=d.o+225E3;
this.Yd.push(d)}f=Ji.prototype;f.Dk=function(){Tg.im.push(this.Ta)};f.translate=function(a,b){this.z+=a;this.x+=b};
f.vj=function(){if(!this.Db.length){this.ud=0;var a=new Fi(0,0,1);a=a.rotate(this.direction);this.Aa=new Ec(a.Cc()+this.z,a.Bc()+this.x,a.bc()+this.z,a.ac()+this.x);a=new Ni;a.add=!0;a.Za=0;a.color=ih;this.rd?(a.o=this.y+87500,a.F=a.o+125E3):(a.o=this.y,a.F=Math.min(this.ua.U.sa,this.Ya.U.sa));for(var b=[new E(0,-this.a),new E(0,this.a),new E(-9375,this.a),new E(-9375,-this.a)],c=[new E(0,this.a),new E(0,-this.a),new E(9375,-this.a),new E(9375,this.a)],d=0;d<b.length;d++)b[d]=this.Aa.tb(b[d].x,b[d].y);
for(d=0;d<c.length;d++)c[d]=this.Aa.tb(c[d].x,c[d].y);a.ca=this.ua.U.index;Oi(a,b);this.Db.push(a);a=a.X();a.ca=this.Ya.U.index;Oi(a,c);this.Db.push(a);this.Gc=new Bf(new Ec(b[0].x,b[0].y,b[1].x,b[1].y),a.o,a.F);this.Wc=new Bf(new Ec(c[0].x,c[0].y,c[1].x,c[1].y),a.o,a.F);this.Gc.td=this.Wc;this.Wc.td=this.Gc;this.Gc.ca=this.ua.U.index;this.Wc.ca=this.Ya.U.index;this.Gc.rd=this.rd;this.Wc.rd=this.rd}};
f.gk=function(){if(0==this.ud){for(var a=p(this.Db),b=a.next();!b.done;b=a.next())b.value.stroke();this.ud=1}1!=this.ud||this.ua.U.oa>$h+1||this.Ya.U.oa>$h+1||(this.ua.U.Hb.push(this.Gc),this.Ya.U.Hb.push(this.Wc),this.ud=2)};f.create=function(){};f.Bj=function(){if(!this.jg){for(var a=p(this.Db),b=a.next();!b.done;b=a.next())wi(b.value);this.jg=!0}};f.zj=function(){};
function Li(a,b,c,d,e){this.Ta=a;this.direction=a.direction;this.type=a.type;this.Sb=162500;this.se=b;this.ua=d;this.Ya=e;var h=Math.min(d.y,e.y),g=Math.max(d.y,e.y);this.mc=[];this.mg=[];this.Jd=[];this.Yd=[];this.Db=[];var k=new Lh(-162500,162500,-b,b);k=k.translate(a.J,a.v);k=k.rotate(this.direction);k.o=h-18750;k.F=g;this.mc.push(k);this.mg.push(k);k=new Lh(k.J,k.L,k.v,k.D);k.o=h;k.F=g+2E5;this.Yd.push(k);k=new Lh(-162500,162500,-b-162500-162500,-b);k=k.translate(a.J,a.v);k=k.rotate(this.direction);
k.o=d.y;k.F=g+2E5;this.Yd.push(k);k=new Lh(k.J,k.L,k.v,k.D);k.o=h-18750;k.F=d.y;this.mc.push(k);this.Jd.push(k);if(c){d=new Lh(-162500,162500,b,b+c);d=d.translate(a.J,a.v);d=d.rotate(this.direction);d.o=e.y;d.F=g+2E5;this.Yd.push(d);d=new Lh(d.J,d.L,d.v,d.D);d.o=h-18750;d.F=e.y;this.mc.push(d);this.Jd.push(d);this.tl=d;var l;0==this.type?l=new Lh(162500,487500,b,b+c):1==this.type?l=new Lh(-162500,162500,b+c,b+c+325E3):2==this.type&&(l=new Lh(-487500,-162500,b,b+c));l=l.translate(a.J,a.v);l=l.rotate(this.direction);
l.o=e.y;l.F=g+2E5;this.Yd.push(l);l=new Lh(l.J,l.L,l.v,l.D);l.o=h-18750;l.F=e.y;this.mc.push(l);this.Jd.push(l)}else b=new Lh(-162500,162500,b,b+162500),b=b.translate(a.J,a.v),b=b.rotate(this.direction),b.o=e.y,b.F=g+2E5,this.Yd.push(b),b=new Lh(b.J,b.L,b.v,b.D),b.o=h-18750,b.F=e.y,this.mc.push(b),this.Jd.push(b)}f=Li.prototype;
f.Dk=function(){var a=(this.Ya.y-this.ua.y)/25E3;if(this.Ya.y>this.ua.y)for(var b=0;b<=a;b++){var c=new Fi(this.Ta.v-this.se+5E4*b,this.Ta.J-this.Sb,this.Ta.J+this.Sb);c=c.rotate(this.direction);c.y=this.ua.y+25E3*b;Tg.Ym.push(c)}else for(a=-a,b=0;b<=a;b++)c=new Fi(this.Ta.v-this.se+5E4*b,this.Ta.J-this.Sb,this.Ta.J+this.Sb),c=c.rotate(this.direction),c.y=this.ua.y-25E3*b,Tg.Ym.push(c)};
f.translate=function(a,b){this.z+=a;this.x+=b;this.Ta=this.Ta.rotate(this.direction);this.Ta.J+=a;this.Ta.L+=a;this.Ta.v+=b;this.Ta.D+=b;this.Ta=this.Ta.Hg(this.direction);this.mc[0].J+=a;this.mc[0].L+=a;this.mc[0].v+=b;this.mc[0].D+=b};
f.vj=function(){if(!this.Db.length){this.ud=0;var a=this.ua.U,b=(this.Ya.y-this.ua.y)/25E3,c=function(h){return 1!=h.Ei?!1:!0};if(this.Ya.y>this.ua.y)for(c=0;c<b;c++){var d=new Lh(this.Ta.J-this.Sb,this.Ta.J+this.Sb,this.Ta.v-this.se+5E4*c,this.Ta.v-this.se+5E4*(c+1));d=d.rotate(this.direction);d=[new E(d.J,d.v),new E(d.L,d.v),new E(d.L,d.D),new E(d.J,d.D)];a=new Ni;a.add=!1;a.ca=this.ua.U.index;a.Za=0;a.color=ih;a.o=this.ua.y;a.F=this.ua.y+25E3*(c+1);Oi(a,d);this.Db.push(a)}else for(b=-b,d=new Ni,
d.add=!0,d.Ei=1,d.ca=this.ua.U.index,d.Xh=c,d.Nc=a.style.Nc,d.Za=a.style.Za,d.Tf=a.o,d.color=a.style.dd,d.o=this.Ya.y,d.F=this.ua.y,a=this.mc[0],Oi(d,[new E(a.J,a.v),new E(a.L,a.v),new E(a.L,a.D),new E(a.J,a.D)]),this.Db.push(d),d=0;d<b;d++){a=new Lh(this.Ta.J-this.Sb,this.Ta.J+this.Sb,this.Ta.v-this.se+5E4*d,this.Ta.v-this.se+5E4*(d+1));a=a.rotate(this.direction);a=[new E(a.J,a.v),new E(a.L,a.v),new E(a.L,a.D),new E(a.J,a.D)];var e=new Ni;e.add=!1;e.ca=this.ua.U.index;e.Xh=c;e.Za=0;e.color=ih;e.o=
this.Ya.y;e.F=this.ua.y-25E3*d;Oi(e,a);this.Db.push(e)}}};f.gk=function(){if(0==this.ud){for(var a=p(this.Db),b=a.next();!b.done;b=a.next())b.value.stroke();this.ud=2}};f.create=function(){};f.Bj=function(){if(!this.jg){for(var a=p(this.Db),b=a.next();!b.done;b=a.next())wi(b.value);this.jg=!0}};f.zj=function(){this.ua.U.o=Math.min(this.ua.U.o,this.Ya.y);this.Ya.U.o=Math.min(this.Ya.U.o,this.ua.y)};
function Ri(a,b){for(var c=p(a.Jd),d=c.next();!d.done;d=c.next()){var e=d.value,h=p(b.mg);for(d=h.next();!d.done;d=h.next())if(Si(e,d.value))return!1}c=p(a.mg);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=p(b.Jd),d=h.next();!d.done;d=h.next())if(Si(e,d.value))return!1;c=p(a.Yd);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=p(b.mc),d=h.next();!d.done;d=h.next())if(Si(e,d.value))return!1;a=p(a.mc);for(d=a.next();!d.done;d=a.next())for(c=d.value,e=p(b.Yd),d=e.next();!d.done;d=e.next())if(Si(c,
d.value))return!1;return!0}function Ci(a){for(var b=p(ah),c=b.next();!c.done;c=b.next())if(!Ri(a,c.value))return!1;return!0}
function xi(a){function b(k){return k.add&&k.ca==this.ca?!0:!1}0>a.style.Za&&(a.style.Za+=a.sa-a.floor);for(var c=p(a.hl),d=c.next();!d.done;d=c.next()){d=d.value;var e=new Ni;e.add=!0;e.Ei=1;e.ca=a.index;e.Za=a.style.Za;e.color=a.style.dd;e.Nc=a.style.Nc;e.Tf=a.o;e.o=a.o;e.F=a.sa;Oi(e,dd(d));a.Db.push(e);a.$c&&(e.sa=null)}if(a.xm)for(c=p(a.xm),d=c.next();!d.done;d=c.next())d=d.value,e=new Ni,e.add=!0,e.Ei=1,e.ca=a.index,e.Za=a.style.Za,e.color=a.style.dd,e.Nc=a.style.Nc,e.Tf=a.o,e.o=a.o,e.F=a.sa,
Oi(e,dd(d)),a.Db.push(e);c=p(a);for(d=c.next();!d.done;d=c.next())if(e=d.value,!(e.y<=a.o)){var h=p(e.gl);for(d=h.next();!d.done;d=h.next()){d=d.value;var g=new Ni;g.add=!1;g.Ei=1;g.ca=a.index;g.Xh=b;g.Za=a.style.Za;g.color=a.style.dd;g.Nc=a.style.Nc;g.Tf=a.floor;g.o=a.o;g.F=e.y;Oi(g,dd(d));a.Db.push(g)}}};function Lh(a,b,c,d){a=void 0===a?NaN:a;b=void 0===b?NaN:b;c=void 0===c?NaN:c;d=void 0===d?NaN:d;this.J=a;this.L=b;this.v=c;this.D=d}f=Lh.prototype;f.Cf=function(a,b){return a<=this.J||a>=this.L||b<=this.v||b>=this.D?!1:!0};f.fh=function(a,b){a<this.J?a=this.J:a>this.L&&(a=this.L);b<this.v?b=this.v:b>this.D&&(b=this.D);return new E(a,b)};function Ti(a,b,c){var d=0;b<a.J?d+=a.J-b:b>a.L&&(d+=b-a.L);c<a.v?d+=a.v-c:c>a.D&&(d+=c-a.D);return d}
function Uh(a,b,c){b>=a.J||(a.J=b);b<=a.L||(a.L=b);c>=a.v||(a.v=c);c<=a.D||(a.D=c)}function Mh(a,b){b.J>=a.J||(a.J=b.J);b.L<=a.L||(a.L=b.L);b.v>=a.v||(a.v=b.v);b.D<=a.D||(a.D=b.D)}f.tc=function(a,b){a-=.5*this.L+.5*this.J;b-=.5*this.D+.5*this.v;return 1E5/Math.sqrt(a*a+b*b)};f.expand=function(a,b){return this.X(this.J-a,this.L+a,this.v-b,this.D+b)};
function Rh(a,b){var c=new Fi(a.v,a.J,a.L);c.source=a;b.push(c);c=new Ui(a.L,a.v,a.D);c.source=a;b.push(c);c=new Vi(a.D,a.L,a.J);c.source=a;b.push(c);c=new Gi(a.J,a.D,a.v);c.source=a;b.push(c)}
function ti(a,b,c,d,e){var h=new Lh(a.L+b+d,a.L+b+d,Math.min(a.v+c,a.D-c)-d,Math.max(a.v+c,a.D-c)+d);h.L+=1;h.D+=1;e.push(h);h=new Lh(Math.min(a.J+b,a.L-b)-d,Math.max(a.J+b,a.L-b)+d,a.D+c,a.D+c+d);h.L+=1;h.D+=1;e.push(h);h=new Lh(a.J-b-d,a.J-b-d,Math.min(a.v+c,a.D-c)-d,Math.max(a.v+c,a.D-c)+d);h.L+=1;h.D+=1;e.push(h);h=new Lh(Math.min(a.J+b,a.L-b)-d,Math.max(a.J+b,a.L-b)+d,a.v-c-d,a.v-c-d);h.L+=1;h.D+=1;e.push(h)}
f.X=function(a,b,c,d){a=new Lh(a,b,c,d);this.Ok&&(a.Ok=this.Ok);this.platform&&(a.platform=this.platform);this.U&&(a.U=this.U);void 0!==this.direction&&(a.direction=this.direction);void 0!==this.type&&(a.type=this.type);return a};
f.mh=function(a,b){if(!Ki(this,a))return!1;var c=this.v,d=this.D;this.D>a.D&&(b.push(this.X(this.J,this.L,a.D,this.D)),d=a.D);this.v<a.v&&(b.push(this.X(this.J,this.L,this.v,a.v)),c=a.v);this.L>a.L&&b.push(this.X(a.L,this.L,c,d));this.J<a.J&&b.push(this.X(this.J,a.J,c,d));return!0};f.Wh=function(a,b){a=this.X(Math.max(this.J,a.J),Math.min(this.L,a.L),Math.max(this.v,a.v),Math.min(this.D,a.D));a.L<=a.J||a.D<=a.v||b.push(a)};function Ih(a,b){return a.X(a.J+b.J,a.L+b.L,a.v+b.v,a.D+b.D)}
f.rotate=function(a){switch(a){case 0:return this.X(this.J,this.L,this.v,this.D);case 1:return this.X(-this.D,-this.v,this.J,this.L);case 2:return this.X(-this.L,-this.J,-this.D,-this.v);case 3:return this.X(this.v,this.D,-this.L,-this.J)}};f.Hg=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return this.X(this.J+a,this.L+a,this.v+b,this.D+b)};function Mi(a,b){a=new Lh(Math.max(a.J,b.J),Math.min(a.L,b.L),Math.max(a.v,b.v),Math.min(a.D,b.D));return a.L<a.J||a.D<a.v?null:a}
function Ki(a,b){return a.J>=b.L||a.L<=b.J||a.v>=b.D||a.D<=b.v?!1:!0}function Si(a,b){return!Ki(a,b)||a.o>=b.F||a.F<=b.o?!1:!0}function ui(a,b,c){var d=0;a=p(a);for(var e=a.next();!e.done;e=a.next())d+=e.value.tc(b,c);return d}function Fi(a,b,c){this.d=a;this.R=b;this.T=c}function Ui(a,b,c){this.d=-a;this.R=b;this.T=c}function Vi(a,b,c){this.d=-a;this.R=-b;this.T=-c}function Gi(a,b,c){this.d=a;this.R=-b;this.T=-c}f=Fi.prototype;f.ub=function(){return 0};f.Cc=function(){return this.R};f.Bc=function(){return this.d};
f.bc=function(){return this.T};f.ac=function(){return this.d};f.raw=function(a,b,c){this.d=a;this.R=b;this.T=c;return this};f.gg=function(){return new Ec(this.Cc(),this.Bc(),this.bc(),this.ac())};f.X=function(a,b,c){a=new Fi(a,b,c);a.source=this.source;return a};f.Hi=function(a,b,c){if(!this.mi){var d=new E(this.R+a,this.d-b);d.source=this;c.push(d)}this.Lh||(a=new E(this.T-a,this.d-b),a.source=this,c.push(a))};f.Ef=function(a,b){return new E(this.R+a,this.d+b)};
f.Cf=function(a,b){return b>this.d||b<this.d||a<this.R||a>=this.T?!1:!0};f.fh=function(a){return a<this.R?new E(this.R,this.d):a>this.T?new E(this.T,this.d):new E(a,this.d)};f.mh=function(a,b){if(this.d>a.D||this.d<=a.v||this.R>=a.L||this.T<=a.J)return!1;this.R<a.J&&b.push(this.X(this.d,this.R,a.J));this.T>a.L&&b.push(this.X(this.d,a.L,this.T));return!0};f.Wh=function(a,b){this.d>a.D||this.d<=a.v||this.R>=a.L||this.T<=a.J||b.push(this.X(this.d,Math.max(this.R,a.J),Math.min(this.T,a.L)))};
f.ph=function(){return new Lh(this.R,this.T,this.d,this.d)};f.rotate=function(a){switch(a){case 0:return(new Fi).raw(this.d,this.R,this.T);case 1:return(new Ui).raw(this.d,this.R,this.T);case 2:return(new Vi).raw(this.d,this.R,this.T);case 3:return(new Gi).raw(this.d,this.R,this.T)}};f.Hg=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Fi).raw(this.d+b,this.R+a,this.T+a)};f=Ui.prototype;f.ub=function(){return 1};f.Cc=function(){return-this.d};f.Bc=function(){return this.R};
f.bc=function(){return-this.d};f.ac=function(){return this.T};f.raw=Fi.prototype.raw;f.gg=Fi.prototype.gg;f.X=function(a,b,c){a=new Ui(-a,b,c);a.source=this.source;return a};f.Hi=function(a,b,c){if(!this.mi){var d=new E(-this.d+a,this.R+b);d.source=this;c.push(d)}this.Lh||(a=new E(-this.d+a,this.T-b),a.source=this,c.push(a))};f.Ef=function(a,b){return new E(-this.d-b,this.R+a)};f.Cf=function(a,b){return a>-this.d||a<-this.d||b<this.R||b>=this.T?!1:!0};
f.fh=function(a,b){return b<this.R?new E(-this.d,this.R):b>this.T?new E(-this.d,this.T):new E(-this.d,b)};f.mh=function(a,b){if(-this.d>=a.L||-this.d<a.J||this.R>=a.D||this.T<=a.v)return!1;this.R<a.v&&b.push(this.X(this.d,this.R,a.v));this.T>a.D&&b.push(this.X(this.d,a.D,this.T));return!0};f.Wh=function(a,b){-this.d>=a.L||-this.d<a.J||this.R>=a.D||this.T<=a.v||b.push(this.X(this.d,Math.max(this.R,a.v),Math.min(this.T,a.D)))};f.ph=function(){return new Lh(-this.d,-this.d,this.R,this.T)};
f.rotate=function(a){switch(a){case 0:return(new Ui).raw(this.d,this.R,this.T);case 1:return(new Vi).raw(this.d,this.R,this.T);case 2:return(new Gi).raw(this.d,this.R,this.T);case 3:return(new Fi).raw(this.d,this.R,this.T)}};f.Hg=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Ui).raw(this.d-a,this.R+b,this.T+b)};f=Vi.prototype;f.ub=function(){return 2};f.Cc=function(){return-this.R};f.Bc=function(){return-this.d};f.bc=function(){return-this.T};f.ac=function(){return-this.d};
f.raw=Fi.prototype.raw;f.gg=Fi.prototype.gg;f.X=function(a,b,c){a=new Vi(-a,-b,-c);a.source=this.source;return a};f.Hi=function(a,b,c){if(!this.mi){var d=new E(-this.R-a,-this.d+b);d.source=this;c.push(d)}this.Lh||(a=new E(-this.T+a,-this.d+b),a.source=this,c.push(a))};f.Ef=function(a,b){return new E(-this.R-a,-this.d-b)};f.Cf=function(a,b){return b>-this.d||b<-this.d||a>-this.R||a<=-this.T?!1:!0};f.fh=function(a){return a<-this.T?new E(-this.T,-this.d):a>-this.R?new E(-this.R,-this.d):new E(a,-this.d)};
f.mh=function(a,b){if(-this.d>=a.D||-this.d<a.v||-this.T>=a.L||-this.R<=a.J)return!1;-this.T<a.J&&b.push(this.X(this.d,-a.J,this.T));-this.R>a.L&&b.push(this.X(this.d,this.R,-a.L));return!0};f.Wh=function(a,b){-this.d>=a.D||-this.d<a.v||-this.T>=a.L||-this.R<=a.J||b.push(this.X(this.d,Math.max(this.R,-a.L),Math.min(this.T,-a.J)))};f.ph=function(){return new Lh(-this.T,-this.R,-this.d,-this.d)};
f.rotate=function(a){switch(a){case 0:return(new Vi).raw(this.d,this.R,this.T);case 1:return(new Gi).raw(this.d,this.R,this.T);case 2:return(new Fi).raw(this.d,this.R,this.T);case 3:return(new Ui).raw(this.d,this.R,this.T)}};f.Hg=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Vi).raw(this.d-b,this.R-a,this.T-a)};f=Gi.prototype;f.ub=function(){return 3};f.Cc=function(){return this.d};f.Bc=function(){return-this.R};f.bc=function(){return this.d};f.ac=function(){return-this.T};
f.raw=Fi.prototype.raw;f.gg=Fi.prototype.gg;f.X=function(a,b,c){a=new Gi(a,-b,-c);a.source=this.source;return a};f.Hi=function(a,b,c){if(!this.mi){var d=new E(this.d-a,-this.R-b);d.source=this;c.push(d)}this.Lh||(a=new E(this.d-a,-this.T+b),a.source=this,c.push(a))};f.Ef=function(a,b){return new E(this.d+b,-this.R-a)};f.Cf=function(a,b){return a>this.d||a<this.d||b>-this.R||b<=-this.T?!1:!0};f.fh=function(a,b){return b<-this.T?new E(this.d,-this.T):b>-this.R?new E(this.d,-this.R):new E(this.d,b)};
f.mh=function(a,b){if(this.d>a.L||this.d<=a.J||-this.T>=a.D||-this.R<=a.v)return!1;-this.T<a.v&&b.push(this.X(this.d,-a.v,this.T));-this.R>a.D&&b.push(this.X(this.d,this.R,-a.D));return!0};f.Wh=function(a,b){this.d>a.L||this.d<=a.J||-this.T>=a.D||-this.R<=a.v||b.push(this.X(this.d,Math.max(this.R,-a.D),Math.min(this.T,-a.v)))};f.ph=function(){return new Lh(this.d,this.d,-this.T,-this.R)};
f.rotate=function(a){switch(a){case 0:return(new Gi).raw(this.d,this.R,this.T);case 1:return(new Fi).raw(this.d,this.R,this.T);case 2:return(new Ui).raw(this.d,this.R,this.T);case 3:return(new Vi).raw(this.d,this.R,this.T)}};f.Hg=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Gi).raw(this.d+a,this.R-b,this.T-b)};
function Wi(a,b){function c(){for(var n=new bb(Fc),r=p(a),q=r.next();!q.done;q=r.next())q=q.value,n.add(q),n.add(q.da);r=p(a);for(q=r.next();!q.done;q=r.next())if(q=q.value,!q.remove){var v=n.get(q);v!=q&&(q.replace([v]),q.da.replace([v.da]))}return n.elements}function d(){for(var n=p(m),r=n.next();!r.done;r=n.next()){r=r.value;var q=r.x&-524288,v=r.y&-524288,B=!1;r.x<=q+256?(r.x=q,B=!0):r.x>=q+524288-256&&(r.x=q+524288,B=!0);r.y<=v+256?(r.y=v,B=!0):r.y>=v+524288-256&&(r.y=v+524288,B=!0);if(B){v=
p(r.inputs);for(q=v.next();!q.done;q=v.next())q.value.Fh=!0;r=p(r.outputs);for(q=r.next();!q.done;q=r.next())q.value.Fh=!0}}}function e(n,r,q){var v=Ic(r,n.m,n.l),B=Ic(r,n.K,n.H),y=Ic(n,r.m,r.l),x=Ic(n,r.K,r.H);if(-256>y&&256<x&&(-256>v&&256<B||256<v&&-256>B)||256<y&&-256>x&&(-256>v&&256<B||256<v&&-256>B)){v/=v-B;B=1-v;x=new E(Math.round(n.m*B+n.K*v),Math.round(n.l*B+n.H*v));v=n.hb(n.m,n.l,x.x,x.y);B=n.hb(x.x,x.y,n.K,n.H);y=r.hb(r.m,r.l,x.x,x.y);x=r.hb(x.x,x.y,r.K,r.H);var A=Yc(v),z=Yc(B),D=Yc(y),
I=Yc(x);n.replace([v,B]);n.da.replace([z,A]);r.replace([y,x]);r.da.replace([I,D]);q.push(v,B,y,x);q.push(A,z,D,I);n=!0}else n=!1;return n}function h(n,r){if(!n.remove){for(var q=p(m),v=q.next();!v.done;v=q.next())if(v=v.value,v.x!=n.m||v.y!=n.l)if(v.x!=n.K||v.y!=n.H){var B=n.Ef(v.x,v.y);if(!(0>=B.x||B.x>=n.length||-256>B.y||256<B.y)){q=n.hb(n.m,n.l,v.x,v.y);v=n.hb(v.x,v.y,n.K,n.H);B=n.hb(q.K,q.H,q.m,q.l);var y=n.hb(v.K,v.H,v.m,v.l);q.da=B;B.da=q;v.da=y;y.da=v;n.replace([q,v]);n.da.replace([y,B]);
h(q,r);h(v,r);h(B,r);h(y,r);return}}r.push(n)}}for(var g=[],k=p(a),l=k.next();!l.done;l=k.next())l=l.value,l.remove||g.push(l);a=g;a=c();b&&(a=Xi(null,a,e));var m=new bb(ud);b=p(a);for(l=b.next();!l.done;l=b.next())g=l.value,k=new E(g.m,g.l),k.inputs=[],k.outputs=[],k.a=1,g.Ka=m.Ma(k),g.Ka.outputs.push(g),g.Ka.a++,k=new E(g.K,g.H),k.inputs=[],k.outputs=[],k.a=1,g.qa=m.Ma(k),g.qa.inputs.push(g),g.qa.a++;m=m.elements;d();m=Xi(null,m,function(n,r,q){if(256>(Math.abs(r.x-n.x)+Math.abs(r.y-n.y))*Math.SQRT1_2){var v=
new E(n.x*n.a+r.x*r.a,n.y*n.a+r.y*r.a);v.a=n.a+r.a;v.x/=v.a;v.y/=v.a;v.round();v.inputs=n.inputs.concat(r.inputs);v.outputs=n.outputs.concat(r.outputs);n=p(v.inputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.qa=v,r.Fh=!0;n=p(v.outputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.Ka=v,r.Fh=!0;q.push(v);q=!0}else q=!1;return q});d();for(b=0;b<a.length;b++)g=a[b],g.remove?a.splice(b--,1):g.Ka==g.qa?(g.replace([]),g.da.replace([]),a.splice(b--,1)):g.Fh&&(k=g.hb(g.Ka.x,g.Ka.y,g.qa.x,g.qa.y),l=Yc(k),
g.replace([k]),g.da.replace([l]),a.splice(b++,1,k,l)),delete g.Ka,delete g.qa,delete g.Fh;(function(){for(var n=[],r=p(a),q=r.next();!q.done;q=r.next())h(q.value,n);a=n})();return a=c()}
function Xi(a,b,c){var d=[];if(a)for(var e=0;e<a.length;e++){var h=a[e];if(h.remove)a.splice(e--,1);else for(var g=0;g<b.length;g++){var k=b[g];if(k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);a.splice(e--,1);break}}}for(e=0;e<b.length;e++)if(h=b[e],h.remove)b.splice(e--,1);else for(g=e+1;g<b.length;g++)if(k=b[g],k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);b.splice(e--,1);break}a&&(b=a.concat(b));return d.length?Xi(b,d,c):b};var Yi,Zi,$i,aj,bj,cj=0;
function dj(){function a(c){function d(x,A,z){return Fh(A,z,x.ub()).y>=x.d}function e(x){x.Ua=0;var A=x.m,z=x.l;if(1==x.action)if(x.zb.length){var D=x.zb[0],I=D.Cc()-A;D=D.Bc()-z;x.Ua+=Math.sqrt(I*I+D*D);I=p(x.zb);for(D=I.next();!D.done;D=I.next())z=D.value,x.Ua+=z.T-z.R,A=z.bc(),z=z.ac()}else I=x.Z.bc(),D=x.Z.ac(),A=I-A,z=D-z,x.Ua+=Math.sqrt(A*A+z*z),A=I,z=D;else if(2==x.action)if(x.zb.length)for(D=x.zb[0],I=D.bc()-A,D=D.ac()-z,x.Ua+=Math.sqrt(I*I+D*D),I=p(x.zb),D=I.next();!D.done;D=I.next())z=D.value,
x.Ua+=z.T-z.R,A=z.Cc(),z=z.Bc();else I=x.Z.bc(),D=x.Z.ac(),A=I-A,z=D-z,x.Ua+=Math.sqrt(A*A+z*z),A=I,z=D;A=x.K-A;z=x.H-z;x.Ua+=Math.sqrt(A*A+z*z)}function h(x){x.wc=0;for(var A=p(x),z=A.next();!z.done;z=A.next())z=z.value,x.wc=z.complete?x.wc+.5*z.Ua:x.wc+z.Ua}for(var g=null,k=0,l=0;l<c.length;l++)if(!c[l].complete){k=l;g=c[l];break}if(!g)return!0;if(1==g.action){g.Z=g.Z.next;l=g.Z.bc();var m=g.Z.ac();if(l==g.m&&m==g.l||l==g.K&&m==g.H)return!1;for(var n=g.Z,r=g.Z.next;0<k;){var q=c[k-1],v=Ic(q,l,m);
if(1==q.yb&&0<=v||2==q.yb&&0>=v)q=new Ec(q.m,q.l,g.K,g.H),q.action=g.action,q.complete=g.complete,q.yb=g.yb,q.Z=g.Z,q.zb=g.zb,q.max=q,c=c.slice(),c.splice(--k,2,q),Ra($i,c),g=q;else break}q=!d(n,g.K,g.H)&&d(r,g.K,g.H);if(g.zb.length){if(Fh(r.bc(),r.ac(),n.ub()).y>n.d||q){l=[];m=g.zb[0];m=new Ec(g.m,g.l,m.Cc(),m.Bc());m.Ua=m.length;m.action=0;m.yb=g.action;l.push(m);m=p(g.zb);for(n=m.next();!n.done;n=m.next())n=n.value,n=new Ec(n.Cc(),n.Bc(),n.bc(),n.ac()),n.Ua=n.length,n.complete=1,n.action=0,n.yb=
g.action,l.push(n);m=g.zb[g.zb.length-1];m=new Ec(m.bc(),m.ac(),g.K,g.H);m.Ua=m.length;m.action=0;m.yb=g.yb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(ba(l)));e(g);h(c);Ra($i,c)==c&&Ra(Yi,c);return!1}g.zb.push(r)}else{v=r.bc();var B=r.ac();if(0<=Ic(g.max,l,m)&&(g.max=new Ec(g.m,g.l,l,m),Fh(v,B,n.ub()).y<n.d&&!d(r,g.m,g.l))){if(q)return n=[],r=new Ec(g.m,g.l,l,m),r.Ua=r.length,r.action=0,r.yb=g.action,n.push(r),l=new Ec(l,m,g.K,g.H),l.Ua=l.length,l.action=0,l.yb=g.yb,n.push(l),c=c.slice(),
c.splice.apply(c,[k,1].concat(ba(n))),e(g),h(c),Ra($i,c)==c&&Ra(Yi,c),!1;g.zb.push(r)}}e(g);h(c);Ra(Yi,c)}else if(2==g.action){g.Z=g.Z.rb;l=g.Z.bc();m=g.Z.ac();if(l==g.m&&m==g.l||l==g.K&&m==g.H)return!1;n=g.Z.next;for(r=g.Z;0<k;)if(q=c[k-1],v=Ic(q,l,m),1==q.yb&&0<=v||2==q.yb&&0>=v)q=new Ec(q.m,q.l,g.K,g.H),q.action=g.action,q.complete=g.complete,q.yb=g.yb,q.Z=g.Z,q.zb=g.zb,q.max=q,c=c.slice(),c.splice(--k,2,q),Ra($i,c),g=q;else break;q=!d(n,g.K,g.H)&&d(r,g.K,g.H);if(g.zb.length){if(Fh(r.Cc(),r.Bc(),
n.ub()).y>n.d||q){l=[];m=g.zb[0];m=new Ec(g.m,g.l,m.bc(),m.ac());m.Ua=m.length;m.action=0;m.yb=g.action;l.push(m);m=p(g.zb);for(n=m.next();!n.done;n=m.next())n=n.value,n=new Ec(n.bc(),n.ac(),n.Cc(),n.Bc()),n.Ua=n.length,n.complete=1,n.action=0,n.yb=g.action,l.push(n);m=g.zb[g.zb.length-1];m=new Ec(m.Cc(),m.Bc(),g.K,g.H);m.Ua=m.length;m.action=0;m.yb=g.yb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(ba(l)));e(g);h(c);Ra($i,c)==c&&Ra(Yi,c);return!1}g.zb.push(r)}else if(v=r.Cc(),B=r.Bc(),0>=Ic(g.max,
l,m)&&(g.max=new Ec(g.m,g.l,l,m),Fh(v,B,n.ub()).y<n.d&&!d(r,g.m,g.l))){if(q)return n=[],r=new Ec(g.m,g.l,l,m),r.Ua=r.length,r.action=0,r.yb=g.action,n.push(r),l=new Ec(l,m,g.K,g.H),l.Ua=l.length,l.action=0,l.yb=g.yb,n.push(l),c=c.slice(),c.splice.apply(c,[k,1].concat(ba(n))),e(g),h(c),Ra($i,c)==c&&Ra(Yi,c),!1;g.zb.push(r)}e(g);h(c);Ra(Yi,c)}else{var y=[];y.cmp=function(x,A){return x.t<A.t?-1:x.t>A.t?1:x.Jf<A.Jf?-1:x.Jf>A.Jf?1:x.Z.next==A.Z?-x.Jf:x.Z.rb==A.Z?x.Jf:0};l=function(x){if(!x.disabled){var A=
Fh(g.m,g.l,x.ub()),z=Fh(g.K,g.H,x.ub());if(z.y==A.y){if(z.y==x.d){if(z.x>A.x){var D=Math.max(A.x,x.R);var I=Math.min(z.x,x.T);var L=1}else if(z.x<A.x)D=Math.max(z.x,x.R),I=Math.min(A.x,x.T),L=-1;else return;D>=I||(D=Math.round(.5*D+.5*I),Ra(y,{t:(D-A.x)/(z.x-A.x),Ch:-1,Jf:L,Z:x,x:D,y:x.d}))}}else L=z.x<A.x?-1:1,D=(x.d-A.y)/(z.y-A.y),0>D||1<D||(I=Math.round(A.x+(z.x-A.x)*D),z.y<A.y?I<x.R||I>x.T||Ra(y,{t:D,Ch:0,Jf:L,Z:x,x:I,y:x.d}):z.y>A.y&&!(I<x.R||I>x.T)&&Ra(y,{t:D,Ch:1,Jf:L,Z:x,x:I,y:x.d}))}};t.gf();
for(m=new kf(new w(g.l,0,g.m),new w(g.H-g.l,0,g.K-g.m),0);(n=m.next())&&!(1<n.t);)if(n.node.cb)for(n=p(n.node.cb),r=n.next();!r.done;r=n.next())r=r.value,r.pa!=t.pa&&(r.pa=t.pa,l(r));l=null;for(m=1;m<y.length;m++)if(n=y[m-1],r=y[m],0==n.Ch&&1==r.Ch&&n.t<r.t){l=n;break}if(!l)return g.complete=1,Ra(Yi,c),!1;m=g.X();m.action=1;m.max=m;m.yb=g.yb;m.Z=l.x==l.Z.T?l.Z:l.Z.rb;m.zb=[];n=c.slice();n[k]=m;n.wc=0;Ra($i,n)==n&&Ra(Yi,n);m=g.X();m.action=2;m.max=m;m.yb=g.yb;m.Z=l.x==l.Z.R?l.Z.rb:l.Z;m.zb=[];c=c.slice();
c[k]=m;c.wc=0;Ra($i,c)==c&&Ra(Yi,c)}return!1}for(;cj&&Yi.length;){Zi++;cj--;var b=Yi.shift();if(a(b))return Yi=null,b}if(0==Yi.length)return Yi=null}
function ej(a,b,c,d){$i=[];$i.cmp=function(e,h){if(e.length<h.length)return-1;if(e.length>h.length)return 1;for(var g=0;g<e.length;g++){var k=e[g],l=h[g];if(k.m<l.m)return-1;if(k.m>l.m)return 1;if(k.l<l.l)return-1;if(k.l>l.l)return 1;if(k.K<l.K)return-1;if(k.K>l.K)return 1;if(k.H<l.H)return-1;if(k.H>l.H)return 1;if(k.action<l.action)return-1;if(k.action>l.action)return 1}return 0};a=(new E(a,b)).round();c=(new E(c,d)).round();a=fj(a);c=fj(c);Zi=0;Yi=[];Yi.cmp=function(e,h){return e.wc<h.wc?-1:1};
c=new Ec(a.x,a.y,c.x,c.y);c.Ua=c.length;c.action=0;c=[c];c.wc=0;Ra(Yi,c);return dj()}
function fj(a){t.gf();var b=null,c=NaN,d=[{n:Ve,d:0}];d.cmp=function(k,l){return k.d<l.d?-1:1};for(var e;(e=d.shift())&&!(e.d>b);)if(e.n instanceof hf){var h=a.x-e.n.value;Ra(d,{n:e.n.Re,d:Math.max(0,-h)});Ra(d,{n:e.n.Qe,d:Math.max(0,h)})}else if(e.n instanceof jf)h=a.y-e.n.value,Ra(d,{n:e.n.Re,d:Math.max(0,-h)}),Ra(d,{n:e.n.Qe,d:Math.max(0,h)});else if(e.n.Xj)for(e=p(e.n.Xj),h=e.next();!h.done;h=e.next())if(h=h.value,h.pa!=t.pa){h.pa=t.pa;var g=Ti(h,a.x,a.y);g>=c||(c=g,b=h)}return b?b.fh(a.x,a.y):
a}function gj(){for(var a=p(aj.Rm),b=a.next();!b.done;b=a.next()){b=b.value;var c=b.width;b.Cl&&(c-=15E4);var d=Math.floor(c/15E4-1);c=.5*(c-15E4*(d-1));for(var e=0;e<d;e++){var h=b.Z.Ef(c+15E4*e,15E4);h=new w(h.y,0,h.x);var g=mf(h,new w(0,-1E8,0),ig);g&&(h.U=Ye(g.item.ca),h.U.Jb.Gb!=t.b.Gb&&(h.y=g.p.y+1E5,h.ratio=b.ratio,g=h.U.Jb.Gb.Hd,g.cmp=function(k,l){return k.ratio<l.ratio?-1:1},Ra(g,h)))}}};var lg,hj,ij,jj,kj=new Ec(0,0,1,0),lj=4095/741455.429632,mj=[];mj.cmp=function(a,b){return a.index-b.index};var nj=new bb(function(a,b){return a.Wg<b.Wg?-1:a.Wg>b.Wg?1:a.y<b.y?-1:a.y>b.y?1:a.ca<b.ca?-1:a.ca>b.ca?1:a.ia.name<b.ia.name?-1:a.ia.name>b.ia.name?1:Oe(a.aa,b.aa)});function oj(a,b){return a.y>b.y?-1:a.y<b.y?1:0}function pj(a,b){a=Ye(a.src.ca).Ul;b=Ye(b.src.ca).Ul;return a-b}function yi(a,b,c,d,e){var h=new mg;h.Wg=a;h.y=b;h.ca=c;h.ia=d;h.aa=e;h.pe=[];return nj.Ma(h)}var vi=0;
function qj(){if(0==vi){if(Yh>=$h+2)var a=!1;else{var b=[qi,oi];a=0>Yh?ei():b[Yh%b.length].call()}return a}if(1==vi){var c=mj.slice();t.gf();for(var d=p(c),e=d.next();!e.done;e=d.next())e.value.pa=t.pa;var h=p(c);for(e=h.next();!e.done;e=h.next())for(var g=e.value,k=0;4>k;k++){var l=rj(g,k);l&&l.pa!=t.pa&&(l.pa=t.pa,Ra(mj,l))}lg=[];vi++;hj=0;return!0}if(2==vi){var m=mj[hj];if(m)return sj(m),hj++,!0;vi++;hj=0}if(3==vi){t.gf();ij=t.pa;var n=mj[hj];if(n){for(var r=0;4>r;r++){var q=rj(n,r);if(q&&q.pa!=
ij){var v=n,B=q,y=[];switch(r){case 0:var x=df(v.index);var A=x.x+512;for(var z=p(v.ha),D=z.next();!D.done;D=z.next()){var I=D.value;(I.m<=A||I.K<=A)&&y.push(I)}A=x.x-512;var L=p(B.ha);for(D=L.next();!D.done;D=L.next()){var R=D.value;(R.m>=A||R.K>=A)&&y.push(R)}break;case 1:x=df(v.index);A=x.y+512;var qa=p(v.ha);for(D=qa.next();!D.done;D=qa.next()){var ta=D.value;(ta.l<=A||ta.H<=A)&&y.push(ta)}A=x.y-512;var ia=p(B.ha);for(D=ia.next();!D.done;D=ia.next()){var oa=D.value;(oa.l>=A||oa.H>=A)&&y.push(oa)}break;
case 2:x=df(B.index);A=x.x+512;var Lb=p(B.ha);for(D=Lb.next();!D.done;D=Lb.next()){var qb=D.value;(qb.m<=A||qb.K<=A)&&y.push(qb)}A=x.x-512;var kc=p(v.ha);for(D=kc.next();!D.done;D=kc.next()){var Mb=D.value;(Mb.m>=A||Mb.K>=A)&&y.push(Mb)}break;case 3:x=df(B.index);A=x.y+512;var Tb=p(B.ha);for(D=Tb.next();!D.done;D=Tb.next()){var Hc=D.value;(Hc.l<=A||Hc.H<=A)&&y.push(Hc)}A=x.y-512;var Ia=p(v.ha);for(D=Ia.next();!D.done;D=Ia.next()){var Ob=D.value;(Ob.l>=A||Ob.H>=A)&&y.push(Ob)}}Wi(y,!1)}}n.pa=ij;hj++;
return!0}vi++;hj=0}if(4==vi){var Df=mj[hj];if(Df)return Df.evaluate(),hj++,!0;vi++;hj=0}if(5==vi){var va=mj[hj];if(va){for(var Ef=p(va.Nl),Ce=Ef.next();!Ce.done;Ce=Ef.next())Ce.value.evaluate();hj++;return!0}vi++;hj=0}if(6==vi){var Ff=mj[hj];if(Ff)return tj(Ff),hj++,!0;vi++;hj=0}if(7==vi){var yc=mj[hj];if(yc)return uj(yc),hj++,!0;vi++;hj=0}if(8==vi)return kg(),vi++,!0;if(9==vi)return Ve=gf(),vj.te=new mg,vj.te.aa=new $d,vj.te.aa.name="creaseShading",vj.te.aa.Ia=1,vj.te.aa.me=new F(0,0,0,127.5),vj.te.G=
t.i.va.get("creaseShading"),wj=0,vj.kg=Array(Ze.elements.length),xj=0,vi++,!0;if(10==vi){if(yj())return!0;vi++;return!0}if(11==vi){if(jj&&0!=t.j%1)return!1;for(;bg.length&&bg[0].jg;)bg.shift(),cg++;We.length=0;Xe=cg;for(var Gf=p(bg),tb=Gf.next();!tb.done;tb=Gf.next()){var ae=tb.value;if(ae.oa>$h+1)break;We.push(ae)}var Hf=p(We);for(tb=Hf.next();!tb.done;tb=Hf.next())for(var De=tb.value,be=0;be<De.Hb.length;be++)De.Hb[be].td.ca>=Xe||De.Hb.splice(be--,1);for(var ce=0;ce<nj.elements.length;ce++){var If=
nj.elements[ce];If.ca<cg&&(nj.elements.splice(ce--,1),If.qd.parent=null,Vd(If.qd))}var Ee=p(We);for(tb=Ee.next();!tb.done;tb=Ee.next()){var ub=tb.value;ub.oa<=Zh||(ub.Yb.x/=ub.ed,ub.Yb.y/=ub.ed,ub.Yb.z/=ub.ed,ub.Yb.x/=255,ub.Yb.y/=255,ub.Yb.z/=255)}var Xb=p(We);for(tb=Xb.next();!tb.done;tb=Xb.next()){var Jf=tb.value;if(!(Jf.oa<=Zh))for(var Ed=p(Jf),nd=Ed.next();!nd.done;nd=Ed.next())for(var Kf=p(nd.value.xb),Pb=Kf.next();!Pb.done;Pb=Kf.next())Pb.value.create()}uf?tf=!0:xf();Zh=$h+1;for(var Lf=p(t.dk.elements),
Fe=Lf.next();!Fe.done;Fe=Lf.next())zj(Fe.value);for(var Mf=p(nj.elements),Nf=Mf.next();!Nf.done;Nf=Mf.next()){var Za=Nf.value;if(!Za.qd){var Db=Ye(Za.ca);if(Db&&!(Db.oa>Zh)){var $c=Za;$c.Zb.cmp=md;for(var Yb=p($c.pe),jb=Yb.next();!jb.done;jb=Yb.next())for(var Lc=jb.value,de=0;de<Lc.length;de++)Lc[de]=Ra($c.Zb,Lc[de]);for(var zc=0;zc<$c.Zb.length;zc++)$c.Zb[zc].index=zc;var Of=p($c.pe);for(jb=Of.next();!jb.done;jb=Of.next())for(var Fd=jb.value,mc=0;mc<Fd.length;mc++)Fd[mc]=Fd[mc].index;delete $c.Zb.cmp;
Za.compile();delete Za.pe;Za.qd=new og(Za,"worldMesh");isNaN(Za.facing)||(Za.qd.facing=Za.facing);Za.qd.ja=Db.ja;Za.qd.xi=!0;Za.qd.Ga=["portalLightIndex",Db.hf,!0,"numPortals",Db.Hb.length,!0];Za.Wg?(Za.qd.y=Za.y,K(Za.qd,t.Qf)):K(Za.qd,t.Ll);delete Za.Wg;delete Za.y}}}vi++;return!0}if(12==vi){for(var Ac=p(Ze.elements),vb=Ac.next();!vb.done;vb=Ac.next()){var Ge=vb.value;Ge.cb=[];Ge.Xj=[]}for(var za=[],Pf=p(We),Mc=Pf.next();!Mc.done;Mc=Pf.next())for(var Qf=p(Mc.value),Bc=Qf.next();!Bc.done;Bc=Qf.next())za=
za.concat(Bc.value);var Rf=[],Gd=[],Sf=[],ee=[],ad=p(We);for(Mc=ad.next();!Mc.done;Mc=ad.next()){var Tf=p(Mc.value);for(Bc=Tf.next();!Bc.done;Bc=Tf.next())for(var Hd=p(Bc.value.xb),Zb=Hd.next();!Zb.done;Zb=Hd.next()){var Id=Zb.value;if(Id instanceof Li){if(!Ye(Id.ua.U.index))continue}else{if(!Ye(Id.ua.U.index))continue;if(!Ye(Id.Ya.U.index))continue}ee.push(Id)}}var Ng=p(ee);for(Zb=Ng.next();!Zb.done;Zb=Ng.next()){var la=Zb.value;if(la instanceof Ii){if(!la.rd){var Sa=new Lh(-40675,40675,-la.a+40675,
la.a-40675);la.cb=[];var Da=new Ui(Sa.J,Sa.v,Sa.D);Da=Da.rotate(la.direction);Da=Da.translate(la.z,la.x);Da.source=Sa;la.cb.push(Da);Da=new Fi(Sa.v,Sa.J,Sa.L);Da=Da.rotate(la.direction);Da=Da.translate(la.z,la.x);Da.source=Sa;la.cb.push(Da);Da=new Gi(Sa.L,Sa.D,Sa.v);Da=Da.rotate(la.direction);Da=Da.translate(la.z,la.x);Da.source=Sa;la.cb.push(Da);Da=new Vi(Sa.D,Sa.L,Sa.J);Da=Da.rotate(la.direction);Da=Da.translate(la.z,la.x);Da.source=Sa;la.cb.push(Da);Sa=Sa.rotate(la.direction);Sa=Sa.translate(la.z,
la.x);Sa.Ej=la;Gd.push(Sa)}}else if(la instanceof Ji){var Qb=new Lh(-40675,40675,-la.a-9375+40675,la.a+9375-40675);Qb=Qb.rotate(la.direction);Qb=Qb.translate(la.z,la.x);Sf.push(Qb)}else if(la instanceof Li){var Nc=new Lh(-la.Sb+40675,la.Sb-40675,-la.se-40675,la.se+40675);Nc=Nc.translate(la.Ta.J,la.Ta.v);Nc=Nc.rotate(la.direction);Rf.push(Nc);var Jd=new Lh(-la.Sb,la.Sb,-la.se,la.se);Jd=Jd.translate(la.Ta.J,la.Ta.v);Jd=Jd.rotate(la.direction);za=Jh(za,[Jd])}}for(var Uf=[],He=0;He<za.length;He++)for(var Ie=
za[He],Je=He+1;Je<za.length;Je++){var Kd=za[Je];if(Ie.platform.U!=Kd.platform.U||25E3<Math.abs(Kd.platform.y-Ie.platform.y)){var Vf=Mi(Ie,Kd);Vf&&Uf.push(Vf)}}za=Nh(za,1);za=za.concat(Uf);za=Gh(za,40675,40675);za=Nh(za);za=Oh(za);za=za.concat(Rf);za=za.concat(Sf);for(var Cc=[],Wf=p(za),Eb=Wf.next();!Eb.done;Eb=Wf.next())Rh(Eb.value,Cc);var Ld=p(Gd);for(Eb=Ld.next();!Eb.done;Eb=Ld.next()){var Xf=Eb.value;Cc.push(Xf.Ej.cb[1],Xf.Ej.cb[3])}za=za.concat(Gd);Jh(Cc,za);for(var $b=Wh(Th(Cc)),Yf=0,Md=p($b),
od=Md.next();!od.done;od=Md.next())for(var fe=od.value,Ke=fe[fe.length-1],Zf=p(fe),nc=Zf.next();!nc.done;nc=Zf.next()){var bd=nc.value;bd.index=Yf++;Ke.next=bd;bd.rb=Ke;Ke=bd}var $f=[],ag=p($b);for(od=ag.next();!od.done;od=ag.next()){var pd=od.value;if(!(3>pd.length))for(var ge=pd[pd.length-2],ac=pd[pd.length-1],bc,Le=0;Le<pd.length;Le++,ge=ac,ac=bc)if(bc=pd[Le],(ge.ub()+1)%4==ac.ub()&&(ac.ub()+1)%4==bc.ub()){var cd=Math.min(ge.T-ge.R,bc.T-bc.R);if(!(1E5>cd)){var C=ac.T-ac.R,J=C/cd;if(!(2<=J)){var M=
{};M.Z=ac;M.width=C;M.depth=cd;M.ratio=J;$f.push(M);ac.Zj=M;ac.rb.Zj&&(ac.rb.Zj.Cl=!0);ac.next.Zj&&(M.Cl=!0)}}}}for(var G=[],O=p($b),Q=O.next();!Q.done;Q=O.next())G=G.concat(Q.value);$b=G;$b.Fl=za;$b.Rm=$f;var ma=p(Gd);for(Eb=ma.next();!Eb.done;Eb=ma.next()){var Y=Eb.value.Ej;Y.Id=[Y.cb[1].rb,Y.cb[1].next,Y.cb[3].rb,Y.cb[3].next];Y.cb[0].rb=Y.Id[0];Y.cb[0].next=Y.Id[3];Y.cb[2].rb=Y.Id[2];Y.cb[2].next=Y.Id[1];$b.push(Y.cb[0]);$b.push(Y.cb[2]);var X=Y;X.Id[0]&&X.Id[1]&&X.Id[2]&&X.Id[3]&&(X.Id[0].next=
X.cb[1],X.Id[1].rb=X.cb[1],X.Id[2].next=X.cb[3],X.Id[3].rb=X.cb[3],X.cb[0].disabled=!0,X.cb[1].disabled=!1,X.cb[2].disabled=!0,X.cb[3].disabled=!1,X.cb[0].y=-5E4,X.cb[1].y=0,X.cb[2].y=-5E4,X.cb[3].y=0)}for(var Fa=p($b),S=Fa.next();!S.done;S=Fa.next()){var V=S.value,Ga=V.ph(),pa=[];sf(Ga.J,Ga.v,Ga.L,Ga.D,pa);var Oa=p(pa);for(vb=Oa.next();!vb.done;vb=Oa.next())vb.value.cb.push(V)}for(var ca=p($b.Fl),Ma=ca.next();!Ma.done;Ma=ca.next()){var Aa=Ma.value,cc=[];sf(Aa.J,Aa.v,Aa.L,Aa.D,cc);var Ej=p(cc);for(vb=
Ej.next();!vb.done;vb=Ej.next())vb.value.Xj.push(Aa)}aj=$b;vi++;return!0}13==vi&&(t.b.Hd=gj(),vi=0);return!1}function Aj(a,b){var c=new bb(ud);a=p(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var e=new bb(Zc);e.x=d.m;e.y=d.l;e=c.Ma(e);e.add(d);b&&(d=Yc(d),e=new bb(Zc),e.x=d.m,e.y=d.l,e=c.Ma(e),e.add(d))}return c}
function Bj(a){var b=[];b.bound=new Sc;var c=0,d=a.elements[c],e=d.elements.pop();d.elements.length||a.elements.splice(c,1);if(!e)return null;for(;;){b.push(e);b.bound.Ma(e.K,e.H);if(e.K==b[0].m&&e.H==b[0].l)return b;c=a.contains(new E(e.K,e.H));if(0>c)return null;d=a.elements[c];e=cb(d,Xc(e))-1;0>e&&(e+=d.elements.length);e=d.elements.splice(e,1)[0];d.elements.length||a.elements.splice(c,1)}}
function Cj(a){for(var b=[],c=a[a.length-1],d=0;d<a.length;d++){var e=a[d];b.push(Gc(c,e));c=e}a.rj=b;a.ih=[];a.uk=0;b=p(a.rj);for(c=b.next();!c.done;c=b.next())c=c.value,0>c?(a.uk-=c,a.ih.push(-c)):a.ih.push(0)}
function Dj(a,b){var c=null;b=p(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.v<=d.bound.v||a.bound.o<=d.bound.o||a.bound.D>=d.bound.D||a.bound.F>=d.bound.F)){if(c){if(d.bound.v<=c.bound.v)continue;if(d.bound.o<=c.bound.o)continue;if(d.bound.D>=c.bound.D)continue;if(d.bound.F>=c.bound.F)continue}0>=Pc(a[0].K,a[0].H,d)||(c=d)}c&&c.vb.push(a)}
function Fj(a){if(0==a.vb.length)return a;var b=[a].concat(a.vb),c={};c.wc=Number.NEGATIVE_INFINITY;for(var d=0;d<b.length;d++)for(var e=b[d],h=d+1;h<b.length;h++)for(var g=b[h],k=0;k<e.length;k++)for(var l=(k+1)%e.length,m=0;m<g.length;m++)c=Gj(e,k,l,g,m,(m+1)%g.length,c,b);if(0>c.wc)return console.log("could not solve holes"),a.vb=[],a;e=c.Zd[c.qa].hb(c.Zd[c.qa].m,c.Zd[c.qa].l,c.ve[c.d].m,c.ve[c.d].l);d=e.hb(e.K,e.H,e.m,e.l);e.da=d;d.da=e;b=[];for(h=0;h<c.qa;h++)b.push(c.Zd[h]);b.push(e);e=c.d;
for(h=0;h<c.ve.length;h++)b.push(c.ve[e]),++e==c.ve.length&&(e=0);b.push(d);for(d=c.qa;d<c.Zd.length;d++)b.push(c.Zd[d]);if(c.Zd==a)return a.vb.splice(a.vb.indexOf(c.ve),1),b.vb=a.vb,Cj(b),Fj(b);a.vb.splice(a.vb.indexOf(c.Zd),1,b);a.vb.splice(a.vb.indexOf(c.ve),1);Cj(b);return Fj(a)}
function Gj(a,b,c,d,e,h,g,k){function l(q,v){function B(D,I,L){if(I==D.m&&L==D.l||I==D.K&&L==D.H)return!1;I=D.Ef(I,L);return 0>=I.x||I.x>=D.length||-256>I.y||256<I.y?!1:!0}var y=Ic(v,q.m,q.l),x=Ic(v,q.K,q.H),A=Ic(q,v.m,v.l),z=Ic(q,v.K,v.H);if(-256>A&&256<z&&(-256>y&&256<x||256<y&&-256>x)||256<A&&-256>z&&(-256>y&&256<x||256<y&&-256>x)||B(q,v.m,v.l)||B(q,v.K,v.H)||B(v,q.m,q.l)||B(v,q.K,q.H))return!0}var m=a[c],n=d[h];m=new Ec(m.m,m.l,n.m,n.l);if(0==a.ih[c]){if(0>=Ic(a[b],m.K,m.H)||0>=Ic(a[c],m.K,m.H))return g}else if(0>=
Ic(a[b],m.K,m.H)&&0>=Ic(a[c],m.K,m.H))return g;if(0==d.ih[h]){if(0>=Ic(d[e],m.m,m.l)||0>=Ic(d[h],m.m,m.l))return g}else if(0>=Ic(d[e],m.m,m.l)&&0>=Ic(d[h],m.m,m.l))return g;if(k)for(k=p(k),n=k.next();!n.done;n=k.next()){var r=p(n.value);for(n=r.next();!n.done;n=r.next())if(l(m,n.value))return g}else for(k=p(a),n=k.next();!n.done;n=k.next())if(l(m,n.value))return g;k={};k.Zd=a;k.Ka=b;k.qa=c;k.ve=d;k.Ch=e;k.d=h;k.Z=m;Hj(k);return k.wc>g.wc?k:g}
function Hj(a){a.wc=4095-a.Z.length*lj;var b=Gc(a.Zd[a.Ka],a.Z),c=b-a.Zd.rj[a.qa],d=Gc(a.Z,a.ve[a.d]),e=d-a.ve.rj[a.d];a.wc+=.5/Math.PI*(a.Zd.ih[a.qa]-(0>b?-b:0)-(0>c?-c:0)+(a.ve.ih[a.d]-(0>d?-d:0)-(0>e?-e:0)))*1048575}
function Ij(a){if(3>a.length)return[];Cj(a);if(0>=a.uk)return[a];for(var b={wc:Number.NEGATIVE_INFINITY},c=a.length-1,d=0;d<a.length;d++){for(var e=d+1,h=e+1;h<a.length;h++)b=Gj(a,c,d,a,e,h,b),e=h;c=d}if(0>b.wc)return[a];h=new Jj(a[b.qa].m,a[b.qa].l,a[b.d].m,a[b.d].l);c=new Jj(a[b.d].m,a[b.d].l,a[b.qa].m,a[b.qa].l);h.da=c;c.da=h;d=[];e=[];for(var g=0;g<b.qa;g++)d.push(a[g]);d.push(h);for(h=b.d;h<a.length;h++)d.push(a[h]);for(h=b.qa;h<b.d;h++)e.push(a[h]);e.push(c);return Ij(d).concat(Ij(e))}
function Kj(a){this.ha=null;this.o=Number.POSITIVE_INFINITY;this.F=Number.NEGATIVE_INFINITY;this.sa=this.floor=null;this.fa=a}Kj.prototype.Sg=function(a,b){if(this.F<=a.o||this.o>=a.F)b.push(this);else{if(this.o<a.o){var c=new Kj(this.fa);c.o=this.o;c.F=a.o;c.floor=this.floor;c.sa=a.sa;b.push(c)}this.F>a.F&&(c=new Kj(this.fa),c.o=a.F,c.F=this.F,c.floor=a.floor,c.sa=this.sa,b.push(c))}};function Lg(a,b,c){this.Y=a;this.o=b;this.F=c;this.flags=0}function Mg(a,b){this.ha=a;this.y=b;this.flags=0}
function Og(a,b){this.ha=a;this.y=b;this.flags=0}Mg.prototype.Qh=function(){if(this.da)return this.da;this.da=new Og(this.ha,this.y);this.da.flags=this.flags;return this.da};Og.prototype.Qh=function(){if(this.da)return this.da;this.da=new Mg(this.ha,this.y);this.da.flags=this.flags;return this.da};Lg.prototype.Qh=function(){if(this.da)return this.da;this.da=new Lg(Yc(this.Y),this.o,this.F);this.da.flags=this.flags;return this.da};function cf(a){this.index=a;this.si=this.pa=-2147483648;this.Tl=new eb(this);this.vd=new bb(lb);this.Ed=[];this.Yi=new db}function rj(a,b){a=ef(a.index);switch(b){case 0:if(0==a.x)break;return Ze.get(ff(a.x-1,a.y));case 1:if(0==a.y)break;return Ze.get(ff(a.x,a.y-1));case 2:if(8191==a.x)break;return Ze.get(ff(a.x+1,a.y));case 3:if(8191!=a.y)return Ze.get(ff(a.x,a.y+1))}return null}
function sj(a){function b(g,k){return g.fa.index<k.fa.index?-1:g.fa.index>k.fa.index?1:0}a.Nl=[];a.ha=[];for(var c=p(a.vd.elements),d=c.next();!d.done;d=c.next()){d=p(d.value.ha);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=e.X();Yc(h);e.ki&&(h.kc=[e]);h.ue=[a.ha];a.ha.push(h)}}Wi(a.ha.slice(),!0);a=p(a.ha);for(e=a.next();!e.done;e=a.next())c=e.value,c.kc&&zb(c.kc,b),c.da.kc&&zb(c.da.kc,b)}
cf.prototype.evaluate=function(){this.ek=[];this.fk=[];for(var a=Aj(this.ha,!0),b=[],c=[];a.elements.length;){var d=Bj(a);d&&(Oc(d)?c.push(d):(d.vb=[],b.push(d)))}a=p(c);for(c=a.next();!c.done;c=a.next())Dj(c.value,b);a=[];b=p(b);for(c=b.next();!c.done;c=b.next())if(d=c.value,0==d.vb.length)a.push(d);else{Cj(d);var e=p(d.vb);for(c=e.next();!c.done;c=e.next())Cj(c.value);a.push(Fj(d))}b=[];a=p(a);for(c=a.next();!c.done;c=a.next())b=b.concat(Ij(c.value));a=p(b);for(c=a.next();!c.done;c=a.next())this.Nl.push(new Lj(c.value,
this))};
function tj(a){function b(B,y){return B.Od<y.Od?-1:B.Od>y.Od?1:B.fa.ca<y.fa.ca?-1:B.fa.ca>y.fa.ca?1:Mj(B.$,y.$)}function c(B,y){var x=jc(1/60);var A=-1;for(var z=1;z<B.length;z++){var D=Math.abs(Gc(B[z-1].Y,B[z].Y));D<x&&(x=D,A=z)}if(0>A)y.push.apply(y,ba(B));else{x=B[A-1];z=B[A];D=x.Y.hb(x.Y.m,x.Y.l,z.Y.K,z.Y.H);var I=Yc(D);x.yd&&(0>x.yd.Od?x.yd.splice(x.yd.indexOf(x.Y),2,D):x.yd.splice(x.yd.indexOf(z.Y.da),2,I));x.sd&&(0<x.sd.Od?x.sd.splice(x.sd.indexOf(x.Y),2,D):x.sd.splice(x.sd.indexOf(z.Y.da),2,
I));x.Y=D;B.splice(A,1);c(B,y)}}function d(B){var y=jc(1/60);var x=-1;for(var A=1;A<B.length;A++){var z=Math.abs(Gc(B[A-1],B[A]));z<y&&(y=z,x=A)}if(!(0>x)){y=B[x-1];A=B[x];z=y.hb(y.m,y.l,A.K,A.H);var D=Yc(z);z.ld=y.ld;y.ld.splice(y.ld.indexOf(y),2,z);A.da&&(D.ld=A.da.ld,A.da.ld.splice(A.da.ld.indexOf(A.da),2,D));B.splice(x-1,2,z);d(B)}}for(var e=0,h=new bb(function(B,y){return B.y<y.y?-1:B.y>y.y?1:0}),g=p(a.ek),k=g.next();!k.done;k=g.next()){var l=k.value,m=new bb(b);m.y=l.y;m=h.Ma(m);k=[];k.Od=l.Od;
k.fa=l.fa;k.$=l.$;k=m.Ma(k);k.push(l)}g=p(h.elements);for(l=g.next();!l.done;l=g.next()){l=l.value;m=p(l.elements);for(k=m.next();!k.done;k=m.next()){var n=k.value,r=new bb(Fc),q=p(n);for(k=q.next();!k.done;k=q.next()){var v=p(k.value);for(k=v.next();!k.done;k=v.next())k=k.value,r.remove(Xc(k))||r.push(k)}n.length=0;for(r=Aj(r.elements);r.elements.length;){q=Bj(r);if(!q)break;q.y=l.y;q.Od=n.Od;q.fa=n.fa;q.$=n.$;q.index=e++;v=p(q);for(k=v.next();!k.done;k=v.next())k.value.ld=q;n.push(q)}}l.Fj=new bb(Fc);
m=p(l.elements);for(k=m.next();!k.done;k=m.next())for(n=p(k.value),k=n.next();!k.done;k=n.next())for(r=p(k.value),k=r.next();!k.done;k=r.next())k=k.value,(q=l.Fj.remove(Xc(k)))?(k.da=q,q.da=k):l.Fj.push(k)}e=p(a.fk);for(g=e.next();!g.done;g=e.next())g=g.value,l=function(B,y){y=h.get({y:y});if(!y)return null;y=y.Fj.remove(B);if(!y)return null;y.ld.splice(y.ld.indexOf(y),1,B);return y.ld},m=g.Y,k=Yc(m),g.sd=l(m,g.o)||l(k,g.o),g.yd=l(m,g.F)||l(k,g.F);g=function(B){var y=[],x=new bb(function(I,L){I=I[0];
L=L[0];if(I.o<L.o)return-1;if(I.o>L.o)return 1;if(I.F<L.F)return-1;if(I.F>L.F)return 1;if(I.sd)if(L.sd){if(I.sd.index<L.sd.index)return-1;if(I.sd.index>L.sd.index)return 1}else return 1;else if(L.sd)return-1;if(I.yd)if(L.yd){if(I.yd.index<L.yd.index)return-1;if(I.yd.index>L.yd.index)return 1}else return 1;else if(L.yd)return-1;if(I.length<L.length)return-1;if(I.length>L.length)return 1;for(var R=0;R<I.length;R++){var qa=I[R],ta=L[R];if(qa.o<ta.o)return-1;if(qa.o>ta.o)return 1;if(qa.F<ta.F)return-1;
if(qa.F>ta.F)return 1;qa=Mj(qa.$,ta.$);if(0!=qa)return qa}return 0});B=p(B);for(var A=B.next();!A.done;A=B.next()){A=A.value;var z=[A],D=x.Ma(z);D!=z&&D.push(A)}B={};x=p(x.elements);for(A=x.next();!A.done;B={xf:B.xf},A=x.next())for(B.xf=A.value,A={};B.xf.length;)A.sh=function(I,L){return function(R,qa,ta){for(var ia=0;ia<I.xf.length;ia++){var oa=I.xf[ia];if(oa.Y.m==ta.K&&oa.Y.l==ta.H)return I.xf.splice(ia,1),R.push(oa),oa.Y.Kd=R,oa.Y.da.Kd=R,L.sh(R,qa,oa.Y);if(oa.Y.K==qa.m&&oa.Y.H==qa.l)return I.xf.splice(ia,
1),R.unshift(oa),oa.Y.Kd=R,oa.Y.da.Kd=R,L.sh(R,oa.Y,ta)}return R}}(B,A),z=B.xf.shift(),D=[z],z.Y.Kd=D,z.Y.da.Kd=D,y.push(A.sh(D,z.Y,z.Y)),A={sh:A.sh};return y}(a.fk);e=function(){for(var B=[],y=p(h.elements),x=y.next();!x.done;x=y.next()){x=p(x.value.elements);for(var A=x.next();!A.done;A=x.next()){A=p(A.value);for(var z=A.next();!z.done;z=A.next()){z=z.value;for(var D=function(ia,oa){return ia.Kd||oa.Kd?!1:ia.da?oa.da?ia.da.ld==oa.da.ld:!1:oa.da?!1:!0},I=0,L=z[z.length-1],R=z[0];I<z.length&&(R=z[I],
D(L,R));I++,L=R);if(I==z.length){D=[];L=p(z);for(z=L.next();!z.done;z=L.next())z=z.value,z.Kd=D,z.da&&(z.da.Kd=D),D.push(z);B.push(D)}else{z.unshift.apply(z,ba(z.splice(I)));I=[];var qa=null;L=z[0];I.push(qa=[]);qa.push(L);for(var ta=1;ta<z.length;ta++,L=R)R=z[ta],D(L,R)||I.push(qa=[]),qa.push(R);D=p(I);for(z=D.next();!z.done;z=D.next())if(L=z.value,!L[0].Kd){R=p(L);for(z=R.next();!z.done;z=R.next())z=z.value,z.Kd=L,z.da&&(z.da.Kd=L);B.push(L)}}}}}return B}();a.El=[];l=p(g);for(g=l.next();!g.done;g=
l.next())c(g.value,a.El);a.Dl=[];e=p(e);for(g=e.next();!g.done;g=e.next())d(g.value);e=p(h.elements);for(l=e.next();!l.done;l=e.next())for(g=p(l.value.elements),k=g.next();!k.done;k=g.next())for(l=p(k.value),k=l.next();!k.done;k=l.next())m=k.value,m.Gl=Ij(m),a.Dl.push(m)}
function uj(a){function b(r,q,v){var B=[],y=new Mg(q,r.y);y.flags|=Nj;y.ca=r.fa.ca;h.push(y);if((y=bg[v.ca-cg])&&!(y.oa<=Zh||y.oa>$h+1)){for(y=0;y<q.length;y++){var x=new ld(q[y].l,r.y,q[y].m);rd(x,r.$.color);sd(x,x.z/4E5,x.x/4E5);x.Tc=32767;B.push(x)}v.pe.push(B);lg.push(B);e(bg[r.fa.ca-cg],B,r.$)}}function c(r,q,v){var B=[],y=new Og(q,r.y);y.flags|=Nj;y.ca=r.fa.ca;h.push(y);if((y=bg[v.ca-cg])&&!(y.oa<=Zh||y.oa>$h+1)){for(y=q.length-1;0<=y;y--){var x=new ld(q[y].H,r.y,q[y].K);rd(x,r.$.color);sd(x,
-x.z/4E5,x.x/4E5);x.Tc=-32767;B.push(x)}v.pe.push(B);lg.push(B);e(bg[r.fa.ca-cg],B,r.$)}}function d(r,q,v){var B=yi(!1,Infinity,r.fa.ca,q.$.ia,q.$.aa),y=bg[B.ca-cg];if(y&&!(y.oa<=Zh||y.oa>$h+1)){y=[];var x=r.Y.m/4E5+r.Y.l/4E5,A=r.Y.K/4E5+r.Y.H/4E5;var z=new ld(r.Y.H,q.o,r.Y.K);rd(z,q.$.color);sd(z,A,-z.y/4E5);z.Eb=v.x;z.Ac=v.y;y.push(z);z=new ld(r.Y.l,q.o,r.Y.m);rd(z,q.$.color);sd(z,x,-z.y/4E5);z.Eb=v.x;z.Ac=v.y;y.push(z);z=new ld(r.Y.l,q.F,r.Y.m);rd(z,q.$.color);sd(z,x,-z.y/4E5);z.Eb=v.x;z.Ac=v.y;
y.push(z);z=new ld(r.Y.H,q.F,r.Y.K);rd(z,q.$.color);sd(z,A,-z.y/4E5);z.Eb=v.x;z.Ac=v.y;y.push(z);B.pe.push(y);lg.push(y);e(bg[r.fa.ca-cg],y,q.$)}}function e(r,q,v){var B=0,y=q[0],x=vd(q[1],y,new w);x.scale(1E-5);for(var A=2;A<q.length;A++){var z=vd(q[A],y,new w);z.scale(1E-5);B+=sc(x,z,new w).length();x=z}q=.5*B;B=v.ia;v=v.color;y=(B.ke.r-B.ke.bb)/255;v=new F(v.r*y+B.ke.bb,v.bb*y+B.ke.bb,v.qa*y+B.ke.bb,B.ke.Ka);r.Yb.x+=v.r*q;r.Yb.y+=v.bb*q;r.Yb.z+=v.qa*q;r.ed+=q}a.wa=[];for(var h=a.wa,g=p(a.Dl),k=
g.next();!k.done;k=g.next())if(k=k.value,0<k.Od){for(var l=yi(!0,k.y,k.fa.ca,k.$.ia,k.$.aa),m=p(k.Gl),n=m.next();!n.done;n=m.next())b(k,n.value,l);(k=bg[k.fa.ca-cg])&&(k.oa>$h+1||k.cells.push(a))}else if(k.$)for(l=yi(!1,k.y,k.fa.ca,k.$.ia,k.$.aa),m=p(k.Gl),n=m.next();!n.done;n=m.next())c(k,n.value,l);a=p(a.El);for(k=a.next();!k.done;k=a.next())for(g=k.value,k=new Lg(g.Y,g.o,g.F),k.flags|=Nj,k.ca=g[0].fa.ca,h.push(k),k=new E(g.Y.l-g.Y.H,g.Y.K-g.Y.m),k.ta(32767),n=p(g),l=n.next();!l.done;l=n.next())d(g,
l.value,k)}
function Lj(a,b){this.index=Oj++;this.ha=a;this.fg=b;a=new bb(Pj);for(var c=new E(0,0),d=1/this.ha.length,e=p(this.ha),h=e.next();!h.done;h=e.next())h=h.value,h.kh=this,c.x+=h.K*d,c.y+=h.H*d;b=p(b.vd.elements);for(d=b.next();!d.done;d=b.next())d=d.value,0>=Pc(c.x,c.y,d.ha)||a.add(d);this.vd=a.elements;Qj(this);this.Al=[];a=Number.NEGATIVE_INFINITY;c=p(this.kf);for(b=c.next();!b.done;b=c.next())if(b=b.value,b.fa.add){if(b.o>a){var g=new Kj(b.fa);g.o=b.o;g.F=b.F;g.floor=b.floor;g.sa=b.sa;g.ha=this.ha;
this.Al.push(g)}else g.F=b.F,g.sa=b.sa;a=g.F}}var Oj=-2147483648;
function Qj(a){var b=new Kj;b.o=-2147483648;b.F=2147483647;b.fa={};a.kf=[b];b=p(a.vd);for(var c=b.next();!c.done;c=b.next()){c=c.value;var d=new Kj(c.fa);d.o=c.fa.o;d.F=c.fa.F;d.floor=c.fa.floor;d.sa=c.fa.sa;c=[d];d=p(a.kf);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=[];c=p(c);for(var g=c.next();!g.done;g=c.next())g=g.value,g.fa.Xh(e.fa)?h.push(g):g.Sg(e,h);c=h}d=p(c);for(g=d.next();!g.done;g=d.next()){h=g.value;g=[];var k=p(a.kf);for(e=k.next();!e.done;e=k.next())e.value.Sg(h,g);a.kf=
g}a.kf.push.apply(a.kf,ba(c))}zb(a.kf,function(l,m){return l.o<m.o?-1:l.o>m.o?1:0})}
Lj.prototype.evaluate=function(){for(var a=p(this.Al),b=a.next();!b.done;b=a.next()){b=b.value;if(b.floor){for(var c=[],d=p(this.ha),e=d.next();!e.done;e=d.next())e=e.value,e=e.X(),c.push(e);c.y=b.o;c.$=b.floor;c.Od=1;c.fa=b.fa;this.fg.ek.push(c)}if(b.sa){c=[];d=p(this.ha);for(e=d.next();!e.done;e=d.next())e=e.value,e=e.X(),c.push(e);c.y=b.F;c.$=b.sa;c.Od=-1;c.fa=b.fa;this.fg.ek.push(c)}}a=[];b=[];e=p(this.kf);for(d=e.next();!d.done;d=e.next())c=d.value,(c.fa.add?a:b).push(c);b=p(this.ha);for(e=b.next();!e.done;e=
b.next()){e=e.value;var h=function(q,v){var B=[];q=p(q);for(var y=q.next();!y.done;y=q.next()){var x=y.value,A=p(v);for(y=A.next();!y.done;y=A.next()){var z=y.value,D=[];x.Ma(z.o,z.F,D);var I=p(D);for(y=I.next();!y.done;y=I.next())y.value.fa=z.fa;B.push.apply(B,ba(D))}}return B},g=function(q,v){v=p(v);for(var B=v.next();!B.done;B=v.next()){B=B.value;var y=[];q=p(q);for(var x=q.next();!x.done;x=q.next())x.value.Sg(B.o,B.F,y);q=y}return q};c=function(q){for(var v=q[0],B=1;B<q.length;B++)if(Mj(v.$,q[B].$))v=
q[B];else{var y=v.X(v.o,q[B].F);q.splice(--B,2,y)}};d=function(q,v,B){var y=[];if(!q.kc)return y;v=p(v);for(var x=v.next();!x.done;x=v.next()){x=x.value;var A=q.kc;var z=x,D=Pj,I=yb(A,z,D);(A=I==A.length||0!=D.call(null,z,A[I])?null:A[I])&&A.fa.add==B&&y.push(new sh(x.fa.o,x.fa.F,A))}return y};var k=d(e,this.vd,!0),l=[],m=[],n=[];if(e.da.kh){l=d(e.da,e.da.kh.vd,!1);var r=p(e.da.kh.kf);for(d=r.next();!d.done;d=r.next())d=d.value,(d.fa.add?m:n).push(d)}k=g(k,m);l=g(l,m);k=h(k,a);l=h(l,a);h=function(q){zb(q,
function(D,I){return D.Gg.fa.index-I.Gg.fa.index});var v=[];q=p(q);for(var B=q.next();!B.done;B=q.next()){B=[B.value];for(var y=p(v),x=y.next();!x.done;x=y.next()){x=x.value;var A=[];B=p(B);for(var z=B.next();!z.done;z=B.next())z=z.value,z.Gg.fa.Xh(x.Gg.fa)?A.push(z):z.Sg(x.o,x.F,A);B=A}y=p(B);for(z=y.next();!z.done;z=y.next()){A=z.value;z=[];v=p(v);for(x=v.next();!x.done;x=v.next())x.value.Sg(A.o,A.F,z);v=z}v.push.apply(v,ba(B))}return v}(l.concat(k));if(h.length){d=[];g=p(h);for(h=g.next();!h.done;h=
g.next())if(k=h.value,k.Gg.ki){l=[];m=p(k.Gg.ki);for(h=m.next();!h.done;h=m.next())h.value.Ma(k.o,k.F,l);m=p(l);for(h=m.next();!h.done;h=m.next())h.value.fa=k.fa;d.push.apply(d,ba(l))}zb(d,function(q,v){return q.o<v.o?-1:q.o>v.o?1:0});g=void 0;k=Number.NEGATIVE_INFINITY;d=p(d);for(h=d.next();!h.done;h=d.next())h=h.value,h.o>k?(g&&c(g),g=[h],g.Y=e.X(),g.fa=h.fa,g.o=h.o,g.F=h.F,this.fg.fk.push(g)):(g.push(h),g.F=h.F),k=h.F;g&&c(g)}}};
function Jj(a,b,c,d){Ec.call(this,a,b,c,d);this.index=Jj.index++;this.da=null}Jj.index=-2147483648;Jj.prototype=Object.create(Ec.prototype);Jj.prototype.constructor=Jj;Jj.prototype.hb=function(a,b,c,d){return new Jj(a,b,c,d)};
Jj.prototype.replace=function(a){Ec.prototype.replace.call(this,a);if(this.kh)for(var b=0;b<a.length;b++)a[b].kh=this.kh;if(this.kc)for(a=p(a),b=a.next();!b.done;b=a.next())if(b=b.value,b.kc)for(var c=p(this.kc),d=c.next();!d.done;d=c.next())d=d.value,0<=b.kc.indexOf(d)||b.kc.push(d);else b.kc=this.kc.slice()};function sh(a,b,c){this.$=new Rj;this.o=a;this.F=b;this.Gg=c;this.fa=null}sh.prototype.X=function(a,b){a=new sh(a,b,this.Gg);a.$=this.$;a.fa=this.fa;return a};
sh.prototype.Sg=function(a,b,c){this.F<=a||this.o>=b?c.push(this):(this.o<a&&c.push(this.X(this.o,a)),this.F>b&&c.push(this.X(b,this.F)))};sh.prototype.Ma=function(a,b,c){this.F<=a||this.o>=b||(this.F<=b&&this.o>=a?c.push(this):(b=b<this.F?b:this.F,a=a>this.o?a:this.o,c.push(this.X(a,b))))};function Rj(){this.ia=t.i.P.get("concr01");this.aa=mh;this.color=hd;this.y=this.x=0}
function Mj(a,b){if(a.ia.name<b.ia.name)return-1;if(a.ia.name>b.ia.name)return 1;var c=Oe(a.aa,b.aa);return 0!=c?c:a.color.r<b.color.r?-1:a.color.r>b.color.r?1:a.color.bb<b.color.bb?-1:a.color.bb>b.color.bb?1:a.color.qa<b.color.qa?-1:a.color.qa>b.color.qa?1:a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0};function Ni(){this.index=Sj++;this.add=!0;this.ha=null;this.o=Number.POSITIVE_INFINITY;this.F=Number.NEGATIVE_INFINITY;this.floor=new Rj;this.sa=new Rj;this.color=hd;this.Za=-1;this.vd=[]}var Sj=-2147483648;function Oi(a,b){a.floor&&(a.floor.color=gh);a.sa&&(a.sa.color=jh);a.ha=[];for(var c=[],d=0;d<b.length;d++)c.push(kj.tb(b[d].x,b[d].y));b=c;var e=b[b.length-1];for(c=0;c<b.length;c++)d=b[c],e=new Jj(e.x,e.y,d.x,d.y),e.fa=a,e.ki=a.Nc(),a.ha.push(e),e=d}
Ni.prototype.Nc=function(){var a=new sh(this.o,this.F);a.$.color=this.color;return[a]};
Ni.prototype.stroke=function(){if(Oc(this.ha)){console.trace();debugger}if(this.F<=this.o){console.trace();debugger}for(var a=[],b=p(this.ha),c=b.next();!c.done;c=b.next()){c=c.value;var d=c.X();d.kc=[c.ki];a.push(d);Yc(d);delete d.da.kc}b=new Sc;c=p(a);for(d=c.next();!d.done;d=c.next())d=d.value,b.Ma(d.K,d.H);d=b.v&-524288;c=b.o&-524288;d+=524288;for(c+=524288;d<b.D;){var e=new Jj(d,b.o,d,b.F);Yc(e);a.push(e);d+=524288}for(;c<b.F;)d=new Jj(b.v,c,b.D,c),Yc(d),a.push(d),c+=524288;a=Wi(a.slice(),!0);
a=Aj(a);for(b={};a.elements.length;){a:if(c=function(g){return function(){for(var k=p(g.De),l=k.next();!l.done;l=k.next())if(l.value.kc)return!0;return!1}}(b),b.De=Bj(a),b.De&&!Oc(b.De)){if(!c()&&(c=Rc(b.De),0>=Pc(c.x,c.y,this.ha)))break a;d=new Tj(this);e=p(b.De);for(c=e.next();!c.done;c=e.next()){c=c.value;var h=c.X();Yc(h);h.fa=this;c.kc&&(h.ki=c.kc[0]);d.ha.push(h)}d.stroke(bf(ff(b.De.bound.v+2147483648>>>19,b.De.bound.o+2147483648>>>19)))}b={De:b.De}}};
function wi(a){for(var b=p(a.vd),c=b.next();!c.done;c=b.next())c.value.remove();a.vd.length=0}Ni.prototype.X=function(){var a=new Ni;a.add=this.add;a.o=this.o;a.F=this.F;a.floor=this.floor;a.sa=this.sa;a.color=this.color;a.Za=this.Za;return a};Ni.prototype.Xh=function(){return!0};function Tj(a){this.index=Uj++;this.fa=a;this.ha=[];this.fg=null}var Uj=-2147483648;function Pj(a,b){return a.fa.index<b.fa.index?-1:a.fa.index>b.fa.index?1:0}
Tj.prototype.stroke=function(a){if(Oc(this.ha)){console.trace();debugger}this.fa.vd.push(this);a=this.fg=a;a.vd.add(this);Ra(mj,a)};Tj.prototype.remove=function(){var a=this.fg;a.vd.remove(this);if(a.vd.elements.length)Ra(mj,a);else{for(var b=a.Yi.first();null!=b.item;){var c=b.next;fb(b);fb(b.td);b=c}fb(a.Tl);Ze.remove(a);Ta(mj,a)}};var vj={},wj,Vj,xj=-1;vj.kg=[];
function yj(){function a(C,J){if(C.Aa.ga<J.Aa.ga)return-1;if(C.Aa.ga>J.Aa.ga)return 1;if(C.Aa.ba<J.Aa.ba)return-1;if(C.Aa.ba>J.Aa.ba)return 1;C=Ic(J.Aa,C.Aa.m,C.Aa.l);return 0>C?-1:0<C?1:0}function b(C,J){C=C[0];J=J[0];return C.y<J.y?-1:C.y>J.y?1:0}function c(C){if(!(2>C.length)){var J=2.197265625E7;var M=-1;for(var G,O,Q=1;Q<C.length;Q++)G=C[Q-1],O=C[Q],G=new Ec(G.m,G.l,O.K,O.H),O=(G.length>>3)*(Ic(G,O.m,O.l)>>3),O>=J||-2E3>=O||(J=O,M=Q);0>M||(G=C[M-1],O=C[M],J=O.hb(G.m,G.l,O.K,O.H),Q=O.length/(G.length+
O.length),J.weight=G.weight*(1-Q)+O.weight*Q,C.splice(M-1,2,J),c(C))}}function d(C){if(!(2>C.length)){var J=2.197265625E7;var M=-1;for(var G=C[C.length-1],O,Q=0;Q<C.length;Q++,G=O)O=C[Q],G=new Ec(G.m,G.l,O.K,O.H),G=(G.length>>3)*(Ic(G,O.m,O.l)>>3),G>=J||-2E3>=G||(J=G,M=Q);0>M||(C.unshift.apply(C,ba(C.splice(M))),G=C.pop(),O=C.shift(),J=O.hb(G.m,G.l,O.K,O.H),M=O.length/(G.length+O.length),J.weight=G.weight*(1-M)+O.weight*M,C.unshift(J),d(C))}}function e(C){function J(S,V){var Ga=Vc(S),pa=Vc(V),Oa=
-Gc(S,V)+Math.PI;if(Oa<jc(165)){var ca=new E(S.K,S.H);ca.round();ca.ma=S.weight;ca.Fa=255;G.push(ca);var Ma=new E(S.K-Ga.y,S.H+Ga.x);Ma.round();Ma.ma=ca.ma;Ma.Fa=0;O.push(Ma);M(S);var Aa=new E(V.m,V.l);Aa.round();Aa.ma=V.weight;Aa.Fa=255;G.push(Aa);var cc=new E(V.m-pa.y,V.l+pa.x);cc.round();cc.ma=Aa.ma;cc.Fa=0;O.push(cc);Oa<=jc(90)||(S=new E(S.K+Ga.x,S.H+Ga.y),S.round(),S.ma=ca.ma,S.Fa=0,Q.push([Ma,ca,S]),V=new E(V.m-pa.x,V.l-pa.y),V.round(),V.ma=Aa.ma,V.Fa=0,Q.push([V,Aa,cc]))}else Aa=new E(V.m,
V.l),Aa.ma=(S.weight+V.weight)*(1-Oa/Math.uh),Aa.Fa=255,G.push(Aa),Oa<=jc(195)?(pa=new E(-Ga.y-pa.y,Ga.x+pa.x),pa.scale(5E9/pa.uc()),pa.x+=V.m,pa.y+=V.l,pa.round(),pa.ma=Aa.ma,pa.Fa=0,O.push(pa),M(S)):(cc=new E(S.K-Ga.y,S.H+Ga.x),cc.round(),cc.ma=Aa.ma,cc.Fa=0,O.push(cc),M(S),V=new E(V.m-pa.y,V.l+pa.x),V.round(),V.ma=Aa.ma,V.Fa=0,O.push(V),Q.push([cc,Aa,V]))}function M(S){if(ma)ma=!1;else{var V=O[O.length-2],Ga=G[G.length-2],pa=G[G.length-1],Oa=O[O.length-1];if(Ga.ma!=S.weight&&pa.ma!=S.weight)if(1E5<
S.length){var ca=S.tb(5E4,0);ca.round();ca.ma=S.weight;ca.Fa=255;var Ma=S.tb(S.length-5E4,0);Ma.round();Ma.ma=S.weight;Ma.Fa=255;Q.push([V,Ga,ca]);Q.push([V,ca,Ma,Oa]);Q.push([Ma,pa,Oa])}else if(ca=new E(S.m+S.K>>1,S.l+S.H>>1),ca.round(),1E5>S.length){var Aa=5E4/S.length-.5;Ma=S.length/1E5;ca.ma=.5*(Ga.ma+pa.ma)*(1-Ma)+S.weight*Ma;ca.Fa=255;Aa=new E(ca.x+(S.l-S.H)*Aa,ca.y+(S.K-S.m)*Aa);Aa.ma=ca.ma;Aa.Fa=S.weight*Ma*255;Aa.round();Q.push([V,Ga,ca,Aa]);Q.push([V,Aa,Oa]);Q.push([Aa,ca,pa,Oa])}else ca.ma=
S.weight,ca.Fa=255,Q.push([V,Ga,ca]),Q.push([V,ca,Oa]),Q.push([ca,pa,Oa]);else Ga.ma!=S.weight?5E4<S.length?(ca=S.tb(5E4,0),ca.round(),ca.ma=S.weight,ca.Fa=255,Q.push([V,Ga,ca]),Q.push([V,ca,pa,Oa])):Q.push([V,Ga,pa,Oa]):pa.ma!=S.weight?5E4<S.length?(ca=S.tb(S.length-5E4,0),ca.round(),ca.ma=S.weight,ca.Fa=255,Q.push([V,Ga,ca,Oa]),Q.push([ca,pa,Oa])):Q.push([Ga,pa,Oa,V]):Q.push([V,Ga,pa,Oa])}}var G=[],O=[],Q=[],ma=!1;if(C[0].m==C[C.length-1].K&&C[0].l==C[C.length-1].H){ma=!0;J(C[C.length-1],C[0]);
Q=[];for(var Y=1;Y<C.length;Y++)J(C[Y-1],C[Y]);J(C[C.length-1],C[0])}else{var X=C[0],Fa=Vc(X);Y=new E(X.m,X.l);Y.round();Y.ma=X.weight;Y.Fa=255;G.push(Y);X=new E(X.m-Fa.y,X.l+Fa.x);X.round();X.ma=Y.ma;X.Fa=0;O.push(X);for(Y=1;Y<C.length;Y++)J(C[Y-1],C[Y]);C=C[C.length-1];X=Vc(C);Y=new E(C.K,C.H);Y.round();Y.ma=C.weight;Y.Fa=255;G.push(Y);X=new E(C.K-X.y,C.H+X.x);X.round();X.ma=Y.ma;X.Fa=0;O.push(X);M(C)}return Q}function h(C){var J=new bb(lb);C=p(C);for(var M=C.next();!M.done;M=C.next())M=M.value,
sf(M.bound.J-5E4,M.bound.v-5E4,M.bound.L+5E4,M.bound.D+5E4,J);return J.elements}function g(C){var J=new bb(Fc);C=p(C);for(var M=C.next();!M.done;M=C.next())M=M.value,J.remove(Xc(M))||J.add(M);return J.elements}function k(C){var J=Aj(C,!1);C=[];for(var M=[];J.elements.length;){var G=Bj(J);G?Oc(G)?M.push(G):(G.vb=[],C.push(G)):console.log("failed circuit")}M=p(M);for(J=M.next();!J.done;J=M.next())Dj(J.value,C);M=[];C=p(C);for(J=C.next();!J.done;J=C.next())if(G=J.value,0==G.vb.length)M.push(G);else{Cj(G);
var O=p(G.vb);for(J=O.next();!J.done;J=O.next())Cj(J.value);M.push(Fj(G))}return M}function l(C,J,M){var G=Aj(C,!1);C=[];for(var O=new bb(ud);G.elements.length;){a:{var Q=G;var ma=[];ma.bound=new Sc;var Y=0,X=Q.elements[Y],Fa=X.elements.pop();X.elements.length||Q.elements.splice(Y,1);if(Fa)for(ma.bound.Ma(Fa.m,Fa.l);;){ma.push(Fa);ma.bound.Ma(Fa.K,Fa.H);if(Fa.K==ma[0].m&&Fa.H==ma[0].l)break a;Y=Q.contains(new E(Fa.K,Fa.H));if(0>Y)break a;X=Q.elements[Y];Fa=cb(X,Xc(Fa))-1;0>Fa&&(Fa+=X.elements.length);
Fa=X.elements.splice(Fa,1)[0];X.elements.length||Q.elements.splice(Y,1)}else ma=null}C.push(ma);if(ma[0].m!=ma[ma.length-1].K||ma[0].l!=ma[ma.length-1].H)Q=ma[0],Q.aj=ma,ma=new bb(Zc),ma.x=Q.m,ma.y=Q.l,ma=O.Ma(ma),ma.add(Q)}for(G=0;G<C.length;G++)if(Q=C[G],Q[0].m!=Q[Q.length-1].K||Q[0].l!=Q[Q.length-1].H)ma=Q[Q.length-1],Y=O.contains(new E(ma.K,ma.H)),0>Y||(X=O.elements[Y],ma=cb(X,Xc(ma))-1,0>ma&&(ma+=X.elements.length),ma=X.elements.splice(ma,1)[0],X.elements.length||O.elements.splice(Y,1),Y=C.indexOf(ma.aj),
C.splice(Y,1),Y<G&&G--,Q.push.apply(Q,ba(ma.aj)),Q.bound.ql(ma.aj.bound),G--);O=p(C);for(G=O.next();!G.done;G=O.next())delete G.value.aj;O=p(C);for(G=O.next();!G.done;G=O.next())G=G.value,G[0].m==G[G.length-1].K&&G[0].l==G[G.length-1].H?d(G):c(G);O=[];C=p(C);for(G=C.next();!G.done;G=C.next())O=O.concat(e(G.value));C=[];O=p(O);for(G=O.next();!G.done;G=O.next())for(G=G.value,Q=p(J),Y=Q.next();!Y.done;Y=Q.next()){a:for(ma=G,Y=p(Y.value),X=Y.next();!X.done;X=Y.next()){X=X.value;Fa=[];for(var S=ma[ma.length-
1],V=Ic(X,S.x,S.y),Ga=0;Ga<ma.length;Ga++){var pa=ma[Ga],Oa=Ic(X,pa.x,pa.y);if(0<Oa){if(0>V){V/=V-Oa;var ca=1-V,Ma=new E(S.x*ca+pa.x*V,S.y*ca+pa.y*V);Ma.ma=S.ma*ca+pa.ma*V;Ma.Fa=S.Fa*ca+pa.Fa*V;Fa.push(Ma)}Fa.push(pa)}else 0>Oa?0<V&&(V/=V-Oa,ca=1-V,Ma=new E(S.x*ca+pa.x*V,S.y*ca+pa.y*V),Ma.ma=S.ma*ca+pa.ma*V,Ma.Fa=S.Fa*ca+pa.Fa*V,Fa.push(Ma)):Fa.push(pa);S=pa;V=Oa}if(3>Fa.length){ma=null;break a}ma=Fa}ma&&C.push(ma)}J=p(C);for(G=J.next();!G.done;G=J.next()){C=G.value;for(O=0;O<C.length;O++)G=C[O],
G.index?C[O]=G.index:(G.index=vj.te.Zb.length,C[O]=G.index,Q=M(G),Q.ma=225*G.ma,Q.Fa=G.Fa,vj.te.Zb.push(Q));wj+=3*(C.length-2);vj.te.pe.push(C)}}var m=Ze.elements[xj];if(m){vj.kg[2*xj]=wj;for(var n=new bb(a),r=new bb(b),q=new bb(b),v={},B=p(m.wa),y=B.next();!y.done;v={jd:v.jd,Pd:v.Pd,oj:v.oj},y=B.next())if(v.Pd=y.value,v.Pd instanceof Lg){v.oj=function(C){return function(J){var M=J.Aa,G=Math.atan2(M.ba,M.ga)-Math.atan2(C.jd.ba,C.jd.ga);if(Math.abs(G>Math.PI?G-Math.uh:G<-Math.PI?G+Math.uh:G)>jc(5))return!1;
G=M.weight/(M.weight+1);var O=1-G;G=M.hb(Math.round(M.m*G+C.jd.m*O),Math.round(M.l*G+C.jd.l*O),Math.round(M.K*G+C.jd.K*O),Math.round(M.H*G+C.jd.H*O));if(500<=Math.abs(Ic(G,C.jd.m,C.jd.l))||500<=Math.abs(Ic(G,C.jd.K,C.jd.H))||500<=Math.abs(Ic(G,M.m,M.l))||500<=Math.abs(Ic(G,M.K,M.H)))return!1;J.Aa=G;G.weight=M.weight+1;J.push(C.Pd);return!0}}(v);var x=function(C){return function(){for(var J=p(n.elements),M=J.next();!M.done;M=J.next())if(C.oj(M.value))return!0;return!1}}(v);v.jd=Xc(v.Pd.Y);if(!x()){var A=
[v.Pd];A.Aa=v.jd;A.Aa.weight=1;var z=n.Ma(A);z!=A&&z.push(v.Pd)}}else{var D=[v.Pd],I=void 0;v.Pd instanceof Mg?I=r.Ma(D):v.Pd instanceof Og&&(I=q.Ma(D));I!=D&&I.push(v.Pd)}n=n.elements;r=r.elements;q=q.elements;for(var L={},R=p(n),qa=R.next();!qa.done;L={yc:L.yc,wf:L.wf},qa=R.next()){var ta=qa.value;L.wf=Wc(ta.Aa,-1E3);ta.Aa=ta.Aa.hb(ta.Aa.m+L.wf.x,ta.Aa.l+L.wf.y,ta.Aa.K+L.wf.x,ta.Aa.H+L.wf.y);L.yc=ta.Aa;var ia=[[],[],[],[]],oa=[],Lb=p(ta);for(y=Lb.next();!y.done;y=Lb.next()){var qb=y.value,kc=function(C,
J,M){C.m<J.v||C.m>J.D||C.H>J.F||C.l<J.o?M.push(C):(C.H<J.o&&M.push(C.hb(C.m,J.o,C.K,C.H)),C.l>J.F&&M.push(C.hb(C.m,C.l,C.K,J.F)))},Mb=function(C,J,M){C.l<J.o||C.l>J.F||C.K>J.D||C.m<J.v?M.push(C):(C.K<J.v&&M.push(C.hb(J.v,C.l,C.K,C.H)),C.m>J.D&&M.push(C.hb(C.m,C.l,J.D,C.H)))},Tb=function(C,J,M){C.m<J.v||C.m>J.D||C.l>J.F||C.H<J.o?M.push(C):(C.l<J.o&&M.push(C.hb(C.m,C.l,C.K,J.o)),C.H>J.F&&M.push(C.hb(C.m,J.F,C.K,C.H)))},Hc=function(C,J,M){C.l<J.o||C.l>J.F||C.m>J.D||C.K<J.v?M.push(C):(C.m<J.v&&M.push(C.hb(C.m,
C.l,J.v,C.H)),C.K>J.D&&M.push(C.hb(J.D,C.l,C.K,C.H)))},Ia=new Sc;Ia.v=Math.round(L.yc.getParameter(qb.Y.K,qb.Y.H));Ia.D=Math.round(L.yc.getParameter(qb.Y.m,qb.Y.l));Ia.o=qb.o;Ia.F=qb.F;for(var Ob=[[],[],[],[]],Df=p(ia[0]),va=Df.next();!va.done;va=Df.next())Hc(va.value,Ia,Ob[0]);var Ef=p(ia[1]);for(va=Ef.next();!va.done;va=Ef.next())Tb(va.value,Ia,Ob[1]);var Ce=p(ia[2]);for(va=Ce.next();!va.done;va=Ce.next())Mb(va.value,Ia,Ob[2]);var Ff=p(ia[3]);for(va=Ff.next();!va.done;va=Ff.next())kc(va.value,Ia,
Ob[3]);ia=Ob;for(var yc=[[new Ec(Ia.v,Ia.o,Ia.D,Ia.o)],[new Ec(Ia.D,Ia.o,Ia.D,Ia.F)],[new Ec(Ia.D,Ia.F,Ia.v,Ia.F)],[new Ec(Ia.v,Ia.F,Ia.v,Ia.o)]],Gf=p(oa),tb=Gf.next();!tb.done;tb=Gf.next()){var ae=tb.value;Ob=[[],[],[],[]];var Hf=p(yc[0]);for(va=Hf.next();!va.done;va=Hf.next())Hc(va.value,ae,Ob[0]);var De=p(yc[1]);for(va=De.next();!va.done;va=De.next())Tb(va.value,ae,Ob[1]);var be=p(yc[2]);for(va=be.next();!va.done;va=be.next())Mb(va.value,ae,Ob[2]);var ce=p(yc[3]);for(va=ce.next();!va.done;va=ce.next())kc(va.value,
ae,Ob[3]);yc=Ob}ia[0].push.apply(ia[0],ba(yc[0]));ia[1].push.apply(ia[1],ba(yc[1]));ia[2].push.apply(ia[2],ba(yc[2]));ia[3].push.apply(ia[3],ba(yc[3]));oa.push(Ia)}ia=ia[0].concat(ia[1].concat(ia[2].concat(ia[3])));ta.length=0;for(var If=k(ia),Ee=[],ub=p(If),Xb=ub.next();!Xb.done;Xb=ub.next()){for(var Jf=Xb.value,Ed=Jf.slice(),nd=new Sc,Kf=p(Jf),Pb=Kf.next();!Pb.done;Pb=Kf.next()){var Lf=Pb.value;nd.Ma(Lf.K,Lf.H)}var Fe=L.yc.tb(nd.v,0),Mf=L.yc.tb(nd.D,0);Ed.bound=new Rd;Ed.bound.Ma(Fe.y,nd.o,Fe.x);
Ed.bound.Ma(Mf.y,nd.F,Mf.x);Ee.push.apply(Ee,ba(Ij(Ed)));ta.push(Ed)}var Nf=h(ta);ia=[];for(var Za=p(Nf),Db=Za.next();!Db.done;Db=Za.next())for(var $c=p(Db.value.wa),Yb=$c.next();!Yb.done;Yb=$c.next()){var jb=Yb.value;if(jb instanceof Og){var Lc=Uc(L.yc,jb.ha);if(Lc){Lc[0]=Math.round(Lc[0]);Lc[1]=Math.round(Lc[1]);var de=new Ec(Lc[1],jb.y,Lc[0],jb.y);de.weight=1;ia.push(de)}}else if(jb instanceof Mg){var zc=Uc(L.yc,jb.ha);if(zc){zc[0]=Math.round(zc[0]);zc[1]=Math.round(zc[1]);var Of=new Ec(zc[0],
jb.y,zc[1],jb.y);Of.weight=1;ia.push(Of)}}else{var Fd=L.yc,mc=jb.Y,Ac=Ic(Fd,mc.m,mc.l),vb=Ic(Fd,mc.K,mc.H),Ge=Fd.getParameter(mc.m,mc.l),za=Fd.getParameter(mc.K,mc.H);if(Ac<vb){if(!(-256>vb||256<Ac)){var Pf=Ac/(Ac-vb),Mc=Math.round(Ge*(1-Pf)+za*Pf),Qf=Math.atan2(-Ac,Ge-Mc);if(!(Qf<jc(15))){var Bc=new Ec(Mc,jb.o,Mc,jb.F);Bc.weight=(180*Qf/Math.PI-15)/75;1<Bc.weight&&(Bc.weight=1);ia.push(Bc)}}}else if(Ac>vb&&!(-256>Ac)&&!(256<vb)){var Rf=Ac/(Ac-vb),Gd=Math.round(Ge*(1-Rf)+za*Rf),Sf=Math.atan2(-vb,
Gd-za);if(!(Sf<jc(15))){var ee=new Ec(Gd,jb.F,Gd,jb.o);ee.weight=(180*Sf/Math.PI-15)/75;1<ee.weight&&(ee.weight=1);ia.push(ee)}}}}l(ia,Ee,function(C){return function(J){var M=Math.round(J.x);J=Math.round(J.y);M/=C.yc.length;return new ld(Math.round(C.yc.l+(C.yc.H-C.yc.l)*M)-C.wf.y,J,Math.round(C.yc.m+(C.yc.K-C.yc.m)*M)-C.wf.x)}}(L))}var ad={},Tf=p(r);for(qa=Tf.next();!qa.done;ad={Ig:ad.Ig},qa=Tf.next()){var Hd=qa.value;ad.Ig=Hd[0].y;var Zb=[],Id=p(Hd);for(y=Id.next();!y.done;y=Id.next())Zb.push.apply(Zb,
ba(y.value.ha));Hd.length=0;var Ng=k(g(Zb)),la=[],Sa=p(Ng);for(Xb=Sa.next();!Xb.done;Xb=Sa.next()){var Da=Xb.value,Qb=Da.slice(),Nc=new Sc,Jd=p(Da);for(Pb=Jd.next();!Pb.done;Pb=Jd.next()){var Uf=Pb.value;Nc.Ma(Uf.K,Uf.H)}Qb.bound=new Rd;Qb.bound.J=Nc.v;Qb.bound.L=Nc.D;Qb.bound.v=Nc.o;Qb.bound.D=Nc.F;Qb.bound.o=Qb.bound.F=ad.Ig;la.push.apply(la,ba(Ij(Qb)));Hd.push(Qb)}var He=h(Hd);Zb=[];var Ie=p(He);for(Db=Ie.next();!Db.done;Db=Ie.next()){var Je=p(Db.value.wa);for(Yb=Je.next();!Yb.done;Yb=Je.next()){var Kd=
Yb.value;if(Kd instanceof Lg&&!(Kd.o>ad.Ig||Kd.F<=ad.Ig)){var Vf=Kd.Y.X();Vf.weight=1;Zb.push(Vf)}}}l(Zb,la,function(C){return function(J){return new ld(Math.round(J.y),C.Ig,Math.round(J.x))}}(ad))}var Cc={},Wf=p(q);for(qa=Wf.next();!qa.done;Cc={Jg:Cc.Jg},qa=Wf.next()){var Eb=qa.value;Cc.Jg=Eb[0].y;var Ld=[],Xf=p(Eb);for(y=Xf.next();!y.done;y=Xf.next())for(var $b=p(y.value.ha),Yf=$b.next();!Yf.done;Yf=$b.next()){var Md=Yf.value;Ld.push(Md.hb(-Md.K,Md.H,-Md.m,Md.l))}Eb.length=0;var od=k(g(Ld)),fe=
[],Ke=p(od);for(Xb=Ke.next();!Xb.done;Xb=Ke.next()){var Zf=Xb.value,nc=Zf.slice(),bd=new Sc,$f=p(Zf);for(Pb=$f.next();!Pb.done;Pb=$f.next()){var ag=Pb.value;bd.Ma(ag.K,ag.H)}nc.bound=new Rd;nc.bound.J=-bd.D;nc.bound.L=-bd.v;nc.bound.v=bd.o;nc.bound.D=bd.F;nc.bound.o=nc.bound.F=Cc.Jg;fe.push.apply(fe,ba(Ij(nc)));Eb.push(nc)}var pd=h(Eb);Ld=[];var ge=p(pd);for(Db=ge.next();!Db.done;Db=ge.next()){var ac=p(Db.value.wa);for(Yb=ac.next();!Yb.done;Yb=ac.next()){var bc=Yb.value;if(bc instanceof Lg&&!(bc.o>=
Cc.Jg||bc.F<Cc.Jg)){var Le=bc.Y.hb(-bc.Y.K,bc.Y.H,-bc.Y.m,bc.Y.l);Le.weight=1;Ld.push(Le)}}}l(Ld,fe,function(C){return function(J){return new ld(Math.round(J.y),C.Jg,-Math.round(J.x))}}(Cc))}vj.kg[2*xj+1]=wj-vj.kg[2*xj];xj++;return!0}Vj=vj.te;delete vj.te;for(var cd=0;cd<Ze.elements.length;cd++)Ze.elements[cd].Qk=vj.kg[2*cd],Ze.elements[cd].Pk=vj.kg[2*cd+1];delete vj.kg;xj=-1;Vj.compile();return!1};t.Sa=function(a){t.Ha.call(this,a);this.h=new w(0,0,0);this.Pa=null;this.Wj=NaN;this.Rb=0;this.ja={pa:-2147483648,lb:new w(1,1,1)};this.Nk=new db;this.Eh=new Sc};t.Sa.prototype=Object.create(t.Ha.prototype);t.Sa.prototype.constructor=t.Sa;t.Sa.index=-2147483648;t.Sa.prototype.create=function(){this.index=t.Sa.index++;t.dk.push(this);t.Ha.prototype.create.call(this)};t.Sa.prototype.remove=function(){for(var a=this.Nk.first();null!=a.item;){var b=a.next;fb(a);fb(a.td);a=b}t.dk.remove(this);t.Ha.prototype.remove.call(this)};
t.Sa.prototype.step=function(){this.Eh.Cf(this.h.z,this.h.x)||zj(this);var a=null,b=mf(this.h,new w(0,-1E8,0),ig);b&&(a=Ye(b.item.ca));a?(a!=this.Pa&&(this.Wj=t.j),this.Pa=a,eg(this.h,a,this.ja.lb)):this.$j();t.Ha.prototype.step.call(this)};t.Sa.prototype.$j=function(){this.remove()};
function zj(a){for(var b=a.h.z-a.Rb,c=a.h.z+a.Rb,d=a.h.x-a.Rb,e=a.h.x+a.Rb,h=a.Nk.first(),g=[Ve];g.length;){var k=g.shift();if(k instanceof hf)b<=k.value&&g.push(k.Qe),c>=k.value&&g.push(k.Re);else if(k instanceof jf)d<=k.value&&g.push(k.Qe),e>=k.value&&g.push(k.Re);else{for(;null!=h.item&&!(h.item.index>=k.index);){var l=h.next;fb(h);fb(h.td);h=l}if(h.item==k)h=h.next;else{l=new eb(k);var m=new eb(a);l.td=m;m.td=l;hb(l,h);gb(k.Yi,m)}}}for(;null!=h.item;)g=h.next,fb(h),fb(h.td),h=g;a.Eh.v=(b>>19<<
19)+a.Rb;a.Eh.D=((c>>19)+1<<19)-a.Rb;a.Eh.o=(d>>19<<19)+a.Rb;a.Eh.F=((e>>19)+1<<19)-a.Rb}t.dk=new bb(lb);t.Yf=function(a){t.Node.call(this,a);this.mb=1E5};t.Yf.prototype=Object.create(t.Node.prototype);t.Yf.prototype.constructor=t.Yf;t.Yf.color=new F(0,0,0,64);
t.Yf.prototype.ab=function(){var a=new H;a.u=0;a.A=0;a.B=this.mb;a.w=this.mb;a.m11=0;a.m12=0;a.C=0;a.m21=1;a.m22=0;a.s=this.La.s;a.m31=this.La.m31+500;a.m32=this.La.m32;var b=mf(new w(this.La.s,this.La.m31,this.La.m32),new w(0,-1E8,0));b&&(a.m31-=b.d);t.G.M("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,0,4);t.Node.prototype.ab.call(this)};var Wj,Xj=980700/3600*2,Yj=new w(0,-Xj,0),Zj=new bb(lb),ak=new t.Node("physProcessor");
ak.step=function(){Wj=new fc;for(var a=p(Zj.elements),b=a.next();!b.done;b=a.next()){b=b.value;b.Xe=0;b.t=0;b.jm=b.Hh(b.h,b.Ca,b.Fb);var c=b.Rl();b.input();b.tc&&!b.Th()&&0<b.Of&&(b.I.x+=Yj.x,b.I.y+=Yj.y,b.I.z+=Yj.z);b.I.scale(b.Um);var d=vd(b.I,b.Nb,new w(0,0,0));if(0<b.zg){for(var e=b,h=b.jm,g=new w(0,0,0),k=0;k<h.length;k++){var l=h[k],m=-qc(d,l);if(!(0>=m)){m*=e.zg;var n=qc(e.I,l);l=new w(e.I.x-l.x*n,e.I.y-l.y*n,e.I.z-l.z*n);m/=l.length();1<m&&(m=1);g.x-=l.x*m;g.y-=l.y*m;g.z-=l.z*m}}e.I.add(g)}b.gb.set(.5*
b.Nb.x+.5*b.I.x,.5*b.Nb.y+.5*b.I.y,.5*b.Nb.z+.5*b.I.z);b.gb.y+=c;b.gb.round();b.bound=bk(b.h,b.Ca,b.Fb,b.gb)}a=p(Zj.elements);for(b=a.next();!b.done;b=a.next())b.value.handleEvent();for(a=0;!Wj.Oi();){b=Wj.pop();if(10<++a)break;b.target?(c=b.source,e=b.target,c.Xe==b.al&&e.Xe==b.um&&(c.Xe++,e.Xe++,ck(c,b),ck(e,b),c.handleEvent(),e.handleEvent(),c.ak(e),e.ak(c))):(c=b.source,c.Xe==b.al&&(c.Xe++,ck(c,b),c.handleEvent()))}a=p(Zj.elements);for(b=a.next();!b.done;b=a.next())b=b.value,b.h.x+=b.gb.x,b.h.y+=
b.gb.y,b.h.z+=b.gb.z,b.Nb.set(b.I.x,b.I.y,b.I.z),b.transform.s=b.h.x,b.transform.m31=b.h.y,b.transform.m32=b.h.z};function dk(a){t.Sa.call(this,a);this.I=new w(0,0,0);this.Nb=new w(0,0,0);this.Fb=this.Ca=0;this.Of=1;this.zg=0;this.Um=1;this.yg=0;this.le=new bb(lb);this.t=this.Xe=0;this.gb=new w(0,0,0);this.tc=!0}dk.prototype=Object.create(t.Sa.prototype);f=dk.prototype;f.constructor=dk;f.create=function(){t.Sa.prototype.create.call(this);Zj.add(this)};
f.remove=function(){t.Sa.prototype.remove.call(this);Zj.remove(this)};f.Rl=function(){return 0};function ck(a,b){var c=(b.t-a.t)/(1-a.t);c=new w(a.gb.x*c,a.gb.y*c,a.gb.z*c);c.round();a.h.add(c);a.gb.sub(c);a.t=b.t}
f.handleEvent=function(){for(var a=new w(this.I.x,this.I.y,this.I.z),b=this.Hh(this.h,this.Ca,this.Fb),c=ek(this),d=0;d<b.length;d++){var e=b[d],h=!1,g=-qc(this.I,e);0<g&&(2E3<g*this.yg&&(h=!0,g*=1+this.yg),this.I.x+=e.x*g,this.I.y+=e.y*g,this.I.z+=e.z*g);g=-qc(this.gb,e);0<g&&(h&&(g*=1+this.yg),this.gb.x+=e.x*g,this.gb.y+=e.y*g,this.gb.z+=e.z*g)}for(d=0;d<c.length;d++){h=function(m,n){var r=qc(m,e),q=qc(n,e);var v=k.Of;var B=l.Of;r>=q?v=[r,q]:(v=(v*r+B*q)/(v+B),v=[v+(v-r)*k.yg,v+(v-q)*l.yg]);r=v[0]-
r;q=v[1]-q;m.x+=e.x*r;m.y+=e.y*r;m.z+=e.z*r;n.x+=e.x*q;n.y+=e.y*q;n.z+=e.z*q};e=c[d];var k=this,l=e.source;l.index<k.index||(h(k.gb,l.gb),h(k.I,l.I))}uc(this.gb,b);uc(this.I,b);0<b.length+c.length&&(vd(this.I,a,a),a.ta(1),this.Xi());this.bound=bk(this.h,this.Ca,this.Fb,this.gb);if(this.gb.Qj())return null;t.gf();b=p(b);for(a=b.next();!a.done;a=b.next())a.value.source.pa=t.pa;c=p(c);for(a=c.next();!a.done;a=c.next())a.value.source.pa=t.pa;0>=this.Ca||!(c=this.Bi(this.h,this.Ca,this.Fb,this.gb,!0))||
(c.source=this,c.al=this.Xe,c.target&&(c.um=c.target.Xe),Wj.add(c,c.t))};
f.Bi=function(a,b,c,d,e){for(var h=this,g=new kf(a,d,b),k=null,l=1,m=g.next();m&&!(m.t>l);){for(var n=function(v){v.pa!=t.pa&&(v=v.eg(a,b,c,d))&&(v.d=v.t*d.length(),-1>v.d||(v.t=h.t+v.t*(1-h.t),v.t>=l||(k=v,l=v.t)))},r=p(m.node.wa),q=r.next();!q.done;q=r.next())n(q.value);m=p(m.node.Ed);for(q=m.next();!q.done;q=m.next())n(q.value);m=g.next()}if(!e)return k;for(e=0;e<Zj.elements.length;e++)if(g=Zj.elements[e],this!=g&&g.pa!=t.pa&&!this.le.get(g)&&!g.le.get(this)&&Sd(this.bound,g.bound)&&(n=this.t>
g.t?this.t:g.t,q=fk(this,n),m=fk(g,n),r=gk(q.Wi,q.r,q.c,q.ob,m.Wi,m.r,m.c,m.ob)))r.d=r.t*vd(q.ob,m.ob,new w(0,0,0)).length(),-1>r.d||(r.t=n+r.t*(1-n),r.t>=l||(r.target=g,k=r,l=r.t));return k};function fk(a,b){b=(b-a.t)/(1-a.t);b=new w(a.gb.x*b,a.gb.y*b,a.gb.z*b);b.round();var c={};c.Wi=(new w(a.h.x,a.h.y,a.h.z)).add(b);c.r=a.Ca;c.c=a.Fb;c.ob=(new w(a.gb.x,a.gb.y,a.gb.z)).sub(b);return c}
f.Hh=function(a,b,c){var d=rf(a,b),e=[];t.gf();d=p(d);for(var h=d.next();!h.done;h=d.next()){h=h.value;for(var g=p(h.wa),k=g.next();!k.done;k=g.next())k=k.value,k.pa!=t.pa&&k.Ng(a,b,c,e);h=p(h.Ed);for(k=h.next();!k.done;k=h.next())g=k.value,g.pa!=t.pa&&g.Ng(a,b,c,e)}return e};
function ek(a){for(var b=[],c=0;c<Zj.elements.length;c++){var d=Zj.elements[c];if(a!=d&&!a.le.get(d)&&!d.le.get(a)){var e=a.h;var h=a.Ca,g=a.Fb,k=d.h,l=d.Ca,m=d.Fb;if(0==g&&0==m){e=new w(e.x-k.x,e.y-k.y,e.z-k.z);var n=e.ta(1);e.d=qc(new w(k.x+e.x*l,k.y+e.y*l,k.z+e.z*l),e)+h;n-=h+l;e=2<n||n<-h?null:e}else{if(e.y-g>k.y+m){n=new w(e.x-k.x,e.y-g-(k.y+m),e.z-k.z);var r=n.ta(1);e=new w(k.x+n.x*l,k.y+n.y*l,k.z+n.z*l)}else e.y+g<k.y-m?(n=new w(e.x-k.x,e.y+g-(k.y-m),e.z-k.z),r=n.ta(1),e=new w(k.x+n.x*l,k.y+
n.y*l,k.z+n.z*l)):(n=new w(e.x-k.x,0,e.z-k.z),r=n.ta(1),e=new w(k.x+n.x*l,(e.y*m+k.y*g)/(g+m),k.z+n.z*l));n.d=qc(e,n)+h;r-=h+l;e=2<r||r<-h?null:n}e&&(e.source=d,b.push(e))}}return b}f.Xi=function(){};f.ak=function(){};f.input=function(){};f.Th=function(){return!1};function hk(a){dk.call(this,a);this.vk=this.Aj=this.cd=this.Rj=this.dh=this.Vc=0;this.Pi=this.qh=Number.NEGATIVE_INFINITY;this.pm=this.Yh=!1;this.Ye=0;this.Fi=18}hk.prototype=Object.create(dk.prototype);hk.prototype.constructor=hk;
hk.prototype.Bi=function(a,b,c,d,e){for(var h=this,g=new kf(a,d,b),k=null,l=1,m=g.next();m&&!(m.t>l);){for(var n=function(v){v.pa==t.pa||v.flags&1||!(v=v.eg(a,b,c,d))||(v.d=v.t*d.length(),-1>v.d||(v.t=h.t+v.t*(1-h.t),v.t>=l||(k=v,l=v.t)))},r=p(m.node.wa),q=r.next();!q.done;q=r.next())n(q.value);m=p(m.node.Ed);for(q=m.next();!q.done;q=m.next())n(q.value);m=g.next()}if(!e)return k;for(e=0;e<Zj.elements.length;e++)if(g=Zj.elements[e],this!=g&&g.pa!=t.pa&&!this.le.get(g)&&!g.le.get(this)&&Sd(this.bound,
g.bound)&&(n=this.t>g.t?this.t:g.t,q=fk(this,n),m=fk(g,n),r=gk(q.Wi,q.r,q.c,q.ob,m.Wi,m.r,m.c,m.ob)))r.d=r.t*vd(q.ob,m.ob,new w(0,0,0)).length(),-1>r.d||(r.t=n+r.t*(1-n),r.t>=l||(r.target=g,k=r,l=r.t));return k};
dk.prototype.Hh=function(a,b,c){var d=rf(a,b),e=[];t.gf();d=p(d);for(var h=d.next();!h.done;h=d.next()){h=h.value;for(var g=p(h.wa),k=g.next();!k.done;k=g.next())k=k.value,k.pa==t.pa||k.flags&1||k.Ng(a,b,c,e);h=p(h.Ed);for(k=h.next();!k.done;k=h.next())g=k.value,g.pa==t.pa||g.flags&1||g.Ng(a,b,c,e)}return e};hk.Ik=function(a){return Math.sqrt(2*a*Xj)};f=hk.prototype;f.Th=function(){return this.qh<t.j-1?!1:!0};
f.Rl=function(){var a=0,b=this.pm?this.Aj:this.cd,c=new w(this.h.x,this.h.y-this.Fb-.5*this.Ca,this.h.z);0>=this.I.y&&(this.Yh=!1);if(this.Th()){this.Yh=!1;var d=0;t.gf();var e=this.vk;if(e=this.Bi(c,.5*this.Ca,0,new w(0,-e,0)))d=e.d;c.y+=.5*this.Ca;c.y-=d;c=this.Hh(c,this.Ca,0);e=Number.NEGATIVE_INFINITY;for(var h=0;h<c.length;h++){var g=c[h];g.y>e&&(e=g.y)}0<e&&(this.qh=t.j,a=b-2*(this.Ca+this.Fb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}else if(!this.Yh){d=0;t.gf();e=this.cd-2*this.Fb-this.Ca;if(e=
this.Bi(c,.5*this.Ca,0,new w(0,-e,0)))d=e.d;c.y+=.5*this.Ca;c.y-=d;c=this.Hh(c,this.Ca,0);e=Number.NEGATIVE_INFINITY;for(h=0;h<c.length;h++)g=c[h],g.y>e&&(e=g.y);0<e&&(this.qh=t.j,a=b-2*(this.Ca+this.Fb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}return a};f.Kj=function(){return new w(0,0,0)};f.ll=function(){};
f.input=function(){dk.prototype.input.call(this);this.ll();var a=this.Kj();if(t.b.ea==this){var b=this.transform;a.set(b.u*a.x+b.C*a.z,0,b.B*a.x+b.m22*a.z)}b=a.ta(1);0==b&&(this.Ye=0);if(this.Th())0<b&&(this.I.x+=a.x*this.dh,this.I.z+=a.z*this.dh,this==t.b.ea&&(this.Ye>=2*this.Fi&&(this.Ye=0),0==this.Ye?t.i.W.get("stepConcrete01").play({gain:.5}):this.Ye==this.Fi&&t.i.W.get("stepConcrete02").play({gain:.5})),this.Ye=this.Da&&.5<this.Da.focus?this.Ye+.5:this.Ye+1),this.I.scale(this.Vc/(this.Vc+this.dh));
else{b=.25*this.dh;var c=new E(this.I.z,this.I.x),d=c.length(),e=qc(this.I,a);0>e&&(e=0);e>this.Vc&&(e=this.Vc);b=this.Vc/(this.Vc+b)*(e+b)-e;d>this.Vc&&c.scale(Math.max(0,d-b)/d);c.x+=a.z*b;c.y+=a.x*b;this.I.z=c.x;this.I.x=c.y}this.Pi<t.j||this.qh<t.j-15||(this.I.y=this.Rj,this.Pi=this.qh=Number.NEGATIVE_INFINITY,this.Yh=!0)};var ik=2,jk=4,Nj=8;function kk(a){return a&ik||a&jk?!1:!0}function nf(a){return a&jk?!1:!0}function ig(a){return a&Nj?!0:!1}function lk(){this.index=mk++;this.t=NaN;this.n=this.p=null;this.Wa=!0}var mk=-2147483648;function pf(a,b){return a.t<b.t?-1:a.t>b.t?1:1==a.Wa&&0==b.Wa?-1:0==a.Wa&&1==b.Wa?1:a.index<b.index?-1:a.index>b.index?1:0}
function bk(a,b,c,d){var e=new Rd,h=a.z-b;h<e.J&&(e.J=h);h=a.z+b;h>e.L&&(e.L=h);h=a.z+d.z-b;h<e.J&&(e.J=h);h=a.z+d.z+b;h>e.L&&(e.L=h);h=a.x-b;h<e.v&&(e.v=h);h=a.x+b;h>e.D&&(e.D=h);h=a.x+d.x-b;h<e.v&&(e.v=h);h=a.x+d.x+b;h>e.D&&(e.D=h);b+=c;c=a.y-b;c<e.o&&(e.o=c);c=a.y+b;c>e.F&&(e.F=c);c=a.y+d.y-b;c<e.o&&(e.o=c);c=a.y+d.y+b;c>e.F&&(e.F=c);return e}
function nk(a,b,c,d,e){var h=pc(new w(a.x-c.x,0,a.z-c.z),new w(b.x,0,b.z),d);if(!h)return null;d=new lk;d.t=h.Qa;d.p=new w(a.x+b.x*d.t,a.y+b.y*d.t,a.z+b.z*d.t);d.n=new w(d.p.x-c.x,0,d.p.z-c.z);d.n.ta(1);var g=new lk;g.t=h.Qc;g.p=new w(a.x+b.x*g.t,a.y+b.y*g.t,a.z+b.z*g.t);g.n=new w(g.p.x-c.x,0,g.p.z-c.z);g.n.ta(1);if(0<b.y){h=(c.y-e-a.y)/b.y;var k=(c.y+e-a.y)/b.y;h>d.t&&(d=new lk,d.t=h,d.p=new w(a.x+b.x*d.t,c.y-e,a.z+b.z*d.t),d.n=new w(0,-1,0));k<g.t&&(g=new lk,g.t=k,g.p=new w(a.x+b.x*g.t,c.y+e,a.z+
b.z*g.t),g.n=new w(0,1,0))}else if(0>b.y)h=(c.y+e-a.y)/b.y,k=(c.y-e-a.y)/b.y,h>d.t&&(d=new lk,d.t=h,d.p=new w(a.x+b.x*d.t,c.y+e,a.z+b.z*d.t),d.n=new w(0,1,0)),k<g.t&&(g=new lk,g.t=k,g.p=new w(a.x+b.x*g.t,c.y-e,a.z+b.z*g.t),g.n=new w(0,-1,0));else if(a.y>c.y+e||a.y<c.y-e)return null;if(d.t>g.t)return null;d.Wa=!0;g.Wa=!1;d.da=g;g.da=d;d.ob=b.X();g.ob=b.X().bi();return d}
function ok(a,b,c,d,e){var h=new w(c.x,NaN,c.z),g=new w,k=new w,l=new E(c.z-a.z,c.x-a.x);var m=new E(b.z,b.x);var n=m.ta(1);l=td(l,m);h.y=a.y+b.y/n*l;h.y>c.y+e?(h.y=c.y+e,m=qc((new w(c.x,c.y+e,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):h.y<c.y-e?(h.y=c.y-e,m=qc((new w(c.x,c.y-e,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):g.set(a.x+m.y*l,h.y,a.z+m.x*l);vd(h,g,k);m=k.ta(1);if(m<d){l=n=null;var r=pc(new w(a.x-c.x,0,a.z-c.z),new w(b.x,0,b.z),d);if(r){var q=new lk;q.t=r.Qa;q.p=new w(a.x+
b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t);q.p.y<=c.y+e&&q.p.y>=c.y-e&&(q.n=new w(q.p.x-c.x,0,q.p.z-c.z),q.n.ta(1),q.ob=b.X(),q.Wa=!0,n=q);q=new lk;q.t=r.Qc;q.p=new w(a.x+b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t);q.p.y<=c.y+e&&q.p.y>=c.y-e&&(q.n=new w(q.p.x-c.x,0,q.p.z-c.z),q.n.ta(1),q.ob=b.X().bi(),q.Wa=!1,l=q)}if(!n||!l)if(r=oc(a,b,new w(c.x,c.y+e,c.z),d))n||(q=new lk,q.t=r.Qa,q.p=new w(a.x+b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t),q.p.y>c.y+e&&(q.n=new w(q.p.x-c.x,q.p.y-(c.y+e),q.p.z-c.z),q.n.ta(1),q.ob=b.X(),q.Wa=!0,n=q)),
l||(q=new lk,q.t=r.Qc,q.p=new w(a.x+b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t),q.p.y>c.y+e&&(q.n=new w(q.p.x-c.x,q.p.y-(c.y+e),q.p.z-c.z),q.n.ta(1),q.ob=b.X().bi(),q.Wa=!1,l=q));if(!n||!l)if(r=oc(a,b,new w(c.x,c.y-e,c.z),d))n||(q=new lk,q.t=r.Qa,q.p=new w(a.x+b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t),q.p.y<c.y-e&&(q.n=new w(q.p.x-c.x,q.p.y-(c.y-e),q.p.z-c.z),q.n.ta(1),q.ob=b.X(),q.Wa=!0,n=q)),l||(q=new lk,q.t=r.Qc,q.p=new w(a.x+b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t),q.p.y<c.y-e&&(q.n=new w(q.p.x-c.x,q.p.y-(c.y-e),q.p.z-c.z),
q.n.ta(1),q.ob=b.X().bi(),q.Wa=!1,l=q));if(n&&l)return n.da=l,l.da=n,{We:n,od:l}}return{ci:g,un:h,Ie:k,sj:m,tn:d}}function pk(a,b,c,d){b=oc(d,c,a,b);if(!b)return null;var e=new lk;e.t=-b.Qc;e.p=d;e.n=(new w(a.x-(d.x+c.x*b.Qc),a.y-(d.y+c.y*b.Qc),a.z-(d.z+c.z*b.Qc))).round();e.n.ta(1);e.Wa=!0;return e}
function qk(a,b,c,d,e){var h=qc(c,e);c=new w(c.x-e.x*h,c.y-e.y*h,c.z-e.z*h);d=new w(d.x-a.x,d.y-a.y,d.z-a.z);var g=qc(d,e);d.set(d.x-e.x*g,d.y-e.y*g,d.z-e.z*g);b=pc(d,c,b);if(!b)return null;g=new lk;g.t=-b.Qc;g.p=(new w(a.x+d.x+e.x*h*g.t,a.y+d.y+e.y*h*g.t,a.z+d.z+e.z*h*g.t)).round();g.n=new w(-(d.x+c.x*b.Qc),-(d.y+c.y*b.Qc),-(d.z+c.z*b.Qc));g.n.ta(1);g.Wa=!0;return g}
function gk(a,b,c,d,e,h,g,k){if(0==c&&0==g)return c=vd(a,e,new w(0,0,0)),g=vd(d,k,new w(0,0,0)),0==g.length()?h=null:(c=pc(c,g,b+h))?(a=new w(a.x+d.x*c.Qa,a.y+d.y*c.Qa,a.z+d.z*c.Qa),e=new w(e.x+k.x*c.Qa,e.y+k.y*c.Qa,e.z+k.z*c.Qa),k=new lk,k.t=c.Qa,b=h/(h+b),d=1-b,k.p=(new w(e.x*d+a.x*b,e.y*d+a.y*b,e.z*d+a.z*b)).round(),k.n=new w((k.p.x-e.x)/h,(k.p.y-e.y)/h,(k.p.z-e.z)/h),h=k):h=null,h;var l=new w(a.x-e.x,0,a.z-e.z),m=new w(d.x-k.x,0,d.z-k.z);if(0==m.length())return null;l=pc(l,m,b+h);if(!l)return null;
var n=new w(a.x+d.x*l.Qa,a.y+d.y*l.Qa,a.z+d.z*l.Qa);m=new w(e.x+k.x*l.Qa,e.y+k.y*l.Qa,e.z+k.z*l.Qa);var r=h/(h+b),q=1-r;n=new w(m.x*q+n.x*r,m.y*q+n.y*r,m.z*q+n.z*r);n.round();if(n.y>m.y+g){l=new w(a.x-e.x,a.y-c-(e.y+g),a.z-e.z);m=vd(d,k,new w(0,0,0));l=pc(l,m,b+h);if(!l)return null;n=new w(a.x+d.x*l.Qa,a.y-c+d.y*l.Qa,a.z+d.z*l.Qa);m=new w(e.x+k.x*l.Qa,e.y+g+k.y*l.Qa,e.z+k.z*l.Qa);e=new lk;e.t=l.Qa;r=h/(h+b);q=1-r;e.p=(new w(m.x*q+n.x*r,(m.y+g)*q+(n.y-c)*r,m.z*q+n.z*r)).round();e.n=new w((e.p.x-m.x)/
h,(e.p.y-(m.y+g))/h,(e.p.z-m.z)/h)}else if(n.y<m.y-g){l=new w(a.x-e.x,a.y+c-(e.y-g),a.z-e.z);m=vd(d,k,new w(0,0,0));l=pc(l,m,b+h);if(!l)return null;n=new w(a.x+d.x*l.Qa,a.y+c+d.y*l.Qa,a.z+d.z*l.Qa);m=new w(e.x+k.x*l.Qa,e.y-g+k.y*l.Qa,e.z+k.z*l.Qa);e=new lk;e.t=l.Qa;r=h/(h+b);q=1-r;e.p=(new w(m.x*q+n.x*r,(m.y-g)*q+(n.y+c)*r,m.z*q+n.z*r)).round();e.n=new w((e.p.x-m.x)/h,(e.p.y-(m.y-g))/h,(e.p.z-m.z)/h)}else e=new lk,e.t=l.Qa,e.p=n,e.n=new w((e.p.x-m.x)/h,0,(e.p.z-m.z)/h);return e}
Mg.prototype.eg=function(a,b,c,d){c=this.y+c;if(0<=d.y)var e=null;else{var h=new lk;h.t=-(a.y-c-b)/d.y;h.p=(new w(a.x+d.x*h.t,a.y-b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new w(0,1,0);e=h}if(!e)return null;if(0==Jc(e.p.z,e.p.x,this.ha).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ha.length;l++){var m=this.ha[l];e=new w(m.l,c,m.m);var n=new w(m.H-m.l,0,m.K-m.m);n.scale(1/m.length);(e=qk(a,b,d,e,n))?(n=m.getParameter(e.p.z,e.p.x),!(0>n||n>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.ha.length-1)+1:h|3<<l-1}for(l=0;l<this.ha.length;l++)h&1<<l||(m=this.ha[l],(e=pk(a,b,d,new w(m.H,c,m.K)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
Og.prototype.eg=function(a,b,c,d){c=this.y-c;if(0>=d.y)var e=null;else{var h=new lk;h.t=-(c-a.y-b)/-d.y;h.p=(new w(a.x+d.x*h.t,a.y+b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new w(0,-1,0);e=h}if(!e)return null;if(0==Jc(e.p.z,e.p.x,this.ha).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ha.length;l++){var m=this.ha[l];e=new w(m.l,c,m.m);var n=new w(m.H-m.l,0,m.K-m.m);n.scale(1/m.length);(e=qk(a,b,d,e,n))?(n=m.getParameter(e.p.z,e.p.x),!(0>n||n>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.ha.length-1)+1:h|3<<l-1}for(l=0;l<this.ha.length;l++)h&1<<l||(m=this.ha[l],(e=pk(a,b,d,new w(m.H,c,m.K)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
Lg.prototype.eg=function(a,b,c,d){var e=this.Y,h=this.o-c;c=this.F+c;if(0<=Ic(e,e.m+d.z,e.l+d.x))var g=null;else{var k=new w(e.K-e.m,0,e.l-e.H);k.scale(1/e.length);var l=qc(d,k),m=new lk;m.t=-(Ic(e,a.z,a.x)-b)/l;m.p=(new w(a.x-k.x*b+d.x*m.t,a.y-k.y*b+d.y*m.t,a.z-k.z*b+d.z*m.t)).round();m.n=k;g=m}if(!g)return null;k=0;var n=e.getParameter(g.p.z,g.p.x);0>n&&(k|=1);g.p.y>c&&(k|=2);n>e.length&&(k|=4);g.p.y<h&&(k|=8);if(0==k)return g.item=this,g;if(0==b)return null;k=0;l=null;m=Number.POSITIVE_INFINITY;
g=new w(e.l,h,e.m);n=new w(0,1,0);g=qk(a,b,d,g,n);g?!(g.p.y<h||g.p.y>c)&&g.t<m&&(m=g.t,l=g):k|=9;g=new w(e.l,c,e.m);n=new w(e.H-e.l,0,e.K-e.m);n.scale(1/e.length);(g=qk(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<m&&(m=g.t,l=g)):k|=3;g=new w(e.H,c,e.K);n=new w(0,-1,0);g=qk(a,b,d,g,n);g?!(g.p.y>c||g.p.y<h)&&g.t<m&&(m=g.t,l=g):k|=6;g=new w(e.H,h,e.K);n=new w(e.l-e.H,0,e.m-e.K);n.scale(1/e.length);(g=qk(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<m&&(m=g.t,
l=g)):k|=18;0==(k&1)&&(g=new w(e.l,c,e.m),(g=pk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&2)&&(g=new w(e.H,c,e.K),(g=pk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&4)&&(g=new w(e.H,h,e.K),(g=pk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&8)&&(g=new w(e.l,h,e.m),(g=pk(a,b,d,g))&&g.t<m&&(l=g));return l?(l.item=this,l):null};
Mg.prototype.Ng=function(a,b,c,d){c=this.y+c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ha.length;k++){e=this.ha[k];var l=Ic(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new w(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new w(e.l,c,e.m):h>e.length?e=new w(e.H,c,e.K):(h/=e.length,g=1-h,e=new w(e.l*g+e.H*h,c,e.m*g+e.K*h),e.round()));c=new w(a.x-e.x,a.y-e.y,a.z-e.z);c.ta(1);c.d=qc(e,c)+b;a=qc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Og.prototype.Ng=function(a,b,c,d){c=this.y-c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ha.length;k++){e=this.ha[k];var l=Ic(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new w(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new w(e.l,c,e.m):h>e.length?e=new w(e.H,c,e.K):(h/=e.length,g=1-h,e=new w(e.l*g+e.H*h,c,e.m*g+e.K*h),e.round()));c=new w(a.x-e.x,a.y-e.y,a.z-e.z);c.ta(1);c.d=qc(e,c)+b;a=qc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Lg.prototype.Ng=function(a,b,c,d){var e=this.o-c,h=this.F+c;c=null;var g=this.Y;var k=g.getParameter(a.z,a.x);if(0>k)k=new w(g.l,a.y,g.m),k.y>h?k.y=h:k.y<e&&(k.y=e);else if(k>g.length)k=new w(g.H,a.y,g.K),k.y>h?k.y=h:k.y<e&&(k.y=e);else{k/=g.length;var l=1-k;k=new w(g.l*l+g.H*k,a.y,g.m*l+g.K*k);k.y>h?k.y=h:k.y<e?k.y=e:(c=new w(g.K-g.m,0,g.l-g.H),c.scale(1/g.length));k.round()}null==c&&(c=new w(a.x-k.x,a.y-k.y,a.z-k.z),c.ta(1));c.d=qc(k,c)+b;a=qc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Mg.prototype.wk=function(a,b){var c=$a(.5*Yj.y,b.y,a.y-this.y);if(!c)return null;var d=new lk;d.t=c.Qc;if(0>d.t)return null;d.p=(new w(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=p(this.ha);for(b=a.next();!b.done;b=a.next())if(0>Ic(b.value,d.p.z,d.p.x))return null;d.item=this;d.n=new w(0,1,0);return d};
Og.prototype.wk=function(a,b){if(a.y>=this.y)return null;var c=$a(.5*Yj.y,b.y,a.y-this.y);if(!c)return null;var d=new lk;d.t=c.Qa;if(0>d.t)return null;d.p=(new w(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=p(this.ha);for(b=a.next();!b.done;b=a.next())if(0>Ic(b.value,d.p.z,d.p.x))return null;d.item=this;d.n=new w(0,-1,0);return d};
Lg.prototype.wk=function(a,b){var c=Ic(this.Y,a.z,a.x);if(0>c)return null;var d=Wc(this.Y,1),e=d.x*b.z+d.y*b.x;if(0<=e)return null;var h=new lk;h.t=-c/e;if(0>h.t)return null;h.p=(new w(a.x+b.x*h.t,a.y+.5*(2*b.y+Yj.y*h.t)*h.t,a.z+b.z*h.t)).round();if(h.p.y>=this.F||h.p.y<this.o)return null;a=this.Y.getParameter(h.p.z,h.p.x);if(0>a||a>=this.Y.length)return null;h.item=this;h.n=new w(d.y,0,d.x);return h};
Mg.prototype.Gj=function(a){for(var b=p(this.ha),c=b.next();!c.done;c=b.next())c=c.value,a.Ma(c.H,this.y,c.K)};Og.prototype.Gj=function(a){for(var b=p(this.ha),c=b.next();!c.done;c=b.next())c=c.value,a.Ma(c.H,this.y,c.K)};Lg.prototype.Gj=function(a){a.Ma(this.Y.l,this.o,this.Y.m);a.Ma(this.Y.H,this.F,this.Y.K)};
function rk(){if(this.wa){for(var a=new Rd,b=p(this.wa),c=b.next();!c.done;c=b.next())c.value.Gj(a);this.Ai=sf(a.J,a.v,a.L,a.D);a=p(this.Ai);for(b=a.next();!b.done;b=a.next())b=b.value,b.Ed.push.apply(b.Ed,ba(this.wa))}}function sk(){if(this.Ai){for(var a=p(this.Ai),b=a.next();!b.done;b=a.next())b=b.value,b.Ed.splice(b.Ed.indexOf(this.wa[0]),this.wa.length);delete this.Ai}};function tk(){this.height=this.width=2;this.depth=this.color=null}
tk.prototype.create=function(){this.object=u.createFramebuffer();u.bindFramebuffer(u.FRAMEBUFFER,this.object);var a=this.color=new t.Ge;a.width=this.width;a.height=this.height;a.Ni=u.RGBA8;a.format=u.RGBA;a.type=u.UNSIGNED_BYTE;a.Mf=u.NEAREST;a.Zg=u.NEAREST;a.create();u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,a.object,0);a=this.depth=u.createRenderbuffer();u.bindRenderbuffer(u.RENDERBUFFER,a);u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH24_STENCIL8,this.width,this.height);
u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,a)};function uk(a){fg.call(this,a);this.La=new H;this.pitch=this.heading=0;this.Kh=112;this.Ud=jc(40);this.jn=!1;this.gj=8E3}uk.prototype=Object.create(fg.prototype);uk.prototype.constructor=uk;uk.prototype.create=function(){var a=this.Lk=new fg;a.La=this.O;K(a,this);a=this.Mk=new fg;a.La=this.O;K(a,this);return this};
uk.prototype.step=function(){this.Kh+=N.a;0>this.Kh&&(this.Kh=0);this.transform.m32=Math.pow(1.125,this.Kh);N.d[2]&&(this.heading-=4E6*N.Lc.x,this.pitch+=4E6*N.Lc.y);var a=lc(this.heading),b=lc(this.pitch);Bd(this.La);this.La.rotate(a,b,0);a=this.La.$e();var c=this.La.af();b=this.La.Fd();if(N.d[1]){var d=2*Math.tan(this.Ud)*this.transform.m32/t.canvas.height,e=-N.Lc.x*d;d*=N.Lc.y;this.La.s+=e*a.x+d*c.x;this.La.m31+=e*a.y+d*c.y;this.La.m32+=e*a.z+d*c.z}c=new w(0,0,0);ke.d.KeyW&&--c.z;ke.d.KeyS&&(c.z+=
1);ke.d.KeyA&&--c.x;ke.d.KeyD&&(c.x+=1);if(e=c.length())c.scale(this.transform.m32/(60*e)),this.La.s+=c.x*a.x+c.z*b.x,this.La.m31+=c.x*a.y+c.z*b.y,this.La.m32+=c.x*a.z+c.z*b.z;a=this.Lk;Bd(a.transform);a.transform.s=-this.gj;a.transform.rotate(Math.atan(.5*-this.gj/this.transform.m32),0,0);a.Ud=this.Ud;a=this.Mk;Bd(a.transform);a.transform.s=this.gj;a.transform.rotate(Math.atan(.5*this.gj/this.transform.m32),0,0);a.Ud=this.Ud;fg.prototype.step.call(this);return this};t.Animation=function(){t.Node.call(this);this.length=0;this.jc=NaN;this.Gh={}};t.Animation.prototype=Object.create(Node.prototype);f=t.Animation.prototype;f.constructor=t.Animation;f.step=function(){Node.prototype.step.call(this)};f.play=function(){this.jc=t.j};f.key=function(a,b,c){var d=this.Gh[a];d||(d=this.Gh[a]=new vk);return d.key(b,c)};f.print=function(){console.log("{");console.log("let a = new NG.Animation();");for(var a in this.Gh)this.Gh.hasOwnProperty(a)&&this.Gh[a].print(a);console.log("}")};
t.Animation.S=function(a,b){b.reset();b.translate(a[0],a[1],a[2]);b.rotate(a[3],a[4],a[5]);return b};function vk(){this.keys=new bb(wk)}vk.prototype.key=function(a,b){var c=this.keys.get(a);c||(c=new xk,c.t=a,this.keys.add(c));c.ob=b;return c};vk.prototype.print=function(a){for(var b=0;b<this.keys.elements.length;b++){var c=this.keys.elements[b];console.log("a.key('"+a+"', "+c.t+", "+c.ob+");")}};function xk(){this.ob=this.t=0}
function wk(a,b){return isNaN(a)?a.t<b.t?-1:a.t>b.t?1:0:a<b.t?-1:a>b.t?1:0};function Qi(a,b,c,d,e,h){t.Node.call(this);this.h=new w(a.l,b+112500,a.m);this.Dd=-Infinity;this.vh=NaN;this.open=this.state=0;e.oa!=h.oa&&(this.bh=Math.max(e.oa,h.oa));K(this,t.Bg);var g=new ng(t.i.Dc.get("bayDoor01"));g.transform.s=this.h.x;g.transform.m31=this.h.y;g.transform.m32=this.h.z;g.transform.u=-a.ga;g.transform.B=a.ba;g.transform.C=-a.ba;g.transform.m22=-a.ga;K(g,t.Bg);g.create();Wd(g,e.ja);var k=p(g.Oc);for(b=k.next();!b.done;b=k.next())b=b.value,b.xi=!0,b.G=t.i.va.get("physical"),b.ia=
t.i.P.get("BayDoor01"),b.aa=ph,b.Ga=["portalLightIndex",e.hf,!0,"numPortals",e.Hb.length,!0,"color",hd,!1];this.ai=g;this.Gc=c;this.ae=e;e.qg||(e.qg=[]);e.qg.push(g);c=new ng(t.i.Dc.get("bayDoor01"));c.transform.s=this.h.x;c.transform.m31=this.h.y;c.transform.m32=this.h.z;c.transform.u=a.ga;c.transform.B=-a.ba;c.transform.C=a.ba;c.transform.m22=a.ga;K(c,t.Bg);c.create();Wd(c,h.ja);e=p(c.Oc);for(b=e.next();!b.done;b=e.next())b=b.value,b.xi=!0,b.G=t.i.va.get("physical"),b.ia=t.i.P.get("BayDoor01"),
b.aa=ph,b.Ga=["portalLightIndex",h.hf,!0,"numPortals",h.Hb.length,!0,"color",hd,!1];this.$h=c;this.Wc=d;this.$d=h;h.qg||(h.qg=[]);h.qg.push(c);this.wa=[];h=[new E(-6250,-112500),new E(6250,-112500),new E(6250,112500),new E(-6250,112500)];for(d=0;d<h.length;d++)h[d]=a.tb(h[d].x,h[d].y);a=[];d=h[h.length-1];h=p(h);for(c=h.next();!c.done;c=h.next())c=c.value,a.push(new Ec(d.x,d.y,c.x,c.y)),d=c;this.wa.push(new Og(a,this.h.y-112500));this.wa.push(new Lg(Yc(a[0]),this.h.y-112500,this.h.y+112500),new Lg(Yc(a[2]),
this.h.y-112500,this.h.y+112500));a=p(this.wa);for(d=a.next();!d.done;d=a.next())d=d.value,d.item=this,d.Qh();rk.call(this);this.update()}Qi.prototype=Object.create(t.Node.prototype);f=Qi.prototype;f.constructor=Qi;
f.step=function(){if(!(t.j%4)){var a=Infinity,b=0;this.ae.oa<=Zh&&this.ae.oa>=$h&&b++;this.$d.oa<=Zh&&this.$d.oa>=$h&&b++;b||this.remove();for(var c=p(t.b.nc),d=c.next();!d.done;d=c.next())d=d.value,d.fb&&(d=Math.abs(d.h.x-this.h.x)+Math.abs(d.h.y-this.h.y)+Math.abs(d.h.z-this.h.z),d<a&&(a=d));c=NaN;t.b.ea&&(c=t.b.ea,d=c=Math.abs(c.h.x-this.h.x)+Math.abs(c.h.y-this.h.y)+Math.abs(c.h.z-this.h.z),d<a&&(a=d));if(0==this.state&&0==this.open)5E5>a&&(isNaN(this.bh)?(this.state=1,this.Dd=4*Math.floor(t.j/
4),this.vh=NaN):t.b.xd||(2==b?(this.state=1,this.Dd=4*Math.floor(t.j/4),this.vh=NaN):5E5>c&&t.b.ea&&t.b.ea.Pa.oa<this.bh&&(eh=t.j)));else if(1==this.state&&1==this.open)if(isNaN(this.bh))1E6<=a&&(isNaN(this.vh)&&(this.vh=t.j),0<=t.j-this.vh&&(this.state=0,this.Dd=t.j));else if(1E6<=a||t.b.ea&&t.b.ea.Pa.oa==this.bh)this.state=0,this.Dd=t.j;a=(t.j-this.Dd)/36;if(!(1<a)){0==this.state?(this.open=1-Math.pow(a,2),1==a&&t.b.ea&&t.b.ea.Pa.oa==this.bh&&($h=this.bh,fh=t.j,eh=NaN)):1==this.state&&(this.open=
Math.pow(a,2));a=p(this.wa);for(b=a.next();!b.done;b=a.next())b.value.Dd=t.j;this.update()}}};
f.update=function(){var a=this.Gc.o+(this.Gc.height-12500)*this.open;this.Gc.F=this.Wc.F=this.wa[0].y=this.wa[1].o=this.wa[2].o=a;this.wa[0].da.y=this.wa[1].da.o=this.wa[2].da.o=a;this.ai.transform.m31=this.$h.transform.m31=a+112500;this.ai.Oc[0].Ga[1]=this.ae.hf;this.$h.Oc[0].Ga[1]=this.$d.hf;this.ai.Oc[0].Ga[4]=this.ae.Hb.length;this.$h.Oc[0].Ga[4]=this.$d.Hb.length;this.ai.Oc[0].Ga[7]=this.ae.style.dd;this.$h.Oc[0].Ga[7]=this.$d.style.dd};f.ab=function(){t.G.M("clipY",this.h.y+225E3,!1)};
f.remove=function(){this.ai.remove();this.$h.remove();sk.call(this);for(var a=p(this.wa),b=a.next();!b.done;b=a.next())b.value.Dd=t.j;t.Node.prototype.remove.call(this)};
function Pi(a,b,c,d){t.Ha.call(this);this.h=new w(a.l,b+62500,a.m);this.transform.s=this.h.x;this.transform.m31=this.h.y;this.transform.m32=this.h.z;this.transform.u=-a.ga;this.transform.B=a.ba;this.transform.C=-a.ba;this.transform.m22=-a.ga;this.transform.u*=87500;this.transform.A*=87500;this.transform.B*=87500;this.transform.w*=62500;this.transform.m11*=62500;this.transform.m12*=62500;K(this,t.Rf);this.ae=c;this.$d=d;this.wa=[];b=[new E(-625,-87500),new E(625,-87500),new E(625,87500),new E(-625,
87500)];for(c=0;c<b.length;c++)b[c]=a.tb(b[c].x,b[c].y);c=[];d=b[b.length-1];var e=p(b);for(b=e.next();!b.done;b=e.next())b=b.value,c.push(new Ec(d.x,d.y,b.x,b.y)),d=b;this.wa.push(new Lg(Yc(c[0]),this.h.y-112500,this.h.y+112500),new Lg(Yc(c[2]),this.h.y-112500,this.h.y+112500));for(b=0;2>b;b++)c=this.wa[b],c.item=this,c.flags|=ik,c.Qh();this.wa[0].ca=this.ae.index;this.wa[1].ca=this.$d.index;b=[new E(-9375,-87500),new E(9375,-87500),new E(9375,87500),new E(-9375,87500)];for(c=0;c<b.length;c++)b[c]=
a.tb(b[c].x,b[c].y);a=[];c=b[b.length-1];d=p(b);for(b=d.next();!b.done;b=d.next())b=b.value,a.push(new Ec(c.x,c.y,b.x,b.y)),c=b;this.wa.push(new Lg(Yc(a[0]),this.h.y-112500,this.h.y+112500),new Lg(Yc(a[2]),this.h.y-112500,this.h.y+112500));for(a=2;4>a;a++)this.wa[a].flags|=jk;rk.call(this)}Pi.prototype=Object.create(t.Ha.prototype);Pi.prototype.constructor=Pi;Pi.S=function(a,b){return a.depth-b.depth};Pi.prototype.update=function(){};
Pi.prototype.ji=function(){return!this.Ra||this.ae.ja.pa<t.j&&this.$d.ja.pa<t.j?!1:!0};Pi.Xc=function(){t.Cb(wg);t.eb(t.i.va.get("physical"));t.Ib(0,t.i.P.get("Window01"));qh.bind();t.sb(1);t.Xb(1);t.G.M("color",hd);t.G.M("architectureLighting",1,!0);t.G.M("lightingFancy",t.Ba.lightingFancy,!0)};
Pi.prototype.ab=function(){t.G.M("modelMatrix",this.O);t.G.M("portalLightIndex",this.ae.hf,!0);t.G.M("numPortals",this.ae.Hb.length,!0);t.G.M("ambientLight",this.ae.ja.lb,!1);u.drawArrays(u.TRIANGLE_FAN,xg(0,1),4);var a=(new H).set(this.O);a.u=-a.u;a.A=-a.A;a.B=-a.B;a.C=-a.C;a.m21=-a.m21;a.m22=-a.m22;t.G.M("modelMatrix",a);t.G.M("portalLightIndex",this.$d.hf,!0);t.G.M("numPortals",this.$d.Hb.length,!0);t.G.M("ambientLight",this.$d.ja.lb,!1);u.drawArrays(u.TRIANGLE_FAN,xg(0,1),4)};
Pi.prototype.remove=function(){sk.call(this);for(var a=p(this.wa),b=a.next();!b.done;b=a.next())b.value.Dd=t.j;t.Ha.prototype.remove.call(this)};
function yk(a,b,c){t.Sa.call(this,"crate");this.qb=120;this.h.x=a;this.h.y=b+5E4;this.h.z=c;Pd(this.transform,this.h);a=[new w(-5E4,0,-5E4),new w(-5E4,0,5E4),new w(5E4,0,5E4),new w(5E4,0,-5E4)];b=p(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.tb(c,c),c.round();a=[new Ec(a[0].z,a[0].x,a[1].z,a[1].x),new Ec(a[1].z,a[1].x,a[2].z,a[2].x),new Ec(a[2].z,a[2].x,a[3].z,a[3].x),new Ec(a[3].z,a[3].x,a[0].z,a[0].x)];this.wa=[];this.wa.push(new Mg(a,this.h.y+5E4),new Og(a,this.h.y-5E4));a=ed(a);
this.wa.push(new Lg(a[0],this.h.y-5E4,this.h.y+5E4),new Lg(a[1],this.h.y-5E4,this.h.y+5E4),new Lg(a[2],this.h.y-5E4,this.h.y+5E4),new Lg(a[3],this.h.y-5E4,this.h.y+5E4));a=p(this.wa);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;rk.call(this)}yk.prototype=Object.create(t.Sa.prototype);f=yk.prototype;f.constructor=yk;
f.create=function(){var a=this.Xa=new ng(t.i.Dc.get("lootBox"));a.La=this.O;K(a,this);a.create();this.Rb=a.src.Rb;Wd(a,this.ja);Xd(a,6E4);t.b.Pg.push(this);zk.push(this);a=p(this.Vj);for(var b=a.next();!b.done;b=a.next())b=b.value,b.Kb?t.b.Lb[b.Kb.pc]+=b.la:t.b.Lb.food+=b.la;t.Sa.prototype.create.call(this)};
f.step=function(){if(t.b.ea){var a=vd(t.b.ea.h,this.h,new w(0,0,0));a.y=0;a.ta(1);this.transform.u=a.z;this.transform.B=-a.x;this.transform.C=a.x;this.transform.m22=a.z;this.transform.rotate(jc(-15),0,0)}10==t.j-this.ig&&this.Bh();t.j==this.mf+4?(this.Xa.G=t.i.va.get("flash"),this.Xa.aa=t.i.Pb.get("flashWhite")):t.j==this.mf+6?this.Xa.aa=t.i.Pb.get("flashRed"):t.j==this.mf+8&&(delete this.Xa.aa,delete this.Xa.G);t.Sa.prototype.step.call(this)};
f.hg=function(a){isNaN(this.ig)&&(this.mf=t.j,this.qb-=a,0>=this.qb&&(this.ig=t.j))};f.Bh=function(){for(var a=p(this.Vj),b=a.next();!b.done;b=a.next())b=b.value,b=new W(b),b.h.set(this.h.x,this.h.y,this.h.z),b.h.z+=5E4*(pb(ob)-.5),b.h.x+=5E4*(pb(ob)-.5),b.I.set(6E3*(pb(ob)-.5),9E3*(pb(ob)+1),6E3*(pb(ob)-.5)),K(b,t.cj),b.create();t.i.W.get("hit02").play({gain:1});this.remove()};
f.remove=function(){t.Sa.prototype.remove.call(this);this.Xa.remove();t.b.Pg.splice(t.b.Pg.indexOf(this),1);Ak.call(this);if(isNaN(this.ig))for(var a=p(this.Vj),b=a.next();!b.done;b=a.next())b=b.value,b.Kb?t.b.Lb[b.Kb.pc]-=b.la:t.b.Lb.food-=b.la;this.Ld.Yg=null;this.Ld.Rg=t.j;this.Ld=null;sk.call(this);a=p(this.wa);for(b=a.next();!b.done;b=a.next())b.value.Dd=t.j};
function Bk(a,b,c){t.Sa.call(this,"barrel");this.qb=120;this.Tb=5E5;this.h.x=a;this.h.y=b+65E3;this.h.z=c;Pd(this.transform,this.h);a=[new w(-5E4,0,-5E4),new w(-5E4,0,5E4),new w(5E4,0,5E4),new w(5E4,0,-5E4)];b=p(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.tb(c,c),c.round();a=[new Ec(a[0].z,a[0].x,a[1].z,a[1].x),new Ec(a[1].z,a[1].x,a[2].z,a[2].x),new Ec(a[2].z,a[2].x,a[3].z,a[3].x),new Ec(a[3].z,a[3].x,a[0].z,a[0].x)];this.wa=[];this.wa.push(new Mg(a,this.h.y+5E4),new Og(a,this.h.y-
5E4));a=ed(a);this.wa.push(new Lg(a[0],this.h.y-5E4,this.h.y+5E4),new Lg(a[1],this.h.y-5E4,this.h.y+5E4),new Lg(a[2],this.h.y-5E4,this.h.y+5E4),new Lg(a[3],this.h.y-5E4,this.h.y+5E4));a=p(this.wa);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;rk.call(this)}Bk.prototype=Object.create(t.Sa.prototype);f=Bk.prototype;f.constructor=Bk;
f.create=function(){var a=this.Xa=new ng(t.i.Dc.get("nitroBarrel"));a.La=this.O;K(a,this);a.create();this.Rb=a.src.Rb;Wd(a,this.ja);Xd(a,6E4);t.b.Mg.push(this);zk.push(this);t.Sa.prototype.create.call(this)};
f.step=function(){if(isNaN(this.ig)){if(t.b.ea){var a=vd(t.b.ea.h,this.h,new w(0,0,0));a.y=0;a.ta(1);this.transform.u=a.z;this.transform.B=-a.x;this.transform.C=a.x;this.transform.m22=a.z;this.transform.rotate(jc(15),0,0)}a=1+.25*Math.sin(t.j*Math.PI/3)*(1-this.qb/120);this.qb=Math.min(this.qb+2,120);Bd(this.Xa.transform);this.Xa.transform.scale(a,a,a);t.j==this.mf+4?(this.Xa.G=t.i.va.get("flash"),this.Xa.aa=t.i.Pb.get("flashWhite")):t.j==this.mf+6?this.Xa.aa=t.i.Pb.get("flashRed"):t.j==this.mf+8&&
(delete this.Xa.aa,delete this.Xa.G);t.Sa.prototype.step.call(this)}else{a=t.j-this.ig;var b=1+1/12*a;Bd(this.Xa.transform);this.Xa.transform.scale(b,b,b);6==a&&this.Bh()}};f.hg=function(a){isNaN(this.ig)&&(this.mf=t.j,this.qb-=a,0>=this.qb&&(this.ig=t.j))};
f.Bh=function(){function a(e){var h=vd(e.h,b.h,new w),g=h.uc();mf(b.h,h,ig)||(h=b.Tb*b.Tb/g*360,1<=h&&e.hg(h))}var b=this;t.i.W.get("explode01").play({gain:1});if(t.b.ea){var c=t.b.ea,d=vd(c.h,this.h,new w);d=this.Tb*this.Tb/d.uc();d=Math.min(5,d);c.Ea+=jc(5)*d}d=p(t.b.Mg);for(c=d.next();!c.done;c=d.next())a(c.value);d=p(t.b.Pg);for(c=d.next();!c.done;c=d.next())a(c.value);d=p(t.b.nc);for(c=d.next();!c.done;c=d.next())a(c.value);this.Pa&&(c=new Ck(1E5,this.Pa),c.transform.s=this.h.x,c.transform.m31=
this.h.y,c.transform.m32=this.h.z,K(c,t.be),c.create());this.remove()};f.remove=function(){t.Sa.prototype.remove.call(this);this.Xa.remove();t.b.Mg.splice(t.b.Mg.indexOf(this),1);Ak.call(this);sk.call(this);for(var a=p(this.wa),b=a.next();!b.done;b=a.next())b.value.Dd=t.j};function Dk(a){t.Node.call(this,"GunManager "+a.name);this.ka=a;this.jb=[];this.je=0;this.N=null;this.action="ready";this.V=NaN;this.focus=0;this.fc=!1;this.Xd=this.nd=null;this.Wb=this.Gd=this.fe=this.He=0;this.Va=null;this.Ve=this.Ue=0;this.pf=[];this.nf=0}Dk.prototype=Object.create(t.Node.prototype);f=Dk.prototype;f.constructor=Dk;
f.create=function(){var a=this.eh=new t.Ha("muzzleFlare");tg.call(a);a.ab=vg;a.G=t.i.va.get("image");a.ia=t.i.P.get("muzzleFlare01");a.aa=new $d;a.aa.Ia=1;a.color=new F(255,255,255,0);a.mb=12500;a.Ra=0;a.La=this.ka.ce.O;K(a,t.ye)};
f.step=function(){t.j==this.ym+1&&(this.Tg.Ab.x-=this.il,this.Tg.Ab.y-=this.il,this.Tg.Ab.z-=this.il,this.ym=NaN,this.Tg=null);if(this.N){var a=this.ka;a.wh=null;Ek(a.Rc.O);var b=a.Da.N.fi(a.Rc.O);b&&(a.wh=b)}--this.nf;0>this.nf&&(this.nf=0);if((ke.p[t.xa.NextGunKey]||N.p[t.xa.NextGunMouseButton])&&this.jb.length){a=this.jb.length-1;for(b=0;b<this.jb.length;b++)if(this.jb[b]==this.N){a=b;break}for(b=0;b<this.jb.length;b++){a++;a%=this.jb.length;var c=this.jb[a];if(c&&c!=this.N&&!(c instanceof Fk)){this.nd=
c;break}}}if((ke.p[t.xa.PrevGunKey]||N.p[t.xa.PrevGunMouseButton])&&this.jb.length){a=this.jb.length-1;for(b=0;b<this.jb.length;b++)if(this.jb[b]==this.N){a=b;break}for(b=0;b<this.jb.length;b++)if(a--,0>a&&(a=this.jb.length-1),(c=this.jb[a])&&c!=this.N&&!(c instanceof Fk)){this.nd=c;break}}a=p(this.jb);b=a.next();a:for(;!b.done;b=a.next())if((b=b.value)&&(!(b instanceof Fk)||b.$a))if(c=b.constructor.pc+"MouseButton",b==this.N){if(N.p[t.xa[c]]&&(this.Gd=1),N.r[t.xa[c]]&&(this.Gd=0),this.Xd&&ke.p[t.xa[b.constructor.pc+
"Key"]]){this.Xd=this.nd=null;this.Gd=0;break a}}else{if(N.p[t.xa[c]]){this.nd=b;this.Xd=c;this.Gd=1;break a}if(ke.p[t.xa[b.constructor.pc+"Key"]]){this.nd=b;this.Xd=null;this.Gd=0;break a}}N.r[t.xa[this.Xd]]&&(this.Gd=0);if(ke.p[t.xa.GunFireKey]||N.p[t.xa.GunFireMouseButton])this.fe=1;if(ke.r[t.xa.GunFireKey]||N.r[t.xa.GunFireMouseButton])this.fe=0;if(ke.p[t.xa.GunActionKey]||N.p[t.xa.GunActionMouseButton])this.He=1;if(ke.r[t.xa.GunActionKey]||N.r[t.xa.GunActionMouseButton])this.He=0;if(this.N&&
this.N instanceof Gk){if(ke.p[t.xa.ReloadKey]||N.p[t.xa.ReloadMouseButton])this.Wb=1;if(ke.r[t.xa.ReloadKey]||N.r[t.xa.ReloadMouseButton])this.Wb=0}else if(ke.p[t.xa.ReloadKey]||N.p[t.xa.ReloadMouseButton])this.Wb=1;this.He||(this.focus-=1/6,0>this.focus&&(this.focus=0));this.N?this.N[this.action].call(this):Hk(this)};
f.ab=function(){if(this.Va){u.enable(u.SCISSOR_TEST);t.xc.kd.M("viewMatrix",Qd);t.xc.kd.upload();t.ec(0);t.Xb(0);t.sb(2);t.Cb(wg);t.eb(t.i.va.get("physicalCardThreshold"));t.G.M("color",hd);t.G.M("ambientLight",this.ka.ja.lb,!1);var a=this.N.constructor.ri;t.Ib(0,a);var b=Math.round(a.width/2-this.Va.x+this.Va.f+this.Ue),c=Math.round(a.height/2-this.Va.y+this.Va.g+this.Ve);u.scissor(this.Va.f+Math.round(this.Ue),-this.Va.g-Math.round(this.Ve)+t.canvas.height-this.Va.c,this.Va.a,this.Va.c);var d=new H;
d.u=a.width/t.canvas.width;d.m11=-a.height/t.canvas.height;d.s=-1+2*b/t.canvas.width;d.m31=1-2*c/t.canvas.height;t.G.M("modelMatrix",d);u.drawArrays(u.TRIANGLE_FAN,0,4);u.disable(u.SCISSOR_TEST)}};function Hk(a){if(!a.nd)return!1;a.Va=null;a.focus=0;a.Wb=0;a.nf=0;a.fc=!1;a.Il=a.N;a.N=a.nd;t.b.uf();a.action="equip";a.V=t.j+1;a.nd=null;return!0}f.cc=function(){var a=400*this.ka.ef;a*=1-2/3*this.focus;this.Ue=this.ka.Ki*a;this.Ve=this.ka.cc*a};
Dk.Ob=function(a,b,c,d,e,h){var g=new H;b*=1E5;c*=1E5;a*=1E5;g.rotate(jc(h),jc(e),jc(d));g.scale(1,1,1);g.translate(b,c,a);d=g;e=new H;e.u=d.m22;e.A=d.C;e.B=d.m21;e.w=d.B;e.m11=d.u;e.m12=d.A;e.C=d.m12;e.m21=d.w;e.m22=d.m11;e.s=d.m32;e.m31=d.s;e.m32=d.m31;d=e;e=new H;e.u=d.u;e.A=d.A;e.B=d.B;e.w=d.C;e.m11=d.m21;e.m12=d.m22;e.C=-d.w;e.m21=-d.m11;e.m22=-d.m12;e.s=d.s;e.m31=d.m32;e.m32=-d.m31;return e};Dk.prototype.lc=function(a){this.N instanceof Gk||this.N.lc(a)};
function Ik(a){this.Uj=a;this.actions={};this.Kc=this.ib=this.$a=0;this.dg=this.cg=-1;this.Ij=2/3;this.$f=this.vc=0;this.Tb=1E8;this.zh=this.$g=0}function Jk(a){return a.Kc+a.ib+a.$a}Ik.prototype.nj=function(){return!1};Ik.prototype.Vf=function(){return!1};
function Ek(a){var b=new w(a.s,a.m31,a.m32);a=new w(-a.C,-a.m21,-a.m22);for(var c=this.Tb,d=p(t.b.nc),e=d.next();!e.done;e=d.next()){e=e.value;var h=e.h.X();h.y+=e.Hf;h=ok(b,a,h,e.pd,e.Gf);if(h.We){h=h.We;if(0>h.t)continue;if(h.t>=c)continue;h=vd(h.p,b,new w)}else{var g=h.ci.X(),k=h.sj-e.pd;g.x+=h.Ie.x*k;g.y+=h.Ie.y*k;g.z+=h.Ie.z*k;h=vd(g,b,new w);if(0>=qc(h,a))continue}mf(b,h,kk)||(e.Ti=t.j)}}
function Kk(a){var b=new w(a.s,a.m31,a.m32);a=new w(-a.C,-a.m21,-a.m22);var c=this.Tb,d=[];d.cmp=function(n,r){return n.sg>r.sg?-1:1};for(var e=p(t.b.nc),h=e.next();!h.done;h=e.next())if(h=h.value,h.fb||!(t.j>h.V)){var g=h.h.X();g.y+=h.Hf;var k=ok(b,a,g,h.pd-this.zh,h.Gf);if(k.We)g=k.We,0>g.t||g.t>=c||(g.p.sg=c-g.t,g.p.item=h,Ra(d,g.p));else{g=k.ci.X();var l=k.sj-(h.pd-this.zh);g.x+=k.Ie.x*l;g.y+=k.Ie.y*l;g.z+=k.Ie.z*l;l=vd(k.ci,b,new w);k=l.ta(1);if(!(k>this.Tb)){var m=vd(g,b,new w);0>=qc(m,a)||
(m.normalize(),l=qc(l,m),m=this.$g,5E5<k&&(m=Math.atan(5E5*Math.tan(m)/k)),Math.acos(l)>=m||(g.sg=l-1,g.item=h,Ra(d,g)))}}}a=p(d);for(c=a.next();!c.done;c=a.next())if(c=c.value,!mf(b,vd(c,b,new w)))return c;return null}
function Lk(a,b,c){function d(n){n=new Mk(n);n.transform.s=a.p.x;n.transform.m31=a.p.y;n.transform.m32=a.p.z;K(n,t.be);n.create();n.step()}function e(){var n=new Nk;n.Qi=120*(pb(ob)+.5);n.mb=2E4;n.transform.s=a.p.x;n.transform.m31=a.p.y;n.transform.m32=a.p.z;n.I.x=a.n.x;n.I.y=a.n.y;n.I.z=a.n.z;n.I.scale(2E4*pb(ob)+1E4);K(n,t.be);n.create();n.step()}if(a.item instanceof Z){var h=new H,g=new w,k=new w,l=a.ob.X();rc(l,g,k);h.ze(g);h.Ae(k);h.Be(l);Pd(h,a.p);g=new H;k=new w;l=new w;var m=a.da.ob.X();rc(m,
k,l);g.ze(k);g.Ae(l);g.Be(m);Pd(g,a.da.p);Ok(a.item,b,c,h,g);K(new Pk,t.Xm);a.item.hg(b)}else a.item instanceof Bk?(d(31250),e(),a.item.hg(b)):a.item instanceof yk?(d(31250),e(),a.item.hg(b)):(d(12500),e(),Kg(t.b.Sk,new w(2343.75*Math.round(a.p.x/2343.75),2343.75*Math.round(a.p.y/2343.75),2343.75*Math.round(a.p.z/2343.75)),a.n,Math.PI,18750,rb(16),16))}Ik.prototype.Ag=function(){var a=this.dg-this.ib;a=Math.min(a,this.$a);return a*this.xe-this.vc};
Ik.prototype.lc=function(a){this.vc+=Math.min(a,this.Ag());a=Math.floor(this.vc/this.xe);this.ib+=a;this.$a-=a;t.b.uf();this.vc-=a*this.xe};function Qk(a){Ik.call(this,a);this.cg=360;this.dg=30;this.ib=0;this.$a=2*this.dg;this.Ij=1;this.$g=jc(4);this.zh=8E3;this.xe=5.2;a.jb[this.constructor.Jc]=this;a.je++}Qk.prototype=Object.create(Ik.prototype);Qk.prototype.constructor=Qk;
Qk.Na={CarbineEquip02:{f:291,g:265,x:1204,y:1548,a:189,c:31},CarbineEquip03:{f:90,g:191,x:814,y:1548,a:390,c:105},CarbineEquip04:{f:126,g:152,x:0,y:1548,a:354,c:144},CarbineEquip05:{f:46,g:96,x:1012,y:255,a:434,c:200},CarbineEquip06:{f:92,g:68,x:1281,y:0,a:356,c:228},CarbineEquip07:{f:106,g:65,x:960,y:0,a:321,c:231},CarbineEquip08:{f:129,g:76,x:0,y:255,a:282,c:220},CarbineEquip09:{f:145,g:91,x:282,y:255,a:250,c:205},CarbineEquip10:{f:163,g:109,x:1231,y:670,a:220,c:187},CarbineEquip11:{f:184,g:125,
x:292,y:1047,a:220,c:171},CarbineEquip12:{f:198,g:133,x:1541,y:1047,a:253,c:163},CarbineEquip13:{f:207,g:132,x:1296,y:1047,a:245,c:164},CarbineAim01:{f:194,g:133,x:0,y:1225,a:229,c:163},CarbineAim02:{f:170,g:136,x:1247,y:1225,a:187,c:160},CarbineAim03:{f:157,g:137,x:184,y:1388,a:174,c:159},CarbineFire01:{f:209,g:131,x:1030,y:1047,a:266,c:165},CarbineFire02:{f:213,g:128,x:512,y:1047,a:246,c:168},CarbineFire03:{f:212,g:133,x:229,y:1225,a:248,c:163},CarbineAimFire01:{f:147,g:136,x:1434,y:1225,a:193,
c:160},CarbineAimFire02:{f:152,g:136,x:0,y:1388,a:184,c:160},CarbineAimFire03:{f:155,g:134,x:730,y:1225,a:178,c:162},CarbineReload01:{f:185,g:133,x:477,y:1225,a:253,c:163},CarbineReload02:{f:101,g:134,x:908,y:1225,a:339,c:162},CarbineReload03:{f:14,g:144,x:838,y:1388,a:432,c:152},CarbineReload04:{f:0,g:153,x:354,y:1548,a:460,c:143},CarbineReload05:{f:0,g:149,x:1270,y:1388,a:480,c:147},CarbineReload06:{f:0,g:139,x:358,y:1388,a:480,c:157},CarbineReload07:{f:0,g:107,x:271,y:670,a:480,c:189},CarbineReload08:{f:0,
g:41,x:0,y:0,a:480,c:255},CarbineReload09:{f:0,g:47,x:480,y:0,a:480,c:249},CarbineReload10:{f:0,g:95,x:532,y:255,a:480,c:201},CarbineReload11:{f:0,g:107,x:751,y:670,a:480,c:189},CarbineReload12:{f:0,g:111,x:311,y:860,a:480,c:185},CarbineReload13:{f:0,g:114,x:791,y:860,a:480,c:182},CarbineReload14:{f:59,g:115,x:1271,y:860,a:421,c:181},CarbineReload15:{f:200,g:109,x:1451,y:670,a:280,c:187},CarbineReload16:{f:235,g:103,x:309,y:475,a:245,c:193},CarbineReload17:{f:246,g:104,x:838,y:475,a:234,c:192},CarbineReload18:{f:241,
g:105,x:1072,y:475,a:239,c:191},CarbineReload19:{f:209,g:106,x:0,y:670,a:271,c:190},CarbineReload20:{f:172,g:99,x:1446,y:255,a:308,c:197},CarbineReload21:{f:171,g:101,x:0,y:475,a:309,c:195},CarbineReload22:{f:196,g:103,x:554,y:475,a:284,c:193},CarbineReload23:{f:164,g:105,x:1311,y:475,a:316,c:191},CarbineReload24:{f:158,g:109,x:0,y:860,a:311,c:187},CarbineReload25:{f:173,g:118,x:0,y:1047,a:292,c:178},CarbineReload26:{f:175,g:128,x:758,y:1047,a:272,c:168}};
Qk.prototype.equip=function(){var a=t.j-this.V;a+=5;var b=Math.floor(a/2.5);this.Va=this.N.constructor.Na["CarbineEquip"+("00"+b).slice(-2)];this.Ve=this.Ue=0;this.fc=this.N.ib;Hk(this)||(0==this.N.ib&&10<=this.N.$a&&(this.Wb=!0),this.Wb?(this.action="reload",this.V=t.j+1):9==a?this.ka.Ea+=jc(1):9<=b&&(this.N.Ff.call(this,!0),this.N.Wd.call(this)||(this.lc(1),32.5<=a+1&&(this.action="ready"))))};
Qk.prototype.ready=function(){this.Va=this.N.constructor.Na.CarbineEquip13;this.cc();this.fc=this.N.ib;Hk(this)||(this.Wb?(this.action="reload",this.V=t.j+1):(this.N.Ff.call(this,!0),this.N.Wd.call(this)||this.lc(1)))};
Qk.prototype.fire=function(){var a=t.j-this.V,b=("00"+Math.floor(a)).slice(-2);this.Va=this.focus?this.N.constructor.Na["CarbineAimFire"+b]||this.N.constructor.Na.CarbineAim03:this.N.constructor.Na["CarbineFire"+b]||this.N.constructor.Na.CarbineEquip13;this.cc();if(0==a){t.i.W.get("CarbineFire01").play({gain:.375,pitch:1.5});t.i.W.get("CarbineFire02").play({gain:.75,pitch:1.5});--this.N.ib;t.b.uf();!this.N.ib&&this.N.$a&&(this.Wb=1);this.nf+=35;this.Vd=this.focus?Dk.Ob(0,.270042,-.06106,0,0,180):
Dk.Ob(.053697,.319573,-.058355,-.833,.006,-179.61);a=this.eh;a.Ra=1;b=255*(8*pb(ob)+1)/12&255;a.color.r=b;a.color.bb=b;a.color.qa=b;a.scale=pb(ob)+1;a.Nd=lc(nb());b=new H;b.translate(0,-35E3,0);Cd(this.Vd,b,a.transform);a=(new H).rotate(0,jc(2.5*pb(ob)),0);b=(new H).rotate(0,0,pb(ob)*Math.PI*2);var c=Rk(this.ka);Cd(c,b,c);Cd(c,a,c);a=this.N.Yc(c);a=p(a);for(b=a.next();!b.done;b=a.next())Lk(b.value,72,1.2);a=new Sk("CartridgeCarbineSpent");a.Ql=jc(6*(3*pb(ob)+1));a.transform.s-=2E3;a.transform.m31+=
2100;b=new H;Cd(this.ka.ce.O,this.Vd,b);Cd(b,a.transform,a.transform);a.I.x-=3E3*(2*pb(ob)+1);a.I.z=-a.I.x;Nd(b,a.I,a.I);a.h.set(a.transform.s,a.transform.m31,a.transform.m32);a.I.add(this.ka.I);xd(a.I,a.Nb);K(a,t.ye);a.create();180<=this.nf&&(this.nf-=180,a=new Tk,a.mb=6E4,a.transform.m31-=45E3,b=new H,Cd(this.ka.ce.O,this.Vd,b),Cd(b,a.transform,a.transform),a.I.y=-37500,Nd(b,a.I,a.I),a.I.add(this.ka.I),xd(a.I,a.Nb),a.ja=this.ka.ja,K(a,t.be),a.create(),a.step(),this.pf.push(a));3<this.pf.length&&
(K(this.pf[0],null),this.pf.splice(0,1))}else 1==a?this.eh.Ra=0:2==a?this.ka.Ea+=this.focus?jc(.5):jc(1):3<=a&&!Hk(this)&&(this.N.Ff.call(this,!1),this.N.Wd.call(this)||(this.lc(1),this.action="ready"))};
Qk.prototype.reload=function(){var a=t.j-this.V;a+=3;this.Va=this.N.constructor.Na["CarbineReload"+("00"+Math.floor(a/3)).slice(-2)];this.cc();this.fc=!1;this.Wb=0;Hk(this)||(this.focus-=1/6,0>this.focus&&(this.focus=0),3==a?(this.N.$a+=this.N.ib,this.N.ib=0,t.b.uf(),t.i.W.get("CarbineMagOut02").play({gain:1,pitch:1})):42==a?t.i.W.get("CarbineMagIn02").play({gain:1,pitch:1}):60==a?(this.ka.Ea+=jc(1),this.N.lc(this.N.Ag())):81<=a+1&&(this.action="ready"))};f=Qk.prototype;
f.Ff=function(a){this.He&&(this.focus+=1/6,1<this.focus&&(this.focus=1));a&&this.focus&&(this.Va=this.N.constructor.Na["CarbineAim"+("00"+Math.floor(3*this.focus)).slice(-2)]||this.N.constructor.Na.CarbineEquip13)};f.Wd=function(){if(!this.fe||1!=this.focus&&0!=this.focus)return!1;if(!this.N.ib)return this.N.$a&&(this.Wb=1),!1;this.action="fire";this.V=t.j+1;return!0};f.fi=Kk;
f.Yc=function(a){var b=new w(a.s,a.m31,a.m32),c=new w(-a.C,-a.m21,-a.m22),d=this.Tb;if(a=mf(b,new w(c.x*d,c.y*d,c.z*d)))d=a.d;var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=p(t.b.nc),g=h.next();!g.done;g=h.next())if(g=g.value,g.fb||!(t.j>g.V)){var k=g.h.X();k.y+=g.Hf;!(k=ok(b,c,k,g.pd,g.Gf).We)||0>k.t||k.t>=d||(k.item=g,Ra(e,k))}b=null;d=c=NaN;e=p(e);for(h=e.next();!h.done;h=e.next())h=h.value,h.item.Li>c||h.item.Li==
c&&h.t>d||(b=h,c=h.item.Li,d=h.t);e=[];b&&e.push(b);a&&e.push(a);return e};f.nj=function(){return 0>=this.$a||"reload"==this.Uj.action||6<this.ib?!1:!0};f.Vf=function(){var a=Jk(this);return 0>=a?2:30>a?1:0};function Gk(a){Ik.call(this,a);this.cg=12;this.Kc=this.dg=0;this.$a=8;this.mk=!1;this.$g=jc(0);this.xe=96;a.jb[this.constructor.Jc]=this;a.je++}Gk.prototype=Object.create(Ik.prototype);Gk.prototype.constructor=Gk;
Gk.Na={ShotgunEquip01:{f:170,g:185,x:874,y:1644,a:310,c:111},ShotgunEquip02:{f:183,g:151,x:569,y:1351,a:297,c:145},ShotgunEquip03:{f:331,g:128,x:1175,y:704,a:149,c:168},ShotgunEquip04:{f:111,g:20,x:871,y:0,a:369,c:276},ShotgunEquip05:{f:140,g:0,x:0,y:0,a:340,c:296},ShotgunEquip06:{f:158,g:0,x:340,y:0,a:277,c:296},ShotgunEquip07:{f:173,g:0,x:617,y:0,a:254,c:296},ShotgunEquip08:{f:188,g:100,x:0,y:508,a:257,c:196},ShotgunEquip09:{f:195,g:152,x:1432,y:1351,a:258,c:144},ShotgunEquip10:{f:199,g:159,x:0,
y:1644,a:257,c:137},ShotgunEquip11:{f:201,g:160,x:257,y:1644,a:253,c:136},ShotgunEquip12:{f:197,g:156,x:1248,y:1500,a:254,c:140},ShotgunEquip13:{f:195,g:152,x:0,y:1500,a:254,c:144},ShotgunFire01:{f:202,g:152,x:254,y:1500,a:278,c:144},ShotgunFire02:{f:181,g:147,x:0,y:1351,a:299,c:149},ShotgunFire03:{f:175,g:133,x:0,y:884,a:305,c:163},ShotgunFire04:{f:177,g:118,x:299,y:704,a:303,c:178},ShotgunFire05:{f:182,g:112,x:651,y:508,a:298,c:184},ShotgunFire06:{f:184,g:112,x:949,y:508,a:296,c:184},ShotgunFire07:{f:183,
g:113,x:1245,y:508,a:297,c:183},ShotgunFire08:{f:181,g:116,x:0,y:704,a:299,c:180},ShotgunFire09:{f:187,g:120,x:602,y:704,a:293,c:176},ShotgunFire10:{f:200,g:125,x:895,y:704,a:280,c:171},ShotgunFire11:{f:211,g:132,x:1324,y:704,a:269,c:164},ShotgunFire12:{f:215,g:139,x:305,y:884,a:265,c:157},ShotgunFire13:{f:212,g:145,x:1320,y:1199,a:268,c:151},ShotgunFire14:{f:203,g:149,x:299,y:1351,a:270,c:147},ShotgunFire15:{f:196,g:152,x:532,y:1500,a:256,c:144},ShotgunCycle01:{f:187,g:139,x:570,y:884,a:209,c:157},
ShotgunCycle02:{f:162,g:109,x:475,y:508,a:176,c:187},ShotgunCycle03:{f:123,g:88,x:1399,y:296,a:176,c:208},ShotgunCycle04:{f:101,g:84,x:0,y:296,a:176,c:212},ShotgunCycle05:{f:103,g:84,x:176,y:296,a:174,c:212},ShotgunCycle06:{f:126,g:84,x:350,y:296,a:173,c:212},ShotgunCycle07:{f:126,g:86,x:1220,y:296,a:179,c:210},ShotgunCycle08:{f:127,g:85,x:1045,y:296,a:175,c:211},ShotgunCycle09:{f:126,g:84,x:523,y:296,a:173,c:212},ShotgunCycle10:{f:123,g:84,x:696,y:296,a:173,c:212},ShotgunCycle11:{f:101,g:84,x:869,
y:296,a:176,c:212},ShotgunCycle12:{f:97,g:82,x:1240,y:0,a:181,c:214},ShotgunCycle13:{f:93,g:83,x:1421,y:0,a:192,c:213},ShotgunCycle14:{f:114,g:108,x:257,y:508,a:218,c:188},ShotgunCycle15:{f:166,g:139,x:779,y:884,a:250,c:157},ShotgunReload01:{f:196,g:153,x:788,y:1500,a:230,c:143},ShotgunReload02:{f:209,g:156,x:1502,y:1500,a:158,c:140},ShotgunReload03:{f:183,g:164,x:510,y:1644,a:182,c:132},ShotgunReload04:{f:150,g:151,x:866,y:1351,a:283,c:145},ShotgunReload05:{f:124,g:144,x:1029,y:884,a:356,c:152},
ShotgunReload06:{f:108,g:144,x:1385,y:884,a:372,c:152},ShotgunReload07:{f:108,g:144,x:0,y:1047,a:372,c:152},ShotgunReload08:{f:108,g:144,x:372,y:1047,a:308,c:152},ShotgunReload09:{f:108,g:144,x:680,y:1047,a:262,c:152},ShotgunReload10:{f:108,g:144,x:942,y:1047,a:262,c:152},ShotgunReload11:{f:107,g:144,x:1204,y:1047,a:373,c:152},ShotgunReload12:{f:108,g:144,x:0,y:1199,a:262,c:152},ShotgunReload13:{f:108,g:144,x:262,y:1199,a:262,c:152},ShotgunReload14:{f:108,g:144,x:524,y:1199,a:262,c:152},ShotgunReload15:{f:108,
g:144,x:786,y:1199,a:262,c:152},ShotgunReload16:{f:124,g:144,x:1048,y:1199,a:272,c:152},ShotgunReload17:{f:150,g:151,x:1149,y:1351,a:283,c:145},ShotgunReload18:{f:183,g:164,x:692,y:1644,a:182,c:132},ShotgunReload19:{f:209,g:156,x:1588,y:1199,a:158,c:140},ShotgunReload20:{f:196,g:153,x:1018,y:1500,a:230,c:143}};
Gk.prototype.equip=function(){var a=t.j-this.V;a+=2;this.Va=this.N.constructor.Na["ShotgunEquip"+("00"+Math.floor(a/2.5)).slice(-2)];this.cc();this.fc=this.N.Kc;Hk(this)||(9==a?this.ka.Ea+=jc(1):22<=a+1&&!this.N.Wd.call(this)&&(this.He||this.Wb||!this.N.Kc&&this.N.$a?(this.action="cycleOpen",this.V=t.j+1-6):(this.lc(1),35<=a+1&&(this.action="ready"))))};
Gk.prototype.ready=function(){this.Va=this.N.constructor.Na.ShotgunEquip13;this.cc();this.fc=this.N.Kc;Hk(this)||this.N.Wd.call(this)||(this.He||this.Wb?(this.action="cycleOpen",this.V=t.j+1,this.fc=!1):this.lc(1))};
Gk.prototype.fire=function(){var a=t.j-this.V;this.Va=this.N.constructor.Na["ShotgunFire"+("00"+(7>a?Math.floor(a):Math.floor((a-7)/4)+7)).slice(-2)]||this.N.constructor.Na.ShotgunEquip13;this.cc();this.fc=!1;if(0==a){t.i.W.get("ShotgunFire01").play({gain:.9375,pitch:.75});t.i.W.get("explode01").play({gain:.9375,pitch:1.5});this.N.Kc=0;this.N.mk=!0;t.b.uf();this.Vd=Dk.Ob(.04499,.31957,-.038305,-.596,.007,-179.3);a=this.eh;a.Ra=1;var b=255*(pb(ob)+4)/5&255;a.color.r=b;a.color.bb=b;a.color.qa=b;a.scale=
pb(ob)+1;a.Nd=lc(nb());b=new H;b.translate(0,-4E4,0);Cd(this.Vd,b,a.transform);a=Rk(this.ka);var c=Gk.th.length;b=Array(c);for(var d=0;d<c;d++){var e=rb(d+1);e!=d&&(b[d]=b[e]);b[e]=d}c=pb(ob)*Math.uh;for(d=0;d<b.length;d++){e=(new H).rotate(0,Gk.th[8-d],0);var h=(new H).rotate(0,0,c+b[d]*Math.uh/9),g=new H;Cd(a,h,g);Cd(g,e,g);h=this.N.Yc(g);e=270;h=p(h);for(g=h.next();!g.done;g=h.next()){g=g.value;var k=e;g.item instanceof Z&&(k=Math.min(e,g.item.qb));Lk(g,k,1.2);e-=k;if(0>=e)break}}a=new Tk;a.mb=
6E4;a.scale=1;a.transform.m31-=45E3;b=new H;Cd(this.ka.ce.O,this.Vd,b);Cd(b,a.transform,a.transform);a.I.y=-37500;Nd(b,a.I,a.I);a.I.add(this.ka.I);xd(a.I,a.Nb);a.ja=this.ka.ja;K(a,t.be);a.create();a.step();this.pf.push(a);3<this.pf.length&&(K(this.pf[0],null),this.pf.splice(0,1));this.ka.Ea+=jc(2)}else 1==a?this.eh.Ra=0:3==a?this.ka.Ea+=jc(4):4<=a&&!Hk(this)&&(this.He||this.Wb?(this.action="cycleOpen",this.V=t.j+1):(this.lc(1),43<=a+1&&(this.action="ready")))};
Gk.prototype.cycleOpen=function(){var a=t.j-this.V;a=Math.min(a,27);this.Va=this.N.constructor.Na["ShotgunCycle"+("00"+Math.floor(a/3)).slice(-2)]||this.N.constructor.Na.ShotgunEquip13;this.cc();this.fc=!1;if(!Hk(this))if(12==a)t.i.W.get("ShotgunOpen01").play({gain:1,pitch:.8125});else if(21==a){this.ka.Ea+=jc(1);this.N.$a+=this.N.Kc;this.Vd=Dk.Ob(-.018192,.25469,-.045699,-19.3,39.9,177);if(this.N.mk||this.N.Kc){a=new Sk("CartridgeShotgunSpent");a.Jk=.65;a.Ql=jc(24*(1*pb(ob)+1));a.transform.m31+=
6E3;var b=new H;Cd(this.ka.ce.O,this.Vd,b);Cd(b,a.transform,a.transform);a.I.x=-3E3;a.I.z=-a.I.x;Nd(b,a.I,a.I);a.h.set(a.transform.s,a.transform.m31,a.transform.m32);a.I.add(this.ka.I);xd(a.I,a.Nb);K(a,t.ye);a.create();this.N.mk=!1}this.N.Kc=0}else 27<=a&&(this.He||this.Wb?this.lc(1):(this.action="cycleShut",this.V=t.j+1-27))};
Gk.prototype.cycleShut=function(){var a=t.j-this.V;this.Va=this.N.constructor.Na["ShotgunCycle"+("00"+Math.floor(a/3)).slice(-2)]||this.N.constructor.Na.ShotgunEquip13;this.cc();this.fc=!1;Hk(this)||(30==a?(t.i.W.get("ShotgunShut01").play({gain:1,pitch:.8125}),this.N.lc(this.N.Ag())):39<=a&&(this.fc=this.N.Kc,!Hk(this)&&48<=a+1&&(this.action="ready")))};f=Gk.prototype;f.Wd=function(){if(!this.fe||!this.N.Kc)return!1;this.action="fire";this.V=t.j+1;return!0};f.fi=Kk;
f.Yc=function(a){var b=new w(a.s,a.m31,a.m32);a=new w(-a.C,-a.m21,-a.m22);var c=this.Tb,d=mf(b,new w(a.x*c,a.y*c,a.z*c));d&&(c=d.d);var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=p(t.b.nc),g=h.next();!g.done;g=h.next())if(g=g.value,g.fb||!(t.j>g.V)){var k=g.h.X();k.y+=g.Hf;!(k=nk(b,a,k,g.pd,g.Gf+g.pd))||0>k.t||k.t>=c||(k.item=g,Ra(e,k))}d&&e.push(d);return e};f.nj=function(){return!1};
f.Vf=function(){var a=Jk(this);return 0>=a?2:5>a?1:0};f.Ag=function(){var a=1-this.Kc;a=Math.min(a,this.$a);return a*this.xe-this.vc};f.lc=function(a){this.vc+=Math.min(a,this.Ag());a=Math.floor(this.vc/this.xe);this.Kc+=a;this.$a-=a;this.vc-=a*this.xe};function Uk(a){Ik.call(this,a);this.cg=24;this.dg=6;this.ib=0;this.$a=2*this.dg;this.$g=jc(4);this.li=0;this.xe=56;a.jb[this.constructor.Jc]=this;a.je++}Uk.prototype=Object.create(Ik.prototype);Uk.prototype.constructor=Uk;
Uk.Na={RevolverEquip00:{f:0,g:255,x:1099,y:1692,a:480,c:41},RevolverEquip01:{f:32,g:246,x:651,y:1692,a:448,c:50},RevolverEquip02:{f:129,g:224,x:300,y:1692,a:351,c:72},RevolverEquip03:{f:180,g:199,x:0,y:1692,a:300,c:97},RevolverEquip04:{f:193,g:176,x:858,y:1443,a:287,c:120},RevolverEquip05:{f:194,g:157,x:1382,y:1296,a:249,c:139},RevolverEquip06:{f:184,g:144,x:343,y:845,a:232,c:152},RevolverEquip07:{f:172,g:148,x:258,y:999,a:255,c:148},RevolverAim01:{f:178,g:152,x:808,y:1296,a:226,c:144},RevolverAim02:{f:150,
g:150,x:341,y:1296,a:214,c:146},RevolverAim03:{f:133,g:148,x:513,y:999,a:208,c:148},RevolverFire01:{f:184,g:149,x:208,y:1148,a:238,c:147},RevolverFire02:{f:184,g:149,x:446,y:1148,a:238,c:147},RevolverFire03:{f:184,g:149,x:684,y:1148,a:238,c:147},RevolverFire04:{f:184,g:149,x:922,y:1148,a:238,c:147},RevolverFire05:{f:195,g:149,x:1160,y:1148,a:217,c:147},RevolverFire06:{f:201,g:111,x:1563,y:269,a:148,c:185},RevolverFire07:{f:197,g:71,x:0,y:269,a:144,c:225},RevolverFire08:{f:212,g:100,x:660,y:269,a:192,
c:196},RevolverFire09:{f:173,g:114,x:486,y:494,a:253,c:182},RevolverFire10:{f:180,g:111,x:0,y:494,a:242,c:185},RevolverFire11:{f:176,g:113,x:242,y:494,a:244,c:183},RevolverFire12:{f:169,g:126,x:1548,y:494,a:266,c:170},RevolverFire13:{f:171,g:139,x:759,y:679,a:269,c:157},RevolverFire14:{f:171,g:147,x:0,y:999,a:258,c:149},RevolverFire15:{f:185,g:149,x:1377,y:1148,a:237,c:147},RevolverAimFire01:{f:133,g:148,x:721,y:999,a:208,c:148},RevolverAimFire02:{f:133,g:148,x:929,y:999,a:208,c:148},RevolverAimFire03:{f:133,
g:148,x:1137,y:999,a:208,c:148},RevolverAimFire04:{f:133,g:148,x:1345,y:999,a:208,c:148},RevolverAimFire05:{f:138,g:148,x:1553,y:999,a:200,c:148},RevolverAimFire06:{f:144,g:119,x:739,y:494,a:168,c:177},RevolverAimFire07:{f:140,g:87,x:338,y:269,a:146,c:209},RevolverAimFire08:{f:153,g:110,x:1370,y:269,a:193,c:186},RevolverAimFire09:{f:126,g:121,x:1329,y:494,a:219,c:175},RevolverAimFire10:{f:135,g:119,x:907,y:494,a:211,c:177},RevolverAimFire11:{f:130,g:120,x:1118,y:494,a:211,c:176},RevolverAimFire12:{f:126,
g:130,x:0,y:679,a:219,c:166},RevolverAimFire13:{f:127,g:141,x:1028,y:679,a:219,c:155},RevolverAimFire14:{f:131,g:146,x:922,y:845,a:212,c:150},RevolverAimFire15:{f:133,g:148,x:0,y:1148,a:208,c:148},RevolverReload01:{f:181,g:136,x:560,y:679,a:199,c:160},RevolverReload02:{f:171,g:107,x:1194,y:269,a:176,c:189},RevolverReload03:{f:141,g:71,x:144,y:269,a:194,c:225},RevolverReload04:{f:113,g:40,x:1337,y:0,a:216,c:256},RevolverReload05:{f:95,g:28,x:503,y:0,a:222,c:268},RevolverReload06:{f:91,g:27,x:0,y:0,
a:238,c:269},RevolverReload07:{f:90,g:27,x:238,y:0,a:265,c:269},RevolverReload08:{f:107,g:35,x:725,y:0,a:204,c:261},RevolverReload09:{f:107,g:36,x:929,y:0,a:204,c:260},RevolverReload10:{f:107,g:36,x:1133,y:0,a:204,c:260},RevolverReload11:{f:117,g:51,x:1553,y:0,a:193,c:245},RevolverReload12:{f:135,g:90,x:484,y:269,a:176,c:206},RevolverReload13:{f:141,g:141,x:1247,y:679,a:175,c:155},RevolverReload14:{f:139,g:149,x:0,y:1296,a:341,c:147},RevolverReload15:{f:137,g:142,x:0,y:845,a:343,c:154},RevolverReload16:{f:138,
g:103,x:852,y:269,a:342,c:193},RevolverReload17:{f:139,g:130,x:219,y:679,a:341,c:166},RevolverReload18:{f:139,g:141,x:1422,y:679,a:341,c:155},RevolverReload19:{f:133,g:145,x:575,y:845,a:347,c:151},RevolverReload20:{f:132,g:146,x:1134,y:845,a:348,c:150},RevolverReload21:{f:132,g:146,x:1482,y:845,a:348,c:150},RevolverReload22:{f:132,g:152,x:1034,y:1296,a:348,c:144},RevolverReload23:{f:139,g:174,x:517,y:1443,a:341,c:122},RevolverReload24:{f:153,g:184,x:0,y:1580,a:327,c:112},RevolverReload25:{f:163,g:187,
x:985,y:1580,a:317,c:109},RevolverReload26:{f:155,g:187,x:1302,y:1580,a:325,c:109},RevolverReload27:{f:142,g:186,x:647,y:1580,a:338,c:110},RevolverReload28:{f:156,g:185,x:327,y:1580,a:320,c:111},RevolverReload29:{f:144,g:182,x:1424,y:1443,a:293,c:114},RevolverReload30:{f:128,g:177,x:1145,y:1443,a:279,c:119},RevolverReload31:{f:136,g:169,x:256,y:1443,a:261,c:127},RevolverReload32:{f:150,g:159,x:0,y:1443,a:256,c:137},RevolverReload33:{f:167,g:151,x:555,y:1296,a:253,c:145}};
Uk.prototype.equip=function(){var a=t.j-this.V,b=Math.floor(a/2.5);this.Va=this.N.constructor.Na["RevolverEquip"+("00"+b).slice(-2)];this.Ve=this.Ue=0;this.fc=this.N.ib;Hk(this)||(0==this.N.ib&&2<=this.N.$a&&(this.Wb=!0),this.Wb?(this.action="reload",this.V=t.j+1):0==a?this.ka.Ea+=jc(1):5<=b&&(this.N.Ff.call(this,!0),this.N.Wd.call(this)||(this.lc(1),20<=a+1&&(this.action="ready"))))};
Uk.prototype.ready=function(){this.Va=this.N.constructor.Na.RevolverEquip07;this.cc();this.fc=this.N.ib;Hk(this)||(this.Wb?(this.action="reload",this.V=t.j+1):(this.N.Ff.call(this,!0),this.N.Wd.call(this)||this.lc(1)))};
Uk.prototype.fire=function(){var a=t.j-this.V,b=("00"+(7>a?Math.floor(a):Math.floor((a-7)/3)+7)).slice(-2);this.Va=this.focus?this.N.constructor.Na["RevolverAimFire"+b]||this.N.constructor.Na.RevolverAim03:this.N.constructor.Na["RevolverFire"+b]||this.N.constructor.Na.RevolverEquip07;this.cc();if(4==a){t.i.W.get("CarbineFire01").play({gain:1,pitch:1});t.i.W.get("ShotgunFire01").play({gain:.5,pitch:1.5});this.fe=0;this.N.ib--;t.b.uf();this.N.li++;!this.N.ib&&this.N.$a&&(this.Wb=1);this.Vd=this.focus?
Dk.Ob(0,.49195,-.017475,-.713,0,0):Dk.Ob(.032225,.49195,-.022213,.367,-.151,.525);b=this.eh;b.Ra=1;var c=255*(pb(ob)+4)/5&255;b.color.r=c;b.color.bb=c;b.color.qa=c;b.scale=pb(ob)+1;b.Nd=lc(nb());c=new H;c.translate(0,-21E3,0);Cd(this.Vd,c,b.transform);b=new Tk;b.mb=6E4;b.scale=1;b.transform.m31-=45E3;c=new H;Cd(this.ka.ce.O,this.Vd,c);Cd(c,b.transform,b.transform);b.I.y=-37500;Nd(c,b.I,b.I);b.I.add(this.ka.I);xd(b.I,b.Nb);b.ja=this.ka.ja;K(b,t.be);b.create();b.step();this.pf.push(b);b=(new H).rotate(0,
jc(0*pb(ob)),0);c=(new H).rotate(0,0,pb(ob)*Math.PI*2);var d=Rk(this.ka);Cd(d,c,d);Cd(d,b,d);b=this.N.Yc(d);b=p(b);for(c=b.next();!c.done;c=b.next()){c=c.value;d=c.item instanceof Z?3:1;for(var e=0;e<d;e++)Lk(c,360,1.7)}}else if(5==a)this.eh.Ra=0;else if(7==a)this.ka.Ea+=jc(3);else if(10<=a){if(Hk(this))return;if(this.Wb){this.action="reload";this.V=t.j+1;return}this.N.Ff.call(this,!1);if(this.N.Wd.call(this))return;this.lc(1)}34<=a+1&&(this.action="ready")};
Uk.prototype.reload=function(){var a=t.j-this.V;a+=3;this.Va=this.N.constructor.Na["RevolverReload"+("00"+Math.floor(a/3)).slice(-2)];this.cc();this.Wb=0;84>a&&(this.fc=!1,this.focus-=1/6,0>this.focus&&(this.focus=0));if(!Hk(this))if(21==a)t.i.W.get("RevolverSpin01").play({gain:1,pitch:1}),t.i.W.get("RevolverEjectorUp").play({gain:2/3,pitch:1});else if(24==a){this.ka.Ea+=jc(.5);for(a=0;a<this.N.li;a++)t.i.W.get("shellCasing0"+(rb(3)+1)).play({gain:.625,pitch:.65,delay:.125+.15*a});this.N.li=0;this.N.$a+=
this.N.ib;this.N.ib=0;t.b.uf()}else 54==a?t.i.W.get("RevolverSlap01").play({gain:1,pitch:1}):57==a?(this.ka.Ea+=jc(1),this.N.lc(this.N.Ag())):78==a?t.i.W.get("RevolverSpin01").play({gain:1,pitch:1}):81==a?t.i.W.get("RevolverSlap02").play({gain:1,pitch:1}):84<=a&&(this.fc=this.N.ib,this.N.Ff.call(this,!0),this.N.Wd.call(this)||(this.lc(1),102<=a+1&&(this.action="ready")))};f=Uk.prototype;
f.Ff=function(a){this.He&&(this.focus+=1/6,1<this.focus&&(this.focus=1));a&&this.focus&&(this.Va=this.N.constructor.Na["RevolverAim"+("00"+Math.floor(3*this.focus)).slice(-2)]||this.N.constructor.Na.RevolverEquip07)};f.Wd=function(){if(!this.fe||1!=this.focus&&0!=this.focus)return!1;if(!this.N.ib)return this.N.$a&&(this.Wb=1),!1;this.action="fire";this.V=t.j+1;return!0};f.fi=function(a){return.5<this.Uj.focus?Vk(this,a):Kk.call(this,a)};
function Vk(a,b){function c(r){var q=vd(r,d,new w);r=q.length();var v=26512.5/r;q=of(d,q);for(var B=0,y=!0;;){var x=q.shift();if(!x){if(!y){B+=v;break}B=1;break}if(!y){y=x.t-B;if(y>v){B+=v;break}v-=y}B=x.t;y=!x.Wa}return B*r>=r-1E3}var d=new w(b.s,b.m31,b.m32),e=new w(-b.C,-b.m21,-b.m22),h=a.Tb;b=[];b.cmp=function(r,q){return r.sg>q.sg?-1:1};for(var g=p(t.b.nc),k=g.next();!k.done;k=g.next())if(k=k.value,(k.fb||!(t.j>k.V))&&600>t.j-k.Ti){var l=k.h.X();l.y+=k.Hf;var m=ok(d,e,l,k.pd-a.zh,k.Gf);if(m.We)l=
m.We,0>l.t||l.t>=h||(l.p.sg=h-l.t,l.p.item=k,Ra(b,l.p));else{l=m.ci.X();var n=m.sj-(k.pd-a.zh);l.x+=m.Ie.x*n;l.y+=m.Ie.y*n;l.z+=m.Ie.z*n;m=vd(m.ci,d,new w).normalize();n=vd(l,d,new w).normalize();0>=qc(n,e)||(m=qc(m,n),l.sg=m-1,l.item=k,Ra(b,l),Math.acos(m)>=a.$g&&(l.Sm=!0))}}a=null;b=p(b);for(e=b.next();!e.done;e=b.next())e=e.value,c(e)&&(e.item.Hm=t.j,e.Sm||a||(a=e));return a}
f.Yc=function(a){var b=new w(a.s,a.m31,a.m32),c=new w(-a.C,-a.m21,-a.m22),d=this.Tb;a=[];for(var e=of(b,new w(c.x*d,c.y*d,c.z*d)),h=26512.5/d,g=0,k=!0;;){var l=e.shift();if(!l){k||(d*=g+h);break}if(!k){k=l.t-g;if(k>h){d*=g+h;break}h-=k}g=l.t;l.Wa&&a.push(l);k=!l.Wa}e=[];e.cmp=function(m,n){return m.t<n.t?-1:m.t>n.t?1:m.item.index<n.item.index?-1:m.item.index>n.item.index?1:0};h=p(t.b.nc);for(g=h.next();!g.done;g=h.next())g=g.value,!g.fb&&t.j>g.V||(l=g.h.X(),l.y+=g.Hf,!(l=nk(b,c,l,g.pd,g.Gf+g.pd))||
0>l.t||l.t>=d||(l.item=g,Ra(e,l)));b=[];e.length&&b.push(e[0]);b.push.apply(b,ba(a));return b};f.nj=function(){return 0>=this.$a||"reload"==this.Uj.action||2<this.ib?!1:!0};f.Vf=function(){var a=Jk(this);return 0>=a?2:6>a?1:0};f.lc=function(a){this.vc+=Math.min(a,this.Ag());a=Math.floor(this.vc/this.xe);this.ib+=a;this.$a-=a;this.li=Math.max(0,this.li-a);this.vc-=a*this.xe};function Fk(a){Ik.call(this,a);this.cg=6;this.$a=this.dg=0;a.jb[this.constructor.Jc]=this;a.je++}Fk.prototype=Object.create(Ik.prototype);
Fk.prototype.constructor=Fk;
Fk.Na={GrenadeThrow00:{f:0,g:271,x:324,y:1067,a:461,c:25},GrenadeThrow01:{f:0,g:252,x:625,y:1E3,a:467,c:44},GrenadeThrow02:{f:0,g:229,x:0,y:1E3,a:478,c:67},GrenadeThrow03:{f:0,g:200,x:725,y:888,a:480,c:96},GrenadeThrow04:{f:0,g:172,x:480,y:756,a:480,c:124},GrenadeThrow05:{f:0,g:156,x:740,y:333,a:480,c:140},GrenadeThrow06:{f:0,g:150,x:0,y:187,a:480,c:146},GrenadeThrow07:{f:0,g:150,x:480,y:187,a:480,c:146},GrenadeThrow08:{f:0,g:157,x:476,y:477,a:480,c:139},GrenadeThrow09:{f:0,g:164,x:0,y:756,a:480,
c:132},GrenadeThrow10:{f:0,g:152,x:0,y:333,a:478,c:144},GrenadeThrow11:{f:0,g:156,x:0,y:477,a:476,c:140},GrenadeThrow12:{f:0,g:159,x:480,y:617,a:474,c:137},GrenadeThrow13:{f:0,g:157,x:0,y:617,a:480,c:139},GrenadeThrow14:{f:0,g:184,x:0,y:888,a:480,c:112},GrenadeThrow16:{f:58,g:243,x:478,y:1E3,a:147,c:53},GrenadeThrow17:{f:14,g:214,x:960,y:756,a:233,c:82},GrenadeThrow18:{f:0,g:189,x:480,y:888,a:245,c:107},GrenadeThrow19:{f:0,g:226,x:954,y:617,a:194,c:70},GrenadeThrow20:{f:392,g:46,x:0,y:0,a:88,c:187},
GrenadeThrow21:{f:297,g:89,x:305,y:0,a:183,c:165},GrenadeThrow22:{f:263,g:111,x:88,y:0,a:217,c:185},GrenadeThrow23:{f:216,g:155,x:478,y:333,a:262,c:141},GrenadeThrow24:{f:131,g:147,x:851,y:0,a:326,c:149},GrenadeThrow25:{f:63,g:135,x:488,y:0,a:363,c:161},GrenadeThrow26:{f:48,g:269,x:0,y:1067,a:324,c:27}};
Fk.prototype.equip=function(){var a=t.j-this.V;a+=5;37.5<=a?(a=45>a?37.5:a-7.5,this.cc()):this.Ve=this.Ue=0;a=Math.min(a,45);this.Va=this.N.constructor.Na["GrenadeThrow"+("00"+Math.floor(a/2.5)).slice(-2)];this.fc=!1;if(!Hk(this)){if(33==a)this.ka.Ea+=jc(1),t.i.W.get("RevolverEjectorDown").play({gain:1,pitch:1});else if(35<=a&&(this.fe||this.Gd||this.Xd)){this.action="throw";this.V=t.j+1;return}45<=a+1&&(this.action="ready")}};
Fk.prototype.ready=function(){this.Va=this.N.constructor.Na["GrenadeThrow"+"0018".slice(-2)];this.cc();this.fc=!1;Hk(this)||!this.fe&&!this.Gd||(this.action="throw",this.V=t.j+1)};
Fk.prototype["throw"]=function(){var a=t.j-this.V;a+=47;this.Va=this.N.constructor.Na["GrenadeThrow"+("00"+Math.floor(a/2.5)).slice(-2)];this.Ve=this.Ue=0;this.fc=!1;this.Gd=0;if(!Hk(this)){if(58==a)t.i.W.get("MasherSwing01").play({gain:1,pitch:1});else if(60==a)this.ka.Ea+=jc(1);else if(61==a){this.N.$a--;t.b.uf();var b;var c=b=new Wk;c.transform.s+=6E3;c.transform.m31-=6E3;c.transform.m32-=12E4;var d=this.ka.ce.O;Cd(d,c.transform,c.transform);c.h.x=c.transform.s;c.h.y=c.transform.m31;c.h.z=c.transform.m32;
c.I.y=1;c.I.z=-6;c.I.scale(6E3);Nd(d,c.I,c.I);c.h.x-=3*c.I.x;c.h.y-=3*c.I.y;c.h.z-=3*c.I.z;c.I.add(this.ka.I);xd(c.I,c.Nb);K(c,t.cj);c.create();d=c=new Xk;d.transform.s+=28E3;d.transform.m31-=13E3;d.transform.m32-=12E4;var e=this.ka.ce.O;Cd(e,d.transform,d.transform);d.h.x=d.transform.s;d.h.y=d.transform.m31;d.h.z=d.transform.m32;d.I.x=1E4;d.I.y=8E3;d.I.z=-3E4;d.I.scale(.8);Nd(e,d.I,d.I);d.h.x-=3*d.I.x;d.h.y-=3*d.I.y;d.h.z-=3*d.I.z;d.I.add(this.ka.I);xd(d.I,d.Nb);K(d,t.cj);d.create();b.le.push(c);
c.le.push(b);b.le.push(this.ka);c.le.push(this.ka)}70<=a+1&&(this.Xd=null,this.nd=this.Il,Hk(this))}};Fk.prototype.Yc=function(){return null};Fk.prototype.fi=Fk.prototype.Yc;Fk.prototype.Vf=function(){var a=Jk(this);return 0>=a?2:2>a?1:0};function Wk(){dk.call(this,"grenade");this.ra=new H;this.j=3;this.Lg=.5;this.Bb=16;this.Ca=8750;this.Fb=0;this.zg=3;this.yg=.15;this.Of=.4;this.G=t.i.va.get("physicalCardThreshold");this.V=t.j;this.Ra=0;this.Ph=NaN;this.Tb=6E5}Wk.prototype=Object.create(dk.prototype);
f=Wk.prototype;f.constructor=Wk;f.step=function(){t.j==this.V+3&&(this.Ra=-1);this.j+=this.Lg;this.j%=8;0<=t.j-this.Ph&&this.Bh();isNaN(this.Ph)&&25E4>this.I.uc()&&(this.Ph=t.j+5);dk.prototype.step.call(this)};f.Xi=function(){this.Lg=this.j=0};f.ak=function(a){a instanceof Z&&isNaN(this.Ph)&&(this.Ph=t.j+5)};f.create=function(){Xd(this,13125);dk.prototype.create.call(this)};
f.Bh=function(){function a(k){var l=vd(k.h,b.h,new w),m=l.uc();mf(b.h,l,ig)||(l=b.Tb*b.Tb/m*360,1<=l&&k.hg(l))}var b=this;t.i.W.get("explode01").play({gain:1,pitch:1.2});if(t.b.ea){var c=t.b.ea,d=vd(c.h,this.h,new w);d=this.Tb*this.Tb/d.uc();d=Math.min(5,d);c.Ea+=jc(5)*d}c=p(t.b.Mg);for(d=c.next();!d.done;d=c.next())a(d.value);c=p(t.b.Pg);for(d=c.next();!d.done;d=c.next())a(d.value);c=p(t.b.nc);for(d=c.next();!d.done;d=c.next())if(d=d.value,d.fb&&(d=vd(d.h,this.h,new w),!(d.ta(1)>this.Tb+1E5))){var e=
this.Yc(d);d=720;e=p(e);for(var h=e.next();!h.done;h=e.next()){h=h.value;var g=d;h.item instanceof Z&&(g=Math.min(d,h.item.qb));Lk(h,g,1.2);d-=g;if(0>=d)break}}for(c=0;14>c;c++)for(d=1.342*pb(ob)-.342,d=this.Yc(tc(d)),d=p(d),h=d.next();!h.done;h=d.next())e=h.value,e.item instanceof Z||(t.i.W.get("MasherSlap01").play({Pf:.05}),Lk(e,720,1));this.Pa&&(c=new Ck(1E5,this.Pa),c.transform.s=this.h.x,c.transform.m31=this.h.y,c.transform.m32=this.h.z,K(c,t.be),c.create());this.remove()};
f.Yc=function(a){var b=this.h.X(),c=this.Tb,d=mf(b,new w(a.x*c,a.y*c,a.z*c));d&&(c=d.d);var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=p(t.b.nc),g=h.next();!g.done;g=h.next())if(g=g.value,g.fb||!(t.j>g.V)){var k=g.h.X();k.y+=g.Hf;!(k=ok(b,a,k,g.pd,g.Gf).We)||0>k.t||k.t>=c||(k.item=g,Ra(e,k))}d&&e.push(d);return e};
f.Xc=function(){var a=Od(this.O),b=vd(Od(t.na.O),a,new w),c=b.ta(1);c=Math.min(1,c/(4*this.Ca));var d=new w(0,1,0),e=sc(d,b,new w).normalize();sc(b,e,d);var h=t.na.O.af(),g=t.na.O.Fd();this.ra.ze(wd(t.na.O.$e(),e,c).normalize());this.ra.Ae(wd(h,d,c).normalize());this.ra.Be(wd(g,b,c).normalize());Pd(this.ra,a)};
f.ab=function(){this.Xc();t.Cb(wg);t.eb(this.G);t.Ib(0,t.i.P.get("Grenade"));Z.aa.bind();t.G.M("ambientLight",this.ja.lb,!1);t.sb(0);t.Xb(0);t.G.M("color",hd);var a=new H;a.set(this.ra);a.u*=17500;a.A*=17500;a.B*=17500;a.w*=-17500;a.m11*=-17500;a.m12*=-17500;t.G.M("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,xg(Math.floor(this.j),this.Bb),4)};
function Xk(){dk.call(this,"grenade spoon");this.ra=new H;this.j=2;this.Lg=8-1/3;this.Bb=16;this.Ca=8750;this.Fb=0;this.zg=.5;this.yg=.1;this.Of=.002;this.G=t.i.va.get("physicalCardThreshold");this.V=t.j}Xk.prototype=Object.create(dk.prototype);f=Xk.prototype;f.constructor=Xk;f.step=function(){var a=t.j-this.V;this.j+=this.Lg;this.j%=8;120<=a&&this.remove();dk.prototype.step.call(this)};f.Xi=function(){this.j=0;this.Lg=.5*(this.Lg-8)+8};
f.Xc=function(){var a=Od(this.O),b=vd(Od(t.na.O),a,new w),c=b.ta(1);c=Math.min(1,c/(4*this.Ca));var d=new w(0,1,0),e=sc(d,b,new w).normalize();sc(b,e,d);var h=t.na.O.af(),g=t.na.O.Fd();this.ra.ze(wd(t.na.O.$e(),e,c).normalize());this.ra.Ae(wd(h,d,c).normalize());this.ra.Be(wd(g,b,c).normalize());Pd(this.ra,a)};
f.ab=function(){this.Xc();t.Cb(wg);t.eb(this.G);t.Ib(0,t.i.P.get("Grenade"));Z.aa.bind();t.G.M("ambientLight",this.ja.lb,!1);t.sb(0);t.Xb(0);t.G.M("color",hd);var a=new H;a.set(this.ra);a.u*=17500;a.A*=17500;a.B*=17500;a.w*=-17500;a.m11*=-17500;a.m12*=-17500;t.G.M("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,xg(Math.floor(this.j)+8,this.Bb),4)};function Yk(a){Ik.call(this,a);this.Tb=25E4;this.$g=jc(30);a.jb[this.constructor.Jc]=this;a.je++}Yk.prototype=Object.create(Ik.prototype);
Yk.prototype.constructor=Yk;
Yk.Na={MasherStrike00:{f:33,g:251,x:341,y:944,a:353,c:45},MasherStrike01:{f:82,g:233,x:0,y:944,a:341,c:63},MasherStrike02:{f:0,g:203,x:0,y:851,a:471,c:93},MasherStrike03:{f:65,g:168,x:0,y:723,a:415,c:128},MasherStrike04:{f:118,g:98,x:0,y:525,a:362,c:198},MasherStrike05:{f:188,g:87,x:426,y:282,a:292,c:209},MasherStrike06:{f:220,g:73,x:193,y:282,a:233,c:223},MasherStrike07:{f:227,g:53,x:0,y:282,a:193,c:243},MasherStrike08:{f:234,g:29,x:512,y:0,a:165,c:267},MasherStrike09:{f:261,g:17,x:174,y:0,a:156,
c:279},MasherStrike10:{f:266,g:14,x:0,y:0,a:174,c:282},MasherStrike11:{f:229,g:147,x:771,y:525,a:251,c:149},MasherStrike12:{f:224,g:136,x:596,y:525,a:175,c:160},MasherStrike13:{f:224,g:159,x:718,y:282,a:188,c:137},MasherStrike14:{f:218,g:184,x:673,y:723,a:262,c:112},MasherStrike15:{f:217,g:205,x:471,y:851,a:263,c:91},MasherStrike16:{f:215,g:208,x:734,y:851,a:265,c:88},MasherStrike17:{f:222,g:171,x:415,y:723,a:258,c:125},MasherStrike18:{f:246,g:110,x:362,y:525,a:234,c:186},MasherStrike19:{f:261,g:52,
x:677,y:0,a:219,c:244},MasherStrike20:{f:264,g:21,x:330,y:0,a:182,c:275}};Yk.prototype.equip=function(){var a=t.j-this.V;25<=a&&(a=25);this.Va=this.N.constructor.Na["MasherStrike"+("00"+Math.floor(a/2.5)).slice(-2)];this.cc();this.fc=!1;Hk(this)||(this.fe||this.Gd||this.Xd?(this.action="strike",this.V=t.j+1,this.Va=this.N.constructor.Na.MasherStrike11,this.Ve=this.Ue=0):25<=a+1&&(this.action="ready"))};
Yk.prototype.ready=function(){this.Va=this.N.constructor.Na["MasherStrike"+"0010".slice(-2)];this.cc();Hk(this)||!this.fe&&!this.Gd||(this.action="strike",this.V=t.j+1)};
Yk.prototype.strike=function(){var a=t.j-this.V;a+=33;this.Va=this.N.constructor.Na["MasherStrike"+("00"+Math.floor(a/3)).slice(-2)];this.Ve=this.Ue=0;if(!Hk(this))if(33==a)t.i.W.get("MasherSwing01").play({Pf:.05});else if(36==a){this.ka.Ea+=jc(2);a=Rk(this.ka);a=this.N.Yc(a);a=p(a);for(var b=a.next();!b.done;b=a.next())b=b.value,t.i.W.get("MasherSlap01").play({Pf:.05}),b.item instanceof Z&&t.i.W.get("MasherSquish"+xb("01","02","03")).play({gain:2/3,Pf:.05}),Lk(b,120,1),this.ka.Ea+=jc(2)}else 48<=
a&&(b=this.Gd,this.Xd||(b|=this.fe),b?(this.action="strike",this.V=t.j+1):63<=a+1&&(this.Xd?(this.Xd=null,this.nd=this.Il,Hk(this)):this.action="ready"))};
Yk.prototype.Yc=function(a){var b=new w(a.s,a.m31,a.m32),c=new w(-a.C,-a.m21,-a.m22),d=this.Tb;if(a=mf(b,new w(c.x*d,c.y*d,c.z*d)))d=a.d;var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=p(t.b.nc),g=h.next();!g.done;g=h.next())if(g=g.value,g.fb||!(t.j>g.V)){var k=g.h.X();k.y+=g.Hf;!(k=ok(b,c,k,g.pd,g.Gf).We)||0>k.t||k.t>=d||(k.item=g,Ra(e,k))}b=[];e.length&&b.push(e[0]);a&&b.push(a);return b};Yk.prototype.fi=Kk;
function Sk(a){dk.call(this,a);this.Rb=12500;this.Of=1;this.start=t.j;this.Pl=new w(pb(ob)-.5,pb(ob)-.5,pb(ob)-.5);this.Pl.ta(1);this.Jk=1}Sk.prototype=Object.create(dk.prototype);Sk.prototype.constructor=Sk;Sk.prototype.create=function(){dk.prototype.create.call(this);var a=new ng(t.i.Dc.get(this.name));a.La=this.O;a.transform.scale(.1,.1,.1);a.transform.rotate(0,-90,0);K(a,this);a.create();Wd(a,this.ja)};
Sk.prototype.step=function(){this.transform.ik(this.Pl,this.Ql);30<=t.j-this.start&&this.remove();dk.prototype.step.call(this)};Sk.prototype.remove=function(){t.i.W.get("shellCasing0"+(rb(3)+1)).play({gain:.625,pitch:this.Jk});dk.prototype.remove.call(this)};function Pk(a){t.Node.call(this,a);this.jc=t.j}Pk.prototype=Object.create(t.Node.prototype);Pk.prototype.constructor=Pk;
Pk.prototype.step=function(){t.Node.prototype.step.call(this);var a=t.j-this.jc-6;0>a||(0==a&&t.i.W.get(xb("woodSnap01","woodSnap02","woodSnap03")).play({gain:10/60}),5<=(1<=a?a-1:0)&&this.remove())};var zk=[];function Ak(){var a=zk.indexOf(this);0>a||zk.splice(a,1)};function Zk(a){hk.call(this,a);this.Of=100;this.zg=0;this.Ca=4E4;this.cd=18E4;this.Aj=9E4;this.Fb=.5*(this.cd-2*this.Ca-6E4);this.vk=12E4;this.Vc=12500;this.dh=2/3*this.Vc;this.Rj=hk.Ik(125E3);this.Rb=2E5;this.Fi=16;this.Ji=this.Ki=this.cc=this.ef=this.Mj=this.Nj=this.mj=this.Ea=this.xh=this.vi=0;this.qb=360;this.Xg=[];this.Tj=this.Sj=-Infinity;this.df=0;this.fb=!0;this.tg=0;this.ul=-Infinity;this.vl=Number.NEGATIVE_INFINITY;this.wl=4E5;this.wd={}}Zk.prototype=Object.create(hk.prototype);f=Zk.prototype;
f.constructor=Zk;f.create=function(){dk.prototype.create.call(this);var a=this.Rc=new fg("worldCamera");a.wg=6E3;a.og=5E7;a.La=this.O;K(a,this);t.b.na=a;a=this.ce=new fg("selfCamera");a.wg=this.Rc.wg;a.og=this.Rc.og;a.La=this.Rc.O;K(a,t.ye);a=this.Da=new Dk(this);a.Ra=0;K(a,t.ye);a.create();new Yk(this.Da);this.Da.nd=this.Da.jb[0];t.b.cf=-1;t.b.Eg=t.j};
f.step=function(){hk.prototype.step.call(this);if(!(this.Pa.$c||this.Pa.Mm||10>t.j-this.Wj)){var a=this.Pa.ja.lb;.028<.2126*a.x+.7152*a.y+.0722*a.z||(a=xb(.1125,.175),this.Pa.Ab.set(a,a,a),this.Pa.Mm=!0,t.i.W.get("hit02").play({gain:.5,pitch:2}))}a=this.Pa.Jb.Gb;t.b.Gb!=a&&(t.b.Gb=a,Ue(a.yj),t.b.xd=a.xd,t.b.xk(),t.b.Df=a.Df,t.b.Yk=a.Df);if(this.fb){for(a=this.df=0;a<this.Xg.length;a++){var b=this.Xg[a],c=t.j-30-b.Rg;0>c?this.df+=b.la:0<b.la?(b=b.la-2*c,0>=b?this.Xg.splice(a--,1):this.df+=b):0>b.la&&
(b=b.la+2*c,0<=b?this.Xg.splice(a--,1):this.df+=b)}this.fb&&(N.lock&&(a=1,this.Da.N&&(a=Xa(1,this.Da.N.Ij,this.Da.focus)),a=t.Qm*a,this.vi-=N.Lc.x*a,this.xh+=N.Lc.y*a),this.xh=Wa(this.xh,-1073741824,1073741824));a=lc(this.vi);b=lc(this.xh)+jc(1.5*this.Mj);c=jc(1.5*this.Nj);Bd(this.transform);this.transform.rotate(a,0,0);Bd(this.Rc.transform);this.Rc.transform.rotate(0,b,c);t.Ol||(this.Rc.transform.rotate((pb(ob)-.5)*this.Ea,(pb(ob)-.5)*this.Ea,0),this.Ea*=.8125);0==(t.j&1)&&(this.Th()?(a=this.Ye*
Math.PI/this.Fi,this.mj=6E3*Math.abs(Math.sin(a)),this.Ki=Math.sin(a)*Math.PI/210,this.cc=(1-Math.abs(Math.sin(a)))*Math.PI/210):(this.mj*=.75,this.cc*=.75,this.Ki*=.75),this.Ji-=jc(3),0>this.Ji&&(this.Ji=0));this.Rc.transform.m31=this.Fb+this.Ca-6E3-6E3+this.mj;a=1;this.Da.N&&(a=Xa(1,this.Da.N.Ij,this.Da.focus));this.Vc=11E3*Xa(1,2/3,this.Da.focus);this.ce.Ud=jc(24*a);this.Rc.Ud=jc(37.5*a);this.Pa&&(a=this.Pa.sa-this.Fb-this.Ca,this.h.y>a&&(this.h.y=a,this.I.y=Math.min(this.I.y,0)));a=this.wl;a*=
a;for(var d in this.wd)b=this.wd[d],vd(this.h,b.h,new w(0,0,0)).uc()>=a?$k(b):(b.species.sc.call(b,this),b.la||b.remove());if(!(2>t.j-this.vl)){d=a;a=null;b=rf(this.h,this.wl);b=p(b);for(c=b.next();!c.done;c=b.next())for(c=c.value.Yi.first();null!=c.item;c=c.next)if(c.item instanceof al){if(225E8>vd(this.h,c.item.h,new w).uc()){a=c.item;break}}else if(c.item instanceof W&&!c.item.re&&!(c.item.wd||0>=c.item.species.Hc.call(c.item,this))){var e=vd(this.h,c.item.h,new w(0,0,0)).uc();e<d&&(d=e,a=c.item)}a&&
(a.ol(this),this.vl=t.j)}}else if(t.j==t.b.Eg)N.lk(!1);else if(t.j==t.b.Eg+2){d=[];a=p(We);for(b=a.next();!b.done;b=a.next())b=b.value,b.Jb.Gb==t.b.Gb&&d.push(b);d=wb(d);a=wb(d);a=wb(a);b=a.L-a.J-5E4-5E4;d=new w(rb(a.D-a.v-5E4-5E4)+a.v+5E4,d.sa-1E3,rb(b)+a.J+5E4);if(a=mf(d,new w(0,-1E8,0),ig))d.y=a.p.y+1E5,this.h.x=d.x,this.h.y=d.y,this.h.z=d.z,Pd(this.transform,this.h);d=this.Da=new Dk(this);d.Ra=0;K(d,t.ye);d.create();new Yk(this.Da);this.Da.nd=this.Da.jb[0];t.b.cf=-1;this.qb=360;this.Xg=[];this.Tj=
this.Sj=-Infinity;this.df=0;this.fb=!0;t.b.ea=this;for(Ue(t.b.ff.Uh);t.b.nc.length;)t.b.nc[0].remove()}};function bl(a,b){b.re=null;b.species.sc.call(b,a);wb(b.species.W).play();a.ul=t.j;b.la?(b.wd=a,a.wd[b.index]=b,xd(b.Bm,b.h),b.Cm&&(b.jc=t.j,b.fb=!0,b.I.set(0,0,0),b.Nb.set(0,0,0),Zj.add(b)),b.Ra=0,b.jh.Ra=0):b.remove()}
f.Kj=function(){var a=new w(0,0,0);if(!this.fb)return a;(ke.d[t.xa.MoveForwardKey]||N.d[t.xa.MoveForwardMouseButton])&&--a.z;if(ke.d[t.xa.MoveBackwardKey]||N.d[t.xa.MoveBackwardMouseButton])a.z+=1;(ke.d[t.xa.MoveLeftKey]||N.d[t.xa.MoveLeftMouseButton])&&--a.x;if(ke.d[t.xa.MoveRightKey]||N.d[t.xa.MoveRightMouseButton])a.x+=1;a.ta(1)?(this.ef+=1/6,1<this.ef&&(this.ef=1)):(this.ef-=1/6,0>this.ef&&(this.ef=0));this.Nj=(5*this.Nj-a.x)/6;this.Mj=(5*this.Mj-a.z)/6;return a};
f.ll=function(){this.fb&&(ke.p[t.xa.JumpKey]||N.p[t.xa.JumpMouseButton])&&(this.Pi=t.j)};function Rk(a){if(!a.wh){var b=new H;b.set(a.Rc.O);return b}b=vd(Od(a.Rc.O),a.wh,new w).normalize();var c=new w(b.z,0,-b.x),d=new w(0,1,0);sc(b,c,d).ta(1);sc(d,b,c);var e=new H;e.u=c.x;e.A=c.y;e.B=c.z;e.w=d.x;e.m11=d.y;e.m12=d.z;e.C=b.x;e.m21=b.y;e.m22=b.z;e.s=a.Rc.O.s;e.m31=a.Rc.O.m31;e.m32=a.Rc.O.m32;return e}
function cl(a,b){0>b?a.Tj=t.j:0<b&&(a.Sj=t.j);b=Wa(a.qb+b,0,360)-a.qb;a.Xg.push({Rg:t.j,la:b});a.qb+=b;0>=a.qb&&a.Dj()}f.Dj=function(){if(this.fb){this.fb=!1;t.b.Eg=t.j+180;for(var a=p(t.b.nc),b=a.next();!b.done;b=a.next())b=b.value,b.fb&&(b.action.length=0,b.action.unshift("idle"),b.V=NaN,b.path=null);this.Da.remove();Vd(this.Da);this.Da=null;t.b.ea=null}};
f.$j=function(){var a=fj(new E(this.h.z,this.h.x));this.h.z=a.x;this.h.x=a.y;a=null;var b=mf(new w(this.h.x,-1E3,this.h.z),new w(0,-1E8,0),ig);b&&(this.h.y=b.p.y+this.cd-this.Fb-this.Ca,a=Ye(b.item.ca));a&&(a!=this.Pa&&(this.Wj=t.j),this.Pa=a,eg(this.h,a,this.ja.lb))};function Z(){hk.call(this,"mantato");this.Of=150;this.zg=0;this.Ca=30800;this.cd=189200;this.Aj=86E3;this.Fb=.5*(this.cd-2*this.Ca-6E4);this.vk=12E4;this.pd=this.Ca;this.Gf=.5*this.cd-this.Ca;this.Hf=this.Ca+this.Fb-.5*this.cd;this.Vc=1/3*14887;this.dh=2/3*this.Vc;this.Rj=hk.Ik(3E5);this.Rb=2E5;this.Li=-Infinity;this.fb=!0;this.qb=360;this.vb=[];this.Se=[];this.ra=new H;this.Mb="MantatoWalk";this.j=this.jj=this.tf=0;this.jf=new H;this.wj=this.Ah=0;this.qc=12E5*Math.tan(jc(12))/128;this.qc*=this.cd/
176E3;this.G=t.i.va.get("physicalCardThreshold");this.ia=t.i.P.get("Mantato");this.color=hd;this.action=["idle"];this.V=NaN;this.Hm=this.Ti=-Infinity;this.yh=1;this.tj=15E4;return this}Z.prototype=Object.create(hk.prototype);Z.prototype.constructor=Z;Z.Fe=12;Z.Oa=NaN;
Z.yf=function(){Z.aa=t.i.Pb.get("defaultMaterial");var a=t.i.Pb.get("monsterSkin").X();a.name="monsterSplatter";a.Ia=1;t.i.Pb.add(a);dl.G=t.i.va.get("gib");dl.ia=t.i.P.get("spudGib01");a=t.i.P.get("Mantato");Z.Ja=new ue;var b=[];for(l in Z.zc){var c=Z.zc[l];c.zd=b.length;var d=c.x/a.width,e=c.y/a.height,h=c.a/a.width,g=c.c/a.height;var k=new ld(c.f,c.g,0);sd(k,d,e);k.Eb=32767;b.push(k);k=new ld(c.f+c.a,c.g,0);sd(k,d+h,e);k.Eb=32767;b.push(k);k=new ld(c.f+c.a,c.g+c.c,0);sd(k,d+h,e+g);k.Eb=32767;b.push(k);
k=new ld(c.f,c.g+c.c,0);sd(k,d,e+g);k.Eb=32767;b.push(k)}te(Z.Ja,b.length*Z.Ja.Qb);Z.Ja.upload(b);Z.nb={};var l=Z.nb.MantatoDeathFHead=[];l.length=5;a=new H;a.u=1;a.A=0;a.B=-0;a.w=0;a.m11=1;a.m12=0;a.C=0;a.m21=-0;a.m22=1;a.s=0;a.m31=0;a.m32=-0;l.push(a);a=new H;a.u=.9985;a.A=-.009;a.B=-.0547;a.w=-.0056;a.m11=.9654;a.m12=-.2607;a.C=.0552;a.m21=.2606;a.m22=.9639;a.s=-337;a.m31=1411;a.m32=9646;l.push(a);a=new H;a.u=.9938;a.A=-.0598;a.B=-.0936;a.w=-.0146;a.m11=.765;a.m12=-.6439;a.C=.1101;a.m21=.6413;
a.m22=.7594;a.s=-599;a.m31=-1143;a.m32=17840;l.push(a);a=new H;a.u=.9888;a.A=-.1241;a.B=-.0824;a.w=-.0283;a.m11=.3865;a.m12=-.9219;a.C=.1463;a.m21=.9139;a.m22=.3787;a.s=-782;a.m31=-9558;a.m32=23557;l.push(a);a=new H;a.u=.9851;a.A=-.1713;a.B=-.0156;a.w=-.0373;a.m11=-.124;a.m12=-.9916;a.C=.1679;a.m21=.9774;a.m22=-.1285;a.s=-807;a.m31=-25209;a.m32=23644;l.push(a);a=new H;a.u=.9934;a.A=-.1124;a.B=.0233;a.w=-.0401;a.m11=-.5302;a.m12=-.8469;a.C=.1075;a.m21=.8404;a.m22=-.5312;a.s=-1263;a.m31=-50059;a.m32=
18162;l.push(a);a=new H;a.u=.9902;a.A=.097;a.B=-.1003;a.w=-.0561;a.m11=-.3815;a.m12=-.9227;a.C=-.1278;a.m21=.9193;a.m22=-.3723;a.s=-4540;a.m31=-53966;a.m32=18036;l.push(a);a=new H;a.u=.9561;a.A=.249;a.B=-.1548;a.w=-.1114;a.m11=-.1801;a.m12=-.9773;a.C=-.2712;a.m21=.9516;a.m22=-.1445;a.s=-6404;a.m31=-62244;a.m32=19301;l.push(a);a=new H;a.u=.9453;a.A=.2657;a.B=-.1891;a.w=-.1847;a.m11=-.0414;a.m12=-.9819;a.C=-.2687;a.m21=.9632;a.m22=.01;a.s=-6393;a.m31=-66540;a.m32=21398;l.push(a);a=new H;a.u=.9388;a.A=
.2596;a.B=-.2265;a.w=-.2227;a.m11=-.0442;a.m12=-.9739;a.C=-.2628;a.m21=.9647;a.m22=.0164;a.s=-6017;a.m31=-66481;a.m32=21700;l.push(a);a=new H;a.u=.9437;a.A=.227;a.B=-.2405;a.w=-.2338;a.m11=-.0565;a.m12=-.9706;a.C=-.234;a.m21=.9722;a.m22=-3E-4;a.s=-5123;a.m31=-66206;a.m32=21224;l.push(a);a=new H;a.u=.9481;a.A=.2106;a.B=-.2381;a.w=-.2313;a.m11=-.0566;a.m12=-.9712;a.C=-.2181;a.m21=.9759;a.m22=-.005;a.s=-4652;a.m31=-66117;a.m32=21144;l.push(a);a=new H;a.u=.9491;a.A=.2139;a.B=-.2311;a.w=-.2241;a.m11=-.0566;
a.m12=-.9729;a.C=-.2212;a.m21=.9752;a.m22=-.0057;a.s=-4862;a.m31=-66135;a.m32=21186;l.push(a);a=new H;a.u=.9436;a.A=.2447;a.B=-.2232;a.w=-.2163;a.m11=-.0551;a.m12=-.9748;a.C=-.2508;a.m21=.968;a.m22=9E-4;a.s=-5830;a.m31=-66319;a.m32=21426;l.push(a);l=Z.nb.MantatoDeathFChest=[];l.length=5;a=new H;a.u=1;a.A=0;a.B=-0;a.w=0;a.m11=1;a.m12=0;a.C=0;a.m21=-0;a.m22=1;a.s=0;a.m31=0;a.m32=-0;l.push(a);a=new H;a.u=.9916;a.A=-.1173;a.B=.055;a.w=.1259;a.m11=.9725;a.m12=-.1958;a.C=-.0305;a.m21=.201;a.m22=.9791;a.s=
-3498;a.m31=3796;a.m32=6804;l.push(a);a=new H;a.u=.9749;a.A=-.1934;a.B=.1102;a.w=.2213;a.m11=.8963;a.m12=-.3843;a.C=-.0244;a.m21=.399;a.m22=.9166;a.s=-6400;a.m31=-2683;a.m32=15101;l.push(a);a=new H;a.u=.9601;a.A=-.2246;a.B=.1669;a.w=.2797;a.m11=.7517;a.m12=-.5972;a.C=.0087;a.m21=.62;a.m22=.7845;a.s=-8393;a.m31=-17164;a.m32=25181;l.push(a);a=new H;a.u=.9541;a.A=-.2123;a.B=.2114;a.w=.2942;a.m11=.5306;a.m12=-.795;a.C=.0566;a.m21=.8206;a.m22=.5686;a.s=-9429;a.m31=-39030;a.m32=35202;l.push(a);a=new H;
a.u=.9591;a.A=-.1521;a.B=.2388;a.w=.2712;a.m11=.2519;a.m12=-.929;a.C=.0811;a.m21=.9557;a.m22=.2828;a.s=-9721;a.m31=-68375;a.m32=44142;l.push(a);a=new H;a.u=.9359;a.A=-.2158;a.B=.2785;a.w=.2565;a.m11=-.1246;a.m12=-.9585;a.C=.2415;a.m21=.9685;a.m22=-.0613;a.s=-7782;a.m31=-63561;a.m32=42925;l.push(a);a=new H;a.u=.9573;a.A=-.1734;a.B=.2312;a.w=.1975;a.m11=-.1913;a.m12=-.9614;a.C=.2109;a.m21=.9661;a.m22=-.1489;a.s=-4587;a.m31=-61424;a.m32=39511;l.push(a);a=new H;a.u=.9812;a.A=-.1297;a.B=.143;a.w=.1237;
a.m11=-.1466;a.m12=-.9814;a.C=.1482;a.m21=.9807;a.m22=-.1278;a.s=-2376;a.m31=-62808;a.m32=37771;l.push(a);a=new H;a.u=.9889;a.A=-.134;a.B=.0638;a.w=.053;a.m11=-.0825;a.m12=-.9952;a.C=.1386;a.m21=.9875;a.m22=-.0745;a.s=-104;a.m31=-64955;a.m32=38224;l.push(a);a=new H;a.u=.9803;a.A=-.1963;a.B=.0226;a.w=.0119;a.m11=-.0555;a.m12=-.9984;a.C=.1973;a.m21=.979;a.m22=-.0521;a.s=2290;a.m31=-66053;a.m32=39447;l.push(a);a=new H;a.u=.9587;a.A=-.2839;a.B=.017;a.w=.0035;a.m11=-.0481;a.m12=-.9988;a.C=.2843;a.m21=
.9577;a.m22=-.0451;a.s=4830;a.m31=-66621;a.m32=39607;l.push(a);a=new H;a.u=.939;a.A=-.3438;a.B=.0072;a.w=-.0041;a.m11=-.0323;a.m12=-.9995;a.C=.3439;a.m21=.9385;a.m22=-.0317;a.s=6758;a.m31=-66864;a.m32=40168;l.push(a);a=new H;a.u=.9324;a.A=-.3614;a.B=5E-4;a.w=-.0114;a.m11=-.0308;a.m12=-.9995;a.C=.3612;a.m21=.9319;a.m22=-.0328;a.s=7520;a.m31=-66863;a.m32=40232;l.push(a);l=Z.nb.MantatoDeathFRight=[];l.length=5;a=new H;a.u=1;a.A=0;a.B=-0;a.w=0;a.m11=1;a.m12=0;a.C=0;a.m21=-0;a.m22=1;a.s=0;a.m31=0;a.m32=
-0;l.push(a);a=new H;a.u=.7843;a.A=.0746;a.B=.6158;a.w=-.2399;a.m11=.952;a.m12=.1902;a.C=-.5721;a.m21=-.2969;a.m22=.7646;a.s=9743;a.m31=-3525;a.m32=-6511;l.push(a);a=new H;a.u=.3432;a.A=-.0457;a.B=.9382;a.w=-.4899;a.m11=.8435;a.m12=.2203;a.C=-.8014;a.m21=-.5352;a.m22=.2671;a.s=18334;a.m31=-13549;a.m32=-8164;l.push(a);a=new H;a.u=.1186;a.A=-.0109;a.B=.9929;a.w=-.512;a.m11=.8561;a.m12=.0706;a.C=-.8507;a.m21=-.5168;a.m22=.096;a.s=18451;a.m31=-35011;a.m32=-2755;l.push(a);a=new H;a.u=-.0026;a.A=.0526;
a.B=.9986;a.w=-.5678;a.m11=.822;a.m12=-.0448;a.C=-.8232;a.m21=-.5671;a.m22=.0278;a.s=17903;a.m31=-66007;a.m32=-781;l.push(a);a=new H;a.u=-.1294;a.A=-.0053;a.B=.9916;a.w=-.8744;a.m11=.4721;a.m12=-.1116;a.C=-.4676;a.m21=-.8815;a.m22=-.0657;a.s=19277;a.m31=-74449;a.m32=-1361;l.push(a);a=new H;a.u=-.2546;a.A=-.1361;a.B=.9574;a.w=-.9669;a.m11=.0556;a.m12=-.2492;a.C=-.0193;a.m21=-.9891;a.m22=-.1458;a.s=14143;a.m31=-69122;a.m32=708;l.push(a);a=new H;a.u=-.384;a.A=-.2506;a.B=.8887;a.w=-.9162;a.m11=-.0157;
a.m12=-.4003;a.C=.1143;a.m21=-.968;a.m22=-.2236;a.s=5551;a.m31=-66748;a.m32=4187;l.push(a);a=new H;a.u=-.5199;a.A=-.2945;a.B=.8018;a.w=-.8471;a.m11=.0568;a.m12=-.5284;a.C=.1101;a.m21=-.9539;a.m22=-.279;a.s=-1466;a.m31=-68966;a.m32=8748;l.push(a);a=new H;a.u=-.6383;a.A=-.2709;a.B=.7205;a.w=-.7686;a.m11=.1734;a.m12=-.6158;a.C=.0419;a.m21=-.9469;a.m22=-.3189;a.s=-6581;a.m31=-73134;a.m32=12794;l.push(a);a=new H;a.u=-.677;a.A=-.2707;a.B=.6844;a.w=-.7324;a.m11=.1565;a.m12=-.6627;a.C=.0723;a.m21=-.9499;
a.m22=-.3042;a.s=-8637;a.m31=-72967;a.m32=14597;l.push(a);a=new H;a.u=-.6913;a.A=-.2664;a.B=.6717;a.w=-.7185;a.m11=.1552;a.m12=-.6779;a.C=.0763;a.m21=-.9513;a.m22=-.2987;a.s=-8970;a.m31=-72930;a.m32=15014;l.push(a);a=new H;a.u=-.69;a.A=-.2685;a.B=.6722;a.w=-.7198;a.m11=.1563;a.m12=-.6763;a.C=.0765;a.m21=-.9505;a.m22=-.3011;a.s=-8945;a.m31=-72953;a.m32=15058;l.push(a);a=new H;a.u=-.6899;a.A=-.2683;a.B=.6723;a.w=-.7198;a.m11=.1559;a.m12=-.6764;a.C=.0767;a.m21=-.9506;a.m22=-.3008;a.s=-8941;a.m31=-72948;
a.m32=15051;l.push(a);l=Z.nb.MantatoDeathFLeft=[];l.length=5;a=new H;a.u=1;a.A=0;a.B=-0;a.w=0;a.m11=1;a.m12=0;a.C=0;a.m21=-0;a.m22=1;a.s=0;a.m31=0;a.m32=-0;l.push(a);a=new H;a.u=.7883;a.A=-.1199;a.B=-.6035;a.w=.2575;a.m11=.9551;a.m12=.1467;a.C=.5588;a.m21=-.2711;a.m22=.7838;a.s=-10084;a.m31=-3481;a.m32=-5479;l.push(a);a=new H;a.u=.4179;a.A=-.0602;a.B=-.9065;a.w=.3975;a.m11=.9093;a.m12=.1229;a.C=.8169;a.m21=-.4117;a.m22=.404;a.s=-15368;a.m31=-13220;a.m32=-4572;l.push(a);a=new H;a.u=.0732;a.A=.0263;
a.B=-.997;a.w=.4278;a.m11=.9022;a.m12=.0552;a.C=.9009;a.m21=-.4306;a.m22=.0548;a.s=-15447;a.m31=-33893;a.m32=-2205;l.push(a);a=new H;a.u=-.1306;a.A=.0924;a.B=-.9871;a.w=.5821;a.m11=.8131;a.m12=-9E-4;a.C=.8025;a.m21=-.5747;a.m22=-.16;a.s=-17502;a.m31=-60368;a.m32=-1345;l.push(a);a=new H;a.u=-.2799;a.A=.0819;a.B=-.9565;a.w=.8804;a.m11=.4193;a.m12=-.2217;a.C=.3829;a.m21=-.9042;a.m22=-.1894;a.s=-20777;a.m31=-74388;a.m32=418;l.push(a);a=new H;a.u=-.3764;a.A=.2195;a.B=-.9001;a.w=.9264;a.m11=.0955;a.m12=
-.3641;a.C=.006;a.m21=-.9709;a.m22=-.2393;a.s=-16016;a.m31=-70973;a.m32=556;l.push(a);a=new H;a.u=-.4986;a.A=.3067;a.B=-.8108;a.w=.8633;a.m11=.0914;a.m12=-.4963;a.C=-.0781;a.m21=-.9474;a.m22=-.3103;a.s=-10437;a.m31=-70339;a.m32=2100;l.push(a);a=new H;a.u=-.6309;a.A=.3022;a.B=-.7146;a.w=.7723;a.m11=.1559;a.m12=-.6159;a.C=-.0747;a.m21=-.9404;a.m22=-.3318;a.s=-5723;a.m31=-72335;a.m32=5080;l.push(a);a=new H;a.u=-.7098;a.A=.2959;a.B=-.6392;a.w=.6962;a.m11=.1567;a.m12=-.7006;a.C=-.1072;a.m21=-.9423;a.m22=
-.3172;a.s=-3159;a.m31=-72400;a.m32=7812;l.push(a);a=new H;a.u=-.7666;a.A=.2773;a.B=-.5792;a.w=.6308;a.m11=.1561;a.m12=-.7601;a.C=-.1204;a.m21=-.948;a.m22=-.2946;a.s=-1712;a.m31=-72476;a.m32=9709;l.push(a);a=new H;a.u=-.8081;a.A=.2338;a.B=-.5406;a.w=.5798;a.m11=.1544;a.m12=-.8;a.C=-.1036;a.m21=-.9599;a.m22=-.2603;a.s=-1214;a.m31=-72678;a.m32=10560;l.push(a);a=new H;a.u=-.8315;a.A=.1958;a.B=-.5199;a.w=.5485;a.m11=.1414;a.m12=-.8241;a.C=-.0878;a.m21=-.9704;a.m22=-.225;a.s=-1321;a.m31=-72463;a.m32=10400;
l.push(a);a=new H;a.u=-.8354;a.A=.1874;a.B=-.5168;a.w=.5437;a.m11=.1428;a.m12=-.8271;a.C=-.0812;a.m21=-.9719;a.m22=-.2211;a.s=-1386;a.m31=-72440;a.m32=10329;l.push(a);l=Z.nb.MantatoDeathFLegs=[];l.length=5;a=new H;a.u=1;a.A=0;a.B=-0;a.w=0;a.m11=1;a.m12=0;a.C=0;a.m21=-0;a.m22=1;a.s=0;a.m31=0;a.m32=-0;l.push(a);a=new H;a.u=1;a.A=.0022;a.B=-.0045;a.w=-.0011;a.m11=.9741;a.m12=.2262;a.C=.0048;a.m21=-.2262;a.m22=.9741;a.s=-99;a.m31=2611;a.m32=-79;l.push(a);a=new H;a.u=.9997;a.A=.0166;a.B=-.0182;a.w=-.0075;
a.m11=.9095;a.m12=.4156;a.C=.0235;a.m21=-.4153;a.m22=.9094;a.s=263;a.m31=-3725;a.m32=2637;l.push(a);a=new H;a.u=.999;a.A=.0329;a.B=-.0292;a.w=-.0081;a.m11=.7904;a.m12=.6125;a.C=.0432;a.m21=-.6117;a.m22=.7899;a.s=382;a.m31=-20695;a.m32=1293;l.push(a);a=new H;a.u=.9997;a.A=.0111;a.B=-.0226;a.w=.0133;a.m11=.5312;a.m12=.8471;a.C=.0214;a.m21=-.8471;a.m22=.5309;a.s=-43;a.m31=-41222;a.m32=-4042;l.push(a);a=new H;a.u=.9999;a.A=-.0011;a.B=-.012;a.w=.012;a.m11=.1945;a.m12=.9808;a.C=.0012;a.m21=-.9809;a.m22=
.1945;a.s=169;a.m31=-67451;a.m32=-7278;l.push(a);a=new H;a.u=.9994;a.A=-.0338;a.B=.0043;a.w=4E-4;a.m11=.1382;a.m12=.9904;a.C=-.0341;a.m21=-.9898;a.m22=.1381;a.s=1158;a.m31=-72349;a.m32=-6633;l.push(a);a=new H;a.u=.9947;a.A=-.1022;a.B=.012;a.w=.0027;a.m11=.1428;a.m12=.9897;a.C=-.1029;a.m21=-.9845;a.m22=.1423;a.s=2591;a.m31=-72227;a.m32=-5787;l.push(a);a=new H;a.u=.9844;a.A=-.1762;a.B=-.0019;a.w=.0273;a.m11=.1418;a.m12=.9895;a.C=-.1741;a.m21=-.9741;a.m22=.1444;a.s=3941;a.m31=-72389;a.m32=-6109;l.push(a);
a=new H;a.u=.9682;a.A=-.2501;a.B=-.0071;a.w=.0447;a.m11=.1452;a.m12=.9884;a.C=-.2462;a.m21=-.9573;a.m22=.1517;a.s=5512;a.m31=-72717;a.m32=-6217;l.push(a);a=new H;a.u=.9572;a.A=-.2893;a.B=.0018;a.w=.0459;a.m11=.1581;a.m12=.9864;a.C=-.2856;a.m21=-.9441;a.m22=.1646;a.s=6694;a.m31=-72856;a.m32=-6465;l.push(a);a=new H;a.u=.959;a.A=-.2832;a.B=.0019;a.w=.0446;a.m11=.1577;a.m12=.9865;a.C=-.2797;a.m21=-.946;a.m22=.1639;a.s=6738;a.m31=-72891;a.m32=-6441;l.push(a);a=new H;a.u=.967;a.A=-.2549;a.B=-.003;a.w=.0425;
a.m11=.1497;a.m12=.9878;a.C=-.2513;a.m21=-.9553;a.m22=.1556;a.s=6062;a.m31=-72812;a.m32=-6245;l.push(a);a=new H;a.u=.9708;a.A=-.2397;a.B=.0031;a.w=.0317;a.m11=.1413;a.m12=.9895;a.C=-.2376;a.m21=-.9605;a.m22=.1447;a.s=5908;a.m31=-72645;a.m32=-6029;l.push(a);l=Z.nb.MantatoWalk=[];a=new H;a.u=1;a.A=0;a.B=-0;a.w=0;a.m11=1;a.m12=-0;a.C=0;a.m21=0;a.m22=1;a.s=0;a.m31=-0;a.m32=0;l.push(a);a=new H;a.u=.9927;a.A=-.0183;a.B=-.119;a.w=.0277;a.m11=.9966;a.m12=.0773;a.C=.1171;a.m21=-.0801;a.m22=.9899;a.s=70;a.m31=
-3027;a.m32=-619;l.push(a);a=new H;a.u=.9816;a.A=-.0289;a.B=-.1886;a.w=.022;a.m11=.999;a.m12=-.0389;a.C=.1895;a.m21=.034;a.m22=.9813;a.s=288;a.m31=-5629;a.m32=253;l.push(a);a=new H;a.u=.9973;a.A=.0022;a.B=.074;a.w=.0054;a.m11=.9948;a.m12=-.1019;a.C=-.0738;a.m21=.1021;a.m22=.992;a.s=-219;a.m31=-2573;a.m32=764;l.push(a);a=new H;a.u=.9877;a.A=-.0202;a.B=-.155;a.w=.0055;a.m11=.9955;a.m12=-.0949;a.C=.1562;a.m21=.0929;a.m22=.9833;a.s=335;a.m31=259;a.m32=689;l.push(a);a=new H;a.u=.9986;a.A=.0123;a.B=-.0519;
a.w=-.0065;a.m11=.9937;a.m12=.1115;a.C=.053;a.m21=-.111;a.m22=.9924;a.s=178;a.m31=-3079;a.m32=-875;l.push(a);a=new H;a.u=.9996;a.A=.007;a.B=-.0256;a.w=-.0062;a.m11=.9994;a.m12=.0327;a.C=.0258;a.m21=-.0326;a.m22=.9991;a.s=110;a.m31=-5793;a.m32=-254;l.push(a);a=new H;a.u=.9893;a.A=-.0894;a.B=.1151;a.w=.0859;a.m11=.9957;a.m12=.0348;a.C=-.1177;a.m21=-.0245;a.m22=.9928;a.s=-944;a.m31=-2885;a.m32=-285;l.push(a)};
Z.zc={MantatoWalk00:{f:-45,g:-43,x:254,y:0,a:85,c:93},MantatoWalk01:{f:-42,g:-41,x:623,y:189,a:80,c:89},MantatoWalk02:{f:-32,g:-41,x:652,y:97,a:71,c:90},MantatoWalk03:{f:-26,g:-43,x:78,y:0,a:64,c:94},MantatoWalk04:{f:-23,g:-43,x:339,y:0,a:61,c:93},MantatoWalk05:{f:-30,g:-40,x:218,y:279,a:60,c:88},MantatoWalk06:{f:-39,g:-40,x:723,y:97,a:67,c:90},MantatoWalk07:{f:-40,g:-42,x:400,y:0,a:74,c:93},MantatoWalk08:{f:-33,g:-42,x:0,y:189,a:69,c:90},MantatoWalk09:{f:-20,g:-40,x:115,y:368,a:63,c:87},MantatoWalk10:{f:-17,
g:-41,x:495,y:97,a:59,c:91},MantatoWalk11:{f:-19,g:-42,x:142,y:0,a:58,c:94},MantatoWalk12:{f:-16,g:-42,x:474,y:0,a:41,c:93},MantatoWalk13:{f:-15,g:-39,x:703,y:189,a:42,c:89},MantatoWalk14:{f:-19,g:-39,x:278,y:279,a:47,c:88},MantatoWalk15:{f:-29,g:-43,x:515,y:0,a:50,c:93},MantatoWalk16:{f:-15,g:-42,x:745,y:189,a:38,c:89},MantatoWalk17:{f:-14,g:-39,x:85,y:456,a:41,c:86},MantatoWalk18:{f:-19,g:-39,x:325,y:279,a:48,c:88},MantatoWalk19:{f:-20,g:-41,x:554,y:97,a:44,c:91},MantatoWalk20:{f:-19,g:-42,x:565,
y:0,a:41,c:93},MantatoWalk21:{f:-21,g:-39,x:0,y:279,a:50,c:89},MantatoWalk22:{f:-23,g:-38,x:373,y:279,a:51,c:88},MantatoWalk23:{f:-20,g:-41,x:424,y:279,a:41,c:88},MantatoWalk24:{f:-18,g:-40,x:178,y:368,a:56,c:87},MantatoWalk25:{f:-17,g:-38,x:126,y:456,a:59,c:86},MantatoWalk26:{f:-20,g:-38,x:234,y:368,a:59,c:87},MantatoWalk27:{f:-20,g:-40,x:465,y:279,a:45,c:88},MantatoWalk28:{f:-29,g:-41,x:69,y:189,a:57,c:90},MantatoWalk29:{f:-36,g:-37,x:293,y:368,a:73,c:87},MantatoWalk30:{f:-36,g:-37,x:510,y:279,
a:78,c:88},MantatoWalk31:{f:-29,g:-39,x:366,y:368,a:66,c:87},MantatoWalk32:{f:-37,g:-40,x:588,y:279,a:81,c:88},MantatoWalk33:{f:-33,g:-37,x:185,y:456,a:70,c:86},MantatoWalk34:{f:-33,g:-38,x:669,y:279,a:61,c:88},MantatoWalk35:{f:-33,g:-40,x:432,y:368,a:59,c:87},MantatoWalk36:{f:-38,g:-41,x:50,y:279,a:59,c:89},MantatoWalk37:{f:-34,g:-37,x:255,y:456,a:59,c:86},MantatoWalk38:{f:-32,g:-37,x:491,y:368,a:66,c:87},MantatoWalk39:{f:-36,g:-38,x:440,y:456,a:76,c:85},MantatoWalk40:{f:-39,g:-40,x:109,y:279,a:65,
c:89},MantatoWalk41:{f:-43,g:-38,x:730,y:279,a:61,c:88},MantatoWalk42:{f:-44,g:-39,x:126,y:189,a:59,c:90},MantatoWalk43:{f:-42,g:-41,x:0,y:368,a:59,c:88},MantatoWalk44:{f:-29,g:-42,x:174,y:279,a:44,c:89},MantatoWalk45:{f:-25,g:-37,x:516,y:456,a:40,c:85},MantatoWalk46:{f:-27,g:-38,x:557,y:368,a:47,c:87},MantatoWalk47:{f:-25,g:-39,x:604,y:368,a:49,c:87},MantatoWalk48:{f:-21,g:-42,x:754,y:0,a:37,c:92},MantatoWalk49:{f:-34,g:-40,x:185,y:189,a:49,c:90},MantatoWalk50:{f:-32,g:-40,x:234,y:189,a:52,c:90},
MantatoWalk51:{f:-29,g:-42,x:286,y:189,a:49,c:90},MantatoWalk52:{f:-20,g:-43,x:335,y:189,a:40,c:90},MantatoWalk53:{f:-26,g:-39,x:314,y:456,a:51,c:86},MantatoWalk54:{f:-29,g:-39,x:59,y:368,a:56,c:88},MantatoWalk55:{f:-21,g:-40,x:375,y:189,a:40,c:90},MantatoWalk56:{f:-32,g:-43,x:200,y:0,a:54,c:94},MantatoWalk57:{f:-38,g:-41,x:598,y:97,a:54,c:91},MantatoWalk58:{f:-39,g:-41,x:415,y:189,a:59,c:90},MantatoWalk59:{f:-24,g:-43,x:0,y:97,a:44,c:92},MantatoWalk60:{f:-27,g:-44,x:44,y:97,a:61,c:92},MantatoWalk61:{f:-37,
g:-40,x:653,y:368,a:74,c:87},MantatoWalk62:{f:-39,g:-40,x:474,y:189,a:75,c:90},MantatoWalk63:{f:-32,g:-41,x:606,y:0,a:65,c:93},MantatoDeathFHead05:{f:-38,g:-43,x:105,y:97,a:78,c:92},MantatoDeathFHead06:{f:-39,g:-46,x:0,y:0,a:78,c:97},MantatoDeathFHead07:{f:-37,g:-35,x:727,y:368,a:74,c:87},MantatoDeathFHead08:{f:-35,g:-18,x:0,y:543,a:71,c:73},MantatoDeathFHead09:{f:-32,g:1,x:520,y:543,a:68,c:56},MantatoDeathFHead10:{f:-32,g:15,x:706,y:616,a:73,c:44},MantatoDeathFHead11:{f:-39,g:17,x:173,y:754,a:82,
c:39},MantatoDeathFHead12:{f:-47,g:20,x:344,y:794,a:90,c:37},MantatoDeathFHead13:{f:-51,g:19,x:275,y:712,a:91,c:40},MantatoDeathFHead14:{f:-51,g:20,x:366,y:712,a:87,c:40},MantatoDeathFHead15:{f:-50,g:20,x:453,y:712,a:86,c:40},MantatoDeathFHead16:{f:-49,g:20,x:255,y:754,a:85,c:39},MantatoDeathFHead17:{f:-50,g:20,x:340,y:754,a:86,c:39},MantatoDeathFHead18:{f:-49,g:20,x:426,y:754,a:85,c:39},MantatoDeathFChest05:{f:-38,g:-43,x:183,y:97,a:78,c:92},MantatoDeathFChest06:{f:-39,g:-47,x:671,y:0,a:83,c:93},
MantatoDeathFChest07:{f:-38,g:-43,x:625,y:456,a:84,c:80},MantatoDeathFChest08:{f:-44,g:-32,x:279,y:543,a:92,c:63},MantatoDeathFChest09:{f:-45,g:-16,x:669,y:543,a:93,c:52},MantatoDeathFChest10:{f:-43,g:7,x:0,y:668,a:88,c:44},MantatoDeathFChest11:{f:-47,g:20,x:514,y:794,a:94,c:33},MantatoDeathFChest12:{f:-49,g:20,x:93,y:712,a:96,c:41},MantatoDeathFChest13:{f:-46,g:20,x:539,y:712,a:95,c:40},MantatoDeathFChest14:{f:-44,g:20,x:634,y:712,a:92,c:40},MantatoDeathFChest15:{f:-43,g:20,x:726,y:712,a:91,c:40},
MantatoDeathFChest16:{f:-41,g:20,x:0,y:754,a:90,c:40},MantatoDeathFChest17:{f:-40,g:21,x:511,y:754,a:89,c:39},MantatoDeathFChest18:{f:-38,g:21,x:600,y:754,a:87,c:39},MantatoDeathFRight05:{f:-38,g:-43,x:261,y:97,a:78,c:92},MantatoDeathFRight06:{f:-36,g:-41,x:365,y:456,a:75,c:86},MantatoDeathFRight07:{f:-34,g:-30,x:709,y:456,a:75,c:78},MantatoDeathFRight08:{f:-28,g:-20,x:143,y:543,a:69,c:71},MantatoDeathFRight09:{f:-27,g:-4,x:453,y:543,a:67,c:59},MantatoDeathFRight10:{f:-23,g:9,x:351,y:616,a:60,c:46},
MantatoDeathFRight11:{f:-29,g:19,x:687,y:754,a:72,c:39},MantatoDeathFRight12:{f:-34,g:21,x:434,y:794,a:80,c:37},MantatoDeathFRight13:{f:-36,g:20,x:176,y:794,a:82,c:38},MantatoDeathFRight14:{f:-36,g:19,x:258,y:794,a:86,c:38},MantatoDeathFRight15:{f:-37,g:19,x:0,y:794,a:88,c:39},MantatoDeathFRight16:{f:-37,g:20,x:88,y:794,a:88,c:39},MantatoDeathFRight17:{f:-37,g:20,x:189,y:712,a:86,c:41},MantatoDeathFRight18:{f:-37,g:20,x:90,y:754,a:83,c:40},MantatoDeathFLeft05:{f:-38,g:-43,x:339,y:97,a:78,c:92},MantatoDeathFLeft06:{f:-35,
g:-41,x:549,y:189,a:74,c:90},MantatoDeathFLeft07:{f:-35,g:-30,x:556,y:456,a:69,c:81},MantatoDeathFLeft08:{f:-36,g:-20,x:71,y:543,a:72,c:72},MantatoDeathFLeft09:{f:-36,g:-7,x:212,y:543,a:67,c:64},MantatoDeathFLeft10:{f:-38,g:4,x:762,y:543,a:63,c:52},MantatoDeathFLeft11:{f:-39,g:15,x:207,y:616,a:63,c:49},MantatoDeathFLeft12:{f:-42,g:14,x:65,y:616,a:74,c:50},MantatoDeathFLeft13:{f:-45,g:13,x:88,y:668,a:82,c:44},MantatoDeathFLeft14:{f:-46,g:13,x:170,y:668,a:85,c:44},MantatoDeathFLeft15:{f:-47,g:14,x:402,
y:668,a:88,c:43},MantatoDeathFLeft16:{f:-48,g:14,x:490,y:668,a:91,c:43},MantatoDeathFLeft17:{f:-49,g:15,x:0,y:712,a:93,c:42},MantatoDeathFLeft18:{f:-50,g:14,x:581,y:668,a:94,c:43},MantatoDeathFLegs05:{f:-38,g:-43,x:417,y:97,a:78,c:92},MantatoDeathFLegs06:{f:-40,g:-47,x:0,y:456,a:85,c:87},MantatoDeathFLegs07:{f:-37,g:-38,x:371,y:543,a:82,c:61},MantatoDeathFLegs08:{f:-35,g:-26,x:270,y:616,a:81,c:48},MantatoDeathFLegs09:{f:-32,g:-9,x:675,y:668,a:79,c:43},MantatoDeathFLegs10:{f:-36,g:-2,x:588,y:543,a:81,
c:54},MantatoDeathFLegs11:{f:-24,g:4,x:0,y:616,a:65,c:52},MantatoDeathFLegs12:{f:-23,g:6,x:139,y:616,a:68,c:50},MantatoDeathFLegs13:{f:-24,g:12,x:255,y:668,a:70,c:44},MantatoDeathFLegs14:{f:-24,g:11,x:556,y:616,a:71,c:45},MantatoDeathFLegs15:{f:-23,g:10,x:411,y:616,a:71,c:46},MantatoDeathFLegs16:{f:-26,g:10,x:482,y:616,a:74,c:46},MantatoDeathFLegs17:{f:-30,g:11,x:627,y:616,a:79,c:45},MantatoDeathFLegs18:{f:-28,g:12,x:325,y:668,a:77,c:44}};
Z.prototype.create=function(){this.transform.rotate(pb(ob)*Math.PI*2,0,0);Xd(this,37500);zk.push(this);hk.prototype.create.call(this);t.b.nc.push(this)};Z.prototype.step=function(){Z.prototype[this.action[0]].call(this);this.y=this.h.y+this.Fb+this.Ca-this.cd+12500;hk.prototype.step.call(this)};
Z.prototype.Xc=function(){var a=Od(this.O);a.y+=this.Fb+this.Ca-this.cd+103400;var b=vd(Od(t.na.O),a,new w),c=b.ta(1);c=Math.min(1,c/(2*this.cd));var d=new w(0,1,0),e=sc(d,b,new w).normalize();sc(b,e,d);var h=t.na.O.af(),g=t.na.O.Fd();this.ra.ze(wd(t.na.O.$e(),e,c).normalize());this.ra.Ae(wd(h,d,c).normalize());this.ra.Be(wd(g,b,c).normalize());Pd(this.ra,a);this.Mb?(a=Z.nb[this.Mb],this.jf.set(a[this.j%a.length])):this.jf.reset();this.fb&&(a=this.O,a=Math.round(4*(Math.atan2(a.C,a.m22)-Math.atan2(t.na.O.s-
a.s,t.na.O.m32-a.m32))/Math.PI),0>a&&(a+=8),8<=a&&(a-=8),this.jj=a,this.jf.rotate(this.jj*Math.PI/4,0,0));Cd(this.ra,this.jf,this.jf);this.ra.s+=this.ra.w*this.wj;this.ra.m31+=this.ra.m11*this.wj;this.ra.m32+=this.ra.m12*this.wj;a=1+this.Ah;this.ra.scale(a,a,a);if(this.gh){a=p(this.gh);for(b=a.next();!b.done;b=a.next()){c=b.value;c.Kf.s+=this.h.x;c.Kf.m31+=this.h.y;c.Kf.m32+=this.h.z;b=c.Kk;c=Od(c.Kf);Dd(this.jf).tb(c,c);d={};d.h=c;d.jc=t.j+1;e=7E3*b;h=sb(2)?-e:e;var k=nb()*(180/2147483648);g=Math.cos(k);
k=Math.sin(k);d.Aa=new zd;d.Aa.u=g*h;d.Aa.A=k*h;d.Aa.w=-k*e;d.Aa.m11=g*e;this.vb.push(d);this.vb.length>Z.Fe&&this.vb.shift();d={};d.h=c;d.jc=t.j+1;b=7E3*b+3500;c=sb(2)?-b:b;h=nb()*(180/2147483648);e=Math.cos(h);h=Math.sin(h);d.Aa=new zd;d.Aa.u=e*c;d.Aa.A=h*c;d.Aa.w=-h*b;d.Aa.m11=e*b;this.Se.push(d);this.Se.length>Z.Fe&&this.Se.shift()}delete this.gh}};
Z.prototype.ab=function(){Z.Oa+=2;255<Z.Oa&&(u.clear(u.STENCIL_BUFFER_BIT),Z.Oa=130);t.ec(1);u.colorMask(!1,!1,!1,!1);u.stencilFunc(u.ALWAYS,Z.Oa-128,255);u.stencilOp(u.KEEP,u.KEEP,u.REPLACE);var a=this.ra.Fd(),b=qc(a,Od(this.ra));t.Cb(wg);t.eb(t.i.va.get("monoThresholdEffect"));t.Ib(0,t.i.P.get("smokePuff01"));Z.aa.bind();t.sb(0);t.Xb(0);t.G.M("color",hd);for(var c=p(this.vb),d=c.next();!d.done;d=c.next()){var e=d.value;d=this.jf.tb(e.h,new w);if(!(0>qc(d,a)-b)){var h=4>t.j-e.jc?1.4:1;e=(new zd).set(e.Aa);
e.u*=h;e.A*=h;e.w*=h;e.m11*=h;e=Ad(this.ra,e,new H);Pd(e,d);t.G.M("modelMatrix",e);u.drawArrays(u.TRIANGLE_FAN,xg(0,1),4)}}t.ec(2);u.colorMask(!0,!0,!0,!0);u.stencilFunc(u.GEQUAL,Z.Oa-1,127);u.stencilOp(u.KEEP,u.KEEP,u.REPLACE);this.G=t.j==this.mf+1?t.i.va.get("flashCardThreshold"):t.i.va.get("physicalCardThreshold");t.Cb(Z.Ja);t.eb(this.G);t.Ib(0,this.ia);Z.aa.bind();t.G.M("ambientLight",this.ja.lb,!1);t.sb(0);t.Xb(0);t.G.M("color",this.color);a=new H;a.set(this.ra);b=this.qc;a.u*=b;a.A*=b;a.B*=
b;a.w*=-b;a.m11*=-b;a.m12*=-b;t.G.M("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,Z.zc[this.Mb+("00"+(this.jj*this.tf+this.j)).slice(-2)].zd,4);this.Ah*=.75;if("flashCardThreshold"!=this.G.name)for(t.ec(0),u.stencilFunc(u.EQUAL,Z.Oa-1,255),u.stencilOp(u.KEEP,u.KEEP,u.KEEP),a=this.ra.Fd(),b=qc(a,Od(this.ra)),t.Cb(wg),t.eb(t.i.va.get("monoEffect")),t.Ib(0,t.i.P.get("splatter01")),t.i.Pb.get("monsterSplatter").bind(),t.sb(1),t.Xb(0),t.G.M("ambientLight",this.ja.lb,!1),t.G.M("color",dl.Bf),c=p(this.Se),
d=c.next();!d.done;d=c.next())e=d.value,d=this.jf.tb(e.h,new w),0>qc(d,a)-b||(h=4>t.j-e.jc?1.4:1,e=(new zd).set(e.Aa),e.u*=h,e.A*=h,e.w*=h,e.m11*=h,e=Ad(this.ra,e,new H),Pd(e,d),t.G.M("modelMatrix",e),u.drawArrays(u.TRIANGLE_FAN,xg(0,1),4))};
Z.prototype.idle=function(){isNaN(this.V)&&(this.V=t.j,this.Mb="MantatoWalk",this.Bb=64,this.tf=8);var a=t.j-this.V;this.j=0;0==a%30&&t.b.ea&&(el(this,t.b.ea.h),this.action[0]="rush",this.action.unshift("alert"),this.V=NaN,this.path=null);this.j=(Math.floor(a/8)%2+6)%8};
Z.prototype.wander=function(){isNaN(this.V)&&(this.V=t.j,this.Mb="MantatoWalk",this.Bb=64,this.tf=8,this.Vc=1/3*14887);var a=t.j-this.V;if(!this.path){var b=wb(aj.Fl),c=rb(b.L-b.J)+b.J;b=rb(b.D-b.v)+b.v;fl(this,c,b)}0==a%30&&t.b.ea&&(el(this,t.b.ea.h),this.action[0]="rush",this.action.unshift("alert"),this.V=NaN,this.path=null);this.j=Math.floor(a/3)%8};
Z.prototype.alert=function(){isNaN(this.V)&&(this.V=t.j,this.Mb="MantatoWalk",this.Bb=64,this.tf=8);var a=t.j-this.V;this.j=0;18==a&&(this.action.shift(),this.yh&&gl(this)&&(this.action.unshift("attack"),this.V=NaN))};Z.prototype.hit=function(){isNaN(this.V)&&(this.V=t.j,this.Mb="MantatoWalk",this.Bb=64,this.tf=8,this.zm=rb(8));var a=t.j-this.V;this.j=(this.zm+Math.floor(a/2))%8;240==a&&(this.action.shift(),this.V=NaN)};
Z.prototype.attack=function(){isNaN(this.V)&&(this.V=t.j,this.Mb="MantatoWalk",this.Bb=64,this.tf=8,el(this,t.b.ea.h));var a=t.j-this.V;this.j=Math.floor(a/3)%8;0==a&&t.i.W.get("MasherSwing01").play({gain:1,pitch:1.2});if(6==a){var b=vd(t.b.ea.h,this.h,new w);if(b.ta(1)<this.tj){b.y=0;b.ta(1);b.y=1;b.ta(9E3);var c=t.b.ea;c.I.add(b);c.qh=Number.NEGATIVE_INFINITY;c.Pi=Number.NEGATIVE_INFINITY;c.Yh=!0;cl(c,-72);c.Ea+=jc(15);t.i.W.get("MasherSlap01").play({gain:1,pitch:1})}}45==a&&(this.action.shift(),
this.V=NaN)};Z.prototype.rush=function(){isNaN(this.V)&&(this.V=t.j,this.Mb="MantatoWalk",this.Bb=64,this.tf=8,this.Vc=7443.5);var a=t.j-this.V;t.j<this.Am+12||fl(this,t.b.ea.h.z,t.b.ea.h.x);0<a&&0==a%6&&this.yh&&t.b.ea&&gl(this)&&(this.action.unshift("attack"),this.V=NaN);this.j=Math.floor(a/2)%8};
Z.prototype.death=function(){if(isNaN(this.V)){this.V=t.j;var a=NaN;this.Mb="MantatoDeathFChest";for(var b in this.If)this.If[b]<=a||(a=this.If[b],this.Mb=b);this.tf=0}a=t.j-this.V;4<=a&&(a-=4);this.j=Math.floor(a/4);13<this.j&&(this.j=13);this.j+=5;6==a&&t.b.fm();24==a&&t.i.W.get(xb("bodyThud01","bodyThud02")).play({gain:.5});720<=a&&this.remove()};function gl(a){return vd(t.b.ea.h,a.h,new w).uc()<a.tj*a.tj}function fl(a,b,c){t.j!=bj&&(bj=a.Am=t.j,cj=300,a.path=ej(a.h.z,a.h.x,b,c))}
Z.prototype.Kj=function(){var a=new w;if(!this.path||"alert"==this.action[0]||"hit"==this.action[0]||"attack"==this.action[0])return a;for(var b,c;;){b=this.path[0];c=b.getParameter(this.h.z,this.h.x);if(c<b.length)break;this.path.shift();if(!this.path.length)return this.path=null,a}b=b.evaluate(c+1E5);a.z=b.x-this.h.z;a.x=b.y-this.h.x;el(this,new w(b.y,0,b.x));return a};Z.prototype.hg=function(a){this.fb&&(this.mf=t.j,this.I.x=0,this.I.z=0,this.qb-=a,0>=this.qb&&this.Dj())};
Z.prototype.Dj=function(){this.fb&&(this.fb=!1,this.action=["death"],this.V=NaN,t.b.Df--,this.path=null,Ak.call(this),Zj.remove(this))};Z.prototype.remove=function(){this.jh&&this.jh.remove();var a=t.b.nc.indexOf(this);0<=a&&t.b.nc.splice(a,1);hk.prototype.remove.call(this);this.fb&&(Ak.call(this),t.b.Df--)};function el(a,b){b=vd(b,a.h,new w(0,0,0));b.y=0;b.ta(1);a.transform.u=b.z;a.transform.B=-b.x;a.transform.C=b.x;a.transform.m22=b.z}
function Ok(a,b,c,d,e){a.fb&&("attack"==a.action[0]&&a.action.shift(),"hit"!=a.action[0]&&a.action.unshift("hit"),a.V=NaN,a.Li=t.j,a.ja.pa=t.j+1);var h=c*(pb(ob)+1),g=new dl;g.frame=rb(16);g.mb=12E3*(pb(ob)+1);g.mb*=c;g.h.set(0,0,5E4);d.tb(g.h,g.h);g.I.x=5E3*(2*pb(ob)-1);g.I.y=5E3*(2*pb(ob)-1);g.I.z=2E4*(pb(ob)+1);Nd(d,g.I,g.I);g.qf=jc(60*(.25+pb(ob)));sb(2)&&(g.qf=-g.qf);K(g,t.Cg);g.create();g=new dl;g.frame=rb(16);g.mb=8E3*(pb(ob)+1);g.mb*=c;g.h.set(0,0,5E4);d.tb(g.h,g.h);g.I.x=5E3*(2*pb(ob)-1);
g.I.y=5E3*(2*pb(ob)-1);g.I.z=2E4*(pb(ob)+1);Nd(d,g.I,g.I);g.Og=dl.Bf;K(g,t.Cg);g.create();c=Math.sqrt(3*c)+pb(ob)-.5;for(g=0;g<c;g++){var k=new dl;k.Qi=120;k.frame=rb(16);k.mb=12E3;k.h.set(0,0,5E4);d.tb(k.h,k.h);k.I.x=2*pb(ob)-1;k.I.y=2*pb(ob)-1;k.I.z=2*pb(ob);k.I.ta(1E4*(pb(ob)+1));k.I.y+=6E3*pb(ob);Nd(d,k.I,k.I);k.qf=jc(60*(.25+pb(ob)));sb(2)&&(k.qf=-k.qf);sb(2)&&(k.Og=dl.Bf);K(k,t.Cg);k.create()}el(a,Od(t.na.O));Yd(a);c=Od(d);Dd(a.jf).tb(c,c);a.Gm!=t.j&&(a.If={});-2E4<c.y?-1E4>c.x?ab(a.If,"MantatoDeathFRight",
b):1E4<c.x?ab(a.If,"MantatoDeathFLeft",b):56E3<c.y?ab(a.If,"MantatoDeathFHead",b):ab(a.If,"MantatoDeathFChest",b):ab(a.If,"MantatoDeathFLegs",b);a.Gm=t.j;a.gh||(a.gh=[]);d.s-=a.h.x;d.m31-=a.h.y;d.m32-=a.h.z;e.s-=a.h.x;e.m31-=a.h.y;e.m32-=a.h.z;a.gh.push({Kf:d,Kk:h});a.gh.push({Kf:e,Kk:h});a.Ah=Math.min(a.Ah+1/7,.25)}function hl(){dk.call(this,"potato");this.Rb=1E5;this.Ca=12500;this.Fb=0;this.tc=!1;return this}hl.prototype=Object.create(dk.prototype);f=hl.prototype;f.constructor=hl;
f.create=function(){this.V=t.j;this.ra=new H;this.j=0;this.Bb=16;this.qc=25E3;this.G=t.i.va.get("physicalCardThreshold");this.ia=t.i.P.get("Potato");Xd(this,18750);dk.prototype.create.call(this)};f.Xi=function(){this.remove()};
f.Xc=function(){var a=Od(this.O),b=vd(Od(t.na.O),a,new w),c=b.ta(1);c=Math.min(1,c/(4*this.Ca));var d=new w(0,1,0),e=sc(d,b,new w).normalize();sc(b,e,d);var h=t.na.O.af(),g=t.na.O.Fd();this.ra.ze(wd(t.na.O.$e(),e,c).normalize());this.ra.Ae(wd(h,d,c).normalize());this.ra.Be(wd(g,b,c).normalize());Pd(this.ra,a);a=t.j-this.V;this.j=3*Math.floor(a/2);this.j%=this.Bb;0==Math.floor(a/2)%13?(this.G=t.i.va.get("flashCardThreshold"),this.color=hd):1==Math.floor(a/2)%13?(this.G=t.i.va.get("flashCardThreshold"),
this.color=id):(this.G=t.i.va.get("physicalCardThreshold"),this.color=hd)};f.ab=function(){this.Xc();t.Cb(wg);t.eb(this.G);t.Ib(0,this.ia);Z.aa.bind();t.G.M("ambientLight",this.ja.lb,!1);t.sb(0);t.Xb(0);t.G.M("color",this.color);var a=new H;a.set(this.ra);var b=this.qc;a.u*=b;a.A*=b;a.B*=b;a.w*=-b;a.m11*=-b;a.m12*=-b;t.G.M("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,xg(this.j,this.Bb),4)};f.remove=function(){this.Tm.yh+=1;dk.prototype.remove.call(this)};
function dl(){t.Sa.call(this,"SpudGib");tg.call(this);this.Bb=16;this.frame=0;this.mb=25E3;this.scale=1;this.pg=sb(2);this.Nd=lc(nb());this.qf=0;this.Rb=2*this.mb;this.V=this.pk=t.j+4;this.I=new w(0,0,0);this.Qi=600;this.Og=dl.Og;this.Bf=dl.Bf}dl.prototype=Object.create(t.Sa.prototype);dl.prototype.constructor=dl;dl.Og=new F(214,164,93,255);dl.Bf=new F(255,255,144,255);
dl.prototype.create=function(){this.transform.s=this.h.x;this.transform.m31=this.h.y;this.transform.m32=this.h.z;t.Sa.prototype.create.call(this);il(this)};function il(a){a.gi=t.j;a.Ce=a.h.X();var b=qf(a.Ce,a.I);b?(a.nh=b.p,a.oi=b.n,a.Uf=Math.ceil(t.j+b.t),a.oh=b.item):a.Uf=Number.POSITIVE_INFINITY}
dl.prototype.step=function(){this.oh&&this.oh.Dd>this.gi&&il(this);if(t.j<this.Uf){this.qk&&this.qk.Dd>this.gi&&(this.qk=null,this.V=t.j,this.I.set(0,0,0),this.ej=!1,il(this));var a=t.j-this.V;0>a||(this.ej?(this.h.y=this.Ce.y+this.I.y*a,this.transform.m31=this.h.y):(this.h.set(this.Ce.x+this.I.x*a,this.Ce.y+.5*(2*this.I.y+Yj.y*a)*a,this.Ce.z+this.I.z*a),this.transform.s=this.h.x,this.transform.m31=this.h.y,this.transform.m32=this.h.z,t.j%3||(this.Nd+=this.qf)))}else t.j==this.Uf&&(this.h.set(this.nh.x,
this.nh.y,this.nh.z),this.qk=this.oh,this.transform.s=this.h.x,this.transform.m31=this.h.y,this.transform.m32=this.h.z,this.Og==this.Bf&&(Kg(t.b.Tk,this.nh,this.oi,lc(nb()),this.mb*this.scale*2.5,rb(4),4),this.remove()),-1==this.oi.y?(this.Ce=this.h.X(),this.V=t.j+180+rb(360),this.I.set(0,0,0),this.qf=0,this.ej=!1,this.gi=t.j,(a=mf(this.Ce,this.I))?(this.nh=a.p,this.oi=a.n,this.Uf=Math.ceil(t.j+a.t),this.oh=a.item):this.Uf=Number.POSITIVE_INFINITY):0==this.oi.y?(this.Ce=this.h.X(),this.V=t.j+180+
rb(360),this.I.set(0,-500,0),this.ej=!0,this.gi=t.j,(a=mf(this.Ce,this.I))?(this.nh=a.p,this.oi=a.n,this.Uf=Math.ceil(t.j+a.t),this.oh=a.item):this.Uf=Number.POSITIVE_INFINITY):(this.Ce=this.h.X(),this.V=Number.POSITIVE_INFINITY,this.I.set(0,0,0),this.qf=0,this.ej=!1,this.gi=t.j,this.Uf=Number.POSITIVE_INFINITY,this.oh=null));t.j-this.pk>this.Qi&&this.remove();t.Sa.prototype.step.call(this)};
dl.prototype.ab=function(){ug.call(this,this.O);t.Cb(wg);t.eb(dl.G);t.Ib(0,dl.ia);t.sb(0);t.ec(2);t.Xb(0);t.G.M("modelMatrix",this.O);t.G.M("color1",this.Og);t.G.M("color2",this.Bf);t.G.M("ambientLight",this.ja.lb);u.drawArrays(u.TRIANGLE_FAN,xg(this.frame,this.Bb),4);t.Sa.prototype.ab.call(this)};function W(a){dk.call(this,"loot");this.species=a;this.la=a.la;this.Ca=37500;this.Fb=0;this.zg=.8;this.jc=t.j+rb(600);this.fb=!0}W.prototype=Object.create(dk.prototype);W.prototype.constructor=W;
W.Yl=function(){var a=[t.i.W.get("coinPurse01"),t.i.W.get("coinPurse02"),t.i.W.get("coinPurse03"),t.i.W.get("coinPurse04")],b=[t.i.W.get("ingot01"),t.i.W.get("ingot02")],c=[t.i.W.get("gem01"),t.i.W.get("gem02"),t.i.W.get("gem03")],d=[t.i.W.get("crumplePaper01"),t.i.W.get("crumplePaper02")],e={Mb:t.i.P.get("FoodCorn"),qc:37500,W:d,Hc:W.dm,Ec:W.cm,sc:W.am,la:24};t.i.P.get("FoodTomato");W.Hk=[e];e={Xa:t.i.Dc.get("moneyNugget"),la:1,W:c,Hc:W.wb,Ec:W.nb,sc:W.Oa};a={Xa:t.i.Dc.get("moneyCoin"),la:5,W:a,
Hc:W.wb,Ec:W.nb,sc:W.Oa};d={Xa:t.i.Dc.get("moneyBundle"),la:25,W:d,Hc:W.wb,Ec:W.nb,sc:W.Oa};b={Xa:t.i.Dc.get("moneyBar"),la:125,W:b,Hc:W.wb,Ec:W.nb,sc:W.Oa};var h={Xa:t.i.Dc.get("gemRuby"),la:2,W:c,Hc:W.wb,Ec:W.nb,sc:W.Oa},g={Xa:t.i.Dc.get("gemEmerald"),la:10,W:c,Hc:W.wb,Ec:W.nb,sc:W.Oa};c={Xa:t.i.Dc.get("gemSapphire"),la:50,W:c,Hc:W.wb,Ec:W.nb,sc:W.Oa};W.on=[e,h,a,a,a,a,a,g,d,c,b]};
W.pn=function(a,b,c,d){for(;b;){for(var e=0;e<a.length&&!(a[e].la>b);)e++;if(1==c)--e;else if(0==c)e=Math.floor(pb(ob)*e);else{var h=2*c;h=1<=h?2-h:1/h;e=Math.floor(Math.pow(pb(ob),h)*e)}e=a[e];b-=e.la;d.push(new W(e))}};f=W.prototype;f.create=function(){this.V=t.j;this.ra=new H;this.j=0;this.Bb=16;this.G=t.i.va.get("physicalCardThreshold");if(this.species.Xa){var a=this.Xa=new ng(this.species.Xa);a.La=this.O;K(a,this);a.create();this.Rb=a.src.Rb;Wd(a,this.ja)}Xd(this,18E3);dk.prototype.create.call(this)};
f.step=function(){if(this.Xa){var a=t.j-this.jc;a=3*Math.floor(a/3);Bd(this.Xa.transform);this.Xa.transform.rotate((a+.5*Math.sin(a))/6,Math.PI/4,0)}this.wd?t.Sa.prototype.step.call(this):(this.fb?(60==t.j-this.jc&&(this.fb=!1,Zj.remove(this)),dk.prototype.step.call(this)):(this.re&&(a=vd(new w(this.re.h.x,this.re.h.y,this.re.h.z),this.h,new w(0,0,0)),a.uc()<Math.pow(5E4,2)?bl(this.re,this):(a.y*=5,a.ta(25E3),this.h.x+=a.x,this.h.y+=a.y,this.h.z+=a.z),this.transform.s=this.h.x,this.transform.m31=
this.h.y,this.transform.m32=this.h.z),t.Sa.prototype.step.call(this)),this.Xa&&W.Xl(this))};f.ol=function(a){this.re=a;this.Bm=this.h.X();if(this.Cm=this.fb)this.fb=!1,Zj.remove(this);this.species.Ec.call(this,this.re);this.V=t.j};f.remove=function(){this.wd&&$k(this);t.Sa.prototype.remove.call(this);Zj.remove(this);this.species.Kb?t.b.Lb[this.species.Kb.pc]-=this.la:t.b.Lb.food-=this.la;this.Xa&&this.Xa.remove();this.Ld&&(this.Ld.Yg=null,this.Ld.Rg=t.j,this.Ld=null)};f.$j=function(){this.re||this.remove()};
W.Xl=function(a){a=a.ja.lb;a.x=Math.min(1,a.x+.01);a.y=Math.min(1,a.y+.01);a.z=Math.min(1,a.z+.01)};
W.prototype.Xc=function(){var a=Od(this.O);this.la<this.species.la&&(a.y-=21875);var b=vd(Od(t.na.O),a,new w),c=b.ta(1);c=Math.min(1,c/(4*this.Ca));var d=new w(0,1,0),e=sc(d,b,new w).normalize();sc(b,e,d);var h=t.na.O.af(),g=t.na.O.Fd();this.ra.ze(wd(t.na.O.$e(),e,c).normalize());this.ra.Ae(wd(h,d,c).normalize());this.ra.Be(wd(g,b,c).normalize());Pd(this.ra,a);this.j=this.re?Math.floor(Math.min(15,(t.j-this.V)/2+8)):this.la<this.species.la?12:Math.floor((t.j-this.V)/3)%8};
W.prototype.ab=function(){this.Xc();t.Cb(wg);t.eb(this.G);t.Ib(0,this.species.Mb);Z.aa.bind();var a=this.ja.lb.X();a.x+=.05;a.y+=.05;a.z+=.05;t.G.M("ambientLight",a,!1);t.sb(0);t.Xb(0);t.G.M("color",hd);a=new H;a.set(this.ra);var b=this.species.qc;a.u*=b;a.A*=b;a.B*=b;a.w*=-b;a.m11*=-b;a.m12*=-b;t.G.M("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,xg(this.j,this.Bb),4)};W.Xf=function(a){return(a=a.Da.jb[this.species.Kb.Jc])?Math.min(a.cg-Jk(a)-a.$f,this.la):0};
W.yf=function(a){if(a=a.Da.jb[this.species.Kb.Jc])a.$f+=this.la};W.ie=function(a){if(a=a.Da.jb[this.species.Kb.Jc]){var b=Math.min(this.la,a.cg-Jk(a));a.$a+=b;a.$f-=b;this.la-=b;t.b.Lb[a.constructor.pc]-=b;t.b.gm(this.species,b);t.b.uf()}};W.wb=function(){return this.la};W.nb=function(){};W.Oa=function(){t.b.xd-=this.la;this.la=0;0>t.b.xd&&(t.b.xd=0);t.b.xk()};
function $k(a){if(a.species.Kb){var b=a.wd.Da.jb[a.species.Kb.Jc];b&&(b.$f-=a.la)}else a.wd.tg-=a.la;a.Ra=-1;a.jh.Ra=-1;delete a.wd.wd[a.index];a.wd=null}W.dm=function(a){return Math.min(360-a.qb-a.tg,this.la)};W.cm=function(a){a.tg+=this.species.la};W.am=function(a){var b=Math.min(this.la,360-a.qb);cl(a,b);a.tg-=b;this.la-=b;t.b.Lb.food-=b};function al(a){t.Sa.call(this,"LootGun");this.species=a;this.Ca=37500;this.Rb=87500}al.prototype=Object.create(t.Sa.prototype);f=al.prototype;f.constructor=al;
f.create=function(){this.transform.s=this.h.x;this.transform.m31=this.h.y;this.transform.m32=this.h.z;this.ra=new H;this.G=t.i.va.get("physicalCardThreshold");Xd(this,37500);t.Sa.prototype.create.call(this)};f.ol=function(a){bl(a,this)};f.remove=function(){this.Ld&&(this.Ld.Yg=null,this.Ld.Rg=t.j,this.Ld=null);--t.b.Lb.gun;t.Sa.prototype.remove.call(this)};
f.Xc=function(){var a=Od(this.O);a.y+=6250*Math.sin(t.j*Math.PI/30);var b=vd(Od(t.na.O),a,new w),c=b.ta(1);c=Math.min(1,c/(4*this.Ca));var d=new w(0,1,0),e=sc(d,b,new w).normalize();sc(b,e,d);var h=t.na.O.af(),g=t.na.O.Fd();this.ra.ze(wd(t.na.O.$e(),e,c).normalize());this.ra.Ae(wd(h,d,c).normalize());this.ra.Be(wd(g,b,c).normalize());Pd(this.ra,a)};
f.ab=function(){this.Xc();t.Cb(wg);t.eb(this.G);t.Ib(0,this.species.Mb);Z.aa.bind();var a=this.ja.lb.X();a.x+=.05;a.y+=.05;a.z+=.05;t.G.M("ambientLight",a,!1);t.sb(0);t.Xb(0);t.G.M("color",hd);a=new H;a.set(this.ra);var b=this.species.qc;a.u*=b;a.A*=b;a.B*=b;a.w*=-b;a.m11*=-b;a.m12*=-b;t.G.M("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,xg(0,1),4)};al.zc=function(a){return a.Da.jb[this.species.Kb.Jc]?0:1};al.Fe=function(){};
al.Sc=function(a){t.b.An=t.b.Gb;var b=new this.species.Kb(a.Da);a.Da.nd=b;Ue(t.b.ff.Uh)};function Tk(a){t.Ha.call(this,a);tg.call(this);this.G=t.i.va.get("physicalCard");this.ia=t.i.P.get("smokePuff02");this.aa=Tk.aa;this.color=new F(Tk.color.r,Tk.color.bb,Tk.color.qa,255);this.frame=0;this.Bb=16;this.I=new w;this.Nb=new w;this.scale=1;this.Nd=lc(nb());this.jc=t.j}Tk.prototype=Object.create(t.Ha.prototype);Tk.prototype.constructor=Tk;Tk.aa=new $d;Tk.aa.Ia=2;Tk.color=new F(144,144,144,255);
Tk.prototype.step=function(){var a=t.j-this.jc;a=Math.pow(a/540,.625);this.frame=Math.floor(9*a);this.alpha=.25*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.Ka=this.alpha*Tk.color.Ka&255;this.transform.m31+=200;this.I.scale(.8125);a=new w(.5*this.Nb.x+.5*this.I.x,.5*this.Nb.y+.5*this.I.y,.5*this.Nb.z+.5*this.I.z);this.transform.s+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.Nb.set(this.I.x,this.I.y,this.I.z);t.Ha.prototype.step.call(this)};
Tk.prototype.ab=function(){vg.call(this);t.Ha.prototype.ab.call(this)};function Nk(a){t.Ha.call(this,a);tg.call(this);this.G=t.i.va.get("physicalCard");this.ia=t.i.P.get("smokePuff02");this.aa=Tk.aa;this.color=new F(Nk.color.r,Nk.color.bb,Nk.color.qa,255);this.frame=0;this.Bb=16;this.I=new w;this.Nb=new w;this.scale=1;this.Nd=lc(nb());this.ja={pa:4294967295,lb:new w(1,1,1)};this.jc=t.j}Nk.prototype=Object.create(t.Ha.prototype);Nk.prototype.constructor=Nk;Nk.color=new F(212,212,212,255);
Nk.prototype.step=function(){var a=t.j-this.jc;a/=this.Qi;a=Math.pow(a,.75);this.frame=Math.floor(9*a);this.alpha=.375*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.Ka=this.alpha*Nk.color.Ka&255;this.I.scale(.8125);var b=new w(.5*this.Nb.x+.5*this.I.x,.5*this.Nb.y+.5*this.I.y,.5*this.Nb.z+.5*this.I.z);this.transform.s+=b.x;this.transform.m31+=b.y;this.transform.m32+=b.z;this.Nb.set(this.I.x,this.I.y,this.I.z);if(0==a||0==t.j%4)a=Od(this.transform),(b=mf(a,new w(0,-1E8,0),ig))&&(b=Ye(b.item.ca))&&
eg(a,b,this.ja.lb);t.Ha.prototype.step.call(this)};Nk.prototype.ab=function(){vg.call(this);t.Ha.prototype.ab.call(this)};function Ck(a,b){t.Ha.call(this,"ExplodePuff");tg.call(this);this.G=t.i.va.get("image");this.ia=t.i.P.get("explode");this.aa=Ck.aa;this.color=new F(255,255,255,255);this.scale=1;this.mb=a;this.pg=sb(2);this.Nd=lc(nb());this.jc=t.j+1;this.Bb=16;this.Pa=b}Ck.prototype=Object.create(t.Ha.prototype);Ck.prototype.constructor=Ck;Ck.aa=new $d;Ck.aa.Ia=1;
Ck.prototype.step=function(){var a=t.j-this.jc;50<=a&&this.remove();this.scale+=.02;this.transform.m31+=3E3*(1-a/50);this.frame=Math.floor(16*(1-Math.pow(.9375,a)));var b=255*(1-(a-15)/35);255<b&&(b=255);b&=255;this.color.r=b;this.color.bb=b;this.color.qa=b;this.color.Ka=b;b=10/this.Pa.ed;0==a?(this.Pa.Ab.x+=b,this.Pa.Ab.y+=b,this.Pa.Ab.z+=b):10==a&&(this.Pa.Ab.x-=b,this.Pa.Ab.y-=b,this.Pa.Ab.z-=b);t.Ha.prototype.step.call(this)};Ck.prototype.ab=function(){vg.call(this);t.Ha.prototype.ab.call(this)};
function Mk(a,b){t.Ha.call(this,b);tg.call(this);this.G=t.i.va.get("image");this.ia=t.i.P.get("bulletFlare01");this.aa=Mk.aa;this.color=new F(255,255,255,0);this.scale=1;this.mb=a;this.pg=sb(2);this.Nd=lc(nb());this.jc=t.j+1;this.Bb=4}Mk.prototype=Object.create(t.Ha.prototype);Mk.prototype.constructor=Mk;Mk.aa=new $d;Mk.aa.Ia=1;Mk.prototype.step=function(){var a=t.j-this.jc;0<=a&&(3<=a&&this.remove(),this.scale+=.25);this.frame=Math.floor(a);t.Ha.prototype.step.call(this)};
Mk.prototype.ab=function(){vg.call(this);t.Ha.prototype.ab.call(this)};t.b=new t.Node("game");t.jl=new t.Node("gameDraw");t.b.kn=0;t.b.Gb=null;t.b.Ui=0;t.b.yl=0;t.b.xl=0;t.b.nk=null;t.b.nc=[];t.b.Pg=[];t.b.Mg=[];t.b.cf=0;t.b.rl=NaN;t.b.xd=Infinity;t.b.Df=NaN;t.b.Yk=0;t.b.Nm=360;t.b.Im=0;t.b.dj=new F(255,255,255,255);t.b.Lb={yh:0};t.b.Bd=[];t.b.Kg=[];t.b.Wf=!0;
t.b.uf=function(){var a=t.b.ea.Da.N,b=-170,c=119;!(a instanceof Uk)&&a instanceof Qk&&(b+=6,c-=10);var d=Jk(a).toLocaleString("en-US");var e=t.i.P.get("HUDNumerals24Bold");d=t.Rh(e,d,0);d.color=id;d.x=b;d.y=c;d.x-=d.width*d.Fg.width;a.pj=d;t.b.Wf=!0};
t.b.xk=function(){var a=t.b.xd;var b=t.i.P.get("HUDNumeralsSilverAndGold");if(a)a=t.Rh(b,a.toLocaleString("en-US"),0);else{a=[];var c=b.kl("1");a.width=b.qe[c]+b.rg[c];a.height=b.bf;a.Fg=b}a.color=hd;a.x=209;a.y=-127;a.x-=a.width*a.Fg.width;t.b.ui=a;t.b.Wf=!0};t.b.Gn=function(){};
t.b.gm=function(a,b){if(b){for(var c=null,d=0,e=p(t.b.zf),h=e.next();!h.done;h=e.next())if(h=h.value,h.species!=a)d=h.y+h.species.Cd.height;else{c=h;break}c||(c={},c.species=a,c.la=0,c.y=d,t.b.zf.push(c));c.la+=b;c.V=t.j;a=t.i.P.get("HUDNumerals14Bold");c.Gk=t.Rh(a,c.la.toLocaleString("en-US"),0);t.b.Wf=!0}};t.b.Fm=function(){for(var a=0,b=0;b<t.b.zf.length;b++){var c=t.b.zf[b];240<=t.j-c.V?(t.b.zf.splice(b--,1),t.b.Wf=!0):(c.y=Math.max(c.y-.5,a),a+=c.species.Cd.height)}};
t.b.fm=function(){t.b.kills+=1;window.localStorage.setItem("kills",t.b.kills);t.b.cf+=1};
t.b.Em=function(){if(0!=t.b.cf){if(0<t.b.cf){if(t.j<t.b.rl+2)return;t.b.cf--;t.i.W.get("hit02").play({gain:1});t.b.Bd=t.Rh(t.i.P.get("HUDNumerals24Bold"),(t.b.kills-t.b.cf).toLocaleString("en-US"),1);t.b.Bd.Hj=t.j}else t.b.kills>t.b.killsBest&&(t.b.killsBest=t.b.kills,window.localStorage.setItem("killsBest",t.b.killsBest),window.localStorage.setItem("killsBestName","best score")),t.b.kills=0,window.localStorage.setItem("kills",0),t.b.cf=0,t.b.Bd=[],t.b.killsBest?t.b.Kg=t.Rh(t.i.P.get("HUDNumerals14Bold"),
t.b.killsBest.toLocaleString("en-US"),1):t.b.Kg=[];t.b.Wf=!0;t.b.rl=t.j}};t.b.rn=function(a){var b=document.createElement("div");b.style.position="relative";b.style.padding="8px";b.style.marginTop="4px";b.style.fontSize="14pt";b.style.background="#2c80fd";b.style.boxShadow="-2px 5px 0px black";b.innerHTML=a;b.pk=t.j;t.b.Sl.appendChild(b)};t.b.Fn=function(a){t.b.Sl.removeChild(a)};
t.i.ready=function(){t.b.Sl=document.getElementById("tutorialDiv");var a=t.i.P.get("HUDNumerals10");a.qe=[7,5,7,7,8,7,7,7,7,7,3];a.bf=10;a.Vg=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.rg=[0,1,0,0,-1,0,0,0,0,0,0];t.Mi(a);a=t.i.P.get("HUDNumerals14Bold");a.qe=[9,6,9,9,9,9,9,9,9,9,4];a.bf=14;a.Vg=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.rg=[0,1,0,0,0,0,0,0,0,0,0];t.Mi(a);a=t.i.P.get("HUDNumerals24Bold");a.qe=[13,9,13,13,14,13,13,13,13,13,5];a.bf=23;a.Vg=[0,1,0,0,-1,0,0,0,0,0,0];a.rg=[0,3,0,0,0,0,0,0,0,0,0];t.Mi(a);
a=t.i.P.get("HUDNumeralsSilverAndGold");a.qe=[9,6,9,9,9,9,9,9,9,9,4,6,0];a.bf=14;a.Vg=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,0];a.rg=[0,1,0,0,0,0,0,0,0,0,0,-1,4];t.Mi(a);t.Ll=K(new t.Node("scnBuilderMeshes"),t.Zc);t.Cg=K(new t.Node("scnWorld"),t.Zc);t.Bg=K(new t.Node("scnDoors"),t.Cg);t.Bg.Ra=0;t.Qf=K(new t.Node("scnSpuds"),t.Zc);t.Qf.Ra=0;t.cj=K(new t.Node("scnLoot"),t.Zc);t.hi=K(new t.Node("scnShadows"),t.Zc);t.hi.Ra=0;t.Rf=K(new t.Node("scnWindowPanes"),t.Zc);t.Rf.Ra=0;t.be=K(new t.Node("scnEffects"),
t.Zc);t.be.Ra=0;t.ye=K(new t.Node("scnSelf"),t.Zc);t.ye.Ra=0;t.Xm=K(new t.Node("scnHUD"),t.Zc);K(ak,t.Zc);K(t.b,t.Zc);t.Gi=1E3/60;t.j=0;t.eb(t.i.va.get("physical"));t.G.M("clipY",Infinity,!1);t.eb(t.i.va.get("imageContrast"));t.G.M("contrastOffset",0);t.G.M("contrastScale",1.0625);t.Cb(ye);te(ye,ye.pi.length*ye.Qb);ye.upload(ye.pi);t.lf(Ae);te(Ae,2*Ae.elements.length);Ae.upload(Ae.elements);t.b.ff=new Te;t.i.Pb.get("gemRuby").Ia=0;t.i.Pb.get("gemEmerald").Ia=0;t.i.Pb.get("gemSapphire").Ia=0;t.i.Pb.get("bulbGreen").Ia=
0;Z.yf();a=jc(5);Gk.th=[];for(var b=0;9>b;b++){var c=b;c*=1/9;c=Math.pow(c,.5);Gk.th[b]=c*a}a=0;Yk.pc="Masher";Yk.Jc=a++;Uk.pc="Revolver";Uk.Jc=a++;Qk.pc="Carbine";Qk.Jc=a++;Gk.pc="Shotgun";Gk.Jc=a++;Fk.pc="Grenade";Fk.Jc=a++;Qk.ri=t.i.P.get("ViewCarbine");Qk.ei=t.i.P.get("HUDReticleCarbine");Qk.S=t.i.P.get("HUDItemCarbine");Qk.S.offsetY=-12;Gk.ri=t.i.P.get("ViewShotgun");Gk.ei=t.i.P.get("HUDReticleShotgun");Gk.S=t.i.P.get("HUDItemShotgun");Gk.S.offsetY=-10;Uk.ri=t.i.P.get("ViewRevolver");Uk.ei=t.i.P.get("HUDReticleRevolver");
Uk.S=t.i.P.get("HUDItemRevolver");Uk.S.offsetY=-9;Fk.ri=t.i.P.get("ViewGrenade");Fk.ei=t.i.P.get("HUDReticleCarbine");Fk.S=t.i.P.get("HUDItemCarbine");Fk.S.offsetY=-12;Yk.ri=t.i.P.get("ViewMasher");Yk.ei=t.i.P.get("HUDReticleCarbine");Yk.S=t.i.P.get("HUDItemCarbine");Yk.S.offsetY=-12;a=[t.i.W.get("ShotgunShut01")];Yk.Ri={Mb:t.i.P.get("LootMasher"),Cd:t.i.P.get("HUDItemMasher"),qc:75E3/172*99,W:a,Hc:al.zc,Ec:al.Fe,sc:al.Sc,Kb:Yk,la:1};Qk.Ri={Mb:t.i.P.get("LootCarbine"),Cd:t.i.P.get("HUDItemCarbine"),
qc:75E3/172*172,W:a,Hc:al.zc,Ec:al.Fe,sc:al.Sc,Kb:Qk,la:1};Gk.Ri={Mb:t.i.P.get("LootShotgun"),Cd:t.i.P.get("HUDItemShotgun"),qc:75E3/172*176,W:a,Hc:al.zc,Ec:al.Fe,sc:al.Sc,Kb:Gk,la:1};Uk.Ri={Mb:t.i.P.get("LootRevolver"),Cd:t.i.P.get("HUDItemRevolver"),qc:75E3/172*103.2,W:a,Hc:al.zc,Ec:al.Fe,sc:al.Sc,Kb:Uk,la:1};Qk.wi={Mb:t.i.P.get("CarbineMag"),Cd:t.i.P.get("HUDCartridgeCarbine"),qc:37500,W:a,Hc:W.Xf,Ec:W.yf,sc:W.ie,Kb:Qk,la:30};Gk.wi={Mb:t.i.P.get("ShotshellBox"),Cd:t.i.P.get("HUDCartridgeShotgun"),
qc:5E4,W:a,Hc:W.Xf,Ec:W.yf,sc:W.ie,Kb:Gk,la:8};Uk.wi={Mb:t.i.P.get("RevolverLoader"),Cd:t.i.P.get("HUDCartridgeRevolver"),qc:25E3,W:a,Hc:W.Xf,Ec:W.yf,sc:W.ie,Kb:Uk,la:6};Fk.wi={Mb:t.i.P.get("LootGrenade"),Cd:t.i.P.get("HUDGrenade"),qc:26E3,W:a,Hc:W.Xf,Ec:W.yf,sc:W.ie,Kb:Fk,la:1};W.Yl();a=t.b.Tk=new Ig;a.G=t.i.va.get("splatter");a.ia=t.i.P.get("splatter02");a.color=dl.Bf;a.Ia=1;a=t.b.Sk=new Ig;a.G=t.i.va.get("image");a.ia=t.i.P.get("bulletPock01");a.color=new F(255,255,255,128);a.Ia=2;a=new $d;a.name=
"flashWhite";a.me=hd;a.Ia=0;t.i.Pb.add(a);a=new $d;a.name="flashRed";a.me=jd;a.Ia=0;t.i.Pb.add(a);t.b.Jm();t.b.xk();t.b.zf=[];K(t.jl,t.Zc);a=p(["kills","killsBest"]);for(b=a.next();!b.done;b=a.next())b=b.value,t.b[b]=0,c=window.localStorage.getItem(b),null==c?window.localStorage.setItem(b,t.b[b]):t.b[b]=parseFloat(c);t.b.killsBestName="best score";a=window.localStorage.getItem("killsBestName");null==a?window.localStorage.setItem("killsBestName",t.b.killsBestName):t.b.killsBestName=a;t.start()};
t.b.Jm=function(){var a=performance.now();for(t.ya.insertAdjacentHTML("beforeend","Generating world... ");qj(););jj=!0;t.ya.insertAdjacentHTML("beforeend","done ("+t.ya.Yj.format(performance.now()-a)+" ms).<br />");t.ya.insertAdjacentHTML("beforeend","<br />Ready. Click to play!<br />");t.b.Ui=0;t.b.xl=3;t.b.yl=5;if(t.b.kn)a=new uk("devCamera"),K(a,t.Zc),a.create(),t.b.na=a;else{a=Ye(0)[0][0];var b=t.b.ea=new Zk("player");b.vi=Math.floor(2147483648/180*90);b.h.y=a.y+.5*b.cd;b.h.z=a.z;b.h.x=a.x;K(b,
t.Cg);b.create()}t.b.om()};
t.b.fn=function(){if(t.b.ea.Da.je<t.b.Gb.Lj&&!t.b.Lb.gun){var a=null;0==t.b.ea.Da.je?a=Yk:5>t.b.ea.Da.je&&(a=wb([Fk,Qk,Uk,Gk]));if(a&&!t.b.ea.Da.jb[a.Jc])if(a==Fk)new Fk(t.b.ea.Da);else for(var b={},c=0;c<t.b.Gb.Hd.length;b={Qd:b.Qd},c++){var d=function(e){return function(){return t.b.ea?16E10>vd(t.b.ea.h,e.Qd,new w).uc()?!1:!0:!0}}(b);b.Qd=t.b.Gb.Hd[c];if(!(b.Qd.Yg||600>t.j-b.Qd.Rg)&&d()){t.b.Gb.Hd.splice(c,1);t.b.Gb.Hd.push(b.Qd);a=new al(a.Ri);a.h.set(b.Qd.x,b.Qd.y,b.Qd.z);K(a,t.cj);a.create();
a.Ld=b.Qd;b.Qd.Yg=a;t.b.Lb.gun=1;break}}}};
t.b.en=function(){if(!(this.Pg.length>=t.b.yl)){for(var a=[],b=p(t.b.ea.Da.jb),c=b.next();!c.done;c=b.next())if(c=c.value){var d=c.constructor,e=d.wi;if(e){var h=t.b.Lb[d.pc];isNaN(h)&&(h=t.b.Lb[d.pc]=0);h+=Jk(c);h>=c.cg||a.push(e)}}b=t.b.Lb.food;isNaN(b)&&(b=t.b.Lb.food=0);b+=t.b.ea.qb;for(c=0;3>c&&!(360<=b);c++)b+=W.Hk[0].la,a.push(W.Hk[0]);if(a.length)for(b={},c=0;c<t.b.Gb.Hd.length;b={he:b.he},c++)if(b.he=t.b.Gb.Hd[c],!(b.he.Yg||600>t.j-b.he.Rg)){t.b.Gb.Hd.splice(c,1);t.b.Gb.Hd.push(b.he);c=new yk(b.he.x,
b.he.y-1E5,b.he.z);K(c,t.Cg);c.Ld=b.he;b.he.Yg=c;c.Vj=a;c.create();break}}};
t.b.gn=function(){if(!(t.b.nc.length>=t.b.Ui)){var a=t.b.nk;a||(a=wb(We));if(a.Jb.Gb!=t.b.Gb||sb(3))t.b.nk=null;else{var b=wb(a);b=wb(b);var c=b.L-b.J-5E4-5E4;a=new w(rb(b.D-b.v-5E4-5E4)+b.v+5E4,a.sa-1E3,rb(c)+b.J+5E4);if(b=mf(a,new w(0,-1E8,0),ig))a.y=b.p.y+1E5,t.b.ea?(b=vd(t.b.ea.h,a,new w),b=1E12>b.uc()||!mf(a,b,kk)?!1:!0):b=!0,b?(b=new Z,b.h.x=a.x,b.h.y=a.y,b.h.z=a.z,Pd(b.transform,b.h),K(b,t.Qf),b.create(),t.b.Yk--):t.b.nk=null}}};
t.b.dn=function(){if(!(this.Mg.length>=t.b.xl*We.length/20)){var a=wb(We);if(a.Jb.Gb==t.b.Gb){var b=wb(a);b=wb(b);var c=b.L-b.J-5E4-5E4;a=new w(rb(b.D-b.v-5E4-5E4)+b.v+5E4,a.sa-1E3,rb(c)+b.J+5E4);if(b=mf(a,new w(0,-1E8,0),ig))a.y=b.p.y+1E5,t.b.ea?(b=vd(t.b.ea.h,a,new w),b=1E12>b.uc()||!mf(a,b,kk)?!1:!0):b=!0,b&&(a=new Bk(a.x,a.y-1E5,a.z),K(a,t.Cg),a.create())}}};
t.b.step=function(){var a=2*Math.PI/(60*t.b.Nm)*t.j+.75*Math.PI;t.b.Im=12*a/Math.PI%24;a=Wa(1.5*Math.cos(a-Math.PI),.02,1);var b=255*Math.pow(a,1/2.2);t.b.dj.r=b;t.b.dj.bb=b;t.b.dj.qa=b;b=p(We);for(var c=b.next();!c.done;c=b.next())c=c.value,c.$c&&c.Sf.set(a,a,a);for(a=0;16>a;a++){wf=1-wf;b=vf[wf];var d=vf[1-wf];c=p(We);for(var e=c.next();!e.done;e=c.next()){e=e.value;var h=e.index-vf.ca;d[0][h]=e.Ab.x+e.Sf.x;d[1][h]=e.Ab.y+e.Sf.y;d[2][h]=e.Ab.z+e.Sf.z}for(c=0;3>c;c++)for(e=p(uf),h=e.next();!h.done;h=
e.next()){h=h.value;var g=h.ed*b[c][h.Vh.index-vf.ca];g*=h.Zi[c];d[c][h.xg.index-vf.ca]+=g/h.xg.tk}b=p(We);for(e=b.next();!e.done;e=b.next())c=e.value,c.$c&&(e=c.index-vf.ca,d[0][e]=c.Ab.x+c.Sf.x,d[1][e]=c.Ab.y+c.Sf.y,d[2][e]=c.Ab.z+c.Sf.z)}if(0==t.j%1){a=p(We);for(e=a.next();!e.done;e=a.next())b=e.value,c=b.index-vf.ca,b.ja.lb.x=d[0][c],b.ja.lb.y=d[1][c],b.ja.lb.z=d[2][c],d[0][c]=0,d[1][c]=0,d[2][c]=0;d=p(uf);for(h=d.next();!h.done;h=d.next())a=h.value,a.Fc&&(a.ed=a.Vh==a.xg?Af(a.Fc):zf(a.Fc));d=
t.xc.Hl;for(b=a=0;64>b;b++){c=We[b];if(!c)break;c.hf=b;for(e=0;10>e;e++){h=c.Hb[e];if(!h)break;h.index=a++;h.ee(new Float32Array(d.buffer,b*d.ni+48*e,12))}if(c.qg)for(e=p(c.qg),h=e.next();!h.done;h=e.next())for(h=p(h.value.Oc),g=h.next();!g.done;g=h.next())g=g.value,g.Ga[1]=c.hf,g.Ga[4]=c.Hb.length}d.upload();d=p(nj.elements);for(a=d.next();!a.done;a=d.next())a=a.value,(b=Ye(a.ca))&&a.qd&&(a.qd.Ga[1]=b.hf,a.qd.Ga[4]=b.Hb.length);tf&&xf()}t.b.ea&&0==t.j%5&&(this.fn(),this.en(),this.gn(),this.dn());
t.b.Em();t.b.Fm();for(d=!(t.j>=fh+300&&eh>=fh);!(d&&performance.now()>=t.tm-3)&&qj(););};
t.jl.step=function(){t.dc.r=0;t.dc.bb=0;t.dc.qa=0;t.dc.Ka=0;if(t.b.ea){var a=t.j-t.b.ea.ul;a=1-a/8;0>a&&(a=0);t.dc.r+=24*a;t.dc.bb+=24*a;t.dc.qa+=24*a;t.dc.Ka+=24*a;a=t.j-t.b.ea.Tj;a=1.5-a/18;0>a&&(a=0);1<a&&(a=1);t.dc.r+=170*a;t.dc.Ka+=170*a;a=t.j-t.b.ea.Sj;a=1.5-a/18;0>a&&(a=0);1<a&&(a=1);t.dc.bb+=24*a}t.j<t.b.Eg?(a=t.b.Eg-t.j,a=1-a/60,0>a&&(a=0),t.Oj.Ka=255*a):(a=t.j-t.b.Eg,a=1-a/180,0>a&&(a=0),t.Oj.Ka=0,t.dc.Ka=255*a);u.bindFramebuffer(u.FRAMEBUFFER,t.di.object);t.ec(2);u.clear(u.DEPTH_BUFFER_BIT|
u.STENCIL_BUFFER_BIT);0==t.j%60&&t.Ll.children.sort(pj);hg();t.eb(t.i.va.get("physical"));t.Bg.Ra=1;Ud(t.Bg);t.Bg.Ra=0;t.G.M("clipY",Infinity,!1);var b=kb.first();for(a=$e.first();b.item;){if(a.item){if(a.item.si<t.j){var c=a.next;fb(a);a=c;continue}if(0<lb(b.item,a.item)){a=a.next;continue}}c=b.next;fb(b);hb(b,a);b=c}for(;a.item;)b=a.next,a.item.si<t.j&&fb(a),a=b;af.s=.00390625*t.na.O.s;af.m31=.00390625*t.na.O.m31;af.m32=.00390625*t.na.O.m32;t.Cb(wg);t.eb(t.i.va.get("sky"));t.Ib(0,t.i.P.get("concr01"));
t.G.M("texture1",1,!0);t.Ib(1,t.i.P.get("sky01"));t.G.M("color",t.b.dj);t.sb(0);t.ec(1);t.Xb(0);a=new H;b=(.5*t.na.wg+.5*t.na.og)*fg.qj;a.scale(b*t.viewport.ratio,b,1);a.m32=-b/Math.tan(t.na.Ud);Cd(t.na.O,a,a);t.G.M("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,0,4);if(t.Qf.children){t.Qf.children.sort(oj);Z.Oa=128;for(a=t.Qf.children.first();a.item;a=a.next)a.item.ji()&&a.item instanceof Z&&a.item.Xc();u.enable(u.STENCIL_TEST);for(a=t.Qf.children.first();a.item;a=a.next)a.item.ji()&&(a.item instanceof
Z||(u.stencilFunc(u.GEQUAL,128,255),u.stencilOp(u.KEEP,u.KEEP,u.KEEP)),a.item.ab());u.disable(u.STENCIL_TEST)}if(t.b.ea&&t.b.ea.Da.N instanceof Uk&&.5<t.b.ea.Da.focus){t.eb(t.i.va.get("flashCardThreshold"));t.sb(1);t.ec(1);u.depthFunc(u.GREATER);for(a=t.Qf.children.first();a.item;a=a.next)if(a.item instanceof Z&&a.item.Ra&&600>t.j-a.item.Ti){t.G.M("color",new F(0,0,0,32*(1-(t.j-a.item.Ti)/600)));b=a.item;t.Cb(Z.Ja);t.Ib(0,b.ia);t.Xb(0);c=new H;c.set(b.ra);var d=b.qc;c.u*=d;c.A*=d;c.B*=d;c.w*=-d;c.m11*=
-d;c.m12*=-d;t.G.M("modelMatrix",c);u.drawArrays(u.TRIANGLE_FAN,Z.zc[b.Mb+("00"+(b.jj*b.tf+b.j)).slice(-2)].zd,4)}t.G.M("color",hd);u.depthFunc(u.LEQUAL)}t.b.Tk.ab();t.b.Sk.ab();t.eb(Vj.G);t.G.M("modelMatrix",af);Vj.aa.bind();t.sb(1);t.ec(1);t.Xb(1);t.Cb(Vj.Ja);t.lf(Vj.oe);b=a=0;for(c=$e.first();c.item;c=c.next)c.item.Qk==a+b?b+=c.item.Pk:(b&&u.drawElements(u.TRIANGLES,b,u.UNSIGNED_SHORT,2*a),a=c.item.Qk,b=c.item.Pk);b&&u.drawElements(u.TRIANGLES,b,u.UNSIGNED_SHORT,2*a);t.sb(1);t.ec(1);t.Xb(0);t.eb(t.i.va.get("monoEffect"));
t.Cb(wg);u.activeTexture(u.TEXTURE0);u.bindTexture(u.TEXTURE_2D,t.i.P.get("shadow").object);t.G.M("enableTexture0",1,!0);t.G.M("color",t.Yf.color);t.hi.Ra=1;Ud(t.hi);t.hi.Ra=0;if(t.Rf.children){a=t.na.O.Fd();for(b=t.Rf.children.first();b.item;b=b.next)b.item.ji()&&(b.item.depth=qc(a,b.item.h));t.Rf.children.sort(Pi.S);Pi.Xc();t.Rf.Ra=1;Ud(t.Rf);t.Rf.Ra=0}t.be.Ra=1;Ud(t.be);t.be.Ra=0;t.b.ea&&(t.Ml(t.b.ea.ce),gg(t.b.ea.ce),t.ye.Ra=1,Ud(t.ye),t.ye.Ra=0);t.b.ea&&(a=t.b.ea.Da,a.Ra=1,a.ab(),a.Ra=0);t.sb(0);
t.ec(0);t.Xb(0);u.bindFramebuffer(u.FRAMEBUFFER,null);t.xc.kd.M("viewMatrix",Qd);t.xc.kd.upload();t.Cb(wg);t.ii(new Dc(t.canvas.width,t.canvas.height));t.eb(t.i.va.get("imageContrast"));u.activeTexture(u.TEXTURE0);u.bindTexture(u.TEXTURE_2D,t.di.color.object);t.G.M("texture0",0,!0);t.G.M("enableTexture0",1,!0);t.G.M("modelMatrix",Qd);t.G.M("color",hd);t.G.M("imageAdd",t.dc);t.G.M("imageSub",t.Oj);u.drawArrays(u.TRIANGLE_FAN,0,4);t.b.sm()};
t.b.sm=function(){function a(I,L,R,qa,ta,ia,oa){t.Ib(0,I);var Lb=t.canvas.width>>1,qb=t.canvas.height>>1,kc=.5*I.width,Mb=.5*I.height;0==l?L-=Lb:1==l&&(L+=Lb);2==m?R-=qb:3==m&&(R+=qb);0==g?L+=kc:1==g&&(L-=kc);2==k?R+=Mb:3==k&&(R-=Mb);L=Math.round(L);R=Math.round(R);a.S&&(void 0===qa?u.scissor(0,0,t.canvas.width,t.canvas.height):u.scissor(L+Lb-kc+qa,-R+qb-Mb+ta,ia,oa));qa=new H;qa.u=I.width/t.canvas.width*n;qa.m11=-I.height/t.canvas.height*r;qa.s=2*L/t.canvas.width;qa.m31=-2*R/t.canvas.height;t.G.M("modelMatrix",
qa);u.drawArrays(u.TRIANGLE_FAN,0,4)}function b(I){I=t.j-I.Hj;return 60<I?1:1+.25*Math.pow(.9375,I)}if(1==t.bj)t.bj=2;else if(t.b.ea){var c=t.b.ea.Da.N;if(t.b.Wf){t.b.Wl=new ue;var d=[];c&&(d=d.concat(c.pj));d=d.concat(t.b.Bd);d=d.concat(t.b.Kg);d=d.concat(t.b.ui);for(var e=p(t.b.zf),h=e.next();!h.done;h=e.next())d=d.concat(h.value.Gk);ve(d);t.b.Wf=!1}t.ii(new Dc(t.canvas.width,t.canvas.height));t.xc.kd.M("viewMatrix",Qd);t.xc.kd.upload();t.ec(0);t.Xb(0);var g=0,k=2,l=0,m=2,n=1,r=1;t.sb(2);u.enable(u.SCISSOR_TEST);
a.S=!0;t.Cb(wg);t.eb(t.i.va.get("image"));t.G.M("color",hd);a.S=!1;g=1;k=2;l=4;m=5;d=p(t.b.zf);for(h=d.next();!h.done;h=d.next()){e=h.value;h=e.species.Cd.height;var q=Wa(-3+(t.j-e.V)/60,0,1)*h*.5;u.scissor(0,(t.canvas.height>>1)-44+e.y-h+q,t.canvas.width,t.canvas.height);a(e.species.Cd,-189,44-e.y+q)}a.S=!0;u.scissor(0,0,t.canvas.width,t.canvas.height);c&&(c.nj()&&(g=4,k=2,l=4,m=5,d=Math.cos(60*t.j/Math.PI),d=Wa(d,0,1),t.G.M("color",new F(255,255*d,255*d,127+128*d)),d=t.i.P.get("HUDWarnReload"),
a(d,0,30),t.G.M("color",hd)),e=[hd,new F(255,255,64,255),new F(208,0,0,255)],c instanceof Uk?(h=c.ib,g=0,k=3,l=4,m=5,d=t.i.P.get("HUDMagRevolver"),a(d,-158-34*h,123,34*h,0,34,34),k=2,d=t.i.P.get("HUDAmmo2"),t.G.M("color",e[c.Vf()]),a(d,-201,91),t.G.M("color",hd)):c instanceof Qk?(h=c.ib,g=0,k=3,l=4,m=5,d=t.i.P.get("HUDMagCarbine"),a(d,-208,124+13*h,0,13*h,97,13),k=2,d=t.i.P.get("HUDAmmo3"),t.G.M("color",e[c.Vf()]),a(d,-208,81),t.G.M("color",hd)):c instanceof Gk?(h=c.Kc,g=0,k=3,l=4,m=5,d=t.i.P.get("HUDMagShotgun"),
a(d,-150-18*h,123,18*h,0,18,34),k=2,d=t.i.P.get("HUDAmmo2"),t.G.M("color",e[c.Vf()]),a(d,-201,91),t.G.M("color",hd)):c instanceof Fk&&(g=0,k=2,l=4,m=5,d=t.i.P.get("HUDAmmo2"),t.G.M("color",e[c.Vf()]),a(d,-201,91),t.G.M("color",hd)));d=Math.round(t.b.ea.qb/3);g=0;k=2;l=4;m=5;e=t.i.P.get("HUDLife");a(e,-216,-141,0,18,148,22);a(e,-189,-156,0,12,d,6);h=Math.round(t.b.ea.df/3);0>h?a(e,-189+d,-162,0,6,-h,6):0<h&&a(e,-189+d-120,-168,120-h,0,h,6);isNaN(t.b.xd)||(g=1,k=2,l=4,m=5,d=t.b.ui,d=209-d.width*d.Fg.width,
e=t.i.P.get("HUDTreasure"),a(e,d,-146),t.b.xd||(e=t.i.P.get("HUDChecked"),t.G.M("color",new F(90,145,255,255)),a(e,d+14,-142),t.G.M("color",hd)));c&&t.b.ea.Da.fc&&(t.sb(1),t.eb(t.i.va.get("monoEffect")),d=new yd,t.b.ea.wh?(t.G.M("color",new F(255,0,0,255)),e=t.b.ea.wh,t.b.na.Ck.transform(new yd(e.x,e.y,e.z,1),d),d.x/=2*d.a,d.y/=2*d.a):t.G.M("color",new F(0,128,255,255)),t.G.M("ambientLight",new w(1,1,1)),g=4,k=5,l=4,m=5,(e=c.constructor.ei)&&a(e,Math.round(d.x*t.canvas.width),Math.round(-d.y*t.canvas.height)),
t.sb(2),t.eb(t.i.va.get("image")),t.G.M("color",hd));u.disable(u.SCISSOR_TEST);t.Cb(t.b.Wl);d=function(){y.u=n*z.width/v;y.m11=r*z.height/B;y.s=x/v;y.m31=-A/B;t.G.M("modelMatrix",y)};h=e=0;var v=t.canvas.width>>1,B=t.canvas.height>>1,y=new H;if(c&&c.pj){q=c.pj;h=q.length;if(!(c instanceof Yk)){var x=q.x;var A=q.y;var z=q.Fg;t.Ib(0,z);d();t.G.M("color",q.color);u.drawArrays(u.TRIANGLES,e,h)}e+=h}z=t.i.P.get("HUDNumerals24Bold");t.Ib(0,z);x=208;A=-134;c=t.j-t.b.Bd.Hj;60>c?(n=r=1.5*(1+.25*Math.pow(.9375,
c)),x=0,x-=t.b.Bd.width*z.width*n*.5,A+=22-.5*c,A+=t.b.Bd.height*z.height*r):(n=r=b(t.b.Bd),x-=t.b.Bd.width*z.width*n,A+=t.b.Bd.height*z.height*r);x+=1;A+=2;d();h=t.b.Bd.length;t.G.M("color",id);u.drawArrays(u.TRIANGLES,e,h);--x;A-=2;d();t.G.M("color",2>t.j-t.b.Bd.Hj?hd:kd);u.drawArrays(u.TRIANGLES,e,h);e+=h;n=r=1;z=t.i.P.get("HUDNumerals14Bold");t.Ib(0,z);x=208;A=-104;x-=t.b.Kg.width*z.width;A+=t.b.Kg.height*z.height;h=t.b.Kg.length;--x;A-=2;d();t.G.M("color",hd);u.drawArrays(u.TRIANGLES,e,h);e+=
h;n=r=1;t.b.ui&&(c=t.b.ui,z=c.Fg,t.Ib(0,z),h=c.length,x=c.x+1,A=c.y+2,d(),t.G.M("color",id),u.drawArrays(u.TRIANGLES,e,h),x=c.x,A=c.y,d(),t.G.M("color",c.color),u.drawArrays(u.TRIANGLES,e,h),e+=h);u.enable(u.SCISSOR_TEST);c=p(t.b.zf);for(h=c.next();!h.done;h=c.next()){q=h.value;x=-188;A=44;h=q.species.Cd.height;var D=Wa(-3+(t.j-q.V)/60,0,1)*h*.5;u.scissor(0,(t.canvas.height>>1)-A+q.y-h+D,t.canvas.width,t.canvas.height);h=q.Gk;z=h.Fg;t.Ib(0,z);h=h.length;A+=-q.y+19;A+=D;--x;A+=2;d();t.G.M("color",
id);u.drawArrays(u.TRIANGLES,e,h);x+=1;A-=2;d();t.G.M("color",hd);u.drawArrays(u.TRIANGLES,e,h);e+=h}u.scissor(0,0,t.canvas.width,t.canvas.height);u.disable(u.SCISSOR_TEST)}};
t.b.hn=function(){if(t.b.Uc)for(var a=p(t.b.Uc),b=a.next();!b.done;b=a.next()){b=b.value;var c=b.Ub,d=b.Vb,e=1-(t.Oh-b.Af)/20;0<e?(c-=240*e*e,b.style.left=c+"px",b.style.top=d+"px"):0!=t.Oh%4||b.pb||(c+=Math.floor(2*Math.random()),d+=Math.floor(2*Math.random()),b.style.left=c+"px",b.style.top=d+"px")}t.b.ah&&(t.b.ah.style.backgroundPosition="0px "+256*-Math.floor(t.Oh/4)+"px")};
t.b.Rk=function(){var a=t.Pm=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor="#2c80fd";a.style.mixBlendMode="color";t.ge.appendChild(a)};
t.b.Ih=function(){t.ya&&t.ge.removeChild(t.ya);var a=t.ya=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor=0==t.j?"#2c80fdff":"#2c80fd40";a.style.overflow="hidden";t.ge.appendChild(a);t.b.Uc=[];t.Oh=0};
t.b.Qg=function(){function a(){t.i.W.get("hit02").play({gain:.5})}function b(){t.i.W.get("woodSnap02").play()}t.b.Ih();if(0==t.j){var c=document.createElement("div");c.style.width="256px";c.style.height="256px";c.style.position="absolute";c.style.top="20px";c.style.right="20px";c.style.background='url("'+t.i.P.get("MenuMantato").data.src+'")';c.style.backgroundPosition="0px 0px";t.ya.appendChild(c);t.b.ah=c}c=62;var d=0,e=document.createElement("button");e.style.zIndex=2;e.style.width="134px";e.style.height=
"44px";e.style.position="absolute";e.Vb=c;c+=44;e.Ub=29;e.Af=d;d+=6;t.b.Uc.push(e);e.style.border="none";e.style.background='url("'+t.i.P.get("MenuButtonPlay").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -44px";delete t.b.ah;N.lk(!0)};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.pb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.pb=
1;this.style.left=this.Ub+"px";this.style.top=this.Vb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.pb=0};t.Bn=e;t.ya.appendChild(e);e=document.createElement("button");e.style.zIndex=2;e.style.width="133px";e.style.height="42px";e.style.position="absolute";e.Vb=c;c+=44;e.Ub=29;e.Af=d;d+=6;t.b.Uc.push(e);e.style.border="none";e.style.background='url("'+t.i.P.get("MenuButtonOptions").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=
function(){this.style.backgroundPosition="0px -44px";delete t.b.ah;t.b.mm()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.pb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.pb=1;this.style.left=this.Ub+"px";this.style.top=this.Vb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.pb=0};t.ya.appendChild(e);e=document.createElement("button");e.style.zIndex=2;e.style.width="133px";e.style.height=
"42px";e.style.position="absolute";e.Vb=c;c+=44;e.Ub=29;e.Af=d;d+=6;t.b.Uc.push(e);e.style.border="none";e.style.background='url("'+t.i.P.get("MenuButtonReadme").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -44px";delete t.b.ah;t.b.nm()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.pb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.pb=
1;this.style.left=this.Ub+"px";this.style.top=this.Vb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.pb=0};t.ya.appendChild(e);e=document.createElement("button");e.style.zIndex=2;e.style.width="133px";e.style.height="42px";e.style.position="absolute";e.Vb=c;c+=44;e.Ub=29;e.Af=d;d+=6;t.b.Uc.push(e);e.style.border="none";e.style.background='url("'+t.i.P.get("MenuButtonDonate").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition=
"0px -44px";delete t.b.ah;t.b.lm()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.pb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.pb=1;this.style.left=this.Ub+"px";this.style.top=this.Vb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.pb=0};t.ya.appendChild(e);c=p(t.b.Uc);for(d=c.next();!d.done;d=c.next())d=d.value,d.style.left=d.Ub+"px",d.style.top=d.Vb+"px"};
t.b.mm=function(){function a(){t.i.W.get("hit02").play({gain:.5})}function b(){t.i.W.get("woodSnap02").play()}t.b.Ih();t.Ak={};for(var c in t.Ba)t.Ak[c]=t.Ba[c];t.zk={};for(var d in t.xa)t.zk[d]=t.xa[d];d=document.createElement("div");d.style.height="100%";d.style.fontSize="6pt";d.style.lineHeight="1.5em";d.style.overflowY="scroll";d.style.padding="0";d.style.background="#505050";d.style.userSelect="none";t.ya.appendChild(d);c=t.ya.S=document.createElement("div");c.style.position="absolute";c.style.top=
"40px";c.style.right="56px";c.style.width="240px";c.style.fontSize="6pt";c.style.lineHeight="1.5em";t.ya.appendChild(c);c=document.createElement("div");c.style.padding="5px 102px 5px 20px";d.appendChild(c);c.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Options</h2>\n\t\t');d=document.createElement("input");d.id="inputCheckbox_musicEnabled";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Ba.musicEnabled;d.oninput=function(k){b();t.Ba.musicEnabled=
k.target.checked?1:0;t.Audio.Ob(t.Ba.musicEnabled)};d.style.marginTop="8px";t.Vi=d;var e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Music";d.onmouseenter=e.onmouseenter=function(){t.ya.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Music</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tBoots and Pants and Boots and Pants.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tYou can also press <b>M</b> to toggle the music at any time.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputCheckbox_viewportFitWindow";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Ba.viewportFitWindow;d.oninput=function(k){b();t.Ba.viewportFitWindow=k.target.checked?1:0;t.Dg()};d.style.marginTop="8px";t.Zh=d;e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Fit window";d.onmouseenter=e.onmouseenter=function(){t.ya.S.innerHTML=
'\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Fit Window</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tHave the game display as big as possible inside the browser window.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tYou can also use the <b>-</b> and <b>+</b> keys to adjust the size at any time.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");
d.id="inputCheckbox_lightingFancy";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Ba.lightingFancy;d.oninput=function(k){b();t.Ba.lightingFancy=k.target.checked?1:0};d.style.marginTop="8px";e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Illumination Sampling";d.onmouseenter=e.onmouseenter=function(){t.ya.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Illumination Sampling</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tAllow global illumination sampling in the fragment shader, for a realistic-looking world.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDisabling this might improve your framerate.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");c.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t<h3 style="color:#FFFF00; text-shadow:-1px 2px black;">Mouse</h3>\n\t\t');d=document.createElement("input");d.id="inputCheckbox_mouseRaw";d.name="mouseRaw";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Ba.mouseRaw;d.oninput=function(k){b();t.Ba.mouseRaw=k.target.checked?1:0};d.style.marginTop="8px";e=document.createElement("label");
e.setAttribute("for",d.id);e.innerHTML="Raw mouse input";d.onmouseenter=e.onmouseenter=function(){t.ya.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Raw Mouse Input</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tEnable unadjusted hardware mouse input.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tThis will make your aiming rotation based on the movement of your mouse, regardless of how fast you move it, which is recommended for first-person gaming.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tCurrently supported only in Chrome, Edge, Opera, and <em>not</em> available in Firefox, Safari, or Linux.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputNumber_mouseDPI";d.name="mouseDPI";d.type="number";d.min=100;d.step=100;d.style.fontSize="7pt";d.value=t.Ba.mouseDPI;d.oninput=function(k){k.target.checkValidity()&&(t.Ba.mouseDPI=parseFloat(k.target.value),t.$i())};d.style.marginTop="8px";d.style.width="5em";e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Mouse DPI:";
d.onmouseenter=e.onmouseenter=function(){t.ya.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Mouse DPI</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tFor gamers: if you know the DPI of your mouse, enter it here.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tOtherwise, just leave this value at its default.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: 1600\n\t\t\t\t\t</p>\n\t\t\t\t\t';a()};c.appendChild(e);c.insertAdjacentHTML("beforeend"," ");c.appendChild(d);c.insertAdjacentHTML("beforeend","<br />");d=
document.createElement("input");d.id="inputNumber_mouseScale";d.name="mouseScale";d.type="number";d.min=.125;d.step=.125;d.style.fontSize="7pt";d.value=t.Ba.mouseScale;d.oninput=function(k){k.target.checkValidity()&&(t.Ba.mouseScale=parseFloat(k.target.value),t.$i())};d.style.marginTop="8px";d.style.width="5em";e=document.createElement("label");e.setAttribute("for",d.id);e.title=" ";e.innerHTML="Mouse scale:";d.onmouseenter=e.onmouseenter=function(){t.ya.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Mouse Scale</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tInches of mouse movement at the given DPI to perform a 360\u00b0 rotation in the game.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tLower values will increase the aiming sensitivity.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: 3\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(e);c.insertAdjacentHTML("beforeend"," ");c.appendChild(d);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputNumber_wheelScale";d.name="wheelScale";d.type="number";d.min=1;d.step=1;d.style.fontSize="7pt";d.value=t.Ba.wheelScale;d.oninput=function(k){k.target.checkValidity()&&(t.Ba.wheelScale=parseFloat(k.target.value))};d.style.marginTop="8px";d.style.width="5em";e=document.createElement("label");e.setAttribute("for",d.id);e.title=" ";e.innerHTML=
"Wheel scale:";d.onmouseenter=e.onmouseenter=function(){t.ya.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Wheel Scale</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tUnits of mouse wheel delta to trigger a mouse wheel event. This only matters if you have assigned controls to the mouse wheel.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tIf you have a notched mouse wheel, the recommended value is 1. For smooth-spinning wheels, however, you may wish to use a greater value to make it less sensitive.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tThe delta units are not standardized, and vary by browser, OS, and  hardware. You will have to experiment to find what works for you.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: 1\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(e);c.insertAdjacentHTML("beforeend"," ");c.appendChild(d);c.insertAdjacentHTML("beforeend","<br />");c.insertAdjacentHTML("beforeend",'\n\t\t\t\t<br />\n\t\t\t\t<h3 style="color:#FFFF00; text-shadow:-1px 2px black;">Controls</h3>\n\t\t\t');d=e=document.createElement("div");d.style.display="flex";d.style.flexFlow="row nowrap";c.appendChild(d);d=[];for(var h=0;3>h;h++){var g=document.createElement("div");g.style.paddingRight="16px";g.style.display="flex";g.style.flexFlow="column nowrap";
d.push(g);e.appendChild(g)}e=document.createElement("div");e.innerHTML="Action";e.style.height="20px";e.style.fontWeight="bold";d[0].appendChild(e);e=document.createElement("div");e.innerHTML="Key";e.style.height="20px";e.style.fontWeight="bold";d[1].appendChild(e);e=document.createElement("div");e.innerHTML="Mouse";e.style.height="20px";e.style.fontWeight="bold";d[2].appendChild(e);e={};h=p("Masher Grenade Revolver Carbine Shotgun GunFire GunAction Reload MoveForward MoveBackward MoveLeft MoveRight Jump NextGun PrevGun".split(" "));
for(g=h.next();!g.done;e={Ee:e.Ee},g=h.next())e.Ee=g.value,g=document.createElement("div"),g.innerHTML=e.Ee,g.style.height="16px",g.style.marginBottom="2px",g.style.padding="0 2px 0 0",d[0].appendChild(g),g=document.createElement("div"),g.innerHTML=""+t.xa[e.Ee+"Key"],g.style.height="16px",g.style.marginBottom="2px",g.style.padding="0 2px",g.style.color="#000000",g.style.backgroundColor="#e0e0e0",g.style.fontWeight="bold",g.name=e.Ee,g.onmouseenter=function(){t.ya.S.innerHTML="";this.style.backgroundColor=
"#ffffff";a()},g.onmouseleave=function(){this.style.backgroundColor="#e0e0e0"},g.onclick=function(k){return function(){var l=t.yk=document.createElement("div");l.style.position="absolute";l.style.width=t.canvas.width+"px";l.style.height=t.canvas.height+"px";l.style.left=0;l.style.top=0;l.style.zIndex=3;l.style.userSelect="none";l.style.display="flex";l.style.alignItems="center";l.style.justifyContent="center";l.style.backgroundColor="#000000c0";t.ge.appendChild(l);var m=document.createElement("div");
m.style.textAlign="center";m.style.fontSize="7pt";m.style.lineHeight="1.5em";m.innerHTML='Press a key for:<br />\n\t\t\t\t\t\t\t\t<p style="font-size: 9pt"><b>'+k.Ee+"</b></p>\n\t\t\t\t\t\t\t\tPress <b>Backspace</b> to unassign.<br />\n\t\t\t\t\t\t\t\tPress <b>Escape</b> to cancel.<br />";l.appendChild(m);t.we(1,this)}}(e),d[1].appendChild(g),g=document.createElement("div"),g.innerHTML=""+t.xa[e.Ee+"MouseButton"],g.style.height="16px",g.style.marginBottom="2px",g.style.padding="0 2px",g.style.color=
"#000000",g.style.backgroundColor="#e0e0e0",g.style.fontWeight="bold",g.name=e.Ee,g.onmouseenter=function(){t.ya.S.innerHTML="";this.style.backgroundColor="#ffffff";a()},g.onmouseleave=function(){this.style.backgroundColor="#e0e0e0"},g.onclick=function(k){return function(){var l=t.yk=document.createElement("div");l.style.position="absolute";l.style.width=t.canvas.width+"px";l.style.height=t.canvas.height+"px";l.style.left=0;l.style.top=0;l.style.zIndex=3;l.style.userSelect="none";l.style.display=
"flex";l.style.alignItems="center";l.style.justifyContent="center";l.style.backgroundColor="#000000c0";t.ge.appendChild(l);var m=document.createElement("div");m.style.textAlign="center";m.style.fontSize="7pt";m.style.lineHeight="1.5em";m.innerHTML='Click a mouse button for:<br />\n\t\t\t\t\t\t\t\t<p style="font-size: 9pt"><b>'+k.Ee+"</b></p>\n\t\t\t\t\t\t\t\tPress <b>Backspace</b> to unassign.<br />\n\t\t\t\t\t\t\t\tPress <b>Escape</b> to cancel.<br />";l.appendChild(m);t.we(2,this)}}(e),d[2].appendChild(g);
c.insertAdjacentHTML("beforeend","<br />");c=293;d=0;e=document.createElement("button");e.style.zIndex=2;e.style.width="76px";e.style.height="34px";e.style.position="absolute";e.Vb=250;e.Ub=c;c+=80;e.Af=d;d+=6;t.b.Uc.push(e);e.style.border="none";e.style.background='url("'+t.i.P.get("MenuButtonCancel").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -36px";delete t.ya.S;delete t.Vi;delete t.Zh;for(var k in t.Ba)t.Ba[k]=
t.Ak[k];for(var l in t.xa)t.xa[l]=t.zk[l];delete t.Ak;delete t.zk;t.Dg();t.$i();t.Audio.Ob(t.Ba.musicEnabled);t.b.Qg()};e.onmousedown=function(k){k.preventDefault();this.style.backgroundPosition="0px -72px";this.pb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.pb=1;this.style.left=this.Ub+"px";this.style.top=this.Vb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.pb=0};t.ya.appendChild(e);e=document.createElement("button");e.style.zIndex=
2;e.style.width="76px";e.style.height="34px";e.style.position="absolute";e.Vb=250;e.Ub=c;c+=80;e.Af=d;d+=6;t.b.Uc.push(e);e.style.border="none";e.style.background='url("'+t.i.P.get("MenuButtonOK").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -36px";delete t.ya.S;delete t.Vi;delete t.Zh;for(var k in t.Ba)window.localStorage.setItem(k,t.Ba[k]);for(var l in t.xa)window.localStorage.setItem(l,t.xa[l]);t.Dg();t.b.Qg()};
e.onmousedown=function(k){k.preventDefault();this.style.backgroundPosition="0px -72px";this.pb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.pb=1;this.style.left=this.Ub+"px";this.style.top=this.Vb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.pb=0};t.ya.appendChild(e);c=p(t.b.Uc);for(d=c.next();!d.done;d=c.next())d=d.value,d.style.left=d.Ub+"px",d.style.top=d.Vb+"px"};
t.b.nm=function(){t.b.Ih();var a=document.createElement("div");a.style.height="100%";a.style.fontSize="6pt";a.style.lineHeight="1.5em";a.style.overflowY="scroll";a.style.padding="0";a.style.background="#505050";a.style.userSelect="auto";t.ya.appendChild(a);var b=document.createElement("div");b.style.padding="5px 102px 5px 20px";a.appendChild(b);b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">How to Play</h2>\n\t\t\t\u2022 Use <b>W,A,S,D</b> and <b>Space</b> to move and jump.<br />\n\t\t\t\u2022 Use the <b>Mouse</b> to aim and shoot.<br />\n\t\t\t<br />\n\t\t');
a=document.createElement("img");a.src=t.i.P.get("HUDItemCarbine").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">E</span> to equip the <b>Carbine</b>.<br />\n\t\t\tIt\'s a short-barreled assault rifle with <em>lots of ammo</em> and a <em>high rate of fire</em>.<br />\n\t\t\tBullets will juggle-strike all the targets in your line-of-fire!<br />\n\t\t\t\u2022 Hold the <b>Right Mouse Button</b> to improve accuracy.<br />\n\t\t\t\u2022 Press <b>R</b> to reload.<br />\n\t\t\t<br />\n\t\t');
a=document.createElement("img");a.src=t.i.P.get("HUDItemShotgun").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">C</span> to equip the <b>Shotgun</b>.<br />\n\t\t\tIt\'s a pump-action 12-gauge with great <em>multi-damage</em> stopping power.<br />\n\t\t\tPellets will continually dig through enemies until their full damage has been delivered!<br />\n\t\t\t\u2022 Press the <b>Right Mouse Button</b> to cycle it.<br />\n\t\t\tYou must cycle the shotgun before each shot.<br />\n\t\t\t<br />\n\t\t');
a=document.createElement("img");a.src=t.i.P.get("HUDItemRevolver").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend","\n\t\t\t<br />\n\t\t\t\u2022 Press <span style=\"color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;\">Q</span> to equip the <b>Revolver</b>.<br />\n\t\t\tIt's a six-shot double-action with great <em>accuracy</em> and <em>reach</em>.<br />\n\t\t\tBullets will go through walls, if not too thick!<br />\n\t\t\t\u2022 Hold the <b>Right Mouse Button</b> to track enemies you've glimpsed.<br />\n\t\t\t\u2022 Press <b>R</b> to reload.<br />\n\t\t\t<br />\n\t\t");
a=document.createElement("img");a.src=t.i.P.get("HUDItemMasher").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">F</span> to equip the <b>Masher</b>.<br />\n\t\t\t\u2022 Or, strike instantly using the <b>Middle Mouse Button</b>.<br />\n\t\t\tAs useful in self-defense as it is in meal preparation.<br />\n\t\t\t<br />\n\t\t');a=document.createElement("img");a.src=
t.i.P.get("HUDItemGrenade").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">G</span> to equip a <b>Grenade</b>.<br />\n\t\t\t\u2022 Or, throw instantly using the <b>Side Mouse Button</b> (if you\'ve got one).<br />\n\t\t\tBoom.<br />\n\t\t');b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Contact</h2>\n\t\t\t<p>\n\t\t\tThis game is a preview of a work in progress.<br />\n\t\t\tPlease email me about any technical problems so I can fix them!<br />\n\t\t\tchad.chisholm@protonmail.com<br />\n\t\t\t</p>\n\t\t');
b=373;a=0;var c=document.createElement("button");c.style.zIndex=2;c.style.width="76px";c.style.height="34px";c.style.position="absolute";c.Vb=250;c.Ub=b;b+=80;c.Af=a;a+=6;t.b.Uc.push(c);c.style.border="none";c.style.background='url("'+t.i.P.get("MenuButtonOK").data.src+'")';c.style.backgroundPosition="0px 0px";c.style.cursor="pointer";c.onclick=function(){this.style.backgroundPosition="0px -36px";t.b.Qg()};c.onmousedown=function(d){d.preventDefault();this.style.backgroundPosition="0px -72px";this.pb=
2;t.i.W.get("woodSnap02").play()};c.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.pb=1;this.style.left=this.Ub+"px";this.style.top=this.Vb+"px";t.i.W.get("hit02").play({gain:.5})};c.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.pb=0};t.ya.appendChild(c);b=p(t.b.Uc);for(a=b.next();!a.done;a=b.next())a=a.value,a.style.left=a.Ub+"px",a.style.top=a.Vb+"px"};
t.b.lm=function(){t.b.Ih();var a=document.createElement("div");a.style.height="100%";a.style.fontSize="6pt";a.style.lineHeight="1.5em";a.style.overflowY="scroll";a.style.padding="0";a.style.background="#505050";a.style.userSelect="auto";t.ya.appendChild(a);var b=document.createElement("div");b.style.padding="5px 102px 5px 20px";a.appendChild(b);b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Support the Developer</h2>\n\t\t\t<p>\n\t\t\t<b>ShootPotato.com</b> is a <em>FREE</em> game for everyone. If you like it, please consider making a donation to represent a purchase. Donations are my only source of income, and I can only continue development with support from players like you.\n\t\t\t<br />\n\t\t\t</p><p>\n\t\t');
b.insertAdjacentHTML("beforeend",'\n\t\t\t<form action="https://www.paypal.com/donate" method="post" target="_blank">\n\t\t\t<input type="hidden" name="hosted_button_id" value="8X4ZJS35NSYYJ" />\n\t\t\t<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />\n\t\t\t<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />\n\t\t\t</form>\n\t\t');
b.insertAdjacentHTML("beforeend","\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t<b>Chad Chisholm</b><br />\n\t\t\tchad.chisholm@protonmail.com<br />\n\t\t\t</p>\n\t\t");b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Coming Soon...</h2>\n\t\t\t<p>\n\t\t\t\u2022 gameplay objective<br />\n\t\t\t\u2022 dynamic combat music<br />\n\t\t\t\u2022 enemy NPC hit and attack animations<br />\n\t\t\t\u2022 enemy NPC tactics and AI<br />\n\t\t\t\u2022 architectural art assets, textures, variation<br />\n\t\t\t\u2022 ambient sound effects<br />\n\t\t\t\u2022 breakable glass<br />\n\t\t\t\u2022 more/better character and action sounds<br />\n\t\t\t\u2022 more...<br />\n\t\t\t</p>\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Past Updates</h2>\n\t\t\t<p>\n\t\t\t<b>July 4th, 2023:</b><br />\n\t\t\t\u2022 HP and collectible food to restore HP<br />\n\t\t\t\u2022 enemies killed counter<br />\n\t\t\t\u2022 player death and high score<br />\n\t\t\t\u2022 various enemy death animations<br />\n\t\t\t\u2022 in-game day and night cycle<br />\n\t\t\t</p><p>\n\t\t\t<b>June 15th, 2023:</b><br />\n\t\t\t\u2022 melee weapon<br />\n\t\t\t\u2022 grenades!<br />\n\t\t\t\u2022 collectible weapons, with randomized order<br />\n\t\t\t\u2022 organized loot spawning<br />\n\t\t\t\u2022 configurable keyboard and mouse controls<br />\n\t\t\t\u2022 enemy NPC attacks<br />\n\t\t\t\u2022 weapon reload sounds<br />\n\t\t\t</p><p>\n\t\t\t<b>May 28th, 2023:</b><br />\n\t\t\t\u2022 app loading console<br />\n\t\t\t\u2022 window resizing<br />\n\t\t\t\u2022 main menu<br />\n\t\t\t\u2022 main menu music<br />\n\t\t\t\u2022 options menu<br />\n\t\t\t\u2022 readme page with pictures<br />\n\t\t\t\u2022 donation via PayPal<br />\n\t\t\t\u2022 large rooms with pillars<br />\n\t\t\t\u2022 improved color palette<br />\n\t\t\t</p><p>\n\t\t\t<b>May 7th, 2023:</b><br />\n\t\t\t\u2022 maze world generator<br />\n\t\t\t\u2022 global illumination at 60 FPS<br />\n\t\t\t\u2022 room lights switching on<br />\n\t\t\t\u2022 improved performance of collision scans<br />\n\t\t\t\u2022 gibs colliding with props<br />\n\t\t\t\u2022 HUD cards for ammo collection<br />\n\t\t\t</p><p>\n\t\t\t<b>Dec 18th, 2022:</b><br />\n\t\t\t\u2022 endless world generation<br />\n\t\t\t\u2022 user settings panel<br />\n\t\t\t\u2022 weapons reloading<br />\n\t\t\t\u2022 ammo collectibles<br />\n\t\t\t</p><p>\n\t\t\t<b>Oct 30th, 2022:</b><br />\n\t\t\t\u2022 NPC navigation graph<br />\n\t\t\t</p><p>\n\t\t\t<b>Oct 11th, 2022:</b><br />\n\t\t\t\u2022 website launched<br />\n\t\t\t</p><p>\n\t\t');
a=373;b=0;var c=document.createElement("button");c.style.zIndex=2;c.style.width="76px";c.style.height="34px";c.style.position="absolute";c.Vb=250;c.Ub=a;a+=80;c.Af=b;b+=6;t.b.Uc.push(c);c.style.border="none";c.style.background='url("'+t.i.P.get("MenuButtonOK").data.src+'")';c.style.backgroundPosition="0px 0px";c.style.cursor="pointer";c.onclick=function(){this.style.backgroundPosition="0px -36px";t.b.Qg()};c.onmousedown=function(d){d.preventDefault();this.style.backgroundPosition="0px -72px";this.pb=
2;t.i.W.get("woodSnap02").play()};c.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.pb=1;this.style.left=this.Ub+"px";this.style.top=this.Vb+"px";t.i.W.get("hit02").play({gain:.5})};c.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.pb=0};t.ya.appendChild(c);a=p(t.b.Uc);for(b=a.next();!b.done;b=a.next())b=b.value,b.style.left=b.Ub+"px",b.style.top=b.Vb+"px"};
t.b.km=function(){t.b.Ih();var a=document.createElement("div");a.style.width="100%";a.style.height="100%";a.style.display="flex";a.style.flexFlow="column nowrap";a.style.justifyContent="center";a.style.alignItems="center";a.style.fontWeight="bold";a.style.textShadow="-1px 2px black";t.ya.appendChild(a);a.insertAdjacentHTML("beforeend",'\n\t\t\t<div style="font-size:24px;">\n\t\t\tYOU DIED\n\t\t\t</div><br />\n\t\t\t<div style="font-size:18px; color:#FFFF00">\n\t\t\t'+t.b.kills.toLocaleString("en-US")+
'\n\t\t\t</div><br />\n\t\t\t<div style="font-size:14px; ">\n\t\t\t'+t.b.killsBestName+'<br />\n\t\t\t</div>\n\t\t\t<div style="font-size:14px; ">\n\t\t\t'+t.b.killsBest.toLocaleString("en-US")+"<br />\n\t\t\t</div><br />\n\t\t");var b=document.createElement("button");b.style.zIndex=2;b.style.width="76px";b.style.height="34px";b.style.border="none";b.style.background='url("'+t.i.P.get("MenuButtonOK").data.src+'")';b.style.backgroundPosition="0px 0px";b.style.cursor="pointer";b.onclick=function(){this.style.backgroundPosition=
"0px -36px";N.lk(!0)};b.onmousedown=function(c){c.preventDefault();this.style.backgroundPosition="0px -72px";this.pb=2;t.i.W.get("woodSnap02").play()};b.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.pb=1;this.style.left=this.Ub+"px";this.style.top=this.Vb+"px";t.i.W.get("hit02").play({gain:.5})};b.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.pb=0};a.appendChild(b)};
t.b.om=function(){var a=document.createElement("button");a.style.zIndex=2;a.style.position="absolute";a.style.width="64px";a.style.height="64px";a.style.left=(t.canvas.width-64>>1)+"px";a.style.top=(t.canvas.height-64>>1)+"px";a.style.border="none";a.style.background='url("WebsitePlay_230507_01.png")';a.style.backgroundSize="64px 64px";a.style.backgroundPosition="center";a.style.backgroundRepeat="no-repeat";a.style.opacity="75%";a.style.cursor="pointer";a.onclick=function(){t.i.W.get("woodSnap02").play();
t.Cn=!0;t.we(0);t.b.Rk();t.b.Qg();t.Audio.Ob(t.Ba.musicEnabled);var b=t.i.W.get("MusicFactoryBeat01");t.Audio.ie&&t.Audio.ie.stop();var c=t.Audio.S.createGain();c.gain.value=1;c.connect(t.Audio.wb);var d=new AudioBufferSourceNode(t.Audio.S);d.connect(c);d.loop=!0;d.buffer=b.buffer;d.start();t.Audio.ie=d};a.onmouseenter=function(){this.style.opacity="100%"};a.onmouseleave=function(){this.style.opacity="75%"};t.ya.appendChild(a)};
document.addEventListener("pointerlockchange",function(){document.pointerLockElement?(t.ge.removeChild(t.Pm),t.ge.removeChild(t.ya),t.ya=null,t.Audio.ie.stop(),ke.clear(),N.clear(),t.paused=!1,t.b.ff.Ze.disconnect(t.b.ff.Si),t.b.ff.Ze.connect(t.Audio.wb)):(t.bj=1,t.b.En=performance.now(),t.b.ff.Ze.disconnect(t.Audio.wb),t.b.ff.Ze.connect(t.b.ff.Si))});t.b.pause=function(){t.bj=0;t.paused=!0;t.b.Rk();t.j!=t.b.Eg+2?t.b.Qg():t.b.km()};
(function(){var a,b,c,d,e,h;return Ha(new Ea(new xa(function(g){if(1==g.S){t.di=new tk;t.Wm();a=t.ya=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor="black";a.style.overflow="hidden";a.style.fontFamily="monospace";a.style.fontSize="8pt";a.style.color="white";t.ge.appendChild(a);t.ya.Yj=new Intl.NumberFormat("en-US",{maximumFractionDigits:2});t.ya.insertAdjacentHTML("beforeend",
"\n\t----------------------------------------------------------------------------<br />\n\tThis game is a preview of a work in progress.<br />\n\tPlease email me about any technical problems so I can fix them!<br />\n\tchad.chisholm@protonmail.com<br />\n\t----------------------------------------------------------------------------<br />\n\t<br />\n\t");t.ya.insertAdjacentHTML("beforeend","ShootPotato v0.019<br />");t.ya.insertAdjacentHTML("beforeend","July 4, 2023<br />");t.ya.insertAdjacentHTML("beforeend",
"GL Vendor: "+u.getParameter(u.VENDOR)+"<br />");t.ya.insertAdjacentHTML("beforeend","GL Version: "+u.getParameter(u.VERSION)+"<br />");t.ya.insertAdjacentHTML("beforeend","GL Renderer: "+u.getParameter(u.RENDERER)+"<br />");t.ya.insertAdjacentHTML("beforeend","Fetching resources... ");c=b=performance.now();var k=fetch("resources_230704_01.gob");g.S=2;return{value:k}}if(3!=g.S)return d=g.Ob,c=performance.now(),t.ya.insertAdjacentHTML("beforeend","done ("+t.ya.Yj.format(c-b)+" ms).<br />"),b=c,t.ya.insertAdjacentHTML("beforeend",
"Unpacking resources... "),e=Uint8Array,k=d.arrayBuffer(),g.S=3,{value:k};h=new e(g.Ob);h.position=0;t.i.load(h);c=performance.now();t.ya.insertAdjacentHTML("beforeend","done ("+t.ya.Yj.format(c-b)+" ms).<br />");g.S=0})))})();
