var f;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function p(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function ba(a){if(!(a instanceof Array)){a=p(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
var ca="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,da="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function ea(a,b){if(b){var c=ca;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&da(c,a,{configurable:!0,writable:!0,value:b})}}
ea("Promise",function(a){function b(g){this.La=0;this.Hb=void 0;this.S=[];var k=this.qb();try{g(k.resolve,k.reject)}catch(l){k.reject(l)}}function c(){this.S=null}function d(g){return g instanceof b?g:new b(function(k){k(g)})}if(a)return a;c.prototype.La=function(g){if(null==this.S){this.S=[];var k=this;this.qb(function(){k.Hb()})}this.S.push(g)};var e=ca.setTimeout;c.prototype.qb=function(g){e(g,0)};c.prototype.Hb=function(){for(;this.S&&this.S.length;){var g=this.S;this.S=[];for(var k=0;k<g.length;++k){var l=
g[k];g[k]=null;try{l()}catch(m){this.vb(m)}}}this.S=null};c.prototype.vb=function(g){this.qb(function(){throw g;})};b.prototype.qb=function(){function g(m){return function(n){l||(l=!0,m.call(k,n))}}var k=this,l=!1;return{resolve:g(this.lf),reject:g(this.vb)}};b.prototype.lf=function(g){if(g===this)this.vb(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.Kf(g);else{a:switch(typeof g){case "object":var k=null!=g;break a;case "function":k=!0;break a;default:k=!1}k?this.kf(g):
this.Bc(g)}};b.prototype.kf=function(g){var k=void 0;try{k=g.then}catch(l){this.vb(l);return}"function"==typeof k?this.dh(k,g):this.Bc(g)};b.prototype.vb=function(g){this.Pc(2,g)};b.prototype.Bc=function(g){this.Pc(1,g)};b.prototype.Pc=function(g,k){if(0!=this.La)throw Error("Cannot settle("+g+", "+k+"): Promise already settled in state"+this.La);this.La=g;this.Hb=k;this.ue()};b.prototype.ue=function(){if(null!=this.S){for(var g=0;g<this.S.length;++g)h.La(this.S[g]);this.S=null}};var h=new c;b.prototype.Kf=
function(g){var k=this.qb();g.ki(k.resolve,k.reject)};b.prototype.dh=function(g,k){var l=this.qb();try{g.call(k,l.resolve,l.reject)}catch(m){l.reject(m)}};b.prototype.then=function(g,k){function l(q,u){return"function"==typeof q?function(z){try{m(q(z))}catch(y){n(y)}}:u}var m,n,r=new b(function(q,u){m=q;n=u});this.ki(l(g,m),l(k,n));return r};b.prototype.catch=function(g){return this.then(void 0,g)};b.prototype.ki=function(g,k){function l(){switch(m.La){case 1:g(m.Hb);break;case 2:k(m.Hb);break;default:throw Error("Unexpected state: "+
m.La);}}var m=this;null==this.S?h.La(l):this.S.push(l)};b.resolve=d;b.reject=function(g){return new b(function(k,l){l(g)})};b.race=function(g){return new b(function(k,l){for(var m=p(g),n=m.next();!n.done;n=m.next())d(n.value).ki(k,l)})};b.all=function(g){var k=p(g),l=k.next();return l.done?d([]):new b(function(m,n){function r(z){return function(y){q[z]=y;u--;0==u&&m(q)}}var q=[],u=0;do q.push(void 0),u++,d(l.value).ki(r(q.length-1),n),l=k.next();while(!l.done)})};return b});
function ia(){ia=function(){};ca.Symbol||(ca.Symbol=ja)}function ma(a,b){this.S=a;da(this,"description",{configurable:!0,writable:!0,value:b})}ma.prototype.toString=function(){return this.S};var ja=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new ma("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function na(){ia();var a=ca.Symbol.iterator;a||(a=ca.Symbol.iterator=ca.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&da(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return pa(aa(this))}});na=function(){}}function pa(a){na();a={next:a};a[ca.Symbol.iterator]=function(){return this};return a}function qa(){this.vb=!1;this.La=null;this.Hb=void 0;this.S=1;this.Pc=0;this.qb=null}function va(a){if(a.vb)throw new TypeError("Generator is already running");a.vb=!0}
qa.prototype.Bc=function(a){this.Hb=a};function ya(a,b){a.qb={$l:b,nm:!0};a.S=a.Pc}qa.prototype.return=function(a){this.qb={return:a};this.S=this.Pc};function za(a){this.S=new qa;this.La=a}function Ba(a,b){va(a.S);var c=a.S.La;if(c)return Ca(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.S.return);a.S.return(b);return Da(a)}
function Ca(a,b,c,d){try{var e=b.call(a.S.La,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.S.vb=!1,e;var h=e.value}catch(g){return a.S.La=null,ya(a.S,g),Da(a)}a.S.La=null;d.call(a.S,h);return Da(a)}
function Da(a){for(;a.S.S;)try{var b=a.La(a.S);if(b)return a.S.vb=!1,{value:b.value,done:!1}}catch(c){a.S.Hb=void 0,ya(a.S,c)}a.S.vb=!1;if(a.S.qb){b=a.S.qb;a.S.qb=null;if(b.nm)throw b.$l;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function Fa(a){this.next=function(b){va(a.S);a.S.La?b=Ca(a,a.S.La.next,b,a.S.Bc):(a.S.Bc(b),b=Da(a));return b};this.throw=function(b){va(a.S);a.S.La?b=Ca(a,a.S.La["throw"],b,a.S.Bc):(ya(a.S,b),b=Da(a));return b};this.return=function(b){return Ba(a,b)};na();this[Symbol.iterator]=function(){return this}}
function Ga(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function h(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(h,e)}h(a.next())})}ea("Math.sign",function(a){return a?a:function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1}});
function Ia(a,b){na();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}ea("Array.prototype.keys",function(a){return a?a:function(){return Ia(this,function(b){return b})}});var t={},v;t.canvas=document.createElement("canvas");t.canvas.width=480;t.canvas.height=296;var Ja=document.body;Ja.style.position="relative";
Ja.style.left=(window.innerWidth-t.canvas.width>>1)+"px";Ja.style.width=t.canvas.width+"px";Ja.style.margin="0px";Ja.style.marginBottom="20px";Ja.style.padding="0px";Ja.style.display="flex";Ja.style.flexFlow="column nowrap";Ja.style.justifyContent="flex-start";Ja.style.alignItems="center";Ja.style.alignContent="flex-start";Ja.style.backgroundColor="#404040";Ja.style.fontFamily="sans-serif";Ja.style.fontSize="12pt";Ja.style.color="white";Ja.style.imageRendering="pixelated";
Ja.style.transformOrigin="top center";var Ka=document.createElement("img");Ka.width=320;Ka.height=44;Ka.src="WebsiteBanner_230507_01.png";Ka.style.margin="0 auto";document.body.appendChild(Ka);var Na=t.$d=document.createElement("div");Na.style.position="relative";Na.style.width=t.canvas.width+"px";Na.style.height=t.canvas.height+"px";Na.style.margin="6px 0";Na.style.outline="5px solid black";Na.style.backgroundColor="black";Na.oncontextmenu=function(a){return a.preventDefault()};document.body.appendChild(Na);
t.$d.appendChild(t.canvas);function Oa(a,b){for(var c=0,d=a.length,e=c+(d-c>>1);c<d;){var h=a.cmp.call(null,b,a[e]);if(0>h)d=e,e=c+(d-c>>1);else if(0<h)c=e+1,e=c+(d-c>>1);else break}return e}function Ra(a,b){var c=Oa(a,b);return a[c]&&0==a.cmp(a[c],b)?a[c]:null}function Sa(a,b){var c=Oa(a,b);if(a[c]&&0==a.cmp(a[c],b))return a[c];a.splice(c,0,b);return b}function Ta(a,b){var c=Oa(a,b);a[c]&&0==a.cmp(a[c],b)&&a.splice(c,1)};for(var Ua=new Uint8Array(256),Va=0;256>Va;Va++)Ua[Va]=Ua[Va>>>1]+(Va&1);function Wa(a,b,c){return a<b?b:a>c?c:a}function Ya(a,b,c){return a*(1-c)+b*c}function Za(a,b){return a==b?a:0==a?b:0==b?a:0==(a&1)?0==(b&1)?Za(a>>1,b>>1)<<1:Za(a>>1,b):0==(b&1)?Za(a,b>>1):a>=b?Za(a-b>>1,b):Za(b-a>>1,a)}function $a(a,b,c){var d=b*b-4*a*c;if(0<d){c={};d=Math.sqrt(d);a=2*a;var e=(-b+d)/a;a=(-b-d)/a;a>e?(c.Ma=e,c.Kc=a):(c.Ma=a,c.Kc=e);return c}return 0==d?(c={},c.Ma=-b/(2*a),c.Kc=c.Ma,c):null}
function ab(a){this.cmp=a;this.elements=[]}f=ab.prototype;f.get=function(a){var b=bb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements[b]};f.contains=function(a){var b=bb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?-1:b};f.add=function(a){return this.push(a)};f.push=function(a){var b=bb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return!1;this.elements.splice(b,0,a);return!0};
f.replace=function(a){var b=bb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b]=a,!0;this.elements.splice(b,0,a);return!0};f.Ja=function(a){var b=bb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b];this.elements.splice(b,0,a);return a};f.remove=function(a){var b=bb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements.splice(b,1)[0]};
function bb(a,b){for(var c=0,d=a.elements.length,e=Math.floor(c/2+d/2);c<d;){var h=a.cmp.call(a,b,a.elements[e]);if(0>h)d=e,e=Math.floor(c/2+d/2);else if(0<h)c=e+1,e=Math.floor(c/2+d/2);else break}return e}f.clear=function(){this.elements.length=0};f.Fi=function(){return 0==this.elements.length};function cb(){this.start=new db(null);return this}f=cb.prototype;f.Fi=function(){return!this.first().item};f.size=function(){for(var a=0,b=this.first();b.item;b=b.next)a++;return a};f.first=function(){return this.start.next};
f.clear=function(){fb(this.start);return this};function gb(a,b){hb(b,a.start);return a}f.add=function(a){return gb(this,new db(a))};function ib(a){for(var b=jb,c=kb,d=b.first();d.item;d=d.next)if(0>c.call(null,a.item,d.item)){hb(a,d);return}hb(a,b.start)}f.get=function(a){for(var b=this.first();b.item;b=b.next)if(b.item==a)return b;return null};f.remove=function(a){a=this.get(a);if(null==a)return null;fb(a);return this};
f.sort=function(a){for(var b,c=this.first();c.item;c=b){b=c.next;var d=c;for(var e=d.pb;e.item&&!(0<=a(d.item,e.item));)e=e.pb;d=e;d!=c.pb&&(fb(c),c.pb=d,c.next=d.next,c.pb.next=c,c.next.pb=c)}};function db(a){this.item=a;this.pb=this;this.next=this;return this}function hb(a,b){a.next=b;a.pb=b.pb;a.next.pb=a;a.pb.next=a}function fb(a){a.pb.next=a.next;a.next.pb=a.pb;a.next=a.pb=a};function lb(){var a;isNaN(a)&&(a=(new Date).getTime()|0);this.r=a+643709624|0}lb.prototype.next=function(){this.r^=this.r<<13;this.r^=this.r>>17;this.r^=this.r<<5;this.r>>>=0};function mb(){var a=nb;a.next();return a.r}function ob(a){a.next();return a.r/4294967295}var nb=new lb;function pb(a){return Math.floor(ob(nb)*a)}function rb(a){return 1>ob(nb)*a}function sb(a){return a[pb(a.length)]}function vb(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return sb(b)};function wb(a,b,c){for(var d=0,e=a.length,h=d+(e-d>>1);d<e;){var g=c.call(null,b,a[h]);if(0>g)e=h,h=d+(e-d>>1);else if(0<g)d=h+1,h=d+(e-d>>1);else break}return h}function xb(a,b){var c=a.splice(0);c=p(c);for(var d=c.next();!d.done;d=c.next())d=d.value,a.splice(wb(a,d,b),0,d)}function kb(a,b){return isNaN(a)?a.index<b.index?-1:a.index>b.index?1:0:a<b.index?-1:a>b.index?1:0}function yb(a,b){return"string"==typeof a?a<b.name?-1:a>b.name?1:0:a.name<b.name?-1:a.name>b.name?1:0};function zb(a){var b=Ab(a);a=a.slice(a.position,a.position+=b);return String.fromCharCode.apply(null,a)}function Bb(a,b){Db(a,b.length);for(var c=0;c<b.length;c++)a[a.position++]=b.charCodeAt(c)}function Eb(a){var b=Fb(a);a=a.slice(a.position,a.position+=b);var c;void 0==c&&(c=0);if(void 0==d)var d=a.length;b=53;for(var e=c;e<c+d;e++){var h=a[e];a[e]=a[e]-193*b-53&255;b=h}return String.fromCharCode.apply(null,a)}
function Gb(a,b){Hb(a,b.length);for(var c=a.position,d=0;d<b.length;d++)a[a.position++]=b.charCodeAt(d);b=b.length;void 0==c&&(c=0);void 0==b&&(b=a.length);d=53;for(var e=c;e<c+b;e++)a[e]=a[e]+193*d+53&255,d=a[e]}function Ab(a){return a[a.position++]}function Db(a,b){a[a.position++]=b&255}function Ib(a){var b=0|a[a.position++]<<0;return b|=a[a.position++]<<8}function Jb(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}
function Lb(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;return(b>>>0)-32768}function Qb(a,b){b+=32768;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}function Fb(a){var b=a[a.position++]<<0;b+=a[a.position++]<<8;b+=a[a.position++]<<16;return b+=a[a.position++]<<24}function Hb(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}
function Sb(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;b|=a[a.position++]<<16;b|=a[a.position++]<<24;return(b>>>0)-2147483648}function Yb(a,b){b+=2147483648;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}function Zb(a){var b=new Uint8Array(4);b[0]=a[a.position++];b[1]=a[a.position++];b[2]=a[a.position++];b[3]=a[a.position++];return(new Float32Array(b.buffer))[0]}
function $b(a,b){var c=new Float32Array(1);c[0]=b;c=new Uint8Array(c.buffer);a[a.position++]=c[0];a[a.position++]=c[1];a[a.position++]=c[2];a[a.position++]=c[3]};function ac(){this.size=0;this.root=new bc;this.root.update=function(){};this.mc=null}ac.prototype.Fi=function(){return 0==this.size};ac.prototype.pop=function(){if(this.Fi())return null;var a=this.root.Fe.Kg(),b=a.value;this.remove(a);return b};
ac.prototype.add=function(a,b){this.mc=new cc;if(0==this.size)this.root.Fe=this.mc,this.mc.parent=this.root;else{var c=this.root;var d=this.size;d=Ua[d>>>0&255]+Ua[d>>>8&255]+Ua[d>>>16&255]+Ua[d>>>24];for(var e=0;e<d;e++)c=c.Fe;d=new bc;d.parent=c.parent;c.parent.Fe=d;d.nj=c;c.parent=d;d.Fe=this.mc;this.mc.parent=d}c=this.mc;c.value=a;c.key=b;c.parent.update();this.size++;return this.mc};
ac.prototype.remove=function(a){if(a==this.mc)1==this.size?this.root.Fe=this.mc=null:dc(this);else{var b=this.mc.value,c=this.mc.key;dc(this);a.value=b;a.key=c;a.parent.update()}this.size--};function dc(a){var b=a.mc.parent,c=b.nj;a.mc=c.mc();c.parent=b.parent;c.parent.Fe=c;c.parent.update()}function bc(){}bc.prototype.Kg=function(){return this.first};bc.prototype.mc=function(){return this.Fe.mc()};
bc.prototype.update=function(){this.first=this.Fe.Kg().key<this.nj.Kg().key?this.Fe.Kg():this.nj.Kg();this.parent.update()};function cc(){}cc.prototype.Kg=function(){return this};cc.prototype.mc=function(){return this};Math.eh=2*Math.PI;function fc(a){return a*Math.PI/180}function ic(a){return Math.PI/2147483648*a}function jc(a,b,c,d){return kc(new w(a.x-c.x,a.y-c.y,a.z-c.z),b,d)}function kc(a,b,c){return $a(lc(b,b),2*lc(a,b),lc(a,a)-c*c)}function mc(a,b,c){.7071>a.y&&-.7071<a.y?(b.set(a.z,0,-a.x),nc(a,b,c).oa(1),nc(c,a,b)):(c.set(0,a.z,-a.y),nc(c,a,b).oa(1),nc(a,b,c))}function oc(a){var b=ob(nb)*Math.PI*2;void 0==a&&(a=2*ob(nb)-1);var c=Math.sqrt(1-a*a);return new w(Math.sin(b)*c,a,Math.cos(b)*c)}
function pc(a,b){var c;c||(c=new qc);for(var d=[],e=0;;){for(var h=-1,g=null,k=Number.POSITIVE_INFINITY,l=0;l<b.length;l++)if(!(e&1<<l)){var m=b[l],n=lc(m,a);n<k&&(h=l,g=m,k=n)}if(0<=k)break;c=c.Nj(a,g,k);d.push(g);e|=1<<h;if(!c)break}a.round()}function qc(){}qc.prototype.Nj=function(a,b,c){a.x-=b.x*c;a.y-=b.y*c;a.z-=b.z*c;return new rc(b)};function rc(a){this.n=a}rc.prototype.Nj=function(a,b){b=nc(this.n,b,new w(0,0,0));if(0==b.oa(1))return null;var c=lc(a,b);a.x=b.x*c;a.y=b.y*c;a.z=b.z*c;return new wc(b)};
function wc(a){this.n=a}wc.prototype.Nj=function(a,b,c){b=c/lc(this.n,b);if(!isFinite(b))return null;a.x-=this.n.x*b;a.y-=this.n.y*b;a.z-=this.n.z*b;return null};function xc(a,b,c){null==a?(this.b=b*c,this.g=b,this.ratio=c):null==b?(this.b=a,this.g=a/c,this.ratio=c):null==c?(this.b=a,this.g=b,this.ratio=a/b):(this.b=a,this.g=b,this.ratio=c);this.y=this.x=0;a=a>b?a:b;for(this.bufferSize=8;this.bufferSize<a;this.bufferSize*=2);}
function yc(a,b,c,d,e){a=Math.round(a);b=Math.round(b);c=Math.round(c);d=Math.round(d);this.m=a;this.l=b;this.C=c;this.w=d;if(!e)return this.ga=c-a,this.aa=d-b,this.Ub=this.ya=NaN,this.length=Math.sqrt(this.ga*this.ga+this.aa*this.aa),a=this.ga,b=this.aa,0>a?0>b?-a<-b?(this.type=9,this.ya=-a/b,this.Ub=-b/this.length,a=Za(-a,-b),this.ga/=a,this.aa/=a):-a>-b?(this.type=7,this.ya=b/a,this.Ub=-a/this.length,a=Za(-a,-b),this.ga/=a,this.aa/=a):(this.type=8,this.ya=this.aa=this.ga=-1,this.Ub=Math.SQRT1_2):
0<b?-a<b?(this.type=3,this.ya=-a/b,this.Ub=b/this.length,a=Za(-a,b),this.ga/=a,this.aa/=a):-a>b?(this.type=5,this.ya=b/a,this.Ub=-a/this.length,a=Za(-a,b),this.ga/=a,this.aa/=a):(this.type=4,this.ga=-1,this.aa=1,this.ya=-1,this.Ub=Math.SQRT1_2):(this.type=6,this.ga=-1):0<a?0>b?a<-b?(this.type=11,this.ya=-a/b,this.Ub=-b/this.length,a=Za(a,-b),this.ga/=a,this.aa/=a):a>-b?(this.type=13,this.ya=b/a,this.Ub=a/this.length,a=Za(a,-b),this.ga/=a,this.aa/=a):(this.type=12,this.ga=1,this.ya=this.aa=-1,this.Ub=
Math.SQRT1_2):0<b?a<b?(this.type=1,this.ya=-a/b,this.Ub=b/this.length,a=Za(a,b),this.ga/=a,this.aa/=a):a>b?(this.type=15,this.ya=b/a,this.Ub=a/this.length,a=Za(a,b),this.ga/=a,this.aa/=a):(this.type=0,this.aa=this.ga=1,this.ya=-1,this.Ub=Math.SQRT1_2):(this.type=14,this.ga=1):a<b?(this.type=2,this.aa=1):a>b&&(this.type=10,this.aa=-1),this}function zc(a,b){return a.m<b.m?-1:a.m>b.m?1:a.l<b.l?-1:a.l>b.l?1:a.C<b.C?-1:a.C>b.C?1:a.w<b.w?-1:a.w>b.w?1:0}f=yc.prototype;
f.replace=function(a){this.remove=!0;if(this.ne){a=p(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b.ne){var c=p(this.ne);for(d=c.next();!d.done;d=c.next())d=d.value,0<=b.ne.indexOf(d)||(b.ne.push(d),d.push(b))}else{b.ne=this.ne.slice();c=p(b.ne);for(var d=c.next();!d.done;d=c.next())d.value.push(b)}a=p(this.ne);for(d=a.next();!d.done;d=a.next())b=d.value,b.splice(b.indexOf(this),1);delete this.ne}};
function Ac(a,b){var c=a.m+b.ga;b=a.l+b.aa;return Math.atan2(Dc(a,c,b),a.getParameter(c,b))}function Ec(a,b,c){for(var d={Wl:[],code:0},e=0;e<c.length;e++)d.Wl.push(Dc(c[e],a,b)),1==Fc(c[e],a,b)&&(d.code+=1<<e);return d}
function Kc(a){var b;var c=Number.NEGATIVE_INFINITY;var d=Number.POSITIVE_INFINITY;var e=b=null;var h=a[a.length-1];a=p(a);for(var g=a.next();!g.done;g=a.next()){g=g.value;var k=g.m-g.l;k>c?(c=k,d=g.l,b=h,e=g):k==c&&g.l<d&&(d=g.l,b=h,e=g);h=g}c=b.type&7;d=e.type;return c<d?!0:c>d?!1:b.ya<e.ya?!0:b.ya>e.ya?!1:!0}
function Lc(a,b,c){var d=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,h=null,g=null;c=p(c);for(var k=c.next();!k.done;k=c.next()){k=k.value;var l=Mc(k,a,b);0>l?(l=-l,l<d&&(d=l,h=k)):0<l&&l<e&&(e=l,g=k)}--d;--e;return 0==d||0==e?0:h&&g?d<e?-1:d>e||h.C<g.m?1:-1:g?1:-1}
function Nc(a){var b=a.bound;if(!b){b=new Oc;for(var c=p(a),d=c.next();!d.done;d=c.next()){var e=d.value;b.Ja(e.C,e.w)}}b=b.o+(b.u-b.o>>1);e=c=Number.POSITIVE_INFINITY;a=p(a);for(d=a.next();!d.done;d=a.next())d=d.value,0<d.aa?(d=Pc(d,b),d<e&&(e=d)):0>d.aa&&(d=Pc(d,b),d<c&&(c=d));return new E(c+(e-c>>1),b)}
function Qc(a,b){var c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;b=p(b);for(var e=b.next();!e.done;e=b.next()){var h=e.value,g=Dc(a,h.m,h.l),k=Dc(a,h.C,h.w);e=a.getParameter(h.m,h.l);h=a.getParameter(h.C,h.w);if(g<k)g/=g-k,e=e*(1-g)+h*g,e<d&&(d=e);else if(g>k)g/=g-k,e=e*(1-g)+h*g,e>c&&(c=e);else if(0>g){if(e>h)return null}else if(0<g&&e<h)return null}return!isFinite(c)||!isFinite(d)||c>=d?null:[c,d]}
function Fc(a,b,c){if(void 0==a.type)return 0;switch(a.type){case 0:case 1:case 3:var d=0;a=(c-a.l)*-a.ya+a.m;b<=a&&(d+=2);b>=a&&(d+=1);return d;case 2:return d=0,b<=a.m&&(d+=2),b>=a.m&&(d+=1),d;case 4:case 5:case 7:return d=0,a=(b-a.m)*a.ya+a.l,c<=a&&(d+=2),c>=a&&(d+=1),d;case 6:return d=0,c<=a.l&&(d+=2),c>=a.l&&(d+=1),d;case 8:case 9:case 11:return d=0,a=(c-a.l)*-a.ya+a.m,b<=a&&(d+=1),b>=a&&(d+=2),d;case 10:return d=0,b<=a.m&&(d+=1),b>=a.m&&(d+=2),d;case 12:case 13:case 15:return d=0,a=(b-a.m)*
a.ya+a.l,c<=a&&(d+=1),c>=a&&(d+=2),d;case 14:return d=0,c<=a.l&&(d+=1),c>=a.l&&(d+=2),d}}
function Dc(a,b,c){switch(a.type){case 0:case 1:case 3:b-=a.m;c-=a.l;var d=Math.floor(c/a.aa);b-=d*a.ga;c-=d*a.aa;return(c*-a.ya-b)*a.Ub;case 2:return a.m-b;case 4:case 5:case 7:return b-=a.m,c-=a.l,d=Math.floor(b/-a.ga),b+=d*a.ga,c+=d*a.aa,(b*a.ya-c)*a.Ub;case 6:return a.l-c;case 8:case 9:case 11:return b-=a.m,c-=a.l,d=Math.floor(c/-a.aa),b+=d*a.ga,c+=d*a.aa,(b-c*-a.ya)*a.Ub;case 10:return b-a.m;case 12:case 13:case 15:return b-=a.m,c-=a.l,d=Math.floor(b/a.ga),b-=d*a.ga,c-=d*a.aa,(c-b*a.ya)*a.Ub;
case 14:return c-a.l}return NaN}f.getParameter=function(a,b){var c=this.type,d=this.ga,e=this.aa;this.type=(c+12)%16;this.ga=e;this.aa=-d;a=Dc(this,a,b);this.type=c;this.ga=d;this.aa=e;return a};f.evaluate=function(a){a/=this.length;return(new E(this.m+(this.C-this.m)*a,this.l+(this.w-this.l)*a)).round()};f.ub=function(a,b){var c=(this.C-this.m)/this.length,d=(this.w-this.l)/this.length;return(new E(this.m+c*a-d*b,this.l+d*a+c*b)).round()};
f.tf=function(a,b){return(new E(this.getParameter(a,b),Dc(this,a,b))).round()};function Rc(a){return(new E(a.C-a.m,a.w-a.l)).scale(5E4/a.length)}function Sc(a,b){return(new E(a.l-a.w,a.C-a.m)).scale(b/a.length)}f.zf=function(a,b){a=this.getParameter(a,b);a/=this.length;return 0>=a?new E(this.m,this.l):1<=a?new E(this.C,this.w):(new E(this.m+(this.C-this.m)*a,this.l+(this.w-this.l)*a)).round()};
function Pc(a,b){var c=0;switch(a.type){case 0:case 1:case 3:if(b<a.l)break;if(b>=a.w)break;c-=a.m;b-=a.l;var d=Math.floor(b/a.aa);c-=d*a.ga;b-=d*a.aa;return b*-a.ya-c;case 2:if(b<a.l)break;if(b>=a.w)break;return a.m-c;case 4:case 5:if(b<a.l)break;if(b>=a.w)break;c-=a.m;b-=a.l;d=Math.floor(b/a.aa);c-=d*a.ga;b-=d*a.aa;return b/a.ya-c;case 7:if(b<a.w)break;if(b>=a.l)break;c-=a.m;b-=a.l;d=Math.floor(b/-a.aa);c+=d*a.ga;b+=d*a.aa;return b/a.ya-c;case 8:case 9:case 11:if(b<a.w)break;if(b>=a.l)break;c-=
a.m;b-=a.l;d=Math.floor(b/-a.aa);c+=d*a.ga;b+=d*a.aa;return b*-a.ya-c;case 10:if(b<a.w)break;if(b>=a.l)break;return a.m-c;case 12:case 13:if(b<a.w)break;if(b>=a.l)break;c-=a.m;b-=a.l;d=Math.floor(b/-a.aa);c+=d*a.ga;b+=d*a.aa;return b/a.ya-c;case 15:if(!(b<a.l||b>=a.w))return c-=a.m,b-=a.l,d=Math.floor(b/a.aa),c-=d*a.ga,b-=d*a.aa,b/a.ya-c}return NaN}
function Mc(a,b,c){switch(a.type){case 0:case 1:case 3:if(c<a.l)break;if(c>=a.w)break;b-=a.m;c-=a.l;var d=Math.floor(c/a.aa);b-=d*a.ga;c-=d*a.aa;a=c*-a.ya-b;if(0>a)break;return a+1;case 2:if(c<a.l)break;if(c>=a.w)break;a=a.m-b;if(0>a)break;return a+1;case 4:case 5:if(c<a.l)break;if(c>=a.w)break;b-=a.m;c-=a.l;d=Math.floor(c/a.aa);b-=d*a.ga;c-=d*a.aa;a=c/a.ya-b;if(0>a)break;return a+1;case 7:if(c<a.w)break;if(c>=a.l)break;b-=a.m;c-=a.l;d=Math.floor(c/-a.aa);b+=d*a.ga;c+=d*a.aa;a=c/a.ya-b;if(0>a)break;
return-a-1;case 8:case 9:case 11:if(c<a.w)break;if(c>=a.l)break;b-=a.m;c-=a.l;d=Math.floor(c/-a.aa);b+=d*a.ga;c+=d*a.aa;a=c*-a.ya-b;if(0>a)break;return-a-1;case 10:if(c<a.w)break;if(c>=a.l)break;a=a.m-b;if(0>a)break;return-a-1;case 12:case 13:if(c<a.w)break;if(c>=a.l)break;b-=a.m;c-=a.l;d=Math.floor(c/-a.aa);b+=d*a.ga;c+=d*a.aa;a=c/a.ya-b;if(0>a)break;return-a-1;case 15:if(!(c<a.l||c>=a.w||(b-=a.m,c-=a.l,d=Math.floor(c/a.aa),b-=d*a.ga,c-=d*a.aa,a=c/a.ya-b,0>a)))return a+1}return NaN}
f.log=function(){console.log(this.m+" "+this.l+" "+this.ga+" "+this.aa+" type: "+this.type+" slope: "+this.ya)};f.da=function(){var a=this.hb(this.m,this.l,this.C,this.w);a.type=this.type;a.ya=this.ya;a.Ub=this.Ub;a.length=this.length;a.ga=this.ga;a.aa=this.aa;return a};function Tc(a){var b=a.hb(a.C,a.w,a.m,a.l);b.type=(a.type+8)%16;b.ya=a.ya;b.Ub=a.Ub;b.length=a.length;b.ga=-a.ga;b.aa=-a.aa;return b}f.hb=function(a,b,c,d){return new yc(a,b,c,d)};
function Uc(a){if(a.ea)return a.ea;var b=Tc(a);b.ea=a;return a.ea=b}function ad(a,b){return a.type<b.type?-1:a.type>b.type?1:a.ya<b.ya?-1:a.ya>b.ya?1:0}function bd(a){var b=[];a=p(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(new E(c.m,c.l));return b}function cd(a){var b=[];a.bound&&(b.bound=a.bound);a=p(a);for(var c=a.next();!c.done;c=a.next())b.unshift(Uc(c.value));return b}
function G(a,b,c,d){this.set(void 0===a?255:a,void 0===b?255:b,void 0===c?255:c,void 0===d?255:d);return this}function dd(a,b){return a.r<b.r?-1:a.r>b.r?1:a.jb<b.jb?-1:a.jb>b.jb?1:a.pa<b.pa?-1:a.pa>b.pa?1:a.Oa<b.Oa?-1:a.Oa>b.Oa?1:0}G.prototype.set=function(a,b,c,d){255<a&&(a=255);0>a&&(a=0);255<b&&(b=255);0>b&&(b=0);255<c&&(c=255);0>c&&(c=0);255<d&&(d=255);0>d&&(d=0);this.r=a;this.jb=b;this.pa=c;this.Oa=d;return this};
G.prototype.scale=function(a){this.r=Math.round(this.r*a);this.jb=Math.round(this.jb*a);this.pa=Math.round(this.pa*a);return this};G.prototype.save=function(a){Db(a,this.r);Db(a,this.jb);Db(a,this.pa);Db(a,this.Oa);return this};function ed(a){return new G(Ab(a),Ab(a),Ab(a),Ab(a))}new G(0,0,0,0);var fd=new G(255,255,255,255),gd=new G(0,0,0,255),hd=new G(255,0,0,255);new G(255,255,0,255);new G(0,255,0,255);new G(0,255,255,255);new G(0,0,255,255);new G(255,0,255,255);
function id(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.Zi=this.Yi=this.df=this.cf=this.cd=this.bd=this.Tb=this.Qc=this.sc=this.Ee=this.De=this.Ce=this.Be=this.Ae=this.ze=0;this.Da=this.Id=this.Jd=this.la=255;return this}
function jd(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:a.z<b.z?-1:a.z>b.z?1:a.ze<b.ze?-1:a.ze>b.ze?1:a.Ae<b.Ae?-1:a.Ae>b.Ae?1:a.Be<b.Be?-1:a.Be>b.Be?1:a.Ce<b.Ce?-1:a.Ce>b.Ce?1:a.De<b.De?-1:a.De>b.De?1:a.Ee<b.Ee?-1:a.Ee>b.Ee?1:a.sc<b.sc?-1:a.sc>b.sc?1:a.Qc<b.Qc?-1:a.Qc>b.Qc?1:a.Tb<b.Tb?-1:a.Tb>b.Tb?1:a.bd<b.bd?-1:a.bd>b.bd?1:a.cd<b.cd?-1:a.cd>b.cd?1:a.cf<b.cf?-1:a.cf>b.cf?1:a.df<b.df?-1:a.df>b.df?1:a.Yi<b.Yi?-1:a.Yi>b.Yi?1:a.Zi<b.Zi?-1:a.Zi>b.Zi?1:a.la<b.la?-1:a.la>b.la?1:a.Jd<b.Jd?-1:a.Jd>
b.Jd?1:a.Id<b.Id?-1:a.Id>b.Id?1:a.Da<b.Da?-1:a.Da>b.Da?1:0}function kd(a,b,c){var d=1-c,e=new id(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c);e.ze=a.ze*d+b.ze*c;e.Ae=a.Ae*d+b.Ae*c;e.Be=a.Be*d+b.Be*c;e.Ce=a.Ce*d+b.Ce*c;e.De=a.De*d+b.De*c;e.Ee=a.Ee*d+b.Ee*c;e.sc=a.sc*d+b.sc*c;e.Qc=a.Qc*d+b.Qc*c;e.Tb=a.Tb*d+b.Tb*c;e.bd=a.bd*d+b.bd*c;e.cd=a.cd*d+b.cd*c;e.cf=a.cf*d+b.cf*c;e.df=a.df*d+b.df*c;e.la=a.la*d+b.la*c;e.Jd=a.Jd*d+b.Jd*c;e.Id=a.Id*d+b.Id*c;e.Da=a.Da*d+b.Da*c;return e}
id.prototype.da=function(){var a=new id(this.x,this.y,this.z);a.ze=this.ze;a.Ae=this.Ae;a.Be=this.Be;a.Ce=this.Ce;a.De=this.De;a.Ee=this.Ee;a.sc=this.sc;a.Qc=this.Qc;a.Tb=this.Tb;a.bd=this.bd;a.cd=this.cd;a.cf=this.cf;a.df=this.df;a.la=this.la;a.Jd=this.Jd;a.Id=this.Id;a.Da=this.Da;return a};function od(a,b){a.la=b.r;a.Jd=b.jb;a.Id=b.pa;a.Da=b.Oa}function pd(a,b,c){a.bd=b;a.cd=c;return a};function E(a,b){this.x=void 0===a?0:a;this.y=void 0===b?0:b;return this}f=E.prototype;f.set=function(a,b){this.x=a;this.y=b;return this};f.Rc=function(){return this.x*this.x+this.y*this.y};f.length=function(){return Math.sqrt(this.Rc())};f.oa=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.oa(1);return this};f.scale=function(a){this.x*=a;this.y*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.sub=function(a){this.x=this.x-a.x;this.y=this.y-a.y;return this};f.da=function(){return new E(this.x,this.y)};f.Yd=function(a){a||(a=new Float32Array(2));a[0]=this.x;a[1]=this.y;return a};function qd(a,b){return a.x*b.x+a.y*b.y}function rd(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0}f.Dj=function(){return 0!=this.x||0!=this.y?!1:!0};function w(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;return this}
function lc(a,b){return a.x*b.x+a.y*b.y+a.z*b.z}function nc(a,b,c){c.x=a.y*b.z-a.z*b.y;c.y=b.x*a.z-b.z*a.x;c.z=a.x*b.y-a.y*b.x;return c}function sd(a,b,c){c.x=a.x-b.x;c.y=a.y-b.y;c.z=a.z-b.z;return c}function td(a,b,c){var d=1-c;return new w(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c)}function ud(a,b){b.x=a.x;b.y=a.y;b.z=a.z}f=w.prototype;f.da=function(){return new w(this.x,this.y,this.z)};f.set=function(a,b,c){this.x=a;this.y=b;this.z=c;return this};
f.Rc=function(){return this.x*this.x+this.y*this.y+this.z*this.z};f.length=function(){return Math.sqrt(this.Rc())};f.oa=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.oa(1);return this};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.sub=function(a){return sd(this,a,this)};f.Yd=function(a){a||(a=new Float32Array(3));a[0]=this.x;a[1]=this.y;a[2]=this.z;return a};f.Dj=function(){return 0!=this.x||0!=this.y||0!=this.z?!1:!0};function vd(a,b,c,d){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.b=void 0===d?0:d;return this}vd.prototype.set=function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.b=d;return this};
vd.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.b=Math.round(this.b);return this};vd.prototype.Yd=function(a){a||(a=new Float32Array(4));a[0]=this.x;a[1]=this.y;a[2]=this.z;a[3]=this.b;return a};vd.prototype.Dj=function(){return 0!=this.x||0!=this.y||0!=this.z||0!=this.b?!1:!0};function wd(){this.reset();return this}f=wd.prototype;
f.set=function(a){this.F=a.F;this.K=a.K;this.M=a.M;this.H=a.H;this.m11=a.m11;this.m12=a.m12;this.P=a.P;this.m21=a.m21;this.m22=a.m22;return this};f.reset=function(){this.F=1;this.H=this.M=this.K=0;this.m11=1;this.m21=this.P=this.m12=0;this.m22=1;return this};
f.rotate=function(a,b,c){var d=Math.cos(c);c=Math.sin(c);var e=c*this.F+d*this.K,h=d*this.H-c*this.m11,g=c*this.H+d*this.m11,k=d*this.P-c*this.m21,l=c*this.P+d*this.m21;this.F=d*this.F-c*this.K;this.K=e;this.H=h;this.m11=g;this.P=k;this.m21=l;d=Math.cos(b);b=Math.sin(b);c=d*this.M-b*this.K;e=b*this.m12+d*this.m11;h=d*this.m12-b*this.m11;g=b*this.m22+d*this.m21;k=d*this.m22-b*this.m21;this.K=b*this.M+d*this.K;this.M=c;this.m11=e;this.m12=h;this.m21=g;this.m22=k;b=Math.cos(a);a=Math.sin(a);d=a*this.M+
b*this.F;c=b*this.m12-a*this.H;e=a*this.m12+b*this.H;h=b*this.m22-a*this.P;g=a*this.m22+b*this.P;this.M=b*this.M-a*this.F;this.F=d;this.m12=c;this.H=e;this.m22=h;this.P=g;return this};f.Wj=function(a,b){var c=Math.cos(b),d=Math.sin(b);b=1-c;var e=a.x*a.y,h=a.y*a.z,g=a.z*a.x,k=a.x*d,l=a.y*d;d*=a.z;this.F=a.x*a.x*b+c;this.K=e*b+d;this.M=g*b-l;this.H=e*b-d;this.m11=a.y*a.y*b+c;this.m12=h*b+k;this.P=g*b+l;this.m21=h*b-k;this.m22=a.z*a.z*b+c;return this};
f.Uj=function(a,b){a=(new wd).Wj(a,b);xd(a,this,this);return this};f.scale=function(a,b,c){this.F*=a;this.K*=a;this.M*=a;this.H*=b;this.m11*=b;this.m12*=b;this.P*=c;this.m21*=c;this.m22*=c;return this};
f.Cj=function(a){a||(a=this);var b=this.rj();if(0==b)return a;var c=-(this.H*this.m22+this.m12*-this.P),d=this.H*this.m21+this.m11*-this.P,e=-(this.K*this.m22+this.M*-this.m21),h=this.F*this.m22+this.M*-this.P,g=-(this.F*this.m21+this.K*-this.P),k=this.K*this.m12+this.M*-this.m11,l=-(this.F*this.m12+this.M*-this.H),m=this.F*this.m11+this.K*-this.H;b=1/b;a.F=(this.m11*this.m22+this.m12*-this.m21)*b;a.H=c*b;a.P=d*b;a.K=e*b;a.m11=h*b;a.m21=g*b;a.M=k*b;a.m12=l*b;a.m22=m*b;return a};
f.rj=function(){return this.F*(this.m11*this.m22-this.m12*this.m21)+this.K*(this.m12*this.P-this.H*this.m22)+this.M*(this.H*this.m21-this.m11*this.P)};f.Yd=function(a){a||(a=new Float32Array(9));a[0]=this.F;a[1]=this.K;a[2]=this.M;a[3]=this.H;a[4]=this.m11;a[5]=this.m12;a[6]=this.P;a[7]=this.m21;a[8]=this.m22;return a};
function xd(a,b,c){var d=a.K*b.F+a.m11*b.K+a.m21*b.M,e=a.M*b.F+a.m12*b.K+a.m22*b.M,h=a.F*b.H+a.H*b.m11+a.P*b.m12,g=a.K*b.H+a.m11*b.m11+a.m21*b.m12,k=a.M*b.H+a.m12*b.m11+a.m22*b.m12,l=a.F*b.P+a.H*b.m21+a.P*b.m22,m=a.K*b.P+a.m11*b.m21+a.m21*b.m22,n=a.M*b.P+a.m12*b.m21+a.m22*b.m22;c.F=a.F*b.F+a.H*b.K+a.P*b.M;c.H=h;c.P=l;c.K=d;c.m11=g;c.m21=m;c.M=e;c.m12=k;c.m22=n;return c}
f.transform=function(a,b){return b.set(this.F*a.x+this.H*a.y+this.P*a.z,this.K*a.x+this.m11*a.y+this.m21*a.z,this.M*a.x+this.m12*a.y+this.m22*a.z)};f.Ne=function(){return new w(this.F,this.K,this.M)};f.Oe=function(){return new w(this.H,this.m11,this.m12)};f.wd=function(){return new w(this.P,this.m21,this.m22)};f.Ue=function(a){this.F=a.x;this.K=a.y;this.M=a.z;return this};f.Ve=function(a){this.H=a.x;this.m11=a.y;this.m12=a.z;return this};f.We=function(a){this.P=a.x;this.m21=a.y;this.m22=a.z;return this};
f.save=function(a){var b=new Uint8Array((new Float32Array([this.F,this.K,this.M,this.H,this.m11,this.m12,this.P,this.m21,this.m22])).buffer);a.set(b,a.position);a.position+=36};f.load=function(a){a=a.slice(a.position,a.position+=36);a=new Float32Array(a.buffer);a=p(a);this.F=a.next().value;this.K=a.next().value;this.M=a.next().value;this.H=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.P=a.next().value;this.m21=a.next().value;this.m22=a.next().value};new wd;
function N(){this.reset();return this}f=N.prototype;f.set=function(a){this.F=a.F;this.K=a.K;this.M=a.M;this.kb=a.kb;this.H=a.H;this.m11=a.m11;this.m12=a.m12;this.m13=a.m13;this.P=a.P;this.m21=a.m21;this.m22=a.m22;this.m23=a.m23;this.G=a.G;this.m31=a.m31;this.m32=a.m32;this.m33=a.m33;return this};f.reset=function(){this.F=1;this.H=this.kb=this.M=this.K=0;this.m11=1;this.m21=this.P=this.m13=this.m12=0;this.m22=1;this.m32=this.m31=this.G=this.m23=0;this.m33=1;return this};
function yd(a){wd.prototype.reset.call(a)}f.translate=function(a,b,c){this.G+=a;this.m31+=b;this.m32+=c;return this};f.rotate=wd.prototype.rotate;f.Wj=wd.prototype.Wj;f.Uj=wd.prototype.Uj;f.scale=wd.prototype.scale;
f.Cj=function(a){function b(D,I,J,P,sa,ta,fa,ha,Kb){return D*(sa*Kb-ta*ha)+I*(ta*fa-P*Kb)+J*(P*ha-sa*fa)}a||(a=this);var c=this.rj();if(0==c)return a;var d=b(this.m11,this.m12,this.m13,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),e=-b(this.H,this.m12,this.m13,this.P,this.m22,this.m23,this.G,this.m32,this.m33),h=b(this.H,this.m11,this.m13,this.P,this.m21,this.m23,this.G,this.m31,this.m33),g=-b(this.H,this.m11,this.m12,this.P,this.m21,this.m22,this.G,this.m31,this.m32),k=-b(this.K,this.M,
this.kb,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),l=b(this.F,this.M,this.kb,this.P,this.m22,this.m23,this.G,this.m32,this.m33),m=-b(this.F,this.K,this.kb,this.P,this.m21,this.m23,this.G,this.m31,this.m33),n=b(this.F,this.K,this.M,this.P,this.m21,this.m22,this.G,this.m31,this.m32),r=b(this.K,this.M,this.kb,this.m11,this.m12,this.m13,this.m31,this.m32,this.m33),q=-b(this.F,this.M,this.kb,this.H,this.m12,this.m13,this.G,this.m32,this.m33),u=b(this.F,this.K,this.kb,this.H,this.m11,this.m13,
this.G,this.m31,this.m33),z=-b(this.F,this.K,this.M,this.H,this.m11,this.m12,this.G,this.m31,this.m32),y=-b(this.K,this.M,this.kb,this.m11,this.m12,this.m13,this.m21,this.m22,this.m23),x=b(this.F,this.M,this.kb,this.H,this.m12,this.m13,this.P,this.m22,this.m23),C=-b(this.F,this.K,this.kb,this.H,this.m11,this.m13,this.P,this.m21,this.m23),A=b(this.F,this.K,this.M,this.H,this.m11,this.m12,this.P,this.m21,this.m22);c=1/c;a.F=d*c;a.H=e*c;a.P=h*c;a.G=g*c;a.K=k*c;a.m11=l*c;a.m21=m*c;a.m31=n*c;a.M=r*c;a.m12=
q*c;a.m22=u*c;a.m32=z*c;a.kb=y*c;a.m13=x*c;a.m23=C*c;a.m33=A*c;return a};
f.rj=function(){var a=this.F*(this.m11*this.m22*this.m33+this.m12*this.m23*this.m31+this.m13*this.m21*this.m32-(this.m13*this.m22*this.m31+this.m11*this.m23*this.m32+this.m12*this.m21*this.m33));a-=this.K*(this.H*this.m22*this.m33+this.m12*this.m23*this.G+this.m13*this.P*this.m32-(this.m13*this.m22*this.G+this.H*this.m23*this.m32+this.m12*this.P*this.m33));a+=this.M*(this.H*this.m21*this.m33+this.m11*this.m23*this.G+this.m13*this.P*this.m31-(this.m13*this.m21*this.G+this.H*this.m23*this.m31+this.m11*
this.P*this.m33));return a-=this.kb*(this.H*this.m21*this.m32+this.m11*this.m22*this.G+this.m12*this.P*this.m31-(this.m12*this.m21*this.G+this.H*this.m22*this.m31+this.m11*this.P*this.m32))};f.Yd=function(a){a||(a=new Float32Array(16));a[0]=this.F;a[1]=this.K;a[2]=this.M;a[3]=this.kb;a[4]=this.H;a[5]=this.m11;a[6]=this.m12;a[7]=this.m13;a[8]=this.P;a[9]=this.m21;a[10]=this.m22;a[11]=this.m23;a[12]=this.G;a[13]=this.m31;a[14]=this.m32;a[15]=this.m33;return a};
function zd(a,b,c){var d=a.K*b.F+a.m11*b.K+a.m21*b.M+a.m31*b.kb,e=a.M*b.F+a.m12*b.K+a.m22*b.M+a.m32*b.kb,h=a.kb*b.F+a.m13*b.K+a.m23*b.M+a.m33*b.kb,g=a.F*b.H+a.H*b.m11+a.P*b.m12+a.G*b.m13,k=a.K*b.H+a.m11*b.m11+a.m21*b.m12+a.m31*b.m13,l=a.M*b.H+a.m12*b.m11+a.m22*b.m12+a.m32*b.m13,m=a.kb*b.H+a.m13*b.m11+a.m23*b.m12+a.m33*b.m13,n=a.F*b.P+a.H*b.m21+a.P*b.m22+a.G*b.m23,r=a.K*b.P+a.m11*b.m21+a.m21*b.m22+a.m31*b.m23,q=a.M*b.P+a.m12*b.m21+a.m22*b.m22+a.m32*b.m23,u=a.kb*b.P+a.m13*b.m21+a.m23*b.m22+a.m33*b.m23,
z=a.F*b.G+a.H*b.m31+a.P*b.m32+a.G*b.m33,y=a.K*b.G+a.m11*b.m31+a.m21*b.m32+a.m31*b.m33,x=a.M*b.G+a.m12*b.m31+a.m22*b.m32+a.m32*b.m33,C=a.kb*b.G+a.m13*b.m31+a.m23*b.m32+a.m33*b.m33;c.F=a.F*b.F+a.H*b.K+a.P*b.M+a.G*b.kb;c.H=g;c.P=n;c.G=z;c.K=d;c.m11=k;c.m21=r;c.m31=y;c.M=e;c.m12=l;c.m22=q;c.m32=x;c.kb=h;c.m13=m;c.m23=u;c.m33=C}
f.transform=function(a,b){return b.set(this.F*a.x+this.H*a.y+this.P*a.z+this.G*a.b,this.K*a.x+this.m11*a.y+this.m21*a.z+this.m31*a.b,this.M*a.x+this.m12*a.y+this.m22*a.z+this.m32*a.b,this.kb*a.x+this.m13*a.y+this.m23*a.z+this.m33*a.b)};f.ub=function(a,b){return b.set(this.F*a.x+this.H*a.y+this.P*a.z+this.G,this.K*a.x+this.m11*a.y+this.m21*a.z+this.m31,this.M*a.x+this.m12*a.y+this.m22*a.z+this.m32)};
function Ad(a,b,c){c.set(a.F*b.x+a.H*b.y+a.P*b.z,a.K*b.x+a.m11*b.y+a.m21*b.z,a.M*b.x+a.m12*b.y+a.m22*b.z)}f.Ne=wd.prototype.Ne;f.Oe=wd.prototype.Oe;f.wd=wd.prototype.wd;function Bd(a){return new w(a.G,a.m31,a.m32)}f.Ue=wd.prototype.Ue;f.Ve=wd.prototype.Ve;f.We=wd.prototype.We;function Id(a,b){a.G=b.x;a.m31=b.y;a.m32=b.z}
f.save=function(a){var b=new Uint8Array((new Float32Array([this.F,this.K,this.M,this.kb,this.H,this.m11,this.m12,this.m13,this.P,this.m21,this.m22,this.m23,this.G,this.m31,this.m32,this.m33])).buffer);a.set(b,a.position);a.position+=64};
f.load=function(a){a=a.slice(a.position,a.position+=64);a=new Float32Array(a.buffer);a=p(a);this.F=a.next().value;this.K=a.next().value;this.M=a.next().value;this.kb=a.next().value;this.H=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.m13=a.next().value;this.P=a.next().value;this.m21=a.next().value;this.m22=a.next().value;this.m23=a.next().value;this.G=a.next().value;this.m31=a.next().value;this.m32=a.next().value;this.m33=a.next().value};var Jd=new N;
function Oc(){this.s=Number.POSITIVE_INFINITY;this.v=Number.NEGATIVE_INFINITY;this.o=Number.POSITIVE_INFINITY;this.u=Number.NEGATIVE_INFINITY}Oc.prototype.Ja=function(a,b){a<this.s&&(this.s=a);a>this.v&&(this.v=a);b<this.o&&(this.o=b);b>this.u&&(this.u=b);return this};Oc.prototype.Yk=function(a){this.Ja(a.s,a.o);this.Ja(a.v,a.u)};Oc.prototype.da=function(){var a=new Oc;a.s=this.s;a.v=this.v;a.o=this.o;a.u=this.u;return a};
Oc.prototype.rf=function(a,b){return a<=this.s||a>=this.v||b<=this.o||b>=this.u?!1:!0};function Kd(){this.s=Number.POSITIVE_INFINITY;this.v=Number.NEGATIVE_INFINITY;this.o=Number.POSITIVE_INFINITY;this.u=Number.NEGATIVE_INFINITY;this.D=Number.POSITIVE_INFINITY;this.I=Number.NEGATIVE_INFINITY}Kd.prototype.Ja=function(a,b,c){a<this.s&&(this.s=a);a>this.v&&(this.v=a);b<this.o&&(this.o=b);b>this.u&&(this.u=b);c<this.D&&(this.D=c);c>this.I&&(this.I=c);return this};
Kd.prototype.Yk=function(a){this.Ja(a.s,a.o,a.D);this.Ja(a.v,a.u,a.I)};Kd.prototype.da=function(){var a=new Kd;a.s=this.s;a.v=this.v;a.o=this.o;a.u=this.u;a.D=this.D;a.I=this.I;return a};function Ld(a,b){return a.s>=b.v||a.v<=b.s||a.o>=b.u||a.u<=b.o||a.D>=b.I||a.I<=b.D?!1:!0}Kd.prototype.rf=function(a,b){return a<=this.s||a>=this.v||b<=this.o||b>=this.u||void 0<=this.D||void 0>=this.I?!1:!0};t.Node=function(a){this.name=a;this.children=this.parent=null;this.rl=new db(this);this.Ya=1;this.ia=t.ia;this.za=-2147483648;return this};f=t.Node.prototype;f.create=function(){};f.remove=function(){O(this,null)};function Md(a,b){if(0!=b.call(a)&&a.children)for(a=a.children.first();null!=a.item;a=a.next)Md(a.item,b)}f.step=function(){};f.Vc=function(){};f.$a=function(){};function Nd(a){Md(a,function(){if(!this.Vh())return!1;this.$a(void 0)})}f.Vh=function(){return!this.Ya||this.ia.za<t.h?!1:!0};
function O(a,b){if(a.parent)return a.parent=b,t.Tj.push(a),a;if(b)return a.parent=b,Od(a)}function Od(a){fb(a.rl);if(!a.parent)return a;a.parent.children||(a.parent.children=new cb);gb(a.parent.children,a.rl);return a}function Pd(a,b){a.ia=b;if(a.children)for(a=a.children.first();null!=a.item;a=a.next)Pd(a.item,b)}
f.log=function(){this.name?console.group(this.constructor.name+": "+this.name):console.group(this.constructor.name);if(this.children)for(var a=this.children.first();null!=a.item;a=a.next)a.item.log();console.groupEnd()};t.Fa=function(a){t.Node.call(this,a);this.transform=new N;this.Ia=null;this.L=new N};t.Fa.prototype=Object.create(t.Node.prototype);t.Fa.prototype.constructor=t.Fa;function Qd(a,b){var c=a.Ug=new t.Lf;c.ia=a.ia;c.mb=1.75*b;c.Ia=a.L;O(c,t.Th)}
t.Fa.prototype.remove=function(){this.Ug&&this.Ug.remove();t.Node.prototype.remove.call(this)};t.Fa.prototype.save=function(a){Bb(a,"NG.Node3D");this.L.save()};t.Fa.prototype.step=function(){Rd(this)};function Rd(a){a.Ia?zd(a.Ia,a.transform,a.L):a.L.set(a.transform)}t.ia={za:NaN,lb:new w(1,1,1)};t.Tj=[];t.Vj=new t.Node("schedule");t.Xc=O(new t.Node("scene"),t.Vj);t.inputs=O(new t.Node("inputs"),t.Vj);function Sd(){this.Jb=new ab(yb);this.wc=new ab(yb);this.ta=new ab(yb);this.N=new ab(yb);this.Y=new ab(yb);return this}
Sd.prototype.save=function(a){Jb(a,this.Jb.elements.length);for(var b=0;b<this.Jb.elements.length;b++)this.Jb.elements[b].save(a);Jb(a,this.wc.elements.length);for(b=0;b<this.wc.elements.length;b++)this.wc.elements[b].save(a);Jb(a,this.ta.elements.length);for(b=0;b<this.ta.elements.length;b++)this.ta.elements[b].save(a);Jb(a,this.N.elements.length);for(b=0;b<this.N.elements.length;b++)this.N.elements[b].save(a);Jb(a,this.Y.elements.length);for(b=0;b<this.Y.elements.length;b++)this.Y.elements[b].save(a)};
Sd.prototype.load=function(a){this.Of=0;var b=Ib(a);for(var c=0;c<b;c++){var d=new Td;d.load(a);this.Jb.replace(d)}b=Ib(a);for(c=0;c<b;c++)d=new Ud,d.load(a),this.wc.replace(d);b=Ib(a);if(this.ta.elements.length){for(c=0;c<b;c++)zb(a),Eb(a),Eb(a);b=p(this.ta.elements);for(c=b.next();!c.done;c=b.next())c.value.create()}else for(c=0;c<b;c++)d=new Vd,d.load(a),this.ta.replace(d);b=Ib(a);this.Of+=b;for(c=0;c<b;c++)d=new t.ve,d.zh=this,d.load(a),this.N.replace(d);b=Ib(a);this.Of+=b;for(c=0;c<b;c++)d=new t.Audio,
d.zh=this,d.load(a),this.Y.replace(d);0==this.Of&&this.ready&&this.ready.call(this)};function Wd(a){a.Of--;0<a.Of||a.ready&&a.ready.call(a)};t.Ha={musicEnabled:1,viewportFitWindow:1,viewportSize:16,lightingFancy:1,mouseRaw:1,mouseDPI:1600,mouseScale:3};
t.Bm=function(){t.Ba={MoveForwardKey:"KeyW",MoveForwardMouseButton:"",MoveBackwardKey:"KeyS",MoveBackwardMouseButton:"",MoveLeftKey:"KeyA",MoveLeftMouseButton:"",MoveRightKey:"KeyD",MoveRightMouseButton:"",JumpKey:"Space",JumpMouseButton:"",ReloadKey:"KeyR",ReloadMouseButton:"",RevolverKey:"KeyQ",RevolverMouseButton:"",CarbineKey:"KeyE",CarbineMouseButton:"",ShotgunKey:"KeyC",ShotgunMouseButton:"",MasherKey:"KeyF",MasherMouseButton:"1",GrenadeKey:"KeyG",GrenadeMouseButton:"3",GunFireKey:"",GunFireMouseButton:"0",
GunActionKey:"",GunActionMouseButton:"2"}};t.Bm();
t.rg=function(a,b){0==a?(Xd.Kd=null,R.Kd=null,document.removeEventListener("keydown",Xd.Ik),document.removeEventListener("keydown",Xd.vh),document.removeEventListener("mousedown",R.vh),document.addEventListener("keydown",Xd.Kk),document.addEventListener("keyup",Xd.Lk),document.addEventListener("mousedown",R.Mk),document.addEventListener("mouseup",R.Nk),t.hk&&t.hk.remove()):(document.removeEventListener("keydown",Xd.Kk),document.removeEventListener("keyup",Xd.Lk),document.removeEventListener("mousedown",
R.Mk),document.removeEventListener("mouseup",R.Nk),1==a?(Xd.Kd=b,document.addEventListener("keydown",Xd.Ik)):2==a&&(R.Kd=b,document.addEventListener("keydown",Xd.vh),document.addEventListener("mousedown",R.vh)))};var me=parseFloat(window.localStorage.getItem("version"));(isNaN(me)||.011>me)&&window.localStorage.clear();window.localStorage.setItem("version",.011);for(var ne in t.Ha){var oe=window.localStorage.getItem(ne);null==oe?window.localStorage.setItem(ne,t.Ha[ne]):t.Ha[ne]=parseFloat(oe)}
for(var pe in t.Ba){var qe=window.localStorage.getItem(pe);null==qe?window.localStorage.setItem(pe,t.Ba[pe]):t.Ba[pe]=qe}t.Ri=function(){t.sm=4294967296/(t.Ha.mouseDPI*t.Ha.mouseScale)};t.Ri();t.sh={};t.sh.overflowX=document.body.style.overflowX;t.sh.overflowY=document.body.style.overflowY;t.sh.userSelect=document.body.style.userSelect;v=t.canvas.getContext("webgl2",{alpha:!1,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1,Zm:!0});t.qc={};t.h=NaN;t.vi=0;t.wi=1E3/60;t.za=-2147483648;
t.ng=function(){2147483647==t.za&&(t.za=-2147483648);t.za++};t.gc=new G(0,0,0,0);t.lm=new G(255,255,255,0);t.c=new Sd;t.A=null;t.bj=null;t.Gk=null;t.ka=null;t.viewport=null;t.ym=function(){t.canvas.width=480;t.canvas.height=296;t.nh=new xc(480,296,null);t.Ph.width=480;t.Ph.height=296;t.Ph.create();t.$d.style.width=t.canvas.width+"px";t.$d.style.height=t.canvas.height+"px";document.body.style.width=t.canvas.width+"px";t.vg()};t.hl=0;
t.vg=function(a){var b=Math.min(window.innerWidth/document.body.clientWidth,window.innerHeight/document.body.clientHeight);b=Math.floor(8*b);b=Math.max(b,12);var c=t.Ha.viewportFitWindow?b:t.Ha.viewportSize;a&&(c+=a,t.Ha.viewportFitWindow=0,t.Jh?t.Jh.checked=!1:window.localStorage.setItem("viewportFitWindow",0));b=t.hl=Math.max(t.hl,b);c=Wa(c,12,b);t.Ha.viewportSize=c;t.Jh||window.localStorage.setItem("viewportSize",c);document.body.style.transform="scale("+c/8+")"};
window.onresize=function(){document.body.style.left=(window.innerWidth-t.canvas.width>>1)+"px";t.vg()};t.Uh=function(a){v.viewport(a.x,a.y,a.b,a.g);t.viewport=a;t.qc.fd.J("viewport",new E(a.b,a.g),!0);t.qc.fd.upload()};t.tl=function(a){t.ka=a};t.ab=function(a){t.A!=a&&(t.A=a.bind())};t.zb=function(a){t.bj!=a&&(t.bj=a.bind())};t.Xe=function(a){a&&t.Gk!=a&&(t.Gk=a.bind())};
t.Lb=function(a,b){v.activeTexture(v.TEXTURE0+a);b?(v.bindTexture(v.TEXTURE_2D,b.object),t.A.J("enableTexture"+a,1,!0)):(v.bindTexture(v.TEXTURE_2D,null),t.A.J("enableTexture"+a,0,!0))};t.rb=function(a){if(t.Ga!=a){switch(a){case 0:v.disable(v.BLEND);break;case 1:v.enable(v.BLEND);v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA);break;case 2:v.enable(v.BLEND),v.blendFunc(v.SRC_ALPHA,v.ONE_MINUS_SRC_ALPHA)}t.Ga=a}};
t.$b=function(a){if(t.depth!=a){switch(a){case 0:v.disable(v.DEPTH_TEST);break;case 1:v.enable(v.DEPTH_TEST);v.depthMask(!1);break;case 2:v.enable(v.DEPTH_TEST),v.depthMask(!0)}t.depth=a}};t.Pb=function(a){if(t.facing!=a){switch(a){case 0:v.disable(v.CULL_FACE);break;case 1:v.enable(v.CULL_FACE);v.frontFace(v.CCW);break;case 2:v.enable(v.CULL_FACE),v.frontFace(v.CW)}t.facing=a}};for(var re=0;4>re;re++)v.enableVertexAttribArray(re);v.clearColor(0,0,0,0);v.depthFunc(v.LEQUAL);
t.start=function(){t.qc.fd.create(["u_eyeMatrix","u_viewMatrix","u_cameraPos","u_viewport"]);t.qc.ol.create([]);requestAnimationFrame(function(a){t.wf.time=a;t.wf.Nm=a;t.zi=a;t.loop(a)})};t.wf={};t.wf.time=0;t.wf.ob=0;t.wf.$k=0;t.wf.xm=function(a){this.Nm=a;a>=this.time+1E3&&(this.$k=this.ob=0,this.time+=1E3);this.ob++};t.paused=!0;
t.loop=function(a){var b=(t.zi-a)/t.wi;if(!(.5<b))if(-.5>b&&(t.zi=a,t.wf.$k++),t.zi+=t.wi,2==t.Ti&&t.a.pause(),t.paused)t.a&&t.a.Lm(),t.vi++;else{t.wf.xm(a);if(t.vl){t.vl--;requestAnimationFrame(t.loop);return}t.Yl=a+t.wi;Md(t.Vj,function(){this.step()});a=p(t.Tj);for(b=a.next();!b.done;b=a.next())Od(b.value);t.Tj.length=0;t.h++}requestAnimationFrame(t.loop)};t.dn=function(a,b){for(var c=[],d=Math.floor(640/a);1920>=a*d;d++)c.push([a*d,b*d]);return c};function se(a,b){a=v.createShader(a);v.shaderSource(a,b);v.compileShader(a);if(v.getShaderParameter(a,v.COMPILE_STATUS))return a;console.log(b);console.log(v.getShaderInfoLog(a));v.deleteShader(a)}function Vd(){this.name=void 0;this.Ea={};this.aj={}}f=Vd.prototype;
f.create=function(){this.Em=se(v.VERTEX_SHADER,this.bk);this.Dm=se(v.FRAGMENT_SHADER,this.ak);var a=this.Dm;var b=this.Wm;var c=v.createProgram();v.attachShader(c,this.Em);v.attachShader(c,a);if(b)for(a=0;a<b.length;a++)v.bindAttribLocation(c,a,b[a]);else v.bindAttribLocation(c,0,"a_position"),v.bindAttribLocation(c,1,"a_texture0"),v.bindAttribLocation(c,2,"a_color"),v.bindAttribLocation(c,3,"a_basisZ");v.linkProgram(c);v.getProgramParameter(c,v.LINK_STATUS)?b=c:(console.log(v.getProgramInfoLog(c)),
v.deleteShader(c),b=void 0);this.Sg=b;t.ab(this)};
f.J=function(a,b,c){a="u_"+a;this.Ea.hasOwnProperty(a)||(this.Ea[a]=v.getUniformLocation(this.Sg,a));var d=this.aj[a];c?d!=b&&(this.aj[a]=b,v.uniform1i(this.Ea[a],b)):isNaN(b)?b instanceof Float32Array?v.uniform3fv(this.Ea[a],b):b instanceof N?v.uniformMatrix4fv(this.Ea[a],!1,b.Yd()):b instanceof G?(this.aj[a]=b,v.uniform4f(this.Ea[a],b.r/255,b.jb/255,b.pa/255,b.Oa/255)):b instanceof vd?v.uniform4f(this.Ea[a],b.x,b.y,b.z,b.b):b instanceof w?v.uniform3f(this.Ea[a],b.x,b.y,b.z):b instanceof E&&v.uniform2f(this.Ea[a],
b.x,b.y):d!=b&&(this.aj[a]=b,v.uniform1f(this.Ea[a],b))};f.bind=function(){v.useProgram(this.Sg);return this};f.load=function(a){this.name=zb(a);this.bk=Eb(a);this.ak=Eb(a);this.create();delete this.bk;delete this.ak};f.save=function(a){Bb(a,this.name);Gb(a,this.bk);Gb(a,this.ak)};function te(){this.usage=this.target=null;this.Xk=v.createBuffer();this.buffer=null}te.prototype.bind=function(){v.bindBuffer(this.target,this.Xk);return this};function ue(a,b){a.buffer=new ArrayBuffer(b);v.bufferData(a.target,a.buffer,a.usage)}te.prototype.upload=function(){v.bufferSubData(this.target,0,this.buffer);return this};function ve(){te.call(this);this.target=v.ARRAY_BUFFER;this.usage=v.STATIC_DRAW;this.Qb=32;t.bj=null;t.zb(this)}ve.prototype=Object.create(te.prototype);
ve.prototype.constructor=ve;ve.prototype.bind=function(){te.prototype.bind.call(this);v.vertexAttribPointer(0,3,v.FLOAT,!1,this.Qb,0);v.vertexAttribPointer(1,2,v.FLOAT,!1,this.Qb,12);v.vertexAttribPointer(2,4,v.UNSIGNED_BYTE,!0,this.Qb,20);v.vertexAttribPointer(3,3,v.SHORT,!0,this.Qb,24);return this};ve.prototype.upload=function(a){this.write(a);te.prototype.upload.call(this);return this};
function we(a){var b=t.bj;b.buffer=new ArrayBuffer(a.length*b.Qb);b.write(a);v.bufferData(b.target,b.buffer,b.usage)}
ve.prototype.write=function(a,b){b*=this.Qb;var c=new Float32Array(this.buffer,b),d=new Int16Array(this.buffer,b);b=new Uint8Array(this.buffer,b);for(var e=0;e<a.length;e++){var h=a[e];var g=c;var k=e*this.Qb>>>2;g[k]=h.x;g[k+1]=h.y;g[k+2]=h.z;k=e*this.Qb+12>>>2;g[k]=h.bd;g[k+1]=h.cd;g=b;k=e*this.Qb+20;g[k]=h.la;g[k+1]=h.Jd;g[k+2]=h.Id;g[k+3]=h.Da;g=d;k=e*this.Qb+24>>>1;g[k]=h.sc;g[k+1]=h.Qc;g[k+2]=h.Tb}return this};
function xe(){te.call(this);this.target=v.ELEMENT_ARRAY_BUFFER;this.usage=v.STATIC_DRAW;t.Xe(this)}xe.prototype=Object.create(te.prototype);xe.prototype.constructor=xe;xe.prototype.upload=function(a){(new Uint16Array(this.buffer)).set(a);return te.prototype.upload.call(this)};function ye(){te.call(this);this.target=v.UNIFORM_BUFFER;this.usage=v.DYNAMIC_DRAW;this.lj=null;this.Zh=this.ji=0;this.Ea={};te.prototype.bind.call(this)}ye.prototype=Object.create(te.prototype);ye.prototype.constructor=ye;
ye.prototype.create=function(a){v.bindBufferBase(this.target,this.ji,this.Xk);for(var b=0;b<t.c.ta.elements.length;b++){var c=t.c.ta.elements[b];t.ab(c);v.uniformBlockBinding(c.Sg,v.getUniformBlockIndex(c.Sg,this.lj),this.ji)}b=v.getUniformIndices(t.A.Sg,a);c=p(b);for(var d=c.next();!d.done;d=c.next())if(d.value==v.INVALID_INDEX)return console.log("uniform not found ",this),this;b=v.getActiveUniforms(t.A.Sg,b,v.UNIFORM_OFFSET);for(c=0;c<a.length;c++)this.Ea[a[c]]=b[c];return this};
ye.prototype.J=function(a,b,c){a="u_"+a;b instanceof N?b.Yd(new Float32Array(this.buffer,this.Ea[a],16)):b instanceof G||(b instanceof vd?b.Yd(new Float32Array(this.buffer,this.Ea[a],4)):b instanceof w||b instanceof E&&(c?b.Yd(new Uint32Array(this.buffer,this.Ea[a],2)):b.Yd(new Float32Array(this.buffer,this.Ea[a],2))))};ye.prototype.upload=function(){te.prototype.bind.call(this);v.bufferData(this.target,this.buffer.byteLength,this.usage);v.bufferSubData(this.target,0,this.buffer);return this};
var ze,Ae=ze=new ve;Ae.usage=v.STATIC_DRAW;Ae.bi=[];var Be,Ce=Be=new xe;Ce.usage=v.STATIC_DRAW;Ce.elements=[];var De=t.qc.fd=new ye;De.lj="Common";De.ji=0;De.Zh=160;ue(De,De.Zh);var Ee=t.qc.ol=new ye;Ee.lj="PortalLights";Ee.ji=1;Ee.Zh=480;ue(Ee,64*Ee.Zh);function Td(){this.name="defaultMaterial";this.de=new G(255,255,255,255);this.Dd=new G(255,255,255,51);this.Yc=4;this.Zc=1;this.ag=new G(0,0,0,0);this.Ga=0;return this}function Fe(a,b){if(a.name<b.name)return-1;if(a.name>b.name)return 1;var c=dd(a.de,b.de);if(0!=c)return c;c=dd(a.Dd,b.Dd);if(0!=c)return c;c=dd(a.ag,b.ag);return 0!=c?c:a.Yc<b.Yc?-1:a.Yc>b.Yc?1:a.Zc<b.Zc?-1:a.Zc>b.Zc?1:a.Ga<b.Ga?-1:a.Ga>b.Ga?1:0}
Td.prototype.da=function(){var a=new Td;a.de=this.de;a.Dd=this.Dd;a.Yc=this.Yc;a.Zc=this.Zc;a.ag=this.ag;a.Ga=this.Ga;return a};Td.prototype.bind=function(){t.A.J("color",this.de);t.A.J("specularColor",this.Dd);t.A.J("specularExponent",this.Yc);t.A.J("specularSheen",this.Zc);t.A.J("emissiveColor",this.ag)};Td.prototype.save=function(a){Bb(a,this.name);this.de.save(a);this.Dd.save(a);Jb(a,Math.floor(1024*this.Yc));Db(a,Math.floor(255*this.Zc));this.ag.save(a);Db(a,this.Ga);return a};
Td.prototype.load=function(a){this.name=zb(a);this.de=ed(a);this.Dd=ed(a);this.Yc=Ib(a)/1024;this.Zc=Ab(a)/255;this.ag=ed(a);this.Ga=Ab(a)};var Re=t.c,Se=new Td;Re.Jb.replace(Se);t.ve=function(){this.Ei=v.RGBA8;this.height=this.width=2;this.border=0;this.format=v.RGBA;this.type=v.UNSIGNED_BYTE;this.data=null;this.xf=t.ve.xf;this.Og=t.ve.Og;this.pk=this.nk=v.CLAMP_TO_EDGE};t.ve.xf=v.NEAREST;t.ve.Og=v.NEAREST;
t.ve.prototype.create=function(){this.zh&&Wd(this.zh);v.activeTexture(v.TEXTURE0);this.object=v.createTexture();v.bindTexture(v.TEXTURE_2D,this.object);v.texImage2D(v.TEXTURE_2D,0,this.Ei,this.width,this.height,this.border,this.format,this.type,this.data);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,this.xf);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,this.Og);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,this.nk);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,this.pk);9984<=this.xf&&9987>=
this.xf&&v.generateMipmap(v.TEXTURE_2D)};
t.ve.prototype.load=function(a){this.name=zb(a);this.Ei=Ib(a);this.width=Ib(a);this.height=Ib(a);this.border=Ib(a);this.format=Ib(a);this.type=Ib(a);this.xf=Ib(a);this.Og=Ib(a);this.nk=Ib(a);this.pk=Ib(a);this.ce=new G(Ab(a),Ab(a),Ab(a),Ab(a));var b=Fb(a);a=a.slice(a.position,a.position+=b);a=new Blob([a],{type:"image/png"});this.data=new Image;this.data.parent=this;this.data.onload=function(){this.parent.width=this.width;this.parent.height=this.height;this.parent.create()};this.data.src=URL.createObjectURL(a)};
t.ve.prototype.save=function(a){Bb(a,this.name);Jb(a,this.Ei);Jb(a,this.width);Jb(a,this.height);Jb(a,this.border);Jb(a,this.format);Jb(a,this.type);Jb(a,this.xf);Jb(a,this.Og);Jb(a,this.nk);Jb(a,this.pk);Db(a,this.ce.r);Db(a,this.ce.jb);Db(a,this.ce.pa);Db(a,this.ce.Oa);Hb(a,this.wh.length);a.set(this.wh,a.position);a.position+=this.wh.length};
t.Di=function(a){a.Uk=[];a.Vk=[];for(var b=0,c=0,d=0;d<a.je.length;d++)b+a.je[d]+1>a.width&&(b=0,c+=a.Pe+1),a.Uk.push(b/a.width),a.Vk.push(c/a.width),b+=a.je[d]+1,a.je[d]/=a.width,a.Lg[d]/=a.width,a.gg[d]/=a.width;a.Pe/=a.height;a.Sk=function(e){switch(e){case "0":return 0;case "1":return 1;case "2":return 2;case "3":return 3;case "4":return 4;case "5":return 5;case "6":return 6;case "7":return 7;case "8":return 8;case "9":return 9;case ",":return 10;case "/":return 11;case " ":return 12}return-1}};
t.xi=function(a,b,c){for(var d=[],e=0,h=0;h<b.length;h++){var g=a.Sk(b.charAt(h)),k=a.Uk[g],l=a.Vk[g],m=a.je[g],n=a.Pe;e+=a.Lg[g];c&&(l+=.5);d.push(pd(new id(e,0+n,0),k,l));d.push(pd(new id(e,0,0),k,l+n));d.push(pd(new id(e+m,0,0),k+m,l+n));d.push(pd(new id(e+m,0,0),k+m,l+n));d.push(pd(new id(e+m,0+n,0),k+m,l));d.push(pd(new id(e,0+n,0),k,l));e+=m;e+=a.gg[g]}d.width=e;d.height=a.Pe;d.wg=a;return d};var R=new t.Node("mouse");R.lock=!1;R.d={};R.p={};R.vh=function(a){t.Ba[R.Kd.name+"MouseButton"]=a.button;R.Kd.innerHTML=""+a.button;t.c.Y.get("woodSnap02").play();t.rg(0)};R.Mk=function(a){document.pointerLockElement&&(a.preventDefault(),a.stopPropagation());R.p[a.button]=!0;R.d[a.button]=!0};R.r={};R.Nk=function(a){R.r[a.button]=!0;R.d[a.button]=!1};R.b=0;document.addEventListener("wheel",function(a){R.b=0<a.deltaY?1:-1});R.f=new E(0,0);R.Ec=new E(0,0);
document.addEventListener("mousemove",function(a){R.f.set(a.clientX,a.clientY);R.Ec.x+=a.movementX;R.Ec.y+=a.movementY});R.step=function(){t.Node.prototype.step.call(this);this.Ec.set(0,0);var a=Object.getOwnPropertyNames(this.p);var b=p(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=p(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;this.b=0};
R.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=p(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=p(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=p(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1;R.b=0;R.f.set(0,0);R.Ec.set(0,0)};O(R,t.inputs);R.Cm=function(){document.documentElement.requestPointerLock({unadjustedMovement:t.Ha.mouseRaw})};
document.addEventListener("pointerlockchange",function(){if(document.pointerLockElement)R.lock=!0,document.body.style.overflowX="hidden",document.body.style.overflowY="hidden",document.body.style.userSelect="none";else{R.lock=!1;for(var a=p(Object.getOwnPropertyNames(t.sh)),b=a.next();!b.done;b=a.next())b=b.value,document.body.style[b]=t.sh[b]}});var Xd=new t.Node("keyboard");Xd.d={};Xd.p={};Xd.Ik=function(a){"Backspace"==a.code?(t.Ba[Xd.Kd.name+"Key"]="",Xd.Kd.innerHTML="",t.c.Y.get("woodSnap02").play()):"Escape"!=a.code&&(t.Ba[Xd.Kd.name+"Key"]=a.code,Xd.Kd.innerHTML=""+a.code,t.c.Y.get("woodSnap02").play());t.rg(0)};Xd.vh=function(a){"Backspace"==a.code?(t.Ba[R.Kd.name+"MouseButton"]="",R.Kd.innerHTML="",t.c.Y.get("woodSnap02").play(),t.rg(0)):"Escape"==a.code&&t.rg(0)};
Xd.Kk=function(a){document.pointerLockElement&&"Tab"==a.code&&(a.preventDefault(),a.stopPropagation());"Minus"==a.code?(t.c.Y.get("hit02").play({gain:1,pitch:.875}),t.vg(-1)):"Equal"==a.code?(t.c.Y.get("hit02").play({gain:1,pitch:1.125}),t.vg(1)):"KeyM"==a.code&&(t.Audio.Hb(1-t.Ha.musicEnabled),t.Li?t.Li.checked=t.Ha.musicEnabled:window.localStorage.setItem("musicEnabled",t.Ha.musicEnabled));Xd.d[a.code]||(Xd.p[a.code]=!0);Xd.d[a.code]=!0};Xd.r={};Xd.Lk=function(a){Xd.r[a.code]=!0;Xd.d[a.code]=!1};
Xd.step=function(){t.Node.prototype.step.call(this);var a=Object.getOwnPropertyNames(this.p);var b=p(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=p(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1};
Xd.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=p(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=p(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=p(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1};O(Xd,t.inputs);t.Audio=function(){this.buffer=null;return this};t.Audio.S=new AudioContext;var Te=t.Audio.Bc=t.Audio.S.createGain();Te.gain.value=.5;Te.connect(t.Audio.S.destination);var Ue=t.Audio.vb=t.Audio.S.createGain();Ue.gain.value=0;Ue.connect(t.Audio.S.destination);t.Audio.Kf=function(a){t.Audio.Bc.gain.value=a};t.Audio.Hb=function(a){t.Audio.vb.gain.value=a;t.Ha.musicEnabled=a};
t.Audio.prototype.play=function(a){a?(void 0===a.gain&&(a.gain=1),void 0===a.pitch&&(a.pitch=1),void 0===a.Cf&&(a.Cf=0),void 0===a.delay&&(a.delay=0)):a={gain:1,pitch:1,Cf:0,delay:0};var b=t.Audio.S.createGain();b.gain.value=a.gain;b.connect(t.Audio.Bc);var c=new AudioBufferSourceNode(t.Audio.S);c.connect(b);a.loop?c.loop=!0:c.onended=function(){b.disconnect(t.Audio.Bc)};c.ie=b;c.playbackRate.value=(1-a.Cf+Math.random()*a.Cf*2)*a.pitch;c.buffer=this.buffer;void 0===a.time?c.start(t.Audio.S.currentTime+
a.delay):c.start(a.time+a.delay);return c};t.Audio.prototype.load=function(a){this.name=zb(a);var b=Fb(a);a=a.slice(a.position,a.position+=b);var c=this;t.Audio.S.decodeAudioData(a.buffer).then(function(d){c.buffer=d;c.zh&&Wd(c.zh)})};t.Audio.prototype.save=function(a){Bb(a,this.name);Hb(a,this.wh.length);a.set(this.wh,a.position);a.position+=this.wh.length};function Ve(){this.Pf=NaN;this.Bj=-1;this.Ji=new BiquadFilterNode(t.Audio.S,{type:"lowpass",Q:12,frequency:140});this.Ji.connect(t.Audio.vb);this.ie=t.Audio.S.createGain();this.ie.gain.value=1;this.ie.connect(this.Ji)}
Ve.prototype.play=function(a){var b=this;if(a.audio){var c=new AudioBufferSourceNode(t.Audio.S);c.buffer=a.audio.buffer;c.connect(this.ie);this.Pf+=a.hn;c.start(this.Pf);setTimeout(function(){switch(b.Bj){case 2:t.a.jg=13;break;case 3:t.a.jg=13;break;case 4:t.a.jg=13;break;default:t.a.jg=0}},1E3*(this.Pf-t.Audio.S.currentTime));c.onended=function(){this.disconnect(this.ie)}}setTimeout(function(){b.play(a.cn())},1E3*(this.Pf-t.Audio.S.currentTime+a.duration)-100);this.Pf+=a.duration};var We,Xe=[],Ye=0;function Ze(a){return Xe[a-Ye]}var $e=new ab(kb),af=new cb,jb=new cb,bf=new N;bf.scale(.99609375,.99609375,.99609375);function cf(a){var b=$e.get(a);if(b)return b;b=new df(a);$e.push(b);return b}function ef(a){a=ff(a);return new E(a.x-4096<<19,a.y-4096<<19)}function gf(a,b){function c(d){d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;return(d|d<<1)&1431655765}return c(a)<<1|c(b)}
function ff(a){function b(c){c=(c|c>>1)&858993459;c=(c|c>>2)&252645135;c=(c|c>>4)&16711935;return(c|c>>8)&65535}a=new E(a>>>1&1431655765,a>>>0&1431655765);a.x=b(a.x);a.y=b(a.y);return a}
function hf(a,b){isNaN(a)&&(a=0);isNaN(b)&&(b=$e.elements.length-1);if(a==b)return $e.elements[a];for(var c=$e.elements[a].index,d=c^$e.elements[b].index,e=0;d>>=1;)e++;var h=1<<e,g=(2<<e)-1,k=a,l=b+1;for(d=Math.floor(k/2+l/2);k<l;){var m=$e.elements[d].index&g;if(h<m)l=d,d=Math.floor(k/2+l/2);else if(h>m)k=d+1,d=Math.floor(k/2+l/2);else break}c=e&1?new jf(ff(c&~g|h).x):new kf(ff(c&~g|h).y);c.value-=4096;c.value<<=19;c.Uf=hf(a,d-1);c.Vf=hf(d,b);return c}function jf(a){this.value=a}
function kf(a){this.value=a}function lf(a,b,c){this.start=a;this.Ec=b;this.mb=c;this.Ic=[new mf(We,0,1)];this.t=0}function mf(a,b,c){this.node=a;this.Ua=b;this.hd=c}lf.prototype.next=function(){for(;this.Ic.length;){var a=this.Ic.shift();this.t=a.Ua;if(a.node instanceof df)return a;this.Wc(a)}return null};
lf.prototype.Wc=function(a){var b=a.node;if(b instanceof jf){var c=this.start.z;var d=this.Ec.z}else c=this.start.x,d=this.Ec.x;if(0<d){var e=new mf(b.Vf,(b.value-this.mb-c)/d,a.hd);e.Ua<=a.hd&&e.hd>=a.Ua&&this.Ic.unshift(e);c=new mf(b.Uf,a.Ua,(b.value+this.mb-c)/d);c.Ua<=a.hd&&c.hd>=a.Ua&&this.Ic.unshift(c)}else 0>d?(e=new mf(b.Uf,(b.value+this.mb-c)/d,a.hd),e.Ua<=a.hd&&e.hd>=a.Ua&&this.Ic.unshift(e),c=new mf(b.Vf,a.Ua,(b.value-this.mb-c)/d),c.Ua<=a.hd&&c.hd>=a.Ua&&this.Ic.unshift(c)):(c>=b.value-
this.mb&&this.Ic.unshift(new mf(b.Vf,a.Ua,a.hd)),c<=b.value+this.mb&&this.Ic.unshift(new mf(b.Uf,a.Ua,a.hd)))};
function nf(a,b,c){c=void 0===c?of:c;if(!$e.elements.length)return null;for(var d=b.length(),e=new lf(a,b,0),h,g=null,k=1;(h=e.next())&&!(h.t>k);){for(var l=function(r){if(c(r.flags)){var q=r.Sf(a,0,0,b);!q||q.t>k||(q.d=q.t*d,-1>q.d||(r.item&&(q.item=r.item),g=q,k=q.t))}},m=p(h.node.ua),n=m.next();!n.done;n=m.next())l(n.value);h=p(h.node.vd);for(n=h.next();!n.done;n=h.next())l(n.value)}return g}
function pf(a,b){var c=void 0===c?of:c;if(!$e.elements.length)return null;var d=b.length(),e=new lf(a,b,0),h,g=[];for(g.cmp=qf;(h=e.next())&&!(1<h.t);){for(var k=function(r){if(c(r.flags)){var q=r.Sf(a,0,0,b);!q||1<q.t||(q.d=q.t*d,-1>q.d||(r.item&&(q.item=r.item),q.Ua=!0,Sa(g,q)))}},l=function(r){r=r.yh();if(c(r.flags)){var q=r.Sf(a,0,0,b);!q||1<q.t||(q.d=q.t*d,-1>q.d||(r.item&&(q.item=r.item),q.Ua=!1,Sa(g,q)))}},m=p(h.node.ua),n=m.next();!n.done;n=m.next())k(n.value);m=p(h.node.vd);for(n=m.next();!n.done;n=
m.next())k(n.value);k=p(h.node.ua);for(n=k.next();!n.done;n=k.next())l(n.value);h=p(h.node.vd);for(n=h.next();!n.done;n=h.next())l(n.value)}return g}
function rf(a,b){var c=void 0===c?of:c;if(0==$e.elements.length)return null;for(var d=new lf(a,new w(240*b.x,0,240*b.z),0),e,h=null,g=240;(e=d.next())&&!(240*e.t>g);){for(var k=function(n){c(n.flags)&&(!(n=n.fk(a,b))||n.t>g||(h=n,g=n.t))},l=p(e.node.ua),m=l.next();!m.done;m=l.next())k(m.value);e=p(e.node.vd);for(m=e.next();!m.done;m=e.next())k(m.value)}return h}function sf(a,b){return tf(a.z-b,a.x-b,a.z+b,a.x+b,void 0)}
function tf(a,b,c,d,e){e||(e=[]);for(var h=[We];h.length;){var g=h.shift();g instanceof jf?(a<=g.value&&h.push(g.Uf),c>=g.value&&h.push(g.Vf)):g instanceof kf?(b<=g.value&&h.push(g.Uf),d>=g.value&&h.push(g.Vf)):e.push(g)}return e};var uf,vf,wf,xf;
function yf(){uf=!1;vf=[];var a=wf;wf=[[Array(Xe.length),Array(Xe.length),Array(Xe.length)],[Array(Xe.length),Array(Xe.length),Array(Xe.length)]];if(a)for(var b=p(Xe),c=b.next();!c.done;c=b.next()){var d=c.value;c=d.index-Ye;d=d.index-a.ba;for(var e=0;2>e;e++)wf[e][0][c]=a[e][0][d],wf[e][1][c]=a[e][1][d],wf[e][2][c]=a[e][2][d]}wf.ba=Ye;xf=0;a=p(Xe);for(c=a.next();!c.done;c=a.next()){b=c.value;b.Mc||(c=new zf,c.Dh=b,c.og=b,c.ad=b.ad,c.Qi=[Ya(.05,.95,b.Rb.x),Ya(.05,.95,b.Rb.y),Ya(.05,.95,b.Rb.z)],vf.push(c));
b.ck=b.ad;c=p(b.Cb);for(d=c.next();!d.done;d=c.next())b.ck+=Af(d.value);for(c=0;c<b.Cb.length;c++)d=new zf,d.Dh=b,d.og=Ze(b.Cb[c].nd.ba),d.xc=b.Cb[c],d.ad=Af(d.xc),d.Qi=[1,1,1],vf.push(d),d=new zf,d.Dh=b,d.og=b,d.xc=b.Cb[c],d.ad=Bf(d.xc),d.Qi=[.625,.625,.625],vf.push(d)}}function zf(){this.og=this.Dh=null;this.ad=0;this.Qi=null}
function Wf(a,b,c){this.X=a;this.n=new E(a.l-a.w,a.C-a.m);this.n.x/=a.length;this.n.y/=a.length;this.jl=this.X.m*this.n.x+this.X.l*this.n.y;this.o=b;this.u=c;this.height=c-b}Wf.prototype.Yd=function(a){var b=0,c=Xf(this);a[b++]=c.x;a[b++]=c.y;a[b++]=c.z;a[b++]=this.jl;a[b++]=this.X.m;a[b++]=this.X.l;a[b++]=this.X.C;a[b++]=this.X.w;a[b++]=this.n.x;a[b++]=this.n.y;a[b++]=this.o;a[b++]=this.u;return a};function Xf(a){return td(Yf[a.ba-Zf].ia.lb,Yf[a.nd.ba-Zf].ia.lb,.5)}
function $f(a,b){function c(h,g){return Math.acos(Wa(qd(h,g)/Math.sqrt(qd(h,h)*qd(g,g)),-1,1))/Math.PI}var d=b.z*a.n.x+b.x*a.n.y-a.jl;if(0>=d)return 0;var e=c(new E(a.X.C-b.z,a.X.w-b.x),new E(a.X.m-b.z,a.X.l-b.x));a=c(new E(d,a.u-b.y),new E(d,a.o-b.y));return Wa(e*a,0,1)}function Af(a){return a.X.length/1E5*((a.u-a.o)/1E5)}function Bf(a){return a.X.length/1E5*((a.height-(a.u-a.o))/1E5)}
function ag(a,b,c){c.set(0,0,0);for(var d=1,e=p(b.Cb),h=e.next();!h.done;h=e.next()){var g=h.value;h=$f(g,a);d-=h;g=Xf(g);c.x+=g.x*h;c.y+=g.y*h;c.z+=g.z*h}0<d&&(a=b.ia.lb,c.x+=a.x*d,c.y+=a.y*d,c.z+=a.z*d)};function bg(a){t.Fa.call(this,a);this.Oj=new N;this.Ld=45*Math.PI/180;this.mg=1E4;this.dg=1E9;this.rect=null;this.si=new N;this.lk=new N}bg.prototype=Object.create(t.Fa.prototype);bg.prototype.constructor=bg;bg.hj=Math.tan(fc(30));bg.Il=function(a,b,c,d){d.F=2/a.b;d.K=0;d.M=0;d.kb=0;d.H=0;d.m11=2/a.g;d.m12=0;d.m13=0;d.P=0;d.m21=0;d.m22=-2/(c-b);d.m23=0;d.G=0;d.m31=0;d.m32=-(c+b)/(c-b);d.m33=1};bg.Hl=function(a,b,c){c=Math.tan(c)*a;var d=c*t.viewport.ratio;return{n:a,an:b,t:c,pa:2*-c+c,r:d,om:-d}};
bg.Gl=function(a,b,c,d,e,h,g){g.F=2*a/(d-c);g.K=0;g.M=0;g.kb=0;g.H=0;g.m11=2*a/(e-h);g.m12=0;g.m13=0;g.P=(d+c)/(d-c);g.m21=(e+h)/(e-h);g.m22=(b+a)/(a-b);g.m23=-1;g.G=0;g.m31=0;g.m32=2*b*a/(a-b);g.m33=0};bg.Sm=function(a,b,c,d,e){var h=b*bg.hj;c*=bg.hj;d=Math.tan(d);b=h/d;c/=d;e.F=b/(h*a.ratio);e.K=0;e.M=0;e.kb=0;e.H=0;e.m11=b/h;e.m12=0;e.m13=0;e.P=0;e.m21=0;e.m22=-(c+b)/(c-b);e.m23=-1;e.G=0;e.m31=0;e.m32=-(2*c*b)/(c-b);e.m33=0;return e};bg.prototype.step=function(){t.Fa.prototype.step.call(this)};
function cg(a){if(a.rect)bg.Il(a.rect,a.mg,a.dg,a.Oj);else{var b=bg.Hl(a.mg,a.dg,a.Ld);bg.Gl(a.mg,a.dg,b.om,b.r,b.t,b.pa,a.Oj)}a.L.Cj(a.si);zd(a.Oj,a.si,a.lk);t.qc.fd.J("eyeMatrix",a.si);t.qc.fd.J("viewMatrix",a.lk);t.qc.fd.J("cameraPos",new vd(a.L.G,a.L.m31,a.L.m32,a.L.m33));t.qc.fd.upload()}
function dg(){function a(d){t.tl(d);cg(d);bg.Jl(d);Nd(t.Xc)}var b=t.a.ka;if(b.Mm){var c=new xc(b.rect.b/2,b.rect.g,null);c.x=t.nh.x;c.y=t.nh.y;t.Uh(c);a(b.vk);c=new xc(b.rect.b/2,b.rect.g,null);c.x=t.nh.x+c.b;c.y=t.nh.y;t.Uh(c);a(b.uk)}else t.Uh(t.nh),a(b)}
bg.Jl=function(a){function b(m,n){function r(y){function x(I){C.Ja(Math.atan2(I.x,-I.z),Math.atan2(I.y,-I.z))}var C=new Oc;C.xc=y;y=[new w(y.X.w,y.o,y.X.C),new w(y.X.l,y.o,y.X.m),new w(y.X.l,y.u,y.X.m),new w(y.X.w,y.u,y.X.C)];for(var A=p(y),D=A.next();!D.done;D=A.next())D=D.value,a.si.ub(D,D);A=y[y.length-1];y=p(y);for(D=y.next();!D.done;D=y.next())D=D.value,0>=D.z&&x(D),2==Math.abs(Math.sign(D.z)-Math.sign(A.z))&&x(td(A,D,A.z/(A.z-D.z))),A=D;return C}if((!t.mn||n!=a.Qa)&&n.ia.za!=t.h){n.ia.za=t.h;
n.Cl=l++;for(var q=p(n.cells.elements),u=q.next();!u.done;u=q.next())if(u=u.value,u.di!=t.h)for(u.di<t.h-1&&ib(u.Bl),u.di=t.h,u=u.Pi.first();null!=u.item;u=u.next)u.item.ia.za=t.h}n=p(n.Cb);for(q=n.next();!q.done;q=n.next())if(q=q.value,!(isNaN(q.index)||q.u<=q.o)){if(m.xc){if(0<=Dc(m.xc.X,q.X.m,q.X.l)&&0<=Dc(m.xc.X,q.X.C,q.X.w))continue;if(0>=Dc(q.X,m.xc.X.m,m.xc.X.l)&&0>=Dc(q.X,m.xc.X.C,m.xc.X.w))continue}if(!(0>=Dc(q.X,c.z,c.x))){(u=e[q.index])||(e[q.index]=u=r(q));var z=u.da();z.xc=u.xc;z.s<m.s&&
(z.s=m.s);z.v>m.v&&(z.v=m.v);z.o<m.o&&(z.o=m.o);z.u>m.u&&(z.u=m.u);z.s>=z.v||z.o>=z.u||b(z,Ze(q.nd.ba))}}}var c=Bd(a.L),d=nf(c,new w(0,-4294967295,0),eg);if(d){var e={},h=a.Ld,g=Math.atan(Math.tan(h)*t.viewport.ratio),k=new Oc;k.s=-g;k.v=g;k.o=-h;k.u=h;var l=0;if(d=Ze(d.item.ba))a.Qa=d,b(k,a.Qa)}};function Ud(){this.name=null;this.Hc=[]}Ud.prototype.save=function(a){Bb(a,this.name);Jb(a,Math.ceil(this.Mb/1E3));Db(a,this.Hc.length);for(var b=p(this.Hc),c=b.next();!c.done;c=b.next())c.value.save(a)};Ud.prototype.load=function(a){this.name=zb(a);this.Mb=1E3*Ib(a);for(var b=Ab(a),c=0;c<b;c++){var d=new fg;d.load(a);this.Hc.push(d)}};function fg(){this.$=t.c.Jb.get("defaultMaterial");this.Sb=[];this.bc=[];this.Fc=[]}
fg.prototype.compile=function(){this.kk=ze.bi.length;ze.bi=ze.bi.concat(this.Sb);for(var a=0;a<this.bc.length;a++)this.bc[a]+=this.kk;for(a=0;a<this.Fc.length;a++)this.Fc[a]+=this.kk;this.Om=Be.elements.length;Be.elements=Be.elements.concat(this.bc);this.Fk=Be.elements.length;Be.elements=Be.elements.concat(this.Fc)};fg.prototype.da=function(){var a=new fg;a.Sb=this.Sb;a.bb=this.bb;a.bc=this.bc;a.fe=this.fe;a.Fc=this.Fc;a.ee=this.ee;return a};
fg.prototype.save=function(a){Bb(a,this.$.name);Jb(a,this.Sb.length);for(var b=p(this.Sb),c=b.next();!c.done;c=b.next())c=c.value,Yb(a,c.x),Yb(a,c.y),Yb(a,c.z);b=p(this.Sb);for(c=b.next();!c.done;c=b.next())c=c.value,Qb(a,c.sc),Qb(a,c.Qc),Qb(a,c.Tb);b=p(this.Sb);for(c=b.next();!c.done;c=b.next())c=c.value,$b(a,c.bd),$b(a,c.cd);Jb(a,this.bc.length);b=p(this.bc);for(c=b.next();!c.done;c=b.next())Jb(a,c.value);Jb(a,this.Fc.length);b=p(this.Fc);for(c=b.next();!c.done;c=b.next())Jb(a,c.value);Jb(a,this.Af);
return a};fg.prototype.load=function(a){this.$=t.c.Jb.get(zb(a));for(var b=Ib(a),c=0;c<b;c++){var d=new id(Sb(a),Sb(a),Sb(a));this.Sb.push(d)}for(c=0;c<b;c++)d=this.Sb[c],d.sc=Lb(a),d.Qc=Lb(a),d.Tb=Lb(a);for(c=0;c<b;c++)d=this.Sb[c],d.bd=Zb(a),d.cd=Zb(a);b=Ib(a);for(c=0;c<b;c++)this.bc.push(Ib(a));b=Ib(a);for(c=0;c<b;c++)this.Fc.push(Ib(a));this.Af=Ib(a);this.compile()};
function gg(){function a(q,u){return q.y<u.y?-1:q.y>u.y?1:0}function b(q,u){return q.z<u.z?-1:q.z>u.z?1:q.x<u.x?-1:q.x>u.x?1:0}var c=hg,d=[];d.cmp=b;for(var e=p(c),h=e.next();!h.done;h=e.next()){var g=h.value;h=g[g.length-1];g=p(g);for(var k=g.next();!k.done;k=g.next()){k=k.value;if(0==b(h,k)){var l=[];l.cmp=a;l.z=h.z;l.x=h.x;l=Sa(d,l);Sa(l,h);Sa(l,k)}h=k}}c=p(c);for(h=c.next();!h.done;h=c.next())for(e=h.value,k=e.length-1,k=e[k],h=0;h<e.length;h++){g=e[h];if(0==b(k,g))if(l=Ra(d,k),k.y<g.y){var m=
Oa(l,k),n=Oa(l,g);for(m+=1;m<l.length&&!(m>=n);){var r=kd(k,g,(l[m].y-k.y)/(g.y-k.y));r.y=l[m].y;e.splice(h++,0,r);m++}}else for(m=Oa(l,k),n=Oa(l,g),--m;0<=m&&!(m<=n);)r=kd(k,g,(l[m].y-k.y)/(g.y-k.y)),r.y=l[m].y,e.splice(h++,0,r),m--;k=h;k=g}}function ig(){fg.call(this);this.he=[];this.bb=new ve;this.ee=this.fe=null;this.Af=0}ig.prototype=Object.create(fg.prototype);ig.prototype.constructor=ig;
ig.prototype.compile=function(){this.bc=[];for(var a=p(this.he),b=a.next();!b.done;b=a.next()){b=b.value;for(var c=2;c<b.length;c++)this.bc.push(b[0]),this.bc.push(b[c-1]),this.bc.push(b[c])}t.zb(this.bb);ue(this.bb,this.Sb.length*this.bb.Qb);this.bb.upload(this.Sb);this.bc.length?(this.fe||(this.fe=new xe),t.Xe(this.fe),ue(this.fe,2*this.bc.length),this.fe.upload(this.bc)):this.fe=null;this.Fc.length?(this.ee||(this.ee=new xe),t.Xe(this.ee),ue(this.ee,2*this.Fc.length),this.ee.upload(this.Fc)):this.ee=
null};function jg(a,b){b||(b=a.name);t.Fa.call(this,b);this.src=a}jg.prototype=Object.create(t.Fa.prototype);jg.prototype.constructor=jg;jg.prototype.create=function(){this.Hc=[];for(var a=p(this.src.Hc),b=a.next();!b.done;b=a.next())b=b.value,b=b instanceof ig?new kg(b):new lg(b),this.Hc.push(b),this.eg&&(b.eg=this.eg),b.Ia=this.L,O(b,this)};function lg(a,b){t.Fa.call(this,b);this.src=a;this.facing=1;this.Gm=this.Fm=!1}lg.prototype=Object.create(t.Fa.prototype);lg.prototype.constructor=lg;
function mg(a){var b=null;a.parent&&(b=a.parent.A);b||(b=a.A);b||(b=a.src.A);b||(b=t.c.ta.get("physical"));return b}function ng(a){var b=null;a.parent&&(b=a.parent.$);b||(b=a.$);b||(b=a.src.$);b||(b=t.c.Jb.get("defaultMaterial"));return b}function og(a){var b=null;a.parent&&(b=a.parent.ca);b||(b=a.ca);b||(b=a.src.ca);return b}
lg.prototype.$a=function(){t.zb(ze);t.ab(mg(this));t.A.J("modelMatrix",this.L);t.Lb(0,og(this));var a=ng(this);a.bind();t.A.J("lightingFancy",t.Ha.lightingFancy,!0);this.ii?t.A.J("architectureLighting",1,!0):t.A.J("architectureLighting",0,!0);t.A.J("ambientLight",this.ia.lb,!1);if(this.Ea)for(var b=0;b<this.Ea.length;b+=3)t.A.J(this.Ea[b],this.Ea[b+1],this.Ea[b+2]);t.rb(a.Ga);t.$b(a.Ga?1:2);t.Pb(this.facing);this.src.bc.length?(t.Xe(Be),v.drawElements(v.TRIANGLES,this.src.bc.length,v.UNSIGNED_SHORT,
2*this.src.Om)):v.drawArrays(v.TRIANGLES,this.src.kk,this.src.Sb.length);this.src.Fc.length&&(this.Fm&&this.Dk(),this.Gm&&this.Ek())};
lg.prototype.Dk=function(){t.rb(1);t.$b(1);t.ab(t.c.ta.get("edge"));t.A.J("toonMinDist",Infinity,!1);t.A.J("modelMatrix",this.L);var a=new w(this.L.F,this.L.K,this.L.M),b=new w(this.L.H,this.L.m11,this.L.m12),c=new w(this.L.P,this.L.m21,this.L.m22);a.oa(1);b.oa(1);c.oa(1);var d=new w(t.ka.L.G-this.L.G,t.ka.L.m31-this.L.m31,t.ka.L.m32-this.L.m32);a=lc(a,d);b=lc(b,d);c=lc(c,d);t.A.J("eyeVector",new w(a,b,c));v.drawElements(v.LINES,this.src.Fc.length-this.src.Af,v.UNSIGNED_SHORT,2*this.src.Fk+2*this.src.Af)};
lg.prototype.Ek=function(){t.rb(1);t.$b(1);t.ab(t.c.ta.get("toon"));t.A.J("toonMinDist",Infinity,!1);t.A.J("modelMatrix",this.L);v.drawElements(v.LINES,this.src.Af,v.UNSIGNED_SHORT,2*this.src.Fk)};function kg(a,b){lg.call(this,a,b)}kg.prototype=Object.create(lg.prototype);f=kg.prototype;f.constructor=kg;f.step=function(){lg.prototype.step.call(this)};
f.$a=function(){t.zb(this.src.bb);t.ab(mg(this));t.A.J("modelMatrix",this.L);t.Lb(0,og(this));var a=ng(this);a.bind();t.A.J("lightingFancy",t.Ha.lightingFancy,!0);this.ii?t.A.J("architectureLighting",1,!0):t.A.J("architectureLighting",0,!0);t.A.J("ambientLight",this.ia.lb,!1);if(this.Ea)for(var b=0;b<this.Ea.length;b+=3)t.A.J(this.Ea[b],this.Ea[b+1],this.Ea[b+2]);t.rb(a.Ga);t.$b(a.Ga?1:2);t.Pb(this.facing);this.src.bc.length?(t.Xe(this.src.fe),v.drawElements(v.TRIANGLES,this.src.bc.length,v.UNSIGNED_SHORT,
0)):v.drawArrays(v.TRIANGLES,0,this.src.Sb.length)};
f.Dk=function(){t.rb(1);t.$b(1);t.ab(t.c.ta.get("edge"));t.A.J("toonMinDist",Math.pow(5E5,2),!1);t.A.J("modelMatrix",this.L);var a=new w(this.L.F,this.L.K,this.L.M),b=new w(this.L.H,this.L.m11,this.L.m12),c=new w(this.L.P,this.L.m21,this.L.m22);a.oa(1);b.oa(1);c.oa(1);var d=new w(t.ka.L.G-this.L.G,t.ka.L.m31-this.L.m31,t.ka.L.m32-this.L.m32);a=lc(a,d);b=lc(b,d);c=lc(c,d);t.A.J("eyeVector",new w(a,b,c));a=this.src.Fc.length-this.src.Af;b=2*this.src.Af;t.Xe(this.src.ee);v.drawElements(v.LINES,a,v.UNSIGNED_SHORT,
b)};f.Ek=function(){t.rb(1);t.$b(1);t.ab(t.c.ta.get("toon"));t.A.J("toonMinDist",Math.pow(5E5,2),!1);t.A.J("modelMatrix",this.L);var a=this.src.Af;t.Xe(this.src.ee);v.drawElements(v.LINES,a,v.UNSIGNED_SHORT,0)};function pg(){this.scale=1;this.mb=25E3;this.Ed=0;this.eg=!1;this.frame=0;this.ob=1}function qg(a){a.F=t.ka.L.F;a.K=t.ka.L.K;a.M=t.ka.L.M;a.H=t.ka.L.H;a.m11=t.ka.L.m11;a.m12=t.ka.L.m12;a.P=t.ka.L.P;a.m21=t.ka.L.m21;a.m22=t.ka.L.m22;var b=this.scale*this.mb,c=this.eg?-b:b,d=Math.cos(this.Ed),e=Math.sin(this.Ed),h=new N;h.F=d*c;h.K=e*c;h.H=-e*b;h.m11=d*b;xd(a,h,a)}
function rg(){0>this.frame||(qg.call(this,this.L),t.zb(sg),t.ab(this.A),t.Lb(0,this.ca),this.$.bind(),t.A.J("ambientLight",this.ia.lb,!1),t.rb(this.$.Ga),t.$b(this.$.Ga?1:2),t.Pb(0),t.A.J("modelMatrix",this.L),t.A.J("color",this.color),v.drawArrays(v.TRIANGLE_FAN,tg(this.frame,this.ob),4))}
for(var ug=[],vg=0;4>vg;vg++)for(var wg=1<<vg,xg=wg<<vg,yg=1/wg,zg=0;zg<xg;zg++){var Ag=zg%wg,Bg=zg/wg|0;Ag*=yg;Bg*=yg;var Cg=void 0;Cg=new id(-1,-1,0);pd(Cg,Ag,Bg);Cg.Tb=32767;ug.push(Cg);Cg=new id(1,-1,0);pd(Cg,Ag+yg,Bg);Cg.Tb=32767;ug.push(Cg);Cg=new id(1,1,0);pd(Cg,Ag+yg,Bg+yg);Cg.Tb=32767;ug.push(Cg);Cg=new id(-1,1,0);pd(Cg,Ag,Bg+yg);Cg.Tb=32767;ug.push(Cg)}var sg=new ve;ue(sg,ug.length*sg.Qb);sg.upload(ug);
function Dg(a,b){for(var c=0;b>Math.pow(1<<c,2);)c++;var d=1<<c;b=1/d;c=a%d*b;a=(a/d|0)*b;return[c,a,c+b,a+b]}function tg(a,b){switch(b){default:return 4*a;case 4:return 4+4*a;case 16:return 20+4*a;case 64:return 84+4*a}};function Eg(){this.color=this.ca=this.A=null;this.Ga=NaN;this.Ge=[];this.Ic=[];this.Ic.cmp=Fg;this.qm=64}Eg.prototype.clear=function(){this.Ge.length=0;this.Ic.length=0};Eg.prototype.$a=function(){t.ab(this.A);t.A.J("modelMatrix",bf);t.Lb(0,this.ca);t.A.J("color",this.color);t.rb(this.Ga);t.$b(1);t.Pb(0);for(var a=p(this.Ic),b=a.next();!b.done;b=a.next())b.value.$a()};
function Gg(a,b,c,d,e,h,g){function k(y,x){if(of(x)&&Ze(x.ba)){var C=[];if(x instanceof Hg){if(x.u<b.y-z||x.o>b.y+z)return;var A=Dc(x.W,b.z,b.x);if(A<-z||A>z)return;A=x.W.getParameter(b.z,b.x);if(A<-z||A>x.W.length+z||.707107>lc(new w((x.W.C-x.W.m)/x.W.length,0,(x.W.l-x.W.w)/x.W.length),c))return;C.push(new w(x.W.w,x.o,x.W.C),new w(x.W.l,x.o,x.W.m),new w(x.W.l,x.u,x.W.m),new w(x.W.w,x.u,x.W.C))}else{if(x.y<b.y-z||x.y>b.y+z)return;var D=p(x.ha);for(A=D.next();!A.done;A=D.next())if(Dc(A.value,b.z,b.x)<
-z)return;if(x instanceof Ig){if(.707107>c.y)return}else if(-.707107<c.y)return;D=p(x.ha);for(A=D.next();!A.done;A=D.next())A=A.value,C.push(new w(A.w,x.y,A.C));x instanceof Kg&&C.reverse()}(function(){function I(ha,Kb){var qb=[],ec=ha[ha.length-1],Bc=Kb(ec);ha=p(ha);for(var Rb=ha.next();!Rb.done;Rb=ha.next()){Rb=Rb.value;var Cc=Kb(Rb);2==Math.abs(Math.sign(Cc)-Math.sign(Bc))&&qb.push(td(ec,Rb,Bc/(Bc-Cc)));0<=Cc&&qb.push(Rb);Bc=Cc;ec=Rb}return 3>qb.length?null:qb}for(var J=p(C),P=J.next();!P.done;P=
J.next())P=P.value,q.ub(P,P);J=p([function(ha){return 1-ha.x},function(ha){return 1+ha.x},function(ha){return 1-ha.y},function(ha){return 1+ha.y},function(ha){return 1-ha.z},function(ha){return 1+ha.z}]);for(P=J.next();!P.done;P=J.next())if(C=I(C,P.value),!C)return;for(J=0;J<C.length;J++){P=C[J];var sa=.5*P.x+.5,ta=.5*P.y+.5;r.ub(P,P);var fa=new id;fa.x=P.x;fa.y=P.y;fa.z=P.z;fa.bd=u[0]*(1-sa)+u[2]*sa;fa.cd=u[1]*(1-ta)+u[3]*ta;C[J]=fa}J=[];J.ba=x.ba;J.cellIndex=y.index;J=Sa(l,J);for(P=2;P<C.length;P++)J.push(C[0]),
J.push(C[P-1]),J.push(C[P])})()}}a.Ge.length==a.qm&&a.Ge.shift().remove();var l=[];l.cmp=Fg;var m=new w,n=new w;mc(c,m,n);var r=new N;r.F=m.x;r.H=n.x;r.P=c.x;r.G=b.x;r.K=m.y;r.m11=n.y;r.m21=c.y;r.m31=b.y;r.M=m.z;r.m12=n.z;r.m22=c.z;r.m32=b.z;m=new N;n=Math.cos(d)*e;d=Math.sin(d)*e;m.F=n;m.H=-d;m.K=d;m.m11=n;m.m22=e;zd(r,m,r);var q=r.Cj(new N),u=Dg(h,g),z=1.733*e;e=sf(b,z);e=p(e);for(h=e.next();!h.done;h=e.next())for(h=h.value,g=p(h.ua),d=g.next();!d.done;d=g.next())k(h,d.value);e=new Lg;h=p(l);for(g=
h.next();!g.done;g=h.next())g=g.value,d=Ra(a.Ic,g),d||(d=new Mg(a),d.ba=g.ba,d.cellIndex=g.cellIndex,d.ia=Ze(d.ba).ia,d.create(),Sa(a.Ic,d)),Ng(d,g),e.ql.push({node:d,dd:g.length});a.Ge.push(e)}function Mg(a){this.Vl=a;this.cellIndex=this.ba=NaN;this.ia=null;this.dd=this.re=0}function Fg(a,b){return a.ba<b.ba?-1:a.ba>b.ba?1:a.cellIndex<b.cellIndex?-1:a.cellIndex>b.cellIndex?1:0}Mg.prototype.create=function(){this.bb=new ve;this.bb.usage=v.DYNAMIC_DRAW;ue(this.bb,48*this.bb.Qb)};
function Og(a,b){var c=a.dd+b;if(0>=c)Ta(a.Vl.Ic,a);else{c*=a.bb.Qb;if((a.re+a.dd+b)*a.bb.Qb>a.bb.buffer.byteLength)b=new ArrayBuffer(c<<1);else if(48<=a.re)b=a.bb.buffer;else return;c=new Uint8Array(a.bb.buffer,a.re*a.bb.Qb,a.dd*a.bb.Qb);(new Uint8Array(b)).set(c);a.bb.buffer=b;a.bb.bind();v.bufferData(a.bb.target,a.bb.buffer,a.bb.usage);a.re=0}}
function Ng(a,b){Og(a,b.length);a.bb.bind();a.bb.write(b,a.re+a.dd);v.bufferSubData(a.bb.target,(a.re+a.dd)*a.bb.Qb,new Uint8Array(a.bb.buffer,(a.re+a.dd)*a.bb.Qb,b.length*a.bb.Qb));a.dd+=b.length}Mg.prototype.$a=function(){if(this.ia.za<t.h)return!1;t.zb(this.bb);t.A.J("ambientLight",this.ia.lb);v.drawArrays(v.TRIANGLES,this.re,this.dd)};function Lg(){this.ql=[]}Lg.prototype.remove=function(){for(var a=p(this.ql),b=a.next();!b.done;b=a.next())b=b.value,b.node.re+=b.dd,b.node.dd-=b.dd,Og(b.node,0)};var Pg={},Qg,Rg,Sg,Tg,T,U,V,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah=new G(192,192,192,255),bh=new G(64,64,64,255),ch=new G(160,160,160,255),dh=new G(160,160,160,255),eh=new G(144,144,144,255),fh,gh=fh=new Td;fh.name="concrete";fh.Dd=new G(255,255,255,3.984375);fh.Yc=4;fh.Zc=1;fh.Ga=0;var hh=fh=new Td;fh.name="paint";fh.Dd=new G(255,255,255,31.875);fh.Yc=128;fh.Zc=1;fh.Ga=0;var ih=fh=new Td;fh.name="plaster";fh.Dd=new G(255,255,255,15.9375);fh.Yc=32;fh.Zc=1;fh.Ga=0;var jh=fh=new Td;fh.name="metal";
fh.Dd=new G(255,255,255,95.625);fh.Yc=64;fh.Zc=1;fh.Ga=0;var kh=fh=new Td;fh.name="glass";fh.Dd=new G(255,255,255,63.75);fh.Yc=256;fh.Zc=1;fh.Ga=1;
function lh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new mh(c,c+h);b.push(g);c+=h;return g}}this.floor.ca=t.c.N.get("concr01");this.floor.$=gh;this.floor.color=ah;this.qa.ca=t.c.N.get("concr01");this.qa.$=gh;this.qa.color=dh;var b=[],c=this.Gf,d=this.u,e;if(e=a(25E3))e.Z.ca=t.c.N.get("brick01"),e.Z.$=hh,e.Z.color=bh;if(e=a(this.Xa))e.Z.ca=t.c.N.get("brick01"),e.Z.$=hh,e.Z.color=this.color;if(e=a(0))e.Z.ca=t.c.N.get("brick01"),e.Z.$=gh,e.Z.color=ch;return b}
function nh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new mh(c,c+h);b.push(g);c+=h;return g}}this.floor.ca=t.c.N.get("concr01");this.floor.$=gh;this.floor.color=ah;this.qa.ca=t.c.N.get("concr01");this.qa.$=gh;this.qa.color=dh;var b=[],c=this.Gf,d=this.u,e;if(e=a(25E3))e.Z.ca=t.c.N.get("brick01"),e.Z.$=hh,e.Z.color=bh;if(e=a(this.Xa))e.Z.ca=t.c.N.get("brick01"),e.Z.$=hh,e.Z.color=this.color;if(e=a(-25E3))e.Z.ca=t.c.N.get("brick01"),e.Z.$=gh,e.Z.color=ch;if(e=a(0))e.Z.ca=
t.c.N.get("concr01"),e.Z.$=gh,e.Z.color=eh;return b}
function oh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new mh(c,c+h);b.push(g);c+=h;return g}}this.floor.ca=t.c.N.get("concr01");this.floor.$=gh;this.floor.color=ah;this.qa.ca=t.c.N.get("concr01");this.qa.$=gh;this.qa.color=dh;var b=[],c=this.Gf,d=this.u,e;if(e=a(25E3))e.Z.ca=t.c.N.get("metal01"),e.Z.$=jh,e.Z.color=bh;if(e=a(this.Xa))e.Z.ca=t.c.N.get("metal01"),e.Z.$=hh,e.Z.color=this.color;if(e=a(0))e.Z.ca=t.c.N.get("metal01"),e.Z.$=jh,e.Z.color=ch;return b}
function ph(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new mh(c,c+h);b.push(g);c+=h;return g}}this.floor.ca=t.c.N.get("concr01");this.floor.$=gh;this.floor.color=ah;this.qa.ca=t.c.N.get("concr01");this.qa.$=gh;this.qa.color=dh;var b=[],c=this.Gf,d=this.u,e;if(e=a(25E3))e.Z.ca=t.c.N.get("metal01"),e.Z.$=jh,e.Z.color=bh;if(e=a(this.Xa))e.Z.ca=t.c.N.get("metal01"),e.Z.$=hh,e.Z.color=this.color;if(e=a(-25E3))e.Z.ca=t.c.N.get("metal01"),e.Z.$=jh,e.Z.color=ch;if(e=a(0))e.Z.ca=
t.c.N.get("concr01"),e.Z.$=gh,e.Z.color=eh;return b}
function qh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new mh(c,c+h);b.push(g);c+=h;return g}}this.floor.ca=t.c.N.get("concr01");this.floor.$=gh;this.floor.color=ah;this.qa.ca=t.c.N.get("concr01");this.qa.$=gh;this.qa.color=dh;var b=[],c=this.Gf,d=this.u,e;if(e=a(25E3))e.Z.ca=t.c.N.get("plaster01"),e.Z.$=hh,e.Z.color=bh;if(e=a(this.Xa))e.Z.ca=t.c.N.get("plaster01"),e.Z.$=ih,e.Z.color=this.color;if(e=a(0))e.Z.ca=t.c.N.get("plaster01"),e.Z.$=ih,e.Z.color=new G(248,248,
248,255);return b}var rh=new lb;function sh(a){return Math.floor(ob(rh)*a)}function th(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return b[sh(b.length)]}function uh(a){for(var b=0;b<a.length;b++){var c=sh(a.length-b),d=a[b];a[b]=a[c];a[c]=d}}function vh(){for(var a=[],b=p(Yf),c=b.next();!c.done;c=b.next()){c=p(c.value);for(var d=c.next();!d.done;d=c.next())a=a.concat(d.value)}return a}
function wh(){for(var a=[],b=p(Yf),c=b.next();!c.done;c=b.next()){c=p(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;for(var e=p(d.wb),h=e.next();!h.done;h=e.next())h=h.value,h.sa==d&&a.push(h)}}return a}function xh(a,b,c){var d=[];a=p(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.translate(b,c));return d}function yh(a,b){var c=[];a=p(a);for(var d=a.next();!d.done;d=a.next())c.push(d.value.yg(b));return c}
function zh(a,b,c){a:{switch((4-c)%4){case 0:a=new E(a,b);break a;case 1:a=new E(-b,a);break a;case 2:a=new E(-a,-b);break a;case 3:a=new E(b,-a);break a}a=void 0}return a}function Ah(a,b,c){var d=[];a=p(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.expand(b,c));return d}function Bh(a,b){var c=[];a=p(a);for(var d=a.next();!d.done;d=a.next())c.push(Ch(d.value,b));return c}
function Dh(a,b){b=p(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=a.length,e=0;e<d;e++)a[e].Xg(c,a)&&(a.splice(e--,1),d--)}return a}function Eh(a,b){for(var c=new Fh,d=p(a),e=d.next();!e.done;e=d.next())Gh(c,e.value);d=p(b);for(e=d.next();!e.done;e=d.next())Gh(c,e.value);c=[c];Dh(c,b);return Dh(a.slice(),c)}function Hh(a,b){b=void 0===b?0:b;for(var c=new Fh,d=p(a),e=d.next();!e.done;e=d.next())Gh(c,e.value);b=[c.expand(b,b)];Dh(b,a);return b}
function Ih(a){var b=[];b.cmp=function(h,g){return h.s<g.s?-1:h.s>g.s?1:h.D<g.D?-1:h.D>g.D?1:0};a=p(a);for(var c=a.next();!c.done;c=a.next())Sa(b,c.value);for(a=0;a<b.length;a++){c=b[a];var d=Oa(b,{s:c.v,D:c.D}),e=b[d];e&&e.s==c.v&&e.D==c.D&&e.I==c.I&&(b.splice(d,1),b[a--]=c.da(c.D,c.I,c.s,e.v))}return b}function Jh(a,b,c){var d=Infinity;c=p(c);for(var e=c.next();!e.done;e=c.next())if(e=e.value,!(e.s>=b||e.v<=b||e.I<=a||e.D>=d)){if(e.D<a){d=a;break}d=e.D}return d}
function Kh(a){for(var b=[],c=p(a),d=c.next();!d.done;d=c.next())Lh(d.value,b);Dh(b,a);return b}function Mh(a){a.bound=new Oc;for(var b=0;b<a.length;b++){var c=a[b].Wf();a.bound.Ja(c.C,c.w);a[b]=c}}
function Nh(a){var b=[];b.cmp=function(m,n){return m.x<n.x?-1:m.x>n.x?1:m.y<n.y?-1:m.y>n.y?1:m.type<n.type?-1:m.type>n.type?1:0};a=p(a);for(var c=a.next();!c.done;c=a.next())c=c.value,Sa(b,{x:c.uc(),y:c.tc(),type:c.sb(),X:c});a=[];c=[];for(var d={};b.length;){var e=!1;d.sd=[];d.sd.bound=new Fh;d.Ac=null;d.kc=null;var h=function(m){return function(n){n.X.sb()==m.kc.sb()?m.kc.T+=n.X.T-n.X.R:((m.kc.sb()+3&3)==n.X.sb()&&(m.kc.uh=!0,n.X.Yh=!0),m.sd.push(n.X),m.kc=n.X);m.Ac=new E(m.kc.Wb(),m.kc.Vb());m.Ac.type=
-1;Oh(m.sd.bound,m.Ac.x,m.Ac.y)}}(d);d.kc=b.shift().X;d.kc.sb()&&(e=!0,d.kc.Yh=!0);d.sd.push(d.kc);d.Ac=new E(d.kc.Wb(),d.kc.Vb());d.Ac.type=-1;for(Oh(d.sd.bound,d.Ac.x,d.Ac.y);;){var g=[],k=Oa(b,d.Ac),l=b[k];if(!l)break;if(l.x!=d.Ac.x)break;if(l.y!=d.Ac.y)break;g[0]=k;g[1]=k;k++;(l=b[k])&&l.x==d.Ac.x&&l.y==d.Ac.y&&(g[1]=k);switch(d.kc.sb()){case 0:k=g[0];break;case 1:k=g[1];break;case 2:k=g[1];break;case 3:k=g[0]}h(b.splice(k,1)[0])}e?(d.sd[d.sd.length-1].uh=!0,c.push(d.sd)):(d.sd.tb=[],a.push(d.sd));
d={kc:d.kc,sd:d.sd,Ac:d.Ac}}b=p(c);for(c=b.next();!c.done;c=b.next())Ph(c.value,a);return a}function Qh(a,b){b||(b=[]);a=p(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(c),c.tb&&Qh(c.tb,b);return b}
function Ph(a,b){var c=null;b=p(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.D<=d.bound.D||a.bound.s<=d.bound.s||a.bound.I>=d.bound.I||a.bound.v>=d.bound.v)){if(c){if(d.bound.D<=c.bound.D)continue;if(d.bound.s<=c.bound.s)continue;if(d.bound.I>=c.bound.I)continue;if(d.bound.v>=c.bound.v)continue}c=d}c&&c.tb.push(a)}
function Rh(a){var b=162500,c=162500;b=void 0===b?0:b;c=void 0===c?0:c;var d=Kh(a);a=[];d=p(d);for(var e=d.next();!e.done;e=d.next())e.value.yi(b,c,a);d=vh();d=p(d);for(e=d.next();!e.done;e=d.next()){e=e.value;for(var h=0;h<a.length;h++)e.expand(b,c).rf(a[h].x,a[h].y)&&a.splice(h--,1)}return a}var Sh=-1,Th=-1,Uh=0,Vh=1,Wh=0,Xh=[],Yf=[],Zf=0;
function Yh(){if(!Qg){var a=Qg={};Rg=1;Qg.Ah=2;Sg=Rg;a.oi=Vh;a.sf=NaN;a.qd=NaN;a.yd=[];Tg=Xh;Xh=[]}if(!T){if(!Sg){Zh();vh();Qg=null;Sh++;if(Sh<Uh+2)return!0;$h();return!0}T=[];T.Kb=Qg;T.lg=3;T.$c=new G(233,234,85,255);T.Xa=-75E3;T.parent=null;T.children=[];T.ri=1;T.Hd=0;Xh.push(T);Sg--}if(!U){if(!T.lg){if(T.parent){a=T.parent;a.children.push(T);do a.ri++,T.Hd++,a=a.parent;while(a)}T=null;return!0}U=[];ai.call(U);U.index=Yf.length+Zf;U.Fb=T;U.kg=th(1,2);1==U.index&&(U.Mc=!0);U.style={};U.style.height=
225E3+5E4*sh(4);U.style.$c=T.$c;U.Mc?(U.style.Gc=th(nh,ph),U.style.Xa=1E5):(U.style.Gc=th(lh,oh),U.style.Xa=T.Xa);T.push(U);Yf.push(U);T.lg--}if(!V){if(!U.kg)return bi(),U=null,!0;V=[];V.index=ci++;V.wb=[];V.dc=th(1,2)}if(!V.dc){if(Ug){Zh();a=V;var b=Ug,c=di([b],[a]);c||b.U.Fb!=a.U.Fb&&(c=ei([b],[a]));if(!c)return V.length=0,V.dc=th(1,2),U.pop(),!0}Vg=V=Ug=null;U.kg--;return!0}if(V.length)return(a=fi([V],0))?(a.platform=V,V.push(a),V.dc--):(V.length=0,V.dc=th(1,2),U.pop()),!0;if(U.length)return a=
U,Vg||(Vg={}),(a=fi(a,0,Vg))?(Ug=a.Vd,V.y=Ug.y+5E4*th(-2,-1,1,2),V.y=Math.min(V.y,-4E5),V.U=U,U.push(V),a.platform=V,V.push(a),V.dc--):(Vg=V=null,U.kg=0),!0;if(1<T.length){b=[];c=p(T);for(a=c.next();!a.done;a=c.next())b.push.apply(b,ba(a.value));Vg||(Vg={});(a=fi(b,0,Vg))?(Ug=a.Vd,V.y=Ug.y,V.U=U,U.push(V),a.platform=V,V.push(a),V.dc--):(T.pop(),Yf.pop(),Vg=V=U=null,T.lg=0);return!0}if(1<Xh.length){b=[];c=p(Xh);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length)){var d=p(a);for(a=
d.next();!a.done;a=d.next())b.push.apply(b,ba(a.value))}Vg||(Vg={});if(a=fi(b,6E5,Vg))Ug=a.Vd,T.parent=Ug.U.Fb,V.y=Ug.y+5E4*th(-2,-1,0,0,0,1,2),V.y=Math.min(V.y,-4E5),V.U=U,U.push(V),a.platform=V,V.push(a),V.dc--;else{for(;;){a=Yf[Yf.length-1];if(a.na<=Sh)break;b=p(a);for(a=b.next();!a.done;a=b.next())for(c=p(a.value.wb),a=c.next();!a.done;a=c.next())gi(a.value);Yf.pop()}T=null;Xh.length=0;Sg=Rg;Vg=Ug=V=U=null}return!0}if(Tg.length){b=[];c=p(Tg);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=
a.children.length))for(d=p(a),a=d.next();!a.done;a=d.next())b.push.apply(b,ba(a.value));Vg||(Vg={cmp:function(e,h){return e.nc<h.nc?-1:e.nc>h.nc?1:e.x<h.x?-1:e.x>h.x?1:e.y<h.y?-1:e.y>h.y?1:0}});if(a=fi(b,0,Vg))Ug=a.Vd,V.y=Ug.y+5E4*th(-2,-1,0,0,0,1,2),V.y=Math.min(V.y,-4E5),V.U=U,U.push(V),a.platform=V,V.push(a),V.dc--;else{for(;;){a=Yf[Yf.length-1];if(a.na<=Sh)break;b=p(a);for(a=b.next();!a.done;a=b.next())for(c=p(a.value.wb),a=c.next();!a.done;a=c.next())gi(a.value);Yf.pop()}T=null;Xh.length=0;Sg=
Rg;Vg=Ug=V=U=null}return!0}a=fi(null,0);V.y=-4E5;V.U=U;U.push(V);a.platform=V;V.push(a);V.dc--;return!0}function hi(){if(!Qg){var a=Qg={};Sg=Rg=1;a.oi=Vh;a.sf=NaN;a.qd=NaN;a.yd=[];Tg=Xh;Xh=[]}if(!T&&!Sg){Zh();vh();Qg=null;Sh++;if(Sh<Uh+2)return!0;$h();return!0}return ii()}
function ji(){if(!Qg){var a=Qg={};Vh++;3<Vh&&(Vh=3);0>=Wh?(Rg=2,Qg.Ah=2):1>=Wh?(Rg=3,Qg.Ah=3):3>=Wh?(Rg=3,Qg.Ah=4):(Rg=4,Qg.Ah=5);Wh++;Sg=Rg;a.oi=Vh;a.sf=0;a.qd=NaN;a.yd=[];Tg=Xh;Xh=[];Wg=-1}if(0<=Wg){var b=Xh[Wg];if(!b){Zh();vh();ki();Qg=null;Sh++;if(Sh<Uh+2)return!0;$h();return!0}if(2==b.children.length&&3<=b.ri){var c=function(g,k){if(!g)return k;for(var l=p(g),m=l.next();!m.done;m=l.next())k.push.apply(k,ba(m.value));c(g.children[0],k);c(g.children[1],k);return k};a=c(b.children[0],[]);b=c(b.children[1],
[]);var d=di(a,b);d||(d=ei(a,b))}Wg++;return!0}if(!T&&!Sg){var e=[],h=function(g){g&&(g.index=e.length,e.push(g),h(g.children[0]),h(g.children[1]))};h(Xh[0]);Xh=e;Wg=0;return!0}return ii()}
function ii(){if(!T){T=[];T.Kb=Qg;T.lg=th(2,3);var a=[new G(233,234,85,255),new G(85,85,234,255),new G(234,85,85,255),new G(41,166,191,255)];T.$c=a[Xh.length%a.length];T.Xa=-75E3;T.parent=null;T.children=[];T.ri=1;T.Hd=0;Xh.push(T);Sg--}if(!U){if(!T.lg){if(T.parent){a=T.parent;a.children.push(T);do a.ri++,T.Hd++,a=a.parent;while(a)}T=null;return!0}U=[];ai.call(U);U.index=Yf.length+Zf;U.Fb=T;U.kg=th(1,2);0==U.index%5&&(U.Mc=!0);U.style={};U.style.height=225E3;U.style.height+=5E4*sh(4);U.style.$c=T.$c;
U.Mc?(U.style.Gc=th(nh,ph),U.style.Xa=1E5):(U.style.Gc=th(lh,oh),U.style.Xa=T.Xa);T.push(U);Yf.push(U);T.lg--}if(!V){if(!U.kg)return bi(),U=null,!0;V=[];V.index=ci++;V.wb=[];V.dc=th(1,2)}if(!V.dc){if(Ug){Zh();a=V;var b=Ug,c=di([b],[a]);c||b.U.Fb!=a.U.Fb&&(c=ei([b],[a]));if(!c)return V.length=0,V.dc=th(1,2),U.pop(),!0}Vg=V=Ug=null;U.kg--;return!0}if(V.length)return(a=fi([V],0))?(a.platform=V,V.push(a),V.dc--):(V.length=0,V.dc=th(1,2),U.pop()),!0;if(U.length)return a=U,Vg||(Vg={}),(a=fi(a,0,Vg))?(Ug=
a.Vd,V.y=Ug.y+5E4*th(-2,-1,1,2),V.y=Math.min(V.y,-4E5),V.U=U,U.push(V),a.platform=V,V.push(a),V.dc--):(Vg=V=null,U.kg=0),!0;if(1<T.length){b=[];c=p(T);for(a=c.next();!a.done;a=c.next())b.push.apply(b,ba(a.value));Vg||(Vg={});(a=fi(b,0,Vg))?(Ug=a.Vd,V.y=Ug.y,V.U=U,U.push(V),a.platform=V,V.push(a),V.dc--):(T.pop(),Yf.pop(),Vg=V=U=null,T.lg=0);return!0}if(1<Xh.length){b=[];c=p(Xh);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length)){var d=p(a);for(a=d.next();!a.done;a=d.next())b.push.apply(b,
ba(a.value))}Vg||(Vg={});if(a=fi(b,6E5,Vg))Ug=a.Vd,T.parent=Ug.U.Fb,V.y=Ug.y+5E4*th(-2,-1,0,0,0,1,2),V.y=Math.min(V.y,-4E5),V.U=U,U.push(V),a.platform=V,V.push(a),V.dc--;else{for(;;){a=Yf[Yf.length-1];if(a.na<=Sh)break;b=p(a);for(a=b.next();!a.done;a=b.next())for(c=p(a.value.wb),a=c.next();!a.done;a=c.next())gi(a.value);Yf.pop()}T=null;Xh.length=0;Sg=Rg;Vg=Ug=V=U=null}return!0}if(Tg.length){b=[];c=p(Tg);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length))for(d=p(a),a=d.next();!a.done;a=
d.next())b.push.apply(b,ba(a.value));Vg||(Vg={cmp:function(e,h){return e.nc<h.nc?-1:e.nc>h.nc?1:e.x<h.x?-1:e.x>h.x?1:e.y<h.y?-1:e.y>h.y?1:0}});if(a=fi(b,0,Vg))Ug=a.Vd,V.y=Ug.y+5E4*th(-2,-1,0,0,0,1,2),V.y=Math.min(V.y,-4E5),V.U=U,U.push(V),a.platform=V,V.push(a),V.dc--;else{for(;;){a=Yf[Yf.length-1];if(a.na<=Sh)break;b=p(a);for(a=b.next();!a.done;a=b.next())for(c=p(a.value.wb),a=c.next();!a.done;a=c.next())gi(a.value);Yf.pop()}T=null;Xh.length=0;Sg=Rg;Vg=Ug=V=U=null}return!0}a=fi(null,0);V.y=-4E5;
V.U=U;U.push(V);a.platform=V;V.push(a);V.dc--;return!0}
function fi(a,b,c){if(c){if(c.Wi)return li(c)}else c={};c.cmp||(c.cmp=function(n,r){return n.Hd<r.Hd?-1:n.Hd>r.Hd?1:n.nc>r.nc?-1:n.nc<r.nc?1:n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0});c.Nb=5E4*Math.floor(sh(2)+4);c.gf=5E4*Math.floor(sh(2)+4);sh(12)||(c.Nb*=2,c.gf*=2);if(!a)return new Fh(-c.Nb,c.Nb,-c.gf,c.gf);c.from=a;c.margin=b;c.Ml=0;for(var d=vh(),e=[],h=p(a),g=h.next();!g.done;g=h.next()){g=g.value;for(var k=[],l=p(g),m=l.next();!m.done;m=l.next())mi(m.value,c.Nb,c.gf,b,k);l=d;l=Bh(l,new Fh(-c.Nb+
1,c.Nb,-c.gf+1,c.gf));k=Dh(k,l);k=p(k);for(l=k.next();!l.done;l=k.next())l=l.value,m=void 0,m=new E(l.D,l.s),m.Vd=g,m.Hd=g.U.Fb.Hd,e.push(m),m=new E(l.I-1,l.v-1),m.Vd=g,m.Hd=g.U.Fb.Hd,e.push(m)}if(!e.length)return null;c.Wi=[];c.Wi.cmp=c.cmp;b=[];a=p(a);for(d=a.next();!d.done;d=a.next())b.push.apply(b,ba(d.value));e=p(e);for(a=e.next();!a.done;a=e.next())a=a.value,a.nc=ni(b,a.x,a.y),Sa(c.Wi,a);return li(c)}
function li(a){var b=a.Wi[a.Ml++];if(!b)return null;a=new Fh(b.x-a.Nb,b.x+a.Nb,b.y-a.gf,b.y+a.gf);a.Vd=b.Vd;return a}
function $h(){Xg=wh();if(Pg.$m){for(var a=p(Xg),b=a.next();!b.done;b=a.next())b.value.mk();Yg=[];Zg=[];$g=[];a=p(Xh);for(b=a.next();!b.done;b=a.next()){for(var c=[],d=p(b.value),e=d.next();!e.done;e=d.next()){var h=[];e=p(e.value);for(b=e.next();!b.done;b=e.next())b=b.value,h=h.concat(b),$g=$g.concat(Kh(b));c=c.concat(h);Zg=Zg.concat(Kh(h))}Yg=Yg.concat(Kh(c))}for(;Yf.length&&!(Yf[0].na>=Uh);)Yf.shift(),Zf++;Th=Uh+1;oi=0}else{b=p(Yf);for(e=b.next();!e.done;e=b.next()){a=e.value;if(a.na>=Uh)break;
a.Zf=!0;e=p(a.Ab);for(c=e.next();!c.done;c=e.next())pi(c.value);a=p(a);for(e=a.next();!e.done;e=a.next())for(e=p(e.value.wb),c=e.next();!c.done;c=e.next())c.value.qj()}a=p(Yf);for(e=a.next();!e.done;e=a.next())if(e=e.value,!(e.na<=Th)){if(e.na>Uh+1)break;e.bound.D-=1E5;e.bound.I+=1E5;e.bound.s-=1E5;e.bound.v+=1E5;c=p(e);for(b=c.next();!b.done;b=c.next())b=b.value,b.y<e.floor&&(e.floor=b.y),b.y>e.qa&&(e.qa=b.y);e.qa+=e.style.height;e.o=e.floor;e.gb||(e.gb=e.Mc?new w(.8,.8,.8):new w);c=p(e);for(b=c.next();!b.done;b=
c.next())for(b=b.value,b.Ok=[],d=p(b),h=d.next();!h.done;h=d.next()){h=h.value;var g=[];Lh(h,g);Mh(g);b.Ok.push(g);h.z=.5*h.D+.5*h.I;h.x=.5*h.s+.5*h.v;h.y=h.platform.y;h.D<e.bound.D&&(e.bound.D=h.D);h.I>e.bound.I&&(e.bound.I=h.I);h.s<e.bound.s&&(e.bound.s=h.s);h.v>e.bound.v&&(e.bound.v=h.v)}}a=p(Yf);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.na<=Th)){if(b.na>Uh+1)break;e=p(b);for(b=e.next();!b.done;b=e.next())for(c=p(b.value.wb),b=c.next();!b.done;b=c.next())b.value.oj()}a=p(Yf);for(e=a.next();!e.done;e=
a.next())if(e=e.value,!(e.na<=Th)){if(e.na>Uh+1)break;e.qa=e.Mc?0:Math.min(-18750,e.qa);c=[];d=p(e);for(b=d.next();!b.done;b=d.next())c.push.apply(c,ba(b.value));d=c;d=Ah(d,9375,9375);b=[];d=p(d);for(h=d.next();!h.done;h=d.next()){h=h.value;g=b.length;for(var k=0;k<g;k++)b[k].Xg(h,b)&&(b.splice(k--,1),g--);b.push(h)}d=b;e.am=[];d=p(d);for(b=d.next();!b.done;b=d.next())h=[],Lh(b.value,h),Mh(h),e.am.push(h);b=c;b=Hh(b,1);b=Ah(b,9375,9375);b=Hh(b,0);e.Pk=[];c=p(b);for(b=c.next();!b.done;b=c.next())d=
[],Lh(b.value,d),Mh(d),e.Pk.push(d)}b=p(Yf);for(e=b.next();!e.done;e=b.next())if(a=e.value,!(a.na<=Th)){if(a.na>Uh+1)break;qi(a);c=a;a=ri(!1,Infinity,c.index,t.c.N.get("HandRail01"),hh);a.facing=0;a.Ga=2;e=c.style.$c;c=p(c.hm);for(d=c.next();!d.done;d=c.next())for(d=d.value,h=p(d),g=h.next();!g.done;g=h.next()){g=g.value;var l=[];k=(g.T-g.R)/2E5;for(var m=Math.round(k),n=.5*(k-m);.125>n;)--m,n+=.5;if(!(0>m))for(l.push({Db:.5,ah:0,length:n}),l.push({Db:1,ah:0,length:k-2*n}),l.push({Db:.5,ah:1-n,length:n}),
k=0,m=new E(g.uc(),g.tc()),l=p(l),n=l.next();!n.done;n=l.next()){n=n.value;k+=2E5*n.length;var r=g.tf(k,0),q=[];var u=new id(m.y,d.y,m.x);pd(u,n.ah,n.Db);od(u,e);q.push(u);u=new id(r.y,d.y,r.x);pd(u,n.ah+n.length,n.Db);od(u,e);q.push(u);u=new id(r.y,d.y+112500,r.x);pd(u,n.ah+n.length,n.Db-.5);od(u,e);q.push(u);u=new id(m.y,d.y+112500,m.x);pd(u,n.ah,n.Db-.5);od(u,e);q.push(u);a.he.push(q);m=r}}}a=p(Yf);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.na<=Th)){if(b.na>Uh+1)break;e=p(b);for(b=e.next();!b.done;b=
e.next())for(c=p(b.value.wb),b=c.next();!b.done;b=c.next())b.value.mj()}b=p(Yf);for(e=b.next();!e.done;e=b.next())if(a=e.value,!(a.na<=Th)){if(a.na>Uh+1)break;a=p(a.Ab);for(e=a.next();!e.done;e=a.next())e.value.stroke()}a=p(Yf);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.na<=Th)){if(b.na>Uh+1)break;e=p(b);for(b=e.next();!b.done;b=e.next())for(c=p(b.value.wb),b=c.next();!b.done;b=c.next())b.value.Sj()}oi++}}
function di(a,b){Xg=wh();var c=[];c.length=0;for(var d=p(a),e=d.next();!e.done;e=d.next()){var h=e.value,g=p(b);for(e=g.next();!e.done;e=g.next()){var k=e.value,l=[];if(h.U==k.U&&h.y!=k.y){if(h.cc){var m=void 0,n=p(h.cc);for(e=n.next();!e.done;e=n.next())e=e.value,e.target==k&&(m||(m=si(h)),l.push(ti(h,k,m,e.direction)))}if(k.cc)for(m=void 0,n=p(k.cc),e=n.next();!e.done;e=n.next())e=e.value,e.target==h&&(m||(m=si(k)),l.push(ti(k,h,m,e.direction)));h.cc||k.cc||(l.push(ui(h,k)),l.push(ui(k,h)),!sh(2)&&
l.reverse());c=c.concat(l)}}}d=p(c);for(e=d.next();!e.done;e=d.next())for(e=e.value,uh(e),h=p(e),e=h.next();!e.done;e=h.next())if(e=e.value,vi(e))return e.sa.wb.push(e),e;c.length=0;d=p(a);for(e=d.next();!e.done;e=d.next())for(h=e.value,g=p(b),e=g.next();!e.done;e=g.next())e=e.value,h.U!=e.U&&h.y==e.y&&(c=h.U.na==e.U.na&&h.U.Fb==e.U.Fb?c.concat(wi(h,e)):c.concat(xi(h,e,112500)));uh(c);d=p(c);for(e=d.next();!e.done;e=d.next())if(e=e.value,vi(e))return e.sa.wb.push(e),e.Wa.wb.push(e),e;c.length=0;a=
p(a);for(e=a.next();!e.done;e=a.next())for(d=e.value,h=p(b),e=h.next();!e.done;e=h.next())if(g=e.value,k=[],d.U!=g.U&&d.y!=g.y){if(d.cc)for(l=void 0,m=p(d.cc),e=m.next();!e.done;e=m.next())e=e.value,e.target==g&&(l||(l=si(d)),k.push(ti(d,g,l,e.direction)));if(g.cc)for(l=void 0,m=p(g.cc),e=m.next();!e.done;e=m.next())e=e.value,e.target==d&&(l||(l=si(g)),k.push(ti(g,d,l,e.direction)));d.cc||g.cc||(k.push(ui(d,g)),k.push(ui(g,d)),!sh(2)&&k.reverse());c=c.concat(k)}b=p(c);for(e=b.next();!e.done;e=b.next())for(c=
e.value,uh(c),c=p(c),e=c.next();!e.done;e=c.next())if(a=e.value,vi(a)){a.sa.wb.push(a);if(e=a.al)e=a,h=e.al,g=[],g.index=ci++,g.wb=[],g.y=e.Wa.y,g.U=e.sa.U,g.U.push(g),h.platform=g,g.push(h),d=e.sa.slice(),Dh(e.sa,[h]),Zh(),h=di([g],[e.Wa]),h||(e.sa.length=0,e.sa.push.apply(e.sa,ba(d)),e.sa.U.pop(),ci--),e=!h;if(e)a.sa.wb.pop();else return a}}
function ei(a,b){function c(y,x,C){-x.d<=y.R||-x.d>y.T||x.R>=y.d||x.T<y.d||(C=[(new yi).raw(y.d,y.R,-x.d).rotate(C),(new zi).raw(-x.d,-y.d,-x.R).rotate(C)],C.Wg=y.source,C.cg=x.source,C.Sa=C[0].T-C[0].R+(C[1].T-C[1].R),14E5>=C.Sa&&Sa(h,C))}function d(y,x,C){y.d!=-x.d||-x.R<=y.R||-x.T>y.T||(C=[(new yi).raw(y.d,y.R,-x.R).rotate(C)],C.Wg=y.source,C.cg=x.source,C.Sa=C[0].T-C[0].R,14E5>=C.Sa&&Sa(h,C))}var e=Ah(vh(),162500,162500),h=[];h.cmp=function(y,x){return y.Sa<x.Sa?-1:1};var g=[],k=[];a=p(a);for(var l=
a.next();!l.done;l=a.next())g=g.concat(Rh(l.value));b=p(b);for(a=b.next();!a.done;a=b.next())k=k.concat(Rh(a.value));b=[[],[],[],[]];a=[[],[],[],[]];for(l=0;4>l;l++){for(var m=yh(e,l),n=p(g),r=n.next();!r.done;r=n.next()){var q=r.value;r=q.source.source;q=zh(q.x,q.y,l);var u=q.y,z=q.x;q=Jh(q.x,q.y,m);q<=z||(u=new yi(u,z,q),u.source=r,b[l].push(u))}n=p(k);for(r=n.next();!r.done;r=n.next())q=r.value,r=q.source.source,q=zh(q.x,q.y,l),u=q.y,z=q.x,q=Jh(q.x,q.y,m),q<=z||(u=new yi(u,z,q),u.source=r,a[l].push(u))}for(e=
1;4>e;e++){g=void 0;g=(e+1)%4;k=p(b[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=p(a[g]),r=m.next();!r.done;r=m.next())c(l,r.value,e,g);k=p(a[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=p(b[g]),r=m.next();!r.done;r=m.next())c(l,r.value,e,g);g=(e+2)%4;k=p(b[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=p(a[g]),r=m.next();!r.done;r=m.next())d(l,r.value,e,g)}for(b=0;b<h.length;b++){a=h[b];e=a[0];g=a[a.length-1];k=a.Wg.platform;l=a.cg.platform;m=Math.min(k.y,l.y);r=Math.max(k.y,
l.y);if(e==g){if(n=25E3*(Math.floor((e.T-e.R-325E3)/5E4)-1),0>n&&(n=0),Math.abs(l.y-k.y)>n){h.splice(b--,1);continue}}else if(n=25E3*(Math.floor((e.T-e.R-325E3)/5E4)-1),0>n&&(n=0),m=Math.max(m,k.y-n),r=Math.min(r,k.y+n),n=25E3*(Math.floor((g.T-g.R-325E3)/5E4)-1),0>n&&(n=0),m=Math.max(m,l.y-n),r=Math.min(r,l.y+n),m>r){h.splice(b--,1);continue}a.y=th(m,r);a.cc=[];Math.abs(k.y-a.y)/25E3&&a.cc.push({direction:(e.sb()+2+3)%4,target:k});Math.abs(l.y-a.y)/25E3&&a.cc.push({direction:(g.sb()+3)%4,target:l});
a.cc.length||delete a.cc}for(b=0;4>b;b++){a=h[b];if(!a)break;g=a.Wg.platform;k=a.cg.platform;e=[];ai.call(e);e.index=Yf.length+Zf;e.Fb=g.U.na>k.U.na?g.U.Fb:k.U.Fb;e.Fb.push(e);Yf.push(e);0==e.index%5&&(e.Mc=!0);e.style={};e.style.height=225E3;e.style.height+=5E4*sh(4);e.style.$c=e.Fb.$c;e.Mc?(e.style.Gc=th(nh,ph),e.style.Xa=1E5):(e.style.Gc=th(lh,oh,qh),e.style.Xa=e.Fb.Xa);g=[];g.index=ci++;g.wb=[];g.y=a.y;a.cc&&(g.cc=a.cc);g.U=e;e.push(g);k=p(a);for(l=k.next();!l.done;l=k.next())l=l.value.ai().expand(162500,
162500),l.platform=g,g.push(l);Zh();k=k=void 0;if(g.y==a.cg.platform.y){if(k=di([a.Wg.platform],[g])){if(k=di([g],[a.cg.platform]))return a;a.Wg.platform.wb.pop()}}else if(k=di([g],[a.cg.platform])){if(k=di([a.Wg.platform],[g]))return a;a.cg.platform.wb.pop()}Yf.pop();e.Fb.pop()}return!1}
function xi(a,b,c){a.He=Ai(a,c);b.He=Ai(b,c);var d=[],e=[],h=c+37500,g=xh(a.He,h,0),k=xh(b.He,-h,0);k=Eh(g,k);var l=p(k);for(g=l.next();!g.done;g=l.next())g.value.direction=0;e=e.concat(k);g=xh(a.He,0,h);k=xh(b.He,0,-h);k=Eh(g,k);l=p(k);for(g=l.next();!g.done;g=l.next())g.value.direction=1;e=e.concat(k);g=xh(a.He,-h,0);k=xh(b.He,h,0);k=Eh(g,k);l=p(k);for(g=l.next();!g.done;g=l.next())g.value.direction=2;e=e.concat(k);g=xh(a.He,0,-h);h=xh(b.He,0,h);h=Eh(g,h);k=p(h);for(g=k.next();!g.done;g=k.next())g.value.direction=
3;e=e.concat(h);uh(e);h=new Fh(-9375,9375,-c,c);e=p(e);for(g=e.next();!g.done;g=e.next()){g=g.value;k=h.yg(g.direction);l=p([{z:g.D,x:g.s},{z:g.I-1,x:g.v-1}]);for(var m=l.next();!m.done;m=l.next())m=m.value,m=k.translate(m.z,m.x),m.y=a.y,m.direction=g.direction,d.push(new Bi(m,c,a,b))}return d}function Ai(a,b){b+=37500;var c=Bh(a,new Fh(0,1,0,1));a=Hh(c,1);a=Bh(a,new Fh(-b,b,-b,b));Dh(c,a);return c}
function wi(a,b){for(var c=[],d=p(a),e=d.next();!e.done;e=d.next())Lh(e.value,c);d=[];c=p(c);for(e=c.next();!e.done;e=c.next()){e=e.value;for(var h=p(b),g=h.next();!g.done;g=h.next())e.Eh(g.value,d)}for(c=[];d.length;){e=d.pop();for(h=0;h<d.length;h++)g=d[h],e.sb()==g.sb()&&e.d==g.d&&(e.T==g.R?(d.splice(h,1),e.T=g.T,h=-1):e.R==g.T&&(d.splice(h,1),e.R=g.R,h=-1));225E3>e.T-e.R||c.push(e)}d=[];c=p(c);for(e=c.next();!e.done;e=c.next())d.push(new Ci(e.value,a,b));return d}
function bi(){var a=U;if(!a.Mc){for(var b=new Fh,c=p(a),d=c.next();!d.done;d=c.next()){var e=p(d.value);for(d=e.next();!d.done;d=e.next())Gh(b,d.value)}var h=b.I-b.D-2E5-2E5-30625-30625;d=b.v-b.s-2E5-2E5-30625-30625;c=Math.round(h/625E3);e=Math.round(d/625E3);h=b.D+2E5+30625+.5*(h-625E3*(c-1));b=b.s+2E5+30625+.5*(d-625E3*(e-1));var g=[],k=p(a);for(d=k.next();!d.done;d=k.next())g=g.concat(d.value);g=Hh(g,1);g=Ah(g,2E5,2E5);for(k=0;k<c;k++){for(var l=b,m={},n=0;n<e;m={ei:m.ei},n++){d=function(q){return function(){for(var u=
p(g),z=u.next();!z.done;z=u.next())if(Di(q.ei,z.value))return!1;return!0}}(m);m.ei=new Fh(h-30625,h+30625,l-30625,l+30625);if(d()){var r=p(a);for(d=r.next();!d.done;d=r.next())Dh(d.value,[m.ei])}l+=625E3}h+=625E3}}}function ui(a,b){for(var c=si(a),d=[],e=0;4>e;e++)d=d.concat(ti(a,b,c,e));return d}
function ti(a,b,c,d){var e=25E3*Math.ceil(Math.abs(b.y-a.y)/25E3),h=a.U!=b.U?325E3:0,g=function(l,m,n){function r(y){for(var x=0;x<y.length;x++)for(var C=y[x],A=x+1;A<y.length;A++){var D=y[A];if(C.D==D.D&&C.I==D.I){if(D.v==C.s){y.splice(A--,1);C.s=D.s;x--;break}if(D.s==C.v){y.splice(A--,1);C.v=D.v;x--;break}}}y=p(y);for(x=y.next();!x.done;x=y.next())x=x.value,x.s=x.v-1,x.direction=d}var q=Hh(l,1);q=Bh(q,new Fh(-162499,162500,-e-h+1,e+162500+162500));l=q=Hh(q,0);q=Bh(n,new Fh(0,0,-e-h+1,e));q=Hh(q,
1);q=Bh(q,new Fh(-162500,162501,0,0));l=q=Eh(l,q);q=Hh(m,1);q=Bh(q,new Fh(-162499,162500,-162499,162500));q=Hh(q,0);n=[];m=Eh(l,xh(q,0,-e-h-162500));r(m);for(var u=p(m),z=u.next();!z.done;z=u.next())z.value.type=1;n=n.concat(m);if(0!=h){m=Eh(l,xh(q,-325E3,-e-162500));r(m);u=p(m);for(z=u.next();!z.done;z=u.next())z.value.type=0;n=n.concat(m);m=Eh(l,xh(q,325E3,-e-162500));r(m);l=p(m);for(z=l.next();!z.done;z=l.next())z.value.type=2;n=n.concat(m)}return n}(yh(a,d),yh(b,d),yh(c,d));c=[];g=p(g);for(var k=
g.next();!k.done;k=g.next())c.push(new Ei(k.value,e,h,a,b));return c}function si(a){for(var b=a.slice(),c=p(a.Mf),d=c.next();!d.done;d=c.next())d=d.value,d=d.Oa.platform!=a?d.Oa.platform:d.pa.platform,d.U==a.U&&(b=b.concat(d));return b}
function Zh(){for(var a=[],b=p(Yf),c=b.next();!c.done;c=b.next()){c=p(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;d.Mf=[];for(var e=p(d),h=e.next();!h.done;h=e.next())h.value.Mf=[];a=a.concat(d)}}for(b=0;b<a.length;b++)for(c=a[b],d=b+1;d<a.length;d++)if(e=a[d],h=Fi(c,e))h.Oa=c,h.pa=e,c.Mf.push(h),e.Mf.push(h),c.platform!=e.platform&&(c.platform.Mf.push(h),e.platform.Mf.push(h))}
function ki(){Xg=wh();var a=p(Yf),b=a.next();a:for(;!b.done;b=a.next())if(b=b.value,!b.Pm){b.Pm=!0;b=p(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=p(c.Mf),e=d.next();!e.done;e=d.next())if(e=e.value,e=e.Oa.platform!=c?e.Oa.platform:e.pa.platform,c.U.na==e.U.na&&!(c.index<=e.index)&&c.U!=e.U){var h=xi(c,e,87500);uh(h);h=p(h);for(var g=h.next();!g.done;g=h.next())if(g=g.value,vi(g)){g.kd=!0;c.wb.push(g);e.wb.push(g);continue a}}}}}
function ai(){this.na=Sh+1;this.hm=[];this.Ab=[];this.Cb=[];this.bound=new Kd;this.qa=-Infinity;this.floor=Infinity;this.o=-Infinity;this.ia={};this.ia.za=-2147483648;this.ia.lb=new w(1,1,1);this.ad=0;this.Rb=new w;this.cells=new ab(kb)}var ci=0;
function Bi(a,b,c,d){this.Ra=a;this.direction=a.direction;this.b=b;this.sa=c;this.Wa=d;this.z=.5*a.D+.5*a.I;this.x=.5*a.s+.5*a.v;this.y=Math.max(c.y,d.y);this.jc=[];this.bg=[];this.Ad=[];this.Pd=[];this.Ab=[];c=new Fh(a.D,a.I,a.s,a.v);c.o=a.y;c.u=c.o+225E3;this.Ad.push(c);this.bg.push(c);b=new Fh(2*-b,2*b,-b,b);b=b.rotate(this.direction);b=b.translate(this.z,this.x);b.u=a.y;b.o=b.u-18750;this.Ad.push(b);b=new Fh(b.D,b.I,b.s,b.v);b.o=a.y;b.u=b.o+225E3;this.Pd.push(b)}f=Bi.prototype;f.mk=function(){Pg.Ol.push(this.Ra)};
f.translate=function(a,b){this.z+=a;this.x+=b};
f.mj=function(){if(!this.Ab.length){this.od=0;var a=new yi(0,0,1);a=a.rotate(this.direction);this.Aa=new yc(a.uc()+this.z,a.tc()+this.x,a.Wb()+this.z,a.Vb()+this.x);a=new Gi;a.add=!0;a.Xa=0;a.color=ch;this.kd?(a.o=this.y+87500,a.u=a.o+125E3):(a.o=this.y,a.u=this.y+225E3);for(var b=[new E(0,-this.b),new E(0,this.b),new E(-9375,this.b),new E(-9375,-this.b)],c=[new E(0,this.b),new E(0,-this.b),new E(9375,-this.b),new E(9375,this.b)],d=0;d<b.length;d++)b[d]=this.Aa.ub(b[d].x,b[d].y);for(d=0;d<c.length;d++)c[d]=
this.Aa.ub(c[d].x,c[d].y);a.ba=this.sa.U.index;Hi(a,b);this.Ab.push(a);a=a.da();a.ba=this.Wa.U.index;Hi(a,c);this.Ab.push(a);this.yc=new Wf(new yc(b[0].x,b[0].y,b[1].x,b[1].y),a.o,a.u);this.Uc=new Wf(new yc(c[0].x,c[0].y,c[1].x,c[1].y),a.o,a.u);this.yc.nd=this.Uc;this.Uc.nd=this.yc;this.yc.ba=this.sa.U.index;this.Uc.ba=this.Wa.U.index;this.yc.kd=this.kd;this.Uc.kd=this.kd}};
f.Sj=function(){if(0==this.od){for(var a=p(this.Ab),b=a.next();!b.done;b=a.next())b.value.stroke();this.od=1}1!=this.od||this.sa.U.na>Uh+1||this.Wa.U.na>Uh+1||(this.sa.U.Cb.push(this.yc),this.Wa.U.Cb.push(this.Uc),this.od=2)};f.create=function(){if(this.xj)this.xj.update();else if(0<this.od)if(this.kd)this.xj=new Ii(this.Aa,this.y+87500,this.sa.U,this.Wa.U);else if(this.sa.U.na!=this.Wa.U.na||this.sa.U.Mc!=this.Wa.U.Mc)this.xj=new Ji(this.Aa,this.y,this.yc,this.Uc,this.sa.U,this.Wa.U)};
f.qj=function(){if(!this.Zf){for(var a=p(this.Ab),b=a.next();!b.done;b=a.next())pi(b.value);this.Zf=!0}};function gi(a){var b=a.sa.wb,c=b.indexOf(a);0>c||b.splice(c,1);b=a.Wa.wb;a=b.indexOf(a);0>a||b.splice(a,1)}f.oj=function(){if(this.kd){var a=this.y+87500;var b=a+125E3}else a=this.y,b=this.y+225E3;this.sa.U.qa=Math.max(this.sa.U.qa,b);this.Wa.U.qa=Math.max(this.Wa.U.qa,b);this.sa.U.o=Math.min(this.sa.U.o,a);this.Wa.U.o=Math.min(this.Wa.U.o,a)};
function Ci(a,b,c){var d=.5*(a.T-a.R)-9375,e=a.ai();this.direction=(a.sb()+3)%4;this.b=d;this.Ra=e;this.sa=b;this.Wa=c;this.z=.5*e.D+.5*e.I;this.x=.5*e.s+.5*e.v;this.y=Math.max(b.y,c.y);e.y=this.y;this.jc=[];this.bg=[];this.Ad=[];this.Pd=[];this.Ab=[];a=new Fh(e.D,e.I,e.s,e.v);a.o=e.y;a.u=a.o+225E3;this.Ad.push(a);this.bg.push(a);d=new Fh(-225E3,225E3,-d,d);d=d.rotate(this.direction);d=d.translate(this.z,this.x);d.u=e.y;d.o=d.u-18750;this.Ad.push(d);d=new Fh(d.D,d.I,d.s,d.v);d.o=e.y;d.u=d.o+225E3;
this.Pd.push(d)}f=Ci.prototype;f.mk=function(){Pg.Ol.push(this.Ra)};f.translate=function(a,b){this.z+=a;this.x+=b};
f.mj=function(){if(!this.Ab.length){this.od=0;var a=new yi(0,0,1);a=a.rotate(this.direction);this.Aa=new yc(a.uc()+this.z,a.tc()+this.x,a.Wb()+this.z,a.Vb()+this.x);a=new Gi;a.add=!0;a.Xa=0;a.color=ch;this.kd?(a.o=this.y+87500,a.u=a.o+125E3):(a.o=this.y,a.u=Math.min(this.sa.U.qa,this.Wa.U.qa));for(var b=[new E(0,-this.b),new E(0,this.b),new E(-9375,this.b),new E(-9375,-this.b)],c=[new E(0,this.b),new E(0,-this.b),new E(9375,-this.b),new E(9375,this.b)],d=0;d<b.length;d++)b[d]=this.Aa.ub(b[d].x,b[d].y);
for(d=0;d<c.length;d++)c[d]=this.Aa.ub(c[d].x,c[d].y);a.ba=this.sa.U.index;Hi(a,b);this.Ab.push(a);a=a.da();a.ba=this.Wa.U.index;Hi(a,c);this.Ab.push(a);this.yc=new Wf(new yc(b[0].x,b[0].y,b[1].x,b[1].y),a.o,a.u);this.Uc=new Wf(new yc(c[0].x,c[0].y,c[1].x,c[1].y),a.o,a.u);this.yc.nd=this.Uc;this.Uc.nd=this.yc;this.yc.ba=this.sa.U.index;this.Uc.ba=this.Wa.U.index;this.yc.kd=this.kd;this.Uc.kd=this.kd}};
f.Sj=function(){if(0==this.od){for(var a=p(this.Ab),b=a.next();!b.done;b=a.next())b.value.stroke();this.od=1}1!=this.od||this.sa.U.na>Uh+1||this.Wa.U.na>Uh+1||(this.sa.U.Cb.push(this.yc),this.Wa.U.Cb.push(this.Uc),this.od=2)};f.create=function(){};f.qj=function(){if(!this.Zf){for(var a=p(this.Ab),b=a.next();!b.done;b=a.next())pi(b.value);this.Zf=!0}};f.oj=function(){};
function Ei(a,b,c,d,e){this.Ra=a;this.direction=a.direction;this.type=a.type;this.Nb=162500;this.le=b;this.sa=d;this.Wa=e;var h=Math.min(d.y,e.y),g=Math.max(d.y,e.y);this.jc=[];this.bg=[];this.Ad=[];this.Pd=[];this.Ab=[];var k=new Fh(-162500,162500,-b,b);k=k.translate(a.D,a.s);k=k.rotate(this.direction);k.o=h-18750;k.u=g;this.jc.push(k);this.bg.push(k);k=new Fh(k.D,k.I,k.s,k.v);k.o=h;k.u=g+2E5;this.Pd.push(k);k=new Fh(-162500,162500,-b-162500-162500,-b);k=k.translate(a.D,a.s);k=k.rotate(this.direction);
k.o=d.y;k.u=g+2E5;this.Pd.push(k);k=new Fh(k.D,k.I,k.s,k.v);k.o=h-18750;k.u=d.y;this.jc.push(k);this.Ad.push(k);if(c){d=new Fh(-162500,162500,b,b+c);d=d.translate(a.D,a.s);d=d.rotate(this.direction);d.o=e.y;d.u=g+2E5;this.Pd.push(d);d=new Fh(d.D,d.I,d.s,d.v);d.o=h-18750;d.u=e.y;this.jc.push(d);this.Ad.push(d);this.al=d;var l;0==this.type?l=new Fh(162500,487500,b,b+c):1==this.type?l=new Fh(-162500,162500,b+c,b+c+325E3):2==this.type&&(l=new Fh(-487500,-162500,b,b+c));l=l.translate(a.D,a.s);l=l.rotate(this.direction);
l.o=e.y;l.u=g+2E5;this.Pd.push(l);l=new Fh(l.D,l.I,l.s,l.v);l.o=h-18750;l.u=e.y;this.jc.push(l);this.Ad.push(l)}else b=new Fh(-162500,162500,b,b+162500),b=b.translate(a.D,a.s),b=b.rotate(this.direction),b.o=e.y,b.u=g+2E5,this.Pd.push(b),b=new Fh(b.D,b.I,b.s,b.v),b.o=h-18750,b.u=e.y,this.jc.push(b),this.Ad.push(b)}f=Ei.prototype;
f.mk=function(){var a=(this.Wa.y-this.sa.y)/25E3;if(this.Wa.y>this.sa.y)for(var b=0;b<=a;b++){var c=new yi(this.Ra.s-this.le+5E4*b,this.Ra.D-this.Nb,this.Ra.D+this.Nb);c=c.rotate(this.direction);c.y=this.sa.y+25E3*b;Pg.Am.push(c)}else for(a=-a,b=0;b<=a;b++)c=new yi(this.Ra.s-this.le+5E4*b,this.Ra.D-this.Nb,this.Ra.D+this.Nb),c=c.rotate(this.direction),c.y=this.sa.y-25E3*b,Pg.Am.push(c)};
f.translate=function(a,b){this.z+=a;this.x+=b;this.Ra=this.Ra.rotate(this.direction);this.Ra.D+=a;this.Ra.I+=a;this.Ra.s+=b;this.Ra.v+=b;this.Ra=this.Ra.yg(this.direction);this.jc[0].D+=a;this.jc[0].I+=a;this.jc[0].s+=b;this.jc[0].v+=b};
f.mj=function(){if(!this.Ab.length){this.od=0;var a=this.sa.U,b=(this.Wa.y-this.sa.y)/25E3,c=function(h){return 1!=h.ti?!1:!0};if(this.Wa.y>this.sa.y)for(c=0;c<b;c++){var d=new Fh(this.Ra.D-this.Nb,this.Ra.D+this.Nb,this.Ra.s-this.le+5E4*c,this.Ra.s-this.le+5E4*(c+1));d=d.rotate(this.direction);d=[new E(d.D,d.s),new E(d.I,d.s),new E(d.I,d.v),new E(d.D,d.v)];a=new Gi;a.add=!1;a.ba=this.sa.U.index;a.Xa=0;a.color=ch;a.o=this.sa.y;a.u=this.sa.y+25E3*(c+1);Hi(a,d);this.Ab.push(a)}else for(b=-b,d=new Gi,
d.add=!0,d.ti=1,d.ba=this.sa.U.index,d.Fh=c,d.Gc=a.style.Gc,d.Xa=a.style.Xa,d.Gf=a.o,d.color=a.style.$c,d.o=this.Wa.y,d.u=this.sa.y,a=this.jc[0],Hi(d,[new E(a.D,a.s),new E(a.I,a.s),new E(a.I,a.v),new E(a.D,a.v)]),this.Ab.push(d),d=0;d<b;d++){a=new Fh(this.Ra.D-this.Nb,this.Ra.D+this.Nb,this.Ra.s-this.le+5E4*d,this.Ra.s-this.le+5E4*(d+1));a=a.rotate(this.direction);a=[new E(a.D,a.s),new E(a.I,a.s),new E(a.I,a.v),new E(a.D,a.v)];var e=new Gi;e.add=!1;e.ba=this.sa.U.index;e.Fh=c;e.Xa=0;e.color=ch;e.o=
this.Wa.y;e.u=this.sa.y-25E3*d;Hi(e,a);this.Ab.push(e)}}};f.Sj=function(){if(0==this.od){for(var a=p(this.Ab),b=a.next();!b.done;b=a.next())b.value.stroke();this.od=2}};f.create=function(){};f.qj=function(){if(!this.Zf){for(var a=p(this.Ab),b=a.next();!b.done;b=a.next())pi(b.value);this.Zf=!0}};f.oj=function(){this.sa.U.o=Math.min(this.sa.U.o,this.Wa.y);this.Wa.U.o=Math.min(this.Wa.U.o,this.sa.y)};
function Ki(a,b){for(var c=p(a.Ad),d=c.next();!d.done;d=c.next()){var e=d.value,h=p(b.bg);for(d=h.next();!d.done;d=h.next())if(Li(e,d.value))return!1}c=p(a.bg);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=p(b.Ad),d=h.next();!d.done;d=h.next())if(Li(e,d.value))return!1;c=p(a.Pd);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=p(b.jc),d=h.next();!d.done;d=h.next())if(Li(e,d.value))return!1;a=p(a.jc);for(d=a.next();!d.done;d=a.next())for(c=d.value,e=p(b.Pd),d=e.next();!d.done;d=e.next())if(Li(c,
d.value))return!1;return!0}function vi(a){for(var b=p(Xg),c=b.next();!c.done;c=b.next())if(!Ki(a,c.value))return!1;return!0}
function qi(a){function b(k){return k.add&&k.ba==this.ba?!0:!1}0>a.style.Xa&&(a.style.Xa+=a.qa-a.floor);for(var c=p(a.Pk),d=c.next();!d.done;d=c.next()){d=d.value;var e=new Gi;e.add=!0;e.ti=1;e.ba=a.index;e.Xa=a.style.Xa;e.color=a.style.$c;e.Gc=a.style.Gc;e.Gf=a.o;e.o=a.o;e.u=a.qa;Hi(e,bd(d));a.Ab.push(e);a.Mc&&(e.qa=null)}if(a.bm)for(c=p(a.bm),d=c.next();!d.done;d=c.next())d=d.value,e=new Gi,e.add=!0,e.ti=1,e.ba=a.index,e.Xa=a.style.Xa,e.color=a.style.$c,e.Gc=a.style.Gc,e.Gf=a.o,e.o=a.o,e.u=a.qa,
Hi(e,bd(d)),a.Ab.push(e);c=p(a);for(d=c.next();!d.done;d=c.next())if(e=d.value,!(e.y<=a.o)){var h=p(e.Ok);for(d=h.next();!d.done;d=h.next()){d=d.value;var g=new Gi;g.add=!1;g.ti=1;g.ba=a.index;g.Fh=b;g.Xa=a.style.Xa;g.color=a.style.$c;g.Gc=a.style.Gc;g.Gf=a.floor;g.o=a.o;g.u=e.y;Hi(g,bd(d));a.Ab.push(g)}}};function Fh(a,b,c,d){a=void 0===a?NaN:a;b=void 0===b?NaN:b;c=void 0===c?NaN:c;d=void 0===d?NaN:d;this.D=a;this.I=b;this.s=c;this.v=d}f=Fh.prototype;f.rf=function(a,b){return a<=this.D||a>=this.I||b<=this.s||b>=this.v?!1:!0};f.zf=function(a,b){a<this.D?a=this.D:a>this.I&&(a=this.I);b<this.s?b=this.s:b>this.v&&(b=this.v);return new E(a,b)};function Mi(a,b,c){var d=0;b<a.D?d+=a.D-b:b>a.I&&(d+=b-a.I);c<a.s?d+=a.s-c:c>a.v&&(d+=c-a.v);return d}
function Oh(a,b,c){b>=a.D||(a.D=b);b<=a.I||(a.I=b);c>=a.s||(a.s=c);c<=a.v||(a.v=c)}function Gh(a,b){b.D>=a.D||(a.D=b.D);b.I<=a.I||(a.I=b.I);b.s>=a.s||(a.s=b.s);b.v<=a.v||(a.v=b.v)}f.nc=function(a,b){a-=.5*this.I+.5*this.D;b-=.5*this.v+.5*this.s;return 1E5/Math.sqrt(a*a+b*b)};f.expand=function(a,b){return this.da(this.D-a,this.I+a,this.s-b,this.v+b)};
function Lh(a,b){var c=new yi(a.s,a.D,a.I);c.source=a;b.push(c);c=new Ni(a.I,a.s,a.v);c.source=a;b.push(c);c=new Oi(a.v,a.I,a.D);c.source=a;b.push(c);c=new zi(a.D,a.v,a.s);c.source=a;b.push(c)}
function mi(a,b,c,d,e){var h=new Fh(a.I+b+d,a.I+b+d,Math.min(a.s+c,a.v-c)-d,Math.max(a.s+c,a.v-c)+d);h.I+=1;h.v+=1;e.push(h);h=new Fh(Math.min(a.D+b,a.I-b)-d,Math.max(a.D+b,a.I-b)+d,a.v+c,a.v+c+d);h.I+=1;h.v+=1;e.push(h);h=new Fh(a.D-b-d,a.D-b-d,Math.min(a.s+c,a.v-c)-d,Math.max(a.s+c,a.v-c)+d);h.I+=1;h.v+=1;e.push(h);h=new Fh(Math.min(a.D+b,a.I-b)-d,Math.max(a.D+b,a.I-b)+d,a.s-c-d,a.s-c-d);h.I+=1;h.v+=1;e.push(h)}
f.da=function(a,b,c,d){a=new Fh(a,b,c,d);this.xk&&(a.xk=this.xk);this.platform&&(a.platform=this.platform);this.U&&(a.U=this.U);void 0!==this.direction&&(a.direction=this.direction);void 0!==this.type&&(a.type=this.type);return a};
f.Xg=function(a,b){if(!Di(this,a))return!1;var c=this.s,d=this.v;this.v>a.v&&(b.push(this.da(this.D,this.I,a.v,this.v)),d=a.v);this.s<a.s&&(b.push(this.da(this.D,this.I,this.s,a.s)),c=a.s);this.I>a.I&&b.push(this.da(a.I,this.I,c,d));this.D<a.D&&b.push(this.da(this.D,a.D,c,d));return!0};f.Eh=function(a,b){a=this.da(Math.max(this.D,a.D),Math.min(this.I,a.I),Math.max(this.s,a.s),Math.min(this.v,a.v));a.I<=a.D||a.v<=a.s||b.push(a)};function Ch(a,b){return a.da(a.D+b.D,a.I+b.I,a.s+b.s,a.v+b.v)}
f.rotate=function(a){switch(a){case 0:return this.da(this.D,this.I,this.s,this.v);case 1:return this.da(-this.v,-this.s,this.D,this.I);case 2:return this.da(-this.I,-this.D,-this.v,-this.s);case 3:return this.da(this.s,this.v,-this.I,-this.D)}};f.yg=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return this.da(this.D+a,this.I+a,this.s+b,this.v+b)};function Fi(a,b){a=new Fh(Math.max(a.D,b.D),Math.min(a.I,b.I),Math.max(a.s,b.s),Math.min(a.v,b.v));return a.I<a.D||a.v<a.s?null:a}
function Di(a,b){return a.D>=b.I||a.I<=b.D||a.s>=b.v||a.v<=b.s?!1:!0}function Li(a,b){return!Di(a,b)||a.o>=b.u||a.u<=b.o?!1:!0}function ni(a,b,c){var d=0;a=p(a);for(var e=a.next();!e.done;e=a.next())d+=e.value.nc(b,c);return d}function yi(a,b,c){this.d=a;this.R=b;this.T=c}function Ni(a,b,c){this.d=-a;this.R=b;this.T=c}function Oi(a,b,c){this.d=-a;this.R=-b;this.T=-c}function zi(a,b,c){this.d=a;this.R=-b;this.T=-c}f=yi.prototype;f.sb=function(){return 0};f.uc=function(){return this.R};f.tc=function(){return this.d};
f.Wb=function(){return this.T};f.Vb=function(){return this.d};f.raw=function(a,b,c){this.d=a;this.R=b;this.T=c;return this};f.Wf=function(){return new yc(this.uc(),this.tc(),this.Wb(),this.Vb())};f.da=function(a,b,c){a=new yi(a,b,c);a.source=this.source;return a};f.yi=function(a,b,c){if(!this.Yh){var d=new E(this.R+a,this.d-b);d.source=this;c.push(d)}this.uh||(a=new E(this.T-a,this.d-b),a.source=this,c.push(a))};f.tf=function(a,b){return new E(this.R+a,this.d+b)};
f.rf=function(a,b){return b>this.d||b<this.d||a<this.R||a>=this.T?!1:!0};f.zf=function(a){return a<this.R?new E(this.R,this.d):a>this.T?new E(this.T,this.d):new E(a,this.d)};f.Xg=function(a,b){if(this.d>a.v||this.d<=a.s||this.R>=a.I||this.T<=a.D)return!1;this.R<a.D&&b.push(this.da(this.d,this.R,a.D));this.T>a.I&&b.push(this.da(this.d,a.I,this.T));return!0};f.Eh=function(a,b){this.d>a.v||this.d<=a.s||this.R>=a.I||this.T<=a.D||b.push(this.da(this.d,Math.max(this.R,a.D),Math.min(this.T,a.I)))};
f.ai=function(){return new Fh(this.R,this.T,this.d,this.d)};f.rotate=function(a){switch(a){case 0:return(new yi).raw(this.d,this.R,this.T);case 1:return(new Ni).raw(this.d,this.R,this.T);case 2:return(new Oi).raw(this.d,this.R,this.T);case 3:return(new zi).raw(this.d,this.R,this.T)}};f.yg=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new yi).raw(this.d+b,this.R+a,this.T+a)};f=Ni.prototype;f.sb=function(){return 1};f.uc=function(){return-this.d};f.tc=function(){return this.R};
f.Wb=function(){return-this.d};f.Vb=function(){return this.T};f.raw=yi.prototype.raw;f.Wf=yi.prototype.Wf;f.da=function(a,b,c){a=new Ni(-a,b,c);a.source=this.source;return a};f.yi=function(a,b,c){if(!this.Yh){var d=new E(-this.d+a,this.R+b);d.source=this;c.push(d)}this.uh||(a=new E(-this.d+a,this.T-b),a.source=this,c.push(a))};f.tf=function(a,b){return new E(-this.d-b,this.R+a)};f.rf=function(a,b){return a>-this.d||a<-this.d||b<this.R||b>=this.T?!1:!0};
f.zf=function(a,b){return b<this.R?new E(-this.d,this.R):b>this.T?new E(-this.d,this.T):new E(-this.d,b)};f.Xg=function(a,b){if(-this.d>=a.I||-this.d<a.D||this.R>=a.v||this.T<=a.s)return!1;this.R<a.s&&b.push(this.da(this.d,this.R,a.s));this.T>a.v&&b.push(this.da(this.d,a.v,this.T));return!0};f.Eh=function(a,b){-this.d>=a.I||-this.d<a.D||this.R>=a.v||this.T<=a.s||b.push(this.da(this.d,Math.max(this.R,a.s),Math.min(this.T,a.v)))};f.ai=function(){return new Fh(-this.d,-this.d,this.R,this.T)};
f.rotate=function(a){switch(a){case 0:return(new Ni).raw(this.d,this.R,this.T);case 1:return(new Oi).raw(this.d,this.R,this.T);case 2:return(new zi).raw(this.d,this.R,this.T);case 3:return(new yi).raw(this.d,this.R,this.T)}};f.yg=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Ni).raw(this.d-a,this.R+b,this.T+b)};f=Oi.prototype;f.sb=function(){return 2};f.uc=function(){return-this.R};f.tc=function(){return-this.d};f.Wb=function(){return-this.T};f.Vb=function(){return-this.d};
f.raw=yi.prototype.raw;f.Wf=yi.prototype.Wf;f.da=function(a,b,c){a=new Oi(-a,-b,-c);a.source=this.source;return a};f.yi=function(a,b,c){if(!this.Yh){var d=new E(-this.R-a,-this.d+b);d.source=this;c.push(d)}this.uh||(a=new E(-this.T+a,-this.d+b),a.source=this,c.push(a))};f.tf=function(a,b){return new E(-this.R-a,-this.d-b)};f.rf=function(a,b){return b>-this.d||b<-this.d||a>-this.R||a<=-this.T?!1:!0};f.zf=function(a){return a<-this.T?new E(-this.T,-this.d):a>-this.R?new E(-this.R,-this.d):new E(a,-this.d)};
f.Xg=function(a,b){if(-this.d>=a.v||-this.d<a.s||-this.T>=a.I||-this.R<=a.D)return!1;-this.T<a.D&&b.push(this.da(this.d,-a.D,this.T));-this.R>a.I&&b.push(this.da(this.d,this.R,-a.I));return!0};f.Eh=function(a,b){-this.d>=a.v||-this.d<a.s||-this.T>=a.I||-this.R<=a.D||b.push(this.da(this.d,Math.max(this.R,-a.I),Math.min(this.T,-a.D)))};f.ai=function(){return new Fh(-this.T,-this.R,-this.d,-this.d)};
f.rotate=function(a){switch(a){case 0:return(new Oi).raw(this.d,this.R,this.T);case 1:return(new zi).raw(this.d,this.R,this.T);case 2:return(new yi).raw(this.d,this.R,this.T);case 3:return(new Ni).raw(this.d,this.R,this.T)}};f.yg=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Oi).raw(this.d-b,this.R-a,this.T-a)};f=zi.prototype;f.sb=function(){return 3};f.uc=function(){return this.d};f.tc=function(){return-this.R};f.Wb=function(){return this.d};f.Vb=function(){return-this.T};
f.raw=yi.prototype.raw;f.Wf=yi.prototype.Wf;f.da=function(a,b,c){a=new zi(a,-b,-c);a.source=this.source;return a};f.yi=function(a,b,c){if(!this.Yh){var d=new E(this.d-a,-this.R-b);d.source=this;c.push(d)}this.uh||(a=new E(this.d-a,-this.T+b),a.source=this,c.push(a))};f.tf=function(a,b){return new E(this.d+b,-this.R-a)};f.rf=function(a,b){return a>this.d||a<this.d||b>-this.R||b<=-this.T?!1:!0};f.zf=function(a,b){return b<-this.T?new E(this.d,-this.T):b>-this.R?new E(this.d,-this.R):new E(this.d,b)};
f.Xg=function(a,b){if(this.d>a.I||this.d<=a.D||-this.T>=a.v||-this.R<=a.s)return!1;-this.T<a.s&&b.push(this.da(this.d,-a.s,this.T));-this.R>a.v&&b.push(this.da(this.d,this.R,-a.v));return!0};f.Eh=function(a,b){this.d>a.I||this.d<=a.D||-this.T>=a.v||-this.R<=a.s||b.push(this.da(this.d,Math.max(this.R,-a.v),Math.min(this.T,-a.s)))};f.ai=function(){return new Fh(this.d,this.d,-this.T,-this.R)};
f.rotate=function(a){switch(a){case 0:return(new zi).raw(this.d,this.R,this.T);case 1:return(new yi).raw(this.d,this.R,this.T);case 2:return(new Ni).raw(this.d,this.R,this.T);case 3:return(new Oi).raw(this.d,this.R,this.T)}};f.yg=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new zi).raw(this.d+a,this.R-b,this.T-b)};
function Pi(a,b){function c(){for(var n=new ab(zc),r=p(a),q=r.next();!q.done;q=r.next())q=q.value,n.add(q),n.add(q.ea);r=p(a);for(q=r.next();!q.done;q=r.next())if(q=q.value,!q.remove){var u=n.get(q);u!=q&&(q.replace([u]),q.ea.replace([u.ea]))}return n.elements}function d(){for(var n=p(m),r=n.next();!r.done;r=n.next()){r=r.value;var q=r.x&-524288,u=r.y&-524288,z=!1;r.x<=q+256?(r.x=q,z=!0):r.x>=q+524288-256&&(r.x=q+524288,z=!0);r.y<=u+256?(r.y=u,z=!0):r.y>=u+524288-256&&(r.y=u+524288,z=!0);if(z){u=
p(r.inputs);for(q=u.next();!q.done;q=u.next())q.value.ph=!0;r=p(r.outputs);for(q=r.next();!q.done;q=r.next())q.value.ph=!0}}}function e(n,r,q){var u=Dc(r,n.m,n.l),z=Dc(r,n.C,n.w),y=Dc(n,r.m,r.l),x=Dc(n,r.C,r.w);if(-256>y&&256<x&&(-256>u&&256<z||256<u&&-256>z)||256<y&&-256>x&&(-256>u&&256<z||256<u&&-256>z)){u/=u-z;z=1-u;x=new E(Math.round(n.m*z+n.C*u),Math.round(n.l*z+n.w*u));u=n.hb(n.m,n.l,x.x,x.y);z=n.hb(x.x,x.y,n.C,n.w);y=r.hb(r.m,r.l,x.x,x.y);x=r.hb(x.x,x.y,r.C,r.w);var C=Uc(u),A=Uc(z),D=Uc(y),
I=Uc(x);n.replace([u,z]);n.ea.replace([A,C]);r.replace([y,x]);r.ea.replace([I,D]);q.push(u,z,y,x);q.push(C,A,D,I);n=!0}else n=!1;return n}function h(n,r){if(!n.remove){for(var q=p(m),u=q.next();!u.done;u=q.next())if(u=u.value,u.x!=n.m||u.y!=n.l)if(u.x!=n.C||u.y!=n.w){var z=n.tf(u.x,u.y);if(!(0>=z.x||z.x>=n.length||-256>z.y||256<z.y)){q=n.hb(n.m,n.l,u.x,u.y);u=n.hb(u.x,u.y,n.C,n.w);z=n.hb(q.C,q.w,q.m,q.l);var y=n.hb(u.C,u.w,u.m,u.l);q.ea=z;z.ea=q;u.ea=y;y.ea=u;n.replace([q,u]);n.ea.replace([y,z]);
h(q,r);h(u,r);h(z,r);h(y,r);return}}r.push(n)}}for(var g=[],k=p(a),l=k.next();!l.done;l=k.next())l=l.value,l.remove||g.push(l);a=g;a=c();b&&(a=Qi(null,a,e));var m=new ab(rd);b=p(a);for(l=b.next();!l.done;l=b.next())g=l.value,k=new E(g.m,g.l),k.inputs=[],k.outputs=[],k.b=1,g.Oa=m.Ja(k),g.Oa.outputs.push(g),g.Oa.b++,k=new E(g.C,g.w),k.inputs=[],k.outputs=[],k.b=1,g.pa=m.Ja(k),g.pa.inputs.push(g),g.pa.b++;m=m.elements;d();m=Qi(null,m,function(n,r,q){if(256>(Math.abs(r.x-n.x)+Math.abs(r.y-n.y))*Math.SQRT1_2){var u=
new E(n.x*n.b+r.x*r.b,n.y*n.b+r.y*r.b);u.b=n.b+r.b;u.x/=u.b;u.y/=u.b;u.round();u.inputs=n.inputs.concat(r.inputs);u.outputs=n.outputs.concat(r.outputs);n=p(u.inputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.pa=u,r.ph=!0;n=p(u.outputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.Oa=u,r.ph=!0;q.push(u);q=!0}else q=!1;return q});d();for(b=0;b<a.length;b++)g=a[b],g.remove?a.splice(b--,1):g.Oa==g.pa?(g.replace([]),g.ea.replace([]),a.splice(b--,1)):g.ph&&(k=g.hb(g.Oa.x,g.Oa.y,g.pa.x,g.pa.y),l=Uc(k),
g.replace([k]),g.ea.replace([l]),a.splice(b++,1,k,l)),delete g.Oa,delete g.pa,delete g.ph;(function(){for(var n=[],r=p(a),q=r.next();!q.done;q=r.next())h(q.value,n);a=n})();return a=c()}
function Qi(a,b,c){var d=[];if(a)for(var e=0;e<a.length;e++){var h=a[e];if(h.remove)a.splice(e--,1);else for(var g=0;g<b.length;g++){var k=b[g];if(k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);a.splice(e--,1);break}}}for(e=0;e<b.length;e++)if(h=b[e],h.remove)b.splice(e--,1);else for(g=e+1;g<b.length;g++)if(k=b[g],k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);b.splice(e--,1);break}a&&(b=a.concat(b));return d.length?Qi(b,d,c):b};var Ri,Si,Ti,Ui,Vi,Wi=0;
function Xi(){function a(c){function d(x,C,A){return zh(C,A,x.sb()).y>=x.d}function e(x){x.Sa=0;var C=x.m,A=x.l;if(1==x.action)if(x.yb.length){var D=x.yb[0],I=D.uc()-C;D=D.tc()-A;x.Sa+=Math.sqrt(I*I+D*D);I=p(x.yb);for(D=I.next();!D.done;D=I.next())A=D.value,x.Sa+=A.T-A.R,C=A.Wb(),A=A.Vb()}else I=x.X.Wb(),D=x.X.Vb(),C=I-C,A=D-A,x.Sa+=Math.sqrt(C*C+A*A),C=I,A=D;else if(2==x.action)if(x.yb.length)for(D=x.yb[0],I=D.Wb()-C,D=D.Vb()-A,x.Sa+=Math.sqrt(I*I+D*D),I=p(x.yb),D=I.next();!D.done;D=I.next())A=D.value,
x.Sa+=A.T-A.R,C=A.uc(),A=A.tc();else I=x.X.Wb(),D=x.X.Vb(),C=I-C,A=D-A,x.Sa+=Math.sqrt(C*C+A*A),C=I,A=D;C=x.C-C;A=x.w-A;x.Sa+=Math.sqrt(C*C+A*A)}function h(x){x.pc=0;for(var C=p(x),A=C.next();!A.done;A=C.next())A=A.value,x.pc=A.complete?x.pc+.5*A.Sa:x.pc+A.Sa}for(var g=null,k=0,l=0;l<c.length;l++)if(!c[l].complete){k=l;g=c[l];break}if(!g)return!0;if(1==g.action){g.X=g.X.next;l=g.X.Wb();var m=g.X.Vb();if(l==g.m&&m==g.l||l==g.C&&m==g.w)return!1;for(var n=g.X,r=g.X.next;0<k;){var q=c[k-1],u=Dc(q,l,m);
if(1==q.xb&&0<=u||2==q.xb&&0>=u)q=new yc(q.m,q.l,g.C,g.w),q.action=g.action,q.complete=g.complete,q.xb=g.xb,q.X=g.X,q.yb=g.yb,q.max=q,c=c.slice(),c.splice(--k,2,q),Sa(Ti,c),g=q;else break}q=!d(n,g.C,g.w)&&d(r,g.C,g.w);if(g.yb.length){if(zh(r.Wb(),r.Vb(),n.sb()).y>n.d||q){l=[];m=g.yb[0];m=new yc(g.m,g.l,m.uc(),m.tc());m.Sa=m.length;m.action=0;m.xb=g.action;l.push(m);m=p(g.yb);for(n=m.next();!n.done;n=m.next())n=n.value,n=new yc(n.uc(),n.tc(),n.Wb(),n.Vb()),n.Sa=n.length,n.complete=1,n.action=0,n.xb=
g.action,l.push(n);m=g.yb[g.yb.length-1];m=new yc(m.Wb(),m.Vb(),g.C,g.w);m.Sa=m.length;m.action=0;m.xb=g.xb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(ba(l)));e(g);h(c);Sa(Ti,c)==c&&Sa(Ri,c);return!1}g.yb.push(r)}else{u=r.Wb();var z=r.Vb();if(0<=Dc(g.max,l,m)&&(g.max=new yc(g.m,g.l,l,m),zh(u,z,n.sb()).y<n.d&&!d(r,g.m,g.l))){if(q)return n=[],r=new yc(g.m,g.l,l,m),r.Sa=r.length,r.action=0,r.xb=g.action,n.push(r),l=new yc(l,m,g.C,g.w),l.Sa=l.length,l.action=0,l.xb=g.xb,n.push(l),c=c.slice(),
c.splice.apply(c,[k,1].concat(ba(n))),e(g),h(c),Sa(Ti,c)==c&&Sa(Ri,c),!1;g.yb.push(r)}}e(g);h(c);Sa(Ri,c)}else if(2==g.action){g.X=g.X.pb;l=g.X.Wb();m=g.X.Vb();if(l==g.m&&m==g.l||l==g.C&&m==g.w)return!1;n=g.X.next;for(r=g.X;0<k;)if(q=c[k-1],u=Dc(q,l,m),1==q.xb&&0<=u||2==q.xb&&0>=u)q=new yc(q.m,q.l,g.C,g.w),q.action=g.action,q.complete=g.complete,q.xb=g.xb,q.X=g.X,q.yb=g.yb,q.max=q,c=c.slice(),c.splice(--k,2,q),Sa(Ti,c),g=q;else break;q=!d(n,g.C,g.w)&&d(r,g.C,g.w);if(g.yb.length){if(zh(r.uc(),r.tc(),
n.sb()).y>n.d||q){l=[];m=g.yb[0];m=new yc(g.m,g.l,m.Wb(),m.Vb());m.Sa=m.length;m.action=0;m.xb=g.action;l.push(m);m=p(g.yb);for(n=m.next();!n.done;n=m.next())n=n.value,n=new yc(n.Wb(),n.Vb(),n.uc(),n.tc()),n.Sa=n.length,n.complete=1,n.action=0,n.xb=g.action,l.push(n);m=g.yb[g.yb.length-1];m=new yc(m.uc(),m.tc(),g.C,g.w);m.Sa=m.length;m.action=0;m.xb=g.xb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(ba(l)));e(g);h(c);Sa(Ti,c)==c&&Sa(Ri,c);return!1}g.yb.push(r)}else if(u=r.uc(),z=r.tc(),0>=Dc(g.max,
l,m)&&(g.max=new yc(g.m,g.l,l,m),zh(u,z,n.sb()).y<n.d&&!d(r,g.m,g.l))){if(q)return n=[],r=new yc(g.m,g.l,l,m),r.Sa=r.length,r.action=0,r.xb=g.action,n.push(r),l=new yc(l,m,g.C,g.w),l.Sa=l.length,l.action=0,l.xb=g.xb,n.push(l),c=c.slice(),c.splice.apply(c,[k,1].concat(ba(n))),e(g),h(c),Sa(Ti,c)==c&&Sa(Ri,c),!1;g.yb.push(r)}e(g);h(c);Sa(Ri,c)}else{l=[];l.cmp=function(x,C){return x.t<C.t?-1:x.t>C.t?1:x.vf<C.vf?-1:x.vf>C.vf?1:x.X.next==C.X?-x.vf:x.X.pb==C.X?x.vf:0};m=p(Ui);for(n=m.next();!n.done;n=m.next())if(n=
n.value,!n.disabled)if(r=zh(g.m,g.l,n.sb()),q=zh(g.C,g.w,n.sb()),q.y==r.y){if(q.y==n.d){var y=z=void 0;u=void 0;if(q.x>r.x)z=Math.max(r.x,n.R),y=Math.min(q.x,n.T),u=1;else if(q.x<r.x)z=Math.max(q.x,n.R),y=Math.min(r.x,n.T),u=-1;else continue;z>=y||(z=Math.round(.5*z+.5*y),Sa(l,{t:(z-r.x)/(q.x-r.x),mh:-1,vf:u,X:n,x:z,y:n.d}))}}else u=q.x<r.x?-1:1,z=(n.d-r.y)/(q.y-r.y),0>z||1<z||(y=Math.round(r.x+(q.x-r.x)*z),q.y<r.y?y<n.R||y>n.T||Sa(l,{t:z,mh:0,vf:u,X:n,x:y,y:n.d}):q.y>r.y&&!(y<n.R)&&(y>n.T||Sa(l,
{t:z,mh:1,vf:u,X:n,x:y,y:n.d})));m=null;for(n=1;n<l.length;n++)if(r=l[n-1],q=l[n],0==r.mh&&1==q.mh&&r.t<q.t){m=r;break}if(!m)return g.complete=1,Sa(Ri,c),!1;l=g.da();l.action=1;l.max=l;l.xb=g.xb;l.X=m.x==m.X.T?m.X:m.X.pb;l.yb=[];n=c.slice();n[k]=l;n.pc=0;Sa(Ti,n)==n&&Sa(Ri,n);l=g.da();l.action=2;l.max=l;l.xb=g.xb;l.X=m.x==m.X.R?m.X.pb:m.X;l.yb=[];c=c.slice();c[k]=l;c.pc=0;Sa(Ti,c)==c&&Sa(Ri,c)}return!1}for(;Wi&&Ri.length;){Si++;Wi--;var b=Ri.shift();if(a(b))return Ri=null,b}if(0==Ri.length)return Ri=
null}
function Yi(a,b,c,d){var e=Ui;Ui=e;Ti=[];Ti.cmp=function(l,m){if(l.length<m.length)return-1;if(l.length>m.length)return 1;for(var n=0;n<l.length;n++){var r=l[n],q=m[n];if(r.m<q.m)return-1;if(r.m>q.m)return 1;if(r.l<q.l)return-1;if(r.l>q.l)return 1;if(r.C<q.C)return-1;if(r.C>q.C)return 1;if(r.w<q.w)return-1;if(r.w>q.w)return 1;if(r.action<q.action)return-1;if(r.action>q.action)return 1}return 0};a=(new E(a,b)).round();c=(new E(c,d)).round();b=null;var h=NaN,g=p(e.Ni);for(d=g.next();!d.done;d=g.next()){d=
d.value;var k=Mi(d,a.x,a.y);k>=h||(h=k,b=d)}a=b.zf(a.x,a.y);b=null;h=NaN;e=p(e.Ni);for(d=e.next();!d.done;d=e.next())d=d.value,g=Mi(d,c.x,c.y),g>=h||(h=g,b=d);c=b.zf(c.x,c.y);Si=0;Ri=[];Ri.cmp=function(l,m){return l.pc<m.pc?-1:1};a=new yc(a.x,a.y,c.x,c.y);a.Sa=a.length;a.action=0;a=[a];a.pc=0;Sa(Ri,a);return Xi()};var hg,Zi,$i,aj,bj=new yc(0,0,1,0),cj=4095/741455.429632,dj=[];dj.cmp=function(a,b){return a.index-b.index};var ej=new ab(function(a,b){return a.Mg<b.Mg?-1:a.Mg>b.Mg?1:a.y<b.y?-1:a.y>b.y?1:a.ba<b.ba?-1:a.ba>b.ba?1:a.ca.name<b.ca.name?-1:a.ca.name>b.ca.name?1:Fe(a.$,b.$)});function fj(a,b){return a.y>b.y?-1:a.y<b.y?1:0}function gj(a,b){a=Ze(a.src.ba).Cl;b=Ze(b.src.ba).Cl;return a-b}function ri(a,b,c,d,e){var h=new ig;h.Mg=a;h.y=b;h.ba=c;h.ca=d;h.$=e;h.he=[];return ej.Ja(h)}var oi=0;
function hj(){if(0==oi){if(Sh>=Uh+2)var a=!1;else{var b=[ji,hi];a=0>Sh?Yh():b[Sh%b.length].call()}return a}if(1==oi){var c=dj.slice();t.ng();for(var d=p(c),e=d.next();!e.done;e=d.next())e.value.za=t.za;var h=p(c);for(e=h.next();!e.done;e=h.next())for(var g=e.value,k=0;4>k;k++){var l=ij(g,k);l&&l.za!=t.za&&(l.za=t.za,Sa(dj,l))}hg=[];oi++;Zi=0;return!0}if(2==oi){var m=dj[Zi];if(m)return jj(m),Zi++,!0;oi++;Zi=0}if(3==oi){t.ng();$i=t.za;var n=dj[Zi];if(n){for(var r=0;4>r;r++){var q=ij(n,r);if(q&&q.za!=
$i){var u=n,z=q,y=[];switch(r){case 0:var x=ef(u.index);var C=x.x+512;for(var A=p(u.ha),D=A.next();!D.done;D=A.next()){var I=D.value;(I.m<=C||I.C<=C)&&y.push(I)}C=x.x-512;var J=p(z.ha);for(D=J.next();!D.done;D=J.next()){var P=D.value;(P.m>=C||P.C>=C)&&y.push(P)}break;case 1:x=ef(u.index);C=x.y+512;var sa=p(u.ha);for(D=sa.next();!D.done;D=sa.next()){var ta=D.value;(ta.l<=C||ta.w<=C)&&y.push(ta)}C=x.y-512;var fa=p(z.ha);for(D=fa.next();!D.done;D=fa.next()){var ha=D.value;(ha.l>=C||ha.w>=C)&&y.push(ha)}break;
case 2:x=ef(z.index);C=x.x+512;var Kb=p(z.ha);for(D=Kb.next();!D.done;D=Kb.next()){var qb=D.value;(qb.m<=C||qb.C<=C)&&y.push(qb)}C=x.x-512;var ec=p(u.ha);for(D=ec.next();!D.done;D=ec.next()){var Bc=D.value;(Bc.m>=C||Bc.C>=C)&&y.push(Bc)}break;case 3:x=ef(z.index);C=x.y+512;var Rb=p(z.ha);for(D=Rb.next();!D.done;D=Rb.next()){var Cc=D.value;(Cc.l<=C||Cc.w<=C)&&y.push(Cc)}C=x.y-512;var Ha=p(u.ha);for(D=Ha.next();!D.done;D=Ha.next()){var Mb=D.value;(Mb.l>=C||Mb.w>=C)&&y.push(Mb)}}Pi(y,!1)}}n.za=$i;Zi++;
return!0}oi++;Zi=0}if(4==oi){var Cf=dj[Zi];if(Cf)return Cf.evaluate(),Zi++,!0;oi++;Zi=0}if(5==oi){var wa=dj[Zi];if(wa){for(var Df=p(wa.ul),Ge=Df.next();!Ge.done;Ge=Df.next())Ge.value.evaluate();Zi++;return!0}oi++;Zi=0}if(6==oi){var Ef=dj[Zi];if(Ef)return kj(Ef),Zi++,!0;oi++;Zi=0}if(7==oi){var sc=dj[Zi];if(sc)return lj(sc),Zi++,!0;oi++;Zi=0}if(8==oi)return gg(),oi++,!0;if(9==oi)return We=hf(),mj.me=new ig,mj.me.$=new Td,mj.me.$.name="creaseShading",mj.me.$.Ga=1,mj.me.$.de=new G(0,0,0,127.5),mj.me.A=
t.c.ta.get("creaseShading"),nj=0,mj.$f=Array($e.elements.length),oj=0,oi++,!0;if(10==oi){if(pj())return!0;oi++;return!0}if(11==oi){if(aj&&0!=t.h%1)return!1;for(;Yf.length&&Yf[0].Zf;)Yf.shift(),Zf++;Xe.length=0;Ye=Zf;for(var Ff=p(Yf),tb=Ff.next();!tb.done;tb=Ff.next()){var Yd=tb.value;if(Yd.na>Uh+1)break;Xe.push(Yd)}var Gf=p(Xe);for(tb=Gf.next();!tb.done;tb=Gf.next())for(var He=tb.value,Zd=0;Zd<He.Cb.length;Zd++)He.Cb[Zd].nd.ba>=Ye||He.Cb.splice(Zd--,1);for(var $d=0;$d<ej.elements.length;$d++){var Hf=
ej.elements[$d];Hf.ba<Zf&&(ej.elements.splice($d--,1),Hf.jd.parent=null,Od(Hf.jd))}var Ie=p(Xe);for(tb=Ie.next();!tb.done;tb=Ie.next()){var ub=tb.value;ub.na<=Th||(ub.Rb.x/=ub.ad,ub.Rb.y/=ub.ad,ub.Rb.z/=ub.ad,ub.Rb.x/=255,ub.Rb.y/=255,ub.Rb.z/=255)}var Tb=p(Xe);for(tb=Tb.next();!tb.done;tb=Tb.next()){var If=tb.value;if(!(If.na<=Th))for(var Cd=p(If),ld=Cd.next();!ld.done;ld=Cd.next())for(var Jf=p(ld.value.wb),Nb=Jf.next();!Nb.done;Nb=Jf.next())Nb.value.create()}vf?uf=!0:yf();Th=Uh+1;for(var Kf=p(t.Pj.elements),
Je=Kf.next();!Je.done;Je=Kf.next())qj(Je.value);for(var Lf=p(ej.elements),Mf=Lf.next();!Mf.done;Mf=Lf.next()){var Xa=Mf.value;if(!Xa.jd){var Cb=Ze(Xa.ba);if(Cb&&!(Cb.na>Th)){var Vc=Xa;Vc.Sb.cmp=jd;for(var Ub=p(Vc.he),eb=Ub.next();!eb.done;eb=Ub.next())for(var Gc=eb.value,ae=0;ae<Gc.length;ae++)Gc[ae]=Sa(Vc.Sb,Gc[ae]);for(var tc=0;tc<Vc.Sb.length;tc++)Vc.Sb[tc].index=tc;var Nf=p(Vc.he);for(eb=Nf.next();!eb.done;eb=Nf.next())for(var Dd=eb.value,gc=0;gc<Dd.length;gc++)Dd[gc]=Dd[gc].index;delete Vc.Sb.cmp;
Xa.compile();delete Xa.he;Xa.jd=new kg(Xa,"worldMesh");isNaN(Xa.facing)||(Xa.jd.facing=Xa.facing);Xa.jd.ia=Cb.ia;Xa.jd.ii=!0;Xa.jd.Ea=["portalLightIndex",Cb.Re,!0,"numPortals",Cb.Cb.length,!0];Xa.Mg?(Xa.jd.y=Xa.y,O(Xa.jd,t.Ef)):O(Xa.jd,t.sl);delete Xa.Mg;delete Xa.y}}}oi++;return!0}if(12==oi){for(var ua=[],Wc=p(Xe),Hc=Wc.next();!Hc.done;Hc=Wc.next())for(var Ke=p(Hc.value),Xc=Ke.next();!Xc.done;Xc=Ke.next())ua=ua.concat(Xc.value);var Le=[],be=[],ce=[],Of=[],Me=p(Xe);for(Hc=Me.next();!Hc.done;Hc=Me.next()){var Pf=
p(Hc.value);for(Xc=Pf.next();!Xc.done;Xc=Pf.next())for(var de=p(Xc.value.wb),Ob=de.next();!Ob.done;Ob=de.next()){var Ed=Ob.value;if(Ed instanceof Ei){if(!Ze(Ed.sa.U.index))continue}else{if(!Ze(Ed.sa.U.index))continue;if(!Ze(Ed.Wa.U.index))continue}Of.push(Ed)}}var Fd=p(Of);for(Ob=Fd.next();!Ob.done;Ob=Fd.next()){var Y=Ob.value;if(Y instanceof Bi){if(!Y.kd){var Pa=new Fh(-40675,40675,-Y.b+40675,Y.b-40675);Y.nb=[];var Ea=new Ni(Pa.D,Pa.s,Pa.v);Ea=Ea.rotate(Y.direction);Ea=Ea.translate(Y.z,Y.x);Ea.source=
Pa;Y.nb.push(Ea);Ea=new yi(Pa.s,Pa.D,Pa.I);Ea=Ea.rotate(Y.direction);Ea=Ea.translate(Y.z,Y.x);Ea.source=Pa;Y.nb.push(Ea);Ea=new zi(Pa.I,Pa.v,Pa.s);Ea=Ea.rotate(Y.direction);Ea=Ea.translate(Y.z,Y.x);Ea.source=Pa;Y.nb.push(Ea);Ea=new Oi(Pa.v,Pa.I,Pa.D);Ea=Ea.rotate(Y.direction);Ea=Ea.translate(Y.z,Y.x);Ea.source=Pa;Y.nb.push(Ea);Pa=Pa.rotate(Y.direction);Pa=Pa.translate(Y.z,Y.x);Pa.tj=Y;be.push(Pa)}}else if(Y instanceof Ci){var md=new Fh(-40675,40675,-Y.b-9375+40675,Y.b+9375-40675);md=md.rotate(Y.direction);
md=md.translate(Y.z,Y.x);ce.push(md)}else if(Y instanceof Ei){var Gd=new Fh(-Y.Nb+40675,Y.Nb-40675,-Y.le-40675,Y.le+40675);Gd=Gd.translate(Y.Ra.D,Y.Ra.s);Gd=Gd.rotate(Y.direction);Le.push(Gd);var Hd=new Fh(-Y.Nb,Y.Nb,-Y.le,Y.le);Hd=Hd.translate(Y.Ra.D,Y.Ra.s);Hd=Hd.rotate(Y.direction);ua=Dh(ua,[Hd])}}for(var uc=[],Yc=0;Yc<ua.length;Yc++)for(var Ne=ua[Yc],Oe=Yc+1;Oe<ua.length;Oe++){var Qf=ua[Oe];if(Ne.platform.U!=Qf.platform.U||25E3<Math.abs(Qf.platform.y-Ne.platform.y)){var Rf=Fi(Ne,Qf);Rf&&uc.push(Rf)}}ua=
Hh(ua,1);ua=ua.concat(uc);ua=Ah(ua,40675,40675);ua=Hh(ua);ua=Ih(ua);ua=ua.concat(Le);ua=ua.concat(ce);for(var ee=[],fe=p(ua),Vb=fe.next();!Vb.done;Vb=fe.next())Lh(Vb.value,ee);var Zc=p(be);for(Vb=Zc.next();!Vb.done;Vb=Zc.next()){var Sf=Vb.value;ee.push(Sf.tj.nb[1],Sf.tj.nb[3])}ua=ua.concat(be);Dh(ee,ua);for(var Pb=Qh(Nh(ee)),ge=0,Tf=p(Pb),$c=Tf.next();!$c.done;$c=Tf.next())for(var he=$c.value,nd=he[he.length-1],Jg=p(he),ie=Jg.next();!ie.done;ie=Jg.next()){var je=ie.value;je.index=ge++;nd.next=je;
je.pb=nd;nd=je}var Uf=[],vc=p(Pb);for($c=vc.next();!$c.done;$c=vc.next()){var hc=$c.value;if(!(3>hc.length))for(var ke=hc[hc.length-2],Wb=hc[hc.length-1],le,Pe=0;Pe<hc.length;Pe++,ke=Wb,Wb=le)if(le=hc[Pe],(ke.sb()+1)%4==Wb.sb()&&(Wb.sb()+1)%4==le.sb()){var Qe=Math.min(ke.T-ke.R,le.T-le.R);if(!(1E5>Qe)){var Ic=Wb.T-Wb.R,Vf=Ic/Qe;if(!(2<=Vf)){var Xb={};Xb.X=Wb;Xb.width=Ic;Xb.depth=Qe;Xb.ratio=Vf;Uf.push(Xb);Wb.Kj=Xb;Wb.pb.Kj&&(Wb.pb.Kj.kl=!0);Wb.next.Kj&&(Xb.kl=!0)}}}}for(var B=[],H=p(Pb),L=H.next();!L.done;L=
H.next())B=B.concat(L.value);Pb=B;Pb.Ni=ua;Pb.tm=Uf;var F=p(be);for(Vb=F.next();!Vb.done;Vb=F.next()){var K=Vb.value.tj;K.zd=[K.nb[1].pb,K.nb[1].next,K.nb[3].pb,K.nb[3].next];K.nb[0].pb=K.zd[0];K.nb[0].next=K.zd[3];K.nb[2].pb=K.zd[2];K.nb[2].next=K.zd[1];Pb.push(K.nb[0]);Pb.push(K.nb[2]);var M=K;M.zd[0]&&M.zd[1]&&M.zd[2]&&M.zd[3]&&(M.zd[0].next=M.nb[1],M.zd[1].pb=M.nb[1],M.zd[2].next=M.nb[3],M.zd[3].pb=M.nb[3],M.nb[0].disabled=!0,M.nb[1].disabled=!1,M.nb[2].disabled=!0,M.nb[3].disabled=!1,M.nb[0].y=
-5E4,M.nb[1].y=0,M.nb[2].y=-5E4,M.nb[3].y=0)}Ui=Pb;oi++;return!0}if(13==oi){for(var ka=t.a,oa=p(Ui.tm),ra=oa.next();!ra.done;ra=oa.next()){var Aa=ra.value,Q=Aa.width;Aa.kl&&(Q-=15E4);for(var S=Math.floor(Q/15E4-1),La=.5*(Q-15E4*(S-1)),la=0;la<S;la++){var xa=Aa.X.tf(La+15E4*la,15E4);xa=new w(xa.y,0,xa.x);var Z=nf(xa,new w(0,-1E8,0),eg);if(Z&&(xa.U=Ze(Z.item.ba),xa.U.Fb.Kb!=t.a.Kb)){xa.y=Z.p.y+1E5;xa.ratio=Aa.ratio;var Ma=xa.U.Fb.Kb.yd;Ma.splice(pb(Ma.length+1),0,xa)}}}ka.yd=void 0;oi=0}return!1}
function rj(a,b){var c=new ab(rd);a=p(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var e=new ab(ad);e.x=d.m;e.y=d.l;e=c.Ja(e);e.add(d);b&&(d=Uc(d),e=new ab(ad),e.x=d.m,e.y=d.l,e=c.Ja(e),e.add(d))}return c}
function sj(a){var b=[];b.bound=new Oc;var c=0,d=a.elements[c],e=d.elements.pop();d.elements.length||a.elements.splice(c,1);if(!e)return null;for(;;){b.push(e);b.bound.Ja(e.C,e.w);if(e.C==b[0].m&&e.w==b[0].l)return b;c=a.contains(new E(e.C,e.w));if(0>c)return null;d=a.elements[c];e=bb(d,Tc(e))-1;0>e&&(e+=d.elements.length);e=d.elements.splice(e,1)[0];d.elements.length||a.elements.splice(c,1)}}
function tj(a){for(var b=[],c=a[a.length-1],d=0;d<a.length;d++){var e=a[d];b.push(Ac(c,e));c=e}a.ij=b;a.Tg=[];a.dk=0;b=p(a.ij);for(c=b.next();!c.done;c=b.next())c=c.value,0>c?(a.dk-=c,a.Tg.push(-c)):a.Tg.push(0)}
function uj(a,b){var c=null;b=p(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.s<=d.bound.s||a.bound.o<=d.bound.o||a.bound.v>=d.bound.v||a.bound.u>=d.bound.u)){if(c){if(d.bound.s<=c.bound.s)continue;if(d.bound.o<=c.bound.o)continue;if(d.bound.v>=c.bound.v)continue;if(d.bound.u>=c.bound.u)continue}0>=Lc(a[0].C,a[0].w,d)||(c=d)}c&&c.tb.push(a)}
function vj(a){if(0==a.tb.length)return a;var b=[a].concat(a.tb),c={};c.pc=Number.NEGATIVE_INFINITY;for(var d=0;d<b.length;d++)for(var e=b[d],h=d+1;h<b.length;h++)for(var g=b[h],k=0;k<e.length;k++)for(var l=(k+1)%e.length,m=0;m<g.length;m++)c=wj(e,k,l,g,m,(m+1)%g.length,c,b);if(0>c.pc)return console.log("could not solve holes"),a.tb=[],a;e=c.Qd[c.pa].hb(c.Qd[c.pa].m,c.Qd[c.pa].l,c.oe[c.d].m,c.oe[c.d].l);d=e.hb(e.C,e.w,e.m,e.l);e.ea=d;d.ea=e;b=[];for(h=0;h<c.pa;h++)b.push(c.Qd[h]);b.push(e);e=c.d;
for(h=0;h<c.oe.length;h++)b.push(c.oe[e]),++e==c.oe.length&&(e=0);b.push(d);for(d=c.pa;d<c.Qd.length;d++)b.push(c.Qd[d]);if(c.Qd==a)return a.tb.splice(a.tb.indexOf(c.oe),1),b.tb=a.tb,tj(b),vj(b);a.tb.splice(a.tb.indexOf(c.Qd),1,b);a.tb.splice(a.tb.indexOf(c.oe),1);tj(b);return vj(a)}
function wj(a,b,c,d,e,h,g,k){function l(q,u){function z(D,I,J){if(I==D.m&&J==D.l||I==D.C&&J==D.w)return!1;I=D.tf(I,J);return 0>=I.x||I.x>=D.length||-256>I.y||256<I.y?!1:!0}var y=Dc(u,q.m,q.l),x=Dc(u,q.C,q.w),C=Dc(q,u.m,u.l),A=Dc(q,u.C,u.w);if(-256>C&&256<A&&(-256>y&&256<x||256<y&&-256>x)||256<C&&-256>A&&(-256>y&&256<x||256<y&&-256>x)||z(q,u.m,u.l)||z(q,u.C,u.w)||z(u,q.m,q.l)||z(u,q.C,q.w))return!0}var m=a[c],n=d[h];m=new yc(m.m,m.l,n.m,n.l);if(0==a.Tg[c]){if(0>=Dc(a[b],m.C,m.w)||0>=Dc(a[c],m.C,m.w))return g}else if(0>=
Dc(a[b],m.C,m.w)&&0>=Dc(a[c],m.C,m.w))return g;if(0==d.Tg[h]){if(0>=Dc(d[e],m.m,m.l)||0>=Dc(d[h],m.m,m.l))return g}else if(0>=Dc(d[e],m.m,m.l)&&0>=Dc(d[h],m.m,m.l))return g;if(k)for(k=p(k),n=k.next();!n.done;n=k.next()){var r=p(n.value);for(n=r.next();!n.done;n=r.next())if(l(m,n.value))return g}else for(k=p(a),n=k.next();!n.done;n=k.next())if(l(m,n.value))return g;k={};k.Qd=a;k.Oa=b;k.pa=c;k.oe=d;k.mh=e;k.d=h;k.X=m;xj(k);return k.pc>g.pc?k:g}
function xj(a){a.pc=4095-a.X.length*cj;var b=Ac(a.Qd[a.Oa],a.X),c=b-a.Qd.ij[a.pa],d=Ac(a.X,a.oe[a.d]),e=d-a.oe.ij[a.d];a.pc+=.5/Math.PI*(a.Qd.Tg[a.pa]-(0>b?-b:0)-(0>c?-c:0)+(a.oe.Tg[a.d]-(0>d?-d:0)-(0>e?-e:0)))*1048575}
function yj(a){if(3>a.length)return[];tj(a);if(0>=a.dk)return[a];for(var b={pc:Number.NEGATIVE_INFINITY},c=a.length-1,d=0;d<a.length;d++){for(var e=d+1,h=e+1;h<a.length;h++)b=wj(a,c,d,a,e,h,b),e=h;c=d}if(0>b.pc)return[a];h=new zj(a[b.pa].m,a[b.pa].l,a[b.d].m,a[b.d].l);c=new zj(a[b.d].m,a[b.d].l,a[b.pa].m,a[b.pa].l);h.ea=c;c.ea=h;d=[];e=[];for(var g=0;g<b.pa;g++)d.push(a[g]);d.push(h);for(h=b.d;h<a.length;h++)d.push(a[h]);for(h=b.pa;h<b.d;h++)e.push(a[h]);e.push(c);return yj(d).concat(yj(e))}
function Aj(a){this.ha=null;this.o=Number.POSITIVE_INFINITY;this.u=Number.NEGATIVE_INFINITY;this.qa=this.floor=null;this.fa=a}Aj.prototype.Ig=function(a,b){if(this.u<=a.o||this.o>=a.u)b.push(this);else{if(this.o<a.o){var c=new Aj(this.fa);c.o=this.o;c.u=a.o;c.floor=this.floor;c.qa=a.qa;b.push(c)}this.u>a.u&&(c=new Aj(this.fa),c.o=a.u,c.u=this.u,c.floor=a.floor,c.qa=this.qa,b.push(c))}};function Hg(a,b,c){this.W=a;this.o=b;this.u=c;this.flags=0}function Ig(a,b){this.ha=a;this.y=b;this.flags=0}
function Kg(a,b){this.ha=a;this.y=b;this.flags=0}Ig.prototype.yh=function(){if(this.ea)return this.ea;this.ea=new Kg(this.ha,this.y);this.ea.flags=this.flags;return this.ea};Kg.prototype.yh=function(){if(this.ea)return this.ea;this.ea=new Ig(this.ha,this.y);this.ea.flags=this.flags;return this.ea};Hg.prototype.yh=function(){if(this.ea)return this.ea;this.ea=new Hg(Uc(this.W),this.o,this.u);this.ea.flags=this.flags;return this.ea};function df(a){this.index=a;this.di=this.za=-2147483648;this.Bl=new db(this);this.pd=new ab(kb);this.vd=[];this.Pi=new cb}function ij(a,b){a=ff(a.index);switch(b){case 0:if(0==a.x)break;return $e.get(gf(a.x-1,a.y));case 1:if(0==a.y)break;return $e.get(gf(a.x,a.y-1));case 2:if(8191==a.x)break;return $e.get(gf(a.x+1,a.y));case 3:if(8191!=a.y)return $e.get(gf(a.x,a.y+1))}return null}
function jj(a){function b(g,k){return g.fa.index<k.fa.index?-1:g.fa.index>k.fa.index?1:0}a.ul=[];a.ha=[];for(var c=p(a.pd.elements),d=c.next();!d.done;d=c.next()){d=p(d.value.ha);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=e.da();Uc(h);e.Wh&&(h.hc=[e]);h.ne=[a.ha];a.ha.push(h)}}Pi(a.ha.slice(),!0);a=p(a.ha);for(e=a.next();!e.done;e=a.next())c=e.value,c.hc&&xb(c.hc,b),c.ea.hc&&xb(c.ea.hc,b)}
df.prototype.evaluate=function(){this.Qj=[];this.Rj=[];for(var a=rj(this.ha,!0),b=[],c=[];a.elements.length;){var d=sj(a);d&&(Kc(d)?c.push(d):(d.tb=[],b.push(d)))}a=p(c);for(c=a.next();!c.done;c=a.next())uj(c.value,b);a=[];b=p(b);for(c=b.next();!c.done;c=b.next())if(d=c.value,0==d.tb.length)a.push(d);else{tj(d);var e=p(d.tb);for(c=e.next();!c.done;c=e.next())tj(c.value);a.push(vj(d))}b=[];a=p(a);for(c=a.next();!c.done;c=a.next())b=b.concat(yj(c.value));a=p(b);for(c=a.next();!c.done;c=a.next())this.ul.push(new Bj(c.value,
this))};
function kj(a){function b(z,y){return z.Fd<y.Fd?-1:z.Fd>y.Fd?1:z.fa.ba<y.fa.ba?-1:z.fa.ba>y.fa.ba?1:Cj(z.Z,y.Z)}function c(z,y){var x=fc(1/60);var C=-1;for(var A=1;A<z.length;A++){var D=Math.abs(Ac(z[A-1].W,z[A].W));D<x&&(x=D,C=A)}if(0>C)y.push.apply(y,ba(z));else{x=z[C-1];A=z[C];D=x.W.hb(x.W.m,x.W.l,A.W.C,A.W.w);var I=Uc(D);x.rd&&(0>x.rd.Fd?x.rd.splice(x.rd.indexOf(x.W),2,D):x.rd.splice(x.rd.indexOf(A.W.ea),2,I));x.md&&(0<x.md.Fd?x.md.splice(x.md.indexOf(x.W),2,D):x.md.splice(x.md.indexOf(A.W.ea),2,
I));x.W=D;z.splice(C,1);c(z,y)}}function d(z){var y=fc(1/60);var x=-1;for(var C=1;C<z.length;C++){var A=Math.abs(Ac(z[C-1],z[C]));A<y&&(y=A,x=C)}if(!(0>x)){y=z[x-1];C=z[x];A=y.hb(y.m,y.l,C.C,C.w);var D=Uc(A);A.gd=y.gd;y.gd.splice(y.gd.indexOf(y),2,A);C.ea&&(D.gd=C.ea.gd,C.ea.gd.splice(C.ea.gd.indexOf(C.ea),2,D));z.splice(x-1,2,A);d(z)}}for(var e=0,h=new ab(function(z,y){return z.y<y.y?-1:z.y>y.y?1:0}),g=p(a.Qj),k=g.next();!k.done;k=g.next()){var l=k.value,m=new ab(b);m.y=l.y;m=h.Ja(m);k=[];k.Fd=l.Fd;
k.fa=l.fa;k.Z=l.Z;k=m.Ja(k);k.push(l)}g=p(h.elements);for(l=g.next();!l.done;l=g.next()){l=l.value;m=p(l.elements);for(k=m.next();!k.done;k=m.next()){var n=k.value,r=new ab(zc),q=p(n);for(k=q.next();!k.done;k=q.next()){var u=p(k.value);for(k=u.next();!k.done;k=u.next())k=k.value,r.remove(Tc(k))||r.push(k)}n.length=0;for(r=rj(r.elements);r.elements.length;){q=sj(r);if(!q)break;q.y=l.y;q.Fd=n.Fd;q.fa=n.fa;q.Z=n.Z;q.index=e++;u=p(q);for(k=u.next();!k.done;k=u.next())k.value.gd=q;n.push(q)}}l.uj=new ab(zc);
m=p(l.elements);for(k=m.next();!k.done;k=m.next())for(n=p(k.value),k=n.next();!k.done;k=n.next())for(r=p(k.value),k=r.next();!k.done;k=r.next())k=k.value,(q=l.uj.remove(Tc(k)))?(k.ea=q,q.ea=k):l.uj.push(k)}e=p(a.Rj);for(g=e.next();!g.done;g=e.next())g=g.value,l=function(z,y){y=h.get({y:y});if(!y)return null;y=y.uj.remove(z);if(!y)return null;y.gd.splice(y.gd.indexOf(y),1,z);return y.gd},m=g.W,k=Uc(m),g.md=l(m,g.o)||l(k,g.o),g.rd=l(m,g.u)||l(k,g.u);g=function(z){var y=[],x=new ab(function(I,J){I=I[0];
J=J[0];if(I.o<J.o)return-1;if(I.o>J.o)return 1;if(I.u<J.u)return-1;if(I.u>J.u)return 1;if(I.md)if(J.md){if(I.md.index<J.md.index)return-1;if(I.md.index>J.md.index)return 1}else return 1;else if(J.md)return-1;if(I.rd)if(J.rd){if(I.rd.index<J.rd.index)return-1;if(I.rd.index>J.rd.index)return 1}else return 1;else if(J.rd)return-1;if(I.length<J.length)return-1;if(I.length>J.length)return 1;for(var P=0;P<I.length;P++){var sa=I[P],ta=J[P];if(sa.o<ta.o)return-1;if(sa.o>ta.o)return 1;if(sa.u<ta.u)return-1;
if(sa.u>ta.u)return 1;sa=Cj(sa.Z,ta.Z);if(0!=sa)return sa}return 0});z=p(z);for(var C=z.next();!C.done;C=z.next()){C=C.value;var A=[C],D=x.Ja(A);D!=A&&D.push(C)}z={};x=p(x.elements);for(C=x.next();!C.done;z={jf:z.jf},C=x.next())for(z.jf=C.value,C={};z.jf.length;)C.bh=function(I,J){return function(P,sa,ta){for(var fa=0;fa<I.jf.length;fa++){var ha=I.jf[fa];if(ha.W.m==ta.C&&ha.W.l==ta.w)return I.jf.splice(fa,1),P.push(ha),ha.W.Bd=P,ha.W.ea.Bd=P,J.bh(P,sa,ha.W);if(ha.W.C==sa.m&&ha.W.w==sa.l)return I.jf.splice(fa,
1),P.unshift(ha),ha.W.Bd=P,ha.W.ea.Bd=P,J.bh(P,ha.W,ta)}return P}}(z,C),A=z.jf.shift(),D=[A],A.W.Bd=D,A.W.ea.Bd=D,y.push(C.bh(D,A.W,A.W)),C={bh:C.bh};return y}(a.Rj);e=function(){for(var z=[],y=p(h.elements),x=y.next();!x.done;x=y.next()){x=p(x.value.elements);for(var C=x.next();!C.done;C=x.next()){C=p(C.value);for(var A=C.next();!A.done;A=C.next()){A=A.value;for(var D=function(fa,ha){return fa.Bd||ha.Bd?!1:fa.ea?ha.ea?fa.ea.gd==ha.ea.gd:!1:ha.ea?!1:!0},I=0,J=A[A.length-1],P=A[0];I<A.length&&(P=A[I],
D(J,P));I++,J=P);if(I==A.length){D=[];J=p(A);for(A=J.next();!A.done;A=J.next())A=A.value,A.Bd=D,A.ea&&(A.ea.Bd=D),D.push(A);z.push(D)}else{A.unshift.apply(A,ba(A.splice(I)));I=[];var sa=null;J=A[0];I.push(sa=[]);sa.push(J);for(var ta=1;ta<A.length;ta++,J=P)P=A[ta],D(J,P)||I.push(sa=[]),sa.push(P);D=p(I);for(A=D.next();!A.done;A=D.next())if(J=A.value,!J[0].Bd){P=p(J);for(A=P.next();!A.done;A=P.next())A=A.value,A.Bd=J,A.ea&&(A.ea.Bd=J);z.push(J)}}}}}return z}();a.ml=[];l=p(g);for(g=l.next();!g.done;g=
l.next())c(g.value,a.ml);a.ll=[];e=p(e);for(g=e.next();!g.done;g=e.next())d(g.value);e=p(h.elements);for(l=e.next();!l.done;l=e.next())for(g=p(l.value.elements),k=g.next();!k.done;k=g.next())for(l=p(k.value),k=l.next();!k.done;k=l.next())m=k.value,m.nl=yj(m),a.ll.push(m)}
function lj(a){function b(r,q,u){var z=[],y=new Ig(q,r.y);y.flags|=Dj;y.ba=r.fa.ba;h.push(y);if((y=Yf[u.ba-Zf])&&!(y.na<=Th||y.na>Uh+1)){for(y=0;y<q.length;y++){var x=new id(q[y].l,r.y,q[y].m);od(x,r.Z.color);pd(x,x.z/4E5,x.x/4E5);x.Qc=32767;z.push(x)}u.he.push(z);hg.push(z);e(Yf[r.fa.ba-Zf],z,r.Z)}}function c(r,q,u){var z=[],y=new Kg(q,r.y);y.flags|=Dj;y.ba=r.fa.ba;h.push(y);if((y=Yf[u.ba-Zf])&&!(y.na<=Th||y.na>Uh+1)){for(y=q.length-1;0<=y;y--){var x=new id(q[y].w,r.y,q[y].C);od(x,r.Z.color);pd(x,
-x.z/4E5,x.x/4E5);x.Qc=-32767;z.push(x)}u.he.push(z);hg.push(z);e(Yf[r.fa.ba-Zf],z,r.Z)}}function d(r,q,u){var z=ri(!1,Infinity,r.fa.ba,q.Z.ca,q.Z.$),y=Yf[z.ba-Zf];if(y&&!(y.na<=Th||y.na>Uh+1)){y=[];var x=r.W.m/4E5+r.W.l/4E5,C=r.W.C/4E5+r.W.w/4E5;var A=new id(r.W.w,q.o,r.W.C);od(A,q.Z.color);pd(A,C,-A.y/4E5);A.Tb=u.x;A.sc=u.y;y.push(A);A=new id(r.W.l,q.o,r.W.m);od(A,q.Z.color);pd(A,x,-A.y/4E5);A.Tb=u.x;A.sc=u.y;y.push(A);A=new id(r.W.l,q.u,r.W.m);od(A,q.Z.color);pd(A,x,-A.y/4E5);A.Tb=u.x;A.sc=u.y;
y.push(A);A=new id(r.W.w,q.u,r.W.C);od(A,q.Z.color);pd(A,C,-A.y/4E5);A.Tb=u.x;A.sc=u.y;y.push(A);z.he.push(y);hg.push(y);e(Yf[r.fa.ba-Zf],y,q.Z)}}function e(r,q,u){var z=0,y=q[0],x=sd(q[1],y,new w);x.scale(1E-5);for(var C=2;C<q.length;C++){var A=sd(q[C],y,new w);A.scale(1E-5);z+=nc(x,A,new w).length();x=A}q=.5*z;z=u.ca;u=u.color;y=(z.ce.r-z.ce.jb)/255;u=new G(u.r*y+z.ce.jb,u.jb*y+z.ce.jb,u.pa*y+z.ce.jb,z.ce.Oa);r.Rb.x+=u.r*q;r.Rb.y+=u.jb*q;r.Rb.z+=u.pa*q;r.ad+=q}a.ua=[];for(var h=a.ua,g=p(a.ll),k=
g.next();!k.done;k=g.next())if(k=k.value,0<k.Fd){for(var l=ri(!0,k.y,k.fa.ba,k.Z.ca,k.Z.$),m=p(k.nl),n=m.next();!n.done;n=m.next())b(k,n.value,l);(k=Yf[k.fa.ba-Zf])&&(k.na>Uh+1||k.cells.push(a))}else if(k.Z)for(l=ri(!1,k.y,k.fa.ba,k.Z.ca,k.Z.$),m=p(k.nl),n=m.next();!n.done;n=m.next())c(k,n.value,l);a=p(a.ml);for(k=a.next();!k.done;k=a.next())for(g=k.value,k=new Hg(g.W,g.o,g.u),k.flags|=Dj,k.ba=g[0].fa.ba,h.push(k),k=new E(g.W.l-g.W.w,g.W.C-g.W.m),k.oa(32767),n=p(g),l=n.next();!l.done;l=n.next())d(g,
l.value,k)}
function Bj(a,b){this.index=Ej++;this.ha=a;this.Tf=b;a=new ab(Fj);for(var c=new E(0,0),d=1/this.ha.length,e=p(this.ha),h=e.next();!h.done;h=e.next())h=h.value,h.Vg=this,c.x+=h.C*d,c.y+=h.w*d;b=p(b.pd.elements);for(d=b.next();!d.done;d=b.next())d=d.value,0>=Lc(c.x,c.y,d.ha)||a.add(d);this.pd=a.elements;Gj(this);this.il=[];a=Number.NEGATIVE_INFINITY;c=p(this.Se);for(b=c.next();!b.done;b=c.next())if(b=b.value,b.fa.add){if(b.o>a){var g=new Aj(b.fa);g.o=b.o;g.u=b.u;g.floor=b.floor;g.qa=b.qa;g.ha=this.ha;
this.il.push(g)}else g.u=b.u,g.qa=b.qa;a=g.u}}var Ej=-2147483648;
function Gj(a){var b=new Aj;b.o=-2147483648;b.u=2147483647;b.fa={};a.Se=[b];b=p(a.pd);for(var c=b.next();!c.done;c=b.next()){c=c.value;var d=new Aj(c.fa);d.o=c.fa.o;d.u=c.fa.u;d.floor=c.fa.floor;d.qa=c.fa.qa;c=[d];d=p(a.Se);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=[];c=p(c);for(var g=c.next();!g.done;g=c.next())g=g.value,g.fa.Fh(e.fa)?h.push(g):g.Ig(e,h);c=h}d=p(c);for(g=d.next();!g.done;g=d.next()){h=g.value;g=[];var k=p(a.Se);for(e=k.next();!e.done;e=k.next())e.value.Ig(h,g);a.Se=
g}a.Se.push.apply(a.Se,ba(c))}xb(a.Se,function(l,m){return l.o<m.o?-1:l.o>m.o?1:0})}
Bj.prototype.evaluate=function(){for(var a=p(this.il),b=a.next();!b.done;b=a.next()){b=b.value;if(b.floor){for(var c=[],d=p(this.ha),e=d.next();!e.done;e=d.next())e=e.value,e=e.da(),c.push(e);c.y=b.o;c.Z=b.floor;c.Fd=1;c.fa=b.fa;this.Tf.Qj.push(c)}if(b.qa){c=[];d=p(this.ha);for(e=d.next();!e.done;e=d.next())e=e.value,e=e.da(),c.push(e);c.y=b.u;c.Z=b.qa;c.Fd=-1;c.fa=b.fa;this.Tf.Qj.push(c)}}a=[];b=[];e=p(this.Se);for(d=e.next();!d.done;d=e.next())c=d.value,(c.fa.add?a:b).push(c);b=p(this.ha);for(e=
b.next();!e.done;e=b.next()){e=e.value;var h=function(q,u){var z=[];q=p(q);for(var y=q.next();!y.done;y=q.next()){var x=y.value,C=p(u);for(y=C.next();!y.done;y=C.next()){var A=y.value,D=[];x.Ja(A.o,A.u,D);var I=p(D);for(y=I.next();!y.done;y=I.next())y.value.fa=A.fa;z.push.apply(z,ba(D))}}return z},g=function(q,u){u=p(u);for(var z=u.next();!z.done;z=u.next()){z=z.value;var y=[];q=p(q);for(var x=q.next();!x.done;x=q.next())x.value.Ig(z.o,z.u,y);q=y}return q};c=function(q){for(var u=q[0],z=1;z<q.length;z++)if(Cj(u.Z,
q[z].Z))u=q[z];else{var y=u.da(u.o,q[z].u);q.splice(--z,2,y)}};d=function(q,u,z){var y=[];if(!q.hc)return y;u=p(u);for(var x=u.next();!x.done;x=u.next()){x=x.value;var C=q.hc;var A=x,D=Fj,I=wb(C,A,D);(C=I==C.length||0!=D.call(null,A,C[I])?null:C[I])&&C.fa.add==z&&y.push(new mh(x.fa.o,x.fa.u,C))}return y};var k=d(e,this.pd,!0),l=[],m=[],n=[];if(e.ea.Vg){l=d(e.ea,e.ea.Vg.pd,!1);var r=p(e.ea.Vg.Se);for(d=r.next();!d.done;d=r.next())d=d.value,(d.fa.add?m:n).push(d)}k=g(k,m);l=g(l,m);k=h(k,a);l=h(l,a);
h=function(q){xb(q,function(D,I){return D.xg.fa.index-I.xg.fa.index});var u=[];q=p(q);for(var z=q.next();!z.done;z=q.next()){z=[z.value];for(var y=p(u),x=y.next();!x.done;x=y.next()){x=x.value;var C=[];z=p(z);for(var A=z.next();!A.done;A=z.next())A=A.value,A.xg.fa.Fh(x.xg.fa)?C.push(A):A.Ig(x.o,x.u,C);z=C}y=p(z);for(A=y.next();!A.done;A=y.next()){C=A.value;A=[];u=p(u);for(x=u.next();!x.done;x=u.next())x.value.Ig(C.o,C.u,A);u=A}u.push.apply(u,ba(z))}return u}(l.concat(k));if(h.length){d=[];g=p(h);
for(h=g.next();!h.done;h=g.next())if(k=h.value,k.xg.Wh){l=[];m=p(k.xg.Wh);for(h=m.next();!h.done;h=m.next())h.value.Ja(k.o,k.u,l);m=p(l);for(h=m.next();!h.done;h=m.next())h.value.fa=k.fa;d.push.apply(d,ba(l))}xb(d,function(q,u){return q.o<u.o?-1:q.o>u.o?1:0});g=void 0;k=Number.NEGATIVE_INFINITY;d=p(d);for(h=d.next();!h.done;h=d.next())h=h.value,h.o>k?(g&&c(g),g=[h],g.W=e.da(),g.fa=h.fa,g.o=h.o,g.u=h.u,this.Tf.Rj.push(g)):(g.push(h),g.u=h.u),k=h.u;g&&c(g)}}};
function zj(a,b,c,d){yc.call(this,a,b,c,d);this.index=zj.index++;this.ea=null}zj.index=-2147483648;zj.prototype=Object.create(yc.prototype);zj.prototype.constructor=zj;zj.prototype.hb=function(a,b,c,d){return new zj(a,b,c,d)};
zj.prototype.replace=function(a){yc.prototype.replace.call(this,a);if(this.Vg)for(var b=0;b<a.length;b++)a[b].Vg=this.Vg;if(this.hc)for(a=p(a),b=a.next();!b.done;b=a.next())if(b=b.value,b.hc)for(var c=p(this.hc),d=c.next();!d.done;d=c.next())d=d.value,0<=b.hc.indexOf(d)||b.hc.push(d);else b.hc=this.hc.slice()};function mh(a,b,c){this.Z=new Hj;this.o=a;this.u=b;this.xg=c;this.fa=null}mh.prototype.da=function(a,b){a=new mh(a,b,this.xg);a.Z=this.Z;a.fa=this.fa;return a};
mh.prototype.Ig=function(a,b,c){this.u<=a||this.o>=b?c.push(this):(this.o<a&&c.push(this.da(this.o,a)),this.u>b&&c.push(this.da(b,this.u)))};mh.prototype.Ja=function(a,b,c){this.u<=a||this.o>=b||(this.u<=b&&this.o>=a?c.push(this):(b=b<this.u?b:this.u,a=a>this.o?a:this.o,c.push(this.da(a,b))))};function Hj(){this.ca=t.c.N.get("concr01");this.$=gh;this.color=fd;this.y=this.x=0}
function Cj(a,b){if(a.ca.name<b.ca.name)return-1;if(a.ca.name>b.ca.name)return 1;var c=Fe(a.$,b.$);return 0!=c?c:a.color.r<b.color.r?-1:a.color.r>b.color.r?1:a.color.jb<b.color.jb?-1:a.color.jb>b.color.jb?1:a.color.pa<b.color.pa?-1:a.color.pa>b.color.pa?1:a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0};function Gi(){this.index=Ij++;this.add=!0;this.ha=null;this.o=Number.POSITIVE_INFINITY;this.u=Number.NEGATIVE_INFINITY;this.floor=new Hj;this.qa=new Hj;this.color=fd;this.Xa=-1;this.pd=[]}var Ij=-2147483648;function Hi(a,b){a.floor&&(a.floor.color=ah);a.qa&&(a.qa.color=dh);a.ha=[];for(var c=[],d=0;d<b.length;d++)c.push(bj.ub(b[d].x,b[d].y));b=c;var e=b[b.length-1];for(c=0;c<b.length;c++)d=b[c],e=new zj(e.x,e.y,d.x,d.y),e.fa=a,e.Wh=a.Gc(),a.ha.push(e),e=d}
Gi.prototype.Gc=function(){var a=new mh(this.o,this.u);a.Z.color=this.color;return[a]};
Gi.prototype.stroke=function(){if(Kc(this.ha)){console.trace();debugger}if(this.u<=this.o){console.trace();debugger}for(var a=[],b=p(this.ha),c=b.next();!c.done;c=b.next()){c=c.value;var d=c.da();d.hc=[c.Wh];a.push(d);Uc(d);delete d.ea.hc}b=new Oc;c=p(a);for(d=c.next();!d.done;d=c.next())d=d.value,b.Ja(d.C,d.w);d=b.s&-524288;c=b.o&-524288;d+=524288;for(c+=524288;d<b.v;){var e=new zj(d,b.o,d,b.u);Uc(e);a.push(e);d+=524288}for(;c<b.u;)d=new zj(b.s,c,b.v,c),Uc(d),a.push(d),c+=524288;a=Pi(a.slice(),!0);
a=rj(a);for(b={};a.elements.length;){a:if(c=function(g){return function(){for(var k=p(g.se),l=k.next();!l.done;l=k.next())if(l.value.hc)return!0;return!1}}(b),b.se=sj(a),b.se&&!Kc(b.se)){if(!c()&&(c=Nc(b.se),0>=Lc(c.x,c.y,this.ha)))break a;d=new Jj(this);e=p(b.se);for(c=e.next();!c.done;c=e.next()){c=c.value;var h=c.da();Uc(h);h.fa=this;c.hc&&(h.Wh=c.hc[0]);d.ha.push(h)}d.stroke(cf(gf(b.se.bound.s+2147483648>>>19,b.se.bound.o+2147483648>>>19)))}b={se:b.se}}};
function pi(a){for(var b=p(a.pd),c=b.next();!c.done;c=b.next())c.value.remove();a.pd.length=0}Gi.prototype.da=function(){var a=new Gi;a.add=this.add;a.o=this.o;a.u=this.u;a.floor=this.floor;a.qa=this.qa;a.color=this.color;a.Xa=this.Xa;return a};Gi.prototype.Fh=function(){return!0};function Jj(a){this.index=Kj++;this.fa=a;this.ha=[];this.Tf=null}var Kj=-2147483648;function Fj(a,b){return a.fa.index<b.fa.index?-1:a.fa.index>b.fa.index?1:0}
Jj.prototype.stroke=function(a){if(Kc(this.ha)){console.trace();debugger}this.fa.pd.push(this);a=this.Tf=a;a.pd.add(this);Sa(dj,a)};Jj.prototype.remove=function(){var a=this.Tf;a.pd.remove(this);if(a.pd.elements.length)Sa(dj,a);else{for(var b=a.Pi.first();null!=b.item;){var c=b.next;fb(b);fb(b.nd);b=c}fb(a.Bl);$e.remove(a);Ta(dj,a)}};var mj={},nj,Lj,oj=-1;mj.$f=[];
function pj(){function a(B,H){if(B.Aa.ga<H.Aa.ga)return-1;if(B.Aa.ga>H.Aa.ga)return 1;if(B.Aa.aa<H.Aa.aa)return-1;if(B.Aa.aa>H.Aa.aa)return 1;B=Dc(H.Aa,B.Aa.m,B.Aa.l);return 0>B?-1:0<B?1:0}function b(B,H){B=B[0];H=H[0];return B.y<H.y?-1:B.y>H.y?1:0}function c(B){if(!(2>B.length)){var H=2.197265625E7;var L=-1;for(var F,K,M=1;M<B.length;M++)F=B[M-1],K=B[M],F=new yc(F.m,F.l,K.C,K.w),K=(F.length>>3)*(Dc(F,K.m,K.l)>>3),K>=H||-2E3>=K||(H=K,L=M);0>L||(F=B[L-1],K=B[L],H=K.hb(F.m,F.l,K.C,K.w),M=K.length/(F.length+
K.length),H.weight=F.weight*(1-M)+K.weight*M,B.splice(L-1,2,H),c(B))}}function d(B){if(!(2>B.length)){var H=2.197265625E7;var L=-1;for(var F=B[B.length-1],K,M=0;M<B.length;M++,F=K)K=B[M],F=new yc(F.m,F.l,K.C,K.w),F=(F.length>>3)*(Dc(F,K.m,K.l)>>3),F>=H||-2E3>=F||(H=F,L=M);0>L||(B.unshift.apply(B,ba(B.splice(L))),F=B.pop(),K=B.shift(),H=K.hb(F.m,F.l,K.C,K.w),L=K.length/(F.length+K.length),H.weight=F.weight*(1-L)+K.weight*L,B.unshift(H),d(B))}}function e(B){function H(Q,S){var La=Rc(Q),la=Rc(S),xa=
-Ac(Q,S)+Math.PI;if(xa<fc(165)){var Z=new E(Q.C,Q.w);Z.round();Z.la=Q.weight;Z.Da=255;F.push(Z);var Ma=new E(Q.C-La.y,Q.w+La.x);Ma.round();Ma.la=Z.la;Ma.Da=0;K.push(Ma);L(Q);var Qa=new E(S.m,S.l);Qa.round();Qa.la=S.weight;Qa.Da=255;F.push(Qa);var Jc=new E(S.m-la.y,S.l+la.x);Jc.round();Jc.la=Qa.la;Jc.Da=0;K.push(Jc);xa<=fc(90)||(Q=new E(Q.C+La.x,Q.w+La.y),Q.round(),Q.la=Z.la,Q.Da=0,M.push([Ma,Z,Q]),S=new E(S.m-la.x,S.l-la.y),S.round(),S.la=Qa.la,S.Da=0,M.push([S,Qa,Jc]))}else Qa=new E(S.m,S.l),Qa.la=
(Q.weight+S.weight)*(1-xa/Math.eh),Qa.Da=255,F.push(Qa),xa<=fc(195)?(la=new E(-La.y-la.y,La.x+la.x),la.scale(5E9/la.Rc()),la.x+=S.m,la.y+=S.l,la.round(),la.la=Qa.la,la.Da=0,K.push(la),L(Q)):(Jc=new E(Q.C-La.y,Q.w+La.x),Jc.round(),Jc.la=Qa.la,Jc.Da=0,K.push(Jc),L(Q),S=new E(S.m-la.y,S.l+la.x),S.round(),S.la=Qa.la,S.Da=0,K.push(S),M.push([Jc,Qa,S]))}function L(Q){if(ka)ka=!1;else{var S=K[K.length-2],La=F[F.length-2],la=F[F.length-1],xa=K[K.length-1];if(La.la!=Q.weight&&la.la!=Q.weight)if(1E5<Q.length){var Z=
Q.ub(5E4,0);Z.round();Z.la=Q.weight;Z.Da=255;var Ma=Q.ub(Q.length-5E4,0);Ma.round();Ma.la=Q.weight;Ma.Da=255;M.push([S,La,Z]);M.push([S,Z,Ma,xa]);M.push([Ma,la,xa])}else if(Z=new E(Q.m+Q.C>>1,Q.l+Q.w>>1),Z.round(),1E5>Q.length){var Qa=5E4/Q.length-.5;Ma=Q.length/1E5;Z.la=.5*(La.la+la.la)*(1-Ma)+Q.weight*Ma;Z.Da=255;Qa=new E(Z.x+(Q.l-Q.w)*Qa,Z.y+(Q.C-Q.m)*Qa);Qa.la=Z.la;Qa.Da=Q.weight*Ma*255;Qa.round();M.push([S,La,Z,Qa]);M.push([S,Qa,xa]);M.push([Qa,Z,la,xa])}else Z.la=Q.weight,Z.Da=255,M.push([S,
La,Z]),M.push([S,Z,xa]),M.push([Z,la,xa]);else La.la!=Q.weight?5E4<Q.length?(Z=Q.ub(5E4,0),Z.round(),Z.la=Q.weight,Z.Da=255,M.push([S,La,Z]),M.push([S,Z,la,xa])):M.push([S,La,la,xa]):la.la!=Q.weight?5E4<Q.length?(Z=Q.ub(Q.length-5E4,0),Z.round(),Z.la=Q.weight,Z.Da=255,M.push([S,La,Z,xa]),M.push([Z,la,xa])):M.push([La,la,xa,S]):M.push([S,La,la,xa])}}var F=[],K=[],M=[],ka=!1;if(B[0].m==B[B.length-1].C&&B[0].l==B[B.length-1].w){ka=!0;H(B[B.length-1],B[0]);M=[];for(var oa=1;oa<B.length;oa++)H(B[oa-1],
B[oa]);H(B[B.length-1],B[0])}else{var ra=B[0],Aa=Rc(ra);oa=new E(ra.m,ra.l);oa.round();oa.la=ra.weight;oa.Da=255;F.push(oa);ra=new E(ra.m-Aa.y,ra.l+Aa.x);ra.round();ra.la=oa.la;ra.Da=0;K.push(ra);for(oa=1;oa<B.length;oa++)H(B[oa-1],B[oa]);B=B[B.length-1];ra=Rc(B);oa=new E(B.C,B.w);oa.round();oa.la=B.weight;oa.Da=255;F.push(oa);ra=new E(B.C-ra.y,B.w+ra.x);ra.round();ra.la=oa.la;ra.Da=0;K.push(ra);L(B)}return M}function h(B){var H=new ab(kb);B=p(B);for(var L=B.next();!L.done;L=B.next())L=L.value,tf(L.bound.D-
5E4,L.bound.s-5E4,L.bound.I+5E4,L.bound.v+5E4,H);return H.elements}function g(B){var H=new ab(zc);B=p(B);for(var L=B.next();!L.done;L=B.next())L=L.value,H.remove(Tc(L))||H.add(L);return H.elements}function k(B){var H=rj(B,!1);B=[];for(var L=[];H.elements.length;){var F=sj(H);F?Kc(F)?L.push(F):(F.tb=[],B.push(F)):console.log("failed circuit")}L=p(L);for(H=L.next();!H.done;H=L.next())uj(H.value,B);L=[];B=p(B);for(H=B.next();!H.done;H=B.next())if(F=H.value,0==F.tb.length)L.push(F);else{tj(F);var K=p(F.tb);
for(H=K.next();!H.done;H=K.next())tj(H.value);L.push(vj(F))}return L}function l(B,H,L){var F=rj(B,!1);B=[];for(var K=new ab(rd);F.elements.length;){a:{var M=F;var ka=[];ka.bound=new Oc;var oa=0,ra=M.elements[oa],Aa=ra.elements.pop();ra.elements.length||M.elements.splice(oa,1);if(Aa)for(ka.bound.Ja(Aa.m,Aa.l);;){ka.push(Aa);ka.bound.Ja(Aa.C,Aa.w);if(Aa.C==ka[0].m&&Aa.w==ka[0].l)break a;oa=M.contains(new E(Aa.C,Aa.w));if(0>oa)break a;ra=M.elements[oa];Aa=bb(ra,Tc(Aa))-1;0>Aa&&(Aa+=ra.elements.length);
Aa=ra.elements.splice(Aa,1)[0];ra.elements.length||M.elements.splice(oa,1)}else ka=null}B.push(ka);if(ka[0].m!=ka[ka.length-1].C||ka[0].l!=ka[ka.length-1].w)M=ka[0],M.Si=ka,ka=new ab(ad),ka.x=M.m,ka.y=M.l,ka=K.Ja(ka),ka.add(M)}for(F=0;F<B.length;F++)if(M=B[F],M[0].m!=M[M.length-1].C||M[0].l!=M[M.length-1].w)ka=M[M.length-1],oa=K.contains(new E(ka.C,ka.w)),0>oa||(ra=K.elements[oa],ka=bb(ra,Tc(ka))-1,0>ka&&(ka+=ra.elements.length),ka=ra.elements.splice(ka,1)[0],ra.elements.length||K.elements.splice(oa,
1),oa=B.indexOf(ka.Si),B.splice(oa,1),oa<F&&F--,M.push.apply(M,ba(ka.Si)),M.bound.Yk(ka.Si.bound),F--);K=p(B);for(F=K.next();!F.done;F=K.next())delete F.value.Si;K=p(B);for(F=K.next();!F.done;F=K.next())F=F.value,F[0].m==F[F.length-1].C&&F[0].l==F[F.length-1].w?d(F):c(F);K=[];B=p(B);for(F=B.next();!F.done;F=B.next())K=K.concat(e(F.value));B=[];K=p(K);for(F=K.next();!F.done;F=K.next())for(F=F.value,M=p(H),oa=M.next();!oa.done;oa=M.next()){a:for(ka=F,oa=p(oa.value),ra=oa.next();!ra.done;ra=oa.next()){ra=
ra.value;Aa=[];for(var Q=ka[ka.length-1],S=Dc(ra,Q.x,Q.y),La=0;La<ka.length;La++){var la=ka[La],xa=Dc(ra,la.x,la.y);if(0<xa){if(0>S){S/=S-xa;var Z=1-S,Ma=new E(Q.x*Z+la.x*S,Q.y*Z+la.y*S);Ma.la=Q.la*Z+la.la*S;Ma.Da=Q.Da*Z+la.Da*S;Aa.push(Ma)}Aa.push(la)}else 0>xa?0<S&&(S/=S-xa,Z=1-S,Ma=new E(Q.x*Z+la.x*S,Q.y*Z+la.y*S),Ma.la=Q.la*Z+la.la*S,Ma.Da=Q.Da*Z+la.Da*S,Aa.push(Ma)):Aa.push(la);Q=la;S=xa}if(3>Aa.length){ka=null;break a}ka=Aa}ka&&B.push(ka)}H=p(B);for(F=H.next();!F.done;F=H.next()){B=F.value;
for(K=0;K<B.length;K++)F=B[K],F.index?B[K]=F.index:(F.index=mj.me.Sb.length,B[K]=F.index,M=L(F),M.la=225*F.la,M.Da=F.Da,mj.me.Sb.push(M));nj+=3*(B.length-2);mj.me.he.push(B)}}var m=$e.elements[oj];if(m){mj.$f[2*oj]=nj;for(var n=new ab(a),r=new ab(b),q=new ab(b),u={},z=p(m.ua),y=z.next();!y.done;u={ed:u.ed,Gd:u.Gd,ej:u.ej},y=z.next())if(u.Gd=y.value,u.Gd instanceof Hg){u.ej=function(B){return function(H){var L=H.Aa,F=Math.atan2(L.aa,L.ga)-Math.atan2(B.ed.aa,B.ed.ga);if(Math.abs(F>Math.PI?F-Math.eh:
F<-Math.PI?F+Math.eh:F)>fc(5))return!1;F=L.weight/(L.weight+1);var K=1-F;F=L.hb(Math.round(L.m*F+B.ed.m*K),Math.round(L.l*F+B.ed.l*K),Math.round(L.C*F+B.ed.C*K),Math.round(L.w*F+B.ed.w*K));if(500<=Math.abs(Dc(F,B.ed.m,B.ed.l))||500<=Math.abs(Dc(F,B.ed.C,B.ed.w))||500<=Math.abs(Dc(F,L.m,L.l))||500<=Math.abs(Dc(F,L.C,L.w)))return!1;H.Aa=F;F.weight=L.weight+1;H.push(B.Gd);return!0}}(u);var x=function(B){return function(){for(var H=p(n.elements),L=H.next();!L.done;L=H.next())if(B.ej(L.value))return!0;
return!1}}(u);u.ed=Tc(u.Gd.W);if(!x()){var C=[u.Gd];C.Aa=u.ed;C.Aa.weight=1;var A=n.Ja(C);A!=C&&A.push(u.Gd)}}else{var D=[u.Gd],I=void 0;u.Gd instanceof Ig?I=r.Ja(D):u.Gd instanceof Kg&&(I=q.Ja(D));I!=D&&I.push(u.Gd)}n=n.elements;r=r.elements;q=q.elements;for(var J={},P=p(n),sa=P.next();!sa.done;J={rc:J.rc,hf:J.hf},sa=P.next()){var ta=sa.value;J.hf=Sc(ta.Aa,-1E3);ta.Aa=ta.Aa.hb(ta.Aa.m+J.hf.x,ta.Aa.l+J.hf.y,ta.Aa.C+J.hf.x,ta.Aa.w+J.hf.y);J.rc=ta.Aa;var fa=[[],[],[],[]],ha=[],Kb=p(ta);for(y=Kb.next();!y.done;y=
Kb.next()){var qb=y.value,ec=function(B,H,L){B.m<H.s||B.m>H.v||B.w>H.u||B.l<H.o?L.push(B):(B.w<H.o&&L.push(B.hb(B.m,H.o,B.C,B.w)),B.l>H.u&&L.push(B.hb(B.m,B.l,B.C,H.u)))},Bc=function(B,H,L){B.l<H.o||B.l>H.u||B.C>H.v||B.m<H.s?L.push(B):(B.C<H.s&&L.push(B.hb(H.s,B.l,B.C,B.w)),B.m>H.v&&L.push(B.hb(B.m,B.l,H.v,B.w)))},Rb=function(B,H,L){B.m<H.s||B.m>H.v||B.l>H.u||B.w<H.o?L.push(B):(B.l<H.o&&L.push(B.hb(B.m,B.l,B.C,H.o)),B.w>H.u&&L.push(B.hb(B.m,H.u,B.C,B.w)))},Cc=function(B,H,L){B.l<H.o||B.l>H.u||B.m>
H.v||B.C<H.s?L.push(B):(B.m<H.s&&L.push(B.hb(B.m,B.l,H.s,B.w)),B.C>H.v&&L.push(B.hb(H.v,B.l,B.C,B.w)))},Ha=new Oc;Ha.s=Math.round(J.rc.getParameter(qb.W.C,qb.W.w));Ha.v=Math.round(J.rc.getParameter(qb.W.m,qb.W.l));Ha.o=qb.o;Ha.u=qb.u;for(var Mb=[[],[],[],[]],Cf=p(fa[0]),wa=Cf.next();!wa.done;wa=Cf.next())Cc(wa.value,Ha,Mb[0]);var Df=p(fa[1]);for(wa=Df.next();!wa.done;wa=Df.next())Rb(wa.value,Ha,Mb[1]);var Ge=p(fa[2]);for(wa=Ge.next();!wa.done;wa=Ge.next())Bc(wa.value,Ha,Mb[2]);var Ef=p(fa[3]);for(wa=
Ef.next();!wa.done;wa=Ef.next())ec(wa.value,Ha,Mb[3]);fa=Mb;for(var sc=[[new yc(Ha.s,Ha.o,Ha.v,Ha.o)],[new yc(Ha.v,Ha.o,Ha.v,Ha.u)],[new yc(Ha.v,Ha.u,Ha.s,Ha.u)],[new yc(Ha.s,Ha.u,Ha.s,Ha.o)]],Ff=p(ha),tb=Ff.next();!tb.done;tb=Ff.next()){var Yd=tb.value;Mb=[[],[],[],[]];var Gf=p(sc[0]);for(wa=Gf.next();!wa.done;wa=Gf.next())Cc(wa.value,Yd,Mb[0]);var He=p(sc[1]);for(wa=He.next();!wa.done;wa=He.next())Rb(wa.value,Yd,Mb[1]);var Zd=p(sc[2]);for(wa=Zd.next();!wa.done;wa=Zd.next())Bc(wa.value,Yd,Mb[2]);
var $d=p(sc[3]);for(wa=$d.next();!wa.done;wa=$d.next())ec(wa.value,Yd,Mb[3]);sc=Mb}fa[0].push.apply(fa[0],ba(sc[0]));fa[1].push.apply(fa[1],ba(sc[1]));fa[2].push.apply(fa[2],ba(sc[2]));fa[3].push.apply(fa[3],ba(sc[3]));ha.push(Ha)}fa=fa[0].concat(fa[1].concat(fa[2].concat(fa[3])));ta.length=0;for(var Hf=k(fa),Ie=[],ub=p(Hf),Tb=ub.next();!Tb.done;Tb=ub.next()){for(var If=Tb.value,Cd=If.slice(),ld=new Oc,Jf=p(If),Nb=Jf.next();!Nb.done;Nb=Jf.next()){var Kf=Nb.value;ld.Ja(Kf.C,Kf.w)}var Je=J.rc.ub(ld.s,
0),Lf=J.rc.ub(ld.v,0);Cd.bound=new Kd;Cd.bound.Ja(Je.y,ld.o,Je.x);Cd.bound.Ja(Lf.y,ld.u,Lf.x);Ie.push.apply(Ie,ba(yj(Cd)));ta.push(Cd)}var Mf=h(ta);fa=[];for(var Xa=p(Mf),Cb=Xa.next();!Cb.done;Cb=Xa.next())for(var Vc=p(Cb.value.ua),Ub=Vc.next();!Ub.done;Ub=Vc.next()){var eb=Ub.value;if(eb instanceof Kg){var Gc=Qc(J.rc,eb.ha);if(Gc){Gc[0]=Math.round(Gc[0]);Gc[1]=Math.round(Gc[1]);var ae=new yc(Gc[1],eb.y,Gc[0],eb.y);ae.weight=1;fa.push(ae)}}else if(eb instanceof Ig){var tc=Qc(J.rc,eb.ha);if(tc){tc[0]=
Math.round(tc[0]);tc[1]=Math.round(tc[1]);var Nf=new yc(tc[0],eb.y,tc[1],eb.y);Nf.weight=1;fa.push(Nf)}}else{var Dd=J.rc,gc=eb.W,ua=Dc(Dd,gc.m,gc.l),Wc=Dc(Dd,gc.C,gc.w),Hc=Dd.getParameter(gc.m,gc.l),Ke=Dd.getParameter(gc.C,gc.w);if(ua<Wc){if(!(-256>Wc||256<ua)){var Xc=ua/(ua-Wc),Le=Math.round(Hc*(1-Xc)+Ke*Xc),be=Math.atan2(-ua,Hc-Le);if(!(be<fc(15))){var ce=new yc(Le,eb.o,Le,eb.u);ce.weight=(180*be/Math.PI-15)/75;1<ce.weight&&(ce.weight=1);fa.push(ce)}}}else if(ua>Wc&&!(-256>ua)&&!(256<Wc)){var Of=
ua/(ua-Wc),Me=Math.round(Hc*(1-Of)+Ke*Of),Pf=Math.atan2(-Wc,Me-Ke);if(!(Pf<fc(15))){var de=new yc(Me,eb.u,Me,eb.o);de.weight=(180*Pf/Math.PI-15)/75;1<de.weight&&(de.weight=1);fa.push(de)}}}}l(fa,Ie,function(B){return function(H){var L=Math.round(H.x);H=Math.round(H.y);L/=B.rc.length;return new id(Math.round(B.rc.l+(B.rc.w-B.rc.l)*L)-B.hf.y,H,Math.round(B.rc.m+(B.rc.C-B.rc.m)*L)-B.hf.x)}}(J))}var Ob={},Ed=p(r);for(sa=Ed.next();!sa.done;Ob={zg:Ob.zg},sa=Ed.next()){var Fd=sa.value;Ob.zg=Fd[0].y;var Y=
[],Pa=p(Fd);for(y=Pa.next();!y.done;y=Pa.next())Y.push.apply(Y,ba(y.value.ha));Fd.length=0;var Ea=k(g(Y)),md=[],Gd=p(Ea);for(Tb=Gd.next();!Tb.done;Tb=Gd.next()){var Hd=Tb.value,uc=Hd.slice(),Yc=new Oc,Ne=p(Hd);for(Nb=Ne.next();!Nb.done;Nb=Ne.next()){var Oe=Nb.value;Yc.Ja(Oe.C,Oe.w)}uc.bound=new Kd;uc.bound.D=Yc.s;uc.bound.I=Yc.v;uc.bound.s=Yc.o;uc.bound.v=Yc.u;uc.bound.o=uc.bound.u=Ob.zg;md.push.apply(md,ba(yj(uc)));Fd.push(uc)}var Qf=h(Fd);Y=[];var Rf=p(Qf);for(Cb=Rf.next();!Cb.done;Cb=Rf.next()){var ee=
p(Cb.value.ua);for(Ub=ee.next();!Ub.done;Ub=ee.next()){var fe=Ub.value;if(fe instanceof Hg&&!(fe.o>Ob.zg||fe.u<=Ob.zg)){var Vb=fe.W.da();Vb.weight=1;Y.push(Vb)}}}l(Y,md,function(B){return function(H){return new id(Math.round(H.y),B.zg,Math.round(H.x))}}(Ob))}var Zc={},Sf=p(q);for(sa=Sf.next();!sa.done;Zc={Ag:Zc.Ag},sa=Sf.next()){var Pb=sa.value;Zc.Ag=Pb[0].y;var ge=[],Tf=p(Pb);for(y=Tf.next();!y.done;y=Tf.next())for(var $c=p(y.value.ha),he=$c.next();!he.done;he=$c.next()){var nd=he.value;ge.push(nd.hb(-nd.C,
nd.w,-nd.m,nd.l))}Pb.length=0;var Jg=k(g(ge)),ie=[],je=p(Jg);for(Tb=je.next();!Tb.done;Tb=je.next()){var Uf=Tb.value,vc=Uf.slice(),hc=new Oc,ke=p(Uf);for(Nb=ke.next();!Nb.done;Nb=ke.next()){var Wb=Nb.value;hc.Ja(Wb.C,Wb.w)}vc.bound=new Kd;vc.bound.D=-hc.v;vc.bound.I=-hc.s;vc.bound.s=hc.o;vc.bound.v=hc.u;vc.bound.o=vc.bound.u=Zc.Ag;ie.push.apply(ie,ba(yj(vc)));Pb.push(vc)}var le=h(Pb);ge=[];var Pe=p(le);for(Cb=Pe.next();!Cb.done;Cb=Pe.next()){var Qe=p(Cb.value.ua);for(Ub=Qe.next();!Ub.done;Ub=Qe.next()){var Ic=
Ub.value;if(Ic instanceof Hg&&!(Ic.o>=Zc.Ag||Ic.u<Zc.Ag)){var Vf=Ic.W.hb(-Ic.W.C,Ic.W.w,-Ic.W.m,Ic.W.l);Vf.weight=1;ge.push(Vf)}}}l(ge,ie,function(B){return function(H){return new id(Math.round(H.y),B.Ag,-Math.round(H.x))}}(Zc))}mj.$f[2*oj+1]=nj-mj.$f[2*oj];oj++;return!0}Lj=mj.me;delete mj.me;for(var Xb=0;Xb<$e.elements.length;Xb++)$e.elements[Xb].zk=mj.$f[2*Xb],$e.elements[Xb].yk=mj.$f[2*Xb+1];delete mj.$f;oj=-1;Lj.compile();return!1};t.Na=function(a){t.Fa.call(this,a);this.f=new w(0,0,0);this.Qa=null;this.Ij=NaN;this.Mb=0;this.ia={za:-2147483648,lb:new w(1,1,1)};this.wk=new cb;this.oh=new Oc};t.Na.prototype=Object.create(t.Fa.prototype);t.Na.prototype.constructor=t.Na;t.Na.index=-2147483648;t.Na.prototype.create=function(){this.index=t.Na.index++;t.Pj.push(this);t.Fa.prototype.create.call(this)};t.Na.prototype.remove=function(){for(var a=this.wk.first();null!=a.item;){var b=a.next;fb(a);fb(a.nd);a=b}t.Pj.remove(this);t.Fa.prototype.remove.call(this)};
t.Na.prototype.step=function(){this.oh.rf(this.f.z,this.f.x)||qj(this);var a=null,b=nf(this.f,new w(0,-1E8,0),eg);b&&(a=Ze(b.item.ba));a?(a!=this.Qa&&(this.Ij=t.h),this.Qa=a,ag(this.f,a,this.ia.lb)):this.Lj();t.Fa.prototype.step.call(this)};t.Na.prototype.Lj=function(){this.remove()};
function qj(a){for(var b=a.f.z-a.Mb,c=a.f.z+a.Mb,d=a.f.x-a.Mb,e=a.f.x+a.Mb,h=a.wk.first(),g=[We];g.length;){var k=g.shift();if(k instanceof jf)b<=k.value&&g.push(k.Uf),c>=k.value&&g.push(k.Vf);else if(k instanceof kf)d<=k.value&&g.push(k.Uf),e>=k.value&&g.push(k.Vf);else{for(;null!=h.item&&!(h.item.index>=k.index);){var l=h.next;fb(h);fb(h.nd);h=l}if(h.item==k)h=h.next;else{l=new db(k);var m=new db(a);l.nd=m;m.nd=l;hb(l,h);gb(k.Pi,m)}}}for(;null!=h.item;)g=h.next,fb(h),fb(h.nd),h=g;a.oh.s=(b>>19<<
19)+a.Mb;a.oh.v=((c>>19)+1<<19)-a.Mb;a.oh.o=(d>>19<<19)+a.Mb;a.oh.u=((e>>19)+1<<19)-a.Mb}t.Pj=new ab(kb);t.Lf=function(a){t.Node.call(this,a);this.mb=1E5};t.Lf.prototype=Object.create(t.Node.prototype);t.Lf.prototype.constructor=t.Lf;t.Lf.color=new G(0,0,0,64);
t.Lf.prototype.$a=function(){var a=new N;a.F=0;a.K=0;a.M=this.mb;a.H=this.mb;a.m11=0;a.m12=0;a.P=0;a.m21=1;a.m22=0;a.G=this.Ia.G;a.m31=this.Ia.m31+500;a.m32=this.Ia.m32;var b=nf(new w(this.Ia.G,this.Ia.m31,this.Ia.m32),new w(0,-1E8,0));b&&(a.m31-=b.d);t.A.J("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,0,4);t.Node.prototype.$a.call(this)};var Mj,Nj=980700/3600*2,Oj=new w(0,-Nj,0),Pj=new ab(kb),Qj=new t.Node("physProcessor");
Qj.step=function(){Mj=new ac;for(var a=p(Pj.elements),b=a.next();!b.done;b=a.next()){b=b.value;b.Le=0;b.t=0;b.Pl=b.rh(b.f,b.ra,b.cb);var c=b.zl();b.input();b.nc&&!b.Bh()&&0<b.Bf&&(b.B.x+=Oj.x,b.B.y+=Oj.y,b.B.z+=Oj.z);b.B.scale(b.wm);var d=sd(b.B,b.Gb,new w(0,0,0));if(0<b.qg){for(var e=b,h=b.Pl,g=new w(0,0,0),k=0;k<h.length;k++){var l=h[k],m=-lc(d,l);if(!(0>=m)){m*=e.qg;var n=lc(e.B,l);l=new w(e.B.x-l.x*n,e.B.y-l.y*n,e.B.z-l.z*n);m/=l.length();1<m&&(m=1);g.x-=l.x*m;g.y-=l.y*m;g.z-=l.z*m}}e.B.add(g)}b.eb.set(.5*
b.Gb.x+.5*b.B.x,.5*b.Gb.y+.5*b.B.y,.5*b.Gb.z+.5*b.B.z);b.eb.y+=c;b.eb.round();b.bound=Rj(b.f,b.ra,b.cb,b.eb)}a=p(Pj.elements);for(b=a.next();!b.done;b=a.next())b.value.handleEvent();for(a=0;!Mj.Fi();){b=Mj.pop();if(10<++a)break;b.target?(c=b.source,e=b.target,c.Le==b.Jk&&e.Le==b.Zl&&(c.Le++,e.Le++,Sj(c,b),Sj(e,b),c.handleEvent(),e.handleEvent(),c.Mj(e),e.Mj(c))):(c=b.source,c.Le==b.Jk&&(c.Le++,Sj(c,b),c.handleEvent()))}a=p(Pj.elements);for(b=a.next();!b.done;b=a.next())b=b.value,b.f.x+=b.eb.x,b.f.y+=
b.eb.y,b.f.z+=b.eb.z,b.Gb.set(b.B.x,b.B.y,b.B.z),b.transform.G=b.f.x,b.transform.m31=b.f.y,b.transform.m32=b.f.z};function Tj(a){t.Na.call(this,a);this.B=new w(0,0,0);this.Gb=new w(0,0,0);this.cb=this.ra=0;this.Bf=1;this.qg=0;this.wm=1;this.pg=0;this.pf=new ab(kb);this.t=this.Le=0;this.eb=new w(0,0,0);this.nc=!0}Tj.prototype=Object.create(t.Na.prototype);f=Tj.prototype;f.constructor=Tj;f.create=function(){t.Na.prototype.create.call(this);Pj.add(this)};
f.remove=function(){t.Na.prototype.remove.call(this);Pj.remove(this)};f.zl=function(){return 0};function Sj(a,b){var c=(b.t-a.t)/(1-a.t);c=new w(a.eb.x*c,a.eb.y*c,a.eb.z*c);c.round();a.f.add(c);a.eb.sub(c);a.t=b.t}
f.handleEvent=function(){for(var a=new w(this.B.x,this.B.y,this.B.z),b=this.rh(this.f,this.ra,this.cb),c=Uj(this),d=0;d<b.length;d++){var e=b[d],h=!1,g=-lc(this.B,e);0<g&&(2E3<g*this.pg&&(h=!0,g*=1+this.pg),this.B.x+=e.x*g,this.B.y+=e.y*g,this.B.z+=e.z*g);g=-lc(this.eb,e);0<g&&(h&&(g*=1+this.pg),this.eb.x+=e.x*g,this.eb.y+=e.y*g,this.eb.z+=e.z*g)}for(d=0;d<c.length;d++){h=function(m,n){var r=lc(m,e),q=lc(n,e);var u=k.Bf;var z=l.Bf;r>=q?u=[r,q]:(u=(u*r+z*q)/(u+z),u=[u+(u-r)*k.pg,u+(u-q)*l.pg]);r=u[0]-
r;q=u[1]-q;m.x+=e.x*r;m.y+=e.y*r;m.z+=e.z*r;n.x+=e.x*q;n.y+=e.y*q;n.z+=e.z*q};e=c[d];var k=this,l=e.source;l.index<k.index||(h(k.eb,l.eb),h(k.B,l.B))}pc(this.eb,b);pc(this.B,b);0<b.length+c.length&&(sd(this.B,a,a),a.oa(1),this.Oi());this.bound=Rj(this.f,this.ra,this.cb,this.eb);if(this.eb.Dj())return null;t.ng();b=p(b);for(a=b.next();!a.done;a=b.next())a.value.source.za=t.za;c=p(c);for(a=c.next();!a.done;a=c.next())a.value.source.za=t.za;0>=this.ra||!(c=this.ni(this.f,this.ra,this.cb,this.eb,!0))||
(c.source=this,c.Jk=this.Le,c.target&&(c.Zl=c.target.Le),Mj.add(c,c.t))};
f.ni=function(a,b,c,d,e){for(var h=this,g=new lf(a,d,b),k=null,l=1,m=g.next();m&&!(m.t>l);){for(var n=function(u){u.za!=t.za&&(u=u.Sf(a,b,c,d))&&(u.d=u.t*d.length(),-1>u.d||(u.t=h.t+u.t*(1-h.t),u.t>=l||(k=u,l=u.t)))},r=p(m.node.ua),q=r.next();!q.done;q=r.next())n(q.value);m=p(m.node.vd);for(q=m.next();!q.done;q=m.next())n(q.value);m=g.next()}if(!e)return k;for(e=0;e<Pj.elements.length;e++)if(g=Pj.elements[e],this!=g&&g.za!=t.za&&!this.pf.get(g)&&!g.pf.get(this)&&Ld(this.bound,g.bound)&&(n=this.t>
g.t?this.t:g.t,q=Vj(this,n),m=Vj(g,n),r=Wj(q.Mi,q.r,q.g,q.Db,m.Mi,m.r,m.g,m.Db)))r.d=r.t*sd(q.Db,m.Db,new w(0,0,0)).length(),-1>r.d||(r.t=n+r.t*(1-n),r.t>=l||(r.target=g,k=r,l=r.t));return k};function Vj(a,b){b=(b-a.t)/(1-a.t);b=new w(a.eb.x*b,a.eb.y*b,a.eb.z*b);b.round();var c={};c.Mi=(new w(a.f.x,a.f.y,a.f.z)).add(b);c.r=a.ra;c.g=a.cb;c.Db=(new w(a.eb.x,a.eb.y,a.eb.z)).sub(b);return c}
f.rh=function(a,b,c){var d=sf(a,b),e=[];t.ng();d=p(d);for(var h=d.next();!h.done;h=d.next()){h=h.value;for(var g=p(h.ua),k=g.next();!k.done;k=g.next())k=k.value,k.za!=t.za&&k.Dg(a,b,c,e);h=p(h.vd);for(k=h.next();!k.done;k=h.next())g=k.value,g.za!=t.za&&g.Dg(a,b,c,e)}return e};
function Uj(a){for(var b=[],c=0;c<Pj.elements.length;c++){var d=Pj.elements[c];if(a!=d&&!a.pf.get(d)&&!d.pf.get(a)){var e=a.f;var h=a.ra,g=a.cb,k=d.f,l=d.ra,m=d.cb;if(0==g&&0==m){e=new w(e.x-k.x,e.y-k.y,e.z-k.z);var n=e.oa(1);e.d=lc(new w(k.x+e.x*l,k.y+e.y*l,k.z+e.z*l),e)+h;n-=h+l;e=2<n||n<-h?null:e}else{if(e.y-g>k.y+m){n=new w(e.x-k.x,e.y-g-(k.y+m),e.z-k.z);var r=n.oa(1);e=new w(k.x+n.x*l,k.y+n.y*l,k.z+n.z*l)}else e.y+g<k.y-m?(n=new w(e.x-k.x,e.y+g-(k.y-m),e.z-k.z),r=n.oa(1),e=new w(k.x+n.x*l,k.y+
n.y*l,k.z+n.z*l)):(n=new w(e.x-k.x,0,e.z-k.z),r=n.oa(1),e=new w(k.x+n.x*l,(e.y*m+k.y*g)/(g+m),k.z+n.z*l));n.d=lc(e,n)+h;r-=h+l;e=2<r||r<-h?null:n}e&&(e.source=d,b.push(e))}}return b}f.Oi=function(){};f.Mj=function(){};f.input=function(){};f.Bh=function(){return!1};function Xj(a){Tj.call(this,a);this.ek=this.pj=this.Wd=this.Ej=this.Qg=this.Tc=0;this.Gi=this.$g=Number.NEGATIVE_INFINITY;this.Ul=this.Gh=!1;this.Me=0;this.ui=18}Xj.prototype=Object.create(Tj.prototype);Xj.prototype.constructor=Xj;
Xj.prototype.ni=function(a,b,c,d,e){for(var h=this,g=new lf(a,d,b),k=null,l=1,m=g.next();m&&!(m.t>l);){for(var n=function(u){u.za==t.za||u.flags&1||!(u=u.Sf(a,b,c,d))||(u.d=u.t*d.length(),-1>u.d||(u.t=h.t+u.t*(1-h.t),u.t>=l||(k=u,l=u.t)))},r=p(m.node.ua),q=r.next();!q.done;q=r.next())n(q.value);m=p(m.node.vd);for(q=m.next();!q.done;q=m.next())n(q.value);m=g.next()}if(!e)return k;for(e=0;e<Pj.elements.length;e++)if(g=Pj.elements[e],this!=g&&g.za!=t.za&&!this.pf.get(g)&&!g.pf.get(this)&&Ld(this.bound,
g.bound)&&(n=this.t>g.t?this.t:g.t,q=Vj(this,n),m=Vj(g,n),r=Wj(q.Mi,q.r,q.g,q.Db,m.Mi,m.r,m.g,m.Db)))r.d=r.t*sd(q.Db,m.Db,new w(0,0,0)).length(),-1>r.d||(r.t=n+r.t*(1-n),r.t>=l||(r.target=g,k=r,l=r.t));return k};
Tj.prototype.rh=function(a,b,c){var d=sf(a,b),e=[];t.ng();d=p(d);for(var h=d.next();!h.done;h=d.next()){h=h.value;for(var g=p(h.ua),k=g.next();!k.done;k=g.next())k=k.value,k.za==t.za||k.flags&1||k.Dg(a,b,c,e);h=p(h.vd);for(k=h.next();!k.done;k=h.next())g=k.value,g.za==t.za||g.flags&1||g.Dg(a,b,c,e)}return e};Xj.sk=function(a){return Math.sqrt(2*a*Nj)};f=Xj.prototype;f.Bh=function(){return this.$g<t.h-1?!1:!0};
f.zl=function(){var a=0,b=this.Ul?this.pj:this.Wd,c=new w(this.f.x,this.f.y-this.cb-.5*this.ra,this.f.z);0>=this.B.y&&(this.Gh=!1);if(this.Bh()){this.Gh=!1;var d=0;t.ng();var e=this.ek;if(e=this.ni(c,.5*this.ra,0,new w(0,-e,0)))d=e.d;c.y+=.5*this.ra;c.y-=d;c=this.rh(c,this.ra,0);e=Number.NEGATIVE_INFINITY;for(var h=0;h<c.length;h++){var g=c[h];g.y>e&&(e=g.y)}0<e&&(this.$g=t.h,a=b-2*(this.ra+this.cb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}else if(!this.Gh){d=0;t.ng();e=this.Wd-2*this.cb-this.ra;if(e=
this.ni(c,.5*this.ra,0,new w(0,-e,0)))d=e.d;c.y+=.5*this.ra;c.y-=d;c=this.rh(c,this.ra,0);e=Number.NEGATIVE_INFINITY;for(h=0;h<c.length;h++)g=c[h],g.y>e&&(e=g.y);0<e&&(this.$g=t.h,a=b-2*(this.ra+this.cb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}return a};f.yj=function(){return new w(0,0,0)};f.Tk=function(){};
f.input=function(){Tj.prototype.input.call(this);this.Tk();var a=this.yj();if(t.a.va==this){var b=this.transform;a.set(b.F*a.x+b.P*a.z,0,b.M*a.x+b.m22*a.z)}b=a.oa(1);0==b&&(this.Me=0);if(this.Bh())0<b&&(this.B.x+=a.x*this.Qg,this.B.z+=a.z*this.Qg,this==t.a.va&&(this.Me>=2*this.ui&&(this.Me=0),0==this.Me?t.c.Y.get("stepConcrete01").play({gain:.5}):this.Me==this.ui&&t.c.Y.get("stepConcrete02").play({gain:.5})),this.Me=this.Pa&&.5<this.Pa.focus?this.Me+.5:this.Me+1),this.B.scale(this.Tc/(this.Tc+this.Qg));
else{b=.25*this.Qg;var c=new E(this.B.z,this.B.x),d=c.length(),e=lc(this.B,a);0>e&&(e=0);e>this.Tc&&(e=this.Tc);b=this.Tc/(this.Tc+b)*(e+b)-e;d>this.Tc&&c.scale(Math.max(0,d-b)/d);c.x+=a.z*b;c.y+=a.x*b;this.B.z=c.x;this.B.x=c.y}this.Gi<t.h||this.$g<t.h-15||(this.B.y=this.Ej,this.Gi=this.$g=Number.NEGATIVE_INFINITY,this.Gh=!0)};var Yj=2,Zj=4,Dj=8;function ak(a){return a&Yj||a&Zj?!1:!0}function of(a){return a&Zj?!1:!0}function eg(a){return a&Dj?!0:!1}function bk(){this.index=ck++;this.t=NaN;this.n=this.p=null;this.Ua=!0}var ck=-2147483648;function qf(a,b){return a.t<b.t?-1:a.t>b.t?1:1==a.Ua&&0==b.Ua?-1:0==a.Ua&&1==b.Ua?1:a.index<b.index?-1:a.index>b.index?1:0}
function Rj(a,b,c,d){var e=new Kd,h=a.z-b;h<e.D&&(e.D=h);h=a.z+b;h>e.I&&(e.I=h);h=a.z+d.z-b;h<e.D&&(e.D=h);h=a.z+d.z+b;h>e.I&&(e.I=h);h=a.x-b;h<e.s&&(e.s=h);h=a.x+b;h>e.v&&(e.v=h);h=a.x+d.x-b;h<e.s&&(e.s=h);h=a.x+d.x+b;h>e.v&&(e.v=h);b+=c;c=a.y-b;c<e.o&&(e.o=c);c=a.y+b;c>e.u&&(e.u=c);c=a.y+d.y-b;c<e.o&&(e.o=c);c=a.y+d.y+b;c>e.u&&(e.u=c);return e}
function dk(a,b,c,d,e){var h=kc(new w(a.x-c.x,0,a.z-c.z),new w(b.x,0,b.z),d);if(!h)return null;d=new bk;d.t=h.Ma;d.p=new w(a.x+b.x*d.t,a.y+b.y*d.t,a.z+b.z*d.t);d.n=new w(d.p.x-c.x,0,d.p.z-c.z);d.n.oa(1);var g=new bk;g.t=h.Kc;g.p=new w(a.x+b.x*g.t,a.y+b.y*g.t,a.z+b.z*g.t);g.n=new w(g.p.x-c.x,0,g.p.z-c.z);g.n.oa(1);if(0<b.y){h=(c.y-e-a.y)/b.y;var k=(c.y+e-a.y)/b.y;h>d.t&&(d=new bk,d.t=h,d.p=new w(a.x+b.x*d.t,c.y-e,a.z+b.z*d.t),d.n=new w(0,-1,0));k<g.t&&(g=new bk,g.t=k,g.p=new w(a.x+b.x*g.t,c.y+e,a.z+
b.z*g.t),g.n=new w(0,1,0))}else if(0>b.y)h=(c.y+e-a.y)/b.y,k=(c.y-e-a.y)/b.y,h>d.t&&(d=new bk,d.t=h,d.p=new w(a.x+b.x*d.t,c.y+e,a.z+b.z*d.t),d.n=new w(0,1,0)),k<g.t&&(g=new bk,g.t=k,g.p=new w(a.x+b.x*g.t,c.y-e,a.z+b.z*g.t),g.n=new w(0,-1,0));else if(a.y>c.y+e||a.y<c.y-e)return null;if(d.t>g.t)return null;d.Ua=!0;g.Ua=!1;return d}
function ek(a,b,c,d,e){var h=new w(c.x,NaN,c.z),g=new w,k=new w,l=new E(c.z-a.z,c.x-a.x);var m=new E(b.z,b.x);var n=m.oa(1);l=qd(l,m);h.y=a.y+b.y/n*l;h.y>c.y+e?(h.y=c.y+e,m=lc((new w(c.x,c.y+e,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):h.y<c.y-e?(h.y=c.y-e,m=lc((new w(c.x,c.y-e,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):g.set(a.x+m.y*l,h.y,a.z+m.x*l);sd(h,g,k);m=k.oa(1);if(m<d){l=n=null;var r=kc(new w(a.x-c.x,0,a.z-c.z),new w(b.x,0,b.z),d);if(r){var q=new bk;q.t=r.Ma;q.p=new w(a.x+
b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t);q.p.y<=c.y+e&&q.p.y>=c.y-e&&(q.n=new w(q.p.x-c.x,0,q.p.z-c.z),q.n.oa(1),q.Ua=!0,n=q);q=new bk;q.t=r.Kc;q.p=new w(a.x+b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t);q.p.y<=c.y+e&&q.p.y>=c.y-e&&(q.n=new w(q.p.x-c.x,0,q.p.z-c.z),q.n.oa(1),q.Ua=!1,l=q)}if(!n||!l)if(r=jc(a,b,new w(c.x,c.y+e,c.z),d))n||(q=new bk,q.t=r.Ma,q.p=new w(a.x+b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t),q.p.y>c.y+e&&(q.n=new w(q.p.x-c.x,q.p.y-(c.y+e),q.p.z-c.z),q.n.oa(1),q.Ua=!0,n=q)),l||(q=new bk,q.t=r.Kc,q.p=new w(a.x+
b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t),q.p.y>c.y+e&&(q.n=new w(q.p.x-c.x,q.p.y-(c.y+e),q.p.z-c.z),q.n.oa(1),q.Ua=!1,l=q));if(!n||!l)if(r=jc(a,b,new w(c.x,c.y-e,c.z),d))n||(q=new bk,q.t=r.Ma,q.p=new w(a.x+b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t),q.p.y<c.y-e&&(q.n=new w(q.p.x-c.x,q.p.y-(c.y-e),q.p.z-c.z),q.n.oa(1),q.Ua=!0,n=q)),l||(q=new bk,q.t=r.Kc,q.p=new w(a.x+b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t),q.p.y<c.y-e&&(q.n=new w(q.p.x-c.x,q.p.y-(c.y-e),q.p.z-c.z),q.n.oa(1),q.Ua=!1,l=q));if(n&&l)return{Ke:n,hd:l}}return{Oh:g,
Ym:h,xe:k,jj:m,Xm:d}}function fk(a,b,c,d){b=jc(d,c,a,b);if(!b)return null;var e=new bk;e.t=-b.Kc;e.p=d;e.n=(new w(a.x-(d.x+c.x*b.Kc),a.y-(d.y+c.y*b.Kc),a.z-(d.z+c.z*b.Kc))).round();e.n.oa(1);e.Ua=!0;return e}
function gk(a,b,c,d,e){var h=lc(c,e);c=new w(c.x-e.x*h,c.y-e.y*h,c.z-e.z*h);d=new w(d.x-a.x,d.y-a.y,d.z-a.z);var g=lc(d,e);d.set(d.x-e.x*g,d.y-e.y*g,d.z-e.z*g);b=kc(d,c,b);if(!b)return null;g=new bk;g.t=-b.Kc;g.p=(new w(a.x+d.x+e.x*h*g.t,a.y+d.y+e.y*h*g.t,a.z+d.z+e.z*h*g.t)).round();g.n=new w(-(d.x+c.x*b.Kc),-(d.y+c.y*b.Kc),-(d.z+c.z*b.Kc));g.n.oa(1);g.Ua=!0;return g}
function Wj(a,b,c,d,e,h,g,k){if(0==c&&0==g)return c=sd(a,e,new w(0,0,0)),g=sd(d,k,new w(0,0,0)),0==g.length()?h=null:(c=kc(c,g,b+h))?(a=new w(a.x+d.x*c.Ma,a.y+d.y*c.Ma,a.z+d.z*c.Ma),e=new w(e.x+k.x*c.Ma,e.y+k.y*c.Ma,e.z+k.z*c.Ma),k=new bk,k.t=c.Ma,b=h/(h+b),d=1-b,k.p=(new w(e.x*d+a.x*b,e.y*d+a.y*b,e.z*d+a.z*b)).round(),k.n=new w((k.p.x-e.x)/h,(k.p.y-e.y)/h,(k.p.z-e.z)/h),h=k):h=null,h;var l=new w(a.x-e.x,0,a.z-e.z),m=new w(d.x-k.x,0,d.z-k.z);if(0==m.length())return null;l=kc(l,m,b+h);if(!l)return null;
var n=new w(a.x+d.x*l.Ma,a.y+d.y*l.Ma,a.z+d.z*l.Ma);m=new w(e.x+k.x*l.Ma,e.y+k.y*l.Ma,e.z+k.z*l.Ma);var r=h/(h+b),q=1-r;n=new w(m.x*q+n.x*r,m.y*q+n.y*r,m.z*q+n.z*r);n.round();if(n.y>m.y+g){l=new w(a.x-e.x,a.y-c-(e.y+g),a.z-e.z);m=sd(d,k,new w(0,0,0));l=kc(l,m,b+h);if(!l)return null;n=new w(a.x+d.x*l.Ma,a.y-c+d.y*l.Ma,a.z+d.z*l.Ma);m=new w(e.x+k.x*l.Ma,e.y+g+k.y*l.Ma,e.z+k.z*l.Ma);e=new bk;e.t=l.Ma;r=h/(h+b);q=1-r;e.p=(new w(m.x*q+n.x*r,(m.y+g)*q+(n.y-c)*r,m.z*q+n.z*r)).round();e.n=new w((e.p.x-m.x)/
h,(e.p.y-(m.y+g))/h,(e.p.z-m.z)/h)}else if(n.y<m.y-g){l=new w(a.x-e.x,a.y+c-(e.y-g),a.z-e.z);m=sd(d,k,new w(0,0,0));l=kc(l,m,b+h);if(!l)return null;n=new w(a.x+d.x*l.Ma,a.y+c+d.y*l.Ma,a.z+d.z*l.Ma);m=new w(e.x+k.x*l.Ma,e.y-g+k.y*l.Ma,e.z+k.z*l.Ma);e=new bk;e.t=l.Ma;r=h/(h+b);q=1-r;e.p=(new w(m.x*q+n.x*r,(m.y-g)*q+(n.y+c)*r,m.z*q+n.z*r)).round();e.n=new w((e.p.x-m.x)/h,(e.p.y-(m.y-g))/h,(e.p.z-m.z)/h)}else e=new bk,e.t=l.Ma,e.p=n,e.n=new w((e.p.x-m.x)/h,0,(e.p.z-m.z)/h);return e}
Ig.prototype.Sf=function(a,b,c,d){c=this.y+c;if(0<=d.y)var e=null;else{var h=new bk;h.t=-(a.y-c-b)/d.y;h.p=(new w(a.x+d.x*h.t,a.y-b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new w(0,1,0);e=h}if(!e)return null;if(0==Ec(e.p.z,e.p.x,this.ha).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ha.length;l++){var m=this.ha[l];e=new w(m.l,c,m.m);var n=new w(m.w-m.l,0,m.C-m.m);n.scale(1/m.length);(e=gk(a,b,d,e,n))?(n=m.getParameter(e.p.z,e.p.x),!(0>n||n>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.ha.length-1)+1:h|3<<l-1}for(l=0;l<this.ha.length;l++)h&1<<l||(m=this.ha[l],(e=fk(a,b,d,new w(m.w,c,m.C)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
Kg.prototype.Sf=function(a,b,c,d){c=this.y-c;if(0>=d.y)var e=null;else{var h=new bk;h.t=-(c-a.y-b)/-d.y;h.p=(new w(a.x+d.x*h.t,a.y+b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new w(0,-1,0);e=h}if(!e)return null;if(0==Ec(e.p.z,e.p.x,this.ha).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ha.length;l++){var m=this.ha[l];e=new w(m.l,c,m.m);var n=new w(m.w-m.l,0,m.C-m.m);n.scale(1/m.length);(e=gk(a,b,d,e,n))?(n=m.getParameter(e.p.z,e.p.x),!(0>n||n>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.ha.length-1)+1:h|3<<l-1}for(l=0;l<this.ha.length;l++)h&1<<l||(m=this.ha[l],(e=fk(a,b,d,new w(m.w,c,m.C)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
Hg.prototype.Sf=function(a,b,c,d){var e=this.W,h=this.o-c;c=this.u+c;if(0<=Dc(e,e.m+d.z,e.l+d.x))var g=null;else{var k=new w(e.C-e.m,0,e.l-e.w);k.scale(1/e.length);var l=lc(d,k),m=new bk;m.t=-(Dc(e,a.z,a.x)-b)/l;m.p=(new w(a.x-k.x*b+d.x*m.t,a.y-k.y*b+d.y*m.t,a.z-k.z*b+d.z*m.t)).round();m.n=k;g=m}if(!g)return null;k=0;var n=e.getParameter(g.p.z,g.p.x);0>n&&(k|=1);g.p.y>c&&(k|=2);n>e.length&&(k|=4);g.p.y<h&&(k|=8);if(0==k)return g.item=this,g;if(0==b)return null;k=0;l=null;m=Number.POSITIVE_INFINITY;
g=new w(e.l,h,e.m);n=new w(0,1,0);g=gk(a,b,d,g,n);g?!(g.p.y<h||g.p.y>c)&&g.t<m&&(m=g.t,l=g):k|=9;g=new w(e.l,c,e.m);n=new w(e.w-e.l,0,e.C-e.m);n.scale(1/e.length);(g=gk(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<m&&(m=g.t,l=g)):k|=3;g=new w(e.w,c,e.C);n=new w(0,-1,0);g=gk(a,b,d,g,n);g?!(g.p.y>c||g.p.y<h)&&g.t<m&&(m=g.t,l=g):k|=6;g=new w(e.w,h,e.C);n=new w(e.l-e.w,0,e.m-e.C);n.scale(1/e.length);(g=gk(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<m&&(m=g.t,
l=g)):k|=18;0==(k&1)&&(g=new w(e.l,c,e.m),(g=fk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&2)&&(g=new w(e.w,c,e.C),(g=fk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&4)&&(g=new w(e.w,h,e.C),(g=fk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&8)&&(g=new w(e.l,h,e.m),(g=fk(a,b,d,g))&&g.t<m&&(l=g));return l?(l.item=this,l):null};
Ig.prototype.Dg=function(a,b,c,d){c=this.y+c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ha.length;k++){e=this.ha[k];var l=Dc(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new w(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new w(e.l,c,e.m):h>e.length?e=new w(e.w,c,e.C):(h/=e.length,g=1-h,e=new w(e.l*g+e.w*h,c,e.m*g+e.C*h),e.round()));c=new w(a.x-e.x,a.y-e.y,a.z-e.z);c.oa(1);c.d=lc(e,c)+b;a=lc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Kg.prototype.Dg=function(a,b,c,d){c=this.y-c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ha.length;k++){e=this.ha[k];var l=Dc(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new w(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new w(e.l,c,e.m):h>e.length?e=new w(e.w,c,e.C):(h/=e.length,g=1-h,e=new w(e.l*g+e.w*h,c,e.m*g+e.C*h),e.round()));c=new w(a.x-e.x,a.y-e.y,a.z-e.z);c.oa(1);c.d=lc(e,c)+b;a=lc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Hg.prototype.Dg=function(a,b,c,d){var e=this.o-c,h=this.u+c;c=null;var g=this.W;var k=g.getParameter(a.z,a.x);if(0>k)k=new w(g.l,a.y,g.m),k.y>h?k.y=h:k.y<e&&(k.y=e);else if(k>g.length)k=new w(g.w,a.y,g.C),k.y>h?k.y=h:k.y<e&&(k.y=e);else{k/=g.length;var l=1-k;k=new w(g.l*l+g.w*k,a.y,g.m*l+g.C*k);k.y>h?k.y=h:k.y<e?k.y=e:(c=new w(g.C-g.m,0,g.l-g.w),c.scale(1/g.length));k.round()}null==c&&(c=new w(a.x-k.x,a.y-k.y,a.z-k.z),c.oa(1));c.d=lc(k,c)+b;a=lc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Ig.prototype.fk=function(a,b){var c=$a(.5*Oj.y,b.y,a.y-this.y);if(!c)return null;var d=new bk;d.t=c.Kc;if(0>d.t)return null;d.p=(new w(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=p(this.ha);for(b=a.next();!b.done;b=a.next())if(0>Dc(b.value,d.p.z,d.p.x))return null;d.item=this;d.n=new w(0,1,0);return d};
Kg.prototype.fk=function(a,b){if(a.y>=this.y)return null;var c=$a(.5*Oj.y,b.y,a.y-this.y);if(!c)return null;var d=new bk;d.t=c.Ma;if(0>d.t)return null;d.p=(new w(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=p(this.ha);for(b=a.next();!b.done;b=a.next())if(0>Dc(b.value,d.p.z,d.p.x))return null;d.item=this;d.n=new w(0,-1,0);return d};
Hg.prototype.fk=function(a,b){var c=Dc(this.W,a.z,a.x);if(0>c)return null;var d=Sc(this.W,1),e=d.x*b.z+d.y*b.x;if(0<=e)return null;var h=new bk;h.t=-c/e;if(0>h.t)return null;h.p=(new w(a.x+b.x*h.t,a.y+.5*(2*b.y+Oj.y*h.t)*h.t,a.z+b.z*h.t)).round();if(h.p.y>=this.u||h.p.y<this.o)return null;a=this.W.getParameter(h.p.z,h.p.x);if(0>a||a>=this.W.length)return null;h.item=this;h.n=new w(d.y,0,d.x);return h};
Ig.prototype.vj=function(a){for(var b=p(this.ha),c=b.next();!c.done;c=b.next())c=c.value,a.Ja(c.w,this.y,c.C)};Kg.prototype.vj=function(a){for(var b=p(this.ha),c=b.next();!c.done;c=b.next())c=c.value,a.Ja(c.w,this.y,c.C)};Hg.prototype.vj=function(a){a.Ja(this.W.l,this.o,this.W.m);a.Ja(this.W.w,this.u,this.W.C)};
function hk(){if(this.ua){for(var a=new Kd,b=p(this.ua),c=b.next();!c.done;c=b.next())c.value.vj(a);this.mi=tf(a.D,a.s,a.I,a.v);a=p(this.mi);for(b=a.next();!b.done;b=a.next())b=b.value,b.vd.push.apply(b.vd,ba(this.ua))}}function ik(){if(this.mi){for(var a=p(this.mi),b=a.next();!b.done;b=a.next())b=b.value,b.vd.splice(b.vd.indexOf(this.ua[0]),this.ua.length);delete this.mi}};function jk(){this.height=this.width=2;this.depth=this.color=null}
jk.prototype.create=function(){this.object=v.createFramebuffer();v.bindFramebuffer(v.FRAMEBUFFER,this.object);var a=this.color=new t.ve;a.width=this.width;a.height=this.height;a.Ei=v.RGBA8;a.format=v.RGBA;a.type=v.UNSIGNED_BYTE;a.xf=v.NEAREST;a.Og=v.NEAREST;a.create();v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,a.object,0);a=this.depth=v.createRenderbuffer();v.bindRenderbuffer(v.RENDERBUFFER,a);v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH24_STENCIL8,this.width,this.height);
v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.RENDERBUFFER,a)};function kk(a){bg.call(this,a);this.Ia=new N;this.pitch=this.heading=0;this.th=112;this.Ld=fc(40);this.Mm=!1;this.Xi=8E3}kk.prototype=Object.create(bg.prototype);kk.prototype.constructor=kk;kk.prototype.create=function(){var a=this.uk=new bg;a.Ia=this.L;O(a,this);a=this.vk=new bg;a.Ia=this.L;O(a,this);return this};
kk.prototype.step=function(){this.th+=R.b;0>this.th&&(this.th=0);this.transform.m32=Math.pow(1.125,this.th);R.d[2]&&(this.heading-=4E6*R.Ec.x,this.pitch+=4E6*R.Ec.y);var a=ic(this.heading),b=ic(this.pitch);yd(this.Ia);this.Ia.rotate(a,b,0);a=this.Ia.Ne();var c=this.Ia.Oe();b=this.Ia.wd();if(R.d[1]){var d=2*Math.tan(this.Ld)*this.transform.m32/t.canvas.height,e=-R.Ec.x*d;d*=R.Ec.y;this.Ia.G+=e*a.x+d*c.x;this.Ia.m31+=e*a.y+d*c.y;this.Ia.m32+=e*a.z+d*c.z}c=new w(0,0,0);Xd.d.KeyW&&--c.z;Xd.d.KeyS&&(c.z+=
1);Xd.d.KeyA&&--c.x;Xd.d.KeyD&&(c.x+=1);if(e=c.length())c.scale(this.transform.m32/(60*e)),this.Ia.G+=c.x*a.x+c.z*b.x,this.Ia.m31+=c.x*a.y+c.z*b.y,this.Ia.m32+=c.x*a.z+c.z*b.z;a=this.uk;yd(a.transform);a.transform.G=-this.Xi;a.transform.rotate(Math.atan(.5*-this.Xi/this.transform.m32),0,0);a.Ld=this.Ld;a=this.vk;yd(a.transform);a.transform.G=this.Xi;a.transform.rotate(Math.atan(.5*this.Xi/this.transform.m32),0,0);a.Ld=this.Ld;bg.prototype.step.call(this);return this};t.Animation=function(){t.Node.call(this);this.length=0;this.ec=NaN;this.qh={}};t.Animation.prototype=Object.create(Node.prototype);f=t.Animation.prototype;f.constructor=t.Animation;f.step=function(){Node.prototype.step.call(this)};f.play=function(){this.ec=t.h};f.key=function(a,b,c){var d=this.qh[a];d||(d=this.qh[a]=new lk);return d.key(b,c)};f.print=function(){console.log("{");console.log("let a = new NG.Animation();");for(var a in this.qh)this.qh.hasOwnProperty(a)&&this.qh[a].print(a);console.log("}")};
t.Animation.S=function(a,b){b.reset();b.translate(a[0],a[1],a[2]);b.rotate(a[3],a[4],a[5]);return b};function lk(){this.keys=new ab(mk)}lk.prototype.key=function(a,b){var c=this.keys.get(a);c||(c=new nk,c.t=a,this.keys.add(c));c.Db=b;return c};lk.prototype.print=function(a){for(var b=0;b<this.keys.elements.length;b++){var c=this.keys.elements[b];console.log("a.key('"+a+"', "+c.t+", "+c.Db+");")}};function nk(){this.Db=this.t=0}
function mk(a,b){return isNaN(a)?a.t<b.t?-1:a.t>b.t?1:0:a<b.t?-1:a>b.t?1:0};function Ji(a,b,c,d,e,h){t.Node.call(this);this.f=new w(a.l,b+112500,a.m);this.ud=-Infinity;this.fh=NaN;this.open=this.state=0;e.na!=h.na&&(this.Mh=Math.max(e.na,h.na));O(this,t.tg);var g=new jg(t.c.wc.get("bayDoor01"));g.transform.G=this.f.x;g.transform.m31=this.f.y;g.transform.m32=this.f.z;g.transform.F=-a.ga;g.transform.M=a.aa;g.transform.P=-a.aa;g.transform.m22=-a.ga;O(g,t.tg);g.create();Pd(g,e.ia);var k=p(g.Hc);for(b=k.next();!b.done;b=k.next())b=b.value,b.ii=!0,b.A=t.c.ta.get("physical"),b.ca=
t.c.N.get("BayDoor01"),b.$=jh,b.Ea=["portalLightIndex",e.Re,!0,"numPortals",e.Cb.length,!0,"color",fd,!1];this.Lh=g;this.yc=c;this.Sd=e;e.fg||(e.fg=[]);e.fg.push(g);c=new jg(t.c.wc.get("bayDoor01"));c.transform.G=this.f.x;c.transform.m31=this.f.y;c.transform.m32=this.f.z;c.transform.F=a.ga;c.transform.M=-a.aa;c.transform.P=a.aa;c.transform.m22=a.ga;O(c,t.tg);c.create();Pd(c,h.ia);e=p(c.Hc);for(b=e.next();!b.done;b=e.next())b=b.value,b.ii=!0,b.A=t.c.ta.get("physical"),b.ca=t.c.N.get("BayDoor01"),b.$=
jh,b.Ea=["portalLightIndex",h.Re,!0,"numPortals",h.Cb.length,!0,"color",fd,!1];this.Kh=c;this.Uc=d;this.Rd=h;h.fg||(h.fg=[]);h.fg.push(c);this.ua=[];h=[new E(-6250,-112500),new E(6250,-112500),new E(6250,112500),new E(-6250,112500)];for(d=0;d<h.length;d++)h[d]=a.ub(h[d].x,h[d].y);a=[];d=h[h.length-1];h=p(h);for(c=h.next();!c.done;c=h.next())c=c.value,a.push(new yc(d.x,d.y,c.x,c.y)),d=c;this.ua.push(new Kg(a,this.f.y-112500));this.ua.push(new Hg(Uc(a[0]),this.f.y-112500,this.f.y+112500),new Hg(Uc(a[2]),
this.f.y-112500,this.f.y+112500));a=p(this.ua);for(d=a.next();!d.done;d=a.next())d=d.value,d.item=this,d.yh();hk.call(this);this.update()}Ji.prototype=Object.create(t.Node.prototype);f=Ji.prototype;f.constructor=Ji;
f.step=function(){if(!(t.h%4)){var a=Infinity,b=0;this.Sd.na<=Th&&this.Sd.na>=Uh&&b++;this.Rd.na<=Th&&this.Rd.na>=Uh&&b++;b||this.remove();for(var c=p(t.a.zc),d=c.next();!d.done;d=c.next())d=d.value,d.fb&&(d=Math.abs(d.f.x-this.f.x)+Math.abs(d.f.y-this.f.y)+Math.abs(d.f.z-this.f.z),d<a&&(a=d));t.a.va&&(c=t.a.va,c=Math.abs(c.f.x-this.f.x)+Math.abs(c.f.y-this.f.y)+Math.abs(c.f.z-this.f.z),c<a&&(a=c));if(0==this.state&&0==this.open)2==b&&5E5>a&&(isNaN(this.Mh)?(this.state=1,this.ud=4*Math.floor(t.h/
4),this.fh=NaN):t.a.qd||(this.state=1,this.ud=4*Math.floor(t.h/4),this.fh=NaN));else if(1==this.state&&1==this.open)if(isNaN(this.Mh))1E6<=a&&(isNaN(this.fh)&&(this.fh=t.h),0<=t.h-this.fh&&(this.state=0,this.ud=t.h));else if(1E6<=a||t.a.ka.Qa.na==this.Mh)this.state=0,this.ud=t.h;a=(t.h-this.ud)/36;if(!(1<a)){0==this.state?(this.open=1-Math.pow(a,2),1==a&&t.a.ka.Qa.na==this.Mh&&(Uh=this.Mh)):1==this.state&&(this.open=Math.pow(a,2));a=p(this.ua);for(b=a.next();!b.done;b=a.next())b.value.ud=t.h;this.update()}}};
f.update=function(){var a=this.yc.o+(this.yc.height-12500)*this.open;this.yc.u=this.Uc.u=this.ua[0].y=this.ua[1].o=this.ua[2].o=a;this.ua[0].ea.y=this.ua[1].ea.o=this.ua[2].ea.o=a;this.Lh.transform.m31=this.Kh.transform.m31=a+112500;this.Lh.Hc[0].Ea[1]=this.Sd.Re;this.Kh.Hc[0].Ea[1]=this.Rd.Re;this.Lh.Hc[0].Ea[4]=this.Sd.Cb.length;this.Kh.Hc[0].Ea[4]=this.Rd.Cb.length;this.Lh.Hc[0].Ea[7]=this.Sd.style.$c;this.Kh.Hc[0].Ea[7]=this.Rd.style.$c};f.$a=function(){t.A.J("clipY",this.f.y+225E3,!1)};
f.remove=function(){this.Lh.remove();this.Kh.remove();ik.call(this);for(var a=p(this.ua),b=a.next();!b.done;b=a.next())b.value.ud=t.h;t.Node.prototype.remove.call(this)};
function Ii(a,b,c,d){t.Fa.call(this);this.f=new w(a.l,b+62500,a.m);this.transform.G=this.f.x;this.transform.m31=this.f.y;this.transform.m32=this.f.z;this.transform.F=-a.ga;this.transform.M=a.aa;this.transform.P=-a.aa;this.transform.m22=-a.ga;this.transform.F*=87500;this.transform.K*=87500;this.transform.M*=87500;this.transform.H*=62500;this.transform.m11*=62500;this.transform.m12*=62500;O(this,t.Ff);this.Sd=c;this.Rd=d;this.ua=[];b=[new E(-625,-87500),new E(625,-87500),new E(625,87500),new E(-625,
87500)];for(c=0;c<b.length;c++)b[c]=a.ub(b[c].x,b[c].y);c=[];d=b[b.length-1];var e=p(b);for(b=e.next();!b.done;b=e.next())b=b.value,c.push(new yc(d.x,d.y,b.x,b.y)),d=b;this.ua.push(new Hg(Uc(c[0]),this.f.y-112500,this.f.y+112500),new Hg(Uc(c[2]),this.f.y-112500,this.f.y+112500));for(b=0;2>b;b++)c=this.ua[b],c.item=this,c.flags|=Yj,c.yh();this.ua[0].ba=this.Sd.index;this.ua[1].ba=this.Rd.index;b=[new E(-9375,-87500),new E(9375,-87500),new E(9375,87500),new E(-9375,87500)];for(c=0;c<b.length;c++)b[c]=
a.ub(b[c].x,b[c].y);a=[];c=b[b.length-1];d=p(b);for(b=d.next();!b.done;b=d.next())b=b.value,a.push(new yc(c.x,c.y,b.x,b.y)),c=b;this.ua.push(new Hg(Uc(a[0]),this.f.y-112500,this.f.y+112500),new Hg(Uc(a[2]),this.f.y-112500,this.f.y+112500));for(a=2;4>a;a++)this.ua[a].flags|=Zj;hk.call(this)}Ii.prototype=Object.create(t.Fa.prototype);Ii.prototype.constructor=Ii;Ii.S=function(a,b){return a.depth-b.depth};Ii.prototype.update=function(){};
Ii.prototype.Vh=function(){return!this.Ya||this.Sd.ia.za<t.h&&this.Rd.ia.za<t.h?!1:!0};Ii.Vc=function(){t.zb(sg);t.ab(t.c.ta.get("physical"));t.Lb(0,t.c.N.get("Window01"));kh.bind();t.rb(1);t.Pb(1);t.A.J("color",fd);t.A.J("architectureLighting",1,!0);t.A.J("lightingFancy",t.Ha.lightingFancy,!0)};
Ii.prototype.$a=function(){t.A.J("modelMatrix",this.L);t.A.J("portalLightIndex",this.Sd.Re,!0);t.A.J("numPortals",this.Sd.Cb.length,!0);t.A.J("ambientLight",this.Sd.ia.lb,!1);v.drawArrays(v.TRIANGLE_FAN,tg(0,1),4);var a=(new N).set(this.L);a.F=-a.F;a.K=-a.K;a.M=-a.M;a.P=-a.P;a.m21=-a.m21;a.m22=-a.m22;t.A.J("modelMatrix",a);t.A.J("portalLightIndex",this.Rd.Re,!0);t.A.J("numPortals",this.Rd.Cb.length,!0);t.A.J("ambientLight",this.Rd.ia.lb,!1);v.drawArrays(v.TRIANGLE_FAN,tg(0,1),4)};
Ii.prototype.remove=function(){ik.call(this);for(var a=p(this.ua),b=a.next();!b.done;b=a.next())b.value.ud=t.h;t.Fa.prototype.remove.call(this)};
function ok(a,b,c){t.Na.call(this,"crate");this.Eb=120;this.f.x=a;this.f.y=b+5E4;this.f.z=c;Id(this.transform,this.f);a=[new w(-5E4,0,-5E4),new w(-5E4,0,5E4),new w(5E4,0,5E4),new w(5E4,0,-5E4)];b=p(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.ub(c,c),c.round();a=[new yc(a[0].z,a[0].x,a[1].z,a[1].x),new yc(a[1].z,a[1].x,a[2].z,a[2].x),new yc(a[2].z,a[2].x,a[3].z,a[3].x),new yc(a[3].z,a[3].x,a[0].z,a[0].x)];this.ua=[];this.ua.push(new Ig(a,this.f.y+5E4),new Kg(a,this.f.y-5E4));a=cd(a);
this.ua.push(new Hg(a[0],this.f.y-5E4,this.f.y+5E4),new Hg(a[1],this.f.y-5E4,this.f.y+5E4),new Hg(a[2],this.f.y-5E4,this.f.y+5E4),new Hg(a[3],this.f.y-5E4,this.f.y+5E4));a=p(this.ua);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;hk.call(this)}ok.prototype=Object.create(t.Na.prototype);f=ok.prototype;f.constructor=ok;
f.create=function(){var a=this.Va=new jg(t.c.wc.get("lootBox"));a.Ia=this.L;O(a,this);a.create();this.Mb=a.src.Mb;Pd(a,this.ia);Qd(a,6E4);t.a.Fg.push(this);pk.push(this);a=p(this.Hj);for(var b=a.next();!b.done;b=a.next())b=b.value,b.Ib&&(t.a.ld[b.Ib.lc]+=b.wa);t.Na.prototype.create.call(this)};
f.step=function(){if(t.a.va){var a=sd(t.a.va.f,this.f,new w(0,0,0));a.y=0;a.oa(1);this.transform.F=a.z;this.transform.M=-a.x;this.transform.P=a.x;this.transform.m22=a.z;this.transform.rotate(fc(-15),0,0)}10==t.h-this.Yf&&this.lh();t.h==this.Ye+4?(this.Va.A=t.c.ta.get("flash"),this.Va.$=t.c.Jb.get("flashWhite")):t.h==this.Ye+6?this.Va.$=t.c.Jb.get("flashRed"):t.h==this.Ye+8&&(delete this.Va.$,delete this.Va.A);t.Na.prototype.step.call(this)};
f.Xf=function(a){isNaN(this.Yf)&&(this.Ye=t.h,this.Eb-=a,0>=this.Eb&&(this.Yf=t.h))};f.lh=function(){for(var a=p(this.Hj),b=a.next();!b.done;b=a.next())b=b.value,b=new W(b),b.f.set(this.f.x,this.f.y,this.f.z),b.f.z+=5E4*(ob(nb)-.5),b.f.x+=5E4*(ob(nb)-.5),b.B.set(6E3*(ob(nb)-.5),9E3*(ob(nb)+1),6E3*(ob(nb)-.5)),O(b,t.Ui),b.create();t.c.Y.get("hit02").play({gain:1});this.remove()};
f.remove=function(){t.Na.prototype.remove.call(this);this.Va.remove();t.a.Fg.splice(t.a.Fg.indexOf(this),1);qk.call(this);if(isNaN(this.Yf))for(var a=p(this.Hj),b=a.next();!b.done;b=a.next())b=b.value,b.Ib&&(t.a.ld[b.Ib.lc]-=b.wa);this.Cd.Ng=null;this.Cd.Hg=t.h;this.Cd=null;ik.call(this);a=p(this.ua);for(b=a.next();!b.done;b=a.next())b.value.ud=t.h};
function rk(a,b,c){t.Na.call(this,"barrel");this.Eb=120;this.Ob=5E5;this.f.x=a;this.f.y=b+65E3;this.f.z=c;Id(this.transform,this.f);a=[new w(-5E4,0,-5E4),new w(-5E4,0,5E4),new w(5E4,0,5E4),new w(5E4,0,-5E4)];b=p(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.ub(c,c),c.round();a=[new yc(a[0].z,a[0].x,a[1].z,a[1].x),new yc(a[1].z,a[1].x,a[2].z,a[2].x),new yc(a[2].z,a[2].x,a[3].z,a[3].x),new yc(a[3].z,a[3].x,a[0].z,a[0].x)];this.ua=[];this.ua.push(new Ig(a,this.f.y+5E4),new Kg(a,this.f.y-
5E4));a=cd(a);this.ua.push(new Hg(a[0],this.f.y-5E4,this.f.y+5E4),new Hg(a[1],this.f.y-5E4,this.f.y+5E4),new Hg(a[2],this.f.y-5E4,this.f.y+5E4),new Hg(a[3],this.f.y-5E4,this.f.y+5E4));a=p(this.ua);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;hk.call(this)}rk.prototype=Object.create(t.Na.prototype);f=rk.prototype;f.constructor=rk;
f.create=function(){var a=this.Va=new jg(t.c.wc.get("nitroBarrel"));a.Ia=this.L;O(a,this);a.create();this.Mb=a.src.Mb;Pd(a,this.ia);Qd(a,6E4);t.a.Cg.push(this);pk.push(this);t.Na.prototype.create.call(this)};
f.step=function(){if(isNaN(this.Yf)){if(t.a.va){var a=sd(t.a.va.f,this.f,new w(0,0,0));a.y=0;a.oa(1);this.transform.F=a.z;this.transform.M=-a.x;this.transform.P=a.x;this.transform.m22=a.z;this.transform.rotate(fc(15),0,0)}a=1+.25*Math.sin(t.h*Math.PI/3)*(1-this.Eb/120);this.Eb=Math.min(this.Eb+2,120);yd(this.Va.transform);this.Va.transform.scale(a,a,a);t.h==this.Ye+4?(this.Va.A=t.c.ta.get("flash"),this.Va.$=t.c.Jb.get("flashWhite")):t.h==this.Ye+6?this.Va.$=t.c.Jb.get("flashRed"):t.h==this.Ye+8&&
(delete this.Va.$,delete this.Va.A);t.Na.prototype.step.call(this)}else{a=t.h-this.Yf;var b=1+1/12*a;yd(this.Va.transform);this.Va.transform.scale(b,b,b);6==a&&this.lh()}};f.Xf=function(a){isNaN(this.Yf)&&(this.Ye=t.h,this.Eb-=a,0>=this.Eb&&(this.Yf=t.h))};
f.lh=function(){function a(e){var h=sd(e.f,b.f,new w),g=h.Rc();nf(b.f,h,eg)||(h=b.Ob*b.Ob/g*360,1<=h&&e.Xf(h))}var b=this;t.c.Y.get("explode01").play({gain:1});if(t.a.va){var c=t.a.va,d=sd(c.f,this.f,new w);d=this.Ob*this.Ob/d.Rc();d=Math.min(5,d);c.Ca+=fc(5)*d}d=p(t.a.Cg);for(c=d.next();!c.done;c=d.next())a(c.value);d=p(t.a.Fg);for(c=d.next();!c.done;c=d.next())a(c.value);d=p(t.a.zc);for(c=d.next();!c.done;c=d.next())a(c.value);this.Qa&&(c=new sk(1E5,this.Qa),c.transform.G=this.f.x,c.transform.m31=
this.f.y,c.transform.m32=this.f.z,O(c,t.Td),c.create());this.remove()};f.remove=function(){t.Na.prototype.remove.call(this);this.Va.remove();t.a.Cg.splice(t.a.Cg.indexOf(this),1);qk.call(this);ik.call(this);for(var a=p(this.ua),b=a.next();!b.done;b=a.next())b.value.ud=t.h};function tk(a){t.Node.call(this,"GunManager "+a.name);this.ja=a;this.fc=[];this.O=null;this.action="ready";this.V=NaN;this.focus=0;this.ac=!1;this.Od=this.ge=null;this.Lc=this.xd=this.Zd=this.we=0;this.Ta=null;this.Je=this.Ie=0;this.$e=[];this.Ze=0}tk.prototype=Object.create(t.Node.prototype);f=tk.prototype;f.constructor=tk;
f.create=function(){var a=this.Rg=new t.Fa("muzzleFlare");pg.call(a);a.$a=rg;a.A=t.c.ta.get("image");a.ca=t.c.N.get("muzzleFlare01");a.$=new Td;a.$.Ga=1;a.color=new G(255,255,255,0);a.mb=12500;a.Ya=0;a.Ia=this.ja.Ud.L;O(a,t.Te)};
f.step=function(){t.h==this.cm+1&&(this.Jg.gb.x-=this.Qk,this.Jg.gb.y-=this.Qk,this.Jg.gb.z-=this.Qk,this.cm=NaN,this.Jg=null);if(this.O){var a=this.ja;a.gh=null;uk(a.Oc.L);var b=a.Pa.O.Rh(a.Oc.L);b&&(a.gh=b)}--this.Ze;0>this.Ze&&(this.Ze=0);a=p(this.fc);b=a.next();a:for(;!b.done;b=a.next())if(b=b.value,!(b instanceof vk)||b.Za){var c=b.constructor.lc+"MouseButton";if(b==this.O){if(R.p[t.Ba[c]]&&(this.xd=1),R.r[t.Ba[c]]&&(this.xd=0),this.Od&&Xd.p[t.Ba[b.constructor.lc+"Key"]]){this.Od=this.ge=null;
this.xd=0;break a}}else{if(R.p[t.Ba[c]]){this.ge=b;this.Od=c;this.xd=1;break a}if(Xd.p[t.Ba[b.constructor.lc+"Key"]]){this.ge=b;this.Od=null;this.xd=0;break a}}}R.r[t.Ba[this.Od]]&&(this.xd=0);if(Xd.p[t.Ba.GunFireKey]||R.p[t.Ba.GunFireMouseButton])this.Zd=1;if(Xd.r[t.Ba.GunFireKey]||R.r[t.Ba.GunFireMouseButton])this.Zd=0;if(Xd.p[t.Ba.GunActionKey]||R.p[t.Ba.GunActionMouseButton])this.we=1;if(Xd.r[t.Ba.GunActionKey]||R.r[t.Ba.GunActionMouseButton])this.we=0;this.we||(this.focus-=1/6,0>this.focus&&
(this.focus=0));if(Xd.p[t.Ba.ReloadKey]||R.p[t.Ba.ReloadMouseButton])this.Lc=1;this.O?this.O[this.action].call(this):wk(this)};
f.$a=function(){if(this.Ta){v.enable(v.SCISSOR_TEST);t.qc.fd.J("viewMatrix",Jd);t.qc.fd.upload();t.$b(0);t.Pb(0);t.rb(2);t.zb(sg);t.ab(t.c.ta.get("physicalCardThreshold"));t.A.J("color",fd);t.A.J("ambientLight",this.ja.ia.lb,!1);var a=this.O.constructor.ci;t.Lb(0,a);var b=Math.round(a.width/2-this.Ta.x+this.Ta.i+this.Ie),c=Math.round(a.height/2-this.Ta.y+this.Ta.j+this.Je);v.scissor(this.Ta.i+Math.round(this.Ie),-this.Ta.j-Math.round(this.Je)+t.canvas.height-this.Ta.g,this.Ta.b,this.Ta.g);var d=new N;
d.F=a.width/t.canvas.width;d.m11=-a.height/t.canvas.height;d.G=-1+2*b/t.canvas.width;d.m31=1-2*c/t.canvas.height;t.A.J("modelMatrix",d);v.drawArrays(v.TRIANGLE_FAN,0,4);v.disable(v.SCISSOR_TEST)}};function wk(a){if(!a.ge)return!1;a.Ta=null;a.focus=0;a.Lc=0;a.Ze=0;a.ac=!1;a.pl=a.O;a.O=a.ge;t.a.ff();a.action="equip";a.V=t.h+1;a.ge=null;return!0}f.Xb=function(){var a=400*this.ja.Qe;a*=1-2/3*this.focus;this.Ie=this.ja.Bi*a;this.Je=this.ja.Xb*a};
tk.Hb=function(a,b,c,d,e,h){var g=new N;b*=1E5;c*=1E5;a*=1E5;g.rotate(fc(h),fc(e),fc(d));g.scale(1,1,1);g.translate(b,c,a);d=g;e=new N;e.F=d.m22;e.K=d.P;e.M=d.m21;e.H=d.M;e.m11=d.F;e.m12=d.K;e.P=d.m12;e.m21=d.H;e.m22=d.m11;e.G=d.m32;e.m31=d.G;e.m32=d.m31;d=e;e=new N;e.F=d.F;e.K=d.K;e.M=d.M;e.H=d.P;e.m11=d.m21;e.m12=d.m22;e.P=-d.H;e.m21=-d.m11;e.m22=-d.m12;e.G=d.G;e.m31=d.m32;e.m32=-d.m31;return e};tk.prototype.ic=function(a){this.O instanceof xk||this.O.ic(a)};
function yk(a){this.Gj=a;this.actions={};this.Dc=this.ib=this.Za=0;this.Rf=this.Qf=-1;this.wj=2/3;this.Nf=this.oc=0;this.Ob=1E8;this.jh=this.Pg=0}function zk(a){return a.Dc+a.ib+a.Za}yk.prototype.dj=function(){return!1};yk.prototype.If=function(){return!1};
function uk(a){var b=new w(a.G,a.m31,a.m32);a=new w(-a.P,-a.m21,-a.m22);for(var c=this.Ob,d=p(t.a.zc),e=d.next();!e.done;e=d.next()){e=e.value;var h=ek(b,a,e.f,e.ra,e.cb);if(h.Ke){h=h.Ke;if(0>h.t)continue;if(h.t>=c)continue;h=sd(h.p,b,new w)}else{var g=h.Oh.da(),k=h.jj-e.ra;g.x+=h.xe.x*k;g.y+=h.xe.y*k;g.z+=h.xe.z*k;h=sd(g,b,new w);if(0>=lc(h,a))continue}nf(b,h,ak)||(e.Ki=t.h)}}
function Ak(a){var b=new w(a.G,a.m31,a.m32);a=new w(-a.P,-a.m21,-a.m22);var c=this.Ob,d=[];d.cmp=function(n,r){return n.hg>r.hg?-1:1};for(var e=p(t.a.zc),h=e.next();!h.done;h=e.next())if(h=h.value,h.fb||!(t.h>h.V)){var g=ek(b,a,h.f,h.ra-this.jh,h.cb);if(g.Ke){var k=g.Ke;0>k.t||k.t>=c||(k.p.hg=c-k.t,k.p.item=h,Sa(d,k.p))}else{k=g.Oh.da();var l=g.jj-(h.ra-this.jh);k.x+=g.xe.x*l;k.y+=g.xe.y*l;k.z+=g.xe.z*l;l=sd(g.Oh,b,new w);g=l.oa(1);if(!(g>this.Ob)){var m=sd(k,b,new w);0>=lc(m,a)||(m.normalize(),l=
lc(l,m),m=this.Pg,5E5<g&&(m=Math.atan(5E5*Math.tan(m)/g)),Math.acos(l)>=m||(k.hg=l-1,k.item=h,Sa(d,k)))}}}a=p(d);for(c=a.next();!c.done;c=a.next())if(c=c.value,!nf(b,sd(c,b,new w)))return c;return null}
function Bk(a,b,c){function d(m){m=new Ck(m);m.transform.G=a.p.x;m.transform.m31=a.p.y;m.transform.m32=a.p.z;O(m,t.Td);m.create();m.step()}function e(){var m=new Dk;m.Hi=120*(ob(nb)+.5);m.mb=2E4;m.transform.G=a.p.x;m.transform.m31=a.p.y;m.transform.m32=a.p.z;m.B.x=a.n.x;m.B.y=a.n.y;m.B.z=a.n.z;m.B.scale(2E4*ob(nb)+1E4);O(m,t.Td);m.create();m.step()}if(a.item instanceof X){var h=new N,g=new w,k=new w,l=a.Db.da();mc(l,g,k);h.Ue(g);h.Ve(k);h.We(l);Id(h,a.p);Ek(a.item,h,c);O(new Fk,t.zm);a.item.Xf(b)}else a.item instanceof
rk?(d(31250),e(),a.item.Xf(b)):a.item instanceof ok?(d(31250),e(),a.item.Xf(b)):(d(12500),e(),Gg(t.a.Bk,new w(2343.75*Math.round(a.p.x/2343.75),2343.75*Math.round(a.p.y/2343.75),2343.75*Math.round(a.p.z/2343.75)),a.n,Math.PI,18750,pb(16),16))}yk.prototype.sg=function(){var a=this.Rf-this.ib;a=Math.min(a,this.Za);return a*this.pe-this.oc};yk.prototype.ic=function(a){this.oc+=Math.min(a,this.sg());a=Math.floor(this.oc/this.pe);this.ib+=a;this.Za-=a;t.a.ff();this.oc-=a*this.pe};
function Gk(a){yk.call(this,a);this.Qf=360;this.Rf=30;this.ib=0;this.Za=2*this.Rf;this.wj=1;this.Pg=fc(4);this.jh=8E3;this.pe=5.2;a.fc.push(this)}Gk.prototype=Object.create(yk.prototype);Gk.prototype.constructor=Gk;
Gk.Ka={CarbineEquip02:{i:291,j:265,x:1204,y:1548,b:189,g:31},CarbineEquip03:{i:90,j:191,x:814,y:1548,b:390,g:105},CarbineEquip04:{i:126,j:152,x:0,y:1548,b:354,g:144},CarbineEquip05:{i:46,j:96,x:1012,y:255,b:434,g:200},CarbineEquip06:{i:92,j:68,x:1281,y:0,b:356,g:228},CarbineEquip07:{i:106,j:65,x:960,y:0,b:321,g:231},CarbineEquip08:{i:129,j:76,x:0,y:255,b:282,g:220},CarbineEquip09:{i:145,j:91,x:282,y:255,b:250,g:205},CarbineEquip10:{i:163,j:109,x:1231,y:670,b:220,g:187},CarbineEquip11:{i:184,j:125,
x:292,y:1047,b:220,g:171},CarbineEquip12:{i:198,j:133,x:1541,y:1047,b:253,g:163},CarbineEquip13:{i:207,j:132,x:1296,y:1047,b:245,g:164},CarbineAim01:{i:194,j:133,x:0,y:1225,b:229,g:163},CarbineAim02:{i:170,j:136,x:1247,y:1225,b:187,g:160},CarbineAim03:{i:157,j:137,x:184,y:1388,b:174,g:159},CarbineFire01:{i:209,j:131,x:1030,y:1047,b:266,g:165},CarbineFire02:{i:213,j:128,x:512,y:1047,b:246,g:168},CarbineFire03:{i:212,j:133,x:229,y:1225,b:248,g:163},CarbineAimFire01:{i:147,j:136,x:1434,y:1225,b:193,
g:160},CarbineAimFire02:{i:152,j:136,x:0,y:1388,b:184,g:160},CarbineAimFire03:{i:155,j:134,x:730,y:1225,b:178,g:162},CarbineReload01:{i:185,j:133,x:477,y:1225,b:253,g:163},CarbineReload02:{i:101,j:134,x:908,y:1225,b:339,g:162},CarbineReload03:{i:14,j:144,x:838,y:1388,b:432,g:152},CarbineReload04:{i:0,j:153,x:354,y:1548,b:460,g:143},CarbineReload05:{i:0,j:149,x:1270,y:1388,b:480,g:147},CarbineReload06:{i:0,j:139,x:358,y:1388,b:480,g:157},CarbineReload07:{i:0,j:107,x:271,y:670,b:480,g:189},CarbineReload08:{i:0,
j:41,x:0,y:0,b:480,g:255},CarbineReload09:{i:0,j:47,x:480,y:0,b:480,g:249},CarbineReload10:{i:0,j:95,x:532,y:255,b:480,g:201},CarbineReload11:{i:0,j:107,x:751,y:670,b:480,g:189},CarbineReload12:{i:0,j:111,x:311,y:860,b:480,g:185},CarbineReload13:{i:0,j:114,x:791,y:860,b:480,g:182},CarbineReload14:{i:59,j:115,x:1271,y:860,b:421,g:181},CarbineReload15:{i:200,j:109,x:1451,y:670,b:280,g:187},CarbineReload16:{i:235,j:103,x:309,y:475,b:245,g:193},CarbineReload17:{i:246,j:104,x:838,y:475,b:234,g:192},CarbineReload18:{i:241,
j:105,x:1072,y:475,b:239,g:191},CarbineReload19:{i:209,j:106,x:0,y:670,b:271,g:190},CarbineReload20:{i:172,j:99,x:1446,y:255,b:308,g:197},CarbineReload21:{i:171,j:101,x:0,y:475,b:309,g:195},CarbineReload22:{i:196,j:103,x:554,y:475,b:284,g:193},CarbineReload23:{i:164,j:105,x:1311,y:475,b:316,g:191},CarbineReload24:{i:158,j:109,x:0,y:860,b:311,g:187},CarbineReload25:{i:173,j:118,x:0,y:1047,b:292,g:178},CarbineReload26:{i:175,j:128,x:758,y:1047,b:272,g:168}};
Gk.prototype.equip=function(){var a=t.h-this.V;a+=5;var b=Math.floor(a/2.5);this.Ta=this.O.constructor.Ka["CarbineEquip"+("00"+b).slice(-2)];this.Je=this.Ie=0;this.ac=this.O.ib;wk(this)||(0==this.O.ib&&10<=this.O.Za&&(this.Lc=!0),this.Lc?(this.action="reload",this.V=t.h+1):9==a?this.ja.Ca+=fc(1):9<=b&&(this.O.uf.call(this,!0),this.O.Nd.call(this)||(this.ic(1),32.5<=a+1&&(this.action="ready"))))};
Gk.prototype.ready=function(){this.Ta=this.O.constructor.Ka.CarbineEquip13;this.Xb();this.ac=this.O.ib;wk(this)||(this.Lc?(this.action="reload",this.V=t.h+1):(this.O.uf.call(this,!0),this.O.Nd.call(this)||this.ic(1)))};
Gk.prototype.fire=function(){var a=t.h-this.V,b=("00"+Math.floor(a)).slice(-2);this.Ta=this.focus?this.O.constructor.Ka["CarbineAimFire"+b]||this.O.constructor.Ka.CarbineAim03:this.O.constructor.Ka["CarbineFire"+b]||this.O.constructor.Ka.CarbineEquip13;this.Xb();if(0==a){t.c.Y.get("CarbineFire01").play({gain:.375,pitch:1.5});t.c.Y.get("CarbineFire02").play({gain:.75,pitch:1.5});--this.O.ib;t.a.ff();!this.O.ib&&this.O.Za&&(this.Lc=1);this.Ze+=35;this.Md=this.focus?tk.Hb(0,.270042,-.06106,0,0,180):
tk.Hb(.053697,.319573,-.058355,-.833,.006,-179.61);a=this.Rg;a.Ya=1;b=255*(8*ob(nb)+1)/12&255;a.color.r=b;a.color.jb=b;a.color.pa=b;a.scale=ob(nb)+1;a.Ed=ic(mb());b=new N;b.translate(0,-35E3,0);zd(this.Md,b,a.transform);a=(new N).rotate(0,fc(2.5*ob(nb)),0);b=(new N).rotate(0,0,ob(nb)*Math.PI*2);var c=Hk(this.ja);zd(c,b,c);zd(c,a,c);a=this.O.Wc(c);a=p(a);for(b=a.next();!b.done;b=a.next())Bk(b.value,72,1.2);a=new Ik("CartridgeCarbineSpent");a.xl=fc(6*(3*ob(nb)+1));a.transform.G-=2E3;a.transform.m31+=
2100;b=new N;zd(this.ja.Ud.L,this.Md,b);zd(b,a.transform,a.transform);a.B.x-=3E3*(2*ob(nb)+1);a.B.z=-a.B.x;Ad(b,a.B,a.B);a.f.set(a.transform.G,a.transform.m31,a.transform.m32);a.B.add(this.ja.B);ud(a.B,a.Gb);O(a,t.Te);a.create();180<=this.Ze&&(this.Ze-=180,a=new Jk,a.mb=6E4,a.transform.m31-=45E3,b=new N,zd(this.ja.Ud.L,this.Md,b),zd(b,a.transform,a.transform),a.B.y=-37500,Ad(b,a.B,a.B),a.B.add(this.ja.B),ud(a.B,a.Gb),a.ia=this.ja.ia,O(a,t.Td),a.create(),a.step(),this.$e.push(a));3<this.$e.length&&
(O(this.$e[0],null),this.$e.splice(0,1))}else 1==a?this.Rg.Ya=0:2==a?this.ja.Ca+=this.focus?fc(.5):fc(1):3<=a&&!wk(this)&&(this.O.uf.call(this,!1),this.O.Nd.call(this)||(this.ic(1),this.action="ready"))};
Gk.prototype.reload=function(){var a=t.h-this.V;a+=3;this.Ta=this.O.constructor.Ka["CarbineReload"+("00"+Math.floor(a/3)).slice(-2)];this.Xb();this.ac=!1;this.Lc=0;wk(this)||(this.focus-=1/6,0>this.focus&&(this.focus=0),3==a?(this.O.Za+=this.O.ib,this.O.ib=0,t.a.ff(),t.c.Y.get("CarbineMagOut02").play({gain:1,pitch:1})):42==a?t.c.Y.get("CarbineMagIn02").play({gain:1,pitch:1}):60==a?(this.ja.Ca+=fc(1),this.O.ic(this.O.sg())):81<=a+1&&(this.action="ready"))};f=Gk.prototype;
f.uf=function(a){this.we&&(this.focus+=1/6,1<this.focus&&(this.focus=1));a&&this.focus&&(this.Ta=this.O.constructor.Ka["CarbineAim"+("00"+Math.floor(3*this.focus)).slice(-2)]||this.O.constructor.Ka.CarbineEquip13)};f.Nd=function(){if(!this.Zd||1!=this.focus&&0!=this.focus)return!1;if(!this.O.ib)return this.O.Za&&(this.Lc=1),!1;this.action="fire";this.V=t.h+1;return!0};f.Rh=Ak;
f.Wc=function(a){var b=new w(a.G,a.m31,a.m32),c=new w(-a.P,-a.m21,-a.m22),d=this.Ob;if(a=nf(b,new w(c.x*d,c.y*d,c.z*d)))d=a.d;var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=p(t.a.zc),g=h.next();!g.done;g=h.next())if(g=g.value,g.fb||!(t.h>g.V)){var k=ek(b,c,g.f,g.ra,g.cb).Ke;!k||0>k.t||k.t>=d||(k.item=g,k.Db=c,Sa(e,k))}b=null;d=c=NaN;e=p(e);for(h=e.next();!h.done;h=e.next())h=h.value,h.item.Ci>c||h.item.Ci==c&&h.t>d||(b=
h,c=h.item.Ci,d=h.t);e=[];b&&e.push(b);a&&e.push(a);return e};f.dj=function(){return 0>=this.Za||"reload"==this.Gj.action||6<this.ib?!1:!0};f.If=function(){var a=zk(this);return 0>=a?2:30>a?1:0};function xk(a){yk.call(this,a);this.Qf=12;this.Dc=this.Rf=0;this.Za=8;this.Xj=!1;this.Pg=fc(0);this.pe=96;a.fc.push(this)}xk.prototype=Object.create(yk.prototype);xk.prototype.constructor=xk;
xk.Ka={ShotgunEquip01:{i:170,j:185,x:874,y:1644,b:310,g:111},ShotgunEquip02:{i:183,j:151,x:569,y:1351,b:297,g:145},ShotgunEquip03:{i:331,j:128,x:1175,y:704,b:149,g:168},ShotgunEquip04:{i:111,j:20,x:871,y:0,b:369,g:276},ShotgunEquip05:{i:140,j:0,x:0,y:0,b:340,g:296},ShotgunEquip06:{i:158,j:0,x:340,y:0,b:277,g:296},ShotgunEquip07:{i:173,j:0,x:617,y:0,b:254,g:296},ShotgunEquip08:{i:188,j:100,x:0,y:508,b:257,g:196},ShotgunEquip09:{i:195,j:152,x:1432,y:1351,b:258,g:144},ShotgunEquip10:{i:199,j:159,x:0,
y:1644,b:257,g:137},ShotgunEquip11:{i:201,j:160,x:257,y:1644,b:253,g:136},ShotgunEquip12:{i:197,j:156,x:1248,y:1500,b:254,g:140},ShotgunEquip13:{i:195,j:152,x:0,y:1500,b:254,g:144},ShotgunFire01:{i:202,j:152,x:254,y:1500,b:278,g:144},ShotgunFire02:{i:181,j:147,x:0,y:1351,b:299,g:149},ShotgunFire03:{i:175,j:133,x:0,y:884,b:305,g:163},ShotgunFire04:{i:177,j:118,x:299,y:704,b:303,g:178},ShotgunFire05:{i:182,j:112,x:651,y:508,b:298,g:184},ShotgunFire06:{i:184,j:112,x:949,y:508,b:296,g:184},ShotgunFire07:{i:183,
j:113,x:1245,y:508,b:297,g:183},ShotgunFire08:{i:181,j:116,x:0,y:704,b:299,g:180},ShotgunFire09:{i:187,j:120,x:602,y:704,b:293,g:176},ShotgunFire10:{i:200,j:125,x:895,y:704,b:280,g:171},ShotgunFire11:{i:211,j:132,x:1324,y:704,b:269,g:164},ShotgunFire12:{i:215,j:139,x:305,y:884,b:265,g:157},ShotgunFire13:{i:212,j:145,x:1320,y:1199,b:268,g:151},ShotgunFire14:{i:203,j:149,x:299,y:1351,b:270,g:147},ShotgunFire15:{i:196,j:152,x:532,y:1500,b:256,g:144},ShotgunCycle01:{i:187,j:139,x:570,y:884,b:209,g:157},
ShotgunCycle02:{i:162,j:109,x:475,y:508,b:176,g:187},ShotgunCycle03:{i:123,j:88,x:1399,y:296,b:176,g:208},ShotgunCycle04:{i:101,j:84,x:0,y:296,b:176,g:212},ShotgunCycle05:{i:103,j:84,x:176,y:296,b:174,g:212},ShotgunCycle06:{i:126,j:84,x:350,y:296,b:173,g:212},ShotgunCycle07:{i:126,j:86,x:1220,y:296,b:179,g:210},ShotgunCycle08:{i:127,j:85,x:1045,y:296,b:175,g:211},ShotgunCycle09:{i:126,j:84,x:523,y:296,b:173,g:212},ShotgunCycle10:{i:123,j:84,x:696,y:296,b:173,g:212},ShotgunCycle11:{i:101,j:84,x:869,
y:296,b:176,g:212},ShotgunCycle12:{i:97,j:82,x:1240,y:0,b:181,g:214},ShotgunCycle13:{i:93,j:83,x:1421,y:0,b:192,g:213},ShotgunCycle14:{i:114,j:108,x:257,y:508,b:218,g:188},ShotgunCycle15:{i:166,j:139,x:779,y:884,b:250,g:157},ShotgunReload01:{i:196,j:153,x:788,y:1500,b:230,g:143},ShotgunReload02:{i:209,j:156,x:1502,y:1500,b:158,g:140},ShotgunReload03:{i:183,j:164,x:510,y:1644,b:182,g:132},ShotgunReload04:{i:150,j:151,x:866,y:1351,b:283,g:145},ShotgunReload05:{i:124,j:144,x:1029,y:884,b:356,g:152},
ShotgunReload06:{i:108,j:144,x:1385,y:884,b:372,g:152},ShotgunReload07:{i:108,j:144,x:0,y:1047,b:372,g:152},ShotgunReload08:{i:108,j:144,x:372,y:1047,b:308,g:152},ShotgunReload09:{i:108,j:144,x:680,y:1047,b:262,g:152},ShotgunReload10:{i:108,j:144,x:942,y:1047,b:262,g:152},ShotgunReload11:{i:107,j:144,x:1204,y:1047,b:373,g:152},ShotgunReload12:{i:108,j:144,x:0,y:1199,b:262,g:152},ShotgunReload13:{i:108,j:144,x:262,y:1199,b:262,g:152},ShotgunReload14:{i:108,j:144,x:524,y:1199,b:262,g:152},ShotgunReload15:{i:108,
j:144,x:786,y:1199,b:262,g:152},ShotgunReload16:{i:124,j:144,x:1048,y:1199,b:272,g:152},ShotgunReload17:{i:150,j:151,x:1149,y:1351,b:283,g:145},ShotgunReload18:{i:183,j:164,x:692,y:1644,b:182,g:132},ShotgunReload19:{i:209,j:156,x:1588,y:1199,b:158,g:140},ShotgunReload20:{i:196,j:153,x:1018,y:1500,b:230,g:143}};
xk.prototype.equip=function(){var a=t.h-this.V;a+=2;this.Ta=this.O.constructor.Ka["ShotgunEquip"+("00"+Math.floor(a/2.5)).slice(-2)];this.Xb();this.ac=this.O.Dc;wk(this)||(9==a?this.ja.Ca+=fc(1):22<=a+1&&!this.O.Nd.call(this)&&(this.we||!this.O.Dc&&this.O.Za?(this.action="cycleOpen",this.V=t.h+1-6):(this.ic(1),35<=a+1&&(this.action="ready"))))};
xk.prototype.ready=function(){this.Ta=this.O.constructor.Ka.ShotgunEquip13;this.Xb();this.ac=this.O.Dc;wk(this)||this.O.Nd.call(this)||(this.we?(this.action="cycleOpen",this.V=t.h+1,this.ac=!1):this.ic(1))};
xk.prototype.fire=function(){var a=t.h-this.V;this.Ta=this.O.constructor.Ka["ShotgunFire"+("00"+(7>a?Math.floor(a):Math.floor((a-7)/4)+7)).slice(-2)]||this.O.constructor.Ka.ShotgunEquip13;this.Xb();this.ac=!1;if(0==a){t.c.Y.get("ShotgunFire01").play({gain:.9375,pitch:.75});t.c.Y.get("explode01").play({gain:.9375,pitch:1.5});this.O.Dc=0;this.O.Xj=!0;t.a.ff();this.Md=tk.Hb(.04499,.31957,-.038305,-.596,.007,-179.3);a=this.Rg;a.Ya=1;var b=255*(ob(nb)+4)/5&255;a.color.r=b;a.color.jb=b;a.color.pa=b;a.scale=
ob(nb)+1;a.Ed=ic(mb());b=new N;b.translate(0,-4E4,0);zd(this.Md,b,a.transform);a=Hk(this.ja);var c=xk.gj.length;b=Array(c);for(var d=0;d<c;d++){var e=pb(d+1);e!=d&&(b[d]=b[e]);b[e]=d}c=ob(nb)*Math.eh;for(d=0;d<b.length;d++){e=(new N).rotate(0,xk.gj[8-d],0);var h=(new N).rotate(0,0,c+b[d]*Math.eh/9),g=new N;zd(a,h,g);zd(g,e,g);h=this.O.Wc(g);e=270;h=p(h);for(g=h.next();!g.done;g=h.next()){g=g.value;var k=e;g.item instanceof X&&(k=Math.min(e,g.item.Eb));Bk(g,k,1.2);e-=k;if(0>=e)break}}a=new Jk;a.mb=
6E4;a.scale=1;a.transform.m31-=45E3;b=new N;zd(this.ja.Ud.L,this.Md,b);zd(b,a.transform,a.transform);a.B.y=-37500;Ad(b,a.B,a.B);a.B.add(this.ja.B);ud(a.B,a.Gb);a.ia=this.ja.ia;O(a,t.Td);a.create();a.step();this.$e.push(a);3<this.$e.length&&(O(this.$e[0],null),this.$e.splice(0,1));this.ja.Ca+=fc(2)}else 1==a?this.Rg.Ya=0:3==a?this.ja.Ca+=fc(4):4<=a&&!wk(this)&&(this.we?(this.action="cycleOpen",this.V=t.h+1):(this.ic(1),43<=a+1&&(this.action="ready")))};
xk.prototype.cycleOpen=function(){var a=t.h-this.V;a=Math.min(a,27);this.Ta=this.O.constructor.Ka["ShotgunCycle"+("00"+Math.floor(a/3)).slice(-2)]||this.O.constructor.Ka.ShotgunEquip13;this.Xb();this.ac=!1;if(!wk(this))if(12==a)t.c.Y.get("ShotgunOpen01").play({gain:1,pitch:.8125});else if(21==a){this.ja.Ca+=fc(1);this.O.Za+=this.O.Dc;this.Md=tk.Hb(-.018192,.25469,-.045699,-19.3,39.9,177);if(this.O.Xj||this.O.Dc){a=new Ik("CartridgeShotgunSpent");a.tk=.65;a.xl=fc(24*(1*ob(nb)+1));a.transform.m31+=
6E3;var b=new N;zd(this.ja.Ud.L,this.Md,b);zd(b,a.transform,a.transform);a.B.x=-3E3;a.B.z=-a.B.x;Ad(b,a.B,a.B);a.f.set(a.transform.G,a.transform.m31,a.transform.m32);a.B.add(this.ja.B);ud(a.B,a.Gb);O(a,t.Te);a.create();this.O.Xj=!1}this.O.Dc=0}else 27<=a&&(this.we?this.ic(1):(this.action="cycleShut",this.V=t.h+1-27))};
xk.prototype.cycleShut=function(){var a=t.h-this.V;this.Ta=this.O.constructor.Ka["ShotgunCycle"+("00"+Math.floor(a/3)).slice(-2)]||this.O.constructor.Ka.ShotgunEquip13;this.Xb();this.ac=!1;wk(this)||(30==a?(t.c.Y.get("ShotgunShut01").play({gain:1,pitch:.8125}),this.O.ic(this.O.sg())):39<=a&&(this.ac=this.O.Dc,!wk(this)&&48<=a+1&&(this.action="ready")))};f=xk.prototype;f.Nd=function(){if(!this.Zd||!this.O.Dc)return!1;this.action="fire";this.V=t.h+1;return!0};f.Rh=Ak;
f.Wc=function(a){var b=new w(a.G,a.m31,a.m32);a=new w(-a.P,-a.m21,-a.m22);var c=this.Ob,d=nf(b,new w(a.x*c,a.y*c,a.z*c));d&&(c=d.d);var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=p(t.a.zc),g=h.next();!g.done;g=h.next())if(g=g.value,g.fb||!(t.h>g.V)){var k=dk(b,a,g.f,g.ra,g.cb+g.ra);!k||0>k.t||k.t>=c||(k.item=g,k.Db=a,Sa(e,k))}d&&e.push(d);return e};f.dj=function(){return!1};
f.If=function(){var a=zk(this);return 0>=a?2:5>a?1:0};f.sg=function(){var a=1-this.Dc;a=Math.min(a,this.Za);return a*this.pe-this.oc};f.ic=function(a){this.oc+=Math.min(a,this.sg());a=Math.floor(this.oc/this.pe);this.Dc+=a;this.Za-=a;this.oc-=a*this.pe};function Kk(a){yk.call(this,a);this.Qf=24;this.Rf=6;this.ib=0;this.Za=2*this.Rf;this.Pg=fc(4);this.Xh=0;this.pe=56;a.fc.push(this)}Kk.prototype=Object.create(yk.prototype);Kk.prototype.constructor=Kk;
Kk.Ka={RevolverEquip00:{i:0,j:255,x:1099,y:1692,b:480,g:41},RevolverEquip01:{i:32,j:246,x:651,y:1692,b:448,g:50},RevolverEquip02:{i:129,j:224,x:300,y:1692,b:351,g:72},RevolverEquip03:{i:180,j:199,x:0,y:1692,b:300,g:97},RevolverEquip04:{i:193,j:176,x:858,y:1443,b:287,g:120},RevolverEquip05:{i:194,j:157,x:1382,y:1296,b:249,g:139},RevolverEquip06:{i:184,j:144,x:343,y:845,b:232,g:152},RevolverEquip07:{i:172,j:148,x:258,y:999,b:255,g:148},RevolverAim01:{i:178,j:152,x:808,y:1296,b:226,g:144},RevolverAim02:{i:150,
j:150,x:341,y:1296,b:214,g:146},RevolverAim03:{i:133,j:148,x:513,y:999,b:208,g:148},RevolverFire01:{i:184,j:149,x:208,y:1148,b:238,g:147},RevolverFire02:{i:184,j:149,x:446,y:1148,b:238,g:147},RevolverFire03:{i:184,j:149,x:684,y:1148,b:238,g:147},RevolverFire04:{i:184,j:149,x:922,y:1148,b:238,g:147},RevolverFire05:{i:195,j:149,x:1160,y:1148,b:217,g:147},RevolverFire06:{i:201,j:111,x:1563,y:269,b:148,g:185},RevolverFire07:{i:197,j:71,x:0,y:269,b:144,g:225},RevolverFire08:{i:212,j:100,x:660,y:269,b:192,
g:196},RevolverFire09:{i:173,j:114,x:486,y:494,b:253,g:182},RevolverFire10:{i:180,j:111,x:0,y:494,b:242,g:185},RevolverFire11:{i:176,j:113,x:242,y:494,b:244,g:183},RevolverFire12:{i:169,j:126,x:1548,y:494,b:266,g:170},RevolverFire13:{i:171,j:139,x:759,y:679,b:269,g:157},RevolverFire14:{i:171,j:147,x:0,y:999,b:258,g:149},RevolverFire15:{i:185,j:149,x:1377,y:1148,b:237,g:147},RevolverAimFire01:{i:133,j:148,x:721,y:999,b:208,g:148},RevolverAimFire02:{i:133,j:148,x:929,y:999,b:208,g:148},RevolverAimFire03:{i:133,
j:148,x:1137,y:999,b:208,g:148},RevolverAimFire04:{i:133,j:148,x:1345,y:999,b:208,g:148},RevolverAimFire05:{i:138,j:148,x:1553,y:999,b:200,g:148},RevolverAimFire06:{i:144,j:119,x:739,y:494,b:168,g:177},RevolverAimFire07:{i:140,j:87,x:338,y:269,b:146,g:209},RevolverAimFire08:{i:153,j:110,x:1370,y:269,b:193,g:186},RevolverAimFire09:{i:126,j:121,x:1329,y:494,b:219,g:175},RevolverAimFire10:{i:135,j:119,x:907,y:494,b:211,g:177},RevolverAimFire11:{i:130,j:120,x:1118,y:494,b:211,g:176},RevolverAimFire12:{i:126,
j:130,x:0,y:679,b:219,g:166},RevolverAimFire13:{i:127,j:141,x:1028,y:679,b:219,g:155},RevolverAimFire14:{i:131,j:146,x:922,y:845,b:212,g:150},RevolverAimFire15:{i:133,j:148,x:0,y:1148,b:208,g:148},RevolverReload01:{i:181,j:136,x:560,y:679,b:199,g:160},RevolverReload02:{i:171,j:107,x:1194,y:269,b:176,g:189},RevolverReload03:{i:141,j:71,x:144,y:269,b:194,g:225},RevolverReload04:{i:113,j:40,x:1337,y:0,b:216,g:256},RevolverReload05:{i:95,j:28,x:503,y:0,b:222,g:268},RevolverReload06:{i:91,j:27,x:0,y:0,
b:238,g:269},RevolverReload07:{i:90,j:27,x:238,y:0,b:265,g:269},RevolverReload08:{i:107,j:35,x:725,y:0,b:204,g:261},RevolverReload09:{i:107,j:36,x:929,y:0,b:204,g:260},RevolverReload10:{i:107,j:36,x:1133,y:0,b:204,g:260},RevolverReload11:{i:117,j:51,x:1553,y:0,b:193,g:245},RevolverReload12:{i:135,j:90,x:484,y:269,b:176,g:206},RevolverReload13:{i:141,j:141,x:1247,y:679,b:175,g:155},RevolverReload14:{i:139,j:149,x:0,y:1296,b:341,g:147},RevolverReload15:{i:137,j:142,x:0,y:845,b:343,g:154},RevolverReload16:{i:138,
j:103,x:852,y:269,b:342,g:193},RevolverReload17:{i:139,j:130,x:219,y:679,b:341,g:166},RevolverReload18:{i:139,j:141,x:1422,y:679,b:341,g:155},RevolverReload19:{i:133,j:145,x:575,y:845,b:347,g:151},RevolverReload20:{i:132,j:146,x:1134,y:845,b:348,g:150},RevolverReload21:{i:132,j:146,x:1482,y:845,b:348,g:150},RevolverReload22:{i:132,j:152,x:1034,y:1296,b:348,g:144},RevolverReload23:{i:139,j:174,x:517,y:1443,b:341,g:122},RevolverReload24:{i:153,j:184,x:0,y:1580,b:327,g:112},RevolverReload25:{i:163,j:187,
x:985,y:1580,b:317,g:109},RevolverReload26:{i:155,j:187,x:1302,y:1580,b:325,g:109},RevolverReload27:{i:142,j:186,x:647,y:1580,b:338,g:110},RevolverReload28:{i:156,j:185,x:327,y:1580,b:320,g:111},RevolverReload29:{i:144,j:182,x:1424,y:1443,b:293,g:114},RevolverReload30:{i:128,j:177,x:1145,y:1443,b:279,g:119},RevolverReload31:{i:136,j:169,x:256,y:1443,b:261,g:127},RevolverReload32:{i:150,j:159,x:0,y:1443,b:256,g:137},RevolverReload33:{i:167,j:151,x:555,y:1296,b:253,g:145}};
Kk.prototype.equip=function(){var a=t.h-this.V,b=Math.floor(a/2.5);this.Ta=this.O.constructor.Ka["RevolverEquip"+("00"+b).slice(-2)];this.Je=this.Ie=0;this.ac=this.O.ib;wk(this)||(0==this.O.ib&&2<=this.O.Za&&(this.Lc=!0),this.Lc?(this.action="reload",this.V=t.h+1):0==a?this.ja.Ca+=fc(1):5<=b&&(this.O.uf.call(this,!0),this.O.Nd.call(this)||(this.ic(1),20<=a+1&&(this.action="ready"))))};
Kk.prototype.ready=function(){this.Ta=this.O.constructor.Ka.RevolverEquip07;this.Xb();this.ac=this.O.ib;wk(this)||(this.Lc?(this.action="reload",this.V=t.h+1):(this.O.uf.call(this,!0),this.O.Nd.call(this)||this.ic(1)))};
Kk.prototype.fire=function(){var a=t.h-this.V,b=("00"+(7>a?Math.floor(a):Math.floor((a-7)/3)+7)).slice(-2);this.Ta=this.focus?this.O.constructor.Ka["RevolverAimFire"+b]||this.O.constructor.Ka.RevolverAim03:this.O.constructor.Ka["RevolverFire"+b]||this.O.constructor.Ka.RevolverEquip07;this.Xb();if(4==a){t.c.Y.get("CarbineFire01").play({gain:1,pitch:1});t.c.Y.get("ShotgunFire01").play({gain:.5,pitch:1.5});this.Zd=0;this.O.ib--;t.a.ff();this.O.Xh++;!this.O.ib&&this.O.Za&&(this.Lc=1);this.Md=this.focus?
tk.Hb(0,.49195,-.017475,-.713,0,0):tk.Hb(.032225,.49195,-.022213,.367,-.151,.525);b=this.Rg;b.Ya=1;var c=255*(ob(nb)+4)/5&255;b.color.r=c;b.color.jb=c;b.color.pa=c;b.scale=ob(nb)+1;b.Ed=ic(mb());c=new N;c.translate(0,-21E3,0);zd(this.Md,c,b.transform);b=new Jk;b.mb=6E4;b.scale=1;b.transform.m31-=45E3;c=new N;zd(this.ja.Ud.L,this.Md,c);zd(c,b.transform,b.transform);b.B.y=-37500;Ad(c,b.B,b.B);b.B.add(this.ja.B);ud(b.B,b.Gb);b.ia=this.ja.ia;O(b,t.Td);b.create();b.step();this.$e.push(b);b=(new N).rotate(0,
fc(0*ob(nb)),0);c=(new N).rotate(0,0,ob(nb)*Math.PI*2);var d=Hk(this.ja);zd(d,c,d);zd(d,b,d);b=this.O.Wc(d);b=p(b);for(c=b.next();!c.done;c=b.next()){c=c.value;d=c.item instanceof X?3:1;for(var e=0;e<d;e++)Bk(c,360,1.7)}}else if(5==a)this.Rg.Ya=0;else if(7==a)this.ja.Ca+=fc(3);else if(10<=a){if(wk(this))return;if(this.Lc){this.action="reload";this.V=t.h+1;return}this.O.uf.call(this,!1);if(this.O.Nd.call(this))return;this.ic(1)}34<=a+1&&(this.action="ready")};
Kk.prototype.reload=function(){var a=t.h-this.V;a+=3;this.Ta=this.O.constructor.Ka["RevolverReload"+("00"+Math.floor(a/3)).slice(-2)];this.Xb();this.Lc=0;84>a&&(this.ac=!1,this.focus-=1/6,0>this.focus&&(this.focus=0));if(!wk(this))if(21==a)t.c.Y.get("RevolverSpin01").play({gain:1,pitch:1}),t.c.Y.get("RevolverEjectorUp").play({gain:2/3,pitch:1});else if(24==a){this.ja.Ca+=fc(.5);for(a=0;a<this.O.Xh;a++)t.c.Y.get("shellCasing0"+(pb(3)+1)).play({gain:.625,pitch:.65,delay:.125+.15*a});this.O.Xh=0;this.O.Za+=
this.O.ib;this.O.ib=0;t.a.ff()}else 54==a?t.c.Y.get("RevolverSlap01").play({gain:1,pitch:1}):57==a?(this.ja.Ca+=fc(1),this.O.ic(this.O.sg())):78==a?t.c.Y.get("RevolverSpin01").play({gain:1,pitch:1}):81==a?t.c.Y.get("RevolverSlap02").play({gain:1,pitch:1}):84<=a&&(this.ac=this.O.ib,this.O.uf.call(this,!0),this.O.Nd.call(this)||(this.ic(1),102<=a+1&&(this.action="ready")))};f=Kk.prototype;
f.uf=function(a){this.we&&(this.focus+=1/6,1<this.focus&&(this.focus=1));a&&this.focus&&(this.Ta=this.O.constructor.Ka["RevolverAim"+("00"+Math.floor(3*this.focus)).slice(-2)]||this.O.constructor.Ka.RevolverEquip07)};f.Nd=function(){if(!this.Zd||1!=this.focus&&0!=this.focus)return!1;if(!this.O.ib)return this.O.Za&&(this.Lc=1),!1;this.action="fire";this.V=t.h+1;return!0};f.Rh=function(a){return.5<this.Gj.focus?Lk(this,a):Ak.call(this,a)};
function Lk(a,b){function c(r){var q=sd(r,d,new w);r=q.length();var u=26512.5/r;q=pf(d,q);for(var z=0,y=!0;;){var x=q.shift();if(!x){if(!y){z+=u;break}z=1;break}if(!y){y=x.t-z;if(y>u){z+=u;break}u-=y}z=x.t;y=!x.Ua}return z*r>=r-1E3}var d=new w(b.G,b.m31,b.m32),e=new w(-b.P,-b.m21,-b.m22),h=a.Ob;b=[];b.cmp=function(r,q){return r.hg>q.hg?-1:1};for(var g=p(t.a.zc),k=g.next();!k.done;k=g.next())if(k=k.value,(k.fb||!(t.h>k.V))&&600>t.h-k.Ki){var l=ek(d,e,k.f,k.ra-a.jh,k.cb);if(l.Ke){var m=l.Ke;0>m.t||
m.t>=h||(m.p.hg=h-m.t,m.p.item=k,Sa(b,m.p))}else{m=l.Oh.da();var n=l.jj-(k.ra-a.jh);m.x+=l.xe.x*n;m.y+=l.xe.y*n;m.z+=l.xe.z*n;l=sd(l.Oh,d,new w).normalize();n=sd(m,d,new w).normalize();0>=lc(n,e)||(l=lc(l,n),m.hg=l-1,m.item=k,Sa(b,m),Math.acos(l)>=a.Pg&&(m.um=!0))}}a=null;b=p(b);for(e=b.next();!e.done;e=b.next())e=e.value,c(e)&&(e.item.km=t.h,e.um||a||(a=e));return a}
f.Wc=function(a){var b=new w(a.G,a.m31,a.m32),c=new w(-a.P,-a.m21,-a.m22),d=this.Ob;a=[];for(var e=pf(b,new w(c.x*d,c.y*d,c.z*d)),h=26512.5/d,g=0,k=!0;;){var l=e.shift();if(!l){k||(d*=g+h);break}if(!k){k=l.t-g;if(k>h){d*=g+h;break}h-=k}g=l.t;l.Ua&&a.push(l);k=!l.Ua}e=[];e.cmp=function(m,n){return m.t<n.t?-1:m.t>n.t?1:m.item.index<n.item.index?-1:m.item.index>n.item.index?1:0};h=p(t.a.zc);for(g=h.next();!g.done;g=h.next())g=g.value,!g.fb&&t.h>g.V||!(l=dk(b,c,g.f,g.ra,g.cb+g.ra))||0>l.t||l.t>=d||(l.item=
g,l.Db=c,Sa(e,l));b=[];e.length&&b.push(e[0]);b.push.apply(b,ba(a));return b};f.dj=function(){return 0>=this.Za||"reload"==this.Gj.action||2<this.ib?!1:!0};f.If=function(){var a=zk(this);return 0>=a?2:6>a?1:0};f.ic=function(a){this.oc+=Math.min(a,this.sg());a=Math.floor(this.oc/this.pe);this.ib+=a;this.Za-=a;this.Xh=Math.max(0,this.Xh-a);this.oc-=a*this.pe};function vk(a){yk.call(this,a);this.Qf=6;this.Za=this.Rf=0;a.fc.push(this)}vk.prototype=Object.create(yk.prototype);
vk.prototype.constructor=vk;
vk.Ka={GrenadeThrow00:{i:0,j:271,x:324,y:1067,b:461,g:25},GrenadeThrow01:{i:0,j:252,x:625,y:1E3,b:467,g:44},GrenadeThrow02:{i:0,j:229,x:0,y:1E3,b:478,g:67},GrenadeThrow03:{i:0,j:200,x:725,y:888,b:480,g:96},GrenadeThrow04:{i:0,j:172,x:480,y:756,b:480,g:124},GrenadeThrow05:{i:0,j:156,x:740,y:333,b:480,g:140},GrenadeThrow06:{i:0,j:150,x:0,y:187,b:480,g:146},GrenadeThrow07:{i:0,j:150,x:480,y:187,b:480,g:146},GrenadeThrow08:{i:0,j:157,x:476,y:477,b:480,g:139},GrenadeThrow09:{i:0,j:164,x:0,y:756,b:480,
g:132},GrenadeThrow10:{i:0,j:152,x:0,y:333,b:478,g:144},GrenadeThrow11:{i:0,j:156,x:0,y:477,b:476,g:140},GrenadeThrow12:{i:0,j:159,x:480,y:617,b:474,g:137},GrenadeThrow13:{i:0,j:157,x:0,y:617,b:480,g:139},GrenadeThrow14:{i:0,j:184,x:0,y:888,b:480,g:112},GrenadeThrow16:{i:58,j:243,x:478,y:1E3,b:147,g:53},GrenadeThrow17:{i:14,j:214,x:960,y:756,b:233,g:82},GrenadeThrow18:{i:0,j:189,x:480,y:888,b:245,g:107},GrenadeThrow19:{i:0,j:226,x:954,y:617,b:194,g:70},GrenadeThrow20:{i:392,j:46,x:0,y:0,b:88,g:187},
GrenadeThrow21:{i:297,j:89,x:305,y:0,b:183,g:165},GrenadeThrow22:{i:263,j:111,x:88,y:0,b:217,g:185},GrenadeThrow23:{i:216,j:155,x:478,y:333,b:262,g:141},GrenadeThrow24:{i:131,j:147,x:851,y:0,b:326,g:149},GrenadeThrow25:{i:63,j:135,x:488,y:0,b:363,g:161},GrenadeThrow26:{i:48,j:269,x:0,y:1067,b:324,g:27}};
vk.prototype.equip=function(){var a=t.h-this.V;a+=5;37.5<=a?(a=45>a?37.5:a-7.5,this.Xb()):this.Je=this.Ie=0;a=Math.min(a,45);this.Ta=this.O.constructor.Ka["GrenadeThrow"+("00"+Math.floor(a/2.5)).slice(-2)];this.ac=!1;if(!wk(this)){if(33==a)this.ja.Ca+=fc(1),t.c.Y.get("RevolverEjectorDown").play({gain:1,pitch:1});else if(35<=a&&(this.Zd||this.xd||this.Od)){this.action="throw";this.V=t.h+1;return}45<=a+1&&(this.action="ready")}};
vk.prototype.ready=function(){this.Ta=this.O.constructor.Ka["GrenadeThrow"+"0018".slice(-2)];this.Xb();this.ac=!1;wk(this)||!this.Zd&&!this.xd||(this.action="throw",this.V=t.h+1)};
vk.prototype["throw"]=function(){var a=t.h-this.V;a+=47;this.Ta=this.O.constructor.Ka["GrenadeThrow"+("00"+Math.floor(a/2.5)).slice(-2)];this.Je=this.Ie=0;this.ac=!1;this.xd=0;if(!wk(this)){if(58==a)t.c.Y.get("MasherSwing01").play({gain:1,pitch:1});else if(60==a)this.ja.Ca+=fc(1);else if(64==a){this.O.Za--;t.a.ff();var b;var c=b=new Mk;c.transform.G+=6E3;c.transform.m31-=6E3;c.transform.m32-=12E4;var d=this.ja.Ud.L;zd(d,c.transform,c.transform);c.f.x=c.transform.G;c.f.y=c.transform.m31;c.f.z=c.transform.m32;
c.B.y=1;c.B.z=-6;c.B.scale(6E3);Ad(d,c.B,c.B);c.B.add(this.ja.B);ud(c.B,c.Gb);O(c,t.Ui);c.create();d=c=new Nk;d.transform.G+=28E3;d.transform.m31-=13E3;d.transform.m32-=12E4;var e=this.ja.Ud.L;zd(e,d.transform,d.transform);d.f.x=d.transform.G;d.f.y=d.transform.m31;d.f.z=d.transform.m32;d.B.x=1E4;d.B.y=8E3;d.B.z=-3E4;d.B.scale(.8);Ad(e,d.B,d.B);d.B.add(this.ja.B);ud(d.B,d.Gb);O(d,t.Ui);d.create();b.pf.push(c);c.pf.push(b)}70<=a+1&&(this.Od=null,this.ge=this.pl,wk(this))}};vk.prototype.Wc=function(){return null};
vk.prototype.Rh=vk.prototype.Wc;vk.prototype.If=function(){var a=zk(this);return 0>=a?2:2>a?1:0};function Mk(){Tj.call(this,"grenade");this.ma=new N;this.h=3;this.Bg=.5;this.ob=16;this.ra=8750;this.cb=0;this.qg=3;this.pg=.15;this.Bf=.4;this.A=t.c.ta.get("physicalCardThreshold");this.V=t.h;this.xh=NaN;this.Ob=6E5}Mk.prototype=Object.create(Tj.prototype);f=Mk.prototype;f.constructor=Mk;
f.step=function(){this.h+=this.Bg;this.h%=8;0<=t.h-this.xh&&this.lh();isNaN(this.xh)&&25E4>this.B.Rc()&&(this.xh=t.h+5);Tj.prototype.step.call(this)};f.Oi=function(){this.Bg=this.h=0};f.Mj=function(a){a instanceof X&&isNaN(this.xh)&&(this.xh=t.h+5)};f.create=function(){Qd(this,13125);Tj.prototype.create.call(this)};
f.lh=function(){function a(k){var l=sd(k.f,b.f,new w),m=l.Rc();nf(b.f,l,eg)||(l=b.Ob*b.Ob/m*360,1<=l&&k.Xf(l))}var b=this;t.c.Y.get("explode01").play({gain:1,pitch:1.2});if(t.a.va){var c=t.a.va,d=sd(c.f,this.f,new w);d=this.Ob*this.Ob/d.Rc();d=Math.min(5,d);c.Ca+=fc(5)*d}c=p(t.a.Cg);for(d=c.next();!d.done;d=c.next())a(d.value);c=p(t.a.Fg);for(d=c.next();!d.done;d=c.next())a(d.value);c=p(t.a.zc);for(d=c.next();!d.done;d=c.next())if(d=d.value,d.fb&&(d=sd(d.f,this.f,new w),!(d.oa(1)>this.Ob+1E5))){var e=
this.Wc(d);d=720;e=p(e);for(var h=e.next();!h.done;h=e.next()){h=h.value;var g=d;h.item instanceof X&&(g=Math.min(d,h.item.Eb));Bk(h,g,1.2);d-=g;if(0>=d)break}}for(c=0;14>c;c++)for(d=1.342*ob(nb)-.342,d=this.Wc(oc(d)),d=p(d),h=d.next();!h.done;h=d.next())e=h.value,e.item instanceof X||(t.c.Y.get("MasherSlap01").play({Cf:.05}),Bk(e,720,1));this.Qa&&(c=new sk(1E5,this.Qa),c.transform.G=this.f.x,c.transform.m31=this.f.y,c.transform.m32=this.f.z,O(c,t.Td),c.create());this.remove()};
f.Wc=function(a){var b=this.f.da(),c=this.Ob,d=nf(b,new w(a.x*c,a.y*c,a.z*c));d&&(c=d.d);var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=p(t.a.zc),g=h.next();!g.done;g=h.next())if(g=g.value,g.fb||!(t.h>g.V)){var k=ek(b,a,g.f,g.ra,g.cb).Ke;!k||0>k.t||k.t>=c||(k.item=g,k.Db=a,Sa(e,k))}d&&e.push(d);return e};
f.Vc=function(){var a=Bd(this.L),b=sd(Bd(t.ka.L),a,new w),c=b.oa(1);c=Math.min(1,c/(4*this.ra));var d=new w(0,1,0),e=nc(d,b,new w).normalize();nc(b,e,d);var h=t.ka.L.Oe(),g=t.ka.L.wd();this.ma.Ue(td(t.ka.L.Ne(),e,c).normalize());this.ma.Ve(td(h,d,c).normalize());this.ma.We(td(g,b,c).normalize());Id(this.ma,a)};
f.$a=function(){this.Vc();t.zb(sg);t.ab(this.A);t.Lb(0,t.c.N.get("Grenade"));X.$.bind();t.A.J("ambientLight",this.ia.lb,!1);t.rb(0);t.Pb(0);t.A.J("color",fd);var a=new N;a.set(this.ma);a.F*=17500;a.K*=17500;a.M*=17500;a.H*=-17500;a.m11*=-17500;a.m12*=-17500;t.A.J("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,tg(Math.floor(this.h),this.ob),4)};
function Nk(){Tj.call(this,"grenade spoon");this.ma=new N;this.h=2;this.Bg=8-1/3;this.ob=16;this.ra=8750;this.cb=0;this.qg=.5;this.pg=.1;this.Bf=.002;this.A=t.c.ta.get("physicalCardThreshold");this.V=t.h}Nk.prototype=Object.create(Tj.prototype);f=Nk.prototype;f.constructor=Nk;f.step=function(){var a=t.h-this.V;this.h+=this.Bg;this.h%=8;120<=a&&this.remove();Tj.prototype.step.call(this)};f.Oi=function(){this.h=0;this.Bg=.5*(this.Bg-8)+8};
f.Vc=function(){var a=Bd(this.L),b=sd(Bd(t.ka.L),a,new w),c=b.oa(1);c=Math.min(1,c/(4*this.ra));var d=new w(0,1,0),e=nc(d,b,new w).normalize();nc(b,e,d);var h=t.ka.L.Oe(),g=t.ka.L.wd();this.ma.Ue(td(t.ka.L.Ne(),e,c).normalize());this.ma.Ve(td(h,d,c).normalize());this.ma.We(td(g,b,c).normalize());Id(this.ma,a)};
f.$a=function(){this.Vc();t.zb(sg);t.ab(this.A);t.Lb(0,t.c.N.get("Grenade"));X.$.bind();t.A.J("ambientLight",this.ia.lb,!1);t.rb(0);t.Pb(0);t.A.J("color",fd);var a=new N;a.set(this.ma);a.F*=17500;a.K*=17500;a.M*=17500;a.H*=-17500;a.m11*=-17500;a.m12*=-17500;t.A.J("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,tg(Math.floor(this.h)+8,this.ob),4)};function Ok(a){yk.call(this,a);this.Ob=25E4;this.Pg=fc(30);a.fc.push(this)}Ok.prototype=Object.create(yk.prototype);Ok.prototype.constructor=Ok;
Ok.Ka={MasherStrike00:{i:33,j:251,x:341,y:944,b:353,g:45},MasherStrike01:{i:82,j:233,x:0,y:944,b:341,g:63},MasherStrike02:{i:0,j:203,x:0,y:851,b:471,g:93},MasherStrike03:{i:65,j:168,x:0,y:723,b:415,g:128},MasherStrike04:{i:118,j:98,x:0,y:525,b:362,g:198},MasherStrike05:{i:188,j:87,x:426,y:282,b:292,g:209},MasherStrike06:{i:220,j:73,x:193,y:282,b:233,g:223},MasherStrike07:{i:227,j:53,x:0,y:282,b:193,g:243},MasherStrike08:{i:234,j:29,x:512,y:0,b:165,g:267},MasherStrike09:{i:261,j:17,x:174,y:0,b:156,
g:279},MasherStrike10:{i:266,j:14,x:0,y:0,b:174,g:282},MasherStrike11:{i:229,j:147,x:771,y:525,b:251,g:149},MasherStrike12:{i:224,j:136,x:596,y:525,b:175,g:160},MasherStrike13:{i:224,j:159,x:718,y:282,b:188,g:137},MasherStrike14:{i:218,j:184,x:673,y:723,b:262,g:112},MasherStrike15:{i:217,j:205,x:471,y:851,b:263,g:91},MasherStrike16:{i:215,j:208,x:734,y:851,b:265,g:88},MasherStrike17:{i:222,j:171,x:415,y:723,b:258,g:125},MasherStrike18:{i:246,j:110,x:362,y:525,b:234,g:186},MasherStrike19:{i:261,j:52,
x:677,y:0,b:219,g:244},MasherStrike20:{i:264,j:21,x:330,y:0,b:182,g:275}};Ok.prototype.equip=function(){var a=t.h-this.V;25<=a&&(a=25);this.Ta=this.O.constructor.Ka["MasherStrike"+("00"+Math.floor(a/2.5)).slice(-2)];this.Xb();this.ac=!1;wk(this)||(this.Zd||this.xd||this.Od?(this.action="strike",this.V=t.h+1,this.Ta=this.O.constructor.Ka.MasherStrike11,this.Je=this.Ie=0):25<=a+1&&(this.action="ready"))};
Ok.prototype.ready=function(){this.Ta=this.O.constructor.Ka["MasherStrike"+"0010".slice(-2)];this.Xb();wk(this)||!this.Zd&&!this.xd||(this.action="strike",this.V=t.h+1)};
Ok.prototype.strike=function(){var a=t.h-this.V;a+=33;this.Ta=this.O.constructor.Ka["MasherStrike"+("00"+Math.floor(a/3)).slice(-2)];this.Je=this.Ie=0;if(!wk(this))if(33==a)t.c.Y.get("MasherSwing01").play({Cf:.05});else if(36==a){this.ja.Ca+=fc(2);a=Hk(this.ja);a=this.O.Wc(a);a=p(a);for(var b=a.next();!b.done;b=a.next())b=b.value,t.c.Y.get("MasherSlap01").play({Cf:.05}),b.item instanceof X&&t.c.Y.get("MasherSquish"+vb("01","02","03")).play({gain:2/3,Cf:.05}),Bk(b,120,1),this.ja.Ca+=fc(2)}else 48<=
a&&(b=this.xd,this.Od||(b|=this.Zd),b?(this.action="strike",this.V=t.h+1):63<=a+1&&(this.Od?(this.Od=null,this.ge=this.pl,wk(this)):this.action="ready"))};
Ok.prototype.Wc=function(a){var b=new w(a.G,a.m31,a.m32),c=new w(-a.P,-a.m21,-a.m22),d=this.Ob;if(a=nf(b,new w(c.x*d,c.y*d,c.z*d)))d=a.d;var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=p(t.a.zc),g=h.next();!g.done;g=h.next())if(g=g.value,g.fb||!(t.h>g.V)){var k=ek(b,c,g.f,g.ra,g.cb).Ke;!k||0>k.t||k.t>=d||(k.item=g,k.Db=c,Sa(e,k))}b=[];e.length&&b.push(e[0]);a&&b.push(a);return b};Ok.prototype.Rh=Ak;
function Ik(a){Tj.call(this,a);this.Mb=12500;this.Bf=1;this.start=t.h;this.wl=new w(ob(nb)-.5,ob(nb)-.5,ob(nb)-.5);this.wl.oa(1);this.tk=1}Ik.prototype=Object.create(Tj.prototype);Ik.prototype.constructor=Ik;Ik.prototype.create=function(){Tj.prototype.create.call(this);var a=new jg(t.c.wc.get(this.name));a.Ia=this.L;a.transform.scale(.1,.1,.1);a.transform.rotate(0,-90,0);O(a,this);a.create();Pd(a,this.ia)};
Ik.prototype.step=function(){this.transform.Uj(this.wl,this.xl);30<=t.h-this.start&&this.remove();Tj.prototype.step.call(this)};Ik.prototype.remove=function(){t.c.Y.get("shellCasing0"+(pb(3)+1)).play({gain:.625,pitch:this.tk});Tj.prototype.remove.call(this)};function Fk(a){t.Node.call(this,a);this.ec=t.h}Fk.prototype=Object.create(t.Node.prototype);Fk.prototype.constructor=Fk;
Fk.prototype.step=function(){t.Node.prototype.step.call(this);var a=t.h-this.ec-6;0>a||(0==a&&t.c.Y.get(vb("woodSnap01","woodSnap02","woodSnap03")).play({gain:10/60}),5<=(1<=a?a-1:0)&&this.remove())};var pk=[];function qk(){var a=pk.indexOf(this);0>a||pk.splice(a,1)};function Pk(a){Xj.call(this,a);this.Bf=100;this.qg=0;this.ra=4E4;this.Wd=18E4;this.pj=9E4;this.cb=.5*(this.Wd-2*this.ra-6E4);this.ek=12E4;this.Tc=12500;this.Qg=2/3*this.Tc;this.Ej=Xj.sk(125E3);this.Mb=2E5;this.ui=16;this.Ai=this.Bi=this.Xb=this.Qe=this.zj=this.Aj=this.cj=this.Ca=this.hh=this.gi=0;this.Eb=Infinity;this.Ih=[];this.bl=-Infinity;this.fb=!0;this.Ch=0;this.cl=-Infinity;this.dl=Number.NEGATIVE_INFINITY;this.el=4E5;this.Xd={}}Pk.prototype=Object.create(Xj.prototype);f=Pk.prototype;
f.constructor=Pk;f.create=function(){Tj.prototype.create.call(this);var a=this.Oc=new bg("worldCamera");a.mg=6E3;a.dg=5E7;a.Ia=this.L;O(a,this);t.a.ka=a;a=this.Ud=new bg("selfCamera");a.mg=this.Oc.mg;a.dg=this.Oc.dg;a.Ia=this.Oc.L;O(a,t.Te);a=this.Pa=new tk(this);a.Ya=0;O(a,t.Te);a.create();new Ok(this.Pa);this.Pa.ge=this.Pa.fc[0]};
f.step=function(){Xj.prototype.step.call(this);if(!(this.Qa.Mc||this.Qa.pm||10>t.h-this.Ij)){var a=this.Qa.ia.lb;.015<.2126*a.x+.7152*a.y+.0722*a.z||(a=vb(.1125,.175),this.Qa.gb=new w(a,a,a),this.Qa.pm=!0,t.c.Y.get("hit02").play({gain:.5,pitch:2}))}a=this.Qa.Fb.Kb;if(t.a.Kb!=a){t.a.Kb=a;var b=t.a.yf;b.Bj=a.oi;2<=b.Bj&&(t.a.jg=8+t.a.va.Pa.fc.length);t.a.qd=a.qd;t.a.gk();t.a.sf=a.sf;t.a.Hk=a.sf}if(this.fb){for(a=0;a<this.Ih.length;a++){b=this.Ih[a];var c=t.h-30-b.Hg;0>c||(0<b.wa?(b=b.wa-2*c,0>=b&&this.Ih.splice(a--,
1)):0>b.wa&&(b=b.wa+2*c,0<=b&&this.Ih.splice(a--,1)))}this.fb&&(R.lock&&(a=1,this.Pa.O&&(a=Ya(1,this.Pa.O.wj,this.Pa.focus)),a=t.sm*a,this.gi-=R.Ec.x*a,this.hh+=R.Ec.y*a),this.hh=Wa(this.hh,-1073741824,1073741824));a=ic(this.gi);b=ic(this.hh)+fc(1.5*this.zj);c=fc(1.5*this.Aj);yd(this.transform);this.transform.rotate(a,0,0);yd(this.Oc.transform);this.Oc.transform.rotate(0,b,c);t.vl||(this.Oc.transform.rotate((ob(nb)-.5)*this.Ca,(ob(nb)-.5)*this.Ca,0),this.Ca*=.8125);0==(t.h&1)&&(this.Bh()?(a=this.Me*
Math.PI/this.ui,this.cj=6E3*Math.abs(Math.sin(a)),this.Bi=Math.sin(a)*Math.PI/210,this.Xb=(1-Math.abs(Math.sin(a)))*Math.PI/210):(this.cj*=.75,this.Xb*=.75,this.Bi*=.75),this.Ai-=fc(3),0>this.Ai&&(this.Ai=0));this.Oc.transform.m31=this.cb+this.ra-6E3-6E3+this.cj;a=1;this.Pa.O&&(a=Ya(1,this.Pa.O.wj,this.Pa.focus));this.Tc=11E3*Ya(1,2/3,this.Pa.focus);this.Ud.Ld=fc(24*a);this.Oc.Ld=fc(30*a);this.Qa&&(a=this.Qa.qa-this.cb-this.ra,this.f.y>a&&(this.f.y=a,this.B.y=Math.min(this.B.y,0)));a=this.el;a*=a;
for(var d in this.Xd)b=this.Xd[d],sd(this.f,b.f,new w(0,0,0)).Rc()>=a?Qk(b):(b.species.vc.call(b,this),b.wa||b.remove());if(!(2>t.h-this.dl)){d=a;a=null;b=sf(this.f,this.el);b=p(b);for(c=b.next();!c.done;c=b.next())for(c=c.value.Pi.first();null!=c.item;c=c.next)if(c.item instanceof Rk){if(225E8>sd(this.f,c.item.f,new w).Rc()){a=c.item;break}}else if(c.item instanceof W&&!c.item.ke&&!(c.item.Xd||0>=c.item.species.Nc.call(c.item,this))){var e=sd(this.f,c.item.f,new w(0,0,0)).Rc();e<d&&(d=e,a=c.item)}a&&
(a.Wk(this),this.dl=t.h)}}};function Sk(a,b){b.ke=null;b.species.vc.call(b,a);sb(b.species.Y).play();a.cl=t.h;b.wa?(b.Xd=a,a.Xd[b.index]=b,ud(b.fm,b.f),b.gm&&(b.ec=t.h,b.fb=!0,b.B.set(0,0,0),b.Gb.set(0,0,0),Pj.add(b)),b.Ya=0,b.Ug.Ya=0):b.remove()}
f.yj=function(){var a=new w(0,0,0);if(!this.fb)return a;(Xd.d[t.Ba.MoveForwardKey]||R.d[t.Ba.MoveForwardMouseButton])&&--a.z;if(Xd.d[t.Ba.MoveBackwardKey]||R.d[t.Ba.MoveBackwardMouseButton])a.z+=1;(Xd.d[t.Ba.MoveLeftKey]||R.d[t.Ba.MoveLeftMouseButton])&&--a.x;if(Xd.d[t.Ba.MoveRightKey]||R.d[t.Ba.MoveRightMouseButton])a.x+=1;a.oa(1)?(this.Qe+=1/6,1<this.Qe&&(this.Qe=1)):(this.Qe-=1/6,0>this.Qe&&(this.Qe=0));this.Aj=(5*this.Aj-a.x)/6;this.zj=(5*this.zj-a.z)/6;return a};
f.Tk=function(){this.fb&&(Xd.p[t.Ba.JumpKey]||R.p[t.Ba.JumpMouseButton])&&(this.Gi=t.h)};function Hk(a){if(!a.gh){var b=new N;b.set(a.Oc.L);return b}b=sd(Bd(a.Oc.L),a.gh,new w).normalize();var c=new w(b.z,0,-b.x),d=new w(0,1,0);nc(b,c,d).oa(1);nc(d,b,c);var e=new N;e.F=c.x;e.K=c.y;e.M=c.z;e.H=d.x;e.m11=d.y;e.m12=d.z;e.P=b.x;e.m21=b.y;e.m22=b.z;e.G=a.Oc.L.G;e.m31=a.Oc.L.m31;e.m32=a.Oc.L.m32;return e}
function Tk(a,b){0>b&&(a.bl=t.h);b=Wa(a.Eb+b,0,360)-a.Eb;a.Ih.push({Hg:t.h,wa:b});a.Eb+=b;0>=a.Eb&&a.sj()}f.sj=function(){if(this.fb){this.fb=!1;for(var a=p(t.a.zc),b=a.next();!b.done;b=a.next())b=b.value,b.fb&&(b.action.length=0,b.action.unshift("idle"),b.V=NaN,b.path=null);this.Pa.remove();this.Pa=null;t.a.va=null}};
f.Lj=function(){for(var a=null,b=NaN,c=p(Ui.Ni),d=c.next();!d.done;d=c.next()){d=d.value;var e=Mi(d,this.f.z,this.f.x);e>=b||(b=e,a=d)}a=a.zf(this.f.z,this.f.x);this.f.z=a.x;this.f.x=a.y;a=null;if(b=nf(new w(this.f.x,-1E3,this.f.z),new w(0,-1E8,0),eg))this.f.y=b.p.y+this.Wd-this.cb-this.ra,a=Ze(b.item.ba);a&&(a!=this.Qa&&(this.Ij=t.h),this.Qa=a,ag(this.f,a,this.ia.lb))};function X(){Xj.call(this,"mantato");this.Bf=150;this.qg=0;this.ra=30800;this.Wd=189200;this.pj=86E3;this.cb=.5*(this.Wd-2*this.ra-6E4);this.ek=12E4;this.Tc=1/3*14887;this.Qg=2/3*this.Tc;this.Ej=Xj.sk(3E5);this.Mb=2E5;this.Ci=-Infinity;this.fb=!0;this.Eb=360;this.tb=[];this.Ge=[];this.ma=new N;this.h=this.$i=this.ef=0;this.Df=new N;this.li=0;this.Cc=11E4;this.kh=0;this.A=t.c.ta.get("physicalCardThreshold");this.ca=t.c.N.get("monsterWalk01");this.color=fd;this.action=["idle"];this.V=NaN;this.km=this.Ki=
-Infinity;this.ih=1;this.kj=15E4;return this}X.prototype=Object.create(Xj.prototype);X.prototype.constructor=X;X.ue=12;X.La=NaN;
X.lf=function(){X.$=t.c.Jb.get("defaultMaterial");var a=t.c.Jb.get("monsterSkin").da();a.name="monsterSplatter";a.Ga=1;t.c.Jb.add(a);Uk.A=t.c.ta.get("gib");Uk.ca=t.c.N.get("spudGib01");a=[];var b=new N;b.F=1;b.K=0;b.M=-0;b.H=0;b.m11=1;b.m12=0;b.P=0;b.m21=-0;b.m22=1;b.G=0;b.m31=0;b.m32=-0;a.push(b);b=new N;b.F=.9916;b.K=-.1173;b.M=.055;b.H=.1259;b.m11=.9725;b.m12=-.1958;b.P=-.0305;b.m21=.201;b.m22=.9791;b.G=-3498;b.m31=3796;b.m32=6804;a.push(b);b=new N;b.F=.9749;b.K=-.1934;b.M=.1102;b.H=.2213;b.m11=
.8963;b.m12=-.3843;b.P=-.0244;b.m21=.399;b.m22=.9166;b.G=-6400;b.m31=-2683;b.m32=15101;a.push(b);b=new N;b.F=.9601;b.K=-.2246;b.M=.1669;b.H=.2797;b.m11=.7517;b.m12=-.5972;b.P=.0087;b.m21=.62;b.m22=.7845;b.G=-8393;b.m31=-17164;b.m32=25181;a.push(b);b=new N;b.F=.9541;b.K=-.2123;b.M=.2114;b.H=.2942;b.m11=.5306;b.m12=-.795;b.P=.0566;b.m21=.8206;b.m22=.5686;b.G=-9429;b.m31=-39030;b.m32=35202;a.push(b);b=new N;b.F=.9591;b.K=-.1521;b.M=.2388;b.H=.2712;b.m11=.2519;b.m12=-.929;b.P=.0811;b.m21=.9557;b.m22=
.2828;b.G=-9721;b.m31=-68375;b.m32=44142;a.push(b);b=new N;b.F=.9359;b.K=-.2158;b.M=.2785;b.H=.2565;b.m11=-.1246;b.m12=-.9585;b.P=.2415;b.m21=.9685;b.m22=-.0613;b.G=-7782;b.m31=-63561;b.m32=42925;a.push(b);b=new N;b.F=.9573;b.K=-.1734;b.M=.2312;b.H=.1975;b.m11=-.1913;b.m12=-.9614;b.P=.2109;b.m21=.9661;b.m22=-.1489;b.G=-4587;b.m31=-61424;b.m32=39511;a.push(b);b=new N;b.F=.9812;b.K=-.1297;b.M=.143;b.H=.1237;b.m11=-.1466;b.m12=-.9814;b.P=.1482;b.m21=.9807;b.m22=-.1278;b.G=-2376;b.m31=-62808;b.m32=37771;
a.push(b);b=new N;b.F=.9889;b.K=-.134;b.M=.0638;b.H=.053;b.m11=-.0825;b.m12=-.9952;b.P=.1386;b.m21=.9875;b.m22=-.0745;b.G=-104;b.m31=-64955;b.m32=38224;a.push(b);b=new N;b.F=.9803;b.K=-.1963;b.M=.0226;b.H=.0119;b.m11=-.0555;b.m12=-.9984;b.P=.1973;b.m21=.979;b.m22=-.0521;b.G=2290;b.m31=-66053;b.m32=39447;a.push(b);b=new N;b.F=.9587;b.K=-.2839;b.M=.017;b.H=.0035;b.m11=-.0481;b.m12=-.9988;b.P=.2843;b.m21=.9577;b.m22=-.0451;b.G=4830;b.m31=-66621;b.m32=39607;a.push(b);b=new N;b.F=.939;b.K=-.3438;b.M=.0072;
b.H=-.0041;b.m11=-.0323;b.m12=-.9995;b.P=.3439;b.m21=.9385;b.m22=-.0317;b.G=6758;b.m31=-66864;b.m32=40168;a.push(b);b=new N;b.F=.9324;b.K=-.3614;b.M=5E-4;b.H=-.0114;b.m11=-.0308;b.m12=-.9995;b.P=.3612;b.m21=.9319;b.m22=-.0328;b.G=7520;b.m31=-66863;b.m32=40232;a.push(b);X.kf=a;a=[];b=new N;b.F=1;b.K=0;b.M=-0;b.H=0;b.m11=1;b.m12=-0;b.P=0;b.m21=0;b.m22=1;b.G=0;b.m31=-0;b.m32=0;a.push(b);b=new N;b.F=.9927;b.K=-.0183;b.M=-.119;b.H=.0277;b.m11=.9966;b.m12=.0773;b.P=.1171;b.m21=-.0801;b.m22=.9899;b.G=70;
b.m31=-3027;b.m32=-619;a.push(b);b=new N;b.F=.9816;b.K=-.0289;b.M=-.1886;b.H=.022;b.m11=.999;b.m12=-.0389;b.P=.1895;b.m21=.034;b.m22=.9813;b.G=288;b.m31=-5629;b.m32=253;a.push(b);b=new N;b.F=.9973;b.K=.0022;b.M=.074;b.H=.0054;b.m11=.9948;b.m12=-.1019;b.P=-.0738;b.m21=.1021;b.m22=.992;b.G=-219;b.m31=-2573;b.m32=764;a.push(b);b=new N;b.F=.9877;b.K=-.0202;b.M=-.155;b.H=.0055;b.m11=.9955;b.m12=-.0949;b.P=.1562;b.m21=.0929;b.m22=.9833;b.G=335;b.m31=259;b.m32=689;a.push(b);b=new N;b.F=.9986;b.K=.0123;b.M=
-.0519;b.H=-.0065;b.m11=.9937;b.m12=.1115;b.P=.053;b.m21=-.111;b.m22=.9924;b.G=178;b.m31=-3079;b.m32=-875;a.push(b);b=new N;b.F=.9996;b.K=.007;b.M=-.0256;b.H=-.0062;b.m11=.9994;b.m12=.0327;b.P=.0258;b.m21=-.0326;b.m22=.9991;b.G=110;b.m31=-5793;b.m32=-254;a.push(b);b=new N;b.F=.9893;b.K=-.0894;b.M=.1151;b.H=.0859;b.m11=.9957;b.m12=.0348;b.P=-.1177;b.m21=-.0245;b.m22=.9928;b.G=-944;b.m31=-2885;b.m32=-285;a.push(b);X.qb=a};
X.prototype.create=function(){this.transform.rotate(ob(nb)*Math.PI*2,0,0);Qd(this,37500);pk.push(this);Xj.prototype.create.call(this);t.a.zc.push(this)};X.prototype.step=function(){X.prototype[this.action[0]].call(this);this.y=this.f.y+this.cb+this.ra-this.Wd+12500;Xj.prototype.step.call(this)};
X.prototype.Vc=function(){var a=Bd(this.L);a.y+=this.cb+this.ra-this.Wd+103400;var b=sd(Bd(t.ka.L),a,new w),c=b.oa(1);c=Math.min(1,c/(2*this.Wd));var d=new w(0,1,0),e=nc(d,b,new w).normalize();nc(b,e,d);var h=t.ka.L.Oe(),g=t.ka.L.wd();this.ma.Ue(td(t.ka.L.Ne(),e,c).normalize());this.ma.Ve(td(h,d,c).normalize());this.ma.We(td(g,b,c).normalize());Id(this.ma,a);this.ye?this.Df.set(this.ye[this.h%this.ye.length]):this.Df.reset();this.fb&&(a=this.L,a=Math.round(4*(Math.atan2(a.P,a.m22)-Math.atan2(t.ka.L.G-
a.G,t.ka.L.m32-a.m32))/Math.PI),0>a&&(a+=8),8<=a&&(a-=8),this.$i=a,this.Df.rotate(this.$i*Math.PI/4,0,0));zd(this.ma,this.Df,this.Df);this.ma.G+=this.ma.H*this.li;this.ma.m31+=this.ma.m11*this.li;this.ma.m32+=this.ma.m12*this.li;a=1+this.kh;this.ma.scale(a,a,a);if(this.Nh){a=p(this.Nh);for(b=a.next();!b.done;b=a.next()){c=b.value;c.ig.G+=this.f.x;c.ig.m31+=this.f.y;c.ig.m32+=this.f.z;b=c.Nl;c=Bd(c.ig);d=this.Df;e=new N;h=d.F*-d.G+d.K*-d.m31+d.M*-d.m32;g=d.H*-d.G+d.m11*-d.m31+d.m12*-d.m32;var k=d.P*
-d.G+d.m21*-d.m31+d.m22*-d.m32,l=d.H,m=d.P,n=d.K,r=d.m11,q=d.m21,u=d.M,z=d.m12,y=d.m22;e.F=d.F;e.H=n;e.P=u;e.G=h;e.K=l;e.m11=r;e.m21=z;e.m31=g;e.M=m;e.m12=q;e.m22=y;e.m32=k;e.ub(c,c);d={};d.f=c;d.ec=t.h+1;e=7E3*b;h=rb(2)?-e:e;k=mb()*(180/2147483648);g=Math.cos(k);k=Math.sin(k);d.Aa=new wd;d.Aa.F=g*h;d.Aa.K=k*h;d.Aa.H=-k*e;d.Aa.m11=g*e;this.tb.push(d);this.tb.length>X.ue&&this.tb.shift();d={};d.f=c;d.ec=t.h+1;b=7E3*b+3500;c=rb(2)?-b:b;h=mb()*(180/2147483648);e=Math.cos(h);h=Math.sin(h);d.Aa=new wd;
d.Aa.F=e*c;d.Aa.K=h*c;d.Aa.H=-h*b;d.Aa.m11=e*b;this.Ge.push(d);this.Ge.length>X.ue&&this.Ge.shift()}delete this.Nh}};
X.prototype.$a=function(){X.La+=2;255<X.La&&(v.clear(v.STENCIL_BUFFER_BIT),X.La=130);t.$b(1);v.colorMask(!1,!1,!1,!1);v.stencilFunc(v.ALWAYS,X.La-128,255);v.stencilOp(v.KEEP,v.KEEP,v.REPLACE);var a=this.ma.wd(),b=lc(a,Bd(this.ma));t.zb(sg);t.ab(t.c.ta.get("monoThresholdEffect"));t.Lb(0,t.c.N.get("smokePuff01"));X.$.bind();t.rb(0);t.Pb(0);t.A.J("color",fd);for(var c=p(this.tb),d=c.next();!d.done;d=c.next()){var e=d.value;d=this.Df.ub(e.f,new w);if(!(0>lc(d,a)-b)){var h=4>t.h-e.ec?1.4:1;e=(new wd).set(e.Aa);
e.F*=h;e.K*=h;e.H*=h;e.m11*=h;e=xd(this.ma,e,new N);Id(e,d);t.A.J("modelMatrix",e);v.drawArrays(v.TRIANGLE_FAN,tg(0,1),4)}}t.$b(2);v.colorMask(!0,!0,!0,!0);v.stencilFunc(v.GEQUAL,X.La-1,127);v.stencilOp(v.KEEP,v.KEEP,v.REPLACE);this.A=t.h==this.Ye+1?t.c.ta.get("flashCardThreshold"):t.c.ta.get("physicalCardThreshold");t.zb(sg);t.ab(this.A);t.Lb(0,this.ca);X.$.bind();t.A.J("ambientLight",this.ia.lb,!1);t.rb(0);t.Pb(0);t.A.J("color",this.color);a=new N;a.set(this.ma);b=this.Cc;a.F*=b;a.K*=b;a.M*=b;a.H*=
-b;a.m11*=-b;a.m12*=-b;t.A.J("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,tg(this.$i*this.ef+this.h,this.ob),4);this.kh*=.75;if("flashCardThreshold"!=this.A.name)for(t.$b(0),v.stencilFunc(v.EQUAL,X.La-1,255),v.stencilOp(v.KEEP,v.KEEP,v.KEEP),a=this.ma.wd(),b=lc(a,Bd(this.ma)),t.zb(sg),t.ab(t.c.ta.get("monoEffect")),t.Lb(0,t.c.N.get("splatter01")),t.c.Jb.get("monsterSplatter").bind(),t.rb(1),t.Pb(0),t.A.J("ambientLight",this.ia.lb,!1),t.A.J("color",Uk.qf),c=p(this.Ge),d=c.next();!d.done;d=c.next())e=
d.value,d=this.Df.ub(e.f,new w),0>lc(d,a)-b||(h=4>t.h-e.ec?1.4:1,e=(new wd).set(e.Aa),e.F*=h,e.K*=h,e.H*=h,e.m11*=h,e=xd(this.ma,e,new N),Id(e,d),t.A.J("modelMatrix",e),v.drawArrays(v.TRIANGLE_FAN,tg(0,1),4))};X.prototype.idle=function(){isNaN(this.V)&&(this.V=t.h,this.ca=t.c.N.get("monsterWalk01"),this.ob=64,this.ef=8,this.ye=X.qb);var a=t.h-this.V;this.h=0;0==a%30&&(Vk(this,t.a.va.f),this.action[0]="rush",this.action.unshift("alert"),this.V=NaN,this.path=null);this.h=(Math.floor(a/8)%3+6)%8};
X.prototype.wander=function(){isNaN(this.V)&&(this.V=t.h,this.ca=t.c.N.get("monsterWalk01"),this.ob=64,this.ef=8,this.ye=X.qb,this.Tc=1/3*14887);var a=t.h-this.V;if(!this.path){var b=sb(Ui.Ni),c=pb(b.I-b.D)+b.D;b=pb(b.v-b.s)+b.s;Wk(this,c,b)}0==a%30&&(Vk(this,t.a.va.f),this.action[0]="rush",this.action.unshift("alert"),this.V=NaN,this.path=null);this.h=Math.floor(a/3)%8};
X.prototype.alert=function(){isNaN(this.V)&&(this.V=t.h,this.ca=t.c.N.get("monsterWalk01"),this.ob=64,this.ef=8,this.ye=X.qb);var a=t.h-this.V;this.h=0;18==a&&(this.action.shift(),this.ih&&Xk(this)&&(this.action.unshift("attack"),this.V=NaN))};X.prototype.hit=function(){isNaN(this.V)&&(this.V=t.h,this.ca=t.c.N.get("monsterWalk01"),this.ob=64,this.ef=8,this.ye=X.qb,this.dm=pb(8));var a=t.h-this.V;this.h=(this.dm+Math.floor(a/2))%8;240==a&&(this.action.shift(),this.V=NaN)};
X.prototype.attack=function(){isNaN(this.V)&&(this.V=t.h,this.ca=t.c.N.get("monsterWalk01"),this.ob=64,this.ef=8,this.ye=X.qb,Vk(this,t.a.va.f));var a=t.h-this.V;this.h=Math.floor(a/3)%8;0==a&&t.c.Y.get("MasherSwing01").play({gain:1,pitch:1.2});if(6==a){var b=sd(t.a.va.f,this.f,new w);if(b.oa(1)<this.kj){b.y=0;b.oa(1);b.y=1;b.oa(9E3);var c=t.a.va;c.B.add(b);c.$g=Number.NEGATIVE_INFINITY;c.Gi=Number.NEGATIVE_INFINITY;c.Gh=!0;Tk(c,-1);c.Ca+=fc(15);t.c.Y.get("MasherSlap01").play({gain:1,pitch:1})}}45==
a&&(this.action.shift(),this.V=NaN)};X.prototype.rush=function(){isNaN(this.V)&&(this.V=t.h,this.ca=t.c.N.get("monsterWalk01"),this.ob=64,this.ef=8,this.ye=X.qb,this.Tc=7443.5);var a=t.h-this.V;t.h<this.em+12||Wk(this,t.a.va.f.z,t.a.va.f.x);0<a&&0==a%6&&this.ih&&Xk(this)&&(this.action.unshift("attack"),this.V=NaN);this.h=Math.floor(a/2)%8};
X.prototype.death=function(){isNaN(this.V)&&(this.V=t.h,this.ca=t.c.N.get("monsterDeath01"),this.ob=16,this.ef=0,this.ye=X.kf);var a=t.h-this.V;4<=a&&(a-=4);this.h=Math.floor(a/4);13<this.h&&(this.h=13);6==a&&t.a.Kl();20==a&&(this.li=.5*-this.Cc);24==a&&t.c.Y.get(vb("bodyThud01","bodyThud02")).play({gain:.5});720<=a&&this.remove()};function Xk(a){return sd(t.a.va.f,a.f,new w).Rc()<a.kj*a.kj}function Wk(a,b,c){t.h!=Vi&&(Vi=a.em=t.h,Wi=300,a.path=Yi(a.f.z,a.f.x,b,c))}
X.prototype.yj=function(){var a=new w;if(!this.path||"alert"==this.action[0]||"hit"==this.action[0]||"attack"==this.action[0])return a;for(var b,c;;){b=this.path[0];c=b.getParameter(this.f.z,this.f.x);if(c<b.length)break;this.path.shift();if(!this.path.length)return this.path=null,a}b=b.evaluate(c+1E5);a.z=b.x-this.f.z;a.x=b.y-this.f.x;Vk(this,new w(b.y,0,b.x));return a};X.prototype.Xf=function(a){this.fb&&(this.Ye=t.h,this.B.x=0,this.B.z=0,this.Eb-=a,0>=this.Eb&&this.sj())};
X.prototype.sj=function(){this.fb&&(this.fb=!1,this.action=["death"],this.V=NaN,t.a.sf--,this.path=null,qk.call(this),Pj.remove(this))};X.prototype.remove=function(){this.Ug&&this.Ug.remove();var a=t.a.zc.indexOf(this);0<=a&&t.a.zc.splice(a,1);Xj.prototype.remove.call(this);this.fb&&(qk.call(this),t.a.sf--)};function Vk(a,b){b=sd(b,a.f,new w(0,0,0));b.y=0;b.oa(1);a.transform.F=b.z;a.transform.M=-b.x;a.transform.P=b.x;a.transform.m22=b.z}
function Ek(a,b,c){a.fb&&("attack"==a.action[0]&&a.action.shift(),"hit"!=a.action[0]&&a.action.unshift("hit"),a.V=NaN,a.Ci=t.h);var d=c*(ob(nb)+1),e=new Uk;e.frame=pb(16);e.mb=12E3*(ob(nb)+1);e.mb*=c;e.f.set(0,0,5E4);b.ub(e.f,e.f);e.B.x=5E3*(2*ob(nb)-1);e.B.y=5E3*(2*ob(nb)-1);e.B.z=2E4*(ob(nb)+1);Ad(b,e.B,e.B);e.af=fc(60*(.25+ob(nb)));rb(2)&&(e.af=-e.af);O(e,t.ug);e.create();e=new Uk;e.frame=pb(16);e.mb=8E3*(ob(nb)+1);e.mb*=c;e.f.set(0,0,5E4);b.ub(e.f,e.f);e.B.x=5E3*(2*ob(nb)-1);e.B.y=5E3*(2*ob(nb)-
1);e.B.z=2E4*(ob(nb)+1);Ad(b,e.B,e.B);e.Eg=Uk.qf;O(e,t.ug);e.create();c=Math.sqrt(3*c)+ob(nb)-.5;for(e=0;e<c;e++){var h=new Uk;h.Hi=120;h.frame=pb(16);h.mb=12E3;h.f.set(0,0,5E4);b.ub(h.f,h.f);h.B.x=2*ob(nb)-1;h.B.y=2*ob(nb)-1;h.B.z=2*ob(nb);h.B.oa(1E4*(ob(nb)+1));h.B.y+=6E3*ob(nb);Ad(b,h.B,h.B);h.af=fc(60*(.25+ob(nb)));rb(2)&&(h.af=-h.af);rb(2)&&(h.Eg=Uk.qf);O(h,t.ug);h.create()}Vk(a,Bd(t.ka.L));Rd(a);a.Nh||(a.Nh=[]);b.G-=a.f.x;b.m31-=a.f.y;b.m32-=a.f.z;a.Nh.push({ig:b,Nl:d});a.kh=Math.min(a.kh+.2,
.25)}function Yk(){Tj.call(this,"potato");this.Mb=1E5;this.ra=12500;this.cb=0;this.nc=!1;return this}Yk.prototype=Object.create(Tj.prototype);f=Yk.prototype;f.constructor=Yk;f.create=function(){this.V=t.h;this.ma=new N;this.h=0;this.ob=16;this.Cc=25E3;this.A=t.c.ta.get("physicalCardThreshold");this.ca=t.c.N.get("Potato");Qd(this,18750);Tj.prototype.create.call(this)};f.Oi=function(){this.remove()};
f.Vc=function(){var a=Bd(this.L),b=sd(Bd(t.ka.L),a,new w),c=b.oa(1);c=Math.min(1,c/(4*this.ra));var d=new w(0,1,0),e=nc(d,b,new w).normalize();nc(b,e,d);var h=t.ka.L.Oe(),g=t.ka.L.wd();this.ma.Ue(td(t.ka.L.Ne(),e,c).normalize());this.ma.Ve(td(h,d,c).normalize());this.ma.We(td(g,b,c).normalize());Id(this.ma,a);a=t.h-this.V;this.h=3*Math.floor(a/2);this.h%=this.ob;0==Math.floor(a/2)%13?(this.A=t.c.ta.get("flashCardThreshold"),this.color=fd):1==Math.floor(a/2)%13?(this.A=t.c.ta.get("flashCardThreshold"),
this.color=gd):(this.A=t.c.ta.get("physicalCardThreshold"),this.color=fd)};f.$a=function(){this.Vc();t.zb(sg);t.ab(this.A);t.Lb(0,this.ca);X.$.bind();t.A.J("ambientLight",this.ia.lb,!1);t.rb(0);t.Pb(0);t.A.J("color",this.color);var a=new N;a.set(this.ma);var b=this.Cc;a.F*=b;a.K*=b;a.M*=b;a.H*=-b;a.m11*=-b;a.m12*=-b;t.A.J("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,tg(this.h,this.ob),4)};f.remove=function(){this.vm.ih+=1;Tj.prototype.remove.call(this)};
function Uk(){t.Na.call(this,"SpudGib");pg.call(this);this.ob=16;this.frame=0;this.mb=25E3;this.scale=1;this.eg=rb(2);this.Ed=ic(mb());this.af=0;this.Mb=2*this.mb;this.V=this.Zj=t.h+4;this.B=new w(0,0,0);this.Hi=600;this.Eg=Uk.Eg;this.qf=Uk.qf}Uk.prototype=Object.create(t.Na.prototype);Uk.prototype.constructor=Uk;Uk.Eg=new G(191,158,101,255);Uk.qf=new G(255,255,95,255);
Uk.prototype.create=function(){this.transform.G=this.f.x;this.transform.m31=this.f.y;this.transform.m32=this.f.z;t.Na.prototype.create.call(this);Zk(this)};function Zk(a){a.Sh=t.h;a.qe=a.f.da();var b=rf(a.qe,a.B);b?(a.Yg=b.p,a.$h=b.n,a.Hf=Math.ceil(t.h+b.t),a.Zg=b.item):a.Hf=Number.POSITIVE_INFINITY}
Uk.prototype.step=function(){this.Zg&&this.Zg.ud>this.Sh&&Zk(this);if(t.h<this.Hf){this.$j&&this.$j.ud>this.Sh&&(this.$j=null,this.V=t.h,this.B.set(0,0,0),this.Vi=!1,Zk(this));var a=t.h-this.V;0>a||(this.Vi?(this.f.y=this.qe.y+this.B.y*a,this.transform.m31=this.f.y):(this.f.set(this.qe.x+this.B.x*a,this.qe.y+.5*(2*this.B.y+Oj.y*a)*a,this.qe.z+this.B.z*a),this.transform.G=this.f.x,this.transform.m31=this.f.y,this.transform.m32=this.f.z,t.h%3||(this.Ed+=this.af)))}else t.h==this.Hf&&(this.f.set(this.Yg.x,
this.Yg.y,this.Yg.z),this.$j=this.Zg,this.transform.G=this.f.x,this.transform.m31=this.f.y,this.transform.m32=this.f.z,this.Eg==this.qf&&(Gg(t.a.Ck,this.Yg,this.$h,ic(mb()),this.mb*this.scale*2.5,pb(4),4),this.remove()),-1==this.$h.y?(this.qe=this.f.da(),this.V=t.h+180+pb(360),this.B.set(0,0,0),this.af=0,this.Vi=!1,this.Sh=t.h,(a=nf(this.qe,this.B))?(this.Yg=a.p,this.$h=a.n,this.Hf=Math.ceil(t.h+a.t),this.Zg=a.item):this.Hf=Number.POSITIVE_INFINITY):0==this.$h.y?(this.qe=this.f.da(),this.V=t.h+180+
pb(360),this.B.set(0,-500,0),this.Vi=!0,this.Sh=t.h,(a=nf(this.qe,this.B))?(this.Yg=a.p,this.$h=a.n,this.Hf=Math.ceil(t.h+a.t),this.Zg=a.item):this.Hf=Number.POSITIVE_INFINITY):(this.qe=this.f.da(),this.V=Number.POSITIVE_INFINITY,this.B.set(0,0,0),this.af=0,this.Vi=!1,this.Sh=t.h,this.Hf=Number.POSITIVE_INFINITY,this.Zg=null));t.h-this.Zj>this.Hi&&this.remove();t.Na.prototype.step.call(this)};
Uk.prototype.$a=function(){qg.call(this,this.L);t.zb(sg);t.ab(Uk.A);t.Lb(0,Uk.ca);t.rb(0);t.$b(2);t.Pb(0);t.A.J("modelMatrix",this.L);t.A.J("color1",this.Eg);t.A.J("color2",this.qf);t.A.J("ambientLight",this.ia.lb);v.drawArrays(v.TRIANGLE_FAN,tg(this.frame,this.ob),4);t.Na.prototype.$a.call(this)};function W(a){Tj.call(this,"loot");this.species=a;this.wa=a.wa;this.ra=37500;this.cb=0;this.qg=.8;this.ec=t.h+pb(600);this.fb=!0}W.prototype=Object.create(Tj.prototype);W.prototype.constructor=W;
W.Fl=function(){var a=[t.c.Y.get("coinPurse01"),t.c.Y.get("coinPurse02"),t.c.Y.get("coinPurse03"),t.c.Y.get("coinPurse04")],b=[t.c.Y.get("ingot01"),t.c.Y.get("ingot02")],c=[t.c.Y.get("gem01"),t.c.Y.get("gem02"),t.c.Y.get("gem03")],d=[t.c.Y.get("crumplePaper01"),t.c.Y.get("crumplePaper02")],e={Va:t.c.wc.get("moneyNugget"),wa:1,Y:c,Nc:W.vb,Jc:W.qb,vc:W.La};a={Va:t.c.wc.get("moneyCoin"),wa:5,Y:a,Nc:W.vb,Jc:W.qb,vc:W.La};d={Va:t.c.wc.get("moneyBundle"),wa:25,Y:d,Nc:W.vb,Jc:W.qb,vc:W.La};b={Va:t.c.wc.get("moneyBar"),
wa:125,Y:b,Nc:W.vb,Jc:W.qb,vc:W.La};var h={Va:t.c.wc.get("gemRuby"),wa:2,Y:c,Nc:W.vb,Jc:W.qb,vc:W.La},g={Va:t.c.wc.get("gemEmerald"),wa:10,Y:c,Nc:W.vb,Jc:W.qb,vc:W.La};c={Va:t.c.wc.get("gemSapphire"),wa:50,Y:c,Nc:W.vb,Jc:W.qb,vc:W.La};W.dh=[e,h,a,a,a,a,a,g,d,c,b]};W.Qm=function(a,b,c){for(;a;){for(var d=0;d<W.dh.length&&!(W.dh[d].wa>a);)d++;if(1==b)--d;else if(0==b)d=Math.floor(ob(nb)*d);else{var e=2*b;e=1<=e?2-e:1/e;d=Math.floor(Math.pow(ob(nb),e)*d)}d=W.dh[d];a-=d.wa;c.push(new W(d))}};f=W.prototype;
f.create=function(){this.V=t.h;this.ma=new N;this.h=0;this.ob=16;this.A=t.c.ta.get("physicalCardThreshold");if(this.species.Va){var a=this.Va=new jg(this.species.Va);a.Ia=this.L;O(a,this);a.create();this.Mb=a.src.Mb;Pd(a,this.ia)}Qd(this,18E3);Tj.prototype.create.call(this)};
f.step=function(){if(this.Va){var a=t.h-this.ec;a=3*Math.floor(a/3);yd(this.Va.transform);this.Va.transform.rotate((a+.5*Math.sin(a))/6,Math.PI/4,0)}this.Xd?t.Na.prototype.step.call(this):(this.fb?(60==t.h-this.ec&&(this.fb=!1,Pj.remove(this)),Tj.prototype.step.call(this)):(this.ke&&(a=sd(new w(this.ke.f.x,this.ke.f.y,this.ke.f.z),this.f,new w(0,0,0)),a.Rc()<Math.pow(5E4,2)?Sk(this.ke,this):(a.y*=5,a.oa(25E3),this.f.x+=a.x,this.f.y+=a.y,this.f.z+=a.z),this.transform.G=this.f.x,this.transform.m31=
this.f.y,this.transform.m32=this.f.z),t.Na.prototype.step.call(this)),this.Va&&W.El(this))};f.Wk=function(a){this.ke=a;this.fm=this.f.da();if(this.gm=this.fb)this.fb=!1,Pj.remove(this);this.species.Jc.call(this,this.ke);this.V=t.h};f.remove=function(){this.Xd&&Qk(this);t.Na.prototype.remove.call(this);Pj.remove(this);this.species.Ib&&(t.a.ld[this.species.Ib.lc]-=this.wa);this.Va&&this.Va.remove();this.Cd&&(this.Cd.Ng=null,this.Cd.Hg=t.h,this.Cd=null)};f.Lj=function(){this.ke||this.remove()};
W.El=function(a){a=a.ia.lb;a.x=Math.min(1,a.x+.01);a.y=Math.min(1,a.y+.01);a.z=Math.min(1,a.z+.01)};
W.prototype.Vc=function(){var a=Bd(this.L);this.wa<this.species.wa&&(a.y-=21875);var b=sd(Bd(t.ka.L),a,new w),c=b.oa(1);c=Math.min(1,c/(4*this.ra));var d=new w(0,1,0),e=nc(d,b,new w).normalize();nc(b,e,d);var h=t.ka.L.Oe(),g=t.ka.L.wd();this.ma.Ue(td(t.ka.L.Ne(),e,c).normalize());this.ma.Ve(td(h,d,c).normalize());this.ma.We(td(g,b,c).normalize());Id(this.ma,a);this.h=this.ke?Math.floor(Math.min(15,(t.h-this.V)/2+8)):this.wa<this.species.wa?12:Math.floor((t.h-this.V)/3)%8};
W.prototype.$a=function(){this.Vc();t.zb(sg);t.ab(this.A);t.Lb(0,this.species.bf);X.$.bind();t.A.J("ambientLight",this.ia.lb,!1);t.rb(0);t.Pb(0);t.A.J("color",fd);var a=new N;a.set(this.ma);var b=this.species.Cc;a.F*=b;a.K*=b;a.M*=b;a.H*=-b;a.m11*=-b;a.m12*=-b;t.A.J("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,tg(this.h,this.ob),4)};W.Kf=function(a){a=p(a.Pa.fc);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b instanceof this.species.Ib)return Math.min(b.Qf-zk(b)-b.Nf,this.wa);return 0};
W.lf=function(a){a=p(a.Pa.fc);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b instanceof this.species.Ib){b.Nf+=this.wa;break}};W.ue=function(a){a=p(a.Pa.fc);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b instanceof this.species.Ib){var c=Math.min(this.wa,b.Qf-zk(b));b.Za+=c;b.Nf-=c;this.wa-=c;t.a.ld[b.constructor.lc]-=c;t.a.Ll(this.species,c);t.a.ff()}};W.vb=function(){return this.wa};W.qb=function(){};W.La=function(){t.a.qd-=this.wa;this.wa=0;0>t.a.qd&&(t.a.qd=0);t.a.gk()};
function Qk(a){for(var b=p(a.Xd.Pa.fc),c=b.next();!c.done;c=b.next())c=c.value,c instanceof a.species.Ib&&(c.Nf-=a.wa);a.Ya=-1;a.Ug.Ya=-1;delete a.Xd.Xd[a.index];a.Xd=null}W.Um=function(a){return Math.min(360-a.Eb-a.Ch,this.wa)};W.Tm=function(a){a.Ch+=this.species.wa};W.Rm=function(a){Tk(a,this.species.wa);a.Ch-=this.species.wa};function Rk(a){t.Na.call(this,"LootGun");this.species=a;this.ra=37500;this.Mb=87500}Rk.prototype=Object.create(t.Na.prototype);f=Rk.prototype;f.constructor=Rk;
f.create=function(){this.transform.G=this.f.x;this.transform.m31=this.f.y;this.transform.m32=this.f.z;this.ma=new N;this.A=t.c.ta.get("physicalCardThreshold");Qd(this,37500);t.Na.prototype.create.call(this)};f.Wk=function(a){Sk(a,this)};f.remove=function(){this.Cd&&(this.Cd.Ng=null,this.Cd.Hg=t.h,this.Cd=null);--t.a.ld.gun;t.Na.prototype.remove.call(this)};
f.Vc=function(){var a=Bd(this.L);a.y+=6250*Math.sin(t.h*Math.PI/30);var b=sd(Bd(t.ka.L),a,new w),c=b.oa(1);c=Math.min(1,c/(4*this.ra));var d=new w(0,1,0),e=nc(d,b,new w).normalize();nc(b,e,d);var h=t.ka.L.Oe(),g=t.ka.L.wd();this.ma.Ue(td(t.ka.L.Ne(),e,c).normalize());this.ma.Ve(td(h,d,c).normalize());this.ma.We(td(g,b,c).normalize());Id(this.ma,a)};
f.$a=function(){this.Vc();t.zb(sg);t.ab(this.A);t.Lb(0,this.species.bf);X.$.bind();var a=this.ia.lb.da();a.x+=.1;a.y+=.1;a.z+=.1;t.A.J("ambientLight",a,!1);t.rb(0);t.Pb(0);t.A.J("color",fd);a=new N;a.set(this.ma);var b=this.species.Cc;a.F*=b;a.K*=b;a.M*=b;a.H*=-b;a.m11*=-b;a.m12*=-b;t.A.J("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,tg(0,1),4)};Rk.Bc=function(a){a=p(a.Pa.fc);for(var b=a.next();!b.done;b=a.next())if(b.value instanceof this.species.Ib)return 0;return 1};Rk.kf=function(){};
Rk.Pc=function(a){t.a.en=t.a.Kb;var b=new this.species.Ib(a.Pa);a.Pa.ge=b};function Jk(a){t.Fa.call(this,a);pg.call(this);this.A=t.c.ta.get("physicalCard");this.ca=t.c.N.get("smokePuff02");this.$=Jk.$;this.color=new G(Jk.color.r,Jk.color.jb,Jk.color.pa,255);this.frame=0;this.ob=16;this.B=new w;this.Gb=new w;this.scale=1;this.Ed=ic(mb());this.ec=t.h}Jk.prototype=Object.create(t.Fa.prototype);Jk.prototype.constructor=Jk;Jk.$=new Td;Jk.$.Ga=2;Jk.color=new G(144,144,144,255);
Jk.prototype.step=function(){var a=t.h-this.ec;a=Math.pow(a/540,.625);this.frame=Math.floor(9*a);this.alpha=.25*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.Oa=this.alpha*Jk.color.Oa&255;this.transform.m31+=200;this.B.scale(.8125);a=new w(.5*this.Gb.x+.5*this.B.x,.5*this.Gb.y+.5*this.B.y,.5*this.Gb.z+.5*this.B.z);this.transform.G+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.Gb.set(this.B.x,this.B.y,this.B.z);t.Fa.prototype.step.call(this)};
Jk.prototype.$a=function(){rg.call(this);t.Fa.prototype.$a.call(this)};function Dk(a){t.Fa.call(this,a);pg.call(this);this.A=t.c.ta.get("physicalCard");this.ca=t.c.N.get("smokePuff02");this.$=Jk.$;this.color=new G(Dk.color.r,Dk.color.jb,Dk.color.pa,255);this.frame=0;this.ob=16;this.B=new w;this.Gb=new w;this.scale=1;this.Ed=ic(mb());this.ia={za:4294967295,lb:new w(1,1,1)};this.ec=t.h}Dk.prototype=Object.create(t.Fa.prototype);Dk.prototype.constructor=Dk;Dk.color=new G(212,212,212,255);
Dk.prototype.step=function(){var a=t.h-this.ec;a/=this.Hi;a=Math.pow(a,.75);this.frame=Math.floor(9*a);this.alpha=.375*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.Oa=this.alpha*Dk.color.Oa&255;this.B.scale(.8125);var b=new w(.5*this.Gb.x+.5*this.B.x,.5*this.Gb.y+.5*this.B.y,.5*this.Gb.z+.5*this.B.z);this.transform.G+=b.x;this.transform.m31+=b.y;this.transform.m32+=b.z;this.Gb.set(this.B.x,this.B.y,this.B.z);if(0==a||0==t.h%4)a=Bd(this.transform),(b=nf(a,new w(0,-1E8,0),eg))&&(b=Ze(b.item.ba))&&
ag(a,b,this.ia.lb);t.Fa.prototype.step.call(this)};Dk.prototype.$a=function(){rg.call(this);t.Fa.prototype.$a.call(this)};function sk(a,b){t.Fa.call(this,"ExplodePuff");pg.call(this);this.A=t.c.ta.get("image");this.ca=t.c.N.get("explode");this.$=sk.$;this.color=new G(255,255,255,255);this.scale=1;this.mb=a;this.eg=rb(2);this.Ed=ic(mb());this.ec=t.h+1;this.ob=16;this.Qa=b}sk.prototype=Object.create(t.Fa.prototype);sk.prototype.constructor=sk;sk.$=new Td;sk.$.Ga=1;
sk.prototype.step=function(){var a=t.h-this.ec;50<=a&&this.remove();this.scale+=.02;this.transform.m31+=3E3*(1-a/50);this.frame=Math.floor(16*(1-Math.pow(.9375,a)));var b=255*(1-(a-15)/35);255<b&&(b=255);b&=255;this.color.r=b;this.color.jb=b;this.color.pa=b;this.color.Oa=b;b=10/this.Qa.ad;0==a?(this.Qa.gb.x+=b,this.Qa.gb.y+=b,this.Qa.gb.z+=b):10==a&&(this.Qa.gb.x-=b,this.Qa.gb.y-=b,this.Qa.gb.z-=b);t.Fa.prototype.step.call(this)};sk.prototype.$a=function(){rg.call(this);t.Fa.prototype.$a.call(this)};
function Ck(a,b){t.Fa.call(this,b);pg.call(this);this.A=t.c.ta.get("image");this.ca=t.c.N.get("bulletFlare01");this.$=Ck.$;this.color=new G(255,255,255,0);this.scale=1;this.mb=a;this.eg=rb(2);this.Ed=ic(mb());this.ec=t.h+1;this.ob=4}Ck.prototype=Object.create(t.Fa.prototype);Ck.prototype.constructor=Ck;Ck.$=new Td;Ck.$.Ga=1;Ck.prototype.step=function(){var a=t.h-this.ec;0<=a&&(3<=a&&this.remove(),this.scale+=.25);this.frame=Math.floor(a);t.Fa.prototype.step.call(this)};
Ck.prototype.$a=function(){rg.call(this);t.Fa.prototype.$a.call(this)};t.a=new t.Node("game");t.Rk=new t.Node("gameDraw");t.a.yl=0;t.a.Kb=null;t.a.jg=0;t.a.gl=0;t.a.fl=0;t.a.Yj=null;t.a.zc=[];t.a.Fg=[];t.a.Cg=[];t.a.Fj=0;t.a.Hh=0;t.a.Zk=NaN;t.a.qd=Infinity;t.a.sf=NaN;t.a.Hk=0;t.a.ld={ih:0};t.a.rk=[];t.a.Jf=!0;t.a.ff=function(){var a=t.a.va.Pa.O,b=-170,c=119;!(a instanceof Kk)&&a instanceof Gk&&(b+=6,c-=10);var d=zk(a).toLocaleString("en-US");var e=t.c.N.get("HUDNumerals24Bold");d=t.xi(e,d,0);d.color=gd;d.x=b;d.y=c;d.x-=d.width*d.wg.width;a.fj=d;t.a.Jf=!0};
t.a.gk=function(){var a=t.a.qd;var b=t.c.N.get("HUDNumeralsSilverAndGold");if(a)a=t.xi(b,a.toLocaleString("en-US"),0);else{a=[];var c=b.Sk("1");a.width=b.je[c]+b.gg[c];a.height=b.Pe;a.wg=b}a.color=fd;a.x=209;a.y=-127;a.x-=a.width*a.wg.width;t.a.fi=a;t.a.Jf=!0};t.a.ln=function(){};
t.a.Ll=function(a,b){if(b){for(var c=null,d=0,e=p(t.a.mf),h=e.next();!h.done;h=e.next())if(h=h.value,h.species!=a)d=h.y+h.species.td.height;else{c=h;break}c||(c={},c.species=a,c.wa=0,c.y=d,t.a.mf.push(c));c.wa+=b;c.V=t.h;a=t.c.N.get("HUDNumerals14Bold");c.qk=t.xi(a,c.wa.toLocaleString("en-US"),0);t.a.Jf=!0}};t.a.jm=function(){for(var a=0,b=0;b<t.a.mf.length;b++){var c=t.a.mf[b];240<=t.h-c.V?(t.a.mf.splice(b--,1),t.a.Jf=!0):(c.y=Math.max(c.y-.5,a),a+=c.species.td.height)}};
t.a.Kl=function(){t.a.Fj+=1;t.a.Hh+=1};t.a.im=function(){0>=t.a.Hh||t.h<t.a.Zk+2||(t.a.Hh--,t.a.Zk=t.h,t.c.Y.get("hit02").play({gain:1}),t.a.rk=t.xi(t.c.N.get("HUDNumerals24Bold"),(t.a.Fj-t.a.Hh).toLocaleString("en-US"),1),t.a.rk.bn=t.h,t.a.Jf=!0)};t.a.Vm=function(a){var b=document.createElement("div");b.style.position="relative";b.style.padding="8px";b.style.marginTop="4px";b.style.fontSize="14pt";b.style.background="#2c80fd";b.style.boxShadow="-2px 5px 0px black";b.innerHTML=a;b.Zj=t.h;t.a.Al.appendChild(b)};
t.a.kn=function(a){t.a.Al.removeChild(a)};
t.c.ready=function(){t.a.Al=document.getElementById("tutorialDiv");var a=t.c.N.get("HUDNumerals10");a.je=[7,5,7,7,8,7,7,7,7,7,3];a.Pe=10;a.Lg=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.gg=[0,1,0,0,-1,0,0,0,0,0,0];t.Di(a);a=t.c.N.get("HUDNumerals14Bold");a.je=[9,6,9,9,9,9,9,9,9,9,4];a.Pe=14;a.Lg=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.gg=[0,1,0,0,0,0,0,0,0,0,0];t.Di(a);a=t.c.N.get("HUDNumerals24Bold");a.je=[13,9,13,13,14,13,13,13,13,13,5];a.Pe=23;a.Lg=[0,1,0,0,-1,0,0,0,0,0,0];a.gg=[0,3,0,0,0,0,0,0,0,0,0];t.Di(a);
a=t.c.N.get("HUDNumeralsSilverAndGold");a.je=[9,6,9,9,9,9,9,9,9,9,4,6,0];a.Pe=14;a.Lg=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,0];a.gg=[0,1,0,0,0,0,0,0,0,0,0,-1,4];t.Di(a);t.sl=O(new t.Node("scnBuilderMeshes"),t.Xc);t.ug=O(new t.Node("scnWorld"),t.Xc);t.tg=O(new t.Node("scnDoors"),t.ug);t.tg.Ya=0;t.Ef=O(new t.Node("scnSpuds"),t.Xc);t.Ef.Ya=0;t.Ui=O(new t.Node("scnLoot"),t.Xc);t.Th=O(new t.Node("scnShadows"),t.Xc);t.Th.Ya=0;t.Ff=O(new t.Node("scnWindowPanes"),t.Xc);t.Ff.Ya=0;t.Td=O(new t.Node("scnEffects"),
t.Xc);t.Td.Ya=0;t.Te=O(new t.Node("scnSelf"),t.Xc);t.Te.Ya=0;t.zm=O(new t.Node("scnHUD"),t.Xc);O(Qj,t.Xc);O(t.a,t.Xc);t.wi=1E3/60;t.h=0;t.ab(t.c.ta.get("physical"));t.A.J("clipY",Infinity,!1);t.ab(t.c.ta.get("imageContrast"));t.A.J("contrastOffset",0);t.A.J("contrastScale",1.0625);t.zb(ze);ue(ze,ze.bi.length*ze.Qb);ze.upload(ze.bi);t.Xe(Be);ue(Be,2*Be.elements.length);Be.upload(Be.elements);t.a.yf=new Ve;t.c.Jb.get("gemRuby").Ga=0;t.c.Jb.get("gemEmerald").Ga=0;t.c.Jb.get("gemSapphire").Ga=0;t.c.Jb.get("bulbGreen").Ga=
0;X.lf();a=fc(5);xk.gj=[];for(var b=0;9>b;b++){var c=b;c*=1/9;c=Math.pow(c,.5);xk.gj[b]=c*a}Gk.lc="Carbine";xk.lc="Shotgun";Kk.lc="Revolver";vk.lc="Grenade";Ok.lc="Masher";Gk.ci=t.c.N.get("ViewCarbine");Gk.Qh=t.c.N.get("HUDReticleCarbine");Gk.S=t.c.N.get("HUDItemCarbine");Gk.S.offsetY=-12;xk.ci=t.c.N.get("ViewShotgun");xk.Qh=t.c.N.get("HUDReticleShotgun");xk.S=t.c.N.get("HUDItemShotgun");xk.S.offsetY=-10;Kk.ci=t.c.N.get("ViewRevolver");Kk.Qh=t.c.N.get("HUDReticleRevolver");Kk.S=t.c.N.get("HUDItemRevolver");
Kk.S.offsetY=-9;vk.ci=t.c.N.get("ViewGrenade");vk.Qh=t.c.N.get("HUDReticleCarbine");vk.S=t.c.N.get("HUDItemCarbine");vk.S.offsetY=-12;Ok.ci=t.c.N.get("ViewMasher");Ok.Qh=t.c.N.get("HUDReticleCarbine");Ok.S=t.c.N.get("HUDItemCarbine");Ok.S.offsetY=-12;a=[t.c.Y.get("ShotgunShut01")];Ok.Ii={bf:t.c.N.get("LootMasher"),td:t.c.N.get("HUDItemMasher"),Cc:75E3/172*99,Y:a,Nc:Rk.Bc,Jc:Rk.kf,vc:Rk.Pc,Ib:Ok,wa:1};Gk.Ii={bf:t.c.N.get("LootCarbine"),td:t.c.N.get("HUDItemCarbine"),Cc:75E3/172*172,Y:a,Nc:Rk.Bc,Jc:Rk.kf,
vc:Rk.Pc,Ib:Gk,wa:1};xk.Ii={bf:t.c.N.get("LootShotgun"),td:t.c.N.get("HUDItemShotgun"),Cc:75E3/172*176,Y:a,Nc:Rk.Bc,Jc:Rk.kf,vc:Rk.Pc,Ib:xk,wa:1};Kk.Ii={bf:t.c.N.get("LootRevolver"),td:t.c.N.get("HUDItemRevolver"),Cc:75E3/172*103.2,Y:a,Nc:Rk.Bc,Jc:Rk.kf,vc:Rk.Pc,Ib:Kk,wa:1};Gk.hi={bf:t.c.N.get("CarbineMag"),td:t.c.N.get("HUDCartridgeCarbine"),Cc:5E4,Y:a,Nc:W.Kf,Jc:W.lf,vc:W.ue,Ib:Gk,wa:30};xk.hi={bf:t.c.N.get("ShotshellBox"),td:t.c.N.get("HUDCartridgeShotgun"),Cc:5E4,Y:a,Nc:W.Kf,Jc:W.lf,vc:W.ue,Ib:xk,
wa:8};Kk.hi={bf:t.c.N.get("RevolverLoader"),td:t.c.N.get("HUDCartridgeRevolver"),Cc:25E3,Y:a,Nc:W.Kf,Jc:W.lf,vc:W.ue,Ib:Kk,wa:6};vk.hi={bf:t.c.N.get("LootGrenade"),td:t.c.N.get("HUDGrenade"),Cc:26E3,Y:a,Nc:W.Kf,Jc:W.lf,vc:W.ue,Ib:vk,wa:1};W.Fl();a=t.a.Ck=new Eg;a.A=t.c.ta.get("splatter");a.ca=t.c.N.get("splatter02");a.color=Uk.qf;a.Ga=1;a=t.a.Bk=new Eg;a.A=t.c.ta.get("image");a.ca=t.c.N.get("bulletPock01");a.color=new G(255,255,255,128);a.Ga=2;a=new Td;a.name="flashWhite";a.de=fd;a.Ga=0;t.c.Jb.add(a);
a=new Td;a.name="flashRed";a.de=hd;a.Ga=0;t.c.Jb.add(a);t.a.mm();t.a.gk();t.a.mf=[];O(t.Rk,t.Xc);t.start()};
t.a.mm=function(){var a=performance.now();for(t.xa.insertAdjacentHTML("beforeend","Generating world... ");hj(););aj=!0;t.xa.insertAdjacentHTML("beforeend","done ("+t.xa.Jj.format(performance.now()-a)+" ms).<br />");t.xa.insertAdjacentHTML("beforeend","<br />Ready. Click to play!<br />");t.a.jg=0;t.a.fl=3;t.a.gl=5;if(t.a.yl)a=new kk("devCamera"),O(a,t.Xc),a.create(),t.a.ka=a;else{a=Ze(0)[0][0];var b=t.a.va=new Pk("player");b.gi=Math.floor(2147483648/180*90);b.f.y=a.y+.5*b.Wd;b.f.z=a.z;b.f.x=a.x;O(b,
t.ug);b.create()}t.a.Tl()};
t.a.Jm=function(){if(t.a.va.Pa.fc.length<t.a.Kb.Ah&&!t.a.ld.gun){var a=null;0==t.a.va.Pa.fc.length?a=Ok:5>t.a.va.Pa.fc.length&&(a=sb([vk,Gk,Kk,xk]));if(a){for(var b=p(t.a.va.Pa.fc),c=b.next();!c.done;c=b.next())if(a==c.value.constructor)return;if(a==vk)new vk(t.a.va.Pa);else for(b={},c=0;c<t.a.Kb.yd.length;b={ae:b.ae},c++)if(b.ae=t.a.Kb.yd[c],!(b.ae.Ng||600>t.h-b.ae.Hg)){t.a.Kb.yd.splice(c,1);t.a.Kb.yd.push(b.ae);a=new Rk(a.Ii);a.f.set(b.ae.x,b.ae.y,b.ae.z);O(a,t.Ui);a.create();a.Cd=b.ae;b.ae.Ng=
a;t.a.ld.gun=1;break}}}};t.a.Im=function(){if(!(this.Fg.length>=t.a.gl)){for(var a=[],b=p(t.a.va.Pa.fc),c=b.next();!c.done;c=b.next()){c=c.value;var d=c.constructor,e=d.hi;if(e){var h=t.a.ld[d.lc];isNaN(h)&&(h=t.a.ld[d.lc]=0);h+=zk(c);h>=c.Qf||a.push(e)}}if(a.length)for(b={},c=0;c<t.a.Kb.yd.length;b={be:b.be},c++)if(b.be=t.a.Kb.yd[c],!(b.be.Ng||600>t.h-b.be.Hg)){t.a.Kb.yd.splice(c,1);t.a.Kb.yd.push(b.be);c=new ok(b.be.x,b.be.y-1E5,b.be.z);O(c,t.ug);c.Cd=b.be;b.be.Ng=c;c.Hj=a;c.create();break}}};
t.a.Km=function(){if(!(t.a.zc.length>=t.a.jg)){var a=t.a.Yj;a||(a=sb(Xe));if(a.Fb.Kb!=t.a.Kb||rb(5))t.a.Yj=null;else{var b=sb(a);b=sb(b);var c=b.I-b.D-5E4-5E4;a=new w(pb(b.v-b.s-5E4-5E4)+b.s+5E4,a.qa-1E3,pb(c)+b.D+5E4);if(b=nf(a,new w(0,-1E8,0),eg))a.y=b.p.y+1E5,t.a.va?(b=sd(t.a.va.f,a,new w),b=nf(a,b,ak)?!0:!1):b=!0,b?(b=new X,b.f.x=a.x,b.f.y=a.y,b.f.z=a.z,Id(b.transform,b.f),O(b,t.Ef),b.create(),t.a.Hk--):t.a.Yj=null}}};
t.a.Hm=function(){if(!(this.Cg.length>=t.a.fl*Xe.length/20)){var a=sb(Xe);if(a.Fb.Kb==t.a.Kb){var b=sb(a);b=sb(b);var c=b.I-b.D-5E4-5E4;a=new w(pb(b.v-b.s-5E4-5E4)+b.s+5E4,a.qa-1E3,pb(c)+b.D+5E4);if(b=nf(a,new w(0,-1E8,0),eg))a.y=b.p.y+1E5,t.a.va?(b=sd(t.a.va.f,a,new w),b=nf(a,b,ak)?!0:!1):b=!0,b&&(a=new rk(a.x,a.y-1E5,a.z),O(a,t.ug),a.create())}}};
t.a.step=function(){for(var a,b,c=0;16>c;c++){xf=1-xf;a=wf[xf];b=wf[1-xf];for(var d=p(Xe),e=d.next();!e.done;e=d.next()){e=e.value;var h=e.index-wf.ba;5==t.a.oi?(b[0][h]=.2*e.gb.x+.8*e.gb.x*(e.Mc?1:Math.max(0,Math.cos(t.h/30*Math.PI))),b[1][h]=.2*e.gb.y,b[2][h]=.2*e.gb.z):(b[0][h]=e.gb.x,b[1][h]=e.gb.y,b[2][h]=e.gb.z)}for(d=0;3>d;d++)for(e=p(vf),h=e.next();!h.done;h=e.next()){h=h.value;var g=h.ad*a[d][h.Dh.index-wf.ba];g*=h.Qi[d];b[d][h.og.index-wf.ba]+=g/h.og.ck}a=p(Xe);for(e=a.next();!e.done;e=
a.next())d=e.value,d.Mc&&(e=d.index-wf.ba,b[0][e]=d.gb.x,b[1][e]=d.gb.y,b[2][e]=d.gb.z)}if(0==t.h%1){c=p(Xe);for(e=c.next();!e.done;e=c.next())a=e.value,d=a.index-wf.ba,a.ia.lb.x=b[0][d],a.ia.lb.y=b[1][d],a.ia.lb.z=b[2][d],b[0][d]=0,b[1][d]=0,b[2][d]=0;b=p(vf);for(h=b.next();!h.done;h=b.next())c=h.value,c.xc&&(c.ad=c.Dh==c.og?Bf(c.xc):Af(c.xc));b=t.qc.ol;for(a=c=0;64>a;a++){d=Xe[a];if(!d)break;d.Re=a;for(e=0;10>e;e++){h=d.Cb[e];if(!h)break;h.index=c++;h.Yd(new Float32Array(b.buffer,a*b.Zh+48*e,12))}if(d.fg)for(e=
p(d.fg),h=e.next();!h.done;h=e.next())for(h=p(h.value.Hc),g=h.next();!g.done;g=h.next())g=g.value,g.Ea[1]=d.Re,g.Ea[4]=d.Cb.length}b.upload();b=p(ej.elements);for(c=b.next();!c.done;c=b.next())c=c.value,(a=Ze(c.ba))&&c.jd&&(c.jd.Ea[1]=a.Re,c.jd.Ea[4]=a.Cb.length);uf&&yf()}t.a.yl||0!=t.h%5||(this.Jm(),this.Im(),this.Km(),this.Hm());t.a.im();for(t.a.jm();!(performance.now()>=t.Yl-4)&&hj(););};
t.Rk.step=function(){t.gc.r=0;t.gc.jb=0;t.gc.pa=0;t.gc.Oa=0;t.a.va&&4>t.h-t.a.va.cl&&(t.gc.r+=24,t.gc.jb+=24,t.gc.pa+=24,t.gc.Oa+=24);if(t.a.va){var a=t.h-t.a.va.bl;a=1.5-a/6;0>a&&(a=0);1<a&&(a=1);t.gc.r+=170*a;t.gc.Oa+=170*a}a=1-t.h/180;0<=a&&(t.gc.Oa=255*a,t.a.yf.ie.gain.value=1-a);v.bindFramebuffer(v.FRAMEBUFFER,t.Ph.object);t.$b(2);v.clear(v.DEPTH_BUFFER_BIT|v.STENCIL_BUFFER_BIT);0==t.h%60&&t.sl.children.sort(gj);dg();t.ab(t.c.ta.get("physical"));t.tg.Ya=1;Nd(t.tg);t.tg.Ya=0;t.A.J("clipY",Infinity,
!1);var b=jb.first();for(a=af.first();b.item;){if(a.item){if(a.item.di<t.h){var c=a.next;fb(a);a=c;continue}if(0<kb(b.item,a.item)){a=a.next;continue}}c=b.next;fb(b);hb(b,a);b=c}for(;a.item;)b=a.next,a.item.di<t.h&&fb(a),a=b;bf.G=.00390625*t.ka.L.G;bf.m31=.00390625*t.ka.L.m31;bf.m32=.00390625*t.ka.L.m32;t.zb(sg);t.ab(t.c.ta.get("sky"));t.Lb(0,t.c.N.get("concr01"));t.A.J("texture1",1,!0);t.Lb(1,t.c.N.get("sky01"));t.A.J("color",fd);t.rb(0);t.$b(1);t.Pb(0);a=new N;b=(.5*t.ka.mg+.5*t.ka.dg)*bg.hj;a.scale(b*
t.viewport.ratio,b,1);a.m32=-b/Math.tan(t.ka.Ld);zd(t.ka.L,a,a);t.A.J("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,0,4);if(t.Ef.children){t.Ef.children.sort(fj);X.La=128;for(a=t.Ef.children.first();a.item;a=a.next)a.item.Vh()&&a.item instanceof X&&a.item.Vc();v.enable(v.STENCIL_TEST);for(a=t.Ef.children.first();a.item;a=a.next)a.item.Vh()&&(a.item instanceof X||(v.stencilFunc(v.GEQUAL,128,255),v.stencilOp(v.KEEP,v.KEEP,v.KEEP)),a.item.$a());v.disable(v.STENCIL_TEST)}if(t.a.va&&t.a.va.Pa.O instanceof
Kk&&.5<t.a.va.Pa.focus){t.ab(t.c.ta.get("flashCardThreshold"));t.rb(1);t.$b(1);v.depthFunc(v.GREATER);for(a=t.Ef.children.first();a.item;a=a.next)if(a.item instanceof X&&a.item.Ya&&600>t.h-a.item.Ki){t.A.J("color",new G(0,0,0,32*(1-(t.h-a.item.Ki)/600)));b=a.item;t.zb(sg);t.Lb(0,b.ca);t.Pb(0);c=new N;c.set(b.ma);var d=b.Cc;c.F*=d;c.K*=d;c.M*=d;c.H*=-d;c.m11*=-d;c.m12*=-d;t.A.J("modelMatrix",c);v.drawArrays(v.TRIANGLE_FAN,tg(b.$i*b.ef+b.h,b.ob),4)}t.A.J("color",fd);v.depthFunc(v.LEQUAL)}t.a.Ck.$a();
t.a.Bk.$a();t.ab(Lj.A);t.A.J("modelMatrix",bf);Lj.$.bind();t.rb(1);t.$b(1);t.Pb(1);t.zb(Lj.bb);t.Xe(Lj.fe);b=a=0;for(c=af.first();c.item;c=c.next)c.item.zk==a+b?b+=c.item.yk:(b&&v.drawElements(v.TRIANGLES,b,v.UNSIGNED_SHORT,2*a),a=c.item.zk,b=c.item.yk);b&&v.drawElements(v.TRIANGLES,b,v.UNSIGNED_SHORT,2*a);t.rb(1);t.$b(1);t.Pb(0);t.ab(t.c.ta.get("monoEffect"));t.zb(sg);v.activeTexture(v.TEXTURE0);v.bindTexture(v.TEXTURE_2D,t.c.N.get("shadow").object);t.A.J("enableTexture0",1,!0);t.A.J("color",t.Lf.color);
t.Th.Ya=1;Nd(t.Th);t.Th.Ya=0;if(t.Ff.children){a=t.ka.L.wd();for(b=t.Ff.children.first();b.item;b=b.next)b.item.Vh()&&(b.item.depth=lc(a,b.item.f));t.Ff.children.sort(Ii.S);Ii.Vc();t.Ff.Ya=1;Nd(t.Ff);t.Ff.Ya=0}t.Td.Ya=1;Nd(t.Td);t.Td.Ya=0;t.a.va&&(t.tl(t.a.va.Ud),cg(t.a.va.Ud),t.Te.Ya=1,Nd(t.Te),t.Te.Ya=0);t.a.va&&(a=t.a.va.Pa,a.Ya=1,a.$a(),a.Ya=0);t.rb(0);t.$b(0);t.Pb(0);v.bindFramebuffer(v.FRAMEBUFFER,null);t.qc.fd.J("viewMatrix",Jd);t.qc.fd.upload();t.zb(sg);t.Uh(new xc(t.canvas.width,t.canvas.height));
t.ab(t.c.ta.get("imageContrast"));v.activeTexture(v.TEXTURE0);v.bindTexture(v.TEXTURE_2D,t.Ph.color.object);t.A.J("texture0",0,!0);t.A.J("enableTexture0",1,!0);t.A.J("modelMatrix",Jd);t.A.J("color",fd);t.A.J("imageAdd",t.gc);t.A.J("imageSub",t.lm);v.drawArrays(v.TRIANGLE_FAN,0,4);t.a.va&&t.a.Xl()};
t.a.Xl=function(){function a(D,I,J,P,sa,ta,fa){t.Lb(0,D);var ha=t.canvas.width>>1,Kb=t.canvas.height>>1,qb=.5*D.width,ec=.5*D.height;0==k?I-=ha:1==k&&(I+=ha);2==l?J-=Kb:3==l&&(J+=Kb);0==h?I+=qb:1==h&&(I-=qb);2==g?J+=ec:3==g&&(J-=ec);I=Math.round(I);J=Math.round(J);a.S&&(void 0===P?v.scissor(0,0,t.canvas.width,t.canvas.height):v.scissor(I+ha-qb+P,-J+Kb-ec+sa,ta,fa));P=new N;P.F=D.width/t.canvas.width*m;P.m11=-D.height/t.canvas.height*n;P.G=2*I/t.canvas.width;P.m31=-2*J/t.canvas.height;t.A.J("modelMatrix",
P);v.drawArrays(v.TRIANGLE_FAN,0,4)}if(1==t.Ti)t.Ti=2;else{var b=t.a.va.Pa.O;if(t.a.Jf){t.a.Dl=new ve;var c=[];b&&(c=c.concat(b.fj));c=c.concat(t.a.fi);for(var d=p(t.a.mf),e=d.next();!e.done;e=d.next())c=c.concat(e.value.qk);we(c);t.a.Jf=!1}t.Uh(new xc(t.canvas.width,t.canvas.height));t.qc.fd.J("viewMatrix",Jd);t.qc.fd.upload();t.$b(0);t.Pb(0);var h=0,g=2,k=0,l=2,m=1,n=1;t.rb(2);v.enable(v.SCISSOR_TEST);a.S=!0;t.zb(sg);t.ab(t.c.ta.get("image"));t.A.J("color",fd);a.S=!1;h=1;g=2;k=4;l=5;c=p(t.a.mf);
for(e=c.next();!e.done;e=c.next()){d=e.value;e=d.species.td.height;var r=Wa(-3+(t.h-d.V)/60,0,1)*e*.5;v.scissor(0,(t.canvas.height>>1)-44+d.y-e+r,t.canvas.width,t.canvas.height);a(d.species.td,-189,44-d.y+r)}a.S=!0;v.scissor(0,0,t.canvas.width,t.canvas.height);b&&(b.dj()&&(h=4,g=2,k=4,l=5,c=Math.cos(60*t.h/Math.PI),c=Wa(c,0,1),t.A.J("color",new G(255,255*c,255*c,127+128*c)),c=t.c.N.get("HUDWarnReload"),a(c,0,30),t.A.J("color",fd)),d=[fd,new G(255,255,64,255),new G(208,0,0,255)],b instanceof Kk?(e=
b.ib,h=0,g=3,k=4,l=5,c=t.c.N.get("HUDMagRevolver"),a(c,-158-34*e,123,34*e,0,34,34),g=2,c=t.c.N.get("HUDAmmo2"),t.A.J("color",d[b.If()]),a(c,-201,91),t.A.J("color",fd)):b instanceof Gk?(e=b.ib,h=0,g=3,k=4,l=5,c=t.c.N.get("HUDMagCarbine"),a(c,-208,124+13*e,0,13*e,97,13),g=2,c=t.c.N.get("HUDAmmo3"),t.A.J("color",d[b.If()]),a(c,-208,81),t.A.J("color",fd)):b instanceof xk?(e=b.Dc,h=0,g=3,k=4,l=5,c=t.c.N.get("HUDMagShotgun"),a(c,-150-18*e,123,18*e,0,18,34),g=2,c=t.c.N.get("HUDAmmo2"),t.A.J("color",d[b.If()]),
a(c,-201,91),t.A.J("color",fd)):b instanceof vk&&(h=0,g=2,k=4,l=5,c=t.c.N.get("HUDAmmo2"),t.A.J("color",d[b.If()]),a(c,-201,91),t.A.J("color",fd)));isNaN(t.a.qd)||(h=1,g=2,k=4,l=5,c=t.a.fi,c=209-c.width*c.wg.width,d=t.c.N.get("HUDTreasure"),a(d,c,-146),t.a.qd||(d=t.c.N.get("HUDChecked"),t.A.J("color",new G(90,145,255,255)),a(d,c+14,-142),t.A.J("color",fd)));b&&t.a.va.Pa.ac&&(t.rb(1),t.ab(t.c.ta.get("monoEffect")),c=new vd,t.a.va.gh?(t.A.J("color",new G(255,0,0,255)),d=t.a.va.gh,t.a.ka.lk.transform(new vd(d.x,
d.y,d.z,1),c),c.x/=2*c.b,c.y/=2*c.b):t.A.J("color",new G(0,128,255,255)),t.A.J("ambientLight",new w(1,1,1)),h=4,g=5,k=4,l=5,(d=b.constructor.Qh)&&a(d,Math.round(c.x*t.canvas.width),Math.round(-c.y*t.canvas.height)),t.rb(2),t.ab(t.c.ta.get("image")),t.A.J("color",fd));v.disable(v.SCISSOR_TEST);t.zb(t.a.Dl);c=function(){z.F=m*C.width/q;z.m11=n*C.height/u;z.G=y/q;z.m31=-x/u;t.A.J("modelMatrix",z)};e=d=0;var q=t.canvas.width>>1,u=t.canvas.height>>1,z=new N;if(b&&b.fj){r=b.fj;e=r.length;if(!(b instanceof
Ok)){var y=r.x;var x=r.y;var C=r.wg;t.Lb(0,C);c();t.A.J("color",r.color);v.drawArrays(v.TRIANGLES,d,e)}d+=e}t.a.fi&&(b=t.a.fi,C=b.wg,t.Lb(0,C),e=b.length,y=b.x+1,x=b.y+2,c(),t.A.J("color",gd),v.drawArrays(v.TRIANGLES,d,e),y=b.x,x=b.y,c(),t.A.J("color",b.color),v.drawArrays(v.TRIANGLES,d,e),d+=e);v.enable(v.SCISSOR_TEST);b=p(t.a.mf);for(e=b.next();!e.done;e=b.next()){r=e.value;y=-188;x=44;e=r.species.td.height;var A=Wa(-3+(t.h-r.V)/60,0,1)*e*.5;v.scissor(0,(t.canvas.height>>1)-x+r.y-e+A,t.canvas.width,
t.canvas.height);e=r.qk;C=e.wg;t.Lb(0,C);e=e.length;x+=-r.y+19;x+=A;--y;x+=2;c();t.A.J("color",gd);v.drawArrays(v.TRIANGLES,d,e);y+=1;x-=2;c();t.A.J("color",fd);v.drawArrays(v.TRIANGLES,d,e);d+=e}v.scissor(0,0,t.canvas.width,t.canvas.height);v.disable(v.SCISSOR_TEST)}};
t.a.Lm=function(){if(t.a.Sc)for(var a=p(t.a.Sc),b=a.next();!b.done;b=a.next()){b=b.value;var c=b.Yb,d=b.Zb,e=1-(t.vi-b.nf)/20;0<e?(c-=240*e*e,b.style.left=c+"px",b.style.top=d+"px"):0!=t.vi%4||b.Bb||(c+=Math.floor(2*Math.random()),d+=Math.floor(2*Math.random()),b.style.left=c+"px",b.style.top=d+"px")}};
t.a.Ak=function(){var a=t.rm=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor="#2c80fd";a.style.mixBlendMode="color";t.$d.appendChild(a)};
t.a.pi=function(){t.xa&&t.$d.removeChild(t.xa);var a=t.xa=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor=0==t.h?"#2c80fdff":"#2c80fd40";a.style.overflow="hidden";t.$d.appendChild(a);t.a.Sc=[];t.vi=0};
t.a.Gg=function(){function a(){t.c.Y.get("hit02").play({gain:.5})}function b(){t.c.Y.get("woodSnap02").play()}t.a.pi();if(0==t.h){var c=document.createElement("img");c.src=t.c.N.get("MenuSplash").data.src;c.style.position="absolute";t.xa.appendChild(c)}c=62;var d=0,e=document.createElement("button");e.style.zIndex=2;e.style.width="134px";e.style.height="44px";e.style.position="absolute";e.Zb=c;c+=44;e.Yb=29;e.nf=d;d+=6;t.a.Sc.push(e);e.style.border="none";e.style.background='url("'+t.c.N.get("MenuButtonPlay").data.src+
'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -44px";R.Cm()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.Bb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.Bb=1;this.style.left=this.Yb+"px";this.style.top=this.Zb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.Bb=0};t.fn=e;t.xa.appendChild(e);e=document.createElement("button");
e.style.zIndex=2;e.style.width="133px";e.style.height="42px";e.style.position="absolute";e.Zb=c;c+=44;e.Yb=29;e.nf=d;d+=6;t.a.Sc.push(e);e.style.border="none";e.style.background='url("'+t.c.N.get("MenuButtonOptions").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -44px";t.a.Rl()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.Bb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition=
"0px -44px";this.Bb=1;this.style.left=this.Yb+"px";this.style.top=this.Zb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.Bb=0};t.xa.appendChild(e);e=document.createElement("button");e.style.zIndex=2;e.style.width="133px";e.style.height="42px";e.style.position="absolute";e.Zb=c;c+=44;e.Yb=29;e.nf=d;d+=6;t.a.Sc.push(e);e.style.border="none";e.style.background='url("'+t.c.N.get("MenuButtonReadme").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";
e.onclick=function(){this.style.backgroundPosition="0px -44px";t.a.Sl()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.Bb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.Bb=1;this.style.left=this.Yb+"px";this.style.top=this.Zb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.Bb=0};t.xa.appendChild(e);e=document.createElement("button");e.style.zIndex=2;e.style.width="133px";e.style.height=
"42px";e.style.position="absolute";e.Zb=c;c+=44;e.Yb=29;e.nf=d;d+=6;t.a.Sc.push(e);e.style.border="none";e.style.background='url("'+t.c.N.get("MenuButtonDonate").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -44px";t.a.Ql()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.Bb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.Bb=1;this.style.left=
this.Yb+"px";this.style.top=this.Zb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.Bb=0};t.xa.appendChild(e);c=p(t.a.Sc);for(d=c.next();!d.done;d=c.next())d=d.value,d.style.left=d.Yb+"px",d.style.top=d.Zb+"px"};
t.a.Rl=function(){function a(){t.c.Y.get("hit02").play({gain:.5})}function b(){t.c.Y.get("woodSnap02").play()}t.a.pi();t.jk={};for(var c in t.Ha)t.jk[c]=t.Ha[c];t.ik={};for(var d in t.Ba)t.ik[d]=t.Ba[d];d=document.createElement("div");d.style.height="100%";d.style.fontSize="6pt";d.style.lineHeight="1.5em";d.style.overflowY="scroll";d.style.padding="0";d.style.background="#505050";d.style.userSelect="none";t.xa.appendChild(d);c=t.xa.S=document.createElement("div");c.style.position="absolute";c.style.top=
"40px";c.style.right="56px";c.style.width="240px";c.style.fontSize="6pt";c.style.lineHeight="1.5em";t.xa.appendChild(c);c=document.createElement("div");c.style.padding="5px 102px 5px 20px";d.appendChild(c);c.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Options</h2>\n\t\t');d=document.createElement("input");d.id="inputCheckbox_musicEnabled";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Ha.musicEnabled;d.oninput=function(k){b();t.Ha.musicEnabled=
k.target.checked?1:0;t.Audio.Hb(t.Ha.musicEnabled)};d.style.marginTop="8px";t.Li=d;var e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Music";d.onmouseenter=e.onmouseenter=function(){t.xa.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Music</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tBoots and Pants and Boots and Pants.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tYou can also press <b>M</b> to toggle the music at any time.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputCheckbox_viewportFitWindow";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Ha.viewportFitWindow;d.oninput=function(k){b();t.Ha.viewportFitWindow=k.target.checked?1:0;t.vg()};d.style.marginTop="8px";t.Jh=d;e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Fit window";d.onmouseenter=e.onmouseenter=function(){t.xa.S.innerHTML=
'\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Fit Window</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tHave the game display as big as possible inside the browser window.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tYou can also use the <b>-</b> and <b>+</b> keys to adjust the size at any time.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");
d.id="inputCheckbox_lightingFancy";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Ha.lightingFancy;d.oninput=function(k){b();t.Ha.lightingFancy=k.target.checked?1:0};d.style.marginTop="8px";e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Illumination Sampling";d.onmouseenter=e.onmouseenter=function(){t.xa.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Illumination Sampling</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tAllow global illumination sampling in the fragment shader, for a realistic-looking world.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDisabling this might improve your framerate.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");c.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t<h3 style="color:#FFFF00; text-shadow:-1px 2px black;">Mouse</h3>\n\t\t');d=document.createElement("input");d.id="inputCheckbox_mouseRaw";d.name="mouseRaw";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Ha.mouseRaw;d.oninput=function(k){b();t.Ha.mouseRaw=k.target.checked?1:0};d.style.marginTop="8px";e=document.createElement("label");
e.setAttribute("for",d.id);e.innerHTML="Raw mouse input";d.onmouseenter=e.onmouseenter=function(){t.xa.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Raw Mouse Input</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tEnable unadjusted hardware mouse input.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tThis will make your aiming rotation based on the movement of your mouse, regardless of how fast you move it, which is recommended for first-person gaming.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tCurrently supported only in Chrome, Edge, Opera, and <em>not</em> available in Firefox, Safari, or Linux.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputNumber_mouseDPI";d.name="mouseDPI";d.type="number";d.min=100;d.step=100;d.style.fontSize="7pt";d.value=t.Ha.mouseDPI;d.oninput=function(k){k.target.checkValidity()&&(t.Ha.mouseDPI=parseFloat(k.target.value),t.Ri())};d.style.marginTop="8px";d.style.width="5em";e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Mouse DPI:";
d.onmouseenter=e.onmouseenter=function(){t.xa.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Mouse DPI</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tFor gamers: if you know the DPI of your mouse, enter it here.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tOtherwise, just leave this value at its default.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: 1600\n\t\t\t\t\t</p>\n\t\t\t\t\t';a()};c.appendChild(e);c.insertAdjacentHTML("beforeend"," ");c.appendChild(d);c.insertAdjacentHTML("beforeend","<br />");d=
document.createElement("input");d.id="inputNumber_mouseScale";d.name="mouseScale";d.type="number";d.min=.125;d.step=.125;d.style.fontSize="7pt";d.value=t.Ha.mouseScale;d.oninput=function(k){k.target.checkValidity()&&(t.Ha.mouseScale=parseFloat(k.target.value),t.Ri())};d.style.marginTop="8px";d.style.width="5em";e=document.createElement("label");e.setAttribute("for",d.id);e.title=" ";e.innerHTML="Mouse scale:";d.onmouseenter=e.onmouseenter=function(){t.xa.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Mouse Scale</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tInches of mouse movement at the given DPI to perform a 360\u00b0 rotation in the game.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tLower values will increase the aiming sensitivity.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: 3\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(e);c.insertAdjacentHTML("beforeend"," ");c.appendChild(d);c.insertAdjacentHTML("beforeend","<br />");c.insertAdjacentHTML("beforeend",'\n\t\t\t\t<br />\n\t\t\t\t<h3 style="color:#FFFF00; text-shadow:-1px 2px black;">Controls</h3>\n\t\t\t');d=e=document.createElement("div");d.style.display="flex";d.style.flexFlow="row nowrap";c.appendChild(d);d=[];for(var h=0;3>h;h++){var g=document.createElement("div");g.style.paddingRight="16px";g.style.display="flex";g.style.flexFlow="column nowrap";
d.push(g);e.appendChild(g)}e=document.createElement("div");e.innerHTML="Action";e.style.height="20px";e.style.fontWeight="bold";d[0].appendChild(e);e=document.createElement("div");e.innerHTML="Key";e.style.height="20px";e.style.fontWeight="bold";d[1].appendChild(e);e=document.createElement("div");e.innerHTML="Mouse";e.style.height="20px";e.style.fontWeight="bold";d[2].appendChild(e);e={};h=p("Masher Grenade Revolver Carbine Shotgun GunFire GunAction Reload MoveForward MoveBackward MoveLeft MoveRight Jump".split(" "));
for(g=h.next();!g.done;e={te:e.te},g=h.next())e.te=g.value,g=document.createElement("div"),g.innerHTML=e.te,g.style.height="16px",g.style.marginBottom="2px",g.style.padding="0 2px 0 0",d[0].appendChild(g),g=document.createElement("div"),g.innerHTML=""+t.Ba[e.te+"Key"],g.style.height="16px",g.style.marginBottom="2px",g.style.padding="0 2px",g.style.color="#000000",g.style.backgroundColor="#e0e0e0",g.style.fontWeight="bold",g.name=e.te,g.onmouseenter=function(){t.xa.S.innerHTML="";this.style.backgroundColor=
"#ffffff";a()},g.onmouseleave=function(){this.style.backgroundColor="#e0e0e0"},g.onclick=function(k){return function(){var l=t.hk=document.createElement("div");l.style.position="absolute";l.style.width=t.canvas.width+"px";l.style.height=t.canvas.height+"px";l.style.left=0;l.style.top=0;l.style.zIndex=3;l.style.userSelect="none";l.style.display="flex";l.style.alignItems="center";l.style.justifyContent="center";l.style.backgroundColor="#000000c0";t.$d.appendChild(l);var m=document.createElement("div");
m.style.textAlign="center";m.style.fontSize="7pt";m.style.lineHeight="1.5em";m.innerHTML='Press a key for:<br />\n\t\t\t\t\t\t\t\t<p style="font-size: 9pt"><b>'+k.te+"</b></p>\n\t\t\t\t\t\t\t\tPress <b>Backspace</b> to unassign.<br />\n\t\t\t\t\t\t\t\tPress <b>Escape</b> to cancel.<br />";l.appendChild(m);t.rg(1,this)}}(e),d[1].appendChild(g),g=document.createElement("div"),g.innerHTML=""+t.Ba[e.te+"MouseButton"],g.style.height="16px",g.style.marginBottom="2px",g.style.padding="0 2px",g.style.color=
"#000000",g.style.backgroundColor="#e0e0e0",g.style.fontWeight="bold",g.name=e.te,g.onmouseenter=function(){t.xa.S.innerHTML="";this.style.backgroundColor="#ffffff";a()},g.onmouseleave=function(){this.style.backgroundColor="#e0e0e0"},g.onclick=function(k){return function(){var l=t.hk=document.createElement("div");l.style.position="absolute";l.style.width=t.canvas.width+"px";l.style.height=t.canvas.height+"px";l.style.left=0;l.style.top=0;l.style.zIndex=3;l.style.userSelect="none";l.style.display=
"flex";l.style.alignItems="center";l.style.justifyContent="center";l.style.backgroundColor="#000000c0";t.$d.appendChild(l);var m=document.createElement("div");m.style.textAlign="center";m.style.fontSize="7pt";m.style.lineHeight="1.5em";m.innerHTML='Click a mouse button for:<br />\n\t\t\t\t\t\t\t\t<p style="font-size: 9pt"><b>'+k.te+"</b></p>\n\t\t\t\t\t\t\t\tPress <b>Backspace</b> to unassign.<br />\n\t\t\t\t\t\t\t\tPress <b>Escape</b> to cancel.<br />";l.appendChild(m);t.rg(2,this)}}(e),d[2].appendChild(g);
c.insertAdjacentHTML("beforeend","<br />");c=293;d=0;e=document.createElement("button");e.style.zIndex=2;e.style.width="76px";e.style.height="34px";e.style.position="absolute";e.Zb=250;e.Yb=c;c+=80;e.nf=d;d+=6;t.a.Sc.push(e);e.style.border="none";e.style.background='url("'+t.c.N.get("MenuButtonCancel").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -36px";delete t.xa.S;delete t.Li;delete t.Jh;for(var k in t.Ha)t.Ha[k]=
t.jk[k];for(var l in t.Ba)t.Ba[l]=t.ik[l];delete t.jk;delete t.ik;t.vg();t.Ri();t.Audio.Hb(t.Ha.musicEnabled);t.a.Gg()};e.onmousedown=function(k){k.preventDefault();this.style.backgroundPosition="0px -72px";this.Bb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.Bb=1;this.style.left=this.Yb+"px";this.style.top=this.Zb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.Bb=0};t.xa.appendChild(e);e=document.createElement("button");e.style.zIndex=
2;e.style.width="76px";e.style.height="34px";e.style.position="absolute";e.Zb=250;e.Yb=c;c+=80;e.nf=d;d+=6;t.a.Sc.push(e);e.style.border="none";e.style.background='url("'+t.c.N.get("MenuButtonOK").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -36px";delete t.xa.S;delete t.Li;delete t.Jh;for(var k in t.Ha)window.localStorage.setItem(k,t.Ha[k]);for(var l in t.Ba)window.localStorage.setItem(l,t.Ba[l]);t.vg();t.a.Gg()};
e.onmousedown=function(k){k.preventDefault();this.style.backgroundPosition="0px -72px";this.Bb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.Bb=1;this.style.left=this.Yb+"px";this.style.top=this.Zb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.Bb=0};t.xa.appendChild(e);c=p(t.a.Sc);for(d=c.next();!d.done;d=c.next())d=d.value,d.style.left=d.Yb+"px",d.style.top=d.Zb+"px"};
t.a.Sl=function(){t.a.pi();var a=document.createElement("div");a.style.height="100%";a.style.fontSize="6pt";a.style.lineHeight="1.5em";a.style.overflowY="scroll";a.style.padding="0";a.style.background="#505050";a.style.userSelect="auto";t.xa.appendChild(a);var b=document.createElement("div");b.style.padding="5px 102px 5px 20px";a.appendChild(b);b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">How to Play</h2>\n\t\t\t\u2022 Use <b>W,A,S,D</b> and <b>Space</b> to move and jump.<br />\n\t\t\t\u2022 Use the <b>Mouse</b> to aim and shoot.<br />\n\t\t\t<br />\n\t\t');
a=document.createElement("img");a.src=t.c.N.get("HUDItemCarbine").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">E</span> to equip the <b>Carbine</b>.<br />\n\t\t\tIt\'s a short-barreled assault rifle with <em>lots of ammo</em> and a <em>high rate of fire</em>.<br />\n\t\t\tBullets will juggle-strike all the targets in your line-of-fire!<br />\n\t\t\t\u2022 Hold the <b>Right Mouse Button</b> to improve accuracy.<br />\n\t\t\t\u2022 Press <b>R</b> to reload.<br />\n\t\t\t<br />\n\t\t');
a=document.createElement("img");a.src=t.c.N.get("HUDItemShotgun").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">C</span> to equip the <b>Shotgun</b>.<br />\n\t\t\tIt\'s a pump-action 12-gauge with great <em>multi-damage</em> stopping power.<br />\n\t\t\tPellets will continually dig through enemies until their full damage has been delivered!<br />\n\t\t\t\u2022 Press the <b>Right Mouse Button</b> to cycle it.<br />\n\t\t\tYou must cycle the shotgun before each shot.<br />\n\t\t\t<br />\n\t\t');
a=document.createElement("img");a.src=t.c.N.get("HUDItemRevolver").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend","\n\t\t\t<br />\n\t\t\t\u2022 Press <span style=\"color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;\">Q</span> to equip the <b>Revolver</b>.<br />\n\t\t\tIt's a six-shot double-action with great <em>accuracy</em> and <em>reach</em>.<br />\n\t\t\tBullets will go through walls, if not too thick!<br />\n\t\t\t\u2022 Hold the <b>Right Mouse Button</b> to track enemies you've glimpsed.<br />\n\t\t\t\u2022 Press <b>R</b> to reload.<br />\n\t\t\t<br />\n\t\t");
a=document.createElement("img");a.src=t.c.N.get("HUDItemMasher").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">F</span> to equip the <b>Masher</b>.<br />\n\t\t\t\u2022 Or, strike instantly using the <b>Middle Mouse Button</b>.<br />\n\t\t\tAs useful in self-defense as it is in meal preparation.<br />\n\t\t\t<br />\n\t\t');a=document.createElement("img");a.src=
t.c.N.get("HUDItemGrenade").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">G</span> to equip a <b>Grenade</b>.<br />\n\t\t\t\u2022 Or, throw instantly using the <b>Side Mouse Button</b> (if you\'ve got one).<br />\n\t\t\tBoom.<br />\n\t\t');b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Contact</h2>\n\t\t\t<p>\n\t\t\tThis game is a preview of a work in progress.<br />\n\t\t\tPlease email me about any technical problems so I can fix them!<br />\n\t\t\tchad.chisholm@protonmail.com<br />\n\t\t\t</p>\n\t\t');
b=373;a=0;var c=document.createElement("button");c.style.zIndex=2;c.style.width="76px";c.style.height="34px";c.style.position="absolute";c.Zb=250;c.Yb=b;b+=80;c.nf=a;a+=6;t.a.Sc.push(c);c.style.border="none";c.style.background='url("'+t.c.N.get("MenuButtonOK").data.src+'")';c.style.backgroundPosition="0px 0px";c.style.cursor="pointer";c.onclick=function(){this.style.backgroundPosition="0px -36px";t.a.Gg()};c.onmousedown=function(d){d.preventDefault();this.style.backgroundPosition="0px -72px";this.Bb=
2;t.c.Y.get("woodSnap02").play()};c.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.Bb=1;this.style.left=this.Yb+"px";this.style.top=this.Zb+"px";t.c.Y.get("hit02").play({gain:.5})};c.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.Bb=0};t.xa.appendChild(c);b=p(t.a.Sc);for(a=b.next();!a.done;a=b.next())a=a.value,a.style.left=a.Yb+"px",a.style.top=a.Zb+"px"};
t.a.Ql=function(){t.a.pi();var a=document.createElement("div");a.style.height="100%";a.style.fontSize="6pt";a.style.lineHeight="1.5em";a.style.overflowY="scroll";a.style.padding="0";a.style.background="#505050";a.style.userSelect="auto";t.xa.appendChild(a);var b=document.createElement("div");b.style.padding="5px 102px 5px 20px";a.appendChild(b);b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Support the Developer</h2>\n\t\t\t<p>\n\t\t\t<b>ShootPotato.com</b> is a <em>FREE</em> game for everyone. If you like it, please consider making a donation to represent a purchase. Donations are my only source of income, and I can only continue development with support from players like you.\n\t\t\t<br />\n\t\t\t</p><p>\n\t\t');
b.insertAdjacentHTML("beforeend",'\n\t\t\t<form action="https://www.paypal.com/donate" method="post" target="_blank">\n\t\t\t<input type="hidden" name="hosted_button_id" value="8X4ZJS35NSYYJ" />\n\t\t\t<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />\n\t\t\t<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />\n\t\t\t</form>\n\t\t');
b.insertAdjacentHTML("beforeend","\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t<b>Chad Chisholm</b><br />\n\t\t\tchad.chisholm@protonmail.com<br />\n\t\t\t</p>\n\t\t");b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Coming Soon...</h2>\n\t\t\t<p>\n\t\t\t\u2022 dynamic combat music<br />\n\t\t\t\u2022 enemy NPC hit, attack, and various death animations<br />\n\t\t\t\u2022 enemy NPC tactics and AI<br />\n\t\t\t\u2022 player death, score<br />\n\t\t\t\u2022 architectural art assets, textures, variation<br />\n\t\t\t\u2022 ambient sound effects<br />\n\t\t\t\u2022 breakable glass<br />\n\t\t\t\u2022 more/better character and action sounds<br />\n\t\t\t\u2022 more...<br />\n\t\t\t</p>\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Past Updates</h2>\n\t\t\t<p>\n\t\t\t<b>June 15th, 2023:</b><br />\n\t\t\t\u2022 melee weapon<br />\n\t\t\t\u2022 grenades!<br />\n\t\t\t\u2022 collectible weapons, with randomized order<br />\n\t\t\t\u2022 organized loot spawning<br />\n\t\t\t\u2022 configurable keyboard and mouse controls<br />\n\t\t\t\u2022 enemy NPC attacks<br />\n\t\t\t\u2022 weapon reload sounds<br />\n\t\t\t</p><p>\n\t\t\t<b>May 28th, 2023:</b><br />\n\t\t\t\u2022 app loading console<br />\n\t\t\t\u2022 window resizing<br />\n\t\t\t\u2022 main menu<br />\n\t\t\t\u2022 main menu music<br />\n\t\t\t\u2022 options menu<br />\n\t\t\t\u2022 readme page with pictures<br />\n\t\t\t\u2022 donation via PayPal<br />\n\t\t\t\u2022 large rooms with pillars<br />\n\t\t\t\u2022 improved color palette<br />\n\t\t\t</p><p>\n\t\t\t<b>May 7th, 2023:</b><br />\n\t\t\t\u2022 maze world generator<br />\n\t\t\t\u2022 global illumination at 60 FPS<br />\n\t\t\t\u2022 room lights switching on<br />\n\t\t\t\u2022 improved performance of collision scans<br />\n\t\t\t\u2022 gibs colliding with props<br />\n\t\t\t\u2022 HUD cards for ammo collection<br />\n\t\t\t</p><p>\n\t\t\t<b>Dec 18th, 2022:</b><br />\n\t\t\t\u2022 endless world generation<br />\n\t\t\t\u2022 user settings panel<br />\n\t\t\t\u2022 weapons reloading<br />\n\t\t\t\u2022 ammo collectibles<br />\n\t\t\t</p><p>\n\t\t\t<b>Oct 30th, 2022:</b><br />\n\t\t\t\u2022 NPC navigation graph<br />\n\t\t\t</p><p>\n\t\t\t<b>Oct 11th, 2022:</b><br />\n\t\t\t\u2022 website launched<br />\n\t\t\t</p><p>\n\t\t');
a=373;b=0;var c=document.createElement("button");c.style.zIndex=2;c.style.width="76px";c.style.height="34px";c.style.position="absolute";c.Zb=250;c.Yb=a;a+=80;c.nf=b;b+=6;t.a.Sc.push(c);c.style.border="none";c.style.background='url("'+t.c.N.get("MenuButtonOK").data.src+'")';c.style.backgroundPosition="0px 0px";c.style.cursor="pointer";c.onclick=function(){this.style.backgroundPosition="0px -36px";t.a.Gg()};c.onmousedown=function(d){d.preventDefault();this.style.backgroundPosition="0px -72px";this.Bb=
2;t.c.Y.get("woodSnap02").play()};c.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.Bb=1;this.style.left=this.Yb+"px";this.style.top=this.Zb+"px";t.c.Y.get("hit02").play({gain:.5})};c.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.Bb=0};t.xa.appendChild(c);a=p(t.a.Sc);for(b=a.next();!b.done;b=a.next())b=b.value,b.style.left=b.Yb+"px",b.style.top=b.Zb+"px"};
t.a.Tl=function(){var a=document.createElement("button");a.style.zIndex=2;a.style.position="absolute";a.style.width="64px";a.style.height="64px";a.style.left=(t.canvas.width-64>>1)+"px";a.style.top=(t.canvas.height-64>>1)+"px";a.style.border="none";a.style.background='url("WebsitePlay_230507_01.png")';a.style.backgroundSize="64px 64px";a.style.backgroundPosition="center";a.style.backgroundRepeat="no-repeat";a.style.opacity="75%";a.style.cursor="pointer";a.onclick=function(){t.c.Y.get("woodSnap02").play();
t.gn=!0;t.rg(0);t.a.Ak();t.a.Gg();t.Audio.Hb(t.Ha.musicEnabled);var b=t.c.Y.get("MusicFactoryBeat01");t.Audio.Pc&&t.Audio.Pc.stop();var c=t.Audio.S.createGain();c.gain.value=1;c.connect(t.Audio.vb);var d=new AudioBufferSourceNode(t.Audio.S);d.connect(c);d.loop=!0;d.buffer=b.buffer;d.start();t.Audio.Pc=d};a.onmouseenter=function(){this.style.opacity="100%"};a.onmouseleave=function(){this.style.opacity="75%"};t.xa.appendChild(a)};
document.addEventListener("pointerlockchange",function(){document.pointerLockElement?(t.$d.removeChild(t.rm),t.$d.removeChild(t.xa),t.xa=null,t.Audio.Pc.stop(),Xd.clear(),R.clear(),t.paused=!1,t.a.yf.ie.disconnect(t.a.yf.Ji),t.a.yf.ie.connect(t.Audio.vb)):(t.Ti=1,t.a.jn=performance.now(),t.a.yf.ie.disconnect(t.Audio.vb),t.a.yf.ie.connect(t.a.yf.Ji))});t.a.pause=function(){t.Ti=0;t.paused=!0;t.a.Ak();t.a.Gg()};
(function(){var a,b,c,d,e,h;return Ga(new Fa(new za(function(g){if(1==g.S){t.Ph=new jk;t.ym();a=t.xa=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor="black";a.style.overflow="hidden";a.style.fontFamily="monospace";a.style.fontSize="8pt";a.style.color="white";t.$d.appendChild(a);t.xa.Jj=new Intl.NumberFormat("en-US",{maximumFractionDigits:2});t.xa.insertAdjacentHTML("beforeend",
"\n\t----------------------------------------------------------------------------<br />\n\tThis game is a preview of a work in progress.<br />\n\tPlease email me about any technical problems so I can fix them!<br />\n\tchad.chisholm@protonmail.com<br />\n\t----------------------------------------------------------------------------<br />\n\t<br />\n\t");t.xa.insertAdjacentHTML("beforeend","ShootPotato v0.011<br />");t.xa.insertAdjacentHTML("beforeend","June 15, 2023<br />");t.xa.insertAdjacentHTML("beforeend",
"GL Vendor: "+v.getParameter(v.VENDOR)+"<br />");t.xa.insertAdjacentHTML("beforeend","GL Version: "+v.getParameter(v.VERSION)+"<br />");t.xa.insertAdjacentHTML("beforeend","GL Renderer: "+v.getParameter(v.RENDERER)+"<br />");t.xa.insertAdjacentHTML("beforeend","Fetching resources... ");c=b=performance.now();var k=fetch("resources_230615_01.gob");g.S=2;return{value:k}}if(3!=g.S)return d=g.Hb,c=performance.now(),t.xa.insertAdjacentHTML("beforeend","done ("+t.xa.Jj.format(c-b)+" ms).<br />"),b=c,t.xa.insertAdjacentHTML("beforeend",
"Unpacking resources... "),e=Uint8Array,k=d.arrayBuffer(),g.S=3,{value:k};h=new e(g.Hb);h.position=0;t.c.load(h);c=performance.now();t.xa.insertAdjacentHTML("beforeend","done ("+t.xa.Jj.format(c-b)+" ms).<br />");g.S=0})))})();
