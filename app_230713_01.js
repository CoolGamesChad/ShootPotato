var e;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function q(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function ba(a){if(!(a instanceof Array)){a=q(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
var ca="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ea="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function fa(a,b){if(b){var c=ca;a=a.split(".");for(var d=0;d<a.length-1;d++){var f=a[d];f in c||(c[f]={});c=c[f]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ea(c,a,{configurable:!0,writable:!0,value:b})}}
fa("Promise",function(a){function b(g){this.Qa=0;this.Nb=void 0;this.R=[];var k=this.nb();try{g(k.resolve,k.reject)}catch(l){k.reject(l)}}function c(){this.R=null}function d(g){return g instanceof b?g:new b(function(k){k(g)})}if(a)return a;c.prototype.Qa=function(g){if(null==this.R){this.R=[];var k=this;this.nb(function(){k.Nb()})}this.R.push(g)};var f=ca.setTimeout;c.prototype.nb=function(g){f(g,0)};c.prototype.Nb=function(){for(;this.R&&this.R.length;){var g=this.R;this.R=[];for(var k=0;k<g.length;++k){var l=
g[k];g[k]=null;try{l()}catch(m){this.zb(m)}}}this.R=null};c.prototype.zb=function(g){this.nb(function(){throw g;})};b.prototype.nb=function(){function g(m){return function(n){l||(l=!0,m.call(k,n))}}var k=this,l=!1;return{resolve:g(this.Le),reject:g(this.zb)}};b.prototype.Le=function(g){if(g===this)this.zb(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.Me(g);else{a:switch(typeof g){case "object":var k=null!=g;break a;case "function":k=!0;break a;default:k=!1}k?this.oe(g):
this.Bc(g)}};b.prototype.oe=function(g){var k=void 0;try{k=g.then}catch(l){this.zb(l);return}"function"==typeof k?this.Hf(k,g):this.Bc(g)};b.prototype.zb=function(g){this.Lc(2,g)};b.prototype.Bc=function(g){this.Lc(1,g)};b.prototype.Lc=function(g,k){if(0!=this.Qa)throw Error("Cannot settle("+g+", "+k+"): Promise already settled in state"+this.Qa);this.Qa=g;this.Nb=k;this.Ud()};b.prototype.Ud=function(){if(null!=this.R){for(var g=0;g<this.R.length;++g)h.Qa(this.R[g]);this.R=null}};var h=new c;b.prototype.Me=
function(g){var k=this.nb();g.Mi(k.resolve,k.reject)};b.prototype.Hf=function(g,k){var l=this.nb();try{g.call(k,l.resolve,l.reject)}catch(m){l.reject(m)}};b.prototype.then=function(g,k){function l(p,v){return"function"==typeof p?function(B){try{m(p(B))}catch(y){n(y)}}:v}var m,n,r=new b(function(p,v){m=p;n=v});this.Mi(l(g,m),l(k,n));return r};b.prototype.catch=function(g){return this.then(void 0,g)};b.prototype.Mi=function(g,k){function l(){switch(m.Qa){case 1:g(m.Nb);break;case 2:k(m.Nb);break;default:throw Error("Unexpected state: "+
m.Qa);}}var m=this;null==this.R?h.Qa(l):this.R.push(l)};b.resolve=d;b.reject=function(g){return new b(function(k,l){l(g)})};b.race=function(g){return new b(function(k,l){for(var m=q(g),n=m.next();!n.done;n=m.next())d(n.value).Mi(k,l)})};b.all=function(g){var k=q(g),l=k.next();return l.done?d([]):new b(function(m,n){function r(B){return function(y){p[B]=y;v--;0==v&&m(p)}}var p=[],v=0;do p.push(void 0),v++,d(l.value).Mi(r(p.length-1),n),l=k.next();while(!l.done)})};return b});
function ha(){ha=function(){};ca.Symbol||(ca.Symbol=ja)}function ka(a,b){this.R=a;ea(this,"description",{configurable:!0,writable:!0,value:b})}ka.prototype.toString=function(){return this.R};var ja=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new ka("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function na(){ha();var a=ca.Symbol.iterator;a||(a=ca.Symbol.iterator=ca.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ea(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return oa(aa(this))}});na=function(){}}function oa(a){na();a={next:a};a[ca.Symbol.iterator]=function(){return this};return a}function sa(){this.zb=!1;this.Qa=null;this.Nb=void 0;this.R=1;this.Lc=0;this.nb=null}function ua(a){if(a.zb)throw new TypeError("Generator is already running");a.zb=!0}
sa.prototype.Bc=function(a){this.Nb=a};function wa(a,b){a.nb={Gm:b,Vm:!0};a.R=a.Lc}sa.prototype.return=function(a){this.nb={return:a};this.R=this.Lc};function xa(a){this.R=new sa;this.Qa=a}function ya(a,b){ua(a.R);var c=a.R.Qa;if(c)return Ba(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.R.return);a.R.return(b);return Da(a)}
function Ba(a,b,c,d){try{var f=b.call(a.R.Qa,c);if(!(f instanceof Object))throw new TypeError("Iterator result "+f+" is not an object");if(!f.done)return a.R.zb=!1,f;var h=f.value}catch(g){return a.R.Qa=null,wa(a.R,g),Da(a)}a.R.Qa=null;d.call(a.R,h);return Da(a)}
function Da(a){for(;a.R.R;)try{var b=a.Qa(a.R);if(b)return a.R.zb=!1,{value:b.value,done:!1}}catch(c){a.R.Nb=void 0,wa(a.R,c)}a.R.zb=!1;if(a.R.nb){b=a.R.nb;a.R.nb=null;if(b.Vm)throw b.Gm;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function Ea(a){this.next=function(b){ua(a.R);a.R.Qa?b=Ba(a,a.R.Qa.next,b,a.R.Bc):(a.R.Bc(b),b=Da(a));return b};this.throw=function(b){ua(a.R);a.R.Qa?b=Ba(a,a.R.Qa["throw"],b,a.R.Bc):(wa(a.R,b),b=Da(a));return b};this.return=function(b){return ya(a,b)};na();this[Symbol.iterator]=function(){return this}}
function Ha(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,f){function h(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(h,f)}h(a.next())})}fa("Math.sign",function(a){return a?a:function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1}});
fa("String.prototype.startsWith",function(a){return a?a:function(b,c){if(null==this)throw new TypeError("The 'this' value for String.prototype.startsWith must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype.startsWith must not be a regular expression");var d=this.length,f=b.length;c=Math.max(0,Math.min(c|0,this.length));for(var h=0;h<f&&c<d;)if(this[c++]!=b[h++])return!1;return h>=f}});
function Ia(a,b){na();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}fa("Array.prototype.keys",function(a){return a?a:function(){return Ia(this,function(b){return b})}});var t={},u;t.canvas=document.createElement("canvas");t.canvas.width=480;t.canvas.height=296;var Ka=document.body;Ka.style.position="relative";
Ka.style.left=(window.innerWidth-t.canvas.width>>1)+"px";Ka.style.width=t.canvas.width+"px";Ka.style.margin="0px";Ka.style.marginBottom="20px";Ka.style.padding="0px";Ka.style.display="flex";Ka.style.flexFlow="column nowrap";Ka.style.justifyContent="flex-start";Ka.style.alignItems="center";Ka.style.alignContent="flex-start";Ka.style.backgroundColor="#404040";Ka.style.fontFamily="sans-serif";Ka.style.fontSize="12pt";Ka.style.color="white";Ka.style.imageRendering="pixelated";
Ka.style.transformOrigin="top center";var La=document.createElement("img");La.width=320;La.height=44;La.src="WebsiteBanner_230507_01.png";La.style.margin="0 auto";document.body.appendChild(La);var Ma=t.me=document.createElement("div");Ma.style.position="relative";Ma.style.width=t.canvas.width+"px";Ma.style.height=t.canvas.height+"px";Ma.style.margin="6px 0";Ma.style.outline="5px solid black";Ma.style.backgroundColor="black";Ma.oncontextmenu=function(a){return a.preventDefault()};document.body.appendChild(Ma);
t.me.appendChild(t.canvas);function Oa(a,b){for(var c=0,d=a.length,f=c+(d-c>>1);c<d;){var h=a.cmp.call(null,b,a[f]);if(0>h)d=f,f=c+(d-c>>1);else if(0<h)c=f+1,f=c+(d-c>>1);else break}return f}function Qa(a,b){var c=Oa(a,b);return a[c]&&0==a.cmp(a[c],b)?a[c]:null}function Ra(a,b){var c=Oa(a,b);if(a[c]&&0==a.cmp(a[c],b))return a[c];a.splice(c,0,b);return b}function Sa(a,b){var c=Oa(a,b);a[c]&&0==a.cmp(a[c],b)&&a.splice(c,1)};for(var Ua=new Uint8Array(256),Va=0;256>Va;Va++)Ua[Va]=Ua[Va>>>1]+(Va&1);function Wa(a,b,c){return a<b?b:a>c?c:a}function Xa(a,b,c){return a*(1-c)+b*c}function Ya(a,b){return a==b?a:0==a?b:0==b?a:0==(a&1)?0==(b&1)?Ya(a>>1,b>>1)<<1:Ya(a>>1,b):0==(b&1)?Ya(a,b>>1):a>=b?Ya(a-b>>1,b):Ya(b-a>>1,a)}function Za(a,b,c){var d=b*b-4*a*c;if(0<d){c={};d=Math.sqrt(d);a=2*a;var f=(-b+d)/a;a=(-b-d)/a;a>f?(c.Ra=f,c.Vc=a):(c.Ra=a,c.Vc=f);return c}return 0==d?(c={},c.Ra=-b/(2*a),c.Vc=c.Ra,c):null}
function ab(a,b,c){a[b]=void 0==a[b]?c:a[b]+c}function bb(a){this.cmp=a;this.elements=[]}e=bb.prototype;e.get=function(a){var b=cb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements[b]};e.contains=function(a){var b=cb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?-1:b};e.add=function(a){return this.push(a)};
e.push=function(a){var b=cb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return!1;this.elements.splice(b,0,a);return!0};e.replace=function(a){var b=cb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b]=a,!0;this.elements.splice(b,0,a);return!0};e.Oa=function(a){var b=cb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b];this.elements.splice(b,0,a);return a};
e.remove=function(a){var b=cb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements.splice(b,1)[0]};function cb(a,b){for(var c=0,d=a.elements.length,f=Math.floor(c/2+d/2);c<d;){var h=a.cmp.call(a,b,a.elements[f]);if(0>h)d=f,f=Math.floor(c/2+d/2);else if(0<h)c=f+1,f=Math.floor(c/2+d/2);else break}return f}e.clear=function(){this.elements.length=0};e.Zi=function(){return 0==this.elements.length};function db(){this.start=new eb(null);return this}e=db.prototype;
e.Zi=function(){return!this.first().item};e.size=function(){for(var a=0,b=this.first();b.item;b=b.next)a++;return a};e.first=function(){return this.start.next};e.clear=function(){fb(this.start);return this};function gb(a,b){hb(b,a.start);return a}e.add=function(a){return gb(this,new eb(a))};function ib(a){for(var b=jb,c=lb,d=b.first();d.item;d=d.next)if(0>c.call(null,a.item,d.item)){hb(a,d);return}hb(a,b.start)}e.get=function(a){for(var b=this.first();b.item;b=b.next)if(b.item==a)return b;return null};
e.remove=function(a){a=this.get(a);if(null==a)return null;fb(a);return this};e.sort=function(a){for(var b,c=this.first();c.item;c=b){b=c.next;var d=c;for(var f=d.sb;f.item&&!(0<=a(d.item,f.item));)f=f.sb;d=f;d!=c.sb&&(fb(c),c.sb=d,c.next=d.next,c.sb.next=c,c.next.sb=c)}};function eb(a){this.item=a;this.sb=this;this.next=this;return this}function hb(a,b){a.next=b;a.sb=b.sb;a.next.sb=a;a.sb.next=a}function fb(a){a.sb.next=a.next;a.next.sb=a.sb;a.next=a.sb=a};function mb(){var a;isNaN(a)&&(a=Date.now()|0);this.r=a+643709624|0}mb.prototype.next=function(){this.r^=this.r<<13;this.r^=this.r>>17;this.r^=this.r<<5;this.r>>>=0};function nb(){var a=ob;a.next();return a.r}function pb(a){a.next();return a.r/4294967295}var ob=new mb;function qb(a){return Math.floor(pb(ob)*a)}function sb(a){return 1>pb(ob)*a}function tb(a){return a[qb(a.length)]}function xb(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return tb(b)};function yb(a,b,c){for(var d=0,f=a.length,h=d+(f-d>>1);d<f;){var g=c.call(null,b,a[h]);if(0>g)f=h,h=d+(f-d>>1);else if(0<g)d=h+1,h=d+(f-d>>1);else break}return h}function zb(a,b){b=a.indexOf(b);0>b||a.splice(b,1)}function Ab(a,b){var c=a.splice(0);c=q(c);for(var d=c.next();!d.done;d=c.next())d=d.value,a.splice(yb(a,d,b),0,d)}function lb(a,b){return isNaN(a)?a.index<b.index?-1:a.index>b.index?1:0:a<b.index?-1:a>b.index?1:0}
function Bb(a,b){return"string"==typeof a?a<b.name?-1:a>b.name?1:0:a.name<b.name?-1:a.name>b.name?1:0};function Cb(a){var b=Fb(a);a=a.slice(a.position,a.position+=b);return String.fromCharCode.apply(null,a)}function Gb(a,b){Hb(a,b.length);for(var c=0;c<b.length;c++)a[a.position++]=b.charCodeAt(c)}function Ib(a){var b=Jb(a);a=a.slice(a.position,a.position+=b);var c;void 0==c&&(c=0);if(void 0==d)var d=a.length;b=53;for(var f=c;f<c+d;f++){var h=a[f];a[f]=a[f]-193*b-53&255;b=h}return String.fromCharCode.apply(null,a)}
function Kb(a,b){Mb(a,b.length);for(var c=a.position,d=0;d<b.length;d++)a[a.position++]=b.charCodeAt(d);b=b.length;void 0==c&&(c=0);void 0==b&&(b=a.length);d=53;for(var f=c;f<c+b;f++)a[f]=a[f]+193*d+53&255,d=a[f]}function Fb(a){return a[a.position++]}function Hb(a,b){a[a.position++]=b&255}function Ob(a){var b=0|a[a.position++]<<0;return b|=a[a.position++]<<8}function Sb(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}
function Ub(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;return(b>>>0)-32768}function Vb(a,b){b+=32768;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}function Jb(a){var b=a[a.position++]<<0;b+=a[a.position++]<<8;b+=a[a.position++]<<16;return b+=a[a.position++]<<24}function Mb(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}
function Wb(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;b|=a[a.position++]<<16;b|=a[a.position++]<<24;return(b>>>0)-2147483648}function dc(a,b){b+=2147483648;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}function ec(a){var b=new Uint8Array(4);b[0]=a[a.position++];b[1]=a[a.position++];b[2]=a[a.position++];b[3]=a[a.position++];return(new Float32Array(b.buffer))[0]}
function fc(a,b){var c=new Float32Array(1);c[0]=b;c=new Uint8Array(c.buffer);a[a.position++]=c[0];a[a.position++]=c[1];a[a.position++]=c[2];a[a.position++]=c[3]};function gc(){this.size=0;this.root=new hc;this.root.update=function(){};this.tc=null}gc.prototype.Zi=function(){return 0==this.size};gc.prototype.pop=function(){if(this.Zi())return null;var a=this.root.We.fh(),b=a.value;this.remove(a);return b};
gc.prototype.add=function(a,b){this.tc=new ic;if(0==this.size)this.root.We=this.tc,this.tc.parent=this.root;else{var c=this.root;var d=this.size;d=Ua[d>>>0&255]+Ua[d>>>8&255]+Ua[d>>>16&255]+Ua[d>>>24];for(var f=0;f<d;f++)c=c.We;d=new hc;d.parent=c.parent;c.parent.We=d;d.Jj=c;c.parent=d;d.We=this.tc;this.tc.parent=d}c=this.tc;c.value=a;c.key=b;c.parent.update();this.size++;return this.tc};
gc.prototype.remove=function(a){if(a==this.tc)1==this.size?this.root.We=this.tc=null:jc(this);else{var b=this.tc.value,c=this.tc.key;jc(this);a.value=b;a.key=c;a.parent.update()}this.size--};function jc(a){var b=a.tc.parent,c=b.Jj;a.tc=c.tc();c.parent=b.parent;c.parent.We=c;c.parent.update()}function hc(){}hc.prototype.fh=function(){return this.first};hc.prototype.tc=function(){return this.We.tc()};
hc.prototype.update=function(){this.first=this.We.fh().key<this.Jj.fh().key?this.We.fh():this.Jj.fh();this.parent.update()};function ic(){}ic.prototype.fh=function(){return this};ic.prototype.tc=function(){return this};Math.Dh=2*Math.PI;function kc(a){return a*Math.PI/180}function mc(a){return Math.PI/2147483648*a}function pc(a,b,c,d){return qc(new w(a.x-c.x,a.y-c.y,a.z-c.z),b,d)}function qc(a,b,c){return Za(rc(b,b),2*rc(a,b),rc(a,a)-c*c)}function sc(a,b,c){.7071>a.y&&-.7071<a.y?(b.set(a.z,0,-a.x),tc(a,b,c).na(1),tc(c,a,b)):(c.set(0,a.z,-a.y),tc(c,a,b).na(1),tc(a,b,c))}function uc(a){var b=pb(ob)*Math.PI*2;void 0==a&&(a=2*pb(ob)-1);var c=Math.sqrt(1-a*a);return new w(Math.sin(b)*c,a,Math.cos(b)*c)}
function vc(a,b){var c;c||(c=new wc);for(var d=[],f=0;;){for(var h=-1,g=null,k=Number.POSITIVE_INFINITY,l=0;l<b.length;l++)if(!(f&1<<l)){var m=b[l],n=rc(m,a);n<k&&(h=l,g=m,k=n)}if(0<=k)break;c=c.nk(a,g,k);d.push(g);f|=1<<h;if(!c)break}a.round()}function wc(){}wc.prototype.nk=function(a,b,c){a.x-=b.x*c;a.y-=b.y*c;a.z-=b.z*c;return new xc(b)};function xc(a){this.n=a}xc.prototype.nk=function(a,b){b=tc(this.n,b,new w(0,0,0));if(0==b.na(1))return null;var c=rc(a,b);a.x=b.x*c;a.y=b.y*c;a.z=b.z*c;return new Dc(b)};
function Dc(a){this.n=a}Dc.prototype.nk=function(a,b,c){b=c/rc(this.n,b);if(!isFinite(b))return null;a.x-=this.n.x*b;a.y-=this.n.y*b;a.z-=this.n.z*b;return null};function Ec(a,b,c){null==a?(this.a=b*c,this.c=b,this.ratio=c):null==b?(this.a=a,this.c=a/c,this.ratio=c):null==c?(this.a=a,this.c=b,this.ratio=a/b):(this.a=a,this.c=b,this.ratio=c);this.y=this.x=0;a=a>b?a:b;for(this.bufferSize=8;this.bufferSize<a;this.bufferSize*=2);}
function Fc(a,b,c,d,f){a=Math.round(a);b=Math.round(b);c=Math.round(c);d=Math.round(d);this.m=a;this.l=b;this.K=c;this.H=d;if(!f)return this.ga=c-a,this.ca=d-b,this.cc=this.Aa=NaN,this.length=Math.sqrt(this.ga*this.ga+this.ca*this.ca),a=this.ga,b=this.ca,0>a?0>b?-a<-b?(this.type=9,this.Aa=-a/b,this.cc=-b/this.length,a=Ya(-a,-b),this.ga/=a,this.ca/=a):-a>-b?(this.type=7,this.Aa=b/a,this.cc=-a/this.length,a=Ya(-a,-b),this.ga/=a,this.ca/=a):(this.type=8,this.Aa=this.ca=this.ga=-1,this.cc=Math.SQRT1_2):
0<b?-a<b?(this.type=3,this.Aa=-a/b,this.cc=b/this.length,a=Ya(-a,b),this.ga/=a,this.ca/=a):-a>b?(this.type=5,this.Aa=b/a,this.cc=-a/this.length,a=Ya(-a,b),this.ga/=a,this.ca/=a):(this.type=4,this.ga=-1,this.ca=1,this.Aa=-1,this.cc=Math.SQRT1_2):(this.type=6,this.ga=-1):0<a?0>b?a<-b?(this.type=11,this.Aa=-a/b,this.cc=-b/this.length,a=Ya(a,-b),this.ga/=a,this.ca/=a):a>-b?(this.type=13,this.Aa=b/a,this.cc=a/this.length,a=Ya(a,-b),this.ga/=a,this.ca/=a):(this.type=12,this.ga=1,this.Aa=this.ca=-1,this.cc=
Math.SQRT1_2):0<b?a<b?(this.type=1,this.Aa=-a/b,this.cc=b/this.length,a=Ya(a,b),this.ga/=a,this.ca/=a):a>b?(this.type=15,this.Aa=b/a,this.cc=a/this.length,a=Ya(a,b),this.ga/=a,this.ca/=a):(this.type=0,this.ca=this.ga=1,this.Aa=-1,this.cc=Math.SQRT1_2):(this.type=14,this.ga=1):a<b?(this.type=2,this.ca=1):a>b&&(this.type=10,this.ca=-1),this}function Gc(a,b){return a.m<b.m?-1:a.m>b.m?1:a.l<b.l?-1:a.l>b.l?1:a.K<b.K?-1:a.K>b.K?1:a.H<b.H?-1:a.H>b.H?1:0}e=Fc.prototype;
e.replace=function(a){this.remove=!0;if(this.Ae){a=q(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b.Ae){var c=q(this.Ae);for(d=c.next();!d.done;d=c.next())d=d.value,0<=b.Ae.indexOf(d)||(b.Ae.push(d),d.push(b))}else{b.Ae=this.Ae.slice();c=q(b.Ae);for(var d=c.next();!d.done;d=c.next())d.value.push(b)}a=q(this.Ae);for(d=a.next();!d.done;d=a.next())b=d.value,b.splice(b.indexOf(this),1);delete this.Ae}};
function Hc(a,b){var c=a.m+b.ga;b=a.l+b.ca;return Math.atan2(Jc(a,c,b),a.getParameter(c,b))}function Kc(a,b,c){for(var d={Cm:[],code:0},f=0;f<c.length;f++)d.Cm.push(Jc(c[f],a,b)),1==Lc(c[f],a,b)&&(d.code+=1<<f);return d}
function Pc(a){var b;var c=Number.NEGATIVE_INFINITY;var d=Number.POSITIVE_INFINITY;var f=b=null;var h=a[a.length-1];a=q(a);for(var g=a.next();!g.done;g=a.next()){g=g.value;var k=g.m-g.l;k>c?(c=k,d=g.l,b=h,f=g):k==c&&g.l<d&&(d=g.l,b=h,f=g);h=g}c=b.type&7;d=f.type;return c<d?!0:c>d?!1:b.Aa<f.Aa?!0:b.Aa>f.Aa?!1:!0}
function Qc(a,b,c){var d=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,h=null,g=null;c=q(c);for(var k=c.next();!k.done;k=c.next()){k=k.value;var l=Rc(k,a,b);0>l?(l=-l,l<d&&(d=l,h=k)):0<l&&l<f&&(f=l,g=k)}--d;--f;return 0==d||0==f?0:h&&g?d<f?-1:d>f||h.K<g.m?1:-1:g?1:-1}
function Sc(a){var b=a.bound;if(!b){b=new Tc;for(var c=q(a),d=c.next();!d.done;d=c.next()){var f=d.value;b.Oa(f.K,f.H)}}b=b.o+(b.F-b.o>>1);f=c=Number.POSITIVE_INFINITY;a=q(a);for(d=a.next();!d.done;d=a.next())d=d.value,0<d.ca?(d=Uc(d,b),d<f&&(f=d)):0>d.ca&&(d=Uc(d,b),d<c&&(c=d));return new E(c+(f-c>>1),b)}
function Vc(a,b){var c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;b=q(b);for(var f=b.next();!f.done;f=b.next()){var h=f.value,g=Jc(a,h.m,h.l),k=Jc(a,h.K,h.H);f=a.getParameter(h.m,h.l);h=a.getParameter(h.K,h.H);if(g<k)g/=g-k,f=f*(1-g)+h*g,f<d&&(d=f);else if(g>k)g/=g-k,f=f*(1-g)+h*g,f>c&&(c=f);else if(0>g){if(f>h)return null}else if(0<g&&f<h)return null}return!isFinite(c)||!isFinite(d)||c>=d?null:[c,d]}
function Lc(a,b,c){if(void 0==a.type)return 0;switch(a.type){case 0:case 1:case 3:var d=0;a=(c-a.l)*-a.Aa+a.m;b<=a&&(d+=2);b>=a&&(d+=1);return d;case 2:return d=0,b<=a.m&&(d+=2),b>=a.m&&(d+=1),d;case 4:case 5:case 7:return d=0,a=(b-a.m)*a.Aa+a.l,c<=a&&(d+=2),c>=a&&(d+=1),d;case 6:return d=0,c<=a.l&&(d+=2),c>=a.l&&(d+=1),d;case 8:case 9:case 11:return d=0,a=(c-a.l)*-a.Aa+a.m,b<=a&&(d+=1),b>=a&&(d+=2),d;case 10:return d=0,b<=a.m&&(d+=1),b>=a.m&&(d+=2),d;case 12:case 13:case 15:return d=0,a=(b-a.m)*
a.Aa+a.l,c<=a&&(d+=1),c>=a&&(d+=2),d;case 14:return d=0,c<=a.l&&(d+=1),c>=a.l&&(d+=2),d}}
function Jc(a,b,c){switch(a.type){case 0:case 1:case 3:b-=a.m;c-=a.l;var d=Math.floor(c/a.ca);b-=d*a.ga;c-=d*a.ca;return(c*-a.Aa-b)*a.cc;case 2:return a.m-b;case 4:case 5:case 7:return b-=a.m,c-=a.l,d=Math.floor(b/-a.ga),b+=d*a.ga,c+=d*a.ca,(b*a.Aa-c)*a.cc;case 6:return a.l-c;case 8:case 9:case 11:return b-=a.m,c-=a.l,d=Math.floor(c/-a.ca),b+=d*a.ga,c+=d*a.ca,(b-c*-a.Aa)*a.cc;case 10:return b-a.m;case 12:case 13:case 15:return b-=a.m,c-=a.l,d=Math.floor(b/a.ga),b-=d*a.ga,c-=d*a.ca,(c-b*a.Aa)*a.cc;
case 14:return c-a.l}return NaN}e.getParameter=function(a,b){var c=this.type,d=this.ga,f=this.ca;this.type=(c+12)%16;this.ga=f;this.ca=-d;a=Jc(this,a,b);this.type=c;this.ga=d;this.ca=f;return a};e.evaluate=function(a){a/=this.length;return(new E(this.m+(this.K-this.m)*a,this.l+(this.H-this.l)*a)).round()};e.ub=function(a,b){var c=(this.K-this.m)/this.length,d=(this.H-this.l)/this.length;return(new E(this.m+c*a-d*b,this.l+d*a+c*b)).round()};
e.Nf=function(a,b){return(new E(this.getParameter(a,b),Jc(this,a,b))).round()};function Wc(a){return(new E(a.K-a.m,a.H-a.l)).scale(5E4/a.length)}function Xc(a,b){return(new E(a.l-a.H,a.K-a.m)).scale(b/a.length)}e.Ig=function(a,b){a=this.getParameter(a,b);a/=this.length;return 0>=a?new E(this.m,this.l):1<=a?new E(this.K,this.H):(new E(this.m+(this.K-this.m)*a,this.l+(this.H-this.l)*a)).round()};
function Uc(a,b){var c=0;switch(a.type){case 0:case 1:case 3:if(b<a.l)break;if(b>=a.H)break;c-=a.m;b-=a.l;var d=Math.floor(b/a.ca);c-=d*a.ga;b-=d*a.ca;return b*-a.Aa-c;case 2:if(b<a.l)break;if(b>=a.H)break;return a.m-c;case 4:case 5:if(b<a.l)break;if(b>=a.H)break;c-=a.m;b-=a.l;d=Math.floor(b/a.ca);c-=d*a.ga;b-=d*a.ca;return b/a.Aa-c;case 7:if(b<a.H)break;if(b>=a.l)break;c-=a.m;b-=a.l;d=Math.floor(b/-a.ca);c+=d*a.ga;b+=d*a.ca;return b/a.Aa-c;case 8:case 9:case 11:if(b<a.H)break;if(b>=a.l)break;c-=
a.m;b-=a.l;d=Math.floor(b/-a.ca);c+=d*a.ga;b+=d*a.ca;return b*-a.Aa-c;case 10:if(b<a.H)break;if(b>=a.l)break;return a.m-c;case 12:case 13:if(b<a.H)break;if(b>=a.l)break;c-=a.m;b-=a.l;d=Math.floor(b/-a.ca);c+=d*a.ga;b+=d*a.ca;return b/a.Aa-c;case 15:if(!(b<a.l||b>=a.H))return c-=a.m,b-=a.l,d=Math.floor(b/a.ca),c-=d*a.ga,b-=d*a.ca,b/a.Aa-c}return NaN}
function Rc(a,b,c){switch(a.type){case 0:case 1:case 3:if(c<a.l)break;if(c>=a.H)break;b-=a.m;c-=a.l;var d=Math.floor(c/a.ca);b-=d*a.ga;c-=d*a.ca;a=c*-a.Aa-b;if(0>a)break;return a+1;case 2:if(c<a.l)break;if(c>=a.H)break;a=a.m-b;if(0>a)break;return a+1;case 4:case 5:if(c<a.l)break;if(c>=a.H)break;b-=a.m;c-=a.l;d=Math.floor(c/a.ca);b-=d*a.ga;c-=d*a.ca;a=c/a.Aa-b;if(0>a)break;return a+1;case 7:if(c<a.H)break;if(c>=a.l)break;b-=a.m;c-=a.l;d=Math.floor(c/-a.ca);b+=d*a.ga;c+=d*a.ca;a=c/a.Aa-b;if(0>a)break;
return-a-1;case 8:case 9:case 11:if(c<a.H)break;if(c>=a.l)break;b-=a.m;c-=a.l;d=Math.floor(c/-a.ca);b+=d*a.ga;c+=d*a.ca;a=c*-a.Aa-b;if(0>a)break;return-a-1;case 10:if(c<a.H)break;if(c>=a.l)break;a=a.m-b;if(0>a)break;return-a-1;case 12:case 13:if(c<a.H)break;if(c>=a.l)break;b-=a.m;c-=a.l;d=Math.floor(c/-a.ca);b+=d*a.ga;c+=d*a.ca;a=c/a.Aa-b;if(0>a)break;return-a-1;case 15:if(!(c<a.l||c>=a.H||(b-=a.m,c-=a.l,d=Math.floor(c/a.ca),b-=d*a.ga,c-=d*a.ca,a=c/a.Aa-b,0>a)))return a+1}return NaN}
e.log=function(){console.log(this.m+" "+this.l+" "+this.ga+" "+this.ca+" type: "+this.type+" slope: "+this.Aa)};e.X=function(){var a=this.hb(this.m,this.l,this.K,this.H);a.type=this.type;a.Aa=this.Aa;a.cc=this.cc;a.length=this.length;a.ga=this.ga;a.ca=this.ca;return a};function Yc(a){var b=a.hb(a.K,a.H,a.m,a.l);b.type=(a.type+8)%16;b.Aa=a.Aa;b.cc=a.cc;b.length=a.length;b.ga=-a.ga;b.ca=-a.ca;return b}e.hb=function(a,b,c,d){return new Fc(a,b,c,d)};
function Zc(a){if(a.ea)return a.ea;var b=Yc(a);b.ea=a;return a.ea=b}function $c(a,b){return a.type<b.type?-1:a.type>b.type?1:a.Aa<b.Aa?-1:a.Aa>b.Aa?1:0}function ad(a){var b=[];a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(new E(c.m,c.l));return b}function fd(a){var b=[];a.bound&&(b.bound=a.bound);a=q(a);for(var c=a.next();!c.done;c=a.next())b.unshift(Zc(c.value));return b}
function F(a,b,c,d){this.set(void 0===a?255:a,void 0===b?255:b,void 0===c?255:c,void 0===d?255:d);return this}function gd(a,b){return a.r<b.r?-1:a.r>b.r?1:a.bb<b.bb?-1:a.bb>b.bb?1:a.ra<b.ra?-1:a.ra>b.ra?1:a.La<b.La?-1:a.La>b.La?1:0}F.prototype.set=function(a,b,c,d){255<a&&(a=255);0>a&&(a=0);255<b&&(b=255);0>b&&(b=0);255<c&&(c=255);0>c&&(c=0);255<d&&(d=255);0>d&&(d=0);this.r=a;this.bb=b;this.ra=c;this.La=d;return this};
F.prototype.scale=function(a){this.r=Math.round(this.r*a);this.bb=Math.round(this.bb*a);this.ra=Math.round(this.ra*a);return this};F.prototype.save=function(a){Hb(a,this.r);Hb(a,this.bb);Hb(a,this.ra);Hb(a,this.La);return this};function hd(a){return new F(Fb(a),Fb(a),Fb(a),Fb(a))}new F(0,0,0,0);var id=new F(255,255,255,255),jd=new F(0,0,0,255),kd=new F(255,0,0,255),ld=new F(255,255,0,255);new F(0,255,0,255);new F(0,255,255,255);new F(0,0,255,255);new F(255,0,255,255);
function md(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.vj=this.uj=this.Bf=this.Af=this.md=this.ld=this.Hb=this.Xc=this.Cc=this.Ve=this.Ue=this.Te=this.Se=this.Re=this.Qe=0;this.Fa=this.Wd=this.Xd=this.oa=255;return this}
function qd(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:a.z<b.z?-1:a.z>b.z?1:a.Qe<b.Qe?-1:a.Qe>b.Qe?1:a.Re<b.Re?-1:a.Re>b.Re?1:a.Se<b.Se?-1:a.Se>b.Se?1:a.Te<b.Te?-1:a.Te>b.Te?1:a.Ue<b.Ue?-1:a.Ue>b.Ue?1:a.Ve<b.Ve?-1:a.Ve>b.Ve?1:a.Cc<b.Cc?-1:a.Cc>b.Cc?1:a.Xc<b.Xc?-1:a.Xc>b.Xc?1:a.Hb<b.Hb?-1:a.Hb>b.Hb?1:a.ld<b.ld?-1:a.ld>b.ld?1:a.md<b.md?-1:a.md>b.md?1:a.Af<b.Af?-1:a.Af>b.Af?1:a.Bf<b.Bf?-1:a.Bf>b.Bf?1:a.uj<b.uj?-1:a.uj>b.uj?1:a.vj<b.vj?-1:a.vj>b.vj?1:a.oa<b.oa?-1:a.oa>b.oa?1:a.Xd<b.Xd?-1:a.Xd>
b.Xd?1:a.Wd<b.Wd?-1:a.Wd>b.Wd?1:a.Fa<b.Fa?-1:a.Fa>b.Fa?1:0}function rd(a,b,c){var d=1-c,f=new md(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c);f.Qe=a.Qe*d+b.Qe*c;f.Re=a.Re*d+b.Re*c;f.Se=a.Se*d+b.Se*c;f.Te=a.Te*d+b.Te*c;f.Ue=a.Ue*d+b.Ue*c;f.Ve=a.Ve*d+b.Ve*c;f.Cc=a.Cc*d+b.Cc*c;f.Xc=a.Xc*d+b.Xc*c;f.Hb=a.Hb*d+b.Hb*c;f.ld=a.ld*d+b.ld*c;f.md=a.md*d+b.md*c;f.Af=a.Af*d+b.Af*c;f.Bf=a.Bf*d+b.Bf*c;f.oa=a.oa*d+b.oa*c;f.Xd=a.Xd*d+b.Xd*c;f.Wd=a.Wd*d+b.Wd*c;f.Fa=a.Fa*d+b.Fa*c;return f}
md.prototype.X=function(){var a=new md(this.x,this.y,this.z);a.Qe=this.Qe;a.Re=this.Re;a.Se=this.Se;a.Te=this.Te;a.Ue=this.Ue;a.Ve=this.Ve;a.Cc=this.Cc;a.Xc=this.Xc;a.Hb=this.Hb;a.ld=this.ld;a.md=this.md;a.Af=this.Af;a.Bf=this.Bf;a.oa=this.oa;a.Xd=this.Xd;a.Wd=this.Wd;a.Fa=this.Fa;return a};function sd(a,b){a.oa=b.r;a.Xd=b.bb;a.Wd=b.ra;a.Fa=b.La}function td(a,b,c){a.ld=b;a.md=c;return a};function E(a,b){this.x=void 0===a?0:a;this.y=void 0===b?0:b;return this}e=E.prototype;e.set=function(a,b){this.x=a;this.y=b;return this};e.wc=function(){return this.x*this.x+this.y*this.y};e.length=function(){return Math.sqrt(this.wc())};e.na=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};e.normalize=function(){this.na(1);return this};e.scale=function(a){this.x*=a;this.y*=a;return this};e.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
e.add=function(a){this.x+=a.x;this.y+=a.y;return this};e.sub=function(a){this.x=this.x-a.x;this.y=this.y-a.y;return this};e.X=function(){return new E(this.x,this.y)};e.li=function(){this.x=-this.x;this.y=-this.y;return this};e.ke=function(a){a||(a=new Float32Array(2));a[0]=this.x;a[1]=this.y;return a};function ud(a,b){return a.x*b.x+a.y*b.y}function vd(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0}e.bk=function(){return 0!=this.x||0!=this.y?!1:!0};
function w(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;return this}function rc(a,b){return a.x*b.x+a.y*b.y+a.z*b.z}function tc(a,b,c){c.x=a.y*b.z-a.z*b.y;c.y=b.x*a.z-b.z*a.x;c.z=a.x*b.y-a.y*b.x;return c}function wd(a,b){return Math.abs(b.x-a.x)+Math.abs(b.y-a.y)+Math.abs(b.z-a.z)}function xd(a,b,c){c.x=a.x-b.x;c.y=a.y-b.y;c.z=a.z-b.z;return c}function yd(a,b,c){var d=1-c;return new w(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c)}function zd(a,b){b.x=a.x;b.y=a.y;b.z=a.z}e=w.prototype;
e.X=function(){return new w(this.x,this.y,this.z)};e.set=function(a,b,c){this.x=a;this.y=b;this.z=c;return this};e.li=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};e.wc=function(){return this.x*this.x+this.y*this.y+this.z*this.z};e.length=function(){return Math.sqrt(this.wc())};e.na=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};e.normalize=function(){this.na(1);return this};e.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};
e.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this};e.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};e.sub=function(a){return xd(this,a,this)};e.ke=function(a){a||(a=new Float32Array(3));a[0]=this.x;a[1]=this.y;a[2]=this.z;return a};e.bk=function(){return 0!=this.x||0!=this.y||0!=this.z?!1:!0};function Ad(a,b,c,d){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.a=void 0===d?0:d;return this}
Ad.prototype.set=function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.a=d;return this};Ad.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.a=Math.round(this.a);return this};Ad.prototype.ke=function(a){a||(a=new Float32Array(4));a[0]=this.x;a[1]=this.y;a[2]=this.z;a[3]=this.a;return a};Ad.prototype.bk=function(){return 0!=this.x||0!=this.y||0!=this.z||0!=this.a?!1:!0};function Bd(){this.reset();return this}e=Bd.prototype;
e.set=function(a){this.u=a.u;this.A=a.A;this.B=a.B;this.v=a.v;this.m11=a.m11;this.m12=a.m12;this.C=a.C;this.m21=a.m21;this.m22=a.m22;return this};e.reset=function(){this.u=1;this.v=this.B=this.A=0;this.m11=1;this.m21=this.C=this.m12=0;this.m22=1;return this};
e.rotate=function(a,b,c){var d=Math.cos(c);c=Math.sin(c);var f=c*this.u+d*this.A,h=d*this.v-c*this.m11,g=c*this.v+d*this.m11,k=d*this.C-c*this.m21,l=c*this.C+d*this.m21;this.u=d*this.u-c*this.A;this.A=f;this.v=h;this.m11=g;this.C=k;this.m21=l;d=Math.cos(b);b=Math.sin(b);c=d*this.B-b*this.A;f=b*this.m12+d*this.m11;h=d*this.m12-b*this.m11;g=b*this.m22+d*this.m21;k=d*this.m22-b*this.m21;this.A=b*this.B+d*this.A;this.B=c;this.m11=f;this.m12=h;this.m21=g;this.m22=k;b=Math.cos(a);a=Math.sin(a);d=a*this.B+
b*this.u;c=b*this.m12-a*this.v;f=a*this.m12+b*this.v;h=b*this.m22-a*this.C;g=a*this.m22+b*this.C;this.B=b*this.B-a*this.u;this.u=d;this.m12=c;this.v=f;this.m22=h;this.C=g;return this};e.wk=function(a,b){var c=Math.cos(b),d=Math.sin(b);b=1-c;var f=a.x*a.y,h=a.y*a.z,g=a.z*a.x,k=a.x*d,l=a.y*d;d*=a.z;this.u=a.x*a.x*b+c;this.A=f*b+d;this.B=g*b-l;this.v=f*b-d;this.m11=a.y*a.y*b+c;this.m12=h*b+k;this.C=g*b+l;this.m21=h*b-k;this.m22=a.z*a.z*b+c;return this};
e.uk=function(a,b){a=(new Bd).wk(a,b);Cd(a,this,this);return this};e.scale=function(a,b,c){this.u*=a;this.A*=a;this.B*=a;this.v*=b;this.m11*=b;this.m12*=b;this.C*=c;this.m21*=c;this.m22*=c;return this};
e.ak=function(a){a||(a=this);var b=this.Oj();if(0==b)return a;var c=-(this.v*this.m22+this.m12*-this.C),d=this.v*this.m21+this.m11*-this.C,f=-(this.A*this.m22+this.B*-this.m21),h=this.u*this.m22+this.B*-this.C,g=-(this.u*this.m21+this.A*-this.C),k=this.A*this.m12+this.B*-this.m11,l=-(this.u*this.m12+this.B*-this.v),m=this.u*this.m11+this.A*-this.v;b=1/b;a.u=(this.m11*this.m22+this.m12*-this.m21)*b;a.v=c*b;a.C=d*b;a.A=f*b;a.m11=h*b;a.m21=g*b;a.B=k*b;a.m12=l*b;a.m22=m*b;return a};
e.Oj=function(){return this.u*(this.m11*this.m22-this.m12*this.m21)+this.A*(this.m12*this.C-this.v*this.m22)+this.B*(this.v*this.m21-this.m11*this.C)};e.ke=function(a){a||(a=new Float32Array(9));a[0]=this.u;a[1]=this.A;a[2]=this.B;a[3]=this.v;a[4]=this.m11;a[5]=this.m12;a[6]=this.C;a[7]=this.m21;a[8]=this.m22;return a};
function Cd(a,b,c){var d=a.A*b.u+a.m11*b.A+a.m21*b.B,f=a.B*b.u+a.m12*b.A+a.m22*b.B,h=a.u*b.v+a.v*b.m11+a.C*b.m12,g=a.A*b.v+a.m11*b.m11+a.m21*b.m12,k=a.B*b.v+a.m12*b.m11+a.m22*b.m12,l=a.u*b.C+a.v*b.m21+a.C*b.m22,m=a.A*b.C+a.m11*b.m21+a.m21*b.m22,n=a.B*b.C+a.m12*b.m21+a.m22*b.m22;c.u=a.u*b.u+a.v*b.A+a.C*b.B;c.v=h;c.C=l;c.A=d;c.m11=g;c.m21=m;c.B=f;c.m12=k;c.m22=n;return c}
e.transform=function(a,b){return b.set(this.u*a.x+this.v*a.y+this.C*a.z,this.A*a.x+this.m11*a.y+this.m21*a.z,this.B*a.x+this.m12*a.y+this.m22*a.z)};e.gf=function(){return new w(this.u,this.A,this.B)};e.hf=function(){return new w(this.v,this.m11,this.m12)};e.td=function(){return new w(this.C,this.m21,this.m22)};e.Ee=function(a){this.u=a.x;this.A=a.y;this.B=a.z;return this};e.Fe=function(a){this.v=a.x;this.m11=a.y;this.m12=a.z;return this};e.Ge=function(a){this.C=a.x;this.m21=a.y;this.m22=a.z;return this};
e.save=function(a){var b=new Uint8Array((new Float32Array([this.u,this.A,this.B,this.v,this.m11,this.m12,this.C,this.m21,this.m22])).buffer);a.set(b,a.position);a.position+=36};e.load=function(a){a=a.slice(a.position,a.position+=36);a=new Float32Array(a.buffer);a=q(a);this.u=a.next().value;this.A=a.next().value;this.B=a.next().value;this.v=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.C=a.next().value;this.m21=a.next().value;this.m22=a.next().value};new Bd;
function H(){this.reset();return this}e=H.prototype;e.set=function(a){this.u=a.u;this.A=a.A;this.B=a.B;this.kb=a.kb;this.v=a.v;this.m11=a.m11;this.m12=a.m12;this.m13=a.m13;this.C=a.C;this.m21=a.m21;this.m22=a.m22;this.m23=a.m23;this.s=a.s;this.m31=a.m31;this.m32=a.m32;this.m33=a.m33;return this};e.reset=function(){this.u=1;this.v=this.kb=this.B=this.A=0;this.m11=1;this.m21=this.C=this.m13=this.m12=0;this.m22=1;this.m32=this.m31=this.s=this.m23=0;this.m33=1;return this};
function Dd(a){Bd.prototype.reset.call(a)}e.translate=function(a,b,c){this.s+=a;this.m31+=b;this.m32+=c;return this};e.rotate=Bd.prototype.rotate;e.wk=Bd.prototype.wk;e.uk=Bd.prototype.uk;e.scale=Bd.prototype.scale;
e.ak=function(a){function b(D,I,L,R,ra,ta,ia,pa,Lb){return D*(ra*Lb-ta*pa)+I*(ta*ia-R*Lb)+L*(R*pa-ra*ia)}a||(a=this);var c=this.Oj();if(0==c)return a;var d=b(this.m11,this.m12,this.m13,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),f=-b(this.v,this.m12,this.m13,this.C,this.m22,this.m23,this.s,this.m32,this.m33),h=b(this.v,this.m11,this.m13,this.C,this.m21,this.m23,this.s,this.m31,this.m33),g=-b(this.v,this.m11,this.m12,this.C,this.m21,this.m22,this.s,this.m31,this.m32),k=-b(this.A,this.B,
this.kb,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),l=b(this.u,this.B,this.kb,this.C,this.m22,this.m23,this.s,this.m32,this.m33),m=-b(this.u,this.A,this.kb,this.C,this.m21,this.m23,this.s,this.m31,this.m33),n=b(this.u,this.A,this.B,this.C,this.m21,this.m22,this.s,this.m31,this.m32),r=b(this.A,this.B,this.kb,this.m11,this.m12,this.m13,this.m31,this.m32,this.m33),p=-b(this.u,this.B,this.kb,this.v,this.m12,this.m13,this.s,this.m32,this.m33),v=b(this.u,this.A,this.kb,this.v,this.m11,this.m13,
this.s,this.m31,this.m33),B=-b(this.u,this.A,this.B,this.v,this.m11,this.m12,this.s,this.m31,this.m32),y=-b(this.A,this.B,this.kb,this.m11,this.m12,this.m13,this.m21,this.m22,this.m23),x=b(this.u,this.B,this.kb,this.v,this.m12,this.m13,this.C,this.m22,this.m23),A=-b(this.u,this.A,this.kb,this.v,this.m11,this.m13,this.C,this.m21,this.m23),z=b(this.u,this.A,this.B,this.v,this.m11,this.m12,this.C,this.m21,this.m22);c=1/c;a.u=d*c;a.v=f*c;a.C=h*c;a.s=g*c;a.A=k*c;a.m11=l*c;a.m21=m*c;a.m31=n*c;a.B=r*c;a.m12=
p*c;a.m22=v*c;a.m32=B*c;a.kb=y*c;a.m13=x*c;a.m23=A*c;a.m33=z*c;return a};
e.Oj=function(){var a=this.u*(this.m11*this.m22*this.m33+this.m12*this.m23*this.m31+this.m13*this.m21*this.m32-(this.m13*this.m22*this.m31+this.m11*this.m23*this.m32+this.m12*this.m21*this.m33));a-=this.A*(this.v*this.m22*this.m33+this.m12*this.m23*this.s+this.m13*this.C*this.m32-(this.m13*this.m22*this.s+this.v*this.m23*this.m32+this.m12*this.C*this.m33));a+=this.B*(this.v*this.m21*this.m33+this.m11*this.m23*this.s+this.m13*this.C*this.m31-(this.m13*this.m21*this.s+this.v*this.m23*this.m31+this.m11*
this.C*this.m33));return a-=this.kb*(this.v*this.m21*this.m32+this.m11*this.m22*this.s+this.m12*this.C*this.m31-(this.m12*this.m21*this.s+this.v*this.m22*this.m31+this.m11*this.C*this.m32))};e.ke=function(a){a||(a=new Float32Array(16));a[0]=this.u;a[1]=this.A;a[2]=this.B;a[3]=this.kb;a[4]=this.v;a[5]=this.m11;a[6]=this.m12;a[7]=this.m13;a[8]=this.C;a[9]=this.m21;a[10]=this.m22;a[11]=this.m23;a[12]=this.s;a[13]=this.m31;a[14]=this.m32;a[15]=this.m33;return a};
function Nd(a,b,c){var d=a.A*b.u+a.m11*b.A+a.m21*b.B+a.m31*b.kb,f=a.B*b.u+a.m12*b.A+a.m22*b.B+a.m32*b.kb,h=a.kb*b.u+a.m13*b.A+a.m23*b.B+a.m33*b.kb,g=a.u*b.v+a.v*b.m11+a.C*b.m12+a.s*b.m13,k=a.A*b.v+a.m11*b.m11+a.m21*b.m12+a.m31*b.m13,l=a.B*b.v+a.m12*b.m11+a.m22*b.m12+a.m32*b.m13,m=a.kb*b.v+a.m13*b.m11+a.m23*b.m12+a.m33*b.m13,n=a.u*b.C+a.v*b.m21+a.C*b.m22+a.s*b.m23,r=a.A*b.C+a.m11*b.m21+a.m21*b.m22+a.m31*b.m23,p=a.B*b.C+a.m12*b.m21+a.m22*b.m22+a.m32*b.m23,v=a.kb*b.C+a.m13*b.m21+a.m23*b.m22+a.m33*b.m23,
B=a.u*b.s+a.v*b.m31+a.C*b.m32+a.s*b.m33,y=a.A*b.s+a.m11*b.m31+a.m21*b.m32+a.m31*b.m33,x=a.B*b.s+a.m12*b.m31+a.m22*b.m32+a.m32*b.m33,A=a.kb*b.s+a.m13*b.m31+a.m23*b.m32+a.m33*b.m33;c.u=a.u*b.u+a.v*b.A+a.C*b.B+a.s*b.kb;c.v=g;c.C=n;c.s=B;c.A=d;c.m11=k;c.m21=r;c.m31=y;c.B=f;c.m12=l;c.m22=p;c.m32=x;c.kb=h;c.m13=m;c.m23=v;c.m33=A}
function Od(a){var b=new H,c=a.u*-a.s+a.A*-a.m31+a.B*-a.m32,d=a.v*-a.s+a.m11*-a.m31+a.m12*-a.m32,f=a.C*-a.s+a.m21*-a.m31+a.m22*-a.m32,h=a.v,g=a.C,k=a.A,l=a.m11,m=a.m21,n=a.B,r=a.m12,p=a.m22;b.u=a.u;b.v=k;b.C=n;b.s=c;b.A=h;b.m11=l;b.m21=r;b.m31=d;b.B=g;b.m12=m;b.m22=p;b.m32=f;return b}
e.transform=function(a,b){return b.set(this.u*a.x+this.v*a.y+this.C*a.z+this.s*a.a,this.A*a.x+this.m11*a.y+this.m21*a.z+this.m31*a.a,this.B*a.x+this.m12*a.y+this.m22*a.z+this.m32*a.a,this.kb*a.x+this.m13*a.y+this.m23*a.z+this.m33*a.a)};e.ub=function(a,b){return b.set(this.u*a.x+this.v*a.y+this.C*a.z+this.s,this.A*a.x+this.m11*a.y+this.m21*a.z+this.m31,this.B*a.x+this.m12*a.y+this.m22*a.z+this.m32)};
function Pd(a,b,c){c.set(a.u*b.x+a.v*b.y+a.C*b.z,a.A*b.x+a.m11*b.y+a.m21*b.z,a.B*b.x+a.m12*b.y+a.m22*b.z)}e.gf=Bd.prototype.gf;e.hf=Bd.prototype.hf;e.td=Bd.prototype.td;function Qd(a){return new w(a.s,a.m31,a.m32)}e.Ee=Bd.prototype.Ee;e.Fe=Bd.prototype.Fe;e.Ge=Bd.prototype.Ge;function Rd(a,b){a.s=b.x;a.m31=b.y;a.m32=b.z}
e.save=function(a){var b=new Uint8Array((new Float32Array([this.u,this.A,this.B,this.kb,this.v,this.m11,this.m12,this.m13,this.C,this.m21,this.m22,this.m23,this.s,this.m31,this.m32,this.m33])).buffer);a.set(b,a.position);a.position+=64};
e.load=function(a){a=a.slice(a.position,a.position+=64);a=new Float32Array(a.buffer);a=q(a);this.u=a.next().value;this.A=a.next().value;this.B=a.next().value;this.kb=a.next().value;this.v=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.m13=a.next().value;this.C=a.next().value;this.m21=a.next().value;this.m22=a.next().value;this.m23=a.next().value;this.s=a.next().value;this.m31=a.next().value;this.m32=a.next().value;this.m33=a.next().value};var Sd=new H;
function Tc(){this.w=Number.POSITIVE_INFINITY;this.D=Number.NEGATIVE_INFINITY;this.o=Number.POSITIVE_INFINITY;this.F=Number.NEGATIVE_INFINITY}Tc.prototype.Oa=function(a,b){a<this.w&&(this.w=a);a>this.D&&(this.D=a);b<this.o&&(this.o=b);b>this.F&&(this.F=b);return this};Tc.prototype.Al=function(a){this.Oa(a.w,a.o);this.Oa(a.D,a.F)};Tc.prototype.X=function(){var a=new Tc;a.w=this.w;a.D=this.D;a.o=this.o;a.F=this.F;return a};
Tc.prototype.Kf=function(a,b){return a<=this.w||a>=this.D||b<=this.o||b>=this.F?!1:!0};function Td(){this.w=Number.POSITIVE_INFINITY;this.D=Number.NEGATIVE_INFINITY;this.o=Number.POSITIVE_INFINITY;this.F=Number.NEGATIVE_INFINITY;this.J=Number.POSITIVE_INFINITY;this.L=Number.NEGATIVE_INFINITY}Td.prototype.Oa=function(a,b,c){a<this.w&&(this.w=a);a>this.D&&(this.D=a);b<this.o&&(this.o=b);b>this.F&&(this.F=b);c<this.J&&(this.J=c);c>this.L&&(this.L=c);return this};
Td.prototype.Al=function(a){this.Oa(a.w,a.o,a.J);this.Oa(a.D,a.F,a.L)};Td.prototype.X=function(){var a=new Td;a.w=this.w;a.D=this.D;a.o=this.o;a.F=this.F;a.J=this.J;a.L=this.L;return a};function Ud(a,b){return a.w>=b.D||a.D<=b.w||a.o>=b.F||a.F<=b.o||a.J>=b.L||a.L<=b.J?!1:!0}Td.prototype.Kf=function(a,b){return a<=this.w||a>=this.D||b<=this.o||b>=this.F||void 0<=this.J||void 0>=this.L?!1:!0};t.Node=function(a){this.name=a;this.children=this.parent=null;this.Ul=new eb(this);this.Sa=1;this.ja=t.ja;this.qa=-2147483648;return this};e=t.Node.prototype;e.create=function(){};e.remove=function(){K(this,null)};function Vd(a,b){if(0!=b.call(a)&&a.children)for(a=a.children.first();null!=a.item;a=a.next)Vd(a.item,b)}e.step=function(){};e.bd=function(){};e.ab=function(){};function Wd(a){Vd(a,function(){if(!this.wi())return!1;this.ab(void 0)})}e.wi=function(){return!this.Sa||this.ja.qa<t.j?!1:!0};
function K(a,b){if(a.parent)return a.parent=b,t.tk.push(a),a;if(b)return a.parent=b,Xd(a)}function Xd(a){fb(a.Ul);if(!a.parent)return a;a.parent.children||(a.parent.children=new db);gb(a.parent.children,a.Ul);return a}function Yd(a,b){a.ja=b;if(a.children)for(a=a.children.first();null!=a.item;a=a.next)Yd(a.item,b)}
e.log=function(){this.name?console.group(this.constructor.name+": "+this.name):console.group(this.constructor.name);if(this.children)for(var a=this.children.first();null!=a.item;a=a.next)a.item.log();console.groupEnd()};t.Ha=function(a){t.Node.call(this,a);this.transform=new H;this.Ma=null;this.O=new H};t.Ha.prototype=Object.create(t.Node.prototype);t.Ha.prototype.constructor=t.Ha;function Zd(a,b){var c=a.sh=new t.gg;c.ja=a.ja;c.mb=1.75*b;c.Ma=a.O;K(c,t.ui)}
t.Ha.prototype.remove=function(){this.sh&&this.sh.remove();t.Node.prototype.remove.call(this)};t.Ha.prototype.save=function(a){Gb(a,"NG.Node3D");this.O.save()};t.Ha.prototype.step=function(){$d(this)};function $d(a){a.Ma?Nd(a.Ma,a.transform,a.O):a.O.set(a.transform)}t.ja={qa:NaN,lb:new w(1,1,1)};t.tk=[];t.vk=new t.Node("schedule");t.dd=K(new t.Node("scene"),t.vk);t.inputs=K(new t.Node("inputs"),t.vk);function ae(){this.Rb=new bb(Bb);this.Fc=new bb(Bb);this.za=new bb(Bb);this.P=new bb(Bb);this.W=new bb(Bb);return this}
ae.prototype.save=function(a){Sb(a,this.Rb.elements.length);for(var b=0;b<this.Rb.elements.length;b++)this.Rb.elements[b].save(a);Sb(a,this.Fc.elements.length);for(b=0;b<this.Fc.elements.length;b++)this.Fc.elements[b].save(a);Sb(a,this.za.elements.length);for(b=0;b<this.za.elements.length;b++)this.za.elements[b].save(a);Sb(a,this.P.elements.length);for(b=0;b<this.P.elements.length;b++)this.P.elements[b].save(a);Sb(a,this.W.elements.length);for(b=0;b<this.W.elements.length;b++)this.W.elements[b].save(a)};
ae.prototype.load=function(a){this.kg=0;var b=Ob(a);for(var c=0;c<b;c++){var d=new ie;d.load(a);this.Rb.replace(d)}b=Ob(a);for(c=0;c<b;c++)d=new je,d.load(a),this.Fc.replace(d);b=Ob(a);if(this.za.elements.length){for(c=0;c<b;c++)Cb(a),Ib(a),Ib(a);b=q(this.za.elements);for(c=b.next();!c.done;c=b.next())c.value.create()}else for(c=0;c<b;c++)d=new ke,d.load(a),this.za.replace(d);b=Ob(a);this.kg+=b;for(c=0;c<b;c++)d=new t.Ne,d.ai=this,d.load(a),this.P.replace(d);b=Ob(a);this.kg+=b;for(c=0;c<b;c++)d=new t.Audio,
d.ai=this,d.load(a),this.W.replace(d);0==this.kg&&this.ready&&this.ready.call(this)};function le(a){a.kg--;0<a.kg||a.ready&&a.ready.call(a)};t.va={musicEnabled:1,viewportFitWindow:1,viewportSize:16,lightingFancy:1,mouseRaw:1,mouseDPI:1600,mouseScale:3,wheelScale:1,reticleEnabled:1,reticleSnap:1,reticleInSights:1};
t.kn=function(){t.xa={MoveForwardKey:"KeyW",MoveForwardMouseButton:"",MoveBackwardKey:"KeyS",MoveBackwardMouseButton:"",MoveLeftKey:"KeyA",MoveLeftMouseButton:"",MoveRightKey:"KeyD",MoveRightMouseButton:"",JumpKey:"Space",JumpMouseButton:"",ReloadKey:"KeyR",ReloadMouseButton:"",MasherKey:"KeyF",MasherMouseButton:"1",RevolverKey:"KeyQ",RevolverMouseButton:"",CarbineKey:"KeyE",CarbineMouseButton:"",ShotgunKey:"KeyC",ShotgunMouseButton:"",GrenadeKey:"KeyG",GrenadeMouseButton:"3",NextGunKey:"",NextGunMouseButton:"",
PrevGunKey:"",PrevGunMouseButton:"",GunFireKey:"",GunFireMouseButton:"0",GunActionKey:"",GunActionMouseButton:"2"}};t.kn();
t.ee=function(a,b){0==a?(me.Oc=null,N.Oc=null,document.removeEventListener("keydown",me.il),document.removeEventListener("keydown",me.Vh),document.removeEventListener("mousedown",N.Vh),document.removeEventListener("wheel",N.jl),document.addEventListener("keydown",me.ll),document.addEventListener("keyup",me.ml),document.addEventListener("mousedown",N.nl),document.addEventListener("mouseup",N.ol),document.addEventListener("wheel",N.pl),t.Jk&&t.Jk.remove()):(document.removeEventListener("keydown",me.ll),
document.removeEventListener("keyup",me.ml),document.removeEventListener("mousedown",N.nl),document.removeEventListener("mouseup",N.ol),document.removeEventListener("wheel",N.pl),1==a?(me.Oc=b,document.addEventListener("keydown",me.il)):2==a&&(N.Oc=b,document.addEventListener("keydown",me.Vh),document.addEventListener("mousedown",N.Vh),document.addEventListener("wheel",N.jl)))};var ne=parseFloat(window.localStorage.getItem("version"));(isNaN(ne)||.011>ne)&&window.localStorage.clear();
window.localStorage.setItem("version",.02);for(var oe in t.va){var pe=window.localStorage.getItem(oe);null==pe?window.localStorage.setItem(oe,t.va[oe]):t.va[oe]=parseFloat(pe)}for(var qe in t.xa){var re=window.localStorage.getItem(qe);null==re?window.localStorage.setItem(qe,t.xa[qe]):t.xa[qe]=re}t.mj=function(){t.bn=4294967296/(t.va.mouseDPI*t.va.mouseScale)};t.mj();t.Sh={};t.Sh.overflowX=document.body.style.overflowX;t.Sh.overflowY=document.body.style.overflowY;t.Sh.userSelect=document.body.style.userSelect;
u=t.canvas.getContext("webgl2",{alpha:!1,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1,Gn:!0});t.zc={};t.j=NaN;t.Xh=0;t.Si=1E3/60;t.qa=-2147483648;t.pf=function(){2147483647==t.qa&&(t.qa=-2147483648);t.qa++};t.gc=new F(0,0,0,0);t.$j=new F(255,255,255,0);t.i=new ae;t.I=null;t.yj=null;t.gl=null;t.la=null;t.viewport=null;
t.gn=function(){t.canvas.width=480;t.canvas.height=296;t.Mh=new Ec(480,296,null);t.pi.width=480;t.pi.height=296;t.pi.create();t.me.style.width=t.canvas.width+"px";t.me.style.height=t.canvas.height+"px";document.body.style.width=t.canvas.width+"px";t.Mg()};t.Jl=0;
t.Mg=function(a){var b=Math.min(window.innerWidth/document.body.clientWidth,window.innerHeight/document.body.clientHeight);b=Math.floor(8*b);b=Math.max(b,12);var c=t.va.viewportFitWindow?b:t.va.viewportSize;a&&(c+=a,t.va.viewportFitWindow=0,t.ii?t.ii.checked=!1:window.localStorage.setItem("viewportFitWindow",0));b=t.Jl=Math.max(t.Jl,b);c=Wa(c,12,b);t.va.viewportSize=c;t.ii||window.localStorage.setItem("viewportSize",c);document.body.style.transform="scale("+c/8+")"};
window.onresize=function(){document.body.style.left=(window.innerWidth-t.canvas.width>>1)+"px";t.Mg()};t.vi=function(a){u.viewport(a.x,a.y,a.a,a.c);t.viewport=a;t.zc.pd.M("viewport",new E(a.a,a.c),!0);t.zc.pd.upload()};t.Wl=function(a){t.la=a};t.eb=function(a){t.I!=a&&(t.I=a.bind())};t.Fb=function(a){t.yj!=a&&(t.yj=a.bind())};t.vf=function(a){a&&t.gl!=a&&(t.gl=a.bind())};
t.Jb=function(a,b){u.activeTexture(u.TEXTURE0+a);b?(u.bindTexture(u.TEXTURE_2D,b.object),t.I.M("enableTexture"+a,1,!0)):(u.bindTexture(u.TEXTURE_2D,null),t.I.M("enableTexture"+a,0,!0))};t.tb=function(a){if(t.Ia!=a){switch(a){case 0:u.disable(u.BLEND);break;case 1:u.enable(u.BLEND);u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case 2:u.enable(u.BLEND),u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA)}t.Ia=a}};
t.hc=function(a){if(t.depth!=a){switch(a){case 0:u.disable(u.DEPTH_TEST);break;case 1:u.enable(u.DEPTH_TEST);u.depthMask(!1);break;case 2:u.enable(u.DEPTH_TEST),u.depthMask(!0)}t.depth=a}};t.$b=function(a){if(t.facing!=a){switch(a){case 0:u.disable(u.CULL_FACE);break;case 1:u.enable(u.CULL_FACE);u.frontFace(u.CCW);break;case 2:u.enable(u.CULL_FACE),u.frontFace(u.CW)}t.facing=a}};for(var se=0;4>se;se++)u.enableVertexAttribArray(se);u.clearColor(0,0,0,0);u.depthFunc(u.LEQUAL);
t.start=function(){t.zc.pd.create(["u_eyeMatrix","u_viewMatrix","u_cameraPos","u_viewport"]);t.zc.Rl.create([]);requestAnimationFrame(function(a){t.Uf.time=a;t.Uf.wn=a;t.Ui=a;t.loop(a)})};t.Uf={};t.Uf.time=0;t.Uf.xb=0;t.Uf.Cl=0;t.Uf.fn=function(a){this.wn=a;a>=this.time+1E3&&(this.Cl=this.xb=0,this.time+=1E3);this.xb++};t.paused=!0;
t.loop=function(a){var b=(t.Ui-a)/t.Si;if(!(.5<b))if(-.5>b&&(t.Ui=a,t.Uf.Cl++),t.Ui+=t.Si,2==t.oj&&t.b.pause(),t.paused)t.b&&t.b.tn(),t.Xh++;else{t.Uf.fn(a);if(t.Yl){t.Yl--;requestAnimationFrame(t.loop);return}t.Em=a+t.Si;Vd(t.vk,function(){this.step()});a=q(t.tk);for(b=a.next();!b.done;b=a.next())Xd(b.value);t.tk.length=0;t.j++}requestAnimationFrame(t.loop)};t.Kn=function(a,b){for(var c=[],d=Math.floor(640/a);1920>=a*d;d++)c.push([a*d,b*d]);return c};function te(a,b){a=u.createShader(a);u.shaderSource(a,b);u.compileShader(a);if(u.getShaderParameter(a,u.COMPILE_STATUS))return a;console.log(b);console.log(u.getShaderInfoLog(a));u.deleteShader(a)}function ke(){this.name=void 0;this.Ga={};this.xj={}}e=ke.prototype;
e.create=function(){this.mn=te(u.VERTEX_SHADER,this.Dk);this.ln=te(u.FRAGMENT_SHADER,this.Ck);var a=this.ln;var b=this.Dn;var c=u.createProgram();u.attachShader(c,this.mn);u.attachShader(c,a);if(b)for(a=0;a<b.length;a++)u.bindAttribLocation(c,a,b[a]);else u.bindAttribLocation(c,0,"a_position"),u.bindAttribLocation(c,1,"a_texture0"),u.bindAttribLocation(c,2,"a_color"),u.bindAttribLocation(c,3,"a_basisZ");u.linkProgram(c);u.getProgramParameter(c,u.LINK_STATUS)?b=c:(console.log(u.getProgramInfoLog(c)),
u.deleteShader(c),b=void 0);this.qh=b;t.eb(this)};
e.M=function(a,b,c){a="u_"+a;this.Ga.hasOwnProperty(a)||(this.Ga[a]=u.getUniformLocation(this.qh,a));var d=this.xj[a];c?d!=b&&(this.xj[a]=b,u.uniform1i(this.Ga[a],b)):isNaN(b)?b instanceof Float32Array?u.uniform3fv(this.Ga[a],b):b instanceof H?u.uniformMatrix4fv(this.Ga[a],!1,b.ke()):b instanceof F?(this.xj[a]=b,u.uniform4f(this.Ga[a],b.r/255,b.bb/255,b.ra/255,b.La/255)):b instanceof Ad?u.uniform4f(this.Ga[a],b.x,b.y,b.z,b.a):b instanceof w?u.uniform3f(this.Ga[a],b.x,b.y,b.z):b instanceof E&&u.uniform2f(this.Ga[a],
b.x,b.y):d!=b&&(this.xj[a]=b,u.uniform1f(this.Ga[a],b))};e.bind=function(){u.useProgram(this.qh);return this};e.load=function(a){this.name=Cb(a);this.Dk=Ib(a);this.Ck=Ib(a);this.create();delete this.Dk;delete this.Ck};e.save=function(a){Gb(a,this.name);Kb(a,this.Dk);Kb(a,this.Ck)};function ue(){this.usage=this.target=null;this.zl=u.createBuffer();this.buffer=null}ue.prototype.bind=function(){u.bindBuffer(this.target,this.zl);return this};function ve(a,b){a.buffer=new ArrayBuffer(b);u.bufferData(a.target,a.buffer,a.usage)}ue.prototype.upload=function(){u.bufferSubData(this.target,0,this.buffer);return this};function we(){ue.call(this);this.target=u.ARRAY_BUFFER;this.usage=u.STATIC_DRAW;this.Tb=32;t.yj=null;t.Fb(this)}we.prototype=Object.create(ue.prototype);
we.prototype.constructor=we;we.prototype.bind=function(){ue.prototype.bind.call(this);u.vertexAttribPointer(0,3,u.FLOAT,!1,this.Tb,0);u.vertexAttribPointer(1,2,u.FLOAT,!1,this.Tb,12);u.vertexAttribPointer(2,4,u.UNSIGNED_BYTE,!0,this.Tb,20);u.vertexAttribPointer(3,3,u.SHORT,!0,this.Tb,24);return this};we.prototype.upload=function(a){this.write(a);ue.prototype.upload.call(this);return this};
function xe(a){var b=t.yj;b.buffer=new ArrayBuffer(a.length*b.Tb);b.write(a);u.bufferData(b.target,b.buffer,b.usage)}
we.prototype.write=function(a,b){b*=this.Tb;var c=new Float32Array(this.buffer,b),d=new Int16Array(this.buffer,b);b=new Uint8Array(this.buffer,b);for(var f=0;f<a.length;f++){var h=a[f];var g=c;var k=f*this.Tb>>>2;g[k]=h.x;g[k+1]=h.y;g[k+2]=h.z;k=f*this.Tb+12>>>2;g[k]=h.ld;g[k+1]=h.md;g=b;k=f*this.Tb+20;g[k]=h.oa;g[k+1]=h.Xd;g[k+2]=h.Wd;g[k+3]=h.Fa;g=d;k=f*this.Tb+24>>>1;g[k]=h.Cc;g[k+1]=h.Xc;g[k+2]=h.Hb}return this};
function ye(){ue.call(this);this.target=u.ELEMENT_ARRAY_BUFFER;this.usage=u.STATIC_DRAW;t.vf(this)}ye.prototype=Object.create(ue.prototype);ye.prototype.constructor=ye;ye.prototype.upload=function(a){(new Uint16Array(this.buffer)).set(a);return ue.prototype.upload.call(this)};function ze(){ue.call(this);this.target=u.UNIFORM_BUFFER;this.usage=u.DYNAMIC_DRAW;this.Gj=null;this.Ai=this.Li=0;this.Ga={};ue.prototype.bind.call(this)}ze.prototype=Object.create(ue.prototype);ze.prototype.constructor=ze;
ze.prototype.create=function(a){u.bindBufferBase(this.target,this.Li,this.zl);for(var b=0;b<t.i.za.elements.length;b++){var c=t.i.za.elements[b];t.eb(c);u.uniformBlockBinding(c.qh,u.getUniformBlockIndex(c.qh,this.Gj),this.Li)}b=u.getUniformIndices(t.I.qh,a);c=q(b);for(var d=c.next();!d.done;d=c.next())if(d.value==u.INVALID_INDEX)return console.log("uniform not found ",this),this;b=u.getActiveUniforms(t.I.qh,b,u.UNIFORM_OFFSET);for(c=0;c<a.length;c++)this.Ga[a[c]]=b[c];return this};
ze.prototype.M=function(a,b,c){a="u_"+a;b instanceof H?b.ke(new Float32Array(this.buffer,this.Ga[a],16)):b instanceof F||(b instanceof Ad?b.ke(new Float32Array(this.buffer,this.Ga[a],4)):b instanceof w||b instanceof E&&(c?b.ke(new Uint32Array(this.buffer,this.Ga[a],2)):b.ke(new Float32Array(this.buffer,this.Ga[a],2))))};ze.prototype.upload=function(){ue.prototype.bind.call(this);u.bufferData(this.target,this.buffer.byteLength,this.usage);u.bufferSubData(this.target,0,this.buffer);return this};
var Ae,Be=Ae=new we;Be.usage=u.STATIC_DRAW;Be.Ci=[];var Ce,Ne=Ce=new ye;Ne.usage=u.STATIC_DRAW;Ne.elements=[];var Oe=t.zc.pd=new ze;Oe.Gj="Common";Oe.Li=0;Oe.Ai=160;ve(Oe,Oe.Ai);var Pe=t.zc.Rl=new ze;Pe.Gj="PortalLights";Pe.Li=1;Pe.Ai=480;ve(Pe,64*Pe.Ai);function ie(){this.name="defaultMaterial";this.re=new F(255,255,255,255);this.Od=new F(255,255,255,51);this.fd=4;this.gd=1;this.vg=new F(0,0,0,0);this.Ia=0;return this}function Qe(a,b){if(a.name<b.name)return-1;if(a.name>b.name)return 1;var c=gd(a.re,b.re);if(0!=c)return c;c=gd(a.Od,b.Od);if(0!=c)return c;c=gd(a.vg,b.vg);return 0!=c?c:a.fd<b.fd?-1:a.fd>b.fd?1:a.gd<b.gd?-1:a.gd>b.gd?1:a.Ia<b.Ia?-1:a.Ia>b.Ia?1:0}
ie.prototype.X=function(){var a=new ie;a.re=this.re;a.Od=this.Od;a.fd=this.fd;a.gd=this.gd;a.vg=this.vg;a.Ia=this.Ia;return a};ie.prototype.bind=function(){t.I.M("color",this.re);t.I.M("specularColor",this.Od);t.I.M("specularExponent",this.fd);t.I.M("specularSheen",this.gd);t.I.M("emissiveColor",this.vg)};ie.prototype.save=function(a){Gb(a,this.name);this.re.save(a);this.Od.save(a);Sb(a,Math.floor(1024*this.fd));Hb(a,Math.floor(255*this.gd));this.vg.save(a);Hb(a,this.Ia);return a};
ie.prototype.load=function(a){this.name=Cb(a);this.re=hd(a);this.Od=hd(a);this.fd=Ob(a)/1024;this.gd=Fb(a)/255;this.vg=hd(a);this.Ia=Fb(a)};var Re=t.i,Se=new ie;Re.Rb.replace(Se);t.Ne=function(){this.Yi=u.RGBA8;this.height=this.width=2;this.border=0;this.format=u.RGBA;this.type=u.UNSIGNED_BYTE;this.data=null;this.Vf=t.Ne.Vf;this.kh=t.Ne.kh;this.Qk=this.Pk=u.CLAMP_TO_EDGE};t.Ne.Vf=u.NEAREST;t.Ne.kh=u.NEAREST;
t.Ne.prototype.create=function(){this.ai&&le(this.ai);u.activeTexture(u.TEXTURE0);this.object=u.createTexture();u.bindTexture(u.TEXTURE_2D,this.object);u.texImage2D(u.TEXTURE_2D,0,this.Yi,this.width,this.height,this.border,this.format,this.type,this.data);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.Vf);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,this.kh);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,this.Pk);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,this.Qk);9984<=this.Vf&&9987>=
this.Vf&&u.generateMipmap(u.TEXTURE_2D)};
t.Ne.prototype.load=function(a){this.name=Cb(a);this.Yi=Ob(a);this.width=Ob(a);this.height=Ob(a);this.border=Ob(a);this.format=Ob(a);this.type=Ob(a);this.Vf=Ob(a);this.kh=Ob(a);this.Pk=Ob(a);this.Qk=Ob(a);this.qe=new F(Fb(a),Fb(a),Fb(a),Fb(a));var b=Jb(a);a=a.slice(a.position,a.position+=b);a=new Blob([a],{type:"image/png"});this.data=new Image;this.data.parent=this;this.data.onload=function(){this.parent.width=this.width;this.parent.height=this.height;this.parent.create()};this.data.src=URL.createObjectURL(a)};
t.Ne.prototype.save=function(a){Gb(a,this.name);Sb(a,this.Yi);Sb(a,this.width);Sb(a,this.height);Sb(a,this.border);Sb(a,this.format);Sb(a,this.type);Sb(a,this.Vf);Sb(a,this.kh);Sb(a,this.Pk);Sb(a,this.Qk);Hb(a,this.qe.r);Hb(a,this.qe.bb);Hb(a,this.qe.ra);Hb(a,this.qe.La);Mb(a,this.Wh.length);a.set(this.Wh,a.position);a.position+=this.Wh.length};
t.Xi=function(a){a.wl=[];a.xl=[];for(var b=0,c=0,d=0;d<a.ve.length;d++)b+a.ve[d]+1>a.width&&(b=0,c+=a.jf+1),a.wl.push(b/a.width),a.xl.push(c/a.width),b+=a.ve[d]+1,a.ve[d]/=a.width,a.gh[d]/=a.width,a.Bg[d]/=a.width;a.jf/=a.height;a.ul=function(f){switch(f){case "0":return 0;case "1":return 1;case "2":return 2;case "3":return 3;case "4":return 4;case "5":return 5;case "6":return 6;case "7":return 7;case "8":return 8;case "9":return 9;case ",":return 10;case "/":return 11;case " ":return 12}return-1}};
t.$h=function(a,b,c){for(var d=[],f=0,h=0;h<b.length;h++){var g=a.ul(b.charAt(h)),k=a.wl[g],l=a.xl[g],m=a.ve[g],n=a.jf;f+=a.gh[g];c&&(l+=.5);d.push(td(new md(f,0+n,0),k,l));d.push(td(new md(f,0,0),k,l+n));d.push(td(new md(f+m,0,0),k+m,l+n));d.push(td(new md(f+m,0,0),k+m,l+n));d.push(td(new md(f+m,0+n,0),k+m,l));d.push(td(new md(f,0+n,0),k,l));f+=m;f+=a.Bg[g]}d.width=f;d.height=a.jf;d.Og=a;return d};var N=new t.Node("mouse");N.lock=!1;N.d={};N.p={};N.Vh=function(a){t.xa[N.Oc.name+"MouseButton"]=a.button;N.Oc.innerHTML=""+a.button;t.i.W.get("woodSnap02").play();t.ee(0)};N.jl=function(a){a=0<a.deltaY?"WheelDown":"WheelUp";t.xa[N.Oc.name+"MouseButton"]=a;N.Oc.innerHTML=a;t.i.W.get("woodSnap02").play();t.ee(0)};N.nl=function(a){document.pointerLockElement&&(a.preventDefault(),a.stopPropagation());N.p[a.button]=!0;N.d[a.button]=!0};N.r={};N.ol=function(a){N.r[a.button]=!0;N.d[a.button]=!1};N.a=0;
N.em=-Infinity;N.pl=function(a){var b=performance.now();375>b-N.em?1<Math.abs(Math.sign(a.deltaY)-Math.sign(N.a))&&(N.a=0):N.a=0;N.a+=a.deltaY;N.em=b;N.a<=-t.va.wheelScale?(N.p.WheelUp=!0,N.a=0):N.a>=t.va.wheelScale&&(N.p.WheelDown=!0,N.a=0)};N.h=new E(0,0);N.Pc=new E(0,0);document.addEventListener("mousemove",function(a){N.h.set(a.clientX,a.clientY);N.Pc.x+=a.movementX;N.Pc.y+=a.movementY});
N.step=function(){t.Node.prototype.step.call(this);N.Pc.set(0,0);var a=Object.getOwnPropertyNames(N.r);var b=q(a);for(a=b.next();!a.done;a=b.next())N.r[a.value]=!1;N.r.WheelDown=N.p.WheelDown;N.r.WheelUp=N.p.WheelUp;a=Object.getOwnPropertyNames(N.p);b=q(a);for(a=b.next();!a.done;a=b.next())N.p[a.value]=!1};
N.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=q(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1;N.a=0;N.h.set(0,0);N.Pc.set(0,0)};K(N,t.inputs);N.xk=function(a){a?document.documentElement.requestPointerLock({unadjustedMovement:t.va.mouseRaw}):document.pointerLockElement&&document.exitPointerLock()};
document.addEventListener("pointerlockchange",function(){if(document.pointerLockElement)N.lock=!0,document.body.style.overflowX="hidden",document.body.style.overflowY="hidden",document.body.style.userSelect="none";else{N.lock=!1;for(var a=q(Object.getOwnPropertyNames(t.Sh)),b=a.next();!b.done;b=a.next())b=b.value,document.body.style[b]=t.Sh[b]}});var me=new t.Node("keyboard");me.d={};me.p={};me.il=function(a){"Backspace"==a.code?(t.xa[me.Oc.name+"Key"]="",me.Oc.innerHTML="",t.i.W.get("woodSnap02").play(),t.ee(0)):"Escape"==a.code?t.ee(0):("Tab"==a.code&&(a.preventDefault(),a.stopPropagation()),"ControlLeft"!=a.code&&"ControlRight"!=a.code&&"ShiftLeft"!=a.code&&"ShiftRight"!=a.code&&(t.xa[me.Oc.name+"Key"]=a.code,me.Oc.innerHTML=""+a.code,t.i.W.get("woodSnap02").play(),t.ee(0)))};
me.Vh=function(a){"Backspace"==a.code?(t.xa[N.Oc.name+"MouseButton"]="",N.Oc.innerHTML="",t.i.W.get("woodSnap02").play(),t.ee(0)):"Escape"==a.code?t.ee(0):"Tab"==a.code?(a.preventDefault(),a.stopPropagation()):a.code.startsWith("Digit")&&(a=a.code.slice(5),t.xa[N.Oc.name+"MouseButton"]=a,N.Oc.innerHTML=""+a,t.i.W.get("woodSnap02").play(),t.ee(0))};
me.ll=function(a){a.code&&(document.pointerLockElement&&"Tab"==a.code&&(a.preventDefault(),a.stopPropagation()),"ControlLeft"!=a.code&&"ControlRight"!=a.code&&"ShiftLeft"!=a.code&&"ShiftRight"!=a.code&&("Minus"==a.code?(t.i.W.get("hit02").play({gain:1,pitch:.875}),t.Mg(-1)):"Equal"==a.code?(t.i.W.get("hit02").play({gain:1,pitch:1.125}),t.Mg(1)):"KeyM"==a.code&&(t.Audio.Bc(1-t.va.musicEnabled),t.fj?t.fj.checked=t.va.musicEnabled:window.localStorage.setItem("musicEnabled",t.va.musicEnabled)),me.d[a.code]||
(me.p[a.code]=!0),me.d[a.code]=!0))};me.r={};me.ml=function(a){a.code&&(me.r[a.code]=!0,me.d[a.code]=!1)};me.step=function(){t.Node.prototype.step.call(this);var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1};
me.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=q(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1};K(me,t.inputs);t.Audio=function(){this.buffer=null;return this};t.Audio.R=new AudioContext({sampleRate:22050,latencyHint:"interactive"});t.Audio.Le=343E5/60;var Te=t.Audio.Me=t.Audio.R.createGain();Te.gain.value=.5;Te.connect(t.Audio.R.destination);var Ue=t.Audio.zb=t.Audio.R.createGain();Ue.gain.value=0;Ue.connect(t.Audio.R.destination);t.Audio.Nb={};t.Audio.Ud=[];t.Audio.Dj=NaN;
t.Audio.step=function(){var a=t.b.la.O,b=t.Audio.R.listener;b.positionX?(b.positionX.value=1E-5*a.s,b.positionY.value=1E-5*a.m31,b.positionZ.value=1E-5*a.m32,b.forwardX.value=-a.C,b.forwardY.value=-a.m21,b.forwardZ.value=-a.m22,b.upX.value=a.v,b.upY.value=a.m11,b.upZ.value=a.m12):(b.setPosition(1E-5*a.s,1E-5*a.m31,1E-5*a.m32),b.setOrientation(-a.C,-a.m21,-a.m22,a.v,a.m11,a.m12));for(var c in t.Audio.Nb){for(a=t.Audio.Nb[c];a.length;)if(t.j>a[0].U+24)a.shift();else break;a.length||delete t.Audio.Nb[c]}c=
q(t.Audio.Ud);for(a=c.next();!a.done;a=c.next())a.value.step()};t.Audio.Sk=function(a){t.Audio.Me.gain.value=a};t.Audio.Bc=function(a){t.Audio.zb.gain.value=a;t.va.musicEnabled=a};
t.Audio.prototype.play=function(a,b,c,d){if(b&&void 0==d)new t.Audio.Ug(this,a,b,c);else{a?(void 0===a.gain&&(a.gain=1),void 0===a.pitch&&(a.pitch=1),void 0===a.Yf&&(a.Yf=0),void 0===a.delay&&(a.delay=0)):a={gain:1,pitch:1,Yf:0,delay:0};var f=t.Audio.R.createGain();f.gain.value=a.gain;f.connect(t.Audio.Me);var h=new AudioBufferSourceNode(t.Audio.R);h.buffer=this.buffer;h.playbackRate.value=a.pitch*(1-a.Yf+Math.random()*a.Yf*2);h.mi=[];if(b){var g=t.Audio.R.createPanner();g.positionX?(g.positionX.value=
1E-5*b.x,g.positionY.value=1E-5*b.y,g.positionZ.value=1E-5*b.z):g.setPosition(1E-5*b.x,1E-5*b.y,1E-5*b.z);g.refDistance=c;22050>d&&(b=new BiquadFilterNode(t.Audio.R,{type:"lowpass",Q:1,frequency:d}),h.mi.push(b),b.connect(g));h.mi.push(g);g.connect(f)}h.mi.push(f);h.connect(h.mi[0]);h.onended=function(){this.disconnect();for(var k=q(this.mi),l=k.next();!l.done;l=k.next())l.value.disconnect()};void 0===a.time?h.start(t.Audio.R.currentTime+a.delay):h.start(a.time+a.delay);return h}};
t.Audio.prototype.load=function(a){this.name=Cb(a);var b=Jb(a);a=a.slice(a.position,a.position+=b);var c=this;t.Audio.R.decodeAudioData(a.buffer).then(function(d){c.buffer=d;c.ai&&le(c.ai)})};t.Audio.prototype.save=function(a){Gb(a,this.name);Mb(a,this.Wh.length);a.set(this.Wh,a.position);a.position+=this.Wh.length};
t.Audio.Ug=function(a,b,c,d){var f=Ve(c,new w(0,-1E8,0),We);if(f){var h=Xe(f.item.Y);if(h){this.audio=a;this.ni=b;this.Pd=c;this.refDistance=d;this.U=t.j;this.bh=[];this.Y=Ye;if(a=t.Audio.Nb[f.item.Y])for(b=q(a),d=b.next();!d.done;d=b.next()){if(d=d.value,!(6E5<=wd(c,d.Pd))){this.ef=d.ef;t.Audio.Ud.push(this);return}}else a=t.Audio.Nb[f.item.Y]=[],a.cmp=function(g,k){return g.U<k.U?-1:1};Ra(a,this);this.bh.cmp=function(g,k){return g.t<k.t?-1:1};this.ef=Array(Ze.length);for(c=0;c<Ze.length;c++)this.ef[c]=
0;this.ef[f.item.Y-this.Y]=1;f={};f.Pd=this.Pd;f.T=h;f.Eb=null;f.di=1;f.Hh=1;f.Na=0;f.t=this.U;f.parent=null;this.bh.push(f);t.Audio.Ud.push(this)}}};
t.Audio.Ug.prototype.step=function(){function a(l){for(var m={};b.bh.length;){m.Mb=b.bh[0];if(m.Mb.t>l)break;b.bh.shift();if(m.Mb.Eb){m.Mb.Hh=Math.min(m.Mb.Hh,$e(m.Mb.Eb)/6);var n=b.ef[m.Mb.T.index-b.Y];n=Math.min(1,n+b.refDistance/Math.max(m.Mb.Na,b.refDistance)*m.Mb.di*m.Mb.Hh);b.ef[m.Mb.T.index-b.Y]=n}n={};for(var r=q(m.Mb.T.yb),p=r.next();!p.done;n={Bh:n.Bh},p=r.next()){var v=p.value;if(!v.Yc&&(n.Bh=Xe(v.Gc.Y),n.Bh&&!function(y,x){return function(){for(var A=y.Mb.parent;A;){if(A.T==x.Bh)return!0;
A=A.parent}return!1}}(m,n)())){p={};p.Eb=v.Gc;p.parent=m.Mb;p.Hh=m.Mb.Hh;p.di=m.Mb.di;p.T=n.Bh;v=p.Eb.$.Ig(m.Mb.Pd.z,m.Mb.Pd.x);p.Pd=new w(v.y,Wa(m.Mb.Pd.y,p.Eb.o,p.Eb.F),v.x);v=xd(p.Pd,m.Mb.Pd,new w);var B=v.na(1);p.Na=m.Mb.Na+B/1E5;p.di*=(2+(v.z*p.Eb.n.x+v.x*p.Eb.n.y))/3;p.t=m.Mb.t+B/t.Audio.Le;Ra(b.bh,p)}}m={Mb:m.Mb}}}var b=this,c=Qd(t.b.la.O),d=xd(c,this.Pd,new w);if((t.j-this.U)*t.Audio.Le>=d.length()){var f=0;if(Ve(this.Pd,d,af)){a(Infinity);d=1;for(var h=q(t.b.la.Ja.yb),g=h.next();!g.done;g=
h.next()){g=g.value;var k=bf(g,c);d-=k;f+=(.5*this.ef[g.Y-this.Y]+.5*this.ef[g.Gc.Y-this.Y])*k}0<d&&(f+=this.ef[t.b.la.Ja.index-this.Y]*d);f=(3+2.625*Math.min(1,f))/10}else f=1;this.audio.play(this.ni,this.Pd,this.refDistance,22050*Math.pow(f,3));zb(t.Audio.Ud,this)}else a(t.j+1)};function cf(){this.lg=NaN;this.ci=-1;this.cj=new BiquadFilterNode(t.Audio.R,{type:"lowpass",Q:12,frequency:140});this.cj.connect(t.Audio.zb);this.Mf=t.Audio.R.createGain();this.Mf.gain.value=1;this.Mf.connect(this.cj)}function df(a){var b=t.b.nf;b.ci=a;t.b.ej=2<=b.ci?Math.round(3+10*(t.b.da.Da.pe-1)/4):0}
cf.prototype.play=function(a){var b=this;if(a.audio){var c=new AudioBufferSourceNode(t.Audio.R);c.buffer=a.audio.buffer;c.connect(this.Mf);this.lg+=a.On;c.start(this.lg);setTimeout(function(){t.b.ej=2<=b.ci?Math.round(3+10*(t.b.da.Da.pe-1)/4):0},1E3*(this.lg-t.Audio.R.currentTime));c.onended=function(){this.disconnect(this.Mf)}}setTimeout(function(){b.play(a.Jn())},1E3*(this.lg-t.Audio.R.currentTime+a.duration)-100);this.lg+=a.duration};var ef,Ze=[],Ye=0;function Xe(a){return Ze[a-Ye]}var ff=new bb(lb),gf=new db,jb=new db,hf=new H;hf.scale(.99609375,.99609375,.99609375);function jf(a){var b=ff.get(a);if(b)return b;b=new kf(a);ff.push(b);return b}function lf(a){a=mf(a);return new E(a.x-4096<<19,a.y-4096<<19)}function nf(a,b){function c(d){d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;return(d|d<<1)&1431655765}return c(a)<<1|c(b)}
function mf(a){function b(c){c=(c|c>>1)&858993459;c=(c|c>>2)&252645135;c=(c|c>>4)&16711935;return(c|c>>8)&65535}a=new E(a>>>1&1431655765,a>>>0&1431655765);a.x=b(a.x);a.y=b(a.y);return a}
function of(a,b){isNaN(a)&&(a=0);isNaN(b)&&(b=ff.elements.length-1);if(a==b)return ff.elements[a];for(var c=ff.elements[a].index,d=c^ff.elements[b].index,f=0;d>>=1;)f++;var h=1<<f,g=(2<<f)-1,k=a,l=b+1;for(d=Math.floor(k/2+l/2);k<l;){var m=ff.elements[d].index&g;if(h<m)l=d,d=Math.floor(k/2+l/2);else if(h>m)k=d+1,d=Math.floor(k/2+l/2);else break}c=f&1?new pf(mf(c&~g|h).x):new qf(mf(c&~g|h).y);c.value-=4096;c.value<<=19;c.Xe=of(a,d-1);c.Ye=of(d,b);return c}function pf(a){this.value=a}
function qf(a){this.value=a}function rf(a,b,c){this.start=a;this.Pc=b;this.mb=c;this.Uc=[new sf(ef,0,1)];this.t=0}function sf(a,b,c){this.node=a;this.Wa=b;this.sd=c}rf.prototype.next=function(){for(;this.Uc.length;){var a=this.Uc.shift();this.t=a.Wa;if(a.node instanceof kf)return a;this.cd(a)}return null};
rf.prototype.cd=function(a){var b=a.node;if(b instanceof pf){var c=this.start.z;var d=this.Pc.z}else c=this.start.x,d=this.Pc.x;if(0<d){var f=new sf(b.Ye,(b.value-this.mb-c)/d,a.sd);f.Wa<=a.sd&&f.sd>=a.Wa&&this.Uc.unshift(f);c=new sf(b.Xe,a.Wa,(b.value+this.mb-c)/d);c.Wa<=a.sd&&c.sd>=a.Wa&&this.Uc.unshift(c)}else 0>d?(f=new sf(b.Xe,(b.value+this.mb-c)/d,a.sd),f.Wa<=a.sd&&f.sd>=a.Wa&&this.Uc.unshift(f),c=new sf(b.Ye,a.Wa,(b.value-this.mb-c)/d),c.Wa<=a.sd&&c.sd>=a.Wa&&this.Uc.unshift(c)):(c>=b.value-
this.mb&&this.Uc.unshift(new sf(b.Ye,a.Wa,a.sd)),c<=b.value+this.mb&&this.Uc.unshift(new sf(b.Xe,a.Wa,a.sd)))};
function Ve(a,b,c){c=void 0===c?tf:c;if(!ff.elements.length)return null;for(var d=b.length(),f=new rf(a,b,0),h,g=null,k=1;(h=f.next())&&!(h.t>k);){for(var l=function(r){if(c(r.flags)){var p=r.og(a,0,0,b);!p||p.t>k||(p.d=p.t*d,-1>p.d||(r.item&&(p.item=r.item),g=p,k=p.t))}},m=q(h.node.ya),n=m.next();!n.done;n=m.next())l(n.value);h=q(h.node.Hd);for(n=h.next();!n.done;n=h.next())l(n.value)}return g}
function uf(a,b){var c=void 0===c?tf:c;if(!ff.elements.length)return null;var d=b.length(),f=new rf(a,b,0),h,g=[];for(g.cmp=vf;(h=f.next())&&!(1<h.t);){for(var k=function(r){if(c(r.flags)){var p=r.og(a,0,0,b);!p||1<p.t||(p.d=p.t*d,-1>p.d||(r.item&&(p.item=r.item),p.Wa=!0,Ra(g,p)))}},l=function(r){r=r.Zh();if(c(r.flags)){var p=r.og(a,0,0,b);!p||1<p.t||(p.d=p.t*d,-1>p.d||(r.item&&(p.item=r.item),p.Wa=!1,Ra(g,p)))}},m=q(h.node.ya),n=m.next();!n.done;n=m.next())k(n.value);m=q(h.node.Hd);for(n=m.next();!n.done;n=
m.next())k(n.value);k=q(h.node.ya);for(n=k.next();!n.done;n=k.next())l(n.value);h=q(h.node.Hd);for(n=h.next();!n.done;n=h.next())l(n.value)}return g}
function wf(a,b){var c=void 0===c?tf:c;if(0==ff.elements.length)return null;for(var d=new rf(a,new w(240*b.x,0,240*b.z),0),f,h=null,g=240;(f=d.next())&&!(240*f.t>g);){for(var k=function(n){c(n.flags)&&(!(n=n.Hk(a,b))||n.t>g||(h=n,g=n.t))},l=q(f.node.ya),m=l.next();!m.done;m=l.next())k(m.value);f=q(f.node.Hd);for(m=f.next();!m.done;m=f.next())k(m.value)}return h}function xf(a,b){return yf(a.z-b,a.x-b,a.z+b,a.x+b,void 0)}
function yf(a,b,c,d,f){f||(f=[]);for(var h=[ef];h.length;){var g=h.shift();g instanceof pf?(a<=g.value&&h.push(g.Xe),c>=g.value&&h.push(g.Ye)):g instanceof qf?(b<=g.value&&h.push(g.Xe),d>=g.value&&h.push(g.Ye)):f.push(g)}return f};var zf,Af,Bf,Cf;
function Df(){zf=!1;Af=[];var a=Bf;Bf=[[Array(Ze.length),Array(Ze.length),Array(Ze.length)],[Array(Ze.length),Array(Ze.length),Array(Ze.length)]];if(a)for(var b=q(Ze),c=b.next();!c.done;c=b.next()){var d=c.value;c=d.index-Ye;d=d.index-a.Y;for(var f=0;2>f;f++)Bf[f][0][c]=a[f][0][d],Bf[f][1][c]=a[f][1][d],Bf[f][2][c]=a[f][2][d]}Bf.Y=Ye;Cf=0;a=q(Ze);for(c=a.next();!c.done;c=a.next()){b=c.value;b.ed||(c=new cg,c.ei=b,c.Jg=b,c.kd=b.kd,c.lj=[Xa(.05,.95,b.ac.x),Xa(.05,.95,b.ac.y),Xa(.05,.95,b.ac.z)],Af.push(c));
b.Ek=b.kd;c=q(b.yb);for(d=c.next();!d.done;d=c.next())b.Ek+=$e(d.value);for(c=0;c<b.yb.length;c++)d=new cg,d.ei=b,d.Jg=Xe(b.yb[c].Gc.Y),d.Eb=b.yb[c],d.kd=$e(d.Eb),d.lj=[1,1,1],Af.push(d),d=new cg,d.ei=b,d.Jg=b,d.Eb=b.yb[c],d.kd=dg(d.Eb),d.lj=[.625,.625,.625],Af.push(d)}}function cg(){this.Jg=this.ei=null;this.kd=0;this.lj=null}
function eg(a,b,c){this.$=a;this.n=new E(a.l-a.H,a.K-a.m);this.n.x/=a.length;this.n.y/=a.length;this.Ll=this.$.m*this.n.x+this.$.l*this.n.y;this.o=b;this.F=c;this.height=c-b}eg.prototype.ke=function(a){var b=0,c=fg(this);a[b++]=c.x;a[b++]=c.y;a[b++]=c.z;a[b++]=this.Ll;a[b++]=this.$.m;a[b++]=this.$.l;a[b++]=this.$.K;a[b++]=this.$.H;a[b++]=this.n.x;a[b++]=this.n.y;a[b++]=this.o;a[b++]=this.F;return a};function fg(a){return yd(gg[a.Y-hg].ja.lb,gg[a.Gc.Y-hg].ja.lb,.5)}
function bf(a,b){function c(h,g){return Math.acos(Wa(ud(h,g)/Math.sqrt(ud(h,h)*ud(g,g)),-1,1))/Math.PI}var d=b.z*a.n.x+b.x*a.n.y-a.Ll;if(0>=d)return 0;var f=c(new E(a.$.K-b.z,a.$.H-b.x),new E(a.$.m-b.z,a.$.l-b.x));a=c(new E(d,a.F-b.y),new E(d,a.o-b.y));return Wa(f*a,0,1)}function $e(a){return a.$.length/1E5*((a.F-a.o)/1E5)}function dg(a){return a.$.length/1E5*((a.height-(a.F-a.o))/1E5)}
function ig(a,b,c){c.set(0,0,0);for(var d=1,f=q(b.yb),h=f.next();!h.done;h=f.next()){var g=h.value;h=bf(g,a);d-=h;g=fg(g);c.x+=g.x*h;c.y+=g.y*h;c.z+=g.z*h}0<d&&(a=b.ja.lb,c.x+=a.x*d,c.y+=a.y*d,c.z+=a.z*d)};function jg(a){t.Ha.call(this,a);this.pk=new H;this.Zd=45*Math.PI/180;this.Hg=1E4;this.yg=1E9;this.rect=null;this.Qi=new H;this.Nk=new H}jg.prototype=Object.create(t.Ha.prototype);jg.prototype.constructor=jg;jg.Ug=Math.tan(kc(30));jg.km=function(a,b,c,d){d.u=2/a.a;d.A=0;d.B=0;d.kb=0;d.v=0;d.m11=2/a.c;d.m12=0;d.m13=0;d.C=0;d.m21=0;d.m22=-2/(c-b);d.m23=0;d.s=0;d.m31=0;d.m32=-(c+b)/(c-b);d.m33=1};jg.im=function(a,b,c){c=Math.tan(c)*a;var d=c*t.viewport.ratio;return{n:a,In:b,t:c,ra:2*-c+c,r:d,Wm:-d}};
jg.hm=function(a,b,c,d,f,h,g){g.u=2*a/(d-c);g.A=0;g.B=0;g.kb=0;g.v=0;g.m11=2*a/(f-h);g.m12=0;g.m13=0;g.C=(d+c)/(d-c);g.m21=(f+h)/(f-h);g.m22=(b+a)/(a-b);g.m23=-1;g.s=0;g.m31=0;g.m32=2*b*a/(a-b);g.m33=0};jg.Bn=function(a,b,c,d,f){var h=b*jg.Ug;c*=jg.Ug;d=Math.tan(d);b=h/d;c/=d;f.u=b/(h*a.ratio);f.A=0;f.B=0;f.kb=0;f.v=0;f.m11=b/h;f.m12=0;f.m13=0;f.C=0;f.m21=0;f.m22=-(c+b)/(c-b);f.m23=-1;f.s=0;f.m31=0;f.m32=-(2*c*b)/(c-b);f.m33=0;return f};jg.prototype.step=function(){t.Ha.prototype.step.call(this)};
function kg(a){if(a.rect)jg.km(a.rect,a.Hg,a.yg,a.pk);else{var b=jg.im(a.Hg,a.yg,a.Zd);jg.hm(a.Hg,a.yg,b.Wm,b.r,b.t,b.ra,a.pk)}a.O.ak(a.Qi);Nd(a.pk,a.Qi,a.Nk);t.zc.pd.M("eyeMatrix",a.Qi);t.zc.pd.M("viewMatrix",a.Nk);t.zc.pd.M("cameraPos",new Ad(a.O.s,a.O.m31,a.O.m32,a.O.m33));t.zc.pd.upload()}
function lg(){function a(d){t.Wl(d);kg(d);jg.nm(d);Wd(t.dd)}var b=t.b.la;if(b.un){var c=new Ec(b.rect.a/2,b.rect.c,null);c.x=t.Mh.x;c.y=t.Mh.y;t.vi(c);a(b.Wk);c=new Ec(b.rect.a/2,b.rect.c,null);c.x=t.Mh.x+c.a;c.y=t.Mh.y;t.vi(c);a(b.Vk)}else t.vi(t.Mh),a(b)}
jg.nm=function(a){function b(m,n){function r(y){function x(I){A.Oa(Math.atan2(I.x,-I.z),Math.atan2(I.y,-I.z))}var A=new Tc;A.Eb=y;y=[new w(y.$.H,y.o,y.$.K),new w(y.$.l,y.o,y.$.m),new w(y.$.l,y.F,y.$.m),new w(y.$.H,y.F,y.$.K)];for(var z=q(y),D=z.next();!D.done;D=z.next())D=D.value,a.Qi.ub(D,D);z=y[y.length-1];y=q(y);for(D=y.next();!D.done;D=y.next())D=D.value,0>=D.z&&x(D),2==Math.abs(Math.sign(D.z)-Math.sign(z.z))&&x(yd(z,D,z.z/(z.z-D.z))),z=D;return A}if((!t.Sn||n!=a.Ja)&&n.ja.qa!=t.j){n.ja.qa=t.j;
n.dm=l++;for(var p=q(n.cells.elements),v=p.next();!v.done;v=p.next())if(v=v.value,v.Ei!=t.j)for(v.Ei<t.j-1&&ib(v.cm),v.Ei=t.j,v=v.kj.first();null!=v.item;v=v.next)v.item.ja.qa=t.j}n=q(n.yb);for(p=n.next();!p.done;p=n.next())if(p=p.value,!(isNaN(p.index)||p.F<=p.o)){if(m.Eb){if(0<=Jc(m.Eb.$,p.$.m,p.$.l)&&0<=Jc(m.Eb.$,p.$.K,p.$.H))continue;if(0>=Jc(p.$,m.Eb.$.m,m.Eb.$.l)&&0>=Jc(p.$,m.Eb.$.K,m.Eb.$.H))continue}if(!(0>=Jc(p.$,c.z,c.x))){(v=f[p.index])||(f[p.index]=v=r(p));var B=v.X();B.Eb=v.Eb;B.w<m.w&&
(B.w=m.w);B.D>m.D&&(B.D=m.D);B.o<m.o&&(B.o=m.o);B.F>m.F&&(B.F=m.F);B.w>=B.D||B.o>=B.F||b(B,Xe(p.Gc.Y))}}}var c=Qd(a.O),d=Ve(c,new w(0,-4294967295,0),We);if(d){var f={},h=a.Zd,g=Math.atan(Math.tan(h)*t.viewport.ratio),k=new Tc;k.w=-g;k.D=g;k.o=-h;k.F=h;var l=0;if(d=Xe(d.item.Y))a.Ja=d,b(k,a.Ja)}};function je(){this.name=null;this.Tc=[]}je.prototype.save=function(a){Gb(a,this.name);Sb(a,Math.ceil(this.Ub/1E3));Hb(a,this.Tc.length);for(var b=q(this.Tc),c=b.next();!c.done;c=b.next())c.value.save(a)};je.prototype.load=function(a){this.name=Cb(a);this.Ub=1E3*Ob(a);for(var b=Fb(a),c=0;c<b;c++){var d=new mg;d.load(a);this.Tc.push(d)}};function mg(){this.ba=t.i.Rb.get("defaultMaterial");this.bc=[];this.ic=[];this.Qc=[]}
mg.prototype.compile=function(){this.Mk=Ae.Ci.length;Ae.Ci=Ae.Ci.concat(this.bc);for(var a=0;a<this.ic.length;a++)this.ic[a]+=this.Mk;for(a=0;a<this.Qc.length;a++)this.Qc[a]+=this.Mk;this.xn=Ce.elements.length;Ce.elements=Ce.elements.concat(this.ic);this.fl=Ce.elements.length;Ce.elements=Ce.elements.concat(this.Qc)};mg.prototype.X=function(){var a=new mg;a.bc=this.bc;a.Ka=this.Ka;a.ic=this.ic;a.te=this.te;a.Qc=this.Qc;a.se=this.se;return a};
mg.prototype.save=function(a){Gb(a,this.ba.name);Sb(a,this.bc.length);for(var b=q(this.bc),c=b.next();!c.done;c=b.next())c=c.value,dc(a,c.x),dc(a,c.y),dc(a,c.z);b=q(this.bc);for(c=b.next();!c.done;c=b.next())c=c.value,Vb(a,c.Cc),Vb(a,c.Xc),Vb(a,c.Hb);b=q(this.bc);for(c=b.next();!c.done;c=b.next())c=c.value,fc(a,c.ld),fc(a,c.md);Sb(a,this.ic.length);b=q(this.ic);for(c=b.next();!c.done;c=b.next())Sb(a,c.value);Sb(a,this.Qc.length);b=q(this.Qc);for(c=b.next();!c.done;c=b.next())Sb(a,c.value);Sb(a,this.Wf);
return a};mg.prototype.load=function(a){this.ba=t.i.Rb.get(Cb(a));for(var b=Ob(a),c=0;c<b;c++){var d=new md(Wb(a),Wb(a),Wb(a));this.bc.push(d)}for(c=0;c<b;c++)d=this.bc[c],d.Cc=Ub(a),d.Xc=Ub(a),d.Hb=Ub(a);for(c=0;c<b;c++)d=this.bc[c],d.ld=ec(a),d.md=ec(a);b=Ob(a);for(c=0;c<b;c++)this.ic.push(Ob(a));b=Ob(a);for(c=0;c<b;c++)this.Qc.push(Ob(a));this.Wf=Ob(a);this.compile()};
function ng(){function a(p,v){return p.y<v.y?-1:p.y>v.y?1:0}function b(p,v){return p.z<v.z?-1:p.z>v.z?1:p.x<v.x?-1:p.x>v.x?1:0}var c=og,d=[];d.cmp=b;for(var f=q(c),h=f.next();!h.done;h=f.next()){var g=h.value;h=g[g.length-1];g=q(g);for(var k=g.next();!k.done;k=g.next()){k=k.value;if(0==b(h,k)){var l=[];l.cmp=a;l.z=h.z;l.x=h.x;l=Ra(d,l);Ra(l,h);Ra(l,k)}h=k}}c=q(c);for(h=c.next();!h.done;h=c.next())for(f=h.value,k=f.length-1,k=f[k],h=0;h<f.length;h++){g=f[h];if(0==b(k,g))if(l=Qa(d,k),k.y<g.y){var m=
Oa(l,k),n=Oa(l,g);for(m+=1;m<l.length&&!(m>=n);){var r=rd(k,g,(l[m].y-k.y)/(g.y-k.y));r.y=l[m].y;f.splice(h++,0,r);m++}}else for(m=Oa(l,k),n=Oa(l,g),--m;0<=m&&!(m<=n);)r=rd(k,g,(l[m].y-k.y)/(g.y-k.y)),r.y=l[m].y,f.splice(h++,0,r),m--;k=h;k=g}}function pg(){mg.call(this);this.ue=[];this.Ka=new we;this.se=this.te=null;this.Wf=0}pg.prototype=Object.create(mg.prototype);pg.prototype.constructor=pg;
pg.prototype.compile=function(){this.ic=[];for(var a=q(this.ue),b=a.next();!b.done;b=a.next()){b=b.value;for(var c=2;c<b.length;c++)this.ic.push(b[0]),this.ic.push(b[c-1]),this.ic.push(b[c])}t.Fb(this.Ka);ve(this.Ka,this.bc.length*this.Ka.Tb);this.Ka.upload(this.bc);this.ic.length?(this.te||(this.te=new ye),t.vf(this.te),ve(this.te,2*this.ic.length),this.te.upload(this.ic)):this.te=null;this.Qc.length?(this.se||(this.se=new ye),t.vf(this.se),ve(this.se,2*this.Qc.length),this.se.upload(this.Qc)):this.se=
null};function qg(a,b){b||(b=a.name);t.Ha.call(this,b);this.src=a}qg.prototype=Object.create(t.Ha.prototype);qg.prototype.constructor=qg;qg.prototype.create=function(){this.Tc=[];for(var a=q(this.src.Tc),b=a.next();!b.done;b=a.next())b=b.value,b=b instanceof pg?new rg(b):new sg(b),this.Tc.push(b),this.zg&&(b.zg=this.zg),b.Ma=this.O,K(b,this)};function sg(a,b){t.Ha.call(this,b);this.src=a;this.facing=1;this.on=this.nn=!1}sg.prototype=Object.create(t.Ha.prototype);sg.prototype.constructor=sg;
function tg(a){var b=null;a.parent&&(b=a.parent.I);b||(b=a.I);b||(b=a.src.I);b||(b=t.i.za.get("physical"));return b}function ug(a){var b=null;a.parent&&(b=a.parent.ba);b||(b=a.ba);b||(b=a.src.ba);b||(b=t.i.Rb.get("defaultMaterial"));return b}function vg(a){var b=null;a.parent&&(b=a.parent.ia);b||(b=a.ia);b||(b=a.src.ia);return b}
sg.prototype.ab=function(){t.Fb(Ae);t.eb(tg(this));t.I.M("modelMatrix",this.O);t.Jb(0,vg(this));var a=ug(this);a.bind();t.I.M("lightingFancy",t.va.lightingFancy,!0);this.Ki?t.I.M("architectureLighting",1,!0):t.I.M("architectureLighting",0,!0);t.I.M("ambientLight",this.ja.lb,!1);if(this.Ga)for(var b=0;b<this.Ga.length;b+=3)t.I.M(this.Ga[b],this.Ga[b+1],this.Ga[b+2]);t.tb(a.Ia);t.hc(a.Ia?1:2);t.$b(this.facing);this.src.ic.length?(t.vf(Ce),u.drawElements(u.TRIANGLES,this.src.ic.length,u.UNSIGNED_SHORT,
2*this.src.xn)):u.drawArrays(u.TRIANGLES,this.src.Mk,this.src.bc.length);this.src.Qc.length&&(this.nn&&this.dl(),this.on&&this.el())};
sg.prototype.dl=function(){t.tb(1);t.hc(1);t.eb(t.i.za.get("edge"));t.I.M("toonMinDist",Infinity,!1);t.I.M("modelMatrix",this.O);var a=new w(this.O.u,this.O.A,this.O.B),b=new w(this.O.v,this.O.m11,this.O.m12),c=new w(this.O.C,this.O.m21,this.O.m22);a.na(1);b.na(1);c.na(1);var d=new w(t.la.O.s-this.O.s,t.la.O.m31-this.O.m31,t.la.O.m32-this.O.m32);a=rc(a,d);b=rc(b,d);c=rc(c,d);t.I.M("eyeVector",new w(a,b,c));u.drawElements(u.LINES,this.src.Qc.length-this.src.Wf,u.UNSIGNED_SHORT,2*this.src.fl+2*this.src.Wf)};
sg.prototype.el=function(){t.tb(1);t.hc(1);t.eb(t.i.za.get("toon"));t.I.M("toonMinDist",Infinity,!1);t.I.M("modelMatrix",this.O);u.drawElements(u.LINES,this.src.Wf,u.UNSIGNED_SHORT,2*this.src.fl)};function rg(a,b){sg.call(this,a,b)}rg.prototype=Object.create(sg.prototype);e=rg.prototype;e.constructor=rg;e.step=function(){sg.prototype.step.call(this)};
e.ab=function(){t.Fb(this.src.Ka);t.eb(tg(this));t.I.M("modelMatrix",this.O);t.Jb(0,vg(this));var a=ug(this);a.bind();t.I.M("lightingFancy",t.va.lightingFancy,!0);this.Ki?t.I.M("architectureLighting",1,!0):t.I.M("architectureLighting",0,!0);t.I.M("ambientLight",this.ja.lb,!1);if(this.Ga)for(var b=0;b<this.Ga.length;b+=3)t.I.M(this.Ga[b],this.Ga[b+1],this.Ga[b+2]);t.tb(a.Ia);t.hc(a.Ia?1:2);t.$b(this.facing);this.src.ic.length?(t.vf(this.src.te),u.drawElements(u.TRIANGLES,this.src.ic.length,u.UNSIGNED_SHORT,
0)):u.drawArrays(u.TRIANGLES,0,this.src.bc.length)};
e.dl=function(){t.tb(1);t.hc(1);t.eb(t.i.za.get("edge"));t.I.M("toonMinDist",Math.pow(5E5,2),!1);t.I.M("modelMatrix",this.O);var a=new w(this.O.u,this.O.A,this.O.B),b=new w(this.O.v,this.O.m11,this.O.m12),c=new w(this.O.C,this.O.m21,this.O.m22);a.na(1);b.na(1);c.na(1);var d=new w(t.la.O.s-this.O.s,t.la.O.m31-this.O.m31,t.la.O.m32-this.O.m32);a=rc(a,d);b=rc(b,d);c=rc(c,d);t.I.M("eyeVector",new w(a,b,c));a=this.src.Qc.length-this.src.Wf;b=2*this.src.Wf;t.vf(this.src.se);u.drawElements(u.LINES,a,u.UNSIGNED_SHORT,
b)};e.el=function(){t.tb(1);t.hc(1);t.eb(t.i.za.get("toon"));t.I.M("toonMinDist",Math.pow(5E5,2),!1);t.I.M("modelMatrix",this.O);var a=this.src.Wf;t.vf(this.src.se);u.drawElements(u.LINES,a,u.UNSIGNED_SHORT,0)};function wg(){this.scale=1;this.mb=25E3;this.Qd=0;this.zg=!1;this.frame=0;this.xb=1}function xg(a){a.u=t.la.O.u;a.A=t.la.O.A;a.B=t.la.O.B;a.v=t.la.O.v;a.m11=t.la.O.m11;a.m12=t.la.O.m12;a.C=t.la.O.C;a.m21=t.la.O.m21;a.m22=t.la.O.m22;var b=this.scale*this.mb,c=this.zg?-b:b,d=Math.cos(this.Qd),f=Math.sin(this.Qd),h=new H;h.u=d*c;h.A=f*c;h.v=-f*b;h.m11=d*b;Cd(a,h,a)}
function yg(){0>this.frame||(xg.call(this,this.O),t.Fb(zg),t.eb(this.I),t.Jb(0,this.ia),this.ba.bind(),t.I.M("ambientLight",this.ja.lb,!1),t.tb(this.ba.Ia),t.hc(this.ba.Ia?1:2),t.$b(0),t.I.M("modelMatrix",this.O),t.I.M("color",this.color),u.drawArrays(u.TRIANGLE_FAN,Ag(this.frame,this.xb),4))}
for(var Bg=[],Cg=0;4>Cg;Cg++)for(var Dg=1<<Cg,Eg=Dg<<Cg,Fg=1/Dg,Gg=0;Gg<Eg;Gg++){var Hg=Gg%Dg,Ig=Gg/Dg|0;Hg*=Fg;Ig*=Fg;var Jg=void 0;Jg=new md(-1,-1,0);td(Jg,Hg,Ig);Jg.Hb=32767;Bg.push(Jg);Jg=new md(1,-1,0);td(Jg,Hg+Fg,Ig);Jg.Hb=32767;Bg.push(Jg);Jg=new md(1,1,0);td(Jg,Hg+Fg,Ig+Fg);Jg.Hb=32767;Bg.push(Jg);Jg=new md(-1,1,0);td(Jg,Hg,Ig+Fg);Jg.Hb=32767;Bg.push(Jg)}var zg=new we;ve(zg,Bg.length*zg.Tb);zg.upload(Bg);
function Kg(a,b){for(var c=0;b>Math.pow(1<<c,2);)c++;var d=1<<c;b=1/d;c=a%d*b;a=(a/d|0)*b;return[c,a,c+b,a+b]}function Ag(a,b){switch(b){default:return 4*a;case 4:return 4+4*a;case 16:return 20+4*a;case 64:return 84+4*a}};function Lg(){this.color=this.ia=this.I=null;this.Ia=NaN;this.Ze=[];this.Uc=[];this.Uc.cmp=Mg;this.Zm=64}Lg.prototype.clear=function(){this.Ze.length=0;this.Uc.length=0};Lg.prototype.ab=function(){t.eb(this.I);t.I.M("modelMatrix",hf);t.Jb(0,this.ia);t.I.M("color",this.color);t.tb(this.Ia);t.hc(1);t.$b(0);for(var a=q(this.Uc),b=a.next();!b.done;b=a.next())b.value.ab()};
function Ng(a,b,c,d,f,h,g){function k(y,x){if(tf(x)&&Xe(x.Y)){var A=[];if(x instanceof Og){if(x.F<b.y-B||x.o>b.y+B)return;var z=Jc(x.Z,b.z,b.x);if(z<-B||z>B)return;z=x.Z.getParameter(b.z,b.x);if(z<-B||z>x.Z.length+B||.707107>rc(new w((x.Z.K-x.Z.m)/x.Z.length,0,(x.Z.l-x.Z.H)/x.Z.length),c))return;A.push(new w(x.Z.H,x.o,x.Z.K),new w(x.Z.l,x.o,x.Z.m),new w(x.Z.l,x.F,x.Z.m),new w(x.Z.H,x.F,x.Z.K))}else{if(x.y<b.y-B||x.y>b.y+B)return;var D=q(x.ha);for(z=D.next();!z.done;z=D.next())if(Jc(z.value,b.z,b.x)<
-B)return;if(x instanceof Pg){if(.707107>c.y)return}else if(-.707107<c.y)return;D=q(x.ha);for(z=D.next();!z.done;z=D.next())z=z.value,A.push(new w(z.H,x.y,z.K));x instanceof Qg&&A.reverse()}(function(){function I(pa,Lb){var rb=[],lc=pa[pa.length-1],Nb=Lb(lc);pa=q(pa);for(var Tb=pa.next();!Tb.done;Tb=pa.next()){Tb=Tb.value;var Ic=Lb(Tb);2==Math.abs(Math.sign(Ic)-Math.sign(Nb))&&rb.push(yd(lc,Tb,Nb/(Nb-Ic)));0<=Ic&&rb.push(Tb);Nb=Ic;lc=Tb}return 3>rb.length?null:rb}for(var L=q(A),R=L.next();!R.done;R=
L.next())R=R.value,p.ub(R,R);L=q([function(pa){return 1-pa.x},function(pa){return 1+pa.x},function(pa){return 1-pa.y},function(pa){return 1+pa.y},function(pa){return 1-pa.z},function(pa){return 1+pa.z}]);for(R=L.next();!R.done;R=L.next())if(A=I(A,R.value),!A)return;for(L=0;L<A.length;L++){R=A[L];var ra=.5*R.x+.5,ta=.5*R.y+.5;r.ub(R,R);var ia=new md;ia.x=R.x;ia.y=R.y;ia.z=R.z;ia.ld=v[0]*(1-ra)+v[2]*ra;ia.md=v[1]*(1-ta)+v[3]*ta;A[L]=ia}L=[];L.Y=x.Y;L.cellIndex=y.index;L=Ra(l,L);for(R=2;R<A.length;R++)L.push(A[0]),
L.push(A[R-1]),L.push(A[R])})()}}a.Ze.length==a.Zm&&a.Ze.shift().remove();var l=[];l.cmp=Mg;var m=new w,n=new w;sc(c,m,n);var r=new H;r.u=m.x;r.v=n.x;r.C=c.x;r.s=b.x;r.A=m.y;r.m11=n.y;r.m21=c.y;r.m31=b.y;r.B=m.z;r.m12=n.z;r.m22=c.z;r.m32=b.z;m=new H;n=Math.cos(d)*f;d=Math.sin(d)*f;m.u=n;m.v=-d;m.A=d;m.m11=n;m.m22=f;Nd(r,m,r);var p=r.ak(new H),v=Kg(h,g),B=1.733*f;f=xf(b,B);f=q(f);for(h=f.next();!h.done;h=f.next())for(h=h.value,g=q(h.ya),d=g.next();!d.done;d=g.next())k(h,d.value);f=new Sg;h=q(l);for(g=
h.next();!g.done;g=h.next())g=g.value,d=Qa(a.Uc,g),d||(d=new Tg(a),d.Y=g.Y,d.cellIndex=g.cellIndex,d.ja=Xe(d.Y).ja,d.create(),Ra(a.Uc,d)),Ug(d,g),f.Tl.push({node:d,nd:g.length});a.Ze.push(f)}function Tg(a){this.Bm=a;this.cellIndex=this.Y=NaN;this.ja=null;this.nd=this.Cd=0}function Mg(a,b){return a.Y<b.Y?-1:a.Y>b.Y?1:a.cellIndex<b.cellIndex?-1:a.cellIndex>b.cellIndex?1:0}Tg.prototype.create=function(){this.Ka=new we;this.Ka.usage=u.DYNAMIC_DRAW;ve(this.Ka,48*this.Ka.Tb)};
function Vg(a,b){var c=a.nd+b;if(0>=c)Sa(a.Bm.Uc,a);else{c*=a.Ka.Tb;if((a.Cd+a.nd+b)*a.Ka.Tb>a.Ka.buffer.byteLength)b=new ArrayBuffer(c<<1);else if(48<=a.Cd)b=a.Ka.buffer;else return;c=new Uint8Array(a.Ka.buffer,a.Cd*a.Ka.Tb,a.nd*a.Ka.Tb);(new Uint8Array(b)).set(c);a.Ka.buffer=b;a.Ka.bind();u.bufferData(a.Ka.target,a.Ka.buffer,a.Ka.usage);a.Cd=0}}
function Ug(a,b){Vg(a,b.length);a.Ka.bind();a.Ka.write(b,a.Cd+a.nd);u.bufferSubData(a.Ka.target,(a.Cd+a.nd)*a.Ka.Tb,new Uint8Array(a.Ka.buffer,(a.Cd+a.nd)*a.Ka.Tb,b.length*a.Ka.Tb));a.nd+=b.length}Tg.prototype.ab=function(){if(this.ja.qa<t.j)return!1;t.Fb(this.Ka);t.I.M("ambientLight",this.ja.lb);u.drawArrays(u.TRIANGLES,this.Cd,this.nd)};function Sg(){this.Tl=[]}Sg.prototype.remove=function(){for(var a=q(this.Tl),b=a.next();!b.done;b=a.next())b=b.value,b.node.Cd+=b.nd,b.node.nd-=b.nd,Vg(b.node,0)};var Wg={},Xg,Yg,Zg,$g,P,T,U,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh=new F(192,192,192,255),kh=new F(64,64,64,255),lh=new F(160,160,160,255),mh=new F(160,160,160,255),nh=new F(144,144,144,255),oh,ph=oh=new ie;oh.name="concrete";oh.Od=new F(255,255,255,3.984375);oh.fd=4;oh.gd=1;oh.Ia=0;var qh=oh=new ie;oh.name="paint";oh.Od=new F(255,255,255,31.875);oh.fd=128;oh.gd=1;oh.Ia=0;var rh=oh=new ie;oh.name="plaster";oh.Od=new F(255,255,255,15.9375);oh.fd=32;oh.gd=1;oh.Ia=0;var sh=oh=new ie;oh.name="metal";
oh.Od=new F(255,255,255,95.625);oh.fd=64;oh.gd=1;oh.Ia=0;var th=oh=new ie;oh.name="glass";oh.Od=new F(255,255,255,63.75);oh.fd=256;oh.gd=1;oh.Ia=1;
function uh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new vh(c,c+h);b.push(g);c+=h;return g}}this.floor.ia=t.i.P.get("concr01");this.floor.ba=ph;this.floor.color=jh;this.ta.ia=t.i.P.get("concr01");this.ta.ba=ph;this.ta.color=mh;var b=[],c=this.cg,d=this.F,f;if(f=a(25E3))f.aa.ia=t.i.P.get("brick01"),f.aa.ba=qh,f.aa.color=kh;if(f=a(this.Za))f.aa.ia=t.i.P.get("brick01"),f.aa.ba=qh,f.aa.color=this.color;if(f=a(0))f.aa.ia=t.i.P.get("brick01"),f.aa.ba=ph,f.aa.color=lh;return b}
function wh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new vh(c,c+h);b.push(g);c+=h;return g}}this.floor.ia=t.i.P.get("concr01");this.floor.ba=ph;this.floor.color=jh;this.ta.ia=t.i.P.get("concr01");this.ta.ba=ph;this.ta.color=mh;var b=[],c=this.cg,d=this.F,f;if(f=a(25E3))f.aa.ia=t.i.P.get("brick01"),f.aa.ba=qh,f.aa.color=kh;if(f=a(this.Za))f.aa.ia=t.i.P.get("brick01"),f.aa.ba=qh,f.aa.color=this.color;if(f=a(-25E3))f.aa.ia=t.i.P.get("brick01"),f.aa.ba=ph,f.aa.color=lh;
if(f=a(0))f.aa.ia=t.i.P.get("concr01"),f.aa.ba=ph,f.aa.color=nh;return b}
function xh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new vh(c,c+h);b.push(g);c+=h;return g}}this.floor.ia=t.i.P.get("concr01");this.floor.ba=ph;this.floor.color=jh;this.ta.ia=t.i.P.get("concr01");this.ta.ba=ph;this.ta.color=mh;var b=[],c=this.cg,d=this.F,f;if(f=a(25E3))f.aa.ia=t.i.P.get("metal01"),f.aa.ba=sh,f.aa.color=kh;if(f=a(this.Za))f.aa.ia=t.i.P.get("metal01"),f.aa.ba=qh,f.aa.color=this.color;if(f=a(0))f.aa.ia=t.i.P.get("metal01"),f.aa.ba=sh,f.aa.color=lh;return b}
function yh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new vh(c,c+h);b.push(g);c+=h;return g}}this.floor.ia=t.i.P.get("concr01");this.floor.ba=ph;this.floor.color=jh;this.ta.ia=t.i.P.get("concr01");this.ta.ba=ph;this.ta.color=mh;var b=[],c=this.cg,d=this.F,f;if(f=a(25E3))f.aa.ia=t.i.P.get("metal01"),f.aa.ba=sh,f.aa.color=kh;if(f=a(this.Za))f.aa.ia=t.i.P.get("metal01"),f.aa.ba=qh,f.aa.color=this.color;if(f=a(-25E3))f.aa.ia=t.i.P.get("metal01"),f.aa.ba=sh,f.aa.color=lh;
if(f=a(0))f.aa.ia=t.i.P.get("concr01"),f.aa.ba=ph,f.aa.color=nh;return b}
function zh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new vh(c,c+h);b.push(g);c+=h;return g}}this.floor.ia=t.i.P.get("concr01");this.floor.ba=ph;this.floor.color=jh;this.ta.ia=t.i.P.get("concr01");this.ta.ba=ph;this.ta.color=mh;var b=[],c=this.cg,d=this.F,f;if(f=a(25E3))f.aa.ia=t.i.P.get("plaster01"),f.aa.ba=qh,f.aa.color=kh;if(f=a(this.Za))f.aa.ia=t.i.P.get("plaster01"),f.aa.ba=rh,f.aa.color=this.color;if(f=a(0))f.aa.ia=t.i.P.get("plaster01"),f.aa.ba=rh,f.aa.color=
new F(248,248,248,255);return b}var Ah=new mb;function Bh(a){return Math.floor(pb(Ah)*a)}function Ch(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return b[Bh(b.length)]}function Dh(a){for(var b=0;b<a.length;b++){var c=Bh(a.length-b),d=a[b];a[b]=a[c];a[c]=d}}function Eh(){for(var a=[],b=q(gg),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next())a=a.concat(d.value)}return a}
function Fh(){for(var a=[],b=q(gg),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;for(var f=q(d.Ab),h=f.next();!h.done;h=f.next())h=h.value,h.wa==d&&a.push(h)}}return a}function Gh(a,b,c){var d=[];a=q(a);for(var f=a.next();!f.done;f=a.next())d.push(f.value.translate(b,c));return d}function Hh(a,b){var c=[];a=q(a);for(var d=a.next();!d.done;d=a.next())c.push(d.value.Qg(b));return c}
function Ih(a,b,c){a:{switch((4-c)%4){case 0:a=new E(a,b);break a;case 1:a=new E(-b,a);break a;case 2:a=new E(-a,-b);break a;case 3:a=new E(b,-a);break a}a=void 0}return a}function Jh(a,b,c){var d=[];a=q(a);for(var f=a.next();!f.done;f=a.next())d.push(f.value.expand(b,c));return d}function Kh(a,b){var c=[];a=q(a);for(var d=a.next();!d.done;d=a.next())c.push(Lh(d.value,b));return c}
function Mh(a,b){b=q(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=a.length,f=0;f<d;f++)a[f].vh(c,a)&&(a.splice(f--,1),d--)}return a}function Nh(a,b){for(var c=new Oh,d=q(a),f=d.next();!f.done;f=d.next())Ph(c,f.value);d=q(b);for(f=d.next();!f.done;f=d.next())Ph(c,f.value);c=[c];Mh(c,b);return Mh(a.slice(),c)}function Qh(a,b){b=void 0===b?0:b;for(var c=new Oh,d=q(a),f=d.next();!f.done;f=d.next())Ph(c,f.value);b=[c.expand(b,b)];Mh(b,a);return b}
function Rh(a){var b=[];b.cmp=function(h,g){return h.w<g.w?-1:h.w>g.w?1:h.J<g.J?-1:h.J>g.J?1:0};a=q(a);for(var c=a.next();!c.done;c=a.next())Ra(b,c.value);for(a=0;a<b.length;a++){c=b[a];var d=Oa(b,{w:c.D,J:c.J}),f=b[d];f&&f.w==c.D&&f.J==c.J&&f.L==c.L&&(b.splice(d,1),b[a--]=c.X(c.J,c.L,c.w,f.D))}return b}function Sh(a,b,c){var d=Infinity;c=q(c);for(var f=c.next();!f.done;f=c.next())if(f=f.value,!(f.w>=b||f.D<=b||f.L<=a||f.J>=d)){if(f.J<a){d=a;break}d=f.J}return d}
function Th(a){for(var b=[],c=q(a),d=c.next();!d.done;d=c.next())Uh(d.value,b);Mh(b,a);return b}function Vh(a){a.bound=new Tc;for(var b=0;b<a.length;b++){var c=a[b].qg();a.bound.Oa(c.K,c.H);a[b]=c}}
function Wh(a){var b=[];b.cmp=function(m,n){return m.x<n.x?-1:m.x>n.x?1:m.y<n.y?-1:m.y>n.y?1:m.type<n.type?-1:m.type>n.type?1:0};a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,Ra(b,{x:c.Ec(),y:c.Dc(),type:c.vb(),$:c});a=[];c=[];for(var d={};b.length;){var f=!1;d.Dd=[];d.Dd.bound=new Oh;d.Kc=null;d.qc=null;var h=function(m){return function(n){n.$.vb()==m.qc.vb()?m.qc.V+=n.$.V-n.$.S:((m.qc.vb()+3&3)==n.$.vb()&&(m.qc.Uh=!0,n.$.zi=!0),m.Dd.push(n.$),m.qc=n.$);m.Kc=new E(m.qc.ec(),m.qc.dc());m.Kc.type=
-1;Xh(m.Dd.bound,m.Kc.x,m.Kc.y)}}(d);d.qc=b.shift().$;d.qc.vb()&&(f=!0,d.qc.zi=!0);d.Dd.push(d.qc);d.Kc=new E(d.qc.ec(),d.qc.dc());d.Kc.type=-1;for(Xh(d.Dd.bound,d.Kc.x,d.Kc.y);;){var g=[],k=Oa(b,d.Kc),l=b[k];if(!l)break;if(l.x!=d.Kc.x)break;if(l.y!=d.Kc.y)break;g[0]=k;g[1]=k;k++;(l=b[k])&&l.x==d.Kc.x&&l.y==d.Kc.y&&(g[1]=k);switch(d.qc.vb()){case 0:k=g[0];break;case 1:k=g[1];break;case 2:k=g[1];break;case 3:k=g[0]}h(b.splice(k,1)[0])}f?(d.Dd[d.Dd.length-1].Uh=!0,c.push(d.Dd)):(d.Dd.wb=[],a.push(d.Dd));
d={qc:d.qc,Dd:d.Dd,Kc:d.Kc}}b=q(c);for(c=b.next();!c.done;c=b.next())Yh(c.value,a);return a}function Zh(a,b){b||(b=[]);a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(c),c.wb&&Zh(c.wb,b);return b}
function Yh(a,b){var c=null;b=q(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.J<=d.bound.J||a.bound.w<=d.bound.w||a.bound.L>=d.bound.L||a.bound.D>=d.bound.D)){if(c){if(d.bound.J<=c.bound.J)continue;if(d.bound.w<=c.bound.w)continue;if(d.bound.L>=c.bound.L)continue;if(d.bound.D>=c.bound.D)continue}c=d}c&&c.wb.push(a)}
function $h(a){var b=162500,c=162500;b=void 0===b?0:b;c=void 0===c?0:c;var d=Th(a);a=[];d=q(d);for(var f=d.next();!f.done;f=d.next())f.value.Ti(b,c,a);d=Eh();d=q(d);for(f=d.next();!f.done;f=d.next()){f=f.value;for(var h=0;h<a.length;h++)f.expand(b,c).Kf(a[h].x,a[h].y)&&a.splice(h--,1)}return a}var ai=-1,bi=-1,ci=0,di=1,ei=0,fi=2,gi=[],gg=[],hg=0;
function hi(){if(!Xg){var a=Xg={};Yg=1;Xg.Xj=fi;Zg=Yg;a.Kj=di;a.Lf=NaN;a.Ad=NaN;a.Jd=[];$g=gi;gi=[]}if(!P){if(!Zg){ii();Eh();Xg=null;ai++;if(ai<ci+2)return!0;ji();return!0}P=[];P.Ib=Xg;P.Fg=3;P.jd=new F(233,234,85,255);P.Za=-75E3;P.parent=null;P.children=[];P.Pi=1;P.Vd=0;gi.push(P);Zg--}if(!T){if(!P.Fg){if(P.parent){a=P.parent;a.children.push(P);do a.Pi++,P.Vd++,a=a.parent;while(a)}P=null;return!0}T=[];ki.call(T);T.index=gg.length+hg;T.Kb=P;T.Eg=Ch(1,2);1==T.index&&(T.ed=!0);T.style={};T.style.height=
225E3+5E4*Bh(4);T.style.jd=P.jd;T.ed?(T.style.Sc=Ch(wh,yh),T.style.Za=1E5):(T.style.Sc=Ch(uh,xh),T.style.Za=P.Za);P.push(T);gg.push(T);P.Fg--}if(!U){if(!T.Eg)return li(),T=null,!0;U=[];U.index=mi++;U.Ab=[];U.kc=Ch(1,2)}if(!U.kc){if(ah){ii();a=U;var b=ah,c=ni([b],[a]);c||b.T.Kb!=a.T.Kb&&(c=oi([b],[a]));if(!c)return U.length=0,U.kc=Ch(1,2),T.pop(),!0}bh=U=ah=null;T.Eg--;return!0}if(U.length)return(a=pi([U],0))?(a.platform=U,U.push(a),U.kc--):(U.length=0,U.kc=Ch(1,2),T.pop()),!0;if(T.length)return a=
T,bh||(bh={}),(a=pi(a,0,bh))?(ah=a.je,U.y=ah.y+5E4*Ch(-2,-1,1,2),U.y=Math.min(U.y,-4E5),U.T=T,T.push(U),a.platform=U,U.push(a),U.kc--):(bh=U=null,T.Eg=0),!0;if(1<P.length){b=[];c=q(P);for(a=c.next();!a.done;a=c.next())b.push.apply(b,ba(a.value));bh||(bh={});(a=pi(b,0,bh))?(ah=a.je,U.y=ah.y,U.T=T,T.push(U),a.platform=U,U.push(a),U.kc--):(P.pop(),gg.pop(),bh=U=T=null,P.Fg=0);return!0}if(1<gi.length){b=[];c=q(gi);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length)){var d=q(a);for(a=
d.next();!a.done;a=d.next())b.push.apply(b,ba(a.value))}bh||(bh={});if(a=pi(b,6E5,bh))ah=a.je,P.parent=ah.T.Kb,U.y=ah.y+5E4*Ch(-2,-1,0,0,0,1,2),U.y=Math.min(U.y,-4E5),U.T=T,T.push(U),a.platform=U,U.push(a),U.kc--;else{for(;;){a=gg[gg.length-1];if(a.pa<=ai)break;b=q(a);for(a=b.next();!a.done;a=b.next())for(c=q(a.value.Ab),a=c.next();!a.done;a=c.next())qi(a.value);gg.pop()}P=null;gi.length=0;Zg=Yg;bh=ah=U=T=null}return!0}if($g.length){b=[];c=q($g);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=
a.children.length))for(d=q(a),a=d.next();!a.done;a=d.next())b.push.apply(b,ba(a.value));bh||(bh={cmp:function(f,h){return f.vc<h.vc?-1:f.vc>h.vc?1:f.x<h.x?-1:f.x>h.x?1:f.y<h.y?-1:f.y>h.y?1:0}});if(a=pi(b,0,bh))ah=a.je,U.y=ah.y+5E4*Ch(-2,-1,0,0,0,1,2),U.y=Math.min(U.y,-4E5),U.T=T,T.push(U),a.platform=U,U.push(a),U.kc--;else{for(;;){a=gg[gg.length-1];if(a.pa<=ai)break;b=q(a);for(a=b.next();!a.done;a=b.next())for(c=q(a.value.Ab),a=c.next();!a.done;a=c.next())qi(a.value);gg.pop()}P=null;gi.length=0;Zg=
Yg;bh=ah=U=T=null}return!0}a=pi(null,0);U.y=-4E5;U.T=T;T.push(U);a.platform=U;U.push(a);U.kc--;return!0}function ri(){if(!Xg){var a=Xg={};Yg=1;Xg.Xj=fi;Zg=Yg;a.Kj=di;a.Lf=NaN;a.Ad=NaN;a.Jd=[];$g=gi;gi=[]}if(!P&&!Zg){ii();Eh();Xg=null;ai++;if(ai<ci+2)return!0;ji();return!0}return si()}
function ti(){if(!Xg){var a=Xg={};di++;3<di&&(di=3);0>=ei?Yg=2:1>=ei?(Yg=3,fi++):3>=ei?(Yg=3,fi++):4>=ei?(Yg=4,fi++):Yg=4;ei++;Xg.Xj=fi;Zg=Yg;a.Kj=di;a.Lf=0;a.Ad=NaN;a.Jd=[];$g=gi;gi=[];ch=-1}if(0<=ch){var b=gi[ch];if(!b){ii();Eh();ui();Xg=null;ai++;if(ai<ci+2)return!0;ji();return!0}if(2==b.children.length&&3<=b.Pi){var c=function(g,k){if(!g)return k;for(var l=q(g),m=l.next();!m.done;m=l.next())k.push.apply(k,ba(m.value));c(g.children[0],k);c(g.children[1],k);return k};a=c(b.children[0],[]);b=c(b.children[1],
[]);var d=ni(a,b);d||(d=oi(a,b))}ch++;return!0}if(!P&&!Zg){var f=[],h=function(g){g&&(g.index=f.length,f.push(g),h(g.children[0]),h(g.children[1]))};h(gi[0]);gi=f;ch=0;return!0}return si()}
function si(){if(!P){P=[];P.Ib=Xg;P.Fg=Ch(2,3);var a=[new F(233,234,85,255),new F(85,85,234,255),new F(234,85,85,255),new F(41,166,191,255)];P.jd=a[gi.length%a.length];P.Za=-75E3;P.parent=null;P.children=[];P.Pi=1;P.Vd=0;gi.push(P);Zg--}if(!T){if(!P.Fg){if(P.parent){a=P.parent;a.children.push(P);do a.Pi++,P.Vd++,a=a.parent;while(a)}P=null;return!0}T=[];ki.call(T);T.index=gg.length+hg;T.Kb=P;T.Eg=Ch(1,2);0==T.index%5&&(T.ed=!0);T.style={};T.style.height=225E3;T.style.height+=5E4*Bh(4);T.style.jd=P.jd;
T.ed?(T.style.Sc=Ch(wh,yh),T.style.Za=1E5):(T.style.Sc=Ch(uh,xh),T.style.Za=P.Za);P.push(T);gg.push(T);P.Fg--}if(!U){if(!T.Eg)return li(),T=null,!0;U=[];U.index=mi++;U.Ab=[];U.kc=Ch(1,2)}if(!U.kc){if(ah){ii();a=U;var b=ah,c=ni([b],[a]);c||b.T.Kb!=a.T.Kb&&(c=oi([b],[a]));if(!c)return U.length=0,U.kc=Ch(1,2),T.pop(),!0}bh=U=ah=null;T.Eg--;return!0}if(U.length)return(a=pi([U],0))?(a.platform=U,U.push(a),U.kc--):(U.length=0,U.kc=Ch(1,2),T.pop()),!0;if(T.length)return a=T,bh||(bh={}),(a=pi(a,0,bh))?(ah=
a.je,U.y=ah.y+5E4*Ch(-2,-1,1,2),U.y=Math.min(U.y,-4E5),U.T=T,T.push(U),a.platform=U,U.push(a),U.kc--):(bh=U=null,T.Eg=0),!0;if(1<P.length){b=[];c=q(P);for(a=c.next();!a.done;a=c.next())b.push.apply(b,ba(a.value));bh||(bh={});(a=pi(b,0,bh))?(ah=a.je,U.y=ah.y,U.T=T,T.push(U),a.platform=U,U.push(a),U.kc--):(P.pop(),gg.pop(),bh=U=T=null,P.Fg=0);return!0}if(1<gi.length){b=[];c=q(gi);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length)){var d=q(a);for(a=d.next();!a.done;a=d.next())b.push.apply(b,
ba(a.value))}bh||(bh={});if(a=pi(b,6E5,bh))ah=a.je,P.parent=ah.T.Kb,U.y=ah.y+5E4*Ch(-2,-1,0,0,0,1,2),U.y=Math.min(U.y,-4E5),U.T=T,T.push(U),a.platform=U,U.push(a),U.kc--;else{for(;;){a=gg[gg.length-1];if(a.pa<=ai)break;b=q(a);for(a=b.next();!a.done;a=b.next())for(c=q(a.value.Ab),a=c.next();!a.done;a=c.next())qi(a.value);gg.pop()}P=null;gi.length=0;Zg=Yg;bh=ah=U=T=null}return!0}if($g.length){b=[];c=q($g);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length))for(d=q(a),a=d.next();!a.done;a=
d.next())b.push.apply(b,ba(a.value));bh||(bh={cmp:function(f,h){return f.vc<h.vc?-1:f.vc>h.vc?1:f.x<h.x?-1:f.x>h.x?1:f.y<h.y?-1:f.y>h.y?1:0}});if(a=pi(b,0,bh))ah=a.je,U.y=ah.y+5E4*Ch(-2,-1,0,0,0,1,2),U.y=Math.min(U.y,-4E5),U.T=T,T.push(U),a.platform=U,U.push(a),U.kc--;else{for(;;){a=gg[gg.length-1];if(a.pa<=ai)break;b=q(a);for(a=b.next();!a.done;a=b.next())for(c=q(a.value.Ab),a=c.next();!a.done;a=c.next())qi(a.value);gg.pop()}P=null;gi.length=0;Zg=Yg;bh=ah=U=T=null}return!0}a=pi(null,0);U.y=-4E5;
U.T=T;T.push(U);a.platform=U;U.push(a);U.kc--;return!0}
function pi(a,b,c){if(c){if(c.sj)return vi(c)}else c={};c.cmp||(c.cmp=function(n,r){return n.Vd<r.Vd?-1:n.Vd>r.Vd?1:n.vc>r.vc?-1:n.vc<r.vc?1:n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0});c.Vb=5E4*Math.floor(Bh(2)+4);c.Df=5E4*Math.floor(Bh(2)+4);Bh(12)||(c.Vb*=2,c.Df*=2);if(!a)return new Oh(-c.Vb,c.Vb,-c.Df,c.Df);c.from=a;c.margin=b;c.sm=0;for(var d=Eh(),f=[],h=q(a),g=h.next();!g.done;g=h.next()){g=g.value;for(var k=[],l=q(g),m=l.next();!m.done;m=l.next())wi(m.value,c.Vb,c.Df,b,k);l=d;l=Kh(l,new Oh(-c.Vb+
1,c.Vb,-c.Df+1,c.Df));k=Mh(k,l);k=q(k);for(l=k.next();!l.done;l=k.next())l=l.value,m=void 0,m=new E(l.J,l.w),m.je=g,m.Vd=g.T.Kb.Vd,f.push(m),m=new E(l.L-1,l.D-1),m.je=g,m.Vd=g.T.Kb.Vd,f.push(m)}if(!f.length)return null;c.sj=[];c.sj.cmp=c.cmp;b=[];a=q(a);for(d=a.next();!d.done;d=a.next())b.push.apply(b,ba(d.value));f=q(f);for(a=f.next();!a.done;a=f.next())a=a.value,a.vc=xi(b,a.x,a.y),Ra(c.sj,a);return vi(c)}
function vi(a){var b=a.sj[a.sm++];if(!b)return null;a=new Oh(b.x-a.Vb,b.x+a.Vb,b.y-a.Df,b.y+a.Df);a.je=b.je;return a}
function ji(){dh=Fh();if(Wg.Hn){for(var a=q(dh),b=a.next();!b.done;b=a.next())b.value.Ok();eh=[];fh=[];gh=[];a=q(gi);for(b=a.next();!b.done;b=a.next()){for(var c=[],d=q(b.value),f=d.next();!f.done;f=d.next()){var h=[];f=q(f.value);for(b=f.next();!b.done;b=f.next())b=b.value,h=h.concat(b),gh=gh.concat(Th(b));c=c.concat(h);fh=fh.concat(Th(h))}eh=eh.concat(Th(c))}for(;gg.length&&!(gg[0].pa>=ci);)gg.shift(),hg++;bi=ci+1;yi=0}else{b=q(gg);for(f=b.next();!f.done;f=b.next()){a=f.value;if(a.pa>=ci)break;
a.tg=!0;f=q(a.Gb);for(c=f.next();!c.done;c=f.next())zi(c.value);a=q(a);for(f=a.next();!f.done;f=a.next())for(f=q(f.value.Ab),c=f.next();!c.done;c=f.next())c.value.Nj()}a=q(gg);for(f=a.next();!f.done;f=a.next())if(f=f.value,!(f.pa<=bi)){if(f.pa>ci+1)break;f.bound.J-=1E5;f.bound.L+=1E5;f.bound.w-=1E5;f.bound.D+=1E5;c=q(f);for(b=c.next();!b.done;b=c.next())b=b.value,b.y<f.floor&&(f.floor=b.y),b.y>f.ta&&(f.ta=b.y);f.ta+=f.style.height;f.o=f.floor;f.bg||(f.Db=new w,f.bg=new w);c=q(f);for(b=c.next();!b.done;b=
c.next())for(b=b.value,b.ql=[],d=q(b),h=d.next();!h.done;h=d.next()){h=h.value;var g=[];Uh(h,g);Vh(g);b.ql.push(g);h.z=.5*h.J+.5*h.L;h.x=.5*h.w+.5*h.D;h.y=h.platform.y;h.J<f.bound.J&&(f.bound.J=h.J);h.L>f.bound.L&&(f.bound.L=h.L);h.w<f.bound.w&&(f.bound.w=h.w);h.D>f.bound.D&&(f.bound.D=h.D)}}a=q(gg);for(f=a.next();!f.done;f=a.next())if(b=f.value,!(b.pa<=bi)){if(b.pa>ci+1)break;f=q(b);for(b=f.next();!b.done;b=f.next())for(c=q(b.value.Ab),b=c.next();!b.done;b=c.next())b.value.Lj()}a=q(gg);for(f=a.next();!f.done;f=
a.next())if(f=f.value,!(f.pa<=bi)){if(f.pa>ci+1)break;f.ta=f.ed?0:Math.min(-18750,f.ta);c=[];d=q(f);for(b=d.next();!b.done;b=d.next())c.push.apply(c,ba(b.value));d=c;d=Jh(d,9375,9375);b=[];d=q(d);for(h=d.next();!h.done;h=d.next()){h=h.value;g=b.length;for(var k=0;k<g;k++)b[k].vh(h,b)&&(b.splice(k--,1),g--);b.push(h)}d=b;f.Hm=[];d=q(d);for(b=d.next();!b.done;b=d.next())h=[],Uh(b.value,h),Vh(h),f.Hm.push(h);b=c;b=Qh(b,1);b=Jh(b,9375,9375);b=Qh(b,0);f.rl=[];c=q(b);for(b=c.next();!b.done;b=c.next())d=
[],Uh(b.value,d),Vh(d),f.rl.push(d)}b=q(gg);for(f=b.next();!f.done;f=b.next())if(a=f.value,!(a.pa<=bi)){if(a.pa>ci+1)break;Ai(a);c=a;a=Bi(!1,Infinity,c.index,t.i.P.get("HandRail01"),qh);a.facing=0;a.Ia=2;f=c.style.jd;c=q(c.Om);for(d=c.next();!d.done;d=c.next())for(d=d.value,h=q(d),g=h.next();!g.done;g=h.next()){g=g.value;var l=[];k=(g.V-g.S)/2E5;for(var m=Math.round(k),n=.5*(k-m);.125>n;)--m,n+=.5;if(!(0>m))for(l.push({ob:.5,Ah:0,length:n}),l.push({ob:1,Ah:0,length:k-2*n}),l.push({ob:.5,Ah:1-n,length:n}),
k=0,m=new E(g.Ec(),g.Dc()),l=q(l),n=l.next();!n.done;n=l.next()){n=n.value;k+=2E5*n.length;var r=g.Nf(k,0),p=[];var v=new md(m.y,d.y,m.x);td(v,n.Ah,n.ob);sd(v,f);p.push(v);v=new md(r.y,d.y,r.x);td(v,n.Ah+n.length,n.ob);sd(v,f);p.push(v);v=new md(r.y,d.y+112500,r.x);td(v,n.Ah+n.length,n.ob-.5);sd(v,f);p.push(v);v=new md(m.y,d.y+112500,m.x);td(v,n.Ah,n.ob-.5);sd(v,f);p.push(v);a.ue.push(p);m=r}}}a=q(gg);for(f=a.next();!f.done;f=a.next())if(b=f.value,!(b.pa<=bi)){if(b.pa>ci+1)break;f=q(b);for(b=f.next();!b.done;b=
f.next())for(c=q(b.value.Ab),b=c.next();!b.done;b=c.next())b.value.Hj()}b=q(gg);for(f=b.next();!f.done;f=b.next())if(a=f.value,!(a.pa<=bi)){if(a.pa>ci+1)break;a=q(a.Gb);for(f=a.next();!f.done;f=a.next())f.value.stroke()}a=q(gg);for(f=a.next();!f.done;f=a.next())if(b=f.value,!(b.pa<=bi)){if(b.pa>ci+1)break;f=q(b);for(b=f.next();!b.done;b=f.next())for(c=q(b.value.Ab),b=c.next();!b.done;b=c.next())b.value.sk()}yi++}}
function ni(a,b){dh=Fh();var c=[];c.length=0;for(var d=q(a),f=d.next();!f.done;f=d.next()){var h=f.value,g=q(b);for(f=g.next();!f.done;f=g.next()){var k=f.value,l=[];if(h.T==k.T&&h.y!=k.y){if(h.jc){var m=void 0,n=q(h.jc);for(f=n.next();!f.done;f=n.next())f=f.value,f.target==k&&(m||(m=Ci(h)),l.push(Di(h,k,m,f.direction)))}if(k.jc)for(m=void 0,n=q(k.jc),f=n.next();!f.done;f=n.next())f=f.value,f.target==h&&(m||(m=Ci(k)),l.push(Di(k,h,m,f.direction)));h.jc||k.jc||(l.push(Ei(h,k)),l.push(Ei(k,h)),!Bh(2)&&
l.reverse());c=c.concat(l)}}}d=q(c);for(f=d.next();!f.done;f=d.next())for(f=f.value,Dh(f),h=q(f),f=h.next();!f.done;f=h.next())if(f=f.value,Fi(f))return f.wa.Ab.push(f),f;c.length=0;d=q(a);for(f=d.next();!f.done;f=d.next())for(h=f.value,g=q(b),f=g.next();!f.done;f=g.next())f=f.value,h.T!=f.T&&h.y==f.y&&(c=h.T.pa==f.T.pa&&h.T.Kb==f.T.Kb?c.concat(Gi(h,f)):c.concat(Hi(h,f,112500)));Dh(c);d=q(c);for(f=d.next();!f.done;f=d.next())if(f=f.value,Fi(f))return f.wa.Ab.push(f),f.Ya.Ab.push(f),f;c.length=0;a=
q(a);for(f=a.next();!f.done;f=a.next())for(d=f.value,h=q(b),f=h.next();!f.done;f=h.next())if(g=f.value,k=[],d.T!=g.T&&d.y!=g.y){if(d.jc)for(l=void 0,m=q(d.jc),f=m.next();!f.done;f=m.next())f=f.value,f.target==g&&(l||(l=Ci(d)),k.push(Di(d,g,l,f.direction)));if(g.jc)for(l=void 0,m=q(g.jc),f=m.next();!f.done;f=m.next())f=f.value,f.target==d&&(l||(l=Ci(g)),k.push(Di(g,d,l,f.direction)));d.jc||g.jc||(k.push(Ei(d,g)),k.push(Ei(g,d)),!Bh(2)&&k.reverse());c=c.concat(k)}b=q(c);for(f=b.next();!f.done;f=b.next())for(c=
f.value,Dh(c),c=q(c),f=c.next();!f.done;f=c.next())if(a=f.value,Fi(a)){a.wa.Ab.push(a);if(f=a.Dl)f=a,h=f.Dl,g=[],g.index=mi++,g.Ab=[],g.y=f.Ya.y,g.T=f.wa.T,g.T.push(g),h.platform=g,g.push(h),d=f.wa.slice(),Mh(f.wa,[h]),ii(),h=ni([g],[f.Ya]),h||(f.wa.length=0,f.wa.push.apply(f.wa,ba(d)),f.wa.T.pop(),mi--),f=!h;if(f)a.wa.Ab.pop();else return a}}
function oi(a,b){function c(y,x,A){-x.d<=y.S||-x.d>y.V||x.S>=y.d||x.V<y.d||(A=[(new Ii).raw(y.d,y.S,-x.d).rotate(A),(new Ji).raw(-x.d,-y.d,-x.S).rotate(A)],A.uh=y.source,A.xg=x.source,A.Na=A[0].V-A[0].S+(A[1].V-A[1].S),14E5>=A.Na&&Ra(h,A))}function d(y,x,A){y.d!=-x.d||-x.S<=y.S||-x.V>y.V||(A=[(new Ii).raw(y.d,y.S,-x.S).rotate(A)],A.uh=y.source,A.xg=x.source,A.Na=A[0].V-A[0].S,14E5>=A.Na&&Ra(h,A))}var f=Jh(Eh(),162500,162500),h=[];h.cmp=function(y,x){return y.Na<x.Na?-1:1};var g=[],k=[];a=q(a);for(var l=
a.next();!l.done;l=a.next())g=g.concat($h(l.value));b=q(b);for(a=b.next();!a.done;a=b.next())k=k.concat($h(a.value));b=[[],[],[],[]];a=[[],[],[],[]];for(l=0;4>l;l++){for(var m=Hh(f,l),n=q(g),r=n.next();!r.done;r=n.next()){var p=r.value;r=p.source.source;p=Ih(p.x,p.y,l);var v=p.y,B=p.x;p=Sh(p.x,p.y,m);p<=B||(v=new Ii(v,B,p),v.source=r,b[l].push(v))}n=q(k);for(r=n.next();!r.done;r=n.next())p=r.value,r=p.source.source,p=Ih(p.x,p.y,l),v=p.y,B=p.x,p=Sh(p.x,p.y,m),p<=B||(v=new Ii(v,B,p),v.source=r,a[l].push(v))}for(f=
1;4>f;f++){g=void 0;g=(f+1)%4;k=q(b[f]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=q(a[g]),r=m.next();!r.done;r=m.next())c(l,r.value,f,g);k=q(a[f]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=q(b[g]),r=m.next();!r.done;r=m.next())c(l,r.value,f,g);g=(f+2)%4;k=q(b[f]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=q(a[g]),r=m.next();!r.done;r=m.next())d(l,r.value,f,g)}for(b=0;b<h.length;b++){a=h[b];f=a[0];g=a[a.length-1];k=a.uh.platform;l=a.xg.platform;m=Math.min(k.y,l.y);r=Math.max(k.y,
l.y);if(f==g){if(n=25E3*(Math.floor((f.V-f.S-325E3)/5E4)-1),0>n&&(n=0),Math.abs(l.y-k.y)>n){h.splice(b--,1);continue}}else if(n=25E3*(Math.floor((f.V-f.S-325E3)/5E4)-1),0>n&&(n=0),m=Math.max(m,k.y-n),r=Math.min(r,k.y+n),n=25E3*(Math.floor((g.V-g.S-325E3)/5E4)-1),0>n&&(n=0),m=Math.max(m,l.y-n),r=Math.min(r,l.y+n),m>r){h.splice(b--,1);continue}a.y=Ch(m,r);a.jc=[];Math.abs(k.y-a.y)/25E3&&a.jc.push({direction:(f.vb()+2+3)%4,target:k});Math.abs(l.y-a.y)/25E3&&a.jc.push({direction:(g.vb()+3)%4,target:l});
a.jc.length||delete a.jc}for(b=0;4>b;b++){a=h[b];if(!a)break;g=a.uh.platform;k=a.xg.platform;f=[];ki.call(f);f.index=gg.length+hg;f.Kb=g.T.pa>k.T.pa?g.T.Kb:k.T.Kb;f.Kb.push(f);gg.push(f);0==f.index%5&&(f.ed=!0);f.style={};f.style.height=225E3;f.style.height+=5E4*Bh(4);f.style.jd=f.Kb.jd;f.ed?(f.style.Sc=Ch(wh,yh),f.style.Za=1E5):(f.style.Sc=Ch(uh,xh,zh),f.style.Za=f.Kb.Za);g=[];g.index=mi++;g.Ab=[];g.y=a.y;a.jc&&(g.jc=a.jc);g.T=f;f.push(g);k=q(a);for(l=k.next();!l.done;l=k.next())l=l.value.yh().expand(162500,
162500),l.platform=g,g.push(l);ii();k=k=void 0;if(g.y==a.xg.platform.y){if(k=ni([a.uh.platform],[g])){if(k=ni([g],[a.xg.platform]))return a;a.uh.platform.Ab.pop()}}else if(k=ni([g],[a.xg.platform])){if(k=ni([a.uh.platform],[g]))return a;a.xg.platform.Ab.pop()}gg.pop();f.Kb.pop()}return!1}
function Hi(a,b,c){a.$e=Ki(a,c);b.$e=Ki(b,c);var d=[],f=[],h=c+37500,g=Gh(a.$e,h,0),k=Gh(b.$e,-h,0);k=Nh(g,k);var l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=0;f=f.concat(k);g=Gh(a.$e,0,h);k=Gh(b.$e,0,-h);k=Nh(g,k);l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=1;f=f.concat(k);g=Gh(a.$e,-h,0);k=Gh(b.$e,h,0);k=Nh(g,k);l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=2;f=f.concat(k);g=Gh(a.$e,0,-h);h=Gh(b.$e,0,h);h=Nh(g,h);k=q(h);for(g=k.next();!g.done;g=k.next())g.value.direction=
3;f=f.concat(h);Dh(f);h=new Oh(-9375,9375,-c,c);f=q(f);for(g=f.next();!g.done;g=f.next()){g=g.value;k=h.Qg(g.direction);l=q([{z:g.J,x:g.w},{z:g.L-1,x:g.D-1}]);for(var m=l.next();!m.done;m=l.next())m=m.value,m=k.translate(m.z,m.x),m.y=a.y,m.direction=g.direction,d.push(new Li(m,c,a,b))}return d}function Ki(a,b){b+=37500;var c=Kh(a,new Oh(0,1,0,1));a=Qh(c,1);a=Kh(a,new Oh(-b,b,-b,b));Mh(c,a);return c}
function Gi(a,b){for(var c=[],d=q(a),f=d.next();!f.done;f=d.next())Uh(f.value,c);d=[];c=q(c);for(f=c.next();!f.done;f=c.next()){f=f.value;for(var h=q(b),g=h.next();!g.done;g=h.next())f.fi(g.value,d)}for(c=[];d.length;){f=d.pop();for(h=0;h<d.length;h++)g=d[h],f.vb()==g.vb()&&f.d==g.d&&(f.V==g.S?(d.splice(h,1),f.V=g.V,h=-1):f.S==g.V&&(d.splice(h,1),f.S=g.S,h=-1));225E3>f.V-f.S||c.push(f)}d=[];c=q(c);for(f=c.next();!f.done;f=c.next())d.push(new Mi(f.value,a,b));return d}
function li(){var a=T;if(!a.ed){for(var b=new Oh,c=q(a),d=c.next();!d.done;d=c.next()){var f=q(d.value);for(d=f.next();!d.done;d=f.next())Ph(b,d.value)}var h=b.L-b.J-2E5-2E5-30625-30625;d=b.D-b.w-2E5-2E5-30625-30625;c=Math.round(h/625E3);f=Math.round(d/625E3);h=b.J+2E5+30625+.5*(h-625E3*(c-1));b=b.w+2E5+30625+.5*(d-625E3*(f-1));var g=[],k=q(a);for(d=k.next();!d.done;d=k.next())g=g.concat(d.value);g=Qh(g,1);g=Jh(g,2E5,2E5);for(k=0;k<c;k++){for(var l=b,m={},n=0;n<f;m={Fi:m.Fi},n++){d=function(p){return function(){for(var v=
q(g),B=v.next();!B.done;B=v.next())if(Ni(p.Fi,B.value))return!1;return!0}}(m);m.Fi=new Oh(h-30625,h+30625,l-30625,l+30625);if(d()){var r=q(a);for(d=r.next();!d.done;d=r.next())Mh(d.value,[m.Fi])}l+=625E3}h+=625E3}}}function Ei(a,b){for(var c=Ci(a),d=[],f=0;4>f;f++)d=d.concat(Di(a,b,c,f));return d}
function Di(a,b,c,d){var f=25E3*Math.ceil(Math.abs(b.y-a.y)/25E3),h=a.T!=b.T?325E3:0,g=function(l,m,n){function r(y){for(var x=0;x<y.length;x++)for(var A=y[x],z=x+1;z<y.length;z++){var D=y[z];if(A.J==D.J&&A.L==D.L){if(D.D==A.w){y.splice(z--,1);A.w=D.w;x--;break}if(D.w==A.D){y.splice(z--,1);A.D=D.D;x--;break}}}y=q(y);for(x=y.next();!x.done;x=y.next())x=x.value,x.w=x.D-1,x.direction=d}var p=Qh(l,1);p=Kh(p,new Oh(-162499,162500,-f-h+1,f+162500+162500));l=p=Qh(p,0);p=Kh(n,new Oh(0,0,-f-h+1,f));p=Qh(p,
1);p=Kh(p,new Oh(-162500,162501,0,0));l=p=Nh(l,p);p=Qh(m,1);p=Kh(p,new Oh(-162499,162500,-162499,162500));p=Qh(p,0);n=[];m=Nh(l,Gh(p,0,-f-h-162500));r(m);for(var v=q(m),B=v.next();!B.done;B=v.next())B.value.type=1;n=n.concat(m);if(0!=h){m=Nh(l,Gh(p,-325E3,-f-162500));r(m);v=q(m);for(B=v.next();!B.done;B=v.next())B.value.type=0;n=n.concat(m);m=Nh(l,Gh(p,325E3,-f-162500));r(m);l=q(m);for(B=l.next();!B.done;B=l.next())B.value.type=2;n=n.concat(m)}return n}(Hh(a,d),Hh(b,d),Hh(c,d));c=[];g=q(g);for(var k=
g.next();!k.done;k=g.next())c.push(new Oi(k.value,f,h,a,b));return c}function Ci(a){for(var b=a.slice(),c=q(a.hg),d=c.next();!d.done;d=c.next())d=d.value,d=d.La.platform!=a?d.La.platform:d.ra.platform,d.T==a.T&&(b=b.concat(d));return b}
function ii(){for(var a=[],b=q(gg),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;d.hg=[];for(var f=q(d),h=f.next();!h.done;h=f.next())h.value.hg=[];a=a.concat(d)}}for(b=0;b<a.length;b++)for(c=a[b],d=b+1;d<a.length;d++)if(f=a[d],h=Pi(c,f))h.La=c,h.ra=f,c.hg.push(h),f.hg.push(h),c.platform!=f.platform&&(c.platform.hg.push(h),f.platform.hg.push(h))}
function ui(){dh=Fh();var a=q(gg),b=a.next();a:for(;!b.done;b=a.next())if(b=b.value,!b.yn){b.yn=!0;b=q(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=q(c.hg),f=d.next();!f.done;f=d.next())if(f=f.value,f=f.La.platform!=c?f.La.platform:f.ra.platform,c.T.pa==f.T.pa&&!(c.index<=f.index)&&c.T!=f.T){var h=Hi(c,f,87500);Dh(h);h=q(h);for(var g=h.next();!g.done;g=h.next())if(g=g.value,Fi(g)){g.Yc=!0;c.Ab.push(g);f.Ab.push(g);continue a}}}}}
function ki(){this.pa=ai+1;this.Om=[];this.Gb=[];this.yb=[];this.bound=new Td;this.ta=-Infinity;this.floor=Infinity;this.o=-Infinity;this.ja={};this.ja.qa=-2147483648;this.ja.lb=new w(1,1,1);this.kd=0;this.ac=new w;this.cells=new bb(lb)}var mi=0;
function Li(a,b,c,d){this.Ua=a;this.direction=a.direction;this.a=b;this.wa=c;this.Ya=d;this.z=.5*a.J+.5*a.L;this.x=.5*a.w+.5*a.D;this.y=Math.max(c.y,d.y);this.oc=[];this.wg=[];this.Ld=[];this.ce=[];this.Gb=[];c=new Oh(a.J,a.L,a.w,a.D);c.o=a.y;c.F=c.o+225E3;this.Ld.push(c);this.wg.push(c);b=new Oh(2*-b,2*b,-b,b);b=b.rotate(this.direction);b=b.translate(this.z,this.x);b.F=a.y;b.o=b.F-18750;this.Ld.push(b);b=new Oh(b.J,b.L,b.w,b.D);b.o=a.y;b.F=b.o+225E3;this.ce.push(b)}e=Li.prototype;e.Ok=function(){Wg.tm.push(this.Ua)};
e.translate=function(a,b){this.z+=a;this.x+=b};
e.Hj=function(){if(!this.Gb.length){this.xd=0;var a=new Ii(0,0,1);a=a.rotate(this.direction);this.Ca=new Fc(a.Ec()+this.z,a.Dc()+this.x,a.ec()+this.z,a.dc()+this.x);a=new Qi;a.add=!0;a.Za=0;a.color=lh;this.Yc?(a.o=this.y+87500,a.F=a.o+125E3):(a.o=this.y,a.F=this.y+225E3);for(var b=[new E(0,-this.a),new E(0,this.a),new E(-9375,this.a),new E(-9375,-this.a)],c=[new E(0,this.a),new E(0,-this.a),new E(9375,-this.a),new E(9375,this.a)],d=0;d<b.length;d++)b[d]=this.Ca.ub(b[d].x,b[d].y);for(d=0;d<c.length;d++)c[d]=
this.Ca.ub(c[d].x,c[d].y);a.Y=this.wa.T.index;Ri(a,b);this.Gb.push(a);a=a.X();a.Y=this.Ya.T.index;Ri(a,c);this.Gb.push(a);this.Ic=new eg(new Fc(b[0].x,b[0].y,b[1].x,b[1].y),a.o,a.F);this.ad=new eg(new Fc(c[0].x,c[0].y,c[1].x,c[1].y),a.o,a.F);this.Ic.Gc=this.ad;this.ad.Gc=this.Ic;this.Ic.Y=this.wa.T.index;this.ad.Y=this.Ya.T.index;this.Ic.Yc=this.Yc;this.ad.Yc=this.Yc}};
e.sk=function(){if(0==this.xd){for(var a=q(this.Gb),b=a.next();!b.done;b=a.next())b.value.stroke();this.xd=1}1!=this.xd||this.wa.T.pa>ci+1||this.Ya.T.pa>ci+1||(this.wa.T.yb.push(this.Ic),this.Ya.T.yb.push(this.ad),this.xd=2)};e.create=function(){if(this.Vj)this.Vj.update();else if(0<this.xd)if(this.Yc)this.Vj=new Si(this.Ca,this.y+87500,this.wa.T,this.Ya.T);else if(this.wa.T.pa!=this.Ya.T.pa||this.wa.T.ed!=this.Ya.T.ed)this.Vj=new Ti(this.Ca,this.y,this.Ic,this.ad,this.wa.T,this.Ya.T)};
e.Nj=function(){if(!this.tg){for(var a=q(this.Gb),b=a.next();!b.done;b=a.next())zi(b.value);this.tg=!0}};function qi(a){zb(a.wa.Ab,a);zb(a.Ya.Ab,a)}e.Lj=function(){if(this.Yc){var a=this.y+87500;var b=a+125E3}else a=this.y,b=this.y+225E3;this.wa.T.ta=Math.max(this.wa.T.ta,b);this.Ya.T.ta=Math.max(this.Ya.T.ta,b);this.wa.T.o=Math.min(this.wa.T.o,a);this.Ya.T.o=Math.min(this.Ya.T.o,a)};
function Mi(a,b,c){var d=.5*(a.V-a.S)-9375,f=a.yh();this.direction=(a.vb()+3)%4;this.a=d;this.Ua=f;this.wa=b;this.Ya=c;this.z=.5*f.J+.5*f.L;this.x=.5*f.w+.5*f.D;this.y=Math.max(b.y,c.y);f.y=this.y;this.oc=[];this.wg=[];this.Ld=[];this.ce=[];this.Gb=[];a=new Oh(f.J,f.L,f.w,f.D);a.o=f.y;a.F=a.o+225E3;this.Ld.push(a);this.wg.push(a);d=new Oh(-225E3,225E3,-d,d);d=d.rotate(this.direction);d=d.translate(this.z,this.x);d.F=f.y;d.o=d.F-18750;this.Ld.push(d);d=new Oh(d.J,d.L,d.w,d.D);d.o=f.y;d.F=d.o+225E3;
this.ce.push(d)}e=Mi.prototype;e.Ok=function(){Wg.tm.push(this.Ua)};e.translate=function(a,b){this.z+=a;this.x+=b};
e.Hj=function(){if(!this.Gb.length){this.xd=0;var a=new Ii(0,0,1);a=a.rotate(this.direction);this.Ca=new Fc(a.Ec()+this.z,a.Dc()+this.x,a.ec()+this.z,a.dc()+this.x);a=new Qi;a.add=!0;a.Za=0;a.color=lh;this.Yc?(a.o=this.y+87500,a.F=a.o+125E3):(a.o=this.y,a.F=Math.min(this.wa.T.ta,this.Ya.T.ta));for(var b=[new E(0,-this.a),new E(0,this.a),new E(-9375,this.a),new E(-9375,-this.a)],c=[new E(0,this.a),new E(0,-this.a),new E(9375,-this.a),new E(9375,this.a)],d=0;d<b.length;d++)b[d]=this.Ca.ub(b[d].x,b[d].y);
for(d=0;d<c.length;d++)c[d]=this.Ca.ub(c[d].x,c[d].y);a.Y=this.wa.T.index;Ri(a,b);this.Gb.push(a);a=a.X();a.Y=this.Ya.T.index;Ri(a,c);this.Gb.push(a);this.Ic=new eg(new Fc(b[0].x,b[0].y,b[1].x,b[1].y),a.o,a.F);this.ad=new eg(new Fc(c[0].x,c[0].y,c[1].x,c[1].y),a.o,a.F);this.Ic.Gc=this.ad;this.ad.Gc=this.Ic;this.Ic.Y=this.wa.T.index;this.ad.Y=this.Ya.T.index;this.Ic.Yc=this.Yc;this.ad.Yc=this.Yc}};
e.sk=function(){if(0==this.xd){for(var a=q(this.Gb),b=a.next();!b.done;b=a.next())b.value.stroke();this.xd=1}1!=this.xd||this.wa.T.pa>ci+1||this.Ya.T.pa>ci+1||(this.wa.T.yb.push(this.Ic),this.Ya.T.yb.push(this.ad),this.xd=2)};e.create=function(){};e.Nj=function(){if(!this.tg){for(var a=q(this.Gb),b=a.next();!b.done;b=a.next())zi(b.value);this.tg=!0}};e.Lj=function(){};
function Oi(a,b,c,d,f){this.Ua=a;this.direction=a.direction;this.type=a.type;this.Vb=162500;this.ye=b;this.wa=d;this.Ya=f;var h=Math.min(d.y,f.y),g=Math.max(d.y,f.y);this.oc=[];this.wg=[];this.Ld=[];this.ce=[];this.Gb=[];var k=new Oh(-162500,162500,-b,b);k=k.translate(a.J,a.w);k=k.rotate(this.direction);k.o=h-18750;k.F=g;this.oc.push(k);this.wg.push(k);k=new Oh(k.J,k.L,k.w,k.D);k.o=h;k.F=g+2E5;this.ce.push(k);k=new Oh(-162500,162500,-b-162500-162500,-b);k=k.translate(a.J,a.w);k=k.rotate(this.direction);
k.o=d.y;k.F=g+2E5;this.ce.push(k);k=new Oh(k.J,k.L,k.w,k.D);k.o=h-18750;k.F=d.y;this.oc.push(k);this.Ld.push(k);if(c){d=new Oh(-162500,162500,b,b+c);d=d.translate(a.J,a.w);d=d.rotate(this.direction);d.o=f.y;d.F=g+2E5;this.ce.push(d);d=new Oh(d.J,d.L,d.w,d.D);d.o=h-18750;d.F=f.y;this.oc.push(d);this.Ld.push(d);this.Dl=d;var l;0==this.type?l=new Oh(162500,487500,b,b+c):1==this.type?l=new Oh(-162500,162500,b+c,b+c+325E3):2==this.type&&(l=new Oh(-487500,-162500,b,b+c));l=l.translate(a.J,a.w);l=l.rotate(this.direction);
l.o=f.y;l.F=g+2E5;this.ce.push(l);l=new Oh(l.J,l.L,l.w,l.D);l.o=h-18750;l.F=f.y;this.oc.push(l);this.Ld.push(l)}else b=new Oh(-162500,162500,b,b+162500),b=b.translate(a.J,a.w),b=b.rotate(this.direction),b.o=f.y,b.F=g+2E5,this.ce.push(b),b=new Oh(b.J,b.L,b.w,b.D),b.o=h-18750,b.F=f.y,this.oc.push(b),this.Ld.push(b)}e=Oi.prototype;
e.Ok=function(){var a=(this.Ya.y-this.wa.y)/25E3;if(this.Ya.y>this.wa.y)for(var b=0;b<=a;b++){var c=new Ii(this.Ua.w-this.ye+5E4*b,this.Ua.J-this.Vb,this.Ua.J+this.Vb);c=c.rotate(this.direction);c.y=this.wa.y+25E3*b;Wg.jn.push(c)}else for(a=-a,b=0;b<=a;b++)c=new Ii(this.Ua.w-this.ye+5E4*b,this.Ua.J-this.Vb,this.Ua.J+this.Vb),c=c.rotate(this.direction),c.y=this.wa.y-25E3*b,Wg.jn.push(c)};
e.translate=function(a,b){this.z+=a;this.x+=b;this.Ua=this.Ua.rotate(this.direction);this.Ua.J+=a;this.Ua.L+=a;this.Ua.w+=b;this.Ua.D+=b;this.Ua=this.Ua.Qg(this.direction);this.oc[0].J+=a;this.oc[0].L+=a;this.oc[0].w+=b;this.oc[0].D+=b};
e.Hj=function(){if(!this.Gb.length){this.xd=0;var a=this.wa.T,b=(this.Ya.y-this.wa.y)/25E3,c=function(h){return 1!=h.Ri?!1:!0};if(this.Ya.y>this.wa.y)for(c=0;c<b;c++){var d=new Oh(this.Ua.J-this.Vb,this.Ua.J+this.Vb,this.Ua.w-this.ye+5E4*c,this.Ua.w-this.ye+5E4*(c+1));d=d.rotate(this.direction);d=[new E(d.J,d.w),new E(d.L,d.w),new E(d.L,d.D),new E(d.J,d.D)];a=new Qi;a.add=!1;a.Y=this.wa.T.index;a.Za=0;a.color=lh;a.o=this.wa.y;a.F=this.wa.y+25E3*(c+1);Ri(a,d);this.Gb.push(a)}else for(b=-b,d=new Qi,
d.add=!0,d.Ri=1,d.Y=this.wa.T.index,d.gi=c,d.Sc=a.style.Sc,d.Za=a.style.Za,d.cg=a.o,d.color=a.style.jd,d.o=this.Ya.y,d.F=this.wa.y,a=this.oc[0],Ri(d,[new E(a.J,a.w),new E(a.L,a.w),new E(a.L,a.D),new E(a.J,a.D)]),this.Gb.push(d),d=0;d<b;d++){a=new Oh(this.Ua.J-this.Vb,this.Ua.J+this.Vb,this.Ua.w-this.ye+5E4*d,this.Ua.w-this.ye+5E4*(d+1));a=a.rotate(this.direction);a=[new E(a.J,a.w),new E(a.L,a.w),new E(a.L,a.D),new E(a.J,a.D)];var f=new Qi;f.add=!1;f.Y=this.wa.T.index;f.gi=c;f.Za=0;f.color=lh;f.o=
this.Ya.y;f.F=this.wa.y-25E3*d;Ri(f,a);this.Gb.push(f)}}};e.sk=function(){if(0==this.xd){for(var a=q(this.Gb),b=a.next();!b.done;b=a.next())b.value.stroke();this.xd=2}};e.create=function(){};e.Nj=function(){if(!this.tg){for(var a=q(this.Gb),b=a.next();!b.done;b=a.next())zi(b.value);this.tg=!0}};e.Lj=function(){this.wa.T.o=Math.min(this.wa.T.o,this.Ya.y);this.Ya.T.o=Math.min(this.Ya.T.o,this.wa.y)};
function Ui(a,b){for(var c=q(a.Ld),d=c.next();!d.done;d=c.next()){var f=d.value,h=q(b.wg);for(d=h.next();!d.done;d=h.next())if(Vi(f,d.value))return!1}c=q(a.wg);for(d=c.next();!d.done;d=c.next())for(f=d.value,h=q(b.Ld),d=h.next();!d.done;d=h.next())if(Vi(f,d.value))return!1;c=q(a.ce);for(d=c.next();!d.done;d=c.next())for(f=d.value,h=q(b.oc),d=h.next();!d.done;d=h.next())if(Vi(f,d.value))return!1;a=q(a.oc);for(d=a.next();!d.done;d=a.next())for(c=d.value,f=q(b.ce),d=f.next();!d.done;d=f.next())if(Vi(c,
d.value))return!1;return!0}function Fi(a){for(var b=q(dh),c=b.next();!c.done;c=b.next())if(!Ui(a,c.value))return!1;return!0}
function Ai(a){function b(k){return k.add&&k.Y==this.Y?!0:!1}0>a.style.Za&&(a.style.Za+=a.ta-a.floor);for(var c=q(a.rl),d=c.next();!d.done;d=c.next()){d=d.value;var f=new Qi;f.add=!0;f.Ri=1;f.Y=a.index;f.Za=a.style.Za;f.color=a.style.jd;f.Sc=a.style.Sc;f.cg=a.o;f.o=a.o;f.F=a.ta;Ri(f,ad(d));a.Gb.push(f);a.ed&&(f.ta=null)}if(a.Im)for(c=q(a.Im),d=c.next();!d.done;d=c.next())d=d.value,f=new Qi,f.add=!0,f.Ri=1,f.Y=a.index,f.Za=a.style.Za,f.color=a.style.jd,f.Sc=a.style.Sc,f.cg=a.o,f.o=a.o,f.F=a.ta,Ri(f,
ad(d)),a.Gb.push(f);c=q(a);for(d=c.next();!d.done;d=c.next())if(f=d.value,!(f.y<=a.o)){var h=q(f.ql);for(d=h.next();!d.done;d=h.next()){d=d.value;var g=new Qi;g.add=!1;g.Ri=1;g.Y=a.index;g.gi=b;g.Za=a.style.Za;g.color=a.style.jd;g.Sc=a.style.Sc;g.cg=a.floor;g.o=a.o;g.F=f.y;Ri(g,ad(d));a.Gb.push(g)}}};function Oh(a,b,c,d){a=void 0===a?NaN:a;b=void 0===b?NaN:b;c=void 0===c?NaN:c;d=void 0===d?NaN:d;this.J=a;this.L=b;this.w=c;this.D=d}e=Oh.prototype;e.Kf=function(a,b){return a<=this.J||a>=this.L||b<=this.w||b>=this.D?!1:!0};e.Ig=function(a,b){a<this.J?a=this.J:a>this.L&&(a=this.L);b<this.w?b=this.w:b>this.D&&(b=this.D);return new E(a,b)};function Wi(a,b,c){var d=0;b<a.J?d+=a.J-b:b>a.L&&(d+=b-a.L);c<a.w?d+=a.w-c:c>a.D&&(d+=c-a.D);return d}
function Xh(a,b,c){b>=a.J||(a.J=b);b<=a.L||(a.L=b);c>=a.w||(a.w=c);c<=a.D||(a.D=c)}function Ph(a,b){b.J>=a.J||(a.J=b.J);b.L<=a.L||(a.L=b.L);b.w>=a.w||(a.w=b.w);b.D<=a.D||(a.D=b.D)}e.vc=function(a,b){a-=.5*this.L+.5*this.J;b-=.5*this.D+.5*this.w;return 1E5/Math.sqrt(a*a+b*b)};e.expand=function(a,b){return this.X(this.J-a,this.L+a,this.w-b,this.D+b)};
function Uh(a,b){var c=new Ii(a.w,a.J,a.L);c.source=a;b.push(c);c=new Xi(a.L,a.w,a.D);c.source=a;b.push(c);c=new Yi(a.D,a.L,a.J);c.source=a;b.push(c);c=new Ji(a.J,a.D,a.w);c.source=a;b.push(c)}
function wi(a,b,c,d,f){var h=new Oh(a.L+b+d,a.L+b+d,Math.min(a.w+c,a.D-c)-d,Math.max(a.w+c,a.D-c)+d);h.L+=1;h.D+=1;f.push(h);h=new Oh(Math.min(a.J+b,a.L-b)-d,Math.max(a.J+b,a.L-b)+d,a.D+c,a.D+c+d);h.L+=1;h.D+=1;f.push(h);h=new Oh(a.J-b-d,a.J-b-d,Math.min(a.w+c,a.D-c)-d,Math.max(a.w+c,a.D-c)+d);h.L+=1;h.D+=1;f.push(h);h=new Oh(Math.min(a.J+b,a.L-b)-d,Math.max(a.J+b,a.L-b)+d,a.w-c-d,a.w-c-d);h.L+=1;h.D+=1;f.push(h)}
e.X=function(a,b,c,d){a=new Oh(a,b,c,d);this.Yk&&(a.Yk=this.Yk);this.platform&&(a.platform=this.platform);this.T&&(a.T=this.T);void 0!==this.direction&&(a.direction=this.direction);void 0!==this.type&&(a.type=this.type);return a};
e.vh=function(a,b){if(!Ni(this,a))return!1;var c=this.w,d=this.D;this.D>a.D&&(b.push(this.X(this.J,this.L,a.D,this.D)),d=a.D);this.w<a.w&&(b.push(this.X(this.J,this.L,this.w,a.w)),c=a.w);this.L>a.L&&b.push(this.X(a.L,this.L,c,d));this.J<a.J&&b.push(this.X(this.J,a.J,c,d));return!0};e.fi=function(a,b){a=this.X(Math.max(this.J,a.J),Math.min(this.L,a.L),Math.max(this.w,a.w),Math.min(this.D,a.D));a.L<=a.J||a.D<=a.w||b.push(a)};function Lh(a,b){return a.X(a.J+b.J,a.L+b.L,a.w+b.w,a.D+b.D)}
e.rotate=function(a){switch(a){case 0:return this.X(this.J,this.L,this.w,this.D);case 1:return this.X(-this.D,-this.w,this.J,this.L);case 2:return this.X(-this.L,-this.J,-this.D,-this.w);case 3:return this.X(this.w,this.D,-this.L,-this.J)}};e.Qg=function(a){return this.rotate((4-a)%4)};e.translate=function(a,b){return this.X(this.J+a,this.L+a,this.w+b,this.D+b)};function Pi(a,b){a=new Oh(Math.max(a.J,b.J),Math.min(a.L,b.L),Math.max(a.w,b.w),Math.min(a.D,b.D));return a.L<a.J||a.D<a.w?null:a}
function Ni(a,b){return a.J>=b.L||a.L<=b.J||a.w>=b.D||a.D<=b.w?!1:!0}function Vi(a,b){return!Ni(a,b)||a.o>=b.F||a.F<=b.o?!1:!0}function xi(a,b,c){var d=0;a=q(a);for(var f=a.next();!f.done;f=a.next())d+=f.value.vc(b,c);return d}function Ii(a,b,c){this.d=a;this.S=b;this.V=c}function Xi(a,b,c){this.d=-a;this.S=b;this.V=c}function Yi(a,b,c){this.d=-a;this.S=-b;this.V=-c}function Ji(a,b,c){this.d=a;this.S=-b;this.V=-c}e=Ii.prototype;e.vb=function(){return 0};e.Ec=function(){return this.S};e.Dc=function(){return this.d};
e.ec=function(){return this.V};e.dc=function(){return this.d};e.raw=function(a,b,c){this.d=a;this.S=b;this.V=c;return this};e.qg=function(){return new Fc(this.Ec(),this.Dc(),this.ec(),this.dc())};e.X=function(a,b,c){a=new Ii(a,b,c);a.source=this.source;return a};e.Ti=function(a,b,c){if(!this.zi){var d=new E(this.S+a,this.d-b);d.source=this;c.push(d)}this.Uh||(a=new E(this.V-a,this.d-b),a.source=this,c.push(a))};e.Nf=function(a,b){return new E(this.S+a,this.d+b)};
e.Kf=function(a,b){return b>this.d||b<this.d||a<this.S||a>=this.V?!1:!0};e.Ig=function(a){return a<this.S?new E(this.S,this.d):a>this.V?new E(this.V,this.d):new E(a,this.d)};e.vh=function(a,b){if(this.d>a.D||this.d<=a.w||this.S>=a.L||this.V<=a.J)return!1;this.S<a.J&&b.push(this.X(this.d,this.S,a.J));this.V>a.L&&b.push(this.X(this.d,a.L,this.V));return!0};e.fi=function(a,b){this.d>a.D||this.d<=a.w||this.S>=a.L||this.V<=a.J||b.push(this.X(this.d,Math.max(this.S,a.J),Math.min(this.V,a.L)))};
e.yh=function(){return new Oh(this.S,this.V,this.d,this.d)};e.rotate=function(a){switch(a){case 0:return(new Ii).raw(this.d,this.S,this.V);case 1:return(new Xi).raw(this.d,this.S,this.V);case 2:return(new Yi).raw(this.d,this.S,this.V);case 3:return(new Ji).raw(this.d,this.S,this.V)}};e.Qg=function(a){return this.rotate((4-a)%4)};e.translate=function(a,b){return(new Ii).raw(this.d+b,this.S+a,this.V+a)};e=Xi.prototype;e.vb=function(){return 1};e.Ec=function(){return-this.d};e.Dc=function(){return this.S};
e.ec=function(){return-this.d};e.dc=function(){return this.V};e.raw=Ii.prototype.raw;e.qg=Ii.prototype.qg;e.X=function(a,b,c){a=new Xi(-a,b,c);a.source=this.source;return a};e.Ti=function(a,b,c){if(!this.zi){var d=new E(-this.d+a,this.S+b);d.source=this;c.push(d)}this.Uh||(a=new E(-this.d+a,this.V-b),a.source=this,c.push(a))};e.Nf=function(a,b){return new E(-this.d-b,this.S+a)};e.Kf=function(a,b){return a>-this.d||a<-this.d||b<this.S||b>=this.V?!1:!0};
e.Ig=function(a,b){return b<this.S?new E(-this.d,this.S):b>this.V?new E(-this.d,this.V):new E(-this.d,b)};e.vh=function(a,b){if(-this.d>=a.L||-this.d<a.J||this.S>=a.D||this.V<=a.w)return!1;this.S<a.w&&b.push(this.X(this.d,this.S,a.w));this.V>a.D&&b.push(this.X(this.d,a.D,this.V));return!0};e.fi=function(a,b){-this.d>=a.L||-this.d<a.J||this.S>=a.D||this.V<=a.w||b.push(this.X(this.d,Math.max(this.S,a.w),Math.min(this.V,a.D)))};e.yh=function(){return new Oh(-this.d,-this.d,this.S,this.V)};
e.rotate=function(a){switch(a){case 0:return(new Xi).raw(this.d,this.S,this.V);case 1:return(new Yi).raw(this.d,this.S,this.V);case 2:return(new Ji).raw(this.d,this.S,this.V);case 3:return(new Ii).raw(this.d,this.S,this.V)}};e.Qg=function(a){return this.rotate((4-a)%4)};e.translate=function(a,b){return(new Xi).raw(this.d-a,this.S+b,this.V+b)};e=Yi.prototype;e.vb=function(){return 2};e.Ec=function(){return-this.S};e.Dc=function(){return-this.d};e.ec=function(){return-this.V};e.dc=function(){return-this.d};
e.raw=Ii.prototype.raw;e.qg=Ii.prototype.qg;e.X=function(a,b,c){a=new Yi(-a,-b,-c);a.source=this.source;return a};e.Ti=function(a,b,c){if(!this.zi){var d=new E(-this.S-a,-this.d+b);d.source=this;c.push(d)}this.Uh||(a=new E(-this.V+a,-this.d+b),a.source=this,c.push(a))};e.Nf=function(a,b){return new E(-this.S-a,-this.d-b)};e.Kf=function(a,b){return b>-this.d||b<-this.d||a>-this.S||a<=-this.V?!1:!0};e.Ig=function(a){return a<-this.V?new E(-this.V,-this.d):a>-this.S?new E(-this.S,-this.d):new E(a,-this.d)};
e.vh=function(a,b){if(-this.d>=a.D||-this.d<a.w||-this.V>=a.L||-this.S<=a.J)return!1;-this.V<a.J&&b.push(this.X(this.d,-a.J,this.V));-this.S>a.L&&b.push(this.X(this.d,this.S,-a.L));return!0};e.fi=function(a,b){-this.d>=a.D||-this.d<a.w||-this.V>=a.L||-this.S<=a.J||b.push(this.X(this.d,Math.max(this.S,-a.L),Math.min(this.V,-a.J)))};e.yh=function(){return new Oh(-this.V,-this.S,-this.d,-this.d)};
e.rotate=function(a){switch(a){case 0:return(new Yi).raw(this.d,this.S,this.V);case 1:return(new Ji).raw(this.d,this.S,this.V);case 2:return(new Ii).raw(this.d,this.S,this.V);case 3:return(new Xi).raw(this.d,this.S,this.V)}};e.Qg=function(a){return this.rotate((4-a)%4)};e.translate=function(a,b){return(new Yi).raw(this.d-b,this.S-a,this.V-a)};e=Ji.prototype;e.vb=function(){return 3};e.Ec=function(){return this.d};e.Dc=function(){return-this.S};e.ec=function(){return this.d};e.dc=function(){return-this.V};
e.raw=Ii.prototype.raw;e.qg=Ii.prototype.qg;e.X=function(a,b,c){a=new Ji(a,-b,-c);a.source=this.source;return a};e.Ti=function(a,b,c){if(!this.zi){var d=new E(this.d-a,-this.S-b);d.source=this;c.push(d)}this.Uh||(a=new E(this.d-a,-this.V+b),a.source=this,c.push(a))};e.Nf=function(a,b){return new E(this.d+b,-this.S-a)};e.Kf=function(a,b){return a>this.d||a<this.d||b>-this.S||b<=-this.V?!1:!0};e.Ig=function(a,b){return b<-this.V?new E(this.d,-this.V):b>-this.S?new E(this.d,-this.S):new E(this.d,b)};
e.vh=function(a,b){if(this.d>a.L||this.d<=a.J||-this.V>=a.D||-this.S<=a.w)return!1;-this.V<a.w&&b.push(this.X(this.d,-a.w,this.V));-this.S>a.D&&b.push(this.X(this.d,this.S,-a.D));return!0};e.fi=function(a,b){this.d>a.L||this.d<=a.J||-this.V>=a.D||-this.S<=a.w||b.push(this.X(this.d,Math.max(this.S,-a.D),Math.min(this.V,-a.w)))};e.yh=function(){return new Oh(this.d,this.d,-this.V,-this.S)};
e.rotate=function(a){switch(a){case 0:return(new Ji).raw(this.d,this.S,this.V);case 1:return(new Ii).raw(this.d,this.S,this.V);case 2:return(new Xi).raw(this.d,this.S,this.V);case 3:return(new Yi).raw(this.d,this.S,this.V)}};e.Qg=function(a){return this.rotate((4-a)%4)};e.translate=function(a,b){return(new Ji).raw(this.d+a,this.S-b,this.V-b)};
function Zi(a,b){function c(){for(var n=new bb(Gc),r=q(a),p=r.next();!p.done;p=r.next())p=p.value,n.add(p),n.add(p.ea);r=q(a);for(p=r.next();!p.done;p=r.next())if(p=p.value,!p.remove){var v=n.get(p);v!=p&&(p.replace([v]),p.ea.replace([v.ea]))}return n.elements}function d(){for(var n=q(m),r=n.next();!r.done;r=n.next()){r=r.value;var p=r.x&-524288,v=r.y&-524288,B=!1;r.x<=p+256?(r.x=p,B=!0):r.x>=p+524288-256&&(r.x=p+524288,B=!0);r.y<=v+256?(r.y=v,B=!0):r.y>=v+524288-256&&(r.y=v+524288,B=!0);if(B){v=
q(r.inputs);for(p=v.next();!p.done;p=v.next())p.value.Oh=!0;r=q(r.outputs);for(p=r.next();!p.done;p=r.next())p.value.Oh=!0}}}function f(n,r,p){var v=Jc(r,n.m,n.l),B=Jc(r,n.K,n.H),y=Jc(n,r.m,r.l),x=Jc(n,r.K,r.H);if(-256>y&&256<x&&(-256>v&&256<B||256<v&&-256>B)||256<y&&-256>x&&(-256>v&&256<B||256<v&&-256>B)){v/=v-B;B=1-v;x=new E(Math.round(n.m*B+n.K*v),Math.round(n.l*B+n.H*v));v=n.hb(n.m,n.l,x.x,x.y);B=n.hb(x.x,x.y,n.K,n.H);y=r.hb(r.m,r.l,x.x,x.y);x=r.hb(x.x,x.y,r.K,r.H);var A=Zc(v),z=Zc(B),D=Zc(y),
I=Zc(x);n.replace([v,B]);n.ea.replace([z,A]);r.replace([y,x]);r.ea.replace([I,D]);p.push(v,B,y,x);p.push(A,z,D,I);n=!0}else n=!1;return n}function h(n,r){if(!n.remove){for(var p=q(m),v=p.next();!v.done;v=p.next())if(v=v.value,v.x!=n.m||v.y!=n.l)if(v.x!=n.K||v.y!=n.H){var B=n.Nf(v.x,v.y);if(!(0>=B.x||B.x>=n.length||-256>B.y||256<B.y)){p=n.hb(n.m,n.l,v.x,v.y);v=n.hb(v.x,v.y,n.K,n.H);B=n.hb(p.K,p.H,p.m,p.l);var y=n.hb(v.K,v.H,v.m,v.l);p.ea=B;B.ea=p;v.ea=y;y.ea=v;n.replace([p,v]);n.ea.replace([y,B]);
h(p,r);h(v,r);h(B,r);h(y,r);return}}r.push(n)}}for(var g=[],k=q(a),l=k.next();!l.done;l=k.next())l=l.value,l.remove||g.push(l);a=g;a=c();b&&(a=$i(null,a,f));var m=new bb(vd);b=q(a);for(l=b.next();!l.done;l=b.next())g=l.value,k=new E(g.m,g.l),k.inputs=[],k.outputs=[],k.a=1,g.La=m.Oa(k),g.La.outputs.push(g),g.La.a++,k=new E(g.K,g.H),k.inputs=[],k.outputs=[],k.a=1,g.ra=m.Oa(k),g.ra.inputs.push(g),g.ra.a++;m=m.elements;d();m=$i(null,m,function(n,r,p){if(256>(Math.abs(r.x-n.x)+Math.abs(r.y-n.y))*Math.SQRT1_2){var v=
new E(n.x*n.a+r.x*r.a,n.y*n.a+r.y*r.a);v.a=n.a+r.a;v.x/=v.a;v.y/=v.a;v.round();v.inputs=n.inputs.concat(r.inputs);v.outputs=n.outputs.concat(r.outputs);n=q(v.inputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.ra=v,r.Oh=!0;n=q(v.outputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.La=v,r.Oh=!0;p.push(v);p=!0}else p=!1;return p});d();for(b=0;b<a.length;b++)g=a[b],g.remove?a.splice(b--,1):g.La==g.ra?(g.replace([]),g.ea.replace([]),a.splice(b--,1)):g.Oh&&(k=g.hb(g.La.x,g.La.y,g.ra.x,g.ra.y),l=Zc(k),
g.replace([k]),g.ea.replace([l]),a.splice(b++,1,k,l)),delete g.La,delete g.ra,delete g.Oh;(function(){for(var n=[],r=q(a),p=r.next();!p.done;p=r.next())h(p.value,n);a=n})();return a=c()}
function $i(a,b,c){var d=[];if(a)for(var f=0;f<a.length;f++){var h=a[f];if(h.remove)a.splice(f--,1);else for(var g=0;g<b.length;g++){var k=b[g];if(k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);a.splice(f--,1);break}}}for(f=0;f<b.length;f++)if(h=b[f],h.remove)b.splice(f--,1);else for(g=f+1;g<b.length;g++)if(k=b[g],k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);b.splice(f--,1);break}a&&(b=a.concat(b));return d.length?$i(b,d,c):b};var aj,bj,cj,dj,ej,fj=0;
function gj(){function a(c){function d(x,A,z){return Ih(A,z,x.vb()).y>=x.d}function f(x){x.Na=0;var A=x.m,z=x.l;if(1==x.action)if(x.Cb.length){var D=x.Cb[0],I=D.Ec()-A;D=D.Dc()-z;x.Na+=Math.sqrt(I*I+D*D);I=q(x.Cb);for(D=I.next();!D.done;D=I.next())z=D.value,x.Na+=z.V-z.S,A=z.ec(),z=z.dc()}else I=x.$.ec(),D=x.$.dc(),A=I-A,z=D-z,x.Na+=Math.sqrt(A*A+z*z),A=I,z=D;else if(2==x.action)if(x.Cb.length)for(D=x.Cb[0],I=D.ec()-A,D=D.dc()-z,x.Na+=Math.sqrt(I*I+D*D),I=q(x.Cb),D=I.next();!D.done;D=I.next())z=D.value,
x.Na+=z.V-z.S,A=z.Ec(),z=z.Dc();else I=x.$.ec(),D=x.$.dc(),A=I-A,z=D-z,x.Na+=Math.sqrt(A*A+z*z),A=I,z=D;A=x.K-A;z=x.H-z;x.Na+=Math.sqrt(A*A+z*z)}function h(x){x.yc=0;for(var A=q(x),z=A.next();!z.done;z=A.next())z=z.value,x.yc=z.complete?x.yc+.5*z.Na:x.yc+z.Na}for(var g=null,k=0,l=0;l<c.length;l++)if(!c[l].complete){k=l;g=c[l];break}if(!g)return!0;if(1==g.action){g.$=g.$.next;l=g.$.ec();var m=g.$.dc();if(l==g.m&&m==g.l||l==g.K&&m==g.H)return!1;for(var n=g.$,r=g.$.next;0<k;){var p=c[k-1],v=Jc(p,l,m);
if(1==p.Bb&&0<=v||2==p.Bb&&0>=v)p=new Fc(p.m,p.l,g.K,g.H),p.action=g.action,p.complete=g.complete,p.Bb=g.Bb,p.$=g.$,p.Cb=g.Cb,p.max=p,c=c.slice(),c.splice(--k,2,p),Ra(cj,c),g=p;else break}p=!d(n,g.K,g.H)&&d(r,g.K,g.H);if(g.Cb.length){if(Ih(r.ec(),r.dc(),n.vb()).y>n.d||p){l=[];m=g.Cb[0];m=new Fc(g.m,g.l,m.Ec(),m.Dc());m.Na=m.length;m.action=0;m.Bb=g.action;l.push(m);m=q(g.Cb);for(n=m.next();!n.done;n=m.next())n=n.value,n=new Fc(n.Ec(),n.Dc(),n.ec(),n.dc()),n.Na=n.length,n.complete=1,n.action=0,n.Bb=
g.action,l.push(n);m=g.Cb[g.Cb.length-1];m=new Fc(m.ec(),m.dc(),g.K,g.H);m.Na=m.length;m.action=0;m.Bb=g.Bb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(ba(l)));f(g);h(c);Ra(cj,c)==c&&Ra(aj,c);return!1}g.Cb.push(r)}else{v=r.ec();var B=r.dc();if(0<=Jc(g.max,l,m)&&(g.max=new Fc(g.m,g.l,l,m),Ih(v,B,n.vb()).y<n.d&&!d(r,g.m,g.l))){if(p)return n=[],r=new Fc(g.m,g.l,l,m),r.Na=r.length,r.action=0,r.Bb=g.action,n.push(r),l=new Fc(l,m,g.K,g.H),l.Na=l.length,l.action=0,l.Bb=g.Bb,n.push(l),c=c.slice(),
c.splice.apply(c,[k,1].concat(ba(n))),f(g),h(c),Ra(cj,c)==c&&Ra(aj,c),!1;g.Cb.push(r)}}f(g);h(c);Ra(aj,c)}else if(2==g.action){g.$=g.$.sb;l=g.$.ec();m=g.$.dc();if(l==g.m&&m==g.l||l==g.K&&m==g.H)return!1;n=g.$.next;for(r=g.$;0<k;)if(p=c[k-1],v=Jc(p,l,m),1==p.Bb&&0<=v||2==p.Bb&&0>=v)p=new Fc(p.m,p.l,g.K,g.H),p.action=g.action,p.complete=g.complete,p.Bb=g.Bb,p.$=g.$,p.Cb=g.Cb,p.max=p,c=c.slice(),c.splice(--k,2,p),Ra(cj,c),g=p;else break;p=!d(n,g.K,g.H)&&d(r,g.K,g.H);if(g.Cb.length){if(Ih(r.Ec(),r.Dc(),
n.vb()).y>n.d||p){l=[];m=g.Cb[0];m=new Fc(g.m,g.l,m.ec(),m.dc());m.Na=m.length;m.action=0;m.Bb=g.action;l.push(m);m=q(g.Cb);for(n=m.next();!n.done;n=m.next())n=n.value,n=new Fc(n.ec(),n.dc(),n.Ec(),n.Dc()),n.Na=n.length,n.complete=1,n.action=0,n.Bb=g.action,l.push(n);m=g.Cb[g.Cb.length-1];m=new Fc(m.Ec(),m.Dc(),g.K,g.H);m.Na=m.length;m.action=0;m.Bb=g.Bb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(ba(l)));f(g);h(c);Ra(cj,c)==c&&Ra(aj,c);return!1}g.Cb.push(r)}else if(v=r.Ec(),B=r.Dc(),0>=Jc(g.max,
l,m)&&(g.max=new Fc(g.m,g.l,l,m),Ih(v,B,n.vb()).y<n.d&&!d(r,g.m,g.l))){if(p)return n=[],r=new Fc(g.m,g.l,l,m),r.Na=r.length,r.action=0,r.Bb=g.action,n.push(r),l=new Fc(l,m,g.K,g.H),l.Na=l.length,l.action=0,l.Bb=g.Bb,n.push(l),c=c.slice(),c.splice.apply(c,[k,1].concat(ba(n))),f(g),h(c),Ra(cj,c)==c&&Ra(aj,c),!1;g.Cb.push(r)}f(g);h(c);Ra(aj,c)}else{var y=[];y.cmp=function(x,A){return x.t<A.t?-1:x.t>A.t?1:x.Sf<A.Sf?-1:x.Sf>A.Sf?1:x.$.next==A.$?-x.Sf:x.$.sb==A.$?x.Sf:0};l=function(x){if(!x.disabled){var A=
Ih(g.m,g.l,x.vb()),z=Ih(g.K,g.H,x.vb());if(z.y==A.y){if(z.y==x.d){if(z.x>A.x){var D=Math.max(A.x,x.S);var I=Math.min(z.x,x.V);var L=1}else if(z.x<A.x)D=Math.max(z.x,x.S),I=Math.min(A.x,x.V),L=-1;else return;D>=I||(D=Math.round(.5*D+.5*I),Ra(y,{t:(D-A.x)/(z.x-A.x),Lh:-1,Sf:L,$:x,x:D,y:x.d}))}}else L=z.x<A.x?-1:1,D=(x.d-A.y)/(z.y-A.y),0>D||1<D||(I=Math.round(A.x+(z.x-A.x)*D),z.y<A.y?I<x.S||I>x.V||Ra(y,{t:D,Lh:0,Sf:L,$:x,x:I,y:x.d}):z.y>A.y&&!(I<x.S||I>x.V)&&Ra(y,{t:D,Lh:1,Sf:L,$:x,x:I,y:x.d}))}};t.pf();
for(m=new rf(new w(g.l,0,g.m),new w(g.H-g.l,0,g.K-g.m),0);(n=m.next())&&!(1<n.t);)if(n.node.cb)for(n=q(n.node.cb),r=n.next();!r.done;r=n.next())r=r.value,r.qa!=t.qa&&(r.qa=t.qa,l(r));l=null;for(m=1;m<y.length;m++)if(n=y[m-1],r=y[m],0==n.Lh&&1==r.Lh&&n.t<r.t){l=n;break}if(!l)return g.complete=1,Ra(aj,c),!1;m=g.X();m.action=1;m.max=m;m.Bb=g.Bb;m.$=l.x==l.$.V?l.$:l.$.sb;m.Cb=[];n=c.slice();n[k]=m;n.yc=0;Ra(cj,n)==n&&Ra(aj,n);m=g.X();m.action=2;m.max=m;m.Bb=g.Bb;m.$=l.x==l.$.S?l.$.sb:l.$;m.Cb=[];c=c.slice();
c[k]=m;c.yc=0;Ra(cj,c)==c&&Ra(aj,c)}return!1}for(;fj&&aj.length;){bj++;fj--;var b=aj.shift();if(a(b))return aj=null,b}if(0==aj.length)return aj=null}
function hj(a,b,c,d){cj=[];cj.cmp=function(f,h){if(f.length<h.length)return-1;if(f.length>h.length)return 1;for(var g=0;g<f.length;g++){var k=f[g],l=h[g];if(k.m<l.m)return-1;if(k.m>l.m)return 1;if(k.l<l.l)return-1;if(k.l>l.l)return 1;if(k.K<l.K)return-1;if(k.K>l.K)return 1;if(k.H<l.H)return-1;if(k.H>l.H)return 1;if(k.action<l.action)return-1;if(k.action>l.action)return 1}return 0};a=(new E(a,b)).round();c=(new E(c,d)).round();a=ij(a);c=ij(c);bj=0;aj=[];aj.cmp=function(f,h){return f.yc<h.yc?-1:1};
c=new Fc(a.x,a.y,c.x,c.y);c.Na=c.length;c.action=0;c=[c];c.yc=0;Ra(aj,c);return gj()}
function ij(a){t.pf();var b=null,c=NaN,d=[{n:ef,d:0}];d.cmp=function(k,l){return k.d<l.d?-1:1};for(var f;(f=d.shift())&&!(f.d>b);)if(f.n instanceof pf){var h=a.x-f.n.value;Ra(d,{n:f.n.Ye,d:Math.max(0,-h)});Ra(d,{n:f.n.Xe,d:Math.max(0,h)})}else if(f.n instanceof qf)h=a.y-f.n.value,Ra(d,{n:f.n.Ye,d:Math.max(0,-h)}),Ra(d,{n:f.n.Xe,d:Math.max(0,h)});else if(f.n.jk)for(f=q(f.n.jk),h=f.next();!h.done;h=f.next())if(h=h.value,h.qa!=t.qa){h.qa=t.qa;var g=Wi(h,a.x,a.y);g>=c||(c=g,b=h)}return b?b.Ig(a.x,a.y):
a}function jj(){for(var a=q(dj.cn),b=a.next();!b.done;b=a.next()){b=b.value;var c=b.width;b.Ml&&(c-=15E4);var d=Math.floor(c/15E4-1);c=.5*(c-15E4*(d-1));for(var f=0;f<d;f++){var h=b.$.Nf(c+15E4*f,15E4);h=new w(h.y,0,h.x);var g=Ve(h,new w(0,-1E8,0),We);g&&(h.T=Xe(g.item.Y),h.T.Kb.Ib!=t.b.Ib&&(h.y=g.p.y+1E5,h.ratio=b.ratio,g=h.T.Kb.Ib.Jd,g.cmp=function(k,l){return k.ratio<l.ratio?-1:1},Ra(g,h)))}}};var og,kj,lj,mj,nj=new Fc(0,0,1,0),oj=4095/741455.429632,pj=[];pj.cmp=function(a,b){return a.index-b.index};var qj=new bb(function(a,b){return a.hh<b.hh?-1:a.hh>b.hh?1:a.y<b.y?-1:a.y>b.y?1:a.Y<b.Y?-1:a.Y>b.Y?1:a.ia.name<b.ia.name?-1:a.ia.name>b.ia.name?1:Qe(a.ba,b.ba)});function rj(a,b){return a.y>b.y?-1:a.y<b.y?1:0}function sj(a,b){a=Xe(a.src.Y).dm;b=Xe(b.src.Y).dm;return a-b}function Bi(a,b,c,d,f){var h=new pg;h.hh=a;h.y=b;h.Y=c;h.ia=d;h.ba=f;h.ue=[];return qj.Oa(h)}var yi=0;
function tj(){if(0==yi){if(ai>=ci+2)var a=!1;else{var b=[ti,ri];a=0>ai?hi():b[ai%b.length].call()}return a}if(1==yi){var c=pj.slice();t.pf();for(var d=q(c),f=d.next();!f.done;f=d.next())f.value.qa=t.qa;var h=q(c);for(f=h.next();!f.done;f=h.next())for(var g=f.value,k=0;4>k;k++){var l=uj(g,k);l&&l.qa!=t.qa&&(l.qa=t.qa,Ra(pj,l))}og=[];yi++;kj=0;return!0}if(2==yi){var m=pj[kj];if(m)return vj(m),kj++,!0;yi++;kj=0}if(3==yi){t.pf();lj=t.qa;var n=pj[kj];if(n){for(var r=0;4>r;r++){var p=uj(n,r);if(p&&p.qa!=
lj){var v=n,B=p,y=[];switch(r){case 0:var x=lf(v.index);var A=x.x+512;for(var z=q(v.ha),D=z.next();!D.done;D=z.next()){var I=D.value;(I.m<=A||I.K<=A)&&y.push(I)}A=x.x-512;var L=q(B.ha);for(D=L.next();!D.done;D=L.next()){var R=D.value;(R.m>=A||R.K>=A)&&y.push(R)}break;case 1:x=lf(v.index);A=x.y+512;var ra=q(v.ha);for(D=ra.next();!D.done;D=ra.next()){var ta=D.value;(ta.l<=A||ta.H<=A)&&y.push(ta)}A=x.y-512;var ia=q(B.ha);for(D=ia.next();!D.done;D=ia.next()){var pa=D.value;(pa.l>=A||pa.H>=A)&&y.push(pa)}break;
case 2:x=lf(B.index);A=x.x+512;var Lb=q(B.ha);for(D=Lb.next();!D.done;D=Lb.next()){var rb=D.value;(rb.m<=A||rb.K<=A)&&y.push(rb)}A=x.x-512;var lc=q(v.ha);for(D=lc.next();!D.done;D=lc.next()){var Nb=D.value;(Nb.m>=A||Nb.K>=A)&&y.push(Nb)}break;case 3:x=lf(B.index);A=x.y+512;var Tb=q(B.ha);for(D=Tb.next();!D.done;D=Tb.next()){var Ic=D.value;(Ic.l<=A||Ic.H<=A)&&y.push(Ic)}A=x.y-512;var Ja=q(v.ha);for(D=Ja.next();!D.done;D=Ja.next()){var Pb=D.value;(Pb.l>=A||Pb.H>=A)&&y.push(Pb)}}Zi(y,!1)}}n.qa=lj;kj++;
return!0}yi++;kj=0}if(4==yi){var Ef=pj[kj];if(Ef)return Ef.evaluate(),kj++,!0;yi++;kj=0}if(5==yi){var va=pj[kj];if(va){for(var Ff=q(va.Xl),De=Ff.next();!De.done;De=Ff.next())De.value.evaluate();kj++;return!0}yi++;kj=0}if(6==yi){var Gf=pj[kj];if(Gf)return wj(Gf),kj++,!0;yi++;kj=0}if(7==yi){var yc=pj[kj];if(yc)return xj(yc),kj++,!0;yi++;kj=0}if(8==yi)return ng(),yi++,!0;if(9==yi)return ef=of(),yj.ze=new pg,yj.ze.ba=new ie,yj.ze.ba.name="creaseShading",yj.ze.ba.Ia=1,yj.ze.ba.re=new F(0,0,0,127.5),yj.ze.I=
t.i.za.get("creaseShading"),zj=0,yj.ug=Array(ff.elements.length),Aj=0,yi++,!0;if(10==yi){if(Bj())return!0;yi++;return!0}if(11==yi){if(mj&&0!=t.j%1)return!1;for(;gg.length&&gg[0].tg;)gg.shift(),hg++;Ze.length=0;Ye=hg;for(var Hf=q(gg),ub=Hf.next();!ub.done;ub=Hf.next()){var be=ub.value;if(be.pa>ci+1)break;Ze.push(be)}var If=q(Ze);for(ub=If.next();!ub.done;ub=If.next())for(var Ee=ub.value,ce=0;ce<Ee.yb.length;ce++)Ee.yb[ce].Gc.Y>=Ye||Ee.yb.splice(ce--,1);for(var de=0;de<qj.elements.length;de++){var Jf=
qj.elements[de];Jf.Y<hg&&(qj.elements.splice(de--,1),Jf.vd.parent=null,Xd(Jf.vd))}var Fe=q(Ze);for(ub=Fe.next();!ub.done;ub=Fe.next()){var vb=ub.value;vb.pa<=bi||(vb.ac.x/=vb.kd,vb.ac.y/=vb.kd,vb.ac.z/=vb.kd,vb.ac.x/=255,vb.ac.y/=255,vb.ac.z/=255)}var Xb=q(Ze);for(ub=Xb.next();!ub.done;ub=Xb.next()){var Kf=ub.value;if(!(Kf.pa<=bi))for(var Ed=q(Kf),nd=Ed.next();!nd.done;nd=Ed.next())for(var Lf=q(nd.value.Ab),Qb=Lf.next();!Qb.done;Qb=Lf.next())Qb.value.create()}Af?zf=!0:Df();bi=ci+1;for(var Mf=q(t.ni.elements),
Ge=Mf.next();!Ge.done;Ge=Mf.next())Cj(Ge.value);for(var Nf=q(qj.elements),Of=Nf.next();!Of.done;Of=Nf.next()){var $a=Of.value;if(!$a.vd){var Db=Xe($a.Y);if(Db&&!(Db.pa>bi)){var bd=$a;bd.bc.cmp=qd;for(var Yb=q(bd.ue),kb=Yb.next();!kb.done;kb=Yb.next())for(var Mc=kb.value,ee=0;ee<Mc.length;ee++)Mc[ee]=Ra(bd.bc,Mc[ee]);for(var zc=0;zc<bd.bc.length;zc++)bd.bc[zc].index=zc;var Pf=q(bd.ue);for(kb=Pf.next();!kb.done;kb=Pf.next())for(var Fd=kb.value,nc=0;nc<Fd.length;nc++)Fd[nc]=Fd[nc].index;delete bd.bc.cmp;
$a.compile();delete $a.ue;$a.vd=new rg($a,"worldMesh");isNaN($a.facing)||($a.vd.facing=$a.facing);$a.vd.ja=Db.ja;$a.vd.Ki=!0;$a.vd.Ga=["portalLightIndex",Db.sf,!0,"numPortals",Db.yb.length,!0];$a.hh?($a.vd.y=$a.y,K($a.vd,t.Zf)):K($a.vd,t.Vl);delete $a.hh;delete $a.y}}}yi++;return!0}if(12==yi){for(var Ac=q(ff.elements),wb=Ac.next();!wb.done;wb=Ac.next()){var He=wb.value;He.cb=[];He.jk=[]}for(var za=[],Qf=q(Ze),Nc=Qf.next();!Nc.done;Nc=Qf.next())for(var Rf=q(Nc.value),Bc=Rf.next();!Bc.done;Bc=Rf.next())za=
za.concat(Bc.value);var Sf=[],Gd=[],Tf=[],fe=[],cd=q(Ze);for(Nc=cd.next();!Nc.done;Nc=cd.next()){var Uf=q(Nc.value);for(Bc=Uf.next();!Bc.done;Bc=Uf.next())for(var Hd=q(Bc.value.Ab),Zb=Hd.next();!Zb.done;Zb=Hd.next()){var Id=Zb.value;if(Id instanceof Oi){if(!Xe(Id.wa.T.index))continue}else{if(!Xe(Id.wa.T.index))continue;if(!Xe(Id.Ya.T.index))continue}fe.push(Id)}}var Rg=q(fe);for(Zb=Rg.next();!Zb.done;Zb=Rg.next()){var la=Zb.value;if(la instanceof Li){if(!la.Yc){var Ta=new Oh(-40675,40675,-la.a+40675,
la.a-40675);la.cb=[];var Ca=new Xi(Ta.J,Ta.w,Ta.D);Ca=Ca.rotate(la.direction);Ca=Ca.translate(la.z,la.x);Ca.source=Ta;la.cb.push(Ca);Ca=new Ii(Ta.w,Ta.J,Ta.L);Ca=Ca.rotate(la.direction);Ca=Ca.translate(la.z,la.x);Ca.source=Ta;la.cb.push(Ca);Ca=new Ji(Ta.L,Ta.D,Ta.w);Ca=Ca.rotate(la.direction);Ca=Ca.translate(la.z,la.x);Ca.source=Ta;la.cb.push(Ca);Ca=new Yi(Ta.D,Ta.L,Ta.J);Ca=Ca.rotate(la.direction);Ca=Ca.translate(la.z,la.x);Ca.source=Ta;la.cb.push(Ca);Ta=Ta.rotate(la.direction);Ta=Ta.translate(la.z,
la.x);Ta.Qj=la;Gd.push(Ta)}}else if(la instanceof Mi){var Rb=new Oh(-40675,40675,-la.a-9375+40675,la.a+9375-40675);Rb=Rb.rotate(la.direction);Rb=Rb.translate(la.z,la.x);Tf.push(Rb)}else if(la instanceof Oi){var Oc=new Oh(-la.Vb+40675,la.Vb-40675,-la.ye-40675,la.ye+40675);Oc=Oc.translate(la.Ua.J,la.Ua.w);Oc=Oc.rotate(la.direction);Sf.push(Oc);var Jd=new Oh(-la.Vb,la.Vb,-la.ye,la.ye);Jd=Jd.translate(la.Ua.J,la.Ua.w);Jd=Jd.rotate(la.direction);za=Mh(za,[Jd])}}for(var Vf=[],Ie=0;Ie<za.length;Ie++)for(var Je=
za[Ie],Ke=Ie+1;Ke<za.length;Ke++){var Kd=za[Ke];if(Je.platform.T!=Kd.platform.T||25E3<Math.abs(Kd.platform.y-Je.platform.y)){var Wf=Pi(Je,Kd);Wf&&Vf.push(Wf)}}za=Qh(za,1);za=za.concat(Vf);za=Jh(za,40675,40675);za=Qh(za);za=Rh(za);za=za.concat(Sf);za=za.concat(Tf);for(var Cc=[],Xf=q(za),Eb=Xf.next();!Eb.done;Eb=Xf.next())Uh(Eb.value,Cc);var Ld=q(Gd);for(Eb=Ld.next();!Eb.done;Eb=Ld.next()){var Yf=Eb.value;Cc.push(Yf.Qj.cb[1],Yf.Qj.cb[3])}za=za.concat(Gd);Mh(Cc,za);for(var $b=Zh(Wh(Cc)),Zf=0,Md=q($b),
od=Md.next();!od.done;od=Md.next())for(var ge=od.value,Le=ge[ge.length-1],$f=q(ge),oc=$f.next();!oc.done;oc=$f.next()){var dd=oc.value;dd.index=Zf++;Le.next=dd;dd.sb=Le;Le=dd}var ag=[],bg=q($b);for(od=bg.next();!od.done;od=bg.next()){var pd=od.value;if(!(3>pd.length))for(var he=pd[pd.length-2],ac=pd[pd.length-1],bc,Me=0;Me<pd.length;Me++,he=ac,ac=bc)if(bc=pd[Me],(he.vb()+1)%4==ac.vb()&&(ac.vb()+1)%4==bc.vb()){var ed=Math.min(he.V-he.S,bc.V-bc.S);if(!(1E5>ed)){var C=ac.V-ac.S,J=C/ed;if(!(2<=J)){var M=
{};M.$=ac;M.width=C;M.depth=ed;M.ratio=J;ag.push(M);ac.lk=M;ac.sb.lk&&(ac.sb.lk.Ml=!0);ac.next.lk&&(M.Ml=!0)}}}}for(var G=[],O=q($b),Q=O.next();!Q.done;Q=O.next())G=G.concat(Q.value);$b=G;$b.Pl=za;$b.cn=ag;var ma=q(Gd);for(Eb=ma.next();!Eb.done;Eb=ma.next()){var Y=Eb.value.Qj;Y.Kd=[Y.cb[1].sb,Y.cb[1].next,Y.cb[3].sb,Y.cb[3].next];Y.cb[0].sb=Y.Kd[0];Y.cb[0].next=Y.Kd[3];Y.cb[2].sb=Y.Kd[2];Y.cb[2].next=Y.Kd[1];$b.push(Y.cb[0]);$b.push(Y.cb[2]);var X=Y;X.Kd[0]&&X.Kd[1]&&X.Kd[2]&&X.Kd[3]&&(X.Kd[0].next=
X.cb[1],X.Kd[1].sb=X.cb[1],X.Kd[2].next=X.cb[3],X.Kd[3].sb=X.cb[3],X.cb[0].disabled=!0,X.cb[1].disabled=!1,X.cb[2].disabled=!0,X.cb[3].disabled=!1,X.cb[0].y=-5E4,X.cb[1].y=0,X.cb[2].y=-5E4,X.cb[3].y=0)}for(var Fa=q($b),S=Fa.next();!S.done;S=Fa.next()){var V=S.value,Ga=V.yh(),qa=[];yf(Ga.J,Ga.w,Ga.L,Ga.D,qa);var Pa=q(qa);for(wb=Pa.next();!wb.done;wb=Pa.next())wb.value.cb.push(V)}for(var da=q($b.Pl),Na=da.next();!Na.done;Na=da.next()){var Aa=Na.value,cc=[];yf(Aa.J,Aa.w,Aa.L,Aa.D,cc);var Ij=q(cc);for(wb=
Ij.next();!wb.done;wb=Ij.next())wb.value.jk.push(Aa)}dj=$b;yi++;return!0}13==yi&&(t.b.Jd=jj(),yi=0);return!1}function Dj(a,b){var c=new bb(vd);a=q(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var f=new bb($c);f.x=d.m;f.y=d.l;f=c.Oa(f);f.add(d);b&&(d=Zc(d),f=new bb($c),f.x=d.m,f.y=d.l,f=c.Oa(f),f.add(d))}return c}
function Ej(a){var b=[];b.bound=new Tc;var c=0,d=a.elements[c],f=d.elements.pop();d.elements.length||a.elements.splice(c,1);if(!f)return null;for(;;){b.push(f);b.bound.Oa(f.K,f.H);if(f.K==b[0].m&&f.H==b[0].l)return b;c=a.contains(new E(f.K,f.H));if(0>c)return null;d=a.elements[c];f=cb(d,Yc(f))-1;0>f&&(f+=d.elements.length);f=d.elements.splice(f,1)[0];d.elements.length||a.elements.splice(c,1)}}
function Fj(a){for(var b=[],c=a[a.length-1],d=0;d<a.length;d++){var f=a[d];b.push(Hc(c,f));c=f}a.Ej=b;a.rh=[];a.Fk=0;b=q(a.Ej);for(c=b.next();!c.done;c=b.next())c=c.value,0>c?(a.Fk-=c,a.rh.push(-c)):a.rh.push(0)}
function Gj(a,b){var c=null;b=q(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.w<=d.bound.w||a.bound.o<=d.bound.o||a.bound.D>=d.bound.D||a.bound.F>=d.bound.F)){if(c){if(d.bound.w<=c.bound.w)continue;if(d.bound.o<=c.bound.o)continue;if(d.bound.D>=c.bound.D)continue;if(d.bound.F>=c.bound.F)continue}0>=Qc(a[0].K,a[0].H,d)||(c=d)}c&&c.wb.push(a)}
function Hj(a){if(0==a.wb.length)return a;var b=[a].concat(a.wb),c={};c.yc=Number.NEGATIVE_INFINITY;for(var d=0;d<b.length;d++)for(var f=b[d],h=d+1;h<b.length;h++)for(var g=b[h],k=0;k<f.length;k++)for(var l=(k+1)%f.length,m=0;m<g.length;m++)c=Jj(f,k,l,g,m,(m+1)%g.length,c,b);if(0>c.yc)return console.log("could not solve holes"),a.wb=[],a;f=c.de[c.ra].hb(c.de[c.ra].m,c.de[c.ra].l,c.Be[c.d].m,c.Be[c.d].l);d=f.hb(f.K,f.H,f.m,f.l);f.ea=d;d.ea=f;b=[];for(h=0;h<c.ra;h++)b.push(c.de[h]);b.push(f);f=c.d;
for(h=0;h<c.Be.length;h++)b.push(c.Be[f]),++f==c.Be.length&&(f=0);b.push(d);for(d=c.ra;d<c.de.length;d++)b.push(c.de[d]);if(c.de==a)return a.wb.splice(a.wb.indexOf(c.Be),1),b.wb=a.wb,Fj(b),Hj(b);a.wb.splice(a.wb.indexOf(c.de),1,b);a.wb.splice(a.wb.indexOf(c.Be),1);Fj(b);return Hj(a)}
function Jj(a,b,c,d,f,h,g,k){function l(p,v){function B(D,I,L){if(I==D.m&&L==D.l||I==D.K&&L==D.H)return!1;I=D.Nf(I,L);return 0>=I.x||I.x>=D.length||-256>I.y||256<I.y?!1:!0}var y=Jc(v,p.m,p.l),x=Jc(v,p.K,p.H),A=Jc(p,v.m,v.l),z=Jc(p,v.K,v.H);if(-256>A&&256<z&&(-256>y&&256<x||256<y&&-256>x)||256<A&&-256>z&&(-256>y&&256<x||256<y&&-256>x)||B(p,v.m,v.l)||B(p,v.K,v.H)||B(v,p.m,p.l)||B(v,p.K,p.H))return!0}var m=a[c],n=d[h];m=new Fc(m.m,m.l,n.m,n.l);if(0==a.rh[c]){if(0>=Jc(a[b],m.K,m.H)||0>=Jc(a[c],m.K,m.H))return g}else if(0>=
Jc(a[b],m.K,m.H)&&0>=Jc(a[c],m.K,m.H))return g;if(0==d.rh[h]){if(0>=Jc(d[f],m.m,m.l)||0>=Jc(d[h],m.m,m.l))return g}else if(0>=Jc(d[f],m.m,m.l)&&0>=Jc(d[h],m.m,m.l))return g;if(k)for(k=q(k),n=k.next();!n.done;n=k.next()){var r=q(n.value);for(n=r.next();!n.done;n=r.next())if(l(m,n.value))return g}else for(k=q(a),n=k.next();!n.done;n=k.next())if(l(m,n.value))return g;k={};k.de=a;k.La=b;k.ra=c;k.Be=d;k.Lh=f;k.d=h;k.$=m;Kj(k);return k.yc>g.yc?k:g}
function Kj(a){a.yc=4095-a.$.length*oj;var b=Hc(a.de[a.La],a.$),c=b-a.de.Ej[a.ra],d=Hc(a.$,a.Be[a.d]),f=d-a.Be.Ej[a.d];a.yc+=.5/Math.PI*(a.de.rh[a.ra]-(0>b?-b:0)-(0>c?-c:0)+(a.Be.rh[a.d]-(0>d?-d:0)-(0>f?-f:0)))*1048575}
function Lj(a){if(3>a.length)return[];Fj(a);if(0>=a.Fk)return[a];for(var b={yc:Number.NEGATIVE_INFINITY},c=a.length-1,d=0;d<a.length;d++){for(var f=d+1,h=f+1;h<a.length;h++)b=Jj(a,c,d,a,f,h,b),f=h;c=d}if(0>b.yc)return[a];h=new Mj(a[b.ra].m,a[b.ra].l,a[b.d].m,a[b.d].l);c=new Mj(a[b.d].m,a[b.d].l,a[b.ra].m,a[b.ra].l);h.ea=c;c.ea=h;d=[];f=[];for(var g=0;g<b.ra;g++)d.push(a[g]);d.push(h);for(h=b.d;h<a.length;h++)d.push(a[h]);for(h=b.ra;h<b.d;h++)f.push(a[h]);f.push(c);return Lj(d).concat(Lj(f))}
function Nj(a){this.ha=null;this.o=Number.POSITIVE_INFINITY;this.F=Number.NEGATIVE_INFINITY;this.ta=this.floor=null;this.fa=a}Nj.prototype.dh=function(a,b){if(this.F<=a.o||this.o>=a.F)b.push(this);else{if(this.o<a.o){var c=new Nj(this.fa);c.o=this.o;c.F=a.o;c.floor=this.floor;c.ta=a.ta;b.push(c)}this.F>a.F&&(c=new Nj(this.fa),c.o=a.F,c.F=this.F,c.floor=a.floor,c.ta=this.ta,b.push(c))}};function Og(a,b,c){this.Z=a;this.o=b;this.F=c;this.flags=0}function Pg(a,b){this.ha=a;this.y=b;this.flags=0}
function Qg(a,b){this.ha=a;this.y=b;this.flags=0}Pg.prototype.Zh=function(){if(this.ea)return this.ea;this.ea=new Qg(this.ha,this.y);this.ea.flags=this.flags;return this.ea};Qg.prototype.Zh=function(){if(this.ea)return this.ea;this.ea=new Pg(this.ha,this.y);this.ea.flags=this.flags;return this.ea};Og.prototype.Zh=function(){if(this.ea)return this.ea;this.ea=new Og(Zc(this.Z),this.o,this.F);this.ea.flags=this.flags;return this.ea};function kf(a){this.index=a;this.Ei=this.qa=-2147483648;this.cm=new eb(this);this.yd=new bb(lb);this.Hd=[];this.kj=new db}function uj(a,b){a=mf(a.index);switch(b){case 0:if(0==a.x)break;return ff.get(nf(a.x-1,a.y));case 1:if(0==a.y)break;return ff.get(nf(a.x,a.y-1));case 2:if(8191==a.x)break;return ff.get(nf(a.x+1,a.y));case 3:if(8191!=a.y)return ff.get(nf(a.x,a.y+1))}return null}
function vj(a){function b(g,k){return g.fa.index<k.fa.index?-1:g.fa.index>k.fa.index?1:0}a.Xl=[];a.ha=[];for(var c=q(a.yd.elements),d=c.next();!d.done;d=c.next()){d=q(d.value.ha);for(var f=d.next();!f.done;f=d.next()){f=f.value;var h=f.X();Zc(h);f.xi&&(h.mc=[f]);h.Ae=[a.ha];a.ha.push(h)}}Zi(a.ha.slice(),!0);a=q(a.ha);for(f=a.next();!f.done;f=a.next())c=f.value,c.mc&&Ab(c.mc,b),c.ea.mc&&Ab(c.ea.mc,b)}
kf.prototype.evaluate=function(){this.qk=[];this.rk=[];for(var a=Dj(this.ha,!0),b=[],c=[];a.elements.length;){var d=Ej(a);d&&(Pc(d)?c.push(d):(d.wb=[],b.push(d)))}a=q(c);for(c=a.next();!c.done;c=a.next())Gj(c.value,b);a=[];b=q(b);for(c=b.next();!c.done;c=b.next())if(d=c.value,0==d.wb.length)a.push(d);else{Fj(d);var f=q(d.wb);for(c=f.next();!c.done;c=f.next())Fj(c.value);a.push(Hj(d))}b=[];a=q(a);for(c=a.next();!c.done;c=a.next())b=b.concat(Lj(c.value));a=q(b);for(c=a.next();!c.done;c=a.next())this.Xl.push(new Oj(c.value,
this))};
function wj(a){function b(B,y){return B.Rd<y.Rd?-1:B.Rd>y.Rd?1:B.fa.Y<y.fa.Y?-1:B.fa.Y>y.fa.Y?1:Pj(B.aa,y.aa)}function c(B,y){var x=kc(1/60);var A=-1;for(var z=1;z<B.length;z++){var D=Math.abs(Hc(B[z-1].Z,B[z].Z));D<x&&(x=D,A=z)}if(0>A)y.push.apply(y,ba(B));else{x=B[A-1];z=B[A];D=x.Z.hb(x.Z.m,x.Z.l,z.Z.K,z.Z.H);var I=Zc(D);x.Bd&&(0>x.Bd.Rd?x.Bd.splice(x.Bd.indexOf(x.Z),2,D):x.Bd.splice(x.Bd.indexOf(z.Z.ea),2,I));x.wd&&(0<x.wd.Rd?x.wd.splice(x.wd.indexOf(x.Z),2,D):x.wd.splice(x.wd.indexOf(z.Z.ea),2,
I));x.Z=D;B.splice(A,1);c(B,y)}}function d(B){var y=kc(1/60);var x=-1;for(var A=1;A<B.length;A++){var z=Math.abs(Hc(B[A-1],B[A]));z<y&&(y=z,x=A)}if(!(0>x)){y=B[x-1];A=B[x];z=y.hb(y.m,y.l,A.K,A.H);var D=Zc(z);z.qd=y.qd;y.qd.splice(y.qd.indexOf(y),2,z);A.ea&&(D.qd=A.ea.qd,A.ea.qd.splice(A.ea.qd.indexOf(A.ea),2,D));B.splice(x-1,2,z);d(B)}}for(var f=0,h=new bb(function(B,y){return B.y<y.y?-1:B.y>y.y?1:0}),g=q(a.qk),k=g.next();!k.done;k=g.next()){var l=k.value,m=new bb(b);m.y=l.y;m=h.Oa(m);k=[];k.Rd=l.Rd;
k.fa=l.fa;k.aa=l.aa;k=m.Oa(k);k.push(l)}g=q(h.elements);for(l=g.next();!l.done;l=g.next()){l=l.value;m=q(l.elements);for(k=m.next();!k.done;k=m.next()){var n=k.value,r=new bb(Gc),p=q(n);for(k=p.next();!k.done;k=p.next()){var v=q(k.value);for(k=v.next();!k.done;k=v.next())k=k.value,r.remove(Yc(k))||r.push(k)}n.length=0;for(r=Dj(r.elements);r.elements.length;){p=Ej(r);if(!p)break;p.y=l.y;p.Rd=n.Rd;p.fa=n.fa;p.aa=n.aa;p.index=f++;v=q(p);for(k=v.next();!k.done;k=v.next())k.value.qd=p;n.push(p)}}l.Rj=
new bb(Gc);m=q(l.elements);for(k=m.next();!k.done;k=m.next())for(n=q(k.value),k=n.next();!k.done;k=n.next())for(r=q(k.value),k=r.next();!k.done;k=r.next())k=k.value,(p=l.Rj.remove(Yc(k)))?(k.ea=p,p.ea=k):l.Rj.push(k)}f=q(a.rk);for(g=f.next();!g.done;g=f.next())g=g.value,l=function(B,y){y=h.get({y:y});if(!y)return null;y=y.Rj.remove(B);if(!y)return null;y.qd.splice(y.qd.indexOf(y),1,B);return y.qd},m=g.Z,k=Zc(m),g.wd=l(m,g.o)||l(k,g.o),g.Bd=l(m,g.F)||l(k,g.F);g=function(B){var y=[],x=new bb(function(I,
L){I=I[0];L=L[0];if(I.o<L.o)return-1;if(I.o>L.o)return 1;if(I.F<L.F)return-1;if(I.F>L.F)return 1;if(I.wd)if(L.wd){if(I.wd.index<L.wd.index)return-1;if(I.wd.index>L.wd.index)return 1}else return 1;else if(L.wd)return-1;if(I.Bd)if(L.Bd){if(I.Bd.index<L.Bd.index)return-1;if(I.Bd.index>L.Bd.index)return 1}else return 1;else if(L.Bd)return-1;if(I.length<L.length)return-1;if(I.length>L.length)return 1;for(var R=0;R<I.length;R++){var ra=I[R],ta=L[R];if(ra.o<ta.o)return-1;if(ra.o>ta.o)return 1;if(ra.F<ta.F)return-1;
if(ra.F>ta.F)return 1;ra=Pj(ra.aa,ta.aa);if(0!=ra)return ra}return 0});B=q(B);for(var A=B.next();!A.done;A=B.next()){A=A.value;var z=[A],D=x.Oa(z);D!=z&&D.push(A)}B={};x=q(x.elements);for(A=x.next();!A.done;B={Ff:B.Ff},A=x.next())for(B.Ff=A.value,A={};B.Ff.length;)A.Ch=function(I,L){return function(R,ra,ta){for(var ia=0;ia<I.Ff.length;ia++){var pa=I.Ff[ia];if(pa.Z.m==ta.K&&pa.Z.l==ta.H)return I.Ff.splice(ia,1),R.push(pa),pa.Z.Md=R,pa.Z.ea.Md=R,L.Ch(R,ra,pa.Z);if(pa.Z.K==ra.m&&pa.Z.H==ra.l)return I.Ff.splice(ia,
1),R.unshift(pa),pa.Z.Md=R,pa.Z.ea.Md=R,L.Ch(R,pa.Z,ta)}return R}}(B,A),z=B.Ff.shift(),D=[z],z.Z.Md=D,z.Z.ea.Md=D,y.push(A.Ch(D,z.Z,z.Z)),A={Ch:A.Ch};return y}(a.rk);f=function(){for(var B=[],y=q(h.elements),x=y.next();!x.done;x=y.next()){x=q(x.value.elements);for(var A=x.next();!A.done;A=x.next()){A=q(A.value);for(var z=A.next();!z.done;z=A.next()){z=z.value;for(var D=function(ia,pa){return ia.Md||pa.Md?!1:ia.ea?pa.ea?ia.ea.qd==pa.ea.qd:!1:pa.ea?!1:!0},I=0,L=z[z.length-1],R=z[0];I<z.length&&(R=z[I],
D(L,R));I++,L=R);if(I==z.length){D=[];L=q(z);for(z=L.next();!z.done;z=L.next())z=z.value,z.Md=D,z.ea&&(z.ea.Md=D),D.push(z);B.push(D)}else{z.unshift.apply(z,ba(z.splice(I)));I=[];var ra=null;L=z[0];I.push(ra=[]);ra.push(L);for(var ta=1;ta<z.length;ta++,L=R)R=z[ta],D(L,R)||I.push(ra=[]),ra.push(R);D=q(I);for(z=D.next();!z.done;z=D.next())if(L=z.value,!L[0].Md){R=q(L);for(z=R.next();!z.done;z=R.next())z=z.value,z.Md=L,z.ea&&(z.ea.Md=L);B.push(L)}}}}}return B}();a.Ol=[];l=q(g);for(g=l.next();!g.done;g=
l.next())c(g.value,a.Ol);a.Nl=[];f=q(f);for(g=f.next();!g.done;g=f.next())d(g.value);f=q(h.elements);for(l=f.next();!l.done;l=f.next())for(g=q(l.value.elements),k=g.next();!k.done;k=g.next())for(l=q(k.value),k=l.next();!k.done;k=l.next())m=k.value,m.Ql=Lj(m),a.Nl.push(m)}
function xj(a){function b(r,p,v){var B=[],y=new Pg(p,r.y);y.flags|=Qj;y.Y=r.fa.Y;h.push(y);if((y=gg[v.Y-hg])&&!(y.pa<=bi||y.pa>ci+1)){for(y=0;y<p.length;y++){var x=new md(p[y].l,r.y,p[y].m);sd(x,r.aa.color);td(x,x.z/4E5,x.x/4E5);x.Xc=32767;B.push(x)}v.ue.push(B);og.push(B);f(gg[r.fa.Y-hg],B,r.aa)}}function c(r,p,v){var B=[],y=new Qg(p,r.y);y.flags|=Qj;y.Y=r.fa.Y;h.push(y);if((y=gg[v.Y-hg])&&!(y.pa<=bi||y.pa>ci+1)){for(y=p.length-1;0<=y;y--){var x=new md(p[y].H,r.y,p[y].K);sd(x,r.aa.color);td(x,-x.z/
4E5,x.x/4E5);x.Xc=-32767;B.push(x)}v.ue.push(B);og.push(B);f(gg[r.fa.Y-hg],B,r.aa)}}function d(r,p,v){var B=Bi(!1,Infinity,r.fa.Y,p.aa.ia,p.aa.ba),y=gg[B.Y-hg];if(y&&!(y.pa<=bi||y.pa>ci+1)){y=[];var x=r.Z.m/4E5+r.Z.l/4E5,A=r.Z.K/4E5+r.Z.H/4E5;var z=new md(r.Z.H,p.o,r.Z.K);sd(z,p.aa.color);td(z,A,-z.y/4E5);z.Hb=v.x;z.Cc=v.y;y.push(z);z=new md(r.Z.l,p.o,r.Z.m);sd(z,p.aa.color);td(z,x,-z.y/4E5);z.Hb=v.x;z.Cc=v.y;y.push(z);z=new md(r.Z.l,p.F,r.Z.m);sd(z,p.aa.color);td(z,x,-z.y/4E5);z.Hb=v.x;z.Cc=v.y;
y.push(z);z=new md(r.Z.H,p.F,r.Z.K);sd(z,p.aa.color);td(z,A,-z.y/4E5);z.Hb=v.x;z.Cc=v.y;y.push(z);B.ue.push(y);og.push(y);f(gg[r.fa.Y-hg],y,p.aa)}}function f(r,p,v){var B=0,y=p[0],x=xd(p[1],y,new w);x.scale(1E-5);for(var A=2;A<p.length;A++){var z=xd(p[A],y,new w);z.scale(1E-5);B+=tc(x,z,new w).length();x=z}p=.5*B;B=v.ia;v=v.color;y=(B.qe.r-B.qe.bb)/255;v=new F(v.r*y+B.qe.bb,v.bb*y+B.qe.bb,v.ra*y+B.qe.bb,B.qe.La);r.ac.x+=v.r*p;r.ac.y+=v.bb*p;r.ac.z+=v.ra*p;r.kd+=p}a.ya=[];for(var h=a.ya,g=q(a.Nl),
k=g.next();!k.done;k=g.next())if(k=k.value,0<k.Rd){for(var l=Bi(!0,k.y,k.fa.Y,k.aa.ia,k.aa.ba),m=q(k.Ql),n=m.next();!n.done;n=m.next())b(k,n.value,l);(k=gg[k.fa.Y-hg])&&(k.pa>ci+1||k.cells.push(a))}else if(k.aa)for(l=Bi(!1,k.y,k.fa.Y,k.aa.ia,k.aa.ba),m=q(k.Ql),n=m.next();!n.done;n=m.next())c(k,n.value,l);a=q(a.Ol);for(k=a.next();!k.done;k=a.next())for(g=k.value,k=new Og(g.Z,g.o,g.F),k.flags|=Qj,k.Y=g[0].fa.Y,h.push(k),k=new E(g.Z.l-g.Z.H,g.Z.K-g.Z.m),k.na(32767),n=q(g),l=n.next();!l.done;l=n.next())d(g,
l.value,k)}
function Oj(a,b){this.index=Rj++;this.ha=a;this.pg=b;a=new bb(Sj);for(var c=new E(0,0),d=1/this.ha.length,f=q(this.ha),h=f.next();!h.done;h=f.next())h=h.value,h.th=this,c.x+=h.K*d,c.y+=h.H*d;b=q(b.yd.elements);for(d=b.next();!d.done;d=b.next())d=d.value,0>=Qc(c.x,c.y,d.ha)||a.add(d);this.yd=a.elements;Tj(this);this.Kl=[];a=Number.NEGATIVE_INFINITY;c=q(this.uf);for(b=c.next();!b.done;b=c.next())if(b=b.value,b.fa.add){if(b.o>a){var g=new Nj(b.fa);g.o=b.o;g.F=b.F;g.floor=b.floor;g.ta=b.ta;g.ha=this.ha;
this.Kl.push(g)}else g.F=b.F,g.ta=b.ta;a=g.F}}var Rj=-2147483648;
function Tj(a){var b=new Nj;b.o=-2147483648;b.F=2147483647;b.fa={};a.uf=[b];b=q(a.yd);for(var c=b.next();!c.done;c=b.next()){c=c.value;var d=new Nj(c.fa);d.o=c.fa.o;d.F=c.fa.F;d.floor=c.fa.floor;d.ta=c.fa.ta;c=[d];d=q(a.uf);for(var f=d.next();!f.done;f=d.next()){f=f.value;var h=[];c=q(c);for(var g=c.next();!g.done;g=c.next())g=g.value,g.fa.gi(f.fa)?h.push(g):g.dh(f,h);c=h}d=q(c);for(g=d.next();!g.done;g=d.next()){h=g.value;g=[];var k=q(a.uf);for(f=k.next();!f.done;f=k.next())f.value.dh(h,g);a.uf=
g}a.uf.push.apply(a.uf,ba(c))}Ab(a.uf,function(l,m){return l.o<m.o?-1:l.o>m.o?1:0})}
Oj.prototype.evaluate=function(){for(var a=q(this.Kl),b=a.next();!b.done;b=a.next()){b=b.value;if(b.floor){for(var c=[],d=q(this.ha),f=d.next();!f.done;f=d.next())f=f.value,f=f.X(),c.push(f);c.y=b.o;c.aa=b.floor;c.Rd=1;c.fa=b.fa;this.pg.qk.push(c)}if(b.ta){c=[];d=q(this.ha);for(f=d.next();!f.done;f=d.next())f=f.value,f=f.X(),c.push(f);c.y=b.F;c.aa=b.ta;c.Rd=-1;c.fa=b.fa;this.pg.qk.push(c)}}a=[];b=[];f=q(this.uf);for(d=f.next();!d.done;d=f.next())c=d.value,(c.fa.add?a:b).push(c);b=q(this.ha);for(f=
b.next();!f.done;f=b.next()){f=f.value;var h=function(p,v){var B=[];p=q(p);for(var y=p.next();!y.done;y=p.next()){var x=y.value,A=q(v);for(y=A.next();!y.done;y=A.next()){var z=y.value,D=[];x.Oa(z.o,z.F,D);var I=q(D);for(y=I.next();!y.done;y=I.next())y.value.fa=z.fa;B.push.apply(B,ba(D))}}return B},g=function(p,v){v=q(v);for(var B=v.next();!B.done;B=v.next()){B=B.value;var y=[];p=q(p);for(var x=p.next();!x.done;x=p.next())x.value.dh(B.o,B.F,y);p=y}return p};c=function(p){for(var v=p[0],B=1;B<p.length;B++)if(Pj(v.aa,
p[B].aa))v=p[B];else{var y=v.X(v.o,p[B].F);p.splice(--B,2,y)}};d=function(p,v,B){var y=[];if(!p.mc)return y;v=q(v);for(var x=v.next();!x.done;x=v.next()){x=x.value;var A=p.mc;var z=x,D=Sj,I=yb(A,z,D);(A=I==A.length||0!=D.call(null,z,A[I])?null:A[I])&&A.fa.add==B&&y.push(new vh(x.fa.o,x.fa.F,A))}return y};var k=d(f,this.yd,!0),l=[],m=[],n=[];if(f.ea.th){l=d(f.ea,f.ea.th.yd,!1);var r=q(f.ea.th.uf);for(d=r.next();!d.done;d=r.next())d=d.value,(d.fa.add?m:n).push(d)}k=g(k,m);l=g(l,m);k=h(k,a);l=h(l,a);
h=function(p){Ab(p,function(D,I){return D.Pg.fa.index-I.Pg.fa.index});var v=[];p=q(p);for(var B=p.next();!B.done;B=p.next()){B=[B.value];for(var y=q(v),x=y.next();!x.done;x=y.next()){x=x.value;var A=[];B=q(B);for(var z=B.next();!z.done;z=B.next())z=z.value,z.Pg.fa.gi(x.Pg.fa)?A.push(z):z.dh(x.o,x.F,A);B=A}y=q(B);for(z=y.next();!z.done;z=y.next()){A=z.value;z=[];v=q(v);for(x=v.next();!x.done;x=v.next())x.value.dh(A.o,A.F,z);v=z}v.push.apply(v,ba(B))}return v}(l.concat(k));if(h.length){d=[];g=q(h);
for(h=g.next();!h.done;h=g.next())if(k=h.value,k.Pg.xi){l=[];m=q(k.Pg.xi);for(h=m.next();!h.done;h=m.next())h.value.Oa(k.o,k.F,l);m=q(l);for(h=m.next();!h.done;h=m.next())h.value.fa=k.fa;d.push.apply(d,ba(l))}Ab(d,function(p,v){return p.o<v.o?-1:p.o>v.o?1:0});g=void 0;k=Number.NEGATIVE_INFINITY;d=q(d);for(h=d.next();!h.done;h=d.next())h=h.value,h.o>k?(g&&c(g),g=[h],g.Z=f.X(),g.fa=h.fa,g.o=h.o,g.F=h.F,this.pg.rk.push(g)):(g.push(h),g.F=h.F),k=h.F;g&&c(g)}}};
function Mj(a,b,c,d){Fc.call(this,a,b,c,d);this.index=Mj.index++;this.ea=null}Mj.index=-2147483648;Mj.prototype=Object.create(Fc.prototype);Mj.prototype.constructor=Mj;Mj.prototype.hb=function(a,b,c,d){return new Mj(a,b,c,d)};
Mj.prototype.replace=function(a){Fc.prototype.replace.call(this,a);if(this.th)for(var b=0;b<a.length;b++)a[b].th=this.th;if(this.mc)for(a=q(a),b=a.next();!b.done;b=a.next())if(b=b.value,b.mc)for(var c=q(this.mc),d=c.next();!d.done;d=c.next())d=d.value,0<=b.mc.indexOf(d)||b.mc.push(d);else b.mc=this.mc.slice()};function vh(a,b,c){this.aa=new Uj;this.o=a;this.F=b;this.Pg=c;this.fa=null}vh.prototype.X=function(a,b){a=new vh(a,b,this.Pg);a.aa=this.aa;a.fa=this.fa;return a};
vh.prototype.dh=function(a,b,c){this.F<=a||this.o>=b?c.push(this):(this.o<a&&c.push(this.X(this.o,a)),this.F>b&&c.push(this.X(b,this.F)))};vh.prototype.Oa=function(a,b,c){this.F<=a||this.o>=b||(this.F<=b&&this.o>=a?c.push(this):(b=b<this.F?b:this.F,a=a>this.o?a:this.o,c.push(this.X(a,b))))};function Uj(){this.ia=t.i.P.get("concr01");this.ba=ph;this.color=id;this.y=this.x=0}
function Pj(a,b){if(a.ia.name<b.ia.name)return-1;if(a.ia.name>b.ia.name)return 1;var c=Qe(a.ba,b.ba);return 0!=c?c:a.color.r<b.color.r?-1:a.color.r>b.color.r?1:a.color.bb<b.color.bb?-1:a.color.bb>b.color.bb?1:a.color.ra<b.color.ra?-1:a.color.ra>b.color.ra?1:a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0};function Qi(){this.index=Vj++;this.add=!0;this.ha=null;this.o=Number.POSITIVE_INFINITY;this.F=Number.NEGATIVE_INFINITY;this.floor=new Uj;this.ta=new Uj;this.color=id;this.Za=-1;this.yd=[]}var Vj=-2147483648;function Ri(a,b){a.floor&&(a.floor.color=jh);a.ta&&(a.ta.color=mh);a.ha=[];for(var c=[],d=0;d<b.length;d++)c.push(nj.ub(b[d].x,b[d].y));b=c;var f=b[b.length-1];for(c=0;c<b.length;c++)d=b[c],f=new Mj(f.x,f.y,d.x,d.y),f.fa=a,f.xi=a.Sc(),a.ha.push(f),f=d}
Qi.prototype.Sc=function(){var a=new vh(this.o,this.F);a.aa.color=this.color;return[a]};
Qi.prototype.stroke=function(){if(Pc(this.ha)){console.trace();debugger}if(this.F<=this.o){console.trace();debugger}for(var a=[],b=q(this.ha),c=b.next();!c.done;c=b.next()){c=c.value;var d=c.X();d.mc=[c.xi];a.push(d);Zc(d);delete d.ea.mc}b=new Tc;c=q(a);for(d=c.next();!d.done;d=c.next())d=d.value,b.Oa(d.K,d.H);d=b.w&-524288;c=b.o&-524288;d+=524288;for(c+=524288;d<b.D;){var f=new Mj(d,b.o,d,b.F);Zc(f);a.push(f);d+=524288}for(;c<b.F;)d=new Mj(b.w,c,b.D,c),Zc(d),a.push(d),c+=524288;a=Zi(a.slice(),!0);
a=Dj(a);for(b={};a.elements.length;){a:if(c=function(g){return function(){for(var k=q(g.Je),l=k.next();!l.done;l=k.next())if(l.value.mc)return!0;return!1}}(b),b.Je=Ej(a),b.Je&&!Pc(b.Je)){if(!c()&&(c=Sc(b.Je),0>=Qc(c.x,c.y,this.ha)))break a;d=new Wj(this);f=q(b.Je);for(c=f.next();!c.done;c=f.next()){c=c.value;var h=c.X();Zc(h);h.fa=this;c.mc&&(h.xi=c.mc[0]);d.ha.push(h)}d.stroke(jf(nf(b.Je.bound.w+2147483648>>>19,b.Je.bound.o+2147483648>>>19)))}b={Je:b.Je}}};
function zi(a){for(var b=q(a.yd),c=b.next();!c.done;c=b.next())c.value.remove();a.yd.length=0}Qi.prototype.X=function(){var a=new Qi;a.add=this.add;a.o=this.o;a.F=this.F;a.floor=this.floor;a.ta=this.ta;a.color=this.color;a.Za=this.Za;return a};Qi.prototype.gi=function(){return!0};function Wj(a){this.index=Xj++;this.fa=a;this.ha=[];this.pg=null}var Xj=-2147483648;function Sj(a,b){return a.fa.index<b.fa.index?-1:a.fa.index>b.fa.index?1:0}
Wj.prototype.stroke=function(a){if(Pc(this.ha)){console.trace();debugger}this.fa.yd.push(this);a=this.pg=a;a.yd.add(this);Ra(pj,a)};Wj.prototype.remove=function(){var a=this.pg;a.yd.remove(this);if(a.yd.elements.length)Ra(pj,a);else{for(var b=a.kj.first();null!=b.item;){var c=b.next;fb(b);fb(b.Gc);b=c}fb(a.cm);ff.remove(a);Sa(pj,a)}};var yj={},zj,Yj,Aj=-1;yj.ug=[];
function Bj(){function a(C,J){if(C.Ca.ga<J.Ca.ga)return-1;if(C.Ca.ga>J.Ca.ga)return 1;if(C.Ca.ca<J.Ca.ca)return-1;if(C.Ca.ca>J.Ca.ca)return 1;C=Jc(J.Ca,C.Ca.m,C.Ca.l);return 0>C?-1:0<C?1:0}function b(C,J){C=C[0];J=J[0];return C.y<J.y?-1:C.y>J.y?1:0}function c(C){if(!(2>C.length)){var J=2.197265625E7;var M=-1;for(var G,O,Q=1;Q<C.length;Q++)G=C[Q-1],O=C[Q],G=new Fc(G.m,G.l,O.K,O.H),O=(G.length>>3)*(Jc(G,O.m,O.l)>>3),O>=J||-2E3>=O||(J=O,M=Q);0>M||(G=C[M-1],O=C[M],J=O.hb(G.m,G.l,O.K,O.H),Q=O.length/(G.length+
O.length),J.weight=G.weight*(1-Q)+O.weight*Q,C.splice(M-1,2,J),c(C))}}function d(C){if(!(2>C.length)){var J=2.197265625E7;var M=-1;for(var G=C[C.length-1],O,Q=0;Q<C.length;Q++,G=O)O=C[Q],G=new Fc(G.m,G.l,O.K,O.H),G=(G.length>>3)*(Jc(G,O.m,O.l)>>3),G>=J||-2E3>=G||(J=G,M=Q);0>M||(C.unshift.apply(C,ba(C.splice(M))),G=C.pop(),O=C.shift(),J=O.hb(G.m,G.l,O.K,O.H),M=O.length/(G.length+O.length),J.weight=G.weight*(1-M)+O.weight*M,C.unshift(J),d(C))}}function f(C){function J(S,V){var Ga=Wc(S),qa=Wc(V),Pa=
-Hc(S,V)+Math.PI;if(Pa<kc(165)){var da=new E(S.K,S.H);da.round();da.oa=S.weight;da.Fa=255;G.push(da);var Na=new E(S.K-Ga.y,S.H+Ga.x);Na.round();Na.oa=da.oa;Na.Fa=0;O.push(Na);M(S);var Aa=new E(V.m,V.l);Aa.round();Aa.oa=V.weight;Aa.Fa=255;G.push(Aa);var cc=new E(V.m-qa.y,V.l+qa.x);cc.round();cc.oa=Aa.oa;cc.Fa=0;O.push(cc);Pa<=kc(90)||(S=new E(S.K+Ga.x,S.H+Ga.y),S.round(),S.oa=da.oa,S.Fa=0,Q.push([Na,da,S]),V=new E(V.m-qa.x,V.l-qa.y),V.round(),V.oa=Aa.oa,V.Fa=0,Q.push([V,Aa,cc]))}else Aa=new E(V.m,
V.l),Aa.oa=(S.weight+V.weight)*(1-Pa/Math.Dh),Aa.Fa=255,G.push(Aa),Pa<=kc(195)?(qa=new E(-Ga.y-qa.y,Ga.x+qa.x),qa.scale(5E9/qa.wc()),qa.x+=V.m,qa.y+=V.l,qa.round(),qa.oa=Aa.oa,qa.Fa=0,O.push(qa),M(S)):(cc=new E(S.K-Ga.y,S.H+Ga.x),cc.round(),cc.oa=Aa.oa,cc.Fa=0,O.push(cc),M(S),V=new E(V.m-qa.y,V.l+qa.x),V.round(),V.oa=Aa.oa,V.Fa=0,O.push(V),Q.push([cc,Aa,V]))}function M(S){if(ma)ma=!1;else{var V=O[O.length-2],Ga=G[G.length-2],qa=G[G.length-1],Pa=O[O.length-1];if(Ga.oa!=S.weight&&qa.oa!=S.weight)if(1E5<
S.length){var da=S.ub(5E4,0);da.round();da.oa=S.weight;da.Fa=255;var Na=S.ub(S.length-5E4,0);Na.round();Na.oa=S.weight;Na.Fa=255;Q.push([V,Ga,da]);Q.push([V,da,Na,Pa]);Q.push([Na,qa,Pa])}else if(da=new E(S.m+S.K>>1,S.l+S.H>>1),da.round(),1E5>S.length){var Aa=5E4/S.length-.5;Na=S.length/1E5;da.oa=.5*(Ga.oa+qa.oa)*(1-Na)+S.weight*Na;da.Fa=255;Aa=new E(da.x+(S.l-S.H)*Aa,da.y+(S.K-S.m)*Aa);Aa.oa=da.oa;Aa.Fa=S.weight*Na*255;Aa.round();Q.push([V,Ga,da,Aa]);Q.push([V,Aa,Pa]);Q.push([Aa,da,qa,Pa])}else da.oa=
S.weight,da.Fa=255,Q.push([V,Ga,da]),Q.push([V,da,Pa]),Q.push([da,qa,Pa]);else Ga.oa!=S.weight?5E4<S.length?(da=S.ub(5E4,0),da.round(),da.oa=S.weight,da.Fa=255,Q.push([V,Ga,da]),Q.push([V,da,qa,Pa])):Q.push([V,Ga,qa,Pa]):qa.oa!=S.weight?5E4<S.length?(da=S.ub(S.length-5E4,0),da.round(),da.oa=S.weight,da.Fa=255,Q.push([V,Ga,da,Pa]),Q.push([da,qa,Pa])):Q.push([Ga,qa,Pa,V]):Q.push([V,Ga,qa,Pa])}}var G=[],O=[],Q=[],ma=!1;if(C[0].m==C[C.length-1].K&&C[0].l==C[C.length-1].H){ma=!0;J(C[C.length-1],C[0]);
Q=[];for(var Y=1;Y<C.length;Y++)J(C[Y-1],C[Y]);J(C[C.length-1],C[0])}else{var X=C[0],Fa=Wc(X);Y=new E(X.m,X.l);Y.round();Y.oa=X.weight;Y.Fa=255;G.push(Y);X=new E(X.m-Fa.y,X.l+Fa.x);X.round();X.oa=Y.oa;X.Fa=0;O.push(X);for(Y=1;Y<C.length;Y++)J(C[Y-1],C[Y]);C=C[C.length-1];X=Wc(C);Y=new E(C.K,C.H);Y.round();Y.oa=C.weight;Y.Fa=255;G.push(Y);X=new E(C.K-X.y,C.H+X.x);X.round();X.oa=Y.oa;X.Fa=0;O.push(X);M(C)}return Q}function h(C){var J=new bb(lb);C=q(C);for(var M=C.next();!M.done;M=C.next())M=M.value,
yf(M.bound.J-5E4,M.bound.w-5E4,M.bound.L+5E4,M.bound.D+5E4,J);return J.elements}function g(C){var J=new bb(Gc);C=q(C);for(var M=C.next();!M.done;M=C.next())M=M.value,J.remove(Yc(M))||J.add(M);return J.elements}function k(C){var J=Dj(C,!1);C=[];for(var M=[];J.elements.length;){var G=Ej(J);G?Pc(G)?M.push(G):(G.wb=[],C.push(G)):console.log("failed circuit")}M=q(M);for(J=M.next();!J.done;J=M.next())Gj(J.value,C);M=[];C=q(C);for(J=C.next();!J.done;J=C.next())if(G=J.value,0==G.wb.length)M.push(G);else{Fj(G);
var O=q(G.wb);for(J=O.next();!J.done;J=O.next())Fj(J.value);M.push(Hj(G))}return M}function l(C,J,M){var G=Dj(C,!1);C=[];for(var O=new bb(vd);G.elements.length;){a:{var Q=G;var ma=[];ma.bound=new Tc;var Y=0,X=Q.elements[Y],Fa=X.elements.pop();X.elements.length||Q.elements.splice(Y,1);if(Fa)for(ma.bound.Oa(Fa.m,Fa.l);;){ma.push(Fa);ma.bound.Oa(Fa.K,Fa.H);if(Fa.K==ma[0].m&&Fa.H==ma[0].l)break a;Y=Q.contains(new E(Fa.K,Fa.H));if(0>Y)break a;X=Q.elements[Y];Fa=cb(X,Yc(Fa))-1;0>Fa&&(Fa+=X.elements.length);
Fa=X.elements.splice(Fa,1)[0];X.elements.length||Q.elements.splice(Y,1)}else ma=null}C.push(ma);if(ma[0].m!=ma[ma.length-1].K||ma[0].l!=ma[ma.length-1].H)Q=ma[0],Q.nj=ma,ma=new bb($c),ma.x=Q.m,ma.y=Q.l,ma=O.Oa(ma),ma.add(Q)}for(G=0;G<C.length;G++)if(Q=C[G],Q[0].m!=Q[Q.length-1].K||Q[0].l!=Q[Q.length-1].H)ma=Q[Q.length-1],Y=O.contains(new E(ma.K,ma.H)),0>Y||(X=O.elements[Y],ma=cb(X,Yc(ma))-1,0>ma&&(ma+=X.elements.length),ma=X.elements.splice(ma,1)[0],X.elements.length||O.elements.splice(Y,1),Y=C.indexOf(ma.nj),
C.splice(Y,1),Y<G&&G--,Q.push.apply(Q,ba(ma.nj)),Q.bound.Al(ma.nj.bound),G--);O=q(C);for(G=O.next();!G.done;G=O.next())delete G.value.nj;O=q(C);for(G=O.next();!G.done;G=O.next())G=G.value,G[0].m==G[G.length-1].K&&G[0].l==G[G.length-1].H?d(G):c(G);O=[];C=q(C);for(G=C.next();!G.done;G=C.next())O=O.concat(f(G.value));C=[];O=q(O);for(G=O.next();!G.done;G=O.next())for(G=G.value,Q=q(J),Y=Q.next();!Y.done;Y=Q.next()){a:for(ma=G,Y=q(Y.value),X=Y.next();!X.done;X=Y.next()){X=X.value;Fa=[];for(var S=ma[ma.length-
1],V=Jc(X,S.x,S.y),Ga=0;Ga<ma.length;Ga++){var qa=ma[Ga],Pa=Jc(X,qa.x,qa.y);if(0<Pa){if(0>V){V/=V-Pa;var da=1-V,Na=new E(S.x*da+qa.x*V,S.y*da+qa.y*V);Na.oa=S.oa*da+qa.oa*V;Na.Fa=S.Fa*da+qa.Fa*V;Fa.push(Na)}Fa.push(qa)}else 0>Pa?0<V&&(V/=V-Pa,da=1-V,Na=new E(S.x*da+qa.x*V,S.y*da+qa.y*V),Na.oa=S.oa*da+qa.oa*V,Na.Fa=S.Fa*da+qa.Fa*V,Fa.push(Na)):Fa.push(qa);S=qa;V=Pa}if(3>Fa.length){ma=null;break a}ma=Fa}ma&&C.push(ma)}J=q(C);for(G=J.next();!G.done;G=J.next()){C=G.value;for(O=0;O<C.length;O++)G=C[O],
G.index?C[O]=G.index:(G.index=yj.ze.bc.length,C[O]=G.index,Q=M(G),Q.oa=225*G.oa,Q.Fa=G.Fa,yj.ze.bc.push(Q));zj+=3*(C.length-2);yj.ze.ue.push(C)}}var m=ff.elements[Aj];if(m){yj.ug[2*Aj]=zj;for(var n=new bb(a),r=new bb(b),p=new bb(b),v={},B=q(m.ya),y=B.next();!y.done;v={od:v.od,Sd:v.Sd,Bj:v.Bj},y=B.next())if(v.Sd=y.value,v.Sd instanceof Og){v.Bj=function(C){return function(J){var M=J.Ca,G=Math.atan2(M.ca,M.ga)-Math.atan2(C.od.ca,C.od.ga);if(Math.abs(G>Math.PI?G-Math.Dh:G<-Math.PI?G+Math.Dh:G)>kc(5))return!1;
G=M.weight/(M.weight+1);var O=1-G;G=M.hb(Math.round(M.m*G+C.od.m*O),Math.round(M.l*G+C.od.l*O),Math.round(M.K*G+C.od.K*O),Math.round(M.H*G+C.od.H*O));if(500<=Math.abs(Jc(G,C.od.m,C.od.l))||500<=Math.abs(Jc(G,C.od.K,C.od.H))||500<=Math.abs(Jc(G,M.m,M.l))||500<=Math.abs(Jc(G,M.K,M.H)))return!1;J.Ca=G;G.weight=M.weight+1;J.push(C.Sd);return!0}}(v);var x=function(C){return function(){for(var J=q(n.elements),M=J.next();!M.done;M=J.next())if(C.Bj(M.value))return!0;return!1}}(v);v.od=Yc(v.Sd.Z);if(!x()){var A=
[v.Sd];A.Ca=v.od;A.Ca.weight=1;var z=n.Oa(A);z!=A&&z.push(v.Sd)}}else{var D=[v.Sd],I=void 0;v.Sd instanceof Pg?I=r.Oa(D):v.Sd instanceof Qg&&(I=p.Oa(D));I!=D&&I.push(v.Sd)}n=n.elements;r=r.elements;p=p.elements;for(var L={},R=q(n),ra=R.next();!ra.done;L={Ac:L.Ac,Ef:L.Ef},ra=R.next()){var ta=ra.value;L.Ef=Xc(ta.Ca,-1E3);ta.Ca=ta.Ca.hb(ta.Ca.m+L.Ef.x,ta.Ca.l+L.Ef.y,ta.Ca.K+L.Ef.x,ta.Ca.H+L.Ef.y);L.Ac=ta.Ca;var ia=[[],[],[],[]],pa=[],Lb=q(ta);for(y=Lb.next();!y.done;y=Lb.next()){var rb=y.value,lc=function(C,
J,M){C.m<J.w||C.m>J.D||C.H>J.F||C.l<J.o?M.push(C):(C.H<J.o&&M.push(C.hb(C.m,J.o,C.K,C.H)),C.l>J.F&&M.push(C.hb(C.m,C.l,C.K,J.F)))},Nb=function(C,J,M){C.l<J.o||C.l>J.F||C.K>J.D||C.m<J.w?M.push(C):(C.K<J.w&&M.push(C.hb(J.w,C.l,C.K,C.H)),C.m>J.D&&M.push(C.hb(C.m,C.l,J.D,C.H)))},Tb=function(C,J,M){C.m<J.w||C.m>J.D||C.l>J.F||C.H<J.o?M.push(C):(C.l<J.o&&M.push(C.hb(C.m,C.l,C.K,J.o)),C.H>J.F&&M.push(C.hb(C.m,J.F,C.K,C.H)))},Ic=function(C,J,M){C.l<J.o||C.l>J.F||C.m>J.D||C.K<J.w?M.push(C):(C.m<J.w&&M.push(C.hb(C.m,
C.l,J.w,C.H)),C.K>J.D&&M.push(C.hb(J.D,C.l,C.K,C.H)))},Ja=new Tc;Ja.w=Math.round(L.Ac.getParameter(rb.Z.K,rb.Z.H));Ja.D=Math.round(L.Ac.getParameter(rb.Z.m,rb.Z.l));Ja.o=rb.o;Ja.F=rb.F;for(var Pb=[[],[],[],[]],Ef=q(ia[0]),va=Ef.next();!va.done;va=Ef.next())Ic(va.value,Ja,Pb[0]);var Ff=q(ia[1]);for(va=Ff.next();!va.done;va=Ff.next())Tb(va.value,Ja,Pb[1]);var De=q(ia[2]);for(va=De.next();!va.done;va=De.next())Nb(va.value,Ja,Pb[2]);var Gf=q(ia[3]);for(va=Gf.next();!va.done;va=Gf.next())lc(va.value,Ja,
Pb[3]);ia=Pb;for(var yc=[[new Fc(Ja.w,Ja.o,Ja.D,Ja.o)],[new Fc(Ja.D,Ja.o,Ja.D,Ja.F)],[new Fc(Ja.D,Ja.F,Ja.w,Ja.F)],[new Fc(Ja.w,Ja.F,Ja.w,Ja.o)]],Hf=q(pa),ub=Hf.next();!ub.done;ub=Hf.next()){var be=ub.value;Pb=[[],[],[],[]];var If=q(yc[0]);for(va=If.next();!va.done;va=If.next())Ic(va.value,be,Pb[0]);var Ee=q(yc[1]);for(va=Ee.next();!va.done;va=Ee.next())Tb(va.value,be,Pb[1]);var ce=q(yc[2]);for(va=ce.next();!va.done;va=ce.next())Nb(va.value,be,Pb[2]);var de=q(yc[3]);for(va=de.next();!va.done;va=de.next())lc(va.value,
be,Pb[3]);yc=Pb}ia[0].push.apply(ia[0],ba(yc[0]));ia[1].push.apply(ia[1],ba(yc[1]));ia[2].push.apply(ia[2],ba(yc[2]));ia[3].push.apply(ia[3],ba(yc[3]));pa.push(Ja)}ia=ia[0].concat(ia[1].concat(ia[2].concat(ia[3])));ta.length=0;for(var Jf=k(ia),Fe=[],vb=q(Jf),Xb=vb.next();!Xb.done;Xb=vb.next()){for(var Kf=Xb.value,Ed=Kf.slice(),nd=new Tc,Lf=q(Kf),Qb=Lf.next();!Qb.done;Qb=Lf.next()){var Mf=Qb.value;nd.Oa(Mf.K,Mf.H)}var Ge=L.Ac.ub(nd.w,0),Nf=L.Ac.ub(nd.D,0);Ed.bound=new Td;Ed.bound.Oa(Ge.y,nd.o,Ge.x);
Ed.bound.Oa(Nf.y,nd.F,Nf.x);Fe.push.apply(Fe,ba(Lj(Ed)));ta.push(Ed)}var Of=h(ta);ia=[];for(var $a=q(Of),Db=$a.next();!Db.done;Db=$a.next())for(var bd=q(Db.value.ya),Yb=bd.next();!Yb.done;Yb=bd.next()){var kb=Yb.value;if(kb instanceof Qg){var Mc=Vc(L.Ac,kb.ha);if(Mc){Mc[0]=Math.round(Mc[0]);Mc[1]=Math.round(Mc[1]);var ee=new Fc(Mc[1],kb.y,Mc[0],kb.y);ee.weight=1;ia.push(ee)}}else if(kb instanceof Pg){var zc=Vc(L.Ac,kb.ha);if(zc){zc[0]=Math.round(zc[0]);zc[1]=Math.round(zc[1]);var Pf=new Fc(zc[0],
kb.y,zc[1],kb.y);Pf.weight=1;ia.push(Pf)}}else{var Fd=L.Ac,nc=kb.Z,Ac=Jc(Fd,nc.m,nc.l),wb=Jc(Fd,nc.K,nc.H),He=Fd.getParameter(nc.m,nc.l),za=Fd.getParameter(nc.K,nc.H);if(Ac<wb){if(!(-256>wb||256<Ac)){var Qf=Ac/(Ac-wb),Nc=Math.round(He*(1-Qf)+za*Qf),Rf=Math.atan2(-Ac,He-Nc);if(!(Rf<kc(15))){var Bc=new Fc(Nc,kb.o,Nc,kb.F);Bc.weight=(180*Rf/Math.PI-15)/75;1<Bc.weight&&(Bc.weight=1);ia.push(Bc)}}}else if(Ac>wb&&!(-256>Ac)&&!(256<wb)){var Sf=Ac/(Ac-wb),Gd=Math.round(He*(1-Sf)+za*Sf),Tf=Math.atan2(-wb,
Gd-za);if(!(Tf<kc(15))){var fe=new Fc(Gd,kb.F,Gd,kb.o);fe.weight=(180*Tf/Math.PI-15)/75;1<fe.weight&&(fe.weight=1);ia.push(fe)}}}}l(ia,Fe,function(C){return function(J){var M=Math.round(J.x);J=Math.round(J.y);M/=C.Ac.length;return new md(Math.round(C.Ac.l+(C.Ac.H-C.Ac.l)*M)-C.Ef.y,J,Math.round(C.Ac.m+(C.Ac.K-C.Ac.m)*M)-C.Ef.x)}}(L))}var cd={},Uf=q(r);for(ra=Uf.next();!ra.done;cd={Rg:cd.Rg},ra=Uf.next()){var Hd=ra.value;cd.Rg=Hd[0].y;var Zb=[],Id=q(Hd);for(y=Id.next();!y.done;y=Id.next())Zb.push.apply(Zb,
ba(y.value.ha));Hd.length=0;var Rg=k(g(Zb)),la=[],Ta=q(Rg);for(Xb=Ta.next();!Xb.done;Xb=Ta.next()){var Ca=Xb.value,Rb=Ca.slice(),Oc=new Tc,Jd=q(Ca);for(Qb=Jd.next();!Qb.done;Qb=Jd.next()){var Vf=Qb.value;Oc.Oa(Vf.K,Vf.H)}Rb.bound=new Td;Rb.bound.J=Oc.w;Rb.bound.L=Oc.D;Rb.bound.w=Oc.o;Rb.bound.D=Oc.F;Rb.bound.o=Rb.bound.F=cd.Rg;la.push.apply(la,ba(Lj(Rb)));Hd.push(Rb)}var Ie=h(Hd);Zb=[];var Je=q(Ie);for(Db=Je.next();!Db.done;Db=Je.next()){var Ke=q(Db.value.ya);for(Yb=Ke.next();!Yb.done;Yb=Ke.next()){var Kd=
Yb.value;if(Kd instanceof Og&&!(Kd.o>cd.Rg||Kd.F<=cd.Rg)){var Wf=Kd.Z.X();Wf.weight=1;Zb.push(Wf)}}}l(Zb,la,function(C){return function(J){return new md(Math.round(J.y),C.Rg,Math.round(J.x))}}(cd))}var Cc={},Xf=q(p);for(ra=Xf.next();!ra.done;Cc={Sg:Cc.Sg},ra=Xf.next()){var Eb=ra.value;Cc.Sg=Eb[0].y;var Ld=[],Yf=q(Eb);for(y=Yf.next();!y.done;y=Yf.next())for(var $b=q(y.value.ha),Zf=$b.next();!Zf.done;Zf=$b.next()){var Md=Zf.value;Ld.push(Md.hb(-Md.K,Md.H,-Md.m,Md.l))}Eb.length=0;var od=k(g(Ld)),ge=
[],Le=q(od);for(Xb=Le.next();!Xb.done;Xb=Le.next()){var $f=Xb.value,oc=$f.slice(),dd=new Tc,ag=q($f);for(Qb=ag.next();!Qb.done;Qb=ag.next()){var bg=Qb.value;dd.Oa(bg.K,bg.H)}oc.bound=new Td;oc.bound.J=-dd.D;oc.bound.L=-dd.w;oc.bound.w=dd.o;oc.bound.D=dd.F;oc.bound.o=oc.bound.F=Cc.Sg;ge.push.apply(ge,ba(Lj(oc)));Eb.push(oc)}var pd=h(Eb);Ld=[];var he=q(pd);for(Db=he.next();!Db.done;Db=he.next()){var ac=q(Db.value.ya);for(Yb=ac.next();!Yb.done;Yb=ac.next()){var bc=Yb.value;if(bc instanceof Og&&!(bc.o>=
Cc.Sg||bc.F<Cc.Sg)){var Me=bc.Z.hb(-bc.Z.K,bc.Z.H,-bc.Z.m,bc.Z.l);Me.weight=1;Ld.push(Me)}}}l(Ld,ge,function(C){return function(J){return new md(Math.round(J.y),C.Sg,-Math.round(J.x))}}(Cc))}yj.ug[2*Aj+1]=zj-yj.ug[2*Aj];Aj++;return!0}Yj=yj.ze;delete yj.ze;for(var ed=0;ed<ff.elements.length;ed++)ff.elements[ed].$k=yj.ug[2*ed],ff.elements[ed].Zk=yj.ug[2*ed+1];delete yj.ug;Aj=-1;Yj.compile();return!1};t.Ta=function(a){t.Ha.call(this,a);this.h=new w(0,0,0);this.Ja=null;this.ik=NaN;this.Ub=0;this.ja={qa:-2147483648,lb:new w(1,1,1)};this.Xk=new db;this.Nh=new Tc};t.Ta.prototype=Object.create(t.Ha.prototype);t.Ta.prototype.constructor=t.Ta;t.Ta.index=-2147483648;t.Ta.prototype.create=function(){this.index=t.Ta.index++;t.ni.push(this);t.Ha.prototype.create.call(this)};t.Ta.prototype.remove=function(){for(var a=this.Xk.first();null!=a.item;){var b=a.next;fb(a);fb(a.Gc);a=b}t.ni.remove(this);t.Ha.prototype.remove.call(this)};
t.Ta.prototype.step=function(){this.Nh.Kf(this.h.z,this.h.x)||Cj(this);var a=null,b=Ve(this.h,new w(0,-1E8,0),We);b&&(a=Xe(b.item.Y));a?(a!=this.Ja&&(this.ik=t.j),this.Ja=a,ig(this.h,a,this.ja.lb)):this.mk();t.Ha.prototype.step.call(this)};t.Ta.prototype.mk=function(){this.remove()};
function Cj(a){for(var b=a.h.z-a.Ub,c=a.h.z+a.Ub,d=a.h.x-a.Ub,f=a.h.x+a.Ub,h=a.Xk.first(),g=[ef];g.length;){var k=g.shift();if(k instanceof pf)b<=k.value&&g.push(k.Xe),c>=k.value&&g.push(k.Ye);else if(k instanceof qf)d<=k.value&&g.push(k.Xe),f>=k.value&&g.push(k.Ye);else{for(;null!=h.item&&!(h.item.index>=k.index);){var l=h.next;fb(h);fb(h.Gc);h=l}if(h.item==k)h=h.next;else{l=new eb(k);var m=new eb(a);l.Gc=m;m.Gc=l;hb(l,h);gb(k.kj,m)}}}for(;null!=h.item;)g=h.next,fb(h),fb(h.Gc),h=g;a.Nh.w=(b>>19<<
19)+a.Ub;a.Nh.D=((c>>19)+1<<19)-a.Ub;a.Nh.o=(d>>19<<19)+a.Ub;a.Nh.F=((f>>19)+1<<19)-a.Ub}t.ni=new bb(lb);t.gg=function(a){t.Node.call(this,a);this.mb=1E5};t.gg.prototype=Object.create(t.Node.prototype);t.gg.prototype.constructor=t.gg;t.gg.color=new F(0,0,0,64);
t.gg.prototype.ab=function(){var a=new H;a.u=0;a.A=0;a.B=this.mb;a.v=this.mb;a.m11=0;a.m12=0;a.C=0;a.m21=1;a.m22=0;a.s=this.Ma.s;a.m31=this.Ma.m31+500;a.m32=this.Ma.m32;var b=Ve(new w(this.Ma.s,this.Ma.m31,this.Ma.m32),new w(0,-1E8,0));b&&(a.m31-=b.d);t.I.M("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,0,4);t.Node.prototype.ab.call(this)};var Zj,ak=980700/3600*2,bk=new w(0,-ak,0),ck=new bb(lb),dk=new t.Node("physProcessor");
dk.step=function(){Zj=new gc;for(var a=q(ck.elements),b=a.next();!b.done;b=a.next()){b=b.value;b.df=0;b.t=0;b.um=b.Qh(b.h,b.Ba,b.pb);var c=b.am();b.input();b.vc&&!b.bi()&&0<b.rf&&(b.G.x+=bk.x,b.G.y+=bk.y,b.G.z+=bk.z);b.G.scale(b.en);var d=xd(b.G,b.Qb,new w(0,0,0));if(0<b.Xf){for(var f=b,h=b.um,g=new w(0,0,0),k=0;k<h.length;k++){var l=h[k],m=-rc(d,l);if(!(0>=m)){m*=f.Xf;var n=rc(f.G,l);l=new w(f.G.x-l.x*n,f.G.y-l.y*n,f.G.z-l.z*n);m/=l.length();1<m&&(m=1);g.x-=l.x*m;g.y-=l.y*m;g.z-=l.z*m}}f.G.add(g)}b.gb.set(.5*
b.Qb.x+.5*b.G.x,.5*b.Qb.y+.5*b.G.y,.5*b.Qb.z+.5*b.G.z);b.gb.y+=c;b.gb.round();b.bound=ek(b.h,b.Ba,b.pb,b.gb)}a=q(ck.elements);for(b=a.next();!b.done;b=a.next())b.value.handleEvent();for(a=0;!Zj.Zi();){b=Zj.pop();if(10<++a)break;b.target?(c=b.source,f=b.target,c.df==b.kl&&f.df==b.Fm&&(c.df++,f.df++,fk(c,b),fk(f,b),c.handleEvent(),f.handleEvent(),c.jj(f),f.jj(c))):(c=b.source,c.df==b.kl&&(c.df++,fk(c,b),c.handleEvent()))}a=q(ck.elements);for(b=a.next();!b.done;b=a.next())b=b.value,b.h.x+=b.gb.x,b.h.y+=
b.gb.y,b.h.z+=b.gb.z,b.Qb.set(b.G.x,b.G.y,b.G.z),b.transform.s=b.h.x,b.transform.m31=b.h.y,b.transform.m32=b.h.z};function gk(a){t.Ta.call(this,a);this.G=new w(0,0,0);this.Qb=new w(0,0,0);this.pb=this.Ba=0;this.rf=1;this.Xf=0;this.en=1;this.qf=0;this.Yd=new bb(lb);this.t=this.df=0;this.gb=new w(0,0,0);this.vc=!0}gk.prototype=Object.create(t.Ta.prototype);e=gk.prototype;e.constructor=gk;e.create=function(){t.Ta.prototype.create.call(this);ck.add(this)};
e.remove=function(){t.Ta.prototype.remove.call(this);ck.remove(this)};e.am=function(){return 0};function fk(a,b){var c=(b.t-a.t)/(1-a.t);c=new w(a.gb.x*c,a.gb.y*c,a.gb.z*c);c.round();a.h.add(c);a.gb.sub(c);a.t=b.t}
e.handleEvent=function(){for(var a=new w(this.G.x,this.G.y,this.G.z),b=this.Qh(this.h,this.Ba,this.pb),c=hk(this),d=0;d<b.length;d++){var f=b[d],h=!1,g=-rc(this.G,f);0<g&&(2E3<g*this.qf&&(h=!0,g*=1+this.qf),this.G.x+=f.x*g,this.G.y+=f.y*g,this.G.z+=f.z*g);g=-rc(this.gb,f);0<g&&(h&&(g*=1+this.qf),this.gb.x+=f.x*g,this.gb.y+=f.y*g,this.gb.z+=f.z*g)}for(d=0;d<c.length;d++){h=function(m,n){var r=rc(m,f),p=rc(n,f);var v=k.rf;var B=l.rf;r>=p?v=[r,p]:(v=(v*r+B*p)/(v+B),v=[v+(v-r)*k.qf,v+(v-p)*l.qf]);r=v[0]-
r;p=v[1]-p;m.x+=f.x*r;m.y+=f.y*r;m.z+=f.z*r;n.x+=f.x*p;n.y+=f.y*p;n.z+=f.z*p};f=c[d];var k=this,l=f.source;l.index<k.index||(h(k.gb,l.gb),h(k.G,l.G))}vc(this.gb,b);vc(this.G,b);0<b.length+c.length&&(xd(this.G,a,a),a=a.na(1),a/=1+this.qf,this.ij(a));this.bound=ek(this.h,this.Ba,this.pb,this.gb);if(this.gb.bk())return null;t.pf();a=q(b);for(b=a.next();!b.done;b=a.next())b.value.source.qa=t.qa;c=q(c);for(b=c.next();!b.done;b=c.next())b.value.source.qa=t.qa;0>=this.Ba||!(c=this.Oi(this.h,this.Ba,this.pb,
this.gb,!0))||(c.source=this,c.kl=this.df,c.target&&(c.Fm=c.target.df),Zj.add(c,c.t))};
e.Oi=function(a,b,c,d,f){for(var h=this,g=new rf(a,d,b),k=null,l=1,m=g.next();m&&!(m.t>l);){for(var n=function(v){v.qa!=t.qa&&(v=v.og(a,b,c,d))&&(v.d=v.t*d.length(),-1>v.d||(v.t=h.t+v.t*(1-h.t),v.t>=l||(k=v,l=v.t)))},r=q(m.node.ya),p=r.next();!p.done;p=r.next())n(p.value);m=q(m.node.Hd);for(p=m.next();!p.done;p=m.next())n(p.value);m=g.next()}if(!f)return k;for(f=0;f<ck.elements.length;f++)if(g=ck.elements[f],this!=g&&g.qa!=t.qa&&!this.Yd.get(g)&&!g.Yd.get(this)&&Ud(this.bound,g.bound)&&(n=this.t>
g.t?this.t:g.t,p=ik(this,n),m=ik(g,n),r=jk(p.gj,p.r,p.c,p.ob,m.gj,m.r,m.c,m.ob)))r.d=r.t*xd(p.ob,m.ob,new w(0,0,0)).length(),-1>r.d||(r.t=n+r.t*(1-n),r.t>=l||(r.target=g,k=r,l=r.t));return k};function ik(a,b){b=(b-a.t)/(1-a.t);b=new w(a.gb.x*b,a.gb.y*b,a.gb.z*b);b.round();var c={};c.gj=(new w(a.h.x,a.h.y,a.h.z)).add(b);c.r=a.Ba;c.c=a.pb;c.ob=(new w(a.gb.x,a.gb.y,a.gb.z)).sub(b);return c}
e.Qh=function(a,b,c){var d=xf(a,b),f=[];t.pf();d=q(d);for(var h=d.next();!h.done;h=d.next()){h=h.value;for(var g=q(h.ya),k=g.next();!k.done;k=g.next())k=k.value,k.qa!=t.qa&&k.Xg(a,b,c,f);h=q(h.Hd);for(k=h.next();!k.done;k=h.next())g=k.value,g.qa!=t.qa&&g.Xg(a,b,c,f)}return f};
function hk(a){for(var b=[],c=0;c<ck.elements.length;c++){var d=ck.elements[c];if(a!=d&&!a.Yd.get(d)&&!d.Yd.get(a)){var f=a.h;var h=a.Ba,g=a.pb,k=d.h,l=d.Ba,m=d.pb;if(0==g&&0==m){f=new w(f.x-k.x,f.y-k.y,f.z-k.z);var n=f.na(1);f.d=rc(new w(k.x+f.x*l,k.y+f.y*l,k.z+f.z*l),f)+h;n-=h+l;f=2<n||n<-h?null:f}else{if(f.y-g>k.y+m){n=new w(f.x-k.x,f.y-g-(k.y+m),f.z-k.z);var r=n.na(1);f=new w(k.x+n.x*l,k.y+n.y*l,k.z+n.z*l)}else f.y+g<k.y-m?(n=new w(f.x-k.x,f.y+g-(k.y-m),f.z-k.z),r=n.na(1),f=new w(k.x+n.x*l,k.y+
n.y*l,k.z+n.z*l)):(n=new w(f.x-k.x,0,f.z-k.z),r=n.na(1),f=new w(k.x+n.x*l,(f.y*m+k.y*g)/(g+m),k.z+n.z*l));n.d=rc(f,n)+h;r-=h+l;f=2<r||r<-h?null:n}f&&(f.source=d,b.push(f))}}return b}e.ij=function(){};e.jj=function(){};e.input=function(){};e.bi=function(){return!1};function kk(a){gk.call(this,a);this.Gk=this.Mj=this.hd=this.ck=this.oh=this.$c=0;this.$i=this.zh=Number.NEGATIVE_INFINITY;this.Am=this.hi=!1;this.Rc=0;this.ff=18}kk.prototype=Object.create(gk.prototype);kk.prototype.constructor=kk;
kk.prototype.Oi=function(a,b,c,d,f){for(var h=this,g=new rf(a,d,b),k=null,l=1,m=g.next();m&&!(m.t>l);){for(var n=function(v){v.qa!=t.qa&&af(v.flags)&&(v=v.og(a,b,c,d))&&(v.d=v.t*d.length(),-1>v.d||(v.t=h.t+v.t*(1-h.t),v.t>=l||(k=v,l=v.t)))},r=q(m.node.ya),p=r.next();!p.done;p=r.next())n(p.value);m=q(m.node.Hd);for(p=m.next();!p.done;p=m.next())n(p.value);m=g.next()}if(!f)return k;for(f=0;f<ck.elements.length;f++)if(g=ck.elements[f],this!=g&&g.qa!=t.qa&&!this.Yd.get(g)&&!g.Yd.get(this)&&Ud(this.bound,
g.bound)&&(n=this.t>g.t?this.t:g.t,p=ik(this,n),m=ik(g,n),r=jk(p.gj,p.r,p.c,p.ob,m.gj,m.r,m.c,m.ob)))r.d=r.t*xd(p.ob,m.ob,new w(0,0,0)).length(),-1>r.d||(r.t=n+r.t*(1-n),r.t>=l||(r.target=g,k=r,l=r.t));return k};
gk.prototype.Qh=function(a,b,c){var d=xf(a,b),f=[];t.pf();d=q(d);for(var h=d.next();!h.done;h=d.next()){h=h.value;for(var g=q(h.ya),k=g.next();!k.done;k=g.next())k=k.value,k.qa!=t.qa&&af(k.flags)&&k.Xg(a,b,c,f);h=q(h.Hd);for(k=h.next();!k.done;k=h.next())g=k.value,g.qa!=t.qa&&af(g.flags)&&g.Xg(a,b,c,f)}return f};kk.Dj=function(a){return Math.sqrt(2*a*ak)};e=kk.prototype;e.bi=function(){return this.zh<t.j-1?!1:!0};
e.am=function(){var a=0,b=this.Am?this.Mj:this.hd,c=new w(this.h.x,this.h.y-this.pb-.5*this.Ba,this.h.z);0>=this.G.y&&(this.hi=!1);if(this.bi()){this.hi=!1;var d=0;t.pf();var f=this.Gk;if(f=this.Oi(c,.5*this.Ba,0,new w(0,-f,0)))d=f.d;c.y+=.5*this.Ba;c.y-=d;c=this.Qh(c,this.Ba,0);f=Number.NEGATIVE_INFINITY;for(var h=0;h<c.length;h++){var g=c[h];g.y>f&&(f=g.y)}0<f&&(this.zh=t.j,a=b-2*(this.Ba+this.pb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}else if(!this.hi){d=0;t.pf();f=this.hd-2*this.pb-this.Ba;if(f=
this.Oi(c,.5*this.Ba,0,new w(0,-f,0)))d=f.d;c.y+=.5*this.Ba;c.y-=d;c=this.Qh(c,this.Ba,0);f=Number.NEGATIVE_INFINITY;for(h=0;h<c.length;h++)g=c[h],g.y>f&&(f=g.y);0<f&&(this.zh=t.j,a=b-2*(this.Ba+this.pb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}return a};e.Wj=function(){return new w(0,0,0)};e.vl=function(){};
e.input=function(){gk.prototype.input.call(this);this.vl();var a=this.Wj();if(t.b.da==this){var b=this.transform;a.set(b.u*a.x+b.C*a.z,0,b.B*a.x+b.m22*a.z)}b=a.na(1);0==b&&(this.Rc=0);if(this.bi())0<b&&(this.G.x+=a.x*this.oh,this.G.z+=a.z*this.oh,this==t.b.da?(this.Rc>=2*this.ff&&(this.Rc=0),0==this.Rc?t.i.W.get("stepConcrete01").play({gain:.5}):this.Rc==this.ff&&t.i.W.get("stepConcrete02").play({gain:.5})):(this.Rc>=2*this.ff&&(this.Rc=0),0==this.Rc?t.i.W.get("stepConcrete01").play({gain:1,pitch:2},
this.h,4):this.Rc==this.ff&&t.i.W.get("stepConcrete02").play({gain:1,pitch:2},this.h,4)),this.Rc=this.Da&&.5<this.Da.focus?this.Rc+.5:this.Rc+1),this.G.scale(this.$c/(this.$c+this.oh));else{b=.25*this.oh;var c=new E(this.G.z,this.G.x),d=c.length(),f=rc(this.G,a);0>f&&(f=0);f>this.$c&&(f=this.$c);b=this.$c/(this.$c+b)*(f+b)-f;d>this.$c&&c.scale(Math.max(0,d-b)/d);c.x+=a.z*b;c.y+=a.x*b;this.G.z=c.x;this.G.x=c.y}this.$i<t.j||this.zh<t.j-15||(this.G.y=this.ck,this.$i=this.zh=Number.NEGATIVE_INFINITY,
this.hi=!0)};var lk=2,mk=4,Qj=8;function nk(a){return a&lk||a&mk?!1:!0}function tf(a){return a&mk?!1:!0}function We(a){return a&Qj?!0:!1}function af(a){return a&1?!1:!0}function ok(){this.index=pk++;this.t=NaN;this.n=this.p=null;this.Wa=!0}var pk=-2147483648;function vf(a,b){return a.t<b.t?-1:a.t>b.t?1:1==a.Wa&&0==b.Wa?-1:0==a.Wa&&1==b.Wa?1:a.index<b.index?-1:a.index>b.index?1:0}
function ek(a,b,c,d){var f=new Td,h=a.z-b;h<f.J&&(f.J=h);h=a.z+b;h>f.L&&(f.L=h);h=a.z+d.z-b;h<f.J&&(f.J=h);h=a.z+d.z+b;h>f.L&&(f.L=h);h=a.x-b;h<f.w&&(f.w=h);h=a.x+b;h>f.D&&(f.D=h);h=a.x+d.x-b;h<f.w&&(f.w=h);h=a.x+d.x+b;h>f.D&&(f.D=h);b+=c;c=a.y-b;c<f.o&&(f.o=c);c=a.y+b;c>f.F&&(f.F=c);c=a.y+d.y-b;c<f.o&&(f.o=c);c=a.y+d.y+b;c>f.F&&(f.F=c);return f}
function qk(a,b,c,d,f){var h=qc(new w(a.x-c.x,0,a.z-c.z),new w(b.x,0,b.z),d);if(!h)return null;d=new ok;d.t=h.Ra;d.p=new w(a.x+b.x*d.t,a.y+b.y*d.t,a.z+b.z*d.t);d.n=new w(d.p.x-c.x,0,d.p.z-c.z);d.n.na(1);var g=new ok;g.t=h.Vc;g.p=new w(a.x+b.x*g.t,a.y+b.y*g.t,a.z+b.z*g.t);g.n=new w(g.p.x-c.x,0,g.p.z-c.z);g.n.na(1);if(0<b.y){h=(c.y-f-a.y)/b.y;var k=(c.y+f-a.y)/b.y;h>d.t&&(d=new ok,d.t=h,d.p=new w(a.x+b.x*d.t,c.y-f,a.z+b.z*d.t),d.n=new w(0,-1,0));k<g.t&&(g=new ok,g.t=k,g.p=new w(a.x+b.x*g.t,c.y+f,a.z+
b.z*g.t),g.n=new w(0,1,0))}else if(0>b.y)h=(c.y+f-a.y)/b.y,k=(c.y-f-a.y)/b.y,h>d.t&&(d=new ok,d.t=h,d.p=new w(a.x+b.x*d.t,c.y+f,a.z+b.z*d.t),d.n=new w(0,1,0)),k<g.t&&(g=new ok,g.t=k,g.p=new w(a.x+b.x*g.t,c.y-f,a.z+b.z*g.t),g.n=new w(0,-1,0));else if(a.y>c.y+f||a.y<c.y-f)return null;if(d.t>g.t)return null;d.Wa=!0;g.Wa=!1;d.ea=g;g.ea=d;d.ob=b.X();g.ob=b.X().li();return d}
function rk(a,b,c,d,f){var h=new w(c.x,NaN,c.z),g=new w,k=new w,l=new E(c.z-a.z,c.x-a.x);var m=new E(b.z,b.x);var n=m.na(1);l=ud(l,m);h.y=a.y+b.y/n*l;h.y>c.y+f?(h.y=c.y+f,m=rc((new w(c.x,c.y+f,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):h.y<c.y-f?(h.y=c.y-f,m=rc((new w(c.x,c.y-f,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):g.set(a.x+m.y*l,h.y,a.z+m.x*l);xd(h,g,k);m=k.na(1);if(m<d){l=n=null;var r=qc(new w(a.x-c.x,0,a.z-c.z),new w(b.x,0,b.z),d);if(r){var p=new ok;p.t=r.Ra;p.p=new w(a.x+
b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t);p.p.y<=c.y+f&&p.p.y>=c.y-f&&(p.n=new w(p.p.x-c.x,0,p.p.z-c.z),p.n.na(1),p.ob=b.X(),p.Wa=!0,n=p);p=new ok;p.t=r.Vc;p.p=new w(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t);p.p.y<=c.y+f&&p.p.y>=c.y-f&&(p.n=new w(p.p.x-c.x,0,p.p.z-c.z),p.n.na(1),p.ob=b.X().li(),p.Wa=!1,l=p)}if(!n||!l)if(r=pc(a,b,new w(c.x,c.y+f,c.z),d))n||(p=new ok,p.t=r.Ra,p.p=new w(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y>c.y+f&&(p.n=new w(p.p.x-c.x,p.p.y-(c.y+f),p.p.z-c.z),p.n.na(1),p.ob=b.X(),p.Wa=!0,n=p)),
l||(p=new ok,p.t=r.Vc,p.p=new w(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y>c.y+f&&(p.n=new w(p.p.x-c.x,p.p.y-(c.y+f),p.p.z-c.z),p.n.na(1),p.ob=b.X().li(),p.Wa=!1,l=p));if(!n||!l)if(r=pc(a,b,new w(c.x,c.y-f,c.z),d))n||(p=new ok,p.t=r.Ra,p.p=new w(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y<c.y-f&&(p.n=new w(p.p.x-c.x,p.p.y-(c.y-f),p.p.z-c.z),p.n.na(1),p.ob=b.X(),p.Wa=!0,n=p)),l||(p=new ok,p.t=r.Vc,p.p=new w(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y<c.y-f&&(p.n=new w(p.p.x-c.x,p.p.y-(c.y-f),p.p.z-c.z),
p.n.na(1),p.ob=b.X().li(),p.Wa=!1,l=p));if(n&&l)return n.ea=l,l.ea=n,{cf:n,sd:l}}return{oi:g,Fn:h,Pe:k,Fj:m,En:d}}function sk(a,b,c,d){b=pc(d,c,a,b);if(!b)return null;var f=new ok;f.t=-b.Vc;f.p=d;f.n=(new w(a.x-(d.x+c.x*b.Vc),a.y-(d.y+c.y*b.Vc),a.z-(d.z+c.z*b.Vc))).round();f.n.na(1);f.Wa=!0;return f}
function tk(a,b,c,d,f){var h=rc(c,f);c=new w(c.x-f.x*h,c.y-f.y*h,c.z-f.z*h);d=new w(d.x-a.x,d.y-a.y,d.z-a.z);var g=rc(d,f);d.set(d.x-f.x*g,d.y-f.y*g,d.z-f.z*g);b=qc(d,c,b);if(!b)return null;g=new ok;g.t=-b.Vc;g.p=(new w(a.x+d.x+f.x*h*g.t,a.y+d.y+f.y*h*g.t,a.z+d.z+f.z*h*g.t)).round();g.n=new w(-(d.x+c.x*b.Vc),-(d.y+c.y*b.Vc),-(d.z+c.z*b.Vc));g.n.na(1);g.Wa=!0;return g}
function jk(a,b,c,d,f,h,g,k){if(0==c&&0==g)return c=xd(a,f,new w(0,0,0)),g=xd(d,k,new w(0,0,0)),0==g.length()?h=null:(c=qc(c,g,b+h))?(a=new w(a.x+d.x*c.Ra,a.y+d.y*c.Ra,a.z+d.z*c.Ra),f=new w(f.x+k.x*c.Ra,f.y+k.y*c.Ra,f.z+k.z*c.Ra),k=new ok,k.t=c.Ra,b=h/(h+b),d=1-b,k.p=(new w(f.x*d+a.x*b,f.y*d+a.y*b,f.z*d+a.z*b)).round(),k.n=new w((k.p.x-f.x)/h,(k.p.y-f.y)/h,(k.p.z-f.z)/h),h=k):h=null,h;var l=new w(a.x-f.x,0,a.z-f.z),m=new w(d.x-k.x,0,d.z-k.z);if(0==m.length())return null;l=qc(l,m,b+h);if(!l)return null;
var n=new w(a.x+d.x*l.Ra,a.y+d.y*l.Ra,a.z+d.z*l.Ra);m=new w(f.x+k.x*l.Ra,f.y+k.y*l.Ra,f.z+k.z*l.Ra);var r=h/(h+b),p=1-r;n=new w(m.x*p+n.x*r,m.y*p+n.y*r,m.z*p+n.z*r);n.round();if(n.y>m.y+g){l=new w(a.x-f.x,a.y-c-(f.y+g),a.z-f.z);m=xd(d,k,new w(0,0,0));l=qc(l,m,b+h);if(!l)return null;n=new w(a.x+d.x*l.Ra,a.y-c+d.y*l.Ra,a.z+d.z*l.Ra);m=new w(f.x+k.x*l.Ra,f.y+g+k.y*l.Ra,f.z+k.z*l.Ra);f=new ok;f.t=l.Ra;r=h/(h+b);p=1-r;f.p=(new w(m.x*p+n.x*r,(m.y+g)*p+(n.y-c)*r,m.z*p+n.z*r)).round();f.n=new w((f.p.x-m.x)/
h,(f.p.y-(m.y+g))/h,(f.p.z-m.z)/h)}else if(n.y<m.y-g){l=new w(a.x-f.x,a.y+c-(f.y-g),a.z-f.z);m=xd(d,k,new w(0,0,0));l=qc(l,m,b+h);if(!l)return null;n=new w(a.x+d.x*l.Ra,a.y+c+d.y*l.Ra,a.z+d.z*l.Ra);m=new w(f.x+k.x*l.Ra,f.y-g+k.y*l.Ra,f.z+k.z*l.Ra);f=new ok;f.t=l.Ra;r=h/(h+b);p=1-r;f.p=(new w(m.x*p+n.x*r,(m.y-g)*p+(n.y+c)*r,m.z*p+n.z*r)).round();f.n=new w((f.p.x-m.x)/h,(f.p.y-(m.y-g))/h,(f.p.z-m.z)/h)}else f=new ok,f.t=l.Ra,f.p=n,f.n=new w((f.p.x-m.x)/h,0,(f.p.z-m.z)/h);return f}
Pg.prototype.og=function(a,b,c,d){c=this.y+c;if(0<=d.y)var f=null;else{var h=new ok;h.t=-(a.y-c-b)/d.y;h.p=(new w(a.x+d.x*h.t,a.y-b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new w(0,1,0);f=h}if(!f)return null;if(0==Kc(f.p.z,f.p.x,this.ha).code)return f.item=this,f;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ha.length;l++){var m=this.ha[l];f=new w(m.l,c,m.m);var n=new w(m.H-m.l,0,m.K-m.m);n.scale(1/m.length);(f=tk(a,b,d,f,n))?(n=m.getParameter(f.p.z,f.p.x),!(0>n||n>m.length)&&
f.t<k&&(k=f.t,g=f)):h=0==l?h|(1<<this.ha.length-1)+1:h|3<<l-1}for(l=0;l<this.ha.length;l++)h&1<<l||(m=this.ha[l],(f=sk(a,b,d,new w(m.H,c,m.K)))&&f.t<k&&(k=f.t,g=f));return g?(g.item=this,g):null};
Qg.prototype.og=function(a,b,c,d){c=this.y-c;if(0>=d.y)var f=null;else{var h=new ok;h.t=-(c-a.y-b)/-d.y;h.p=(new w(a.x+d.x*h.t,a.y+b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new w(0,-1,0);f=h}if(!f)return null;if(0==Kc(f.p.z,f.p.x,this.ha).code)return f.item=this,f;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ha.length;l++){var m=this.ha[l];f=new w(m.l,c,m.m);var n=new w(m.H-m.l,0,m.K-m.m);n.scale(1/m.length);(f=tk(a,b,d,f,n))?(n=m.getParameter(f.p.z,f.p.x),!(0>n||n>m.length)&&
f.t<k&&(k=f.t,g=f)):h=0==l?h|(1<<this.ha.length-1)+1:h|3<<l-1}for(l=0;l<this.ha.length;l++)h&1<<l||(m=this.ha[l],(f=sk(a,b,d,new w(m.H,c,m.K)))&&f.t<k&&(k=f.t,g=f));return g?(g.item=this,g):null};
Og.prototype.og=function(a,b,c,d){var f=this.Z,h=this.o-c;c=this.F+c;if(0<=Jc(f,f.m+d.z,f.l+d.x))var g=null;else{var k=new w(f.K-f.m,0,f.l-f.H);k.scale(1/f.length);var l=rc(d,k),m=new ok;m.t=-(Jc(f,a.z,a.x)-b)/l;m.p=(new w(a.x-k.x*b+d.x*m.t,a.y-k.y*b+d.y*m.t,a.z-k.z*b+d.z*m.t)).round();m.n=k;g=m}if(!g)return null;k=0;var n=f.getParameter(g.p.z,g.p.x);0>n&&(k|=1);g.p.y>c&&(k|=2);n>f.length&&(k|=4);g.p.y<h&&(k|=8);if(0==k)return g.item=this,g;if(0==b)return null;k=0;l=null;m=Number.POSITIVE_INFINITY;
g=new w(f.l,h,f.m);n=new w(0,1,0);g=tk(a,b,d,g,n);g?!(g.p.y<h||g.p.y>c)&&g.t<m&&(m=g.t,l=g):k|=9;g=new w(f.l,c,f.m);n=new w(f.H-f.l,0,f.K-f.m);n.scale(1/f.length);(g=tk(a,b,d,g,n))?(n=f.getParameter(g.p.z,g.p.x),!(0>n||n>f.length)&&g.t<m&&(m=g.t,l=g)):k|=3;g=new w(f.H,c,f.K);n=new w(0,-1,0);g=tk(a,b,d,g,n);g?!(g.p.y>c||g.p.y<h)&&g.t<m&&(m=g.t,l=g):k|=6;g=new w(f.H,h,f.K);n=new w(f.l-f.H,0,f.m-f.K);n.scale(1/f.length);(g=tk(a,b,d,g,n))?(n=f.getParameter(g.p.z,g.p.x),!(0>n||n>f.length)&&g.t<m&&(m=g.t,
l=g)):k|=18;0==(k&1)&&(g=new w(f.l,c,f.m),(g=sk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&2)&&(g=new w(f.H,c,f.K),(g=sk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&4)&&(g=new w(f.H,h,f.K),(g=sk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&8)&&(g=new w(f.l,h,f.m),(g=sk(a,b,d,g))&&g.t<m&&(l=g));return l?(l.item=this,l):null};
Pg.prototype.Xg=function(a,b,c,d){c=this.y+c;for(var f,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ha.length;k++){f=this.ha[k];var l=Jc(f,a.z,a.x);l<g&&(g=l,h=f)}f=h;0<=g?f=new w(a.x,c,a.z):(h=f.getParameter(a.z,a.x),0>h?f=new w(f.l,c,f.m):h>f.length?f=new w(f.H,c,f.K):(h/=f.length,g=1-h,f=new w(f.l*g+f.H*h,c,f.m*g+f.K*h),f.round()));c=new w(a.x-f.x,a.y-f.y,a.z-f.z);c.na(1);c.d=rc(f,c)+b;a=rc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Qg.prototype.Xg=function(a,b,c,d){c=this.y-c;for(var f,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ha.length;k++){f=this.ha[k];var l=Jc(f,a.z,a.x);l<g&&(g=l,h=f)}f=h;0<=g?f=new w(a.x,c,a.z):(h=f.getParameter(a.z,a.x),0>h?f=new w(f.l,c,f.m):h>f.length?f=new w(f.H,c,f.K):(h/=f.length,g=1-h,f=new w(f.l*g+f.H*h,c,f.m*g+f.K*h),f.round()));c=new w(a.x-f.x,a.y-f.y,a.z-f.z);c.na(1);c.d=rc(f,c)+b;a=rc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Og.prototype.Xg=function(a,b,c,d){var f=this.o-c,h=this.F+c;c=null;var g=this.Z;var k=g.getParameter(a.z,a.x);if(0>k)k=new w(g.l,a.y,g.m),k.y>h?k.y=h:k.y<f&&(k.y=f);else if(k>g.length)k=new w(g.H,a.y,g.K),k.y>h?k.y=h:k.y<f&&(k.y=f);else{k/=g.length;var l=1-k;k=new w(g.l*l+g.H*k,a.y,g.m*l+g.K*k);k.y>h?k.y=h:k.y<f?k.y=f:(c=new w(g.K-g.m,0,g.l-g.H),c.scale(1/g.length));k.round()}null==c&&(c=new w(a.x-k.x,a.y-k.y,a.z-k.z),c.na(1));c.d=rc(k,c)+b;a=rc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Pg.prototype.Hk=function(a,b){var c=Za(.5*bk.y,b.y,a.y-this.y);if(!c)return null;var d=new ok;d.t=c.Vc;if(0>d.t)return null;d.p=(new w(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=q(this.ha);for(b=a.next();!b.done;b=a.next())if(0>Jc(b.value,d.p.z,d.p.x))return null;d.item=this;d.n=new w(0,1,0);return d};
Qg.prototype.Hk=function(a,b){if(a.y>=this.y)return null;var c=Za(.5*bk.y,b.y,a.y-this.y);if(!c)return null;var d=new ok;d.t=c.Ra;if(0>d.t)return null;d.p=(new w(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=q(this.ha);for(b=a.next();!b.done;b=a.next())if(0>Jc(b.value,d.p.z,d.p.x))return null;d.item=this;d.n=new w(0,-1,0);return d};
Og.prototype.Hk=function(a,b){var c=Jc(this.Z,a.z,a.x);if(0>c)return null;var d=Xc(this.Z,1),f=d.x*b.z+d.y*b.x;if(0<=f)return null;var h=new ok;h.t=-c/f;if(0>h.t)return null;h.p=(new w(a.x+b.x*h.t,a.y+.5*(2*b.y+bk.y*h.t)*h.t,a.z+b.z*h.t)).round();if(h.p.y>=this.F||h.p.y<this.o)return null;a=this.Z.getParameter(h.p.z,h.p.x);if(0>a||a>=this.Z.length)return null;h.item=this;h.n=new w(d.y,0,d.x);return h};
Pg.prototype.Sj=function(a){for(var b=q(this.ha),c=b.next();!c.done;c=b.next())c=c.value,a.Oa(c.H,this.y,c.K)};Qg.prototype.Sj=function(a){for(var b=q(this.ha),c=b.next();!c.done;c=b.next())c=c.value,a.Oa(c.H,this.y,c.K)};Og.prototype.Sj=function(a){a.Oa(this.Z.l,this.o,this.Z.m);a.Oa(this.Z.H,this.F,this.Z.K)};
function uk(){if(this.ya){for(var a=new Td,b=q(this.ya),c=b.next();!c.done;c=b.next())c.value.Sj(a);this.Ni=yf(a.J,a.w,a.L,a.D);a=q(this.Ni);for(b=a.next();!b.done;b=a.next())b=b.value,b.Hd.push.apply(b.Hd,ba(this.ya))}}function vk(){if(this.Ni){for(var a=q(this.Ni),b=a.next();!b.done;b=a.next())b=b.value,b.Hd.splice(b.Hd.indexOf(this.ya[0]),this.ya.length);delete this.Ni}};function wk(){this.height=this.width=2;this.depth=this.color=null}
wk.prototype.create=function(){this.object=u.createFramebuffer();u.bindFramebuffer(u.FRAMEBUFFER,this.object);var a=this.color=new t.Ne;a.width=this.width;a.height=this.height;a.Yi=u.RGBA8;a.format=u.RGBA;a.type=u.UNSIGNED_BYTE;a.Vf=u.NEAREST;a.kh=u.NEAREST;a.create();u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,a.object,0);a=this.depth=u.createRenderbuffer();u.bindRenderbuffer(u.RENDERBUFFER,a);u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH24_STENCIL8,this.width,this.height);
u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,a)};function xk(a){jg.call(this,a);this.Ma=new H;this.pitch=this.heading=0;this.Th=112;this.Zd=kc(40);this.un=!1;this.tj=8E3}xk.prototype=Object.create(jg.prototype);xk.prototype.constructor=xk;xk.prototype.create=function(){var a=this.Vk=new jg;a.Ma=this.O;K(a,this);a=this.Wk=new jg;a.Ma=this.O;K(a,this);return this};
xk.prototype.step=function(){this.Th+=N.a;0>this.Th&&(this.Th=0);this.transform.m32=Math.pow(1.125,this.Th);N.d[2]&&(this.heading-=4E6*N.Pc.x,this.pitch+=4E6*N.Pc.y);var a=mc(this.heading),b=mc(this.pitch);Dd(this.Ma);this.Ma.rotate(a,b,0);a=this.Ma.gf();var c=this.Ma.hf();b=this.Ma.td();if(N.d[1]){var d=2*Math.tan(this.Zd)*this.transform.m32/t.canvas.height,f=-N.Pc.x*d;d*=N.Pc.y;this.Ma.s+=f*a.x+d*c.x;this.Ma.m31+=f*a.y+d*c.y;this.Ma.m32+=f*a.z+d*c.z}c=new w(0,0,0);me.d.KeyW&&--c.z;me.d.KeyS&&(c.z+=
1);me.d.KeyA&&--c.x;me.d.KeyD&&(c.x+=1);if(f=c.length())c.scale(this.transform.m32/(60*f)),this.Ma.s+=c.x*a.x+c.z*b.x,this.Ma.m31+=c.x*a.y+c.z*b.y,this.Ma.m32+=c.x*a.z+c.z*b.z;a=this.Vk;Dd(a.transform);a.transform.s=-this.tj;a.transform.rotate(Math.atan(.5*-this.tj/this.transform.m32),0,0);a.Zd=this.Zd;a=this.Wk;Dd(a.transform);a.transform.s=this.tj;a.transform.rotate(Math.atan(.5*this.tj/this.transform.m32),0,0);a.Zd=this.Zd;jg.prototype.step.call(this);return this};t.Animation=function(){t.Node.call(this);this.length=0;this.lc=NaN;this.Ph={}};t.Animation.prototype=Object.create(Node.prototype);e=t.Animation.prototype;e.constructor=t.Animation;e.step=function(){Node.prototype.step.call(this)};e.play=function(){this.lc=t.j};e.key=function(a,b,c){var d=this.Ph[a];d||(d=this.Ph[a]=new yk);return d.key(b,c)};e.print=function(){console.log("{");console.log("let a = new NG.Animation();");for(var a in this.Ph)this.Ph.hasOwnProperty(a)&&this.Ph[a].print(a);console.log("}")};
t.Animation.R=function(a,b){b.reset();b.translate(a[0],a[1],a[2]);b.rotate(a[3],a[4],a[5]);return b};function yk(){this.keys=new bb(zk)}yk.prototype.key=function(a,b){var c=this.keys.get(a);c||(c=new Ak,c.t=a,this.keys.add(c));c.ob=b;return c};yk.prototype.print=function(a){for(var b=0;b<this.keys.elements.length;b++){var c=this.keys.elements[b];console.log("a.key('"+a+"', "+c.t+", "+c.ob+");")}};function Ak(){this.ob=this.t=0}
function zk(a,b){return isNaN(a)?a.t<b.t?-1:a.t>b.t?1:0:a<b.t?-1:a>b.t?1:0};function Ti(a,b,c,d,f,h){t.Node.call(this);this.h=new w(a.l,b+112500,a.m);this.Gd=-Infinity;this.Eh=NaN;this.open=this.state=0;f.pa!=h.pa&&(this.nh=Math.max(f.pa,h.pa));K(this,t.Lg);var g=new qg(t.i.Fc.get("bayDoor01"));g.transform.s=this.h.x;g.transform.m31=this.h.y;g.transform.m32=this.h.z;g.transform.u=-a.ga;g.transform.B=a.ca;g.transform.C=-a.ca;g.transform.m22=-a.ga;K(g,t.Lg);g.create();Yd(g,f.ja);var k=q(g.Tc);for(b=k.next();!b.done;b=k.next())b=b.value,b.Ki=!0,b.I=t.i.za.get("physical"),b.ia=
t.i.P.get("BayDoor01"),b.ba=sh,b.Ga=["portalLightIndex",f.sf,!0,"numPortals",f.yb.length,!0,"color",id,!1];this.ki=g;this.Ic=c;this.ge=f;f.Ag||(f.Ag=[]);f.Ag.push(g);c=new qg(t.i.Fc.get("bayDoor01"));c.transform.s=this.h.x;c.transform.m31=this.h.y;c.transform.m32=this.h.z;c.transform.u=a.ga;c.transform.B=-a.ca;c.transform.C=a.ca;c.transform.m22=a.ga;K(c,t.Lg);c.create();Yd(c,h.ja);f=q(c.Tc);for(b=f.next();!b.done;b=f.next())b=b.value,b.Ki=!0,b.I=t.i.za.get("physical"),b.ia=t.i.P.get("BayDoor01"),
b.ba=sh,b.Ga=["portalLightIndex",h.sf,!0,"numPortals",h.yb.length,!0,"color",id,!1];this.ji=c;this.ad=d;this.fe=h;h.Ag||(h.Ag=[]);h.Ag.push(c);this.ya=[];h=[new E(-6250,-112500),new E(6250,-112500),new E(6250,112500),new E(-6250,112500)];for(d=0;d<h.length;d++)h[d]=a.ub(h[d].x,h[d].y);a=[];d=h[h.length-1];h=q(h);for(c=h.next();!c.done;c=h.next())c=c.value,a.push(new Fc(d.x,d.y,c.x,c.y)),d=c;this.ya.push(new Qg(a,this.h.y-112500));this.ya.push(new Og(Zc(a[0]),this.h.y-112500,this.h.y+112500),new Og(Zc(a[2]),
this.h.y-112500,this.h.y+112500));a=q(this.ya);for(d=a.next();!d.done;d=a.next())d=d.value,d.item=this,d.Zh();uk.call(this);this.update()}Ti.prototype=Object.create(t.Node.prototype);e=Ti.prototype;e.constructor=Ti;
e.step=function(){if(!(t.j%4)){var a=Infinity,b=0;this.ge.pa<=bi&&this.ge.pa>=ci&&b++;this.fe.pa<=bi&&this.fe.pa>=ci&&b++;b||this.remove();for(var c=q(t.b.pc),d=c.next();!d.done;d=c.next())d=d.value,d.fb&&(d=Math.abs(d.h.x-this.h.x)+Math.abs(d.h.y-this.h.y)+Math.abs(d.h.z-this.h.z),d<a&&(a=d));c=NaN;t.b.da&&(c=t.b.da,d=c=Math.abs(c.h.x-this.h.x)+Math.abs(c.h.y-this.h.y)+Math.abs(c.h.z-this.h.z),d<a&&(a=d));if(0==this.state&&0==this.open)5E5>a&&(isNaN(this.nh)?(this.state=1,this.Gd=4*Math.floor(t.j/
4),this.Eh=NaN):t.b.Ad||(2==b?(this.state=1,this.Gd=4*Math.floor(t.j/4),this.Eh=NaN):5E5>c&&t.b.da&&t.b.da.Ja.pa<this.nh&&(hh=t.j)));else if(1==this.state&&1==this.open)if(isNaN(this.nh))55E4<=a&&(isNaN(this.Eh)&&(this.Eh=t.j),0<=t.j-this.Eh&&(this.state=0,this.Gd=t.j));else if(55E4<=a||t.b.da&&t.b.da.Ja.pa==this.nh)this.state=0,this.Gd=t.j;a=(t.j-this.Gd)/36;if(!(1<a)){0==this.state?(this.open=1-Math.pow(a,2),1==a&&t.b.da&&t.b.da.Ja.pa==this.nh&&(ci=this.nh,ih=t.j,hh=NaN)):1==this.state&&(this.open=
Math.pow(a,2));a=q(this.ya);for(b=a.next();!b.done;b=a.next())b.value.Gd=t.j;this.update()}}};
e.update=function(){var a=this.Ic.o+(this.Ic.height-12500)*this.open;this.Ic.F=this.ad.F=this.ya[0].y=this.ya[1].o=this.ya[2].o=a;this.ya[0].ea.y=this.ya[1].ea.o=this.ya[2].ea.o=a;this.ki.transform.m31=this.ji.transform.m31=a+112500;this.ki.Tc[0].Ga[1]=this.ge.sf;this.ji.Tc[0].Ga[1]=this.fe.sf;this.ki.Tc[0].Ga[4]=this.ge.yb.length;this.ji.Tc[0].Ga[4]=this.fe.yb.length;this.ki.Tc[0].Ga[7]=this.ge.style.jd;this.ji.Tc[0].Ga[7]=this.fe.style.jd};e.ab=function(){t.I.M("clipY",this.h.y+225E3,!1)};
e.remove=function(){this.ki.remove();this.ji.remove();vk.call(this);for(var a=q(this.ya),b=a.next();!b.done;b=a.next())b.value.Gd=t.j;t.Node.prototype.remove.call(this)};
function Si(a,b,c,d){t.Ha.call(this);this.h=new w(a.l,b+62500,a.m);this.transform.s=this.h.x;this.transform.m31=this.h.y;this.transform.m32=this.h.z;this.transform.u=-a.ga;this.transform.B=a.ca;this.transform.C=-a.ca;this.transform.m22=-a.ga;this.transform.u*=87500;this.transform.A*=87500;this.transform.B*=87500;this.transform.v*=62500;this.transform.m11*=62500;this.transform.m12*=62500;K(this,t.$f);this.ge=c;this.fe=d;this.ya=[];b=[new E(-625,-87500),new E(625,-87500),new E(625,87500),new E(-625,
87500)];for(c=0;c<b.length;c++)b[c]=a.ub(b[c].x,b[c].y);c=[];d=b[b.length-1];var f=q(b);for(b=f.next();!b.done;b=f.next())b=b.value,c.push(new Fc(d.x,d.y,b.x,b.y)),d=b;this.ya.push(new Og(Zc(c[0]),this.h.y-112500,this.h.y+112500),new Og(Zc(c[2]),this.h.y-112500,this.h.y+112500));for(b=0;2>b;b++)c=this.ya[b],c.item=this,c.flags|=lk,c.Zh();this.ya[0].Y=this.ge.index;this.ya[1].Y=this.fe.index;b=[new E(-9375,-87500),new E(9375,-87500),new E(9375,87500),new E(-9375,87500)];for(c=0;c<b.length;c++)b[c]=
a.ub(b[c].x,b[c].y);a=[];c=b[b.length-1];d=q(b);for(b=d.next();!b.done;b=d.next())b=b.value,a.push(new Fc(c.x,c.y,b.x,b.y)),c=b;this.ya.push(new Og(Zc(a[0]),this.h.y-112500,this.h.y+112500),new Og(Zc(a[2]),this.h.y-112500,this.h.y+112500));for(a=2;4>a;a++)this.ya[a].flags|=mk;uk.call(this)}Si.prototype=Object.create(t.Ha.prototype);Si.prototype.constructor=Si;Si.R=function(a,b){return a.depth-b.depth};Si.prototype.update=function(){};
Si.prototype.wi=function(){return!this.Sa||this.ge.ja.qa<t.j&&this.fe.ja.qa<t.j?!1:!0};Si.bd=function(){t.Fb(zg);t.eb(t.i.za.get("physical"));t.Jb(0,t.i.P.get("Window01"));th.bind();t.tb(1);t.$b(1);t.I.M("color",id);t.I.M("architectureLighting",1,!0);t.I.M("lightingFancy",t.va.lightingFancy,!0)};
Si.prototype.ab=function(){t.I.M("modelMatrix",this.O);t.I.M("portalLightIndex",this.ge.sf,!0);t.I.M("numPortals",this.ge.yb.length,!0);t.I.M("ambientLight",this.ge.ja.lb,!1);u.drawArrays(u.TRIANGLE_FAN,Ag(0,1),4);var a=(new H).set(this.O);a.u=-a.u;a.A=-a.A;a.B=-a.B;a.C=-a.C;a.m21=-a.m21;a.m22=-a.m22;t.I.M("modelMatrix",a);t.I.M("portalLightIndex",this.fe.sf,!0);t.I.M("numPortals",this.fe.yb.length,!0);t.I.M("ambientLight",this.fe.ja.lb,!1);u.drawArrays(u.TRIANGLE_FAN,Ag(0,1),4)};
Si.prototype.remove=function(){vk.call(this);for(var a=q(this.ya),b=a.next();!b.done;b=a.next())b.value.Gd=t.j;t.Ha.prototype.remove.call(this)};
function Bk(a,b,c){t.Ta.call(this,"crate");this.rb=120;this.h.x=a;this.h.y=b+5E4;this.h.z=c;Rd(this.transform,this.h);a=[new w(-5E4,0,-5E4),new w(-5E4,0,5E4),new w(5E4,0,5E4),new w(5E4,0,-5E4)];b=q(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.ub(c,c),c.round();a=[new Fc(a[0].z,a[0].x,a[1].z,a[1].x),new Fc(a[1].z,a[1].x,a[2].z,a[2].x),new Fc(a[2].z,a[2].x,a[3].z,a[3].x),new Fc(a[3].z,a[3].x,a[0].z,a[0].x)];this.ya=[];this.ya.push(new Pg(a,this.h.y+5E4),new Qg(a,this.h.y-5E4));a=fd(a);
this.ya.push(new Og(a[0],this.h.y-5E4,this.h.y+5E4),new Og(a[1],this.h.y-5E4,this.h.y+5E4),new Og(a[2],this.h.y-5E4,this.h.y+5E4),new Og(a[3],this.h.y-5E4,this.h.y+5E4));a=q(this.ya);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;uk.call(this)}Bk.prototype=Object.create(t.Ta.prototype);e=Bk.prototype;e.constructor=Bk;
e.create=function(){var a=this.Xa=new qg(t.i.Fc.get("lootBox"));a.Ma=this.O;K(a,this);a.create();this.Ub=a.src.Ub;Yd(a,this.ja);Zd(a,6E4);t.b.Zg.push(this);Ck.push(this);a=q(this.hk);for(var b=a.next();!b.done;b=a.next())b=b.value,b.Ob?t.b.Pb[b.Ob.rc]+=b.ma:t.b.Pb.food+=b.ma;t.Ta.prototype.create.call(this)};
e.step=function(){if(t.b.da){var a=xd(t.b.da.h,this.h,new w(0,0,0));a.y=0;a.na(1);this.transform.u=a.z;this.transform.B=-a.x;this.transform.C=a.x;this.transform.m22=a.z;this.transform.rotate(kc(-15),0,0)}10==t.j-this.sg&&this.Kh();t.j==this.wf+4?(this.Xa.I=t.i.za.get("flash"),this.Xa.ba=t.i.Rb.get("flashWhite")):t.j==this.wf+6?this.Xa.ba=t.i.Rb.get("flashRed"):t.j==this.wf+8&&(delete this.Xa.ba,delete this.Xa.I);t.Ta.prototype.step.call(this)};
e.rg=function(a){isNaN(this.sg)&&(this.wf=t.j,this.rb-=a,0>=this.rb&&(this.sg=t.j))};e.Kh=function(){for(var a=q(this.hk),b=a.next();!b.done;b=a.next())b=b.value,b=new W(b),b.h.set(this.h.x,this.h.y,this.h.z),b.h.z+=5E4*(pb(ob)-.5),b.h.x+=5E4*(pb(ob)-.5),b.G.set(6E3*(pb(ob)-.5),9E3*(pb(ob)+1),6E3*(pb(ob)-.5)),K(b,t.pj),b.create();t.i.W.get("hit02").play({gain:1});this.remove()};
e.remove=function(){t.Ta.prototype.remove.call(this);this.Xa.remove();t.b.Zg.splice(t.b.Zg.indexOf(this),1);Dk.call(this);if(isNaN(this.sg))for(var a=q(this.hk),b=a.next();!b.done;b=a.next())b=b.value,b.Ob?t.b.Pb[b.Ob.rc]-=b.ma:t.b.Pb.food-=b.ma;this.Nd.jh=null;this.Nd.ah=t.j;this.Nd=null;vk.call(this);a=q(this.ya);for(b=a.next();!b.done;b=a.next())b.value.Gd=t.j};
function Ek(a,b,c){t.Ta.call(this,"barrel");this.rb=120;this.Wb=5E5;this.h.x=a;this.h.y=b+65E3;this.h.z=c;Rd(this.transform,this.h);a=[new w(-5E4,0,-5E4),new w(-5E4,0,5E4),new w(5E4,0,5E4),new w(5E4,0,-5E4)];b=q(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.ub(c,c),c.round();a=[new Fc(a[0].z,a[0].x,a[1].z,a[1].x),new Fc(a[1].z,a[1].x,a[2].z,a[2].x),new Fc(a[2].z,a[2].x,a[3].z,a[3].x),new Fc(a[3].z,a[3].x,a[0].z,a[0].x)];this.ya=[];this.ya.push(new Pg(a,this.h.y+5E4),new Qg(a,this.h.y-
5E4));a=fd(a);this.ya.push(new Og(a[0],this.h.y-5E4,this.h.y+5E4),new Og(a[1],this.h.y-5E4,this.h.y+5E4),new Og(a[2],this.h.y-5E4,this.h.y+5E4),new Og(a[3],this.h.y-5E4,this.h.y+5E4));a=q(this.ya);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;uk.call(this)}Ek.prototype=Object.create(t.Ta.prototype);e=Ek.prototype;e.constructor=Ek;
e.create=function(){var a=this.Xa=new qg(t.i.Fc.get("nitroBarrel"));a.Ma=this.O;K(a,this);a.create();this.Ub=a.src.Ub;Yd(a,this.ja);Zd(a,6E4);t.b.Wg.push(this);Ck.push(this);t.Ta.prototype.create.call(this)};
e.step=function(){if(isNaN(this.sg)){if(t.b.da){var a=xd(t.b.da.h,this.h,new w(0,0,0));a.y=0;a.na(1);this.transform.u=a.z;this.transform.B=-a.x;this.transform.C=a.x;this.transform.m22=a.z;this.transform.rotate(kc(15),0,0)}a=1+.25*Math.sin(t.j*Math.PI/3)*(1-this.rb/120);this.rb=Math.min(this.rb+2,120);Dd(this.Xa.transform);this.Xa.transform.scale(a,a,a);t.j==this.wf+4?(this.Xa.I=t.i.za.get("flash"),this.Xa.ba=t.i.Rb.get("flashWhite")):t.j==this.wf+6?this.Xa.ba=t.i.Rb.get("flashRed"):t.j==this.wf+8&&
(delete this.Xa.ba,delete this.Xa.I);t.Ta.prototype.step.call(this)}else{a=t.j-this.sg;var b=1+1/12*a;Dd(this.Xa.transform);this.Xa.transform.scale(b,b,b);6==a&&this.Kh()}};e.rg=function(a){isNaN(this.sg)&&(this.wf=t.j,this.rb-=a,0>=this.rb&&(this.sg=t.j))};
e.Kh=function(){function a(f){var h=xd(f.h,b.h,new w),g=h.wc();Ve(b.h,h,We)||(h=b.Wb*b.Wb/g*360,1<=h&&f.rg(h))}var b=this;t.i.W.get("explode01").play({gain:1},this.h,15);if(t.b.da){var c=t.b.da,d=xd(c.h,this.h,new w);d=this.Wb*this.Wb/d.wc();d=Math.min(5,d);c.Ea+=kc(5)*d}d=q(t.b.Wg);for(c=d.next();!c.done;c=d.next())a(c.value);d=q(t.b.Zg);for(c=d.next();!c.done;c=d.next())a(c.value);d=q(t.b.pc);for(c=d.next();!c.done;c=d.next())a(c.value);this.Ja&&(c=new Fk(1E5,this.Ja),c.transform.s=this.h.x,c.transform.m31=
this.h.y,c.transform.m32=this.h.z,K(c,t.he),c.create());this.remove()};e.remove=function(){t.Ta.prototype.remove.call(this);this.Xa.remove();t.b.Wg.splice(t.b.Wg.indexOf(this),1);Dk.call(this);vk.call(this);for(var a=q(this.ya),b=a.next();!b.done;b=a.next())b.value.Gd=t.j};function Gk(a){t.Node.call(this,"GunManager "+a.name);this.ka=a;this.jb=[];this.pe=0;this.N=null;this.action="ready";this.U=NaN;this.focus=0;this.Sb=!1;this.be=this.rd=null;this.Zb=this.Id=this.le=this.Oe=0;this.Va=null;this.bf=this.af=0;this.yf=[];this.xf=0}Gk.prototype=Object.create(t.Node.prototype);e=Gk.prototype;e.constructor=Gk;
e.create=function(){var a=this.Gg=new t.Ha("muzzleFlare");wg.call(a);a.ab=yg;a.I=t.i.za.get("image");a.ia=t.i.P.get("muzzleFlare01");a.ba=new ie;a.ba.Ia=1;a.color=new F(255,255,255,0);a.mb=12500;a.Sa=0;a.Ma=this.ka.ie.O;K(a,t.De)};
e.step=function(){t.j==this.Jm+1&&(this.eh.Db.x-=this.sl,this.eh.Db.y-=this.sl,this.eh.Db.z-=this.sl,this.Jm=NaN,this.eh=null);if(this.N){var a=this.ka;a.Fh=null;Hk(a.Wc.O);var b=a.Da.N.si(a.Wc.O);b&&(a.Fh=b)}--this.xf;0>this.xf&&(this.xf=0);if((me.p[t.xa.NextGunKey]||N.p[t.xa.NextGunMouseButton])&&this.jb.length){a=this.jb.length-1;for(b=0;b<this.jb.length;b++)if(this.jb[b]==this.N){a=b;break}for(b=0;b<this.jb.length;b++){a++;a%=this.jb.length;var c=this.jb[a];if(c&&c!=this.N&&!(c instanceof Ik)){this.rd=
c;break}}}if((me.p[t.xa.PrevGunKey]||N.p[t.xa.PrevGunMouseButton])&&this.jb.length){a=this.jb.length-1;for(b=0;b<this.jb.length;b++)if(this.jb[b]==this.N){a=b;break}for(b=0;b<this.jb.length;b++)if(a--,0>a&&(a=this.jb.length-1),(c=this.jb[a])&&c!=this.N&&!(c instanceof Ik)){this.rd=c;break}}a=q(this.jb);b=a.next();a:for(;!b.done;b=a.next())if((b=b.value)&&(!(b instanceof Ik)||b.$a))if(c=b.constructor.rc+"MouseButton",b==this.N){if(N.p[t.xa[c]]&&(this.Id=1),N.r[t.xa[c]]&&(this.Id=0),this.be&&me.p[t.xa[b.constructor.rc+
"Key"]]){this.be=this.rd=null;this.Id=0;break a}}else{if(N.p[t.xa[c]]){this.rd=b;this.be=c;this.Id=1;break a}if(me.p[t.xa[b.constructor.rc+"Key"]]){this.rd=b;this.be=null;this.Id=0;break a}}N.r[t.xa[this.be]]&&(this.Id=0);if(me.p[t.xa.GunFireKey]||N.p[t.xa.GunFireMouseButton])this.le=1;if(me.r[t.xa.GunFireKey]||N.r[t.xa.GunFireMouseButton])this.le=0;if(me.p[t.xa.GunActionKey]||N.p[t.xa.GunActionMouseButton])this.Oe=1;if(me.r[t.xa.GunActionKey]||N.r[t.xa.GunActionMouseButton])this.Oe=0;if(this.N&&
this.N instanceof Jk){if(me.p[t.xa.ReloadKey]||N.p[t.xa.ReloadMouseButton])this.Zb=1;if(me.r[t.xa.ReloadKey]||N.r[t.xa.ReloadMouseButton])this.Zb=0}else if(me.p[t.xa.ReloadKey]||N.p[t.xa.ReloadMouseButton])this.Zb=1;this.Oe||(this.focus-=1/6,0>this.focus&&(this.focus=0));this.N?this.N[this.action].call(this):Kk(this)};
e.ab=function(){if(this.Va){u.enable(u.SCISSOR_TEST);t.zc.pd.M("viewMatrix",Sd);t.zc.pd.upload();t.hc(0);t.$b(0);t.tb(2);t.Fb(zg);t.eb(t.i.za.get("physicalCardThreshold"));t.I.M("color",id);t.I.M("ambientLight",this.ka.ja.lb,!1);var a=this.N.constructor.Di;t.Jb(0,a);var b=Math.round(a.width/2-this.Va.x+this.Va.f+this.af),c=Math.round(a.height/2-this.Va.y+this.Va.g+this.bf);u.scissor(this.Va.f+Math.round(this.af),-this.Va.g-Math.round(this.bf)+t.canvas.height-this.Va.c,this.Va.a,this.Va.c);var d=new H;
d.u=a.width/t.canvas.width;d.m11=-a.height/t.canvas.height;d.s=-1+2*b/t.canvas.width;d.m31=1-2*c/t.canvas.height;t.I.M("modelMatrix",d);u.drawArrays(u.TRIANGLE_FAN,0,4);u.disable(u.SCISSOR_TEST)}};function Kk(a){if(!a.rd)return!1;a.Va=null;a.focus=0;a.Zb=0;a.xf=0;a.Sb=!1;a.Sl=a.N;a.N=a.rd;t.b.Cf();a.action="equip";a.U=t.j+1;a.rd=null;return!0}e.fc=function(){var a=400*this.ka.mf;a*=1-2/3*this.focus;this.af=this.ka.Wi*a;this.bf=this.ka.fc*a};
Gk.Nb=function(a,b,c,d,f,h){var g=new H;b*=1E5;c*=1E5;a*=1E5;g.rotate(kc(h),kc(f),kc(d));g.scale(1,1,1);g.translate(b,c,a);d=g;f=new H;f.u=d.m22;f.A=d.C;f.B=d.m21;f.v=d.B;f.m11=d.u;f.m12=d.A;f.C=d.m12;f.m21=d.v;f.m22=d.m11;f.s=d.m32;f.m31=d.s;f.m32=d.m31;d=f;f=new H;f.u=d.u;f.A=d.A;f.B=d.B;f.v=d.C;f.m11=d.m21;f.m12=d.m22;f.C=-d.v;f.m21=-d.m11;f.m22=-d.m12;f.s=d.s;f.m31=d.m32;f.m32=-d.m31;return f};Gk.prototype.nc=function(a){this.N instanceof Jk||this.N.nc(a)};
Gk.prototype.remove=function(){this.Gg.remove();t.Node.prototype.remove.call(this)};function Lk(a){this.fk=a;this.actions={};this.Nc=this.ib=this.$a=0;this.ng=this.mg=-1;this.Uj=2/3;this.jg=this.xc=0;this.Wb=1E8;this.Ih=this.lh=0}function Mk(a){return a.Nc+a.ib+a.$a}Lk.prototype.Aj=function(){return!1};Lk.prototype.eg=function(){return!1};
function Hk(a){var b=new w(a.s,a.m31,a.m32);a=new w(-a.C,-a.m21,-a.m22);for(var c=this.Wb,d=q(t.b.pc),f=d.next();!f.done;f=d.next()){f=f.value;var h=f.h.X();h.y+=f.Qf;h=rk(b,a,h,f.ud,f.Pf);if(h.cf){h=h.cf;if(0>h.t)continue;if(h.t>=c)continue;h=xd(h.p,b,new w)}else{var g=h.oi.X(),k=h.Fj-f.ud;g.x+=h.Pe.x*k;g.y+=h.Pe.y*k;g.z+=h.Pe.z*k;h=xd(g,b,new w);if(0>=rc(h,a))continue}Ve(b,h,nk)||(f.dj=t.j)}}
function Nk(a){var b=new w(a.s,a.m31,a.m32);a=new w(-a.C,-a.m21,-a.m22);var c=this.Wb,d=[];d.cmp=function(n,r){return n.Cg>r.Cg?-1:1};for(var f=q(t.b.pc),h=f.next();!h.done;h=f.next())if(h=h.value,h.fb||!(t.j>h.U)){var g=h.h.X();g.y+=h.Qf;var k=rk(b,a,g,h.ud-this.Ih,h.Pf);if(k.cf)g=k.cf,0>g.t||g.t>=c||(g.p.Cg=c-g.t,g.p.item=h,Ra(d,g.p));else{g=k.oi.X();var l=k.Fj-(h.ud-this.Ih);g.x+=k.Pe.x*l;g.y+=k.Pe.y*l;g.z+=k.Pe.z*l;l=xd(k.oi,b,new w);k=l.na(1);if(!(k>this.Wb)){var m=xd(g,b,new w);0>=rc(m,a)||
(m.normalize(),l=rc(l,m),m=this.lh,5E5<k&&(m=Math.atan(5E5*Math.tan(m)/k)),Math.acos(l)>=m||(g.Cg=l-1,g.item=h,Ra(d,g)))}}}a=q(d);for(c=a.next();!c.done;c=a.next())if(c=c.value,!Ve(b,xd(c,b,new w)))return c;return null}
function Ok(a,b,c){function d(n){n=new Pk(n);n.transform.s=a.p.x;n.transform.m31=a.p.y;n.transform.m32=a.p.z;K(n,t.he);n.create();n.step()}function f(){var n=new Qk;n.aj=120*(pb(ob)+.5);n.mb=2E4;n.transform.s=a.p.x;n.transform.m31=a.p.y;n.transform.m32=a.p.z;n.G.x=a.n.x;n.G.y=a.n.y;n.G.z=a.n.z;n.G.scale(2E4*pb(ob)+1E4);K(n,t.he);n.create();n.step()}if(a.item instanceof Z){var h=new H,g=new w,k=new w,l=a.ob.X();sc(l,g,k);h.Ee(g);h.Fe(k);h.Ge(l);Rd(h,a.p);g=new H;k=new w;l=new w;var m=a.ea.ob.X();sc(m,
k,l);g.Ee(k);g.Fe(l);g.Ge(m);Rd(g,a.ea.p);Rk(a.item,b,c,h,g);K(new Sk,t.hn);a.item.rg(b)}else a.item instanceof Ek?(d(31250),f(),a.item.rg(b)):a.item instanceof Bk?(d(31250),f(),a.item.rg(b)):(d(12500),f(),Ng(t.b.bl,new w(2343.75*Math.round(a.p.x/2343.75),2343.75*Math.round(a.p.y/2343.75),2343.75*Math.round(a.p.z/2343.75)),a.n,Math.PI,18750,qb(16),16))}Lk.prototype.Kg=function(){var a=this.ng-this.ib;a=Math.min(a,this.$a);return a*this.Ce-this.xc};
Lk.prototype.nc=function(a){this.xc+=Math.min(a,this.Kg());a=Math.floor(this.xc/this.Ce);this.ib+=a;this.$a-=a;t.b.Cf();this.xc-=a*this.Ce};function Tk(a){Lk.call(this,a);this.mg=360;this.ng=30;this.ib=0;this.$a=2*this.ng;this.Uj=1;this.lh=kc(4);this.Ih=8E3;this.Ce=5.2;a.jb[this.constructor.Mc]=this;a.pe++}Tk.prototype=Object.create(Lk.prototype);Tk.prototype.constructor=Tk;
Tk.Pa={CarbineEquip02:{f:291,g:265,x:1204,y:1548,a:189,c:31},CarbineEquip03:{f:90,g:191,x:814,y:1548,a:390,c:105},CarbineEquip04:{f:126,g:152,x:0,y:1548,a:354,c:144},CarbineEquip05:{f:46,g:96,x:1012,y:255,a:434,c:200},CarbineEquip06:{f:92,g:68,x:1281,y:0,a:356,c:228},CarbineEquip07:{f:106,g:65,x:960,y:0,a:321,c:231},CarbineEquip08:{f:129,g:76,x:0,y:255,a:282,c:220},CarbineEquip09:{f:145,g:91,x:282,y:255,a:250,c:205},CarbineEquip10:{f:163,g:109,x:1231,y:670,a:220,c:187},CarbineEquip11:{f:184,g:125,
x:292,y:1047,a:220,c:171},CarbineEquip12:{f:198,g:133,x:1541,y:1047,a:253,c:163},CarbineEquip13:{f:207,g:132,x:1296,y:1047,a:245,c:164},CarbineAim01:{f:194,g:133,x:0,y:1225,a:229,c:163},CarbineAim02:{f:170,g:136,x:1247,y:1225,a:187,c:160},CarbineAim03:{f:157,g:137,x:184,y:1388,a:174,c:159},CarbineFire01:{f:209,g:131,x:1030,y:1047,a:266,c:165},CarbineFire02:{f:213,g:128,x:512,y:1047,a:246,c:168},CarbineFire03:{f:212,g:133,x:229,y:1225,a:248,c:163},CarbineAimFire01:{f:147,g:136,x:1434,y:1225,a:193,
c:160},CarbineAimFire02:{f:152,g:136,x:0,y:1388,a:184,c:160},CarbineAimFire03:{f:155,g:134,x:730,y:1225,a:178,c:162},CarbineReload01:{f:185,g:133,x:477,y:1225,a:253,c:163},CarbineReload02:{f:101,g:134,x:908,y:1225,a:339,c:162},CarbineReload03:{f:14,g:144,x:838,y:1388,a:432,c:152},CarbineReload04:{f:0,g:153,x:354,y:1548,a:460,c:143},CarbineReload05:{f:0,g:149,x:1270,y:1388,a:480,c:147},CarbineReload06:{f:0,g:139,x:358,y:1388,a:480,c:157},CarbineReload07:{f:0,g:107,x:271,y:670,a:480,c:189},CarbineReload08:{f:0,
g:41,x:0,y:0,a:480,c:255},CarbineReload09:{f:0,g:47,x:480,y:0,a:480,c:249},CarbineReload10:{f:0,g:95,x:532,y:255,a:480,c:201},CarbineReload11:{f:0,g:107,x:751,y:670,a:480,c:189},CarbineReload12:{f:0,g:111,x:311,y:860,a:480,c:185},CarbineReload13:{f:0,g:114,x:791,y:860,a:480,c:182},CarbineReload14:{f:59,g:115,x:1271,y:860,a:421,c:181},CarbineReload15:{f:200,g:109,x:1451,y:670,a:280,c:187},CarbineReload16:{f:235,g:103,x:309,y:475,a:245,c:193},CarbineReload17:{f:246,g:104,x:838,y:475,a:234,c:192},CarbineReload18:{f:241,
g:105,x:1072,y:475,a:239,c:191},CarbineReload19:{f:209,g:106,x:0,y:670,a:271,c:190},CarbineReload20:{f:172,g:99,x:1446,y:255,a:308,c:197},CarbineReload21:{f:171,g:101,x:0,y:475,a:309,c:195},CarbineReload22:{f:196,g:103,x:554,y:475,a:284,c:193},CarbineReload23:{f:164,g:105,x:1311,y:475,a:316,c:191},CarbineReload24:{f:158,g:109,x:0,y:860,a:311,c:187},CarbineReload25:{f:173,g:118,x:0,y:1047,a:292,c:178},CarbineReload26:{f:175,g:128,x:758,y:1047,a:272,c:168}};
Tk.prototype.equip=function(){var a=t.j-this.U;a+=5;var b=Math.floor(a/2.5);this.Va=this.N.constructor.Pa["CarbineEquip"+("00"+b).slice(-2)];this.bf=this.af=0;this.Sb=this.N.ib;Kk(this)||(0==this.N.ib&&10<=this.N.$a&&(this.Zb=!0),this.Zb?(this.action="reload",this.U=t.j+1):9==a?this.ka.Ea+=kc(1):9<=b&&(this.N.Of.call(this,!0),this.N.ae.call(this)||(this.nc(1),32.5<=a+1&&(this.action="ready"))))};
Tk.prototype.ready=function(){this.Va=this.N.constructor.Pa.CarbineEquip13;this.fc();this.Sb=this.N.ib;Kk(this)||(this.Zb?(this.action="reload",this.U=t.j+1):(this.N.Of.call(this,!0),this.N.ae.call(this)||this.nc(1)))};
Tk.prototype.fire=function(){var a=t.j-this.U,b=("00"+Math.floor(a)).slice(-2);this.Va=this.focus?this.N.constructor.Pa["CarbineAimFire"+b]||this.N.constructor.Pa.CarbineAim03:this.N.constructor.Pa["CarbineFire"+b]||this.N.constructor.Pa.CarbineEquip13;this.fc();if(0==a){t.i.W.get("CarbineFire01").play({gain:.375,pitch:1.5});t.i.W.get("CarbineFire02").play({gain:.75,pitch:1.5});--this.N.ib;t.b.Cf();!this.N.ib&&this.N.$a&&(this.Zb=1);this.xf+=35;this.$d=this.focus?Gk.Nb(0,.270042,-.06106,0,0,180):
Gk.Nb(.053697,.319573,-.058355,-.833,.006,-179.61);a=this.Gg;a.Sa=1;b=255*(8*pb(ob)+1)/12&255;a.color.r=b;a.color.bb=b;a.color.ra=b;a.scale=pb(ob)+1;a.Qd=mc(nb());b=new H;b.translate(0,-35E3,0);Nd(this.$d,b,a.transform);a=(new H).rotate(0,kc(2.5*pb(ob)),0);b=(new H).rotate(0,0,pb(ob)*Math.PI*2);var c=Uk(this.ka);Nd(c,b,c);Nd(c,a,c);a=this.N.cd(c);a=q(a);for(b=a.next();!b.done;b=a.next())Ok(b.value,72,1.2);a=new Vk("CartridgeCarbineSpent");a.$l=kc(6*(3*pb(ob)+1));a.transform.s-=2E3;a.transform.m31+=
2100;b=new H;Nd(this.ka.ie.O,this.$d,b);Nd(b,a.transform,a.transform);a.G.x-=3E3*(2*pb(ob)+1);a.G.z=-a.G.x;Pd(b,a.G,a.G);a.h.set(a.transform.s,a.transform.m31,a.transform.m32);a.G.add(this.ka.G);zd(a.G,a.Qb);K(a,t.De);a.create();180<=this.xf&&(this.xf-=180,a=new Wk,a.mb=6E4,a.transform.m31-=45E3,b=new H,Nd(this.ka.ie.O,this.$d,b),Nd(b,a.transform,a.transform),a.G.y=-37500,Pd(b,a.G,a.G),a.G.add(this.ka.G),zd(a.G,a.Qb),a.ja=this.ka.ja,K(a,t.he),a.create(),a.step(),this.yf.push(a));3<this.yf.length&&
(K(this.yf[0],null),this.yf.splice(0,1))}else 1==a?this.Gg.Sa=0:2==a?this.ka.Ea+=this.focus?kc(.5):kc(1):3<=a&&!Kk(this)&&(this.N.Of.call(this,!1),this.N.ae.call(this)||(this.nc(1),this.action="ready"))};
Tk.prototype.reload=function(){var a=t.j-this.U;a+=3;this.Va=this.N.constructor.Pa["CarbineReload"+("00"+Math.floor(a/3)).slice(-2)];this.fc();this.Sb=!1;this.Zb=0;Kk(this)||(this.focus-=1/6,0>this.focus&&(this.focus=0),3==a?(this.N.$a+=this.N.ib,this.N.ib=0,t.b.Cf(),t.i.W.get("CarbineMagOut02").play({gain:1,pitch:1})):42==a?t.i.W.get("CarbineMagIn02").play({gain:1,pitch:1}):60==a?(this.ka.Ea+=kc(1),this.N.nc(this.N.Kg())):81<=a+1&&(this.action="ready"))};e=Tk.prototype;
e.Of=function(a){this.Oe&&(this.focus+=1/6,1<this.focus&&(this.focus=1),t.va.reticleInSights||(this.Sb=!1));a&&this.focus&&(this.Va=this.N.constructor.Pa["CarbineAim"+("00"+Math.floor(3*this.focus)).slice(-2)]||this.N.constructor.Pa.CarbineEquip13)};e.ae=function(){if(!this.le||1!=this.focus&&0!=this.focus)return!1;if(!this.N.ib)return this.N.$a&&(this.Zb=1),!1;this.action="fire";this.U=t.j+1;return!0};e.si=Nk;
e.cd=function(a){var b=new w(a.s,a.m31,a.m32),c=new w(-a.C,-a.m21,-a.m22),d=this.Wb;if(a=Ve(b,new w(c.x*d,c.y*d,c.z*d)))d=a.d;var f=[];f.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=q(t.b.pc),g=h.next();!g.done;g=h.next())if(g=g.value,g.fb||!(t.j>g.U)){var k=g.h.X();k.y+=g.Qf;!(k=rk(b,c,k,g.ud,g.Pf).cf)||0>k.t||k.t>=d||(k.item=g,Ra(f,k))}b=null;d=c=NaN;f=q(f);for(h=f.next();!h.done;h=f.next())h=h.value,h.item.xe>c||h.item.xe==
c&&h.t>d||(b=h,c=h.item.xe,d=h.t);f=[];b&&f.push(b);a&&f.push(a);return f};e.Aj=function(){return 0>=this.$a||"reload"==this.fk.action||6<this.ib?!1:!0};e.eg=function(){var a=Mk(this);return 0>=a?2:30>a?1:0};function Jk(a){Lk.call(this,a);this.mg=12;this.Nc=this.ng=0;this.$a=8;this.yk=!1;this.lh=kc(0);this.Ce=96;a.jb[this.constructor.Mc]=this;a.pe++}Jk.prototype=Object.create(Lk.prototype);Jk.prototype.constructor=Jk;
Jk.Pa={ShotgunEquip01:{f:170,g:185,x:874,y:1644,a:310,c:111},ShotgunEquip02:{f:183,g:151,x:569,y:1351,a:297,c:145},ShotgunEquip03:{f:331,g:128,x:1175,y:704,a:149,c:168},ShotgunEquip04:{f:111,g:20,x:871,y:0,a:369,c:276},ShotgunEquip05:{f:140,g:0,x:0,y:0,a:340,c:296},ShotgunEquip06:{f:158,g:0,x:340,y:0,a:277,c:296},ShotgunEquip07:{f:173,g:0,x:617,y:0,a:254,c:296},ShotgunEquip08:{f:188,g:100,x:0,y:508,a:257,c:196},ShotgunEquip09:{f:195,g:152,x:1432,y:1351,a:258,c:144},ShotgunEquip10:{f:199,g:159,x:0,
y:1644,a:257,c:137},ShotgunEquip11:{f:201,g:160,x:257,y:1644,a:253,c:136},ShotgunEquip12:{f:197,g:156,x:1248,y:1500,a:254,c:140},ShotgunEquip13:{f:195,g:152,x:0,y:1500,a:254,c:144},ShotgunFire01:{f:202,g:152,x:254,y:1500,a:278,c:144},ShotgunFire02:{f:181,g:147,x:0,y:1351,a:299,c:149},ShotgunFire03:{f:175,g:133,x:0,y:884,a:305,c:163},ShotgunFire04:{f:177,g:118,x:299,y:704,a:303,c:178},ShotgunFire05:{f:182,g:112,x:651,y:508,a:298,c:184},ShotgunFire06:{f:184,g:112,x:949,y:508,a:296,c:184},ShotgunFire07:{f:183,
g:113,x:1245,y:508,a:297,c:183},ShotgunFire08:{f:181,g:116,x:0,y:704,a:299,c:180},ShotgunFire09:{f:187,g:120,x:602,y:704,a:293,c:176},ShotgunFire10:{f:200,g:125,x:895,y:704,a:280,c:171},ShotgunFire11:{f:211,g:132,x:1324,y:704,a:269,c:164},ShotgunFire12:{f:215,g:139,x:305,y:884,a:265,c:157},ShotgunFire13:{f:212,g:145,x:1320,y:1199,a:268,c:151},ShotgunFire14:{f:203,g:149,x:299,y:1351,a:270,c:147},ShotgunFire15:{f:196,g:152,x:532,y:1500,a:256,c:144},ShotgunCycle01:{f:187,g:139,x:570,y:884,a:209,c:157},
ShotgunCycle02:{f:162,g:109,x:475,y:508,a:176,c:187},ShotgunCycle03:{f:123,g:88,x:1399,y:296,a:176,c:208},ShotgunCycle04:{f:101,g:84,x:0,y:296,a:176,c:212},ShotgunCycle05:{f:103,g:84,x:176,y:296,a:174,c:212},ShotgunCycle06:{f:126,g:84,x:350,y:296,a:173,c:212},ShotgunCycle07:{f:126,g:86,x:1220,y:296,a:179,c:210},ShotgunCycle08:{f:127,g:85,x:1045,y:296,a:175,c:211},ShotgunCycle09:{f:126,g:84,x:523,y:296,a:173,c:212},ShotgunCycle10:{f:123,g:84,x:696,y:296,a:173,c:212},ShotgunCycle11:{f:101,g:84,x:869,
y:296,a:176,c:212},ShotgunCycle12:{f:97,g:82,x:1240,y:0,a:181,c:214},ShotgunCycle13:{f:93,g:83,x:1421,y:0,a:192,c:213},ShotgunCycle14:{f:114,g:108,x:257,y:508,a:218,c:188},ShotgunCycle15:{f:166,g:139,x:779,y:884,a:250,c:157},ShotgunReload01:{f:196,g:153,x:788,y:1500,a:230,c:143},ShotgunReload02:{f:209,g:156,x:1502,y:1500,a:158,c:140},ShotgunReload03:{f:183,g:164,x:510,y:1644,a:182,c:132},ShotgunReload04:{f:150,g:151,x:866,y:1351,a:283,c:145},ShotgunReload05:{f:124,g:144,x:1029,y:884,a:356,c:152},
ShotgunReload06:{f:108,g:144,x:1385,y:884,a:372,c:152},ShotgunReload07:{f:108,g:144,x:0,y:1047,a:372,c:152},ShotgunReload08:{f:108,g:144,x:372,y:1047,a:308,c:152},ShotgunReload09:{f:108,g:144,x:680,y:1047,a:262,c:152},ShotgunReload10:{f:108,g:144,x:942,y:1047,a:262,c:152},ShotgunReload11:{f:107,g:144,x:1204,y:1047,a:373,c:152},ShotgunReload12:{f:108,g:144,x:0,y:1199,a:262,c:152},ShotgunReload13:{f:108,g:144,x:262,y:1199,a:262,c:152},ShotgunReload14:{f:108,g:144,x:524,y:1199,a:262,c:152},ShotgunReload15:{f:108,
g:144,x:786,y:1199,a:262,c:152},ShotgunReload16:{f:124,g:144,x:1048,y:1199,a:272,c:152},ShotgunReload17:{f:150,g:151,x:1149,y:1351,a:283,c:145},ShotgunReload18:{f:183,g:164,x:692,y:1644,a:182,c:132},ShotgunReload19:{f:209,g:156,x:1588,y:1199,a:158,c:140},ShotgunReload20:{f:196,g:153,x:1018,y:1500,a:230,c:143}};
Jk.prototype.equip=function(){var a=t.j-this.U;a+=2;this.Va=this.N.constructor.Pa["ShotgunEquip"+("00"+Math.floor(a/2.5)).slice(-2)];this.fc();this.Sb=this.N.Nc;Kk(this)||(9==a?this.ka.Ea+=kc(1):22<=a+1&&!this.N.ae.call(this)&&(this.Oe||this.Zb||!this.N.Nc&&this.N.$a?(this.action="cycleOpen",this.U=t.j+1-6):(this.nc(1),35<=a+1&&(this.action="ready"))))};
Jk.prototype.ready=function(){this.Va=this.N.constructor.Pa.ShotgunEquip13;this.fc();this.Sb=this.N.Nc;Kk(this)||this.N.ae.call(this)||(this.Oe||this.Zb?(this.action="cycleOpen",this.U=t.j+1,this.Sb=!1):this.nc(1))};
Jk.prototype.fire=function(){var a=t.j-this.U;this.Va=this.N.constructor.Pa["ShotgunFire"+("00"+(7>a?Math.floor(a):Math.floor((a-7)/4)+7)).slice(-2)]||this.N.constructor.Pa.ShotgunEquip13;this.fc();this.Sb=!1;if(0==a){t.i.W.get("ShotgunFire01").play({gain:.9375,pitch:.75});t.i.W.get("explode01").play({gain:.9375,pitch:1.5});this.N.Nc=0;this.N.yk=!0;t.b.Cf();this.$d=Gk.Nb(.04499,.31957,-.038305,-.596,.007,-179.3);a=this.Gg;a.Sa=1;var b=255*(pb(ob)+4)/5&255;a.color.r=b;a.color.bb=b;a.color.ra=b;a.scale=
pb(ob)+1;a.Qd=mc(nb());b=new H;b.translate(0,-4E4,0);Nd(this.$d,b,a.transform);a=Uk(this.ka);var c=Jk.Hf.length;b=Array(c);for(var d=0;d<c;d++){var f=qb(d+1);f!=d&&(b[d]=b[f]);b[f]=d}c=pb(ob)*Math.Dh;for(d=0;d<b.length;d++){f=(new H).rotate(0,Jk.Hf[8-d],0);var h=(new H).rotate(0,0,c+b[d]*Math.Dh/9),g=new H;Nd(a,h,g);Nd(g,f,g);h=this.N.cd(g);f=270;h=q(h);for(g=h.next();!g.done;g=h.next()){g=g.value;var k=f;g.item instanceof Z&&(k=Math.min(f,g.item.rb));Ok(g,k,1.2);f-=k;if(0>=f)break}}a=new Wk;a.mb=
6E4;a.scale=1;a.transform.m31-=45E3;b=new H;Nd(this.ka.ie.O,this.$d,b);Nd(b,a.transform,a.transform);a.G.y=-37500;Pd(b,a.G,a.G);a.G.add(this.ka.G);zd(a.G,a.Qb);a.ja=this.ka.ja;K(a,t.he);a.create();a.step();this.yf.push(a);3<this.yf.length&&(K(this.yf[0],null),this.yf.splice(0,1));this.ka.Ea+=kc(2)}else 1==a?this.Gg.Sa=0:3==a?this.ka.Ea+=kc(4):4<=a&&!Kk(this)&&(this.Oe||this.Zb?(this.action="cycleOpen",this.U=t.j+1):(this.nc(1),43<=a+1&&(this.action="ready")))};
Jk.prototype.cycleOpen=function(){var a=t.j-this.U;a=Math.min(a,27);this.Va=this.N.constructor.Pa["ShotgunCycle"+("00"+Math.floor(a/3)).slice(-2)]||this.N.constructor.Pa.ShotgunEquip13;this.fc();this.Sb=!1;if(!Kk(this))if(12==a)t.i.W.get("ShotgunOpen01").play({gain:1,pitch:.8125});else if(21==a){this.ka.Ea+=kc(1);this.N.$a+=this.N.Nc;this.$d=Gk.Nb(-.018192,.25469,-.045699,-19.3,39.9,177);if(this.N.yk||this.N.Nc){a=new Vk("CartridgeShotgunSpent");a.Tk=.65;a.$l=kc(24*(1*pb(ob)+1));a.transform.m31+=
6E3;var b=new H;Nd(this.ka.ie.O,this.$d,b);Nd(b,a.transform,a.transform);a.G.x=-3E3;a.G.z=-a.G.x;Pd(b,a.G,a.G);a.h.set(a.transform.s,a.transform.m31,a.transform.m32);a.G.add(this.ka.G);zd(a.G,a.Qb);K(a,t.De);a.create();this.N.yk=!1}this.N.Nc=0}else 27<=a&&(this.Oe||this.Zb?this.nc(1):(this.action="cycleShut",this.U=t.j+1-27))};
Jk.prototype.cycleShut=function(){var a=t.j-this.U;this.Va=this.N.constructor.Pa["ShotgunCycle"+("00"+Math.floor(a/3)).slice(-2)]||this.N.constructor.Pa.ShotgunEquip13;this.fc();this.Sb=!1;Kk(this)||(30==a?(t.i.W.get("ShotgunShut01").play({gain:1,pitch:.8125}),this.N.nc(this.N.Kg())):39<=a&&(this.Sb=this.N.Nc,!Kk(this)&&48<=a+1&&(this.action="ready")))};e=Jk.prototype;e.ae=function(){if(!this.le||!this.N.Nc)return!1;this.action="fire";this.U=t.j+1;return!0};e.si=Nk;
e.cd=function(a){var b=new w(a.s,a.m31,a.m32);a=new w(-a.C,-a.m21,-a.m22);var c=this.Wb,d=Ve(b,new w(a.x*c,a.y*c,a.z*c));d&&(c=d.d);var f=[];f.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=q(t.b.pc),g=h.next();!g.done;g=h.next())if(g=g.value,g.fb||!(t.j>g.U)){var k=g.h.X();k.y+=g.Qf;!(k=qk(b,a,k,g.ud,g.Pf+g.ud))||0>k.t||k.t>=c||(k.item=g,Ra(f,k))}d&&f.push(d);return f};e.Aj=function(){return!1};
e.eg=function(){var a=Mk(this);return 0>=a?2:5>a?1:0};e.Kg=function(){var a=1-this.Nc;a=Math.min(a,this.$a);return a*this.Ce-this.xc};e.nc=function(a){this.xc+=Math.min(a,this.Kg());a=Math.floor(this.xc/this.Ce);this.Nc+=a;this.$a-=a;this.xc-=a*this.Ce};function Xk(a){Lk.call(this,a);this.mg=24;this.ng=6;this.ib=0;this.$a=2*this.ng;this.lh=kc(4);this.yi=0;this.Ce=56;a.jb[this.constructor.Mc]=this;a.pe++}Xk.prototype=Object.create(Lk.prototype);Xk.prototype.constructor=Xk;
Xk.Pa={RevolverEquip00:{f:0,g:255,x:1099,y:1692,a:480,c:41},RevolverEquip01:{f:32,g:246,x:651,y:1692,a:448,c:50},RevolverEquip02:{f:129,g:224,x:300,y:1692,a:351,c:72},RevolverEquip03:{f:180,g:199,x:0,y:1692,a:300,c:97},RevolverEquip04:{f:193,g:176,x:858,y:1443,a:287,c:120},RevolverEquip05:{f:194,g:157,x:1382,y:1296,a:249,c:139},RevolverEquip06:{f:184,g:144,x:343,y:845,a:232,c:152},RevolverEquip07:{f:172,g:148,x:258,y:999,a:255,c:148},RevolverAim01:{f:178,g:152,x:808,y:1296,a:226,c:144},RevolverAim02:{f:150,
g:150,x:341,y:1296,a:214,c:146},RevolverAim03:{f:133,g:148,x:513,y:999,a:208,c:148},RevolverFire01:{f:184,g:149,x:208,y:1148,a:238,c:147},RevolverFire02:{f:184,g:149,x:446,y:1148,a:238,c:147},RevolverFire03:{f:184,g:149,x:684,y:1148,a:238,c:147},RevolverFire04:{f:184,g:149,x:922,y:1148,a:238,c:147},RevolverFire05:{f:195,g:149,x:1160,y:1148,a:217,c:147},RevolverFire06:{f:201,g:111,x:1563,y:269,a:148,c:185},RevolverFire07:{f:197,g:71,x:0,y:269,a:144,c:225},RevolverFire08:{f:212,g:100,x:660,y:269,a:192,
c:196},RevolverFire09:{f:173,g:114,x:486,y:494,a:253,c:182},RevolverFire10:{f:180,g:111,x:0,y:494,a:242,c:185},RevolverFire11:{f:176,g:113,x:242,y:494,a:244,c:183},RevolverFire12:{f:169,g:126,x:1548,y:494,a:266,c:170},RevolverFire13:{f:171,g:139,x:759,y:679,a:269,c:157},RevolverFire14:{f:171,g:147,x:0,y:999,a:258,c:149},RevolverFire15:{f:185,g:149,x:1377,y:1148,a:237,c:147},RevolverAimFire01:{f:133,g:148,x:721,y:999,a:208,c:148},RevolverAimFire02:{f:133,g:148,x:929,y:999,a:208,c:148},RevolverAimFire03:{f:133,
g:148,x:1137,y:999,a:208,c:148},RevolverAimFire04:{f:133,g:148,x:1345,y:999,a:208,c:148},RevolverAimFire05:{f:138,g:148,x:1553,y:999,a:200,c:148},RevolverAimFire06:{f:144,g:119,x:739,y:494,a:168,c:177},RevolverAimFire07:{f:140,g:87,x:338,y:269,a:146,c:209},RevolverAimFire08:{f:153,g:110,x:1370,y:269,a:193,c:186},RevolverAimFire09:{f:126,g:121,x:1329,y:494,a:219,c:175},RevolverAimFire10:{f:135,g:119,x:907,y:494,a:211,c:177},RevolverAimFire11:{f:130,g:120,x:1118,y:494,a:211,c:176},RevolverAimFire12:{f:126,
g:130,x:0,y:679,a:219,c:166},RevolverAimFire13:{f:127,g:141,x:1028,y:679,a:219,c:155},RevolverAimFire14:{f:131,g:146,x:922,y:845,a:212,c:150},RevolverAimFire15:{f:133,g:148,x:0,y:1148,a:208,c:148},RevolverReload01:{f:181,g:136,x:560,y:679,a:199,c:160},RevolverReload02:{f:171,g:107,x:1194,y:269,a:176,c:189},RevolverReload03:{f:141,g:71,x:144,y:269,a:194,c:225},RevolverReload04:{f:113,g:40,x:1337,y:0,a:216,c:256},RevolverReload05:{f:95,g:28,x:503,y:0,a:222,c:268},RevolverReload06:{f:91,g:27,x:0,y:0,
a:238,c:269},RevolverReload07:{f:90,g:27,x:238,y:0,a:265,c:269},RevolverReload08:{f:107,g:35,x:725,y:0,a:204,c:261},RevolverReload09:{f:107,g:36,x:929,y:0,a:204,c:260},RevolverReload10:{f:107,g:36,x:1133,y:0,a:204,c:260},RevolverReload11:{f:117,g:51,x:1553,y:0,a:193,c:245},RevolverReload12:{f:135,g:90,x:484,y:269,a:176,c:206},RevolverReload13:{f:141,g:141,x:1247,y:679,a:175,c:155},RevolverReload14:{f:139,g:149,x:0,y:1296,a:341,c:147},RevolverReload15:{f:137,g:142,x:0,y:845,a:343,c:154},RevolverReload16:{f:138,
g:103,x:852,y:269,a:342,c:193},RevolverReload17:{f:139,g:130,x:219,y:679,a:341,c:166},RevolverReload18:{f:139,g:141,x:1422,y:679,a:341,c:155},RevolverReload19:{f:133,g:145,x:575,y:845,a:347,c:151},RevolverReload20:{f:132,g:146,x:1134,y:845,a:348,c:150},RevolverReload21:{f:132,g:146,x:1482,y:845,a:348,c:150},RevolverReload22:{f:132,g:152,x:1034,y:1296,a:348,c:144},RevolverReload23:{f:139,g:174,x:517,y:1443,a:341,c:122},RevolverReload24:{f:153,g:184,x:0,y:1580,a:327,c:112},RevolverReload25:{f:163,g:187,
x:985,y:1580,a:317,c:109},RevolverReload26:{f:155,g:187,x:1302,y:1580,a:325,c:109},RevolverReload27:{f:142,g:186,x:647,y:1580,a:338,c:110},RevolverReload28:{f:156,g:185,x:327,y:1580,a:320,c:111},RevolverReload29:{f:144,g:182,x:1424,y:1443,a:293,c:114},RevolverReload30:{f:128,g:177,x:1145,y:1443,a:279,c:119},RevolverReload31:{f:136,g:169,x:256,y:1443,a:261,c:127},RevolverReload32:{f:150,g:159,x:0,y:1443,a:256,c:137},RevolverReload33:{f:167,g:151,x:555,y:1296,a:253,c:145}};
Xk.prototype.equip=function(){var a=t.j-this.U,b=Math.floor(a/2.5);this.Va=this.N.constructor.Pa["RevolverEquip"+("00"+b).slice(-2)];this.bf=this.af=0;this.Sb=this.N.ib;Kk(this)||(0==this.N.ib&&2<=this.N.$a&&(this.Zb=!0),this.Zb?(this.action="reload",this.U=t.j+1):0==a?this.ka.Ea+=kc(1):5<=b&&(this.N.Of.call(this,!0),this.N.ae.call(this)||(this.nc(1),20<=a+1&&(this.action="ready"))))};
Xk.prototype.ready=function(){this.Va=this.N.constructor.Pa.RevolverEquip07;this.fc();this.Sb=this.N.ib;Kk(this)||(this.Zb?(this.action="reload",this.U=t.j+1):(this.N.Of.call(this,!0),this.N.ae.call(this)||this.nc(1)))};
Xk.prototype.fire=function(){var a=t.j-this.U,b=("00"+(7>a?Math.floor(a):Math.floor((a-7)/3)+7)).slice(-2);this.Va=this.focus?this.N.constructor.Pa["RevolverAimFire"+b]||this.N.constructor.Pa.RevolverAim03:this.N.constructor.Pa["RevolverFire"+b]||this.N.constructor.Pa.RevolverEquip07;this.fc();if(4==a){t.i.W.get("CarbineFire01").play({gain:1,pitch:1});t.i.W.get("ShotgunFire01").play({gain:.5,pitch:1.5});this.le=0;this.N.ib--;t.b.Cf();this.N.yi++;!this.N.ib&&this.N.$a&&(this.Zb=1);this.$d=this.focus?
Gk.Nb(0,.49195,-.017475,-.713,0,0):Gk.Nb(.032225,.49195,-.022213,.367,-.151,.525);b=this.Gg;b.Sa=1;var c=255*(pb(ob)+4)/5&255;b.color.r=c;b.color.bb=c;b.color.ra=c;b.scale=pb(ob)+1;b.Qd=mc(nb());c=new H;c.translate(0,-21E3,0);Nd(this.$d,c,b.transform);b=new Wk;b.mb=6E4;b.scale=1;b.transform.m31-=45E3;c=new H;Nd(this.ka.ie.O,this.$d,c);Nd(c,b.transform,b.transform);b.G.y=-37500;Pd(c,b.G,b.G);b.G.add(this.ka.G);zd(b.G,b.Qb);b.ja=this.ka.ja;K(b,t.he);b.create();b.step();this.yf.push(b);b=(new H).rotate(0,
kc(0*pb(ob)),0);c=(new H).rotate(0,0,pb(ob)*Math.PI*2);var d=Uk(this.ka);Nd(d,c,d);Nd(d,b,d);b=this.N.cd(d);b=q(b);for(c=b.next();!c.done;c=b.next()){c=c.value;d=c.item instanceof Z?3:1;for(var f=0;f<d;f++)Ok(c,360,1.7)}}else if(5==a)this.Gg.Sa=0;else if(7==a)this.ka.Ea+=kc(3);else if(10<=a){if(Kk(this))return;if(this.Zb){this.action="reload";this.U=t.j+1;return}this.N.Of.call(this,!1);if(this.N.ae.call(this))return;this.nc(1)}34<=a+1&&(this.action="ready")};
Xk.prototype.reload=function(){var a=t.j-this.U;a+=3;this.Va=this.N.constructor.Pa["RevolverReload"+("00"+Math.floor(a/3)).slice(-2)];this.fc();this.Zb=0;84>a&&(this.Sb=!1,this.focus-=1/6,0>this.focus&&(this.focus=0));if(!Kk(this))if(21==a)t.i.W.get("RevolverSpin01").play({gain:1,pitch:1}),t.i.W.get("RevolverEjectorUp").play({gain:2/3,pitch:1});else if(24==a){this.ka.Ea+=kc(.5);for(a=0;a<this.N.yi;a++)t.i.W.get("shellCasing0"+(qb(3)+1)).play({gain:.625,pitch:.65,delay:.125+.15*a});this.N.yi=0;this.N.$a+=
this.N.ib;this.N.ib=0;t.b.Cf()}else 54==a?t.i.W.get("RevolverSlap01").play({gain:1,pitch:1}):57==a?(this.ka.Ea+=kc(1),this.N.nc(this.N.Kg())):78==a?t.i.W.get("RevolverSpin01").play({gain:1,pitch:1}):81==a?t.i.W.get("RevolverSlap02").play({gain:1,pitch:1}):84<=a&&(this.Sb=this.N.ib,this.N.Of.call(this,!0),this.N.ae.call(this)||(this.nc(1),102<=a+1&&(this.action="ready")))};e=Xk.prototype;
e.Of=function(a){this.Oe&&(this.focus+=1/6,1<this.focus&&(this.focus=1),t.va.reticleInSights||(this.Sb=!1));a&&this.focus&&(this.Va=this.N.constructor.Pa["RevolverAim"+("00"+Math.floor(3*this.focus)).slice(-2)]||this.N.constructor.Pa.RevolverEquip07)};e.ae=function(){if(!this.le||1!=this.focus&&0!=this.focus)return!1;if(!this.N.ib)return this.N.$a&&(this.Zb=1),!1;this.action="fire";this.U=t.j+1;return!0};e.si=function(a){return.5<this.fk.focus?Yk(this,a):Nk.call(this,a)};
function Yk(a,b){function c(r){var p=xd(r,d,new w);r=p.length();var v=26512.5/r;p=uf(d,p);for(var B=0,y=!0;;){var x=p.shift();if(!x){if(!y){B+=v;break}B=1;break}if(!y){y=x.t-B;if(y>v){B+=v;break}v-=y}B=x.t;y=!x.Wa}return B*r>=r-1E3}var d=new w(b.s,b.m31,b.m32),f=new w(-b.C,-b.m21,-b.m22),h=a.Wb;b=[];b.cmp=function(r,p){return r.Cg>p.Cg?-1:1};for(var g=q(t.b.pc),k=g.next();!k.done;k=g.next())if(k=k.value,(k.fb||!(t.j>k.U))&&600>t.j-k.dj){var l=k.h.X();l.y+=k.Qf;var m=rk(d,f,l,k.ud-a.Ih,k.Pf);if(m.cf)l=
m.cf,0>l.t||l.t>=h||(l.p.Cg=h-l.t,l.p.item=k,Ra(b,l.p));else{l=m.oi.X();var n=m.Fj-(k.ud-a.Ih);l.x+=m.Pe.x*n;l.y+=m.Pe.y*n;l.z+=m.Pe.z*n;m=xd(m.oi,d,new w).normalize();n=xd(l,d,new w).normalize();0>=rc(n,f)||(m=rc(m,n),l.Cg=m-1,l.item=k,Ra(b,l),Math.acos(m)>=a.lh&&(l.dn=!0))}}a=null;b=q(b);for(f=b.next();!f.done;f=b.next())f=f.value,c(f)&&(f.item.Sm=t.j,f.dn||a||(a=f));return a}
e.cd=function(a){var b=new w(a.s,a.m31,a.m32),c=new w(-a.C,-a.m21,-a.m22),d=this.Wb;a=[];for(var f=uf(b,new w(c.x*d,c.y*d,c.z*d)),h=26512.5/d,g=0,k=!0;;){var l=f.shift();if(!l){k||(d*=g+h);break}if(!k){k=l.t-g;if(k>h){d*=g+h;break}h-=k}g=l.t;l.Wa&&a.push(l);k=!l.Wa}f=[];f.cmp=function(m,n){return m.t<n.t?-1:m.t>n.t?1:m.item.index<n.item.index?-1:m.item.index>n.item.index?1:0};h=q(t.b.pc);for(g=h.next();!g.done;g=h.next())g=g.value,!g.fb&&t.j>g.U||(l=g.h.X(),l.y+=g.Qf,!(l=qk(b,c,l,g.ud,g.Pf+g.ud))||
0>l.t||l.t>=d||(l.item=g,Ra(f,l)));b=[];f.length&&b.push(f[0]);b.push.apply(b,ba(a));return b};e.Aj=function(){return 0>=this.$a||"reload"==this.fk.action||2<this.ib?!1:!0};e.eg=function(){var a=Mk(this);return 0>=a?2:6>a?1:0};e.nc=function(a){this.xc+=Math.min(a,this.Kg());a=Math.floor(this.xc/this.Ce);this.ib+=a;this.$a-=a;this.yi=Math.max(0,this.yi-a);this.xc-=a*this.Ce};function Ik(a){Lk.call(this,a);this.mg=6;this.$a=this.ng=0;a.jb[this.constructor.Mc]=this;a.pe++}Ik.prototype=Object.create(Lk.prototype);
Ik.prototype.constructor=Ik;
Ik.Pa={GrenadeThrow00:{f:0,g:271,x:324,y:1067,a:461,c:25},GrenadeThrow01:{f:0,g:252,x:625,y:1E3,a:467,c:44},GrenadeThrow02:{f:0,g:229,x:0,y:1E3,a:478,c:67},GrenadeThrow03:{f:0,g:200,x:725,y:888,a:480,c:96},GrenadeThrow04:{f:0,g:172,x:480,y:756,a:480,c:124},GrenadeThrow05:{f:0,g:156,x:740,y:333,a:480,c:140},GrenadeThrow06:{f:0,g:150,x:0,y:187,a:480,c:146},GrenadeThrow07:{f:0,g:150,x:480,y:187,a:480,c:146},GrenadeThrow08:{f:0,g:157,x:476,y:477,a:480,c:139},GrenadeThrow09:{f:0,g:164,x:0,y:756,a:480,
c:132},GrenadeThrow10:{f:0,g:152,x:0,y:333,a:478,c:144},GrenadeThrow11:{f:0,g:156,x:0,y:477,a:476,c:140},GrenadeThrow12:{f:0,g:159,x:480,y:617,a:474,c:137},GrenadeThrow13:{f:0,g:157,x:0,y:617,a:480,c:139},GrenadeThrow14:{f:0,g:184,x:0,y:888,a:480,c:112},GrenadeThrow16:{f:58,g:243,x:478,y:1E3,a:147,c:53},GrenadeThrow17:{f:14,g:214,x:960,y:756,a:233,c:82},GrenadeThrow18:{f:0,g:189,x:480,y:888,a:245,c:107},GrenadeThrow19:{f:0,g:226,x:954,y:617,a:194,c:70},GrenadeThrow20:{f:392,g:46,x:0,y:0,a:88,c:187},
GrenadeThrow21:{f:297,g:89,x:305,y:0,a:183,c:165},GrenadeThrow22:{f:263,g:111,x:88,y:0,a:217,c:185},GrenadeThrow23:{f:216,g:155,x:478,y:333,a:262,c:141},GrenadeThrow24:{f:131,g:147,x:851,y:0,a:326,c:149},GrenadeThrow25:{f:63,g:135,x:488,y:0,a:363,c:161},GrenadeThrow26:{f:48,g:269,x:0,y:1067,a:324,c:27}};
Ik.prototype.equip=function(){var a=t.j-this.U;a+=5;37.5<=a?(a=45>a?37.5:a-7.5,this.fc()):this.bf=this.af=0;a=Math.min(a,45);this.Va=this.N.constructor.Pa["GrenadeThrow"+("00"+Math.floor(a/2.5)).slice(-2)];this.Sb=!1;if(!Kk(this)){if(33==a)this.ka.Ea+=kc(1),t.i.W.get("RevolverEjectorDown").play({gain:1,pitch:1});else if(35<=a&&(this.le||this.Id||this.be)){this.action="throw";this.U=t.j+1;return}45<=a+1&&(this.action="ready")}};
Ik.prototype.ready=function(){this.Va=this.N.constructor.Pa["GrenadeThrow"+"0018".slice(-2)];this.fc();this.Sb=!1;Kk(this)||!this.le&&!this.Id||(this.action="throw",this.U=t.j+1)};
Ik.prototype["throw"]=function(){var a=t.j-this.U;a+=47;this.Va=this.N.constructor.Pa["GrenadeThrow"+("00"+Math.floor(a/2.5)).slice(-2)];this.bf=this.af=0;this.Sb=!1;this.Id=0;if(!Kk(this)){if(58==a)t.i.W.get("MasherSwing01").play({gain:1,pitch:1});else if(60==a)this.ka.Ea+=kc(1);else if(61==a){this.N.$a--;t.b.Cf();var b;var c=b=new Zk;c.transform.s+=6E3;c.transform.m31-=6E3;c.transform.m32-=12E4;var d=this.ka.ie.O;Nd(d,c.transform,c.transform);c.h.x=c.transform.s;c.h.y=c.transform.m31;c.h.z=c.transform.m32;
c.G.y=1;c.G.z=-6;c.G.scale(6E3);Pd(d,c.G,c.G);c.h.x-=3*c.G.x;c.h.y-=3*c.G.y;c.h.z-=3*c.G.z;c.G.add(this.ka.G);zd(c.G,c.Qb);K(c,t.pj);c.create();d=c=new $k;d.transform.s+=28E3;d.transform.m31-=13E3;d.transform.m32-=12E4;var f=this.ka.ie.O;Nd(f,d.transform,d.transform);d.h.x=d.transform.s;d.h.y=d.transform.m31;d.h.z=d.transform.m32;d.G.x=1E4;d.G.y=8E3;d.G.z=-3E4;d.G.scale(.8);Pd(f,d.G,d.G);d.h.x-=3*d.G.x;d.h.y-=3*d.G.y;d.h.z-=3*d.G.z;d.G.add(this.ka.G);zd(d.G,d.Qb);K(d,t.pj);d.create();b.Yd.push(c);
c.Yd.push(b);b.Yd.push(this.ka);c.Yd.push(this.ka)}70<=a+1&&(this.be=null,this.rd=this.Sl,Kk(this))}};Ik.prototype.cd=function(){return null};Ik.prototype.si=Ik.prototype.cd;Ik.prototype.eg=function(){var a=Mk(this);return 0>=a?2:2>a?1:0};function Zk(){gk.call(this,"grenade");this.sa=new H;this.j=3;this.Vg=.5;this.xb=16;this.Ba=8750;this.pb=0;this.Xf=3;this.qf=.15;this.rf=.4;this.I=t.i.za.get("physicalCardThreshold");this.U=t.j;this.Sa=0;this.Yh=NaN;this.Wb=6E5}Zk.prototype=Object.create(gk.prototype);
e=Zk.prototype;e.constructor=Zk;e.step=function(){t.j==this.U+3&&(this.Sa=-1);this.j+=this.Vg;this.j%=8;0<=t.j-this.Yh&&this.Kh();isNaN(this.Yh)&&25E4>this.G.wc()&&(this.Yh=t.j+5);gk.prototype.step.call(this)};e.ij=function(){this.Vg=this.j=0};e.jj=function(a){a instanceof Z&&isNaN(this.Yh)&&(this.Yh=t.j+5)};e.create=function(){Zd(this,13125);gk.prototype.create.call(this)};
e.Kh=function(){function a(k){var l=xd(k.h,b.h,new w),m=l.wc();Ve(b.h,l,We)||(l=b.Wb*b.Wb/m*360,1<=l&&k.rg(l))}var b=this;t.i.W.get("explode01").play({gain:1,pitch:1.2},this.h,15);if(t.b.da){var c=t.b.da,d=xd(c.h,this.h,new w);d=this.Wb*this.Wb/d.wc();d=Math.min(5,d);c.Ea+=kc(5)*d}c=q(t.b.Wg);for(d=c.next();!d.done;d=c.next())a(d.value);c=q(t.b.Zg);for(d=c.next();!d.done;d=c.next())a(d.value);c=q(t.b.pc);for(d=c.next();!d.done;d=c.next())if(d=d.value,d.fb&&(d=xd(d.h,this.h,new w),!(d.na(1)>this.Wb+
1E5))){var f=this.cd(d);d=720;f=q(f);for(var h=f.next();!h.done;h=f.next()){h=h.value;var g=d;h.item instanceof Z&&(g=Math.min(d,h.item.rb));Ok(h,g,1.2);d-=g;if(0>=d)break}}for(c=0;14>c;c++)for(d=1.342*pb(ob)-.342,d=this.cd(uc(d)),d=q(d),h=d.next();!h.done;h=d.next())f=h.value,f.item instanceof Z||(t.i.W.get("MasherSlap01").play({Yf:.05},f.p,5),Ok(f,720,1));this.Ja&&(c=new Fk(1E5,this.Ja),c.transform.s=this.h.x,c.transform.m31=this.h.y,c.transform.m32=this.h.z,K(c,t.he),c.create());this.remove()};
e.cd=function(a){var b=this.h.X(),c=this.Wb,d=Ve(b,new w(a.x*c,a.y*c,a.z*c));d&&(c=d.d);var f=[];f.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=q(t.b.pc),g=h.next();!g.done;g=h.next())if(g=g.value,g.fb||!(t.j>g.U)){var k=g.h.X();k.y+=g.Qf;!(k=rk(b,a,k,g.ud,g.Pf).cf)||0>k.t||k.t>=c||(k.item=g,Ra(f,k))}d&&f.push(d);return f};
e.bd=function(){var a=Qd(this.O),b=xd(Qd(t.la.O),a,new w),c=b.na(1);c=Math.min(1,c/(4*this.Ba));var d=new w(0,1,0),f=tc(d,b,new w).normalize();tc(b,f,d);var h=t.la.O.hf(),g=t.la.O.td();this.sa.Ee(yd(t.la.O.gf(),f,c).normalize());this.sa.Fe(yd(h,d,c).normalize());this.sa.Ge(yd(g,b,c).normalize());Rd(this.sa,a)};
e.ab=function(){this.bd();t.Fb(zg);t.eb(this.I);t.Jb(0,t.i.P.get("Grenade"));Z.ba.bind();t.I.M("ambientLight",this.ja.lb,!1);t.tb(0);t.$b(0);t.I.M("color",id);var a=new H;a.set(this.sa);a.u*=17500;a.A*=17500;a.B*=17500;a.v*=-17500;a.m11*=-17500;a.m12*=-17500;t.I.M("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,Ag(Math.floor(this.j),this.xb),4)};
function $k(){gk.call(this,"grenade spoon");this.sa=new H;this.j=2;this.Vg=8-1/3;this.xb=16;this.Ba=8750;this.pb=0;this.Xf=.5;this.qf=.1;this.rf=.002;this.I=t.i.za.get("physicalCardThreshold");this.U=t.j}$k.prototype=Object.create(gk.prototype);e=$k.prototype;e.constructor=$k;e.step=function(){var a=t.j-this.U;this.j+=this.Vg;this.j%=8;120<=a&&this.remove();gk.prototype.step.call(this)};e.ij=function(){this.j=0;this.Vg=.5*(this.Vg-8)+8};
e.bd=function(){var a=Qd(this.O),b=xd(Qd(t.la.O),a,new w),c=b.na(1);c=Math.min(1,c/(4*this.Ba));var d=new w(0,1,0),f=tc(d,b,new w).normalize();tc(b,f,d);var h=t.la.O.hf(),g=t.la.O.td();this.sa.Ee(yd(t.la.O.gf(),f,c).normalize());this.sa.Fe(yd(h,d,c).normalize());this.sa.Ge(yd(g,b,c).normalize());Rd(this.sa,a)};
e.ab=function(){this.bd();t.Fb(zg);t.eb(this.I);t.Jb(0,t.i.P.get("Grenade"));Z.ba.bind();t.I.M("ambientLight",this.ja.lb,!1);t.tb(0);t.$b(0);t.I.M("color",id);var a=new H;a.set(this.sa);a.u*=17500;a.A*=17500;a.B*=17500;a.v*=-17500;a.m11*=-17500;a.m12*=-17500;t.I.M("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,Ag(Math.floor(this.j)+8,this.xb),4)};function al(a){Lk.call(this,a);this.Wb=25E4;this.lh=kc(30);a.jb[this.constructor.Mc]=this;a.pe++}al.prototype=Object.create(Lk.prototype);
al.prototype.constructor=al;
al.Pa={MasherStrike00:{f:33,g:251,x:341,y:944,a:353,c:45},MasherStrike01:{f:82,g:233,x:0,y:944,a:341,c:63},MasherStrike02:{f:0,g:203,x:0,y:851,a:471,c:93},MasherStrike03:{f:65,g:168,x:0,y:723,a:415,c:128},MasherStrike04:{f:118,g:98,x:0,y:525,a:362,c:198},MasherStrike05:{f:188,g:87,x:426,y:282,a:292,c:209},MasherStrike06:{f:220,g:73,x:193,y:282,a:233,c:223},MasherStrike07:{f:227,g:53,x:0,y:282,a:193,c:243},MasherStrike08:{f:234,g:29,x:512,y:0,a:165,c:267},MasherStrike09:{f:261,g:17,x:174,y:0,a:156,
c:279},MasherStrike10:{f:266,g:14,x:0,y:0,a:174,c:282},MasherStrike11:{f:229,g:147,x:771,y:525,a:251,c:149},MasherStrike12:{f:224,g:136,x:596,y:525,a:175,c:160},MasherStrike13:{f:224,g:159,x:718,y:282,a:188,c:137},MasherStrike14:{f:218,g:184,x:673,y:723,a:262,c:112},MasherStrike15:{f:217,g:205,x:471,y:851,a:263,c:91},MasherStrike16:{f:215,g:208,x:734,y:851,a:265,c:88},MasherStrike17:{f:222,g:171,x:415,y:723,a:258,c:125},MasherStrike18:{f:246,g:110,x:362,y:525,a:234,c:186},MasherStrike19:{f:261,g:52,
x:677,y:0,a:219,c:244},MasherStrike20:{f:264,g:21,x:330,y:0,a:182,c:275}};al.prototype.equip=function(){var a=t.j-this.U;25<=a&&(a=25);this.Va=this.N.constructor.Pa["MasherStrike"+("00"+Math.floor(a/2.5)).slice(-2)];this.fc();this.Sb=!1;Kk(this)||(this.le||this.Id||this.be?(this.action="strike",this.U=t.j+1,this.Va=this.N.constructor.Pa.MasherStrike11,this.bf=this.af=0):25<=a+1&&(this.action="ready"))};
al.prototype.ready=function(){this.Va=this.N.constructor.Pa["MasherStrike"+"0010".slice(-2)];this.fc();Kk(this)||!this.le&&!this.Id||(this.action="strike",this.U=t.j+1)};
al.prototype.strike=function(){var a=t.j-this.U;a+=33;this.Va=this.N.constructor.Pa["MasherStrike"+("00"+Math.floor(a/3)).slice(-2)];this.bf=this.af=0;if(!Kk(this))if(33==a)t.i.W.get("MasherSwing01").play({Yf:.05});else if(36==a){this.ka.Ea+=kc(2);a=Uk(this.ka);a=this.N.cd(a);a=q(a);for(var b=a.next();!b.done;b=a.next())b=b.value,t.i.W.get("MasherSlap01").play({Yf:.05}),b.item instanceof Z&&t.i.W.get("MasherSquish"+xb("01","02","03")).play({gain:2/3,Yf:.05}),Ok(b,120,1),this.ka.Ea+=kc(2)}else 48<=
a&&(b=this.Id,this.be||(b|=this.le),b?(this.action="strike",this.U=t.j+1):63<=a+1&&(this.be?(this.be=null,this.rd=this.Sl,Kk(this)):this.action="ready"))};
al.prototype.cd=function(a){var b=new w(a.s,a.m31,a.m32),c=new w(-a.C,-a.m21,-a.m22),d=this.Wb;if(a=Ve(b,new w(c.x*d,c.y*d,c.z*d)))d=a.d;var f=[];f.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=q(t.b.pc),g=h.next();!g.done;g=h.next())if(g=g.value,g.fb||!(t.j>g.U)){var k=g.h.X();k.y+=g.Qf;!(k=rk(b,c,k,g.ud,g.Pf).cf)||0>k.t||k.t>=d||(k.item=g,Ra(f,k))}b=[];f.length&&b.push(f[0]);a&&b.push(a);return b};al.prototype.si=Nk;
function Vk(a){gk.call(this,a);this.Ub=12500;this.rf=1;this.start=t.j;this.Zl=new w(pb(ob)-.5,pb(ob)-.5,pb(ob)-.5);this.Zl.na(1);this.Tk=1}Vk.prototype=Object.create(gk.prototype);Vk.prototype.constructor=Vk;Vk.prototype.create=function(){gk.prototype.create.call(this);var a=new qg(t.i.Fc.get(this.name));a.Ma=this.O;a.transform.scale(.1,.1,.1);a.transform.rotate(0,-90,0);K(a,this);a.create();Yd(a,this.ja)};
Vk.prototype.step=function(){this.transform.uk(this.Zl,this.$l);30<=t.j-this.start&&this.remove();gk.prototype.step.call(this)};Vk.prototype.remove=function(){t.i.W.get("shellCasing0"+(qb(3)+1)).play({gain:.625,pitch:this.Tk});gk.prototype.remove.call(this)};function Sk(a){t.Node.call(this,a);this.lc=t.j}Sk.prototype=Object.create(t.Node.prototype);Sk.prototype.constructor=Sk;
Sk.prototype.step=function(){t.Node.prototype.step.call(this);var a=t.j-this.lc-6;0>a||(0==a&&t.i.W.get(xb("woodSnap01","woodSnap02","woodSnap03")).play({gain:10/60}),5<=(1<=a?a-1:0)&&this.remove())};var Ck=[];function Dk(){var a=Ck.indexOf(this);0>a||Ck.splice(a,1)};function bl(a){kk.call(this,a);this.rf=100;this.Xf=0;this.Ba=4E4;this.hd=18E4;this.Mj=9E4;this.pb=.5*(this.hd-2*this.Ba-6E4);this.Gk=12E4;this.$c=12500;this.oh=2/3*this.$c;this.ck=kk.Dj(125E3);this.Ub=2E5;this.ff=16;this.Vi=this.Wi=this.fc=this.mf=this.Yj=this.Zj=this.zj=this.Ea=this.Gh=this.Ii=0;this.rb=360;this.ih=[];this.ek=this.dk=-Infinity;this.lf=0;this.fb=!0;this.Dg=0;this.El=-Infinity;this.Fl=Number.NEGATIVE_INFINITY;this.Gl=4E5;this.zd={}}bl.prototype=Object.create(kk.prototype);e=bl.prototype;
e.constructor=bl;e.create=function(){gk.prototype.create.call(this);var a=this.Wc=new jg("worldCamera");a.Hg=6E3;a.yg=5E7;a.Ma=this.O;K(a,this);t.b.la=a;a=this.ie=new jg("selfCamera");a.Hg=this.Wc.Hg;a.yg=this.Wc.yg;a.Ma=this.Wc.O;K(a,t.De);a=this.Da=new Gk(this);a.Sa=0;K(a,t.De);a.create();new al(this.Da);this.Da.rd=this.Da.jb[0];t.b.kf=-1;t.b.Ng=t.j};
e.step=function(){kk.prototype.step.call(this);if(!(this.Ja.ed||this.Ja.Xm||10>t.j-this.ik)){var a=this.Ja.ja.lb;.028<.2126*a.x+.7152*a.y+.0722*a.z||(a=xb(.1125,.175),this.Ja.Db.set(a,a,a),this.Ja.Xm=!0,t.i.W.get("hit02").play({gain:.5,pitch:2}))}a=this.Ja.Kb.Ib;t.b.Ib!=a&&(t.b.Ib=a,df(a.Kj),t.b.Ad=a.Ad,t.b.Ik(),t.b.Lf=a.Lf,t.b.hl=a.Lf);if(this.fb){for(a=this.lf=0;a<this.ih.length;a++){var b=this.ih[a],c=t.j-30-b.ah;0>c?this.lf+=b.ma:0<b.ma?(b=b.ma-2*c,0>=b?this.ih.splice(a--,1):this.lf+=b):0>b.ma&&
(b=b.ma+2*c,0<=b?this.ih.splice(a--,1):this.lf+=b)}this.fb&&(N.lock&&(a=1,this.Da.N&&(a=Xa(1,this.Da.N.Uj,this.Da.focus)),a=t.bn*a,this.Ii-=N.Pc.x*a,this.Gh+=N.Pc.y*a),this.Gh=Wa(this.Gh,-1073741824,1073741824));a=mc(this.Ii);b=mc(this.Gh)+kc(1.5*this.Yj);c=kc(1.5*this.Zj);Dd(this.transform);this.transform.rotate(a,0,0);Dd(this.Wc.transform);this.Wc.transform.rotate(0,b,c);t.Yl||(this.Wc.transform.rotate((pb(ob)-.5)*this.Ea,(pb(ob)-.5)*this.Ea,0),this.Ea*=.8125);0==(t.j&1)&&(this.bi()?(a=this.Rc*
Math.PI/this.ff,this.zj=6E3*Math.abs(Math.sin(a)),this.Wi=Math.sin(a)*Math.PI/210,this.fc=(1-Math.abs(Math.sin(a)))*Math.PI/210):(this.zj*=.75,this.fc*=.75,this.Wi*=.75),this.Vi-=kc(3),0>this.Vi&&(this.Vi=0));this.Wc.transform.m31=this.pb+this.Ba-6E3-6E3+this.zj;a=1;this.Da.N&&(a=Xa(1,this.Da.N.Uj,this.Da.focus));this.$c=11E3*Xa(1,2/3,this.Da.focus);this.ie.Zd=kc(24*a);this.Wc.Zd=kc(37.5*a);this.Ja&&(a=this.Ja.ta-this.pb-this.Ba,this.h.y>a&&(this.h.y=a,this.G.y=Math.min(this.G.y,0)));a=this.Gl;a*=
a;for(var d in this.zd)b=this.zd[d],xd(this.h,b.h,new w(0,0,0)).wc()>=a?cl(b):(b.species.uc.call(b,this),b.ma||b.remove());if(!(2>t.j-this.Fl)){d=a;a=null;b=xf(this.h,this.Gl);b=q(b);for(c=b.next();!c.done;c=b.next())for(c=c.value.kj.first();null!=c.item;c=c.next)if(c.item instanceof dl){if(225E8>xd(this.h,c.item.h,new w).wc()){a=c.item;break}}else if(c.item instanceof W&&!c.item.we&&!(c.item.zd||0>=c.item.species.Jc.call(c.item,this))){var f=xd(this.h,c.item.h,new w(0,0,0)).wc();f<d&&(d=f,a=c.item)}a&&
(a.yl(this),this.Fl=t.j)}}else if(t.j==t.b.Ng)N.xk(!1);else if(t.j==t.b.Ng+2){d=[];a=q(Ze);for(b=a.next();!b.done;b=a.next())b=b.value,b.Kb.Ib==t.b.Ib&&d.push(b);d=tb(d);a=tb(d);a=tb(a);b=a.L-a.J-5E4-5E4;d=new w(qb(a.D-a.w-5E4-5E4)+a.w+5E4,d.ta-1E3,qb(b)+a.J+5E4);if(a=Ve(d,new w(0,-1E8,0),We))d.y=a.p.y+1E5,this.h.x=d.x,this.h.y=d.y,this.h.z=d.z,Rd(this.transform,this.h);d=this.Da=new Gk(this);d.Sa=0;K(d,t.De);d.create();new al(this.Da);this.Da.rd=this.Da.jb[0];t.b.kf=-1;this.rb=360;this.ih=[];this.ek=
this.dk=-Infinity;this.lf=0;this.fb=!0;t.b.da=this;for(df(t.b.nf.ci);t.b.pc.length;)t.b.pc[0].remove()}};function el(a,b){b.we=null;b.species.uc.call(b,a);tb(b.species.W).play();a.El=t.j;b.ma?(b.zd=a,a.zd[b.index]=b,zd(b.Mm,b.h),b.Nm&&(b.lc=t.j,b.fb=!0,b.G.set(0,0,0),b.Qb.set(0,0,0),ck.add(b)),b.Sa=0,b.sh.Sa=0):b.remove()}function fl(a,b,c){a.G.add(b);a.zh=Number.NEGATIVE_INFINITY;a.$i=Number.NEGATIVE_INFINITY;a.hi=!0;gl(a,-c);a.Ea+=kc(15);t.i.W.get("MasherSlap01").play({gain:1,pitch:1})}
e.Wj=function(){var a=new w(0,0,0);if(!this.fb)return a;(me.d[t.xa.MoveForwardKey]||N.d[t.xa.MoveForwardMouseButton])&&--a.z;if(me.d[t.xa.MoveBackwardKey]||N.d[t.xa.MoveBackwardMouseButton])a.z+=1;(me.d[t.xa.MoveLeftKey]||N.d[t.xa.MoveLeftMouseButton])&&--a.x;if(me.d[t.xa.MoveRightKey]||N.d[t.xa.MoveRightMouseButton])a.x+=1;a.na(1)?(this.mf+=1/6,1<this.mf&&(this.mf=1)):(this.mf-=1/6,0>this.mf&&(this.mf=0));this.Zj=(5*this.Zj-a.x)/6;this.Yj=(5*this.Yj-a.z)/6;return a};
e.vl=function(){this.fb&&(me.p[t.xa.JumpKey]||N.p[t.xa.JumpMouseButton])&&(this.$i=t.j)};function Uk(a){if(!a.Fh){var b=new H;b.set(a.Wc.O);return b}b=xd(Qd(a.Wc.O),a.Fh,new w).normalize();var c=new w(b.z,0,-b.x),d=new w(0,1,0);tc(b,c,d).na(1);tc(d,b,c);var f=new H;f.u=c.x;f.A=c.y;f.B=c.z;f.v=d.x;f.m11=d.y;f.m12=d.z;f.C=b.x;f.m21=b.y;f.m22=b.z;f.s=a.Wc.O.s;f.m31=a.Wc.O.m31;f.m32=a.Wc.O.m32;return f}
function gl(a,b){0>b?a.ek=t.j:0<b&&(a.dk=t.j);b=Wa(a.rb+b,0,360)-a.rb;a.ih.push({ah:t.j,ma:b});a.rb+=b;0>=a.rb&&a.Pj()}e.Pj=function(){if(this.fb){this.fb=!1;t.b.Ng=t.j+180;for(var a=q(t.b.pc),b=a.next();!b.done;b=a.next())b=b.value,b.fb&&(b.action.length=0,b.action.unshift("idle"),b.U=NaN,b.path=null);this.Da.remove();Xd(this.Da);this.Da=null;t.b.da=null}};
e.mk=function(){var a=ij(new E(this.h.z,this.h.x));this.h.z=a.x;this.h.x=a.y;a=null;var b=Ve(new w(this.h.x,-1E3,this.h.z),new w(0,-1E8,0),We);b&&(this.h.y=b.p.y+this.hd-this.pb-this.Ba,a=Xe(b.item.Y));a&&(a!=this.Ja&&(this.ik=t.j),this.Ja=a,ig(this.h,a,this.ja.lb))};function Z(){kk.call(this,"mantato");this.rf=150;this.Xf=0;this.Ba=30800;this.hd=189200;this.Mj=86E3;this.pb=.5*(this.hd-2*this.Ba-6E4);this.Gk=12E4;this.ud=this.Ba;this.Pf=.5*this.hd-this.Ba;this.Qf=this.Ba+this.pb-.5*this.hd;this.$c=1/3*14887;this.oh=2/3*this.$c;this.ck=kk.Dj(3E5);this.Ub=2E5;this.xe=-Infinity;this.fb=!0;this.rb=360;this.ff=8;this.wb=[];this.Ze=[];this.sa=new H;this.Lb="MantatoWalk";this.j=this.wj=this.Ie=0;this.tf=new H;this.Ij=this.Jh=0;this.sc=12E5*Math.tan(kc(12))/128;this.sc*=
this.hd/176E3;this.I=t.i.za.get("physicalCardThreshold");this.ia=t.i.P.get("Mantato");this.color=id;this.action=["idle"];this.U=NaN;this.Sm=this.dj=-Infinity;this.ig=0;this.gk=15E4;this.an=3E6;this.qm=sb(1.25);return this}Z.prototype=Object.create(kk.prototype);Z.prototype.constructor=Z;Z.Hf=12;Z.Qa=NaN;
Z.Hi=function(){Z.ba=t.i.Rb.get("defaultMaterial");var a=t.i.Rb.get("monsterSkin").X();a.name="monsterSplatter";a.Ia=1;t.i.Rb.add(a);hl.I=t.i.za.get("gib");hl.ia=t.i.P.get("spudGib01");a=t.i.P.get("Mantato");Z.Ka=new we;var b=[];for(l in Z.Lc){var c=Z.Lc[l];c.Cd=b.length;var d=c.x/a.width,f=c.y/a.height,h=c.a/a.width,g=c.c/a.height;var k=new md(c.f,c.g,0);td(k,d,f);k.Hb=32767;b.push(k);k=new md(c.f+c.a,c.g,0);td(k,d+h,f);k.Hb=32767;b.push(k);k=new md(c.f+c.a,c.g+c.c,0);td(k,d+h,f+g);k.Hb=32767;b.push(k);
k=new md(c.f,c.g+c.c,0);td(k,d,f+g);k.Hb=32767;b.push(k)}ve(Z.Ka,b.length*Z.Ka.Tb);Z.Ka.upload(b);Z.nb={};var l=Z.nb.MantatoDeathFHead=[];l.length=5;a=new H;a.u=1;a.A=0;a.B=-0;a.v=0;a.m11=1;a.m12=0;a.C=0;a.m21=-0;a.m22=1;a.s=0;a.m31=0;a.m32=-0;l.push(a);a=new H;a.u=.9985;a.A=-.009;a.B=-.0547;a.v=-.0056;a.m11=.9654;a.m12=-.2607;a.C=.0552;a.m21=.2606;a.m22=.9639;a.s=-337;a.m31=1411;a.m32=9646;l.push(a);a=new H;a.u=.9938;a.A=-.0598;a.B=-.0936;a.v=-.0146;a.m11=.765;a.m12=-.6439;a.C=.1101;a.m21=.6413;
a.m22=.7594;a.s=-599;a.m31=-1143;a.m32=17840;l.push(a);a=new H;a.u=.9888;a.A=-.1241;a.B=-.0824;a.v=-.0283;a.m11=.3865;a.m12=-.9219;a.C=.1463;a.m21=.9139;a.m22=.3787;a.s=-782;a.m31=-9558;a.m32=23557;l.push(a);a=new H;a.u=.9851;a.A=-.1713;a.B=-.0156;a.v=-.0373;a.m11=-.124;a.m12=-.9916;a.C=.1679;a.m21=.9774;a.m22=-.1285;a.s=-807;a.m31=-25209;a.m32=23644;l.push(a);a=new H;a.u=.9934;a.A=-.1124;a.B=.0233;a.v=-.0401;a.m11=-.5302;a.m12=-.8469;a.C=.1075;a.m21=.8404;a.m22=-.5312;a.s=-1263;a.m31=-50059;a.m32=
18162;l.push(a);a=new H;a.u=.9902;a.A=.097;a.B=-.1003;a.v=-.0561;a.m11=-.3815;a.m12=-.9227;a.C=-.1278;a.m21=.9193;a.m22=-.3723;a.s=-4540;a.m31=-53966;a.m32=18036;l.push(a);a=new H;a.u=.9561;a.A=.249;a.B=-.1548;a.v=-.1114;a.m11=-.1801;a.m12=-.9773;a.C=-.2712;a.m21=.9516;a.m22=-.1445;a.s=-6404;a.m31=-62244;a.m32=19301;l.push(a);a=new H;a.u=.9453;a.A=.2657;a.B=-.1891;a.v=-.1847;a.m11=-.0414;a.m12=-.9819;a.C=-.2687;a.m21=.9632;a.m22=.01;a.s=-6393;a.m31=-66540;a.m32=21398;l.push(a);a=new H;a.u=.9388;a.A=
.2596;a.B=-.2265;a.v=-.2227;a.m11=-.0442;a.m12=-.9739;a.C=-.2628;a.m21=.9647;a.m22=.0164;a.s=-6017;a.m31=-66481;a.m32=21700;l.push(a);a=new H;a.u=.9437;a.A=.227;a.B=-.2405;a.v=-.2338;a.m11=-.0565;a.m12=-.9706;a.C=-.234;a.m21=.9722;a.m22=-3E-4;a.s=-5123;a.m31=-66206;a.m32=21224;l.push(a);a=new H;a.u=.9481;a.A=.2106;a.B=-.2381;a.v=-.2313;a.m11=-.0566;a.m12=-.9712;a.C=-.2181;a.m21=.9759;a.m22=-.005;a.s=-4652;a.m31=-66117;a.m32=21144;l.push(a);a=new H;a.u=.9491;a.A=.2139;a.B=-.2311;a.v=-.2241;a.m11=-.0566;
a.m12=-.9729;a.C=-.2212;a.m21=.9752;a.m22=-.0057;a.s=-4862;a.m31=-66135;a.m32=21186;l.push(a);a=new H;a.u=.9436;a.A=.2447;a.B=-.2232;a.v=-.2163;a.m11=-.0551;a.m12=-.9748;a.C=-.2508;a.m21=.968;a.m22=9E-4;a.s=-5830;a.m31=-66319;a.m32=21426;l.push(a);l=Z.nb.MantatoDeathFChest=[];l.length=5;a=new H;a.u=1;a.A=0;a.B=-0;a.v=0;a.m11=1;a.m12=0;a.C=0;a.m21=-0;a.m22=1;a.s=0;a.m31=0;a.m32=-0;l.push(a);a=new H;a.u=.9916;a.A=-.1173;a.B=.055;a.v=.1259;a.m11=.9725;a.m12=-.1958;a.C=-.0305;a.m21=.201;a.m22=.9791;a.s=
-3498;a.m31=3796;a.m32=6804;l.push(a);a=new H;a.u=.9749;a.A=-.1934;a.B=.1102;a.v=.2213;a.m11=.8963;a.m12=-.3843;a.C=-.0244;a.m21=.399;a.m22=.9166;a.s=-6400;a.m31=-2683;a.m32=15101;l.push(a);a=new H;a.u=.9601;a.A=-.2246;a.B=.1669;a.v=.2797;a.m11=.7517;a.m12=-.5972;a.C=.0087;a.m21=.62;a.m22=.7845;a.s=-8393;a.m31=-17164;a.m32=25181;l.push(a);a=new H;a.u=.9541;a.A=-.2123;a.B=.2114;a.v=.2942;a.m11=.5306;a.m12=-.795;a.C=.0566;a.m21=.8206;a.m22=.5686;a.s=-9429;a.m31=-39030;a.m32=35202;l.push(a);a=new H;
a.u=.9591;a.A=-.1521;a.B=.2388;a.v=.2712;a.m11=.2519;a.m12=-.929;a.C=.0811;a.m21=.9557;a.m22=.2828;a.s=-9721;a.m31=-68375;a.m32=44142;l.push(a);a=new H;a.u=.9359;a.A=-.2158;a.B=.2785;a.v=.2565;a.m11=-.1246;a.m12=-.9585;a.C=.2415;a.m21=.9685;a.m22=-.0613;a.s=-7782;a.m31=-63561;a.m32=42925;l.push(a);a=new H;a.u=.9573;a.A=-.1734;a.B=.2312;a.v=.1975;a.m11=-.1913;a.m12=-.9614;a.C=.2109;a.m21=.9661;a.m22=-.1489;a.s=-4587;a.m31=-61424;a.m32=39511;l.push(a);a=new H;a.u=.9812;a.A=-.1297;a.B=.143;a.v=.1237;
a.m11=-.1466;a.m12=-.9814;a.C=.1482;a.m21=.9807;a.m22=-.1278;a.s=-2376;a.m31=-62808;a.m32=37771;l.push(a);a=new H;a.u=.9889;a.A=-.134;a.B=.0638;a.v=.053;a.m11=-.0825;a.m12=-.9952;a.C=.1386;a.m21=.9875;a.m22=-.0745;a.s=-104;a.m31=-64955;a.m32=38224;l.push(a);a=new H;a.u=.9803;a.A=-.1963;a.B=.0226;a.v=.0119;a.m11=-.0555;a.m12=-.9984;a.C=.1973;a.m21=.979;a.m22=-.0521;a.s=2290;a.m31=-66053;a.m32=39447;l.push(a);a=new H;a.u=.9587;a.A=-.2839;a.B=.017;a.v=.0035;a.m11=-.0481;a.m12=-.9988;a.C=.2843;a.m21=
.9577;a.m22=-.0451;a.s=4830;a.m31=-66621;a.m32=39607;l.push(a);a=new H;a.u=.939;a.A=-.3438;a.B=.0072;a.v=-.0041;a.m11=-.0323;a.m12=-.9995;a.C=.3439;a.m21=.9385;a.m22=-.0317;a.s=6758;a.m31=-66864;a.m32=40168;l.push(a);a=new H;a.u=.9324;a.A=-.3614;a.B=5E-4;a.v=-.0114;a.m11=-.0308;a.m12=-.9995;a.C=.3612;a.m21=.9319;a.m22=-.0328;a.s=7520;a.m31=-66863;a.m32=40232;l.push(a);l=Z.nb.MantatoDeathFRight=[];l.length=5;a=new H;a.u=1;a.A=0;a.B=-0;a.v=0;a.m11=1;a.m12=0;a.C=0;a.m21=-0;a.m22=1;a.s=0;a.m31=0;a.m32=
-0;l.push(a);a=new H;a.u=.7843;a.A=.0746;a.B=.6158;a.v=-.2399;a.m11=.952;a.m12=.1902;a.C=-.5721;a.m21=-.2969;a.m22=.7646;a.s=9743;a.m31=-3525;a.m32=-6511;l.push(a);a=new H;a.u=.3432;a.A=-.0457;a.B=.9382;a.v=-.4899;a.m11=.8435;a.m12=.2203;a.C=-.8014;a.m21=-.5352;a.m22=.2671;a.s=18334;a.m31=-13549;a.m32=-8164;l.push(a);a=new H;a.u=.1186;a.A=-.0109;a.B=.9929;a.v=-.512;a.m11=.8561;a.m12=.0706;a.C=-.8507;a.m21=-.5168;a.m22=.096;a.s=18451;a.m31=-35011;a.m32=-2755;l.push(a);a=new H;a.u=-.0026;a.A=.0526;
a.B=.9986;a.v=-.5678;a.m11=.822;a.m12=-.0448;a.C=-.8232;a.m21=-.5671;a.m22=.0278;a.s=17903;a.m31=-66007;a.m32=-781;l.push(a);a=new H;a.u=-.1294;a.A=-.0053;a.B=.9916;a.v=-.8744;a.m11=.4721;a.m12=-.1116;a.C=-.4676;a.m21=-.8815;a.m22=-.0657;a.s=19277;a.m31=-74449;a.m32=-1361;l.push(a);a=new H;a.u=-.2546;a.A=-.1361;a.B=.9574;a.v=-.9669;a.m11=.0556;a.m12=-.2492;a.C=-.0193;a.m21=-.9891;a.m22=-.1458;a.s=14143;a.m31=-69122;a.m32=708;l.push(a);a=new H;a.u=-.384;a.A=-.2506;a.B=.8887;a.v=-.9162;a.m11=-.0157;
a.m12=-.4003;a.C=.1143;a.m21=-.968;a.m22=-.2236;a.s=5551;a.m31=-66748;a.m32=4187;l.push(a);a=new H;a.u=-.5199;a.A=-.2945;a.B=.8018;a.v=-.8471;a.m11=.0568;a.m12=-.5284;a.C=.1101;a.m21=-.9539;a.m22=-.279;a.s=-1466;a.m31=-68966;a.m32=8748;l.push(a);a=new H;a.u=-.6383;a.A=-.2709;a.B=.7205;a.v=-.7686;a.m11=.1734;a.m12=-.6158;a.C=.0419;a.m21=-.9469;a.m22=-.3189;a.s=-6581;a.m31=-73134;a.m32=12794;l.push(a);a=new H;a.u=-.677;a.A=-.2707;a.B=.6844;a.v=-.7324;a.m11=.1565;a.m12=-.6627;a.C=.0723;a.m21=-.9499;
a.m22=-.3042;a.s=-8637;a.m31=-72967;a.m32=14597;l.push(a);a=new H;a.u=-.6913;a.A=-.2664;a.B=.6717;a.v=-.7185;a.m11=.1552;a.m12=-.6779;a.C=.0763;a.m21=-.9513;a.m22=-.2987;a.s=-8970;a.m31=-72930;a.m32=15014;l.push(a);a=new H;a.u=-.69;a.A=-.2685;a.B=.6722;a.v=-.7198;a.m11=.1563;a.m12=-.6763;a.C=.0765;a.m21=-.9505;a.m22=-.3011;a.s=-8945;a.m31=-72953;a.m32=15058;l.push(a);a=new H;a.u=-.6899;a.A=-.2683;a.B=.6723;a.v=-.7198;a.m11=.1559;a.m12=-.6764;a.C=.0767;a.m21=-.9506;a.m22=-.3008;a.s=-8941;a.m31=-72948;
a.m32=15051;l.push(a);l=Z.nb.MantatoDeathFLeft=[];l.length=5;a=new H;a.u=1;a.A=0;a.B=-0;a.v=0;a.m11=1;a.m12=0;a.C=0;a.m21=-0;a.m22=1;a.s=0;a.m31=0;a.m32=-0;l.push(a);a=new H;a.u=.7883;a.A=-.1199;a.B=-.6035;a.v=.2575;a.m11=.9551;a.m12=.1467;a.C=.5588;a.m21=-.2711;a.m22=.7838;a.s=-10084;a.m31=-3481;a.m32=-5479;l.push(a);a=new H;a.u=.4179;a.A=-.0602;a.B=-.9065;a.v=.3975;a.m11=.9093;a.m12=.1229;a.C=.8169;a.m21=-.4117;a.m22=.404;a.s=-15368;a.m31=-13220;a.m32=-4572;l.push(a);a=new H;a.u=.0732;a.A=.0263;
a.B=-.997;a.v=.4278;a.m11=.9022;a.m12=.0552;a.C=.9009;a.m21=-.4306;a.m22=.0548;a.s=-15447;a.m31=-33893;a.m32=-2205;l.push(a);a=new H;a.u=-.1306;a.A=.0924;a.B=-.9871;a.v=.5821;a.m11=.8131;a.m12=-9E-4;a.C=.8025;a.m21=-.5747;a.m22=-.16;a.s=-17502;a.m31=-60368;a.m32=-1345;l.push(a);a=new H;a.u=-.2799;a.A=.0819;a.B=-.9565;a.v=.8804;a.m11=.4193;a.m12=-.2217;a.C=.3829;a.m21=-.9042;a.m22=-.1894;a.s=-20777;a.m31=-74388;a.m32=418;l.push(a);a=new H;a.u=-.3764;a.A=.2195;a.B=-.9001;a.v=.9264;a.m11=.0955;a.m12=
-.3641;a.C=.006;a.m21=-.9709;a.m22=-.2393;a.s=-16016;a.m31=-70973;a.m32=556;l.push(a);a=new H;a.u=-.4986;a.A=.3067;a.B=-.8108;a.v=.8633;a.m11=.0914;a.m12=-.4963;a.C=-.0781;a.m21=-.9474;a.m22=-.3103;a.s=-10437;a.m31=-70339;a.m32=2100;l.push(a);a=new H;a.u=-.6309;a.A=.3022;a.B=-.7146;a.v=.7723;a.m11=.1559;a.m12=-.6159;a.C=-.0747;a.m21=-.9404;a.m22=-.3318;a.s=-5723;a.m31=-72335;a.m32=5080;l.push(a);a=new H;a.u=-.7098;a.A=.2959;a.B=-.6392;a.v=.6962;a.m11=.1567;a.m12=-.7006;a.C=-.1072;a.m21=-.9423;a.m22=
-.3172;a.s=-3159;a.m31=-72400;a.m32=7812;l.push(a);a=new H;a.u=-.7666;a.A=.2773;a.B=-.5792;a.v=.6308;a.m11=.1561;a.m12=-.7601;a.C=-.1204;a.m21=-.948;a.m22=-.2946;a.s=-1712;a.m31=-72476;a.m32=9709;l.push(a);a=new H;a.u=-.8081;a.A=.2338;a.B=-.5406;a.v=.5798;a.m11=.1544;a.m12=-.8;a.C=-.1036;a.m21=-.9599;a.m22=-.2603;a.s=-1214;a.m31=-72678;a.m32=10560;l.push(a);a=new H;a.u=-.8315;a.A=.1958;a.B=-.5199;a.v=.5485;a.m11=.1414;a.m12=-.8241;a.C=-.0878;a.m21=-.9704;a.m22=-.225;a.s=-1321;a.m31=-72463;a.m32=10400;
l.push(a);a=new H;a.u=-.8354;a.A=.1874;a.B=-.5168;a.v=.5437;a.m11=.1428;a.m12=-.8271;a.C=-.0812;a.m21=-.9719;a.m22=-.2211;a.s=-1386;a.m31=-72440;a.m32=10329;l.push(a);l=Z.nb.MantatoDeathFLegs=[];l.length=5;a=new H;a.u=1;a.A=0;a.B=-0;a.v=0;a.m11=1;a.m12=0;a.C=0;a.m21=-0;a.m22=1;a.s=0;a.m31=0;a.m32=-0;l.push(a);a=new H;a.u=1;a.A=.0022;a.B=-.0045;a.v=-.0011;a.m11=.9741;a.m12=.2262;a.C=.0048;a.m21=-.2262;a.m22=.9741;a.s=-99;a.m31=2611;a.m32=-79;l.push(a);a=new H;a.u=.9997;a.A=.0166;a.B=-.0182;a.v=-.0075;
a.m11=.9095;a.m12=.4156;a.C=.0235;a.m21=-.4153;a.m22=.9094;a.s=263;a.m31=-3725;a.m32=2637;l.push(a);a=new H;a.u=.999;a.A=.0329;a.B=-.0292;a.v=-.0081;a.m11=.7904;a.m12=.6125;a.C=.0432;a.m21=-.6117;a.m22=.7899;a.s=382;a.m31=-20695;a.m32=1293;l.push(a);a=new H;a.u=.9997;a.A=.0111;a.B=-.0226;a.v=.0133;a.m11=.5312;a.m12=.8471;a.C=.0214;a.m21=-.8471;a.m22=.5309;a.s=-43;a.m31=-41222;a.m32=-4042;l.push(a);a=new H;a.u=.9999;a.A=-.0011;a.B=-.012;a.v=.012;a.m11=.1945;a.m12=.9808;a.C=.0012;a.m21=-.9809;a.m22=
.1945;a.s=169;a.m31=-67451;a.m32=-7278;l.push(a);a=new H;a.u=.9994;a.A=-.0338;a.B=.0043;a.v=4E-4;a.m11=.1382;a.m12=.9904;a.C=-.0341;a.m21=-.9898;a.m22=.1381;a.s=1158;a.m31=-72349;a.m32=-6633;l.push(a);a=new H;a.u=.9947;a.A=-.1022;a.B=.012;a.v=.0027;a.m11=.1428;a.m12=.9897;a.C=-.1029;a.m21=-.9845;a.m22=.1423;a.s=2591;a.m31=-72227;a.m32=-5787;l.push(a);a=new H;a.u=.9844;a.A=-.1762;a.B=-.0019;a.v=.0273;a.m11=.1418;a.m12=.9895;a.C=-.1741;a.m21=-.9741;a.m22=.1444;a.s=3941;a.m31=-72389;a.m32=-6109;l.push(a);
a=new H;a.u=.9682;a.A=-.2501;a.B=-.0071;a.v=.0447;a.m11=.1452;a.m12=.9884;a.C=-.2462;a.m21=-.9573;a.m22=.1517;a.s=5512;a.m31=-72717;a.m32=-6217;l.push(a);a=new H;a.u=.9572;a.A=-.2893;a.B=.0018;a.v=.0459;a.m11=.1581;a.m12=.9864;a.C=-.2856;a.m21=-.9441;a.m22=.1646;a.s=6694;a.m31=-72856;a.m32=-6465;l.push(a);a=new H;a.u=.959;a.A=-.2832;a.B=.0019;a.v=.0446;a.m11=.1577;a.m12=.9865;a.C=-.2797;a.m21=-.946;a.m22=.1639;a.s=6738;a.m31=-72891;a.m32=-6441;l.push(a);a=new H;a.u=.967;a.A=-.2549;a.B=-.003;a.v=.0425;
a.m11=.1497;a.m12=.9878;a.C=-.2513;a.m21=-.9553;a.m22=.1556;a.s=6062;a.m31=-72812;a.m32=-6245;l.push(a);a=new H;a.u=.9708;a.A=-.2397;a.B=.0031;a.v=.0317;a.m11=.1413;a.m12=.9895;a.C=-.2376;a.m21=-.9605;a.m22=.1447;a.s=5908;a.m31=-72645;a.m32=-6029;l.push(a);l=Z.nb.MantatoWalk=[];a=new H;a.u=1;a.A=0;a.B=-0;a.v=0;a.m11=1;a.m12=-0;a.C=0;a.m21=0;a.m22=1;a.s=0;a.m31=-0;a.m32=0;l.push(a);a=new H;a.u=.9927;a.A=-.0183;a.B=-.119;a.v=.0277;a.m11=.9966;a.m12=.0773;a.C=.1171;a.m21=-.0801;a.m22=.9899;a.s=70;a.m31=
-3027;a.m32=-619;l.push(a);a=new H;a.u=.9816;a.A=-.0289;a.B=-.1886;a.v=.022;a.m11=.999;a.m12=-.0389;a.C=.1895;a.m21=.034;a.m22=.9813;a.s=288;a.m31=-5629;a.m32=253;l.push(a);a=new H;a.u=.9973;a.A=.0022;a.B=.074;a.v=.0054;a.m11=.9948;a.m12=-.1019;a.C=-.0738;a.m21=.1021;a.m22=.992;a.s=-219;a.m31=-2573;a.m32=764;l.push(a);a=new H;a.u=.9877;a.A=-.0202;a.B=-.155;a.v=.0055;a.m11=.9955;a.m12=-.0949;a.C=.1562;a.m21=.0929;a.m22=.9833;a.s=335;a.m31=259;a.m32=689;l.push(a);a=new H;a.u=.9986;a.A=.0123;a.B=-.0519;
a.v=-.0065;a.m11=.9937;a.m12=.1115;a.C=.053;a.m21=-.111;a.m22=.9924;a.s=178;a.m31=-3079;a.m32=-875;l.push(a);a=new H;a.u=.9996;a.A=.007;a.B=-.0256;a.v=-.0062;a.m11=.9994;a.m12=.0327;a.C=.0258;a.m21=-.0326;a.m22=.9991;a.s=110;a.m31=-5793;a.m32=-254;l.push(a);a=new H;a.u=.9893;a.A=-.0894;a.B=.1151;a.v=.0859;a.m11=.9957;a.m12=.0348;a.C=-.1177;a.m21=-.0245;a.m22=.9928;a.s=-944;a.m31=-2885;a.m32=-285;l.push(a)};
Z.Lc={MantatoWalk00:{f:-45,g:-43,x:254,y:0,a:85,c:93},MantatoWalk01:{f:-42,g:-41,x:623,y:189,a:80,c:89},MantatoWalk02:{f:-32,g:-41,x:652,y:97,a:71,c:90},MantatoWalk03:{f:-26,g:-43,x:78,y:0,a:64,c:94},MantatoWalk04:{f:-23,g:-43,x:339,y:0,a:61,c:93},MantatoWalk05:{f:-30,g:-40,x:218,y:279,a:60,c:88},MantatoWalk06:{f:-39,g:-40,x:723,y:97,a:67,c:90},MantatoWalk07:{f:-40,g:-42,x:400,y:0,a:74,c:93},MantatoWalk08:{f:-33,g:-42,x:0,y:189,a:69,c:90},MantatoWalk09:{f:-20,g:-40,x:115,y:368,a:63,c:87},MantatoWalk10:{f:-17,
g:-41,x:495,y:97,a:59,c:91},MantatoWalk11:{f:-19,g:-42,x:142,y:0,a:58,c:94},MantatoWalk12:{f:-16,g:-42,x:474,y:0,a:41,c:93},MantatoWalk13:{f:-15,g:-39,x:703,y:189,a:42,c:89},MantatoWalk14:{f:-19,g:-39,x:278,y:279,a:47,c:88},MantatoWalk15:{f:-29,g:-43,x:515,y:0,a:50,c:93},MantatoWalk16:{f:-15,g:-42,x:745,y:189,a:38,c:89},MantatoWalk17:{f:-14,g:-39,x:85,y:456,a:41,c:86},MantatoWalk18:{f:-19,g:-39,x:325,y:279,a:48,c:88},MantatoWalk19:{f:-20,g:-41,x:554,y:97,a:44,c:91},MantatoWalk20:{f:-19,g:-42,x:565,
y:0,a:41,c:93},MantatoWalk21:{f:-21,g:-39,x:0,y:279,a:50,c:89},MantatoWalk22:{f:-23,g:-38,x:373,y:279,a:51,c:88},MantatoWalk23:{f:-20,g:-41,x:424,y:279,a:41,c:88},MantatoWalk24:{f:-18,g:-40,x:178,y:368,a:56,c:87},MantatoWalk25:{f:-17,g:-38,x:126,y:456,a:59,c:86},MantatoWalk26:{f:-20,g:-38,x:234,y:368,a:59,c:87},MantatoWalk27:{f:-20,g:-40,x:465,y:279,a:45,c:88},MantatoWalk28:{f:-29,g:-41,x:69,y:189,a:57,c:90},MantatoWalk29:{f:-36,g:-37,x:293,y:368,a:73,c:87},MantatoWalk30:{f:-36,g:-37,x:510,y:279,
a:78,c:88},MantatoWalk31:{f:-29,g:-39,x:366,y:368,a:66,c:87},MantatoWalk32:{f:-37,g:-40,x:588,y:279,a:81,c:88},MantatoWalk33:{f:-33,g:-37,x:185,y:456,a:70,c:86},MantatoWalk34:{f:-33,g:-38,x:669,y:279,a:61,c:88},MantatoWalk35:{f:-33,g:-40,x:432,y:368,a:59,c:87},MantatoWalk36:{f:-38,g:-41,x:50,y:279,a:59,c:89},MantatoWalk37:{f:-34,g:-37,x:255,y:456,a:59,c:86},MantatoWalk38:{f:-32,g:-37,x:491,y:368,a:66,c:87},MantatoWalk39:{f:-36,g:-38,x:440,y:456,a:76,c:85},MantatoWalk40:{f:-39,g:-40,x:109,y:279,a:65,
c:89},MantatoWalk41:{f:-43,g:-38,x:730,y:279,a:61,c:88},MantatoWalk42:{f:-44,g:-39,x:126,y:189,a:59,c:90},MantatoWalk43:{f:-42,g:-41,x:0,y:368,a:59,c:88},MantatoWalk44:{f:-29,g:-42,x:174,y:279,a:44,c:89},MantatoWalk45:{f:-25,g:-37,x:516,y:456,a:40,c:85},MantatoWalk46:{f:-27,g:-38,x:557,y:368,a:47,c:87},MantatoWalk47:{f:-25,g:-39,x:604,y:368,a:49,c:87},MantatoWalk48:{f:-21,g:-42,x:754,y:0,a:37,c:92},MantatoWalk49:{f:-34,g:-40,x:185,y:189,a:49,c:90},MantatoWalk50:{f:-32,g:-40,x:234,y:189,a:52,c:90},
MantatoWalk51:{f:-29,g:-42,x:286,y:189,a:49,c:90},MantatoWalk52:{f:-20,g:-43,x:335,y:189,a:40,c:90},MantatoWalk53:{f:-26,g:-39,x:314,y:456,a:51,c:86},MantatoWalk54:{f:-29,g:-39,x:59,y:368,a:56,c:88},MantatoWalk55:{f:-21,g:-40,x:375,y:189,a:40,c:90},MantatoWalk56:{f:-32,g:-43,x:200,y:0,a:54,c:94},MantatoWalk57:{f:-38,g:-41,x:598,y:97,a:54,c:91},MantatoWalk58:{f:-39,g:-41,x:415,y:189,a:59,c:90},MantatoWalk59:{f:-24,g:-43,x:0,y:97,a:44,c:92},MantatoWalk60:{f:-27,g:-44,x:44,y:97,a:61,c:92},MantatoWalk61:{f:-37,
g:-40,x:653,y:368,a:74,c:87},MantatoWalk62:{f:-39,g:-40,x:474,y:189,a:75,c:90},MantatoWalk63:{f:-32,g:-41,x:606,y:0,a:65,c:93},MantatoDeathFHead05:{f:-38,g:-43,x:105,y:97,a:78,c:92},MantatoDeathFHead06:{f:-39,g:-46,x:0,y:0,a:78,c:97},MantatoDeathFHead07:{f:-37,g:-35,x:727,y:368,a:74,c:87},MantatoDeathFHead08:{f:-35,g:-18,x:0,y:543,a:71,c:73},MantatoDeathFHead09:{f:-32,g:1,x:520,y:543,a:68,c:56},MantatoDeathFHead10:{f:-32,g:15,x:706,y:616,a:73,c:44},MantatoDeathFHead11:{f:-39,g:17,x:173,y:754,a:82,
c:39},MantatoDeathFHead12:{f:-47,g:20,x:344,y:794,a:90,c:37},MantatoDeathFHead13:{f:-51,g:19,x:275,y:712,a:91,c:40},MantatoDeathFHead14:{f:-51,g:20,x:366,y:712,a:87,c:40},MantatoDeathFHead15:{f:-50,g:20,x:453,y:712,a:86,c:40},MantatoDeathFHead16:{f:-49,g:20,x:255,y:754,a:85,c:39},MantatoDeathFHead17:{f:-50,g:20,x:340,y:754,a:86,c:39},MantatoDeathFHead18:{f:-49,g:20,x:426,y:754,a:85,c:39},MantatoDeathFChest05:{f:-38,g:-43,x:183,y:97,a:78,c:92},MantatoDeathFChest06:{f:-39,g:-47,x:671,y:0,a:83,c:93},
MantatoDeathFChest07:{f:-38,g:-43,x:625,y:456,a:84,c:80},MantatoDeathFChest08:{f:-44,g:-32,x:279,y:543,a:92,c:63},MantatoDeathFChest09:{f:-45,g:-16,x:669,y:543,a:93,c:52},MantatoDeathFChest10:{f:-43,g:7,x:0,y:668,a:88,c:44},MantatoDeathFChest11:{f:-47,g:20,x:514,y:794,a:94,c:33},MantatoDeathFChest12:{f:-49,g:20,x:93,y:712,a:96,c:41},MantatoDeathFChest13:{f:-46,g:20,x:539,y:712,a:95,c:40},MantatoDeathFChest14:{f:-44,g:20,x:634,y:712,a:92,c:40},MantatoDeathFChest15:{f:-43,g:20,x:726,y:712,a:91,c:40},
MantatoDeathFChest16:{f:-41,g:20,x:0,y:754,a:90,c:40},MantatoDeathFChest17:{f:-40,g:21,x:511,y:754,a:89,c:39},MantatoDeathFChest18:{f:-38,g:21,x:600,y:754,a:87,c:39},MantatoDeathFRight05:{f:-38,g:-43,x:261,y:97,a:78,c:92},MantatoDeathFRight06:{f:-36,g:-41,x:365,y:456,a:75,c:86},MantatoDeathFRight07:{f:-34,g:-30,x:709,y:456,a:75,c:78},MantatoDeathFRight08:{f:-28,g:-20,x:143,y:543,a:69,c:71},MantatoDeathFRight09:{f:-27,g:-4,x:453,y:543,a:67,c:59},MantatoDeathFRight10:{f:-23,g:9,x:351,y:616,a:60,c:46},
MantatoDeathFRight11:{f:-29,g:19,x:687,y:754,a:72,c:39},MantatoDeathFRight12:{f:-34,g:21,x:434,y:794,a:80,c:37},MantatoDeathFRight13:{f:-36,g:20,x:176,y:794,a:82,c:38},MantatoDeathFRight14:{f:-36,g:19,x:258,y:794,a:86,c:38},MantatoDeathFRight15:{f:-37,g:19,x:0,y:794,a:88,c:39},MantatoDeathFRight16:{f:-37,g:20,x:88,y:794,a:88,c:39},MantatoDeathFRight17:{f:-37,g:20,x:189,y:712,a:86,c:41},MantatoDeathFRight18:{f:-37,g:20,x:90,y:754,a:83,c:40},MantatoDeathFLeft05:{f:-38,g:-43,x:339,y:97,a:78,c:92},MantatoDeathFLeft06:{f:-35,
g:-41,x:549,y:189,a:74,c:90},MantatoDeathFLeft07:{f:-35,g:-30,x:556,y:456,a:69,c:81},MantatoDeathFLeft08:{f:-36,g:-20,x:71,y:543,a:72,c:72},MantatoDeathFLeft09:{f:-36,g:-7,x:212,y:543,a:67,c:64},MantatoDeathFLeft10:{f:-38,g:4,x:762,y:543,a:63,c:52},MantatoDeathFLeft11:{f:-39,g:15,x:207,y:616,a:63,c:49},MantatoDeathFLeft12:{f:-42,g:14,x:65,y:616,a:74,c:50},MantatoDeathFLeft13:{f:-45,g:13,x:88,y:668,a:82,c:44},MantatoDeathFLeft14:{f:-46,g:13,x:170,y:668,a:85,c:44},MantatoDeathFLeft15:{f:-47,g:14,x:402,
y:668,a:88,c:43},MantatoDeathFLeft16:{f:-48,g:14,x:490,y:668,a:91,c:43},MantatoDeathFLeft17:{f:-49,g:15,x:0,y:712,a:93,c:42},MantatoDeathFLeft18:{f:-50,g:14,x:581,y:668,a:94,c:43},MantatoDeathFLegs05:{f:-38,g:-43,x:417,y:97,a:78,c:92},MantatoDeathFLegs06:{f:-40,g:-47,x:0,y:456,a:85,c:87},MantatoDeathFLegs07:{f:-37,g:-38,x:371,y:543,a:82,c:61},MantatoDeathFLegs08:{f:-35,g:-26,x:270,y:616,a:81,c:48},MantatoDeathFLegs09:{f:-32,g:-9,x:675,y:668,a:79,c:43},MantatoDeathFLegs10:{f:-36,g:-2,x:588,y:543,a:81,
c:54},MantatoDeathFLegs11:{f:-24,g:4,x:0,y:616,a:65,c:52},MantatoDeathFLegs12:{f:-23,g:6,x:139,y:616,a:68,c:50},MantatoDeathFLegs13:{f:-24,g:12,x:255,y:668,a:70,c:44},MantatoDeathFLegs14:{f:-24,g:11,x:556,y:616,a:71,c:45},MantatoDeathFLegs15:{f:-23,g:10,x:411,y:616,a:71,c:46},MantatoDeathFLegs16:{f:-26,g:10,x:482,y:616,a:74,c:46},MantatoDeathFLegs17:{f:-30,g:11,x:627,y:616,a:79,c:45},MantatoDeathFLegs18:{f:-28,g:12,x:325,y:668,a:77,c:44}};
Z.prototype.create=function(){this.transform.rotate(pb(ob)*Math.PI*2,0,0);Zd(this,37500);Ck.push(this);kk.prototype.create.call(this);t.b.pc.push(this)};Z.prototype.step=function(){Z.prototype[this.action[0]].call(this);this.y=this.h.y+this.pb+this.Ba-this.hd+12500;kk.prototype.step.call(this)};
Z.prototype.bd=function(){var a=Qd(this.O);a.y+=this.pb+this.Ba-this.hd+103400;var b=xd(Qd(t.la.O),a,new w),c=b.na(1);c=Math.min(1,c/(2*this.hd));var d=new w(0,1,0),f=tc(d,b,new w).normalize();tc(b,f,d);var h=t.la.O.hf(),g=t.la.O.td();this.sa.Ee(yd(t.la.O.gf(),f,c).normalize());this.sa.Fe(yd(h,d,c).normalize());this.sa.Ge(yd(g,b,c).normalize());Rd(this.sa,a);this.Lb?(a=Z.nb[this.Lb],this.tf.set(a[this.j%a.length])):this.tf.reset();this.fb&&(a=this.O,a=Math.round(4*(Math.atan2(a.C,a.m22)-Math.atan2(t.la.O.s-
a.s,t.la.O.m32-a.m32))/Math.PI),0>a&&(a+=8),8<=a&&(a-=8),this.wj=a,this.tf.rotate(this.wj*Math.PI/4,0,0));Nd(this.sa,this.tf,this.tf);this.sa.s+=this.sa.v*this.Ij;this.sa.m31+=this.sa.m11*this.Ij;this.sa.m32+=this.sa.m12*this.Ij;a=1+this.Jh;this.sa.scale(a,a,a);if(this.ph){a=q(this.ph);for(b=a.next();!b.done;b=a.next()){c=b.value;c.Tf.s+=this.h.x;c.Tf.m31+=this.h.y;c.Tf.m32+=this.h.z;b=c.Uk;c=Qd(c.Tf);Od(this.tf).ub(c,c);d={};d.h=c;d.lc=t.j+1;f=7E3*b;h=sb(2)?-f:f;var k=nb()*(180/2147483648);g=Math.cos(k);
k=Math.sin(k);d.Ca=new Bd;d.Ca.u=g*h;d.Ca.A=k*h;d.Ca.v=-k*f;d.Ca.m11=g*f;this.wb.push(d);this.wb.length>Z.Hf&&this.wb.shift();d={};d.h=c;d.lc=t.j+1;b=7E3*b+3500;c=sb(2)?-b:b;h=nb()*(180/2147483648);f=Math.cos(h);h=Math.sin(h);d.Ca=new Bd;d.Ca.u=f*c;d.Ca.A=h*c;d.Ca.v=-h*b;d.Ca.m11=f*b;this.Ze.push(d);this.Ze.length>Z.Hf&&this.Ze.shift()}delete this.ph}};
Z.prototype.ab=function(){Z.Qa+=2;255<Z.Qa&&(u.clear(u.STENCIL_BUFFER_BIT),Z.Qa=130);t.hc(1);u.colorMask(!1,!1,!1,!1);u.stencilFunc(u.ALWAYS,Z.Qa-128,255);u.stencilOp(u.KEEP,u.KEEP,u.REPLACE);var a=this.sa.td(),b=rc(a,Qd(this.sa));t.Fb(zg);t.eb(t.i.za.get("monoThresholdEffect"));t.Jb(0,t.i.P.get("smokePuff01"));Z.ba.bind();t.tb(0);t.$b(0);t.I.M("color",id);for(var c=q(this.wb),d=c.next();!d.done;d=c.next()){var f=d.value;d=this.tf.ub(f.h,new w);if(!(0>rc(d,a)-b)){var h=4>t.j-f.lc?1.4:1;f=(new Bd).set(f.Ca);
f.u*=h;f.A*=h;f.v*=h;f.m11*=h;f=Cd(this.sa,f,new H);Rd(f,d);t.I.M("modelMatrix",f);u.drawArrays(u.TRIANGLE_FAN,Ag(0,1),4)}}t.hc(2);u.colorMask(!0,!0,!0,!0);u.stencilFunc(u.GEQUAL,Z.Qa-1,127);u.stencilOp(u.KEEP,u.KEEP,u.REPLACE);this.I=t.j==this.wf+1?t.i.za.get("flashCardThreshold"):t.i.za.get("physicalCardThreshold");t.Fb(Z.Ka);t.eb(this.I);t.Jb(0,this.ia);Z.ba.bind();t.I.M("ambientLight",this.ja.lb,!1);t.tb(0);t.$b(0);t.I.M("color",this.color);a=new H;a.set(this.sa);b=this.sc;a.u*=b;a.A*=b;a.B*=
b;a.v*=-b;a.m11*=-b;a.m12*=-b;t.I.M("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,Z.Lc[this.Lb+("00"+(this.wj*this.Ie+this.j)).slice(-2)].Cd,4);this.Jh*=.75;if("flashCardThreshold"!=this.I.name)for(t.hc(0),u.stencilFunc(u.EQUAL,Z.Qa-1,255),u.stencilOp(u.KEEP,u.KEEP,u.KEEP),a=this.sa.td(),b=rc(a,Qd(this.sa)),t.Fb(zg),t.eb(t.i.za.get("monoEffect")),t.Jb(0,t.i.P.get("splatter01")),t.i.Rb.get("monsterSplatter").bind(),t.tb(1),t.$b(0),t.I.M("ambientLight",this.ja.lb,!1),t.I.M("color",hl.Jf),c=q(this.Ze),
d=c.next();!d.done;d=c.next())f=d.value,d=this.tf.ub(f.h,new w),0>rc(d,a)-b||(h=4>t.j-f.lc?1.4:1,f=(new Bd).set(f.Ca),f.u*=h,f.A*=h,f.v*=h,f.m11*=h,f=Cd(this.sa,f,new H),Rd(f,d),t.I.M("modelMatrix",f),u.drawArrays(u.TRIANGLE_FAN,Ag(0,1),4))};
Z.prototype.idle=function(){isNaN(this.U)&&(this.U=t.j,this.Lb="MantatoWalk",this.xb=64,this.Ie=8);var a=t.j-this.U;this.j=0;0==a%30&&il(this)&&(jl(this,t.b.da.h),this.action[0]="rush",this.action.unshift("alert"),this.U=NaN,this.path=null);this.j=(Math.floor(a/8)%2+6)%8};
Z.prototype.wander=function(){isNaN(this.U)&&(this.U=t.j,this.Lb="MantatoWalk",this.xb=64,this.Ie=8,this.$c=1/3*14887,this.Rc=0,this.ff=12);var a=t.j-this.U;if(!this.path){var b=tb(dj.Pl),c=qb(b.L-b.J)+b.J;b=qb(b.D-b.w)+b.w;kl(this,c,b)}0==a%30&&il(this)&&(jl(this,t.b.da.h),this.action[0]="rush",this.action.unshift("alert"),this.U=NaN,this.path=null);this.j=(Math.floor(a/3)+2)%8};
Z.prototype.alert=function(){isNaN(this.U)&&(this.U=t.j,this.Lb="MantatoWalk",this.xb=64,this.Ie=8);var a=t.j-this.U;this.j=0;18<=a&&(this.action.shift(),this.U=NaN)};Z.prototype.hit=function(){isNaN(this.U)&&(this.U=t.j,this.Lb="MantatoWalk",this.xb=64,this.Ie=8,this.Km=qb(8));var a=t.j-this.U;this.j=(this.Km+Math.floor(a/2))%8;240==a&&(this.action.shift(),this.U=NaN)};
Z.prototype.attackMelee=function(){isNaN(this.U)&&(this.U=t.j,this.Lb="MantatoWalk",this.xb=64,this.Ie=8,jl(this,t.b.da.h));var a=t.j-this.U;this.j=Math.floor(a/3)%8;0==a&&t.i.W.get("MasherSwing01").play({gain:1,pitch:1.2},this.h,10);if(6==a){var b=xd(t.b.da.h,this.h,new w);b.na(1)<this.gk&&(b.y=0,b.na(1),b.y=1,b.na(9E3),fl(t.b.da,b,72))}45==a&&(this.action.shift(),this.U=NaN)};
Z.prototype.attackMissile=function(){isNaN(this.U)&&(this.U=t.j,this.Lb="MantatoWalk",this.xb=64,this.Ie=8,jl(this,t.b.da.h));var a=t.j-this.U;this.j=Math.floor(a/3)%8;34==a&&t.i.W.get("MasherSwing01").play({gain:1,pitch:1.2},this.h,10);if(40==a){var b=new ll;b.hj=this;--this.ig;b.h.set(this.h.x,this.h.y,this.h.z);var c=t.b.da.h.X();c.y+=t.b.da.pb+t.b.da.Ba-12500;b.G.x=c.x-this.h.x;b.G.y=c.y-this.h.y;b.G.z=c.z-this.h.z;c=b.G.na(4E4);b.G.y-=c/4E4*.5*bk.y;Rd(b.transform,b.h);K(b,t.ag);b.create();b.Yd.push(this)}60==
a&&(this.action.shift(),this.U=NaN)};
Z.prototype.rush=function(){isNaN(this.U)&&(this.U=t.j,this.Lb="MantatoWalk",this.xb=64,this.Ie=8,this.$c=7443.5,this.Rc=0,this.ff=8);var a=t.j-this.U;t.j<this.Lm+12||kl(this,t.b.da.h.z,t.b.da.h.x);if(il(this)){if(this.ig){var b=xd(t.b.da.h,this.h,new w);var c=b.length();b=c>this.an||5E5>c||Ve(this.h,b,af)?!1:!0}else b=!1;b?(this.action.unshift("attackMissile"),this.U=NaN):xd(t.b.da.h,this.h,new w).wc()<this.gk*this.gk&&(this.action.unshift("attackMelee"),this.U=NaN)}this.j=(Math.floor(a/2)+2)%8};
Z.prototype.death=function(){if(isNaN(this.U)){this.U=t.j;var a=NaN;this.Lb="MantatoDeathFChest";for(var b in this.Rf)this.Rf[b]<=a||(a=this.Rf[b],this.Lb=b);this.Ie=0}a=t.j-this.U;4<=a&&(a-=4);this.j=Math.floor(a/4);13<this.j&&(this.j=13);this.j+=5;6==a&&t.b.om();24==a&&t.i.W.get(xb("bodyThud01","bodyThud02")).play({gain:.5},this.h,6);720<=a&&this.remove()};
function il(a){if(!t.b.da)return!1;if(a.qm)return!0;var b=a.h.X();b.y+=a.pb+a.Ba-6E3;var c=t.b.da.h.X();c.y+=t.b.da.pb+t.b.da.Ba-6E3;c=xd(c,b,new w);if(Ve(b,c,nk))return!1;b=c.X().normalize();return 135>180*Math.acos(rc(b,a.O.td()))/Math.PI}function kl(a,b,c){t.j!=ej&&(ej=a.Lm=t.j,fj=300,a.path=hj(a.h.z,a.h.x,b,c))}
Z.prototype.Wj=function(){var a=new w;if(!this.path||"alert"==this.action[0]||"hit"==this.action[0]||"attackMelee"==this.action[0]||"attackMissile"==this.action[0])return a;for(var b,c;;){b=this.path[0];c=b.getParameter(this.h.z,this.h.x);if(c<b.length)break;this.path.shift();if(!this.path.length)return this.path=null,a}b=b.evaluate(c+1E5);a.z=b.x-this.h.z;a.x=b.y-this.h.x;jl(this,new w(b.y,0,b.x));return a};
Z.prototype.rg=function(a){this.fb&&(this.wf=t.j,this.G.x=0,this.G.z=0,this.rb-=a,0>=this.rb&&this.Pj())};Z.prototype.Pj=function(){this.fb&&(this.fb=!1,this.action=["death"],this.U=NaN,t.b.Lf--,this.path=null,Dk.call(this),ck.remove(this))};Z.prototype.remove=function(){this.sh&&this.sh.remove();var a=t.b.pc.indexOf(this);0<=a&&t.b.pc.splice(a,1);kk.prototype.remove.call(this);this.fb&&(Dk.call(this),t.b.Lf--)};
function jl(a,b){b=xd(b,a.h,new w(0,0,0));b.y=0;b.na(1);a.transform.u=b.z;a.transform.B=-b.x;a.transform.C=b.x;a.transform.m22=b.z}
function Rk(a,b,c,d,f){a.fb&&("attackMelee"==a.action[0]&&a.action.shift(),"attackMissile"==a.action[0]&&a.action.shift(),"hit"!=a.action[0]&&a.action.unshift("hit"),a.U=NaN,a.xe=t.j,a.ja.qa=t.j+1);var h=c*(pb(ob)+1),g=new hl;g.frame=qb(16);g.mb=12E3*(pb(ob)+1);g.mb*=c;g.h.set(0,0,5E4);d.ub(g.h,g.h);g.G.x=5E3*(2*pb(ob)-1);g.G.y=5E3*(2*pb(ob)-1);g.G.z=2E4*(pb(ob)+1);Pd(d,g.G,g.G);g.zf=kc(60*(.25+pb(ob)));sb(2)&&(g.zf=-g.zf);K(g,t.ag);g.create();g=new hl;g.frame=qb(16);g.mb=8E3*(pb(ob)+1);g.mb*=c;g.h.set(0,
0,5E4);d.ub(g.h,g.h);g.G.x=5E3*(2*pb(ob)-1);g.G.y=5E3*(2*pb(ob)-1);g.G.z=2E4*(pb(ob)+1);Pd(d,g.G,g.G);g.Yg=hl.Jf;K(g,t.ag);g.create();c=Math.sqrt(3*c)+pb(ob)-.5;for(g=0;g<c;g++){var k=new hl;k.aj=120;k.frame=qb(16);k.mb=12E3;k.h.set(0,0,5E4);d.ub(k.h,k.h);k.G.x=2*pb(ob)-1;k.G.y=2*pb(ob)-1;k.G.z=2*pb(ob);k.G.na(1E4*(pb(ob)+1));k.G.y+=6E3*pb(ob);Pd(d,k.G,k.G);k.zf=kc(60*(.25+pb(ob)));sb(2)&&(k.zf=-k.zf);sb(2)&&(k.Yg=hl.Jf);K(k,t.ag);k.create()}jl(a,Qd(t.la.O));$d(a);c=Qd(d);Od(a.tf).ub(c,c);a.Rm!=t.j&&
(a.Rf={});-2E4<c.y?-15400>c.x?ab(a.Rf,"MantatoDeathFRight",b):15400<c.x?ab(a.Rf,"MantatoDeathFLeft",b):56E3<c.y?ab(a.Rf,"MantatoDeathFHead",b):ab(a.Rf,"MantatoDeathFChest",b):ab(a.Rf,"MantatoDeathFLegs",b);a.Rm=t.j;a.ph||(a.ph=[]);d.s-=a.h.x;d.m31-=a.h.y;d.m32-=a.h.z;f.s-=a.h.x;f.m31-=a.h.y;f.m32-=a.h.z;a.ph.push({Tf:d,Uk:h});a.ph.push({Tf:f,Uk:h});a.Jh=Math.min(a.Jh+1/7,.25)}
function ll(){gk.call(this,"potato");this.Ub=1E5;this.Ba=12500;this.pb=0;this.rf=2;this.Xf=1;this.qf=.15;this.vc=!0;return this}ll.prototype=Object.create(gk.prototype);e=ll.prototype;e.constructor=ll;e.create=function(){this.U=t.j;this.sa=new H;this.j=0;this.xb=16;this.sc=15E3;this.I=t.i.za.get("physicalCardThreshold");this.ia=t.i.P.get("Potato");Zd(this,12500);gk.prototype.create.call(this)};
e.ij=function(a){void 0==this.xe&&(this.xe=t.j,this.hj.ig+=1);a=(a-1E4)/3E4;0>a||(1<a&&(a=1),t.i.W.get("bodyThud01").play({pitch:2.5},this.h,5*a))};e.jj=function(a){void 0==this.xe&&(this.xe=t.j,this.hj.ig+=1);if(!this.rm&&a instanceof bl){this.rm=!0;var b=this.G.X();b.na(1);b.y=1;b.na(9E3);fl(a,b,36)}};e.step=function(){t.j>=this.xe+180&&this.remove();gk.prototype.step.call(this)};
e.bd=function(){var a=Qd(this.O),b=xd(Qd(t.la.O),a,new w),c=b.na(1);c=Math.min(1,c/(4*this.Ba));var d=new w(0,1,0),f=tc(d,b,new w).normalize();tc(b,f,d);var h=t.la.O.hf(),g=t.la.O.td();this.sa.Ee(yd(t.la.O.gf(),f,c).normalize());this.sa.Fe(yd(h,d,c).normalize());this.sa.Ge(yd(g,b,c).normalize());Rd(this.sa,a);a=t.j-this.U;void 0==this.xe&&(this.j=3*Math.floor(a/2),this.j%=this.xb);this.I=t.i.za.get("physicalCardThreshold");this.color=id};
e.ab=function(){this.bd();t.Fb(zg);t.eb(this.I);t.Jb(0,this.ia);Z.ba.bind();t.I.M("ambientLight",this.ja.lb,!1);t.tb(0);t.$b(0);t.I.M("color",this.color);var a=new H;a.set(this.sa);var b=this.sc;a.u*=b;a.A*=b;a.B*=b;a.v*=-b;a.m11*=-b;a.m12*=-b;t.I.M("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,Ag(this.j,this.xb),4)};e.remove=function(){gk.prototype.remove.call(this)};
function hl(){t.Ta.call(this,"SpudGib");wg.call(this);this.xb=16;this.frame=0;this.mb=25E3;this.scale=1;this.zg=sb(2);this.Qd=mc(nb());this.zf=0;this.Ub=2*this.mb;this.U=this.Ak=t.j+4;this.G=new w(0,0,0);this.aj=600;this.Yg=hl.Yg;this.Jf=hl.Jf}hl.prototype=Object.create(t.Ta.prototype);hl.prototype.constructor=hl;hl.Yg=new F(214,164,93,255);hl.Jf=new F(255,255,144,255);
hl.prototype.create=function(){this.transform.s=this.h.x;this.transform.m31=this.h.y;this.transform.m32=this.h.z;t.Ta.prototype.create.call(this);ml(this)};function ml(a){a.ti=t.j;a.He=a.h.X();var b=wf(a.He,a.G);b?(a.wh=b.p,a.Bi=b.n,a.dg=Math.ceil(t.j+b.t),a.xh=b.item):a.dg=Number.POSITIVE_INFINITY}
hl.prototype.step=function(){this.xh&&this.xh.Gd>this.ti&&ml(this);if(t.j<this.dg){this.Bk&&this.Bk.Gd>this.ti&&(this.Bk=null,this.U=t.j,this.G.set(0,0,0),this.rj=!1,ml(this));var a=t.j-this.U;0>a||(this.rj?(this.h.y=this.He.y+this.G.y*a,this.transform.m31=this.h.y):(this.h.set(this.He.x+this.G.x*a,this.He.y+.5*(2*this.G.y+bk.y*a)*a,this.He.z+this.G.z*a),this.transform.s=this.h.x,this.transform.m31=this.h.y,this.transform.m32=this.h.z,t.j%3||(this.Qd+=this.zf)))}else t.j==this.dg&&(this.h.set(this.wh.x,
this.wh.y,this.wh.z),this.Bk=this.xh,this.transform.s=this.h.x,this.transform.m31=this.h.y,this.transform.m32=this.h.z,this.Yg==this.Jf&&(Ng(t.b.cl,this.wh,this.Bi,mc(nb()),this.mb*this.scale*2.5,qb(4),4),this.remove()),-1==this.Bi.y?(this.He=this.h.X(),this.U=t.j+180+qb(360),this.G.set(0,0,0),this.zf=0,this.rj=!1,this.ti=t.j,(a=Ve(this.He,this.G))?(this.wh=a.p,this.Bi=a.n,this.dg=Math.ceil(t.j+a.t),this.xh=a.item):this.dg=Number.POSITIVE_INFINITY):0==this.Bi.y?(this.He=this.h.X(),this.U=t.j+180+
qb(360),this.G.set(0,-500,0),this.rj=!0,this.ti=t.j,(a=Ve(this.He,this.G))?(this.wh=a.p,this.Bi=a.n,this.dg=Math.ceil(t.j+a.t),this.xh=a.item):this.dg=Number.POSITIVE_INFINITY):(this.He=this.h.X(),this.U=Number.POSITIVE_INFINITY,this.G.set(0,0,0),this.zf=0,this.rj=!1,this.ti=t.j,this.dg=Number.POSITIVE_INFINITY,this.xh=null));t.j-this.Ak>this.aj&&this.remove();t.Ta.prototype.step.call(this)};
hl.prototype.ab=function(){xg.call(this,this.O);t.Fb(zg);t.eb(hl.I);t.Jb(0,hl.ia);t.tb(0);t.hc(2);t.$b(0);t.I.M("modelMatrix",this.O);t.I.M("color1",this.Yg);t.I.M("color2",this.Jf);t.I.M("ambientLight",this.ja.lb);u.drawArrays(u.TRIANGLE_FAN,Ag(this.frame,this.xb),4);t.Ta.prototype.ab.call(this)};function W(a){gk.call(this,"loot");this.species=a;this.ma=a.ma;this.Ba=37500;this.pb=0;this.Xf=.8;this.lc=t.j+qb(600);this.fb=!0}W.prototype=Object.create(gk.prototype);W.prototype.constructor=W;
W.gm=function(){var a=[t.i.W.get("coinPurse01"),t.i.W.get("coinPurse02"),t.i.W.get("coinPurse03"),t.i.W.get("coinPurse04")],b=[t.i.W.get("ingot01"),t.i.W.get("ingot02")],c=[t.i.W.get("gem01"),t.i.W.get("gem02"),t.i.W.get("gem03")],d=[t.i.W.get("crumplePaper01"),t.i.W.get("crumplePaper02")],f={Lb:t.i.P.get("FoodCorn"),sc:37500,W:d,Jc:W.mm,Hc:W.lm,uc:W.jm,ma:24};t.i.P.get("FoodTomato");W.Hi=[f];f={Xa:t.i.Fc.get("moneyNugget"),ma:1,W:c,Jc:W.zb,Hc:W.nb,uc:W.Qa};a={Xa:t.i.Fc.get("moneyCoin"),ma:5,W:a,
Jc:W.zb,Hc:W.nb,uc:W.Qa};d={Xa:t.i.Fc.get("moneyBundle"),ma:25,W:d,Jc:W.zb,Hc:W.nb,uc:W.Qa};b={Xa:t.i.Fc.get("moneyBar"),ma:125,W:b,Jc:W.zb,Hc:W.nb,uc:W.Qa};var h={Xa:t.i.Fc.get("gemRuby"),ma:2,W:c,Jc:W.zb,Hc:W.nb,uc:W.Qa},g={Xa:t.i.Fc.get("gemEmerald"),ma:10,W:c,Jc:W.zb,Hc:W.nb,uc:W.Qa};c={Xa:t.i.Fc.get("gemSapphire"),ma:50,W:c,Jc:W.zb,Hc:W.nb,uc:W.Qa};W.zn=[f,h,a,a,a,a,a,g,d,c,b]};
W.An=function(a,b,c,d){for(;b;){for(var f=0;f<a.length&&!(a[f].ma>b);)f++;if(1==c)--f;else if(0==c)f=Math.floor(pb(ob)*f);else{var h=2*c;h=1<=h?2-h:1/h;f=Math.floor(Math.pow(pb(ob),h)*f)}f=a[f];b-=f.ma;d.push(new W(f))}};e=W.prototype;e.create=function(){this.U=t.j;this.sa=new H;this.j=0;this.xb=16;this.I=t.i.za.get("physicalCardThreshold");if(this.species.Xa){var a=this.Xa=new qg(this.species.Xa);a.Ma=this.O;K(a,this);a.create();this.Ub=a.src.Ub;Yd(a,this.ja)}Zd(this,18E3);gk.prototype.create.call(this)};
e.step=function(){if(this.Xa){var a=t.j-this.lc;a=3*Math.floor(a/3);Dd(this.Xa.transform);this.Xa.transform.rotate((a+.5*Math.sin(a))/6,Math.PI/4,0)}this.zd?t.Ta.prototype.step.call(this):(this.fb?(60==t.j-this.lc&&(this.fb=!1,ck.remove(this)),gk.prototype.step.call(this)):(this.we&&(a=xd(new w(this.we.h.x,this.we.h.y,this.we.h.z),this.h,new w(0,0,0)),a.wc()<Math.pow(5E4,2)?el(this.we,this):(a.y*=5,a.na(25E3),this.h.x+=a.x,this.h.y+=a.y,this.h.z+=a.z),this.transform.s=this.h.x,this.transform.m31=
this.h.y,this.transform.m32=this.h.z),t.Ta.prototype.step.call(this)),this.Xa&&W.Sk(this))};e.yl=function(a){this.we=a;this.Mm=this.h.X();if(this.Nm=this.fb)this.fb=!1,ck.remove(this);this.species.Hc.call(this,this.we);this.U=t.j};e.remove=function(){this.zd&&cl(this);t.Ta.prototype.remove.call(this);ck.remove(this);this.species.Ob?t.b.Pb[this.species.Ob.rc]-=this.ma:t.b.Pb.food-=this.ma;this.Xa&&this.Xa.remove();this.Nd&&(this.Nd.jh=null,this.Nd.ah=t.j,this.Nd=null)};e.mk=function(){this.we||this.remove()};
W.Sk=function(a){a=a.ja.lb;a.x=Math.min(1,a.x+.01);a.y=Math.min(1,a.y+.01);a.z=Math.min(1,a.z+.01)};
W.prototype.bd=function(){var a=Qd(this.O);this.ma<this.species.ma&&(a.y-=21875);var b=xd(Qd(t.la.O),a,new w),c=b.na(1);c=Math.min(1,c/(4*this.Ba));var d=new w(0,1,0),f=tc(d,b,new w).normalize();tc(b,f,d);var h=t.la.O.hf(),g=t.la.O.td();this.sa.Ee(yd(t.la.O.gf(),f,c).normalize());this.sa.Fe(yd(h,d,c).normalize());this.sa.Ge(yd(g,b,c).normalize());Rd(this.sa,a);this.j=this.we?Math.floor(Math.min(15,(t.j-this.U)/2+8)):this.ma<this.species.ma?12:Math.floor((t.j-this.U)/3)%8};
W.prototype.ab=function(){this.bd();t.Fb(zg);t.eb(this.I);t.Jb(0,this.species.Lb);Z.ba.bind();var a=this.ja.lb.X();a.x+=.05;a.y+=.05;a.z+=.05;t.I.M("ambientLight",a,!1);t.tb(0);t.$b(0);t.I.M("color",id);a=new H;a.set(this.sa);var b=this.species.sc;a.u*=b;a.A*=b;a.B*=b;a.v*=-b;a.m11*=-b;a.m12*=-b;t.I.M("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,Ag(this.j,this.xb),4)};W.Me=function(a){return(a=a.Da.jb[this.species.Ob.Mc])?Math.min(a.mg-Mk(a)-a.jg,this.ma):0};
W.Le=function(a){if(a=a.Da.jb[this.species.Ob.Mc])a.jg+=this.ma};W.Ud=function(a){if(a=a.Da.jb[this.species.Ob.Mc]){var b=Math.min(this.ma,a.mg-Mk(a));a.$a+=b;a.jg-=b;this.ma-=b;t.b.Pb[a.constructor.rc]-=b;t.b.pm(this.species,b);t.b.Cf()}};W.zb=function(){return this.ma};W.nb=function(){};W.Qa=function(){t.b.Ad-=this.ma;this.ma=0;0>t.b.Ad&&(t.b.Ad=0);t.b.Ik()};
function cl(a){if(a.species.Ob){var b=a.zd.Da.jb[a.species.Ob.Mc];b&&(b.jg-=a.ma)}else a.zd.Dg-=a.ma;a.Sa=-1;a.sh.Sa=-1;delete a.zd.zd[a.index];a.zd=null}W.mm=function(a){return Math.min(360-a.rb-a.Dg,this.ma)};W.lm=function(a){a.Dg+=this.species.ma};W.jm=function(a){var b=Math.min(this.ma,360-a.rb);gl(a,b);a.Dg-=b;this.ma-=b;t.b.Pb.food-=b};function dl(a){t.Ta.call(this,"LootGun");this.species=a;this.Ba=37500;this.Ub=87500}dl.prototype=Object.create(t.Ta.prototype);e=dl.prototype;e.constructor=dl;
e.create=function(){this.transform.s=this.h.x;this.transform.m31=this.h.y;this.transform.m32=this.h.z;this.sa=new H;this.I=t.i.za.get("physicalCardThreshold");Zd(this,37500);t.Ta.prototype.create.call(this)};e.yl=function(a){el(a,this)};e.remove=function(){this.Nd&&(this.Nd.jh=null,this.Nd.ah=t.j,this.Nd=null);--t.b.Pb.gun;t.Ta.prototype.remove.call(this)};
e.bd=function(){var a=Qd(this.O);a.y+=6250*Math.sin(t.j*Math.PI/30);var b=xd(Qd(t.la.O),a,new w),c=b.na(1);c=Math.min(1,c/(4*this.Ba));var d=new w(0,1,0),f=tc(d,b,new w).normalize();tc(b,f,d);var h=t.la.O.hf(),g=t.la.O.td();this.sa.Ee(yd(t.la.O.gf(),f,c).normalize());this.sa.Fe(yd(h,d,c).normalize());this.sa.Ge(yd(g,b,c).normalize());Rd(this.sa,a)};
e.ab=function(){this.bd();t.Fb(zg);t.eb(this.I);t.Jb(0,this.species.Lb);Z.ba.bind();var a=this.ja.lb.X();a.x+=.05;a.y+=.05;a.z+=.05;t.I.M("ambientLight",a,!1);t.tb(0);t.$b(0);t.I.M("color",id);a=new H;a.set(this.sa);var b=this.species.sc;a.u*=b;a.A*=b;a.B*=b;a.v*=-b;a.m11*=-b;a.m12*=-b;t.I.M("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,Ag(0,1),4)};dl.Bc=function(a){return a.Da.jb[this.species.Ob.Mc]?0:1};dl.oe=function(){};
dl.Lc=function(a){t.b.Ln=t.b.Ib;var b=new this.species.Ob(a.Da);a.Da.rd=b;df(t.b.nf.ci)};function Wk(a){t.Ha.call(this,a);wg.call(this);this.I=t.i.za.get("physicalCard");this.ia=t.i.P.get("smokePuff02");this.ba=Wk.ba;this.color=new F(Wk.color.r,Wk.color.bb,Wk.color.ra,255);this.frame=0;this.xb=16;this.G=new w;this.Qb=new w;this.scale=1;this.Qd=mc(nb());this.lc=t.j}Wk.prototype=Object.create(t.Ha.prototype);Wk.prototype.constructor=Wk;Wk.ba=new ie;Wk.ba.Ia=2;Wk.color=new F(144,144,144,255);
Wk.prototype.step=function(){var a=t.j-this.lc;a=Math.pow(a/540,.625);this.frame=Math.floor(9*a);this.alpha=.25*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.La=this.alpha*Wk.color.La&255;this.transform.m31+=200;this.G.scale(.8125);a=new w(.5*this.Qb.x+.5*this.G.x,.5*this.Qb.y+.5*this.G.y,.5*this.Qb.z+.5*this.G.z);this.transform.s+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.Qb.set(this.G.x,this.G.y,this.G.z);t.Ha.prototype.step.call(this)};
Wk.prototype.ab=function(){yg.call(this);t.Ha.prototype.ab.call(this)};function Qk(a){t.Ha.call(this,a);wg.call(this);this.I=t.i.za.get("physicalCard");this.ia=t.i.P.get("smokePuff02");this.ba=Wk.ba;this.color=new F(Qk.color.r,Qk.color.bb,Qk.color.ra,255);this.frame=0;this.xb=16;this.G=new w;this.Qb=new w;this.scale=1;this.Qd=mc(nb());this.ja={qa:4294967295,lb:new w(1,1,1)};this.lc=t.j}Qk.prototype=Object.create(t.Ha.prototype);Qk.prototype.constructor=Qk;Qk.color=new F(212,212,212,255);
Qk.prototype.step=function(){var a=t.j-this.lc;a/=this.aj;a=Math.pow(a,.75);this.frame=Math.floor(9*a);this.alpha=.375*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.La=this.alpha*Qk.color.La&255;this.G.scale(.8125);var b=new w(.5*this.Qb.x+.5*this.G.x,.5*this.Qb.y+.5*this.G.y,.5*this.Qb.z+.5*this.G.z);this.transform.s+=b.x;this.transform.m31+=b.y;this.transform.m32+=b.z;this.Qb.set(this.G.x,this.G.y,this.G.z);if(0==a||0==t.j%4)a=Qd(this.transform),(b=Ve(a,new w(0,-1E8,0),We))&&(b=Xe(b.item.Y))&&
ig(a,b,this.ja.lb);t.Ha.prototype.step.call(this)};Qk.prototype.ab=function(){yg.call(this);t.Ha.prototype.ab.call(this)};function Fk(a,b){t.Ha.call(this,"ExplodePuff");wg.call(this);this.I=t.i.za.get("image");this.ia=t.i.P.get("explode");this.ba=Fk.ba;this.color=new F(255,255,255,255);this.scale=1;this.mb=a;this.zg=sb(2);this.Qd=mc(nb());this.lc=t.j+1;this.xb=16;this.Ja=b}Fk.prototype=Object.create(t.Ha.prototype);Fk.prototype.constructor=Fk;Fk.ba=new ie;Fk.ba.Ia=1;
Fk.prototype.step=function(){var a=t.j-this.lc;50<=a&&this.remove();this.scale+=.02;this.transform.m31+=3E3*(1-a/50);this.frame=Math.floor(16*(1-Math.pow(.9375,a)));var b=255*(1-(a-15)/35);255<b&&(b=255);b&=255;this.color.r=b;this.color.bb=b;this.color.ra=b;this.color.La=b;b=10/this.Ja.kd;0==a?(this.Ja.Db.x+=b,this.Ja.Db.y+=b,this.Ja.Db.z+=b):10==a&&(this.Ja.Db.x-=b,this.Ja.Db.y-=b,this.Ja.Db.z-=b);t.Ha.prototype.step.call(this)};Fk.prototype.ab=function(){yg.call(this);t.Ha.prototype.ab.call(this)};
function Pk(a,b){t.Ha.call(this,b);wg.call(this);this.I=t.i.za.get("image");this.ia=t.i.P.get("bulletFlare01");this.ba=Pk.ba;this.color=new F(255,255,255,0);this.scale=1;this.mb=a;this.zg=sb(2);this.Qd=mc(nb());this.lc=t.j+1;this.xb=4}Pk.prototype=Object.create(t.Ha.prototype);Pk.prototype.constructor=Pk;Pk.ba=new ie;Pk.ba.Ia=1;Pk.prototype.step=function(){var a=t.j-this.lc;0<=a&&(3<=a&&this.remove(),this.scale+=.25);this.frame=Math.floor(a);t.Ha.prototype.step.call(this)};
Pk.prototype.ab=function(){yg.call(this);t.Ha.prototype.ab.call(this)};t.b=new t.Node("game");t.tl=new t.Node("gameDraw");t.b.vn=0;t.b.Ib=null;t.b.ej=0;t.b.Il=0;t.b.Hl=0;t.b.zk=null;t.b.pc=[];t.b.Zg=[];t.b.Wg=[];t.b.kf=0;t.b.Bl=NaN;t.b.Ad=Infinity;t.b.Lf=NaN;t.b.hl=0;t.b.Ym=360;t.b.Tm=0;t.b.qj=new F(255,255,255,255);t.b.Pb={ig:0};t.b.Ed=[];t.b.Tg=[];t.b.fg=!0;
t.b.Cf=function(){var a=t.b.da.Da.N,b=-170,c=119;!(a instanceof Xk)&&a instanceof Tk&&(b+=6,c-=10);var d=Mk(a).toLocaleString("en-US");var f=t.i.P.get("HUDNumerals24Bold");d=t.$h(f,d,0);d.color=jd;d.x=b;d.y=c;d.x-=d.width*d.Og.width;a.Cj=d;t.b.fg=!0};
t.b.Ik=function(){var a=t.b.Ad;var b=t.i.P.get("HUDNumeralsSilverAndGold");if(a)a=t.$h(b,a.toLocaleString("en-US"),0);else{a=[];var c=b.ul("1");a.width=b.ve[c]+b.Bg[c];a.height=b.jf;a.Og=b}a.color=id;a.x=209;a.y=-127;a.x-=a.width*a.Og.width;t.b.Gi=a;t.b.fg=!0};t.b.Rn=function(){};
t.b.pm=function(a,b){if(b){for(var c=null,d=0,f=q(t.b.Gf),h=f.next();!h.done;h=f.next())if(h=h.value,h.species!=a)d=h.y+h.species.Fd.height;else{c=h;break}c||(c={},c.species=a,c.ma=0,c.y=d,t.b.Gf.push(c));c.ma+=b;c.U=t.j;a=t.i.P.get("HUDNumerals14Bold");c.Rk=t.$h(a,c.ma.toLocaleString("en-US"),0);t.b.fg=!0}};t.b.Qm=function(){for(var a=0,b=0;b<t.b.Gf.length;b++){var c=t.b.Gf[b];240<=t.j-c.U?(t.b.Gf.splice(b--,1),t.b.fg=!0):(c.y=Math.max(c.y-.5,a),a+=c.species.Fd.height)}};
t.b.om=function(){t.b.kills+=1;window.localStorage.setItem("kills",t.b.kills);t.b.kf+=1};
t.b.Pm=function(){if(0!=t.b.kf){if(0<t.b.kf){if(t.j<t.b.Bl+3)return;t.b.kf--;t.i.W.get("hit02").play({gain:1});t.b.Ed=t.$h(t.i.P.get("HUDNumerals24Bold"),(t.b.kills-t.b.kf).toLocaleString("en-US"),1);t.b.Ed.Tj=t.j}else t.b.kills>t.b.killsBest&&(t.b.killsBest=t.b.kills,window.localStorage.setItem("killsBest",t.b.killsBest),window.localStorage.setItem("killsBestName","best score")),t.b.kills=0,window.localStorage.setItem("kills",0),t.b.kf=0,t.b.Ed=[],t.b.killsBest?t.b.Tg=t.$h(t.i.P.get("HUDNumerals14Bold"),
t.b.killsBest.toLocaleString("en-US"),1):t.b.Tg=[];t.b.fg=!0;t.b.Bl=t.j}};t.b.Cn=function(a){var b=document.createElement("div");b.style.position="relative";b.style.padding="8px";b.style.marginTop="4px";b.style.fontSize="14pt";b.style.background="#2c80fd";b.style.boxShadow="-2px 5px 0px black";b.innerHTML=a;b.Ak=t.j;t.b.bm.appendChild(b)};t.b.Qn=function(a){t.b.bm.removeChild(a)};
t.i.ready=function(){t.b.bm=document.getElementById("tutorialDiv");var a=t.i.P.get("HUDNumerals10");a.ve=[7,5,7,7,8,7,7,7,7,7,3];a.jf=10;a.gh=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.Bg=[0,1,0,0,-1,0,0,0,0,0,0];t.Xi(a);a=t.i.P.get("HUDNumerals14Bold");a.ve=[9,6,9,9,9,9,9,9,9,9,4];a.jf=14;a.gh=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.Bg=[0,1,0,0,0,0,0,0,0,0,0];t.Xi(a);a=t.i.P.get("HUDNumerals24Bold");a.ve=[13,9,13,13,14,13,13,13,13,13,5];a.jf=23;a.gh=[0,1,0,0,-1,0,0,0,0,0,0];a.Bg=[0,3,0,0,0,0,0,0,0,0,0];t.Xi(a);
a=t.i.P.get("HUDNumeralsSilverAndGold");a.ve=[9,6,9,9,9,9,9,9,9,9,4,6,0];a.jf=14;a.gh=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,0];a.Bg=[0,1,0,0,0,0,0,0,0,0,0,-1,4];t.Xi(a);t.Vl=K(new t.Node("scnBuilderMeshes"),t.dd);t.ag=K(new t.Node("scnWorld"),t.dd);t.Lg=K(new t.Node("scnDoors"),t.ag);t.Lg.Sa=0;t.Zf=K(new t.Node("scnSpuds"),t.dd);t.Zf.Sa=0;t.pj=K(new t.Node("scnLoot"),t.dd);t.ui=K(new t.Node("scnShadows"),t.dd);t.ui.Sa=0;t.$f=K(new t.Node("scnWindowPanes"),t.dd);t.$f.Sa=0;t.he=K(new t.Node("scnEffects"),
t.dd);t.he.Sa=0;t.De=K(new t.Node("scnSelf"),t.dd);t.De.Sa=0;t.hn=K(new t.Node("scnHUD"),t.dd);K(dk,t.dd);K(t.b,t.dd);t.Si=1E3/60;t.j=0;t.eb(t.i.za.get("physical"));t.I.M("clipY",Infinity,!1);t.eb(t.i.za.get("imageContrast"));t.I.M("contrastOffset",0);t.I.M("contrastScale",1.0625);t.Fb(Ae);ve(Ae,Ae.Ci.length*Ae.Tb);Ae.upload(Ae.Ci);t.vf(Ce);ve(Ce,2*Ce.elements.length);Ce.upload(Ce.elements);t.b.nf=new cf;t.i.Rb.get("gemRuby").Ia=0;t.i.Rb.get("gemEmerald").Ia=0;t.i.Rb.get("gemSapphire").Ia=0;t.i.Rb.get("bulbGreen").Ia=
0;Z.Hi();a=kc(5);Jk.Hf=[];for(var b=0;9>b;b++){var c=b;c*=1/9;c=Math.pow(c,.5);Jk.Hf[b]=c*a}a=0;al.rc="Masher";al.Mc=a++;Xk.rc="Revolver";Xk.Mc=a++;Tk.rc="Carbine";Tk.Mc=a++;Jk.rc="Shotgun";Jk.Mc=a++;Ik.rc="Grenade";Ik.Mc=a++;Tk.Di=t.i.P.get("ViewCarbine");Tk.ri=t.i.P.get("HUDReticleCarbine");Tk.R=t.i.P.get("HUDItemCarbine");Tk.R.offsetY=-12;Jk.Di=t.i.P.get("ViewShotgun");Jk.ri=t.i.P.get("HUDReticleShotgun");Jk.R=t.i.P.get("HUDItemShotgun");Jk.R.offsetY=-10;Xk.Di=t.i.P.get("ViewRevolver");Xk.ri=t.i.P.get("HUDReticleRevolver");
Xk.R=t.i.P.get("HUDItemRevolver");Xk.R.offsetY=-9;Ik.Di=t.i.P.get("ViewGrenade");Ik.ri=t.i.P.get("HUDReticleCarbine");Ik.R=t.i.P.get("HUDItemCarbine");Ik.R.offsetY=-12;al.Di=t.i.P.get("ViewMasher");al.ri=t.i.P.get("HUDReticleCarbine");al.R=t.i.P.get("HUDItemCarbine");al.R.offsetY=-12;a=[t.i.W.get("ShotgunShut01")];al.bj={Lb:t.i.P.get("LootMasher"),Fd:t.i.P.get("HUDItemMasher"),sc:75E3/172*99,W:a,Jc:dl.Bc,Hc:dl.oe,uc:dl.Lc,Ob:al,ma:1};Tk.bj={Lb:t.i.P.get("LootCarbine"),Fd:t.i.P.get("HUDItemCarbine"),
sc:75E3/172*172,W:a,Jc:dl.Bc,Hc:dl.oe,uc:dl.Lc,Ob:Tk,ma:1};Jk.bj={Lb:t.i.P.get("LootShotgun"),Fd:t.i.P.get("HUDItemShotgun"),sc:75E3/172*176,W:a,Jc:dl.Bc,Hc:dl.oe,uc:dl.Lc,Ob:Jk,ma:1};Xk.bj={Lb:t.i.P.get("LootRevolver"),Fd:t.i.P.get("HUDItemRevolver"),sc:75E3/172*103.2,W:a,Jc:dl.Bc,Hc:dl.oe,uc:dl.Lc,Ob:Xk,ma:1};Tk.Ji={Lb:t.i.P.get("CarbineMag"),Fd:t.i.P.get("HUDCartridgeCarbine"),sc:37500,W:a,Jc:W.Me,Hc:W.Le,uc:W.Ud,Ob:Tk,ma:30};Jk.Ji={Lb:t.i.P.get("ShotshellBox"),Fd:t.i.P.get("HUDCartridgeShotgun"),
sc:5E4,W:a,Jc:W.Me,Hc:W.Le,uc:W.Ud,Ob:Jk,ma:8};Xk.Ji={Lb:t.i.P.get("RevolverLoader"),Fd:t.i.P.get("HUDCartridgeRevolver"),sc:25E3,W:a,Jc:W.Me,Hc:W.Le,uc:W.Ud,Ob:Xk,ma:6};Ik.Ji={Lb:t.i.P.get("LootGrenade"),Fd:t.i.P.get("HUDGrenade"),sc:26E3,W:a,Jc:W.Me,Hc:W.Le,uc:W.Ud,Ob:Ik,ma:1};W.gm();a=t.b.cl=new Lg;a.I=t.i.za.get("splatter");a.ia=t.i.P.get("splatter02");a.color=hl.Jf;a.Ia=1;a=t.b.bl=new Lg;a.I=t.i.za.get("image");a.ia=t.i.P.get("bulletPock01");a.color=new F(255,255,255,128);a.Ia=2;a=new ie;a.name=
"flashWhite";a.re=id;a.Ia=0;t.i.Rb.add(a);a=new ie;a.name="flashRed";a.re=kd;a.Ia=0;t.i.Rb.add(a);t.b.Um();t.b.Ik();t.b.Gf=[];K(t.tl,t.dd);a=q(["kills","killsBest"]);for(b=a.next();!b.done;b=a.next())b=b.value,t.b[b]=0,c=window.localStorage.getItem(b),null==c?window.localStorage.setItem(b,t.b[b]):t.b[b]=parseFloat(c);t.b.killsBestName="best score";a=window.localStorage.getItem("killsBestName");null==a?window.localStorage.setItem("killsBestName",t.b.killsBestName):t.b.killsBestName=a;t.start()};
t.b.Um=function(){var a=performance.now();for(t.ua.insertAdjacentHTML("beforeend","Generating world... ");tj(););mj=!0;t.ua.insertAdjacentHTML("beforeend","done ("+t.ua.kk.format(performance.now()-a)+" ms).<br />");t.ua.insertAdjacentHTML("beforeend","<br />Ready. Click to play!<br />");t.b.ej=0;t.b.Hl=3;t.b.Il=5;if(t.b.vn)a=new xk("devCamera"),K(a,t.dd),a.create(),t.b.la=a;else{a=Xe(0)[0][0];var b=t.b.da=new bl("player");b.Ii=Math.floor(2147483648/180*90);b.h.y=a.y+.5*b.hd;b.h.z=a.z;b.h.x=a.x;K(b,
t.ag);b.create()}t.b.zm()};
t.b.rn=function(){if(t.b.da.Da.pe<t.b.Ib.Xj&&!t.b.Pb.gun){var a=null;0==t.b.da.Da.pe?a=al:5>t.b.da.Da.pe&&(a=tb([Ik,Tk,Xk,Jk]));if(a&&!t.b.da.Da.jb[a.Mc])if(a==Ik)new Ik(t.b.da.Da);else for(var b={},c=0;c<t.b.Ib.Jd.length;b={Td:b.Td},c++){var d=function(f){return function(){return t.b.da?16E10>xd(t.b.da.h,f.Td,new w).wc()?!1:!0:!0}}(b);b.Td=t.b.Ib.Jd[c];if(!(b.Td.jh||600>t.j-b.Td.ah)&&d()){t.b.Ib.Jd.splice(c,1);t.b.Ib.Jd.push(b.Td);a=new dl(a.bj);a.h.set(b.Td.x,b.Td.y,b.Td.z);K(a,t.pj);a.create();
a.Nd=b.Td;b.Td.jh=a;t.b.Pb.gun=1;break}}}};
t.b.qn=function(){if(!(this.Zg.length>=t.b.Il)){for(var a=[],b=q(t.b.da.Da.jb),c=b.next();!c.done;c=b.next())if(c=c.value){var d=c.constructor,f=d.Ji;if(f){var h=t.b.Pb[d.rc];isNaN(h)&&(h=t.b.Pb[d.rc]=0);h+=Mk(c);h>=c.mg||a.push(f)}}b=t.b.Pb.food;isNaN(b)&&(b=t.b.Pb.food=0);b+=t.b.da.rb;for(c=0;3>c&&!(360<=b);c++)b+=W.Hi[0].ma,a.push(W.Hi[0]);if(a.length)for(b={},c=0;c<t.b.Ib.Jd.length;b={ne:b.ne},c++)if(b.ne=t.b.Ib.Jd[c],!(b.ne.jh||600>t.j-b.ne.ah)){t.b.Ib.Jd.splice(c,1);t.b.Ib.Jd.push(b.ne);c=new Bk(b.ne.x,
b.ne.y-1E5,b.ne.z);K(c,t.ag);c.Nd=b.ne;b.ne.jh=c;c.hk=a;c.create();break}}};
t.b.sn=function(){if(!(t.b.pc.length>=t.b.ej)){var a=t.b.zk;a||(a=tb(Ze));if(a.Kb.Ib!=t.b.Ib||sb(3))t.b.zk=null;else{var b=tb(a);b=tb(b);var c=b.L-b.J-5E4-5E4;a=new w(qb(b.D-b.w-5E4-5E4)+b.w+5E4,a.ta-1E3,qb(c)+b.J+5E4);if(b=Ve(a,new w(0,-1E8,0),We))a.y=b.p.y+1E5,t.b.da?(b=xd(t.b.da.h,a,new w),b=1E12>b.wc()||!Ve(a,b,nk)?!1:!0):b=!0,b?(b=new Z,b.h.x=a.x,b.h.y=a.y,b.h.z=a.z,Rd(b.transform,b.h),K(b,t.Zf),b.create(),t.b.hl--):t.b.zk=null}}};
t.b.pn=function(){if(!(this.Wg.length>=t.b.Hl*Ze.length/20)){var a=tb(Ze);if(a.Kb.Ib==t.b.Ib){var b=tb(a);b=tb(b);var c=b.L-b.J-5E4-5E4;a=new w(qb(b.D-b.w-5E4-5E4)+b.w+5E4,a.ta-1E3,qb(c)+b.J+5E4);if(b=Ve(a,new w(0,-1E8,0),We))a.y=b.p.y+1E5,t.b.da?(b=xd(t.b.da.h,a,new w),b=1E12>b.wc()||!Ve(a,b,nk)?!1:!0):b=!0,b&&(a=new Ek(a.x,a.y-1E5,a.z),K(a,t.ag),a.create())}}};
t.b.step=function(){var a=2*Math.PI/(60*t.b.Ym)*t.j+.75*Math.PI;t.b.Tm=12*a/Math.PI%24;a=Wa(1.5*Math.cos(a-Math.PI),.02,1);var b=255*Math.pow(a,1/2.2);t.b.qj.r=b;t.b.qj.bb=b;t.b.qj.ra=b;b=q(Ze);for(var c=b.next();!c.done;c=b.next())c=c.value,c.ed&&c.bg.set(a,a,a);for(a=0;16>a;a++){Cf=1-Cf;b=Bf[Cf];var d=Bf[1-Cf];c=q(Ze);for(var f=c.next();!f.done;f=c.next()){f=f.value;var h=f.index-Bf.Y;d[0][h]=f.Db.x+f.bg.x;d[1][h]=f.Db.y+f.bg.y;d[2][h]=f.Db.z+f.bg.z}for(c=0;3>c;c++)for(f=q(Af),h=f.next();!h.done;h=
f.next()){h=h.value;var g=h.kd*b[c][h.ei.index-Bf.Y];g*=h.lj[c];d[c][h.Jg.index-Bf.Y]+=g/h.Jg.Ek}b=q(Ze);for(f=b.next();!f.done;f=b.next())c=f.value,c.ed&&(f=c.index-Bf.Y,d[0][f]=c.Db.x+c.bg.x,d[1][f]=c.Db.y+c.bg.y,d[2][f]=c.Db.z+c.bg.z)}if(0==t.j%1){a=q(Ze);for(f=a.next();!f.done;f=a.next())b=f.value,c=b.index-Bf.Y,b.ja.lb.x=d[0][c],b.ja.lb.y=d[1][c],b.ja.lb.z=d[2][c],d[0][c]=0,d[1][c]=0,d[2][c]=0;d=q(Af);for(h=d.next();!h.done;h=d.next())a=h.value,a.Eb&&(a.kd=a.ei==a.Jg?dg(a.Eb):$e(a.Eb));d=t.zc.Rl;
for(b=a=0;64>b;b++){c=Ze[b];if(!c)break;c.sf=b;for(f=0;10>f;f++){h=c.yb[f];if(!h)break;h.index=a++;h.ke(new Float32Array(d.buffer,b*d.Ai+48*f,12))}if(c.Ag)for(f=q(c.Ag),h=f.next();!h.done;h=f.next())for(h=q(h.value.Tc),g=h.next();!g.done;g=h.next())g=g.value,g.Ga[1]=c.sf,g.Ga[4]=c.yb.length}d.upload();d=q(qj.elements);for(a=d.next();!a.done;a=d.next())a=a.value,(b=Xe(a.Y))&&a.vd&&(a.vd.Ga[1]=b.sf,a.vd.Ga[4]=b.yb.length);zf&&Df()}t.Audio.step();t.b.da&&0==t.j%5&&(this.rn(),this.qn(),this.sn(),this.pn());
t.b.Pm();t.b.Qm();for(d=!(t.j>=ih+300&&hh>=ih);!(d&&performance.now()>=t.Em-3)&&tj(););};
t.tl.step=function(){t.gc.r=0;t.gc.bb=0;t.gc.ra=0;t.gc.La=0;if(t.b.da){var a=t.j-t.b.da.El;a=1-a/8;0>a&&(a=0);t.gc.r+=24*a;t.gc.bb+=24*a;t.gc.ra+=24*a;t.gc.La+=24*a;a=t.j-t.b.da.ek;a=1.5-a/18;0>a&&(a=0);1<a&&(a=1);t.gc.r+=170*a;t.gc.La+=170*a;a=t.j-t.b.da.dk;a=1.5-a/18;0>a&&(a=0);1<a&&(a=1);t.gc.bb+=24*a}t.j<t.b.Ng?(a=t.b.Ng-t.j,a=1-a/60,0>a&&(a=0),t.$j.La=255*a):(a=t.j-t.b.Ng,a=1-a/180,0>a&&(a=0),t.$j.La=0,t.gc.La=255*a);u.bindFramebuffer(u.FRAMEBUFFER,t.pi.object);t.hc(2);u.clear(u.DEPTH_BUFFER_BIT|
u.STENCIL_BUFFER_BIT);0==t.j%60&&t.Vl.children.sort(sj);lg();t.eb(t.i.za.get("physical"));t.Lg.Sa=1;Wd(t.Lg);t.Lg.Sa=0;t.I.M("clipY",Infinity,!1);var b=jb.first();for(a=gf.first();b.item;){if(a.item){if(a.item.Ei<t.j){var c=a.next;fb(a);a=c;continue}if(0<lb(b.item,a.item)){a=a.next;continue}}c=b.next;fb(b);hb(b,a);b=c}for(;a.item;)b=a.next,a.item.Ei<t.j&&fb(a),a=b;hf.s=.00390625*t.la.O.s;hf.m31=.00390625*t.la.O.m31;hf.m32=.00390625*t.la.O.m32;t.Fb(zg);t.eb(t.i.za.get("sky"));t.Jb(0,t.i.P.get("concr01"));
t.I.M("texture1",1,!0);t.Jb(1,t.i.P.get("sky01"));t.I.M("color",t.b.qj);t.tb(0);t.hc(1);t.$b(0);a=new H;b=(.5*t.la.Hg+.5*t.la.yg)*jg.Ug;a.scale(b*t.viewport.ratio,b,1);a.m32=-b/Math.tan(t.la.Zd);Nd(t.la.O,a,a);t.I.M("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,0,4);if(t.Zf.children){t.Zf.children.sort(rj);Z.Qa=128;for(a=t.Zf.children.first();a.item;a=a.next)a.item.wi()&&a.item instanceof Z&&a.item.bd();u.enable(u.STENCIL_TEST);for(a=t.Zf.children.first();a.item;a=a.next)a.item.wi()&&(a.item instanceof
Z||(u.stencilFunc(u.GEQUAL,128,255),u.stencilOp(u.KEEP,u.KEEP,u.KEEP)),a.item.ab());u.disable(u.STENCIL_TEST)}if(t.b.da&&t.b.da.Da.N instanceof Xk&&.5<t.b.da.Da.focus){t.eb(t.i.za.get("flashCardThreshold"));t.tb(1);t.hc(1);u.depthFunc(u.GREATER);for(a=t.Zf.children.first();a.item;a=a.next)if(a.item instanceof Z&&a.item.Sa&&600>t.j-a.item.dj){t.I.M("color",new F(0,0,0,32*(1-(t.j-a.item.dj)/600)));b=a.item;t.Fb(Z.Ka);t.Jb(0,b.ia);t.$b(0);c=new H;c.set(b.sa);var d=b.sc;c.u*=d;c.A*=d;c.B*=d;c.v*=-d;c.m11*=
-d;c.m12*=-d;t.I.M("modelMatrix",c);u.drawArrays(u.TRIANGLE_FAN,Z.Lc[b.Lb+("00"+(b.wj*b.Ie+b.j)).slice(-2)].Cd,4)}t.I.M("color",id);u.depthFunc(u.LEQUAL)}t.b.cl.ab();t.b.bl.ab();t.eb(Yj.I);t.I.M("modelMatrix",hf);Yj.ba.bind();t.tb(1);t.hc(1);t.$b(1);t.Fb(Yj.Ka);t.vf(Yj.te);b=a=0;for(c=gf.first();c.item;c=c.next)c.item.$k==a+b?b+=c.item.Zk:(b&&u.drawElements(u.TRIANGLES,b,u.UNSIGNED_SHORT,2*a),a=c.item.$k,b=c.item.Zk);b&&u.drawElements(u.TRIANGLES,b,u.UNSIGNED_SHORT,2*a);t.tb(1);t.hc(1);t.$b(0);t.eb(t.i.za.get("monoEffect"));
t.Fb(zg);u.activeTexture(u.TEXTURE0);u.bindTexture(u.TEXTURE_2D,t.i.P.get("shadow").object);t.I.M("enableTexture0",1,!0);t.I.M("color",t.gg.color);t.ui.Sa=1;Wd(t.ui);t.ui.Sa=0;if(t.$f.children){a=t.la.O.td();for(b=t.$f.children.first();b.item;b=b.next)b.item.wi()&&(b.item.depth=rc(a,b.item.h));t.$f.children.sort(Si.R);Si.bd();t.$f.Sa=1;Wd(t.$f);t.$f.Sa=0}t.he.Sa=1;Wd(t.he);t.he.Sa=0;t.b.da&&(t.Wl(t.b.da.ie),kg(t.b.da.ie),t.De.Sa=1,Wd(t.De),t.De.Sa=0);t.b.da&&(a=t.b.da.Da,a.Sa=1,a.ab(),a.Sa=0);t.tb(0);
t.hc(0);t.$b(0);u.bindFramebuffer(u.FRAMEBUFFER,null);t.zc.pd.M("viewMatrix",Sd);t.zc.pd.upload();t.Fb(zg);t.vi(new Ec(t.canvas.width,t.canvas.height));t.eb(t.i.za.get("imageContrast"));u.activeTexture(u.TEXTURE0);u.bindTexture(u.TEXTURE_2D,t.pi.color.object);t.I.M("texture0",0,!0);t.I.M("enableTexture0",1,!0);t.I.M("modelMatrix",Sd);t.I.M("color",id);t.I.M("imageAdd",t.gc);t.I.M("imageSub",t.$j);u.drawArrays(u.TRIANGLE_FAN,0,4);t.b.Dm()};
t.b.Dm=function(){function a(I,L,R,ra,ta,ia,pa){t.Jb(0,I);var Lb=t.canvas.width>>1,rb=t.canvas.height>>1,lc=.5*I.width,Nb=.5*I.height;0==l?L-=Lb:1==l&&(L+=Lb);2==m?R-=rb:3==m&&(R+=rb);0==g?L+=lc:1==g&&(L-=lc);2==k?R+=Nb:3==k&&(R-=Nb);L=Math.round(L);R=Math.round(R);a.R&&(void 0===ra?u.scissor(0,0,t.canvas.width,t.canvas.height):u.scissor(L+Lb-lc+ra,-R+rb-Nb+ta,ia,pa));ra=new H;ra.u=I.width/t.canvas.width*n;ra.m11=-I.height/t.canvas.height*r;ra.s=2*L/t.canvas.width;ra.m31=-2*R/t.canvas.height;t.I.M("modelMatrix",
ra);u.drawArrays(u.TRIANGLE_FAN,0,4)}function b(I){I=t.j-I.Tj;return 60<I?1:1+.25*Math.pow(.9375,I)}if(1==t.oj)t.oj=2;else if(t.b.da){var c=t.b.da.Da.N;if(t.b.fg){t.b.fm=new we;var d=[];c&&(d=d.concat(c.Cj));d=d.concat(t.b.Ed);d=d.concat(t.b.Tg);d=d.concat(t.b.Gi);for(var f=q(t.b.Gf),h=f.next();!h.done;h=f.next())d=d.concat(h.value.Rk);xe(d);t.b.fg=!1}t.vi(new Ec(t.canvas.width,t.canvas.height));t.zc.pd.M("viewMatrix",Sd);t.zc.pd.upload();t.hc(0);t.$b(0);var g=0,k=2,l=0,m=2,n=1,r=1;t.tb(2);u.enable(u.SCISSOR_TEST);
a.R=!0;t.Fb(zg);t.eb(t.i.za.get("image"));t.I.M("color",id);a.R=!1;g=1;k=2;l=4;m=5;d=q(t.b.Gf);for(h=d.next();!h.done;h=d.next()){f=h.value;h=f.species.Fd.height;var p=Wa(-3+(t.j-f.U)/60,0,1)*h*.5;u.scissor(0,(t.canvas.height>>1)-44+f.y-h+p,t.canvas.width,t.canvas.height);a(f.species.Fd,-189,44-f.y+p)}a.R=!0;u.scissor(0,0,t.canvas.width,t.canvas.height);c&&(c.Aj()&&(g=4,k=2,l=4,m=5,d=Math.cos(60*t.j/Math.PI),d=Wa(d,0,1),t.I.M("color",new F(255,255*d,255*d,127+128*d)),d=t.i.P.get("HUDWarnReload"),
a(d,0,30),t.I.M("color",id)),f=[id,new F(255,255,64,255),new F(208,0,0,255)],c instanceof Xk?(h=c.ib,g=0,k=3,l=4,m=5,d=t.i.P.get("HUDMagRevolver"),a(d,-158-34*h,123,34*h,0,34,34),k=2,d=t.i.P.get("HUDAmmo2"),t.I.M("color",f[c.eg()]),a(d,-201,91),t.I.M("color",id)):c instanceof Tk?(h=c.ib,g=0,k=3,l=4,m=5,d=t.i.P.get("HUDMagCarbine"),a(d,-208,124+13*h,0,13*h,97,13),k=2,d=t.i.P.get("HUDAmmo3"),t.I.M("color",f[c.eg()]),a(d,-208,81),t.I.M("color",id)):c instanceof Jk?(h=c.Nc,g=0,k=3,l=4,m=5,d=t.i.P.get("HUDMagShotgun"),
a(d,-150-18*h,123,18*h,0,18,34),k=2,d=t.i.P.get("HUDAmmo2"),t.I.M("color",f[c.eg()]),a(d,-201,91),t.I.M("color",id)):c instanceof Ik&&(g=0,k=2,l=4,m=5,d=t.i.P.get("HUDAmmo2"),t.I.M("color",f[c.eg()]),a(d,-201,91),t.I.M("color",id)));d=Math.round(t.b.da.rb/3);g=0;k=2;l=4;m=5;f=t.i.P.get("HUDLife");a(f,-216,-141,0,18,148,22);a(f,-189,-156,0,12,d,6);h=Math.round(t.b.da.lf/3);0>h?a(f,-189+d,-162,0,6,-h,6):0<h&&a(f,-189+d-120,-168,120-h,0,h,6);isNaN(t.b.Ad)||(g=1,k=2,l=4,m=5,d=t.b.Gi,d=209-d.width*d.Og.width,
f=t.i.P.get("HUDTreasure"),a(f,d,-146),t.b.Ad||(f=t.i.P.get("HUDChecked"),t.I.M("color",new F(90,145,255,255)),a(f,d+14,-142),t.I.M("color",id)));c&&t.va.reticleEnabled&&t.b.da.Da.Sb&&(t.tb(1),t.eb(t.i.za.get("monoEffect")),d=new Ad,t.b.da.Fh?(t.I.M("color",new F(255,0,0,255)),t.va.reticleSnap&&(f=t.b.da.Fh,t.b.la.Nk.transform(new Ad(f.x,f.y,f.z,1),d),d.x/=2*d.a,d.y/=2*d.a)):t.I.M("color",new F(0,128,255,255)),t.I.M("ambientLight",new w(1,1,1)),g=4,k=5,l=4,m=5,(f=c.constructor.ri)&&a(f,Math.round(d.x*
t.canvas.width),Math.round(-d.y*t.canvas.height)),t.tb(2),t.eb(t.i.za.get("image")),t.I.M("color",id));u.disable(u.SCISSOR_TEST);t.Fb(t.b.fm);d=function(){y.u=n*z.width/v;y.m11=r*z.height/B;y.s=x/v;y.m31=-A/B;t.I.M("modelMatrix",y)};h=f=0;var v=t.canvas.width>>1,B=t.canvas.height>>1,y=new H;if(c&&c.Cj){p=c.Cj;h=p.length;if(!(c instanceof al)){var x=p.x;var A=p.y;var z=p.Og;t.Jb(0,z);d();t.I.M("color",p.color);u.drawArrays(u.TRIANGLES,f,h)}f+=h}z=t.i.P.get("HUDNumerals24Bold");t.Jb(0,z);x=208;A=-134;
c=t.j-t.b.Ed.Tj;60>c?(n=r=1.5*(1+.25*Math.pow(.9375,c)),x=0,x-=t.b.Ed.width*z.width*n*.5,A+=22-.5*c,A+=t.b.Ed.height*z.height*r):(n=r=b(t.b.Ed),x-=t.b.Ed.width*z.width*n,A+=t.b.Ed.height*z.height*r);x+=1;A+=2;d();h=t.b.Ed.length;t.I.M("color",jd);u.drawArrays(u.TRIANGLES,f,h);--x;A-=2;d();t.I.M("color",2>t.j-t.b.Ed.Tj?id:ld);u.drawArrays(u.TRIANGLES,f,h);f+=h;n=r=1;z=t.i.P.get("HUDNumerals14Bold");t.Jb(0,z);x=208;A=-104;x-=t.b.Tg.width*z.width;A+=t.b.Tg.height*z.height;h=t.b.Tg.length;--x;A-=2;d();
t.I.M("color",id);u.drawArrays(u.TRIANGLES,f,h);f+=h;n=r=1;t.b.Gi&&(c=t.b.Gi,z=c.Og,t.Jb(0,z),h=c.length,x=c.x+1,A=c.y+2,d(),t.I.M("color",jd),u.drawArrays(u.TRIANGLES,f,h),x=c.x,A=c.y,d(),t.I.M("color",c.color),u.drawArrays(u.TRIANGLES,f,h),f+=h);u.enable(u.SCISSOR_TEST);c=q(t.b.Gf);for(h=c.next();!h.done;h=c.next()){p=h.value;x=-188;A=44;h=p.species.Fd.height;var D=Wa(-3+(t.j-p.U)/60,0,1)*h*.5;u.scissor(0,(t.canvas.height>>1)-A+p.y-h+D,t.canvas.width,t.canvas.height);h=p.Rk;z=h.Og;t.Jb(0,z);h=h.length;
A+=-p.y+19;A+=D;--x;A+=2;d();t.I.M("color",jd);u.drawArrays(u.TRIANGLES,f,h);x+=1;A-=2;d();t.I.M("color",id);u.drawArrays(u.TRIANGLES,f,h);f+=h}u.scissor(0,0,t.canvas.width,t.canvas.height);u.disable(u.SCISSOR_TEST)}};
t.b.tn=function(){if(t.b.Zc)for(var a=q(t.b.Zc),b=a.next();!b.done;b=a.next()){b=b.value;var c=b.Xb,d=b.Yb,f=1-(t.Xh-b.If)/20;0<f?(c-=240*f*f,b.style.left=c+"px",b.style.top=d+"px"):0!=t.Xh%4||b.qb||(c+=Math.floor(2*Math.random()),d+=Math.floor(2*Math.random()),b.style.left=c+"px",b.style.top=d+"px")}t.b.mh&&(t.b.mh.style.backgroundPosition="0px "+256*-Math.floor(t.Xh/4)+"px")};
t.b.al=function(){var a=t.$m=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor="#2c80fd";a.style.mixBlendMode="color";t.me.appendChild(a)};
t.b.Rh=function(){t.ua&&t.me.removeChild(t.ua);var a=t.ua=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor=0==t.j?"#2c80fdff":"#2c80fd40";a.style.overflow="hidden";t.me.appendChild(a);t.b.Zc=[];t.Xh=0};
t.b.$g=function(){function a(){t.i.W.get("hit02").play({gain:.5})}function b(){t.i.W.get("woodSnap02").play()}t.b.Rh();if(0==t.j){var c=document.createElement("div");c.style.width="256px";c.style.height="256px";c.style.position="absolute";c.style.top="20px";c.style.right="20px";c.style.background='url("'+t.i.P.get("MenuMantato").data.src+'")';c.style.backgroundPosition="0px 0px";t.ua.appendChild(c);t.b.mh=c}c=62;var d=0,f=document.createElement("button");f.style.zIndex=2;f.style.width="134px";f.style.height=
"44px";f.style.position="absolute";f.Yb=c;c+=44;f.Xb=29;f.If=d;d+=6;t.b.Zc.push(f);f.style.border="none";f.style.background='url("'+t.i.P.get("MenuButtonPlay").data.src+'")';f.style.backgroundPosition="0px 0px";f.style.cursor="pointer";f.onclick=function(){this.style.backgroundPosition="0px -44px";delete t.b.mh;N.xk(!0)};f.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.qb=2;b()};f.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.qb=
1;this.style.left=this.Xb+"px";this.style.top=this.Yb+"px";a()};f.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.qb=0};t.Mn=f;t.ua.appendChild(f);f=document.createElement("button");f.style.zIndex=2;f.style.width="133px";f.style.height="42px";f.style.position="absolute";f.Yb=c;c+=44;f.Xb=29;f.If=d;d+=6;t.b.Zc.push(f);f.style.border="none";f.style.background='url("'+t.i.P.get("MenuButtonOptions").data.src+'")';f.style.backgroundPosition="0px 0px";f.style.cursor="pointer";f.onclick=
function(){this.style.backgroundPosition="0px -44px";delete t.b.mh;t.b.xm()};f.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.qb=2;b()};f.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.qb=1;this.style.left=this.Xb+"px";this.style.top=this.Yb+"px";a()};f.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.qb=0};t.ua.appendChild(f);f=document.createElement("button");f.style.zIndex=2;f.style.width="133px";f.style.height=
"42px";f.style.position="absolute";f.Yb=c;c+=44;f.Xb=29;f.If=d;d+=6;t.b.Zc.push(f);f.style.border="none";f.style.background='url("'+t.i.P.get("MenuButtonReadme").data.src+'")';f.style.backgroundPosition="0px 0px";f.style.cursor="pointer";f.onclick=function(){this.style.backgroundPosition="0px -44px";delete t.b.mh;t.b.ym()};f.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.qb=2;b()};f.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.qb=
1;this.style.left=this.Xb+"px";this.style.top=this.Yb+"px";a()};f.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.qb=0};t.ua.appendChild(f);f=document.createElement("button");f.style.zIndex=2;f.style.width="133px";f.style.height="42px";f.style.position="absolute";f.Yb=c;c+=44;f.Xb=29;f.If=d;d+=6;t.b.Zc.push(f);f.style.border="none";f.style.background='url("'+t.i.P.get("MenuButtonDonate").data.src+'")';f.style.backgroundPosition="0px 0px";f.style.cursor="pointer";f.onclick=function(){this.style.backgroundPosition=
"0px -44px";delete t.b.mh;t.b.wm()};f.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.qb=2;b()};f.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.qb=1;this.style.left=this.Xb+"px";this.style.top=this.Yb+"px";a()};f.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.qb=0};t.ua.appendChild(f);c=q(t.b.Zc);for(d=c.next();!d.done;d=c.next())d=d.value,d.style.left=d.Xb+"px",d.style.top=d.Yb+"px"};
t.b.xm=function(){function a(){t.i.W.get("hit02").play({gain:.5})}function b(){t.i.W.get("woodSnap02").play()}t.b.Rh();t.Lk={};for(var c in t.va)t.Lk[c]=t.va[c];t.Kk={};for(var d in t.xa)t.Kk[d]=t.xa[d];d=document.createElement("div");d.style.height="100%";d.style.fontSize="6pt";d.style.lineHeight="1.5em";d.style.overflowY="scroll";d.style.padding="0";d.style.background="#505050";d.style.userSelect="none";t.ua.appendChild(d);c=t.ua.R=document.createElement("div");c.style.position="absolute";c.style.top=
"40px";c.style.right="56px";c.style.width="240px";c.style.fontSize="6pt";c.style.lineHeight="1.5em";t.ua.appendChild(c);c=document.createElement("div");c.style.padding="5px 102px 5px 20px";d.appendChild(c);c.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Options</h2>\n\t\t');d=document.createElement("input");d.id="inputCheckbox_musicEnabled";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.va.musicEnabled;d.oninput=function(k){b();t.va.musicEnabled=
k.target.checked?1:0;t.Audio.Bc(t.va.musicEnabled)};d.style.marginTop="8px";t.fj=d;var f=document.createElement("label");f.setAttribute("for",d.id);f.innerHTML="Music";d.onmouseenter=f.onmouseenter=function(){t.ua.R.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Music</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tBoots and Pants and Boots and Pants.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tYou can also press <b>M</b> to toggle the music at any time.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(f);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputCheckbox_viewportFitWindow";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.va.viewportFitWindow;d.oninput=function(k){b();t.va.viewportFitWindow=k.target.checked?1:0;t.Mg()};d.style.marginTop="8px";t.ii=d;f=document.createElement("label");f.setAttribute("for",d.id);f.innerHTML="Fit window";d.onmouseenter=f.onmouseenter=function(){t.ua.R.innerHTML=
'\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Fit Window</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tHave the game display as big as possible inside the browser window.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tYou can also use the <b>-</b> and <b>+</b> keys to adjust the size at any time.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(f);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");
d.id="inputCheckbox_lightingFancy";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.va.lightingFancy;d.oninput=function(k){b();t.va.lightingFancy=k.target.checked?1:0};d.style.marginTop="8px";f=document.createElement("label");f.setAttribute("for",d.id);f.innerHTML="Illumination Sampling";d.onmouseenter=f.onmouseenter=function(){t.ua.R.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Illumination Sampling</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tAllow global illumination sampling in the fragment shader, for a realistic-looking world.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDisabling this might improve your framerate.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(f);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputCheckbox_reticleEnabled";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.va.reticleEnabled;d.oninput=function(k){b();t.va.reticleEnabled=k.target.checked?1:0};d.style.marginTop="8px";f=document.createElement("label");f.setAttribute("for",d.id);f.innerHTML="Show Reticle";d.onmouseenter=f.onmouseenter=function(){t.ua.R.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Show Reticle</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tThe onscreen aiming reticle helps you to aim, but also indicates weapon chamber state, target validity, and aim snapping.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDisabling the reticle is not recommended, but some players might prefer it.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(f);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputCheckbox_reticleInSights";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.va.reticleInSights;d.oninput=function(k){b();t.va.reticleInSights=k.target.checked?1:0};d.style.marginTop="8px";f=document.createElement("label");f.setAttribute("for",d.id);f.innerHTML="Reticle In Sights";d.onmouseenter=f.onmouseenter=function(){t.ua.R.innerHTML=
'\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Reticle In Sights</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tIf enabled, the aiming reticle will be shown while aiming down sights.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tIn other words, the aiming reticle will not be hidden while aiming down sights.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tTo clarify: unless this is disabled, the aiming reticle will never not be unhidden while aiming down sights.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(f);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputCheckbox_reticleSnap";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.va.reticleSnap;d.oninput=function(k){b();t.va.reticleSnap=k.target.checked?1:0};d.style.marginTop="8px";f=document.createElement("label");f.setAttribute("for",d.id);f.innerHTML="Reticle Snapping";d.onmouseenter=f.onmouseenter=function(){t.ua.R.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Reticle Snapping</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tIf enabled, the position of the aiming reticle will be influenced by aim snapping.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tOtherwise, the aiming reticle will stay in its centered position. Some players might prefer this.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDoes not affect aim snapping, only the reticle.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(f);c.insertAdjacentHTML("beforeend","<br />");c.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t<h3 style="color:#FFFF00; text-shadow:-1px 2px black;">Mouse</h3>\n\t\t');d=document.createElement("input");d.id="inputCheckbox_mouseRaw";d.name="mouseRaw";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.va.mouseRaw;d.oninput=function(k){b();t.va.mouseRaw=k.target.checked?1:0};d.style.marginTop="8px";f=document.createElement("label");
f.setAttribute("for",d.id);f.innerHTML="Raw mouse input";d.onmouseenter=f.onmouseenter=function(){t.ua.R.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Raw Mouse Input</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tEnable unadjusted hardware mouse input.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tThis will make your aiming rotation based on the movement of your mouse, regardless of how fast you move it, which is recommended for first-person gaming.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tCurrently supported only in Chrome, Edge, Opera, and <em>not</em> available in Firefox, Safari, or Linux.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(f);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputNumber_mouseDPI";d.name="mouseDPI";d.type="number";d.min=100;d.step=100;d.style.fontSize="7pt";d.value=t.va.mouseDPI;d.oninput=function(k){k.target.checkValidity()&&(t.va.mouseDPI=parseFloat(k.target.value),t.mj())};d.style.marginTop="8px";d.style.width="5em";f=document.createElement("label");f.setAttribute("for",d.id);f.innerHTML="Mouse DPI:";
d.onmouseenter=f.onmouseenter=function(){t.ua.R.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Mouse DPI</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tFor gamers: if you know the DPI of your mouse, enter it here.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tOtherwise, just leave this value at its default.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: 1600\n\t\t\t\t\t</p>\n\t\t\t\t\t';a()};c.appendChild(f);c.insertAdjacentHTML("beforeend"," ");c.appendChild(d);c.insertAdjacentHTML("beforeend","<br />");d=
document.createElement("input");d.id="inputNumber_mouseScale";d.name="mouseScale";d.type="number";d.min=.125;d.step=.125;d.style.fontSize="7pt";d.value=t.va.mouseScale;d.oninput=function(k){k.target.checkValidity()&&(t.va.mouseScale=parseFloat(k.target.value),t.mj())};d.style.marginTop="8px";d.style.width="5em";f=document.createElement("label");f.setAttribute("for",d.id);f.title=" ";f.innerHTML="Mouse scale:";d.onmouseenter=f.onmouseenter=function(){t.ua.R.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Mouse Scale</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tInches of mouse movement at the given DPI to perform a 360\u00b0 rotation in the game.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tLower values will increase the aiming sensitivity.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: 3\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(f);c.insertAdjacentHTML("beforeend"," ");c.appendChild(d);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputNumber_wheelScale";d.name="wheelScale";d.type="number";d.min=1;d.step=1;d.style.fontSize="7pt";d.value=t.va.wheelScale;d.oninput=function(k){k.target.checkValidity()&&(t.va.wheelScale=parseFloat(k.target.value))};d.style.marginTop="8px";d.style.width="5em";f=document.createElement("label");f.setAttribute("for",d.id);f.title=" ";f.innerHTML=
"Wheel scale:";d.onmouseenter=f.onmouseenter=function(){t.ua.R.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Wheel Scale</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tUnits of mouse wheel delta to trigger a mouse wheel event. This only matters if you have assigned controls to the mouse wheel.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tIf you have a notched mouse wheel, the recommended value is 1. For smooth-spinning wheels, however, you may wish to use a greater value to make it less sensitive.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tThe delta units are not standardized, and vary by browser, OS, and  hardware. You will have to experiment to find what works for you.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: 1\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(f);c.insertAdjacentHTML("beforeend"," ");c.appendChild(d);c.insertAdjacentHTML("beforeend","<br />");c.insertAdjacentHTML("beforeend",'\n\t\t\t\t<br />\n\t\t\t\t<h3 style="color:#FFFF00; text-shadow:-1px 2px black;">Controls</h3>\n\t\t\t');d=f=document.createElement("div");d.style.display="flex";d.style.flexFlow="row nowrap";c.appendChild(d);d=[];for(var h=0;3>h;h++){var g=document.createElement("div");g.style.paddingRight="16px";g.style.display="flex";g.style.flexFlow="column nowrap";
d.push(g);f.appendChild(g)}f=document.createElement("div");f.innerHTML="Action";f.style.height="20px";f.style.fontWeight="bold";d[0].appendChild(f);f=document.createElement("div");f.innerHTML="Key";f.style.height="20px";f.style.fontWeight="bold";d[1].appendChild(f);f=document.createElement("div");f.innerHTML="Mouse";f.style.height="20px";f.style.fontWeight="bold";d[2].appendChild(f);f={};h=q("Masher Grenade Revolver Carbine Shotgun GunFire GunAction Reload MoveForward MoveBackward MoveLeft MoveRight Jump NextGun PrevGun".split(" "));
for(g=h.next();!g.done;f={Ke:f.Ke},g=h.next())f.Ke=g.value,g=document.createElement("div"),g.innerHTML=f.Ke,g.style.height="16px",g.style.marginBottom="2px",g.style.padding="0 2px 0 0",d[0].appendChild(g),g=document.createElement("div"),g.innerHTML=""+t.xa[f.Ke+"Key"],g.style.height="16px",g.style.marginBottom="2px",g.style.padding="0 2px",g.style.color="#000000",g.style.backgroundColor="#e0e0e0",g.style.fontWeight="bold",g.name=f.Ke,g.onmouseenter=function(){t.ua.R.innerHTML="";this.style.backgroundColor=
"#ffffff";a()},g.onmouseleave=function(){this.style.backgroundColor="#e0e0e0"},g.onclick=function(k){return function(){var l=t.Jk=document.createElement("div");l.style.position="absolute";l.style.width=t.canvas.width+"px";l.style.height=t.canvas.height+"px";l.style.left=0;l.style.top=0;l.style.zIndex=3;l.style.userSelect="none";l.style.display="flex";l.style.alignItems="center";l.style.justifyContent="center";l.style.backgroundColor="#000000c0";t.me.appendChild(l);var m=document.createElement("div");
m.style.textAlign="center";m.style.fontSize="7pt";m.style.lineHeight="1.5em";m.innerHTML='Press a key for:<br />\n\t\t\t\t\t\t\t\t<p style="font-size: 9pt"><b>'+k.Ke+"</b></p>\n\t\t\t\t\t\t\t\tPress <b>Backspace</b> to unassign.<br />\n\t\t\t\t\t\t\t\tPress <b>Escape</b> to cancel.<br />";l.appendChild(m);t.ee(1,this)}}(f),d[1].appendChild(g),g=document.createElement("div"),g.innerHTML=""+t.xa[f.Ke+"MouseButton"],g.style.height="16px",g.style.marginBottom="2px",g.style.padding="0 2px",g.style.color=
"#000000",g.style.backgroundColor="#e0e0e0",g.style.fontWeight="bold",g.name=f.Ke,g.onmouseenter=function(){t.ua.R.innerHTML="";this.style.backgroundColor="#ffffff";a()},g.onmouseleave=function(){this.style.backgroundColor="#e0e0e0"},g.onclick=function(k){return function(){var l=t.Jk=document.createElement("div");l.style.position="absolute";l.style.width=t.canvas.width+"px";l.style.height=t.canvas.height+"px";l.style.left=0;l.style.top=0;l.style.zIndex=3;l.style.userSelect="none";l.style.display=
"flex";l.style.alignItems="center";l.style.justifyContent="center";l.style.backgroundColor="#000000c0";t.me.appendChild(l);var m=document.createElement("div");m.style.textAlign="center";m.style.fontSize="7pt";m.style.lineHeight="1.5em";m.innerHTML='Click a mouse button for:<br />\n\t\t\t\t\t\t\t\t<p style="font-size: 9pt"><b>'+k.Ke+"</b></p>\n\t\t\t\t\t\t\t\tPress <b>Backspace</b> to unassign.<br />\n\t\t\t\t\t\t\t\tPress <b>Escape</b> to cancel.<br />";l.appendChild(m);t.ee(2,this)}}(f),d[2].appendChild(g);
c.insertAdjacentHTML("beforeend","<br />");c=293;d=0;f=document.createElement("button");f.style.zIndex=2;f.style.width="76px";f.style.height="34px";f.style.position="absolute";f.Yb=250;f.Xb=c;c+=80;f.If=d;d+=6;t.b.Zc.push(f);f.style.border="none";f.style.background='url("'+t.i.P.get("MenuButtonCancel").data.src+'")';f.style.backgroundPosition="0px 0px";f.style.cursor="pointer";f.onclick=function(){this.style.backgroundPosition="0px -36px";delete t.ua.R;delete t.fj;delete t.ii;for(var k in t.va)t.va[k]=
t.Lk[k];for(var l in t.xa)t.xa[l]=t.Kk[l];delete t.Lk;delete t.Kk;t.Mg();t.mj();t.Audio.Bc(t.va.musicEnabled);t.b.$g()};f.onmousedown=function(k){k.preventDefault();this.style.backgroundPosition="0px -72px";this.qb=2;b()};f.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.qb=1;this.style.left=this.Xb+"px";this.style.top=this.Yb+"px";a()};f.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.qb=0};t.ua.appendChild(f);f=document.createElement("button");f.style.zIndex=
2;f.style.width="76px";f.style.height="34px";f.style.position="absolute";f.Yb=250;f.Xb=c;c+=80;f.If=d;d+=6;t.b.Zc.push(f);f.style.border="none";f.style.background='url("'+t.i.P.get("MenuButtonOK").data.src+'")';f.style.backgroundPosition="0px 0px";f.style.cursor="pointer";f.onclick=function(){this.style.backgroundPosition="0px -36px";delete t.ua.R;delete t.fj;delete t.ii;for(var k in t.va)window.localStorage.setItem(k,t.va[k]);for(var l in t.xa)window.localStorage.setItem(l,t.xa[l]);t.Mg();t.b.$g()};
f.onmousedown=function(k){k.preventDefault();this.style.backgroundPosition="0px -72px";this.qb=2;b()};f.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.qb=1;this.style.left=this.Xb+"px";this.style.top=this.Yb+"px";a()};f.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.qb=0};t.ua.appendChild(f);c=q(t.b.Zc);for(d=c.next();!d.done;d=c.next())d=d.value,d.style.left=d.Xb+"px",d.style.top=d.Yb+"px"};
t.b.ym=function(){t.b.Rh();var a=document.createElement("div");a.style.height="100%";a.style.fontSize="6pt";a.style.lineHeight="1.5em";a.style.overflowY="scroll";a.style.padding="0";a.style.background="#505050";a.style.userSelect="auto";t.ua.appendChild(a);var b=document.createElement("div");b.style.padding="5px 102px 5px 20px";a.appendChild(b);b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">How to Play</h2>\n\t\t\t\u2022 Use <b>W,A,S,D</b> and <b>Space</b> to move and jump.<br />\n\t\t\t\u2022 Use the <b>Mouse</b> to aim and shoot.<br />\n\t\t\t<br />\n\t\t');
a=document.createElement("img");a.src=t.i.P.get("HUDItemCarbine").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">E</span> to equip the <b>Carbine</b>.<br />\n\t\t\tIt\'s a short-barreled assault rifle with <em>lots of ammo</em> and a <em>high rate of fire</em>.<br />\n\t\t\tBullets will juggle-strike all the targets in your line-of-fire!<br />\n\t\t\t\u2022 Hold the <b>Right Mouse Button</b> to improve accuracy.<br />\n\t\t\t\u2022 Press <b>R</b> to reload.<br />\n\t\t\t<br />\n\t\t');
a=document.createElement("img");a.src=t.i.P.get("HUDItemShotgun").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">C</span> to equip the <b>Shotgun</b>.<br />\n\t\t\tIt\'s a pump-action 12-gauge with great <em>multi-damage</em> stopping power.<br />\n\t\t\tPellets will continually dig through enemies until their full damage has been delivered!<br />\n\t\t\t\u2022 Press the <b>Right Mouse Button</b> to cycle it.<br />\n\t\t\tYou must cycle the shotgun before each shot.<br />\n\t\t\t<br />\n\t\t');
a=document.createElement("img");a.src=t.i.P.get("HUDItemRevolver").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend","\n\t\t\t<br />\n\t\t\t\u2022 Press <span style=\"color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;\">Q</span> to equip the <b>Revolver</b>.<br />\n\t\t\tIt's a six-shot double-action with great <em>accuracy</em> and <em>reach</em>.<br />\n\t\t\tBullets will go through walls, if not too thick!<br />\n\t\t\t\u2022 Hold the <b>Right Mouse Button</b> to track enemies you've glimpsed.<br />\n\t\t\t\u2022 Press <b>R</b> to reload.<br />\n\t\t\t<br />\n\t\t");
a=document.createElement("img");a.src=t.i.P.get("HUDItemMasher").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">F</span> to equip the <b>Masher</b>.<br />\n\t\t\t\u2022 Or, strike instantly using the <b>Middle Mouse Button</b>.<br />\n\t\t\tAs useful in self-defense as it is in meal preparation.<br />\n\t\t\t<br />\n\t\t');a=document.createElement("img");a.src=
t.i.P.get("HUDItemGrenade").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">G</span> to equip a <b>Grenade</b>.<br />\n\t\t\t\u2022 Or, throw instantly using the <b>Side Mouse Button</b> (if you\'ve got one).<br />\n\t\t\tBoom.<br />\n\t\t');b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Contact</h2>\n\t\t\t<p>\n\t\t\tThis game is a preview of a work in progress.<br />\n\t\t\tPlease email me about any technical problems so I can fix them!<br />\n\t\t\tchad.chisholm@protonmail.com<br />\n\t\t\t</p>\n\t\t');
b=373;a=0;var c=document.createElement("button");c.style.zIndex=2;c.style.width="76px";c.style.height="34px";c.style.position="absolute";c.Yb=250;c.Xb=b;b+=80;c.If=a;a+=6;t.b.Zc.push(c);c.style.border="none";c.style.background='url("'+t.i.P.get("MenuButtonOK").data.src+'")';c.style.backgroundPosition="0px 0px";c.style.cursor="pointer";c.onclick=function(){this.style.backgroundPosition="0px -36px";t.b.$g()};c.onmousedown=function(d){d.preventDefault();this.style.backgroundPosition="0px -72px";this.qb=
2;t.i.W.get("woodSnap02").play()};c.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.qb=1;this.style.left=this.Xb+"px";this.style.top=this.Yb+"px";t.i.W.get("hit02").play({gain:.5})};c.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.qb=0};t.ua.appendChild(c);b=q(t.b.Zc);for(a=b.next();!a.done;a=b.next())a=a.value,a.style.left=a.Xb+"px",a.style.top=a.Yb+"px"};
t.b.wm=function(){t.b.Rh();var a=document.createElement("div");a.style.height="100%";a.style.fontSize="6pt";a.style.lineHeight="1.5em";a.style.overflowY="scroll";a.style.padding="0";a.style.background="#505050";a.style.userSelect="auto";t.ua.appendChild(a);var b=document.createElement("div");b.style.padding="5px 102px 5px 20px";a.appendChild(b);b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Support the Developer</h2>\n\t\t\t<p>\n\t\t\t<b>ShootPotato.com</b> is a <em>FREE</em> game for everyone. If you like it, please consider making a donation to represent a purchase. Donations are my only source of income, and I can only continue development with support from players like you.\n\t\t\t<br />\n\t\t\t</p><p>\n\t\t');
b.insertAdjacentHTML("beforeend",'\n\t\t\t<form action="https://www.paypal.com/donate" method="post" target="_blank">\n\t\t\t<input type="hidden" name="hosted_button_id" value="8X4ZJS35NSYYJ" />\n\t\t\t<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />\n\t\t\t<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />\n\t\t\t</form>\n\t\t');
b.insertAdjacentHTML("beforeend","\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t<b>Chad Chisholm</b><br />\n\t\t\tchad.chisholm@protonmail.com<br />\n\t\t\t</p>\n\t\t");b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Coming Soon...</h2>\n\t\t\t<p>\n\t\t\t\u2022 gameplay objective<br />\n\t\t\t\u2022 dynamic combat music<br />\n\t\t\t\u2022 enemy NPC hit and attack animations<br />\n\t\t\t\u2022 enemy NPC tactics and AI<br />\n\t\t\t\u2022 architectural art assets, textures, variation<br />\n\t\t\t\u2022 ambient sound effects<br />\n\t\t\t\u2022 breakable glass<br />\n\t\t\t\u2022 more/better character and action sounds<br />\n\t\t\t\u2022 more...<br />\n\t\t\t</p>\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Past Updates</h2>\n\t\t\t<p>\n\t\t\t<b>July 13th, 2023:</b><br />\n\t\t\t\u2022 real-time 3D audio effects engine<br />\n\t\t\t</p><p>\n\t\t\t<b>July 4th, 2023:</b><br />\n\t\t\t\u2022 HP and collectible food to restore HP<br />\n\t\t\t\u2022 enemies killed counter<br />\n\t\t\t\u2022 player death and high score<br />\n\t\t\t\u2022 various enemy death animations<br />\n\t\t\t\u2022 in-game day and night cycle<br />\n\t\t\t</p><p>\n\t\t\t<b>June 15th, 2023:</b><br />\n\t\t\t\u2022 melee weapon<br />\n\t\t\t\u2022 grenades!<br />\n\t\t\t\u2022 collectible weapons, with randomized order<br />\n\t\t\t\u2022 organized loot spawning<br />\n\t\t\t\u2022 configurable keyboard and mouse controls<br />\n\t\t\t\u2022 enemy NPC attacks<br />\n\t\t\t\u2022 weapon reload sounds<br />\n\t\t\t</p><p>\n\t\t\t<b>May 28th, 2023:</b><br />\n\t\t\t\u2022 app loading console<br />\n\t\t\t\u2022 window resizing<br />\n\t\t\t\u2022 main menu<br />\n\t\t\t\u2022 main menu music<br />\n\t\t\t\u2022 options menu<br />\n\t\t\t\u2022 readme page with pictures<br />\n\t\t\t\u2022 donation via PayPal<br />\n\t\t\t\u2022 large rooms with pillars<br />\n\t\t\t\u2022 improved color palette<br />\n\t\t\t</p><p>\n\t\t\t<b>May 7th, 2023:</b><br />\n\t\t\t\u2022 maze world generator<br />\n\t\t\t\u2022 global illumination at 60 FPS<br />\n\t\t\t\u2022 room lights switching on<br />\n\t\t\t\u2022 improved performance of collision scans<br />\n\t\t\t\u2022 gibs colliding with props<br />\n\t\t\t\u2022 HUD cards for ammo collection<br />\n\t\t\t</p><p>\n\t\t\t<b>Dec 18th, 2022:</b><br />\n\t\t\t\u2022 endless world generation<br />\n\t\t\t\u2022 user settings panel<br />\n\t\t\t\u2022 weapons reloading<br />\n\t\t\t\u2022 ammo collectibles<br />\n\t\t\t</p><p>\n\t\t\t<b>Oct 30th, 2022:</b><br />\n\t\t\t\u2022 NPC navigation graph<br />\n\t\t\t</p><p>\n\t\t\t<b>Oct 11th, 2022:</b><br />\n\t\t\t\u2022 website launched<br />\n\t\t\t</p><p>\n\t\t');
a=373;b=0;var c=document.createElement("button");c.style.zIndex=2;c.style.width="76px";c.style.height="34px";c.style.position="absolute";c.Yb=250;c.Xb=a;a+=80;c.If=b;b+=6;t.b.Zc.push(c);c.style.border="none";c.style.background='url("'+t.i.P.get("MenuButtonOK").data.src+'")';c.style.backgroundPosition="0px 0px";c.style.cursor="pointer";c.onclick=function(){this.style.backgroundPosition="0px -36px";t.b.$g()};c.onmousedown=function(d){d.preventDefault();this.style.backgroundPosition="0px -72px";this.qb=
2;t.i.W.get("woodSnap02").play()};c.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.qb=1;this.style.left=this.Xb+"px";this.style.top=this.Yb+"px";t.i.W.get("hit02").play({gain:.5})};c.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.qb=0};t.ua.appendChild(c);a=q(t.b.Zc);for(b=a.next();!b.done;b=a.next())b=b.value,b.style.left=b.Xb+"px",b.style.top=b.Yb+"px"};
t.b.vm=function(){t.b.Rh();var a=document.createElement("div");a.style.width="100%";a.style.height="100%";a.style.display="flex";a.style.flexFlow="column nowrap";a.style.justifyContent="center";a.style.alignItems="center";a.style.fontWeight="bold";a.style.textShadow="-1px 2px black";t.ua.appendChild(a);a.insertAdjacentHTML("beforeend",'\n\t\t\t<div style="font-size:24px;">\n\t\t\tYOU DIED\n\t\t\t</div><br />\n\t\t\t<div style="font-size:18px; color:#FFFF00">\n\t\t\t'+t.b.kills.toLocaleString("en-US")+
'\n\t\t\t</div><br />\n\t\t\t<div style="font-size:14px; ">\n\t\t\t'+t.b.killsBestName+'<br />\n\t\t\t</div>\n\t\t\t<div style="font-size:14px; ">\n\t\t\t'+t.b.killsBest.toLocaleString("en-US")+"<br />\n\t\t\t</div><br />\n\t\t");var b=document.createElement("button");b.style.zIndex=2;b.style.width="76px";b.style.height="34px";b.style.border="none";b.style.background='url("'+t.i.P.get("MenuButtonOK").data.src+'")';b.style.backgroundPosition="0px 0px";b.style.cursor="pointer";b.onclick=function(){this.style.backgroundPosition=
"0px -36px";N.xk(!0)};b.onmousedown=function(c){c.preventDefault();this.style.backgroundPosition="0px -72px";this.qb=2;t.i.W.get("woodSnap02").play()};b.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.qb=1;this.style.left=this.Xb+"px";this.style.top=this.Yb+"px";t.i.W.get("hit02").play({gain:.5})};b.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.qb=0};a.appendChild(b)};
t.b.zm=function(){var a=document.createElement("button");a.style.zIndex=2;a.style.position="absolute";a.style.width="64px";a.style.height="64px";a.style.left=(t.canvas.width-64>>1)+"px";a.style.top=(t.canvas.height-64>>1)+"px";a.style.border="none";a.style.background='url("WebsitePlay_230507_01.png")';a.style.backgroundSize="64px 64px";a.style.backgroundPosition="center";a.style.backgroundRepeat="no-repeat";a.style.opacity="75%";a.style.cursor="pointer";a.onclick=function(){t.i.W.get("woodSnap02").play();
t.Nn=!0;t.ee(0);t.b.al();t.b.$g();t.Audio.Bc(t.va.musicEnabled);var b=t.i.W.get("MusicFactoryBeat01");t.Audio.oe&&t.Audio.oe.stop();var c=t.Audio.R.createGain();c.gain.value=1;c.connect(t.Audio.zb);var d=new AudioBufferSourceNode(t.Audio.R);d.connect(c);d.loop=!0;d.buffer=b.buffer;d.start();t.Audio.oe=d};a.onmouseenter=function(){this.style.opacity="100%"};a.onmouseleave=function(){this.style.opacity="75%"};t.ua.appendChild(a)};
document.addEventListener("pointerlockchange",function(){document.pointerLockElement?(t.me.removeChild(t.$m),t.me.removeChild(t.ua),t.ua=null,t.Audio.oe.stop(),me.clear(),N.clear(),t.paused=!1,t.b.nf.Mf.disconnect(t.b.nf.cj),t.b.nf.Mf.connect(t.Audio.zb)):(t.oj=1,t.b.Pn=performance.now(),t.b.nf.Mf.disconnect(t.Audio.zb),t.b.nf.Mf.connect(t.b.nf.cj))});t.b.pause=function(){t.oj=0;t.paused=!0;t.b.al();t.j!=t.b.Ng+2?t.b.$g():t.b.vm()};
(function(){var a,b,c,d,f,h;return Ha(new Ea(new xa(function(g){if(1==g.R){t.pi=new wk;t.gn();a=t.ua=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor="black";a.style.overflow="hidden";a.style.fontFamily="monospace";a.style.fontSize="8pt";a.style.color="white";t.me.appendChild(a);t.ua.kk=new Intl.NumberFormat("en-US",{maximumFractionDigits:2});t.ua.insertAdjacentHTML("beforeend",
"\n\t----------------------------------------------------------------------------<br />\n\tThis game is a preview of a work in progress.<br />\n\tPlease email me about any technical problems so I can fix them!<br />\n\tchad.chisholm@protonmail.com<br />\n\t----------------------------------------------------------------------------<br />\n\t<br />\n\t");t.ua.insertAdjacentHTML("beforeend","ShootPotato v0.020<br />");t.ua.insertAdjacentHTML("beforeend","July 13, 2023<br />");t.ua.insertAdjacentHTML("beforeend",
"GL Vendor: "+u.getParameter(u.VENDOR)+"<br />");t.ua.insertAdjacentHTML("beforeend","GL Version: "+u.getParameter(u.VERSION)+"<br />");t.ua.insertAdjacentHTML("beforeend","GL Renderer: "+u.getParameter(u.RENDERER)+"<br />");t.ua.insertAdjacentHTML("beforeend","Fetching resources... ");c=b=performance.now();var k=fetch("resources_230704_01.gob");g.R=2;return{value:k}}if(3!=g.R)return d=g.Nb,c=performance.now(),t.ua.insertAdjacentHTML("beforeend","done ("+t.ua.kk.format(c-b)+" ms).<br />"),b=c,t.ua.insertAdjacentHTML("beforeend",
"Unpacking resources... "),f=Uint8Array,k=d.arrayBuffer(),g.R=3,{value:k};h=new f(g.Nb);h.position=0;t.i.load(h);c=performance.now();t.ua.insertAdjacentHTML("beforeend","done ("+t.ua.kk.format(c-b)+" ms).<br />");g.R=0})))})();
