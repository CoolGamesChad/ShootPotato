var f;function ca(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function p(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:ca(a)}}function ea(a){if(!(a instanceof Array)){a=p(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
var ia="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ja="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function ka(a,b){if(b){var c=ia;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ja(c,a,{configurable:!0,writable:!0,value:b})}}
ka("Promise",function(a){function b(g){this.Aa=0;this.Fb=void 0;this.U=[];var k=this.jb();try{g(k.resolve,k.reject)}catch(l){k.reject(l)}}function c(){this.U=null}function d(g){return g instanceof b?g:new b(function(k){k(g)})}if(a)return a;c.prototype.Aa=function(g){if(null==this.U){this.U=[];var k=this;this.jb(function(){k.Fb()})}this.U.push(g)};var e=ia.setTimeout;c.prototype.jb=function(g){e(g,0)};c.prototype.Fb=function(){for(;this.U&&this.U.length;){var g=this.U;this.U=[];for(var k=0;k<g.length;++k){var l=
g[k];g[k]=null;try{l()}catch(m){this.zb(m)}}}this.U=null};c.prototype.zb=function(g){this.jb(function(){throw g;})};b.prototype.jb=function(){function g(m){return function(n){l||(l=!0,m.call(k,n))}}var k=this,l=!1;return{resolve:g(this.Nf),reject:g(this.zb)}};b.prototype.Nf=function(g){if(g===this)this.zb(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.Fg(g);else{a:switch(typeof g){case "object":var k=null!=g;break a;case "function":k=!0;break a;default:k=!1}k?this.Mf(g):
this.Fc(g)}};b.prototype.Mf=function(g){var k=void 0;try{k=g.then}catch(l){this.zb(l);return}"function"==typeof k?this.Hg(k,g):this.Fc(g)};b.prototype.zb=function(g){this.hd(2,g)};b.prototype.Fc=function(g){this.hd(1,g)};b.prototype.hd=function(g,k){if(0!=this.Aa)throw Error("Cannot settle("+g+", "+k+"): Promise already settled in state"+this.Aa);this.Aa=g;this.Fb=k;this.We()};b.prototype.We=function(){if(null!=this.U){for(var g=0;g<this.U.length;++g)h.Aa(this.U[g]);this.U=null}};var h=new c;b.prototype.Fg=
function(g){var k=this.jb();g.Tf(k.resolve,k.reject)};b.prototype.Hg=function(g,k){var l=this.jb();try{g.call(k,l.resolve,l.reject)}catch(m){l.reject(m)}};b.prototype.then=function(g,k){function l(q,t){return"function"==typeof q?function(z){try{m(q(z))}catch(A){n(A)}}:t}var m,n,r=new b(function(q,t){m=q;n=t});this.Tf(l(g,m),l(k,n));return r};b.prototype.catch=function(g){return this.then(void 0,g)};b.prototype.Tf=function(g,k){function l(){switch(m.Aa){case 1:g(m.Fb);break;case 2:k(m.Fb);break;default:throw Error("Unexpected state: "+
m.Aa);}}var m=this;null==this.U?h.Aa(l):this.U.push(l)};b.resolve=d;b.reject=function(g){return new b(function(k,l){l(g)})};b.race=function(g){return new b(function(k,l){for(var m=p(g),n=m.next();!n.done;n=m.next())d(n.value).Tf(k,l)})};b.all=function(g){var k=p(g),l=k.next();return l.done?d([]):new b(function(m,n){function r(z){return function(A){q[z]=A;t--;0==t&&m(q)}}var q=[],t=0;do q.push(void 0),t++,d(l.value).Tf(r(q.length-1),n),l=k.next();while(!l.done)})};return b});
function la(){la=function(){};ia.Symbol||(ia.Symbol=ma)}function na(a,b){this.U=a;ja(this,"description",{configurable:!0,writable:!0,value:b})}na.prototype.toString=function(){return this.U};var ma=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new na("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function oa(){la();var a=ia.Symbol.iterator;a||(a=ia.Symbol.iterator=ia.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ja(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return qa(ca(this))}});oa=function(){}}function qa(a){oa();a={next:a};a[ia.Symbol.iterator]=function(){return this};return a}function sa(){this.zb=!1;this.Aa=null;this.Fb=void 0;this.U=1;this.hd=0;this.jb=null}function ta(a){if(a.zb)throw new TypeError("Generator is already running");a.zb=!0}
sa.prototype.Fc=function(a){this.Fb=a};function wa(a,b){a.jb={Vi:b,$i:!0};a.U=a.hd}sa.prototype.return=function(a){this.jb={return:a};this.U=this.hd};function za(a){this.U=new sa;this.Aa=a}function Ba(a,b){ta(a.U);var c=a.U.Aa;if(c)return Ca(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.U.return);a.U.return(b);return Da(a)}
function Ca(a,b,c,d){try{var e=b.call(a.U.Aa,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.U.zb=!1,e;var h=e.value}catch(g){return a.U.Aa=null,wa(a.U,g),Da(a)}a.U.Aa=null;d.call(a.U,h);return Da(a)}
function Da(a){for(;a.U.U;)try{var b=a.Aa(a.U);if(b)return a.U.zb=!1,{value:b.value,done:!1}}catch(c){a.U.Fb=void 0,wa(a.U,c)}a.U.zb=!1;if(a.U.jb){b=a.U.jb;a.U.jb=null;if(b.$i)throw b.Vi;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function Ea(a){this.next=function(b){ta(a.U);a.U.Aa?b=Ca(a,a.U.Aa.next,b,a.U.Fc):(a.U.Fc(b),b=Da(a));return b};this.throw=function(b){ta(a.U);a.U.Aa?b=Ca(a,a.U.Aa["throw"],b,a.U.Fc):(wa(a.U,b),b=Da(a));return b};this.return=function(b){return Ba(a,b)};oa();this[Symbol.iterator]=function(){return this}}
function Fa(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function h(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(h,e)}h(a.next())})}ka("Math.sign",function(a){return a?a:function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1}});
function Ga(a,b){oa();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}ka("Array.prototype.keys",function(a){return a?a:function(){return Ga(this,function(b){return b})}});var Ja=document.body;Ja.style.position="relative";Ja.style.left=(window.innerWidth-960>>1)+"px";Ja.style.width="960px";Ja.style.margin="0px";
Ja.style.marginBottom="20px";Ja.style.padding="0px";Ja.style.display="flex";Ja.style.flexFlow="row wrap";Ja.style.alignItems="flex-start";Ja.style.alignContent="flex-start";Ja.style.backgroundColor="#404040";Ja.style.fontFamily="sans-serif";Ja.style.fontSize="12pt";Ja.style.lineHeight="1.4em";Ja.style.color="white";window.onresize=function(){document.body.style.left=(window.innerWidth-960>>1)+"px"};var Ka=document.createElement("div");Ka.innerHTML="The website where you shoot potatoes.";
Ka.style.fontSize="18pt";Ka.style.fontWeight="bold";Ka.style.flex="1 0 auto";Ka.style.textAlign="center";Ka.style.margin="0";document.body.appendChild(Ka);var La=document.createElement("div");La.id="paneContainer";La.style.width="960px";La.style.height="592px";La.style.margin="40px 0";La.style.outline="10px solid black";La.style.backgroundColor="black";document.body.appendChild(La);var Ma=document.createElement("div");Ma.id="divCPanel";document.body.appendChild(Ma);var Na=document.getElementById("divCPanel");
Na.style.width="960px";Na.innerHTML='\n\t\t<b>[Q,E,C]</b> - select guns.<br />\n\t\t<b>Mouse</b> - aim and shoot.<br />\n\t\t<b>Right Mouse Button</b> - gun special feature.<br />\n\t\t<b>W,A,S,D</b> and <b>Space</b> - move and jump.<br />\n\t\t<b>Esc</b> - pause the game.<br />\n\t\t\n\t\t<h2 style="color:#ffff80">Requirements:</h2>\n\t\t<ul><li>A desktop computer with a graphics card.</li>\n\t\t<li>Google Chrome.</li></ul>\n\t\tThe graphics are currently too complex for laptops and office computers, but that may change in the future when I implement user graphics settings.<br />\n\t\t<br />\n\t\tChrome is only required because other browsers, such as Firefox, have not yet implemented the "unadjustedMovement" option of the Pointer Lock API, but hopefully they will catch up soon.<br />\n\t\t\n\t\t<h2 style="color:#ffff80">About the game:</h2>\n\t\tShootPotato is currently in development.\n\t\tI am working full-time to implement the remaining features, assets, and fixes to complete it.\n\t\tEventually, I will integrate advertisements on this page to make money, so everyone can always play the game for free, at any time, from any computer, without a login.<br />\n\t\t<br />\n\t\tIn the meantime, have fun with what I\'ve created so far!<br />\n\t\t<br />\n\t\tPlease let me know of any technical problems\u2014your feedback is essential to identifying those problems.<br />\n\t\t<br />\n\t\tSend me an email:<br />\n\t\tchad.chisholm@protonmail.com\n\t';function Oa(a,b){for(var c=0,d=a.length,e=c+(d-c>>1);c<d;){var h=a.cmp.call(null,b,a[e]);if(0>h)d=e,e=c+(d-c>>1);else if(0<h)c=e+1,e=c+(d-c>>1);else break}return e}function Pa(a,b){var c=Oa(a,b);return a[c]&&0==a.cmp(a[c],b)?a[c]:null}function Qa(a,b){var c=Oa(a,b);if(a[c]&&0==a.cmp(a[c],b))return a[c];a.splice(c,0,b);return b};for(var u={},x,Ra=new Uint8Array(256),Sa=0;256>Sa;Sa++)Ra[Sa]=Ra[Sa>>>1]+(Sa&1);function Ta(a,b,c){return a<b?b:a>c?c:a}function Ua(a,b,c){return a*(1-c)+b*c}function Va(a,b){return a==b?a:0==a?b:0==b?a:0==(a&1)?0==(b&1)?Va(a>>1,b>>1)<<1:Va(a>>1,b):0==(b&1)?Va(a,b>>1):a>=b?Va(a-b>>1,b):Va(b-a>>1,a)}function Wa(a,b,c){var d=b*b-4*a*c;if(0<d){c={};d=Math.sqrt(d);a=2*a;var e=(-b+d)/a;a=(-b-d)/a;a>e?(c.wa=e,c.yc=a):(c.wa=a,c.yc=e);return c}return 0==d?(c={},c.wa=-b/(2*a),c.yc=c.wa,c):null}
function Xa(a){this.cmp=a;this.elements=[]}f=Xa.prototype;f.get=function(a){var b=Ya(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements[b]};f.contains=function(a){var b=Ya(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?-1:b};f.add=function(a){return this.push(a)};f.push=function(a){var b=Ya(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return!1;this.elements.splice(b,0,a);return!0};
f.replace=function(a){var b=Ya(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b]=a,!0;this.elements.splice(b,0,a);return!0};f.Da=function(a){var b=Ya(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b];this.elements.splice(b,0,a);return a};f.remove=function(a){var b=Ya(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements.splice(b,1)[0]};
function Ya(a,b){for(var c=0,d=a.elements.length,e=Math.floor(c/2+d/2);c<d;){var h=a.cmp.call(a,b,a.elements[e]);if(0>h)d=e,e=Math.floor(c/2+d/2);else if(0<h)c=e+1,e=Math.floor(c/2+d/2);else break}return e}f.clear=function(){this.elements.length=0};f.hg=function(){return 0==this.elements.length};function Za(){this.start=new $a(null);return this}f=Za.prototype;f.hg=function(){return!this.first().item};f.size=function(){for(var a=0,b=this.first();b.item;b=b.next)a++;return a};f.first=function(){return this.start.next};
f.clear=function(){ab(this.start);return this};function bb(a,b){cb(b,a.start);return a}f.add=function(a){return bb(this,new $a(a))};function db(a){for(var b=eb,c=fb,d=b.first();d.item;d=d.next)if(0>c.call(null,a.item,d.item)){cb(a,d);return}cb(a,b.start)}f.get=function(a){for(var b=this.first();b.item;b=b.next)if(b.item==a)return b;return null};f.remove=function(a){a=this.get(a);if(null==a)return null;ab(a);return this};
f.sort=function(a){for(var b,c=this.first();c.item;c=b){b=c.next;var d=c;for(var e=d.cb;e.item&&!(0<=a(d.item,e.item));)e=e.cb;d=e;d!=c.cb&&(ab(c),c.cb=d,c.next=d.next,c.cb.next=c,c.next.cb=c)}};function $a(a){this.item=a;this.cb=this;this.next=this;return this}function cb(a,b){a.next=b;a.cb=b.cb;a.next.cb=a;a.cb.next=a}function ab(a){a.cb.next=a.next;a.next.cb=a.cb;a.next=a.cb=a};function gb(){if(null===a||void 0===a)var a=(new Date).getTime()+643709624|0;this.r=this.kj=a}gb.prototype.next=function(){this.r^=this.r<<13;this.r^=this.r>>17;this.r^=this.r<<5;this.r>>>=0};function hb(){var a=ib;a.next();return a.r}function y(){var a=ib;a.next();return a.r/4294967295}var ib=new gb;console.log("seed",ib.kj);function jb(a){return Math.floor(y()*a)}function kb(a){return a[jb(a.length)]}function lb(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return kb(b)};function mb(a,b,c){for(var d=0,e=a.length,h=d+(e-d>>1);d<e;){var g=c.call(null,b,a[h]);if(0>g)e=h,h=d+(e-d>>1);else if(0<g)d=h+1,h=d+(e-d>>1);else break}return h}function nb(a){for(var b=0;b<a.length;b++){var c=jb(a.length-b),d=a[b];a[b]=a[c];a[c]=d}}function pb(a,b){var c=a.splice(0);c=p(c);for(var d=c.next();!d.done;d=c.next())d=d.value,a.splice(mb(a,d,b),0,d)}function fb(a,b){return isNaN(a)?a.index<b.index?-1:a.index>b.index?1:0:a<b.index?-1:a>b.index?1:0}
function qb(a,b){return"string"==typeof a?a<b.name?-1:a>b.name?1:0:a.name<b.name?-1:a.name>b.name?1:0};function rb(a){for(var b=53,c=0;c<a.length;c++){var d=a[c];a[c]=a[c]-193*b-53&255;b=d}}function sb(a){var b=tb(a);a=a.slice(a.position,a.position+=b);return String.fromCharCode.apply(null,a)}function ub(a,b){vb(a,b.length);for(var c=0;c<b.length;c++)a[a.position++]=b.charCodeAt(c)}function wb(a){var b=xb(a);a=a.slice(a.position,a.position+=b);return String.fromCharCode.apply(null,a)}function yb(a,b){zb(a,b.length);for(var c=0;c<b.length;c++)a[a.position++]=b.charCodeAt(c)}
function tb(a){return a[a.position++]}function vb(a,b){a[a.position++]=b&255}function Fb(a){var b=0|a[a.position++]<<0;return b|=a[a.position++]<<8}function Gb(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}function Hb(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;return(b>>>0)-32768}function Ib(a,b){b+=32768;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}function xb(a){var b=a[a.position++]<<0;b+=a[a.position++]<<8;b+=a[a.position++]<<16;return b+=a[a.position++]<<24}
function zb(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}function Jb(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;b|=a[a.position++]<<16;b|=a[a.position++]<<24;return(b>>>0)-2147483648}function Kb(a,b){b+=2147483648;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}
function Lb(a){var b=new Uint8Array(4);b[0]=a[a.position++];b[1]=a[a.position++];b[2]=a[a.position++];b[3]=a[a.position++];return(new Float32Array(b.buffer))[0]}function Mb(a,b){var c=new Float32Array(1);c[0]=b;c=new Uint8Array(c.buffer);a[a.position++]=c[0];a[a.position++]=c[1];a[a.position++]=c[2];a[a.position++]=c[3]};function Nb(){this.size=0;this.root=new Ob;this.root.update=function(){};this.Hb=null}Nb.prototype.hg=function(){return 0==this.size};Nb.prototype.pop=function(){if(this.hg())return null;var a=this.root.rd.Ce(),b=a.value;this.remove(a);return b};
Nb.prototype.add=function(a,b){this.Hb=new Pb;if(0==this.size)this.root.rd=this.Hb,this.Hb.parent=this.root;else{var c=this.root;var d=this.size;d=Ra[d>>>0&255]+Ra[d>>>8&255]+Ra[d>>>16&255]+Ra[d>>>24];for(var e=0;e<d;e++)c=c.rd;d=new Ob;d.parent=c.parent;c.parent.rd=d;d.Ng=c;c.parent=d;d.rd=this.Hb;this.Hb.parent=d}c=this.Hb;c.value=a;c.key=b;c.parent.update();this.size++;return this.Hb};
Nb.prototype.remove=function(a){if(a==this.Hb)1==this.size?this.root.rd=this.Hb=null:Qb(this);else{var b=this.Hb.value,c=this.Hb.key;Qb(this);a.value=b;a.key=c;a.parent.update()}this.size--};function Qb(a){var b=a.Hb.parent,c=b.Ng;a.Hb=c.Hb();c.parent=b.parent;c.parent.rd=c;c.parent.update()}function Ob(){}Ob.prototype.Ce=function(){return this.first};Ob.prototype.Hb=function(){return this.rd.Hb()};
Ob.prototype.update=function(){this.first=this.rd.Ce().key<this.Ng.Ce().key?this.rd.Ce():this.Ng.Ce();this.parent.update()};function Pb(){}Pb.prototype.Ce=function(){return this};Pb.prototype.Hb=function(){return this};Math.Xe=2*Math.PI;function Rb(a){return a*Math.PI/180}function Sb(a){return Math.PI/2147483648*a}function Tb(a,b,c,d){return Ub(new F(a.x-c.x,a.y-c.y,a.z-c.z),b,d)}function Ub(a,b,c){return Wa(Vb(b,b),2*Vb(a,b),Vb(a,a)-c*c)}function Wb(a,b,c){.7071>a.y&&-.7071<a.y?(b.set(a.z,0,-a.x),Xb(a,b,c).oa(1),Xb(c,a,b)):(c.set(0,a.z,-a.y),Xb(c,a,b).oa(1),Xb(a,b,c))}
function Yb(a,b){var c;c||(c=new Zb);for(var d=[],e=0;;){for(var h=-1,g=null,k=Number.POSITIVE_INFINITY,l=0;l<b.length;l++)if(!(e&1<<l)){var m=b[l],n=Vb(m,a);n<k&&(h=l,g=m,k=n)}if(0<=k)break;c=c.hh(a,g,k);d.push(g);e|=1<<h;if(!c)break}a.round()}function Zb(){}Zb.prototype.hh=function(a,b,c){a.x-=b.x*c;a.y-=b.y*c;a.z-=b.z*c;return new $b(b)};function $b(a){this.n=a}$b.prototype.hh=function(a,b){b=Xb(this.n,b,new F(0,0,0));if(0==b.oa(1))return null;var c=Vb(a,b);a.x=b.x*c;a.y=b.y*c;a.z=b.z*c;return new ec(b)};
function ec(a){this.n=a}ec.prototype.hh=function(a,b,c){b=c/Vb(this.n,b);if(!isFinite(b))return null;a.x-=this.n.x*b;a.y-=this.n.y*b;a.z-=this.n.z*b;return null};function fc(a,b,c){null==a?(this.l=b*c,this.C=b,this.ratio=c):null==b?(this.l=a,this.C=a/c,this.ratio=c):null==c?(this.l=a,this.C=b,this.ratio=a/b):(this.l=a,this.C=b,this.ratio=c);this.y=this.x=0;a=a>b?a:b;for(this.bufferSize=8;this.bufferSize<a;this.bufferSize*=2);}
function J(a,b,c,d,e){a=Math.round(a);b=Math.round(b);c=Math.round(c);d=Math.round(d);this.c=a;this.a=b;this.o=c;this.i=d;if(!e)return this.X=c-a,this.T=d-b,this.qb=this.ha=NaN,this.length=Math.sqrt(this.X*this.X+this.T*this.T),a=this.X,b=this.T,0>a?0>b?-a<-b?(this.type=9,this.ha=-a/b,this.qb=-b/this.length,a=Va(-a,-b),this.X/=a,this.T/=a):-a>-b?(this.type=7,this.ha=b/a,this.qb=-a/this.length,a=Va(-a,-b),this.X/=a,this.T/=a):(this.type=8,this.ha=this.T=this.X=-1,this.qb=Math.SQRT1_2):0<b?-a<b?(this.type=
3,this.ha=-a/b,this.qb=b/this.length,a=Va(-a,b),this.X/=a,this.T/=a):-a>b?(this.type=5,this.ha=b/a,this.qb=-a/this.length,a=Va(-a,b),this.X/=a,this.T/=a):(this.type=4,this.X=-1,this.T=1,this.ha=-1,this.qb=Math.SQRT1_2):(this.type=6,this.X=-1):0<a?0>b?a<-b?(this.type=11,this.ha=-a/b,this.qb=-b/this.length,a=Va(a,-b),this.X/=a,this.T/=a):a>-b?(this.type=13,this.ha=b/a,this.qb=a/this.length,a=Va(a,-b),this.X/=a,this.T/=a):(this.type=12,this.X=1,this.ha=this.T=-1,this.qb=Math.SQRT1_2):0<b?a<b?(this.type=
1,this.ha=-a/b,this.qb=b/this.length,a=Va(a,b),this.X/=a,this.T/=a):a>b?(this.type=15,this.ha=b/a,this.qb=a/this.length,a=Va(a,b),this.X/=a,this.T/=a):(this.type=0,this.T=this.X=1,this.ha=-1,this.qb=Math.SQRT1_2):(this.type=14,this.X=1):a<b?(this.type=2,this.T=1):a>b&&(this.type=10,this.T=-1),this}function gc(a,b){return a.c<b.c?-1:a.c>b.c?1:a.a<b.a?-1:a.a>b.a?1:a.o<b.o?-1:a.o>b.o?1:a.i<b.i?-1:a.i>b.i?1:0}f=J.prototype;
f.replace=function(a){this.remove=!0;if(this.$c){a=p(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b.$c){var c=p(this.$c);for(d=c.next();!d.done;d=c.next())d=d.value,0<=b.$c.indexOf(d)||(b.$c.push(d),d.push(b))}else{b.$c=this.$c.slice();c=p(b.$c);for(var d=c.next();!d.done;d=c.next())d.value.push(b)}a=p(this.$c);for(d=a.next();!d.done;d=a.next())b=d.value,b.splice(b.indexOf(this),1);delete this.$c}};function hc(a,b){var c=a.c+b.X;b=a.a+b.T;return Math.atan2(N(a,c,b),a.getParameter(c,b))}
function ic(a,b,c){for(var d={Si:[],code:0},e=0;e<c.length;e++)d.Si.push(N(c[e],a,b)),1==jc(c[e],a,b)&&(d.code+=1<<e);return d}function kc(a){var b;var c=Number.NEGATIVE_INFINITY;var d=Number.POSITIVE_INFINITY;var e=b=null;var h=a[a.length-1];a=p(a);for(var g=a.next();!g.done;g=a.next()){g=g.value;var k=g.c-g.a;k>c?(c=k,d=g.a,b=h,e=g):k==c&&g.a<d&&(d=g.a,b=h,e=g);h=g}c=b.type&7;d=e.type;return c<d?!0:c>d?!1:b.ha<e.ha?!0:b.ha>e.ha?!1:!0}
function lc(a,b,c){var d=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,h=null,g=null;c=p(c);for(var k=c.next();!k.done;k=c.next()){k=k.value;var l=mc(k,a,b);0>l?(l=-l,l<d&&(d=l,h=k)):0<l&&l<e&&(e=l,g=k)}--d;--e;return 0==d||0==e?0:h&&g?d<e?-1:d>e||h.o<g.c?1:-1:g?1:-1}
function nc(a){var b=a.bound;if(!b){b=new oc;for(var c=p(a),d=c.next();!d.done;d=c.next()){var e=d.value;b.Da(e.o,e.i)}}b=b.f+(b.h-b.f>>1);e=c=Number.POSITIVE_INFINITY;a=p(a);for(d=a.next();!d.done;d=a.next())d=d.value,0<d.T?(d=pc(d,b),d<e&&(e=d)):0>d.T&&(d=pc(d,b),d<c&&(c=d));return new O(c+(e-c>>1),b)}
function sc(a,b){var c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;b=p(b);for(var e=b.next();!e.done;e=b.next()){var h=e.value,g=N(a,h.c,h.a),k=N(a,h.o,h.i);e=a.getParameter(h.c,h.a);h=a.getParameter(h.o,h.i);if(g<k)g/=g-k,e=e*(1-g)+h*g,e<d&&(d=e);else if(g>k)g/=g-k,e=e*(1-g)+h*g,e>c&&(c=e);else if(0>g){if(e>h)return null}else if(0<g&&e<h)return null}return!isFinite(c)||!isFinite(d)||c>=d?null:[c,d]}
function jc(a,b,c){if(void 0==a.type)return 0;switch(a.type){case 0:case 1:case 3:var d=0;a=(c-a.a)*-a.ha+a.c;b<=a&&(d+=2);b>=a&&(d+=1);return d;case 2:return d=0,b<=a.c&&(d+=2),b>=a.c&&(d+=1),d;case 4:case 5:case 7:return d=0,a=(b-a.c)*a.ha+a.a,c<=a&&(d+=2),c>=a&&(d+=1),d;case 6:return d=0,c<=a.a&&(d+=2),c>=a.a&&(d+=1),d;case 8:case 9:case 11:return d=0,a=(c-a.a)*-a.ha+a.c,b<=a&&(d+=1),b>=a&&(d+=2),d;case 10:return d=0,b<=a.c&&(d+=1),b>=a.c&&(d+=2),d;case 12:case 13:case 15:return d=0,a=(b-a.c)*
a.ha+a.a,c<=a&&(d+=1),c>=a&&(d+=2),d;case 14:return d=0,c<=a.a&&(d+=1),c>=a.a&&(d+=2),d}}
function N(a,b,c){switch(a.type){case 0:case 1:case 3:b-=a.c;c-=a.a;var d=Math.floor(c/a.T);b-=d*a.X;c-=d*a.T;return(c*-a.ha-b)*a.qb;case 2:return a.c-b;case 4:case 5:case 7:return b-=a.c,c-=a.a,d=Math.floor(b/-a.X),b+=d*a.X,c+=d*a.T,(b*a.ha-c)*a.qb;case 6:return a.a-c;case 8:case 9:case 11:return b-=a.c,c-=a.a,d=Math.floor(c/-a.T),b+=d*a.X,c+=d*a.T,(b-c*-a.ha)*a.qb;case 10:return b-a.c;case 12:case 13:case 15:return b-=a.c,c-=a.a,d=Math.floor(b/a.X),b-=d*a.X,c-=d*a.T,(c-b*a.ha)*a.qb;case 14:return c-
a.a}return NaN}f.getParameter=function(a,b){var c=this.type,d=this.X,e=this.T;this.type=(c+12)%16;this.X=e;this.T=-d;a=N(this,a,b);this.type=c;this.X=d;this.T=e;return a};f.evaluate=function(a){a/=this.length;return(new O(this.c+(this.o-this.c)*a,this.a+(this.i-this.a)*a)).round()};f.kb=function(a,b){var c=(this.o-this.c)/this.length,d=(this.i-this.a)/this.length;return(new O(this.c+c*a-d*b,this.a+d*a+c*b)).round()};f.De=function(a,b){return(new O(this.getParameter(a,b),N(this,a,b))).round()};
function tc(a){return(new O(a.o-a.c,a.i-a.a)).scale(5E4/a.length)}function uc(a,b){return(new O(a.a-a.i,a.o-a.c)).scale(b/a.length)}f.me=function(a,b){a=this.getParameter(a,b);a/=this.length;return 0>=a?new O(this.c,this.a):1<=a?new O(this.o,this.i):(new O(this.c+(this.o-this.c)*a,this.a+(this.i-this.a)*a)).round()};
function pc(a,b){var c=0;switch(a.type){case 0:case 1:case 3:if(b<a.a)break;if(b>=a.i)break;c-=a.c;b-=a.a;var d=Math.floor(b/a.T);c-=d*a.X;b-=d*a.T;return b*-a.ha-c;case 2:if(b<a.a)break;if(b>=a.i)break;return a.c-c;case 4:case 5:if(b<a.a)break;if(b>=a.i)break;c-=a.c;b-=a.a;d=Math.floor(b/a.T);c-=d*a.X;b-=d*a.T;return b/a.ha-c;case 7:if(b<a.i)break;if(b>=a.a)break;c-=a.c;b-=a.a;d=Math.floor(b/-a.T);c+=d*a.X;b+=d*a.T;return b/a.ha-c;case 8:case 9:case 11:if(b<a.i)break;if(b>=a.a)break;c-=a.c;b-=a.a;
d=Math.floor(b/-a.T);c+=d*a.X;b+=d*a.T;return b*-a.ha-c;case 10:if(b<a.i)break;if(b>=a.a)break;return a.c-c;case 12:case 13:if(b<a.i)break;if(b>=a.a)break;c-=a.c;b-=a.a;d=Math.floor(b/-a.T);c+=d*a.X;b+=d*a.T;return b/a.ha-c;case 15:if(!(b<a.a||b>=a.i))return c-=a.c,b-=a.a,d=Math.floor(b/a.T),c-=d*a.X,b-=d*a.T,b/a.ha-c}return NaN}
function mc(a,b,c){switch(a.type){case 0:case 1:case 3:if(c<a.a)break;if(c>=a.i)break;b-=a.c;c-=a.a;var d=Math.floor(c/a.T);b-=d*a.X;c-=d*a.T;a=c*-a.ha-b;if(0>a)break;return a+1;case 2:if(c<a.a)break;if(c>=a.i)break;a=a.c-b;if(0>a)break;return a+1;case 4:case 5:if(c<a.a)break;if(c>=a.i)break;b-=a.c;c-=a.a;d=Math.floor(c/a.T);b-=d*a.X;c-=d*a.T;a=c/a.ha-b;if(0>a)break;return a+1;case 7:if(c<a.i)break;if(c>=a.a)break;b-=a.c;c-=a.a;d=Math.floor(c/-a.T);b+=d*a.X;c+=d*a.T;a=c/a.ha-b;if(0>a)break;return-a-
1;case 8:case 9:case 11:if(c<a.i)break;if(c>=a.a)break;b-=a.c;c-=a.a;d=Math.floor(c/-a.T);b+=d*a.X;c+=d*a.T;a=c*-a.ha-b;if(0>a)break;return-a-1;case 10:if(c<a.i)break;if(c>=a.a)break;a=a.c-b;if(0>a)break;return-a-1;case 12:case 13:if(c<a.i)break;if(c>=a.a)break;b-=a.c;c-=a.a;d=Math.floor(c/-a.T);b+=d*a.X;c+=d*a.T;a=c/a.ha-b;if(0>a)break;return-a-1;case 15:if(!(c<a.a||c>=a.i||(b-=a.c,c-=a.a,d=Math.floor(c/a.T),b-=d*a.X,c-=d*a.T,a=c/a.ha-b,0>a)))return a+1}return NaN}
f.log=function(){console.log(this.c+" "+this.a+" "+this.X+" "+this.T+" type: "+this.type+" slope: "+this.ha)};f.ca=function(){var a=this.Na(this.c,this.a,this.o,this.i);a.type=this.type;a.ha=this.ha;a.qb=this.qb;a.length=this.length;a.X=this.X;a.T=this.T;return a};function vc(a){var b=a.Na(a.o,a.i,a.c,a.a);b.type=(a.type+8)%16;b.ha=a.ha;b.qb=a.qb;b.length=a.length;b.X=-a.X;b.T=-a.T;return b}f.Na=function(a,b,c,d){return new J(a,b,c,d)};
function wc(a){if(a.ga)return a.ga;var b=vc(a);b.ga=a;return a.ga=b}function xc(a,b){return a.type<b.type?-1:a.type>b.type?1:a.ha<b.ha?-1:a.ha>b.ha?1:0}function yc(a){var b=[];a=p(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(new O(c.c,c.a));return b}function zc(a){var b=[];a.bound&&(b.bound=a.bound);a=p(a);for(var c=a.next();!c.done;c=a.next())b.unshift(wc(c.value));return b}
function R(a,b,c,d){this.set(void 0===a?255:a,void 0===b?255:b,void 0===c?255:c,void 0===d?255:d);return this}function Ac(a,b){return a.r<b.r?-1:a.r>b.r?1:a.Ia<b.Ia?-1:a.Ia>b.Ia?1:a.ba<b.ba?-1:a.ba>b.ba?1:a.ua<b.ua?-1:a.ua>b.ua?1:0}R.prototype.set=function(a,b,c,d){255<a&&(a=255);0>a&&(a=0);255<b&&(b=255);0>b&&(b=0);255<c&&(c=255);0>c&&(c=0);255<d&&(d=255);0>d&&(d=0);this.r=a;this.Ia=b;this.ba=c;this.ua=d;return this};
R.prototype.scale=function(a){this.r=Math.round(this.r*a);this.Ia=Math.round(this.Ia*a);this.ba=Math.round(this.ba*a);return this};R.prototype.save=function(a){vb(a,this.r);vb(a,this.Ia);vb(a,this.ba);vb(a,this.ua);return this};function Bc(a){return new R(tb(a),tb(a),tb(a),tb(a))}var Cc=new R(0,0,0,0),Dc=new R(255,255,255,255),Ec=new R(0,0,0,255),Fc=new R(255,0,0,255),Hc=new R(255,255,0,255);new R(0,255,0,255);new R(0,255,255,255);new R(0,0,255,255);new R(255,0,255,255);
function Ic(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.yg=this.xg=this.Ld=this.Kd=this.lc=this.kc=this.Qb=this.bc=this.Pb=this.pd=this.od=this.nd=this.md=this.ld=this.kd=0;this.na=this.Ic=this.Jc=this.aa=255;return this}
function Jc(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:a.z<b.z?-1:a.z>b.z?1:a.kd<b.kd?-1:a.kd>b.kd?1:a.ld<b.ld?-1:a.ld>b.ld?1:a.md<b.md?-1:a.md>b.md?1:a.nd<b.nd?-1:a.nd>b.nd?1:a.od<b.od?-1:a.od>b.od?1:a.pd<b.pd?-1:a.pd>b.pd?1:a.Pb<b.Pb?-1:a.Pb>b.Pb?1:a.bc<b.bc?-1:a.bc>b.bc?1:a.Qb<b.Qb?-1:a.Qb>b.Qb?1:a.kc<b.kc?-1:a.kc>b.kc?1:a.lc<b.lc?-1:a.lc>b.lc?1:a.Kd<b.Kd?-1:a.Kd>b.Kd?1:a.Ld<b.Ld?-1:a.Ld>b.Ld?1:a.xg<b.xg?-1:a.xg>b.xg?1:a.yg<b.yg?-1:a.yg>b.yg?1:a.aa<b.aa?-1:a.aa>b.aa?1:a.Jc<b.Jc?-1:a.Jc>
b.Jc?1:a.Ic<b.Ic?-1:a.Ic>b.Ic?1:a.na<b.na?-1:a.na>b.na?1:0}function Kc(a,b,c){var d=1-c,e=new Ic(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c);e.kd=a.kd*d+b.kd*c;e.ld=a.ld*d+b.ld*c;e.md=a.md*d+b.md*c;e.nd=a.nd*d+b.nd*c;e.od=a.od*d+b.od*c;e.pd=a.pd*d+b.pd*c;e.Pb=a.Pb*d+b.Pb*c;e.bc=a.bc*d+b.bc*c;e.Qb=a.Qb*d+b.Qb*c;e.kc=a.kc*d+b.kc*c;e.lc=a.lc*d+b.lc*c;e.Kd=a.Kd*d+b.Kd*c;e.Ld=a.Ld*d+b.Ld*c;e.aa=a.aa*d+b.aa*c;e.Jc=a.Jc*d+b.Jc*c;e.Ic=a.Ic*d+b.Ic*c;e.na=a.na*d+b.na*c;return e}
Ic.prototype.ca=function(){var a=new Ic(this.x,this.y,this.z);a.kd=this.kd;a.ld=this.ld;a.md=this.md;a.nd=this.nd;a.od=this.od;a.pd=this.pd;a.Pb=this.Pb;a.bc=this.bc;a.Qb=this.Qb;a.kc=this.kc;a.lc=this.lc;a.Kd=this.Kd;a.Ld=this.Ld;a.aa=this.aa;a.Jc=this.Jc;a.Ic=this.Ic;a.na=this.na;return a};function Qc(a,b){a.aa=b.r;a.Jc=b.Ia;a.Ic=b.ba;a.na=b.ua}function Rc(a,b,c){a.kc=b;a.lc=c;return a};function O(a,b){this.x=void 0===a?0:a;this.y=void 0===b?0:b;return this}f=O.prototype;f.set=function(a,b){this.x=a;this.y=b;return this};f.Ie=function(){return this.x*this.x+this.y*this.y};f.length=function(){return Math.sqrt(this.Ie())};f.oa=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.oa(1);return this};f.scale=function(a){this.x*=a;this.y*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.sub=function(a){this.x=this.x-a.x;this.y=this.y-a.y;return this};f.ca=function(){return new O(this.x,this.y)};f.Tc=function(a){a||(a=new Float32Array(2));a[0]=this.x;a[1]=this.y;return a};function Sc(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0}f.$g=function(){return 0!=this.x||0!=this.y?!1:!0};function F(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;return this}
function Vb(a,b){return a.x*b.x+a.y*b.y+a.z*b.z}function Xb(a,b,c){c.x=a.y*b.z-a.z*b.y;c.y=b.x*a.z-b.z*a.x;c.z=a.x*b.y-a.y*b.x;return c}function Tc(a,b,c){c.x=a.x-b.x;c.y=a.y-b.y;c.z=a.z-b.z;return c}function Uc(a,b,c){var d=1-c;return new F(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c)}function Vc(a,b){b.x=a.x;b.y=a.y;b.z=a.z}f=F.prototype;f.ca=function(){return new F(this.x,this.y,this.z)};f.set=function(a,b,c){this.x=a;this.y=b;this.z=c;return this};
f.Ie=function(){return this.x*this.x+this.y*this.y+this.z*this.z};f.length=function(){return Math.sqrt(this.Ie())};f.oa=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.oa(1);return this};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.sub=function(a){return Tc(this,a,this)};f.Tc=function(a){a||(a=new Float32Array(3));a[0]=this.x;a[1]=this.y;a[2]=this.z;return a};f.$g=function(){return 0!=this.x||0!=this.y||0!=this.z?!1:!0};function Wc(a,b,c,d){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.l=void 0===d?0:d;return this}Wc.prototype.set=function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.l=d;return this};
Wc.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.l=Math.round(this.l);return this};Wc.prototype.Tc=function(a){a||(a=new Float32Array(4));a[0]=this.x;a[1]=this.y;a[2]=this.z;a[3]=this.l;return a};Wc.prototype.$g=function(){return 0!=this.x||0!=this.y||0!=this.z||0!=this.l?!1:!0};function Xc(){this.reset();return this}f=Xc.prototype;
f.set=function(a){this.D=a.D;this.I=a.I;this.J=a.J;this.G=a.G;this.m11=a.m11;this.m12=a.m12;this.F=a.F;this.m21=a.m21;this.m22=a.m22;return this};f.reset=function(){this.D=1;this.G=this.J=this.I=0;this.m11=1;this.m21=this.F=this.m12=0;this.m22=1;return this};
f.rotate=function(a,b,c){var d=Math.cos(c);c=Math.sin(c);var e=c*this.D+d*this.I,h=d*this.G-c*this.m11,g=c*this.G+d*this.m11,k=d*this.F-c*this.m21,l=c*this.F+d*this.m21;this.D=d*this.D-c*this.I;this.I=e;this.G=h;this.m11=g;this.F=k;this.m21=l;d=Math.cos(b);b=Math.sin(b);c=d*this.J-b*this.I;e=b*this.m12+d*this.m11;h=d*this.m12-b*this.m11;g=b*this.m22+d*this.m21;k=d*this.m22-b*this.m21;this.I=b*this.J+d*this.I;this.J=c;this.m11=e;this.m12=h;this.m21=g;this.m22=k;b=Math.cos(a);a=Math.sin(a);d=a*this.J+
b*this.D;c=b*this.m12-a*this.G;e=a*this.m12+b*this.G;h=b*this.m22-a*this.F;g=a*this.m22+b*this.F;this.J=b*this.J-a*this.D;this.D=d;this.m12=c;this.G=e;this.m22=h;this.F=g;return this};f.th=function(a,b){var c=Math.cos(b),d=Math.sin(b);b=1-c;var e=a.x*a.y,h=a.y*a.z,g=a.z*a.x,k=a.x*d,l=a.y*d;d*=a.z;this.D=a.x*a.x*b+c;this.I=e*b+d;this.J=g*b-l;this.G=e*b-d;this.m11=a.y*a.y*b+c;this.m12=h*b+k;this.F=g*b+l;this.m21=h*b-k;this.m22=a.z*a.z*b+c;return this};
f.ph=function(a,b){a=(new Xc).th(a,b);Yc(a,this,this);return this};f.scale=function(a,b,c){this.D*=a;this.I*=a;this.J*=a;this.G*=b;this.m11*=b;this.m12*=b;this.F*=c;this.m21*=c;this.m22*=c;return this};
f.Zg=function(a){a||(a=this);var b=this.Rg();if(0==b)return a;var c=-(this.G*this.m22+this.m12*-this.F),d=this.G*this.m21+this.m11*-this.F,e=-(this.I*this.m22+this.J*-this.m21),h=this.D*this.m22+this.J*-this.F,g=-(this.D*this.m21+this.I*-this.F),k=this.I*this.m12+this.J*-this.m11,l=-(this.D*this.m12+this.J*-this.G),m=this.D*this.m11+this.I*-this.G;b=1/b;a.D=(this.m11*this.m22+this.m12*-this.m21)*b;a.G=c*b;a.F=d*b;a.I=e*b;a.m11=h*b;a.m21=g*b;a.J=k*b;a.m12=l*b;a.m22=m*b;return a};
f.Rg=function(){return this.D*(this.m11*this.m22-this.m12*this.m21)+this.I*(this.m12*this.F-this.G*this.m22)+this.J*(this.G*this.m21-this.m11*this.F)};f.Tc=function(a){a||(a=new Float32Array(9));a[0]=this.D;a[1]=this.I;a[2]=this.J;a[3]=this.G;a[4]=this.m11;a[5]=this.m12;a[6]=this.F;a[7]=this.m21;a[8]=this.m22;return a};
function Yc(a,b,c){var d=a.I*b.D+a.m11*b.I+a.m21*b.J,e=a.J*b.D+a.m12*b.I+a.m22*b.J,h=a.D*b.G+a.G*b.m11+a.F*b.m12,g=a.I*b.G+a.m11*b.m11+a.m21*b.m12,k=a.J*b.G+a.m12*b.m11+a.m22*b.m12,l=a.D*b.F+a.G*b.m21+a.F*b.m22,m=a.I*b.F+a.m11*b.m21+a.m21*b.m22,n=a.J*b.F+a.m12*b.m21+a.m22*b.m22;c.D=a.D*b.D+a.G*b.I+a.F*b.J;c.G=h;c.F=l;c.I=d;c.m11=g;c.m21=m;c.J=e;c.m12=k;c.m22=n;return c}
f.transform=function(a,b){return b.set(this.D*a.x+this.G*a.y+this.F*a.z,this.I*a.x+this.m11*a.y+this.m21*a.z,this.J*a.x+this.m12*a.y+this.m22*a.z)};f.ag=function(){return new F(this.D,this.I,this.J)};f.bg=function(){return new F(this.G,this.m11,this.m12)};f.Be=function(){return new F(this.F,this.m21,this.m22)};f.qg=function(a){this.D=a.x;this.I=a.y;this.J=a.z;return this};f.rg=function(a){this.G=a.x;this.m11=a.y;this.m12=a.z;return this};f.sg=function(a){this.F=a.x;this.m21=a.y;this.m22=a.z;return this};
f.save=function(a){var b=new Uint8Array((new Float32Array([this.D,this.I,this.J,this.G,this.m11,this.m12,this.F,this.m21,this.m22])).buffer);a.set(b,a.position);a.position+=36};f.load=function(a){a=a.slice(a.position,a.position+=36);a=new Float32Array(a.buffer);a=p(a);this.D=a.next().value;this.I=a.next().value;this.J=a.next().value;this.G=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.F=a.next().value;this.m21=a.next().value;this.m22=a.next().value};new Xc;
function U(){this.reset();return this}f=U.prototype;f.set=function(a){this.D=a.D;this.I=a.I;this.J=a.J;this.Pa=a.Pa;this.G=a.G;this.m11=a.m11;this.m12=a.m12;this.m13=a.m13;this.F=a.F;this.m21=a.m21;this.m22=a.m22;this.m23=a.m23;this.A=a.A;this.m31=a.m31;this.m32=a.m32;this.m33=a.m33;return this};f.reset=function(){this.D=1;this.G=this.Pa=this.J=this.I=0;this.m11=1;this.m21=this.F=this.m13=this.m12=0;this.m22=1;this.m32=this.m31=this.A=this.m23=0;this.m33=1;return this};
function Zc(a){Xc.prototype.reset.call(a)}f.translate=function(a,b,c){this.A+=a;this.m31+=b;this.m32+=c;return this};f.rotate=Xc.prototype.rotate;f.th=Xc.prototype.th;f.ph=Xc.prototype.ph;f.scale=Xc.prototype.scale;
f.Zg=function(a){function b(D,G,Q,aa,V,da,xa,ba,ya){return D*(V*ya-da*ba)+G*(da*xa-aa*ya)+Q*(aa*ba-V*xa)}a||(a=this);var c=this.Rg();if(0==c)return a;var d=b(this.m11,this.m12,this.m13,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),e=-b(this.G,this.m12,this.m13,this.F,this.m22,this.m23,this.A,this.m32,this.m33),h=b(this.G,this.m11,this.m13,this.F,this.m21,this.m23,this.A,this.m31,this.m33),g=-b(this.G,this.m11,this.m12,this.F,this.m21,this.m22,this.A,this.m31,this.m32),k=-b(this.I,this.J,
this.Pa,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),l=b(this.D,this.J,this.Pa,this.F,this.m22,this.m23,this.A,this.m32,this.m33),m=-b(this.D,this.I,this.Pa,this.F,this.m21,this.m23,this.A,this.m31,this.m33),n=b(this.D,this.I,this.J,this.F,this.m21,this.m22,this.A,this.m31,this.m32),r=b(this.I,this.J,this.Pa,this.m11,this.m12,this.m13,this.m31,this.m32,this.m33),q=-b(this.D,this.J,this.Pa,this.G,this.m12,this.m13,this.A,this.m32,this.m33),t=b(this.D,this.I,this.Pa,this.G,this.m11,this.m13,
this.A,this.m31,this.m33),z=-b(this.D,this.I,this.J,this.G,this.m11,this.m12,this.A,this.m31,this.m32),A=-b(this.I,this.J,this.Pa,this.m11,this.m12,this.m13,this.m21,this.m22,this.m23),v=b(this.D,this.J,this.Pa,this.G,this.m12,this.m13,this.F,this.m22,this.m23),C=-b(this.D,this.I,this.Pa,this.G,this.m11,this.m13,this.F,this.m21,this.m23),w=b(this.D,this.I,this.J,this.G,this.m11,this.m12,this.F,this.m21,this.m22);c=1/c;a.D=d*c;a.G=e*c;a.F=h*c;a.A=g*c;a.I=k*c;a.m11=l*c;a.m21=m*c;a.m31=n*c;a.J=r*c;a.m12=
q*c;a.m22=t*c;a.m32=z*c;a.Pa=A*c;a.m13=v*c;a.m23=C*c;a.m33=w*c;return a};
f.Rg=function(){var a=this.D*(this.m11*this.m22*this.m33+this.m12*this.m23*this.m31+this.m13*this.m21*this.m32-(this.m13*this.m22*this.m31+this.m11*this.m23*this.m32+this.m12*this.m21*this.m33));a-=this.I*(this.G*this.m22*this.m33+this.m12*this.m23*this.A+this.m13*this.F*this.m32-(this.m13*this.m22*this.A+this.G*this.m23*this.m32+this.m12*this.F*this.m33));a+=this.J*(this.G*this.m21*this.m33+this.m11*this.m23*this.A+this.m13*this.F*this.m31-(this.m13*this.m21*this.A+this.G*this.m23*this.m31+this.m11*
this.F*this.m33));return a-=this.Pa*(this.G*this.m21*this.m32+this.m11*this.m22*this.A+this.m12*this.F*this.m31-(this.m12*this.m21*this.A+this.G*this.m22*this.m31+this.m11*this.F*this.m32))};f.Tc=function(a){a||(a=new Float32Array(16));a[0]=this.D;a[1]=this.I;a[2]=this.J;a[3]=this.Pa;a[4]=this.G;a[5]=this.m11;a[6]=this.m12;a[7]=this.m13;a[8]=this.F;a[9]=this.m21;a[10]=this.m22;a[11]=this.m23;a[12]=this.A;a[13]=this.m31;a[14]=this.m32;a[15]=this.m33;return a};
function $c(a,b,c){var d=a.I*b.D+a.m11*b.I+a.m21*b.J+a.m31*b.Pa,e=a.J*b.D+a.m12*b.I+a.m22*b.J+a.m32*b.Pa,h=a.Pa*b.D+a.m13*b.I+a.m23*b.J+a.m33*b.Pa,g=a.D*b.G+a.G*b.m11+a.F*b.m12+a.A*b.m13,k=a.I*b.G+a.m11*b.m11+a.m21*b.m12+a.m31*b.m13,l=a.J*b.G+a.m12*b.m11+a.m22*b.m12+a.m32*b.m13,m=a.Pa*b.G+a.m13*b.m11+a.m23*b.m12+a.m33*b.m13,n=a.D*b.F+a.G*b.m21+a.F*b.m22+a.A*b.m23,r=a.I*b.F+a.m11*b.m21+a.m21*b.m22+a.m31*b.m23,q=a.J*b.F+a.m12*b.m21+a.m22*b.m22+a.m32*b.m23,t=a.Pa*b.F+a.m13*b.m21+a.m23*b.m22+a.m33*b.m23,
z=a.D*b.A+a.G*b.m31+a.F*b.m32+a.A*b.m33,A=a.I*b.A+a.m11*b.m31+a.m21*b.m32+a.m31*b.m33,v=a.J*b.A+a.m12*b.m31+a.m22*b.m32+a.m32*b.m33,C=a.Pa*b.A+a.m13*b.m31+a.m23*b.m32+a.m33*b.m33;c.D=a.D*b.D+a.G*b.I+a.F*b.J+a.A*b.Pa;c.G=g;c.F=n;c.A=z;c.I=d;c.m11=k;c.m21=r;c.m31=A;c.J=e;c.m12=l;c.m22=q;c.m32=v;c.Pa=h;c.m13=m;c.m23=t;c.m33=C}
f.transform=function(a,b){return b.set(this.D*a.x+this.G*a.y+this.F*a.z+this.A*a.l,this.I*a.x+this.m11*a.y+this.m21*a.z+this.m31*a.l,this.J*a.x+this.m12*a.y+this.m22*a.z+this.m32*a.l,this.Pa*a.x+this.m13*a.y+this.m23*a.z+this.m33*a.l)};f.kb=function(a,b){return b.set(this.D*a.x+this.G*a.y+this.F*a.z+this.A,this.I*a.x+this.m11*a.y+this.m21*a.z+this.m31,this.J*a.x+this.m12*a.y+this.m22*a.z+this.m32)};
function ad(a,b,c){c.set(a.D*b.x+a.G*b.y+a.F*b.z,a.I*b.x+a.m11*b.y+a.m21*b.z,a.J*b.x+a.m12*b.y+a.m22*b.z)}f.ag=Xc.prototype.ag;f.bg=Xc.prototype.bg;f.Be=Xc.prototype.Be;function bd(a){return new F(a.A,a.m31,a.m32)}f.qg=Xc.prototype.qg;f.rg=Xc.prototype.rg;f.sg=Xc.prototype.sg;function cd(a,b){a.A=b.x;a.m31=b.y;a.m32=b.z}
f.save=function(a){var b=new Uint8Array((new Float32Array([this.D,this.I,this.J,this.Pa,this.G,this.m11,this.m12,this.m13,this.F,this.m21,this.m22,this.m23,this.A,this.m31,this.m32,this.m33])).buffer);a.set(b,a.position);a.position+=64};
f.load=function(a){a=a.slice(a.position,a.position+=64);a=new Float32Array(a.buffer);a=p(a);this.D=a.next().value;this.I=a.next().value;this.J=a.next().value;this.Pa=a.next().value;this.G=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.m13=a.next().value;this.F=a.next().value;this.m21=a.next().value;this.m22=a.next().value;this.m23=a.next().value;this.A=a.next().value;this.m31=a.next().value;this.m32=a.next().value;this.m33=a.next().value};var dd=new U;
function oc(){this.j=Number.POSITIVE_INFINITY;this.s=Number.NEGATIVE_INFINITY;this.f=Number.POSITIVE_INFINITY;this.h=Number.NEGATIVE_INFINITY}oc.prototype.Da=function(a,b){a<this.j&&(this.j=a);a>this.s&&(this.s=a);b<this.f&&(this.f=b);b>this.h&&(this.h=b);return this};oc.prototype.ii=function(a){this.Da(a.j,a.f);this.Da(a.s,a.h)};oc.prototype.ca=function(){var a=new oc;a.j=this.j;a.s=this.s;a.f=this.f;a.h=this.h;return a};
oc.prototype.Qd=function(a,b){return a<=this.j||a>=this.s||b<=this.f||b>=this.h?!1:!0};function ed(){this.j=Number.POSITIVE_INFINITY;this.s=Number.NEGATIVE_INFINITY;this.f=Number.POSITIVE_INFINITY;this.h=Number.NEGATIVE_INFINITY;this.B=Number.POSITIVE_INFINITY;this.M=Number.NEGATIVE_INFINITY}ed.prototype.Da=function(a,b,c){a<this.j&&(this.j=a);a>this.s&&(this.s=a);b<this.f&&(this.f=b);b>this.h&&(this.h=b);c<this.B&&(this.B=c);c>this.M&&(this.M=c);return this};
ed.prototype.ii=function(a){this.Da(a.j,a.f,a.B);this.Da(a.s,a.h,a.M)};ed.prototype.ca=function(){var a=new ed;a.j=this.j;a.s=this.s;a.f=this.f;a.h=this.h;a.B=this.B;a.M=this.M;return a};ed.prototype.Qd=function(a,b){return a<=this.j||a>=this.s||b<=this.f||b>=this.h||void 0<=this.B||void 0>=this.M?!1:!0};u.Node=function(a){this.name=a;this.children=this.parent=null;this.Di=new $a(this);this.Ua=1;this.Z=u.Z;this.Sa=-2147483648;return this};f=u.Node.prototype;f.create=function(){};f.remove=function(){W(this,null)};function fd(a,b){if(0!=b.call(a)&&a.children)for(a=a.children.first();null!=a.item;a=a.next)fd(a.item,b)}f.step=function(){};f.zi=function(){};f.Qa=function(){};function gd(a){fd(a,function(){if(!jd(this))return!1;this.Qa(void 0)})}function jd(a){return!a.Ua||a.Z.Sa<u.v?!1:!0}
function W(a,b){if(a.parent)return a.parent=b,u.nh.push(a),a;if(b)return a.parent=b,kd(a)}function kd(a){ab(a.Di);if(!a.parent)return a;a.parent.children||(a.parent.children=new Za);bb(a.parent.children,a.Di);return a}function ld(a,b){a.Z=b;if(a.children)for(a=a.children.first();null!=a.item;a=a.next)ld(a.item,b)}
f.log=function(){this.name?console.group(this.constructor.name+": "+this.name):console.group(this.constructor.name);if(this.children)for(var a=this.children.first();null!=a.item;a=a.next)a.item.log();console.groupEnd()};u.pa=function(a){u.Node.call(this,a);this.transform=new U;this.qa=null;this.N=new U};u.pa.prototype=Object.create(u.Node.prototype);u.pa.prototype.constructor=u.pa;function md(a,b){var c=a.tg=new u.ee;c.Z=a.Z;c.Ja=1.75*b;c.qa=a.N;W(c,u.Ef)}
u.pa.prototype.remove=function(){this.tg&&this.tg.remove();u.Node.prototype.remove.call(this)};u.pa.prototype.save=function(a){ub(a,"NG.Node3D");this.N.save()};u.pa.prototype.step=function(){nd(this)};function nd(a){a.qa?$c(a.qa,a.transform,a.N):a.N.set(a.transform)}u.Z={Sa:NaN,Xa:new F(1,1,1)};u.nh=[];u.rh=new u.Node("schedule");u.Pc=W(new u.Node("scene"),u.rh);u.inputs=W(new u.Node("inputs"),u.rh);function od(){this.hb=new Xa(qb);this.Sb=new Xa(qb);this.ma=new Xa(qb);this.da=new Xa(qb);this.ja=new Xa(qb);return this}
od.prototype.save=function(a){Gb(a,this.hb.elements.length);for(var b=0;b<this.hb.elements.length;b++)this.hb.elements[b].save(a);Gb(a,this.Sb.elements.length);for(b=0;b<this.Sb.elements.length;b++)this.Sb.elements[b].save(a);Gb(a,this.ma.elements.length);for(b=0;b<this.ma.elements.length;b++)this.ma.elements[b].save(a);Gb(a,this.da.elements.length);for(b=0;b<this.da.elements.length;b++)this.da.elements[b].save(a);Gb(a,this.ja.elements.length);for(b=0;b<this.ja.elements.length;b++)this.ja.elements[b].save(a)};
od.prototype.load=function(a){var b=Fb(a);for(var c=0;c<b;c++){var d=new pd;d.load(a);this.hb.replace(d)}b=Fb(a);for(c=0;c<b;c++)d=new qd,d.load(a),this.Sb.replace(d);b=Fb(a);if(this.ma.elements.length){for(c=0;c<b;c++)sb(a),wb(a),wb(a);b=p(this.ma.elements);for(c=b.next();!c.done;c=b.next())c.value.create()}else for(c=0;c<b;c++)d=new rd,d.load(a),this.ma.replace(d);this.zh=b=Fb(a);for(c=0;c<b;c++)d=new u.jd,d.gi=this,d.load(a),this.da.replace(d);b=Fb(a);for(c=0;c<b;c++)d=new u.Audio,d.load(a),this.ja.replace(d);
0==this.zh&&this.ready&&this.ready.call(this)};u.Th=0;u.Wi=!1;u.ff={};u.ff.overflowX=document.body.style.overflowX;u.ff.overflowY=document.body.style.overflowY;u.ff.userSelect=document.body.style.userSelect;var sd=document.getElementById("paneContainer");sd.style.position="relative";sd.style.flex="0 0 auto";sd.style.zIndex=1;sd.addEventListener("contextmenu",function(a){return a.preventDefault()});u.canvas=document.createElement("canvas");u.canvas.style.transformOrigin="top left";u.canvas.style.transform="scale(2.0, 2.0)";
u.canvas.style.imageRendering="pixelated";u.canvas.style.zIndex=-1;sd.appendChild(u.canvas);x=u.canvas.getContext("webgl2",{alpha:!1,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1,Aj:!0});console.log(x.getParameter(x.VENDOR),x.getParameter(x.VERSION));console.log(x.getParameter(x.RENDERER));u.Mb={};u.v=0;u.Wg=1E3/60;u.Sa=-2147483648;u.yf=function(){2147483647==u.Sa&&(u.Sa=-2147483648);u.Sa++};u.Jb=new R(0,0,0,0);u.m=new od;u.H=null;u.Cg=null;u.Xh=null;u.Ba=null;u.viewport=null;
u.ij=function(){u.canvas.width=480;u.canvas.height=296;u.af=new fc(480,296,null);u.Df.width=480;u.Df.height=296;u.Df.create();sd.style.width="960px";sd.style.height="592px"};u.Ff=function(a){x.viewport(a.x,a.y,a.l,a.C);u.viewport=a;u.Mb.oc.O("viewport",new O(a.l,a.C),!0);u.Mb.oc.upload()};u.Ei=function(a){u.Ba=a};u.eb=function(a){u.H!=a&&(u.H=a.bind())};u.Db=function(a){u.Cg!=a&&(u.Cg=a.bind())};u.Fd=function(a){a&&u.Xh!=a&&(u.Xh=a.bind())};
u.hc=function(a,b){x.activeTexture(x.TEXTURE0+a);b?(x.bindTexture(x.TEXTURE_2D,b.object),u.H.O("enableTexture"+a,1,!0)):(x.bindTexture(x.TEXTURE_2D,null),u.H.O("enableTexture"+a,0,!0))};u.rb=function(a){if(u.va!=a){switch(a){case 0:x.disable(x.BLEND);break;case 1:x.enable(x.BLEND);x.blendFunc(x.ONE,x.ONE_MINUS_SRC_ALPHA);break;case 2:x.enable(x.BLEND),x.blendFunc(x.SRC_ALPHA,x.ONE_MINUS_SRC_ALPHA)}u.va=a}};
u.xb=function(a){if(u.depth!=a){switch(a){case 0:x.disable(x.DEPTH_TEST);break;case 1:x.enable(x.DEPTH_TEST);x.depthMask(!1);break;case 2:x.enable(x.DEPTH_TEST),x.depthMask(!0)}u.depth=a}};u.gc=function(a){if(u.facing!=a){switch(a){case 0:x.disable(x.CULL_FACE);break;case 1:x.enable(x.CULL_FACE);x.frontFace(x.CCW);break;case 2:x.enable(x.CULL_FACE),x.frontFace(x.CW)}u.facing=a}};for(var td=0;4>td;td++)x.enableVertexAttribArray(td);x.clearColor(0,0,0,0);x.depthFunc(x.LEQUAL);
u.start=function(){u.Mb.oc.create(["u_eyeMatrix","u_viewMatrix","u_cameraPos","u_viewport"]);u.Mb.yi.create([]);u.pi()};u.Vd={};u.Vd.time=0;u.Vd.fc=0;u.Vd.ki=0;u.Vd.hj=function(a){this.uj=a;a>=this.time+1E3&&(this.ki=this.fc=0,this.time+=1E3);this.fc++};u.Og=!0;
u.loop=function(a){var b=(u.cg-a)/u.Wg;if(.5<b)requestAnimationFrame(u.loop);else{-.5>b&&(u.cg=a,u.Vd.ki++);u.cg+=u.Wg;u.Vd.hj(a);if(u.Fi)u.Fi--;else{fd(u.rh,function(){this.step()});a=p(u.nh);for(b=a.next();!b.done;b=a.next())kd(b.value);u.nh.length=0;u.v++}u.Og&&requestAnimationFrame(u.loop)}};u.pause=function(){u.Og=!1};u.resume=function(){u.Og=!0;requestAnimationFrame(function(a){u.Vd.time=a;u.Vd.uj=a;u.cg=a;u.loop(a)})};u.pi=function(){u.resume()};
u.Cj=function(a,b){for(var c=[],d=Math.floor(640/a);1920>=a*d;d++)c.push([a*d,b*d]);return c};u.Ej=function(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()};document.addEventListener("fullscreenchange",function(){u.Wi=document.fullscreenElement?!0:!1});function ud(a,b){a=x.createShader(a);x.shaderSource(a,b);x.compileShader(a);if(x.getShaderParameter(a,x.COMPILE_STATUS))return a;console.log(b);console.log(x.getShaderInfoLog(a));x.deleteShader(a)}function rd(){this.name=void 0;this.Fa={};this.Bg={}}f=rd.prototype;
f.create=function(){this.nj=ud(x.VERTEX_SHADER,this.yh);this.mj=ud(x.FRAGMENT_SHADER,this.xh);var a=this.mj;var b=this.zj;var c=x.createProgram();x.attachShader(c,this.nj);x.attachShader(c,a);if(b)for(a=0;a<b.length;a++)x.bindAttribLocation(c,a,b[a]);else x.bindAttribLocation(c,0,"a_position"),x.bindAttribLocation(c,1,"a_texture0"),x.bindAttribLocation(c,2,"a_color"),x.bindAttribLocation(c,3,"a_basisZ");x.linkProgram(c);x.getProgramParameter(c,x.LINK_STATUS)?b=c:(console.log(x.getProgramInfoLog(c)),
x.deleteShader(c),b=void 0);this.Ne=b;u.eb(this)};
f.O=function(a,b,c){a="u_"+a;this.Fa.hasOwnProperty(a)||(this.Fa[a]=x.getUniformLocation(this.Ne,a));var d=this.Bg[a];c?d!=b&&(this.Bg[a]=b,x.uniform1i(this.Fa[a],b)):isNaN(b)?b instanceof Float32Array?x.uniform3fv(this.Fa[a],b):b instanceof U?x.uniformMatrix4fv(this.Fa[a],!1,b.Tc()):b instanceof R?(this.Bg[a]=b,x.uniform4f(this.Fa[a],b.r/255,b.Ia/255,b.ba/255,b.ua/255)):b instanceof Wc?x.uniform4f(this.Fa[a],b.x,b.y,b.z,b.l):b instanceof F?x.uniform3f(this.Fa[a],b.x,b.y,b.z):b instanceof O&&x.uniform2f(this.Fa[a],
b.x,b.y):d!=b&&(this.Bg[a]=b,x.uniform1f(this.Fa[a],b))};f.bind=function(){x.useProgram(this.Ne);return this};f.load=function(a){this.name=sb(a);this.yh=wb(a);this.xh=wb(a);this.create();delete this.yh;delete this.xh};f.save=function(a){ub(a,this.name);yb(a,this.yh);yb(a,this.xh)};function vd(){this.usage=this.target=null;this.hi=x.createBuffer();this.buffer=null}vd.prototype.bind=function(){x.bindBuffer(this.target,this.hi);return this};function wd(a,b){a.buffer=new ArrayBuffer(b);x.bufferData(a.target,a.buffer,a.usage)}vd.prototype.upload=function(){x.bufferSubData(this.target,0,this.buffer);return this};function xd(){vd.call(this);this.target=x.ARRAY_BUFFER;this.usage=x.STATIC_DRAW;this.nb=32;u.Cg=null;u.Db(this)}xd.prototype=Object.create(vd.prototype);
xd.prototype.constructor=xd;xd.prototype.bind=function(){vd.prototype.bind.call(this);x.vertexAttribPointer(0,3,x.FLOAT,!1,this.nb,0);x.vertexAttribPointer(1,2,x.FLOAT,!1,this.nb,12);x.vertexAttribPointer(2,4,x.UNSIGNED_BYTE,!0,this.nb,20);x.vertexAttribPointer(3,3,x.SHORT,!0,this.nb,24);return this};xd.prototype.upload=function(a){this.write(a);vd.prototype.upload.call(this);return this};
function yd(a){var b=u.Cg;b.buffer=new ArrayBuffer(a.length*b.nb);b.write(a);x.bufferData(b.target,b.buffer,b.usage)}
xd.prototype.write=function(a,b){b*=this.nb;var c=new Float32Array(this.buffer,b),d=new Int16Array(this.buffer,b);b=new Uint8Array(this.buffer,b);for(var e=0;e<a.length;e++){var h=a[e];var g=c;var k=e*this.nb>>>2;g[k]=h.x;g[k+1]=h.y;g[k+2]=h.z;k=e*this.nb+12>>>2;g[k]=h.kc;g[k+1]=h.lc;g=b;k=e*this.nb+20;g[k]=h.aa;g[k+1]=h.Jc;g[k+2]=h.Ic;g[k+3]=h.na;g=d;k=e*this.nb+24>>>1;g[k]=h.Pb;g[k+1]=h.bc;g[k+2]=h.Qb}return this};
function zd(){vd.call(this);this.target=x.ELEMENT_ARRAY_BUFFER;this.usage=x.STATIC_DRAW;u.Fd(this)}zd.prototype=Object.create(vd.prototype);zd.prototype.constructor=zd;zd.prototype.upload=function(a){(new Uint16Array(this.buffer)).set(a);return vd.prototype.upload.call(this)};function Ad(){vd.call(this);this.target=x.UNIFORM_BUFFER;this.usage=x.DYNAMIC_DRAW;this.Lg=null;this.wg=this.Rf=0;this.Fa={};vd.prototype.bind.call(this)}Ad.prototype=Object.create(vd.prototype);Ad.prototype.constructor=Ad;
Ad.prototype.create=function(a){x.bindBufferBase(this.target,this.Rf,this.hi);for(var b=0;b<u.m.ma.elements.length;b++){var c=u.m.ma.elements[b];u.eb(c);x.uniformBlockBinding(c.Ne,x.getUniformBlockIndex(c.Ne,this.Lg),this.Rf)}b=x.getUniformIndices(u.H.Ne,a);c=p(b);for(var d=c.next();!d.done;d=c.next())if(d.value==x.INVALID_INDEX)return console.log("uniform not found ",this),this;b=x.getActiveUniforms(u.H.Ne,b,x.UNIFORM_OFFSET);for(c=0;c<a.length;c++)this.Fa[a[c]]=b[c];return this};
Ad.prototype.O=function(a,b,c){a="u_"+a;b instanceof U?b.Tc(new Float32Array(this.buffer,this.Fa[a],16)):b instanceof R||(b instanceof Wc?b.Tc(new Float32Array(this.buffer,this.Fa[a],4)):b instanceof F||b instanceof O&&(c?b.Tc(new Uint32Array(this.buffer,this.Fa[a],2)):b.Tc(new Float32Array(this.buffer,this.Fa[a],2))))};Ad.prototype.upload=function(){vd.prototype.bind.call(this);x.bufferData(this.target,this.buffer.byteLength,this.usage);x.bufferSubData(this.target,0,this.buffer);return this};
var Bd,Cd=Bd=new xd;Cd.usage=x.STATIC_DRAW;Cd.Jf=[];var Dd,Ed=Dd=new zd;Ed.usage=x.STATIC_DRAW;Ed.elements=[];var Fd=u.Mb.oc=new Ad;Fd.Lg="Common";Fd.Rf=0;Fd.wg=160;wd(Fd,Fd.wg);var Gd=u.Mb.yi=new Ad;Gd.Lg="PortalLights";Gd.Rf=1;Gd.wg=48;wd(Gd,3072);function pd(){this.name="defaultMaterial";this.Vc=new R(255,255,255,255);this.Qc=new R(255,255,255,51);this.Rc=4;this.Sc=1;this.ud=new R(0,0,0,0);this.va=0;return this}function Hd(a,b){if(a.name<b.name)return-1;if(a.name>b.name)return 1;var c=Ac(a.Vc,b.Vc);if(0!=c)return c;c=Ac(a.Qc,b.Qc);if(0!=c)return c;c=Ac(a.ud,b.ud);return 0!=c?c:a.Rc<b.Rc?-1:a.Rc>b.Rc?1:a.Sc<b.Sc?-1:a.Sc>b.Sc?1:a.va<b.va?-1:a.va>b.va?1:0}
pd.prototype.ca=function(){var a=new pd;a.Vc=this.Vc;a.Qc=this.Qc;a.Rc=this.Rc;a.Sc=this.Sc;a.ud=this.ud;a.va=this.va;return a};pd.prototype.bind=function(){u.H.O("color",this.Vc);u.H.O("specularColor",this.Qc);u.H.O("specularExponent",this.Rc);u.H.O("specularSheen",this.Sc);u.H.O("emissiveColor",this.ud)};pd.prototype.save=function(a){ub(a,this.name);this.Vc.save(a);this.Qc.save(a);Gb(a,Math.floor(1024*this.Rc));vb(a,Math.floor(255*this.Sc));this.ud.save(a);vb(a,this.va);return a};
pd.prototype.load=function(a){this.name=sb(a);this.Vc=Bc(a);this.Qc=Bc(a);this.Rc=Fb(a)/1024;this.Sc=tb(a)/255;this.ud=Bc(a);this.va=tb(a)};var Id=u.m,Jd=new pd;Id.hb.replace(Jd);u.jd=function(){this.gg=x.RGBA8;this.height=this.width=2;this.border=0;this.format=x.RGBA;this.type=x.UNSIGNED_BYTE;this.data=null;this.Wd=u.jd.Wd;this.Je=u.jd.Je;this.Gh=this.Fh=x.CLAMP_TO_EDGE};u.jd.Wd=x.NEAREST;u.jd.Je=x.NEAREST;
u.jd.prototype.create=function(){if(this.gi){var a=this.gi;a.zh--;0<a.zh||a.ready&&a.ready.call(a)}x.activeTexture(x.TEXTURE0);this.object=x.createTexture();x.bindTexture(x.TEXTURE_2D,this.object);x.texImage2D(x.TEXTURE_2D,0,this.gg,this.width,this.height,this.border,this.format,this.type,this.data);x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,this.Wd);x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,this.Je);x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,this.Fh);x.texParameteri(x.TEXTURE_2D,
x.TEXTURE_WRAP_T,this.Gh);9984<=this.Wd&&9987>=this.Wd&&x.generateMipmap(x.TEXTURE_2D)};
u.jd.prototype.load=function(a){this.name=sb(a);this.gg=Fb(a);this.width=Fb(a);this.height=Fb(a);this.border=Fb(a);this.format=Fb(a);this.type=Fb(a);this.Wd=Fb(a);this.Je=Fb(a);this.Fh=Fb(a);this.Gh=Fb(a);this.Uc=new R(tb(a),tb(a),tb(a),tb(a));var b=xb(a);a=a.slice(a.position,a.position+=b);a=new Blob([a],{type:"image/png"});this.data=new Image;this.data.parent=this;this.data.onload=function(){this.parent.width=this.width;this.parent.height=this.height;this.parent.create()};this.data.src=URL.createObjectURL(a)};
u.jd.prototype.save=function(a){ub(a,this.name);Gb(a,this.gg);Gb(a,this.width);Gb(a,this.height);Gb(a,this.border);Gb(a,this.format);Gb(a,this.type);Gb(a,this.Wd);Gb(a,this.Je);Gb(a,this.Fh);Gb(a,this.Gh);vb(a,this.Uc.r);vb(a,this.Uc.Ia);vb(a,this.Uc.ba);vb(a,this.Uc.ua);zb(a,this.pf.length);a.set(this.pf,a.position);a.position+=this.pf.length};
u.Yg=function(a){a.ei=[];a.fi=[];for(var b=0,c=0,d=0;d<a.Rd.length;d++)b+a.Rd[d]+1>a.width&&(b=0,c+=a.ke+1),a.ei.push(b/a.width),a.fi.push(c/a.width),b+=a.Rd[d]+1,a.Rd[d]/=a.width,a.rf[d]/=a.width,a.sf[d]/=a.width;a.ke/=a.height;a.Xi=function(e){switch(e){case "0":return 0;case "1":return 1;case "2":return 2;case "3":return 3;case "4":return 4;case "5":return 5;case "6":return 6;case "7":return 7;case "8":return 8;case "9":return 9;case ",":return 10}return-1}};
u.ci=function(a,b,c){for(var d=[],e=0,h=0;h<b.length;h++){var g=a.Xi(b.charAt(h)),k=a.ei[g],l=a.fi[g],m=a.Rd[g],n=a.ke;e+=a.rf[g];c&&(l+=.5);d.push(Rc(new Ic(e,0+n,0),k,l));d.push(Rc(new Ic(e,0,0),k,l+n));d.push(Rc(new Ic(e+m,0,0),k+m,l+n));d.push(Rc(new Ic(e+m,0,0),k+m,l+n));d.push(Rc(new Ic(e+m,0+n,0),k+m,l));d.push(Rc(new Ic(e,0+n,0),k,l));e+=m;e+=a.sf[g]}d.width=e;d.height=a.ke;d.Ii=a;return d};var Y=new u.Node("mouse");Y.lock=!1;Y.d={};Y.p={};document.addEventListener("mousedown",function(a){Y.p[a.button]=!0;Y.d[a.button]=!0});Y.r={};document.addEventListener("mouseup",function(a){Y.r[a.button]=!0;Y.d[a.button]=!1});Y.l=0;document.addEventListener("wheel",function(a){Y.l=0<a.deltaY?1:-1});Y.b=new O(0,0);Y.Vb=new O(0,0);document.addEventListener("mousemove",function(a){Y.b.set(a.clientX,a.clientY);Y.Vb.x+=a.movementX;Y.Vb.y+=a.movementY});
Y.step=function(){u.Node.prototype.step.call(this);this.Vb.set(0,0);var a=Object.getOwnPropertyNames(this.p);var b=p(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=p(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;this.l=0};
Y.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=p(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=p(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=p(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1;Y.l=0;Y.b.set(0,0);Y.Vb.set(0,0)};W(Y,u.inputs);
Y.lj=function(){try{document.documentElement.requestPointerLock({unadjustedMovement:!0})}catch(a){console.log("Failed to acquire unadjusted movement in pointer lock."),document.documentElement.requestPointerLock()}};
document.addEventListener("pointerlockchange",function(){if(document.pointerLockElement)Y.lock=!0,document.body.style.overflowX="hidden",document.body.style.overflowY="hidden",document.body.style.userSelect="none";else{Y.lock=!1;for(var a=p(Object.getOwnPropertyNames(u.ff)),b=a.next();!b.done;b=a.next())b=b.value,document.body.style[b]=u.ff[b]}});var Kd=new u.Node("keyboard");Kd.d={};Kd.p={};document.addEventListener("keypress",function(a){Kd.d[a.code]||(Kd.p[a.code]=!0);Kd.d[a.code]=!0});Kd.r={};document.addEventListener("keyup",function(a){Kd.r[a.code]=!0;Kd.d[a.code]=!1});Kd.step=function(){u.Node.prototype.step.call(this);var a=Object.getOwnPropertyNames(this.p);var b=p(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=p(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1};
Kd.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=p(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=p(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=p(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1};W(Kd,u.inputs);u.Audio=function(){this.buffer=null;return this};u.Audio.U=new AudioContext;var Ld=u.Audio.zb=u.Audio.U.createGain();Ld.gain.value=.5;Ld.connect(u.Audio.U.destination);var Md=u.Audio.jb=u.Audio.U.createGain(),Nd=window.localStorage.getItem("musicVolume");null!=Nd?Md.gain.value=Nd:Md.gain.value=0;Md.connect(u.Audio.U.destination);u.Audio.Mf=function(a){u.Audio.zb.gain.value=a};u.Audio.Nf=function(a){u.Audio.jb.gain.value=a};
u.Audio.prototype.play=function(a){a?(void 0===a.gain&&(a.gain=1),void 0===a.pitch&&(a.pitch=1),void 0===a.ng&&(a.ng=0),void 0===a.delay&&(a.delay=0)):a={gain:1,pitch:1,ng:0,delay:0};var b=u.Audio.U.createGain();b.gain.value=a.gain;b.connect(u.Audio.zb);var c=new AudioBufferSourceNode(u.Audio.U);c.connect(b);a.loop?c.loop=!0:c.onended=function(){b.disconnect(u.Audio.zb)};c.U=b;c.playbackRate.value=(1-a.ng+Math.random()*a.ng*2)*a.pitch;c.buffer=this.buffer;void 0===a.time?c.start(u.Audio.U.currentTime+
a.delay):c.start(a.time+a.delay);return c};u.Audio.prototype.load=function(a){this.name=sb(a);var b=xb(a);a=a.slice(a.position,a.position+=b);var c=this;u.Audio.U.decodeAudioData(a.buffer).then(function(d){c.buffer=d})};u.Audio.prototype.save=function(a){ub(a,this.name);zb(a,this.pf.length);a.set(this.pf,a.position);a.position+=this.pf.length};var Wd,Xd=new Xa(fb),Yd=new Za,eb=new Za,Zd=new U;Zd.scale(.99609375,.99609375,.99609375);var $d=[];function ae(a){var b=Xd.get(a);if(b)return b;b=new be(a);Xd.push(b);return b}function ce(a){a=de(a);return new O(a.x-4096<<19,a.y-4096<<19)}function ee(a,b){function c(d){d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;return(d|d<<1)&1431655765}return c(a)<<1|c(b)}
function de(a){function b(c){c=(c|c>>1)&858993459;c=(c|c>>2)&252645135;c=(c|c>>4)&16711935;return(c|c>>8)&65535}a=new O(a>>>1&1431655765,a>>>0&1431655765);a.x=b(a.x);a.y=b(a.y);return a}
function fe(a,b){isNaN(a)&&(a=0);isNaN(b)&&(b=Xd.elements.length-1);if(a==b)return Xd.elements[a];for(var c=Xd.elements[a].index,d=c^Xd.elements[b].index,e=0;d>>=1;)e++;var h=1<<e,g=(2<<e)-1,k=a,l=b+1;for(d=Math.floor(k/2+l/2);k<l;){var m=Xd.elements[d].index&g;if(h<m)l=d,d=Math.floor(k/2+l/2);else if(h>m)k=d+1,d=Math.floor(k/2+l/2);else break}c=e&1?new ge(de(c&~g|h).x):new he(de(c&~g|h).y);c.value-=4096;c.value<<=19;c.fe=fe(a,d-1);c.ge=fe(d,b);return c}function ge(a){this.value=a}
function he(a){this.value=a}function ie(a,b,c){this.start=a;this.Vb=b;this.Ja=c;this.Yb=[new je(Wd,0,1)];this.t=0}function je(a,b,c){this.node=a;this.Ab=b;this.wc=c}ie.prototype.next=function(){for(;this.Yb.length;){var a=this.Yb.shift();this.t=a.Ab;if(a.node instanceof be)return a;this.zc(a)}return null};
ie.prototype.zc=function(a){var b=a.node;if(b instanceof ge){var c=this.start.z;var d=this.Vb.z}else c=this.start.x,d=this.Vb.x;if(0<d){var e=new je(b.ge,(b.value-this.Ja-c)/d,a.wc);e.Ab<=a.wc&&e.wc>=a.Ab&&this.Yb.unshift(e);c=new je(b.fe,a.Ab,(b.value+this.Ja-c)/d);c.Ab<=a.wc&&c.wc>=a.Ab&&this.Yb.unshift(c)}else 0>d?(e=new je(b.fe,(b.value+this.Ja-c)/d,a.wc),e.Ab<=a.wc&&e.wc>=a.Ab&&this.Yb.unshift(e),c=new je(b.ge,a.Ab,(b.value-this.Ja-c)/d),c.Ab<=a.wc&&c.wc>=a.Ab&&this.Yb.unshift(c)):(c>=b.value-
this.Ja&&this.Yb.unshift(new je(b.ge,a.Ab,a.wc)),c<=b.value+this.Ja&&this.Yb.unshift(new je(b.fe,a.Ab,a.wc)))};
function ke(a,b,c){if(0==Xd.elements.length)return null;for(var d=b.length(),e=new ie(a,b,0),h,g=null,k=1;(h=e.next())&&!(h.t>k);){h=p(h.node.Ca);for(var l=h.next();!l.done;l=h.next())!(l=l.value.ve(a,0,0,b))||l.t>k||(l.d=l.t*d,-1>l.d||(g=l,k=l.t))}if(c)return g;c=p($d);for(l=c.next();!l.done;l=c.next())e=l.value,!(h=e.ve(a,0,0,b))||h.t>k||(h.d=h.t*d,-1>h.d||(h.item=e.item,g=h,k=h.t));return g}
function le(a,b){if(0==Xd.elements.length)return null;for(var c=new ie(a,new F(240*b.x,0,240*b.z),0),d,e=null,h=240;(d=c.next())&&!(240*d.t>h);){d=p(d.node.Ca);for(var g=d.next();!g.done;g=d.next())!(g=g.value.Ch(a,b))||g.t>h||(e=g,h=g.t)}return e}function me(a,b){return ne(a.z-b,a.x-b,a.z+b,a.x+b,void 0)}
function ne(a,b,c,d,e){e||(e=[]);for(var h=[Wd];h.length;){var g=h.shift();g instanceof ge?(a<=g.value&&h.push(g.fe),c>=g.value&&h.push(g.ge)):g instanceof he?(b<=g.value&&h.push(g.fe),d>=g.value&&h.push(g.ge)):e.push(g)}return e};var oe,pe,qe;function re(){for(var a=0,b=u.Mb.yi,c=p(se),d=c.next();!d.done;d=c.next()){d=d.value;d.Cf=a&255|d.Oc.length<<16;d=p(d.Oc);for(var e=d.next();!e.done;e=d.next())e=e.value,e.Tc(new Float32Array(b.buffer,a*b.wg,12)),e.index=a,a++}b.upload()}function te(){this.ne=this.uf=null;this.$b=0;this.og=null}function ue(a,b,c){this.V=a;this.n=new O(a.a-a.i,a.o-a.c);this.n.x/=a.length;this.n.y/=a.length;this.si=this.V.c*this.n.x+this.V.a*this.n.y;this.f=b;this.h=c;this.height=c-b}
ue.prototype.Tc=function(a){var b=0,c=ve(this);a[b++]=c.x;a[b++]=c.y;a[b++]=c.z;a[b++]=this.si;a[b++]=this.V.c;a[b++]=this.V.a;a[b++]=this.V.o;a[b++]=this.V.i;a[b++]=this.n.x;a[b++]=this.n.y;a[b++]=this.f;a[b++]=this.h;return a};function ve(a){return Uc(se[a.ea].Z.Xa,se[a.Cd.ea].Z.Xa,.5)}
function we(a,b){function c(h,g){return Math.acos(Ta((h.x*g.x+h.y*g.y)/Math.sqrt((h.x*h.x+h.y*h.y)*(g.x*g.x+g.y*g.y)),-1,1))/Math.PI}var d=b.z*a.n.x+b.x*a.n.y-a.si;if(0>=d)return 0;var e=c(new O(a.V.o-b.z,a.V.i-b.x),new O(a.V.c-b.z,a.V.a-b.x));a=c(new O(d,a.h-b.y),new O(d,a.f-b.y));return Ta(e*a*2,0,1)}function xe(a){return a.V.length/1E5*((a.h-a.f)/1E5)}function ye(a){return a.V.length/1E5*((a.height-(a.h-a.f))/1E5)}
function ze(a,b,c){c.set(0,0,0);for(var d=1,e=p(b.Oc),h=e.next();!h.done;h=e.next()){var g=h.value;h=we(g,a);d-=h;g=ve(g);c.x+=g.x*h;c.y+=g.y*h;c.z+=g.z*h}0<d&&(a=b.Z.Xa,c.x+=a.x*d,c.y+=a.y*d,c.z+=a.z*d)};function Ae(a){u.pa.call(this,a);this.ih=new U;this.Lc=45*Math.PI/180;this.xf=1E4;this.nf=1E9;this.rect=null;this.Yf=new U;this.Li=new U}Ae.prototype=Object.create(u.pa.prototype);Ae.prototype.constructor=Ae;Ae.Fb=Math.tan(Rb(30));Ae.Hg=function(a,b,c,d){d.D=2/a.l;d.I=0;d.J=0;d.Pa=0;d.G=0;d.m11=2/a.C;d.m12=0;d.m13=0;d.F=0;d.m21=0;d.m22=-2/(c-b);d.m23=0;d.A=0;d.m31=0;d.m32=-(c+b)/(c-b);d.m33=1};Ae.Nf=function(a,b,c){c=Math.tan(c)*a;var d=c*u.viewport.ratio;return{n:a,Bj:b,t:c,ba:2*-c+c,r:d,aj:-d}};
Ae.Mf=function(a,b,c,d,e,h,g){g.D=2*a/(d-c);g.I=0;g.J=0;g.Pa=0;g.G=0;g.m11=2*a/(e-h);g.m12=0;g.m13=0;g.F=(d+c)/(d-c);g.m21=(e+h)/(e-h);g.m22=(b+a)/(a-b);g.m23=-1;g.A=0;g.m31=0;g.m32=2*b*a/(a-b);g.m33=0};Ae.xj=function(a,b,c,d,e){var h=b*Ae.Fb;c*=Ae.Fb;d=Math.tan(d);b=h/d;c/=d;e.D=b/(h*a.ratio);e.I=0;e.J=0;e.Pa=0;e.G=0;e.m11=b/h;e.m12=0;e.m13=0;e.F=0;e.m21=0;e.m22=-(c+b)/(c-b);e.m23=-1;e.A=0;e.m31=0;e.m32=-(2*c*b)/(c-b);e.m33=0;return e};Ae.prototype.step=function(){u.pa.prototype.step.call(this)};
function Ge(a){if(a.rect)Ae.Hg(a.rect,a.xf,a.nf,a.ih);else{var b=Ae.Nf(a.xf,a.nf,a.Lc);Ae.Mf(a.xf,a.nf,b.aj,b.r,b.t,b.ba,a.ih)}a.N.Zg(a.Yf);$c(a.ih,a.Yf,a.Li);u.Mb.oc.O("eyeMatrix",a.Yf);u.Mb.oc.O("viewMatrix",a.Li);u.Mb.oc.O("cameraPos",new Wc(a.N.A,a.N.m31,a.N.m32,a.N.m33));u.Mb.oc.upload()}
function He(){function a(d){u.Ei(d);Ge(d);Ae.Ni(d);gd(u.Pc)}var b=u.u.Ba;if(b.tj){var c=new fc(b.rect.l/2,b.rect.C,null);c.x=u.af.x;c.y=u.af.y;u.Ff(c);a(b.Lh);c=new fc(b.rect.l/2,b.rect.C,null);c.x=u.af.x+c.l;c.y=u.af.y;u.Ff(c);a(b.Kh)}else u.Ff(u.af),a(b)}
Ae.Ni=function(a){function b(m,n){function r(z){function A(D){v.Da(Math.atan2(D.x,-D.z),Math.atan2(D.y,-D.z),D.z)}var v=new ed;z=[new F(z.V.i,z.f,z.V.o),new F(z.V.a,z.f,z.V.c),new F(z.V.a,z.h,z.V.c),new F(z.V.i,z.h,z.V.o)];for(var C=p(z),w=C.next();!w.done;w=C.next())w=w.value,a.Yf.kb(w,w);C=z[3];z=p(z);for(w=z.next();!w.done;w=z.next())w=w.value,0>=w.z&&A(w),2==Math.abs(Math.sign(w.z)-Math.sign(C.z))&&A(Uc(C,w,C.z/(C.z-w.z))),C=w;return v}if((!u.Fj||n!=l)&&n.Z.Sa!=u.v){n.Z.Sa=u.v;for(var q=p(n.cells.elements),
t=q.next();!t.done;t=q.next())if(t=t.value,t.Kf!=u.v)for(t.Kf<u.v-1&&db(t.wj),t.Kf=u.v,t=t.jh.first();null!=t.item;t=t.next)t.item.Z.Sa=u.v}n=p(n.Oc);for(q=n.next();!q.done;q=n.next())q=q.value,q.h<=q.f||0>=N(q.V,c.z,c.x)||(t=e.get(q),t||(t=r(q),t.index=q.index,e.push(t)),t.B>=m.B||(t=t.ca(),t.j<m.j&&(t.j=m.j),t.s>m.s&&(t.s=m.s),t.f<m.f&&(t.f=m.f),t.h>m.h&&(t.h=m.h),t.j>=t.s||t.f>=t.h||b(t,se[q.Cd.ea])))}var c=new F(a.N.A,a.N.m31,a.N.m32),d=ke(c,new F(0,-4294967295,0),!0);if(d){var e=new Xa(function(m,
n){return m.index<n.index?-1:m.index>n.index?1:0}),h=a.Lc,g=Math.atan(Math.tan(h)*u.viewport.ratio),k=new ed;k.j=-g;k.s=g;k.f=-h;k.h=h;k.B=0;k.M=0;var l=se[d.item.ea];b(k,l,!0)}};function qd(){this.name=null;this.xc=[]}qd.prototype.save=function(a){ub(a,this.name);Gb(a,Math.ceil(this.tb/1E3));vb(a,this.xc.length);for(var b=p(this.xc),c=b.next();!c.done;c=b.next())c.value.save(a)};qd.prototype.load=function(a){this.name=sb(a);this.tb=1E3*Fb(a);for(var b=tb(a),c=0;c<b;c++){var d=new Ie;d.load(a);this.xc.push(d)}};function Ie(){this.Y=u.m.hb.get("defaultMaterial");this.pb=[];this.sb=[];this.Wb=[]}
Ie.prototype.compile=function(){this.Dh=Bd.Jf.length;Bd.Jf=Bd.Jf.concat(this.pb);for(var a=0;a<this.sb.length;a++)this.sb[a]+=this.Dh;for(a=0;a<this.Wb.length;a++)this.Wb[a]+=this.Dh;this.vj=Dd.elements.length;Dd.elements=Dd.elements.concat(this.sb);this.Wh=Dd.elements.length;Dd.elements=Dd.elements.concat(this.Wb)};Ie.prototype.ca=function(){var a=new Ie;a.pb=this.pb;a.Ka=this.Ka;a.sb=this.sb;a.Xc=this.Xc;a.Wb=this.Wb;a.Wc=this.Wc;return a};
Ie.prototype.save=function(a){ub(a,this.Y.name);Gb(a,this.pb.length);for(var b=p(this.pb),c=b.next();!c.done;c=b.next())c=c.value,Kb(a,c.x),Kb(a,c.y),Kb(a,c.z);b=p(this.pb);for(c=b.next();!c.done;c=b.next())c=c.value,Ib(a,c.Pb),Ib(a,c.bc),Ib(a,c.Qb);b=p(this.pb);for(c=b.next();!c.done;c=b.next())c=c.value,Mb(a,c.kc),Mb(a,c.lc);Gb(a,this.sb.length);b=p(this.sb);for(c=b.next();!c.done;c=b.next())Gb(a,c.value);Gb(a,this.Wb.length);b=p(this.Wb);for(c=b.next();!c.done;c=b.next())Gb(a,c.value);Gb(a,this.Yd);
return a};Ie.prototype.load=function(a){this.Y=u.m.hb.get(sb(a));for(var b=Fb(a),c=0;c<b;c++){var d=new Ic(Jb(a),Jb(a),Jb(a));this.pb.push(d)}for(c=0;c<b;c++)d=this.pb[c],d.Pb=Hb(a),d.bc=Hb(a),d.Qb=Hb(a);for(c=0;c<b;c++)d=this.pb[c],d.kc=Lb(a),d.lc=Lb(a);b=Fb(a);for(c=0;c<b;c++)this.sb.push(Fb(a));b=Fb(a);for(c=0;c<b;c++)this.Wb.push(Fb(a));this.Yd=Fb(a);this.compile()};
function Je(){function a(q,t){return q.y<t.y?-1:q.y>t.y?1:0}function b(q,t){return q.z<t.z?-1:q.z>t.z?1:q.x<t.x?-1:q.x>t.x?1:0}var c=Ke,d=[];d.cmp=b;for(var e=p(c),h=e.next();!h.done;h=e.next()){var g=h.value;h=g[g.length-1];g=p(g);for(var k=g.next();!k.done;k=g.next()){k=k.value;if(0==b(h,k)){var l=[];l.cmp=a;l.z=h.z;l.x=h.x;l=Qa(d,l);Qa(l,h);Qa(l,k)}h=k}}c=p(c);for(h=c.next();!h.done;h=c.next())for(e=h.value,k=e.length-1,k=e[k],h=0;h<e.length;h++){g=e[h];if(0==b(k,g))if(l=Pa(d,k),k.y<g.y){var m=
Oa(l,k),n=Oa(l,g);for(m+=1;m<l.length&&!(m>=n);){var r=Kc(k,g,(l[m].y-k.y)/(g.y-k.y));r.y=l[m].y;e.splice(h++,0,r);m++}}else for(m=Oa(l,k),n=Oa(l,g),--m;0<=m&&!(m<=n);)r=Kc(k,g,(l[m].y-k.y)/(g.y-k.y)),r.y=l[m].y,e.splice(h++,0,r),m--;k=h;k=g}}function Le(){Ie.call(this);this.wd=[];this.Ka=new xd;this.Wc=this.Xc=null;this.Yd=0}Le.prototype=Object.create(Ie.prototype);Le.prototype.constructor=Le;
Le.prototype.compile=function(){this.sb=[];for(var a=p(this.wd),b=a.next();!b.done;b=a.next()){b=b.value;for(var c=2;c<b.length;c++)this.sb.push(b[0]),this.sb.push(b[c-1]),this.sb.push(b[c])}u.Db(this.Ka);wd(this.Ka,this.pb.length*this.Ka.nb);this.Ka.upload(this.pb);this.sb.length?(this.Xc||(this.Xc=new zd),u.Fd(this.Xc),wd(this.Xc,2*this.sb.length),this.Xc.upload(this.sb)):this.Xc=null;this.Wb.length?(this.Wc||(this.Wc=new zd),u.Fd(this.Wc),wd(this.Wc,2*this.Wb.length),this.Wc.upload(this.Wb)):this.Wc=
null};function Me(a,b){b||(b=a.name);u.pa.call(this,b);this.src=a}Me.prototype=Object.create(u.pa.prototype);Me.prototype.constructor=Me;Me.prototype.create=function(){this.xc=[];for(var a=p(this.src.xc),b=a.next();!b.done;b=a.next())b=b.value,b=b instanceof Le?new Ne(b):new Oe(b),this.xc.push(b),this.xd&&(b.xd=!0),b.qa=this.N,W(b,this)};function Oe(a,b){u.pa.call(this,b);this.src=a;this.pj=this.oj=!1}Oe.prototype=Object.create(u.pa.prototype);Oe.prototype.constructor=Oe;
function Pe(a){var b=null;a.parent&&(b=a.parent.H);b||(b=a.H);b||(b=a.src.H);b||(b=u.m.ma.get("physical"));return b}function Qe(a){var b=null;a.parent&&(b=a.parent.Y);b||(b=a.Y);b||(b=a.src.Y);b||(b=u.m.hb.get("defaultMaterial"));return b}function Re(a){var b=null;a.parent&&(b=a.parent.ia);b||(b=a.ia);b||(b=a.src.ia);return b}
Oe.prototype.Qa=function(){u.Db(Bd);u.eb(Pe(this));u.H.O("modelMatrix",this.N);u.hc(0,Re(this));var a=Qe(this);a.bind();this.Qf?u.H.O("architectureLighting",1,!0):u.H.O("architectureLighting",0,!0);u.H.O("ambientLight",this.Z.Xa,!1);if(this.Fa)for(var b=0;b<this.Fa.length;b+=3)u.H.O(this.Fa[b],this.Fa[b+1],this.Fa[b+2]);u.rb(a.va);u.xb(a.va?1:2);u.gc(this.xd?2:1);this.src.sb.length?(u.Fd(Dd),x.drawElements(x.TRIANGLES,this.src.sb.length,x.UNSIGNED_SHORT,2*this.src.vj)):x.drawArrays(x.TRIANGLES,this.src.Dh,
this.src.pb.length);this.src.Wb.length&&(this.oj&&this.Uh(),this.pj&&this.Vh())};
Oe.prototype.Uh=function(){u.rb(1);u.xb(1);u.eb(u.m.ma.get("edge"));u.H.O("toonMinDist",Infinity,!1);u.H.O("modelMatrix",this.N);var a=new F(this.N.D,this.N.I,this.N.J),b=new F(this.N.G,this.N.m11,this.N.m12),c=new F(this.N.F,this.N.m21,this.N.m22);a.oa(1);b.oa(1);c.oa(1);var d=new F(u.Ba.N.A-this.N.A,u.Ba.N.m31-this.N.m31,u.Ba.N.m32-this.N.m32);a=Vb(a,d);b=Vb(b,d);c=Vb(c,d);u.H.O("eyeVector",new F(a,b,c));x.drawElements(x.LINES,this.src.Wb.length-this.src.Yd,x.UNSIGNED_SHORT,2*this.src.Wh+2*this.src.Yd)};
Oe.prototype.Vh=function(){u.rb(1);u.xb(1);u.eb(u.m.ma.get("toon"));u.H.O("toonMinDist",Infinity,!1);u.H.O("modelMatrix",this.N);x.drawElements(x.LINES,this.src.Yd,x.UNSIGNED_SHORT,2*this.src.Wh)};function Ne(a,b){Oe.call(this,a,b)}Ne.prototype=Object.create(Oe.prototype);f=Ne.prototype;f.constructor=Ne;f.step=function(){Oe.prototype.step.call(this)};
f.Qa=function(){u.Db(this.src.Ka);u.eb(Pe(this));u.H.O("modelMatrix",this.N);u.hc(0,Re(this));var a=Qe(this);a.bind();this.Qf?u.H.O("architectureLighting",1,!0):u.H.O("architectureLighting",0,!0);u.H.O("ambientLight",this.Z.Xa,!1);if(this.Fa)for(var b=0;b<this.Fa.length;b+=3)u.H.O(this.Fa[b],this.Fa[b+1],this.Fa[b+2]);u.rb(a.va);u.xb(a.va?1:2);u.gc(this.xd?2:1);this.src.sb.length?(u.Fd(this.src.Xc),x.drawElements(x.TRIANGLES,this.src.sb.length,x.UNSIGNED_SHORT,0)):x.drawArrays(x.TRIANGLES,0,this.src.pb.length)};
f.Uh=function(){u.rb(1);u.xb(1);u.eb(u.m.ma.get("edge"));u.H.O("toonMinDist",Math.pow(5E5,2),!1);u.H.O("modelMatrix",this.N);var a=new F(this.N.D,this.N.I,this.N.J),b=new F(this.N.G,this.N.m11,this.N.m12),c=new F(this.N.F,this.N.m21,this.N.m22);a.oa(1);b.oa(1);c.oa(1);var d=new F(u.Ba.N.A-this.N.A,u.Ba.N.m31-this.N.m31,u.Ba.N.m32-this.N.m32);a=Vb(a,d);b=Vb(b,d);c=Vb(c,d);u.H.O("eyeVector",new F(a,b,c));a=this.src.Wb.length-this.src.Yd;b=2*this.src.Yd;u.Fd(this.src.Wc);x.drawElements(x.LINES,a,x.UNSIGNED_SHORT,
b)};f.Vh=function(){u.rb(1);u.xb(1);u.eb(u.m.ma.get("toon"));u.H.O("toonMinDist",Math.pow(5E5,2),!1);u.H.O("modelMatrix",this.N);var a=this.src.Yd;u.Fd(this.src.Wc);x.drawElements(x.LINES,a,x.UNSIGNED_SHORT,0)};function Se(){this.scale=1;this.Ja=25E3;this.Tb=0;this.xd=!1;this.frame=0;this.fc=1}function Te(a){a.D=u.Ba.N.D;a.I=u.Ba.N.I;a.J=u.Ba.N.J;a.G=u.Ba.N.G;a.m11=u.Ba.N.m11;a.m12=u.Ba.N.m12;a.F=u.Ba.N.F;a.m21=u.Ba.N.m21;a.m22=u.Ba.N.m22;var b=this.scale*this.Ja,c=this.xd?-b:b,d=Math.cos(this.Tb),e=Math.sin(this.Tb),h=new U;h.D=d*c;h.I=e*c;h.G=-e*b;h.m11=d*b;Yc(a,h,a)}
function Ue(){0>this.frame||(Te.call(this,this.N),u.Db(Ve),u.eb(this.H),u.hc(0,this.ia),this.Y.bind(),u.H.O("ambientLight",this.Z.Xa,!1),u.rb(this.Y.va),u.xb(this.Y.va?1:2),u.gc(0),u.H.O("modelMatrix",this.N),u.H.O("color",this.color),x.drawArrays(x.TRIANGLE_FAN,We(this.frame,this.fc),4))}
for(var Xe=[],Ye=0;4>Ye;Ye++)for(var Ze=1<<Ye,$e=Ze<<Ye,af=1/Ze,bf=0;bf<$e;bf++){var cf=bf%Ze,df=bf/Ze|0;cf*=af;df*=af;Xe.push(Rc(new Ic(-1,-1,0),cf,df));Xe.push(Rc(new Ic(1,-1,0),cf+af,df));Xe.push(Rc(new Ic(1,1,0),cf+af,df+af));Xe.push(Rc(new Ic(-1,1,0),cf,df+af))}var Ve=new xd;wd(Ve,Xe.length*Ve.nb);Ve.upload(Xe);function ef(a,b){for(var c=0;b>Math.pow(1<<c,2);)c++;var d=1<<c;b=1/d;c=a%d*b;a=(a/d|0)*b;return[c,a,c+b,a+b]}
function We(a,b){switch(b){default:return 4*a;case 4:return 4+4*a;case 16:return 20+4*a;case 64:return 84+4*a}};function ff(){this.color=this.ia=this.H=null;this.va=NaN;this.sd=[];this.Yb=[];this.Yb.cmp=gf;this.ej=64}ff.prototype.clear=function(){this.sd.length=0;this.Yb.length=0};ff.prototype.Qa=function(){u.eb(this.H);u.H.O("modelMatrix",Zd);u.hc(0,this.ia);u.H.O("color",this.color);u.rb(this.va);u.xb(1);u.gc(0);for(var a=p(this.Yb),b=a.next();!b.done;b=a.next())b.value.Qa()};
function hf(a,b,c,d,e,h,g){a.sd.length==a.ej&&a.sd.shift().remove();var k=[];k.cmp=gf;var l=new F,m=new F;Wb(c,l,m);var n=new U;n.D=l.x;n.G=m.x;n.F=c.x;n.A=b.x;n.I=l.y;n.m11=m.y;n.m21=c.y;n.m31=b.y;n.J=l.z;n.m12=m.z;n.m22=c.z;n.m32=b.z;l=new U;m=Math.cos(d)*e;d=Math.sin(d)*e;l.D=m;l.G=-d;l.I=d;l.m11=m;l.m22=e;$c(n,l,n);var r=n.Zg(new U),q=ef(h,g);e*=1.733;g=me(b,e);h={};g=p(g);for(d=g.next();!d.done;h={Lf:h.Lf},d=g.next())for(h.Lf=d.value,d={},l=p(h.Lf.Ca),m=l.next();!m.done;d={Ob:d.Ob,ya:d.ya},m=
l.next()){d.ya=m.value;m=function(A,v){return function(){function C(V,da){var xa=[],ba=V[V.length-1],ya=da(ba);V=p(V);for(var ha=V.next();!ha.done;ha=V.next()){ha=ha.value;var Gc=da(ha);2==Math.abs(Math.sign(Gc)-Math.sign(ya))&&xa.push(Uc(ba,ha,ya/(ya-Gc)));0<=Gc&&xa.push(ha);ya=Gc;ba=ha}return 3>xa.length?null:xa}for(var w=p(A.Ob),D=w.next();!D.done;D=w.next())D=D.value,r.kb(D,D);w=p([function(V){return 1-V.x},function(V){return 1+V.x},function(V){return 1-V.y},function(V){return 1+V.y},function(V){return 1-
V.z},function(V){return 1+V.z}]);for(D=w.next();!D.done;D=w.next())if(A.Ob=C(A.Ob,D.value),!A.Ob)return;for(w=0;w<A.Ob.length;w++){D=A.Ob[w];var G=.5*D.x+.5,Q=.5*D.y+.5;n.kb(D,D);var aa=new Ic;aa.x=D.x;aa.y=D.y;aa.z=D.z;aa.kc=q[0]*(1-G)+q[2]*G;aa.lc=q[1]*(1-Q)+q[3]*Q;A.Ob[w]=aa}w=[];w.ea=A.ya.ea;w.cellIndex=v.Lf.index;w=Qa(k,w);for(D=2;D<A.Ob.length;D++)w.push(A.Ob[0]),w.push(A.Ob[D-1]),w.push(A.Ob[D])}}(d,h);d.Ob=[];if(d.ya instanceof jf){if(d.ya.h<b.y-e)continue;if(d.ya.f>b.y+e)continue;var t=N(d.ya.S,
b.z,b.x);if(t<-e)continue;if(t>e)continue;t=d.ya.S.getParameter(b.z,b.x);if(t<-e)continue;if(t>d.ya.S.length+e)continue;if(.707107>Vb(new F((d.ya.S.o-d.ya.S.c)/d.ya.S.length,0,(d.ya.S.a-d.ya.S.i)/d.ya.S.length),c))continue;d.Ob.push(new F(d.ya.S.i,d.ya.f,d.ya.S.o),new F(d.ya.S.a,d.ya.f,d.ya.S.c),new F(d.ya.S.a,d.ya.h,d.ya.S.c),new F(d.ya.S.i,d.ya.h,d.ya.S.o))}else{if(d.ya.y<b.y-e)continue;if(d.ya.y>b.y+e)continue;var z=p(d.ya.$);for(t=z.next();!t.done;t=z.next());if(d.ya instanceof kf){if(.707107>
c.y)continue}else if(-.707107<c.y)continue;z=p(d.ya.$);for(t=z.next();!t.done;t=z.next())t=t.value,d.Ob.push(new F(t.i,d.ya.y,t.o));d.ya instanceof lf&&d.Ob.reverse()}m()}b=new mf;c=p(k);for(e=c.next();!e.done;e=c.next())e=e.value,h=Pa(a.Yb,e),h||(h=new nf(a),h.ea=e.ea,h.cellIndex=e.cellIndex,h.Z=se[h.ea].Z,h.create(),Qa(a.Yb,h)),of(h,e),b.Ai.push({node:h,mc:e.length});a.sd.push(b)}function nf(a){this.Ri=a;this.cellIndex=this.ea=NaN;this.Z=null;this.mc=this.fd=0}
function gf(a,b){return a.ea<b.ea?-1:a.ea>b.ea?1:a.cellIndex<b.cellIndex?-1:a.cellIndex>b.cellIndex?1:0}nf.prototype.create=function(){this.Ka=new xd;this.Ka.usage=x.DYNAMIC_DRAW;wd(this.Ka,48*this.Ka.nb)};
function pf(a,b){var c=a.mc+b;if(0>=c)b=a.Ri.Yb,c=Oa(b,a),b[c]&&0==b.cmp(b[c],a)&&b.splice(c,1);else{c*=a.Ka.nb;if((a.fd+a.mc+b)*a.Ka.nb>a.Ka.buffer.byteLength)b=new ArrayBuffer(c<<1);else if(48<=a.fd)b=a.Ka.buffer;else return;c=new Uint8Array(a.Ka.buffer,a.fd*a.Ka.nb,a.mc*a.Ka.nb);(new Uint8Array(b)).set(c);a.Ka.buffer=b;a.Ka.bind();x.bufferData(a.Ka.target,a.Ka.buffer,a.Ka.usage);a.fd=0}}
function of(a,b){pf(a,b.length);a.Ka.bind();a.Ka.write(b,a.fd+a.mc);x.bufferSubData(a.Ka.target,(a.fd+a.mc)*a.Ka.nb,new Uint8Array(a.Ka.buffer,(a.fd+a.mc)*a.Ka.nb,b.length*a.Ka.nb));a.mc+=b.length}nf.prototype.Qa=function(){if(this.Z.Sa<u.v)return!1;u.Db(this.Ka);u.H.O("ambientLight",this.Z.Xa);x.drawArrays(x.TRIANGLES,this.fd,this.mc)};function mf(){this.Ai=[]}mf.prototype.remove=function(){for(var a=p(this.Ai),b=a.next();!b.done;b=a.next())b=b.value,b.node.fd+=b.mc,b.node.mc-=b.mc,pf(b.node,0)};var se,qf,rf,sf,tf,uf,vf,wf,xf,yf,zf,Af,Bf,Cf,Df,Ef,Ff;function Gf(a,b,c,d){a=void 0===a?NaN:a;b=void 0===b?NaN:b;c=void 0===c?NaN:c;d=void 0===d?NaN:d;this.B=a;this.M=b;this.j=c;this.s=d}function Hf(a,b,c){this.d=a;this.P=b;this.R=c}function If(a,b,c){this.d=-a;this.P=b;this.R=c}function Jf(a,b,c){this.d=-a;this.P=-b;this.R=-c}function Kf(a,b,c){this.d=a;this.P=-b;this.R=-c}f=Gf.prototype;f.Qd=function(a,b){return a<=this.B||a>=this.M||b<=this.j||b>=this.s?!1:!0};
f.me=function(a,b){a<this.B?a=this.B:a>this.M&&(a=this.M);b<this.j?b=this.j:b>this.s&&(b=this.s);return new O(a,b)};function Lf(a,b,c){var d=0;b<a.B?d+=a.B-b:b>a.M&&(d+=b-a.M);c<a.j?d+=a.j-c:c>a.s&&(d+=c-a.s);return d}function Mf(a,b,c){b>=a.B||(a.B=b);b<=a.M||(a.M=b);c>=a.j||(a.j=c);c<=a.s||(a.s=c)}function Nf(a,b){b.B>=a.B||(a.B=b.B);b.M<=a.M||(a.M=b.M);b.j>=a.j||(a.j=b.j);b.s<=a.s||(a.s=b.s)}f.Fe=function(a,b){a-=.5*this.M+.5*this.B;b-=.5*this.s+.5*this.j;return 1E5/Math.sqrt(a*a+b*b)};
f.expand=function(a,b){return this.ca(this.B-a,this.M+a,this.j-b,this.s+b)};function Of(a,b){var c=new Hf(a.j,a.B,a.M);c.source=a;b.push(c);c=new If(a.M,a.j,a.s);c.source=a;b.push(c);c=new Jf(a.s,a.M,a.B);c.source=a;b.push(c);c=new Kf(a.B,a.s,a.j);c.source=a;b.push(c)}f.ca=function(a,b,c,d){a=new Gf(a,b,c,d);this.Ph&&(a.Ph=this.Ph);this.platform&&(a.platform=this.platform);this.xa&&(a.xa=this.xa);void 0!==this.direction&&(a.direction=this.direction);void 0!==this.type&&(a.type=this.type);return a};
f.Re=function(a,b){if(!Pf(this,a))return!1;var c=this.j,d=this.s;this.s>a.s&&(b.push(this.ca(this.B,this.M,a.s,this.s)),d=a.s);this.j<a.j&&(b.push(this.ca(this.B,this.M,this.j,a.j)),c=a.j);this.M>a.M&&b.push(this.ca(a.M,this.M,c,d));this.B<a.B&&b.push(this.ca(this.B,a.B,c,d));return!0};function Qf(a,b){return a.ca(a.B+b.B,a.M+b.M,a.j+b.j,a.s+b.s)}
f.rotate=function(a){switch(a){case 0:return this.ca(this.B,this.M,this.j,this.s);case 1:return this.ca(-this.s,-this.j,this.B,this.M);case 2:return this.ca(-this.M,-this.B,-this.s,-this.j);case 3:return this.ca(this.j,this.s,-this.M,-this.B)}};f.Ue=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return this.ca(this.B+a,this.M+a,this.j+b,this.s+b)};function Rf(a,b){a=new Gf(Math.max(a.B,b.B),Math.min(a.M,b.M),Math.max(a.j,b.j),Math.min(a.s,b.s));return a.M<a.B||a.s<a.j?null:a}
function Pf(a,b){return a.B>=b.M||a.M<=b.B||a.j>=b.s||a.s<=b.j?!1:!0}function Sf(a,b){return!Pf(a,b)||a.f>=b.h||a.h<=b.f?!1:!0}function Tf(a,b,c){var d=0;a=p(a);for(var e=a.next();!e.done;e=a.next())d+=e.value.Fe(b,c);return d}f=Hf.prototype;f.wb=function(){return 0};f.ec=function(){return this.P};f.dc=function(){return this.d};f.vb=function(){return this.R};f.ub=function(){return this.d};f.raw=function(a,b,c){this.d=a;this.P=b;this.R=c;return this};
f.he=function(){return new J(this.ec(),this.dc(),this.vb(),this.ub())};f.ca=function(a,b,c){a=new Hf(a,b,c);a.source=this.source;return a};f.qf=function(a,b,c){if(!this.Hf){var d=new O(this.P+a,this.d-b);d.source=this;c.push(d)}this.lf||(a=new O(this.R-a,this.d-b),a.source=this,c.push(a))};f.De=function(a,b){return new O(this.P+a,this.d+b)};f.Qd=function(a,b){return b>this.d||b<this.d||a<this.P||a>=this.R?!1:!0};
f.me=function(a){return a<this.P?new O(this.P,this.d):a>this.R?new O(this.R,this.d):new O(a,this.d)};f.Re=function(a,b){if(this.d>a.s||this.d<=a.j||this.P>=a.M||this.R<=a.B)return!1;this.P<a.B&&b.push(this.ca(this.d,this.P,a.B));this.R>a.M&&b.push(this.ca(this.d,a.M,this.R));return!0};f.zg=function(){return new Gf(this.P,this.R,this.d,this.d)};
f.rotate=function(a){switch(a){case 0:return(new Hf).raw(this.d,this.P,this.R);case 1:return(new If).raw(this.d,this.P,this.R);case 2:return(new Jf).raw(this.d,this.P,this.R);case 3:return(new Kf).raw(this.d,this.P,this.R)}};f.Ue=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Hf).raw(this.d+b,this.P+a,this.R+a)};f=If.prototype;f.wb=function(){return 1};f.ec=function(){return-this.d};f.dc=function(){return this.P};f.vb=function(){return-this.d};f.ub=function(){return this.R};
f.raw=Hf.prototype.raw;f.he=Hf.prototype.he;f.ca=function(a,b,c){a=new If(-a,b,c);a.source=this.source;return a};f.qf=function(a,b,c){if(!this.Hf){var d=new O(-this.d+a,this.P+b);d.source=this;c.push(d)}this.lf||(a=new O(-this.d+a,this.R-b),a.source=this,c.push(a))};f.De=function(a,b){return new O(-this.d-b,this.P+a)};f.Qd=function(a,b){return a>-this.d||a<-this.d||b<this.P||b>=this.R?!1:!0};f.me=function(a,b){return b<this.P?new O(-this.d,this.P):b>this.R?new O(-this.d,this.R):new O(-this.d,b)};
f.Re=function(a,b){if(-this.d>=a.M||-this.d<a.B||this.P>=a.s||this.R<=a.j)return!1;this.P<a.j&&b.push(this.ca(this.d,this.P,a.j));this.R>a.s&&b.push(this.ca(this.d,a.s,this.R));return!0};f.zg=function(){return new Gf(-this.d,-this.d,this.P,this.R)};f.rotate=function(a){switch(a){case 0:return(new If).raw(this.d,this.P,this.R);case 1:return(new Jf).raw(this.d,this.P,this.R);case 2:return(new Kf).raw(this.d,this.P,this.R);case 3:return(new Hf).raw(this.d,this.P,this.R)}};
f.Ue=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new If).raw(this.d-a,this.P+b,this.R+b)};f=Jf.prototype;f.wb=function(){return 2};f.ec=function(){return-this.P};f.dc=function(){return-this.d};f.vb=function(){return-this.R};f.ub=function(){return-this.d};f.raw=Hf.prototype.raw;f.he=Hf.prototype.he;f.ca=function(a,b,c){a=new Jf(-a,-b,-c);a.source=this.source;return a};
f.qf=function(a,b,c){if(!this.Hf){var d=new O(-this.P-a,-this.d+b);d.source=this;c.push(d)}this.lf||(a=new O(-this.R+a,-this.d+b),a.source=this,c.push(a))};f.De=function(a,b){return new O(-this.P-a,-this.d-b)};f.Qd=function(a,b){return b>-this.d||b<-this.d||a>-this.P||a<=-this.R?!1:!0};f.me=function(a){return a<-this.R?new O(-this.R,-this.d):a>-this.P?new O(-this.P,-this.d):new O(a,-this.d)};
f.Re=function(a,b){if(-this.d>=a.s||-this.d<a.j||-this.R>=a.M||-this.P<=a.B)return!1;-this.R<a.B&&b.push(this.ca(this.d,-a.B,this.R));-this.P>a.M&&b.push(this.ca(this.d,this.P,-a.M));return!0};f.zg=function(){return new Gf(-this.R,-this.P,-this.d,-this.d)};f.rotate=function(a){switch(a){case 0:return(new Jf).raw(this.d,this.P,this.R);case 1:return(new Kf).raw(this.d,this.P,this.R);case 2:return(new Hf).raw(this.d,this.P,this.R);case 3:return(new If).raw(this.d,this.P,this.R)}};
f.Ue=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Jf).raw(this.d-b,this.P-a,this.R-a)};f=Kf.prototype;f.wb=function(){return 3};f.ec=function(){return this.d};f.dc=function(){return-this.P};f.vb=function(){return this.d};f.ub=function(){return-this.R};f.raw=Hf.prototype.raw;f.he=Hf.prototype.he;f.ca=function(a,b,c){a=new Kf(a,-b,-c);a.source=this.source;return a};
f.qf=function(a,b,c){if(!this.Hf){var d=new O(this.d-a,-this.P-b);d.source=this;c.push(d)}this.lf||(a=new O(this.d-a,-this.R+b),a.source=this,c.push(a))};f.De=function(a,b){return new O(this.d+b,-this.P-a)};f.Qd=function(a,b){return a>this.d||a<this.d||b>-this.P||b<=-this.R?!1:!0};f.me=function(a,b){return b<-this.R?new O(this.d,-this.R):b>-this.P?new O(this.d,-this.P):new O(this.d,b)};
f.Re=function(a,b){if(this.d>a.M||this.d<=a.B||-this.R>=a.s||-this.P<=a.j)return!1;-this.R<a.j&&b.push(this.ca(this.d,-a.j,this.R));-this.P>a.s&&b.push(this.ca(this.d,this.P,-a.s));return!0};f.zg=function(){return new Gf(this.d,this.d,-this.R,-this.P)};f.rotate=function(a){switch(a){case 0:return(new Kf).raw(this.d,this.P,this.R);case 1:return(new Hf).raw(this.d,this.P,this.R);case 2:return(new If).raw(this.d,this.P,this.R);case 3:return(new Jf).raw(this.d,this.P,this.R)}};
f.Ue=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Kf).raw(this.d+a,this.P-b,this.R-b)};var cg=1,dg,eg=dg=new pd;dg.name="concrete";dg.Qc=new R(255,255,255,3.984375);dg.Rc=4;dg.Sc=1;dg.va=0;var fg=dg=new pd;dg.name="paint";dg.Qc=new R(255,255,255,63.75);dg.Rc=16;dg.Sc=1;dg.va=0;
function gg(){this.floor.ia=u.m.da.get("concr01");this.floor.Y=eg;this.floor.color=hg;this.la.ia=u.m.da.get("concr01");this.la.Y=eg;this.la.color=ig;var a=[],b=this.Qe,c=this.h;a:{var d=-1;if(!(b>=c)&&(0>d&&(d=c-b),b+d>c&&(d=c-b),0!=d)){b=new jg(b,b+d);a.push(b);break a}b=void 0}b&&(b.ka.ia=u.m.da.get("brick01"),b.ka.Y=eg,b.ka.color=kg);return a}
function lg(){function a(h){if(!(c>=d)&&(0>h&&(h=d-c),c+h>d&&(h=d-c),0!=h)){var g=new jg(c,c+h);b.push(g);c+=h;return g}}this.floor.ia=u.m.da.get("concr01");this.floor.Y=eg;this.floor.color=hg;this.la.ia=u.m.da.get("concr01");this.la.Y=eg;this.la.color=ig;var b=[],c=this.Qe,d=this.h,e;if(e=a(25E3))e.ka.ia=u.m.da.get("brick01"),e.ka.Y=fg,e.ka.color=mg;if(e=a(this.yb))e.ka.ia=u.m.da.get("brick01"),e.ka.Y=fg,e.ka.color=this.color;if(e=a(-1))e.ka.ia=u.m.da.get("brick01"),e.ka.Y=eg,e.ka.color=kg;return b}
function ng(){qf=u.v;rf=(new Date).getTime();sf=15;tf=0;uf=[];vf=[];se=[];wf=[];xf=null;yf=1;zf=[];Af=[];Af.index=se.length;se.push(Af);Bf=[];Bf.index=vf.length;vf.push(Bf);Bf.mg=0;Bf.y=-4E5;Bf.xa=Af;Af.push(Bf);var a=25E3*(jb(8)+10),b=25E3*(jb(8)+10);a=new Gf(-a,+a,-b,+b);a.platform=Bf;Bf.push(a);uf.push(a)}
function og(){function a(e,h){var g=25E3*Math.floor((jb(8)+10)*yf),k=25E3*Math.floor((jb(8)+10)*yf),l=[];var m=pg(e,g+h,k+h);var n=qg(m);m=uf;m=pg(m,g+h,k+h);n=rg(n,m);m=p(n);for(n=m.next();!n.done;n=m.next())n.value.qf(0,0,l);if(!l.length)return null;m=[];m.cmp=function(r,q){return r.Fe>q.Fe?-1:r.Fe<q.Fe?1:r.x<q.x?-1:r.x>q.x?1:r.z<q.z?-1:r.z>q.z?1:0};l=p(l);for(n=l.next();!n.done;n=l.next())n=n.value,n.Fe=0==h?Tf(e,n.x,n.y):Tf(uf,n.x,n.y),Qa(m,n);e=m[0];return new Gf(e.x-g,e.x+g,e.y-k,e.y+k)}if(!(tf>
(u.v-qf)*cg)){tf++;if(Bf.mg){var b=Bf.length?a(Bf,0):a(xf,jb(4)?0:325E3);if(!b)return ng(),og();b.platform=Bf;Bf.push(b);uf.push(b);Bf.mg--;return og()}if(xf){b=xf;var c=Bf;sg();var d=tg(b,c);d||(d=ug(b,c));if(!d)return sf+=Bf.length,uf.splice(vg(Bf[0]),Bf.length),Bf.length=0,Bf.mg=jb(3)+2,og()}if(tf>=sf)wg();else{xf=Bf;Bf=[];Bf.index=vf.length;vf.push(Bf);Bf.mg=jb(3)+2;yf=kb([1]);if(jb(2)||1<Af.length)Af=[],Af.la=-Infinity,Af.index=se.length,se.push(Af);Bf.y=xf.y-5E4*lb(0,1,2,3,4);Bf.y=Math.min(Bf.y,
-4E5);Bf.xa=Af;Af.push(Bf);return og()}}}
function tg(a,b){var c=[];if(a.y!=b.y){if(a.qc)for(var d,e=p(a.qc),h=e.next();!h.done;h=e.next())h=h.value,h.target==b&&(d||(d=xg(a)),c=c.concat(yg(a,b,d,h.direction)));if(b.qc){var g;d=p(b.qc);for(h=d.next();!h.done;h=d.next())h=h.value,h.target==a&&(g||(g=xg(b)),c=c.concat(yg(b,a,g,h.direction)))}a.qc||b.qc||(c=c.concat(zg(a,b)),c=c.concat(zg(b,a)))}else if(a.xa!=b.xa)c=Ag(a,b);else return null;nb(c);b=p(c);for(h=b.next();!h.done;h=b.next())if(a=h.value,Bg(a))return wf.push(a),a.li&&(b=a,c=b.li,
g=[],g.index=vf.length,vf.push(g),g.y=b.Zb.y,g.xa=b.ib.xa,g.xa.push(g),c.platform=g,g.push(c),h=vg(b.ib[0]),uf.splice(h,b.ib.length),rg(b.ib,[c]),uf.splice.apply(uf,[h,0].concat(ea(b.ib))),uf.push(c),sg(),tg(g,b.Zb)),a;return null}
function ug(a,b){function c(A,v,C){-v.d<=A.P||-v.d>A.R||v.P>=A.d||v.R<A.d||(C=[(new Hf).raw(A.d,A.P,-v.d).rotate(C),(new Kf).raw(-v.d,-A.d,-v.P).rotate(C)],C.ug=A.source,C.mf=v.source,C.La=C[0].R-C[0].P+(C[1].R-C[1].P),Qa(h,C))}function d(A,v,C){A.d!=-v.d||-v.P<=A.P||-v.R>A.R||(C=[(new Hf).raw(A.d,A.P,-v.P).rotate(C)],C.ug=A.source,C.mf=v.source,C.La=C[0].R-C[0].P,Qa(h,C))}var e=pg(uf,162500,162500),h=[];h.cmp=function(A,v){return A.La<v.La?-1:1};if(a==b){var g=Cg(a);a=[[],[],[],[]];for(var k=0;4>
k;k++){var l=Dg(e,k),m=p(g);for(b=m.next();!b.done;b=m.next()){var n=b.value;b=n.source.source;n=Eg(n.x,n.y,k);var r=n.y,q=n.x;n=Fg(n.x,n.y,l);n<=q||(r=new Hf(r,q,n),r.source=b,a[k].push(r))}}for(e=0;4>e;e++){g=void 0;g=(e+1)%4;k=p(a[e]);for(b=k.next();!b.done;b=k.next())for(l=b.value,m=p(a[g]),b=m.next();!b.done;b=m.next())c(l,b.value,e,g);if(!(2<=e))for(g=e+2,k=p(a[e]),b=k.next();!b.done;b=k.next())for(l=b.value,m=p(a[g]),b=m.next();!b.done;b=m.next())d(l,b.value,e,g)}}else{k=Cg(a);l=Cg(b);a=[[],
[],[],[]];g=[[],[],[],[]];for(m=0;4>m;m++){r=Dg(e,m);q=p(k);for(b=q.next();!b.done;b=q.next()){var t=b.value;b=t.source.source;t=Eg(t.x,t.y,m);n=t.y;var z=t.x;t=Fg(t.x,t.y,r);t<=z||(n=new Hf(n,z,t),n.source=b,a[m].push(n))}q=p(l);for(b=q.next();!b.done;b=q.next())t=b.value,b=t.source.source,t=Eg(t.x,t.y,m),n=t.y,z=t.x,t=Fg(t.x,t.y,r),t<=z||(n=new Hf(n,z,t),n.source=b,g[m].push(n))}for(e=1;4>e;e++){k=void 0;k=(e+1)%4;l=p(a[e]);for(b=l.next();!b.done;b=l.next())for(m=b.value,r=p(g[k]),b=r.next();!b.done;b=
r.next())c(m,b.value,e,k);l=p(g[e]);for(b=l.next();!b.done;b=l.next())for(m=b.value,r=p(a[k]),b=r.next();!b.done;b=r.next())c(m,b.value,e,k);k=(e+2)%4;l=p(a[e]);for(b=l.next();!b.done;b=l.next())for(m=b.value,r=p(g[k]),b=r.next();!b.done;b=r.next())d(m,b.value,e,k)}}for(e=0;e<h.length;e++){b=h[e];a=b[0];g=b[b.length-1];k=b.ug.platform;l=b.mf.platform;m=Math.min(k.y,l.y);r=Math.max(k.y,l.y);if(a==g){if(q=25E3*(Math.floor((a.R-a.P-325E3)/5E4)-1),0>q&&(q=0),Math.abs(l.y-k.y)>q){h.splice(e--,1);continue}}else if(q=
25E3*(Math.floor((a.R-a.P-325E3)/5E4)-1),0>q&&(q=0),m=Math.max(m,k.y-q),r=Math.min(r,k.y+q),q=25E3*(Math.floor((g.R-g.P-325E3)/5E4)-1),0>q&&(q=0),m=Math.max(m,l.y-q),r=Math.min(r,l.y+q),m>r){h.splice(e--,1);continue}b.y=lb(m,r);b.qc=[];Math.abs(k.y-b.y)/25E3&&b.qc.push({direction:(a.wb()+2+3)%4,target:k});Math.abs(l.y-b.y)/25E3&&b.qc.push({direction:(g.wb()+3)%4,target:l});b.qc.length||delete b.qc}e=h[jb(h.length/10)];if(!e)return!1;a=[];a.index=se.length;se.push(a);b=[];b.index=vf.length;vf.push(b);
b.y=e.y;e.qc&&(b.qc=e.qc);b.xa=a;a.push(b);a=p(e);for(g=a.next();!g.done;g=a.next())g=g.value.zg().expand(162500,162500),g.platform=b,b.push(g),uf.push(g);sg();b.y==e.mf.platform.y?(tg(e.ug.platform,b),tg(b,e.mf.platform)):(tg(b,e.mf.platform),tg(e.ug.platform,b));return e}function vg(a){for(var b=uf.length-1;0<=b;b--)if(uf[b]==a)return b;return-1}function Gg(a,b,c){var d=[];a=p(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.translate(b,c));return d}
function Dg(a,b){var c=[];a=p(a);for(var d=a.next();!d.done;d=a.next())c.push(d.value.Ue(b));return c}function Eg(a,b,c){a:{switch((4-c)%4){case 0:a=new O(a,b);break a;case 1:a=new O(-b,a);break a;case 2:a=new O(-a,-b);break a;case 3:a=new O(b,-a);break a}a=void 0}return a}function pg(a,b,c){var d=[];a=p(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.expand(b,c));return d}function Hg(a,b){var c=[];a=p(a);for(var d=a.next();!d.done;d=a.next())c.push(Qf(d.value,b));return c}
function rg(a,b){b=p(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=a.length,e=0;e<d;e++)a[e].Re(c,a)&&(a.splice(e--,1),d--)}return a}function Ig(a,b){for(var c=new Gf,d=p(a),e=d.next();!e.done;e=d.next())Nf(c,e.value);d=p(b);for(e=d.next();!e.done;e=d.next())Nf(c,e.value);c=[c];rg(c,b);return rg(a.slice(),c)}function Jg(a){var b=[];a=p(a);for(var c=a.next();!c.done;c=a.next()){c=c.value;for(var d=b.length,e=0;e<d;e++)b[e].Re(c,b)&&(b.splice(e--,1),d--);b.push(c)}return b}
function Kg(a,b){b=void 0===b?0:b;for(var c=new Gf,d=p(a),e=d.next();!e.done;e=d.next())Nf(c,e.value);b=[c.expand(b,b)];rg(b,a);return b}function Lg(a){var b=[];b.cmp=function(h,g){return h.j<g.j?-1:h.j>g.j?1:h.B<g.B?-1:h.B>g.B?1:0};a=p(a);for(var c=a.next();!c.done;c=a.next())Qa(b,c.value);for(a=0;a<b.length;a++){c=b[a];var d=Oa(b,{j:c.s,B:c.B}),e=b[d];e&&e.j==c.s&&e.B==c.B&&e.M==c.M&&(b.splice(d,1),b[a--]=c.ca(c.B,c.M,c.j,e.s))}return b}
function Fg(a,b,c){var d=Infinity;c=p(c);for(var e=c.next();!e.done;e=c.next())if(e=e.value,!(e.j>=b||e.s<=b||e.M<=a||e.B>=d)){if(e.B<a){d=a;break}d=e.B}return d}function qg(a){for(var b=[],c=p(a),d=c.next();!d.done;d=c.next())Of(d.value,b);rg(b,a);return b}function Mg(a){a.bound=new oc;for(var b=0;b<a.length;b++){var c=a[b].he();a.bound.Da(c.o,c.i);a[b]=c}}
function Ng(a){var b=[];b.cmp=function(m,n){return m.x<n.x?-1:m.x>n.x?1:m.y<n.y?-1:m.y>n.y?1:m.type<n.type?-1:m.type>n.type?1:0};a=p(a);for(var c=a.next();!c.done;c=a.next())c=c.value,Qa(b,{x:c.ec(),y:c.dc(),type:c.wb(),V:c});a=[];c=[];for(var d={};b.length;){var e=!1;d.vc=[];d.vc.bound=new Gf;d.Ub=null;d.Eb=null;var h=function(m){return function(n){n.V.wb()==m.Eb.wb()?m.Eb.R+=n.V.R-n.V.P:((m.Eb.wb()+3&3)==n.V.wb()&&(m.Eb.lf=!0,n.V.Hf=!0),m.vc.push(n.V),m.Eb=n.V);m.Ub=new O(m.Eb.vb(),m.Eb.ub());m.Ub.type=
-1;Mf(m.vc.bound,m.Ub.x,m.Ub.y)}}(d);d.Eb=b.shift().V;d.Eb.wb()&&(e=!0,d.Eb.Hf=!0);d.vc.push(d.Eb);d.Ub=new O(d.Eb.vb(),d.Eb.ub());d.Ub.type=-1;for(Mf(d.vc.bound,d.Ub.x,d.Ub.y);;){var g=[],k=Oa(b,d.Ub),l=b[k];if(!l)break;if(l.x!=d.Ub.x)break;if(l.y!=d.Ub.y)break;g[0]=k;g[1]=k;k++;(l=b[k])&&l.x==d.Ub.x&&l.y==d.Ub.y&&(g[1]=k);switch(d.Eb.wb()){case 0:k=g[0];break;case 1:k=g[1];break;case 2:k=g[1];break;case 3:k=g[0]}h(b.splice(k,1)[0])}e?(d.vc[d.vc.length-1].lf=!0,c.push(d.vc)):(d.vc.Wa=[],a.push(d.vc));
d={Eb:d.Eb,vc:d.vc,Ub:d.Ub}}b=p(c);for(c=b.next();!c.done;c=b.next())Og(c.value,a);return a}function Pg(a,b){b||(b=[]);a=p(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(c),c.Wa&&Pg(c.Wa,b);return b}
function Og(a,b){var c=null;b=p(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.B<=d.bound.B||a.bound.j<=d.bound.j||a.bound.M>=d.bound.M||a.bound.s>=d.bound.s)){if(c){if(d.bound.B<=c.bound.B)continue;if(d.bound.j<=c.bound.j)continue;if(d.bound.M>=c.bound.M)continue;if(d.bound.s>=c.bound.s)continue}c=d}c&&c.Wa.push(a)}
function Cg(a){var b=162500,c=162500;b=void 0===b?0:b;c=void 0===c?0:c;var d=qg(a);a=[];d=p(d);for(var e=d.next();!e.done;e=d.next())e.value.qf(b,c,a);d=p(uf);for(e=d.next();!e.done;e=d.next()){e=e.value;for(var h=0;h<a.length;h++)e.expand(b,c).Qd(a[h].x,a[h].y)&&a.splice(h--,1)}return a}
function Ag(a,b){a.td=Qg(a);b.td=Qg(b);var c=[],d=[],e=Gg(a.td,15E4,0),h=Gg(b.td,-15E4,0);h=Ig(e,h);var g=p(h);for(e=g.next();!e.done;e=g.next())e.value.direction=0;d=d.concat(h);e=Gg(a.td,0,15E4);h=Gg(b.td,0,-15E4);h=Ig(e,h);g=p(h);for(e=g.next();!e.done;e=g.next())e.value.direction=1;d=d.concat(h);e=Gg(a.td,-15E4,0);h=Gg(b.td,15E4,0);h=Ig(e,h);g=p(h);for(e=g.next();!e.done;e=g.next())e.value.direction=2;d=d.concat(h);e=Gg(a.td,0,-15E4);h=Gg(b.td,0,15E4);h=Ig(e,h);g=p(h);for(e=g.next();!e.done;e=
g.next())e.value.direction=3;d=d.concat(h);nb(d);e=new Gf(-9375,9375,-112500,112500);d=p(d);for(h=d.next();!h.done;h=d.next()){h=h.value;g=e.Ue(h.direction);for(var k=p([{z:h.B,x:h.j},{z:h.M-1,x:h.s-1}]),l=k.next();!l.done;l=k.next())l=l.value,l=g.translate(l.z,l.x),l.y=a.y,l.direction=h.direction,c.push(new Rg(l,a,b))}return c}function Qg(a){var b=15E4;var c=Hg(a,new Gf(0,1,0,1));a=Kg(c,1);a=Hg(a,new Gf(-b,b,-b,b));rg(c,a);return c}
function zg(a,b){for(var c=xg(a),d=[],e=0;4>e;e++)d=d.concat(yg(a,b,c,e));return d}
function yg(a,b,c,d){var e=25E3*Math.ceil(Math.abs(b.y-a.y)/25E3),h=a.xa!=b.xa?325E3:0,g=function(l,m,n){function r(A){for(var v=0;v<A.length;v++)for(var C=A[v],w=v+1;w<A.length;w++){var D=A[w];if(C.B==D.B&&C.M==D.M){if(D.s==C.j){A.splice(w--,1);C.j=D.j;v--;break}if(D.j==C.s){A.splice(w--,1);C.s=D.s;v--;break}}}A=p(A);for(v=A.next();!v.done;v=A.next())v=v.value,v.j=v.s-1,v.direction=d}var q=Kg(l,1);q=Hg(q,new Gf(-162499,162500,-e-h+1,e+162500+162500));l=q=Kg(q,0);q=Hg(n,new Gf(0,0,-e-h+1,e));q=Kg(q,
1);q=Hg(q,new Gf(-162500,162501,0,0));l=q=Ig(l,q);q=Kg(m,1);q=Hg(q,new Gf(-162499,162500,-162499,162500));q=Kg(q,0);n=[];m=Ig(l,Gg(q,0,-e-h-162500));r(m);for(var t=p(m),z=t.next();!z.done;z=t.next())z.value.type=1;n=n.concat(m);if(0!=h){m=Ig(l,Gg(q,-325E3,-e-162500));r(m);t=p(m);for(z=t.next();!z.done;z=t.next())z.value.type=0;n=n.concat(m);m=Ig(l,Gg(q,325E3,-e-162500));r(m);l=p(m);for(z=l.next();!z.done;z=l.next())z.value.type=2;n=n.concat(m)}return n}(Dg(a,d),Dg(b,d),Dg(c,d));c=[];g=p(g);for(var k=
g.next();!k.done;k=g.next())c.push(new Sg(k.value,e,h,a,b));return c}function xg(a){for(var b=a.slice(),c=p(a.Od),d=c.next();!d.done;d=c.next())d=d.value,d=d.ua.platform!=a?d.ua.platform:d.ba.platform,d.xa==a.xa&&(b=b.concat(d));return b}
function sg(){for(var a=uf,b=p(vf),c=b.next();!c.done;c=b.next())c.value.Od=[];b=p(a);for(c=b.next();!c.done;c=b.next())c.value.Od=[];for(c=0;c<a.length;c++){b=a[c];for(var d=c+1;d<a.length;d++){var e=a[d],h=Rf(b,e);h&&(h.ua=b,h.ba=e,b.Od.push(h),e.Od.push(h),b.platform!=e.platform&&(b.platform.Od.push(h),e.platform.Od.push(h)))}}}
function wg(){sg();for(var a=[],b=p(uf),c=b.next();!c.done;c=b.next()){var d=c.value;d=d.ca(d.B,d.M,d.j,d.s);a.push(d)}d=[];b=[];c=p(wf);for(var e=c.next();!e.done;e=c.next())if(e=e.value,e instanceof Rg){var h=new Gf(-34375,34375,-e.l+34375,e.l-34375);e.Ra=[];var g=new If(h.B,h.j,h.s);g=g.rotate(e.direction);g=g.translate(e.z,e.x);g.source=h;e.Ra.push(g);g=new Hf(h.j,h.B,h.M);g=g.rotate(e.direction);g=g.translate(e.z,e.x);g.source=h;e.Ra.push(g);g=new Kf(h.M,h.s,h.j);g=g.rotate(e.direction);g=g.translate(e.z,
e.x);g.source=h;e.Ra.push(g);g=new Jf(h.s,h.M,h.B);g=g.rotate(e.direction);g=g.translate(e.z,e.x);g.source=h;e.Ra.push(g);h=h.rotate(e.direction);h=h.translate(e.z,e.x);h.Sg=e;b.push(h)}else h=new Gf(-e.ce+34375,e.ce-34375,-e.Sd-34375,e.Sd+34375),h=h.translate(e.cc.B,e.cc.j),h=h.rotate(e.direction),d.push(h),h=new Gf(-e.ce,e.ce,-e.Sd,e.Sd),h=h.translate(e.cc.B,e.cc.j),h=h.rotate(e.direction),a=rg(a,[h]);c=[];for(e=0;e<a.length;e++)for(h=a[e],g=e+1;g<a.length;g++){var k=a[g];(h.platform.xa!=k.platform.xa||
25E3<Math.abs(k.platform.y-h.platform.y))&&(k=Rf(h,k))&&c.push(k)}a=Kg(a,1);a=a.concat(c);a=pg(a,34375,34375);a=Kg(a);a=Lg(a);a=a.concat(d);d=[];e=p(a);for(c=e.next();!c.done;c=e.next())Of(c.value,d);e=p(b);for(c=e.next();!c.done;c=e.next())c=c.value,d.push(c.Sg.Ra[1],c.Sg.Ra[3]);a=a.concat(b);rg(d,a);d=Pg(Ng(d));c=0;e=p(d);for(h=e.next();!h.done;h=e.next())for(g=h.value,h=g[g.length-1],g=p(g),k=g.next();!k.done;k=g.next())k=k.value,k.index=c++,h.next=k,k.cb=h,h=k;c=[];d=p(d);for(e=d.next();!e.done;e=
d.next())c=c.concat(e.value);d=c;d.wi=a;a=p(b);for(c=a.next();!c.done;c=a.next())b=c.value.Sg,b.Xd=[b.Ra[1].cb,b.Ra[1].next,b.Ra[3].cb,b.Ra[3].next],b.Ra[0].cb=b.Xd[0],b.Ra[0].next=b.Xd[3],b.Ra[2].cb=b.Xd[2],b.Ra[2].next=b.Xd[1],d.push(b.Ra[0]),d.push(b.Ra[2]),b.Xd[0].next=b.Ra[1],b.Xd[1].cb=b.Ra[1],b.Xd[2].next=b.Ra[3],b.Xd[3].cb=b.Ra[3],b.Ra[0].disabled=!0,b.Ra[1].disabled=!1,b.Ra[2].disabled=!0,b.Ra[3].disabled=!1,b.Ra[0].y=-5E4,b.Ra[1].y=0,b.Ra[2].y=-5E4,b.Ra[3].y=0;Tg=d;a=p(se);for(b=a.next();!b.done;b=
a.next())for(b=p(b.value),d=b.next();!d.done;d=b.next())for(d=d.value,c=p(d.Od),e=c.next();!e.done;e=c.next())if(e=e.value,h=e.ua.platform!=d?e.ua.platform:e.ba.platform,!(d.index>=h.index)&&d.xa!=h.xa)for(e=Ag(d,h),nb(e),g=p(e),e=g.next();!e.done;e=g.next())if(e=e.value,Bg(e)){e.He=!0;d.xa.la=Math.max(d.xa.la,e.y+75E3+15E4);h.xa.la=Math.max(h.xa.la,e.y+75E3+15E4);wf.push(e);break}Cf=[];a=p(se);for(e=a.next();!e.done;e=a.next()){b=[];d=p(e.value);for(c=d.next();!c.done;c=d.next())b=b.concat(c.value);
Cf=Cf.concat(qg(b))}Df=[];a=p(vf);for(e=a.next();!e.done;e=a.next())Df=Df.concat(qg(e.value))}
function Rg(a,b,c){this.cc=a;this.direction=a.direction;this.l=112500;this.ib=b;this.Zb=c;this.z=.5*a.B+.5*a.M;this.x=.5*a.j+.5*a.s;this.y=Math.max(b.y,c.y);this.dd=[];this.kf=[];this.Bd=[];this.Ad=[];b=new Gf(a.B,a.M,a.j,a.s);b.f=a.y;b.h=b.f+225E3;this.Bd.push(b);this.kf.push(b);b=new Gf(-225E3,225E3,-112500,112500);b=b.rotate(this.direction);b=b.translate(this.z,this.x);b.h=a.y;b.f=b.h-18750;this.Bd.push(b);b=new Gf(b.B,b.M,b.j,b.s);b.f=a.y;b.h=b.f+225E3;this.Ad.push(b)}
Rg.prototype.Jh=function(){zf.push(this.cc);var a=new Hf(0,0,1);a=a.rotate(this.direction);this.ra=new J(a.ec()+this.z,a.dc()+this.x,a.vb()+this.z,a.ub()+this.x);a=new Ug;a.add=!0;a.yb=0;a.color=kg;this.He?(a.f=this.y+75E3,a.h=a.f+15E4):(a.f=this.y,a.h=this.y+225E3);for(var b=[new O(0,-this.l),new O(0,this.l),new O(-9375,this.l),new O(-9375,-this.l)],c=[new O(0,this.l),new O(0,-this.l),new O(9375,-this.l),new O(9375,this.l)],d=0;d<b.length;d++)b[d]=this.ra.kb(b[d].x,b[d].y);for(d=0;d<c.length;d++)c[d]=
this.ra.kb(c[d].x,c[d].y);a.ea=this.ib.xa.index+1;Vg(a,b);a.stroke();a=a.ca();a.ea=this.Zb.xa.index+1;Vg(a,c);a.stroke();d=this.ib.xa;var e=this.Zb.xa;b=new ue(new J(b[0].x,b[0].y,b[1].x,b[1].y),a.f,a.h);a=new ue(new J(c[0].x,c[0].y,c[1].x,c[1].y),a.f,a.h);b.Cd=a;a.Cd=b;b.ea=d.index;a.ea=e.index;d.Oc.push(b);e.Oc.push(a);b.He=this.He;(a.He=this.He)||d.Gd!=e.Gd&&new Wg(this.ra,this.y,b,a,d,e)};
function Sg(a,b,c,d,e){this.cc=a;this.direction=a.direction;this.type=a.type;this.ce=162500;this.Sd=b;this.ib=d;this.Zb=e;var h=Math.min(d.y,e.y),g=Math.max(d.y,e.y);this.dd=[];this.kf=[];this.Bd=[];this.Ad=[];var k=new Gf(-162500,162500,-b,b);k=k.translate(a.B,a.j);k=k.rotate(this.direction);k.f=h-18750;k.h=g;this.dd.push(k);this.kf.push(k);k=new Gf(k.B,k.M,k.j,k.s);k.f=h;k.h=g+2E5;this.Ad.push(k);k=new Gf(-162500,162500,-b-162500-162500,-b);k=k.translate(a.B,a.j);k=k.rotate(this.direction);k.f=
d.y;k.h=g+2E5;this.Ad.push(k);k=new Gf(k.B,k.M,k.j,k.s);k.f=h-18750;k.h=d.y;this.dd.push(k);this.Bd.push(k);if(c){d=new Gf(-162500,162500,b,b+c);d=d.translate(a.B,a.j);d=d.rotate(this.direction);d.f=e.y;d.h=g+2E5;this.Ad.push(d);d=new Gf(d.B,d.M,d.j,d.s);d.f=h-18750;d.h=e.y;this.dd.push(d);this.Bd.push(d);this.li=d;var l;0==this.type?l=new Gf(162500,487500,b,b+c):1==this.type?l=new Gf(-162500,162500,b+c,b+c+325E3):2==this.type&&(l=new Gf(-487500,-162500,b,b+c));l=l.translate(a.B,a.j);l=l.rotate(this.direction);
l.f=e.y;l.h=g+2E5;this.Ad.push(l);l=new Gf(l.B,l.M,l.j,l.s);l.f=h-18750;l.h=e.y;this.dd.push(l);this.Bd.push(l)}else b=new Gf(-162500,162500,b,b+162500),b=b.translate(a.B,a.j),b=b.rotate(this.direction),b.f=e.y,b.h=g+2E5,this.Ad.push(b),b=new Gf(b.B,b.M,b.j,b.s),b.f=h-18750,b.h=e.y,this.dd.push(b),this.Bd.push(b)}
Sg.prototype.Jh=function(){function a(h){return 1==h.Zf?!0:!1}var b=this.ib.xa,c=(this.Zb.y-this.ib.y)/25E3;if(this.Zb.y>this.ib.y){var d=new Ug;d.add=!1;d.Zf=1;d.ea=this.ib.xa.index+1;d.Ud=a;d.color=kg;d.f=this.ib.y;d.h=this.Zb.y;b=this.dd[0];Vg(d,[new O(b.B,b.j),new O(b.M,b.j),new O(b.M,b.s),new O(b.B,b.s)]);d.stroke();for(d=1;d<c;d++){b=new Gf(this.cc.B-this.ce,this.cc.B+this.ce,this.cc.j-this.Sd+5E4*(d-1),this.cc.j-this.Sd+5E4*d);b=b.rotate(this.direction);b=[new O(b.B,b.j),new O(b.M,b.j),new O(b.M,
b.s),new O(b.B,b.s)];var e=new Ug;e.add=!0;e.ea=this.ib.xa.index+1;e.Ud=a;e.yb=0;e.color=kg;e.f=this.ib.y+25E3*d;e.h=this.Zb.y;Vg(e,b);e.stroke()}}else for(c=-c,d=new Ug,d.add=!0,d.Zf=1,d.ea=this.ib.xa.index+1,d.Ud=a,d.Ae=lg,d.yb=b.yb,d.Qe=b.f,d.color=b.qe,d.f=this.Zb.y,d.h=this.ib.y,b=this.dd[0],Vg(d,[new O(b.B,b.j),new O(b.M,b.j),new O(b.M,b.s),new O(b.B,b.s)]),d.stroke(),d=0;d<c;d++)b=new Gf(this.cc.B-this.ce,this.cc.B+this.ce,this.cc.j-this.Sd+5E4*d,this.cc.j-this.Sd+5E4*(d+1)),b=b.rotate(this.direction),
b=[new O(b.B,b.j),new O(b.M,b.j),new O(b.M,b.s),new O(b.B,b.s)],e=new Ug,e.add=!1,e.ea=this.ib.xa.index+1,e.Ud=a,e.yb=0,e.color=kg,e.f=this.Zb.y,e.h=this.ib.y-25E3*d,Vg(e,b),e.stroke()};
function Xg(a,b){for(var c=p(a.Bd),d=c.next();!d.done;d=c.next()){var e=d.value,h=p(b.kf);for(d=h.next();!d.done;d=h.next())if(Sf(e,d.value))return!1}c=p(a.kf);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=p(b.Bd),d=h.next();!d.done;d=h.next())if(Sf(e,d.value))return!1;c=p(a.Ad);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=p(b.dd),d=h.next();!d.done;d=h.next())if(Sf(e,d.value))return!1;a=p(a.dd);for(d=a.next();!d.done;d=a.next())for(c=d.value,e=p(b.Ad),d=e.next();!d.done;d=e.next())if(Sf(c,
d.value))return!1;return!0}function Bg(a){for(var b=p(wf),c=b.next();!c.done;c=b.next())if(!Xg(a,c.value))return!1;return!0}
function Yg(a){function b(k){return k.add?k.ea==this.ea?!0:!1:!1}a.qe=lb(new R(255,0,64,255),new R(255,255,64,255),new R(0,96,255,255));a.Gd?a.yb=75E3:jb(2)?a.yb=75E3:a.yb=a.la-a.f-75E3;if(a.Gd){var c=new Ug;c.add=!0;c.ea=a.index+1;c.Ud=function(k){return isNaN(k.index)?!0:!1};c.yb=a.yb;c.color=a.qe;c.Ae=function(){return[]};c.Qe=0;c.f=0;c.h=2147483647;var d=[new O(a.bound.B,a.bound.j),new O(a.bound.M,a.bound.j),new O(a.bound.M,a.bound.s),new O(a.bound.B,a.bound.s)];c.la=null;Vg(c,d);c.stroke()}if(!a.Gd)for(c=
p(a.$h),d=c.next();!d.done;d=c.next()){d=d.value;var e=new Ug;e.add=!1;e.ea=a.index+1;e.yb=a.yb;e.color=a.qe;e.Ae=gg;e.Qe=a.f-18750;e.f=a.f-18750;e.h=a.la+18750;Vg(e,yc(d));e.stroke()}c=p(a.ai);for(d=c.next();!d.done;d=c.next())d=d.value,e=new Ug,e.add=!0,e.Zf=1,e.ea=a.index+1,e.yb=a.yb,e.color=a.qe,e.Ae=lg,e.Qe=a.f,e.f=a.f,e.h=a.la,Vg(e,yc(d)),e.stroke();c=p(a);for(d=c.next();!d.done;d=c.next())if(e=d.value,!(e.y<=a.f)){var h=p(e.Zh);for(d=h.next();!d.done;d=h.next()){d=d.value;var g=new Ug;g.add=
!1;g.Zf=1;g.ea=a.index+1;g.Ud=b;g.yb=a.yb;g.color=a.qe;g.Ae=lg;g.Qe=a.floor;g.f=a.f;g.h=e.y;Vg(g,yc(d));g.stroke()}}}
function Zg(){function a(l,m){m.y<l.f&&(l.f=m.y)}function b(l,m){m.y+2E5>l.la&&(l.la=m.y+2E5)}Ef=new ed;for(var c=p(uf),d=c.next();!d.done;d=c.next())d=d.value,d.z=.5*d.B+.5*d.M,d.x=.5*d.j+.5*d.s,d.y=d.platform.y,d.B<Ef.B&&(Ef.B=d.B),d.M>Ef.M&&(Ef.M=d.M),d.j<Ef.j&&(Ef.j=d.j),d.s>Ef.s&&(Ef.s=d.s);c=p(vf);for(var e=c.next();!e.done;e=c.next()){d=e.value;d.Zh=[];e=p(d);for(var h=e.next();!h.done;h=e.next()){var g=[];Of(h.value,g);Mg(g);d.Zh.push(g)}}Ef.B-=1E5;Ef.M+=1E5;Ef.j-=1E5;Ef.s+=1E5;kb(se).Gd=
!0;for(c=0;c<se.length;c++)se[c].index=c;c=p(se);for(d=c.next();!d.done;d=c.next()){d=d.value;d.Z={};d.Z.Sa=-2147483648;d.Z.Xa=new F(1,1,1);d.$b=0;d.fb=new F;d.cells=new Xa(fb);d.Gd?d.Yc=new F(1,1,1):(h=lb(.0125,.0625,.1125,.175),d.Yc=new F(h,h,h));d.Oc=[];d.Od=[];d.bound=new ed;d.floor=NaN;d.f=NaN;h=p(d);for(e=h.next();!e.done;e=h.next())for(e=e.value,e.y>=d.f||(d.f=e.y),e.y>=d.floor||(d.floor=e.y),e.y+3E5<=d.la||(d.la=e.y+3E5),e=p(e),g=e.next();!g.done;g=e.next())g=g.value,g.B<d.bound.B&&(d.bound.B=
g.B),g.M>d.bound.M&&(d.bound.M=g.M),g.j<d.bound.j&&(d.bound.j=g.j),g.s>d.bound.s&&(d.bound.s=g.s);d.la=Math.max(d.la,d.floor+25E3*kb([10]));d.bound.B-=1E5;d.bound.M+=1E5;d.bound.j-=1E5;d.bound.s+=1E5;d.Gd&&(d.la=0);d.la>Ef.h&&(Ef.h=d.la);d.floor<Ef.f&&(Ef.f=d.floor);e=[];h=p(d);for(g=h.next();!g.done;g=h.next())e.push.apply(e,ea(g.value));h=e;h=pg(h,9375,9375);h=Jg(h);d.$h=[];g=p(h);for(h=g.next();!h.done;h=g.next()){var k=[];Of(h.value,k);Mg(k);d.$h.push(k)}h=e;h=Kg(h,1);h=pg(h,9375,9375);h=Kg(h,
0);d.ai=[];e=p(h);for(h=e.next();!h.done;h=e.next())g=[],Of(h.value,g),Mg(g),d.ai.push(g)}c=p(wf);for(d=c.next();!d.done;d=c.next())d=d.value,!d instanceof Sg||d.ib.xa!=d.Zb.xa&&(d.ib.y<d.Zb.y?b(d.ib.xa,d.Zb):a(d.ib.xa,d.Zb));Ef.f-=1E5;Ef.h+=1E5;c=p(se);for(d=c.next();!d.done;d=c.next())Yg(d.value);c=p(wf);for(d=c.next();!d.done;d=c.next())d.value.Jh();re();$g();Wd=fe();ah();Ff=(new Date).getTime();console.log("world generated: "+(Ff-rf)/1E3+" seconds");c=p(u.kh.elements);for(d=c.next();!d.done;d=
c.next())bh(d.value)};function ch(a,b){function c(){for(var n=new Xa(gc),r=p(a),q=r.next();!q.done;q=r.next())q=q.value,n.add(q),n.add(q.ga);r=p(a);for(q=r.next();!q.done;q=r.next())if(q=q.value,!q.remove){var t=n.get(q);t!=q&&(q.replace([t]),q.ga.replace([t.ga]))}return n.elements}function d(){for(var n=p(m),r=n.next();!r.done;r=n.next()){r=r.value;var q=r.x&-524288,t=r.y&-524288,z=!1;r.x<=q+256?(r.x=q,z=!0):r.x>=q+524288-256&&(r.x=q+524288,z=!0);r.y<=t+256?(r.y=t,z=!0):r.y>=t+524288-256&&(r.y=t+524288,z=!0);if(z){t=
p(r.inputs);for(q=t.next();!q.done;q=t.next())q.value.cf=!0;r=p(r.outputs);for(q=r.next();!q.done;q=r.next())q.value.cf=!0}}}function e(n,r,q){var t=N(r,n.c,n.a),z=N(r,n.o,n.i),A=N(n,r.c,r.a),v=N(n,r.o,r.i);if(-256>A&&256<v&&(-256>t&&256<z||256<t&&-256>z)||256<A&&-256>v&&(-256>t&&256<z||256<t&&-256>z)){t/=t-z;z=1-t;v=new O(Math.round(n.c*z+n.o*t),Math.round(n.a*z+n.i*t));t=n.Na(n.c,n.a,v.x,v.y);z=n.Na(v.x,v.y,n.o,n.i);A=r.Na(r.c,r.a,v.x,v.y);v=r.Na(v.x,v.y,r.o,r.i);var C=wc(t),w=wc(z),D=wc(A),G=wc(v);
n.replace([t,z]);n.ga.replace([w,C]);r.replace([A,v]);r.ga.replace([G,D]);q.push(t,z,A,v);q.push(C,w,D,G);n=!0}else n=!1;return n}function h(n,r){if(!n.remove){for(var q=p(m),t=q.next();!t.done;t=q.next())if(t=t.value,t.x!=n.c||t.y!=n.a)if(t.x!=n.o||t.y!=n.i){var z=n.De(t.x,t.y);if(!(0>=z.x||z.x>=n.length||-256>z.y||256<z.y)){q=n.Na(n.c,n.a,t.x,t.y);t=n.Na(t.x,t.y,n.o,n.i);z=n.Na(q.o,q.i,q.c,q.a);var A=n.Na(t.o,t.i,t.c,t.a);q.ga=z;z.ga=q;t.ga=A;A.ga=t;n.replace([q,t]);n.ga.replace([A,z]);h(q,r);h(t,
r);h(z,r);h(A,r);return}}r.push(n)}}for(var g=[],k=p(a),l=k.next();!l.done;l=k.next())l=l.value,l.remove||g.push(l);a=g;a=c();b&&(a=dh(null,a,e));var m=new Xa(Sc);b=p(a);for(l=b.next();!l.done;l=b.next())g=l.value,k=new O(g.c,g.a),k.inputs=[],k.outputs=[],k.l=1,g.ua=m.Da(k),g.ua.outputs.push(g),g.ua.l++,k=new O(g.o,g.i),k.inputs=[],k.outputs=[],k.l=1,g.ba=m.Da(k),g.ba.inputs.push(g),g.ba.l++;m=m.elements;d();m=dh(null,m,function(n,r,q){if(256>(Math.abs(r.x-n.x)+Math.abs(r.y-n.y))*Math.SQRT1_2){var t=
new O(n.x*n.l+r.x*r.l,n.y*n.l+r.y*r.l);t.l=n.l+r.l;t.x/=t.l;t.y/=t.l;t.round();t.inputs=n.inputs.concat(r.inputs);t.outputs=n.outputs.concat(r.outputs);n=p(t.inputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.ba=t,r.cf=!0;n=p(t.outputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.ua=t,r.cf=!0;q.push(t);q=!0}else q=!1;return q});d();for(b=0;b<a.length;b++)g=a[b],g.remove?a.splice(b--,1):g.ua==g.ba?(g.replace([]),g.ga.replace([]),a.splice(b--,1)):g.cf&&(k=g.Na(g.ua.x,g.ua.y,g.ba.x,g.ba.y),l=wc(k),
g.replace([k]),g.ga.replace([l]),a.splice(b++,1,k,l)),delete g.ua,delete g.ba,delete g.cf;(function(){for(var n=[],r=p(a),q=r.next();!q.done;q=r.next())h(q.value,n);a=n})();return a=c()}
function dh(a,b,c){var d=[];if(a)for(var e=0;e<a.length;e++){var h=a[e];if(h.remove)a.splice(e--,1);else for(var g=0;g<b.length;g++){var k=b[g];if(k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);a.splice(e--,1);break}}}for(e=0;e<b.length;e++)if(h=b[e],h.remove)b.splice(e--,1);else for(g=e+1;g<b.length;g++)if(k=b[g],k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);b.splice(e--,1);break}a&&(b=a.concat(b));return d.length?dh(b,d,c):b};var Tg,eh,fh,gh,hh=0;
function ih(){function a(c){function d(v,C,w){return Eg(C,w,v.wb()).y>=v.d}function e(v){v.La=0;var C=v.c,w=v.a;if(1==v.action)if(v.ab.length){var D=v.ab[0],G=D.ec()-C;D=D.dc()-w;v.La+=Math.sqrt(G*G+D*D);G=p(v.ab);for(D=G.next();!D.done;D=G.next())w=D.value,v.La+=w.R-w.P,C=w.vb(),w=w.ub()}else G=v.V.vb(),D=v.V.ub(),C=G-C,w=D-w,v.La+=Math.sqrt(C*C+w*w),C=G,w=D;else if(2==v.action)if(v.ab.length)for(D=v.ab[0],G=D.vb()-C,D=D.ub()-w,v.La+=Math.sqrt(G*G+D*D),G=p(v.ab),D=G.next();!D.done;D=G.next())w=D.value,
v.La+=w.R-w.P,C=w.ec(),w=w.dc();else G=v.V.vb(),D=v.V.ub(),C=G-C,w=D-w,v.La+=Math.sqrt(C*C+w*w),C=G,w=D;C=v.o-C;w=v.i-w;v.La+=Math.sqrt(C*C+w*w)}function h(v){v.Kb=0;for(var C=p(v),w=C.next();!w.done;w=C.next())w=w.value,v.Kb=w.complete?v.Kb+.5*w.La:v.Kb+w.La}for(var g=null,k=0,l=0;l<c.length;l++)if(!c[l].complete){k=l;g=c[l];break}if(!g)return!0;if(1==g.action){g.V=g.V.next;l=g.V.vb();var m=g.V.ub();if(l==g.c&&m==g.a||l==g.o&&m==g.i)return!1;for(var n=g.V,r=g.V.next;0<k;){var q=c[k-1],t=N(q,l,m);
if(1==q.$a&&0<=t||2==q.$a&&0>=t)q=new J(q.c,q.a,g.o,g.i),q.action=g.action,q.complete=g.complete,q.$a=g.$a,q.V=g.V,q.ab=g.ab,q.max=q,c=c.slice(),c.splice(--k,2,q),Qa(gh,c),g=q;else break}q=!d(n,g.o,g.i)&&d(r,g.o,g.i);if(g.ab.length){if(Eg(r.vb(),r.ub(),n.wb()).y>n.d||q){l=[];m=g.ab[0];m=new J(g.c,g.a,m.ec(),m.dc());m.La=m.length;m.action=0;m.$a=g.action;l.push(m);m=p(g.ab);for(n=m.next();!n.done;n=m.next())n=n.value,n=new J(n.ec(),n.dc(),n.vb(),n.ub()),n.La=n.length,n.complete=1,n.action=0,n.$a=g.action,
l.push(n);m=g.ab[g.ab.length-1];m=new J(m.vb(),m.ub(),g.o,g.i);m.La=m.length;m.action=0;m.$a=g.$a;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(ea(l)));e(g);h(c);Qa(gh,c)==c&&Qa(eh,c);return!1}g.ab.push(r)}else{t=r.vb();var z=r.ub();if(0<=N(g.max,l,m)&&(g.max=new J(g.c,g.a,l,m),Eg(t,z,n.wb()).y<n.d&&!d(r,g.c,g.a))){if(q)return n=[],r=new J(g.c,g.a,l,m),r.La=r.length,r.action=0,r.$a=g.action,n.push(r),l=new J(l,m,g.o,g.i),l.La=l.length,l.action=0,l.$a=g.$a,n.push(l),c=c.slice(),c.splice.apply(c,
[k,1].concat(ea(n))),e(g),h(c),Qa(gh,c)==c&&Qa(eh,c),!1;g.ab.push(r)}}e(g);h(c);Qa(eh,c)}else if(2==g.action){g.V=g.V.cb;l=g.V.vb();m=g.V.ub();if(l==g.c&&m==g.a||l==g.o&&m==g.i)return!1;n=g.V.next;for(r=g.V;0<k;)if(q=c[k-1],t=N(q,l,m),1==q.$a&&0<=t||2==q.$a&&0>=t)q=new J(q.c,q.a,g.o,g.i),q.action=g.action,q.complete=g.complete,q.$a=g.$a,q.V=g.V,q.ab=g.ab,q.max=q,c=c.slice(),c.splice(--k,2,q),Qa(gh,c),g=q;else break;q=!d(n,g.o,g.i)&&d(r,g.o,g.i);if(g.ab.length){if(Eg(r.ec(),r.dc(),n.wb()).y>n.d||q){l=
[];m=g.ab[0];m=new J(g.c,g.a,m.vb(),m.ub());m.La=m.length;m.action=0;m.$a=g.action;l.push(m);m=p(g.ab);for(n=m.next();!n.done;n=m.next())n=n.value,n=new J(n.vb(),n.ub(),n.ec(),n.dc()),n.La=n.length,n.complete=1,n.action=0,n.$a=g.action,l.push(n);m=g.ab[g.ab.length-1];m=new J(m.ec(),m.dc(),g.o,g.i);m.La=m.length;m.action=0;m.$a=g.$a;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(ea(l)));e(g);h(c);Qa(gh,c)==c&&Qa(eh,c);return!1}g.ab.push(r)}else if(t=r.ec(),z=r.dc(),0>=N(g.max,l,m)&&(g.max=new J(g.c,
g.a,l,m),Eg(t,z,n.wb()).y<n.d&&!d(r,g.c,g.a))){if(q)return n=[],r=new J(g.c,g.a,l,m),r.La=r.length,r.action=0,r.$a=g.action,n.push(r),l=new J(l,m,g.o,g.i),l.La=l.length,l.action=0,l.$a=g.$a,n.push(l),c=c.slice(),c.splice.apply(c,[k,1].concat(ea(n))),e(g),h(c),Qa(gh,c)==c&&Qa(eh,c),!1;g.ab.push(r)}e(g);h(c);Qa(eh,c)}else{l=[];l.cmp=function(v,C){return v.t<C.t?-1:v.t>C.t?1:v.Td<C.Td?-1:v.Td>C.Td?1:v.V.next==C.V?-v.Td:v.V.cb==C.V?v.Td:0};m=p(Tg);for(n=m.next();!n.done;n=m.next())if(n=n.value,!n.disabled)if(r=
Eg(g.c,g.a,n.wb()),q=Eg(g.o,g.i,n.wb()),q.y==r.y){if(q.y==n.d){var A=z=void 0;t=void 0;if(q.x>r.x)z=Math.max(r.x,n.P),A=Math.min(q.x,n.R),t=1;else if(q.x<r.x)z=Math.max(q.x,n.P),A=Math.min(r.x,n.R),t=-1;else continue;z>=A||(z=Math.round(.5*z+.5*A),Qa(l,{t:(z-r.x)/(q.x-r.x),$e:-1,Td:t,V:n,x:z,y:n.d}))}}else t=q.x<r.x?-1:1,z=(n.d-r.y)/(q.y-r.y),0>z||1<z||(A=Math.round(r.x+(q.x-r.x)*z),q.y<r.y?A<n.P||A>n.R||Qa(l,{t:z,$e:0,Td:t,V:n,x:A,y:n.d}):q.y>r.y&&!(A<n.P)&&(A>n.R||Qa(l,{t:z,$e:1,Td:t,V:n,x:A,y:n.d})));
m=null;for(n=1;n<l.length;n++)if(r=l[n-1],q=l[n],0==r.$e&&1==q.$e&&r.t<q.t){m=r;break}if(!m)return g.complete=1,Qa(eh,c),!1;l=g.ca();l.action=1;l.max=l;l.$a=g.$a;l.V=m.x==m.V.R?m.V:m.V.cb;l.ab=[];n=c.slice();n[k]=l;n.Kb=0;Qa(gh,n)==n&&Qa(eh,n);l=g.ca();l.action=2;l.max=l;l.$a=g.$a;l.V=m.x==m.V.P?m.V.cb:m.V;l.ab=[];c=c.slice();c[k]=l;c.Kb=0;Qa(gh,c)==c&&Qa(eh,c)}return!1}for(;hh&&eh.length;){fh++;hh--;var b=eh.shift();if(a(b))return eh=null,b}if(0==eh.length)return eh=null}
function jh(a,b,c,d){var e=Tg;Tg=e;gh=[];gh.cmp=function(l,m){if(l.length<m.length)return-1;if(l.length>m.length)return 1;for(var n=0;n<l.length;n++){var r=l[n],q=m[n];if(r.c<q.c)return-1;if(r.c>q.c)return 1;if(r.a<q.a)return-1;if(r.a>q.a)return 1;if(r.o<q.o)return-1;if(r.o>q.o)return 1;if(r.i<q.i)return-1;if(r.i>q.i)return 1;if(r.action<q.action)return-1;if(r.action>q.action)return 1}return 0};a=(new O(a,b)).round();c=(new O(c,d)).round();b=null;var h=NaN,g=p(e.wi);for(d=g.next();!d.done;d=g.next()){d=
d.value;var k=Lf(d,a.x,a.y);k>=h||(h=k,b=d)}a=b.me(a.x,a.y);b=null;h=NaN;e=p(e.wi);for(d=e.next();!d.done;d=e.next())d=d.value,g=Lf(d,c.x,c.y),g>=h||(h=g,b=d);c=b.me(c.x,c.y);fh=0;eh=[];eh.cmp=function(l,m){return l.Kb<m.Kb?-1:1};a=new J(a.x,a.y,c.x,c.y);a.La=a.length;a.action=0;a=[a];a.Kb=0;Qa(eh,a);return ih()};var Ke,kh=new J(0,0,1,0),lh=4095/741455.429632,mh=new Xa(function(a,b){return a.y<b.y?-1:a.y>b.y?1:a.ea<b.ea?-1:a.ea>b.ea?1:a.ia.name<b.ia.name?-1:a.ia.name>b.ia.name?1:Hd(a.Y,b.Y)});function nh(a,b){return a.y>b.y?-1:a.y<b.y?1:0}var oh=[];function ph(a,b,c,d){var e=new Le;e.y=a;e.ea=b;e.ia=c;e.Y=d;e.wd=[];return mh.Da(e)}
function $g(){for(var a=p(Xd.elements),b=a.next();!b.done;b=a.next())qh(b.value);u.yf();a=p(Xd.elements);for(b=a.next();!b.done;b=a.next()){b=b.value;for(var c=0;4>c;c++){var d=rh(b,c);if(d&&d.Sa!=u.Sa){var e=b,h=d,g=[];switch(c){case 0:var k=ce(e.index);d=k.x+512;e=p(e.$);for(var l=e.next();!l.done;l=e.next())l=l.value,(l.c<=d||l.o<=d)&&g.push(l);d=k.x-512;k=p(h.$);for(l=k.next();!l.done;l=k.next())l=l.value,(l.c>=d||l.o>=d)&&g.push(l);break;case 1:k=ce(e.index);d=k.y+512;e=p(e.$);for(l=e.next();!l.done;l=
e.next())l=l.value,(l.a<=d||l.i<=d)&&g.push(l);d=k.y-512;k=p(h.$);for(l=k.next();!l.done;l=k.next())l=l.value,(l.a>=d||l.i>=d)&&g.push(l);break;case 2:k=ce(h.index);d=k.x+512;h=p(h.$);for(l=h.next();!l.done;l=h.next())l=l.value,(l.c<=d||l.o<=d)&&g.push(l);d=k.x-512;k=p(e.$);for(l=k.next();!l.done;l=k.next())l=l.value,(l.c>=d||l.o>=d)&&g.push(l);break;case 3:k=ce(h.index);d=k.y+512;h=p(h.$);for(l=h.next();!l.done;l=h.next())l=l.value,(l.a<=d||l.i<=d)&&g.push(l);d=k.y-512;k=p(e.$);for(l=k.next();!l.done;l=
k.next())l=l.value,(l.a>=d||l.i>=d)&&g.push(l)}ch(g,!1)}}b.Sa=u.Sa}a=p(Xd.elements);for(b=a.next();!b.done;b=a.next())b.value.evaluate();a=p(Xd.elements);for(b=a.next();!b.done;b=a.next()){b=b.value;c=p(b.uh);for(d=c.next();!d.done;d=c.next())d.value.evaluate();sh(b)}Ke=[];a=p(Xd.elements);for(b=a.next();!b.done;b=a.next())th(b.value);Je()}
function uh(a,b){var c=new Xa(Sc);a=p(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var e=new Xa(xc);e.x=d.c;e.y=d.a;e=c.Da(e);e.add(d);b&&(d=wc(d),e=new Xa(xc),e.x=d.c,e.y=d.a,e=c.Da(e),e.add(d))}return c}
function vh(a){var b=[];b.bound=new oc;var c=0,d=a.elements[c],e=d.elements.pop();d.elements.length||a.elements.splice(c,1);if(!e)return null;for(;;){b.push(e);b.bound.Da(e.o,e.i);if(e.o==b[0].c&&e.i==b[0].a)return b;c=a.contains(new O(e.o,e.i));if(0>c)return null;d=a.elements[c];e=Ya(d,vc(e))-1;0>e&&(e+=d.elements.length);e=d.elements.splice(e,1)[0];d.elements.length||a.elements.splice(c,1)}}
function wh(a){for(var b=[],c=a[a.length-1],d=0;d<a.length;d++){var e=a[d];b.push(hc(c,e));c=e}a.Jg=b;a.Oe=[];a.Ah=0;b=p(a.Jg);for(c=b.next();!c.done;c=b.next())c=c.value,0>c?(a.Ah-=c,a.Oe.push(-c)):a.Oe.push(0)}
function xh(a,b){var c=null;b=p(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.j<=d.bound.j||a.bound.f<=d.bound.f||a.bound.s>=d.bound.s||a.bound.h>=d.bound.h)){if(c){if(d.bound.j<=c.bound.j)continue;if(d.bound.f<=c.bound.f)continue;if(d.bound.s>=c.bound.s)continue;if(d.bound.h>=c.bound.h)continue}0>=lc(a[0].o,a[0].i,d)||(c=d)}c&&c.Wa.push(a)}
function yh(a){if(0==a.Wa.length)return a;var b=[a].concat(a.Wa),c={};c.Kb=Number.NEGATIVE_INFINITY;for(var d=0;d<b.length;d++)for(var e=b[d],h=d+1;h<b.length;h++)for(var g=b[h],k=0;k<e.length;k++)for(var l=(k+1)%e.length,m=0;m<g.length;m++)c=zh(e,k,l,g,m,(m+1)%g.length,c,b);if(0>c.Kb)return console.log("could not solve holes"),a.Wa=[],a;e=c.Nc[c.ba].Na(c.Nc[c.ba].c,c.Nc[c.ba].a,c.ad[c.d].c,c.ad[c.d].a);d=e.Na(e.o,e.i,e.c,e.a);e.ga=d;d.ga=e;b=[];for(h=0;h<c.ba;h++)b.push(c.Nc[h]);b.push(e);e=c.d;
for(h=0;h<c.ad.length;h++)b.push(c.ad[e]),++e==c.ad.length&&(e=0);b.push(d);for(d=c.ba;d<c.Nc.length;d++)b.push(c.Nc[d]);if(c.Nc==a)return a.Wa.splice(a.Wa.indexOf(c.ad),1),b.Wa=a.Wa,wh(b),yh(b);a.Wa.splice(a.Wa.indexOf(c.Nc),1,b);a.Wa.splice(a.Wa.indexOf(c.ad),1);wh(b);return yh(a)}
function zh(a,b,c,d,e,h,g,k){function l(q,t){function z(D,G,Q){if(G==D.c&&Q==D.a||G==D.o&&Q==D.i)return!1;G=D.De(G,Q);return 0>=G.x||G.x>=D.length||-256>G.y||256<G.y?!1:!0}var A=N(t,q.c,q.a),v=N(t,q.o,q.i),C=N(q,t.c,t.a),w=N(q,t.o,t.i);if(-256>C&&256<w&&(-256>A&&256<v||256<A&&-256>v)||256<C&&-256>w&&(-256>A&&256<v||256<A&&-256>v)||z(q,t.c,t.a)||z(q,t.o,t.i)||z(t,q.c,q.a)||z(t,q.o,q.i))return!0}var m=a[c],n=d[h];m=new J(m.c,m.a,n.c,n.a);if(0==a.Oe[c]){if(0>=N(a[b],m.o,m.i)||0>=N(a[c],m.o,m.i))return g}else if(0>=
N(a[b],m.o,m.i)&&0>=N(a[c],m.o,m.i))return g;if(0==d.Oe[h]){if(0>=N(d[e],m.c,m.a)||0>=N(d[h],m.c,m.a))return g}else if(0>=N(d[e],m.c,m.a)&&0>=N(d[h],m.c,m.a))return g;if(k)for(k=p(k),n=k.next();!n.done;n=k.next()){var r=p(n.value);for(n=r.next();!n.done;n=r.next())if(l(m,n.value))return g}else for(k=p(a),n=k.next();!n.done;n=k.next())if(l(m,n.value))return g;k={};k.Nc=a;k.ua=b;k.ba=c;k.ad=d;k.$e=e;k.d=h;k.V=m;Ah(k);return k.Kb>g.Kb?k:g}
function Ah(a){a.Kb=4095-a.V.length*lh;var b=hc(a.Nc[a.ua],a.V),c=b-a.Nc.Jg[a.ba],d=hc(a.V,a.ad[a.d]),e=d-a.ad.Jg[a.d];a.Kb+=.5/Math.PI*(a.Nc.Oe[a.ba]-(0>b?-b:0)-(0>c?-c:0)+(a.ad.Oe[a.d]-(0>d?-d:0)-(0>e?-e:0)))*1048575}
function vi(a){if(3>a.length)return[];wh(a);if(0>=a.Ah)return[a];for(var b={Kb:Number.NEGATIVE_INFINITY},c=a.length-1,d=0;d<a.length;d++){for(var e=d+1,h=e+1;h<a.length;h++)b=zh(a,c,d,a,e,h,b),e=h;c=d}if(0>b.Kb)return console.log("could not convex path"),[a];h=new wi(a[b.ba].c,a[b.ba].a,a[b.d].c,a[b.d].a);c=new wi(a[b.d].c,a[b.d].a,a[b.ba].c,a[b.ba].a);h.ga=c;c.ga=h;d=[];e=[];for(var g=0;g<b.ba;g++)d.push(a[g]);d.push(h);for(h=b.d;h<a.length;h++)d.push(a[h]);for(h=b.ba;h<b.d;h++)e.push(a[h]);e.push(c);
return vi(d).concat(vi(e))}function xi(a){this.$=null;this.f=Number.POSITIVE_INFINITY;this.h=Number.NEGATIVE_INFINITY;this.la=this.floor=null;this.W=a}xi.prototype.ze=function(a,b){if(this.h<=a.f||this.f>=a.h)b.push(this);else{if(this.f<a.f){var c=new xi(this.W);c.f=this.f;c.h=a.f;c.floor=this.floor;c.la=a.la;b.push(c)}this.h>a.h&&(c=new xi(this.W),c.f=a.h,c.h=this.h,c.floor=a.floor,c.la=this.la,b.push(c))}};function jf(a,b,c){this.S=a;this.f=b;this.h=c}function kf(a,b){this.$=a;this.y=b}
function lf(a,b){this.$=a;this.y=b};function be(a){this.index=a;this.Kf=this.Sa=-2147483648;this.wj=new $a(this);this.Jd=new Xa(fb);this.uh=[];this.$=[];this.Ca=[];this.jh=new Za}function rh(a,b){a=de(a.index);switch(b){case 0:if(0==a.x)break;return Xd.get(ee(a.x-1,a.y));case 1:if(0==a.y)break;return Xd.get(ee(a.x,a.y-1));case 2:if(8191==a.x)break;return Xd.get(ee(a.x+1,a.y));case 3:if(8191!=a.y)return Xd.get(ee(a.x,a.y+1))}return null}
function qh(a){function b(g,k){return g.W.index<k.W.index?-1:g.W.index>k.W.index?1:0}for(var c=p(a.Jd.elements),d=c.next();!d.done;d=c.next()){d=p(d.value.$);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=e.ca();wc(h);e.Gf&&(h.Cb=[e]);h.$c=[a.$];a.$.push(h)}}ch(a.$.slice(),!0);a=p(a.$);for(e=a.next();!e.done;e=a.next())c=e.value,c.Cb&&pb(c.Cb,b),c.ga.Cb&&pb(c.ga.Cb,b)}
be.prototype.evaluate=function(){this.lh=[];this.mh=[];for(var a=uh(this.$,!0),b=[],c=[];a.elements.length;){var d=vh(a);d&&(kc(d)?c.push(d):(d.Wa=[],b.push(d)))}a=p(c);for(c=a.next();!c.done;c=a.next())xh(c.value,b);a=[];b=p(b);for(c=b.next();!c.done;c=b.next())if(d=c.value,0==d.Wa.length)a.push(d);else{wh(d);var e=p(d.Wa);for(c=e.next();!c.done;c=e.next())wh(c.value);a.push(yh(d))}b=[];a=p(a);for(c=a.next();!c.done;c=a.next())b=b.concat(vi(c.value));this.uh=[];a=p(b);for(c=a.next();!c.done;c=a.next())this.uh.push(new yi(c.value,
this))};
function sh(a){function b(z,A){return z.Cc<A.Cc?-1:z.Cc>A.Cc?1:z.W.ea<A.W.ea?-1:z.W.ea>A.W.ea?1:zi(z.ka,A.ka)}function c(z,A){var v=Rb(1/60);var C=-1;for(var w=1;w<z.length;w++){var D=Math.abs(hc(z[w-1].S,z[w].S));D<v&&(v=D,C=w)}if(0>C)A.push.apply(A,ea(z));else{v=z[C-1];w=z[C];D=v.S.Na(v.S.c,v.S.a,w.S.o,w.S.i);var G=wc(D);v.tc&&(0>v.tc.Cc?v.tc.splice(v.tc.indexOf(v.S),2,D):v.tc.splice(v.tc.indexOf(w.S.ga),2,G));v.rc&&(0<v.rc.Cc?v.rc.splice(v.rc.indexOf(v.S),2,D):v.rc.splice(v.rc.indexOf(w.S.ga),2,
G));v.S=D;z.splice(C,1);c(z,A)}}function d(z){var A=Rb(1/60);var v=-1;for(var C=1;C<z.length;C++){var w=Math.abs(hc(z[C-1],z[C]));w<A&&(A=w,v=C)}if(!(0>v)){A=z[v-1];C=z[v];w=A.Na(A.c,A.a,C.o,C.i);var D=wc(w);w.pc=A.pc;A.pc.splice(A.pc.indexOf(A),2,w);C.ga&&(D.pc=C.ga.pc,C.ga.pc.splice(C.ga.pc.indexOf(C.ga),2,D));z.splice(v-1,2,w);d(z)}}for(var e=0,h=new Xa(function(z,A){return z.y<A.y?-1:z.y>A.y?1:0}),g=p(a.lh),k=g.next();!k.done;k=g.next()){var l=k.value,m=new Xa(b);m.y=l.y;m=h.Da(m);k=[];k.Cc=l.Cc;
k.W=l.W;k.ka=l.ka;k=m.Da(k);k.push(l)}g=p(h.elements);for(l=g.next();!l.done;l=g.next()){l=l.value;m=p(l.elements);for(k=m.next();!k.done;k=m.next()){var n=k.value,r=new Xa(gc),q=p(n);for(k=q.next();!k.done;k=q.next()){var t=p(k.value);for(k=t.next();!k.done;k=t.next())k=k.value,r.remove(vc(k))||r.push(k)}n.length=0;for(r=uh(r.elements);r.elements.length;){q=vh(r);if(!q)break;q.y=l.y;q.Cc=n.Cc;q.W=n.W;q.ka=n.ka;q.index=e++;t=p(q);for(k=t.next();!k.done;k=t.next())k.value.pc=q;n.push(q)}}l.Tg=new Xa(gc);
m=p(l.elements);for(k=m.next();!k.done;k=m.next())for(n=p(k.value),k=n.next();!k.done;k=n.next())for(r=p(k.value),k=r.next();!k.done;k=r.next())k=k.value,(q=l.Tg.remove(vc(k)))?(k.ga=q,q.ga=k):l.Tg.push(k)}e=p(a.mh);for(g=e.next();!g.done;g=e.next())g=g.value,l=function(z,A){A=h.get({y:A});if(!A)return null;A=A.Tg.remove(z);if(!A)return null;A.pc.splice(A.pc.indexOf(A),1,z);return A.pc},m=g.S,k=wc(m),g.rc=l(m,g.f)||l(k,g.f),g.tc=l(m,g.h)||l(k,g.h);g=function(z){var A=[],v=new Xa(function(G,Q){G=G[0];
Q=Q[0];if(G.f<Q.f)return-1;if(G.f>Q.f)return 1;if(G.h<Q.h)return-1;if(G.h>Q.h)return 1;if(G.rc)if(Q.rc){if(G.rc.index<Q.rc.index)return-1;if(G.rc.index>Q.rc.index)return 1}else return 1;else if(Q.rc)return-1;if(G.tc)if(Q.tc){if(G.tc.index<Q.tc.index)return-1;if(G.tc.index>Q.tc.index)return 1}else return 1;else if(Q.tc)return-1;if(G.length<Q.length)return-1;if(G.length>Q.length)return 1;for(var aa=0;aa<G.length;aa++){var V=G[aa],da=Q[aa];if(V.f<da.f)return-1;if(V.f>da.f)return 1;if(V.h<da.h)return-1;
if(V.h>da.h)return 1;V=zi(V.ka,da.ka);if(0!=V)return V}return 0});z=p(z);for(var C=z.next();!C.done;C=z.next()){C=C.value;var w=[C],D=v.Da(w);D!=w&&D.push(C)}z={};v=p(v.elements);for(C=v.next();!C.done;z={Nd:z.Nd},C=v.next())for(z.Nd=C.value,C={};z.Nd.length;)C.Ve=function(G,Q){return function(aa,V,da){for(var xa=0;xa<G.Nd.length;xa++){var ba=G.Nd[xa];if(ba.S.c==da.o&&ba.S.a==da.i)return G.Nd.splice(xa,1),aa.push(ba),ba.S.Bc=aa,ba.S.ga.Bc=aa,Q.Ve(aa,V,ba.S);if(ba.S.o==V.c&&ba.S.i==V.a)return G.Nd.splice(xa,
1),aa.unshift(ba),ba.S.Bc=aa,ba.S.ga.Bc=aa,Q.Ve(aa,ba.S,da)}return aa}}(z,C),w=z.Nd.shift(),D=[w],w.S.Bc=D,w.S.ga.Bc=D,A.push(C.Ve(D,w.S,w.S)),C={Ve:C.Ve};return A}(a.mh);e=function(){for(var z=[],A=p(h.elements),v=A.next();!v.done;v=A.next()){v=p(v.value.elements);for(var C=v.next();!C.done;C=v.next()){C=p(C.value);for(var w=C.next();!w.done;w=C.next()){w=w.value;for(var D=function(xa,ba){return xa.Bc||ba.Bc?!1:xa.ga?ba.ga?xa.ga.pc==ba.ga.pc:!1:ba.ga?!1:!0},G=0,Q=w[w.length-1],aa=w[0];G<w.length&&
(aa=w[G],D(Q,aa));G++,Q=aa);if(G==w.length){D=[];Q=p(w);for(w=Q.next();!w.done;w=Q.next())w=w.value,w.Bc=D,w.ga&&(w.ga.Bc=D),D.push(w);z.push(D)}else{w.unshift.apply(w,ea(w.splice(G)));G=[];var V=null;Q=w[0];G.push(V=[]);V.push(Q);for(var da=1;da<w.length;da++,Q=aa)aa=w[da],D(Q,aa)||G.push(V=[]),V.push(aa);D=p(G);for(w=D.next();!w.done;w=D.next())if(Q=w.value,!Q[0].Bc){aa=p(Q);for(w=aa.next();!w.done;w=aa.next())w=w.value,w.Bc=Q,w.ga&&(w.ga.Bc=Q);z.push(Q)}}}}}return z}();a.vi=[];l=p(g);for(g=l.next();!g.done;g=
l.next())c(g.value,a.vi);a.ui=[];e=p(e);for(g=e.next();!g.done;g=e.next())d(g.value);e=p(h.elements);for(l=e.next();!l.done;l=e.next())for(g=p(l.value.elements),k=g.next();!k.done;k=g.next())for(l=p(k.value),k=l.next();!k.done;k=l.next())m=k.value,m.xi=vi(m),a.ui.push(m)}
function th(a){function b(r,q,t){var z=[],A=new kf(q,r.y);A.ea=r.W.ea-1;h.push(A);for(A=0;A<q.length;A++){var v=new Ic(q[A].a,r.y,q[A].c);Qc(v,r.ka.color);Rc(v,v.z/4E5,v.x/4E5);v.bc=32767;z.push(v)}t.wd.push(z);Ke.push(z);e(se[r.W.ea-1],z,r.ka)}function c(r,q,t){var z=[],A=new lf(q,r.y);A.ea=r.W.ea-1;h.push(A);for(A=q.length-1;0<=A;A--){var v=new Ic(q[A].i,r.y,q[A].o);Qc(v,r.ka.color);Rc(v,-v.z/4E5,v.x/4E5);v.bc=-32767;z.push(v)}t.wd.push(z);Ke.push(z);e(se[r.W.ea-1],z,r.ka)}function d(r,q,t){var z=
ph(Infinity,r.W.ea,q.ka.ia,q.ka.Y),A=[],v=r.S.c/4E5+r.S.a/4E5,C=r.S.o/4E5+r.S.i/4E5;var w=new Ic(r.S.i,q.f,r.S.o);Qc(w,q.ka.color);Rc(w,C,-w.y/4E5);w.Qb=t.x;w.Pb=t.y;A.push(w);w=new Ic(r.S.a,q.f,r.S.c);Qc(w,q.ka.color);Rc(w,v,-w.y/4E5);w.Qb=t.x;w.Pb=t.y;A.push(w);w=new Ic(r.S.a,q.h,r.S.c);Qc(w,q.ka.color);Rc(w,v,-w.y/4E5);w.Qb=t.x;w.Pb=t.y;A.push(w);w=new Ic(r.S.i,q.h,r.S.o);Qc(w,q.ka.color);Rc(w,C,-w.y/4E5);w.Qb=t.x;w.Pb=t.y;A.push(w);z.wd.push(A);Ke.push(A);e(se[r.W.ea-1],A,q.ka)}function e(r,q,
t){var z=0,A=q[0],v=Tc(q[1],A,new F(0,0,0));v.x/=1E5;v.y/=1E5;v.z/=1E5;for(var C=2;C<q.length;C++){var w=Tc(q[C],A,new F(0,0,0));w.x/=1E5;w.y/=1E5;w.z/=1E5;z+=Xb(v,w,new F(0,0,0)).length();v=w}q=.5*z;z=t.ia;t=t.color;A=(z.Uc.r-z.Uc.Ia)/255;t=new R(t.r*A+z.Uc.Ia,t.Ia*A+z.Uc.Ia,t.ba*A+z.Uc.Ia,z.Uc.ua);r.fb.x+=t.r*q;r.fb.y+=t.Ia*q;r.fb.z+=t.ba*q;r.$b+=q}a.Ca=[];for(var h=a.Ca,g=p(a.ui),k=g.next();!k.done;k=g.next())if(k=k.value,0<k.Cc){for(var l=ph(k.y,k.W.ea,k.ka.ia,k.ka.Y),m=p(k.xi),n=m.next();!n.done;n=
m.next())b(k,n.value,l);se[k.W.ea-1].cells.push(a)}else for(l=ph(Infinity,k.W.ea,k.ka.ia,k.ka.Y),m=p(k.xi),n=m.next();!n.done;n=m.next())c(k,n.value,l);a=p(a.vi);for(k=a.next();!k.done;k=a.next())for(g=k.value,k=new jf(g.S,g.f,g.h),k.ea=g[0].W.ea-1,h.push(k),k=new O(g.S.a-g.S.i,g.S.o-g.S.c),k.oa(32767),n=p(g),l=n.next();!l.done;l=n.next())d(g,l.value,k)}
function yi(a,b){this.index=Ai++;this.$=a;this.we=b;a=new Xa(Bi);for(var c=new O(0,0),d=1/this.$.length,e=p(this.$),h=e.next();!h.done;h=e.next())h=h.value,h.Pe=this,c.x+=h.o*d,c.y+=h.i*d;b=p(b.Jd.elements);for(d=b.next();!d.done;d=b.next())d=d.value,0>=lc(c.x,c.y,d.$)||a.add(d);this.Jd=a.elements;Ci(this);this.ri=[];a=Number.NEGATIVE_INFINITY;c=p(this.Dd);for(b=c.next();!b.done;b=c.next())if(b=b.value,b.W.add){if(b.f>a){var g=new xi(b.W);g.f=b.f;g.h=b.h;g.floor=b.floor;g.la=b.la;g.$=this.$;this.ri.push(g)}else g.h=
b.h,g.la=b.la;a=g.h}}var Ai=-2147483648;
function Ci(a){var b=new xi;b.f=-2147483648;b.h=2147483647;b.W={};a.Dd=[b];b=p(a.Jd);for(var c=b.next();!c.done;c=b.next()){c=c.value;var d=new xi(c.W);d.f=c.W.f;d.h=c.W.h;d.floor=c.W.floor;d.la=c.W.la;c=[d];d=p(a.Dd);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=[];c=p(c);for(var g=c.next();!g.done;g=c.next())g=g.value,g.W.Ud(e.W)?h.push(g):g.ze(e,h);c=h}d=p(c);for(g=d.next();!g.done;g=d.next()){h=g.value;g=[];var k=p(a.Dd);for(e=k.next();!e.done;e=k.next())e.value.ze(h,g);a.Dd=g}a.Dd.push.apply(a.Dd,
ea(c))}pb(a.Dd,function(l,m){return l.f<m.f?-1:l.f>m.f?1:0})}
yi.prototype.evaluate=function(){for(var a=p(this.ri),b=a.next();!b.done;b=a.next()){b=b.value;if(b.floor){for(var c=[],d=p(this.$),e=d.next();!e.done;e=d.next())e=e.value,e=e.ca(),c.push(e);c.y=b.f;c.ka=b.floor;c.Cc=1;c.W=b.W;this.we.lh.push(c)}if(b.la){c=[];d=p(this.$);for(e=d.next();!e.done;e=d.next())e=e.value,e=e.ca(),c.push(e);c.y=b.h;c.ka=b.la;c.Cc=-1;c.W=b.W;this.we.lh.push(c)}}a=[];b=[];e=p(this.Dd);for(d=e.next();!d.done;d=e.next())c=d.value,(c.W.add?a:b).push(c);b=p(this.$);for(e=b.next();!e.done;e=
b.next()){e=e.value;var h=function(q,t){var z=[];q=p(q);for(var A=q.next();!A.done;A=q.next()){var v=A.value,C=p(t);for(A=C.next();!A.done;A=C.next()){var w=A.value,D=[];v.Da(w.f,w.h,D);var G=p(D);for(A=G.next();!A.done;A=G.next())A.value.W=w.W;z.push.apply(z,ea(D))}}return z},g=function(q,t){t=p(t);for(var z=t.next();!z.done;z=t.next()){z=z.value;var A=[];q=p(q);for(var v=q.next();!v.done;v=q.next())v.value.ze(z.f,z.h,A);q=A}return q};d=function(q,t,z){var A=[];if(!q.Cb)return A;t=p(t);for(var v=
t.next();!v.done;v=t.next()){v=v.value;var C=q.Cb;var w=v,D=Bi,G=mb(C,w,D);if(C=G==C.length||0!=D.call(null,w,C[G])?null:C[G]){v=[new jg(v.W.f,v.W.h,C)];C=p(A);for(w=C.next();!w.done;w=C.next()){w=w.value;D=[];v=p(v);for(G=v.next();!G.done;G=v.next())G=G.value,G.Se.W.Ud(w.Se.W)?D.push(G):G.ze(w.f,w.h,D);v=D}C=p(v);for(G=C.next();!G.done;G=C.next()){D=G.value;G=[];A=p(A);for(w=A.next();!w.done;w=A.next())w.value.ze(D.f,D.h,G);A=G}A.push.apply(A,ea(v))}}for(q=0;q<A.length;q++)A[q].Se.W.add!=z&&A.splice(q--,
1);return A};c=function(q){for(var t=q[0],z=1;z<q.length;z++)if(zi(t.ka,q[z].ka))t=q[z];else{var A=t.ca(t.f,q[z].h);q.splice(--z,2,A)}};var k=d(e,this.Jd,!0),l=[],m=[],n=[];if(e.ga.Pe){l=d(e.ga,e.ga.Pe.Jd,!1);var r=p(e.ga.Pe.Dd);for(d=r.next();!d.done;d=r.next())d=d.value,(d.W.add?m:n).push(d)}k=g(k,m);l=g(l,m);k=h(k,a);l=h(l,a);l=g(l,k);h=l.concat(k);if(h.length){d=[];g=p(h);for(h=g.next();!h.done;h=g.next())if(k=h.value,k.Se.Gf){l=[];m=p(k.Se.Gf);for(h=m.next();!h.done;h=m.next())h.value.Da(k.f,
k.h,l);m=p(l);for(h=m.next();!h.done;h=m.next())h.value.W=k.W;d.push.apply(d,ea(l))}pb(d,function(q,t){return q.f<t.f?-1:q.f>t.f?1:0});g=void 0;k=Number.NEGATIVE_INFINITY;d=p(d);for(h=d.next();!h.done;h=d.next())h=h.value,h.f>k?(g&&c(g),g=[h],g.S=e.ca(),g.W=h.W,g.f=h.f,g.h=h.h,this.we.mh.push(g)):(g.push(h),g.h=h.h),k=h.h;g&&c(g)}}};function wi(a,b,c,d){J.call(this,a,b,c,d);this.index=wi.index++;this.ga=null}wi.index=-2147483648;wi.prototype=Object.create(J.prototype);wi.prototype.constructor=wi;
wi.prototype.Na=function(a,b,c,d){return new wi(a,b,c,d)};wi.prototype.replace=function(a){J.prototype.replace.call(this,a);if(this.Pe)for(var b=0;b<a.length;b++)a[b].Pe=this.Pe;if(this.Cb)for(a=p(a),b=a.next();!b.done;b=a.next())if(b=b.value,b.Cb)for(var c=p(this.Cb),d=c.next();!d.done;d=c.next())d=d.value,0<=b.Cb.indexOf(d)||b.Cb.push(d);else b.Cb=this.Cb.slice()};function jg(a,b,c){this.ka=new Di;this.f=a;this.h=b;this.Se=c;this.W=null}
jg.prototype.ca=function(a,b){a=new jg(a,b,this.Se);a.ka=this.ka;a.W=this.W;return a};jg.prototype.ze=function(a,b,c){this.h<=a||this.f>=b?c.push(this):(this.f<a&&c.push(this.ca(this.f,a)),this.h>b&&c.push(this.ca(b,this.h)))};jg.prototype.Da=function(a,b,c){this.h<=a||this.f>=b||(this.h<=b&&this.f>=a?c.push(this):(b=b<this.h?b:this.h,a=a>this.f?a:this.f,c.push(this.ca(a,b))))};function Di(){this.ia=u.m.da.get("concr01");this.Y=eg;this.color=Dc;this.y=this.x=0}
function zi(a,b){if(a.ia.name<b.ia.name)return-1;if(a.ia.name>b.ia.name)return 1;var c=Hd(a.Y,b.Y);return 0!=c?c:a.color.r<b.color.r?-1:a.color.r>b.color.r?1:a.color.Ia<b.color.Ia?-1:a.color.Ia>b.color.Ia?1:a.color.ba<b.color.ba?-1:a.color.ba>b.color.ba?1:a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0};function Ug(){this.index=Ei++;this.add=!0;this.$=null;this.f=Number.POSITIVE_INFINITY;this.h=Number.NEGATIVE_INFINITY;this.floor=new Di;this.la=new Di;this.color=Dc;this.yb=-1;this.Jd=[]}var Ei=-2147483648,hg=new R(192,192,192,255),mg=new R(64,64,64,255),kg=new R(160,160,160,255),ig=new R(160,160,160,255);
function Vg(a,b){a.floor&&(a.floor.color=hg);a.la&&(a.la.color=ig);a.$=[];for(var c=[],d=0;d<b.length;d++)c.push(kh.kb(b[d].x,b[d].y));b=c;var e=b[b.length-1];for(c=0;c<b.length;c++)d=b[c],e=new wi(e.x,e.y,d.x,d.y),e.W=a,e.Gf=a.Ae(),a.$.push(e),e=d}Ug.prototype.Ae=function(){var a=new jg(this.f,this.h);a.ka.color=this.color;return[a]};
Ug.prototype.stroke=function(){if(kc(this.$)){console.trace();debugger}if(this.h<=this.f){console.trace();debugger}for(var a=[],b=p(this.$),c=b.next();!c.done;c=b.next()){c=c.value;var d=c.ca();d.Cb=[c.Gf];a.push(d);wc(d);delete d.ga.Cb}b=new oc;c=p(a);for(d=c.next();!d.done;d=c.next())d=d.value,b.Da(d.o,d.i);d=b.j&-524288;c=b.f&-524288;d+=524288;for(c+=524288;d<b.s;){var e=new wi(d,b.f,d,b.h);wc(e);a.push(e);d+=524288}for(;c<b.h;)d=new wi(b.j,c,b.s,c),wc(d),a.push(d),c+=524288;a=ch(a.slice(),!0);
a=uh(a);for(b={};a.elements.length;){a:if(c=function(g){return function(){for(var k=p(g.gd),l=k.next();!l.done;l=k.next())if(l.value.Cb)return!0;return!1}}(b),b.gd=vh(a),b.gd&&!kc(b.gd)){if(!c()&&(c=nc(b.gd),0>=lc(c.x,c.y,this.$)))break a;d=new Fi(this);e=p(b.gd);for(c=e.next();!c.done;c=e.next()){c=c.value;var h=c.ca();wc(h);h.W=this;c.Cb&&(h.Gf=c.Cb[0]);d.$.push(h)}d.stroke(ae(ee(b.gd.bound.j+2147483648>>>19,b.gd.bound.f+2147483648>>>19)))}b={gd:b.gd}}};
Ug.prototype.ca=function(){var a=new Ug;a.add=this.add;a.f=this.f;a.h=this.h;a.floor=this.floor;a.la=this.la;a.color=this.color;a.yb=this.yb;return a};Ug.prototype.Ud=function(){return!0};function Fi(a){this.index=Gi++;this.W=a;this.$=[];this.we=null}var Gi=-2147483648;function Bi(a,b){return a.W.index<b.W.index?-1:a.W.index>b.W.index?1:0}Fi.prototype.stroke=function(a){if(kc(this.$)){console.trace();debugger}this.W.Jd.push(this);this.we=a;this.we.Jd.add(this)};var Hi;
function ah(){function a(B,H){if(B.ra.X<H.ra.X)return-1;if(B.ra.X>H.ra.X)return 1;if(B.ra.T<H.ra.T)return-1;if(B.ra.T>H.ra.T)return 1;B=N(H.ra,B.ra.c,B.ra.a);return 0>B?-1:0<B?1:0}function b(B,H){B=B[0];H=H[0];return B.y<H.y?-1:B.y>H.y?1:0}function c(B){if(!(2>B.length)){var H=2.197265625E7;var I=-1;for(var E,K,L=1;L<B.length;L++)E=B[L-1],K=B[L],E=new J(E.c,E.a,K.o,K.i),K=(E.length>>3)*(N(E,K.c,K.a)>>3),K>=H||-2E3>=K||(H=K,I=L);0>I||(E=B[I-1],K=B[I],H=K.Na(E.c,E.a,K.o,K.i),L=K.length/(E.length+K.length),
H.weight=E.weight*(1-L)+K.weight*L,B.splice(I-1,2,H),c(B))}}function d(B){if(!(2>B.length)){var H=2.197265625E7;var I=-1;for(var E=B[B.length-1],K,L=0;L<B.length;L++,E=K)K=B[L],E=new J(E.c,E.a,K.o,K.i),E=(E.length>>3)*(N(E,K.c,K.a)>>3),E>=H||-2E3>=E||(H=E,I=L);0>I||(B.unshift.apply(B,ea(B.splice(I))),E=B.pop(),K=B.shift(),H=K.Na(E.c,E.a,K.o,K.i),I=K.length/(E.length+K.length),H.weight=E.weight*(1-I)+K.weight*I,B.unshift(H),d(B))}}function e(B){function H(M,P){var Aa=tc(M),X=tc(P),Ha=-hc(M,P)+Math.PI;
if(Ha<Rb(165)){var S=new O(M.o,M.i);S.round();S.aa=M.weight;S.na=255;E.push(S);var Ia=new O(M.o-Aa.y,M.i+Aa.x);Ia.round();Ia.aa=S.aa;Ia.na=0;K.push(Ia);I(M);var ua=new O(P.c,P.a);ua.round();ua.aa=P.weight;ua.na=255;E.push(ua);var Ab=new O(P.c-X.y,P.a+X.x);Ab.round();Ab.aa=ua.aa;Ab.na=0;K.push(Ab);Ha<=Rb(90)||(M=new O(M.o+Aa.x,M.i+Aa.y),M.round(),M.aa=S.aa,M.na=0,L.push([Ia,S,M]),P=new O(P.c-X.x,P.a-X.y),P.round(),P.aa=ua.aa,P.na=0,L.push([P,ua,Ab]))}else ua=new O(P.c,P.a),ua.aa=(M.weight+P.weight)*
(1-Ha/Math.Xe),ua.na=255,E.push(ua),Ha<=Rb(195)?(X=new O(-Aa.y-X.y,Aa.x+X.x),X.scale(5E9/X.Ie()),X.x+=P.c,X.y+=P.a,X.round(),X.aa=ua.aa,X.na=0,K.push(X),I(M)):(Ab=new O(M.o-Aa.y,M.i+Aa.x),Ab.round(),Ab.aa=ua.aa,Ab.na=0,K.push(Ab),I(M),P=new O(P.c-X.y,P.a+X.x),P.round(),P.aa=ua.aa,P.na=0,K.push(P),L.push([Ab,ua,P]))}function I(M){if(T)T=!1;else{var P=K[K.length-2],Aa=E[E.length-2],X=E[E.length-1],Ha=K[K.length-1];if(Aa.aa!=M.weight&&X.aa!=M.weight)if(1E5<M.length){var S=M.kb(5E4,0);S.round();S.aa=
M.weight;S.na=255;var Ia=M.kb(M.length-5E4,0);Ia.round();Ia.aa=M.weight;Ia.na=255;L.push([P,Aa,S]);L.push([P,S,Ia,Ha]);L.push([Ia,X,Ha])}else if(S=new O(M.c+M.o>>1,M.a+M.i>>1),S.round(),1E5>M.length){var ua=5E4/M.length-.5;Ia=M.length/1E5;S.aa=.5*(Aa.aa+X.aa)*(1-Ia)+M.weight*Ia;S.na=255;ua=new O(S.x+(M.a-M.i)*ua,S.y+(M.o-M.c)*ua);ua.aa=S.aa;ua.na=M.weight*Ia*255;ua.round();L.push([P,Aa,S,ua]);L.push([P,ua,Ha]);L.push([ua,S,X,Ha])}else S.aa=M.weight,S.na=255,L.push([P,Aa,S]),L.push([P,S,Ha]),L.push([S,
X,Ha]);else Aa.aa!=M.weight?5E4<M.length?(S=M.kb(5E4,0),S.round(),S.aa=M.weight,S.na=255,L.push([P,Aa,S]),L.push([P,S,X,Ha])):L.push([P,Aa,X,Ha]):X.aa!=M.weight?5E4<M.length?(S=M.kb(M.length-5E4,0),S.round(),S.aa=M.weight,S.na=255,L.push([P,Aa,S,Ha]),L.push([S,X,Ha])):L.push([Aa,X,Ha,P]):L.push([P,Aa,X,Ha])}}var E=[],K=[],L=[],T=!1;if(B[0].c==B[B.length-1].o&&B[0].a==B[B.length-1].i){T=!0;H(B[B.length-1],B[0]);L=[];for(var Z=1;Z<B.length;Z++)H(B[Z-1],B[Z]);H(B[B.length-1],B[0])}else{var fa=B[0],ra=
tc(fa);Z=new O(fa.c,fa.a);Z.round();Z.aa=fa.weight;Z.na=255;E.push(Z);fa=new O(fa.c-ra.y,fa.a+ra.x);fa.round();fa.aa=Z.aa;fa.na=0;K.push(fa);for(Z=1;Z<B.length;Z++)H(B[Z-1],B[Z]);B=B[B.length-1];fa=tc(B);Z=new O(B.o,B.i);Z.round();Z.aa=B.weight;Z.na=255;E.push(Z);fa=new O(B.o-fa.y,B.i+fa.x);fa.round();fa.aa=Z.aa;fa.na=0;K.push(fa);I(B)}return L}function h(B){var H=new Xa(fb);B=p(B);for(var I=B.next();!I.done;I=B.next())I=I.value,ne(I.bound.B-5E4,I.bound.j-5E4,I.bound.M+5E4,I.bound.s+5E4,H);return H.elements}
function g(B){var H=new Xa(gc);B=p(B);for(var I=B.next();!I.done;I=B.next())I=I.value,H.remove(vc(I))||H.add(I);return H.elements}function k(B){var H=uh(B,!1);B=[];for(var I=[];H.elements.length;){var E=vh(H);E?kc(E)?I.push(E):(E.Wa=[],B.push(E)):console.log("failed circuit")}I=p(I);for(H=I.next();!H.done;H=I.next())xh(H.value,B);I=[];B=p(B);for(H=B.next();!H.done;H=B.next())if(E=H.value,0==E.Wa.length)I.push(E);else{wh(E);var K=p(E.Wa);for(H=K.next();!H.done;H=K.next())wh(H.value);I.push(yh(E))}return I}
function l(B,H,I){var E=uh(B,!1);B=[];for(var K=new Xa(Sc);E.elements.length;){a:{var L=E;var T=[];T.bound=new oc;var Z=0,fa=L.elements[Z],ra=fa.elements.pop();fa.elements.length||L.elements.splice(Z,1);if(ra)for(T.bound.Da(ra.c,ra.a);;){T.push(ra);T.bound.Da(ra.o,ra.i);if(ra.o==T[0].c&&ra.i==T[0].a)break a;Z=L.contains(new O(ra.o,ra.i));if(0>Z)break a;fa=L.elements[Z];ra=Ya(fa,vc(ra))-1;0>ra&&(ra+=fa.elements.length);ra=fa.elements.splice(ra,1)[0];fa.elements.length||L.elements.splice(Z,1)}else T=
null}B.push(T);if(T[0].c!=T[T.length-1].o||T[0].a!=T[T.length-1].i)L=T[0],L.pg=T,T=new Xa(xc),T.x=L.c,T.y=L.a,T=K.Da(T),T.add(L)}for(E=0;E<B.length;E++)if(L=B[E],L[0].c!=L[L.length-1].o||L[0].a!=L[L.length-1].i)T=L[L.length-1],Z=K.contains(new O(T.o,T.i)),0>Z||(fa=K.elements[Z],T=Ya(fa,vc(T))-1,0>T&&(T+=fa.elements.length),T=fa.elements.splice(T,1)[0],fa.elements.length||K.elements.splice(Z,1),Z=B.indexOf(T.pg),B.splice(Z,1),Z<E&&E--,L.push.apply(L,ea(T.pg)),L.bound.ii(T.pg.bound),E--);K=p(B);for(E=
K.next();!E.done;E=K.next())delete E.value.pg;K=p(B);for(E=K.next();!E.done;E=K.next())E=E.value,E[0].c==E[E.length-1].o&&E[0].a==E[E.length-1].i?d(E):c(E);K=[];B=p(B);for(E=B.next();!E.done;E=B.next())K=K.concat(e(E.value));B=[];K=p(K);for(E=K.next();!E.done;E=K.next())for(E=E.value,L=p(H),Z=L.next();!Z.done;Z=L.next()){a:for(T=E,Z=p(Z.value),fa=Z.next();!fa.done;fa=Z.next()){fa=fa.value;ra=[];for(var M=T[T.length-1],P=N(fa,M.x,M.y),Aa=0;Aa<T.length;Aa++){var X=T[Aa],Ha=N(fa,X.x,X.y);if(0<Ha){if(0>
P){P/=P-Ha;var S=1-P,Ia=new O(M.x*S+X.x*P,M.y*S+X.y*P);Ia.aa=M.aa*S+X.aa*P;Ia.na=M.na*S+X.na*P;ra.push(Ia)}ra.push(X)}else 0>Ha?0<P&&(P/=P-Ha,S=1-P,Ia=new O(M.x*S+X.x*P,M.y*S+X.y*P),Ia.aa=M.aa*S+X.aa*P,Ia.na=M.na*S+X.na*P,ra.push(Ia)):ra.push(X);M=X;P=Ha}if(3>ra.length){T=null;break a}T=ra}T&&B.push(T)}H=p(B);for(E=H.next();!E.done;E=H.next()){B=E.value;for(K=0;K<B.length;K++)E=B[K],E.index?B[K]=E.index:(E.index=Hi.pb.length,B[K]=E.index,L=I(E),L.aa=225*E.aa,L.na=E.na,Hi.pb.push(L));m+=3*(B.length-
2);Hi.wd.push(B)}}Hi=new Le;Hi.Y=new pd;Hi.Y.name="creaseShading";Hi.Y.va=1;Hi.Y.Vc=new R(0,0,0,127.5);Hi.H=u.m.ma.get("creaseShading");for(var m=0,n={},r=p(Xd.elements),q=r.next();!q.done;n={de:n.de},q=r.next()){var t=q.value;t.Pg=m;n.de=new Xa(a);for(var z=new Xa(b),A=new Xa(b),v={},C=p(t.Ca),w=C.next();!w.done;v={nc:v.nc,Ec:v.Ec,Eg:v.Eg},w=C.next())if(v.Ec=w.value,v.Ec instanceof jf){v.Eg=function(B){return function(H){var I=H.ra,E=Math.atan2(I.T,I.X)-Math.atan2(B.nc.T,B.nc.X);if(Math.abs(E>Math.PI?
E-Math.Xe:E<-Math.PI?E+Math.Xe:E)>Rb(5))return!1;E=I.weight/(I.weight+1);var K=1-E;E=I.Na(Math.round(I.c*E+B.nc.c*K),Math.round(I.a*E+B.nc.a*K),Math.round(I.o*E+B.nc.o*K),Math.round(I.i*E+B.nc.i*K));if(500<=Math.abs(N(E,B.nc.c,B.nc.a))||500<=Math.abs(N(E,B.nc.o,B.nc.i))||500<=Math.abs(N(E,I.c,I.a))||500<=Math.abs(N(E,I.o,I.i)))return!1;H.ra=E;E.weight=I.weight+1;H.push(B.Ec);return!0}}(v);var D=function(B,H){return function(){for(var I=p(B.de.elements),E=I.next();!E.done;E=I.next())if(H.Eg(E.value))return!0;
return!1}}(n,v);v.nc=vc(v.Ec.S);if(!D()){var G=[v.Ec];G.ra=v.nc;G.ra.weight=1;var Q=n.de.Da(G);Q!=G&&Q.push(v.Ec)}}else{var aa=[v.Ec],V=void 0;v.Ec instanceof kf?V=z.Da(aa):v.Ec instanceof lf&&(V=A.Da(aa));V!=aa&&V.push(v.Ec)}n.de=n.de.elements;z=z.elements;A=A.elements;for(var da={},xa=p(n.de),ba=xa.next();!ba.done;da={Nb:da.Nb,Md:da.Md},ba=xa.next()){var ya=ba.value;da.Md=uc(ya.ra,-1E3);ya.ra=ya.ra.Na(ya.ra.c+da.Md.x,ya.ra.a+da.Md.y,ya.ra.o+da.Md.x,ya.ra.i+da.Md.y);da.Nb=ya.ra;var ha=[[],[],[],
[]],Gc=[],Bh=p(ya);for(w=Bh.next();!w.done;w=Bh.next()){var hd=w.value,Ch=function(B,H,I){B.c<H.j||B.c>H.s||B.i>H.h||B.a<H.f?I.push(B):(B.i<H.f&&I.push(B.Na(B.c,H.f,B.o,B.i)),B.a>H.h&&I.push(B.Na(B.c,B.a,B.o,H.h)))},Dh=function(B,H,I){B.a<H.f||B.a>H.h||B.o>H.s||B.c<H.j?I.push(B):(B.o<H.j&&I.push(B.Na(H.j,B.a,B.o,B.i)),B.c>H.s&&I.push(B.Na(B.c,B.a,H.s,B.i)))},Eh=function(B,H,I){B.c<H.j||B.c>H.s||B.a>H.h||B.i<H.f?I.push(B):(B.a<H.f&&I.push(B.Na(B.c,B.a,B.o,H.f)),B.i>H.h&&I.push(B.Na(B.c,H.h,B.o,B.i)))},
Fh=function(B,H,I){B.a<H.f||B.a>H.h||B.c>H.s||B.o<H.j?I.push(B):(B.c<H.j&&I.push(B.Na(B.c,B.a,H.j,B.i)),B.o>H.s&&I.push(B.Na(H.s,B.a,B.o,B.i)))},va=new oc;va.j=Math.round(da.Nb.getParameter(hd.S.o,hd.S.i));va.s=Math.round(da.Nb.getParameter(hd.S.c,hd.S.a));va.f=hd.f;va.h=hd.h;for(var Bb=[[],[],[],[]],Gh=p(ha[0]),pa=Gh.next();!pa.done;pa=Gh.next())Fh(pa.value,va,Bb[0]);var Hh=p(ha[1]);for(pa=Hh.next();!pa.done;pa=Hh.next())Eh(pa.value,va,Bb[1]);var Ih=p(ha[2]);for(pa=Ih.next();!pa.done;pa=Ih.next())Dh(pa.value,
va,Bb[2]);var Jh=p(ha[3]);for(pa=Jh.next();!pa.done;pa=Jh.next())Ch(pa.value,va,Bb[3]);ha=Bb;for(var ac=[[new J(va.j,va.f,va.s,va.f)],[new J(va.s,va.f,va.s,va.h)],[new J(va.s,va.h,va.j,va.h)],[new J(va.j,va.h,va.j,va.f)]],Kh=p(Gc),Uf=Kh.next();!Uf.done;Uf=Kh.next()){var Be=Uf.value;Bb=[[],[],[],[]];var Lh=p(ac[0]);for(pa=Lh.next();!pa.done;pa=Lh.next())Fh(pa.value,Be,Bb[0]);var Mh=p(ac[1]);for(pa=Mh.next();!pa.done;pa=Mh.next())Eh(pa.value,Be,Bb[1]);var Nh=p(ac[2]);for(pa=Nh.next();!pa.done;pa=Nh.next())Dh(pa.value,
Be,Bb[2]);var Oh=p(ac[3]);for(pa=Oh.next();!pa.done;pa=Oh.next())Ch(pa.value,Be,Bb[3]);ac=Bb}ha[0].push.apply(ha[0],ea(ac[0]));ha[1].push.apply(ha[1],ea(ac[1]));ha[2].push.apply(ha[2],ea(ac[2]));ha[3].push.apply(ha[3],ea(ac[3]));Gc.push(va)}ha=ha[0].concat(ha[1].concat(ha[2].concat(ha[3])));ya.length=0;for(var Cj=k(ha),Vf=[],Ph=p(Cj),Cb=Ph.next();!Cb.done;Cb=Ph.next()){for(var Qh=Cb.value,Od=Qh.slice(),Pd=new oc,Rh=p(Qh),Db=Rh.next();!Db.done;Db=Rh.next()){var Sh=Db.value;Pd.Da(Sh.o,Sh.i)}var Th=
da.Nb.kb(Pd.j,0),Uh=da.Nb.kb(Pd.s,0);Od.bound=new ed;Od.bound.Da(Th.y,Pd.f,Th.x);Od.bound.Da(Uh.y,Pd.h,Uh.x);Vf.push.apply(Vf,ea(vi(Od)));ya.push(Od)}var Dj=h(ya);ha=[];var Vh=p(Dj);for(q=Vh.next();!q.done;q=Vh.next())for(var Wh=p(q.value.Ca),Eb=Wh.next();!Eb.done;Eb=Wh.next()){var ob=Eb.value;if(ob instanceof lf){var Lc=sc(da.Nb,ob.$);if(Lc){Lc[0]=Math.round(Lc[0]);Lc[1]=Math.round(Lc[1]);var Xh=new J(Lc[1],ob.y,Lc[0],ob.y);Xh.weight=1;ha.push(Xh)}}else if(ob instanceof kf){var Mc=sc(da.Nb,ob.$);
if(Mc){Mc[0]=Math.round(Mc[0]);Mc[1]=Math.round(Mc[1]);var Yh=new J(Mc[0],ob.y,Mc[1],ob.y);Yh.weight=1;ha.push(Yh)}}else{var Ce=da.Nb,qc=ob.S,bc=N(Ce,qc.c,qc.a),Nc=N(Ce,qc.o,qc.i),Wf=Ce.getParameter(qc.c,qc.a),Xf=Ce.getParameter(qc.o,qc.i);if(bc<Nc){if(!(-256>Nc||256<bc)){var Zh=bc/(bc-Nc),Yf=Math.round(Wf*(1-Zh)+Xf*Zh),$h=Math.atan2(-bc,Wf-Yf);if(!($h<Rb(15))){var De=new J(Yf,ob.f,Yf,ob.h);De.weight=(180*$h/Math.PI-15)/75;1<De.weight&&(De.weight=1);ha.push(De)}}}else if(bc>Nc&&!(-256>bc)&&!(256<
Nc)){var ai=bc/(bc-Nc),Zf=Math.round(Wf*(1-ai)+Xf*ai),bi=Math.atan2(-Nc,Zf-Xf);if(!(bi<Rb(15))){var Ee=new J(Zf,ob.h,Zf,ob.f);Ee.weight=(180*bi/Math.PI-15)/75;1<Ee.weight&&(Ee.weight=1);ha.push(Ee)}}}}l(ha,Vf,function(B){return function(H){var I=Math.round(H.x);H=Math.round(H.y);I/=B.Nb.length;return new Ic(Math.round(B.Nb.a+(B.Nb.i-B.Nb.a)*I)-B.Md.y,H,Math.round(B.Nb.c+(B.Nb.o-B.Nb.c)*I)-B.Md.x)}}(da))}var Oc={},ci=p(z);for(ba=ci.next();!ba.done;Oc={se:Oc.se},ba=ci.next()){var Qd=ba.value;Oc.se=
Qd[0].y;var id=[],di=p(Qd);for(w=di.next();!w.done;w=di.next())id.push.apply(id,ea(w.value.$));Qd.length=0;var Ej=k(g(id)),$f=[],ei=p(Ej);for(Cb=ei.next();!Cb.done;Cb=ei.next()){var fi=Cb.value,cc=fi.slice(),Rd=new oc,gi=p(fi);for(Db=gi.next();!Db.done;Db=gi.next()){var hi=Db.value;Rd.Da(hi.o,hi.i)}cc.bound=new ed;cc.bound.B=Rd.j;cc.bound.M=Rd.s;cc.bound.j=Rd.f;cc.bound.s=Rd.h;cc.bound.f=cc.bound.h=Oc.se;$f.push.apply($f,ea(vi(cc)));Qd.push(cc)}var Fj=h(Qd);id=[];var ii=p(Fj);for(q=ii.next();!q.done;q=
ii.next()){var ji=p(q.value.Ca);for(Eb=ji.next();!Eb.done;Eb=ji.next()){var Fe=Eb.value;if(Fe instanceof jf&&!(Fe.f>Oc.se||Fe.h<=Oc.se)){var ki=Fe.S.ca();ki.weight=1;id.push(ki)}}}l(id,$f,function(B){return function(H){return new Ic(Math.round(H.y),B.se,Math.round(H.x))}}(Oc))}var Pc={},li=p(A);for(ba=li.next();!ba.done;Pc={te:Pc.te},ba=li.next()){var Sd=ba.value;Pc.te=Sd[0].y;var Td=[],mi=p(Sd);for(w=mi.next();!w.done;w=mi.next())for(var ni=p(w.value.$),ag=ni.next();!ag.done;ag=ni.next()){var Ud=
ag.value;Td.push(Ud.Na(-Ud.o,Ud.i,-Ud.c,Ud.a))}Sd.length=0;var Gj=k(g(Td)),bg=[],oi=p(Gj);for(Cb=oi.next();!Cb.done;Cb=oi.next()){var pi=Cb.value,dc=pi.slice(),Vd=new oc,qi=p(pi);for(Db=qi.next();!Db.done;Db=qi.next()){var ri=Db.value;Vd.Da(ri.o,ri.i)}dc.bound=new ed;dc.bound.B=-Vd.s;dc.bound.M=-Vd.j;dc.bound.j=Vd.f;dc.bound.s=Vd.h;dc.bound.f=dc.bound.h=Pc.te;bg.push.apply(bg,ea(vi(dc)));Sd.push(dc)}var Hj=h(Sd);Td=[];var si=p(Hj);for(q=si.next();!q.done;q=si.next()){var ti=p(q.value.Ca);for(Eb=ti.next();!Eb.done;Eb=
ti.next()){var rc=Eb.value;if(rc instanceof jf&&!(rc.f>=Pc.te||rc.h<Pc.te)){var ui=rc.S.Na(-rc.S.o,rc.S.i,-rc.S.c,rc.S.a);ui.weight=1;Td.push(ui)}}}l(Td,bg,function(B){return function(H){return new Ic(Math.round(H.y),B.te,-Math.round(H.x))}}(Pc))}t.Qh=m-t.Pg}Hi.compile()};u.za=function(a){u.pa.call(this,a);this.b=new F(0,0,0);this.tb=0;this.Z={Sa:-2147483648,Xa:new F(1,1,1)};this.Oh=new Za;this.bf=new oc};u.za.prototype=Object.create(u.pa.prototype);u.za.prototype.constructor=u.za;u.za.index=-2147483648;u.za.prototype.create=function(){this.index=u.za.index++;u.kh.push(this);u.pa.prototype.create.call(this)};u.za.prototype.remove=function(){for(var a=this.Oh.first();null!=a.item;){var b=a.next;ab(a);ab(a.Cd);a=b}u.kh.remove(this);u.pa.prototype.remove.call(this)};
u.za.prototype.step=function(){this.bf.Qd(this.b.z,this.b.x)||bh(this);var a=ke(this.b,new F(0,-1E8,0),!0);a&&ze(this.b,se[a.item.ea],this.Z.Xa);u.pa.prototype.step.call(this)};
function bh(a){for(var b=a.b.z-a.tb,c=a.b.z+a.tb,d=a.b.x-a.tb,e=a.b.x+a.tb,h=a.Oh.first(),g=[Wd];g.length;){var k=g.shift();if(k instanceof ge)b<=k.value&&g.push(k.fe),c>=k.value&&g.push(k.ge);else if(k instanceof he)d<=k.value&&g.push(k.fe),e>=k.value&&g.push(k.ge);else{for(;null!=h.item&&!(h.item.index>=k.index);){var l=h.next;ab(h);ab(h.Cd);h=l}if(h.item==k)h=h.next;else{l=new $a(k);var m=new $a(a);l.Cd=m;m.Cd=l;cb(l,h);bb(k.jh,m)}}}for(;null!=h.item;)g=h.next,ab(h),ab(h.Cd),h=g;a.bf.j=(b>>19<<
19)+a.tb;a.bf.s=((c>>19)+1<<19)-a.tb;a.bf.f=(d>>19<<19)+a.tb;a.bf.h=((e>>19)+1<<19)-a.tb}u.kh=new Xa(fb);u.ee=function(a){u.Node.call(this,a);this.Ja=1E5};u.ee.prototype=Object.create(u.Node.prototype);u.ee.prototype.constructor=u.ee;u.ee.color=new R(0,0,0,64);
u.ee.prototype.Qa=function(){var a=new U;a.D=0;a.I=0;a.J=this.Ja;a.G=this.Ja;a.m11=0;a.m12=0;a.F=0;a.m21=1;a.m22=0;a.A=this.qa.A;a.m31=this.qa.m31+500;a.m32=this.qa.m32;var b=ke(new F(this.qa.A,this.qa.m31,this.qa.m32),new F(0,-1E8,0));b&&(a.m31-=b.d);u.H.O("modelMatrix",a);x.drawArrays(x.TRIANGLE_FAN,0,4);u.Node.prototype.Qa.call(this)};var Ii,Ji=980700/3600*2,Ki=new F(0,-Ji,0),Li=new Xa(fb),Mi=new u.Node("physProcessor");
Mi.step=function(){Ii=new Nb;for(var a=p(Li.elements),b=a.next();!b.done;b=a.next()){b=b.value;b.vd=0;b.t=0;b.Pi=Ni(b.b,b.Ha,b.mb);var c=b.Ki();b.input();0<b.Le&&(b.g.x+=Ki.x,b.g.y+=Ki.y,b.g.z+=Ki.z);b.g.scale(b.fj);var d=Tc(b.g,b.Ta,new F(0,0,0));if(0<b.Bf){for(var e=b,h=b.Pi,g=new F(0,0,0),k=0;k<h.length;k++){var l=h[k],m=-Vb(d,l);if(!(0>=m)){m*=e.Bf;var n=Vb(e.g,l);l=new F(e.g.x-l.x*n,e.g.y-l.y*n,e.g.z-l.z*n);m/=l.length();1<m&&(m=1);g.x-=l.x*m;g.y-=l.y*m;g.z-=l.z*m}}e.g.add(g)}b.Ma.set(.5*b.Ta.x+
.5*b.g.x,.5*b.Ta.y+.5*b.g.y,.5*b.Ta.z+.5*b.g.z);b.Ma.y+=c;b.Ma.round();b.bound=Oi(b.b,b.Ha,b.mb,b.Ma)}a=p(Li.elements);for(b=a.next();!b.done;b=a.next())b.value.handleEvent();for(a=0;!Ii.hg();){b=Ii.pop();if(10<++a)break;b.target?(c=b.source,e=b.target,c.vd==b.Yh&&e.vd==b.Ui&&(c.vd++,e.vd++,Pi(c,b),Pi(e,b),c.handleEvent(),e.handleEvent())):(c=b.source,c.vd==b.Yh&&(c.vd++,Pi(c,b),c.handleEvent()))}a=p(Li.elements);for(b=a.next();!b.done;b=a.next())b=b.value,b.b.x+=b.Ma.x,b.b.y+=b.Ma.y,b.b.z+=b.Ma.z,
b.Ta.set(b.g.x,b.g.y,b.g.z),b.transform.A=b.b.x,b.transform.m31=b.b.y,b.transform.m32=b.b.z};function Qi(a){u.za.call(this,a);this.g=new F(0,0,0);this.Ta=new F(0,0,0);this.mb=this.Ha=0;this.Le=1;this.Bf=0;this.fj=1;this.Af=0;this.Wf=new Xa(fb);this.t=this.vd=0;this.Ma=new F(0,0,0)}Qi.prototype=Object.create(u.za.prototype);f=Qi.prototype;f.constructor=Qi;f.create=function(){u.za.prototype.create.call(this);Li.add(this)};f.remove=function(){u.za.prototype.remove.call(this);Li.remove(this)};f.Ki=function(){return 0};
function Pi(a,b){var c=(b.t-a.t)/(1-a.t);c=new F(a.Ma.x*c,a.Ma.y*c,a.Ma.z*c);c.round();a.b.add(c);a.Ma.sub(c);a.t=b.t}
f.handleEvent=function(){for(var a=new F(this.g.x,this.g.y,this.g.z),b=Ni(this.b,this.Ha,this.mb),c=Ri(this),d=0;d<b.length;d++){var e=b[d],h=!1,g=-Vb(this.g,e);0<g&&(2E3<g*this.Af&&(h=!0,g*=1+this.Af),this.g.x+=e.x*g,this.g.y+=e.y*g,this.g.z+=e.z*g);g=-Vb(this.Ma,e);0<g&&(h&&(g*=1+this.Af),this.Ma.x+=e.x*g,this.Ma.y+=e.y*g,this.Ma.z+=e.z*g)}for(d=0;d<c.length;d++){h=function(m,n){var r=Vb(m,e),q=Vb(n,e);var t=k.Le;var z=l.Le;r>=q?t=[r,q]:(t=(t*r+z*q)/(t+z),t=[t+(t-r)*k.Af,t+(t-q)*l.Af]);r=t[0]-r;
q=t[1]-q;m.x+=e.x*r;m.y+=e.y*r;m.z+=e.z*r;n.x+=e.x*q;n.y+=e.y*q;n.z+=e.z*q};e=c[d];var k=this,l=e.source;l.index<k.index||(h(k.Ma,l.Ma),h(k.g,l.g))}Yb(this.Ma,b);Yb(this.g,b);0<b.length+c.length&&(Tc(this.g,a,a),a.oa(1));this.bound=Oi(this.b,this.Ha,this.mb,this.Ma);if(this.Ma.$g())return null;u.yf();b=p(b);for(a=b.next();!a.done;a=b.next())a.value.source.Sa=u.Sa;c=p(c);for(a=c.next();!a.done;a=c.next())a.value.source.Sa=u.Sa;0>=this.Ha||!(c=Si(this,this.b,this.Ha,this.mb,this.Ma,!0))||(c.source=
this,c.Yh=this.vd,c.target&&(c.Ui=c.target.vd),Ii.add(c,c.t))};
function Si(a,b,c,d,e,h){for(var g=new ie(b,e,c),k=null,l=1,m=g.next();m&&!(m.t>l);){m=p(m.node.Ca);for(var n=m.next();!n.done;n=m.next())if(n=n.value,n.Sa!=u.Sa&&(n=n.ve(b,c,d,e)))n.d=n.t*e.length(),-1>n.d||(n.t=a.t+n.t*(1-a.t),n.t>=l||(k=n,l=n.t));m=g.next()}g=p($d);for(n=g.next();!n.done;n=g.next())if(m=n.value,m.Sa!=u.Sa&&(m=m.ve(b,c,d,e)))m.d=m.t*e.length(),-1>m.d||(m.t=a.t+m.t*(1-a.t),m.t>=l||(k=m,l=m.t));if(!h)return k;for(b=0;b<Li.elements.length;b++){c=Li.elements[b];if(d=a!=c)if(d=c.Sa!=
u.Sa)if(d=!a.Wf.get(c))if(d=!c.Wf.get(a))d=a.bound,e=c.bound,d=d.j>=e.s||d.s<=e.j||d.f>=e.h||d.h<=e.f||d.B>=e.M||d.M<=e.B?!1:!0;if(d){d=a.t>c.t?a.t:c.t;e=Ti(a,d);h=Ti(c,d);a:{var r=e.ti,q=e.r,t=e.C,z=e.Dc;n=h.ti;g=h.r;var A=h.C;m=h.Dc;if(0==t&&0==A)t=r,A=Tc(t,n,new F(0,0,0)),r=Tc(z,m,new F(0,0,0)),0==r.length()?g=null:(A=Ub(A,r,q+g))?(z=new F(t.x+z.x*A.wa,t.y+z.y*A.wa,t.z+z.z*A.wa),m=new F(n.x+m.x*A.wa,n.y+m.y*A.wa,n.z+m.z*A.wa),n=new Ui,n.t=A.wa,q=g/(g+q),t=1-q,n.p=(new F(m.x*t+z.x*q,m.y*t+z.y*q,
m.z*t+z.z*q)).round(),n.n=new F((n.p.x-m.x)/g,(n.p.y-m.y)/g,(n.p.z-m.z)/g),g=n):g=null;else{var v=new F(r.x-n.x,0,r.z-n.z),C=new F(z.x-m.x,0,z.z-m.z);if(0==C.length())g=null;else if(v=Ub(v,C,q+g)){var w=new F(r.x+z.x*v.wa,r.y+z.y*v.wa,r.z+z.z*v.wa);C=new F(n.x+m.x*v.wa,n.y+m.y*v.wa,n.z+m.z*v.wa);var D=g/(g+q),G=1-D;w=new F(C.x*G+w.x*D,C.y*G+w.y*D,C.z*G+w.z*D);w.round();if(w.y>C.y+A){v=new F(r.x-n.x,r.y-t-(n.y+A),r.z-n.z);C=Tc(z,m,new F(0,0,0));v=Ub(v,C,q+g);if(!v){g=null;break a}w=new F(r.x+z.x*v.wa,
r.y-t+z.y*v.wa,r.z+z.z*v.wa);C=new F(n.x+m.x*v.wa,n.y+A+m.y*v.wa,n.z+m.z*v.wa);m=new Ui;m.t=v.wa;D=g/(g+q);G=1-D;m.p=(new F(C.x*G+w.x*D,(C.y+A)*G+(w.y-t)*D,C.z*G+w.z*D)).round();m.n=new F((m.p.x-C.x)/g,(m.p.y-(C.y+A))/g,(m.p.z-C.z)/g)}else if(w.y<C.y-A){v=new F(r.x-n.x,r.y+t-(n.y-A),r.z-n.z);C=Tc(z,m,new F(0,0,0));v=Ub(v,C,q+g);if(!v){g=null;break a}w=new F(r.x+z.x*v.wa,r.y+t+z.y*v.wa,r.z+z.z*v.wa);C=new F(n.x+m.x*v.wa,n.y-A+m.y*v.wa,n.z+m.z*v.wa);m=new Ui;m.t=v.wa;D=g/(g+q);G=1-D;m.p=(new F(C.x*
G+w.x*D,(C.y-A)*G+(w.y+t)*D,C.z*G+w.z*D)).round();m.n=new F((m.p.x-C.x)/g,(m.p.y-(C.y-A))/g,(m.p.z-C.z)/g)}else m=new Ui,m.t=v.wa,m.p=w,m.n=new F((m.p.x-C.x)/g,0,(m.p.z-C.z)/g);g=m}else g=null}}g&&(g.d=g.t*Tc(e.Dc,h.Dc,new F(0,0,0)).length(),-1>g.d||(g.t=d+g.t*(1-d),g.t>=l||(g.target=c,k=g,l=g.t)))}}return k}
function Ti(a,b){b=(b-a.t)/(1-a.t);b=new F(a.Ma.x*b,a.Ma.y*b,a.Ma.z*b);b.round();var c={};c.ti=(new F(a.b.x,a.b.y,a.b.z)).add(b);c.r=a.Ha;c.C=a.mb;c.Dc=(new F(a.Ma.x,a.Ma.y,a.Ma.z)).sub(b);return c}function Ni(a,b,c){var d=me(a,b),e=[];u.yf();d=p(d);for(var h=d.next();!h.done;h=d.next()){var g=p(h.value.Ca);for(h=g.next();!h.done;h=g.next())h.value.Uf(a,b,c,e)}d=p($d);for(h=d.next();!h.done;h=d.next())h.value.Uf(a,b,c,e);return e}
function Ri(a){for(var b=[],c=0;c<Li.elements.length;c++){var d=Li.elements[c];if(a!=d&&!a.Wf.get(d)&&!d.Wf.get(a)){var e=a.b;var h=a.Ha,g=a.mb,k=d.b,l=d.Ha,m=d.mb;if(0==g&&0==m){e=new F(e.x-k.x,e.y-k.y,e.z-k.z);var n=e.oa(1);e.d=Vb(new F(k.x+e.x*l,k.y+e.y*l,k.z+e.z*l),e)+h;n-=h+l;e=2<n||n<-h?null:e}else{if(e.y-g>k.y+m){n=new F(e.x-k.x,e.y-g-(k.y+m),e.z-k.z);var r=n.oa(1);e=new F(k.x+n.x*l,k.y+n.y*l,k.z+n.z*l)}else e.y+g<k.y-m?(n=new F(e.x-k.x,e.y+g-(k.y-m),e.z-k.z),r=n.oa(1),e=new F(k.x+n.x*l,k.y+
n.y*l,k.z+n.z*l)):(n=new F(e.x-k.x,0,e.z-k.z),r=n.oa(1),e=new F(k.x+n.x*l,(e.y*m+k.y*g)/(g+m),k.z+n.z*l));n.d=Vb(e,n)+h;r-=h+l;e=2<r||r<-h?null:n}e&&(e.source=d,b.push(e))}}return b}f.input=function(){};function Vi(a){Qi.call(this,a);this.Bh=this.Qg=this.Hd=this.ig=this.Ke=this.Mc=0;this.ah=this.ae=Number.NEGATIVE_INFINITY;this.Qi=this.vf=!1;this.je=0;this.$f=18}Vi.prototype=Object.create(Qi.prototype);Vi.prototype.constructor=Vi;Vi.Fc=function(a){return Math.sqrt(2*a*Ji)};
Vi.prototype.Ki=function(){var a=0,b=this.Qi?this.Qg:this.Hd,c=new F(this.b.x,this.b.y-this.mb,this.b.z);0>=this.g.y&&(this.vf=!1);if(!(this.ae<u.v-1)){this.vf=!1;var d=0;u.yf();var e=this.Bh;if(e=Si(this,c,this.Ha,0,new F(0,-e,0)))d=e.d;c.y-=d;c=Ni(c,this.Ha,0);e=Number.NEGATIVE_INFINITY;for(var h=0;h<c.length;h++){var g=c[h];g.y>e&&(e=g.y)}0<e&&(this.ae=u.v,a=b-2*(this.Ha+this.mb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}else if(!this.vf){d=0;u.yf();e=this.Hd-2*this.mb-this.Ha;if(e=Si(this,c,this.Ha,
0,new F(0,-e,0)))d=e.d;c.y-=d;c=Ni(c,this.Ha,0);e=Number.NEGATIVE_INFINITY;for(h=0;h<c.length;h++)g=c[h],g.y>e&&(e=g.y);0<e&&(this.ae=u.v,a=b-2*(this.Ha+this.mb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}return a};Vi.prototype.Xg=function(){return new F(0,0,0)};Vi.prototype.di=function(){};
Vi.prototype.input=function(){Qi.prototype.input.call(this);this.di();var a=this.Xg();if(u.u.ta==this){var b=this.transform;a.set(b.D*a.x+b.F*a.z,0,b.J*a.x+b.m22*a.z)}b=a.oa(1);0==b&&(this.je=0);if(this.ae<u.v-1){b=.25*this.Ke;var c=new O(this.g.z,this.g.x),d=c.length(),e=Vb(this.g,a);0>e&&(e=0);e>this.Mc&&(e=this.Mc);b=this.Mc/(this.Mc+b)*(e+b)-e;d>this.Mc&&c.scale(Math.max(0,d-b)/d);c.x+=a.z*b;c.y+=a.x*b;this.g.z=c.x;this.g.x=c.y}else 0<b&&(this.g.x+=a.x*this.Ke,this.g.z+=a.z*this.Ke,u.u.ta==this&&
(this.je>=2*this.$f&&(this.je=0),0==this.je?u.m.ja.get("stepConcrete01").play({gain:1/6}):this.je==this.$f&&u.m.ja.get("stepConcrete02").play({gain:1/6})),this.je++),this.g.scale(this.Mc/(this.Mc+this.Ke));this.ah<u.v-6||this.ae<u.v-15||(this.g.y=Math.min(this.ig,this.g.y+this.ig),this.ah=this.ae=Number.NEGATIVE_INFINITY,this.vf=!0)};function Ui(){this.index=Wi++;this.t=NaN;this.n=this.p=null;this.Ab=!0}var Wi=-2147483648;function Oi(a,b,c,d){var e=new ed,h=a.z-b;h<e.B&&(e.B=h);h=a.z+b;h>e.M&&(e.M=h);h=a.z+d.z-b;h<e.B&&(e.B=h);h=a.z+d.z+b;h>e.M&&(e.M=h);h=a.x-b;h<e.j&&(e.j=h);h=a.x+b;h>e.s&&(e.s=h);h=a.x+d.x-b;h<e.j&&(e.j=h);h=a.x+d.x+b;h>e.s&&(e.s=h);b+=c;c=a.y-b;c<e.f&&(e.f=c);c=a.y+b;c>e.h&&(e.h=c);c=a.y+d.y-b;c<e.f&&(e.f=c);c=a.y+d.y+b;c>e.h&&(e.h=c);return e}
function Xi(a,b,c,d,e){var h=Ub(new F(a.x-c.x,0,a.z-c.z),new F(b.x,0,b.z),d);if(!h)return null;d=new Ui;d.t=h.wa;d.p=new F(a.x+b.x*d.t,a.y+b.y*d.t,a.z+b.z*d.t);d.n=new F(d.p.x-c.x,0,d.p.z-c.z);d.n.oa(1);var g=new Ui;g.t=h.yc;g.p=new F(a.x+b.x*g.t,a.y+b.y*g.t,a.z+b.z*g.t);g.n=new F(g.p.x-c.x,0,g.p.z-c.z);g.n.oa(1);if(0<b.y){h=(c.y-e-a.y)/b.y;var k=(c.y+e-a.y)/b.y;h>d.t&&(d=new Ui,d.t=h,d.p=new F(a.x+b.x*d.t,c.y-e,a.z+b.z*d.t),d.n=new F(0,-1,0));k<g.t&&(g=new Ui,g.t=k,g.p=new F(a.x+b.x*g.t,c.y+e,a.z+
b.z*g.t),g.n=new F(0,1,0))}else if(0>b.y)h=(c.y+e-a.y)/b.y,k=(c.y-e-a.y)/b.y,h>d.t&&(d=new Ui,d.t=h,d.p=new F(a.x+b.x*d.t,c.y+e,a.z+b.z*d.t),d.n=new F(0,1,0)),k<g.t&&(g=new Ui,g.t=k,g.p=new F(a.x+b.x*g.t,c.y-e,a.z+b.z*g.t),g.n=new F(0,-1,0));else if(a.y>c.y+e||a.y<c.y-e)return null;if(d.t>g.t)return null;d.Ab=!0;g.Ab=!1;return d}
function Yi(a,b,c,d){b=Tb(d,c,a,b);if(!b)return null;var e=new Ui;e.t=-b.yc;e.p=d;e.n=(new F(a.x-(d.x+c.x*b.yc),a.y-(d.y+c.y*b.yc),a.z-(d.z+c.z*b.yc))).round();e.n.oa(1);e.Ab=!0;return e}
function Zi(a,b,c,d,e){var h=Vb(c,e);c=new F(c.x-e.x*h,c.y-e.y*h,c.z-e.z*h);d=new F(d.x-a.x,d.y-a.y,d.z-a.z);var g=Vb(d,e);d.set(d.x-e.x*g,d.y-e.y*g,d.z-e.z*g);b=Ub(d,c,b);if(!b)return null;g=new Ui;g.t=-b.yc;g.p=(new F(a.x+d.x+e.x*h*g.t,a.y+d.y+e.y*h*g.t,a.z+d.z+e.z*h*g.t)).round();g.n=new F(-(d.x+c.x*b.yc),-(d.y+c.y*b.yc),-(d.z+c.z*b.yc));g.n.oa(1);g.Ab=!0;return g}
kf.prototype.ve=function(a,b,c,d){c=this.y+c;if(0<=d.y)var e=null;else{var h=new Ui;h.t=-(a.y-c-b)/d.y;h.p=(new F(a.x+d.x*h.t,a.y-b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new F(0,1,0);e=h}if(!e)return null;if(0==ic(e.p.z,e.p.x,this.$).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.$.length;l++){var m=this.$[l];e=new F(m.a,c,m.c);var n=new F(m.i-m.a,0,m.o-m.c);n.scale(1/m.length);(e=Zi(a,b,d,e,n))?(n=m.getParameter(e.p.z,e.p.x),!(0>n||n>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.$.length-1)+1:h|3<<l-1}for(l=0;l<this.$.length;l++)h&1<<l||(m=this.$[l],(e=Yi(a,b,d,new F(m.i,c,m.o)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
lf.prototype.ve=function(a,b,c,d){c=this.y-c;if(0>=d.y)var e=null;else{var h=new Ui;h.t=-(c-a.y-b)/-d.y;h.p=(new F(a.x+d.x*h.t,a.y+b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new F(0,-1,0);e=h}if(!e)return null;if(0==ic(e.p.z,e.p.x,this.$).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.$.length;l++){var m=this.$[l];e=new F(m.a,c,m.c);var n=new F(m.i-m.a,0,m.o-m.c);n.scale(1/m.length);(e=Zi(a,b,d,e,n))?(n=m.getParameter(e.p.z,e.p.x),!(0>n||n>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.$.length-1)+1:h|3<<l-1}for(l=0;l<this.$.length;l++)h&1<<l||(m=this.$[l],(e=Yi(a,b,d,new F(m.i,c,m.o)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
jf.prototype.ve=function(a,b,c,d){var e=this.S,h=this.f-c;c=this.h+c;if(0<=N(e,e.c+d.z,e.a+d.x))var g=null;else{var k=new F(e.o-e.c,0,e.a-e.i);k.scale(1/e.length);var l=Vb(d,k),m=new Ui;m.t=-(N(e,a.z,a.x)-b)/l;m.p=(new F(a.x-k.x*b+d.x*m.t,a.y-k.y*b+d.y*m.t,a.z-k.z*b+d.z*m.t)).round();m.n=k;g=m}if(!g)return null;k=0;var n=e.getParameter(g.p.z,g.p.x);0>n&&(k|=1);g.p.y>c&&(k|=2);n>e.length&&(k|=4);g.p.y<h&&(k|=8);if(0==k)return g.item=this,g;if(0==b)return null;k=0;l=null;m=Number.POSITIVE_INFINITY;
g=new F(e.a,h,e.c);n=new F(0,1,0);g=Zi(a,b,d,g,n);g?!(g.p.y<h||g.p.y>c)&&g.t<m&&(m=g.t,l=g):k|=9;g=new F(e.a,c,e.c);n=new F(e.i-e.a,0,e.o-e.c);n.scale(1/e.length);(g=Zi(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<m&&(m=g.t,l=g)):k|=3;g=new F(e.i,c,e.o);n=new F(0,-1,0);g=Zi(a,b,d,g,n);g?!(g.p.y>c||g.p.y<h)&&g.t<m&&(m=g.t,l=g):k|=6;g=new F(e.i,h,e.o);n=new F(e.a-e.i,0,e.c-e.o);n.scale(1/e.length);(g=Zi(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<m&&(m=g.t,
l=g)):k|=18;0==(k&1)&&(g=new F(e.a,c,e.c),(g=Yi(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&2)&&(g=new F(e.i,c,e.o),(g=Yi(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&4)&&(g=new F(e.i,h,e.o),(g=Yi(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&8)&&(g=new F(e.a,h,e.c),(g=Yi(a,b,d,g))&&g.t<m&&(l=g));return l?(l.item=this,l):null};
kf.prototype.Uf=function(a,b,c,d){c=this.y+c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.$.length;k++){e=this.$[k];var l=N(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new F(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new F(e.a,c,e.c):h>e.length?e=new F(e.i,c,e.o):(h/=e.length,g=1-h,e=new F(e.a*g+e.i*h,c,e.c*g+e.o*h),e.round()));c=new F(a.x-e.x,a.y-e.y,a.z-e.z);c.oa(1);c.d=Vb(e,c)+b;a=Vb(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
lf.prototype.Uf=function(a,b,c,d){c=this.y-c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.$.length;k++){e=this.$[k];var l=N(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new F(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new F(e.a,c,e.c):h>e.length?e=new F(e.i,c,e.o):(h/=e.length,g=1-h,e=new F(e.a*g+e.i*h,c,e.c*g+e.o*h),e.round()));c=new F(a.x-e.x,a.y-e.y,a.z-e.z);c.oa(1);c.d=Vb(e,c)+b;a=Vb(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
jf.prototype.Uf=function(a,b,c,d){var e=this.f-c,h=this.h+c;c=null;var g=this.S;var k=g.getParameter(a.z,a.x);if(0>k)k=new F(g.a,a.y,g.c),k.y>h?k.y=h:k.y<e&&(k.y=e);else if(k>g.length)k=new F(g.i,a.y,g.o),k.y>h?k.y=h:k.y<e&&(k.y=e);else{k/=g.length;var l=1-k;k=new F(g.a*l+g.i*k,a.y,g.c*l+g.o*k);k.y>h?k.y=h:k.y<e?k.y=e:(c=new F(g.o-g.c,0,g.a-g.i),c.scale(1/g.length));k.round()}null==c&&(c=new F(a.x-k.x,a.y-k.y,a.z-k.z),c.oa(1));c.d=Vb(k,c)+b;a=Vb(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
kf.prototype.Ch=function(a,b){var c=Wa(.5*Ki.y,b.y,a.y-this.y);if(!c)return null;var d=new Ui;d.t=c.yc;if(0>d.t)return null;d.p=(new F(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=p(this.$);for(b=a.next();!b.done;b=a.next())if(0>N(b.value,d.p.z,d.p.x))return null;d.n=new F(0,1,0);return d};
lf.prototype.Ch=function(a,b){if(a.y>=this.y)return null;var c=Wa(.5*Ki.y,b.y,a.y-this.y);if(!c)return null;var d=new Ui;d.t=c.wa;if(0>d.t)return null;d.p=(new F(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=p(this.$);for(b=a.next();!b.done;b=a.next())if(0>N(b.value,d.p.z,d.p.x))return null;d.n=new F(0,-1,0);return d};
jf.prototype.Ch=function(a,b){var c=N(this.S,a.z,a.x);if(0>c)return null;var d=uc(this.S,1),e=d.x*b.z+d.y*b.x;if(0<=e)return null;var h=new Ui;h.t=-c/e;if(0>h.t)return null;h.p=(new F(a.x+b.x*h.t,a.y+.5*(2*b.y+Ki.y*h.t)*h.t,a.z+b.z*h.t)).round();if(h.p.y>=this.h||h.p.y<this.f)return null;a=this.S.getParameter(h.p.z,h.p.x);if(0>a||a>=this.S.length)return null;h.n=new F(d.y,0,d.x);return h};function $i(){this.height=this.width=2;this.depth=this.color=null}
$i.prototype.create=function(){this.object=x.createFramebuffer();x.bindFramebuffer(x.FRAMEBUFFER,this.object);var a=this.color=new u.jd;a.width=this.width;a.height=this.height;a.gg=x.RGBA8;a.format=x.RGBA;a.type=x.UNSIGNED_BYTE;a.Wd=x.NEAREST;a.Je=x.NEAREST;a.create();x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,a.object,0);a=this.depth=x.createRenderbuffer();x.bindRenderbuffer(x.RENDERBUFFER,a);x.renderbufferStorage(x.RENDERBUFFER,x.DEPTH24_STENCIL8,this.width,this.height);
x.framebufferRenderbuffer(x.FRAMEBUFFER,x.DEPTH_STENCIL_ATTACHMENT,x.RENDERBUFFER,a)};function aj(a){Ae.call(this,a);this.qa=new U;this.pitch=this.heading=0;this.gf=112;this.Lc=Rb(40);this.tj=!1;this.vg=8E3}aj.prototype=Object.create(Ae.prototype);aj.prototype.constructor=aj;aj.prototype.create=function(){var a=this.Kh=new Ae;a.qa=this.N;W(a,this);a=this.Lh=new Ae;a.qa=this.N;W(a,this);return this};
aj.prototype.step=function(){this.gf+=Y.l;0>this.gf&&(this.gf=0);this.transform.m32=Math.pow(1.125,this.gf);Y.d[2]&&(this.heading-=4E6*Y.Vb.x,this.pitch+=4E6*Y.Vb.y);var a=Sb(this.heading),b=Sb(this.pitch);Zc(this.qa);this.qa.rotate(a,b,0);a=this.qa.ag();var c=this.qa.bg();b=this.qa.Be();if(Y.d[1]){var d=2*Math.tan(this.Lc)*this.transform.m32/u.canvas.height,e=-Y.Vb.x*d;d*=Y.Vb.y;this.qa.A+=e*a.x+d*c.x;this.qa.m31+=e*a.y+d*c.y;this.qa.m32+=e*a.z+d*c.z}c=new F(0,0,0);Kd.d.KeyW&&--c.z;Kd.d.KeyS&&(c.z+=
1);Kd.d.KeyA&&--c.x;Kd.d.KeyD&&(c.x+=1);if(e=c.length())c.scale(this.transform.m32/(60*e)),this.qa.A+=c.x*a.x+c.z*b.x,this.qa.m31+=c.x*a.y+c.z*b.y,this.qa.m32+=c.x*a.z+c.z*b.z;a=this.Kh;Zc(a.transform);a.transform.A=-this.vg;a.transform.rotate(Math.atan(.5*-this.vg/this.transform.m32),0,0);a.Lc=this.Lc;a=this.Lh;Zc(a.transform);a.transform.A=this.vg;a.transform.rotate(Math.atan(.5*this.vg/this.transform.m32),0,0);a.Lc=this.Lc;Ae.prototype.step.call(this);return this};u.Animation=function(){u.Node.call(this);this.length=0;this.Ea=NaN;this.df={}};u.Animation.prototype=Object.create(Node.prototype);f=u.Animation.prototype;f.constructor=u.Animation;f.step=function(){Node.prototype.step.call(this)};f.play=function(){this.Ea=u.v};f.key=function(a,b,c){var d=this.df[a];d||(d=this.df[a]=new bj);return d.key(b,c)};f.print=function(){console.log("{");console.log("let a = new NG.Animation();");for(var a in this.df)this.df.hasOwnProperty(a)&&this.df[a].print(a);console.log("}")};
u.Animation.U=function(a,b){b.reset();b.translate(a[0],a[1],a[2]);b.rotate(a[3],a[4],a[5]);return b};function bj(){this.keys=new Xa(cj)}bj.prototype.key=function(a,b){var c=this.keys.get(a);c||(c=new dj,c.t=a,this.keys.add(c));c.Dc=b;return c};bj.prototype.print=function(a){for(var b=0;b<this.keys.elements.length;b++){var c=this.keys.elements[b];console.log("a.key('"+a+"', "+c.t+", "+c.Dc+");")}};function dj(){this.Dc=this.t=0}
function cj(a,b){return isNaN(a)?a.t<b.t?-1:a.t>b.t?1:0:a<b.t?-1:a>b.t?1:0};function Wg(a,b,c,d,e,h){u.Node.call(this);this.b=new F(a.a,b+112500,a.c);this.ue=-Infinity;this.Ig=NaN;this.open=this.state=1;W(this,u.oe);var g=new Me(u.m.Sb.get("bayDoor01"));g.transform.A=this.b.x;g.transform.m31=this.b.y;g.transform.m32=this.b.z;g.transform.D=-a.X;g.transform.J=a.T;g.transform.F=-a.T;g.transform.m22=-a.X;W(g,u.oe);g.create();ld(g,e.Z);var k=p(g.xc);for(b=k.next();!b.done;b=k.next())b=b.value,b.Qf=!0,b.H=u.m.ma.get("physical"),b.ia=u.m.da.get("BayDoor01"),b.Y=fg,b.Fa=["portalLightIndex",
e.Cf,!0,"color",Dc,!1];this.lg=g;this.gh=c;this.Ci=e;c=new Me(u.m.Sb.get("bayDoor01"));c.transform.A=this.b.x;c.transform.m31=this.b.y;c.transform.m32=this.b.z;c.transform.D=a.X;c.transform.J=-a.T;c.transform.F=a.T;c.transform.m22=a.X;W(c,u.oe);c.create();ld(c,h.Z);e=p(c.xc);for(b=e.next();!b.done;b=e.next())b=b.value,b.Qf=!0,b.H=u.m.ma.get("physical"),b.ia=u.m.da.get("BayDoor01"),b.Y=fg,b.Fa=["portalLightIndex",h.Cf,!0,"color",Dc,!1];this.kg=c;this.gj=d;this.Bi=h;this.Ca=[];h=[new O(-6250,-112500),
new O(6250,-112500),new O(6250,112500),new O(-6250,112500)];for(d=0;d<h.length;d++)h[d]=a.kb(h[d].x,h[d].y);a=[];d=h[h.length-1];h=p(h);for(c=h.next();!c.done;c=h.next())c=c.value,a.push(new J(d.x,d.y,c.x,c.y)),d=c;this.Ca.push(new lf(a,this.b.y-112500));this.Ca.push(new jf(wc(a[0]),this.b.y-112500,this.b.y+112500),new jf(wc(a[2]),this.b.y-112500,this.b.y+112500));a=p(this.Ca);for(d=a.next();!d.done;d=a.next())d.value.item=this;$d.push.apply($d,ea(this.Ca));this.update()}Wg.prototype=Object.create(u.Node.prototype);
f=Wg.prototype;f.constructor=Wg;f.step=function(){if(!(u.v%4)){if(1==this.state){var a=Infinity;u.u.ta&&(a=Math.abs(u.u.ta.b.x-this.b.x)+Math.abs(u.u.ta.b.y-this.b.y)+Math.abs(u.u.ta.b.z-this.b.z));6E5<=a&&isNaN(this.Ig)&&(this.Ig=u.v)}a=(u.v-this.ue)/36;1<a||(0==this.state?this.open=1-Math.pow(a,2):1==this.state&&(this.open=Math.pow(a,2)),this.update())}};
f.update=function(){var a=this.gh.f+(this.gh.height-12500)*this.open;this.gh.h=this.gj.h=this.Ca[0].y=this.Ca[1].f=this.Ca[2].f=a;this.lg.transform.m31=this.kg.transform.m31=a+112500;this.lg.xc[0].Fa[1]=this.Ci.Cf;this.kg.xc[0].Fa[1]=this.Bi.Cf;this.lg.xc[0].Fa[4]=this.Ci.qe;this.kg.xc[0].Fa[4]=this.Bi.qe};f.Qa=function(){u.H.O("clipY",this.b.y+225E3,!1)};f.remove=function(){this.lg.remove();this.kg.remove();u.Node.prototype.remove.call(this)};
function ej(a,b,c){u.za.call(this,"crate");this.Rb=240;this.b.x=a;this.b.y=b+5E4;this.b.z=c;cd(this.transform,this.b);a=[new F(-5E4,0,-5E4),new F(-5E4,0,5E4),new F(5E4,0,5E4),new F(5E4,0,-5E4)];b=p(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.kb(c,c),c.round();a=[new J(a[0].z,a[0].x,a[1].z,a[1].x),new J(a[1].z,a[1].x,a[2].z,a[2].x),new J(a[2].z,a[2].x,a[3].z,a[3].x),new J(a[3].z,a[3].x,a[0].z,a[0].x)];this.Ca=[];this.Ca.push(new kf(a,this.b.y+5E4),new lf(a,this.b.y-5E4));a=zc(a);
this.Ca.push(new jf(a[0],this.b.y-5E4,this.b.y+5E4),new jf(a[1],this.b.y-5E4,this.b.y+5E4),new jf(a[2],this.b.y-5E4,this.b.y+5E4),new jf(a[3],this.b.y-5E4,this.b.y+5E4));a=p(this.Ca);for(b=a.next();!b.done;b=a.next())b.value.item=this;$d.push.apply($d,ea(this.Ca))}ej.prototype=Object.create(u.za.prototype);f=ej.prototype;f.constructor=ej;
f.create=function(){var a=this.bb=new Me(u.m.Sb.get("lootBox"));a.qa=this.N;W(a,this);a.create();this.tb=a.src.tb;ld(a,this.Z);md(a,6E4);u.u.ef.push(this);this.Ge=15E4;fj.push(this);u.za.prototype.create.call(this)};
f.step=function(){if(u.u.ta){var a=Tc(u.u.ta.b,this.b,new F(0,0,0));a.y=0;a.oa(1);this.transform.D=a.z;this.transform.J=-a.x;this.transform.F=a.x;this.transform.m22=a.z;this.transform.rotate(Rb(-15),0,0)}10==u.v-this.ye&&this.Mg();u.v==this.cd+4?this.bb.Y=u.m.hb.get("flashWhite"):u.v==this.cd+6?this.bb.Y=u.m.hb.get("flashRed"):u.v==this.cd+8&&delete this.bb.Y;u.za.prototype.step.call(this)};f.ie=function(a){isNaN(this.ye)&&(this.cd=u.v,this.Rb-=a,0>=this.Rb&&(this.ye=u.v))};
f.Mg=function(){var a=gj.Fg();a=p(a);for(var b=a.next();!b.done;b=a.next())b=b.value,b.b.set(this.b.x,this.b.y,this.b.z),b.b.z+=5E4*(y()-.5),b.b.x+=5E4*(y()-.5),b.g.set(6E3*(y()-.5),9E3*(y()+1),6E3*(y()-.5)),W(b,u.sh),b.create();u.m.ja.get("hit02").play({gain:1});this.remove()};f.remove=function(){u.za.prototype.remove.call(this);this.bb.remove();u.u.ef.splice(u.u.ef.indexOf(this),1);hj.call(this);$d.splice($d.indexOf(this.Ca[0]),this.Ca.length)};
function ij(a,b,c){u.za.call(this,"barrel");this.Rb=160;this.b.x=a;this.b.y=b+65E3;this.b.z=c;cd(this.transform,this.b);a=[new F(-5E4,0,-5E4),new F(-5E4,0,5E4),new F(5E4,0,5E4),new F(5E4,0,-5E4)];b=p(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.kb(c,c),c.round();a=[new J(a[0].z,a[0].x,a[1].z,a[1].x),new J(a[1].z,a[1].x,a[2].z,a[2].x),new J(a[2].z,a[2].x,a[3].z,a[3].x),new J(a[3].z,a[3].x,a[0].z,a[0].x)];this.Ca=[];this.Ca.push(new kf(a,this.b.y+5E4),new lf(a,this.b.y-5E4));a=zc(a);
this.Ca.push(new jf(a[0],this.b.y-5E4,this.b.y+5E4),new jf(a[1],this.b.y-5E4,this.b.y+5E4),new jf(a[2],this.b.y-5E4,this.b.y+5E4),new jf(a[3],this.b.y-5E4,this.b.y+5E4));a=p(this.Ca);for(b=a.next();!b.done;b=a.next())b.value.item=this;$d.push.apply($d,ea(this.Ca))}ij.prototype=Object.create(u.za.prototype);f=ij.prototype;f.constructor=ij;
f.create=function(){var a=this.bb=new Me(u.m.Sb.get("nitroBarrel"));a.qa=this.N;W(a,this);a.create();this.tb=a.src.tb;ld(a,this.Z);md(a,6E4);u.u.Ze.push(this);this.Ge=15E4;fj.push(this);u.za.prototype.create.call(this)};
f.step=function(){if(isNaN(this.ye)){if(u.u.ta){var a=Tc(u.u.ta.b,this.b,new F(0,0,0));a.y=0;a.oa(1);this.transform.D=a.z;this.transform.J=-a.x;this.transform.F=a.x;this.transform.m22=a.z;this.transform.rotate(Rb(15),0,0)}a=1+.25*Math.sin(u.v*Math.PI/3)*(1-this.Rb/160);this.Rb=Math.min(this.Rb+2,160);Zc(this.bb.transform);this.bb.transform.scale(a,a,a);u.v==this.cd+4?this.bb.Y=u.m.hb.get("flashWhite"):u.v==this.cd+6?this.bb.Y=u.m.hb.get("flashRed"):u.v==this.cd+8&&delete this.bb.Y;u.za.prototype.step.call(this)}else{a=
u.v-this.ye;var b=1+1/12*a;Zc(this.bb.transform);this.bb.transform.scale(b,b,b);6>a||(6==a&&this.Mg(),u.u.ta.gb=Rb(10),16>a||this.remove())}};f.ie=function(a){isNaN(this.ye)&&(this.cd=u.v,this.Rb-=a,0>=this.Rb&&(this.ye=u.v))};f.Mg=function(){this.bb.remove();u.u.Ze.splice(u.u.Ze.indexOf(this),1);hj.call(this);$d.splice($d.indexOf(this.Ca[0]),this.Ca.length);jj(this)};
function jj(a){function b(e){var h=Tc(e.b,this.b,new F(0,0,0)),g=h.oa(1);5E5<=g||(h.y+=1,e instanceof kj&&(e.Rb=0,lj(e)),e instanceof mj&&(e.ae=Number.NEGATIVE_INFINITY,e.vf=!0),g=1E4,e.g.x+=h.x*g,e.g.y+=h.y*g,e.g.z+=h.z*g)}u.m.ja.get("explode01").play({gain:1});for(var c=p(u.u.ed),d=c.next();!d.done;d=c.next())d=d.value,nj(d,a.b),b.call(a,d);c=p(u.u.Ze);for(d=c.next();!d.done;d=c.next())d=d.value,5E5>Tc(d.b,a.b,new F(0,0,0)).oa(1)&&d.ie(Number.POSITIVE_INFINITY);c=p(u.u.ef);for(d=c.next();!d.done;d=
c.next())d=d.value,5E5>Tc(d.b,a.b,new F(0,0,0)).oa(1)&&d.ie(Number.POSITIVE_INFINITY);b.call(a,u.u.ta);d=new oj(1E5);d.transform.A=a.b.x;d.transform.m31=a.b.y;d.transform.m32=a.b.z;W(d,u.sc);d.create()}f.remove=function(){u.za.prototype.remove.call(this)};function pj(a){u.Node.call(this,"GunManager "+a.name);this.fa=a;this.fg=[];this.w=null;this.action="ready";this.Oa=NaN;this.focus=0;this.ic=!1;this.Xf=null;this.ob=this.ac=0;this.Va=null;this.jf=this.hf=0;this.Lb=[];this.jc=0}pj.prototype=Object.create(u.Node.prototype);f=pj.prototype;f.constructor=pj;
f.create=function(){var a=this.Zc=new u.pa("muzzleFlare");Se.call(a);a.Qa=Ue;a.H=u.m.ma.get("image");a.ia=u.m.da.get("muzzleFlare01");a.Y=new pd;a.Y.va=1;a.color=new R(255,255,255,0);a.Ja=12500;a.Ua=0;a.qa=this.fa.Ac.N;W(a,u.bd)};
f.step=function(){if(this.w){var a=this.fa;a.Pd=null;a.Ih=!1;var b=a.Ib.w.qh(a.uc.N);b&&(a.Ih=b.Kg,b.item instanceof kj&&(a.Pd=b.item),b.item instanceof ej&&(a.Pd=b.item),b.item instanceof ij&&(a.Pd=b.item))}--this.jc;0>this.jc&&(this.jc=0);a=p(this.fg);b=a.next();a:for(;!b.done;b=a.next())if(b=b.value,b!=this.w)for(var c=p(b.bh),d=c.next();!d.done;d=c.next())if(Kd.p[d.value]){this.Xf=b;break a}Y.p[0]&&(this.ob=1);Y.r[0]&&(this.ob=0);Y.p[2]&&(this.ac=1);Y.r[2]&&(this.ac=0);this.ac||(this.focus-=1/
6,0>this.focus&&(this.focus=0));if(this.w)this.w[this.action].call(this);else for(qj(this),a=0;a<this.Lb.length;a++)b=this.Lb[a],0<b.alpha||(this.Lb.splice(a--,1),W(b,null))};
f.Qa=function(){if(this.Va){x.enable(x.SCISSOR_TEST);u.Mb.oc.O("viewMatrix",dd);u.Mb.oc.upload();u.xb(0);u.gc(0);u.rb(2);u.Db(Ve);u.eb(u.m.ma.get("physicalCardThreshold"));u.H.O("color",Dc);u.H.O("ambientLight",u.u.ta.Z.Xa,!1);var a=this.w.constructor.Eh;u.hc(0,a);var b=Math.round(a.width/2-this.Va.x+this.Va.K+this.hf),c=Math.round(a.height/2-this.Va.y+this.Va.L+this.jf);x.scissor(this.Va.K+Math.round(this.hf),-this.Va.L-Math.round(this.jf)+u.canvas.height-this.Va.C,this.Va.l,this.Va.C);var d=new U;
d.D=a.width/u.canvas.width;d.m11=-a.height/u.canvas.height;d.A=-1+2*b/u.canvas.width;d.m31=1-2*c/u.canvas.height;u.H.O("modelMatrix",d);x.drawArrays(x.TRIANGLE_FAN,0,4);x.disable(x.SCISSOR_TEST)}};function qj(a){if(!a.Xf)return!1;a.Va=null;a.ac=0;a.ob=0;a.jc=0;a.ic=!1;a.w=a.Xf;u.u.be();a.action="equip";a.Oa=u.v+1;a.Xf=null;return!0}f.Xb=function(){var a=400*this.fa.zd;a*=1-2/3*this.focus;this.hf=this.fa.eg*a;this.jf=this.fa.Xb*a};
pj.U=function(a,b,c,d,e,h){var g=new U;b*=1E5;c*=1E5;a*=1E5;g.rotate(Rb(h),Rb(e),Rb(d));g.scale(1,1,1);g.translate(b,c,a);d=g;e=new U;e.D=d.m22;e.I=d.F;e.J=d.m21;e.G=d.J;e.m11=d.D;e.m12=d.I;e.F=d.m12;e.m21=d.G;e.m22=d.m11;e.A=d.m32;e.m31=d.A;e.m32=d.m31;d=e;e=new U;e.D=d.D;e.I=d.I;e.J=d.J;e.G=d.F;e.m11=d.m21;e.m12=d.m22;e.F=-d.G;e.m21=-d.m11;e.m22=-d.m12;e.A=d.A;e.m31=d.m32;e.m32=-d.m31;return e};function rj(){this.actions={};this.Za=this.sa=this.Ga=0;this.qd=this.Hc=-1;this.Vg=2/3}
function sj(a){return a.Za+a.sa+a.Ga}
function tj(a){var b=new F(a.A,a.m31,a.m32);a=new F(-a.F,-a.m21,-a.m22);var c=null,d=1E8,e=ke(b,new F(a.x*d,a.y*d,a.z*d));e&&(c=e,d=c.d);e=p(u.u.ed);for(var h=e.next();!h.done;h=e.next())if(h=h.value,h.Gb||!(u.v>h.Ea)){var g=Xi(b,a,h.b,h.Ha,h.mb+h.Ha);!g||0>g.t||g.t>=d||(g.item=h,c=g,g.Dc=a,d=c.t)}if(c&&!isNaN(c.item.Ge))return c;e=p(fj);for(h=e.next();!h.done;h=e.next())if(h=h.value,g=Tb(b,a,h.b,h.Ge)){var k=new Ui;k.t=g.wa;k.p=new F(b.x+a.x*k.t,b.y+a.y*k.t,b.z+a.z*k.t);k.n=new F(k.p.x-h.b.x,k.p.y-
h.b.y,k.p.z-h.b.z);k.n.oa(1);0>k.t||k.t>=d||(k.item=h,k.Kg=!0,c=k,d=c.t)}return c}
function uj(a,b,c){function d(m){m=new vj(m);m.transform.A=a.p.x;m.transform.m31=a.p.y;m.transform.m32=a.p.z;W(m,u.sc);m.create();m.step()}function e(){var m=new wj;m.jg=120*(y()+.5);m.Ja=2E4;m.transform.A=a.p.x;m.transform.m31=a.p.y;m.transform.m32=a.p.z;m.g.x=a.n.x;m.g.y=a.n.y;m.g.z=a.n.z;m.g.scale(2E4*y()+1E4);W(m,u.sc);m.create();m.step()}if(a.item instanceof kj){var h=new U,g=new F,k=new F,l=a.Dc.ca();Wb(l,g,k);h.qg(g);h.rg(k);h.sg(l);cd(h,a.p);xj(a.item,h,c);W(new yj,u.jj);a.item.ie(b)}else a.item instanceof
ij?(d(31250),e(),a.item.ie(b)):a.item instanceof ej?(d(31250),e(),a.item.ie(b)):(d(12500),e(),hf(u.u.Rh,new F(2343.75*Math.round(a.p.x/2343.75),2343.75*Math.round(a.p.y/2343.75),2343.75*Math.round(a.p.z/2343.75)),a.n,Math.PI,18750,jb(16),16))}function zj(a){rj.call(this,a);this.Hc=360;this.qd=30;this.Za=1;this.sa=this.qd-this.Za;this.Ga=this.Hc-this.sa-this.Za;this.Vg=1}zj.prototype=Object.create(rj.prototype);zj.prototype.constructor=zj;
zj.Ya={CarbineEquip02:{K:291,L:265,x:744,y:930,l:189,C:31},CarbineEquip03:{K:90,L:191,x:354,y:930,l:390,C:105},CarbineEquip04:{K:126,L:152,x:0,y:930,l:354,C:144},CarbineEquip05:{K:46,L:96,x:250,y:231,l:434,C:200},CarbineEquip06:{K:92,L:68,x:321,y:0,l:356,C:228},CarbineEquip07:{K:106,L:65,x:0,y:0,l:321,C:231},CarbineEquip08:{K:129,L:76,x:677,y:0,l:282,C:220},CarbineEquip09:{K:145,L:91,x:0,y:231,l:250,C:205},CarbineEquip10:{K:163,L:109,x:684,y:231,l:220,C:187},CarbineEquip11:{K:184,L:125,x:0,y:436,
l:220,C:171},CarbineEquip12:{K:198,L:133,x:0,y:607,l:253,C:163},CarbineEquip13:{K:207,L:132,x:732,y:436,l:245,C:164},CarbineAim01:{K:194,L:133,x:253,y:607,l:229,C:163},CarbineAim02:{K:170,L:136,x:0,y:770,l:187,C:160},CarbineAim03:{K:157,L:137,x:564,y:770,l:174,C:159},CarbineFire01:{K:209,L:131,x:466,y:436,l:266,C:165},CarbineFire02:{K:213,L:128,x:220,y:436,l:246,C:168},CarbineFire03:{K:212,L:133,x:482,y:607,l:248,C:163},CarbineAimFire01:{K:147,L:136,x:187,y:770,l:193,C:160},CarbineAimFire02:{K:152,
L:136,x:380,y:770,l:184,C:160},CarbineAimFire03:{K:155,L:134,x:730,y:607,l:178,C:162}};
zj.prototype.fire=function(){var a=u.v-this.Oa;this.Xb();if(0==a){u.m.ja.get("CarbineFire01").play({gain:.5,pitch:1.5});u.m.ja.get("CarbineFire02").play({gain:1,pitch:1.5});this.w.Za=0;if(0>=this.w.sa){0>=this.w.Ga&&(this.w.Ga=this.w.Hc-sj(this.w));var b=Math.min(this.w.qd-this.w.sa,this.w.Ga);this.w.sa+=b;this.w.Ga-=b}1<=this.w.sa&&(--this.w.sa,this.w.Za=1);u.u.be();this.jc+=35;this.Bb=pj.U(.053697,.319573,-.058355,-.833,.006,-179.61);b=this.Zc;b.Ua=1;var c=255*(4*y()+1)/12&255;b.color.r=c;b.color.Ia=
c;b.color.ba=c;b.scale=y()+1;b.Tb=Sb(hb());c=new U;c.translate(0,-35E3,0);$c(this.Bb,c,b.transform);b=(new U).rotate(0,Rb(2.5*y()),0);c=(new U).rotate(0,0,y()*Math.PI*2);var d=Aj(this.fa);$c(d,c,d);$c(d,b,d);b=this.w.zc(d);b=p(b);for(c=b.next();!c.done;c=b.next())uj(c.value,120,1.2);b=new Bj("CartridgeCarbineSpent");b.wh=Rb(6*(3*y()+1));b.transform.m31-=2100;c=new U;$c(this.fa.Ac.N,this.Bb,c);$c(c,b.transform,b.transform);b.g.x-=3E3*(2*y()+1);b.g.z=-b.g.x;ad(c,b.g,b.g);b.b.set(b.transform.A,b.transform.m31,
b.transform.m32);b.g.add(this.fa.g);Vc(b.g,b.Ta);W(b,u.bd);b.create();180<=this.jc&&(this.jc-=180,b=new Ij,b.Ja=6E4,b.transform.m31-=45E3,c=new U,$c(this.fa.Ac.N,this.Bb,c),$c(c,b.transform,b.transform),b.g.y=-37500,ad(c,b.g,b.g),b.g.add(this.fa.g),Vc(b.g,b.Ta),b.Z=this.fa.Z,W(b,u.sc),b.create(),b.step(),this.Lb.push(b));3<this.Lb.length&&(W(this.Lb[0],null),this.Lb.splice(0,1))}1==a&&(this.Zc.Ua=0);2==a&&(this.fa.gb+=Rb(1));if(3<=a){if(qj(this))return;if(!this.ac&&this.ob){this.action="fire";this.Oa=
u.v+1;return}}4<=a?this.action="ready":(a=("00"+a).slice(-2),this.Va=this.w.constructor.Ya["CarbineFire"+a]||this.w.constructor.Ya.CarbineEquip13)};
zj.prototype.aimFire=function(){var a=u.v-this.Oa;this.Xb();if(0==a){u.m.ja.get("CarbineFire01").play({gain:.5,pitch:1.5});u.m.ja.get("CarbineFire02").play({gain:1,pitch:1.5});this.w.Za=0;if(0>=this.w.sa){0>=this.w.Ga&&(this.w.Ga=this.w.Hc-sj(this.w));var b=Math.min(this.w.qd-this.w.sa,this.w.Ga);this.w.sa+=b;this.w.Ga-=b}1<=this.w.sa&&(--this.w.sa,this.w.Za=1);u.u.be();this.jc+=35;this.Bb=pj.U(0,.270042,-.06106,0,0,180);b=this.Zc;b.Ua=1;var c=255*(4*y()+1)/12&255;b.color.r=c;b.color.Ia=c;b.color.ba=
c;b.scale=y()+1;b.Tb=Sb(hb());c=new U;c.translate(0,-35E3,0);$c(this.Bb,c,b.transform);b=(new U).rotate(0,Rb(1*y()),0);c=(new U).rotate(0,0,y()*Math.PI*2);var d=Aj(this.fa);$c(d,c,d);$c(d,b,d);b=this.w.zc(d);b=p(b);for(c=b.next();!c.done;c=b.next())uj(c.value,120,1.2);b=new Bj("CartridgeCarbineSpent");b.wh=Rb(6*(3*y()+1));b.transform.m31-=2100;c=new U;$c(this.fa.Ac.N,this.Bb,c);$c(c,b.transform,b.transform);b.g.x-=3E3*(2*y()+1);b.g.z=-b.g.x;ad(c,b.g,b.g);b.b.set(b.transform.A,b.transform.m31,b.transform.m32);
b.g.add(this.fa.g);Vc(b.g,b.Ta);W(b,u.bd);b.create();210<=this.jc&&(this.jc-=210,b=new Ij,b.Ja=4E4,b.scale=1,b.transform.m31-=45E3,c=new U,$c(this.fa.Ac.N,this.Bb,c),$c(c,b.transform,b.transform),b.g.y=-2E4,ad(c,b.g,b.g),b.g.add(this.fa.g),Vc(b.g,b.Ta),b.Z=this.fa.Z,W(b,u.sc),b.create(),b.step(),this.Lb.push(b));3<this.Lb.length&&(W(this.Lb[0],null),this.Lb.splice(0,1))}1==a&&(this.Zc.Ua=0);2==a&&(this.fa.gb+=Rb(1));if(3<=a){if(qj(this))return;if(this.ac&&this.ob){this.action="aimFire";this.Oa=u.v+
1;return}}4<=a?this.action="ready":(a=("00"+a).slice(-2),this.Va=this.w.constructor.Ya["CarbineAimFire"+a]||this.w.constructor.Ya.CarbineAim03)};
zj.prototype.equip=function(){var a=u.v-this.Oa;9;if(!qj(this)){this.ic=this.w.Za;this.jf=this.hf=0;9==a&&(this.fa.gb+=Rb(1));a=Math.floor(a/3);if(9<=a)if(this.w.tf.call(this),1==this.focus){if(this.ob){this.action="aimFire";this.Oa=u.v+1;return}}else if(0==this.focus&&this.ob){this.action="fire";this.Oa=u.v+1;return}14<=a?this.action="ready":0==this.focus&&(a=("00"+a).slice(-2),this.Va=this.w.constructor.Ya["CarbineEquip"+a])}};
zj.prototype.ready=function(){qj(this)||(this.Xb(),this.w.tf.call(this),1==this.focus?this.ob&&(this.action="aimFire",this.Oa=u.v+1):0==this.focus&&this.ob&&(this.action="fire",this.Oa=u.v+1))};zj.prototype.tf=function(){this.ac?(this.focus+=1/6,1<this.focus&&(this.focus=1),this.ic=!1):this.ic=!0;if(0<this.focus){var a=Math.floor(3*this.focus);a=("00"+a).slice(-2);this.Va=this.w.constructor.Ya["CarbineAim"+a]||this.w.constructor.Ya.CarbineEquip13}else this.Va=this.w.constructor.Ya.CarbineEquip13};
zj.prototype.qh=function(a){var b=1E8,c=null,d=this.zc(a)[0];if(d){if(!isNaN(d.item.Ge))return d;c=d;b=c.d}d=new F(a.A,a.m31,a.m32);var e=new F(-a.F,-a.m21,-a.m22);a=[];a.cmp=function(m,n){return m.t<n.t?-1:m.t>n.t?1:m.item.index<n.item.index?-1:m.item.index>n.item.index?1:0};for(var h=p(fj),g=h.next();!g.done;g=h.next()){g=g.value;var k=Tb(d,e,g.b,g.Ge);if(k){var l=new Ui;l.t=k.wa;l.p=new F(d.x+e.x*l.t,d.y+e.y*l.t,d.z+e.z*l.t);l.n=new F(l.p.x-g.b.x,l.p.y-g.b.y,l.p.z-g.b.z);l.n.oa(1);0>l.t||l.t>=
b||(l.item=g,l.Kg=!0,Qa(a,l))}}b=null;e=d=NaN;a=p(a);for(h=a.next();!h.done;h=a.next())h=h.value,h.item.yd>d||h.item.yd==d&&h.t>e||(b=h,d=h.item.yd,e=h.t);return b?b:c};
zj.prototype.zc=function(a){var b=new F(a.A,a.m31,a.m32),c=new F(-a.F,-a.m21,-a.m22),d=1E8;if(a=ke(b,new F(c.x*d,c.y*d,c.z*d)))d=a.d;var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=p(u.u.ed),g=h.next();!g.done;g=h.next())if(g=g.value,g.Gb||!(u.v>g.Ea)){var k=Xi(b,c,g.b,g.Ha,g.mb+g.Ha);!k||0>k.t||k.t>=d||(k.item=g,k.Dc=c,Qa(e,k))}b=null;d=c=NaN;e=p(e);for(h=e.next();!h.done;h=e.next())h=h.value,h.item.yd>c||h.item.yd==c&&
h.t>d||(b=h,c=h.item.yd,d=h.t);e=[];b&&e.push(b);a&&e.push(a);return e};function Jj(a){rj.call(this,a);this.Hc=24;this.sa=this.Za=this.qd=0;this.Ga=this.Hc-this.Za;this.vh=!1}Jj.prototype=Object.create(rj.prototype);Jj.prototype.constructor=Jj;
Jj.Ya={ShotgunEquip01:{K:170,L:185,x:510,y:1375,l:310,C:111},ShotgunEquip02:{K:183,L:151,x:1087,y:1074,l:297,C:145},ShotgunEquip03:{K:331,L:128,x:280,y:903,l:149,C:168},ShotgunEquip04:{K:111,L:20,x:871,y:0,l:369,C:276},ShotgunEquip05:{K:140,L:0,x:0,y:0,l:340,C:296},ShotgunEquip06:{K:158,L:0,x:340,y:0,l:277,C:296},ShotgunEquip07:{K:173,L:0,x:617,y:0,l:254,C:296},ShotgunEquip08:{K:188,L:100,x:355,y:509,l:257,C:196},ShotgunEquip09:{K:195,L:152,x:0,y:1231,l:258,C:144},ShotgunEquip10:{K:199,L:159,x:0,
y:1375,l:257,C:137},ShotgunEquip11:{K:201,L:160,x:257,y:1375,l:253,C:136},ShotgunEquip12:{K:197,L:156,x:1046,y:1231,l:254,C:140},ShotgunEquip13:{K:195,L:152,x:258,y:1231,l:254,C:144},ShotgunFire01:{K:202,L:152,x:512,y:1231,l:278,C:144},ShotgunFire02:{K:181,L:147,x:518,y:1074,l:299,C:149},ShotgunFire03:{K:175,L:133,x:698,y:903,l:305,C:163},ShotgunFire04:{K:177,L:118,x:892,y:719,l:303,C:178},ShotgunFire05:{K:182,L:112,x:1006,y:509,l:298,C:184},ShotgunFire06:{K:184,L:112,x:0,y:719,l:296,C:184},ShotgunFire07:{K:183,
L:113,x:296,y:719,l:297,C:183},ShotgunFire08:{K:181,L:116,x:593,y:719,l:299,C:180},ShotgunFire09:{K:187,L:120,x:1195,y:719,l:293,C:176},ShotgunFire10:{K:200,L:125,x:0,y:903,l:280,C:171},ShotgunFire11:{K:211,L:132,x:429,y:903,l:269,C:164},ShotgunFire12:{K:215,L:139,x:1003,y:903,l:265,C:157},ShotgunFire13:{K:212,L:145,x:250,y:1074,l:268,C:151},ShotgunFire14:{K:203,L:149,x:817,y:1074,l:270,C:147},ShotgunFire15:{K:196,L:152,x:790,y:1231,l:256,C:144},ShotgunCycle01:{K:187,L:139,x:1268,y:903,l:209,C:157},
ShotgunCycle02:{K:162,L:109,x:830,y:509,l:176,C:187},ShotgunCycle03:{K:123,L:88,x:179,y:509,l:176,C:208},ShotgunCycle04:{K:101,L:84,x:192,y:296,l:176,C:212},ShotgunCycle05:{K:103,L:84,x:368,y:296,l:174,C:212},ShotgunCycle06:{K:126,L:84,x:542,y:296,l:173,C:212},ShotgunCycle07:{K:126,L:86,x:0,y:509,l:179,C:210},ShotgunCycle08:{K:127,L:85,x:1237,y:296,l:175,C:211},ShotgunCycle09:{K:126,L:84,x:715,y:296,l:173,C:212},ShotgunCycle10:{K:123,L:84,x:888,y:296,l:173,C:212},ShotgunCycle11:{K:101,L:84,x:1061,
y:296,l:176,C:212},ShotgunCycle12:{K:97,L:82,x:1240,y:0,l:181,C:214},ShotgunCycle13:{K:93,L:83,x:0,y:296,l:192,C:213},ShotgunCycle14:{K:114,L:108,x:612,y:509,l:218,C:188},ShotgunCycle15:{K:166,L:139,x:0,y:1074,l:250,C:157}};
Jj.prototype.equip=function(){var a=u.v-this.Oa+9;qj(this)||(this.ic=this.w.Za,9==a&&(this.fa.gb+=Rb(1)),a=Math.floor(a/3),9<=a&&this.ob&&this.w.Za?(this.action="fire",this.Oa=u.v+1,this.ob=0):9<=a&&(this.ac||0>=this.w.Za&&0<this.w.Ga)?(this.action="cycleOpen",this.Oa=u.v+1-6):14<=a?this.action="ready":(a=("00"+a).slice(-2),this.Va=this.w.constructor.Ya["ShotgunEquip"+a],this.jf=this.hf=0))};
Jj.prototype.ready=function(){qj(this)||(this.ic=this.w.Za,this.ob&&this.w.Za?(this.action="fire",this.Oa=u.v+1,this.ob=0):this.ac?(this.action="cycleOpen",this.Oa=u.v+1,this.ic=!1):(this.Xb(),this.Va=this.w.constructor.Ya.ShotgunEquip13))};
Jj.prototype.fire=function(){var a=u.v-this.Oa;this.Xb();this.ic=!1;if(0==a){u.m.ja.get("ShotgunFire01").play({gain:1,pitch:.75});u.m.ja.get("explode01").play({gain:.5,pitch:1.5});this.w.Za=0;this.w.vh=!0;u.u.be();this.Bb=pj.U(.04499,.31957,-.038305,-.596,.007,-179.3);var b=this.Zc;b.Ua=1;var c=255*(y()+4)/5&255;b.color.r=c;b.color.Ia=c;b.color.ba=c;b.scale=y()+1;b.Tb=Sb(hb());c=new U;c.translate(0,-4E4,0);$c(this.Bb,c,b.transform);b=Aj(this.fa);var d=Jj.zb.length;c=Array(d);for(var e=0;e<d;e++){var h=
jb(e+1);h!=e&&(c[e]=c[h]);c[h]=e}d=y()*Math.Xe;for(e=0;e<c.length;e++){h=(new U).rotate(0,Jj.zb[c[e]],0);var g=(new U).rotate(0,0,d+e*Math.Xe/9),k=new U;$c(b,g,k);$c(k,h,k);h=this.w.zc(k);h=p(h);for(g=h.next();!g.done;g=h.next())uj(g.value,360,1.2)}b=new Ij;b.Ja=6E4;b.scale=1;b.transform.m31-=45E3;c=new U;$c(this.fa.Ac.N,this.Bb,c);$c(c,b.transform,b.transform);b.g.y=-37500;ad(c,b.g,b.g);b.g.add(this.fa.g);Vc(b.g,b.Ta);b.Z=this.fa.Z;W(b,u.sc);b.create();b.step();this.Lb.push(b);3<this.Lb.length&&
(W(this.Lb[0],null),this.Lb.splice(0,1))}1==a&&(this.Zc.Ua=0);3==a&&(this.fa.gb+=Rb(12));4<=a&&this.ac?(this.action="cycleOpen",this.Oa=u.v+1):(8<=a&&(a=8+Math.floor((a-8)/2)),16<=a?this.action="ready":(a=("00"+a).slice(-2),this.Va=this.w.constructor.Ya["ShotgunFire"+a]||this.w.constructor.Ya.ShotgunEquip13))};
Jj.prototype.cycleOpen=function(){var a=u.v-this.Oa;if(!qj(this)){this.ic=!1;this.Xb();12==a&&u.m.ja.get("ShotgunOpen01").play({gain:1});if(21==a&&(this.fa.gb+=Rb(1),this.w.Ga+=this.w.Za,this.w.Za=0,u.u.be(),this.Bb=pj.U(-.018192,.25469,-.045699,-19.3,39.9,177),this.w.vh)){var b=new Bj("CartridgeShotgunSpent");b.wh=Rb(24*(1*y()+1));b.transform.m31+=6E3;var c=new U;$c(this.fa.Ac.N,this.Bb,c);$c(c,b.transform,b.transform);b.g.x-=2E3*(2*y()+1);b.g.z=2*-b.g.x;ad(c,b.g,b.g);b.b.set(b.transform.A,b.transform.m31,
b.transform.m32);b.g.add(this.fa.g);Vc(b.g,b.Ta);W(b,u.bd);b.create();this.w.vh=!1}a=Math.floor(a/3);if(9<=a&&(a=9,!this.ac)){this.action="cycleShut";this.Oa=u.v+1-27;return}a=("00"+a).slice(-2);this.Va=this.w.constructor.Ya["ShotgunCycle"+a]||this.w.constructor.Ya.ShotgunEquip13}};
Jj.prototype.cycleShut=function(){var a=u.v-this.Oa;this.Xb();30==a&&(u.m.ja.get("ShotgunShut01").play({gain:1}),0>=this.w.Ga&&(this.w.Ga=this.w.Hc),1<=this.w.Ga&&(--this.w.Ga,this.w.Za=1),--this.Ga,u.u.be());a=Math.floor(a/3);13==a&&(this.ic=this.w.Za);13<=a&&qj(this)||(16<=a?this.action="ready":(a=("00"+a).slice(-2),this.Va=this.w.constructor.Ya["ShotgunCycle"+a]||this.w.constructor.Ya.ShotgunEquip13))};Jj.prototype.qh=function(a){if(a=tj(a))a.Kg=!1;return a};
Jj.prototype.zc=function(a){var b=new F(a.A,a.m31,a.m32);a=new F(-a.F,-a.m21,-a.m22);var c=1E8,d=ke(b,new F(a.x*c,a.y*c,a.z*c));d&&(c=d.d);var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=p(u.u.ed),g=h.next();!g.done;g=h.next())if(g=g.value,g.Gb||!(u.v>g.Ea)){var k=Xi(b,a,g.b,g.Ha,g.mb+g.Ha);!k||0>k.t||k.t>=c||(k.item=g,k.Dc=a,Qa(e,k))}d&&e.push(d);return e};
function Kj(a){rj.call(this,a);this.Hc=72;this.qd=6;this.sa=this.qd-this.Za;this.Ga=this.Hc-this.sa-this.Za}Kj.prototype=Object.create(rj.prototype);Kj.prototype.constructor=Kj;
Kj.Ya={RevolverEquip00:{K:0,L:255,x:799,y:1169,l:480,C:41},RevolverEquip01:{K:32,L:246,x:351,y:1169,l:448,C:50},RevolverEquip02:{K:129,L:224,x:0,y:1169,l:351,C:72},RevolverEquip03:{K:180,L:199,x:773,y:1022,l:300,C:97},RevolverEquip04:{K:193,L:176,x:486,y:1022,l:287,C:120},RevolverEquip05:{K:194,L:157,x:237,y:1022,l:249,C:139},RevolverEquip06:{K:184,L:144,x:973,y:408,l:232,C:152},RevolverEquip07:{K:172,L:148,x:258,y:578,l:255,C:148},RevolverAim01:{K:181,L:149,x:824,y:727,l:218,C:147},RevolverAim02:{K:151,
L:149,x:1042,y:727,l:211,C:147},RevolverAim03:{K:133,L:148,x:513,y:578,l:208,C:148},RevolverFire01:{K:184,L:149,x:0,y:875,l:238,C:147},RevolverFire02:{K:184,L:149,x:238,y:875,l:238,C:147},RevolverFire03:{K:184,L:149,x:476,y:875,l:238,C:147},RevolverFire04:{K:184,L:149,x:714,y:875,l:238,C:147},RevolverFire05:{K:195,L:149,x:952,y:875,l:217,C:147},RevolverFire06:{K:201,L:111,x:675,y:0,l:148,C:185},RevolverFire07:{K:197,L:71,x:0,y:0,l:144,C:225},RevolverFire08:{K:212,L:100,x:290,y:0,l:192,C:196},RevolverFire09:{K:173,
L:114,x:244,y:225,l:253,C:182},RevolverFire10:{K:180,L:111,x:823,y:0,l:242,C:185},RevolverFire11:{K:176,L:113,x:0,y:225,l:244,C:183},RevolverFire12:{K:169,L:126,x:0,y:408,l:266,C:170},RevolverFire13:{K:171,L:139,x:485,y:408,l:269,C:157},RevolverFire14:{K:171,L:147,x:0,y:578,l:258,C:149},RevolverFire15:{K:185,L:149,x:0,y:1022,l:237,C:147},RevolverAimFire01:{K:133,L:148,x:721,y:578,l:208,C:148},RevolverAimFire02:{K:133,L:148,x:929,y:578,l:208,C:148},RevolverAimFire03:{K:133,L:148,x:0,y:727,l:208,C:148},
RevolverAimFire04:{K:133,L:148,x:208,y:727,l:208,C:148},RevolverAimFire05:{K:138,L:148,x:416,y:727,l:200,C:148},RevolverAimFire06:{K:144,L:119,x:497,y:225,l:168,C:177},RevolverAimFire07:{K:140,L:87,x:144,y:0,l:146,C:209},RevolverAimFire08:{K:153,L:110,x:482,y:0,l:193,C:186},RevolverAimFire09:{K:126,L:121,x:1065,y:0,l:219,C:175},RevolverAimFire10:{K:135,L:119,x:665,y:225,l:211,C:177},RevolverAimFire11:{K:130,L:120,x:876,y:225,l:211,C:176},RevolverAimFire12:{K:126,L:130,x:266,y:408,l:219,C:166},RevolverAimFire13:{K:127,
L:141,x:754,y:408,l:219,C:155},RevolverAimFire14:{K:131,L:146,x:1087,y:225,l:212,C:150},RevolverAimFire15:{K:133,L:148,x:616,y:727,l:208,C:148}};
Kj.prototype.equip=function(){var a=u.v-this.Oa;if(!qj(this)){this.ic=!0;0==a&&(this.fa.gb+=Rb(1));a=Math.floor(a/3);if(5<=a)if(this.w.tf.call(this),1==this.focus){if(this.ob&&this.w.sa){this.action="aimFire";this.Oa=u.v+1;return}}else if(0==this.focus&&this.ob&&this.w.sa){this.action="fire";this.Oa=u.v+1;return}8<=a?this.action="ready":0==this.focus&&(a=("00"+a).slice(-2),this.Va=this.w.constructor.Ya["RevolverEquip"+a])}};
Kj.prototype.ready=function(){if(!qj(this)){if(1==this.focus){if(this.ob&&this.w.sa){this.action="aimFire";this.Oa=u.v+1;return}}else if(0==this.focus&&this.ob&&this.w.sa){this.action="fire";this.Oa=u.v+1;return}this.Xb();this.w.tf.call(this)}};
Kj.prototype.fire=function(){var a=u.v-this.Oa;this.Xb();if(4==a){u.m.ja.get("CarbineFire01").play({gain:1});u.m.ja.get("ShotgunFire01").play({gain:1,pitch:2});this.ob=0;this.w.sa--;if(0>=this.w.sa){0>=this.w.Ga&&(this.w.Ga=this.w.Hc-sj(this.w));var b=Math.min(this.w.qd-this.w.sa,this.w.Ga);this.w.sa+=b;this.w.Ga-=b}u.u.be();this.Bb=pj.U(.032225,.49195,-.022213,.367,-.151,.525);b=this.Zc;b.Ua=1;var c=255*(y()+4)/5&255;b.color.r=c;b.color.Ia=c;b.color.ba=c;b.scale=y()+1;b.Tb=Sb(hb());c=new U;c.translate(0,
-21E3,0);$c(this.Bb,c,b.transform);b=new Ij;b.Ja=6E4;b.scale=1;b.transform.m31-=45E3;c=new U;$c(this.fa.Ac.N,this.Bb,c);$c(c,b.transform,b.transform);b.g.y=-37500;ad(c,b.g,b.g);b.g.add(this.fa.g);Vc(b.g,b.Ta);b.Z=this.fa.Z;W(b,u.sc);b.create();b.step();this.Lb.push(b);b=(new U).rotate(0,Rb(0*y()),0);c=(new U).rotate(0,0,y()*Math.PI*2);var d=Aj(this.fa);$c(d,c,d);$c(d,b,d);b=this.w.zc(d);b=p(b);for(c=b.next();!c.done;c=b.next())uj(c.value,360,1.7)}5==a&&(this.Zc.Ua=0);7==a&&(this.fa.gb+=Rb(4));7<=
a&&qj(this)||(8<=a&&(a=8+Math.floor((a-8)/2)),10<=a&&!this.ac&&this.ob&&this.w.sa?(this.action="fire",this.Oa=u.v+1):16<=a?this.action="ready":(a=("00"+a).slice(-2),this.Va=this.w.constructor.Ya["RevolverFire"+a]||this.w.constructor.Ya.RevolverEquip07))};
Kj.prototype.aimFire=function(){var a=u.v-this.Oa;this.Xb();if(4==a){u.m.ja.get("CarbineFire01").play({gain:1});u.m.ja.get("ShotgunFire01").play({gain:1,pitch:2});this.ob=0;this.w.sa--;if(0>=this.w.sa){0>=this.w.Ga&&(this.w.Ga=this.w.Hc-sj(this.w));var b=Math.min(this.w.qd-this.w.sa,this.w.Ga);this.w.sa+=b;this.w.Ga-=b}u.u.be();this.Bb=pj.U(0,.49195,-.017475,-.713,0,0);b=this.Zc;b.Ua=1;var c=255*(y()+4)/5&255;b.color.r=c;b.color.Ia=c;b.color.ba=c;b.scale=y()+1;b.Tb=Sb(hb());c=new U;c.translate(0,
-21E3,0);$c(this.Bb,c,b.transform);b=new Ij;b.Ja=6E4;b.scale=1;b.transform.m31-=45E3;c=new U;$c(this.fa.Ac.N,this.Bb,c);$c(c,b.transform,b.transform);b.g.y=-37500;ad(c,b.g,b.g);b.g.add(this.fa.g);Vc(b.g,b.Ta);b.Z=this.fa.Z;W(b,u.sc);b.create();b.step();this.Lb.push(b);b=(new U).rotate(0,Rb(0*y()),0);c=(new U).rotate(0,0,y()*Math.PI*2);var d=Aj(this.fa);$c(d,c,d);$c(d,b,d);b=this.w.zc(d);b=p(b);for(c=b.next();!c.done;c=b.next())uj(c.value,360,1.7)}5==a&&(this.Zc.Ua=0);7==a&&(this.fa.gb+=Rb(2));7<=
a&&qj(this)||(8<=a&&(a=8+Math.floor((a-8)/2)),10<=a&&this.ac&&this.ob&&this.w.sa?(this.action="aimFire",this.Oa=u.v+1):16<=a?this.action="ready":(a=("00"+a).slice(-2),this.Va=this.w.constructor.Ya["RevolverAimFire"+a]||this.w.constructor.Ya.RevolverAim03))};
Kj.prototype.tf=function(){this.ac?(this.focus+=1/6,1<this.focus&&(this.focus=1),this.ic=!1):this.ic=!0;if(0<this.focus){var a=Math.floor(3*this.focus);a=("00"+a).slice(-2);this.Va=this.w.constructor.Ya["RevolverAim"+a]||this.w.constructor.Ya.RevolverEquip07}else this.Va=this.w.constructor.Ya.RevolverEquip07};Kj.prototype.qh=tj;
Kj.prototype.zc=function(a){var b=new F(a.A,a.m31,a.m32),c=new F(-a.F,-a.m21,-a.m22),d=1E8;if(a=ke(b,new F(c.x*d,c.y*d,c.z*d)))d=a.d;var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=p(u.u.ed),g=h.next();!g.done;g=h.next())if(g=g.value,g.Gb||!(u.v>g.Ea)){var k=Xi(b,c,g.b,g.Ha,g.mb+g.Ha);!k||0>k.t||k.t>=d||(k.item=g,k.Dc=c,Qa(e,k))}b=[];e.length&&b.push(e[0]);a&&b.push(a);return b};
function Bj(a){Qi.call(this,a);this.tb=12500;this.Le=1;this.start=u.v;this.Hi=new F(y()-.5,y()-.5,y()-.5);this.Hi.oa(1)}Bj.prototype=Object.create(Qi.prototype);Bj.prototype.constructor=Bj;Bj.prototype.create=function(){Qi.prototype.create.call(this);var a=new Me(u.m.Sb.get(this.name));a.qa=this.N;a.transform.scale(.1,.1,.1);a.transform.rotate(0,-90,0);W(a,this);a.create();ld(a,this.Z)};
Bj.prototype.step=function(){this.transform.ph(this.Hi,this.wh);30==u.v-this.start&&(u.m.ja.get("shellCasing0"+(jb(3)+1)).play({gain:.625}),this.remove());Qi.prototype.step.call(this)};function yj(a){u.Node.call(this,a);this.Ea=u.v}yj.prototype=Object.create(u.Node.prototype);yj.prototype.constructor=yj;yj.prototype.step=function(){u.Node.prototype.step.call(this);var a=u.v-this.Ea-6;0>a||(0==a&&u.m.ja.get(kb(["woodSnap01","woodSnap02","woodSnap03"])).play({gain:10/60}),5<=(1<=a?a-1:0)&&this.remove())};
var fj=[];function hj(){var a=fj.indexOf(this);0>a||fj.splice(a,1)};function mj(a){Vi.call(this,a);this.Le=100;this.Bf=0;this.Ha=4E4;this.Hd=18E4;this.Qg=9E4;this.mb=.5*(this.Hd-2*this.Ha-6E4);this.Bh=12E4;this.Mc=9E3;this.Ke=2/3*this.Mc;this.ig=Vi.Fc(125E3);this.tb=2E5;this.$f=16;this.dg=this.eg=this.Xb=this.zd=this.Dg=this.gb=this.Ye=this.Pf=0;this.Rb=5;this.mi=this.bj=-Infinity;this.ni=Number.NEGATIVE_INFINITY;this.oi=4E5}mj.prototype=Object.create(Vi.prototype);f=mj.prototype;f.constructor=mj;
f.create=function(){Qi.prototype.create.call(this);var a=this.uc=new Ae("worldCamera");a.xf=2E4;a.nf=5E7;a.qa=this.N;W(a,this);u.u.Ba=a;a=this.Ac=new Ae("selfCamera");a.qa=this.uc.N;W(a,u.bd);a=this.Ib=new pj(this);a.Ua=0;W(a,u.bd);a.create();a=new Kj(this.Ib);a.bh=["KeyQ","Digit1"];this.Ib.fg.push(a);a=new zj(this.Ib);a.bh=["KeyE","Digit2"];this.Ib.fg.push(a);a=new Jj(this.Ib);a.bh=["KeyC","Digit3"];this.Ib.fg.push(a)};
f.step=function(){Vi.prototype.step.call(this);if(Y.lock){var a=1;this.Ib.w&&(a=Ua(1,this.Ib.w.Vg,this.Ib.focus));a=76E4*a;this.Pf-=Y.Vb.x*a;this.Ye+=Y.Vb.y*a}this.Ye=Ta(this.Ye,-1073741824,1073741824);a=Sb(this.Pf);var b=Sb(this.Ye);Zc(this.transform);this.transform.rotate(a,0,0);Zc(this.uc.transform);this.uc.transform.rotate(0,b,0);u.Fi||(this.uc.transform.rotate((y()-.5)*this.gb,(y()-.5)*this.gb,0),this.gb*=.8125);0==(u.v&1)&&(this.ae<u.v-1?(this.Dg*=.75,this.Xb*=.75,this.eg*=.75):(a=this.je*Math.PI/
this.$f,this.Dg=6E3*Math.abs(Math.sin(a)),this.eg=Math.sin(a)*Math.PI/210,this.Xb=(1-Math.abs(Math.sin(a)))*Math.PI/210),this.dg-=Rb(3),0>this.dg&&(this.dg=0));this.uc.transform.m31=this.mb+this.Ha-6E3-6E3+this.Dg;a=1;this.Ib.w&&(a=Ua(1,this.Ib.w.Vg,this.Ib.focus));this.Ac.Lc=Rb(24*a);this.uc.Lc=Rb(30*a);a=this.uc.N;b=new F(-a.F,-a.m21,-a.m22);(a=ke(new F(a.A,a.m31,a.m32),new F(5E5*b.x,5E5*b.y,5E5*b.z)))&&a.item instanceof Wg&&0==a.item.state&&0==a.item.open&&(a.item.state=1,a.item.ue=4*Math.floor(u.v/
4),a.item.Ig=NaN);if(!(2>u.v-this.ni)){a=this.oi;a*=a;b=null;var c=me(this.b,this.oi);c=p(c);for(var d=c.next();!d.done;d=c.next())for(d=d.value.jh.first();null!=d.item;d=d.next)if(d.item instanceof gj&&!d.item.Ee){var e=Tc(this.b,d.item.b,new F(0,0,0)).Ie();e<a&&(a=e,b=d.item)}b&&(a=b,a.Gb&&(a.Gb=!1,Li.remove(a)),a.Ee=this,this.ni=u.v)}};
f.Xg=function(){var a=new F(0,0,0);Kd.d.KeyW&&--a.z;Kd.d.KeyS&&(a.z+=1);Kd.d.KeyA&&--a.x;Kd.d.KeyD&&(a.x+=1);a.oa(1)?(this.zd+=1/6,1<this.zd&&(this.zd=1)):(this.zd-=1/6,0>this.zd&&(this.zd=0));return a};f.di=function(){Kd.p.Space&&(this.ah=u.v)};
function Aj(a){if(!a.Pd||!a.Ih){var b=new U;b.set(a.uc.N);return b}b=new F(a.Pd.b.x+2E4*(y()-.5),a.Pd.b.y+2E4*(y()-.5)+5E4,a.Pd.b.z+2E4*(y()-.5));b=Tc(bd(a.uc.N),b,new F).normalize();var c=new F(b.z,0,-b.x),d=new F(0,1,0);Xb(b,c,d).oa(1);Xb(d,b,c);var e=new U;e.D=c.x;e.I=c.y;e.J=c.z;e.G=d.x;e.m11=d.y;e.m12=d.z;e.F=b.x;e.m21=b.y;e.m22=b.z;e.A=a.uc.N.A;e.m31=a.uc.N.m31;e.m32=a.uc.N.m32;return e};function kj(){Vi.call(this,"mantato");this.Le=150;this.Bf=0;this.Ha=25E3;this.Hd=18E4;this.Qg=9E4;this.mb=.5*(this.Hd-2*this.Ha-6E4);this.Bh=12E4;this.Mc=1/3*14887;this.Ke=2/3*this.Mc;this.ig=Vi.Fc(3E5);this.tb=2E5;this.Ea=u.v+jb(30);this.yd=-Infinity;this.Gb=!0;this.Rb=360;this.Wa=[];this.sd=[];return this}kj.prototype=Object.create(Vi.prototype);kj.prototype.constructor=kj;kj.Fb=12;kj.Aa=NaN;
kj.We=function(){kj.Y=u.m.hb.get("defaultMaterial");var a=u.m.hb.get("monsterSkin").ca();a.name="monsterSplatter";a.va=1;u.m.hb.add(a);Lj.H=u.m.ma.get("gib");Lj.ia=u.m.da.get("spudGib01");a=[];var b=new U;b.D=1;b.I=0;b.J=-0;b.G=0;b.m11=1;b.m12=0;b.F=0;b.m21=-0;b.m22=1;b.A=0;b.m31=0;b.m32=-0;a.push(b);b=new U;b.D=.9916;b.I=-.1173;b.J=.055;b.G=.1259;b.m11=.9725;b.m12=-.1958;b.F=-.0305;b.m21=.201;b.m22=.9791;b.A=-3498;b.m31=3796;b.m32=6804;a.push(b);b=new U;b.D=.9749;b.I=-.1934;b.J=.1102;b.G=.2213;b.m11=
.8963;b.m12=-.3843;b.F=-.0244;b.m21=.399;b.m22=.9166;b.A=-6400;b.m31=-2683;b.m32=15101;a.push(b);b=new U;b.D=.9601;b.I=-.2246;b.J=.1669;b.G=.2797;b.m11=.7517;b.m12=-.5972;b.F=.0087;b.m21=.62;b.m22=.7845;b.A=-8393;b.m31=-17164;b.m32=25181;a.push(b);b=new U;b.D=.9541;b.I=-.2123;b.J=.2114;b.G=.2942;b.m11=.5306;b.m12=-.795;b.F=.0566;b.m21=.8206;b.m22=.5686;b.A=-9429;b.m31=-39030;b.m32=35202;a.push(b);b=new U;b.D=.9591;b.I=-.1521;b.J=.2388;b.G=.2712;b.m11=.2519;b.m12=-.929;b.F=.0811;b.m21=.9557;b.m22=
.2828;b.A=-9721;b.m31=-68375;b.m32=44142;a.push(b);b=new U;b.D=.9359;b.I=-.2158;b.J=.2785;b.G=.2565;b.m11=-.1246;b.m12=-.9585;b.F=.2415;b.m21=.9685;b.m22=-.0613;b.A=-7782;b.m31=-63561;b.m32=42925;a.push(b);b=new U;b.D=.9573;b.I=-.1734;b.J=.2312;b.G=.1975;b.m11=-.1913;b.m12=-.9614;b.F=.2109;b.m21=.9661;b.m22=-.1489;b.A=-4587;b.m31=-61424;b.m32=39511;a.push(b);b=new U;b.D=.9812;b.I=-.1297;b.J=.143;b.G=.1237;b.m11=-.1466;b.m12=-.9814;b.F=.1482;b.m21=.9807;b.m22=-.1278;b.A=-2376;b.m31=-62808;b.m32=37771;
a.push(b);b=new U;b.D=.9889;b.I=-.134;b.J=.0638;b.G=.053;b.m11=-.0825;b.m12=-.9952;b.F=.1386;b.m21=.9875;b.m22=-.0745;b.A=-104;b.m31=-64955;b.m32=38224;a.push(b);b=new U;b.D=.9803;b.I=-.1963;b.J=.0226;b.G=.0119;b.m11=-.0555;b.m12=-.9984;b.F=.1973;b.m21=.979;b.m22=-.0521;b.A=2290;b.m31=-66053;b.m32=39447;a.push(b);b=new U;b.D=.9587;b.I=-.2839;b.J=.017;b.G=.0035;b.m11=-.0481;b.m12=-.9988;b.F=.2843;b.m21=.9577;b.m22=-.0451;b.A=4830;b.m31=-66621;b.m32=39607;a.push(b);b=new U;b.D=.939;b.I=-.3438;b.J=.0072;
b.G=-.0041;b.m11=-.0323;b.m12=-.9995;b.F=.3439;b.m21=.9385;b.m22=-.0317;b.A=6758;b.m31=-66864;b.m32=40168;a.push(b);b=new U;b.D=.9324;b.I=-.3614;b.J=5E-4;b.G=-.0114;b.m11=-.0308;b.m12=-.9995;b.F=.3612;b.m21=.9319;b.m22=-.0328;b.A=7520;b.m31=-66863;b.m32=40232;a.push(b);kj.Fc=a;a=[];b=new U;b.D=1;b.I=0;b.J=-0;b.G=0;b.m11=1;b.m12=-0;b.F=0;b.m21=0;b.m22=1;b.A=0;b.m31=-0;b.m32=0;a.push(b);b=new U;b.D=.9927;b.I=-.0183;b.J=-.119;b.G=.0277;b.m11=.9966;b.m12=.0773;b.F=.1171;b.m21=-.0801;b.m22=.9899;b.A=70;
b.m31=-3027;b.m32=-619;a.push(b);b=new U;b.D=.9816;b.I=-.0289;b.J=-.1886;b.G=.022;b.m11=.999;b.m12=-.0389;b.F=.1895;b.m21=.034;b.m22=.9813;b.A=288;b.m31=-5629;b.m32=253;a.push(b);b=new U;b.D=.9973;b.I=.0022;b.J=.074;b.G=.0054;b.m11=.9948;b.m12=-.1019;b.F=-.0738;b.m21=.1021;b.m22=.992;b.A=-219;b.m31=-2573;b.m32=764;a.push(b);b=new U;b.D=.9877;b.I=-.0202;b.J=-.155;b.G=.0055;b.m11=.9955;b.m12=-.0949;b.F=.1562;b.m21=.0929;b.m22=.9833;b.A=335;b.m31=259;b.m32=689;a.push(b);b=new U;b.D=.9986;b.I=.0123;b.J=
-.0519;b.G=-.0065;b.m11=.9937;b.m12=.1115;b.F=.053;b.m21=-.111;b.m22=.9924;b.A=178;b.m31=-3079;b.m32=-875;a.push(b);b=new U;b.D=.9996;b.I=.007;b.J=-.0256;b.G=-.0062;b.m11=.9994;b.m12=.0327;b.F=.0258;b.m21=-.0326;b.m22=.9991;b.A=110;b.m31=-5793;b.m32=-254;a.push(b);b=new U;b.D=.9893;b.I=-.0894;b.J=.1151;b.G=.0859;b.m11=.9957;b.m12=.0348;b.F=-.1177;b.m21=-.0245;b.m22=.9928;b.A=-944;b.m31=-2885;b.m32=-285;a.push(b);kj.hd=a};f=kj.prototype;
f.create=function(){this.lb=new U;this.v=this.Ag=0;this.Zd=new U;this.Vf=0;this.Nh=11E4;this.H=u.m.ma.get("physicalCardThreshold");this.ia=u.m.da.get("monsterWalk01");this.color=Dc;this.transform.rotate(y()*Math.PI*2,0,0);md(this,37500);this.Ge=18E4;fj.push(this);Vi.prototype.create.call(this);u.u.ed.push(this)};
f.step=function(){if(this.Gb){var a=u.v-this.Ea;90>u.v-this.yd&&(a=0);0>a&&(a=0);a=Math.floor(a/3);this.v=8*this.Ag+a%8;this.Sf=kj.hd}else a=u.v-this.Ea-4,0>a&&(a=0),this.v=Math.floor(a/4),13<this.v&&(this.v=13),6==a&&u.u.Hh(1),20==a&&(this.Vf=.5*-this.Nh),24==a&&u.m.ja.get(lb("bodyThud01","bodyThud02")).play({gain:.5}),600<=a&&this.remove();this.y=this.b.y+2E3-.5*this.Hd;Vi.prototype.step.call(this)};
f.zi=function(){var a=bd(this.N),b=Tc(bd(u.Ba.N),a,new F),c=b.oa(1);c=Math.min(1,c/(2*this.Hd));var d=new F(0,1,0),e=Xb(d,b,new F).normalize();Xb(b,e,d);var h=u.Ba.N.bg(),g=u.Ba.N.Be();this.lb.qg(Uc(u.Ba.N.ag(),e,c).normalize());this.lb.rg(Uc(h,d,c).normalize());this.lb.sg(Uc(g,b,c).normalize());cd(this.lb,a);this.Sf?this.Zd.set(this.Sf[this.v%this.Sf.length]):this.Zd.reset();this.Gb&&(a=this.N,a=Math.round(4*(Math.atan2(a.F,a.m22)-Math.atan2(u.Ba.N.A-a.A,u.Ba.N.m32-a.m32))/Math.PI),0>a&&(a+=8),8<=
a&&(a-=8),this.Ag=a,this.Zd.rotate(this.Ag*Math.PI/4,0,0));$c(this.lb,this.Zd,this.Zd);this.lb.A+=this.lb.G*this.Vf;this.lb.m31+=this.lb.m11*this.Vf;this.lb.m32+=this.lb.m12*this.Vf;if(this.zf){a=p(this.zf);for(b=a.next();!b.done;b=a.next()){c=b.value;c.le.A+=this.b.x;c.le.m31+=this.b.y;c.le.m32+=this.b.z;b=c.Oi;c=bd(c.le);d=this.Zd;e=new U;h=d.D*-d.A+d.I*-d.m31+d.J*-d.m32;g=d.G*-d.A+d.m11*-d.m31+d.m12*-d.m32;var k=d.F*-d.A+d.m21*-d.m31+d.m22*-d.m32,l=d.G,m=d.F,n=d.I,r=d.m11,q=d.m21,t=d.J,z=d.m12,
A=d.m22;e.D=d.D;e.G=n;e.F=t;e.A=h;e.I=l;e.m11=r;e.m21=z;e.m31=g;e.J=m;e.m12=q;e.m22=A;e.m32=k;e.kb(c,c);d={};d.b=c;d.Ea=u.v+1;e=7E3*b;h=jb(2)?e:-e;k=hb()*(180/2147483648);g=Math.cos(k);k=Math.sin(k);d.ra=new Xc;d.ra.D=g*h;d.ra.I=k*h;d.ra.G=-k*e;d.ra.m11=g*e;this.Wa.push(d);this.Wa.length>kj.Fb&&this.Wa.shift();d={};d.b=c;d.Ea=u.v+1;b=7E3*b+3500;c=jb(2)?b:-b;h=hb()*(180/2147483648);e=Math.cos(h);h=Math.sin(h);d.ra=new Xc;d.ra.D=e*c;d.ra.I=h*c;d.ra.G=-h*b;d.ra.m11=e*b;this.sd.push(d);this.sd.length>
kj.Fb&&this.sd.shift()}delete this.zf}};
f.Qa=function(){kj.Aa+=2;255<kj.Aa&&(x.clear(x.STENCIL_BUFFER_BIT),kj.Aa=130);u.xb(1);x.colorMask(!1,!1,!1,!1);x.stencilFunc(x.ALWAYS,kj.Aa-128,255);x.stencilOp(x.KEEP,x.KEEP,x.REPLACE);var a=this.lb.Be(),b=Vb(a,bd(this.lb));u.Db(Ve);u.eb(u.m.ma.get("monoThresholdEffect"));u.hc(0,u.m.da.get("smokePuff01"));kj.Y.bind();u.rb(0);u.gc(0);u.H.O("color",Dc);for(var c=p(this.Wa),d=c.next();!d.done;d=c.next()){var e=d.value;d=this.Zd.kb(e.b,new F);if(!(0>Vb(d,a)-b)){var h=4>u.v-e.Ea?1.4:1;e=(new Xc).set(e.ra);
e.D*=h;e.I*=h;e.G*=h;e.m11*=h;e=Yc(this.lb,e,new U);cd(e,d);u.H.O("modelMatrix",e);x.drawArrays(x.TRIANGLE_FAN,We(0,1),4)}}u.xb(2);x.colorMask(!0,!0,!0,!0);x.stencilFunc(x.GEQUAL,kj.Aa-1,127);x.stencilOp(x.KEEP,x.KEEP,x.REPLACE);u.v==this.cd+1?this.H=u.m.ma.get("flashCardThreshold"):u.v==this.cd+3&&(this.H=u.m.ma.get("physicalCardThreshold"));u.Db(Ve);u.eb(this.H);this.Gb?(this.ia=u.m.da.get("monsterWalk01"),this.fc=64):(this.ia=u.m.da.get("monsterDeath01"),this.fc=16);u.hc(0,this.ia);kj.Y.bind();
u.H.O("ambientLight",this.Z.Xa,!1);u.rb(0);u.gc(0);u.H.O("color",this.color);a=new U;a.set(this.lb);b=this.Nh;a.D*=b;a.I*=b;a.J*=b;a.G*=-b;a.m11*=-b;a.m12*=-b;u.H.O("modelMatrix",a);x.drawArrays(x.TRIANGLE_FAN,We(this.v,this.fc),4);if("flashCardThreshold"!=this.H.name)for(u.xb(0),x.stencilFunc(x.EQUAL,kj.Aa-1,255),x.stencilOp(x.KEEP,x.KEEP,x.KEEP),a=this.lb.Be(),b=Vb(a,bd(this.lb)),u.Db(Ve),u.eb(u.m.ma.get("monoEffect")),u.hc(0,u.m.da.get("splatter01")),u.m.hb.get("monsterSplatter").bind(),u.rb(1),
u.gc(0),u.H.O("ambientLight",this.Z.Xa,!1),u.H.O("color",Lj.Kc),c=p(this.sd),d=c.next();!d.done;d=c.next())e=d.value,d=this.Zd.kb(e.b,new F),0>Vb(d,a)-b||(h=4>u.v-e.Ea?1.4:1,e=(new Xc).set(e.ra),e.D*=h,e.I*=h,e.G*=h,e.m11*=h,e=Yc(this.lb,e,new U),cd(e,d),u.H.O("modelMatrix",e),x.drawArrays(x.TRIANGLE_FAN,We(0,1),4))};
f.Xg=function(){var a=new F;if(!this.Gb||90>u.v-this.yd)return a;if(!this.path){var b=u.u.ta.b.z,c=u.u.ta.b.x;b+=6E5*(y()-.5);c+=6E5*(y()-.5);hh=300;this.path=jh(this.b.z,this.b.x,b,c)}if(!this.path)return a;for(;;){b=this.path[0];c=b.getParameter(this.b.z,this.b.x);if(c<b.length)break;this.path.shift();if(!this.path.length)return this.path=null,a}b=b.evaluate(c+1E5);a.z=b.x-this.b.z;a.x=b.y-this.b.x;this.transform.D=-a.z;this.transform.J=a.x;this.transform.F=a.x;this.transform.m22=a.z;return a};
f.ie=function(a){this.Gb&&(this.cd=u.v,this.g.x=0,this.g.z=0,this.Rb-=a,0>=this.Rb&&lj(this))};function lj(a){a.Gb&&(a.Ea=u.v,a.v=0,a.Ag=0,hj.call(a),Li.remove(a),a.Sf=kj.Fc,a.Gb=!1)}f.remove=function(){this.tg&&this.tg.remove();var a=u.u.ed.indexOf(this);0<=a&&u.u.ed.splice(a,1);Vi.prototype.remove.call(this);this.Gb&&hj.call(this)};function nj(a,b){b=Tc(b,a.b,new F(0,0,0));b.y=0;b.oa(1);a.transform.D=b.z;a.transform.J=-b.x;a.transform.F=b.x;a.transform.m22=b.z}
function xj(a,b,c){a.yd=u.v;var d=c*(y()+1),e=new Lj;e.frame=jb(16);e.Ja=12E3*(y()+1);e.Ja*=c;e.b.set(0,0,5E4);b.kb(e.b,e.b);e.g.x=5E3*(2*y()-1);e.g.y=5E3*(2*y()-1);e.g.z=2E4*(y()+1);ad(b,e.g,e.g);e.$d=Rb(60*(.25+y()));jb(2)||(e.$d=-e.$d);W(e,u.Ed);e.create();e=new Lj;e.frame=jb(16);e.Ja=8E3*(y()+1);e.Ja*=c;e.b.set(0,0,5E4);b.kb(e.b,e.b);e.g.x=5E3*(2*y()-1);e.g.y=5E3*(2*y()-1);e.g.z=2E4*(y()+1);ad(b,e.g,e.g);e.xe=Lj.Kc;W(e,u.Ed);e.create();c=Math.sqrt(3*c)+y()-.5;for(e=0;e<c;e++){var h=new Lj;h.jg=
120;h.frame=jb(16);h.Ja=12E3;h.b.set(0,0,5E4);b.kb(h.b,h.b);h.g.x=2*y()-1;h.g.y=2*y()-1;h.g.z=2*y();h.g.oa(1E4*(y()+1));h.g.y+=6E3*y();ad(b,h.g,h.g);h.$d=Rb(60*(.25+y()));jb(2)||(h.$d=-h.$d);jb(2)||(h.xe=Lj.Kc);W(h,u.Ed);h.create()}nj(a,bd(u.Ba.N));nd(a);a.zf||(a.zf=[]);b.A-=a.b.x;b.m31-=a.b.y;b.m32-=a.b.z;a.zf.push({le:b,Oi:d})}
function Lj(){u.za.call(this,"SpudGib");Se.call(this);this.fc=16;this.frame=0;this.Ja=25E3;this.scale=1;this.xd=!jb(2);this.Tb=Sb(hb());this.$d=0;this.tb=2*this.Ja;this.ue=this.Ea=u.v+4;this.g=new F(0,0,0);this.jg=600;this.xe=Lj.xe;this.Kc=Lj.Kc}Lj.prototype=Object.create(u.za.prototype);Lj.prototype.constructor=Lj;Lj.xe=new R(158,158,95,255);Lj.Kc=new R(255,255,64,255);
Lj.prototype.create=function(){this.Id=this.b.ca();this.transform.A=this.b.x;this.transform.m31=this.b.y;this.transform.m32=this.b.z;u.za.prototype.create.call(this);var a=le(this.Id,this.g);a?(this.Te=a.p,this.If=a.n,this.re=a.t):this.re=Number.POSITIVE_INFINITY};
Lj.prototype.step=function(){var a=u.v-this.ue;0>a||(a<this.re?this.qj?(this.b.y=this.Id.y+this.g.y*a,this.transform.m31=this.b.y):(this.b.set(this.Id.x+this.g.x*a,this.Id.y+.5*(2*this.g.y+Ki.y*a)*a,this.Id.z+this.g.z*a),this.transform.A=this.b.x,this.transform.m31=this.b.y,this.transform.m32=this.b.z,u.v%3||(this.Tb+=this.$d)):a==Math.ceil(this.re)&&(this.b.set(this.Te.x,this.Te.y,this.Te.z),this.transform.A=this.b.x,this.transform.m31=this.b.y,this.transform.m32=this.b.z,this.xe==this.Kc&&(hf(u.u.Sh,
this.Te,this.If,Sb(hb()),this.Ja*this.scale*2.5,jb(4),4),this.remove()),-1==this.If.y?(this.Id=this.b.ca(),this.ue=u.v+180+jb(360),this.g.set(0,0,0),this.$d=0,(a=le(this.Id,this.g))?(this.Te=a.p,this.If=a.n,this.re=a.t):this.re=Number.POSITIVE_INFINITY):0==this.If.y&&(this.Id=this.b.ca(),this.ue=u.v+180+jb(360),this.g.set(0,-500,0),this.qj=!0,(a=ke(this.Id,this.g,!0))?(this.Te=a.p,this.If=a.n,this.re=a.t):this.re=Number.POSITIVE_INFINITY)));u.v-this.Ea>this.jg&&this.remove();u.za.prototype.step.call(this)};
Lj.prototype.Qa=function(){Te.call(this,this.N);u.Db(Ve);u.eb(Lj.H);u.hc(0,Lj.ia);u.rb(0);u.xb(2);u.gc(0);u.H.O("modelMatrix",this.N);u.H.O("color1",this.xe);u.H.O("color2",this.Kc);u.H.O("ambientLight",this.Z.Xa);x.drawArrays(x.TRIANGLE_FAN,We(this.frame,this.fc),4);u.za.prototype.Qa.call(this)};function gj(a){Qi.call(this,"loot");a?this.species=a:this.species=kb(gj.jb);this.Ha=37500;this.mb=0;this.Bf=.8;this.Ea=u.v+jb(600);this.Gb=!0}gj.prototype=Object.create(Qi.prototype);gj.prototype.constructor=gj;
gj.We=function(){var a=[u.m.ja.get("coinPurse01"),u.m.ja.get("coinPurse02"),u.m.ja.get("coinPurse03"),u.m.ja.get("coinPurse04")],b=[u.m.ja.get("ingot01"),u.m.ja.get("ingot02")],c=[u.m.ja.get("gem01"),u.m.ja.get("gem02"),u.m.ja.get("gem03")],d=[u.m.ja.get("crumplePaper01"),u.m.ja.get("crumplePaper02")],e={bb:u.m.Sb.get("moneyNugget"),value:1,ja:c};a={bb:u.m.Sb.get("moneyCoin"),value:5,ja:a};d={bb:u.m.Sb.get("moneyBundle"),value:25,ja:d};b={bb:u.m.Sb.get("moneyBar"),value:125,ja:b};var h={bb:u.m.Sb.get("gemRuby"),
value:2,ja:c},g={bb:u.m.Sb.get("gemEmerald"),value:10,ja:c};c={bb:u.m.Sb.get("gemSapphire"),value:50,ja:c};gj.jb=[e,h,a,a,a,a,a,g,d,c,b]};gj.Fg=function(){for(var a=jb(200),b=[];a;){for(var c=0;c<gj.jb.length&&!(gj.jb[c].value>a);)c++;var d=1.75;d=1<=d?2-d:1/d;c=Math.floor(Math.pow(y(),d)*c);c=gj.jb[c];a-=c.value;b.push(new gj(c))}return b};
gj.prototype.create=function(){this.transform.scale(1,1,1);var a=this.bb=new Me(this.species.bb);a.qa=this.N;W(a,this);a.create();this.tb=1*a.src.tb;ld(a,this.Z);md(a,18E3);Qi.prototype.create.call(this)};
gj.prototype.step=function(){var a=u.v-this.Ea;a=3*Math.floor(a/3);Zc(this.bb.transform);this.bb.transform.rotate((a+.5*Math.sin(a))/6,Math.PI/4,0);this.Gb?(60==u.v-this.Ea&&(this.Gb=!1,Li.remove(this)),Qi.prototype.step.call(this)):(this.Ee&&(a=Tc(new F(this.Ee.b.x,this.Ee.b.y,this.Ee.b.z),this.b,new F(0,0,0)),a.Ie()<Math.pow(5E4,2)?(a=this.Ee,kb(this.species.ja).play({gain:1}),a.mi=u.v,this.remove()):(a.y*=5,a.oa(1),this.b.x+=37500*a.x,this.b.y+=37500*a.y,this.b.z+=37500*a.z),this.transform.A=this.b.x,
this.transform.m31=this.b.y,this.transform.m32=this.b.z),u.za.prototype.step.call(this));gj.hd(this)};gj.prototype.remove=function(){u.za.prototype.remove.call(this);Li.remove(this);this.bb.remove()};gj.hd=function(a){a=a.Z.Xa;a.x=Math.min(1,3*a.x);a.y=Math.min(1,3*a.y);a.z=Math.min(1,3*a.z)};function Ij(a){u.pa.call(this,a);Se.call(this);this.H=u.m.ma.get("physicalCard");this.ia=u.m.da.get("smokePuff02");this.Y=Ij.Y;this.color=new R(Ij.color.r,Ij.color.Ia,Ij.color.ba,255);this.frame=0;this.fc=16;this.g=new F;this.Ta=new F;this.scale=1;this.Tb=Sb(hb());this.Ea=u.v}Ij.prototype=Object.create(u.pa.prototype);Ij.prototype.constructor=Ij;Ij.Y=new pd;Ij.Y.va=2;Ij.color=new R(144,144,144,255);
Ij.prototype.step=function(){var a=u.v-this.Ea;a=Math.pow(a/540,.625);this.frame=Math.floor(9*a);this.alpha=.25*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.ua=this.alpha*Ij.color.ua&255;this.transform.m31+=200;this.g.scale(.8125);a=new F(.5*this.Ta.x+.5*this.g.x,.5*this.Ta.y+.5*this.g.y,.5*this.Ta.z+.5*this.g.z);this.transform.A+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.Ta.set(this.g.x,this.g.y,this.g.z);u.pa.prototype.step.call(this)};
Ij.prototype.Qa=function(){Ue.call(this);u.pa.prototype.Qa.call(this)};function wj(a){u.pa.call(this,a);Se.call(this);this.H=u.m.ma.get("physicalCard");this.ia=u.m.da.get("smokePuff02");this.Y=Ij.Y;this.color=new R(wj.color.r,wj.color.Ia,wj.color.ba,255);this.frame=0;this.fc=16;this.g=new F;this.Ta=new F;this.scale=1;this.Tb=Sb(hb());this.Z={Sa:4294967295,Xa:new F(1,1,1)};this.Ea=u.v}wj.prototype=Object.create(u.pa.prototype);wj.prototype.constructor=wj;wj.color=new R(212,212,212,255);
wj.prototype.step=function(){var a=u.v-this.Ea;a/=this.jg;a=Math.pow(a,.75);this.frame=Math.floor(9*a);this.alpha=.375*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.ua=this.alpha*wj.color.ua&255;this.g.scale(.8125);var b=new F(.5*this.Ta.x+.5*this.g.x,.5*this.Ta.y+.5*this.g.y,.5*this.Ta.z+.5*this.g.z);this.transform.A+=b.x;this.transform.m31+=b.y;this.transform.m32+=b.z;this.Ta.set(this.g.x,this.g.y,this.g.z);if(0==a||0==u.v%4)a=bd(this.transform),(b=ke(a,new F(0,-1E8,0),!0))&&ze(a,se[b.item.ea],
this.Z.Xa);u.pa.prototype.step.call(this)};wj.prototype.Qa=function(){Ue.call(this);u.pa.prototype.Qa.call(this)};function Mj(a){u.pa.call(this,a);Se.call(this);this.H=u.m.ma.get("spray");this.ia=u.m.da.get("spray01");this.Y=Mj.Y;this.color=new R(Lj.Kc.r,Lj.Kc.Ia,Lj.Kc.ba,255);this.g=new F;this.Ta=new F;this.scale=1;this.Tb=Sb(hb());this.Ea=u.v}Mj.prototype=Object.create(u.pa.prototype);Mj.prototype.constructor=Mj;Mj.Y=new pd;Mj.Y.va=0;
Mj.prototype.step=function(){var a=u.v-this.Ea;a/=this.Dj;this.scale=15*a;1<=a&&this.remove();this.color.ua=254*(a+1)&255;this.g.add(Ki);a=new F(.5*this.Ta.x+.5*this.g.x,.5*this.Ta.y+.5*this.g.y,.5*this.Ta.z+.5*this.g.z);this.transform.A+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.Ta.set(this.g.x,this.g.y,this.g.z);u.pa.prototype.step.call(this)};Mj.prototype.Qa=function(){Ue.call(this);u.pa.prototype.Qa.call(this)};
function oj(a,b){u.pa.call(this,b);Se.call(this);this.H=u.m.ma.get("image");this.ia=u.m.da.get("explode");this.Y=oj.Y;this.color=new R(255,255,255,255);this.scale=1;this.Ja=a;this.xd=!jb(2);this.Tb=Sb(hb());this.Ea=u.v+1;this.fc=16}oj.prototype=Object.create(u.pa.prototype);oj.prototype.constructor=oj;oj.Y=new pd;oj.Y.va=1;
oj.prototype.step=function(){var a=u.v-this.Ea;50<=a&&this.remove();this.scale+=.02;this.transform.m31+=3E3*(1-a/50);this.frame=Math.floor(16*(1-Math.pow(.9375,a)));a=255*(1-(a-15)/35);255<a&&(a=255);a&=255;this.color.r=a;this.color.Ia=a;this.color.ba=a;this.color.ua=a;u.pa.prototype.step.call(this)};oj.prototype.Qa=function(){Ue.call(this);u.pa.prototype.Qa.call(this)};
function vj(a,b){u.pa.call(this,b);Se.call(this);this.H=u.m.ma.get("image");this.ia=u.m.da.get("bulletFlare01");this.Y=vj.Y;this.color=new R(255,255,255,0);this.scale=1;this.Ja=a;this.xd=!jb(2);this.Tb=Sb(hb());this.Ea=u.v+1;this.fc=4}vj.prototype=Object.create(u.pa.prototype);vj.prototype.constructor=vj;vj.Y=new pd;vj.Y.va=1;vj.prototype.step=function(){var a=u.v-this.Ea;0<=a&&(3<=a&&this.remove(),this.scale+=.25);this.frame=Math.floor(a);u.pa.prototype.step.call(this)};
vj.prototype.Qa=function(){Ue.call(this);u.pa.prototype.Qa.call(this)};function Nj(){u.za.call(this);this.dir=new F(0,0,0);this.speed=12500;return this}Nj.prototype=Object.create(u.za.prototype);Nj.prototype.constructor=Nj;Nj.color=new R(255,255,255,192);
Nj.prototype.create=function(){var a=this.Mh=new Se;a.H=u.m.ma.get("imageThreshold");a.ia=u.m.da.get("fireball");a.Y=u.m.hb.get("defaultMaterial");a.color=Nj.color;a.scale=1;a.Ja=31250;a.xd=!1;a.Tb=Rb(180);a.fc=4;a.qa=this.N;W(a,u.sc);a.create();this.Ea=u.v+1;u.za.prototype.create.call(this)};
Nj.prototype.step=function(){var a=u.v-this.Ea;this.Mh.frame=a>>2&3;180<=a&&this.remove();(a=Nj.zc(this.b,this.dir,this.speed))?(this.b.set(a.p.x,a.p.y,a.p.z),this.remove()):(this.b.x+=this.dir.x*this.speed,this.b.y+=this.dir.y*this.speed,this.b.z+=this.dir.z*this.speed,this.b.round());this.transform.A=this.b.x;this.transform.m31=this.b.y;this.transform.m32=this.b.z;u.za.prototype.step.call(this)};
Nj.zc=function(a,b,c){var d=null,e=ke(a,new F(b.x*c,b.y*c,b.z*c));e&&(d=e,c=d.d);e=u.u.ta;!(a=Xi(a,b,e.b,e.Ha,e.mb+e.Ha))||0>a.t||a.t>=c||(a.item=e,d=a);return d};Nj.prototype.remove=function(){this.Mh.remove();u.za.prototype.remove.call(this)};u.u=new u.Node("game");u.bi=new u.Node("gameDraw");u.u.Ji=0;u.u.eh=0;u.u.dj=2;u.u.cj=1;u.u.ed=[];u.u.ef=[];u.u.Ze=[];u.u.dh=0;u.u.wf=0;u.u.ji=NaN;u.u.Gc=[];u.u.Of=!0;u.u.be=function(){var a=u.u.ta.Ib.w,b=-146,c=119;a instanceof zj&&(b+=6,c-=10);var d=sj(a).toLocaleString("en-US");var e=u.m.da.get("HUDNumerals24Bold");d=u.ci(e,d,0);d.color=Dc;d.x=b;d.y=c;d.x-=d.width*d.Ii.width;a.Gg=d;u.u.Of=!0};u.u.Hh=function(a){u.u.dh+=a;u.u.wf+=a};
u.u.Yi=function(){0>=u.u.wf||u.v<u.u.ji+2||(u.u.wf--,u.u.ji=u.v,u.m.ja.get("hit02").play({gain:1}),u.u.Gc=u.ci(u.m.da.get("HUDNumerals24Bold"),(u.u.dh-u.u.wf).toLocaleString("en-US"),1),u.u.Gc.Ug=u.v,u.u.Of=!0)};
u.m.ready=function(){var a=u.m.da.get("HUDNumerals10");a.Rd=[7,5,7,7,8,7,7,7,7,7,3];a.ke=10;a.rf=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.sf=[0,1,0,0,-1,0,0,0,0,0,0];u.Yg(a);a=u.m.da.get("HUDNumerals14Bold");a.Rd=[9,6,9,9,9,9,9,9,9,9,4];a.ke=14;a.rf=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.sf=[0,1,0,0,0,0,0,0,0,0,0];u.Yg(a);a=u.m.da.get("HUDNumerals24Bold");a.Rd=[13,9,13,13,14,13,13,13,13,13,5];a.ke=23;a.rf=[0,1,0,0,-1,0,0,0,0,0,0];a.sf=[0,3,0,0,0,0,0,0,0,0,0];u.Yg(a);u.Ed=W(new u.Node("scnWorld"),u.Pc);u.sh=
W(new u.Node("scnLoot"),u.Ed);u.oe=W(new u.Node("scnDoors"),u.Ed);u.oe.Ua=0;u.pe=W(new u.Node("scnSpuds"),u.Pc);u.pe.Ua=0;u.Ef=W(new u.Node("scnShadows"),u.Pc);u.Ef.Ua=0;u.sc=W(new u.Node("scnEffects"),u.Pc);u.sc.Ua=0;u.bd=W(new u.Node("scnSelf"),u.Pc);u.bd.Ua=0;u.jj=W(new u.Node("scnHUD"),u.Pc);W(Mi,u.Pc);W(u.u,u.Pc);u.Wg=1E3/60;u.Df=new $i;u.ij();a=[new F(135/255,223/255,206/255),new F(230/255,230/255,172/255),new F(135/255,223/255,206/255),new F(135/255,223/255,206/255),new F(0,213/255,1),new F(135/
255,223/255,206/255)];u.u.yj=a;for(var b=new Float32Array(36),c=0;c<a.length;c++)a[c].x=.1*a[c].x+.65,a[c].y=.1*a[c].y+.65,a[c].z=.1*a[c].z+.65,a[c].scale(.75),b[3*c]=a[c].x,b[3*c+1]=a[c].y,b[3*c+2]=a[c].z;u.eb(u.m.ma.get("physical"));u.H.O("ambient",b);u.H.O("clipY",Infinity,!1);u.eb(u.m.ma.get("imageContrast"));u.H.O("contrastOffset",0);u.H.O("contrastScale",1.0625);u.Db(Bd);wd(Bd,Bd.Jf.length*Bd.nb);Bd.upload(Bd.Jf);u.Fd(Dd);wd(Dd,2*Dd.elements.length);Dd.upload(Dd.elements);u.m.hb.get("gemRuby").va=
0;u.m.hb.get("gemEmerald").va=0;u.m.hb.get("gemSapphire").va=0;u.m.hb.get("bulbGreen").va=0;kj.We();a=Rb(5);Jj.zb=[];for(b=0;9>b;b++)c=b,c*=1/9,c=Math.pow(c,.5),Jj.zb[b]=c*a;zj.Eh=u.m.da.get("ViewCarbine");zj.oh=u.m.da.get("HUDReticleCarbine");zj.Aa=u.m.da.get("HUDItemCarbine");zj.Aa.offsetY=-12;Jj.Eh=u.m.da.get("ViewShotgun");Jj.oh=u.m.da.get("HUDReticleShotgun");Jj.Aa=u.m.da.get("HUDItemShotgun");Jj.Aa.offsetY=-10;Kj.Eh=u.m.da.get("ViewRevolver");Kj.oh=u.m.da.get("HUDReticleRevolver");Kj.Aa=u.m.da.get("HUDItemRevolver");
Kj.Aa.offsetY=-9;gj.We();a=u.u.Sh=new ff;a.H=u.m.ma.get("splatter");a.ia=u.m.da.get("splatter02");a.color=Lj.Kc;a.va=1;a=u.u.Rh=new ff;a.H=u.m.ma.get("image");a.ia=u.m.da.get("bulletPock01");a.color=new R(255,255,255,128);a.va=2;a=new pd;a.name="flashWhite";a.Vc=Ec;a.Qc=Cc;a.ud=Dc;a.va=0;u.m.hb.add(a);a=new pd;a.name="flashRed";a.Vc=Ec;a.Qc=Cc;a.ud=Fc;a.va=0;u.m.hb.add(a);u.u.Zi();u.u.Ji?(a=new aj("devCamera"),W(a,u.Pc),a.create(),u.u.Ba=a):(a=uf[0],b=u.u.ta=new mj("player"),b.Pf=Math.floor(2147483648/
180*90),b.b.y=a.y+.5*b.Hd,b.b.z=a.z,b.b.x=a.x,W(b,u.Ed),b.create());u.u.Hh(0);W(u.bi,u.Pc);u.start()};
u.u.Zi=function(){mh.clear();for(var a=p(oh),b=a.next();!b.done;b=a.next())W(b.value,null);oh.length=0;a=u.u.ed.splice(0);a=p(a);for(b=a.next();!b.done;b=a.next())b.value.remove();ng();cg=Number.POSITIVE_INFINITY;og();Zg();u.u.eh=.5*uf.length;a=p(mh.elements);for(b=a.next();!b.done;b=a.next()){var c=b=b.value;c.pb.cmp=Jc;for(var d=p(c.wd),e=d.next();!e.done;e=d.next()){e=e.value;for(var h=0;h<e.length;h++)e[h]=Qa(c.pb,e[h])}for(d=0;d<c.pb.length;d++)c.pb[d].index=d;d=p(c.wd);for(e=d.next();!e.done;e=
d.next())for(e=e.value,h=0;h<e.length;h++)e[h]=e[h].index;delete c.pb.cmp;b.compile();delete b.wd;c=se[b.ea-1];d=new Ne(b,"worldMesh");d.Z=c.Z;oh.push(d);d.Qf=!0;Infinity!=b.y?(d.y=b.y,W(d,u.pe)):W(d,u.Ed);delete b.y;d.Fa=["portalLightIndex",c.Cf,!0]}oe=[];pe=[[Array(se.length),Array(se.length),Array(se.length)],[Array(se.length),Array(se.length),Array(se.length)]];qe=0;a=p(se);for(b=a.next();!b.done;b=a.next()){b=b.value;b.fb.x/=b.$b;b.fb.y/=b.$b;b.fb.z/=b.$b;b.fb.x/=255;b.fb.y/=255;b.fb.z/=255;
b.Z.Xa.x*=b.fb.x;b.Z.Xa.y*=b.fb.y;b.Z.Xa.z*=b.fb.z;b.Gd||(c=new te,c.uf=b,c.ne=b,c.$b=b.$b,c.og=[Ua(.05,.95,b.fb.x),Ua(.05,.95,b.fb.y),Ua(.05,.95,b.fb.z)],oe.push(c));c=p(b.Oc);for(d=c.next();!d.done;d=c.next())b.$b+=xe(d.value);for(c=0;c<b.Oc.length;c++)d=new te,d.uf=b,d.ne=se[b.Oc[c].Cd.ea],d.Me=b.Oc[c],d.$b=xe(d.Me),d.og=[1,1,1],oe.push(d),d=new te,d.uf=b,d.ne=b,d.Me=b.Oc[c],d.$b=ye(d.Me),d.og=[.625,.625,.625],oe.push(d)}for(a=0;a<u.u.eh;a++)u.u.Gi();if(u.sh.children)for(;;){a=u.sh.children.first().item;
if(!a)break;a.remove()}};u.u.Gi=function(){if(!(u.u.ed.length>=u.u.eh)){var a=kb(uf);a=new F(a.x,a.y+15E4,a.z);if(u.u.ta){var b=Tc(u.u.ta.b,a,new F);b=ke(a,b)?!0:!1}else b=!0;b&&(b=new kj,b.b.x=a.x,b.b.y=a.y,b.b.z=a.z,cd(b.transform,b.b),W(b,u.pe),b.create())}};u.u.sj=function(){if(!(this.ef.length>=u.u.dj)){var a=kb(uf);a=new F(a.x+25E3*(jb(9)-5),a.y+1E5,a.z+25E3*(jb(9)-5));if(u.u.ta){var b=Tc(u.u.ta.b,a,new F);b=ke(a,b)?!0:!1}else b=!0;b&&(a=new ej(a.x,a.y-1E5,a.z),W(a,u.Ed),a.create())}};
u.u.rj=function(){if(!(this.Ze.length>=u.u.cj)){var a=kb(uf);a=new F(a.x+25E3*(jb(9)-5),a.y+1E5,a.z+25E3*(jb(9)-5));if(u.u.ta){var b=Tc(u.u.ta.b,a,new F);b=ke(a,b)?!0:!1}else b=!0;b&&(a=new ij(a.x,a.y-1E5,a.z),W(a,u.Ed),a.create())}};
u.u.step=function(){u.Th&&Kd.p.KeyM&&(u.Audio.jb.gain.value=1-u.Audio.jb.gain.value,window.localStorage.setItem("musicVolume",u.Audio.jb.gain.value));u.u.Ji||0!=u.v%5||(this.Gi(),this.sj(),this.rj());for(var a,b,c=0;4>c;c++){qe=1-qe;a=pe[qe];b=pe[1-qe];for(var d=0;3>d;d++)for(var e=p(oe),h=e.next();!h.done;h=e.next()){h=h.value;var g=h.$b*a[d][h.uf.index];g*=h.og[d];b[d][h.ne.index]+=g/h.ne.$b}d=p(se);for(e=d.next();!e.done;e=d.next())e=e.value,e.Gd?(a[0][e.index]=e.Yc.x,a[1][e.index]=e.Yc.y,a[2][e.index]=
e.Yc.z,b[0][e.index]=e.Yc.x,b[1][e.index]=e.Yc.y,b[2][e.index]=e.Yc.z):(a[0][e.index]=e.Yc.x,a[1][e.index]=e.Yc.y,a[2][e.index]=e.Yc.z)}if(0==u.v%4){a=p(se);for(e=a.next();!e.done;e=a.next())c=e.value,c.Z.Xa.x=b[0][c.index],c.Z.Xa.y=b[1][c.index],c.Z.Xa.z=b[2][c.index],b[0][c.index]=0,b[1][c.index]=0,b[2][c.index]=0;b=p(oe);for(h=b.next();!h.done;h=b.next())a=h.value,a.Me&&(a.$b=a.uf==a.ne?ye(a.Me):xe(a.Me));re()}u.u.Yi()};
u.bi.step=function(){u.Jb.r=0;u.Jb.Ia=0;u.Jb.ba=0;u.Jb.ua=0;u.u.ta&&4>u.v-u.u.ta.mi&&(u.Jb.r+=24,u.Jb.Ia+=24,u.Jb.ba+=24,u.Jb.ua+=24);if(u.u.ta){var a=u.v-u.u.ta.bj;a=1.5-a/6;0>a&&(a=0);1<a&&(a=1);u.Jb.r+=170*a;u.Jb.ua+=170*a}x.bindFramebuffer(x.FRAMEBUFFER,u.Df.object);u.xb(2);x.clear(x.DEPTH_BUFFER_BIT|x.STENCIL_BUFFER_BIT);He();u.eb(u.m.ma.get("physical"));u.oe.Ua=1;gd(u.oe);u.oe.Ua=0;u.H.O("clipY",Infinity,!1);var b=eb.first();for(a=Yd.first();b.item;){if(a.item){if(a.item.Kf<u.v){var c=a.next;
ab(a);a=c;continue}if(0<fb(b.item,a.item)){a=a.next;continue}}c=b.next;ab(b);cb(b,a);b=c}for(;a.item;)b=a.next,a.item.Kf<u.v&&ab(a),a=b;Zd.A=.00390625*u.Ba.N.A;Zd.m31=.00390625*u.Ba.N.m31;Zd.m32=.00390625*u.Ba.N.m32;u.Db(Ve);u.eb(u.m.ma.get("sky"));u.hc(0,u.m.da.get("concr01"));u.H.O("texture1",1,!0);u.hc(1,u.m.da.get("sky01"));u.rb(0);u.xb(1);u.gc(0);a=new U;b=(.5*u.Ba.xf+.5*u.Ba.nf)*Ae.Fb;a.scale(b*u.viewport.ratio,b,1);a.m32=-b/Math.tan(u.Ba.Lc);$c(u.Ba.N,a,a);u.H.O("modelMatrix",a);x.drawArrays(x.TRIANGLE_FAN,
0,4);if(u.pe.children){u.pe.children.sort(nh);kj.Aa=128;for(a=u.pe.children.first();a.item;a=a.next)jd(a.item)&&a.item instanceof kj&&a.item.zi();x.enable(x.STENCIL_TEST);for(a=u.pe.children.first();a.item;a=a.next)jd(a.item)&&(a.item instanceof kj||(x.stencilFunc(x.GEQUAL,128,255),x.stencilOp(x.KEEP,x.KEEP,x.KEEP)),a.item.Qa());x.disable(x.STENCIL_TEST)}u.u.Sh.Qa();u.u.Rh.Qa();u.eb(Hi.H);u.H.O("modelMatrix",Zd);Hi.Y.bind();u.rb(1);u.xb(1);u.gc(1);u.Db(Hi.Ka);u.Fd(Hi.Xc);b=a=0;for(c=Yd.first();c.item;c=
c.next)c.item.Pg==a+b?b+=c.item.Qh:(b&&x.drawElements(x.TRIANGLES,b,x.UNSIGNED_SHORT,2*a),a=c.item.Pg,b=c.item.Qh);b&&x.drawElements(x.TRIANGLES,b,x.UNSIGNED_SHORT,2*a);u.sc.Ua=1;gd(u.sc);u.sc.Ua=0;u.rb(1);u.xb(1);u.gc(0);u.eb(u.m.ma.get("monoEffect"));u.Db(Ve);x.activeTexture(x.TEXTURE0);x.bindTexture(x.TEXTURE_2D,u.m.da.get("shadow").object);u.H.O("enableTexture0",1,!0);u.H.O("color",u.ee.color);u.Ef.Ua=1;gd(u.Ef);u.Ef.Ua=0;u.u.ta&&(u.Ei(u.u.ta.Ac),Ge(u.u.ta.Ac),u.bd.Ua=1,gd(u.bd),u.bd.Ua=0);u.u.ta&&
(a=u.u.ta.Ib,a.Ua=1,a.Qa(),a.Ua=0);u.rb(0);u.xb(0);u.gc(0);x.bindFramebuffer(x.FRAMEBUFFER,null);u.Mb.oc.O("viewMatrix",dd);u.Mb.oc.upload();u.Db(Ve);u.Ff(new fc(u.canvas.width,u.canvas.height));u.eb(u.m.ma.get("imageContrast"));x.activeTexture(x.TEXTURE0);x.bindTexture(x.TEXTURE_2D,u.Df.color.object);u.H.O("texture0",0,!0);u.H.O("enableTexture0",1,!0);u.H.O("modelMatrix",dd);u.H.O("color",Dc);u.H.O("fadeColor",u.Jb);x.drawArrays(x.TRIANGLE_FAN,0,4);u.u.ta&&u.u.Ti()};
u.u.Ti=function(){function a(){z.D=m*C.width/q;z.m11=n*C.height/t;z.A=A/q;z.m31=-v/t;u.H.O("modelMatrix",z)}function b(w,D,G,Q,aa,V,da){u.hc(0,w);var xa=u.canvas.width>>1,ba=u.canvas.height>>1,ya=.5*w.width,ha=.5*w.height;0==k?D-=xa:1==k&&(D+=xa);2==l?G-=ba:3==l&&(G+=ba);0==h?D+=ya:1==h&&(D-=ya);2==g?G+=ha:3==g&&(G-=ha);D=Math.round(D);G=Math.round(G);void 0===Q?x.scissor(0,0,u.canvas.width,u.canvas.height):x.scissor(D+xa-ya+Q,-G+ba-ha+aa,V,da);Q=new U;Q.D=w.width/u.canvas.width*m;Q.m11=-w.height/
u.canvas.height*n;Q.A=2*D/u.canvas.width;Q.m31=-2*G/u.canvas.height;u.H.O("modelMatrix",Q);x.drawArrays(x.TRIANGLE_FAN,0,4)}function c(w){w=u.v-w.Ug;return 60<w?1:1+.25*Math.pow(.9375,w)}var d=u.u.ta.Ib.w;if(u.u.Of){u.u.Mi=new xd;var e=[];d&&(e=e.concat(d.Gg));e=e.concat(u.u.Gc);yd(e);u.u.Of=!1}u.Ff(new fc(u.canvas.width,u.canvas.height));u.Mb.oc.O("viewMatrix",dd);u.Mb.oc.upload();u.xb(0);u.gc(0);var h=0,g=2,k=0,l=2,m=1,n=1;u.rb(2);x.enable(x.SCISSOR_TEST);u.Db(Ve);u.eb(u.m.ma.get("image"));u.H.O("color",
Dc);if(d)if(d instanceof Kj){var r=d.sa;h=0;g=3;k=4;l=5;e=u.m.da.get("HUDMagRevolver");b(e,-134-34*r,123,34*r,0,34,34);g=2;e=u.m.da.get("HUDAmmo2");u.H.O("color",new R(0,0,0,48));b(e,-177,91);u.H.O("color",Dc)}else d instanceof zj?(r=d.sa+d.Za,h=0,g=3,k=4,l=5,e=u.m.da.get("HUDMagCarbine"),b(e,-184,124+13*r,0,13*r,97,13),g=2,e=u.m.da.get("HUDAmmo3"),u.H.O("color",new R(0,0,0,48)),b(e,-184,81),u.H.O("color",Dc)):d instanceof Jj&&(r=d.Za,h=0,g=3,k=4,l=5,e=u.m.da.get("HUDMagShotgun"),b(e,-126-18*r,123,
18*r,0,18,34),g=2,e=u.m.da.get("HUDAmmo2"),u.H.O("color",new R(0,0,0,48)),b(e,-177,91),u.H.O("color",Dc));d&&u.u.ta.Ib.ic&&(u.rb(1),u.eb(u.m.ma.get("monoEffect")),u.u.ta.Pd?u.H.O("color",new R(255,0,0,255)):u.H.O("color",new R(0,128,255,255)),u.H.O("ambientLight",new F(1,1,1)),h=4,g=5,k=4,l=5,(e=d.constructor.oh)&&b(e,0,0),u.rb(2),u.eb(u.m.ma.get("image")),u.H.O("color",Dc));x.disable(x.SCISSOR_TEST);u.Db(u.u.Mi);r=e=0;var q=u.canvas.width>>1,t=u.canvas.height>>1,z=new U;if(d&&d.Gg){d=d.Gg;var A=
d.x;var v=d.y;var C=d.Ii;u.hc(0,C);a();u.H.O("color",d.color);r=d.length;x.drawArrays(x.TRIANGLES,e,r);e+=r}C=u.m.da.get("HUDNumerals24Bold");u.hc(0,C);A=180;v=-134;d=u.v-u.u.Gc.Ug;60>d?(m=n=1.5*(1+.25*Math.pow(.9375,d)),A=0,A-=u.u.Gc.width*C.width*m*.5,v+=30-.5*d,v+=u.u.Gc.height*C.height*n):(m=n=c(u.u.Gc),A-=u.u.Gc.width*C.width*m,v+=u.u.Gc.height*C.height*n);A+=1;v+=2;a();r=u.u.Gc.length;u.H.O("color",Ec);x.drawArrays(x.TRIANGLES,e,r);--A;v-=2;a();u.H.O("color",2>u.v-u.u.Gc.Ug?Dc:Hc);x.drawArrays(x.TRIANGLES,
e,r);e+=r;m=n=1};
u.pi=function(){var a=u.fh=document.createElement("div");a.style.position="absolute";a.style.backgroundColor="rgba(0,0,0,0.8)";a.style.left=0;a.style.top=0;a.style.right=0;a.style.bottom=0;a.style.userSelect="none";sd.appendChild(a);a=document.createElement("div");a.style.position="absolute";a.style.left="50%";a.style.top="50%";u.fh.appendChild(a);var b=document.createElement("button");b.style.position="relative";b.style.left="-50%";b.style.top="-1em";b.style.zIndex=2;b.style.margin="0px";b.style.padding=
"16px";b.style.background="none";b.style.color="white";b.style.fontFamily="'Arial', sans-serif";b.style.fontSize="2em";b.style.fontWeight="bold";b.style.border="0px";b.style.cursor="pointer";b.title="play";b.innerHTML="Play";b.onclick=function(){Y.lj()};a.appendChild(b)};document.addEventListener("pointerlockchange",function(){document.pointerLockElement?(sd.removeChild(u.fh),Kd.clear(),Y.clear(),u.resume()):(sd.appendChild(u.fh),u.pause())});
(function(){var a,b,c,d,e,h,g,k,l,m,n;return Fa(new Ea(new za(function(r){if(1==r.U){console.log("ShootPotato v0.003");a="mk57m52bn";b=(new Date).getTime();c=window.localStorage.getItem("resourceVersion");if(!u.Th&&c==a){d=window.localStorage.getItem("resources");e=new Uint8Array(d.length);for(h=0;h<d.length;h++)e[h]=d.charCodeAt(h);e.position=0;rb(e);u.m.load(e);console.log("Resources loaded from local storage in",(new Date).getTime()-b,"ms.");r.U=0;return}var q=fetch("resources.gob");r.U=3;return{value:q}}if(4!=
r.U)return g=r.Fb,k=Uint8Array,q=g.arrayBuffer(),r.U=4,{value:q};l=new k(r.Fb);m="";for(n=0;n<l.length;n++)m+=String.fromCharCode(l[n]);try{window.localStorage.setItem("resources",m),window.localStorage.setItem("resourceVersion",a)}catch(t){}l.position=0;rb(l);u.m.load(l);console.log("Resources loaded from URL in",(new Date).getTime()-b,"ms.");r.U=0})))})();
