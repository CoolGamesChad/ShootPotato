var f;function ba(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function q(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:ba(a)}}function da(a){if(!(a instanceof Array)){a=q(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
var ha="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ia="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function ja(a,b){if(b){var c=ha;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ia(c,a,{configurable:!0,writable:!0,value:b})}}
ja("Promise",function(a){function b(g){this.La=0;this.Ub=void 0;this.Z=[];var k=this.sb();try{g(k.resolve,k.reject)}catch(l){k.reject(l)}}function c(){this.Z=null}function d(g){return g instanceof b?g:new b(function(k){k(g)})}if(a)return a;c.prototype.La=function(g){if(null==this.Z){this.Z=[];var k=this;this.sb(function(){k.Ub()})}this.Z.push(g)};var e=ha.setTimeout;c.prototype.sb=function(g){e(g,0)};c.prototype.Ub=function(){for(;this.Z&&this.Z.length;){var g=this.Z;this.Z=[];for(var k=0;k<g.length;++k){var l=
g[k];g[k]=null;try{l()}catch(m){this.Kb(m)}}}this.Z=null};c.prototype.Kb=function(g){this.sb(function(){throw g;})};b.prototype.sb=function(){function g(m){return function(n){l||(l=!0,m.call(k,n))}}var k=this,l=!1;return{resolve:g(this.Sg),reject:g(this.Kb)}};b.prototype.Sg=function(g){if(g===this)this.Kb(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.Qh(g);else{a:switch(typeof g){case "object":var k=null!=g;break a;case "function":k=!0;break a;default:k=!1}k?this.Rg(g):
this.Wc(g)}};b.prototype.Rg=function(g){var k=void 0;try{k=g.then}catch(l){this.Kb(l);return}"function"==typeof k?this.Rh(k,g):this.Wc(g)};b.prototype.Kb=function(g){this.ed(2,g)};b.prototype.Wc=function(g){this.ed(1,g)};b.prototype.ed=function(g,k){if(0!=this.La)throw Error("Cannot settle("+g+", "+k+"): Promise already settled in state"+this.La);this.La=g;this.Ub=k;this.tf()};b.prototype.tf=function(){if(null!=this.Z){for(var g=0;g<this.Z.length;++g)h.La(this.Z[g]);this.Z=null}};var h=new c;b.prototype.Qh=
function(g){var k=this.sb();g.Xg(k.resolve,k.reject)};b.prototype.Rh=function(g,k){var l=this.sb();try{g.call(k,l.resolve,l.reject)}catch(m){l.reject(m)}};b.prototype.then=function(g,k){function l(p,v){return"function"==typeof p?function(z){try{m(p(z))}catch(y){n(y)}}:v}var m,n,r=new b(function(p,v){m=p;n=v});this.Xg(l(g,m),l(k,n));return r};b.prototype.catch=function(g){return this.then(void 0,g)};b.prototype.Xg=function(g,k){function l(){switch(m.La){case 1:g(m.Ub);break;case 2:k(m.Ub);break;default:throw Error("Unexpected state: "+
m.La);}}var m=this;null==this.Z?h.La(l):this.Z.push(l)};b.resolve=d;b.reject=function(g){return new b(function(k,l){l(g)})};b.race=function(g){return new b(function(k,l){for(var m=q(g),n=m.next();!n.done;n=m.next())d(n.value).Xg(k,l)})};b.all=function(g){var k=q(g),l=k.next();return l.done?d([]):new b(function(m,n){function r(z){return function(y){p[z]=y;v--;0==v&&m(p)}}var p=[],v=0;do p.push(void 0),v++,d(l.value).Xg(r(p.length-1),n),l=k.next();while(!l.done)})};return b});
function ma(){ma=function(){};ha.Symbol||(ha.Symbol=na)}function ra(a,b){this.Z=a;ia(this,"description",{configurable:!0,writable:!0,value:b})}ra.prototype.toString=function(){return this.Z};var na=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new ra("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function ta(){ma();var a=ha.Symbol.iterator;a||(a=ha.Symbol.iterator=ha.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ia(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ua(ba(this))}});ta=function(){}}function ua(a){ta();a={next:a};a[ha.Symbol.iterator]=function(){return this};return a}function va(){this.Kb=!1;this.La=null;this.Ub=void 0;this.Z=1;this.ed=0;this.sb=null}function wa(a){if(a.Kb)throw new TypeError("Generator is already running");a.Kb=!0}
va.prototype.Wc=function(a){this.Ub=a};function xa(a,b){a.sb={Dk:b,Pk:!0};a.Z=a.ed}va.prototype.return=function(a){this.sb={return:a};this.Z=this.ed};function za(a){this.Z=new va;this.La=a}function Ba(a,b){wa(a.Z);var c=a.Z.La;if(c)return Ca(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.Z.return);a.Z.return(b);return Ea(a)}
function Ca(a,b,c,d){try{var e=b.call(a.Z.La,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.Z.Kb=!1,e;var h=e.value}catch(g){return a.Z.La=null,xa(a.Z,g),Ea(a)}a.Z.La=null;d.call(a.Z,h);return Ea(a)}
function Ea(a){for(;a.Z.Z;)try{var b=a.La(a.Z);if(b)return a.Z.Kb=!1,{value:b.value,done:!1}}catch(c){a.Z.Ub=void 0,xa(a.Z,c)}a.Z.Kb=!1;if(a.Z.sb){b=a.Z.sb;a.Z.sb=null;if(b.Pk)throw b.Dk;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function Ha(a){this.next=function(b){wa(a.Z);a.Z.La?b=Ca(a,a.Z.La.next,b,a.Z.Wc):(a.Z.Wc(b),b=Ea(a));return b};this.throw=function(b){wa(a.Z);a.Z.La?b=Ca(a,a.Z.La["throw"],b,a.Z.Wc):(xa(a.Z,b),b=Ea(a));return b};this.return=function(b){return Ba(a,b)};ta();this[Symbol.iterator]=function(){return this}}
function Ia(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function h(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(h,e)}h(a.next())})}ja("Math.sign",function(a){return a?a:function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1}});
function La(a,b){ta();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}ja("Array.prototype.keys",function(a){return a?a:function(){return La(this,function(b){return b})}});var Ma=document.body;Ma.style.position="relative";Ma.style.left=(window.innerWidth-960>>1)+"px";Ma.style.width="960px";Ma.style.margin="0px";
Ma.style.marginBottom="20px";Ma.style.padding="0px";Ma.style.display="flex";Ma.style.flexFlow="row wrap";Ma.style.alignItems="flex-start";Ma.style.alignContent="flex-start";Ma.style.backgroundColor="#404040";Ma.style.fontFamily="sans-serif";Ma.style.fontSize="12pt";Ma.style.lineHeight="1.4em";Ma.style.color="white";window.onresize=function(){document.body.style.left=(window.innerWidth-960>>1)+"px"};var Na=document.createElement("div");Na.id="paneContainer";Na.style.width="960px";Na.style.height="592px";
Na.style.margin="12px 0";Na.style.outline="10px solid black";Na.style.backgroundColor="black";document.body.appendChild(Na);var Oa=document.createElement("div");Oa.id="divCPanel";document.body.appendChild(Oa);Oa.style.width="960px";Oa.insertAdjacentHTML("beforeend",'\n\t\t<h2 style="color:#ffff00">How to Play:</h2>\n\t\t<b>W,A,S,D</b> and <b>Space</b> - move and jump.<br />\n\t\t<b>[Q,E,C]</b> - select guns.<br />\n\t\t<b>Mouse</b> - aim and shoot.<br />\n\t\t<b>Right Mouse Button</b> - gun special feature.<br />\n\t\t<b>R</b> - reload.<br />\n\t\t<b>Esc</b> - pause the game.<br />\n\t\t\n\t\t<h2 style="color:#ffff00">Options:</h2>\n\t');
var Pa=document.createElement("input");Pa.id="inputCheckbox_lightingFancy";Pa.name="lightingFancy";Pa.title="Enable per-pixel global illumination. Disable this to improve framerate. Default: true";Pa.type="checkbox";var Qa=window.localStorage.getItem("lightingFancy");null===Qa&&(Qa="true");Pa.checked="true"==Qa;Pa.onchange=function(a){t.$b.lightingFancy=a.target.checked;window.localStorage.setItem("lightingFancy",a.target.checked)};Pa.style.marginTop="8px";var Ra=document.createElement("label");
Ra.setAttribute("for",Pa.id);Ra.title="Enable per-pixel global illumination. Disable this to improve framerate. Default: true";Ra.innerHTML="Fancy lighting";Oa.appendChild(Pa);Oa.insertAdjacentHTML("beforeend"," ");Oa.appendChild(Ra);Oa.insertAdjacentHTML("beforeend","<br />");var Sa=document.createElement("input");Sa.id="inputCheckbox_mouseRaw";Sa.name="mouseRaw";Sa.title="Enable unadjusted hardware mouse delta (in compatible browsers). Default: true";Sa.type="checkbox";var Va=window.localStorage.getItem("mouseRaw");
null===Va&&(Va="true");Sa.checked="true"==Va;Sa.onchange=function(a){t.$b.mouseRaw=a.target.checked;window.localStorage.setItem("mouseRaw",a.target.checked)};Sa.style.marginTop="8px";var Xa=document.createElement("label");Xa.setAttribute("for",Sa.id);Xa.title="Enable unadjusted hardware mouse delta (in compatible browsers). Default: true";Xa.innerHTML="Raw mouse input";Oa.appendChild(Sa);Oa.insertAdjacentHTML("beforeend"," ");Oa.appendChild(Xa);Oa.insertAdjacentHTML("beforeend","<br />");var Ya=document.createElement("input");
Ya.id="inputNumber_mouseDPI";Ya.name="mouseDPI";Ya.title="The DPI of your mouse. Default: 800";Ya.type="number";Ya.min=100;Ya.step=100;var $a=window.localStorage.getItem("mouseDPI");null===$a&&($a="800");Ya.value=$a;Ya.onchange=function(a){a.target.checkValidity()&&(t.$b.mouseDPI=parseFloat(a.target.value),window.localStorage.setItem("mouseDPI",a.target.value),t.Bh())};Ya.style.marginTop="8px";Ya.style.width="5em";var ab=document.createElement("label");ab.setAttribute("for",Ya.id);ab.title="The DPI of your mouse. Default: 800";
ab.innerHTML="Mouse DPI:";Oa.appendChild(ab);Oa.insertAdjacentHTML("beforeend"," ");Oa.appendChild(Ya);Oa.insertAdjacentHTML("beforeend","<br />");var bb=document.createElement("input");bb.id="inputNumber_mouseScale";bb.name="mouseScale";bb.title="Inches of mouse movement per 360\u00b0 rotation. Default: 3.5";bb.type="number";bb.min=.125;bb.step=.125;var cb=window.localStorage.getItem("mouseScale");null===cb&&(cb="3.5");bb.value=cb;
bb.onchange=function(a){a.target.checkValidity()&&(t.$b.mouseScale=parseFloat(a.target.value),window.localStorage.setItem("mouseScale",a.target.value),t.Bh())};bb.style.marginTop="8px";bb.style.width="5em";var db=document.createElement("label");db.setAttribute("for",bb.id);db.title="Inches of mouse movement per 360\u00b0 rotation. Default: 3.5";db.innerHTML="Mouse scale:";Oa.appendChild(db);Oa.insertAdjacentHTML("beforeend"," ");Oa.appendChild(bb);Oa.insertAdjacentHTML("beforeend","<br />");
Oa.insertAdjacentHTML("beforeend",'\n\t\t<h2 style="color:#ffff00">About:</h2>\n\t\tThis game is currently in development.<br />\n\t\tPlease let me know of any technical problems\u2014your feedback is essential to identifying those problems.<br />\n\t\tchad.chisholm@protonmail.com\n\t');function fb(a,b){for(var c=0,d=a.length,e=c+(d-c>>1);c<d;){var h=a.cmp.call(null,b,a[e]);if(0>h)d=e,e=c+(d-c>>1);else if(0<h)c=e+1,e=c+(d-c>>1);else break}return e}function gb(a,b){var c=fb(a,b);return a[c]&&0==a.cmp(a[c],b)?a[c]:null}function kb(a,b){var c=fb(a,b);if(a[c]&&0==a.cmp(a[c],b))return a[c];a.splice(c,0,b);return b}function lb(a,b){var c=fb(a,b);a[c]&&0==a.cmp(a[c],b)&&a.splice(c,1)};for(var t={},u,mb=new Uint8Array(256),nb=0;256>nb;nb++)mb[nb]=mb[nb>>>1]+(nb&1);function ob(a,b,c){return a<b?b:a>c?c:a}function pb(a,b,c){return a*(1-c)+b*c}function qb(a,b){return a==b?a:0==a?b:0==b?a:0==(a&1)?0==(b&1)?qb(a>>1,b>>1)<<1:qb(a>>1,b):0==(b&1)?qb(a,b>>1):a>=b?qb(a-b>>1,b):qb(b-a>>1,a)}function rb(a,b,c){var d=b*b-4*a*c;if(0<d){c={};d=Math.sqrt(d);a=2*a;var e=(-b+d)/a;a=(-b-d)/a;a>e?(c.Fa=e,c.rc=a):(c.Fa=a,c.rc=e);return c}return 0==d?(c={},c.Fa=-b/(2*a),c.rc=c.Fa,c):null}
function sb(a){this.cmp=a;this.elements=[]}f=sb.prototype;f.get=function(a){var b=tb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements[b]};f.contains=function(a){var b=tb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?-1:b};f.add=function(a){return this.push(a)};f.push=function(a){var b=tb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return!1;this.elements.splice(b,0,a);return!0};
f.replace=function(a){var b=tb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b]=a,!0;this.elements.splice(b,0,a);return!0};f.Ca=function(a){var b=tb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b];this.elements.splice(b,0,a);return a};f.remove=function(a){var b=tb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements.splice(b,1)[0]};
function tb(a,b){for(var c=0,d=a.elements.length,e=Math.floor(c/2+d/2);c<d;){var h=a.cmp.call(a,b,a.elements[e]);if(0>h)d=e,e=Math.floor(c/2+d/2);else if(0<h)c=e+1,e=Math.floor(c/2+d/2);else break}return e}f.clear=function(){this.elements.length=0};f.ph=function(){return 0==this.elements.length};function ub(){this.start=new vb(null);return this}f=ub.prototype;f.ph=function(){return!this.first().item};f.size=function(){for(var a=0,b=this.first();b.item;b=b.next)a++;return a};f.first=function(){return this.start.next};
f.clear=function(){xb(this.start);return this};function yb(a,b){zb(b,a.start);return a}f.add=function(a){return yb(this,new vb(a))};function Bb(a){for(var b=Cb,c=Gb,d=b.first();d.item;d=d.next)if(0>c.call(null,a.item,d.item)){zb(a,d);return}zb(a,b.start)}f.get=function(a){for(var b=this.first();b.item;b=b.next)if(b.item==a)return b;return null};f.remove=function(a){a=this.get(a);if(null==a)return null;xb(a);return this};
f.sort=function(a){for(var b,c=this.first();c.item;c=b){b=c.next;var d=c;for(var e=d.mb;e.item&&!(0<=a(d.item,e.item));)e=e.mb;d=e;d!=c.mb&&(xb(c),c.mb=d,c.next=d.next,c.mb.next=c,c.next.mb=c)}};function vb(a){this.item=a;this.mb=this;this.next=this;return this}function zb(a,b){a.next=b;a.mb=b.mb;a.next.mb=a;a.mb.next=a}function xb(a){a.mb.next=a.next;a.next.mb=a.mb;a.next=a.mb=a};function Hb(){var a;isNaN(a)&&(a=(new Date).getTime()|0);this.r=a+643709624|0}Hb.prototype.next=function(){this.r^=this.r<<13;this.r^=this.r>>17;this.r^=this.r<<5;this.r>>>=0};function Ib(){var a=w;a.next();return a.r}function E(a){a.next();return a.r/4294967295}var w=new Hb;function Jb(a){return Math.floor(E(w)*a)}function Lb(a){return 1>E(w)*a}function Mb(a){return a[Jb(a.length)]}function Qb(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return Mb(b)};function Rb(a,b,c){for(var d=0,e=a.length,h=d+(e-d>>1);d<e;){var g=c.call(null,b,a[h]);if(0>g)e=h,h=d+(e-d>>1);else if(0<g)d=h+1,h=d+(e-d>>1);else break}return h}function Sb(a,b){var c=a.splice(0);c=q(c);for(var d=c.next();!d.done;d=c.next())d=d.value,a.splice(Rb(a,d,b),0,d)}function Gb(a,b){return isNaN(a)?a.index<b.index?-1:a.index>b.index?1:0:a<b.index?-1:a>b.index?1:0}function Tb(a,b){return"string"==typeof a?a<b.name?-1:a>b.name?1:0:a.name<b.name?-1:a.name>b.name?1:0};function Ub(a){var b=Vb(a);a=a.slice(a.position,a.position+=b);return String.fromCharCode.apply(null,a)}function Wb(a,b){Yb(a,b.length);for(var c=0;c<b.length;c++)a[a.position++]=b.charCodeAt(c)}function Zb(a){var b=bc(a);a=a.slice(a.position,a.position+=b);return String.fromCharCode.apply(null,a)}function cc(a,b){dc(a,b.length);for(var c=0;c<b.length;c++)a[a.position++]=b.charCodeAt(c)}function Vb(a){return a[a.position++]}function Yb(a,b){a[a.position++]=b&255}
function ec(a){var b=0|a[a.position++]<<0;return b|=a[a.position++]<<8}function fc(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}function gc(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;return(b>>>0)-32768}function hc(a,b){b+=32768;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}function bc(a){var b=a[a.position++]<<0;b+=a[a.position++]<<8;b+=a[a.position++]<<16;return b+=a[a.position++]<<24}
function dc(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}function ic(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;b|=a[a.position++]<<16;b|=a[a.position++]<<24;return(b>>>0)-2147483648}function jc(a,b){b+=2147483648;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}
function oc(a){var b=new Uint8Array(4);b[0]=a[a.position++];b[1]=a[a.position++];b[2]=a[a.position++];b[3]=a[a.position++];return(new Float32Array(b.buffer))[0]}function pc(a,b){var c=new Float32Array(1);c[0]=b;c=new Uint8Array(c.buffer);a[a.position++]=c[0];a[a.position++]=c[1];a[a.position++]=c[2];a[a.position++]=c[3]};function qc(){this.size=0;this.root=new tc;this.root.update=function(){};this.Vb=null}qc.prototype.ph=function(){return 0==this.size};qc.prototype.pop=function(){if(this.ph())return null;var a=this.root.Yd.Af(),b=a.value;this.remove(a);return b};
qc.prototype.add=function(a,b){this.Vb=new uc;if(0==this.size)this.root.Yd=this.Vb,this.Vb.parent=this.root;else{var c=this.root;var d=this.size;d=mb[d>>>0&255]+mb[d>>>8&255]+mb[d>>>16&255]+mb[d>>>24];for(var e=0;e<d;e++)c=c.Yd;d=new tc;d.parent=c.parent;c.parent.Yd=d;d.Yh=c;c.parent=d;d.Yd=this.Vb;this.Vb.parent=d}c=this.Vb;c.value=a;c.key=b;c.parent.update();this.size++;return this.Vb};
qc.prototype.remove=function(a){if(a==this.Vb)1==this.size?this.root.Yd=this.Vb=null:vc(this);else{var b=this.Vb.value,c=this.Vb.key;vc(this);a.value=b;a.key=c;a.parent.update()}this.size--};function vc(a){var b=a.Vb.parent,c=b.Yh;a.Vb=c.Vb();c.parent=b.parent;c.parent.Yd=c;c.parent.update()}function tc(){}tc.prototype.Af=function(){return this.first};tc.prototype.Vb=function(){return this.Yd.Vb()};
tc.prototype.update=function(){this.first=this.Yd.Af().key<this.Yh.Af().key?this.Yd.Af():this.Yh.Af();this.parent.update()};function uc(){}uc.prototype.Af=function(){return this};uc.prototype.Vb=function(){return this};Math.Zf=2*Math.PI;function zc(a){return a*Math.PI/180}function Ac(a){return Math.PI/2147483648*a}function Bc(a,b,c,d){return Cc(new K(a.x-c.x,a.y-c.y,a.z-c.z),b,d)}function Cc(a,b,c){return rb(Dc(b,b),2*Dc(a,b),Dc(a,a)-c*c)}function Ec(a,b,c){.7071>a.y&&-.7071<a.y?(b.set(a.z,0,-a.x),Fc(a,b,c).na(1),Fc(c,a,b)):(c.set(0,a.z,-a.y),Fc(c,a,b).na(1),Fc(a,b,c))}
function Gc(a,b){var c;c||(c=new Hc);for(var d=[],e=0;;){for(var h=-1,g=null,k=Number.POSITIVE_INFINITY,l=0;l<b.length;l++)if(!(e&1<<l)){var m=b[l],n=Dc(m,a);n<k&&(h=l,g=m,k=n)}if(0<=k)break;c=c.yi(a,g,k);d.push(g);e|=1<<h;if(!c)break}a.round()}function Hc(){}Hc.prototype.yi=function(a,b,c){a.x-=b.x*c;a.y-=b.y*c;a.z-=b.z*c;return new Ic(b)};function Ic(a){this.n=a}Ic.prototype.yi=function(a,b){b=Fc(this.n,b,new K(0,0,0));if(0==b.na(1))return null;var c=Dc(a,b);a.x=b.x*c;a.y=b.y*c;a.z=b.z*c;return new Jc(b)};
function Jc(a){this.n=a}Jc.prototype.yi=function(a,b,c){b=c/Dc(this.n,b);if(!isFinite(b))return null;a.x-=this.n.x*b;a.y-=this.n.y*b;a.z-=this.n.z*b;return null};function Kc(a,b,c){null==a?(this.a=b*c,this.i=b,this.ratio=c):null==b?(this.a=a,this.i=a/c,this.ratio=c):null==c?(this.a=a,this.i=b,this.ratio=a/b):(this.a=a,this.i=b,this.ratio=c);this.y=this.x=0;a=a>b?a:b;for(this.bufferSize=8;this.bufferSize<a;this.bufferSize*=2);}
function P(a,b,c,d,e){a=Math.round(a);b=Math.round(b);c=Math.round(c);d=Math.round(d);this.g=a;this.c=b;this.B=c;this.w=d;if(!e)return this.fa=c-a,this.$=d-b,this.Cb=this.ta=NaN,this.length=Math.sqrt(this.fa*this.fa+this.$*this.$),a=this.fa,b=this.$,0>a?0>b?-a<-b?(this.type=9,this.ta=-a/b,this.Cb=-b/this.length,a=qb(-a,-b),this.fa/=a,this.$/=a):-a>-b?(this.type=7,this.ta=b/a,this.Cb=-a/this.length,a=qb(-a,-b),this.fa/=a,this.$/=a):(this.type=8,this.ta=this.$=this.fa=-1,this.Cb=Math.SQRT1_2):0<b?-a<
b?(this.type=3,this.ta=-a/b,this.Cb=b/this.length,a=qb(-a,b),this.fa/=a,this.$/=a):-a>b?(this.type=5,this.ta=b/a,this.Cb=-a/this.length,a=qb(-a,b),this.fa/=a,this.$/=a):(this.type=4,this.fa=-1,this.$=1,this.ta=-1,this.Cb=Math.SQRT1_2):(this.type=6,this.fa=-1):0<a?0>b?a<-b?(this.type=11,this.ta=-a/b,this.Cb=-b/this.length,a=qb(a,-b),this.fa/=a,this.$/=a):a>-b?(this.type=13,this.ta=b/a,this.Cb=a/this.length,a=qb(a,-b),this.fa/=a,this.$/=a):(this.type=12,this.fa=1,this.ta=this.$=-1,this.Cb=Math.SQRT1_2):
0<b?a<b?(this.type=1,this.ta=-a/b,this.Cb=b/this.length,a=qb(a,b),this.fa/=a,this.$/=a):a>b?(this.type=15,this.ta=b/a,this.Cb=a/this.length,a=qb(a,b),this.fa/=a,this.$/=a):(this.type=0,this.$=this.fa=1,this.ta=-1,this.Cb=Math.SQRT1_2):(this.type=14,this.fa=1):a<b?(this.type=2,this.$=1):a>b&&(this.type=10,this.$=-1),this}function Qc(a,b){return a.g<b.g?-1:a.g>b.g?1:a.c<b.c?-1:a.c>b.c?1:a.B<b.B?-1:a.B>b.B?1:a.w<b.w?-1:a.w>b.w?1:0}f=P.prototype;
f.replace=function(a){this.remove=!0;if(this.Dd){a=q(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b.Dd){var c=q(this.Dd);for(d=c.next();!d.done;d=c.next())d=d.value,0<=b.Dd.indexOf(d)||(b.Dd.push(d),d.push(b))}else{b.Dd=this.Dd.slice();c=q(b.Dd);for(var d=c.next();!d.done;d=c.next())d.value.push(b)}a=q(this.Dd);for(d=a.next();!d.done;d=a.next())b=d.value,b.splice(b.indexOf(this),1);delete this.Dd}};
function Rc(a,b){var c=a.g+b.fa;b=a.c+b.$;return Math.atan2(Q(a,c,b),a.getParameter(c,b))}function Sc(a,b,c){for(var d={zk:[],code:0},e=0;e<c.length;e++)d.zk.push(Q(c[e],a,b)),1==Tc(c[e],a,b)&&(d.code+=1<<e);return d}
function Uc(a){var b;var c=Number.NEGATIVE_INFINITY;var d=Number.POSITIVE_INFINITY;var e=b=null;var h=a[a.length-1];a=q(a);for(var g=a.next();!g.done;g=a.next()){g=g.value;var k=g.g-g.c;k>c?(c=k,d=g.c,b=h,e=g):k==c&&g.c<d&&(d=g.c,b=h,e=g);h=g}c=b.type&7;d=e.type;return c<d?!0:c>d?!1:b.ta<e.ta?!0:b.ta>e.ta?!1:!0}
function Vc(a,b,c){var d=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,h=null,g=null;c=q(c);for(var k=c.next();!k.done;k=c.next()){k=k.value;var l=Wc(k,a,b);0>l?(l=-l,l<d&&(d=l,h=k)):0<l&&l<e&&(e=l,g=k)}--d;--e;return 0==d||0==e?0:h&&g?d<e?-1:d>e||h.B<g.g?1:-1:g?1:-1}
function Xc(a){var b=a.bound;if(!b){b=new Yc;for(var c=q(a),d=c.next();!d.done;d=c.next()){var e=d.value;b.Ca(e.B,e.w)}}b=b.h+(b.s-b.h>>1);e=c=Number.POSITIVE_INFINITY;a=q(a);for(d=a.next();!d.done;d=a.next())d=d.value,0<d.$?(d=Zc(d,b),d<e&&(e=d)):0>d.$&&(d=Zc(d,b),d<c&&(c=d));return new S(c+(e-c>>1),b)}
function $c(a,b){var c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;b=q(b);for(var e=b.next();!e.done;e=b.next()){var h=e.value,g=Q(a,h.g,h.c),k=Q(a,h.B,h.w);e=a.getParameter(h.g,h.c);h=a.getParameter(h.B,h.w);if(g<k)g/=g-k,e=e*(1-g)+h*g,e<d&&(d=e);else if(g>k)g/=g-k,e=e*(1-g)+h*g,e>c&&(c=e);else if(0>g){if(e>h)return null}else if(0<g&&e<h)return null}return!isFinite(c)||!isFinite(d)||c>=d?null:[c,d]}
function Tc(a,b,c){if(void 0==a.type)return 0;switch(a.type){case 0:case 1:case 3:var d=0;a=(c-a.c)*-a.ta+a.g;b<=a&&(d+=2);b>=a&&(d+=1);return d;case 2:return d=0,b<=a.g&&(d+=2),b>=a.g&&(d+=1),d;case 4:case 5:case 7:return d=0,a=(b-a.g)*a.ta+a.c,c<=a&&(d+=2),c>=a&&(d+=1),d;case 6:return d=0,c<=a.c&&(d+=2),c>=a.c&&(d+=1),d;case 8:case 9:case 11:return d=0,a=(c-a.c)*-a.ta+a.g,b<=a&&(d+=1),b>=a&&(d+=2),d;case 10:return d=0,b<=a.g&&(d+=1),b>=a.g&&(d+=2),d;case 12:case 13:case 15:return d=0,a=(b-a.g)*
a.ta+a.c,c<=a&&(d+=1),c>=a&&(d+=2),d;case 14:return d=0,c<=a.c&&(d+=1),c>=a.c&&(d+=2),d}}
function Q(a,b,c){switch(a.type){case 0:case 1:case 3:b-=a.g;c-=a.c;var d=Math.floor(c/a.$);b-=d*a.fa;c-=d*a.$;return(c*-a.ta-b)*a.Cb;case 2:return a.g-b;case 4:case 5:case 7:return b-=a.g,c-=a.c,d=Math.floor(b/-a.fa),b+=d*a.fa,c+=d*a.$,(b*a.ta-c)*a.Cb;case 6:return a.c-c;case 8:case 9:case 11:return b-=a.g,c-=a.c,d=Math.floor(c/-a.$),b+=d*a.fa,c+=d*a.$,(b-c*-a.ta)*a.Cb;case 10:return b-a.g;case 12:case 13:case 15:return b-=a.g,c-=a.c,d=Math.floor(b/a.fa),b-=d*a.fa,c-=d*a.$,(c-b*a.ta)*a.Cb;case 14:return c-
a.c}return NaN}f.getParameter=function(a,b){var c=this.type,d=this.fa,e=this.$;this.type=(c+12)%16;this.fa=e;this.$=-d;a=Q(this,a,b);this.type=c;this.fa=d;this.$=e;return a};f.evaluate=function(a){a/=this.length;return(new S(this.g+(this.B-this.g)*a,this.c+(this.w-this.c)*a)).round()};f.jb=function(a,b){var c=(this.B-this.g)/this.length,d=(this.w-this.c)/this.length;return(new S(this.g+c*a-d*b,this.c+d*a+c*b)).round()};f.df=function(a,b){return(new S(this.getParameter(a,b),Q(this,a,b))).round()};
function ad(a){return(new S(a.B-a.g,a.w-a.c)).scale(5E4/a.length)}function bd(a,b){return(new S(a.c-a.w,a.B-a.g)).scale(b/a.length)}f.jf=function(a,b){a=this.getParameter(a,b);a/=this.length;return 0>=a?new S(this.g,this.c):1<=a?new S(this.B,this.w):(new S(this.g+(this.B-this.g)*a,this.c+(this.w-this.c)*a)).round()};
function Zc(a,b){var c=0;switch(a.type){case 0:case 1:case 3:if(b<a.c)break;if(b>=a.w)break;c-=a.g;b-=a.c;var d=Math.floor(b/a.$);c-=d*a.fa;b-=d*a.$;return b*-a.ta-c;case 2:if(b<a.c)break;if(b>=a.w)break;return a.g-c;case 4:case 5:if(b<a.c)break;if(b>=a.w)break;c-=a.g;b-=a.c;d=Math.floor(b/a.$);c-=d*a.fa;b-=d*a.$;return b/a.ta-c;case 7:if(b<a.w)break;if(b>=a.c)break;c-=a.g;b-=a.c;d=Math.floor(b/-a.$);c+=d*a.fa;b+=d*a.$;return b/a.ta-c;case 8:case 9:case 11:if(b<a.w)break;if(b>=a.c)break;c-=a.g;b-=
a.c;d=Math.floor(b/-a.$);c+=d*a.fa;b+=d*a.$;return b*-a.ta-c;case 10:if(b<a.w)break;if(b>=a.c)break;return a.g-c;case 12:case 13:if(b<a.w)break;if(b>=a.c)break;c-=a.g;b-=a.c;d=Math.floor(b/-a.$);c+=d*a.fa;b+=d*a.$;return b/a.ta-c;case 15:if(!(b<a.c||b>=a.w))return c-=a.g,b-=a.c,d=Math.floor(b/a.$),c-=d*a.fa,b-=d*a.$,b/a.ta-c}return NaN}
function Wc(a,b,c){switch(a.type){case 0:case 1:case 3:if(c<a.c)break;if(c>=a.w)break;b-=a.g;c-=a.c;var d=Math.floor(c/a.$);b-=d*a.fa;c-=d*a.$;a=c*-a.ta-b;if(0>a)break;return a+1;case 2:if(c<a.c)break;if(c>=a.w)break;a=a.g-b;if(0>a)break;return a+1;case 4:case 5:if(c<a.c)break;if(c>=a.w)break;b-=a.g;c-=a.c;d=Math.floor(c/a.$);b-=d*a.fa;c-=d*a.$;a=c/a.ta-b;if(0>a)break;return a+1;case 7:if(c<a.w)break;if(c>=a.c)break;b-=a.g;c-=a.c;d=Math.floor(c/-a.$);b+=d*a.fa;c+=d*a.$;a=c/a.ta-b;if(0>a)break;return-a-
1;case 8:case 9:case 11:if(c<a.w)break;if(c>=a.c)break;b-=a.g;c-=a.c;d=Math.floor(c/-a.$);b+=d*a.fa;c+=d*a.$;a=c*-a.ta-b;if(0>a)break;return-a-1;case 10:if(c<a.w)break;if(c>=a.c)break;a=a.g-b;if(0>a)break;return-a-1;case 12:case 13:if(c<a.w)break;if(c>=a.c)break;b-=a.g;c-=a.c;d=Math.floor(c/-a.$);b+=d*a.fa;c+=d*a.$;a=c/a.ta-b;if(0>a)break;return-a-1;case 15:if(!(c<a.c||c>=a.w||(b-=a.g,c-=a.c,d=Math.floor(c/a.$),b-=d*a.fa,c-=d*a.$,a=c/a.ta-b,0>a)))return a+1}return NaN}
f.log=function(){console.log(this.g+" "+this.c+" "+this.fa+" "+this.$+" type: "+this.type+" slope: "+this.ta)};f.da=function(){var a=this.Ya(this.g,this.c,this.B,this.w);a.type=this.type;a.ta=this.ta;a.Cb=this.Cb;a.length=this.length;a.fa=this.fa;a.$=this.$;return a};function cd(a){var b=a.Ya(a.B,a.w,a.g,a.c);b.type=(a.type+8)%16;b.ta=a.ta;b.Cb=a.Cb;b.length=a.length;b.fa=-a.fa;b.$=-a.$;return b}f.Ya=function(a,b,c,d){return new P(a,b,c,d)};
function hd(a){if(a.ca)return a.ca;var b=cd(a);b.ca=a;return a.ca=b}function id(a,b){return a.type<b.type?-1:a.type>b.type?1:a.ta<b.ta?-1:a.ta>b.ta?1:0}function jd(a){var b=[];a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(new S(c.g,c.c));return b}function kd(a){var b=[];a.bound&&(b.bound=a.bound);a=q(a);for(var c=a.next();!c.done;c=a.next())b.unshift(hd(c.value));return b}
function T(a,b,c,d){this.set(void 0===a?255:a,void 0===b?255:b,void 0===c?255:c,void 0===d?255:d);return this}function ld(a,b){return a.r<b.r?-1:a.r>b.r?1:a.Ta<b.Ta?-1:a.Ta>b.Ta?1:a.ka<b.ka?-1:a.ka>b.ka?1:a.Ga<b.Ga?-1:a.Ga>b.Ga?1:0}T.prototype.set=function(a,b,c,d){255<a&&(a=255);0>a&&(a=0);255<b&&(b=255);0>b&&(b=0);255<c&&(c=255);0>c&&(c=0);255<d&&(d=255);0>d&&(d=0);this.r=a;this.Ta=b;this.ka=c;this.Ga=d;return this};
T.prototype.scale=function(a){this.r=Math.round(this.r*a);this.Ta=Math.round(this.Ta*a);this.ka=Math.round(this.ka*a);return this};T.prototype.save=function(a){Yb(a,this.r);Yb(a,this.Ta);Yb(a,this.ka);Yb(a,this.Ga);return this};function md(a){return new T(Vb(a),Vb(a),Vb(a),Vb(a))}var nd=new T(0,0,0,0),od=new T(255,255,255,255),pd=new T(0,0,0,255),qd=new T(255,0,0,255);new T(255,255,0,255);new T(0,255,0,255);new T(0,255,255,255);new T(0,0,255,255);new T(255,0,255,255);
function rd(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.Ih=this.Hh=this.pe=this.oe=this.Dc=this.Cc=this.Bb=this.tc=this.bc=this.Ud=this.Td=this.Sd=this.Rd=this.Qd=this.Pd=0;this.za=this.gd=this.hd=this.ia=255;return this}
function sd(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:a.z<b.z?-1:a.z>b.z?1:a.Pd<b.Pd?-1:a.Pd>b.Pd?1:a.Qd<b.Qd?-1:a.Qd>b.Qd?1:a.Rd<b.Rd?-1:a.Rd>b.Rd?1:a.Sd<b.Sd?-1:a.Sd>b.Sd?1:a.Td<b.Td?-1:a.Td>b.Td?1:a.Ud<b.Ud?-1:a.Ud>b.Ud?1:a.bc<b.bc?-1:a.bc>b.bc?1:a.tc<b.tc?-1:a.tc>b.tc?1:a.Bb<b.Bb?-1:a.Bb>b.Bb?1:a.Cc<b.Cc?-1:a.Cc>b.Cc?1:a.Dc<b.Dc?-1:a.Dc>b.Dc?1:a.oe<b.oe?-1:a.oe>b.oe?1:a.pe<b.pe?-1:a.pe>b.pe?1:a.Hh<b.Hh?-1:a.Hh>b.Hh?1:a.Ih<b.Ih?-1:a.Ih>b.Ih?1:a.ia<b.ia?-1:a.ia>b.ia?1:a.hd<b.hd?-1:a.hd>
b.hd?1:a.gd<b.gd?-1:a.gd>b.gd?1:a.za<b.za?-1:a.za>b.za?1:0}function td(a,b,c){var d=1-c,e=new rd(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c);e.Pd=a.Pd*d+b.Pd*c;e.Qd=a.Qd*d+b.Qd*c;e.Rd=a.Rd*d+b.Rd*c;e.Sd=a.Sd*d+b.Sd*c;e.Td=a.Td*d+b.Td*c;e.Ud=a.Ud*d+b.Ud*c;e.bc=a.bc*d+b.bc*c;e.tc=a.tc*d+b.tc*c;e.Bb=a.Bb*d+b.Bb*c;e.Cc=a.Cc*d+b.Cc*c;e.Dc=a.Dc*d+b.Dc*c;e.oe=a.oe*d+b.oe*c;e.pe=a.pe*d+b.pe*c;e.ia=a.ia*d+b.ia*c;e.hd=a.hd*d+b.hd*c;e.gd=a.gd*d+b.gd*c;e.za=a.za*d+b.za*c;return e}
rd.prototype.da=function(){var a=new rd(this.x,this.y,this.z);a.Pd=this.Pd;a.Qd=this.Qd;a.Rd=this.Rd;a.Sd=this.Sd;a.Td=this.Td;a.Ud=this.Ud;a.bc=this.bc;a.tc=this.tc;a.Bb=this.Bb;a.Cc=this.Cc;a.Dc=this.Dc;a.oe=this.oe;a.pe=this.pe;a.ia=this.ia;a.hd=this.hd;a.gd=this.gd;a.za=this.za;return a};function ud(a,b){a.ia=b.r;a.hd=b.Ta;a.gd=b.ka;a.za=b.Ga}function Bd(a,b,c){a.Cc=b;a.Dc=c;return a};function S(a,b){this.x=void 0===a?0:a;this.y=void 0===b?0:b;return this}f=S.prototype;f.set=function(a,b){this.x=a;this.y=b;return this};f.ff=function(){return this.x*this.x+this.y*this.y};f.length=function(){return Math.sqrt(this.ff())};f.na=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.na(1);return this};f.scale=function(a){this.x*=a;this.y*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.sub=function(a){this.x=this.x-a.x;this.y=this.y-a.y;return this};f.da=function(){return new S(this.x,this.y)};f.rd=function(a){a||(a=new Float32Array(2));a[0]=this.x;a[1]=this.y;return a};function Cd(a,b){return a.x*b.x+a.y*b.y}function Dd(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0}f.ni=function(){return 0!=this.x||0!=this.y?!1:!0};function K(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;return this}
function Dc(a,b){return a.x*b.x+a.y*b.y+a.z*b.z}function Fc(a,b,c){c.x=a.y*b.z-a.z*b.y;c.y=b.x*a.z-b.z*a.x;c.z=a.x*b.y-a.y*b.x;return c}function Ed(a,b,c){c.x=a.x-b.x;c.y=a.y-b.y;c.z=a.z-b.z;return c}function Fd(a,b,c){var d=1-c;return new K(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c)}function Gd(a,b){b.x=a.x;b.y=a.y;b.z=a.z}f=K.prototype;f.da=function(){return new K(this.x,this.y,this.z)};f.set=function(a,b,c){this.x=a;this.y=b;this.z=c;return this};
f.ff=function(){return this.x*this.x+this.y*this.y+this.z*this.z};f.length=function(){return Math.sqrt(this.ff())};f.na=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.na(1);return this};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.sub=function(a){return Ed(this,a,this)};f.rd=function(a){a||(a=new Float32Array(3));a[0]=this.x;a[1]=this.y;a[2]=this.z;return a};f.ni=function(){return 0!=this.x||0!=this.y||0!=this.z?!1:!0};function Hd(a,b,c,d){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.a=void 0===d?0:d;return this}Hd.prototype.set=function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.a=d;return this};
Hd.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.a=Math.round(this.a);return this};Hd.prototype.rd=function(a){a||(a=new Float32Array(4));a[0]=this.x;a[1]=this.y;a[2]=this.z;a[3]=this.a;return a};Hd.prototype.ni=function(){return 0!=this.x||0!=this.y||0!=this.z||0!=this.a?!1:!0};function Id(){this.reset();return this}f=Id.prototype;
f.set=function(a){this.I=a.I;this.L=a.L;this.M=a.M;this.J=a.J;this.m11=a.m11;this.m12=a.m12;this.K=a.K;this.m21=a.m21;this.m22=a.m22;return this};f.reset=function(){this.I=1;this.J=this.M=this.L=0;this.m11=1;this.m21=this.K=this.m12=0;this.m22=1;return this};
f.rotate=function(a,b,c){var d=Math.cos(c);c=Math.sin(c);var e=c*this.I+d*this.L,h=d*this.J-c*this.m11,g=c*this.J+d*this.m11,k=d*this.K-c*this.m21,l=c*this.K+d*this.m21;this.I=d*this.I-c*this.L;this.L=e;this.J=h;this.m11=g;this.K=k;this.m21=l;d=Math.cos(b);b=Math.sin(b);c=d*this.M-b*this.L;e=b*this.m12+d*this.m11;h=d*this.m12-b*this.m11;g=b*this.m22+d*this.m21;k=d*this.m22-b*this.m21;this.L=b*this.M+d*this.L;this.M=c;this.m11=e;this.m12=h;this.m21=g;this.m22=k;b=Math.cos(a);a=Math.sin(a);d=a*this.M+
b*this.I;c=b*this.m12-a*this.J;e=a*this.m12+b*this.J;h=b*this.m22-a*this.K;g=a*this.m22+b*this.K;this.M=b*this.M-a*this.I;this.I=d;this.m12=c;this.J=e;this.m22=h;this.K=g;return this};f.Ki=function(a,b){var c=Math.cos(b),d=Math.sin(b);b=1-c;var e=a.x*a.y,h=a.y*a.z,g=a.z*a.x,k=a.x*d,l=a.y*d;d*=a.z;this.I=a.x*a.x*b+c;this.L=e*b+d;this.M=g*b-l;this.J=e*b-d;this.m11=a.y*a.y*b+c;this.m12=h*b+k;this.K=g*b+l;this.m21=h*b-k;this.m22=a.z*a.z*b+c;return this};
f.Gi=function(a,b){a=(new Id).Ki(a,b);Jd(a,this,this);return this};f.scale=function(a,b,c){this.I*=a;this.L*=a;this.M*=a;this.J*=b;this.m11*=b;this.m12*=b;this.K*=c;this.m21*=c;this.m22*=c;return this};
f.mi=function(a){a||(a=this);var b=this.ci();if(0==b)return a;var c=-(this.J*this.m22+this.m12*-this.K),d=this.J*this.m21+this.m11*-this.K,e=-(this.L*this.m22+this.M*-this.m21),h=this.I*this.m22+this.M*-this.K,g=-(this.I*this.m21+this.L*-this.K),k=this.L*this.m12+this.M*-this.m11,l=-(this.I*this.m12+this.M*-this.J),m=this.I*this.m11+this.L*-this.J;b=1/b;a.I=(this.m11*this.m22+this.m12*-this.m21)*b;a.J=c*b;a.K=d*b;a.L=e*b;a.m11=h*b;a.m21=g*b;a.M=k*b;a.m12=l*b;a.m22=m*b;return a};
f.ci=function(){return this.I*(this.m11*this.m22-this.m12*this.m21)+this.L*(this.m12*this.K-this.J*this.m22)+this.M*(this.J*this.m21-this.m11*this.K)};f.rd=function(a){a||(a=new Float32Array(9));a[0]=this.I;a[1]=this.L;a[2]=this.M;a[3]=this.J;a[4]=this.m11;a[5]=this.m12;a[6]=this.K;a[7]=this.m21;a[8]=this.m22;return a};
function Jd(a,b,c){var d=a.L*b.I+a.m11*b.L+a.m21*b.M,e=a.M*b.I+a.m12*b.L+a.m22*b.M,h=a.I*b.J+a.J*b.m11+a.K*b.m12,g=a.L*b.J+a.m11*b.m11+a.m21*b.m12,k=a.M*b.J+a.m12*b.m11+a.m22*b.m12,l=a.I*b.K+a.J*b.m21+a.K*b.m22,m=a.L*b.K+a.m11*b.m21+a.m21*b.m22,n=a.M*b.K+a.m12*b.m21+a.m22*b.m22;c.I=a.I*b.I+a.J*b.L+a.K*b.M;c.J=h;c.K=l;c.L=d;c.m11=g;c.m21=m;c.M=e;c.m12=k;c.m22=n;return c}
f.transform=function(a,b){return b.set(this.I*a.x+this.J*a.y+this.K*a.z,this.L*a.x+this.m11*a.y+this.m21*a.z,this.M*a.x+this.m12*a.y+this.m22*a.z)};f.yf=function(){return new K(this.I,this.L,this.M)};f.zf=function(){return new K(this.J,this.m11,this.m12)};f.ee=function(){return new K(this.K,this.m21,this.m22)};f.Nf=function(a){this.I=a.x;this.L=a.y;this.M=a.z;return this};f.Of=function(a){this.J=a.x;this.m11=a.y;this.m12=a.z;return this};f.Pf=function(a){this.K=a.x;this.m21=a.y;this.m22=a.z;return this};
f.save=function(a){var b=new Uint8Array((new Float32Array([this.I,this.L,this.M,this.J,this.m11,this.m12,this.K,this.m21,this.m22])).buffer);a.set(b,a.position);a.position+=36};f.load=function(a){a=a.slice(a.position,a.position+=36);a=new Float32Array(a.buffer);a=q(a);this.I=a.next().value;this.L=a.next().value;this.M=a.next().value;this.J=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.K=a.next().value;this.m21=a.next().value;this.m22=a.next().value};new Id;
function U(){this.reset();return this}f=U.prototype;f.set=function(a){this.I=a.I;this.L=a.L;this.M=a.M;this.Za=a.Za;this.J=a.J;this.m11=a.m11;this.m12=a.m12;this.m13=a.m13;this.K=a.K;this.m21=a.m21;this.m22=a.m22;this.m23=a.m23;this.H=a.H;this.m31=a.m31;this.m32=a.m32;this.m33=a.m33;return this};f.reset=function(){this.I=1;this.J=this.Za=this.M=this.L=0;this.m11=1;this.m21=this.K=this.m13=this.m12=0;this.m22=1;this.m32=this.m31=this.H=this.m23=0;this.m33=1;return this};
function Kd(a){Id.prototype.reset.call(a)}f.translate=function(a,b,c){this.H+=a;this.m31+=b;this.m32+=c;return this};f.rotate=Id.prototype.rotate;f.Ki=Id.prototype.Ki;f.Gi=Id.prototype.Gi;f.scale=Id.prototype.scale;
f.mi=function(a){function b(D,H,I,M,la,pa,Z,aa,Ab){return D*(la*Ab-pa*aa)+H*(pa*Z-M*Ab)+I*(M*aa-la*Z)}a||(a=this);var c=this.ci();if(0==c)return a;var d=b(this.m11,this.m12,this.m13,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),e=-b(this.J,this.m12,this.m13,this.K,this.m22,this.m23,this.H,this.m32,this.m33),h=b(this.J,this.m11,this.m13,this.K,this.m21,this.m23,this.H,this.m31,this.m33),g=-b(this.J,this.m11,this.m12,this.K,this.m21,this.m22,this.H,this.m31,this.m32),k=-b(this.L,this.M,this.Za,
this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),l=b(this.I,this.M,this.Za,this.K,this.m22,this.m23,this.H,this.m32,this.m33),m=-b(this.I,this.L,this.Za,this.K,this.m21,this.m23,this.H,this.m31,this.m33),n=b(this.I,this.L,this.M,this.K,this.m21,this.m22,this.H,this.m31,this.m32),r=b(this.L,this.M,this.Za,this.m11,this.m12,this.m13,this.m31,this.m32,this.m33),p=-b(this.I,this.M,this.Za,this.J,this.m12,this.m13,this.H,this.m32,this.m33),v=b(this.I,this.L,this.Za,this.J,this.m11,this.m13,this.H,
this.m31,this.m33),z=-b(this.I,this.L,this.M,this.J,this.m11,this.m12,this.H,this.m31,this.m32),y=-b(this.L,this.M,this.Za,this.m11,this.m12,this.m13,this.m21,this.m22,this.m23),x=b(this.I,this.M,this.Za,this.J,this.m12,this.m13,this.K,this.m22,this.m23),C=-b(this.I,this.L,this.Za,this.J,this.m11,this.m13,this.K,this.m21,this.m23),A=b(this.I,this.L,this.M,this.J,this.m11,this.m12,this.K,this.m21,this.m22);c=1/c;a.I=d*c;a.J=e*c;a.K=h*c;a.H=g*c;a.L=k*c;a.m11=l*c;a.m21=m*c;a.m31=n*c;a.M=r*c;a.m12=p*
c;a.m22=v*c;a.m32=z*c;a.Za=y*c;a.m13=x*c;a.m23=C*c;a.m33=A*c;return a};
f.ci=function(){var a=this.I*(this.m11*this.m22*this.m33+this.m12*this.m23*this.m31+this.m13*this.m21*this.m32-(this.m13*this.m22*this.m31+this.m11*this.m23*this.m32+this.m12*this.m21*this.m33));a-=this.L*(this.J*this.m22*this.m33+this.m12*this.m23*this.H+this.m13*this.K*this.m32-(this.m13*this.m22*this.H+this.J*this.m23*this.m32+this.m12*this.K*this.m33));a+=this.M*(this.J*this.m21*this.m33+this.m11*this.m23*this.H+this.m13*this.K*this.m31-(this.m13*this.m21*this.H+this.J*this.m23*this.m31+this.m11*
this.K*this.m33));return a-=this.Za*(this.J*this.m21*this.m32+this.m11*this.m22*this.H+this.m12*this.K*this.m31-(this.m12*this.m21*this.H+this.J*this.m22*this.m31+this.m11*this.K*this.m32))};f.rd=function(a){a||(a=new Float32Array(16));a[0]=this.I;a[1]=this.L;a[2]=this.M;a[3]=this.Za;a[4]=this.J;a[5]=this.m11;a[6]=this.m12;a[7]=this.m13;a[8]=this.K;a[9]=this.m21;a[10]=this.m22;a[11]=this.m23;a[12]=this.H;a[13]=this.m31;a[14]=this.m32;a[15]=this.m33;return a};
function Ld(a,b,c){var d=a.L*b.I+a.m11*b.L+a.m21*b.M+a.m31*b.Za,e=a.M*b.I+a.m12*b.L+a.m22*b.M+a.m32*b.Za,h=a.Za*b.I+a.m13*b.L+a.m23*b.M+a.m33*b.Za,g=a.I*b.J+a.J*b.m11+a.K*b.m12+a.H*b.m13,k=a.L*b.J+a.m11*b.m11+a.m21*b.m12+a.m31*b.m13,l=a.M*b.J+a.m12*b.m11+a.m22*b.m12+a.m32*b.m13,m=a.Za*b.J+a.m13*b.m11+a.m23*b.m12+a.m33*b.m13,n=a.I*b.K+a.J*b.m21+a.K*b.m22+a.H*b.m23,r=a.L*b.K+a.m11*b.m21+a.m21*b.m22+a.m31*b.m23,p=a.M*b.K+a.m12*b.m21+a.m22*b.m22+a.m32*b.m23,v=a.Za*b.K+a.m13*b.m21+a.m23*b.m22+a.m33*b.m23,
z=a.I*b.H+a.J*b.m31+a.K*b.m32+a.H*b.m33,y=a.L*b.H+a.m11*b.m31+a.m21*b.m32+a.m31*b.m33,x=a.M*b.H+a.m12*b.m31+a.m22*b.m32+a.m32*b.m33,C=a.Za*b.H+a.m13*b.m31+a.m23*b.m32+a.m33*b.m33;c.I=a.I*b.I+a.J*b.L+a.K*b.M+a.H*b.Za;c.J=g;c.K=n;c.H=z;c.L=d;c.m11=k;c.m21=r;c.m31=y;c.M=e;c.m12=l;c.m22=p;c.m32=x;c.Za=h;c.m13=m;c.m23=v;c.m33=C}
f.transform=function(a,b){return b.set(this.I*a.x+this.J*a.y+this.K*a.z+this.H*a.a,this.L*a.x+this.m11*a.y+this.m21*a.z+this.m31*a.a,this.M*a.x+this.m12*a.y+this.m22*a.z+this.m32*a.a,this.Za*a.x+this.m13*a.y+this.m23*a.z+this.m33*a.a)};f.jb=function(a,b){return b.set(this.I*a.x+this.J*a.y+this.K*a.z+this.H,this.L*a.x+this.m11*a.y+this.m21*a.z+this.m31,this.M*a.x+this.m12*a.y+this.m22*a.z+this.m32)};
function Md(a,b,c){c.set(a.I*b.x+a.J*b.y+a.K*b.z,a.L*b.x+a.m11*b.y+a.m21*b.z,a.M*b.x+a.m12*b.y+a.m22*b.z)}f.yf=Id.prototype.yf;f.zf=Id.prototype.zf;f.ee=Id.prototype.ee;function Nd(a){return new K(a.H,a.m31,a.m32)}f.Nf=Id.prototype.Nf;f.Of=Id.prototype.Of;f.Pf=Id.prototype.Pf;function Od(a,b){a.H=b.x;a.m31=b.y;a.m32=b.z}
f.save=function(a){var b=new Uint8Array((new Float32Array([this.I,this.L,this.M,this.Za,this.J,this.m11,this.m12,this.m13,this.K,this.m21,this.m22,this.m23,this.H,this.m31,this.m32,this.m33])).buffer);a.set(b,a.position);a.position+=64};
f.load=function(a){a=a.slice(a.position,a.position+=64);a=new Float32Array(a.buffer);a=q(a);this.I=a.next().value;this.L=a.next().value;this.M=a.next().value;this.Za=a.next().value;this.J=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.m13=a.next().value;this.K=a.next().value;this.m21=a.next().value;this.m22=a.next().value;this.m23=a.next().value;this.H=a.next().value;this.m31=a.next().value;this.m32=a.next().value;this.m33=a.next().value};var Pd=new U;
function Yc(){this.l=Number.POSITIVE_INFINITY;this.u=Number.NEGATIVE_INFINITY;this.h=Number.POSITIVE_INFINITY;this.s=Number.NEGATIVE_INFINITY}Yc.prototype.Ca=function(a,b){a<this.l&&(this.l=a);a>this.u&&(this.u=a);b<this.h&&(this.h=b);b>this.s&&(this.s=b);return this};Yc.prototype.Gj=function(a){this.Ca(a.l,a.h);this.Ca(a.u,a.s)};Yc.prototype.da=function(){var a=new Yc;a.l=this.l;a.u=this.u;a.h=this.h;a.s=this.s;return a};
Yc.prototype.ue=function(a,b){return a<=this.l||a>=this.u||b<=this.h||b>=this.s?!1:!0};function Qd(){this.l=Number.POSITIVE_INFINITY;this.u=Number.NEGATIVE_INFINITY;this.h=Number.POSITIVE_INFINITY;this.s=Number.NEGATIVE_INFINITY;this.C=Number.POSITIVE_INFINITY;this.G=Number.NEGATIVE_INFINITY}Qd.prototype.Ca=function(a,b,c){a<this.l&&(this.l=a);a>this.u&&(this.u=a);b<this.h&&(this.h=b);b>this.s&&(this.s=b);c<this.C&&(this.C=c);c>this.G&&(this.G=c);return this};
Qd.prototype.Gj=function(a){this.Ca(a.l,a.h,a.C);this.Ca(a.u,a.s,a.G)};Qd.prototype.da=function(){var a=new Qd;a.l=this.l;a.u=this.u;a.h=this.h;a.s=this.s;a.C=this.C;a.G=this.G;return a};function de(a,b){return a.l>=b.u||a.u<=b.l||a.h>=b.s||a.s<=b.h||a.C>=b.G||a.G<=b.C?!1:!0}Qd.prototype.ue=function(a,b){return a<=this.l||a>=this.u||b<=this.h||b>=this.s||void 0<=this.C||void 0>=this.G?!1:!0};t.Node=function(a){this.name=a;this.children=this.parent=null;this.ck=new vb(this);this.Ha=1;this.ja=t.ja;this.Da=-2147483648;return this};f=t.Node.prototype;f.create=function(){};f.remove=function(){V(this,null)};function ee(a,b){if(0!=b.call(a)&&a.children)for(a=a.children.first();null!=a.item;a=a.next)ee(a.item,b)}f.step=function(){};f.De=function(){};f.Sa=function(){};function fe(a){ee(a,function(){if(!this.Ig())return!1;this.Sa(void 0)})}f.Ig=function(){return!this.Ha||this.ja.Da<t.f?!1:!0};
function V(a,b){if(a.parent)return a.parent=b,t.Ei.push(a),a;if(b)return a.parent=b,ge(a)}function ge(a){xb(a.ck);if(!a.parent)return a;a.parent.children||(a.parent.children=new ub);yb(a.parent.children,a.ck);return a}function he(a,b){a.ja=b;if(a.children)for(a=a.children.first();null!=a.item;a=a.next)he(a.item,b)}
f.log=function(){this.name?console.group(this.constructor.name+": "+this.name):console.group(this.constructor.name);if(this.children)for(var a=this.children.first();null!=a.item;a=a.next)a.item.log();console.groupEnd()};t.ua=function(a){t.Node.call(this,a);this.transform=new U;this.Ea=null;this.O=new U};t.ua.prototype=Object.create(t.Node.prototype);t.ua.prototype.constructor=t.ua;function ie(a,b){var c=a.Qf=new t.Me;c.ja=a.ja;c.Xa=1.75*b;c.Ea=a.O;V(c,t.Gg)}
t.ua.prototype.remove=function(){this.Qf&&this.Qf.remove();t.Node.prototype.remove.call(this)};t.ua.prototype.save=function(a){Wb(a,"NG.Node3D");this.O.save()};t.ua.prototype.step=function(){je(this)};function je(a){a.Ea?Ld(a.Ea,a.transform,a.O):a.O.set(a.transform)}t.ja={Da:NaN,pb:new K(1,1,1)};t.Ei=[];t.Ii=new t.Node("schedule");t.wc=V(new t.Node("scene"),t.Ii);t.inputs=V(new t.Node("inputs"),t.Ii);function ke(){this.vb=new sb(Tb);this.ge=new sb(Tb);this.qa=new sb(Tb);this.S=new sb(Tb);this.ya=new sb(Tb);return this}
ke.prototype.save=function(a){fc(a,this.vb.elements.length);for(var b=0;b<this.vb.elements.length;b++)this.vb.elements[b].save(a);fc(a,this.ge.elements.length);for(b=0;b<this.ge.elements.length;b++)this.ge.elements[b].save(a);fc(a,this.qa.elements.length);for(b=0;b<this.qa.elements.length;b++)this.qa.elements[b].save(a);fc(a,this.S.elements.length);for(b=0;b<this.S.elements.length;b++)this.S.elements[b].save(a);fc(a,this.ya.elements.length);for(b=0;b<this.ya.elements.length;b++)this.ya.elements[b].save(a)};
ke.prototype.load=function(a){var b=ec(a);for(var c=0;c<b;c++){var d=new le;d.load(a);this.vb.replace(d)}b=ec(a);for(c=0;c<b;c++)d=new me,d.load(a),this.ge.replace(d);b=ec(a);if(this.qa.elements.length){for(c=0;c<b;c++)Ub(a),Zb(a),Zb(a);b=q(this.qa.elements);for(c=b.next();!c.done;c=b.next())c.value.create()}else for(c=0;c<b;c++)d=new ne,d.load(a),this.qa.replace(d);this.Ui=b=ec(a);for(c=0;c<b;c++)d=new t.Ld,d.Ej=this,d.load(a),this.S.replace(d);b=ec(a);for(c=0;c<b;c++)d=new t.Audio,d.load(a),this.ya.replace(d);
0==this.Ui&&this.ready&&this.ready.call(this)};t.wl=0;t.$b={difficulty:1,lightingFancy:!0,mouseRaw:!0,mouseDPI:800,mouseScale:3.5};t.Bh=function(){t.Tk=4294967296/(t.$b.mouseDPI*t.$b.mouseScale)};t.Bh();t.Gk=!1;t.lg={};t.lg.overflowX=document.body.style.overflowX;t.lg.overflowY=document.body.style.overflowY;t.lg.userSelect=document.body.style.userSelect;var oe=document.getElementById("paneContainer");oe.style.position="relative";oe.style.flex="0 0 auto";oe.style.zIndex=1;oe.addEventListener("contextmenu",function(a){return a.preventDefault()});
t.canvas=document.createElement("canvas");t.canvas.style.transformOrigin="top left";t.canvas.style.transform="scale(2.0, 2.0)";t.canvas.style.imageRendering="pixelated";t.canvas.style.zIndex=-1;oe.appendChild(t.canvas);u=t.canvas.getContext("webgl2",{alpha:!1,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1,vl:!0});console.log(u.getParameter(u.VENDOR),u.getParameter(u.VERSION));console.log(u.getParameter(u.RENDERER));t.Zb={};t.f=NaN;t.fh=1E3/60;t.Da=-2147483648;
t.Hf=function(){2147483647==t.Da&&(t.Da=-2147483648);t.Da++};t.Wb=new T(0,0,0,0);t.j=new ke;t.D=null;t.Lh=null;t.vj=null;t.ra=null;t.viewport=null;t.Xk=function(){t.canvas.width=480;t.canvas.height=296;t.fg=new Kc(480,296,null);t.Eg.width=480;t.Eg.height=296;t.Eg.create();oe.style.width="960px";oe.style.height="592px"};t.Hg=function(a){u.viewport(a.x,a.y,a.a,a.i);t.viewport=a;t.Zb.Hc.N("viewport",new S(a.a,a.i),!0);t.Zb.Hc.upload()};t.ek=function(a){t.ra=a};t.$a=function(a){t.D!=a&&(t.D=a.bind())};
t.wb=function(a){t.Lh!=a&&(t.Lh=a.bind())};t.me=function(a){a&&t.vj!=a&&(t.vj=a.bind())};t.Qb=function(a,b){u.activeTexture(u.TEXTURE0+a);b?(u.bindTexture(u.TEXTURE_2D,b.object),t.D.N("enableTexture"+a,1,!0)):(u.bindTexture(u.TEXTURE_2D,null),t.D.N("enableTexture"+a,0,!0))};t.qb=function(a){if(t.Aa!=a){switch(a){case 0:u.disable(u.BLEND);break;case 1:u.enable(u.BLEND);u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case 2:u.enable(u.BLEND),u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA)}t.Aa=a}};
t.Gb=function(a){if(t.depth!=a){switch(a){case 0:u.disable(u.DEPTH_TEST);break;case 1:u.enable(u.DEPTH_TEST);u.depthMask(!1);break;case 2:u.enable(u.DEPTH_TEST),u.depthMask(!0)}t.depth=a}};t.Pb=function(a){if(t.facing!=a){switch(a){case 0:u.disable(u.CULL_FACE);break;case 1:u.enable(u.CULL_FACE);u.frontFace(u.CCW);break;case 2:u.enable(u.CULL_FACE),u.frontFace(u.CW)}t.facing=a}};for(var pe=0;4>pe;pe++)u.enableVertexAttribArray(pe);u.clearColor(0,0,0,0);u.depthFunc(u.LEQUAL);
t.start=function(){t.Zb.Hc.create(["u_eyeMatrix","u_viewMatrix","u_cameraPos","u_viewport"]);t.Zb.ak.create([]);t.Nj()};t.xe={};t.xe.time=0;t.xe.ob=0;t.xe.Ij=0;t.xe.Wk=function(a){this.il=a;a>=this.time+1E3&&(this.Ij=this.ob=0,this.time+=1E3);this.ob++};t.$h=!0;
t.loop=function(a){var b=(t.jh-a)/t.fh;if(!(.5<b))if(-.5>b&&(t.jh=a,t.xe.Ij++),t.jh+=t.fh,t.$h){t.xe.Wk(a);if(t.gk){t.gk--;requestAnimationFrame(t.loop);return}t.Bk=a+t.fh;ee(t.Ii,function(){this.step()});a=q(t.Ei);for(b=a.next();!b.done;b=a.next())ge(b.value);t.Ei.length=0;t.f++}else isNaN(t.Vi)&&(t.Vi=a),a-=t.Vi,a=Math.floor(12*a/1E3)+1,14>a?t.th.style.backgroundColor="rgba(0,0,0,"+.8*ob(a/14,0,1)+")":t.uh.style.display="";requestAnimationFrame(t.loop)};t.pause=function(){t.$h=!1};
t.resume=function(){t.$h=!0;t.Vi=NaN;t.uh&&(t.uh.style.display="none",t.uh.style.opacity="75%");isNaN(t.f)&&(t.f=0,requestAnimationFrame(function(a){t.xe.time=a;t.xe.il=a;t.jh=a;t.loop(a)}))};t.Nj=function(){t.resume()};t.Al=function(a,b){for(var c=[],d=Math.floor(640/a);1920>=a*d;d++)c.push([a*d,b*d]);return c};t.Cl=function(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()};
document.addEventListener("fullscreenchange",function(){t.Gk=document.fullscreenElement?!0:!1});function qe(a,b){a=u.createShader(a);u.shaderSource(a,b);u.compileShader(a);if(u.getShaderParameter(a,u.COMPILE_STATUS))return a;console.log(b);console.log(u.getShaderInfoLog(a));u.deleteShader(a)}function ne(){this.name=void 0;this.Ma={};this.Kh={}}f=ne.prototype;
f.create=function(){this.bl=qe(u.VERTEX_SHADER,this.Ti);this.al=qe(u.FRAGMENT_SHADER,this.Si);var a=this.al;var b=this.sl;var c=u.createProgram();u.attachShader(c,this.bl);u.attachShader(c,a);if(b)for(a=0;a<b.length;a++)u.bindAttribLocation(c,a,b[a]);else u.bindAttribLocation(c,0,"a_position"),u.bindAttribLocation(c,1,"a_texture0"),u.bindAttribLocation(c,2,"a_color"),u.bindAttribLocation(c,3,"a_basisZ");u.linkProgram(c);u.getProgramParameter(c,u.LINK_STATUS)?b=c:(console.log(u.getProgramInfoLog(c)),
u.deleteShader(c),b=void 0);this.Kf=b;t.$a(this)};
f.N=function(a,b,c){a="u_"+a;this.Ma.hasOwnProperty(a)||(this.Ma[a]=u.getUniformLocation(this.Kf,a));var d=this.Kh[a];c?d!=b&&(this.Kh[a]=b,u.uniform1i(this.Ma[a],b)):isNaN(b)?b instanceof Float32Array?u.uniform3fv(this.Ma[a],b):b instanceof U?u.uniformMatrix4fv(this.Ma[a],!1,b.rd()):b instanceof T?(this.Kh[a]=b,u.uniform4f(this.Ma[a],b.r/255,b.Ta/255,b.ka/255,b.Ga/255)):b instanceof Hd?u.uniform4f(this.Ma[a],b.x,b.y,b.z,b.a):b instanceof K?u.uniform3f(this.Ma[a],b.x,b.y,b.z):b instanceof S&&u.uniform2f(this.Ma[a],
b.x,b.y):d!=b&&(this.Kh[a]=b,u.uniform1f(this.Ma[a],b))};f.bind=function(){u.useProgram(this.Kf);return this};f.load=function(a){this.name=Ub(a);this.Ti=Zb(a);this.Si=Zb(a);this.create();delete this.Ti;delete this.Si};f.save=function(a){Wb(a,this.name);cc(a,this.Ti);cc(a,this.Si)};function re(){this.usage=this.target=null;this.Fj=u.createBuffer();this.buffer=null}re.prototype.bind=function(){u.bindBuffer(this.target,this.Fj);return this};function se(a,b){a.buffer=new ArrayBuffer(b);u.bufferData(a.target,a.buffer,a.usage)}re.prototype.upload=function(){u.bufferSubData(this.target,0,this.buffer);return this};function te(){re.call(this);this.target=u.ARRAY_BUFFER;this.usage=u.STATIC_DRAW;this.yb=32;t.Lh=null;t.wb(this)}te.prototype=Object.create(re.prototype);
te.prototype.constructor=te;te.prototype.bind=function(){re.prototype.bind.call(this);u.vertexAttribPointer(0,3,u.FLOAT,!1,this.yb,0);u.vertexAttribPointer(1,2,u.FLOAT,!1,this.yb,12);u.vertexAttribPointer(2,4,u.UNSIGNED_BYTE,!0,this.yb,20);u.vertexAttribPointer(3,3,u.SHORT,!0,this.yb,24);return this};te.prototype.upload=function(a){this.write(a);re.prototype.upload.call(this);return this};
function ue(a){var b=t.Lh;b.buffer=new ArrayBuffer(a.length*b.yb);b.write(a);u.bufferData(b.target,b.buffer,b.usage)}
te.prototype.write=function(a,b){b*=this.yb;var c=new Float32Array(this.buffer,b),d=new Int16Array(this.buffer,b);b=new Uint8Array(this.buffer,b);for(var e=0;e<a.length;e++){var h=a[e];var g=c;var k=e*this.yb>>>2;g[k]=h.x;g[k+1]=h.y;g[k+2]=h.z;k=e*this.yb+12>>>2;g[k]=h.Cc;g[k+1]=h.Dc;g=b;k=e*this.yb+20;g[k]=h.ia;g[k+1]=h.hd;g[k+2]=h.gd;g[k+3]=h.za;g=d;k=e*this.yb+24>>>1;g[k]=h.bc;g[k+1]=h.tc;g[k+2]=h.Bb}return this};
function ve(){re.call(this);this.target=u.ELEMENT_ARRAY_BUFFER;this.usage=u.STATIC_DRAW;t.me(this)}ve.prototype=Object.create(re.prototype);ve.prototype.constructor=ve;ve.prototype.upload=function(a){(new Uint16Array(this.buffer)).set(a);return re.prototype.upload.call(this)};function we(){re.call(this);this.target=u.UNIFORM_BUFFER;this.usage=u.DYNAMIC_DRAW;this.Vh=null;this.Gh=this.Wg=0;this.Ma={};re.prototype.bind.call(this)}we.prototype=Object.create(re.prototype);we.prototype.constructor=we;
we.prototype.create=function(a){u.bindBufferBase(this.target,this.Wg,this.Fj);for(var b=0;b<t.j.qa.elements.length;b++){var c=t.j.qa.elements[b];t.$a(c);u.uniformBlockBinding(c.Kf,u.getUniformBlockIndex(c.Kf,this.Vh),this.Wg)}b=u.getUniformIndices(t.D.Kf,a);c=q(b);for(var d=c.next();!d.done;d=c.next())if(d.value==u.INVALID_INDEX)return console.log("uniform not found ",this),this;b=u.getActiveUniforms(t.D.Kf,b,u.UNIFORM_OFFSET);for(c=0;c<a.length;c++)this.Ma[a[c]]=b[c];return this};
we.prototype.N=function(a,b,c){a="u_"+a;b instanceof U?b.rd(new Float32Array(this.buffer,this.Ma[a],16)):b instanceof T||(b instanceof Hd?b.rd(new Float32Array(this.buffer,this.Ma[a],4)):b instanceof K||b instanceof S&&(c?b.rd(new Uint32Array(this.buffer,this.Ma[a],2)):b.rd(new Float32Array(this.buffer,this.Ma[a],2))))};we.prototype.upload=function(){re.prototype.bind.call(this);u.bufferData(this.target,this.buffer.byteLength,this.usage);u.bufferSubData(this.target,0,this.buffer);return this};
var xe,ye=xe=new te;ye.usage=u.STATIC_DRAW;ye.Og=[];var ze,Ae=ze=new ve;Ae.usage=u.STATIC_DRAW;Ae.elements=[];var Ne=t.Zb.Hc=new we;Ne.Vh="Common";Ne.Wg=0;Ne.Gh=160;se(Ne,Ne.Gh);var Oe=t.Zb.ak=new we;Oe.Vh="PortalLights";Oe.Wg=1;Oe.Gh=48;se(Oe,6144);function le(){this.name="defaultMaterial";this.ud=new T(255,255,255,255);this.zc=new T(255,255,255,51);this.Ac=4;this.Bc=1;this.be=new T(0,0,0,0);this.Aa=0;return this}function Qe(a,b){if(a.name<b.name)return-1;if(a.name>b.name)return 1;var c=ld(a.ud,b.ud);if(0!=c)return c;c=ld(a.zc,b.zc);if(0!=c)return c;c=ld(a.be,b.be);return 0!=c?c:a.Ac<b.Ac?-1:a.Ac>b.Ac?1:a.Bc<b.Bc?-1:a.Bc>b.Bc?1:a.Aa<b.Aa?-1:a.Aa>b.Aa?1:0}
le.prototype.da=function(){var a=new le;a.ud=this.ud;a.zc=this.zc;a.Ac=this.Ac;a.Bc=this.Bc;a.be=this.be;a.Aa=this.Aa;return a};le.prototype.bind=function(){t.D.N("color",this.ud);t.D.N("specularColor",this.zc);t.D.N("specularExponent",this.Ac);t.D.N("specularSheen",this.Bc);t.D.N("emissiveColor",this.be)};le.prototype.save=function(a){Wb(a,this.name);this.ud.save(a);this.zc.save(a);fc(a,Math.floor(1024*this.Ac));Yb(a,Math.floor(255*this.Bc));this.be.save(a);Yb(a,this.Aa);return a};
le.prototype.load=function(a){this.name=Ub(a);this.ud=md(a);this.zc=md(a);this.Ac=ec(a)/1024;this.Bc=Vb(a)/255;this.be=md(a);this.Aa=Vb(a)};var Re=t.j,Se=new le;Re.vb.replace(Se);t.Ld=function(){this.oh=u.RGBA8;this.height=this.width=2;this.border=0;this.format=u.RGBA;this.type=u.UNSIGNED_BYTE;this.data=null;this.ye=t.Ld.ye;this.Ff=t.Ld.Ff;this.ej=this.dj=u.CLAMP_TO_EDGE};t.Ld.ye=u.NEAREST;t.Ld.Ff=u.NEAREST;
t.Ld.prototype.create=function(){if(this.Ej){var a=this.Ej;a.Ui--;0<a.Ui||a.ready&&a.ready.call(a)}u.activeTexture(u.TEXTURE0);this.object=u.createTexture();u.bindTexture(u.TEXTURE_2D,this.object);u.texImage2D(u.TEXTURE_2D,0,this.oh,this.width,this.height,this.border,this.format,this.type,this.data);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.ye);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,this.Ff);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,this.dj);u.texParameteri(u.TEXTURE_2D,
u.TEXTURE_WRAP_T,this.ej);9984<=this.ye&&9987>=this.ye&&u.generateMipmap(u.TEXTURE_2D)};
t.Ld.prototype.load=function(a){this.name=Ub(a);this.oh=ec(a);this.width=ec(a);this.height=ec(a);this.border=ec(a);this.format=ec(a);this.type=ec(a);this.ye=ec(a);this.Ff=ec(a);this.dj=ec(a);this.ej=ec(a);this.td=new T(Vb(a),Vb(a),Vb(a),Vb(a));var b=bc(a);a=a.slice(a.position,a.position+=b);a=new Blob([a],{type:"image/png"});this.data=new Image;this.data.parent=this;this.data.onload=function(){this.parent.width=this.width;this.parent.height=this.height;this.parent.create()};this.data.src=URL.createObjectURL(a)};
t.Ld.prototype.save=function(a){Wb(a,this.name);fc(a,this.oh);fc(a,this.width);fc(a,this.height);fc(a,this.border);fc(a,this.format);fc(a,this.type);fc(a,this.ye);fc(a,this.Ff);fc(a,this.dj);fc(a,this.ej);Yb(a,this.td.r);Yb(a,this.td.Ta);Yb(a,this.td.ka);Yb(a,this.td.Ga);dc(a,this.pg.length);a.set(this.pg,a.position);a.position+=this.pg.length};
t.nh=function(a){a.Cj=[];a.Dj=[];for(var b=0,c=0,d=0;d<a.fe.length;d++)b+a.fe[d]+1>a.width&&(b=0,c+=a.ve+1),a.Cj.push(b/a.width),a.Dj.push(c/a.width),b+=a.fe[d]+1,a.fe[d]/=a.width,a.Bf[d]/=a.width,a.Cf[d]/=a.width;a.ve/=a.height;a.Hk=function(e){switch(e){case "0":return 0;case "1":return 1;case "2":return 2;case "3":return 3;case "4":return 4;case "5":return 5;case "6":return 6;case "7":return 7;case "8":return 8;case "9":return 9;case ",":return 10;case "/":return 11;case " ":return 12}return-1}};
t.gh=function(a,b,c){for(var d=[],e=0,h=0;h<b.length;h++){var g=a.Hk(b.charAt(h)),k=a.Cj[g],l=a.Dj[g],m=a.fe[g],n=a.ve;e+=a.Bf[g];c&&(l+=.5);d.push(Bd(new rd(e,0+n,0),k,l));d.push(Bd(new rd(e,0,0),k,l+n));d.push(Bd(new rd(e+m,0,0),k+m,l+n));d.push(Bd(new rd(e+m,0,0),k+m,l+n));d.push(Bd(new rd(e+m,0+n,0),k+m,l));d.push(Bd(new rd(e,0+n,0),k,l));e+=m;e+=a.Cf[g]}d.width=e;d.height=a.ve;d.Oi=a;return d};var Te=new t.Node("mouse");Te.lock=!1;Te.d={};Te.p={};document.addEventListener("mousedown",function(a){document.pointerLockElement&&(a.preventDefault(),a.stopPropagation());Te.p[a.button]=!0;Te.d[a.button]=!0});Te.r={};document.addEventListener("mouseup",function(a){Te.r[a.button]=!0;Te.d[a.button]=!1});Te.a=0;document.addEventListener("wheel",function(a){Te.a=0<a.deltaY?1:-1});Te.b=new S(0,0);Te.mc=new S(0,0);
document.addEventListener("mousemove",function(a){Te.b.set(a.clientX,a.clientY);Te.mc.x+=a.movementX;Te.mc.y+=a.movementY});Te.step=function(){t.Node.prototype.step.call(this);this.mc.set(0,0);var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;this.a=0};
Te.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=q(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1;Te.a=0;Te.b.set(0,0);Te.mc.set(0,0)};V(Te,t.inputs);Te.$k=function(){document.documentElement.requestPointerLock({unadjustedMovement:t.$b.mouseRaw})};
document.addEventListener("pointerlockchange",function(){if(document.pointerLockElement)Te.lock=!0,document.body.style.overflowX="hidden",document.body.style.overflowY="hidden",document.body.style.userSelect="none";else{Te.lock=!1;for(var a=q(Object.getOwnPropertyNames(t.lg)),b=a.next();!b.done;b=a.next())b=b.value,document.body.style[b]=t.lg[b]}});var Ue=new t.Node("keyboard");Ue.d={};Ue.p={};document.addEventListener("keydown",function(a){document.pointerLockElement&&"Tab"==a.code&&(a.preventDefault(),a.stopPropagation());Ue.d[a.code]||(Ue.p[a.code]=!0);Ue.d[a.code]=!0});Ue.r={};document.addEventListener("keyup",function(a){Ue.r[a.code]=!0;Ue.d[a.code]=!1});
Ue.step=function(){t.Node.prototype.step.call(this);var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1};
Ue.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=q(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1};V(Ue,t.inputs);t.Audio=function(){this.buffer=null;return this};t.Audio.Z=new AudioContext;var Ve=t.Audio.Kb=t.Audio.Z.createGain();Ve.gain.value=.5;Ve.connect(t.Audio.Z.destination);var We=t.Audio.tf=t.Audio.Z.createGain(),Xe=window.localStorage.getItem("musicVolume");null!=Xe?We.gain.value=Xe:We.gain.value=0;We.connect(t.Audio.Z.destination);t.Audio.Rg=function(a){t.Audio.Kb.gain.value=a};t.Audio.Sg=function(a){t.Audio.tf.gain.value=a};
t.Audio.prototype.play=function(a){a?(void 0===a.gain&&(a.gain=1),void 0===a.pitch&&(a.pitch=1),void 0===a.yh&&(a.yh=0),void 0===a.delay&&(a.delay=0)):a={gain:1,pitch:1,yh:0,delay:0};var b=t.Audio.Z.createGain();b.gain.value=a.gain;b.connect(t.Audio.Kb);var c=new AudioBufferSourceNode(t.Audio.Z);c.connect(b);a.loop?c.loop=!0:c.onended=function(){b.disconnect(t.Audio.Kb)};c.Z=b;c.playbackRate.value=(1-a.yh+Math.random()*a.yh*2)*a.pitch;c.buffer=this.buffer;void 0===a.time?c.start(t.Audio.Z.currentTime+
a.delay):c.start(a.time+a.delay);return c};t.Audio.prototype.load=function(a){this.name=Ub(a);var b=bc(a);a=a.slice(a.position,a.position+=b);var c=this;t.Audio.Z.decodeAudioData(a.buffer).then(function(d){c.buffer=d})};t.Audio.prototype.save=function(a){Wb(a,this.name);dc(a,this.pg.length);a.set(this.pg,a.position);a.position+=this.pg.length};var Ye,Ze=[],$e=0;function af(a){return Ze[a-$e]}var bf=new sb(Gb),cf=new ub,Cb=new ub,df=new U;df.scale(.99609375,.99609375,.99609375);function ef(a){var b=bf.get(a);if(b)return b;b=new ff(a);bf.push(b);return b}function gf(a){a=hf(a);return new S(a.x-4096<<19,a.y-4096<<19)}function jf(a,b){function c(d){d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;return(d|d<<1)&1431655765}return c(a)<<1|c(b)}
function hf(a){function b(c){c=(c|c>>1)&858993459;c=(c|c>>2)&252645135;c=(c|c>>4)&16711935;return(c|c>>8)&65535}a=new S(a>>>1&1431655765,a>>>0&1431655765);a.x=b(a.x);a.y=b(a.y);return a}
function kf(a,b){isNaN(a)&&(a=0);isNaN(b)&&(b=bf.elements.length-1);if(a==b)return bf.elements[a];for(var c=bf.elements[a].index,d=c^bf.elements[b].index,e=0;d>>=1;)e++;var h=1<<e,g=(2<<e)-1,k=a,l=b+1;for(d=Math.floor(k/2+l/2);k<l;){var m=bf.elements[d].index&g;if(h<m)l=d,d=Math.floor(k/2+l/2);else if(h>m)k=d+1,d=Math.floor(k/2+l/2);else break}c=e&1?new lf(hf(c&~g|h).x):new mf(hf(c&~g|h).y);c.value-=4096;c.value<<=19;c.Qe=kf(a,d-1);c.Re=kf(d,b);return c}function lf(a){this.value=a}
function mf(a){this.value=a}function nf(a,b,c){this.start=a;this.mc=b;this.Xa=c;this.qc=[new of(Ye,0,1)];this.t=0}function of(a,b,c){this.node=a;this.Oa=b;this.Jc=c}nf.prototype.next=function(){for(;this.qc.length;){var a=this.qc.shift();this.t=a.Oa;if(a.node instanceof ff)return a;this.Ee(a)}return null};
nf.prototype.Ee=function(a){var b=a.node;if(b instanceof lf){var c=this.start.z;var d=this.mc.z}else c=this.start.x,d=this.mc.x;if(0<d){var e=new of(b.Re,(b.value-this.Xa-c)/d,a.Jc);e.Oa<=a.Jc&&e.Jc>=a.Oa&&this.qc.unshift(e);c=new of(b.Qe,a.Oa,(b.value+this.Xa-c)/d);c.Oa<=a.Jc&&c.Jc>=a.Oa&&this.qc.unshift(c)}else 0>d?(e=new of(b.Qe,(b.value+this.Xa-c)/d,a.Jc),e.Oa<=a.Jc&&e.Jc>=a.Oa&&this.qc.unshift(e),c=new of(b.Re,a.Oa,(b.value-this.Xa-c)/d),c.Oa<=a.Jc&&c.Jc>=a.Oa&&this.qc.unshift(c)):(c>=b.value-
this.Xa&&this.qc.unshift(new of(b.Re,a.Oa,a.Jc)),c<=b.value+this.Xa&&this.qc.unshift(new of(b.Qe,a.Oa,a.Jc)))};
function pf(a,b,c){c=void 0===c?qf:c;if(!bf.elements.length)return null;for(var d=b.length(),e=new nf(a,b,0),h,g=null,k=1;(h=e.next())&&!(h.t>k);){for(var l=function(r){if(c(r.flags)){var p=r.uf(a,0,0,b);!p||p.t>k||(p.d=p.t*d,-1>p.d||(r.item&&(p.item=r.item),g=p,k=p.t))}},m=q(h.node.pa),n=m.next();!n.done;n=m.next())l(n.value);h=q(h.node.vd);for(n=h.next();!n.done;n=h.next())l(n.value)}return g}
function rf(a,b){var c=void 0===c?qf:c;if(!bf.elements.length)return null;var d=b.length(),e=new nf(a,b,0),h,g=[];for(g.cmp=sf;(h=e.next())&&!(1<h.t);){for(var k=function(r){if(c(r.flags)){var p=r.uf(a,0,0,b);!p||1<p.t||(p.d=p.t*d,-1>p.d||(r.item&&(p.item=r.item),p.Oa=!0,kb(g,p)))}},l=function(r){r=r.qg();if(c(r.flags)){var p=r.uf(a,0,0,b);!p||1<p.t||(p.d=p.t*d,-1>p.d||(r.item&&(p.item=r.item),p.Oa=!1,kb(g,p)))}},m=q(h.node.pa),n=m.next();!n.done;n=m.next())k(n.value);m=q(h.node.vd);for(n=m.next();!n.done;n=
m.next())k(n.value);k=q(h.node.pa);for(n=k.next();!n.done;n=k.next())l(n.value);h=q(h.node.vd);for(n=h.next();!n.done;n=h.next())l(n.value)}return g}
function tf(a,b){var c=void 0===c?qf:c;if(0==bf.elements.length)return null;for(var d=new nf(a,new K(240*b.x,0,240*b.z),0),e,h=null,g=240;(e=d.next())&&!(240*e.t>g);){for(var k=function(n){c(n.flags)&&(!(n=n.Zi(a,b))||n.t>g||(h=n,g=n.t))},l=q(e.node.pa),m=l.next();!m.done;m=l.next())k(m.value);e=q(e.node.vd);for(m=e.next();!m.done;m=e.next())k(m.value)}return h}function uf(a,b){return vf(a.z-b,a.x-b,a.z+b,a.x+b,void 0)}
function vf(a,b,c,d,e){e||(e=[]);for(var h=[Ye];h.length;){var g=h.shift();g instanceof lf?(a<=g.value&&h.push(g.Qe),c>=g.value&&h.push(g.Re)):g instanceof mf?(b<=g.value&&h.push(g.Qe),d>=g.value&&h.push(g.Re)):e.push(g)}return e};var wf,xf,yf,Sf;
function Tf(){wf=!1;xf=[];var a=yf;yf=[[Array(Ze.length),Array(Ze.length),Array(Ze.length)],[Array(Ze.length),Array(Ze.length),Array(Ze.length)]];if(a)for(var b=q(Ze),c=b.next();!c.done;c=b.next()){var d=c.value;c=d.index-$e;d=d.index-a.aa;for(var e=0;2>e;e++)yf[e][0][c]=a[e][0][d],yf[e][1][c]=a[e][1][d],yf[e][2][c]=a[e][2][d]}yf.aa=$e;Sf=0;a=q(Ze);for(c=a.next();!c.done;c=a.next()){b=c.value;b.pd||(c=new Uf,c.tg=b,c.kf=b,c.Sc=b.Sc,c.Ah=[pb(.05,.95,b.zb.x),pb(.05,.95,b.zb.y),pb(.05,.95,b.zb.z)],xf.push(c));
b.Wi=b.Sc;c=q(b.ic);for(d=c.next();!d.done;d=c.next())b.Wi+=Vf(d.value);for(c=0;c<b.ic.length;c++)d=new Uf,d.tg=b,d.kf=af(b.ic[c].Oc.aa),d.gc=b.ic[c],d.Sc=Vf(d.gc),d.Ah=[1,1,1],xf.push(d),d=new Uf,d.tg=b,d.kf=b,d.gc=b.ic[c],d.Sc=Wf(d.gc),d.Ah=[.625,.625,.625],xf.push(d)}}function Uf(){this.kf=this.tg=null;this.Sc=0;this.Ah=null}
function Xf(a,b,c){this.Y=a;this.n=new S(a.c-a.w,a.B-a.g);this.n.x/=a.length;this.n.y/=a.length;this.Tj=this.Y.g*this.n.x+this.Y.c*this.n.y;this.h=b;this.s=c;this.height=c-b}Xf.prototype.rd=function(a){var b=0,c=Yf(this);a[b++]=c.x;a[b++]=c.y;a[b++]=c.z;a[b++]=this.Tj;a[b++]=this.Y.g;a[b++]=this.Y.c;a[b++]=this.Y.B;a[b++]=this.Y.w;a[b++]=this.n.x;a[b++]=this.n.y;a[b++]=this.h;a[b++]=this.s;return a};function Yf(a){return Fd(Zf[a.aa-$f].ja.pb,Zf[a.Oc.aa-$f].ja.pb,.5)}
function ag(a,b){function c(h,g){return Math.acos(ob(Cd(h,g)/Math.sqrt(Cd(h,h)*Cd(g,g)),-1,1))/Math.PI}var d=b.z*a.n.x+b.x*a.n.y-a.Tj;if(0>=d)return 0;var e=c(new S(a.Y.B-b.z,a.Y.w-b.x),new S(a.Y.g-b.z,a.Y.c-b.x));a=c(new S(d,a.s-b.y),new S(d,a.h-b.y));return ob(e*a,0,1)}function Vf(a){return a.Y.length/1E5*((a.s-a.h)/1E5)}function Wf(a){return a.Y.length/1E5*((a.height-(a.s-a.h))/1E5)}
function bg(a,b,c){c.set(0,0,0);for(var d=1,e=q(b.ic),h=e.next();!h.done;h=e.next()){var g=h.value;h=ag(g,a);d-=h;g=Yf(g);c.x+=g.x*h;c.y+=g.y*h;c.z+=g.z*h}0<d&&(a=b.ja.pb,c.x+=a.x*d,c.y+=a.y*d,c.z+=a.z*d)};function cg(a){t.ua.call(this,a);this.zi=new U;this.kd=45*Math.PI/180;this.hf=1E4;this.af=1E9;this.rect=null;this.bh=new U;this.aj=new U}cg.prototype=Object.create(t.ua.prototype);cg.prototype.constructor=cg;cg.Wc=Math.tan(zc(30));cg.Rh=function(a,b,c,d){d.I=2/a.a;d.L=0;d.M=0;d.Za=0;d.J=0;d.m11=2/a.i;d.m12=0;d.m13=0;d.K=0;d.m21=0;d.m22=-2/(c-b);d.m23=0;d.H=0;d.m31=0;d.m32=-(c+b)/(c-b);d.m33=1};cg.Qh=function(a,b,c){c=Math.tan(c)*a;var d=c*t.viewport.ratio;return{n:a,yl:b,t:c,ka:2*-c+c,r:d,Qk:-d}};
cg.Sg=function(a,b,c,d,e,h,g){g.I=2*a/(d-c);g.L=0;g.M=0;g.Za=0;g.J=0;g.m11=2*a/(e-h);g.m12=0;g.m13=0;g.K=(d+c)/(d-c);g.m21=(e+h)/(e-h);g.m22=(b+a)/(a-b);g.m23=-1;g.H=0;g.m31=0;g.m32=2*b*a/(a-b);g.m33=0};cg.ol=function(a,b,c,d,e){var h=b*cg.Wc;c*=cg.Wc;d=Math.tan(d);b=h/d;c/=d;e.I=b/(h*a.ratio);e.L=0;e.M=0;e.Za=0;e.J=0;e.m11=b/h;e.m12=0;e.m13=0;e.K=0;e.m21=0;e.m22=-(c+b)/(c-b);e.m23=-1;e.H=0;e.m31=0;e.m32=-(2*c*b)/(c-b);e.m33=0;return e};cg.prototype.step=function(){t.ua.prototype.step.call(this)};
function dg(a){if(a.rect)cg.Rh(a.rect,a.hf,a.af,a.zi);else{var b=cg.Qh(a.hf,a.af,a.kd);cg.Sg(a.hf,a.af,b.Qk,b.r,b.t,b.ka,a.zi)}a.O.mi(a.bh);Ld(a.zi,a.bh,a.aj);t.Zb.Hc.N("eyeMatrix",a.bh);t.Zb.Hc.N("viewMatrix",a.aj);t.Zb.Hc.N("cameraPos",new Hd(a.O.H,a.O.m31,a.O.m32,a.O.m33));t.Zb.Hc.upload()}
function eg(){function a(d){t.ek(d);dg(d);cg.pk(d);fe(t.wc)}var b=t.A.ra;if(b.hl){var c=new Kc(b.rect.a/2,b.rect.i,null);c.x=t.fg.x;c.y=t.fg.y;t.Hg(c);a(b.kj);c=new Kc(b.rect.a/2,b.rect.i,null);c.x=t.fg.x+c.a;c.y=t.fg.y;t.Hg(c);a(b.jj)}else t.Hg(t.fg),a(b)}
cg.pk=function(a){function b(m,n){function r(y){function x(H){C.Ca(Math.atan2(H.x,-H.z),Math.atan2(H.y,-H.z))}var C=new Yc;C.gc=y;y=[new K(y.Y.w,y.h,y.Y.B),new K(y.Y.c,y.h,y.Y.g),new K(y.Y.c,y.s,y.Y.g),new K(y.Y.w,y.s,y.Y.B)];for(var A=q(y),D=A.next();!D.done;D=A.next())D=D.value,a.bh.jb(D,D);A=y[y.length-1];y=q(y);for(D=y.next();!D.done;D=y.next())D=D.value,0>=D.z&&x(D),2==Math.abs(Math.sign(D.z)-Math.sign(A.z))&&x(Fd(A,D,A.z/(A.z-D.z))),A=D;return C}if((!t.Dl||n!=a.Mb)&&n.ja.Da!=t.f){n.ja.Da=t.f;
n.mk=l++;for(var p=q(n.cells.elements),v=p.next();!v.done;v=p.next())if(v=v.value,v.Pg!=t.f)for(v.Pg<t.f-1&&Bb(v.lk),v.Pg=t.f,v=v.zh.first();null!=v.item;v=v.next)v.item.ja.Da=t.f}n=q(n.ic);for(p=n.next();!p.done;p=n.next())if(p=p.value,!(isNaN(p.index)||p.s<=p.h)){if(m.gc){if(0<=Q(m.gc.Y,p.Y.g,p.Y.c)&&0<=Q(m.gc.Y,p.Y.B,p.Y.w))continue;if(0>=Q(p.Y,m.gc.Y.g,m.gc.Y.c)&&0>=Q(p.Y,m.gc.Y.B,m.gc.Y.w))continue}if(!(0>=Q(p.Y,c.z,c.x))){(v=e[p.index])||(e[p.index]=v=r(p));var z=v.da();z.gc=v.gc;z.l<m.l&&(z.l=
m.l);z.u>m.u&&(z.u=m.u);z.h<m.h&&(z.h=m.h);z.s>m.s&&(z.s=m.s);z.l>=z.u||z.h>=z.s||b(z,af(p.Oc.aa))}}}var c=Nd(a.O),d=pf(c,new K(0,-4294967295,0),fg);if(d){var e={},h=a.kd,g=Math.atan(Math.tan(h)*t.viewport.ratio),k=new Yc;k.l=-g;k.u=g;k.h=-h;k.s=h;var l=0;if(d=af(d.item.aa))a.Mb=d,b(k,a.Mb)}};function me(){this.name=null;this.Zc=[]}me.prototype.save=function(a){Wb(a,this.name);fc(a,Math.ceil(this.Nb/1E3));Yb(a,this.Zc.length);for(var b=q(this.Zc),c=b.next();!c.done;c=b.next())c.value.save(a)};me.prototype.load=function(a){this.name=Ub(a);this.Nb=1E3*ec(a);for(var b=Vb(a),c=0;c<b;c++){var d=new gg;d.load(a);this.Zc.push(d)}};function gg(){this.W=t.j.vb.get("defaultMaterial");this.Ab=[];this.Ib=[];this.nc=[]}
gg.prototype.compile=function(){this.$i=xe.Og.length;xe.Og=xe.Og.concat(this.Ab);for(var a=0;a<this.Ib.length;a++)this.Ib[a]+=this.$i;for(a=0;a<this.nc.length;a++)this.nc[a]+=this.$i;this.jl=ze.elements.length;ze.elements=ze.elements.concat(this.Ib);this.uj=ze.elements.length;ze.elements=ze.elements.concat(this.nc)};gg.prototype.da=function(){var a=new gg;a.Ab=this.Ab;a.Qa=this.Qa;a.Ib=this.Ib;a.xd=this.xd;a.nc=this.nc;a.wd=this.wd;return a};
gg.prototype.save=function(a){Wb(a,this.W.name);fc(a,this.Ab.length);for(var b=q(this.Ab),c=b.next();!c.done;c=b.next())c=c.value,jc(a,c.x),jc(a,c.y),jc(a,c.z);b=q(this.Ab);for(c=b.next();!c.done;c=b.next())c=c.value,hc(a,c.bc),hc(a,c.tc),hc(a,c.Bb);b=q(this.Ab);for(c=b.next();!c.done;c=b.next())c=c.value,pc(a,c.Cc),pc(a,c.Dc);fc(a,this.Ib.length);b=q(this.Ib);for(c=b.next();!c.done;c=b.next())fc(a,c.value);fc(a,this.nc.length);b=q(this.nc);for(c=b.next();!c.done;c=b.next())fc(a,c.value);fc(a,this.Ae);
return a};gg.prototype.load=function(a){this.W=t.j.vb.get(Ub(a));for(var b=ec(a),c=0;c<b;c++){var d=new rd(ic(a),ic(a),ic(a));this.Ab.push(d)}for(c=0;c<b;c++)d=this.Ab[c],d.bc=gc(a),d.tc=gc(a),d.Bb=gc(a);for(c=0;c<b;c++)d=this.Ab[c],d.Cc=oc(a),d.Dc=oc(a);b=ec(a);for(c=0;c<b;c++)this.Ib.push(ec(a));b=ec(a);for(c=0;c<b;c++)this.nc.push(ec(a));this.Ae=ec(a);this.compile()};
function hg(){function a(p,v){return p.y<v.y?-1:p.y>v.y?1:0}function b(p,v){return p.z<v.z?-1:p.z>v.z?1:p.x<v.x?-1:p.x>v.x?1:0}var c=ig,d=[];d.cmp=b;for(var e=q(c),h=e.next();!h.done;h=e.next()){var g=h.value;h=g[g.length-1];g=q(g);for(var k=g.next();!k.done;k=g.next()){k=k.value;if(0==b(h,k)){var l=[];l.cmp=a;l.z=h.z;l.x=h.x;l=kb(d,l);kb(l,h);kb(l,k)}h=k}}c=q(c);for(h=c.next();!h.done;h=c.next())for(e=h.value,k=e.length-1,k=e[k],h=0;h<e.length;h++){g=e[h];if(0==b(k,g))if(l=gb(d,k),k.y<g.y){var m=
fb(l,k),n=fb(l,g);for(m+=1;m<l.length&&!(m>=n);){var r=td(k,g,(l[m].y-k.y)/(g.y-k.y));r.y=l[m].y;e.splice(h++,0,r);m++}}else for(m=fb(l,k),n=fb(l,g),--m;0<=m&&!(m<=n);)r=td(k,g,(l[m].y-k.y)/(g.y-k.y)),r.y=l[m].y,e.splice(h++,0,r),m--;k=h;k=g}}function jg(){gg.call(this);this.yd=[];this.Qa=new te;this.wd=this.xd=null;this.Ae=0}jg.prototype=Object.create(gg.prototype);jg.prototype.constructor=jg;
jg.prototype.compile=function(){this.Ib=[];for(var a=q(this.yd),b=a.next();!b.done;b=a.next()){b=b.value;for(var c=2;c<b.length;c++)this.Ib.push(b[0]),this.Ib.push(b[c-1]),this.Ib.push(b[c])}t.wb(this.Qa);se(this.Qa,this.Ab.length*this.Qa.yb);this.Qa.upload(this.Ab);this.Ib.length?(this.xd||(this.xd=new ve),t.me(this.xd),se(this.xd,2*this.Ib.length),this.xd.upload(this.Ib)):this.xd=null;this.nc.length?(this.wd||(this.wd=new ve),t.me(this.wd),se(this.wd,2*this.nc.length),this.wd.upload(this.nc)):this.wd=
null};function kg(a,b){b||(b=a.name);t.ua.call(this,b);this.src=a}kg.prototype=Object.create(t.ua.prototype);kg.prototype.constructor=kg;kg.prototype.create=function(){this.Zc=[];for(var a=q(this.src.Zc),b=a.next();!b.done;b=a.next())b=b.value,b=b instanceof jg?new lg(b):new mg(b),this.Zc.push(b),this.cf&&(b.cf=this.cf),b.Ea=this.O,V(b,this)};function mg(a,b){t.ua.call(this,b);this.src=a;this.facing=1;this.dl=this.cl=!1}mg.prototype=Object.create(t.ua.prototype);mg.prototype.constructor=mg;
function ng(a){var b=null;a.parent&&(b=a.parent.D);b||(b=a.D);b||(b=a.src.D);b||(b=t.j.qa.get("physical"));return b}function og(a){var b=null;a.parent&&(b=a.parent.W);b||(b=a.W);b||(b=a.src.W);b||(b=t.j.vb.get("defaultMaterial"));return b}function pg(a){var b=null;a.parent&&(b=a.parent.ba);b||(b=a.ba);b||(b=a.src.ba);return b}
mg.prototype.Sa=function(){t.wb(xe);t.$a(ng(this));t.D.N("modelMatrix",this.O);t.Qb(0,pg(this));var a=og(this);a.bind();t.D.N("lightingFancy",t.$b.lightingFancy,!0);this.Vg?t.D.N("architectureLighting",1,!0):t.D.N("architectureLighting",0,!0);t.D.N("ambientLight",this.ja.pb,!1);if(this.Ma)for(var b=0;b<this.Ma.length;b+=3)t.D.N(this.Ma[b],this.Ma[b+1],this.Ma[b+2]);t.qb(a.Aa);t.Gb(a.Aa?1:2);t.Pb(this.facing);this.src.Ib.length?(t.me(ze),u.drawElements(u.TRIANGLES,this.src.Ib.length,u.UNSIGNED_SHORT,
2*this.src.jl)):u.drawArrays(u.TRIANGLES,this.src.$i,this.src.Ab.length);this.src.nc.length&&(this.cl&&this.sj(),this.dl&&this.tj())};
mg.prototype.sj=function(){t.qb(1);t.Gb(1);t.$a(t.j.qa.get("edge"));t.D.N("toonMinDist",Infinity,!1);t.D.N("modelMatrix",this.O);var a=new K(this.O.I,this.O.L,this.O.M),b=new K(this.O.J,this.O.m11,this.O.m12),c=new K(this.O.K,this.O.m21,this.O.m22);a.na(1);b.na(1);c.na(1);var d=new K(t.ra.O.H-this.O.H,t.ra.O.m31-this.O.m31,t.ra.O.m32-this.O.m32);a=Dc(a,d);b=Dc(b,d);c=Dc(c,d);t.D.N("eyeVector",new K(a,b,c));u.drawElements(u.LINES,this.src.nc.length-this.src.Ae,u.UNSIGNED_SHORT,2*this.src.uj+2*this.src.Ae)};
mg.prototype.tj=function(){t.qb(1);t.Gb(1);t.$a(t.j.qa.get("toon"));t.D.N("toonMinDist",Infinity,!1);t.D.N("modelMatrix",this.O);u.drawElements(u.LINES,this.src.Ae,u.UNSIGNED_SHORT,2*this.src.uj)};function lg(a,b){mg.call(this,a,b)}lg.prototype=Object.create(mg.prototype);f=lg.prototype;f.constructor=lg;f.step=function(){mg.prototype.step.call(this)};
f.Sa=function(){t.wb(this.src.Qa);t.$a(ng(this));t.D.N("modelMatrix",this.O);t.Qb(0,pg(this));var a=og(this);a.bind();t.D.N("lightingFancy",t.$b.lightingFancy,!0);this.Vg?t.D.N("architectureLighting",1,!0):t.D.N("architectureLighting",0,!0);t.D.N("ambientLight",this.ja.pb,!1);if(this.Ma)for(var b=0;b<this.Ma.length;b+=3)t.D.N(this.Ma[b],this.Ma[b+1],this.Ma[b+2]);t.qb(a.Aa);t.Gb(a.Aa?1:2);t.Pb(this.facing);this.src.Ib.length?(t.me(this.src.xd),u.drawElements(u.TRIANGLES,this.src.Ib.length,u.UNSIGNED_SHORT,
0)):u.drawArrays(u.TRIANGLES,0,this.src.Ab.length)};
f.sj=function(){t.qb(1);t.Gb(1);t.$a(t.j.qa.get("edge"));t.D.N("toonMinDist",Math.pow(5E5,2),!1);t.D.N("modelMatrix",this.O);var a=new K(this.O.I,this.O.L,this.O.M),b=new K(this.O.J,this.O.m11,this.O.m12),c=new K(this.O.K,this.O.m21,this.O.m22);a.na(1);b.na(1);c.na(1);var d=new K(t.ra.O.H-this.O.H,t.ra.O.m31-this.O.m31,t.ra.O.m32-this.O.m32);a=Dc(a,d);b=Dc(b,d);c=Dc(c,d);t.D.N("eyeVector",new K(a,b,c));a=this.src.nc.length-this.src.Ae;b=2*this.src.Ae;t.me(this.src.wd);u.drawElements(u.LINES,a,u.UNSIGNED_SHORT,
b)};f.tj=function(){t.qb(1);t.Gb(1);t.$a(t.j.qa.get("toon"));t.D.N("toonMinDist",Math.pow(5E5,2),!1);t.D.N("modelMatrix",this.O);var a=this.src.Ae;t.me(this.src.wd);u.drawElements(u.LINES,a,u.UNSIGNED_SHORT,0)};function qg(){this.scale=1;this.Xa=25E3;this.Ec=0;this.cf=!1;this.frame=0;this.ob=1}function rg(a){a.I=t.ra.O.I;a.L=t.ra.O.L;a.M=t.ra.O.M;a.J=t.ra.O.J;a.m11=t.ra.O.m11;a.m12=t.ra.O.m12;a.K=t.ra.O.K;a.m21=t.ra.O.m21;a.m22=t.ra.O.m22;var b=this.scale*this.Xa,c=this.cf?-b:b,d=Math.cos(this.Ec),e=Math.sin(this.Ec),h=new U;h.I=d*c;h.L=e*c;h.J=-e*b;h.m11=d*b;Jd(a,h,a)}
function sg(){0>this.frame||(rg.call(this,this.O),t.wb(tg),t.$a(this.D),t.Qb(0,this.ba),this.W.bind(),t.D.N("ambientLight",this.ja.pb,!1),t.qb(this.W.Aa),t.Gb(this.W.Aa?1:2),t.Pb(0),t.D.N("modelMatrix",this.O),t.D.N("color",this.color),u.drawArrays(u.TRIANGLE_FAN,ug(this.frame,this.ob),4))}
for(var vg=[],wg=0;4>wg;wg++)for(var xg=1<<wg,yg=xg<<wg,zg=1/xg,Ag=0;Ag<yg;Ag++){var Bg=Ag%xg,Cg=Ag/xg|0;Bg*=zg;Cg*=zg;var Dg=void 0;Dg=new rd(-1,-1,0);Bd(Dg,Bg,Cg);Dg.Bb=32767;vg.push(Dg);Dg=new rd(1,-1,0);Bd(Dg,Bg+zg,Cg);Dg.Bb=32767;vg.push(Dg);Dg=new rd(1,1,0);Bd(Dg,Bg+zg,Cg+zg);Dg.Bb=32767;vg.push(Dg);Dg=new rd(-1,1,0);Bd(Dg,Bg,Cg+zg);Dg.Bb=32767;vg.push(Dg)}var tg=new te;se(tg,vg.length*tg.yb);tg.upload(vg);
function Eg(a,b){for(var c=0;b>Math.pow(1<<c,2);)c++;var d=1<<c;b=1/d;c=a%d*b;a=(a/d|0)*b;return[c,a,c+b,a+b]}function ug(a,b){switch(b){default:return 4*a;case 4:return 4+4*a;case 16:return 20+4*a;case 64:return 84+4*a}};function Fg(){this.color=this.ba=this.D=null;this.Aa=NaN;this.Zd=[];this.qc=[];this.qc.cmp=Hg;this.Sk=64}Fg.prototype.clear=function(){this.Zd.length=0;this.qc.length=0};Fg.prototype.Sa=function(){t.$a(this.D);t.D.N("modelMatrix",df);t.Qb(0,this.ba);t.D.N("color",this.color);t.qb(this.Aa);t.Gb(1);t.Pb(0);for(var a=q(this.qc),b=a.next();!b.done;b=a.next())b.value.Sa()};
function Ig(a,b,c,d,e,h,g){function k(y,x){if(qf(x)&&af(x.aa)){var C=[];if(x instanceof Jg){if(x.s<b.y-z||x.h>b.y+z)return;var A=Q(x.U,b.z,b.x);if(A<-z||A>z)return;A=x.U.getParameter(b.z,b.x);if(A<-z||A>x.U.length+z||.707107>Dc(new K((x.U.B-x.U.g)/x.U.length,0,(x.U.c-x.U.w)/x.U.length),c))return;C.push(new K(x.U.w,x.h,x.U.B),new K(x.U.c,x.h,x.U.g),new K(x.U.c,x.s,x.U.g),new K(x.U.w,x.s,x.U.B))}else{if(x.y<b.y-z||x.y>b.y+z)return;var D=q(x.ga);for(A=D.next();!A.done;A=D.next())if(Q(A.value,b.z,b.x)<
-z)return;if(x instanceof Kg){if(.707107>c.y)return}else if(-.707107<c.y)return;D=q(x.ga);for(A=D.next();!A.done;A=D.next())A=A.value,C.push(new K(A.w,x.y,A.B));x instanceof Lg&&C.reverse()}(function(){function H(aa,Ab){var eb=[],Xb=aa[aa.length-1],rc=Ab(Xb);aa=q(aa);for(var Kb=aa.next();!Kb.done;Kb=aa.next()){Kb=Kb.value;var sc=Ab(Kb);2==Math.abs(Math.sign(sc)-Math.sign(rc))&&eb.push(Fd(Xb,Kb,rc/(rc-sc)));0<=sc&&eb.push(Kb);rc=sc;Xb=Kb}return 3>eb.length?null:eb}for(var I=q(C),M=I.next();!M.done;M=
I.next())M=M.value,p.jb(M,M);I=q([function(aa){return 1-aa.x},function(aa){return 1+aa.x},function(aa){return 1-aa.y},function(aa){return 1+aa.y},function(aa){return 1-aa.z},function(aa){return 1+aa.z}]);for(M=I.next();!M.done;M=I.next())if(C=H(C,M.value),!C)return;for(I=0;I<C.length;I++){M=C[I];var la=.5*M.x+.5,pa=.5*M.y+.5;r.jb(M,M);var Z=new rd;Z.x=M.x;Z.y=M.y;Z.z=M.z;Z.Cc=v[0]*(1-la)+v[2]*la;Z.Dc=v[1]*(1-pa)+v[3]*pa;C[I]=Z}I=[];I.aa=x.aa;I.cellIndex=y.index;I=kb(l,I);for(M=2;M<C.length;M++)I.push(C[0]),
I.push(C[M-1]),I.push(C[M])})()}}a.Zd.length==a.Sk&&a.Zd.shift().remove();var l=[];l.cmp=Hg;var m=new K,n=new K;Ec(c,m,n);var r=new U;r.I=m.x;r.J=n.x;r.K=c.x;r.H=b.x;r.L=m.y;r.m11=n.y;r.m21=c.y;r.m31=b.y;r.M=m.z;r.m12=n.z;r.m22=c.z;r.m32=b.z;m=new U;n=Math.cos(d)*e;d=Math.sin(d)*e;m.I=n;m.J=-d;m.L=d;m.m11=n;m.m22=e;Ld(r,m,r);var p=r.mi(new U),v=Eg(h,g),z=1.733*e;e=uf(b,z);e=q(e);for(h=e.next();!h.done;h=e.next())for(h=h.value,g=q(h.pa),d=g.next();!d.done;d=g.next())k(h,d.value);e=new Mg;h=q(l);for(g=
h.next();!g.done;g=h.next())g=g.value,d=gb(a.qc,g),d||(d=new Ng(a),d.aa=g.aa,d.cellIndex=g.cellIndex,d.ja=af(d.aa).ja,d.create(),kb(a.qc,d)),Og(d,g),e.bk.push({node:d,Fc:g.length});a.Zd.push(e)}function Ng(a){this.yk=a;this.cellIndex=this.aa=NaN;this.ja=null;this.Fc=this.Jd=0}function Hg(a,b){return a.aa<b.aa?-1:a.aa>b.aa?1:a.cellIndex<b.cellIndex?-1:a.cellIndex>b.cellIndex?1:0}Ng.prototype.create=function(){this.Qa=new te;this.Qa.usage=u.DYNAMIC_DRAW;se(this.Qa,48*this.Qa.yb)};
function Pg(a,b){var c=a.Fc+b;if(0>=c)lb(a.yk.qc,a);else{c*=a.Qa.yb;if((a.Jd+a.Fc+b)*a.Qa.yb>a.Qa.buffer.byteLength)b=new ArrayBuffer(c<<1);else if(48<=a.Jd)b=a.Qa.buffer;else return;c=new Uint8Array(a.Qa.buffer,a.Jd*a.Qa.yb,a.Fc*a.Qa.yb);(new Uint8Array(b)).set(c);a.Qa.buffer=b;a.Qa.bind();u.bufferData(a.Qa.target,a.Qa.buffer,a.Qa.usage);a.Jd=0}}
function Og(a,b){Pg(a,b.length);a.Qa.bind();a.Qa.write(b,a.Jd+a.Fc);u.bufferSubData(a.Qa.target,(a.Jd+a.Fc)*a.Qa.yb,new Uint8Array(a.Qa.buffer,(a.Jd+a.Fc)*a.Qa.yb,b.length*a.Qa.yb));a.Fc+=b.length}Ng.prototype.Sa=function(){if(this.ja.Da<t.f)return!1;t.wb(this.Qa);t.D.N("ambientLight",this.ja.pb);u.drawArrays(u.TRIANGLES,this.Jd,this.Fc)};function Mg(){this.bk=[]}Mg.prototype.remove=function(){for(var a=q(this.bk),b=a.next();!b.done;b=a.next())b=b.value,b.node.Jd+=b.Fc,b.node.Fc-=b.Fc,Pg(b.node,0)};var Qg={},Rg,Sg,Tg,Ug,Vg,Wg,X,Xg,Yg,Zg,$g,ah,bh,ch=new T(192,192,192,255),dh=new T(64,64,64,255),eh=new T(160,160,160,255),fh=new T(160,160,160,255),gh=new T(144,144,144,255),hh,ih=hh=new le;hh.name="concrete";hh.zc=new T(255,255,255,3.984375);hh.Ac=4;hh.Bc=1;hh.Aa=0;var jh=hh=new le;hh.name="paint";hh.zc=new T(255,255,255,31.875);hh.Ac=128;hh.Bc=1;hh.Aa=0;var kh=hh=new le;hh.name="plaster";hh.zc=new T(255,255,255,15.9375);hh.Ac=32;hh.Bc=1;hh.Aa=0;var lh=hh=new le;hh.name="metal";
hh.zc=new T(255,255,255,95.625);hh.Ac=64;hh.Bc=1;hh.Aa=0;var mh=hh=new le;hh.name="glass";hh.zc=new T(255,255,255,63.75);hh.Ac=256;hh.Bc=1;hh.Aa=1;
function nh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new oh(c,c+h);b.push(g);c+=h;return g}}this.floor.ba=t.j.S.get("concr01");this.floor.W=ih;this.floor.color=ch;this.oa.ba=t.j.S.get("concr01");this.oa.W=ih;this.oa.color=fh;var b=[],c=this.Ie,d=this.s,e;if(e=a(25E3))e.X.ba=t.j.S.get("brick01"),e.X.W=jh,e.X.color=dh;if(e=a(this.ab))e.X.ba=t.j.S.get("brick01"),e.X.W=jh,e.X.color=this.color;if(e=a(0))e.X.ba=t.j.S.get("brick01"),e.X.W=ih,e.X.color=eh;return b}
function ph(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new oh(c,c+h);b.push(g);c+=h;return g}}this.floor.ba=t.j.S.get("concr01");this.floor.W=ih;this.floor.color=ch;this.oa.ba=t.j.S.get("concr01");this.oa.W=ih;this.oa.color=fh;var b=[],c=this.Ie,d=this.s,e;if(e=a(25E3))e.X.ba=t.j.S.get("brick01"),e.X.W=jh,e.X.color=dh;if(e=a(this.ab))e.X.ba=t.j.S.get("brick01"),e.X.W=jh,e.X.color=this.color;if(e=a(-25E3))e.X.ba=t.j.S.get("brick01"),e.X.W=ih,e.X.color=eh;if(e=a(0))e.X.ba=
t.j.S.get("concr01"),e.X.W=ih,e.X.color=gh;return b}
function qh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new oh(c,c+h);b.push(g);c+=h;return g}}this.floor.ba=t.j.S.get("concr01");this.floor.W=ih;this.floor.color=ch;this.oa.ba=t.j.S.get("concr01");this.oa.W=ih;this.oa.color=fh;var b=[],c=this.Ie,d=this.s,e;if(e=a(25E3))e.X.ba=t.j.S.get("metal01"),e.X.W=lh,e.X.color=dh;if(e=a(this.ab))e.X.ba=t.j.S.get("metal01"),e.X.W=jh,e.X.color=this.color;if(e=a(0))e.X.ba=t.j.S.get("metal01"),e.X.W=lh,e.X.color=eh;return b}
function rh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new oh(c,c+h);b.push(g);c+=h;return g}}this.floor.ba=t.j.S.get("concr01");this.floor.W=ih;this.floor.color=ch;this.oa.ba=t.j.S.get("concr01");this.oa.W=ih;this.oa.color=fh;var b=[],c=this.Ie,d=this.s,e;if(e=a(25E3))e.X.ba=t.j.S.get("metal01"),e.X.W=lh,e.X.color=dh;if(e=a(this.ab))e.X.ba=t.j.S.get("metal01"),e.X.W=jh,e.X.color=this.color;if(e=a(-25E3))e.X.ba=t.j.S.get("metal01"),e.X.W=lh,e.X.color=eh;if(e=a(0))e.X.ba=
t.j.S.get("concr01"),e.X.W=ih,e.X.color=gh;return b}
function sh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new oh(c,c+h);b.push(g);c+=h;return g}}this.floor.ba=t.j.S.get("concr01");this.floor.W=ih;this.floor.color=ch;this.oa.ba=t.j.S.get("concr01");this.oa.W=ih;this.oa.color=fh;var b=[],c=this.Ie,d=this.s,e;if(e=a(25E3))e.X.ba=t.j.S.get("plaster01"),e.X.W=jh,e.X.color=dh;if(e=a(this.ab))e.X.ba=t.j.S.get("plaster01"),e.X.W=kh,e.X.color=this.color;if(e=a(0))e.X.ba=t.j.S.get("plaster01"),e.X.W=kh,e.X.color=new T(248,248,
248,255);return b}var th=new Hb;function uh(a){return Math.floor(E(th)*a)}function vh(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return b[uh(b.length)]}function wh(a){for(var b=0;b<a.length;b++){var c=uh(a.length-b),d=a[b];a[b]=a[c];a[c]=d}}function xh(){for(var a=[],b=q(Zf),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next())a=a.concat(d.value)}return a}
function yh(){for(var a=[],b=q(Zf),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;for(var e=q(d.tb),h=e.next();!h.done;h=e.next())h=h.value,h.ma==d&&a.push(h)}}return a}function zh(a,b,c){var d=[];a=q(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.translate(b,c));return d}function Ah(a,b){var c=[];a=q(a);for(var d=a.next();!d.done;d=a.next())c.push(d.value.pf(b));return c}
function Bh(a,b,c){a:{switch((4-c)%4){case 0:a=new S(a,b);break a;case 1:a=new S(-b,a);break a;case 2:a=new S(-a,-b);break a;case 3:a=new S(b,-a);break a}a=void 0}return a}function Ch(a,b,c){var d=[];a=q(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.expand(b,c));return d}function Dh(a,b){var c=[];a=q(a);for(var d=a.next();!d.done;d=a.next())c.push(Eh(d.value,b));return c}
function Fh(a,b){b=q(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=a.length,e=0;e<d;e++)a[e].Tf(c,a)&&(a.splice(e--,1),d--)}return a}function Gh(a,b){for(var c=new Hh,d=q(a),e=d.next();!e.done;e=d.next())Ih(c,e.value);d=q(b);for(e=d.next();!e.done;e=d.next())Ih(c,e.value);c=[c];Fh(c,b);return Fh(a.slice(),c)}function Jh(a,b){b=void 0===b?0:b;for(var c=new Hh,d=q(a),e=d.next();!e.done;e=d.next())Ih(c,e.value);b=[c.expand(b,b)];Fh(b,a);return b}
function Kh(a){var b=[];b.cmp=function(h,g){return h.l<g.l?-1:h.l>g.l?1:h.C<g.C?-1:h.C>g.C?1:0};a=q(a);for(var c=a.next();!c.done;c=a.next())kb(b,c.value);for(a=0;a<b.length;a++){c=b[a];var d=fb(b,{l:c.u,C:c.C}),e=b[d];e&&e.l==c.u&&e.C==c.C&&e.G==c.G&&(b.splice(d,1),b[a--]=c.da(c.C,c.G,c.l,e.u))}return b}function Lh(a,b,c){var d=Infinity;c=q(c);for(var e=c.next();!e.done;e=c.next())if(e=e.value,!(e.l>=b||e.u<=b||e.G<=a||e.C>=d)){if(e.C<a){d=a;break}d=e.C}return d}
function Mh(a){for(var b=[],c=q(a),d=c.next();!d.done;d=c.next())Nh(d.value,b);Fh(b,a);return b}function Oh(a){a.bound=new Yc;for(var b=0;b<a.length;b++){var c=a[b].Se();a.bound.Ca(c.B,c.w);a[b]=c}}
function Ph(a){var b=[];b.cmp=function(m,n){return m.x<n.x?-1:m.x>n.x?1:m.y<n.y?-1:m.y>n.y?1:m.type<n.type?-1:m.type>n.type?1:0};a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,kb(b,{x:c.ec(),y:c.dc(),type:c.ub(),Y:c});a=[];c=[];for(var d={};b.length;){var e=!1;d.Vc=[];d.Vc.bound=new Hh;d.lc=null;d.Tb=null;var h=function(m){return function(n){n.Y.ub()==m.Tb.ub()?m.Tb.R+=n.Y.R-n.Y.P:((m.Tb.ub()+3&3)==n.Y.ub()&&(m.Tb.ng=!0,n.Y.Kg=!0),m.Vc.push(n.Y),m.Tb=n.Y);m.lc=new S(m.Tb.Eb(),m.Tb.Db());m.lc.type=
-1;Qh(m.Vc.bound,m.lc.x,m.lc.y)}}(d);d.Tb=b.shift().Y;d.Tb.ub()&&(e=!0,d.Tb.Kg=!0);d.Vc.push(d.Tb);d.lc=new S(d.Tb.Eb(),d.Tb.Db());d.lc.type=-1;for(Qh(d.Vc.bound,d.lc.x,d.lc.y);;){var g=[],k=fb(b,d.lc),l=b[k];if(!l)break;if(l.x!=d.lc.x)break;if(l.y!=d.lc.y)break;g[0]=k;g[1]=k;k++;(l=b[k])&&l.x==d.lc.x&&l.y==d.lc.y&&(g[1]=k);switch(d.Tb.ub()){case 0:k=g[0];break;case 1:k=g[1];break;case 2:k=g[1];break;case 3:k=g[0]}h(b.splice(k,1)[0])}e?(d.Vc[d.Vc.length-1].ng=!0,c.push(d.Vc)):(d.Vc.ib=[],a.push(d.Vc));
d={Tb:d.Tb,Vc:d.Vc,lc:d.lc}}b=q(c);for(c=b.next();!c.done;c=b.next())Rh(c.value,a);return a}function Sh(a,b){b||(b=[]);a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(c),c.ib&&Sh(c.ib,b);return b}
function Rh(a,b){var c=null;b=q(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.C<=d.bound.C||a.bound.l<=d.bound.l||a.bound.G>=d.bound.G||a.bound.u>=d.bound.u)){if(c){if(d.bound.C<=c.bound.C)continue;if(d.bound.l<=c.bound.l)continue;if(d.bound.G>=c.bound.G)continue;if(d.bound.u>=c.bound.u)continue}c=d}c&&c.ib.push(a)}
function Th(a){var b=162500,c=162500;b=void 0===b?0:b;c=void 0===c?0:c;var d=Mh(a);a=[];d=q(d);for(var e=d.next();!e.done;e=d.next())e.value.hh(b,c,a);d=xh();d=q(d);for(e=d.next();!e.done;e=d.next()){e=e.value;for(var h=0;h<a.length;h++)e.expand(b,c).ue(a[h].x,a[h].y)&&a.splice(h--,1)}return a}var Uh=-1,Vh=-1,Wh=0,Xh=[],Zf=[],$f=0,Yh=!1;function Zh(){Yh||(Rg=Xh,Xh=[],Tg=Sg=1,Yh=!0);if(!Ug&&!Tg){$h();xh();Yh=!1;Uh++;if(Uh<Wh+2)return!0;ai();return!0}return bi()}
function ci(){Yh||(Rg=Xh,Xh=[],Tg=Sg=7,Vg=-1,Yh=!0);if(0<=Vg){var a=Xh[Vg];if(!a){$h();xh();di();Yh=!1;Uh++;if(Uh<Wh+2)return!0;ai();return!0}if(2==a.children.length&&3<=a.rj){var b=function(g,k){if(!g)return k;for(var l=q(g),m=l.next();!m.done;m=l.next())k.push.apply(k,da(m.value));b(g.children[0],k);b(g.children[1],k);return k},c=b(a.children[0],[]);a=b(a.children[1],[]);var d=ei(c,a);d||(d=fi(c,a))}Vg++;return!0}if(!Ug&&!Tg){var e=[],h=function(g){g&&(g.index=e.length,e.push(g),h(g.children[0]),
h(g.children[1]))};h(Xh[0]);Xh=e;Vg=0;return!0}return bi()}
function bi(){if(!Ug){Ug=[];Ug.vi=vh(1,2,2);var a=[new T(255,0,64,255),new T(255,255,64,255),new T(0,96,255,255),new T(255,128,64,255),new T(0,160,96,255),new T(0,117,127,255)];Ug.qd=a[Xh.length%a.length];Ug.ab=-75E3;Ug.parent=null;Ug.children=[];Ug.rj=1;Ug.Md=0;Xh.push(Ug);Tg--}if(!Wg){if(!Ug.vi){if(Ug.parent){a=Ug.parent;a.children.push(Ug);do a.rj++,Ug.Md++,a=a.parent;while(a)}Ug=null;return!0}Wg=[];gi.call(Wg);Wg.index=Zf.length+$f;Wg.yc=Ug;Wg.ui=vh(1,2);0==Wg.index%5&&(Wg.pd=!0);Wg.style={};
Wg.style.height=225E3+5E4*uh(4);Wg.style.qd=Ug.qd;Wg.pd?(Wg.style.Kc=vh(ph,rh),Wg.style.ab=1E5):(Wg.style.Kc=vh(nh,qh),Wg.style.ab=Ug.ab);Ug.push(Wg);Zf.push(Wg);Ug.vi--}if(!X){if(!Wg.ui)return hi(),Wg=null,!0;X=[];X.index=ii++;X.tb=[];X.he=vh(1,2)}if(!X.he){if(Xg){$h();a=X;var b=Xg,c=ei([b],[a]);c||b.T.yc!=a.T.yc&&(c=fi([b],[a]));if(!c)return X.length=0,X.he=vh(1,2),Wg.pop(),!0}Yg=X=Xg=null;Wg.ui--;return!0}if(X.length)return(a=ji([X],0))?(a.platform=X,X.push(a),X.he--):(X.length=0,X.he=vh(1,2),
Wg.pop()),!0;if(Wg.length)return a=Wg,Yg||(Yg={}),(a=ji(a,0,Yg))?(Xg=a.mf,X.y=Xg.y+5E4*vh(-2,-1,1,2),X.y=Math.min(X.y,-4E5),X.T=Wg,Wg.push(X),a.platform=X,X.push(a),X.he--):(Yg=X=null,Wg.ui=0),!0;if(1<Ug.length){b=[];c=q(Ug);for(a=c.next();!a.done;a=c.next())b.push.apply(b,da(a.value));Yg||(Yg={});(a=ji(b,0,Yg))?(Xg=a.mf,X.y=Xg.y,X.T=Wg,Wg.push(X),a.platform=X,X.push(a),X.he--):(Ug.pop(),Zf.pop(),Yg=X=Wg=null,Ug.vi=0);return!0}if(1<Xh.length){b=[];c=q(Xh);for(a=c.next();!a.done;a=c.next())if(a=a.value,
!(2<=a.children.length)){var d=q(a);for(a=d.next();!a.done;a=d.next())b.push.apply(b,da(a.value))}Yg||(Yg={});if(a=ji(b,6E5,Yg))Xg=a.mf,Ug.parent=Xg.T.yc,X.y=Xg.y+5E4*vh(-2,-1,0,0,0,1,2),X.y=Math.min(X.y,-4E5),X.T=Wg,Wg.push(X),a.platform=X,X.push(a),X.he--;else{for(;;){a=Zf[Zf.length-1];if(a.la<=Uh)break;b=q(a);for(a=b.next();!a.done;a=b.next())for(c=q(a.value.tb),a=c.next();!a.done;a=c.next())ki(a.value);Zf.pop()}Ug=null;Xh.length=0;Tg=Sg;Yg=Xg=X=Wg=null}return!0}if(Rg.length){b=[];c=q(Rg);for(a=
c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length))for(d=q(a),a=d.next();!a.done;a=d.next())b.push.apply(b,da(a.value));Yg||(Yg={cmp:function(e,h){return e.Lc<h.Lc?-1:e.Lc>h.Lc?1:e.x<h.x?-1:e.x>h.x?1:e.y<h.y?-1:e.y>h.y?1:0}});if(a=ji(b,0,Yg))Xg=a.mf,X.y=Xg.y+5E4*vh(-2,-1,0,0,0,1,2),X.y=Math.min(X.y,-4E5),X.T=Wg,Wg.push(X),a.platform=X,X.push(a),X.he--;else{for(;;){a=Zf[Zf.length-1];if(a.la<=Uh)break;b=q(a);for(a=b.next();!a.done;a=b.next())for(c=q(a.value.tb),a=c.next();!a.done;a=c.next())ki(a.value);
Zf.pop()}Ug=null;Xh.length=0;Tg=Sg;Yg=Xg=X=Wg=null}return!0}a=ji(null,0);X.y=-4E5;X.T=Wg;Wg.push(X);a.platform=X;X.push(a);X.he--;return!0}
function ji(a,b,c){if(c){if(c.Eh)return li(c)}else c={};c.cmp||(c.cmp=function(n,r){return n.Md<r.Md?-1:n.Md>r.Md?1:n.Lc>r.Lc?-1:n.Lc<r.Lc?1:n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0});c.Jb=5E4*Math.floor(uh(2)+4);c.qf=5E4*Math.floor(uh(2)+4);if(!a)return new Hh(-c.Jb,c.Jb,-c.qf,c.qf);c.from=a;c.margin=b;c.sk=0;for(var d=xh(),e=[],h=q(a),g=h.next();!g.done;g=h.next()){g=g.value;for(var k=[],l=q(g),m=l.next();!m.done;m=l.next())mi(m.value,c.Jb,c.qf,b,k);l=d;l=Dh(l,new Hh(-c.Jb+1,c.Jb,-c.qf+1,c.qf));
k=Fh(k,l);k=q(k);for(l=k.next();!l.done;l=k.next())l=l.value,m=void 0,m=new S(l.C,l.l),m.mf=g,m.Md=g.T.yc.Md,e.push(m),m=new S(l.G-1,l.u-1),m.mf=g,m.Md=g.T.yc.Md,e.push(m)}if(!e.length)return null;c.Eh=[];c.Eh.cmp=c.cmp;b=[];a=q(a);for(d=a.next();!d.done;d=a.next())b.push.apply(b,da(d.value));e=q(e);for(a=e.next();!a.done;a=e.next())a=a.value,a.Lc=ni(b,a.x,a.y),kb(c.Eh,a);return li(c)}
function li(a){var b=a.Eh[a.sk++];if(!b)return null;a=new Hh(b.x-a.Jb,b.x+a.Jb,b.y-a.qf,b.y+a.qf);a.mf=b.mf;return a}
function ai(){Zg=yh();if(Qg.xl){for(var a=q(Zg),b=a.next();!b.done;b=a.next())b.value.cj();$g=[];ah=[];bh=[];a=q(Xh);for(b=a.next();!b.done;b=a.next()){for(var c=[],d=q(b.value),e=d.next();!e.done;e=d.next()){var h=[];e=q(e.value);for(b=e.next();!b.done;b=e.next())b=b.value,h=h.concat(b),bh=bh.concat(Mh(b));c=c.concat(h);ah=ah.concat(Mh(h))}$g=$g.concat(Mh(c))}for(;Zf.length&&!(Zf[0].la>=Wh);)Zf.shift(),$f++;Vh=Wh+1;oi=0}else{b=q(Zf);for(e=b.next();!e.done;e=b.next()){a=e.value;if(a.la>=Wh)break;
a.Ue=!0;e=q(a.nb);for(c=e.next();!c.done;c=e.next())pi(c.value);a=q(a);for(e=a.next();!e.done;e=a.next())for(e=q(e.value.tb),c=e.next();!c.done;c=e.next())c.value.bi()}a=q(Zf);for(e=a.next();!e.done;e=a.next())if(e=e.value,!(e.la<=Vh)){if(e.la>Wh+1)break;e.bound.C-=1E5;e.bound.G+=1E5;e.bound.l-=1E5;e.bound.u+=1E5;c=q(e);for(b=c.next();!b.done;b=c.next())b=b.value,b.y<e.floor&&(e.floor=b.y),b.y>e.oa&&(e.oa=b.y);e.oa+=e.style.height;e.h=e.floor;e.Fb||(e.Fb=e.pd?new K(.8,.8,.8):new K);c=q(e);for(b=c.next();!b.done;b=
c.next())for(b=b.value,b.xj=[],d=q(b),h=d.next();!h.done;h=d.next()){h=h.value;var g=[];Nh(h,g);Oh(g);b.xj.push(g);h.z=.5*h.C+.5*h.G;h.x=.5*h.l+.5*h.u;h.y=h.platform.y;h.C<e.bound.C&&(e.bound.C=h.C);h.G>e.bound.G&&(e.bound.G=h.G);h.l<e.bound.l&&(e.bound.l=h.l);h.u>e.bound.u&&(e.bound.u=h.u)}}a=q(Zf);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.la<=Vh)){if(b.la>Wh+1)break;e=q(b);for(b=e.next();!b.done;b=e.next())for(c=q(b.value.tb),b=c.next();!b.done;b=c.next())b.value.Zh()}a=q(Zf);for(e=a.next();!e.done;e=
a.next())if(e=e.value,!(e.la<=Vh)){if(e.la>Wh+1)break;e.oa=e.pd?0:Math.min(-18750,e.oa);c=[];d=q(e);for(b=d.next();!b.done;b=d.next())c.push.apply(c,da(b.value));d=c;d=Ch(d,9375,9375);b=[];d=q(d);for(h=d.next();!h.done;h=d.next()){h=h.value;g=b.length;for(var k=0;k<g;k++)b[k].Tf(h,b)&&(b.splice(k--,1),g--);b.push(h)}d=b;e.Ek=[];d=q(d);for(b=d.next();!b.done;b=d.next())h=[],Nh(b.value,h),Oh(h),e.Ek.push(h);b=c;b=Jh(b,1);b=Ch(b,9375,9375);b=Jh(b,0);e.yj=[];c=q(b);for(b=c.next();!b.done;b=c.next())d=
[],Nh(b.value,d),Oh(d),e.yj.push(d)}b=q(Zf);for(e=b.next();!e.done;e=b.next())if(a=e.value,!(a.la<=Vh)){if(a.la>Wh+1)break;qi(a);c=a;a=ri(Infinity,c.index,t.j.S.get("HandRail01"),jh);a.facing=0;a.Aa=2;e=c.style.qd;c=q(c.Kk);for(d=c.next();!d.done;d=c.next())for(d=d.value,h=q(d),g=h.next();!g.done;g=h.next()){g=g.value;var l=[];k=(g.R-g.P)/2E5;for(var m=Math.round(k),n=.5*(k-m);.125>n;)--m,n+=.5;if(!(0>m))for(l.push({Sb:.5,Wf:0,length:n}),l.push({Sb:1,Wf:0,length:k-2*n}),l.push({Sb:.5,Wf:1-n,length:n}),
k=0,m=new S(g.ec(),g.dc()),l=q(l),n=l.next();!n.done;n=l.next()){n=n.value;k+=2E5*n.length;var r=g.df(k,0),p=[];var v=new rd(m.y,d.y,m.x);Bd(v,n.Wf,n.Sb);ud(v,e);p.push(v);v=new rd(r.y,d.y,r.x);Bd(v,n.Wf+n.length,n.Sb);ud(v,e);p.push(v);v=new rd(r.y,d.y+112500,r.x);Bd(v,n.Wf+n.length,n.Sb-.5);ud(v,e);p.push(v);v=new rd(m.y,d.y+112500,m.x);Bd(v,n.Wf,n.Sb-.5);ud(v,e);p.push(v);a.yd.push(p);m=r}}}a=q(Zf);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.la<=Vh)){if(b.la>Wh+1)break;e=q(b);for(b=e.next();!b.done;b=
e.next())for(c=q(b.value.tb),b=c.next();!b.done;b=c.next())b.value.Wh()}b=q(Zf);for(e=b.next();!e.done;e=b.next())if(a=e.value,!(a.la<=Vh)){if(a.la>Wh+1)break;a=q(a.nb);for(e=a.next();!e.done;e=a.next())e.value.stroke()}a=q(Zf);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.la<=Vh)){if(b.la>Wh+1)break;e=q(b);for(b=e.next();!b.done;b=e.next())for(c=q(b.value.tb),b=c.next();!b.done;b=c.next())b.value.Di()}oi++}}
function ei(a,b){Zg=yh();var c=[];c.length=0;for(var d=q(a),e=d.next();!e.done;e=d.next()){var h=e.value,g=q(b);for(e=g.next();!e.done;e=g.next()){var k=e.value,l=[];if(h.T==k.T&&h.y!=k.y){if(h.Lb){var m=void 0,n=q(h.Lb);for(e=n.next();!e.done;e=n.next())e=e.value,e.target==k&&(m||(m=si(h)),l.push(ti(h,k,m,e.direction)))}if(k.Lb)for(m=void 0,n=q(k.Lb),e=n.next();!e.done;e=n.next())e=e.value,e.target==h&&(m||(m=si(k)),l.push(ti(k,h,m,e.direction)));h.Lb||k.Lb||(l.push(ui(h,k)),l.push(ui(k,h)),!uh(2)&&
l.reverse());c=c.concat(l)}}}d=q(c);for(e=d.next();!e.done;e=d.next())for(e=e.value,wh(e),h=q(e),e=h.next();!e.done;e=h.next())if(e=e.value,vi(e))return e.ma.tb.push(e),e;c.length=0;d=q(a);for(e=d.next();!e.done;e=d.next())for(h=e.value,g=q(b),e=g.next();!e.done;e=g.next())e=e.value,h.T!=e.T&&h.y==e.y&&(c=h.T.la==e.T.la&&h.T.yc==e.T.yc?c.concat(wi(h,e)):c.concat(xi(h,e,112500)));wh(c);d=q(c);for(e=d.next();!e.done;e=d.next())if(e=e.value,vi(e))return e.ma.tb.push(e),e.Pa.tb.push(e),e;c.length=0;a=
q(a);for(e=a.next();!e.done;e=a.next())for(d=e.value,h=q(b),e=h.next();!e.done;e=h.next())if(g=e.value,k=[],d.T!=g.T&&d.y!=g.y){if(d.Lb)for(l=void 0,m=q(d.Lb),e=m.next();!e.done;e=m.next())e=e.value,e.target==g&&(l||(l=si(d)),k.push(ti(d,g,l,e.direction)));if(g.Lb)for(l=void 0,m=q(g.Lb),e=m.next();!e.done;e=m.next())e=e.value,e.target==d&&(l||(l=si(g)),k.push(ti(g,d,l,e.direction)));d.Lb||g.Lb||(k.push(ui(d,g)),k.push(ui(g,d)),!uh(2)&&k.reverse());c=c.concat(k)}b=q(c);for(e=b.next();!e.done;e=b.next())for(c=
e.value,wh(c),c=q(c),e=c.next();!e.done;e=c.next())if(a=e.value,vi(a)){a.ma.tb.push(a);if(e=a.Jj)e=a,h=e.Jj,g=[],g.index=ii++,g.tb=[],g.y=e.Pa.y,g.T=e.ma.T,g.T.push(g),h.platform=g,g.push(h),d=e.ma.slice(),Fh(e.ma,[h]),$h(),h=ei([g],[e.Pa]),h||(e.ma.length=0,e.ma.push.apply(e.ma,da(d)),e.ma.T.pop(),ii--),e=!h;if(e)a.ma.tb.pop();else return a}}
function fi(a,b){function c(y,x,C){-x.d<=y.P||-x.d>y.R||x.P>=y.d||x.R<y.d||(C=[(new yi).raw(y.d,y.P,-x.d).rotate(C),(new zi).raw(-x.d,-y.d,-x.P).rotate(C)],C.Sf=y.source,C.Ze=x.source,C.Na=C[0].R-C[0].P+(C[1].R-C[1].P),14E5>=C.Na&&kb(h,C))}function d(y,x,C){y.d!=-x.d||-x.P<=y.P||-x.R>y.R||(C=[(new yi).raw(y.d,y.P,-x.P).rotate(C)],C.Sf=y.source,C.Ze=x.source,C.Na=C[0].R-C[0].P,14E5>=C.Na&&kb(h,C))}var e=Ch(xh(),162500,162500),h=[];h.cmp=function(y,x){return y.Na<x.Na?-1:1};var g=[],k=[];a=q(a);for(var l=
a.next();!l.done;l=a.next())g=g.concat(Th(l.value));b=q(b);for(a=b.next();!a.done;a=b.next())k=k.concat(Th(a.value));b=[[],[],[],[]];a=[[],[],[],[]];for(l=0;4>l;l++){for(var m=Ah(e,l),n=q(g),r=n.next();!r.done;r=n.next()){var p=r.value;r=p.source.source;p=Bh(p.x,p.y,l);var v=p.y,z=p.x;p=Lh(p.x,p.y,m);p<=z||(v=new yi(v,z,p),v.source=r,b[l].push(v))}n=q(k);for(r=n.next();!r.done;r=n.next())p=r.value,r=p.source.source,p=Bh(p.x,p.y,l),v=p.y,z=p.x,p=Lh(p.x,p.y,m),p<=z||(v=new yi(v,z,p),v.source=r,a[l].push(v))}for(e=
1;4>e;e++){g=void 0;g=(e+1)%4;k=q(b[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=q(a[g]),r=m.next();!r.done;r=m.next())c(l,r.value,e,g);k=q(a[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=q(b[g]),r=m.next();!r.done;r=m.next())c(l,r.value,e,g);g=(e+2)%4;k=q(b[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=q(a[g]),r=m.next();!r.done;r=m.next())d(l,r.value,e,g)}for(b=0;b<h.length;b++){a=h[b];e=a[0];g=a[a.length-1];k=a.Sf.platform;l=a.Ze.platform;m=Math.min(k.y,l.y);r=Math.max(k.y,
l.y);if(e==g){if(n=25E3*(Math.floor((e.R-e.P-325E3)/5E4)-1),0>n&&(n=0),Math.abs(l.y-k.y)>n){h.splice(b--,1);continue}}else if(n=25E3*(Math.floor((e.R-e.P-325E3)/5E4)-1),0>n&&(n=0),m=Math.max(m,k.y-n),r=Math.min(r,k.y+n),n=25E3*(Math.floor((g.R-g.P-325E3)/5E4)-1),0>n&&(n=0),m=Math.max(m,l.y-n),r=Math.min(r,l.y+n),m>r){h.splice(b--,1);continue}a.y=vh(m,r);a.Lb=[];Math.abs(k.y-a.y)/25E3&&a.Lb.push({direction:(e.ub()+2+3)%4,target:k});Math.abs(l.y-a.y)/25E3&&a.Lb.push({direction:(g.ub()+3)%4,target:l});
a.Lb.length||delete a.Lb}for(b=0;4>b;b++){a=h[b];if(!a)break;g=a.Sf.platform;k=a.Ze.platform;e=[];gi.call(e);e.index=Zf.length+$f;e.yc=g.T.la>k.T.la?g.T.yc:k.T.yc;e.yc.push(e);Zf.push(e);0==e.index%5&&(e.pd=!0);e.style={};e.style.height=225E3+5E4*uh(4);e.style.qd=e.yc.qd;e.pd?(e.style.Kc=vh(ph,rh),e.style.ab=1E5):(e.style.Kc=vh(nh,qh,sh),e.style.ab=e.yc.ab);g=[];g.index=ii++;g.tb=[];g.y=a.y;a.Lb&&(g.Lb=a.Lb);g.T=e;e.push(g);k=q(a);for(l=k.next();!l.done;l=k.next())l=l.value.Ng().expand(162500,162500),
l.platform=g,g.push(l);$h();k=k=void 0;if(g.y==a.Ze.platform.y){if(k=ei([a.Sf.platform],[g])){if(k=ei([g],[a.Ze.platform]))return a;a.Sf.platform.tb.pop()}}else if(k=ei([g],[a.Ze.platform])){if(k=ei([a.Sf.platform],[g]))return a;a.Ze.platform.tb.pop()}Zf.pop();e.yc.pop()}return!1}
function xi(a,b,c){a.ae=Ai(a,c);b.ae=Ai(b,c);var d=[],e=[],h=c+37500,g=zh(a.ae,h,0),k=zh(b.ae,-h,0);k=Gh(g,k);var l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=0;e=e.concat(k);g=zh(a.ae,0,h);k=zh(b.ae,0,-h);k=Gh(g,k);l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=1;e=e.concat(k);g=zh(a.ae,-h,0);k=zh(b.ae,h,0);k=Gh(g,k);l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=2;e=e.concat(k);g=zh(a.ae,0,-h);h=zh(b.ae,0,h);h=Gh(g,h);k=q(h);for(g=k.next();!g.done;g=k.next())g.value.direction=
3;e=e.concat(h);wh(e);h=new Hh(-9375,9375,-c,c);e=q(e);for(g=e.next();!g.done;g=e.next()){g=g.value;k=h.pf(g.direction);l=q([{z:g.C,x:g.l},{z:g.G-1,x:g.u-1}]);for(var m=l.next();!m.done;m=l.next())m=m.value,m=k.translate(m.z,m.x),m.y=a.y,m.direction=g.direction,d.push(new Bi(m,c,a,b))}return d}function Ai(a,b){b+=37500;var c=Dh(a,new Hh(0,1,0,1));a=Jh(c,1);a=Dh(a,new Hh(-b,b,-b,b));Fh(c,a);return c}
function wi(a,b){for(var c=[],d=q(a),e=d.next();!e.done;e=d.next())Nh(e.value,c);d=[];c=q(c);for(e=c.next();!e.done;e=c.next()){e=e.value;for(var h=q(b),g=h.next();!g.done;g=h.next())e.ug(g.value,d)}for(c=[];d.length;){e=d.pop();for(h=0;h<d.length;h++)g=d[h],e.ub()==g.ub()&&e.d==g.d&&(e.R==g.P?(d.splice(h,1),e.R=g.R,h=-1):e.P==g.R&&(d.splice(h,1),e.P=g.P,h=-1));225E3>e.R-e.P||c.push(e)}d=[];c=q(c);for(e=c.next();!e.done;e=c.next())d.push(new Ci(e.value,a,b));return d}
function hi(){for(var a=Wg,b=new Hh,c=q(a),d=c.next();!d.done;d=c.next())for(var e=q(d.value),h=e.next();!h.done;h=e.next())Ih(b,h.value);c=75E3;var g=b.G-b.C;d=b.u-b.l;e=Math.round(g/1E6)-1;h=Math.round(d/1E6)-1;g=b.C+.5*(g-1E6*(e-1));b=b.l+.5*(d-1E6*(h-1));var k=[],l=q(a);for(d=l.next();!d.done;d=l.next())k=k.concat(d.value);k=Jh(k,1);k=Ch(k,1E5,1E5);c-=9375;for(l=0;l<e;l++){for(var m=b,n={},r=0;r<h;n={Qg:n.Qg},r++){d=function(v){return function(){for(var z=q(k),y=z.next();!y.done;y=z.next())if(Di(v.Qg,
y.value))return!1;return!0}}(n);n.Qg=new Hh(g-c,g+c,m-c,m+c);if(d()){var p=q(a);for(d=p.next();!d.done;d=p.next())Fh(d.value,[n.Qg])}m+=1E6}g+=1E6}}function ui(a,b){for(var c=si(a),d=[],e=0;4>e;e++)d=d.concat(ti(a,b,c,e));return d}
function ti(a,b,c,d){var e=25E3*Math.ceil(Math.abs(b.y-a.y)/25E3),h=a.T!=b.T?325E3:0,g=function(l,m,n){function r(y){for(var x=0;x<y.length;x++)for(var C=y[x],A=x+1;A<y.length;A++){var D=y[A];if(C.C==D.C&&C.G==D.G){if(D.u==C.l){y.splice(A--,1);C.l=D.l;x--;break}if(D.l==C.u){y.splice(A--,1);C.u=D.u;x--;break}}}y=q(y);for(x=y.next();!x.done;x=y.next())x=x.value,x.l=x.u-1,x.direction=d}var p=Jh(l,1);p=Dh(p,new Hh(-162499,162500,-e-h+1,e+162500+162500));l=p=Jh(p,0);p=Dh(n,new Hh(0,0,-e-h+1,e));p=Jh(p,
1);p=Dh(p,new Hh(-162500,162501,0,0));l=p=Gh(l,p);p=Jh(m,1);p=Dh(p,new Hh(-162499,162500,-162499,162500));p=Jh(p,0);n=[];m=Gh(l,zh(p,0,-e-h-162500));r(m);for(var v=q(m),z=v.next();!z.done;z=v.next())z.value.type=1;n=n.concat(m);if(0!=h){m=Gh(l,zh(p,-325E3,-e-162500));r(m);v=q(m);for(z=v.next();!z.done;z=v.next())z.value.type=0;n=n.concat(m);m=Gh(l,zh(p,325E3,-e-162500));r(m);l=q(m);for(z=l.next();!z.done;z=l.next())z.value.type=2;n=n.concat(m)}return n}(Ah(a,d),Ah(b,d),Ah(c,d));c=[];g=q(g);for(var k=
g.next();!k.done;k=g.next())c.push(new Ei(k.value,e,h,a,b));return c}function si(a){for(var b=a.slice(),c=q(a.Ne),d=c.next();!d.done;d=c.next())d=d.value,d=d.Ga.platform!=a?d.Ga.platform:d.ka.platform,d.T==a.T&&(b=b.concat(d));return b}
function $h(){for(var a=[],b=q(Zf),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;d.Ne=[];for(var e=q(d),h=e.next();!h.done;h=e.next())h.value.Ne=[];a=a.concat(d)}}for(b=0;b<a.length;b++)for(c=a[b],d=b+1;d<a.length;d++)if(e=a[d],h=Fi(c,e))h.Ga=c,h.ka=e,c.Ne.push(h),e.Ne.push(h),c.platform!=e.platform&&(c.platform.Ne.push(h),e.platform.Ne.push(h))}
function di(){Zg=yh();var a=q(Zf),b=a.next();a:for(;!b.done;b=a.next())if(b=b.value,!b.ll){b.ll=!0;b=q(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=q(c.Ne),e=d.next();!e.done;e=d.next())if(e=e.value,e=e.Ga.platform!=c?e.Ga.platform:e.ka.platform,c.T.la==e.T.la&&!(c.index<=e.index)&&c.T!=e.T){var h=xi(c,e,87500);wh(h);h=q(h);for(var g=h.next();!g.done;g=h.next())if(g=g.value,vi(g)){g.Mc=!0;c.tb.push(g);e.tb.push(g);continue a}}}}}
function gi(){this.la=Uh+1;this.Kk=[];this.nb=[];this.ic=[];this.bound=new Qd;this.oa=-Infinity;this.floor=Infinity;this.h=-Infinity;this.ja={};this.ja.Da=-2147483648;this.ja.pb=new K(1,1,1);this.Sc=0;this.zb=new K;this.cells=new sb(Gb)}var ii=0;
function Bi(a,b,c,d){this.Ka=a;this.direction=a.direction;this.a=b;this.ma=c;this.Pa=d;this.z=.5*a.C+.5*a.G;this.x=.5*a.l+.5*a.u;this.y=Math.max(c.y,d.y);this.Rb=[];this.Ye=[];this.ad=[];this.ld=[];this.nb=[];c=new Hh(a.C,a.G,a.l,a.u);c.h=a.y;c.s=c.h+225E3;this.ad.push(c);this.Ye.push(c);b=new Hh(2*-b,2*b,-b,b);b=b.rotate(this.direction);b=b.translate(this.z,this.x);b.s=a.y;b.h=b.s-18750;this.ad.push(b);b=new Hh(b.C,b.G,b.l,b.u);b.h=a.y;b.s=b.h+225E3;this.ld.push(b)}f=Bi.prototype;f.cj=function(){Qg.uk.push(this.Ka)};
f.translate=function(a,b){this.z+=a;this.x+=b};
f.Wh=function(){if(!this.nb.length){this.Pc=0;var a=new yi(0,0,1);a=a.rotate(this.direction);this.wa=new P(a.ec()+this.z,a.dc()+this.x,a.Eb()+this.z,a.Db()+this.x);a=new Gi;a.add=!0;a.ab=0;a.color=eh;this.Mc?(a.h=this.y+87500,a.s=a.h+125E3):(a.h=this.y,a.s=this.y+225E3);for(var b=[new S(0,-this.a),new S(0,this.a),new S(-9375,this.a),new S(-9375,-this.a)],c=[new S(0,this.a),new S(0,-this.a),new S(9375,-this.a),new S(9375,this.a)],d=0;d<b.length;d++)b[d]=this.wa.jb(b[d].x,b[d].y);for(d=0;d<c.length;d++)c[d]=
this.wa.jb(c[d].x,c[d].y);a.aa=this.ma.T.index;Hi(a,b);this.nb.push(a);a=a.da();a.aa=this.Pa.T.index;Hi(a,c);this.nb.push(a);this.hc=new Xf(new P(b[0].x,b[0].y,b[1].x,b[1].y),a.h,a.s);this.vc=new Xf(new P(c[0].x,c[0].y,c[1].x,c[1].y),a.h,a.s);this.hc.Oc=this.vc;this.vc.Oc=this.hc;this.hc.aa=this.ma.T.index;this.vc.aa=this.Pa.T.index;this.hc.Mc=this.Mc;this.vc.Mc=this.Mc}};
f.Di=function(){if(0==this.Pc){for(var a=q(this.nb),b=a.next();!b.done;b=a.next())b.value.stroke();this.Pc=1}1!=this.Pc||this.ma.T.la>Wh+1||this.Pa.T.la>Wh+1||(this.ma.T.ic.push(this.hc),this.Pa.T.ic.push(this.vc),this.Pc=2)};f.create=function(){if(this.ii)this.ii.update();else if(0<this.Pc)if(this.Mc)this.ii=new Ii(this.wa,this.y+87500,this.ma.T,this.Pa.T);else if(this.ma.T.la!=this.Pa.T.la||this.ma.T.pd!=this.Pa.T.pd)this.ii=new Ji(this.wa,this.y,this.hc,this.vc,this.ma.T,this.Pa.T)};
f.bi=function(){if(!this.Ue){for(var a=q(this.nb),b=a.next();!b.done;b=a.next())pi(b.value);this.Ue=!0}};function ki(a){var b=a.ma.tb,c=b.indexOf(a);0>c||b.splice(c,1);b=a.Pa.tb;a=b.indexOf(a);0>a||b.splice(a,1)}f.Zh=function(){if(this.Mc){var a=this.y+87500;var b=a+125E3}else a=this.y,b=this.y+225E3;this.ma.T.oa=Math.max(this.ma.T.oa,b);this.Pa.T.oa=Math.max(this.Pa.T.oa,b);this.ma.T.h=Math.min(this.ma.T.h,a);this.Pa.T.h=Math.min(this.Pa.T.h,a)};
function Ci(a,b,c){var d=.5*(a.R-a.P)-9375,e=a.Ng();this.direction=(a.ub()+3)%4;this.a=d;this.Ka=e;this.ma=b;this.Pa=c;this.z=.5*e.C+.5*e.G;this.x=.5*e.l+.5*e.u;this.y=Math.max(b.y,c.y);e.y=this.y;this.Rb=[];this.Ye=[];this.ad=[];this.ld=[];this.nb=[];a=new Hh(e.C,e.G,e.l,e.u);a.h=e.y;a.s=a.h+225E3;this.ad.push(a);this.Ye.push(a);d=new Hh(-225E3,225E3,-d,d);d=d.rotate(this.direction);d=d.translate(this.z,this.x);d.s=e.y;d.h=d.s-18750;this.ad.push(d);d=new Hh(d.C,d.G,d.l,d.u);d.h=e.y;d.s=d.h+225E3;
this.ld.push(d)}f=Ci.prototype;f.cj=function(){Qg.uk.push(this.Ka)};f.translate=function(a,b){this.z+=a;this.x+=b};
f.Wh=function(){if(!this.nb.length){this.Pc=0;var a=new yi(0,0,1);a=a.rotate(this.direction);this.wa=new P(a.ec()+this.z,a.dc()+this.x,a.Eb()+this.z,a.Db()+this.x);a=new Gi;a.add=!0;a.ab=0;a.color=eh;this.Mc?(a.h=this.y+87500,a.s=a.h+125E3):(a.h=this.y,a.s=Math.min(this.ma.T.oa,this.Pa.T.oa));for(var b=[new S(0,-this.a),new S(0,this.a),new S(-9375,this.a),new S(-9375,-this.a)],c=[new S(0,this.a),new S(0,-this.a),new S(9375,-this.a),new S(9375,this.a)],d=0;d<b.length;d++)b[d]=this.wa.jb(b[d].x,b[d].y);
for(d=0;d<c.length;d++)c[d]=this.wa.jb(c[d].x,c[d].y);a.aa=this.ma.T.index;Hi(a,b);this.nb.push(a);a=a.da();a.aa=this.Pa.T.index;Hi(a,c);this.nb.push(a);this.hc=new Xf(new P(b[0].x,b[0].y,b[1].x,b[1].y),a.h,a.s);this.vc=new Xf(new P(c[0].x,c[0].y,c[1].x,c[1].y),a.h,a.s);this.hc.Oc=this.vc;this.vc.Oc=this.hc;this.hc.aa=this.ma.T.index;this.vc.aa=this.Pa.T.index;this.hc.Mc=this.Mc;this.vc.Mc=this.Mc}};
f.Di=function(){if(0==this.Pc){for(var a=q(this.nb),b=a.next();!b.done;b=a.next())b.value.stroke();this.Pc=1}1!=this.Pc||this.ma.T.la>Wh+1||this.Pa.T.la>Wh+1||(this.ma.T.ic.push(this.hc),this.Pa.T.ic.push(this.vc),this.Pc=2)};f.create=function(){};f.bi=function(){if(!this.Ue){for(var a=q(this.nb),b=a.next();!b.done;b=a.next())pi(b.value);this.Ue=!0}};f.Zh=function(){};
function Ei(a,b,c,d,e){this.Ka=a;this.direction=a.direction;this.type=a.type;this.Jb=162500;this.Bd=b;this.ma=d;this.Pa=e;var h=Math.min(d.y,e.y),g=Math.max(d.y,e.y);this.Rb=[];this.Ye=[];this.ad=[];this.ld=[];this.nb=[];var k=new Hh(-162500,162500,-b,b);k=k.translate(a.C,a.l);k=k.rotate(this.direction);k.h=h-18750;k.s=g;this.Rb.push(k);this.Ye.push(k);k=new Hh(k.C,k.G,k.l,k.u);k.h=h;k.s=g+2E5;this.ld.push(k);k=new Hh(-162500,162500,-b-162500-162500,-b);k=k.translate(a.C,a.l);k=k.rotate(this.direction);
k.h=d.y;k.s=g+2E5;this.ld.push(k);k=new Hh(k.C,k.G,k.l,k.u);k.h=h-18750;k.s=d.y;this.Rb.push(k);this.ad.push(k);if(c){d=new Hh(-162500,162500,b,b+c);d=d.translate(a.C,a.l);d=d.rotate(this.direction);d.h=e.y;d.s=g+2E5;this.ld.push(d);d=new Hh(d.C,d.G,d.l,d.u);d.h=h-18750;d.s=e.y;this.Rb.push(d);this.ad.push(d);this.Jj=d;var l;0==this.type?l=new Hh(162500,487500,b,b+c):1==this.type?l=new Hh(-162500,162500,b+c,b+c+325E3):2==this.type&&(l=new Hh(-487500,-162500,b,b+c));l=l.translate(a.C,a.l);l=l.rotate(this.direction);
l.h=e.y;l.s=g+2E5;this.ld.push(l);l=new Hh(l.C,l.G,l.l,l.u);l.h=h-18750;l.s=e.y;this.Rb.push(l);this.ad.push(l)}else b=new Hh(-162500,162500,b,b+162500),b=b.translate(a.C,a.l),b=b.rotate(this.direction),b.h=e.y,b.s=g+2E5,this.ld.push(b),b=new Hh(b.C,b.G,b.l,b.u),b.h=h-18750,b.s=e.y,this.Rb.push(b),this.ad.push(b)}f=Ei.prototype;
f.cj=function(){var a=(this.Pa.y-this.ma.y)/25E3;if(this.Pa.y>this.ma.y)for(var b=0;b<=a;b++){var c=new yi(this.Ka.l-this.Bd+5E4*b,this.Ka.C-this.Jb,this.Ka.C+this.Jb);c=c.rotate(this.direction);c.y=this.ma.y+25E3*b;Qg.Zk.push(c)}else for(a=-a,b=0;b<=a;b++)c=new yi(this.Ka.l-this.Bd+5E4*b,this.Ka.C-this.Jb,this.Ka.C+this.Jb),c=c.rotate(this.direction),c.y=this.ma.y-25E3*b,Qg.Zk.push(c)};
f.translate=function(a,b){this.z+=a;this.x+=b;this.Ka=this.Ka.rotate(this.direction);this.Ka.C+=a;this.Ka.G+=a;this.Ka.l+=b;this.Ka.u+=b;this.Ka=this.Ka.pf(this.direction);this.Rb[0].C+=a;this.Rb[0].G+=a;this.Rb[0].l+=b;this.Rb[0].u+=b};
f.Wh=function(){if(!this.nb.length){this.Pc=0;var a=this.ma.T,b=(this.Pa.y-this.ma.y)/25E3,c=function(h){return 1!=h.dh?!1:!0};if(this.Pa.y>this.ma.y)for(c=0;c<b;c++){var d=new Hh(this.Ka.C-this.Jb,this.Ka.C+this.Jb,this.Ka.l-this.Bd+5E4*c,this.Ka.l-this.Bd+5E4*(c+1));d=d.rotate(this.direction);d=[new S(d.C,d.l),new S(d.G,d.l),new S(d.G,d.u),new S(d.C,d.u)];a=new Gi;a.add=!1;a.aa=this.ma.T.index;a.ab=0;a.color=eh;a.h=this.ma.y;a.s=this.ma.y+25E3*(c+1);Hi(a,d);this.nb.push(a)}else for(b=-b,d=new Gi,
d.add=!0,d.dh=1,d.aa=this.ma.T.index,d.vg=c,d.Kc=a.style.Kc,d.ab=a.style.ab,d.Ie=a.h,d.color=a.style.qd,d.h=this.Pa.y,d.s=this.ma.y,a=this.Rb[0],Hi(d,[new S(a.C,a.l),new S(a.G,a.l),new S(a.G,a.u),new S(a.C,a.u)]),this.nb.push(d),d=0;d<b;d++){a=new Hh(this.Ka.C-this.Jb,this.Ka.C+this.Jb,this.Ka.l-this.Bd+5E4*d,this.Ka.l-this.Bd+5E4*(d+1));a=a.rotate(this.direction);a=[new S(a.C,a.l),new S(a.G,a.l),new S(a.G,a.u),new S(a.C,a.u)];var e=new Gi;e.add=!1;e.aa=this.ma.T.index;e.vg=c;e.ab=0;e.color=eh;e.h=
this.Pa.y;e.s=this.ma.y-25E3*d;Hi(e,a);this.nb.push(e)}}};f.Di=function(){if(0==this.Pc){for(var a=q(this.nb),b=a.next();!b.done;b=a.next())b.value.stroke();this.Pc=2}};f.create=function(){};f.bi=function(){if(!this.Ue){for(var a=q(this.nb),b=a.next();!b.done;b=a.next())pi(b.value);this.Ue=!0}};f.Zh=function(){this.ma.T.h=Math.min(this.ma.T.h,this.Pa.y);this.Pa.T.h=Math.min(this.Pa.T.h,this.ma.y)};
function Ki(a,b){for(var c=q(a.ad),d=c.next();!d.done;d=c.next()){var e=d.value,h=q(b.Ye);for(d=h.next();!d.done;d=h.next())if(Li(e,d.value))return!1}c=q(a.Ye);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=q(b.ad),d=h.next();!d.done;d=h.next())if(Li(e,d.value))return!1;c=q(a.ld);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=q(b.Rb),d=h.next();!d.done;d=h.next())if(Li(e,d.value))return!1;a=q(a.Rb);for(d=a.next();!d.done;d=a.next())for(c=d.value,e=q(b.ld),d=e.next();!d.done;d=e.next())if(Li(c,
d.value))return!1;return!0}function vi(a){for(var b=q(Zg),c=b.next();!c.done;c=b.next())if(!Ki(a,c.value))return!1;return!0}
function qi(a){function b(k){return k.add&&k.aa==this.aa?!0:!1}0>a.style.ab&&(a.style.ab+=a.oa-a.floor);for(var c=q(a.yj),d=c.next();!d.done;d=c.next()){d=d.value;var e=new Gi;e.add=!0;e.dh=1;e.aa=a.index;e.ab=a.style.ab;e.color=a.style.qd;e.Kc=a.style.Kc;e.Ie=a.h;e.h=a.h;e.s=a.oa;Hi(e,jd(d));a.nb.push(e);a.pd&&(e.oa=null)}if(a.Fk)for(c=q(a.Fk),d=c.next();!d.done;d=c.next())d=d.value,e=new Gi,e.add=!0,e.dh=1,e.aa=a.index,e.ab=a.style.ab,e.color=a.style.qd,e.Kc=a.style.Kc,e.Ie=a.h,e.h=a.h,e.s=a.oa,
Hi(e,jd(d)),a.nb.push(e);c=q(a);for(d=c.next();!d.done;d=c.next())if(e=d.value,!(e.y<=a.h)){var h=q(e.xj);for(d=h.next();!d.done;d=h.next()){d=d.value;var g=new Gi;g.add=!1;g.dh=1;g.aa=a.index;g.vg=b;g.ab=a.style.ab;g.color=a.style.qd;g.Kc=a.style.Kc;g.Ie=a.floor;g.h=a.h;g.s=e.y;Hi(g,jd(d));a.nb.push(g)}}};function Hh(a,b,c,d){a=void 0===a?NaN:a;b=void 0===b?NaN:b;c=void 0===c?NaN:c;d=void 0===d?NaN:d;this.C=a;this.G=b;this.l=c;this.u=d}f=Hh.prototype;f.ue=function(a,b){return a<=this.C||a>=this.G||b<=this.l||b>=this.u?!1:!0};f.jf=function(a,b){a<this.C?a=this.C:a>this.G&&(a=this.G);b<this.l?b=this.l:b>this.u&&(b=this.u);return new S(a,b)};function Mi(a,b,c){var d=0;b<a.C?d+=a.C-b:b>a.G&&(d+=b-a.G);c<a.l?d+=a.l-c:c>a.u&&(d+=c-a.u);return d}
function Qh(a,b,c){b>=a.C||(a.C=b);b<=a.G||(a.G=b);c>=a.l||(a.l=c);c<=a.u||(a.u=c)}function Ih(a,b){b.C>=a.C||(a.C=b.C);b.G<=a.G||(a.G=b.G);b.l>=a.l||(a.l=b.l);b.u<=a.u||(a.u=b.u)}f.Lc=function(a,b){a-=.5*this.G+.5*this.C;b-=.5*this.u+.5*this.l;return 1E5/Math.sqrt(a*a+b*b)};f.expand=function(a,b){return this.da(this.C-a,this.G+a,this.l-b,this.u+b)};
function Nh(a,b){var c=new yi(a.l,a.C,a.G);c.source=a;b.push(c);c=new Ni(a.G,a.l,a.u);c.source=a;b.push(c);c=new Oi(a.u,a.G,a.C);c.source=a;b.push(c);c=new zi(a.C,a.u,a.l);c.source=a;b.push(c)}
function mi(a,b,c,d,e){var h=new Hh(a.G+b+d,a.G+b+d,Math.min(a.l+c,a.u-c)-d,Math.max(a.l+c,a.u-c)+d);h.G+=1;h.u+=1;e.push(h);h=new Hh(Math.min(a.C+b,a.G-b)-d,Math.max(a.C+b,a.G-b)+d,a.u+c,a.u+c+d);h.G+=1;h.u+=1;e.push(h);h=new Hh(a.C-b-d,a.C-b-d,Math.min(a.l+c,a.u-c)-d,Math.max(a.l+c,a.u-c)+d);h.G+=1;h.u+=1;e.push(h);h=new Hh(Math.min(a.C+b,a.G-b)-d,Math.max(a.C+b,a.G-b)+d,a.l-c-d,a.l-c-d);h.G+=1;h.u+=1;e.push(h)}
f.da=function(a,b,c,d){a=new Hh(a,b,c,d);this.mj&&(a.mj=this.mj);this.platform&&(a.platform=this.platform);this.T&&(a.T=this.T);void 0!==this.direction&&(a.direction=this.direction);void 0!==this.type&&(a.type=this.type);return a};
f.Tf=function(a,b){if(!Di(this,a))return!1;var c=this.l,d=this.u;this.u>a.u&&(b.push(this.da(this.C,this.G,a.u,this.u)),d=a.u);this.l<a.l&&(b.push(this.da(this.C,this.G,this.l,a.l)),c=a.l);this.G>a.G&&b.push(this.da(a.G,this.G,c,d));this.C<a.C&&b.push(this.da(this.C,a.C,c,d));return!0};f.ug=function(a,b){a=this.da(Math.max(this.C,a.C),Math.min(this.G,a.G),Math.max(this.l,a.l),Math.min(this.u,a.u));a.G<=a.C||a.u<=a.l||b.push(a)};function Eh(a,b){return a.da(a.C+b.C,a.G+b.G,a.l+b.l,a.u+b.u)}
f.rotate=function(a){switch(a){case 0:return this.da(this.C,this.G,this.l,this.u);case 1:return this.da(-this.u,-this.l,this.C,this.G);case 2:return this.da(-this.G,-this.C,-this.u,-this.l);case 3:return this.da(this.l,this.u,-this.G,-this.C)}};f.pf=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return this.da(this.C+a,this.G+a,this.l+b,this.u+b)};function Fi(a,b){a=new Hh(Math.max(a.C,b.C),Math.min(a.G,b.G),Math.max(a.l,b.l),Math.min(a.u,b.u));return a.G<a.C||a.u<a.l?null:a}
function Di(a,b){return a.C>=b.G||a.G<=b.C||a.l>=b.u||a.u<=b.l?!1:!0}function Li(a,b){return!Di(a,b)||a.h>=b.s||a.s<=b.h?!1:!0}function ni(a,b,c){var d=0;a=q(a);for(var e=a.next();!e.done;e=a.next())d+=e.value.Lc(b,c);return d}function yi(a,b,c){this.d=a;this.P=b;this.R=c}function Ni(a,b,c){this.d=-a;this.P=b;this.R=c}function Oi(a,b,c){this.d=-a;this.P=-b;this.R=-c}function zi(a,b,c){this.d=a;this.P=-b;this.R=-c}f=yi.prototype;f.ub=function(){return 0};f.ec=function(){return this.P};f.dc=function(){return this.d};
f.Eb=function(){return this.R};f.Db=function(){return this.d};f.raw=function(a,b,c){this.d=a;this.P=b;this.R=c;return this};f.Se=function(){return new P(this.ec(),this.dc(),this.Eb(),this.Db())};f.da=function(a,b,c){a=new yi(a,b,c);a.source=this.source;return a};f.hh=function(a,b,c){if(!this.Kg){var d=new S(this.P+a,this.d-b);d.source=this;c.push(d)}this.ng||(a=new S(this.R-a,this.d-b),a.source=this,c.push(a))};f.df=function(a,b){return new S(this.P+a,this.d+b)};
f.ue=function(a,b){return b>this.d||b<this.d||a<this.P||a>=this.R?!1:!0};f.jf=function(a){return a<this.P?new S(this.P,this.d):a>this.R?new S(this.R,this.d):new S(a,this.d)};f.Tf=function(a,b){if(this.d>a.u||this.d<=a.l||this.P>=a.G||this.R<=a.C)return!1;this.P<a.C&&b.push(this.da(this.d,this.P,a.C));this.R>a.G&&b.push(this.da(this.d,a.G,this.R));return!0};f.ug=function(a,b){this.d>a.u||this.d<=a.l||this.P>=a.G||this.R<=a.C||b.push(this.da(this.d,Math.max(this.P,a.C),Math.min(this.R,a.G)))};
f.Ng=function(){return new Hh(this.P,this.R,this.d,this.d)};f.rotate=function(a){switch(a){case 0:return(new yi).raw(this.d,this.P,this.R);case 1:return(new Ni).raw(this.d,this.P,this.R);case 2:return(new Oi).raw(this.d,this.P,this.R);case 3:return(new zi).raw(this.d,this.P,this.R)}};f.pf=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new yi).raw(this.d+b,this.P+a,this.R+a)};f=Ni.prototype;f.ub=function(){return 1};f.ec=function(){return-this.d};f.dc=function(){return this.P};
f.Eb=function(){return-this.d};f.Db=function(){return this.R};f.raw=yi.prototype.raw;f.Se=yi.prototype.Se;f.da=function(a,b,c){a=new Ni(-a,b,c);a.source=this.source;return a};f.hh=function(a,b,c){if(!this.Kg){var d=new S(-this.d+a,this.P+b);d.source=this;c.push(d)}this.ng||(a=new S(-this.d+a,this.R-b),a.source=this,c.push(a))};f.df=function(a,b){return new S(-this.d-b,this.P+a)};f.ue=function(a,b){return a>-this.d||a<-this.d||b<this.P||b>=this.R?!1:!0};
f.jf=function(a,b){return b<this.P?new S(-this.d,this.P):b>this.R?new S(-this.d,this.R):new S(-this.d,b)};f.Tf=function(a,b){if(-this.d>=a.G||-this.d<a.C||this.P>=a.u||this.R<=a.l)return!1;this.P<a.l&&b.push(this.da(this.d,this.P,a.l));this.R>a.u&&b.push(this.da(this.d,a.u,this.R));return!0};f.ug=function(a,b){-this.d>=a.G||-this.d<a.C||this.P>=a.u||this.R<=a.l||b.push(this.da(this.d,Math.max(this.P,a.l),Math.min(this.R,a.u)))};f.Ng=function(){return new Hh(-this.d,-this.d,this.P,this.R)};
f.rotate=function(a){switch(a){case 0:return(new Ni).raw(this.d,this.P,this.R);case 1:return(new Oi).raw(this.d,this.P,this.R);case 2:return(new zi).raw(this.d,this.P,this.R);case 3:return(new yi).raw(this.d,this.P,this.R)}};f.pf=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Ni).raw(this.d-a,this.P+b,this.R+b)};f=Oi.prototype;f.ub=function(){return 2};f.ec=function(){return-this.P};f.dc=function(){return-this.d};f.Eb=function(){return-this.R};f.Db=function(){return-this.d};
f.raw=yi.prototype.raw;f.Se=yi.prototype.Se;f.da=function(a,b,c){a=new Oi(-a,-b,-c);a.source=this.source;return a};f.hh=function(a,b,c){if(!this.Kg){var d=new S(-this.P-a,-this.d+b);d.source=this;c.push(d)}this.ng||(a=new S(-this.R+a,-this.d+b),a.source=this,c.push(a))};f.df=function(a,b){return new S(-this.P-a,-this.d-b)};f.ue=function(a,b){return b>-this.d||b<-this.d||a>-this.P||a<=-this.R?!1:!0};f.jf=function(a){return a<-this.R?new S(-this.R,-this.d):a>-this.P?new S(-this.P,-this.d):new S(a,-this.d)};
f.Tf=function(a,b){if(-this.d>=a.u||-this.d<a.l||-this.R>=a.G||-this.P<=a.C)return!1;-this.R<a.C&&b.push(this.da(this.d,-a.C,this.R));-this.P>a.G&&b.push(this.da(this.d,this.P,-a.G));return!0};f.ug=function(a,b){-this.d>=a.u||-this.d<a.l||-this.R>=a.G||-this.P<=a.C||b.push(this.da(this.d,Math.max(this.P,-a.G),Math.min(this.R,-a.C)))};f.Ng=function(){return new Hh(-this.R,-this.P,-this.d,-this.d)};
f.rotate=function(a){switch(a){case 0:return(new Oi).raw(this.d,this.P,this.R);case 1:return(new zi).raw(this.d,this.P,this.R);case 2:return(new yi).raw(this.d,this.P,this.R);case 3:return(new Ni).raw(this.d,this.P,this.R)}};f.pf=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Oi).raw(this.d-b,this.P-a,this.R-a)};f=zi.prototype;f.ub=function(){return 3};f.ec=function(){return this.d};f.dc=function(){return-this.P};f.Eb=function(){return this.d};f.Db=function(){return-this.R};
f.raw=yi.prototype.raw;f.Se=yi.prototype.Se;f.da=function(a,b,c){a=new zi(a,-b,-c);a.source=this.source;return a};f.hh=function(a,b,c){if(!this.Kg){var d=new S(this.d-a,-this.P-b);d.source=this;c.push(d)}this.ng||(a=new S(this.d-a,-this.R+b),a.source=this,c.push(a))};f.df=function(a,b){return new S(this.d+b,-this.P-a)};f.ue=function(a,b){return a>this.d||a<this.d||b>-this.P||b<=-this.R?!1:!0};f.jf=function(a,b){return b<-this.R?new S(this.d,-this.R):b>-this.P?new S(this.d,-this.P):new S(this.d,b)};
f.Tf=function(a,b){if(this.d>a.G||this.d<=a.C||-this.R>=a.u||-this.P<=a.l)return!1;-this.R<a.l&&b.push(this.da(this.d,-a.l,this.R));-this.P>a.u&&b.push(this.da(this.d,this.P,-a.u));return!0};f.ug=function(a,b){this.d>a.G||this.d<=a.C||-this.R>=a.u||-this.P<=a.l||b.push(this.da(this.d,Math.max(this.P,-a.u),Math.min(this.R,-a.l)))};f.Ng=function(){return new Hh(this.d,this.d,-this.R,-this.P)};
f.rotate=function(a){switch(a){case 0:return(new zi).raw(this.d,this.P,this.R);case 1:return(new yi).raw(this.d,this.P,this.R);case 2:return(new Ni).raw(this.d,this.P,this.R);case 3:return(new Oi).raw(this.d,this.P,this.R)}};f.pf=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new zi).raw(this.d+a,this.P-b,this.R-b)};
function Pi(a,b){function c(){for(var n=new sb(Qc),r=q(a),p=r.next();!p.done;p=r.next())p=p.value,n.add(p),n.add(p.ca);r=q(a);for(p=r.next();!p.done;p=r.next())if(p=p.value,!p.remove){var v=n.get(p);v!=p&&(p.replace([v]),p.ca.replace([v.ca]))}return n.elements}function d(){for(var n=q(m),r=n.next();!r.done;r=n.next()){r=r.value;var p=r.x&-524288,v=r.y&-524288,z=!1;r.x<=p+256?(r.x=p,z=!0):r.x>=p+524288-256&&(r.x=p+524288,z=!0);r.y<=v+256?(r.y=v,z=!0):r.y>=v+524288-256&&(r.y=v+524288,z=!0);if(z){v=
q(r.inputs);for(p=v.next();!p.done;p=v.next())p.value.hg=!0;r=q(r.outputs);for(p=r.next();!p.done;p=r.next())p.value.hg=!0}}}function e(n,r,p){var v=Q(r,n.g,n.c),z=Q(r,n.B,n.w),y=Q(n,r.g,r.c),x=Q(n,r.B,r.w);if(-256>y&&256<x&&(-256>v&&256<z||256<v&&-256>z)||256<y&&-256>x&&(-256>v&&256<z||256<v&&-256>z)){v/=v-z;z=1-v;x=new S(Math.round(n.g*z+n.B*v),Math.round(n.c*z+n.w*v));v=n.Ya(n.g,n.c,x.x,x.y);z=n.Ya(x.x,x.y,n.B,n.w);y=r.Ya(r.g,r.c,x.x,x.y);x=r.Ya(x.x,x.y,r.B,r.w);var C=hd(v),A=hd(z),D=hd(y),H=hd(x);
n.replace([v,z]);n.ca.replace([A,C]);r.replace([y,x]);r.ca.replace([H,D]);p.push(v,z,y,x);p.push(C,A,D,H);n=!0}else n=!1;return n}function h(n,r){if(!n.remove){for(var p=q(m),v=p.next();!v.done;v=p.next())if(v=v.value,v.x!=n.g||v.y!=n.c)if(v.x!=n.B||v.y!=n.w){var z=n.df(v.x,v.y);if(!(0>=z.x||z.x>=n.length||-256>z.y||256<z.y)){p=n.Ya(n.g,n.c,v.x,v.y);v=n.Ya(v.x,v.y,n.B,n.w);z=n.Ya(p.B,p.w,p.g,p.c);var y=n.Ya(v.B,v.w,v.g,v.c);p.ca=z;z.ca=p;v.ca=y;y.ca=v;n.replace([p,v]);n.ca.replace([y,z]);h(p,r);h(v,
r);h(z,r);h(y,r);return}}r.push(n)}}for(var g=[],k=q(a),l=k.next();!l.done;l=k.next())l=l.value,l.remove||g.push(l);a=g;a=c();b&&(a=Qi(null,a,e));var m=new sb(Dd);b=q(a);for(l=b.next();!l.done;l=b.next())g=l.value,k=new S(g.g,g.c),k.inputs=[],k.outputs=[],k.a=1,g.Ga=m.Ca(k),g.Ga.outputs.push(g),g.Ga.a++,k=new S(g.B,g.w),k.inputs=[],k.outputs=[],k.a=1,g.ka=m.Ca(k),g.ka.inputs.push(g),g.ka.a++;m=m.elements;d();m=Qi(null,m,function(n,r,p){if(256>(Math.abs(r.x-n.x)+Math.abs(r.y-n.y))*Math.SQRT1_2){var v=
new S(n.x*n.a+r.x*r.a,n.y*n.a+r.y*r.a);v.a=n.a+r.a;v.x/=v.a;v.y/=v.a;v.round();v.inputs=n.inputs.concat(r.inputs);v.outputs=n.outputs.concat(r.outputs);n=q(v.inputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.ka=v,r.hg=!0;n=q(v.outputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.Ga=v,r.hg=!0;p.push(v);p=!0}else p=!1;return p});d();for(b=0;b<a.length;b++)g=a[b],g.remove?a.splice(b--,1):g.Ga==g.ka?(g.replace([]),g.ca.replace([]),a.splice(b--,1)):g.hg&&(k=g.Ya(g.Ga.x,g.Ga.y,g.ka.x,g.ka.y),l=hd(k),
g.replace([k]),g.ca.replace([l]),a.splice(b++,1,k,l)),delete g.Ga,delete g.ka,delete g.hg;(function(){for(var n=[],r=q(a),p=r.next();!p.done;p=r.next())h(p.value,n);a=n})();return a=c()}
function Qi(a,b,c){var d=[];if(a)for(var e=0;e<a.length;e++){var h=a[e];if(h.remove)a.splice(e--,1);else for(var g=0;g<b.length;g++){var k=b[g];if(k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);a.splice(e--,1);break}}}for(e=0;e<b.length;e++)if(h=b[e],h.remove)b.splice(e--,1);else for(g=e+1;g<b.length;g++)if(k=b[g],k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);b.splice(e--,1);break}a&&(b=a.concat(b));return d.length?Qi(b,d,c):b};var Ri,Si,Ti,Ui,Vi=0;
function Wi(){function a(c){function d(x,C,A){return Bh(C,A,x.ub()).y>=x.d}function e(x){x.Na=0;var C=x.g,A=x.c;if(1==x.action)if(x.lb.length){var D=x.lb[0],H=D.ec()-C;D=D.dc()-A;x.Na+=Math.sqrt(H*H+D*D);H=q(x.lb);for(D=H.next();!D.done;D=H.next())A=D.value,x.Na+=A.R-A.P,C=A.Eb(),A=A.Db()}else H=x.Y.Eb(),D=x.Y.Db(),C=H-C,A=D-A,x.Na+=Math.sqrt(C*C+A*A),C=H,A=D;else if(2==x.action)if(x.lb.length)for(D=x.lb[0],H=D.Eb()-C,D=D.Db()-A,x.Na+=Math.sqrt(H*H+D*D),H=q(x.lb),D=H.next();!D.done;D=H.next())A=D.value,
x.Na+=A.R-A.P,C=A.ec(),A=A.dc();else H=x.Y.Eb(),D=x.Y.Db(),C=H-C,A=D-A,x.Na+=Math.sqrt(C*C+A*A),C=H,A=D;C=x.B-C;A=x.w-A;x.Na+=Math.sqrt(C*C+A*A)}function h(x){x.Xb=0;for(var C=q(x),A=C.next();!A.done;A=C.next())A=A.value,x.Xb=A.complete?x.Xb+.5*A.Na:x.Xb+A.Na}for(var g=null,k=0,l=0;l<c.length;l++)if(!c[l].complete){k=l;g=c[l];break}if(!g)return!0;if(1==g.action){g.Y=g.Y.next;l=g.Y.Eb();var m=g.Y.Db();if(l==g.g&&m==g.c||l==g.B&&m==g.w)return!1;for(var n=g.Y,r=g.Y.next;0<k;){var p=c[k-1],v=Q(p,l,m);
if(1==p.kb&&0<=v||2==p.kb&&0>=v)p=new P(p.g,p.c,g.B,g.w),p.action=g.action,p.complete=g.complete,p.kb=g.kb,p.Y=g.Y,p.lb=g.lb,p.max=p,c=c.slice(),c.splice(--k,2,p),kb(Ti,c),g=p;else break}p=!d(n,g.B,g.w)&&d(r,g.B,g.w);if(g.lb.length){if(Bh(r.Eb(),r.Db(),n.ub()).y>n.d||p){l=[];m=g.lb[0];m=new P(g.g,g.c,m.ec(),m.dc());m.Na=m.length;m.action=0;m.kb=g.action;l.push(m);m=q(g.lb);for(n=m.next();!n.done;n=m.next())n=n.value,n=new P(n.ec(),n.dc(),n.Eb(),n.Db()),n.Na=n.length,n.complete=1,n.action=0,n.kb=g.action,
l.push(n);m=g.lb[g.lb.length-1];m=new P(m.Eb(),m.Db(),g.B,g.w);m.Na=m.length;m.action=0;m.kb=g.kb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(da(l)));e(g);h(c);kb(Ti,c)==c&&kb(Ri,c);return!1}g.lb.push(r)}else{v=r.Eb();var z=r.Db();if(0<=Q(g.max,l,m)&&(g.max=new P(g.g,g.c,l,m),Bh(v,z,n.ub()).y<n.d&&!d(r,g.g,g.c))){if(p)return n=[],r=new P(g.g,g.c,l,m),r.Na=r.length,r.action=0,r.kb=g.action,n.push(r),l=new P(l,m,g.B,g.w),l.Na=l.length,l.action=0,l.kb=g.kb,n.push(l),c=c.slice(),c.splice.apply(c,
[k,1].concat(da(n))),e(g),h(c),kb(Ti,c)==c&&kb(Ri,c),!1;g.lb.push(r)}}e(g);h(c);kb(Ri,c)}else if(2==g.action){g.Y=g.Y.mb;l=g.Y.Eb();m=g.Y.Db();if(l==g.g&&m==g.c||l==g.B&&m==g.w)return!1;n=g.Y.next;for(r=g.Y;0<k;)if(p=c[k-1],v=Q(p,l,m),1==p.kb&&0<=v||2==p.kb&&0>=v)p=new P(p.g,p.c,g.B,g.w),p.action=g.action,p.complete=g.complete,p.kb=g.kb,p.Y=g.Y,p.lb=g.lb,p.max=p,c=c.slice(),c.splice(--k,2,p),kb(Ti,c),g=p;else break;p=!d(n,g.B,g.w)&&d(r,g.B,g.w);if(g.lb.length){if(Bh(r.ec(),r.dc(),n.ub()).y>n.d||p){l=
[];m=g.lb[0];m=new P(g.g,g.c,m.Eb(),m.Db());m.Na=m.length;m.action=0;m.kb=g.action;l.push(m);m=q(g.lb);for(n=m.next();!n.done;n=m.next())n=n.value,n=new P(n.Eb(),n.Db(),n.ec(),n.dc()),n.Na=n.length,n.complete=1,n.action=0,n.kb=g.action,l.push(n);m=g.lb[g.lb.length-1];m=new P(m.ec(),m.dc(),g.B,g.w);m.Na=m.length;m.action=0;m.kb=g.kb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(da(l)));e(g);h(c);kb(Ti,c)==c&&kb(Ri,c);return!1}g.lb.push(r)}else if(v=r.ec(),z=r.dc(),0>=Q(g.max,l,m)&&(g.max=new P(g.g,
g.c,l,m),Bh(v,z,n.ub()).y<n.d&&!d(r,g.g,g.c))){if(p)return n=[],r=new P(g.g,g.c,l,m),r.Na=r.length,r.action=0,r.kb=g.action,n.push(r),l=new P(l,m,g.B,g.w),l.Na=l.length,l.action=0,l.kb=g.kb,n.push(l),c=c.slice(),c.splice.apply(c,[k,1].concat(da(n))),e(g),h(c),kb(Ti,c)==c&&kb(Ri,c),!1;g.lb.push(r)}e(g);h(c);kb(Ri,c)}else{l=[];l.cmp=function(x,C){return x.t<C.t?-1:x.t>C.t?1:x.we<C.we?-1:x.we>C.we?1:x.Y.next==C.Y?-x.we:x.Y.mb==C.Y?x.we:0};m=q(Ui);for(n=m.next();!n.done;n=m.next())if(n=n.value,!n.disabled)if(r=
Bh(g.g,g.c,n.ub()),p=Bh(g.B,g.w,n.ub()),p.y==r.y){if(p.y==n.d){var y=z=void 0;v=void 0;if(p.x>r.x)z=Math.max(r.x,n.P),y=Math.min(p.x,n.R),v=1;else if(p.x<r.x)z=Math.max(p.x,n.P),y=Math.min(r.x,n.R),v=-1;else continue;z>=y||(z=Math.round(.5*z+.5*y),kb(l,{t:(z-r.x)/(p.x-r.x),eg:-1,we:v,Y:n,x:z,y:n.d}))}}else v=p.x<r.x?-1:1,z=(n.d-r.y)/(p.y-r.y),0>z||1<z||(y=Math.round(r.x+(p.x-r.x)*z),p.y<r.y?y<n.P||y>n.R||kb(l,{t:z,eg:0,we:v,Y:n,x:y,y:n.d}):p.y>r.y&&!(y<n.P)&&(y>n.R||kb(l,{t:z,eg:1,we:v,Y:n,x:y,y:n.d})));
m=null;for(n=1;n<l.length;n++)if(r=l[n-1],p=l[n],0==r.eg&&1==p.eg&&r.t<p.t){m=r;break}if(!m)return g.complete=1,kb(Ri,c),!1;l=g.da();l.action=1;l.max=l;l.kb=g.kb;l.Y=m.x==m.Y.R?m.Y:m.Y.mb;l.lb=[];n=c.slice();n[k]=l;n.Xb=0;kb(Ti,n)==n&&kb(Ri,n);l=g.da();l.action=2;l.max=l;l.kb=g.kb;l.Y=m.x==m.Y.P?m.Y.mb:m.Y;l.lb=[];c=c.slice();c[k]=l;c.Xb=0;kb(Ti,c)==c&&kb(Ri,c)}return!1}for(;Vi&&Ri.length;){Si++;Vi--;var b=Ri.shift();if(a(b))return Ri=null,b}if(0==Ri.length)return Ri=null}
function Xi(a,b,c,d){var e=Ui;Ui=e;Ti=[];Ti.cmp=function(l,m){if(l.length<m.length)return-1;if(l.length>m.length)return 1;for(var n=0;n<l.length;n++){var r=l[n],p=m[n];if(r.g<p.g)return-1;if(r.g>p.g)return 1;if(r.c<p.c)return-1;if(r.c>p.c)return 1;if(r.B<p.B)return-1;if(r.B>p.B)return 1;if(r.w<p.w)return-1;if(r.w>p.w)return 1;if(r.action<p.action)return-1;if(r.action>p.action)return 1}return 0};a=(new S(a,b)).round();c=(new S(c,d)).round();b=null;var h=NaN,g=q(e.If);for(d=g.next();!d.done;d=g.next()){d=
d.value;var k=Mi(d,a.x,a.y);k>=h||(h=k,b=d)}a=b.jf(a.x,a.y);b=null;h=NaN;e=q(e.If);for(d=e.next();!d.done;d=e.next())d=d.value,g=Mi(d,c.x,c.y),g>=h||(h=g,b=d);c=b.jf(c.x,c.y);Si=0;Ri=[];Ri.cmp=function(l,m){return l.Xb<m.Xb?-1:1};a=new P(a.x,a.y,c.x,c.y);a.Na=a.length;a.action=0;a=[a];a.Xb=0;kb(Ri,a);return Wi()};var ig,Yi,Zi,$i,aj=new P(0,0,1,0),bj=4095/741455.429632,cj=[];cj.cmp=function(a,b){return a.index-b.index};var dj=new sb(function(a,b){return a.y<b.y?-1:a.y>b.y?1:a.aa<b.aa?-1:a.aa>b.aa?1:a.ba.name<b.ba.name?-1:a.ba.name>b.ba.name?1:Qe(a.W,b.W)});function ej(a,b){return a.y>b.y?-1:a.y<b.y?1:0}function fj(a,b){a=af(a.src.aa).mk;b=af(b.src.aa).mk;return a-b}function ri(a,b,c,d){var e=new jg;e.y=a;e.aa=b;e.ba=c;e.W=d;e.yd=[];return dj.Ca(e)}var oi=0;
function gj(){if(0==oi){if(Uh>=Wh+2)var a=!1;else{var b=[Zh,ci,Zh];a=b[(Uh+1)%b.length].call()}return a}if(1==oi){var c=cj.slice();t.Hf();for(var d=q(c),e=d.next();!e.done;e=d.next())e.value.Da=t.Da;var h=q(c);for(e=h.next();!e.done;e=h.next())for(var g=e.value,k=0;4>k;k++){var l=hj(g,k);l&&l.Da!=t.Da&&(l.Da=t.Da,kb(cj,l))}ig=[];oi++;Yi=0;return!0}if(2==oi){var m=cj[Yi];if(m)return ij(m),Yi++,!0;oi++;Yi=0}if(3==oi){t.Hf();Zi=t.Da;var n=cj[Yi];if(n){for(var r=0;4>r;r++){var p=hj(n,r);if(p&&p.Da!=Zi){var v=
n,z=p,y=[];switch(r){case 0:var x=gf(v.index);var C=x.x+512;for(var A=q(v.ga),D=A.next();!D.done;D=A.next()){var H=D.value;(H.g<=C||H.B<=C)&&y.push(H)}C=x.x-512;var I=q(z.ga);for(D=I.next();!D.done;D=I.next()){var M=D.value;(M.g>=C||M.B>=C)&&y.push(M)}break;case 1:x=gf(v.index);C=x.y+512;var la=q(v.ga);for(D=la.next();!D.done;D=la.next()){var pa=D.value;(pa.c<=C||pa.w<=C)&&y.push(pa)}C=x.y-512;var Z=q(z.ga);for(D=Z.next();!D.done;D=Z.next()){var aa=D.value;(aa.c>=C||aa.w>=C)&&y.push(aa)}break;case 2:x=
gf(z.index);C=x.x+512;var Ab=q(z.ga);for(D=Ab.next();!D.done;D=Ab.next()){var eb=D.value;(eb.g<=C||eb.B<=C)&&y.push(eb)}C=x.x-512;var Xb=q(v.ga);for(D=Xb.next();!D.done;D=Xb.next()){var rc=D.value;(rc.g>=C||rc.B>=C)&&y.push(rc)}break;case 3:x=gf(z.index);C=x.y+512;var Kb=q(z.ga);for(D=Kb.next();!D.done;D=Kb.next()){var sc=D.value;(sc.c<=C||sc.w<=C)&&y.push(sc)}C=x.y-512;var Aa=q(v.ga);for(D=Aa.next();!D.done;D=Aa.next()){var Db=D.value;(Db.c>=C||Db.w>=C)&&y.push(Db)}}Pi(y,!1)}}n.Da=Zi;Yi++;return!0}oi++;
Yi=0}if(4==oi){var zf=cj[Yi];if(zf)return zf.evaluate(),Yi++,!0;oi++;Yi=0}if(5==oi){var sa=cj[Yi];if(sa){for(var Af=q(sa.fk),Be=Af.next();!Be.done;Be=Af.next())Be.value.evaluate();Yi++;return!0}oi++;Yi=0}if(6==oi){var Bf=cj[Yi];if(Bf)return jj(Bf),Yi++,!0;oi++;Yi=0}if(7==oi){var kc=cj[Yi];if(kc)return kj(kc),Yi++,!0;oi++;Yi=0}if(8==oi)return hg(),oi++,!0;if(9==oi)return Ye=kf(),lj.Cd=new jg,lj.Cd.W=new le,lj.Cd.W.name="creaseShading",lj.Cd.W.Aa=1,lj.Cd.W.ud=new T(0,0,0,127.5),lj.Cd.D=t.j.qa.get("creaseShading"),
mj=0,lj.Xe=Array(bf.elements.length),nj=0,oi++,!0;if(10==oi){if(oj())return!0;oi++;return!0}if(11==oi){if($i&&0!=t.f%1)return!1;for(;Zf.length&&Zf[0].Ue;)Zf.shift(),$f++;Ze.length=0;$e=$f;for(var Cf=q(Zf),hb=Cf.next();!hb.done;hb=Cf.next()){var Rd=hb.value;if(Rd.la>Wh+1)break;Ze.push(Rd)}var Df=q(Ze);for(hb=Df.next();!hb.done;hb=Df.next())for(var Ce=hb.value,Sd=0;Sd<Ce.ic.length;Sd++)Ce.ic[Sd].Oc.aa>=$e||Ce.ic.splice(Sd--,1);for(var Td=0;Td<dj.elements.length;Td++){var Ef=dj.elements[Td];Ef.aa<$f&&
(dj.elements.splice(Td--,1),Ef.Yc.parent=null,ge(Ef.Yc))}var De=q(Ze);for(hb=De.next();!hb.done;hb=De.next()){var ib=hb.value;ib.la<=Vh||(ib.zb.x/=ib.Sc,ib.zb.y/=ib.Sc,ib.zb.z/=ib.Sc,ib.zb.x/=255,ib.zb.y/=255,ib.zb.z/=255)}var Nb=q(Ze);for(hb=Nb.next();!hb.done;hb=Nb.next()){var Ff=hb.value;if(!(Ff.la<=Vh))for(var vd=q(Ff),dd=vd.next();!dd.done;dd=vd.next())for(var Gf=q(dd.value.tb),Eb=Gf.next();!Eb.done;Eb=Gf.next())Eb.value.create()}xf?wf=!0:Tf();Vh=Wh+1;for(var Hf=q(t.Ai.elements),Ee=Hf.next();!Ee.done;Ee=
Hf.next())pj(Ee.value);for(var If=q(dj.elements),Jf=If.next();!Jf.done;Jf=If.next()){var Ja=Jf.value;if(!Ja.Yc){var wb=af(Ja.aa);if(wb&&!(wb.la>Vh)){var Lc=Ja;Lc.Ab.cmp=sd;for(var Ob=q(Lc.yd),Za=Ob.next();!Za.done;Za=Ob.next())for(var wc=Za.value,Ud=0;Ud<wc.length;Ud++)wc[Ud]=kb(Lc.Ab,wc[Ud]);for(var lc=0;lc<Lc.Ab.length;lc++)Lc.Ab[lc].index=lc;var Kf=q(Lc.yd);for(Za=Kf.next();!Za.done;Za=Kf.next())for(var wd=Za.value,$b=0;$b<wd.length;$b++)wd[$b]=wd[$b].index;delete Lc.Ab.cmp;Ja.compile();delete Ja.yd;
Ja.Yc=new lg(Ja,"worldMesh");isNaN(Ja.facing)||(Ja.Yc.facing=Ja.facing);Ja.Yc.ja=wb.ja;Ja.Yc.Vg=!0;Ja.Yc.Ma=["portalLightIndex",wb.Be,!0];Infinity!=Ja.y?(Ja.Yc.y=Ja.y,V(Ja.Yc,t.Fe)):V(Ja.Yc,t.dk);delete Ja.y;0==Ja.facing&&(Ja.D=t.j.qa.get("physicalThreshold"))}}}oi++;return!0}if(12==oi){for(var qa=[],Mc=q(Ze),xc=Mc.next();!xc.done;xc=Mc.next())for(var Fe=q(xc.value),Nc=Fe.next();!Nc.done;Nc=Fe.next())qa=qa.concat(Nc.value);var Ge=[],Vd=[],Wd=[],Lf=[],He=q(Ze);for(xc=He.next();!xc.done;xc=He.next()){var Mf=
q(xc.value);for(Nc=Mf.next();!Nc.done;Nc=Mf.next())for(var Xd=q(Nc.value.tb),Fb=Xd.next();!Fb.done;Fb=Xd.next()){var Ie=Fb.value;af(Ie.ma.T.index)&&af(Ie.Pa.T.index)&&Lf.push(Ie)}}var xd=q(Lf);for(Fb=xd.next();!Fb.done;Fb=xd.next()){var W=Fb.value;if(W instanceof Bi){if(!W.Mc){var Fa=new Hh(-40675,40675,-W.a+40675,W.a-40675);W.bb=[];var ya=new Ni(Fa.C,Fa.l,Fa.u);ya=ya.rotate(W.direction);ya=ya.translate(W.z,W.x);ya.source=Fa;W.bb.push(ya);ya=new yi(Fa.l,Fa.C,Fa.G);ya=ya.rotate(W.direction);ya=ya.translate(W.z,
W.x);ya.source=Fa;W.bb.push(ya);ya=new zi(Fa.G,Fa.u,Fa.l);ya=ya.rotate(W.direction);ya=ya.translate(W.z,W.x);ya.source=Fa;W.bb.push(ya);ya=new Oi(Fa.u,Fa.G,Fa.C);ya=ya.rotate(W.direction);ya=ya.translate(W.z,W.x);ya.source=Fa;W.bb.push(ya);Fa=Fa.rotate(W.direction);Fa=Fa.translate(W.z,W.x);Fa.di=W;Vd.push(Fa)}}else if(W instanceof Ci){var ed=new Hh(-40675,40675,-W.a+40675,W.a-40675);ed=ed.rotate(W.direction);ed=ed.translate(W.z,W.x);Wd.push(ed)}else if(W instanceof Ei){var yd=new Hh(-W.Jb+40675,W.Jb-
40675,-W.Bd-40675,W.Bd+40675);yd=yd.translate(W.Ka.C,W.Ka.l);yd=yd.rotate(W.direction);Ge.push(yd);var zd=new Hh(-W.Jb,W.Jb,-W.Bd,W.Bd);zd=zd.translate(W.Ka.C,W.Ka.l);zd=zd.rotate(W.direction);qa=Fh(qa,[zd])}}for(var mc=[],Oc=0;Oc<qa.length;Oc++)for(var Je=qa[Oc],Ke=Oc+1;Ke<qa.length;Ke++){var Nf=qa[Ke];if(Je.platform.T!=Nf.platform.T||25E3<Math.abs(Nf.platform.y-Je.platform.y)){var Of=Fi(Je,Nf);Of&&mc.push(Of)}}qa=Jh(qa,1);qa=qa.concat(mc);qa=Ch(qa,40675,40675);qa=Jh(qa);qa=Kh(qa);qa=qa.concat(Ge);
qa=qa.concat(Wd);for(var Yd=[],Zd=q(qa),Pb=Zd.next();!Pb.done;Pb=Zd.next())Nh(Pb.value,Yd);var Pc=q(Vd);for(Pb=Pc.next();!Pb.done;Pb=Pc.next()){var Pf=Pb.value;Yd.push(Pf.di.bb[1],Pf.di.bb[3])}qa=qa.concat(Vd);Fh(Yd,qa);for(var ac=Sh(Ph(Yd)),$d=0,Qf=q(ac),Le=Qf.next();!Le.done;Le=Qf.next())for(var ae=Le.value,fd=ae[ae.length-1],Gg=q(ae),be=Gg.next();!be.done;be=Gg.next()){var ce=be.value;ce.index=$d++;fd.next=ce;ce.mb=fd;fd=ce}for(var Me=[],nc=q(ac),gd=nc.next();!gd.done;gd=nc.next())Me=Me.concat(gd.value);
ac=Me;ac.If=qa;var Rf=q(Vd);for(Pb=Rf.next();!Pb.done;Pb=Rf.next()){var jb=Pb.value.di;jb.$c=[jb.bb[1].mb,jb.bb[1].next,jb.bb[3].mb,jb.bb[3].next];jb.bb[0].mb=jb.$c[0];jb.bb[0].next=jb.$c[3];jb.bb[2].mb=jb.$c[2];jb.bb[2].next=jb.$c[1];ac.push(jb.bb[0]);ac.push(jb.bb[2]);var Wa=jb;Wa.$c[0]&&Wa.$c[1]&&Wa.$c[2]&&Wa.$c[3]&&(Wa.$c[0].next=Wa.bb[1],Wa.$c[1].mb=Wa.bb[1],Wa.$c[2].next=Wa.bb[3],Wa.$c[3].mb=Wa.bb[3],Wa.bb[0].disabled=!0,Wa.bb[1].disabled=!1,Wa.bb[2].disabled=!0,Wa.bb[3].disabled=!1,Wa.bb[0].y=
-5E4,Wa.bb[1].y=0,Wa.bb[2].y=-5E4,Wa.bb[3].y=0)}Ui=ac;oi=0}return!1}function qj(a,b){var c=new sb(Dd);a=q(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var e=new sb(id);e.x=d.g;e.y=d.c;e=c.Ca(e);e.add(d);b&&(d=hd(d),e=new sb(id),e.x=d.g,e.y=d.c,e=c.Ca(e),e.add(d))}return c}
function rj(a){var b=[];b.bound=new Yc;var c=0,d=a.elements[c],e=d.elements.pop();d.elements.length||a.elements.splice(c,1);if(!e)return null;for(;;){b.push(e);b.bound.Ca(e.B,e.w);if(e.B==b[0].g&&e.w==b[0].c)return b;c=a.contains(new S(e.B,e.w));if(0>c)return null;d=a.elements[c];e=tb(d,cd(e))-1;0>e&&(e+=d.elements.length);e=d.elements.splice(e,1)[0];d.elements.length||a.elements.splice(c,1)}}
function sj(a){for(var b=[],c=a[a.length-1],d=0;d<a.length;d++){var e=a[d];b.push(Rc(c,e));c=e}a.Th=b;a.Lf=[];a.Xi=0;b=q(a.Th);for(c=b.next();!c.done;c=b.next())c=c.value,0>c?(a.Xi-=c,a.Lf.push(-c)):a.Lf.push(0)}
function tj(a,b){var c=null;b=q(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.l<=d.bound.l||a.bound.h<=d.bound.h||a.bound.u>=d.bound.u||a.bound.s>=d.bound.s)){if(c){if(d.bound.l<=c.bound.l)continue;if(d.bound.h<=c.bound.h)continue;if(d.bound.u>=c.bound.u)continue;if(d.bound.s>=c.bound.s)continue}0>=Vc(a[0].B,a[0].w,d)||(c=d)}c&&c.ib.push(a)}
function uj(a){if(0==a.ib.length)return a;var b=[a].concat(a.ib),c={};c.Xb=Number.NEGATIVE_INFINITY;for(var d=0;d<b.length;d++)for(var e=b[d],h=d+1;h<b.length;h++)for(var g=b[h],k=0;k<e.length;k++)for(var l=(k+1)%e.length,m=0;m<g.length;m++)c=vj(e,k,l,g,m,(m+1)%g.length,c,b);if(0>c.Xb)return console.log("could not solve holes"),a.ib=[],a;e=c.md[c.ka].Ya(c.md[c.ka].g,c.md[c.ka].c,c.Ed[c.d].g,c.Ed[c.d].c);d=e.Ya(e.B,e.w,e.g,e.c);e.ca=d;d.ca=e;b=[];for(h=0;h<c.ka;h++)b.push(c.md[h]);b.push(e);e=c.d;
for(h=0;h<c.Ed.length;h++)b.push(c.Ed[e]),++e==c.Ed.length&&(e=0);b.push(d);for(d=c.ka;d<c.md.length;d++)b.push(c.md[d]);if(c.md==a)return a.ib.splice(a.ib.indexOf(c.Ed),1),b.ib=a.ib,sj(b),uj(b);a.ib.splice(a.ib.indexOf(c.md),1,b);a.ib.splice(a.ib.indexOf(c.Ed),1);sj(b);return uj(a)}
function vj(a,b,c,d,e,h,g,k){function l(p,v){function z(D,H,I){if(H==D.g&&I==D.c||H==D.B&&I==D.w)return!1;H=D.df(H,I);return 0>=H.x||H.x>=D.length||-256>H.y||256<H.y?!1:!0}var y=Q(v,p.g,p.c),x=Q(v,p.B,p.w),C=Q(p,v.g,v.c),A=Q(p,v.B,v.w);if(-256>C&&256<A&&(-256>y&&256<x||256<y&&-256>x)||256<C&&-256>A&&(-256>y&&256<x||256<y&&-256>x)||z(p,v.g,v.c)||z(p,v.B,v.w)||z(v,p.g,p.c)||z(v,p.B,p.w))return!0}var m=a[c],n=d[h];m=new P(m.g,m.c,n.g,n.c);if(0==a.Lf[c]){if(0>=Q(a[b],m.B,m.w)||0>=Q(a[c],m.B,m.w))return g}else if(0>=
Q(a[b],m.B,m.w)&&0>=Q(a[c],m.B,m.w))return g;if(0==d.Lf[h]){if(0>=Q(d[e],m.g,m.c)||0>=Q(d[h],m.g,m.c))return g}else if(0>=Q(d[e],m.g,m.c)&&0>=Q(d[h],m.g,m.c))return g;if(k)for(k=q(k),n=k.next();!n.done;n=k.next()){var r=q(n.value);for(n=r.next();!n.done;n=r.next())if(l(m,n.value))return g}else for(k=q(a),n=k.next();!n.done;n=k.next())if(l(m,n.value))return g;k={};k.md=a;k.Ga=b;k.ka=c;k.Ed=d;k.eg=e;k.d=h;k.Y=m;wj(k);return k.Xb>g.Xb?k:g}
function wj(a){a.Xb=4095-a.Y.length*bj;var b=Rc(a.md[a.Ga],a.Y),c=b-a.md.Th[a.ka],d=Rc(a.Y,a.Ed[a.d]),e=d-a.Ed.Th[a.d];a.Xb+=.5/Math.PI*(a.md.Lf[a.ka]-(0>b?-b:0)-(0>c?-c:0)+(a.Ed.Lf[a.d]-(0>d?-d:0)-(0>e?-e:0)))*1048575}
function xj(a){if(3>a.length)return[];sj(a);if(0>=a.Xi)return[a];for(var b={Xb:Number.NEGATIVE_INFINITY},c=a.length-1,d=0;d<a.length;d++){for(var e=d+1,h=e+1;h<a.length;h++)b=vj(a,c,d,a,e,h,b),e=h;c=d}if(0>b.Xb)return console.log("could not convex path"),[a];h=new yj(a[b.ka].g,a[b.ka].c,a[b.d].g,a[b.d].c);c=new yj(a[b.d].g,a[b.d].c,a[b.ka].g,a[b.ka].c);h.ca=c;c.ca=h;d=[];e=[];for(var g=0;g<b.ka;g++)d.push(a[g]);d.push(h);for(h=b.d;h<a.length;h++)d.push(a[h]);for(h=b.ka;h<b.d;h++)e.push(a[h]);e.push(c);
return xj(d).concat(xj(e))}function zj(a){this.ga=null;this.h=Number.POSITIVE_INFINITY;this.s=Number.NEGATIVE_INFINITY;this.oa=this.floor=null;this.ea=a}zj.prototype.xf=function(a,b){if(this.s<=a.h||this.h>=a.s)b.push(this);else{if(this.h<a.h){var c=new zj(this.ea);c.h=this.h;c.s=a.h;c.floor=this.floor;c.oa=a.oa;b.push(c)}this.s>a.s&&(c=new zj(this.ea),c.h=a.s,c.s=this.s,c.floor=a.floor,c.oa=this.oa,b.push(c))}};function Jg(a,b,c){this.U=a;this.h=b;this.s=c;this.flags=0}
function Kg(a,b){this.ga=a;this.y=b;this.flags=0}function Lg(a,b){this.ga=a;this.y=b;this.flags=0}Kg.prototype.qg=function(){if(this.ca)return this.ca;this.ca=new Lg(this.ga,this.y);this.ca.flags=this.flags;return this.ca};Lg.prototype.qg=function(){if(this.ca)return this.ca;this.ca=new Kg(this.ga,this.y);this.ca.flags=this.flags;return this.ca};Jg.prototype.qg=function(){if(this.ca)return this.ca;this.ca=new Jg(hd(this.U),this.h,this.s);this.ca.flags=this.flags;return this.ca};function ff(a){this.index=a;this.Pg=this.Da=-2147483648;this.lk=new vb(this);this.Rc=new sb(Gb);this.vd=[];this.zh=new ub}function hj(a,b){a=hf(a.index);switch(b){case 0:if(0==a.x)break;return bf.get(jf(a.x-1,a.y));case 1:if(0==a.y)break;return bf.get(jf(a.x,a.y-1));case 2:if(8191==a.x)break;return bf.get(jf(a.x+1,a.y));case 3:if(8191!=a.y)return bf.get(jf(a.x,a.y+1))}return null}
function ij(a){function b(g,k){return g.ea.index<k.ea.index?-1:g.ea.index>k.ea.index?1:0}a.fk=[];a.ga=[];for(var c=q(a.Rc.elements),d=c.next();!d.done;d=c.next()){d=q(d.value.ga);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=e.da();hd(h);e.Jg&&(h.Ob=[e]);h.Dd=[a.ga];a.ga.push(h)}}Pi(a.ga.slice(),!0);a=q(a.ga);for(e=a.next();!e.done;e=a.next())c=e.value,c.Ob&&Sb(c.Ob,b),c.ca.Ob&&Sb(c.ca.Ob,b)}
ff.prototype.evaluate=function(){this.Bi=[];this.Ci=[];for(var a=qj(this.ga,!0),b=[],c=[];a.elements.length;){var d=rj(a);d&&(Uc(d)?c.push(d):(d.ib=[],b.push(d)))}a=q(c);for(c=a.next();!c.done;c=a.next())tj(c.value,b);a=[];b=q(b);for(c=b.next();!c.done;c=b.next())if(d=c.value,0==d.ib.length)a.push(d);else{sj(d);var e=q(d.ib);for(c=e.next();!c.done;c=e.next())sj(c.value);a.push(uj(d))}b=[];a=q(a);for(c=a.next();!c.done;c=a.next())b=b.concat(xj(c.value));a=q(b);for(c=a.next();!c.done;c=a.next())this.fk.push(new Aj(c.value,
this))};
function jj(a){function b(z,y){return z.cd<y.cd?-1:z.cd>y.cd?1:z.ea.aa<y.ea.aa?-1:z.ea.aa>y.ea.aa?1:Ej(z.X,y.X)}function c(z,y){var x=zc(1/60);var C=-1;for(var A=1;A<z.length;A++){var D=Math.abs(Rc(z[A-1].U,z[A].U));D<x&&(x=D,C=A)}if(0>C)y.push.apply(y,da(z));else{x=z[C-1];A=z[C];D=x.U.Ya(x.U.g,x.U.c,A.U.B,A.U.w);var H=hd(D);x.Uc&&(0>x.Uc.cd?x.Uc.splice(x.Uc.indexOf(x.U),2,D):x.Uc.splice(x.Uc.indexOf(A.U.ca),2,H));x.Nc&&(0<x.Nc.cd?x.Nc.splice(x.Nc.indexOf(x.U),2,D):x.Nc.splice(x.Nc.indexOf(A.U.ca),2,
H));x.U=D;z.splice(C,1);c(z,y)}}function d(z){var y=zc(1/60);var x=-1;for(var C=1;C<z.length;C++){var A=Math.abs(Rc(z[C-1],z[C]));A<y&&(y=A,x=C)}if(!(0>x)){y=z[x-1];C=z[x];A=y.Ya(y.g,y.c,C.B,C.w);var D=hd(A);A.Ic=y.Ic;y.Ic.splice(y.Ic.indexOf(y),2,A);C.ca&&(D.Ic=C.ca.Ic,C.ca.Ic.splice(C.ca.Ic.indexOf(C.ca),2,D));z.splice(x-1,2,A);d(z)}}for(var e=0,h=new sb(function(z,y){return z.y<y.y?-1:z.y>y.y?1:0}),g=q(a.Bi),k=g.next();!k.done;k=g.next()){var l=k.value,m=new sb(b);m.y=l.y;m=h.Ca(m);k=[];k.cd=l.cd;
k.ea=l.ea;k.X=l.X;k=m.Ca(k);k.push(l)}g=q(h.elements);for(l=g.next();!l.done;l=g.next()){l=l.value;m=q(l.elements);for(k=m.next();!k.done;k=m.next()){var n=k.value,r=new sb(Qc),p=q(n);for(k=p.next();!k.done;k=p.next()){var v=q(k.value);for(k=v.next();!k.done;k=v.next())k=k.value,r.remove(cd(k))||r.push(k)}n.length=0;for(r=qj(r.elements);r.elements.length;){p=rj(r);if(!p)break;p.y=l.y;p.cd=n.cd;p.ea=n.ea;p.X=n.X;p.index=e++;v=q(p);for(k=v.next();!k.done;k=v.next())k.value.Ic=p;n.push(p)}}l.ei=new sb(Qc);
m=q(l.elements);for(k=m.next();!k.done;k=m.next())for(n=q(k.value),k=n.next();!k.done;k=n.next())for(r=q(k.value),k=r.next();!k.done;k=r.next())k=k.value,(p=l.ei.remove(cd(k)))?(k.ca=p,p.ca=k):l.ei.push(k)}e=q(a.Ci);for(g=e.next();!g.done;g=e.next())g=g.value,l=function(z,y){y=h.get({y:y});if(!y)return null;y=y.ei.remove(z);if(!y)return null;y.Ic.splice(y.Ic.indexOf(y),1,z);return y.Ic},m=g.U,k=hd(m),g.Nc=l(m,g.h)||l(k,g.h),g.Uc=l(m,g.s)||l(k,g.s);g=function(z){var y=[],x=new sb(function(H,I){H=H[0];
I=I[0];if(H.h<I.h)return-1;if(H.h>I.h)return 1;if(H.s<I.s)return-1;if(H.s>I.s)return 1;if(H.Nc)if(I.Nc){if(H.Nc.index<I.Nc.index)return-1;if(H.Nc.index>I.Nc.index)return 1}else return 1;else if(I.Nc)return-1;if(H.Uc)if(I.Uc){if(H.Uc.index<I.Uc.index)return-1;if(H.Uc.index>I.Uc.index)return 1}else return 1;else if(I.Uc)return-1;if(H.length<I.length)return-1;if(H.length>I.length)return 1;for(var M=0;M<H.length;M++){var la=H[M],pa=I[M];if(la.h<pa.h)return-1;if(la.h>pa.h)return 1;if(la.s<pa.s)return-1;
if(la.s>pa.s)return 1;la=Ej(la.X,pa.X);if(0!=la)return la}return 0});z=q(z);for(var C=z.next();!C.done;C=z.next()){C=C.value;var A=[C],D=x.Ca(A);D!=A&&D.push(C)}z={};x=q(x.elements);for(C=x.next();!C.done;z={se:z.se},C=x.next())for(z.se=C.value,C={};z.se.length;)C.Yf=function(H,I){return function(M,la,pa){for(var Z=0;Z<H.se.length;Z++){var aa=H.se[Z];if(aa.U.g==pa.B&&aa.U.c==pa.w)return H.se.splice(Z,1),M.push(aa),aa.U.bd=M,aa.U.ca.bd=M,I.Yf(M,la,aa.U);if(aa.U.B==la.g&&aa.U.w==la.c)return H.se.splice(Z,
1),M.unshift(aa),aa.U.bd=M,aa.U.ca.bd=M,I.Yf(M,aa.U,pa)}return M}}(z,C),A=z.se.shift(),D=[A],A.U.bd=D,A.U.ca.bd=D,y.push(C.Yf(D,A.U,A.U)),C={Yf:C.Yf};return y}(a.Ci);e=function(){for(var z=[],y=q(h.elements),x=y.next();!x.done;x=y.next()){x=q(x.value.elements);for(var C=x.next();!C.done;C=x.next()){C=q(C.value);for(var A=C.next();!A.done;A=C.next()){A=A.value;for(var D=function(Z,aa){return Z.bd||aa.bd?!1:Z.ca?aa.ca?Z.ca.Ic==aa.ca.Ic:!1:aa.ca?!1:!0},H=0,I=A[A.length-1],M=A[0];H<A.length&&(M=A[H],
D(I,M));H++,I=M);if(H==A.length){D=[];I=q(A);for(A=I.next();!A.done;A=I.next())A=A.value,A.bd=D,A.ca&&(A.ca.bd=D),D.push(A);z.push(D)}else{A.unshift.apply(A,da(A.splice(H)));H=[];var la=null;I=A[0];H.push(la=[]);la.push(I);for(var pa=1;pa<A.length;pa++,I=M)M=A[pa],D(I,M)||H.push(la=[]),la.push(M);D=q(H);for(A=D.next();!A.done;A=D.next())if(I=A.value,!I[0].bd){M=q(I);for(A=M.next();!A.done;A=M.next())A=A.value,A.bd=I,A.ca&&(A.ca.bd=I);z.push(I)}}}}}return z}();a.Xj=[];l=q(g);for(g=l.next();!g.done;g=
l.next())c(g.value,a.Xj);a.Wj=[];e=q(e);for(g=e.next();!g.done;g=e.next())d(g.value);e=q(h.elements);for(l=e.next();!l.done;l=e.next())for(g=q(l.value.elements),k=g.next();!k.done;k=g.next())for(l=q(k.value),k=l.next();!k.done;k=l.next())m=k.value,m.Zj=xj(m),a.Wj.push(m)}
function kj(a){function b(r,p,v){var z=[],y=new Kg(p,r.y);y.flags|=Fj;y.aa=r.ea.aa;h.push(y);if((y=Zf[v.aa-$f])&&!(y.la<=Vh||y.la>Wh+1)){for(y=0;y<p.length;y++){var x=new rd(p[y].c,r.y,p[y].g);ud(x,r.X.color);Bd(x,x.z/4E5,x.x/4E5);x.tc=32767;z.push(x)}v.yd.push(z);ig.push(z);e(Zf[r.ea.aa-$f],z,r.X)}}function c(r,p,v){var z=[],y=new Lg(p,r.y);y.flags|=Fj;y.aa=r.ea.aa;h.push(y);if((y=Zf[v.aa-$f])&&!(y.la<=Vh||y.la>Wh+1)){for(y=p.length-1;0<=y;y--){var x=new rd(p[y].w,r.y,p[y].B);ud(x,r.X.color);Bd(x,
-x.z/4E5,x.x/4E5);x.tc=-32767;z.push(x)}v.yd.push(z);ig.push(z);e(Zf[r.ea.aa-$f],z,r.X)}}function d(r,p,v){var z=ri(Infinity,r.ea.aa,p.X.ba,p.X.W),y=Zf[z.aa-$f];if(y&&!(y.la<=Vh||y.la>Wh+1)){y=[];var x=r.U.g/4E5+r.U.c/4E5,C=r.U.B/4E5+r.U.w/4E5;var A=new rd(r.U.w,p.h,r.U.B);ud(A,p.X.color);Bd(A,C,-A.y/4E5);A.Bb=v.x;A.bc=v.y;y.push(A);A=new rd(r.U.c,p.h,r.U.g);ud(A,p.X.color);Bd(A,x,-A.y/4E5);A.Bb=v.x;A.bc=v.y;y.push(A);A=new rd(r.U.c,p.s,r.U.g);ud(A,p.X.color);Bd(A,x,-A.y/4E5);A.Bb=v.x;A.bc=v.y;y.push(A);
A=new rd(r.U.w,p.s,r.U.B);ud(A,p.X.color);Bd(A,C,-A.y/4E5);A.Bb=v.x;A.bc=v.y;y.push(A);z.yd.push(y);ig.push(y);e(Zf[r.ea.aa-$f],y,p.X)}}function e(r,p,v){var z=0,y=p[0],x=Ed(p[1],y,new K);x.scale(1E-5);for(var C=2;C<p.length;C++){var A=Ed(p[C],y,new K);A.scale(1E-5);z+=Fc(x,A,new K).length();x=A}p=.5*z;z=v.ba;v=v.color;y=(z.td.r-z.td.Ta)/255;v=new T(v.r*y+z.td.Ta,v.Ta*y+z.td.Ta,v.ka*y+z.td.Ta,z.td.Ga);r.zb.x+=v.r*p;r.zb.y+=v.Ta*p;r.zb.z+=v.ka*p;r.Sc+=p}a.pa=[];for(var h=a.pa,g=q(a.Wj),k=g.next();!k.done;k=
g.next())if(k=k.value,0<k.cd){for(var l=ri(k.y,k.ea.aa,k.X.ba,k.X.W),m=q(k.Zj),n=m.next();!n.done;n=m.next())b(k,n.value,l);(k=Zf[k.ea.aa-$f])&&(k.la>Wh+1||k.cells.push(a))}else if(k.X)for(l=ri(Infinity,k.ea.aa,k.X.ba,k.X.W),m=q(k.Zj),n=m.next();!n.done;n=m.next())c(k,n.value,l);a=q(a.Xj);for(k=a.next();!k.done;k=a.next())for(g=k.value,k=new Jg(g.U,g.h,g.s),k.flags|=Fj,k.aa=g[0].ea.aa,h.push(k),k=new S(g.U.c-g.U.w,g.U.B-g.U.g),k.na(32767),n=q(g),l=n.next();!l.done;l=n.next())d(g,l.value,k)}
function Aj(a,b){this.index=Gj++;this.ga=a;this.Pe=b;a=new sb(Hj);for(var c=new S(0,0),d=1/this.ga.length,e=q(this.ga),h=e.next();!h.done;h=e.next())h=h.value,h.Rf=this,c.x+=h.B*d,c.y+=h.w*d;b=q(b.Rc.elements);for(d=b.next();!d.done;d=b.next())d=d.value,0>=Vc(c.x,c.y,d.ga)||a.add(d);this.Rc=a.elements;Ij(this);this.Rj=[];a=Number.NEGATIVE_INFINITY;c=q(this.je);for(b=c.next();!b.done;b=c.next())if(b=b.value,b.ea.add){if(b.h>a){var g=new zj(b.ea);g.h=b.h;g.s=b.s;g.floor=b.floor;g.oa=b.oa;g.ga=this.ga;
this.Rj.push(g)}else g.s=b.s,g.oa=b.oa;a=g.s}}var Gj=-2147483648;
function Ij(a){var b=new zj;b.h=-2147483648;b.s=2147483647;b.ea={};a.je=[b];b=q(a.Rc);for(var c=b.next();!c.done;c=b.next()){c=c.value;var d=new zj(c.ea);d.h=c.ea.h;d.s=c.ea.s;d.floor=c.ea.floor;d.oa=c.ea.oa;c=[d];d=q(a.je);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=[];c=q(c);for(var g=c.next();!g.done;g=c.next())g=g.value,g.ea.vg(e.ea)?h.push(g):g.xf(e,h);c=h}d=q(c);for(g=d.next();!g.done;g=d.next()){h=g.value;g=[];var k=q(a.je);for(e=k.next();!e.done;e=k.next())e.value.xf(h,g);a.je=
g}a.je.push.apply(a.je,da(c))}Sb(a.je,function(l,m){return l.h<m.h?-1:l.h>m.h?1:0})}
Aj.prototype.evaluate=function(){for(var a=q(this.Rj),b=a.next();!b.done;b=a.next()){b=b.value;if(b.floor){for(var c=[],d=q(this.ga),e=d.next();!e.done;e=d.next())e=e.value,e=e.da(),c.push(e);c.y=b.h;c.X=b.floor;c.cd=1;c.ea=b.ea;this.Pe.Bi.push(c)}if(b.oa){c=[];d=q(this.ga);for(e=d.next();!e.done;e=d.next())e=e.value,e=e.da(),c.push(e);c.y=b.s;c.X=b.oa;c.cd=-1;c.ea=b.ea;this.Pe.Bi.push(c)}}a=[];b=[];e=q(this.je);for(d=e.next();!d.done;d=e.next())c=d.value,(c.ea.add?a:b).push(c);b=q(this.ga);for(e=
b.next();!e.done;e=b.next()){e=e.value;var h=function(p,v){var z=[];p=q(p);for(var y=p.next();!y.done;y=p.next()){var x=y.value,C=q(v);for(y=C.next();!y.done;y=C.next()){var A=y.value,D=[];x.Ca(A.h,A.s,D);var H=q(D);for(y=H.next();!y.done;y=H.next())y.value.ea=A.ea;z.push.apply(z,da(D))}}return z},g=function(p,v){v=q(v);for(var z=v.next();!z.done;z=v.next()){z=z.value;var y=[];p=q(p);for(var x=p.next();!x.done;x=p.next())x.value.xf(z.h,z.s,y);p=y}return p};c=function(p){for(var v=p[0],z=1;z<p.length;z++)if(Ej(v.X,
p[z].X))v=p[z];else{var y=v.da(v.h,p[z].s);p.splice(--z,2,y)}};d=function(p,v,z){var y=[];if(!p.Ob)return y;v=q(v);for(var x=v.next();!x.done;x=v.next()){x=x.value;var C=p.Ob;var A=x,D=Hj,H=Rb(C,A,D);(C=H==C.length||0!=D.call(null,A,C[H])?null:C[H])&&C.ea.add==z&&y.push(new oh(x.ea.h,x.ea.s,C))}return y};var k=d(e,this.Rc,!0),l=[],m=[],n=[];if(e.ca.Rf){l=d(e.ca,e.ca.Rf.Rc,!1);var r=q(e.ca.Rf.je);for(d=r.next();!d.done;d=r.next())d=d.value,(d.ea.add?m:n).push(d)}k=g(k,m);l=g(l,m);k=h(k,a);l=h(l,a);
h=function(p){Sb(p,function(D,H){return D.nf.ea.index-H.nf.ea.index});var v=[];p=q(p);for(var z=p.next();!z.done;z=p.next()){z=[z.value];for(var y=q(v),x=y.next();!x.done;x=y.next()){x=x.value;var C=[];z=q(z);for(var A=z.next();!A.done;A=z.next())A=A.value,A.nf.ea.vg(x.nf.ea)?C.push(A):A.xf(x.h,x.s,C);z=C}y=q(z);for(A=y.next();!A.done;A=y.next()){C=A.value;A=[];v=q(v);for(x=v.next();!x.done;x=v.next())x.value.xf(C.h,C.s,A);v=A}v.push.apply(v,da(z))}return v}(l.concat(k));if(h.length){d=[];g=q(h);
for(h=g.next();!h.done;h=g.next())if(k=h.value,k.nf.Jg){l=[];m=q(k.nf.Jg);for(h=m.next();!h.done;h=m.next())h.value.Ca(k.h,k.s,l);m=q(l);for(h=m.next();!h.done;h=m.next())h.value.ea=k.ea;d.push.apply(d,da(l))}Sb(d,function(p,v){return p.h<v.h?-1:p.h>v.h?1:0});g=void 0;k=Number.NEGATIVE_INFINITY;d=q(d);for(h=d.next();!h.done;h=d.next())h=h.value,h.h>k?(g&&c(g),g=[h],g.U=e.da(),g.ea=h.ea,g.h=h.h,g.s=h.s,this.Pe.Ci.push(g)):(g.push(h),g.s=h.s),k=h.s;g&&c(g)}}};
function yj(a,b,c,d){P.call(this,a,b,c,d);this.index=yj.index++;this.ca=null}yj.index=-2147483648;yj.prototype=Object.create(P.prototype);yj.prototype.constructor=yj;yj.prototype.Ya=function(a,b,c,d){return new yj(a,b,c,d)};
yj.prototype.replace=function(a){P.prototype.replace.call(this,a);if(this.Rf)for(var b=0;b<a.length;b++)a[b].Rf=this.Rf;if(this.Ob)for(a=q(a),b=a.next();!b.done;b=a.next())if(b=b.value,b.Ob)for(var c=q(this.Ob),d=c.next();!d.done;d=c.next())d=d.value,0<=b.Ob.indexOf(d)||b.Ob.push(d);else b.Ob=this.Ob.slice()};function oh(a,b,c){this.X=new Jj;this.h=a;this.s=b;this.nf=c;this.ea=null}oh.prototype.da=function(a,b){a=new oh(a,b,this.nf);a.X=this.X;a.ea=this.ea;return a};
oh.prototype.xf=function(a,b,c){this.s<=a||this.h>=b?c.push(this):(this.h<a&&c.push(this.da(this.h,a)),this.s>b&&c.push(this.da(b,this.s)))};oh.prototype.Ca=function(a,b,c){this.s<=a||this.h>=b||(this.s<=b&&this.h>=a?c.push(this):(b=b<this.s?b:this.s,a=a>this.h?a:this.h,c.push(this.da(a,b))))};function Jj(){this.ba=t.j.S.get("concr01");this.W=ih;this.color=od;this.y=this.x=0}
function Ej(a,b){if(a.ba.name<b.ba.name)return-1;if(a.ba.name>b.ba.name)return 1;var c=Qe(a.W,b.W);return 0!=c?c:a.color.r<b.color.r?-1:a.color.r>b.color.r?1:a.color.Ta<b.color.Ta?-1:a.color.Ta>b.color.Ta?1:a.color.ka<b.color.ka?-1:a.color.ka>b.color.ka?1:a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0};function Gi(){this.index=Kj++;this.add=!0;this.ga=null;this.h=Number.POSITIVE_INFINITY;this.s=Number.NEGATIVE_INFINITY;this.floor=new Jj;this.oa=new Jj;this.color=od;this.ab=-1;this.Rc=[]}var Kj=-2147483648;function Hi(a,b){a.floor&&(a.floor.color=ch);a.oa&&(a.oa.color=fh);a.ga=[];for(var c=[],d=0;d<b.length;d++)c.push(aj.jb(b[d].x,b[d].y));b=c;var e=b[b.length-1];for(c=0;c<b.length;c++)d=b[c],e=new yj(e.x,e.y,d.x,d.y),e.ea=a,e.Jg=a.Kc(),a.ga.push(e),e=d}
Gi.prototype.Kc=function(){var a=new oh(this.h,this.s);a.X.color=this.color;return[a]};
Gi.prototype.stroke=function(){if(Uc(this.ga)){console.trace();debugger}if(this.s<=this.h){console.trace();debugger}for(var a=[],b=q(this.ga),c=b.next();!c.done;c=b.next()){c=c.value;var d=c.da();d.Ob=[c.Jg];a.push(d);hd(d);delete d.ca.Ob}b=new Yc;c=q(a);for(d=c.next();!d.done;d=c.next())d=d.value,b.Ca(d.B,d.w);d=b.l&-524288;c=b.h&-524288;d+=524288;for(c+=524288;d<b.u;){var e=new yj(d,b.h,d,b.s);hd(e);a.push(e);d+=524288}for(;c<b.s;)d=new yj(b.l,c,b.u,c),hd(d),a.push(d),c+=524288;a=Pi(a.slice(),!0);
a=qj(a);for(b={};a.elements.length;){a:if(c=function(g){return function(){for(var k=q(g.Kd),l=k.next();!l.done;l=k.next())if(l.value.Ob)return!0;return!1}}(b),b.Kd=rj(a),b.Kd&&!Uc(b.Kd)){if(!c()&&(c=Xc(b.Kd),0>=Vc(c.x,c.y,this.ga)))break a;d=new Lj(this);e=q(b.Kd);for(c=e.next();!c.done;c=e.next()){c=c.value;var h=c.da();hd(h);h.ea=this;c.Ob&&(h.Jg=c.Ob[0]);d.ga.push(h)}d.stroke(ef(jf(b.Kd.bound.l+2147483648>>>19,b.Kd.bound.h+2147483648>>>19)))}b={Kd:b.Kd}}};
function pi(a){for(var b=q(a.Rc),c=b.next();!c.done;c=b.next())c.value.remove();a.Rc.length=0}Gi.prototype.da=function(){var a=new Gi;a.add=this.add;a.h=this.h;a.s=this.s;a.floor=this.floor;a.oa=this.oa;a.color=this.color;a.ab=this.ab;return a};Gi.prototype.vg=function(){return!0};function Lj(a){this.index=Mj++;this.ea=a;this.ga=[];this.Pe=null}var Mj=-2147483648;function Hj(a,b){return a.ea.index<b.ea.index?-1:a.ea.index>b.ea.index?1:0}
Lj.prototype.stroke=function(a){if(Uc(this.ga)){console.trace();debugger}this.ea.Rc.push(this);a=this.Pe=a;a.Rc.add(this);kb(cj,a)};Lj.prototype.remove=function(){var a=this.Pe;a.Rc.remove(this);if(a.Rc.elements.length)kb(cj,a);else{for(var b=a.zh.first();null!=b.item;){var c=b.next;xb(b);xb(b.Oc);b=c}xb(a.lk);bf.remove(a);lb(cj,a)}};var lj={},mj,Nj,nj=-1;lj.Xe=[];
function oj(){function a(B,G){if(B.wa.fa<G.wa.fa)return-1;if(B.wa.fa>G.wa.fa)return 1;if(B.wa.$<G.wa.$)return-1;if(B.wa.$>G.wa.$)return 1;B=Q(G.wa,B.wa.g,B.wa.c);return 0>B?-1:0<B?1:0}function b(B,G){B=B[0];G=G[0];return B.y<G.y?-1:B.y>G.y?1:0}function c(B){if(!(2>B.length)){var G=2.197265625E7;var J=-1;for(var F,L,N=1;N<B.length;N++)F=B[N-1],L=B[N],F=new P(F.g,F.c,L.B,L.w),L=(F.length>>3)*(Q(F,L.g,L.c)>>3),L>=G||-2E3>=L||(G=L,J=N);0>J||(F=B[J-1],L=B[J],G=L.Ya(F.g,F.c,L.B,L.w),N=L.length/(F.length+
L.length),G.weight=F.weight*(1-N)+L.weight*N,B.splice(J-1,2,G),c(B))}}function d(B){if(!(2>B.length)){var G=2.197265625E7;var J=-1;for(var F=B[B.length-1],L,N=0;N<B.length;N++,F=L)L=B[N],F=new P(F.g,F.c,L.B,L.w),F=(F.length>>3)*(Q(F,L.g,L.c)>>3),F>=G||-2E3>=F||(G=F,J=N);0>J||(B.unshift.apply(B,da(B.splice(J))),F=B.pop(),L=B.shift(),G=L.Ya(F.g,F.c,L.B,L.w),J=L.length/(F.length+L.length),G.weight=F.weight*(1-J)+L.weight*J,B.unshift(G),d(B))}}function e(B){function G(O,R){var Ka=ad(O),fa=ad(R),Ta=-Rc(O,
R)+Math.PI;if(Ta<zc(165)){var ca=new S(O.B,O.w);ca.round();ca.ia=O.weight;ca.za=255;F.push(ca);var Ua=new S(O.B-Ka.y,O.w+Ka.x);Ua.round();Ua.ia=ca.ia;Ua.za=0;L.push(Ua);J(O);var Ga=new S(R.g,R.c);Ga.round();Ga.ia=R.weight;Ga.za=255;F.push(Ga);var yc=new S(R.g-fa.y,R.c+fa.x);yc.round();yc.ia=Ga.ia;yc.za=0;L.push(yc);Ta<=zc(90)||(O=new S(O.B+Ka.x,O.w+Ka.y),O.round(),O.ia=ca.ia,O.za=0,N.push([Ua,ca,O]),R=new S(R.g-fa.x,R.c-fa.y),R.round(),R.ia=Ga.ia,R.za=0,N.push([R,Ga,yc]))}else Ga=new S(R.g,R.c),Ga.ia=
(O.weight+R.weight)*(1-Ta/Math.Zf),Ga.za=255,F.push(Ga),Ta<=zc(195)?(fa=new S(-Ka.y-fa.y,Ka.x+fa.x),fa.scale(5E9/fa.ff()),fa.x+=R.g,fa.y+=R.c,fa.round(),fa.ia=Ga.ia,fa.za=0,L.push(fa),J(O)):(yc=new S(O.B-Ka.y,O.w+Ka.x),yc.round(),yc.ia=Ga.ia,yc.za=0,L.push(yc),J(O),R=new S(R.g-fa.y,R.c+fa.x),R.round(),R.ia=Ga.ia,R.za=0,L.push(R),N.push([yc,Ga,R]))}function J(O){if(ea)ea=!1;else{var R=L[L.length-2],Ka=F[F.length-2],fa=F[F.length-1],Ta=L[L.length-1];if(Ka.ia!=O.weight&&fa.ia!=O.weight)if(1E5<O.length){var ca=
O.jb(5E4,0);ca.round();ca.ia=O.weight;ca.za=255;var Ua=O.jb(O.length-5E4,0);Ua.round();Ua.ia=O.weight;Ua.za=255;N.push([R,Ka,ca]);N.push([R,ca,Ua,Ta]);N.push([Ua,fa,Ta])}else if(ca=new S(O.g+O.B>>1,O.c+O.w>>1),ca.round(),1E5>O.length){var Ga=5E4/O.length-.5;Ua=O.length/1E5;ca.ia=.5*(Ka.ia+fa.ia)*(1-Ua)+O.weight*Ua;ca.za=255;Ga=new S(ca.x+(O.c-O.w)*Ga,ca.y+(O.B-O.g)*Ga);Ga.ia=ca.ia;Ga.za=O.weight*Ua*255;Ga.round();N.push([R,Ka,ca,Ga]);N.push([R,Ga,Ta]);N.push([Ga,ca,fa,Ta])}else ca.ia=O.weight,ca.za=
255,N.push([R,Ka,ca]),N.push([R,ca,Ta]),N.push([ca,fa,Ta]);else Ka.ia!=O.weight?5E4<O.length?(ca=O.jb(5E4,0),ca.round(),ca.ia=O.weight,ca.za=255,N.push([R,Ka,ca]),N.push([R,ca,fa,Ta])):N.push([R,Ka,fa,Ta]):fa.ia!=O.weight?5E4<O.length?(ca=O.jb(O.length-5E4,0),ca.round(),ca.ia=O.weight,ca.za=255,N.push([R,Ka,ca,Ta]),N.push([ca,fa,Ta])):N.push([Ka,fa,Ta,R]):N.push([R,Ka,fa,Ta])}}var F=[],L=[],N=[],ea=!1;if(B[0].g==B[B.length-1].B&&B[0].c==B[B.length-1].w){ea=!0;G(B[B.length-1],B[0]);N=[];for(var ka=
1;ka<B.length;ka++)G(B[ka-1],B[ka]);G(B[B.length-1],B[0])}else{var oa=B[0],Da=ad(oa);ka=new S(oa.g,oa.c);ka.round();ka.ia=oa.weight;ka.za=255;F.push(ka);oa=new S(oa.g-Da.y,oa.c+Da.x);oa.round();oa.ia=ka.ia;oa.za=0;L.push(oa);for(ka=1;ka<B.length;ka++)G(B[ka-1],B[ka]);B=B[B.length-1];oa=ad(B);ka=new S(B.B,B.w);ka.round();ka.ia=B.weight;ka.za=255;F.push(ka);oa=new S(B.B-oa.y,B.w+oa.x);oa.round();oa.ia=ka.ia;oa.za=0;L.push(oa);J(B)}return N}function h(B){var G=new sb(Gb);B=q(B);for(var J=B.next();!J.done;J=
B.next())J=J.value,vf(J.bound.C-5E4,J.bound.l-5E4,J.bound.G+5E4,J.bound.u+5E4,G);return G.elements}function g(B){var G=new sb(Qc);B=q(B);for(var J=B.next();!J.done;J=B.next())J=J.value,G.remove(cd(J))||G.add(J);return G.elements}function k(B){var G=qj(B,!1);B=[];for(var J=[];G.elements.length;){var F=rj(G);F?Uc(F)?J.push(F):(F.ib=[],B.push(F)):console.log("failed circuit")}J=q(J);for(G=J.next();!G.done;G=J.next())tj(G.value,B);J=[];B=q(B);for(G=B.next();!G.done;G=B.next())if(F=G.value,0==F.ib.length)J.push(F);
else{sj(F);var L=q(F.ib);for(G=L.next();!G.done;G=L.next())sj(G.value);J.push(uj(F))}return J}function l(B,G,J){var F=qj(B,!1);B=[];for(var L=new sb(Dd);F.elements.length;){a:{var N=F;var ea=[];ea.bound=new Yc;var ka=0,oa=N.elements[ka],Da=oa.elements.pop();oa.elements.length||N.elements.splice(ka,1);if(Da)for(ea.bound.Ca(Da.g,Da.c);;){ea.push(Da);ea.bound.Ca(Da.B,Da.w);if(Da.B==ea[0].g&&Da.w==ea[0].c)break a;ka=N.contains(new S(Da.B,Da.w));if(0>ka)break a;oa=N.elements[ka];Da=tb(oa,cd(Da))-1;0>Da&&
(Da+=oa.elements.length);Da=oa.elements.splice(Da,1)[0];oa.elements.length||N.elements.splice(ka,1)}else ea=null}B.push(ea);if(ea[0].g!=ea[ea.length-1].B||ea[0].c!=ea[ea.length-1].w)N=ea[0],N.Ch=ea,ea=new sb(id),ea.x=N.g,ea.y=N.c,ea=L.Ca(ea),ea.add(N)}for(F=0;F<B.length;F++)if(N=B[F],N[0].g!=N[N.length-1].B||N[0].c!=N[N.length-1].w)ea=N[N.length-1],ka=L.contains(new S(ea.B,ea.w)),0>ka||(oa=L.elements[ka],ea=tb(oa,cd(ea))-1,0>ea&&(ea+=oa.elements.length),ea=oa.elements.splice(ea,1)[0],oa.elements.length||
L.elements.splice(ka,1),ka=B.indexOf(ea.Ch),B.splice(ka,1),ka<F&&F--,N.push.apply(N,da(ea.Ch)),N.bound.Gj(ea.Ch.bound),F--);L=q(B);for(F=L.next();!F.done;F=L.next())delete F.value.Ch;L=q(B);for(F=L.next();!F.done;F=L.next())F=F.value,F[0].g==F[F.length-1].B&&F[0].c==F[F.length-1].w?d(F):c(F);L=[];B=q(B);for(F=B.next();!F.done;F=B.next())L=L.concat(e(F.value));B=[];L=q(L);for(F=L.next();!F.done;F=L.next())for(F=F.value,N=q(G),ka=N.next();!ka.done;ka=N.next()){a:for(ea=F,ka=q(ka.value),oa=ka.next();!oa.done;oa=
ka.next()){oa=oa.value;Da=[];for(var O=ea[ea.length-1],R=Q(oa,O.x,O.y),Ka=0;Ka<ea.length;Ka++){var fa=ea[Ka],Ta=Q(oa,fa.x,fa.y);if(0<Ta){if(0>R){R/=R-Ta;var ca=1-R,Ua=new S(O.x*ca+fa.x*R,O.y*ca+fa.y*R);Ua.ia=O.ia*ca+fa.ia*R;Ua.za=O.za*ca+fa.za*R;Da.push(Ua)}Da.push(fa)}else 0>Ta?0<R&&(R/=R-Ta,ca=1-R,Ua=new S(O.x*ca+fa.x*R,O.y*ca+fa.y*R),Ua.ia=O.ia*ca+fa.ia*R,Ua.za=O.za*ca+fa.za*R,Da.push(Ua)):Da.push(fa);O=fa;R=Ta}if(3>Da.length){ea=null;break a}ea=Da}ea&&B.push(ea)}G=q(B);for(F=G.next();!F.done;F=
G.next()){B=F.value;for(L=0;L<B.length;L++)F=B[L],F.index?B[L]=F.index:(F.index=lj.Cd.Ab.length,B[L]=F.index,N=J(F),N.ia=225*F.ia,N.za=F.za,lj.Cd.Ab.push(N));mj+=3*(B.length-2);lj.Cd.yd.push(B)}}var m=bf.elements[nj];if(m){lj.Xe[2*nj]=mj;for(var n=new sb(a),r=new sb(b),p=new sb(b),v={},z=q(m.pa),y=z.next();!y.done;v={Gc:v.Gc,dd:v.dd,Oh:v.Oh},y=z.next())if(v.dd=y.value,v.dd instanceof Jg){v.Oh=function(B){return function(G){var J=G.wa,F=Math.atan2(J.$,J.fa)-Math.atan2(B.Gc.$,B.Gc.fa);if(Math.abs(F>
Math.PI?F-Math.Zf:F<-Math.PI?F+Math.Zf:F)>zc(5))return!1;F=J.weight/(J.weight+1);var L=1-F;F=J.Ya(Math.round(J.g*F+B.Gc.g*L),Math.round(J.c*F+B.Gc.c*L),Math.round(J.B*F+B.Gc.B*L),Math.round(J.w*F+B.Gc.w*L));if(500<=Math.abs(Q(F,B.Gc.g,B.Gc.c))||500<=Math.abs(Q(F,B.Gc.B,B.Gc.w))||500<=Math.abs(Q(F,J.g,J.c))||500<=Math.abs(Q(F,J.B,J.w)))return!1;G.wa=F;F.weight=J.weight+1;G.push(B.dd);return!0}}(v);var x=function(B){return function(){for(var G=q(n.elements),J=G.next();!J.done;J=G.next())if(B.Oh(J.value))return!0;
return!1}}(v);v.Gc=cd(v.dd.U);if(!x()){var C=[v.dd];C.wa=v.Gc;C.wa.weight=1;var A=n.Ca(C);A!=C&&A.push(v.dd)}}else{var D=[v.dd],H=void 0;v.dd instanceof Kg?H=r.Ca(D):v.dd instanceof Lg&&(H=p.Ca(D));H!=D&&H.push(v.dd)}n=n.elements;r=r.elements;p=p.elements;for(var I={},M=q(n),la=M.next();!la.done;I={ac:I.ac,re:I.re},la=M.next()){var pa=la.value;I.re=bd(pa.wa,-1E3);pa.wa=pa.wa.Ya(pa.wa.g+I.re.x,pa.wa.c+I.re.y,pa.wa.B+I.re.x,pa.wa.w+I.re.y);I.ac=pa.wa;var Z=[[],[],[],[]],aa=[],Ab=q(pa);for(y=Ab.next();!y.done;y=
Ab.next()){var eb=y.value,Xb=function(B,G,J){B.g<G.l||B.g>G.u||B.w>G.s||B.c<G.h?J.push(B):(B.w<G.h&&J.push(B.Ya(B.g,G.h,B.B,B.w)),B.c>G.s&&J.push(B.Ya(B.g,B.c,B.B,G.s)))},rc=function(B,G,J){B.c<G.h||B.c>G.s||B.B>G.u||B.g<G.l?J.push(B):(B.B<G.l&&J.push(B.Ya(G.l,B.c,B.B,B.w)),B.g>G.u&&J.push(B.Ya(B.g,B.c,G.u,B.w)))},Kb=function(B,G,J){B.g<G.l||B.g>G.u||B.c>G.s||B.w<G.h?J.push(B):(B.c<G.h&&J.push(B.Ya(B.g,B.c,B.B,G.h)),B.w>G.s&&J.push(B.Ya(B.g,G.s,B.B,B.w)))},sc=function(B,G,J){B.c<G.h||B.c>G.s||B.g>
G.u||B.B<G.l?J.push(B):(B.g<G.l&&J.push(B.Ya(B.g,B.c,G.l,B.w)),B.B>G.u&&J.push(B.Ya(G.u,B.c,B.B,B.w)))},Aa=new Yc;Aa.l=Math.round(I.ac.getParameter(eb.U.B,eb.U.w));Aa.u=Math.round(I.ac.getParameter(eb.U.g,eb.U.c));Aa.h=eb.h;Aa.s=eb.s;for(var Db=[[],[],[],[]],zf=q(Z[0]),sa=zf.next();!sa.done;sa=zf.next())sc(sa.value,Aa,Db[0]);var Af=q(Z[1]);for(sa=Af.next();!sa.done;sa=Af.next())Kb(sa.value,Aa,Db[1]);var Be=q(Z[2]);for(sa=Be.next();!sa.done;sa=Be.next())rc(sa.value,Aa,Db[2]);var Bf=q(Z[3]);for(sa=
Bf.next();!sa.done;sa=Bf.next())Xb(sa.value,Aa,Db[3]);Z=Db;for(var kc=[[new P(Aa.l,Aa.h,Aa.u,Aa.h)],[new P(Aa.u,Aa.h,Aa.u,Aa.s)],[new P(Aa.u,Aa.s,Aa.l,Aa.s)],[new P(Aa.l,Aa.s,Aa.l,Aa.h)]],Cf=q(aa),hb=Cf.next();!hb.done;hb=Cf.next()){var Rd=hb.value;Db=[[],[],[],[]];var Df=q(kc[0]);for(sa=Df.next();!sa.done;sa=Df.next())sc(sa.value,Rd,Db[0]);var Ce=q(kc[1]);for(sa=Ce.next();!sa.done;sa=Ce.next())Kb(sa.value,Rd,Db[1]);var Sd=q(kc[2]);for(sa=Sd.next();!sa.done;sa=Sd.next())rc(sa.value,Rd,Db[2]);var Td=
q(kc[3]);for(sa=Td.next();!sa.done;sa=Td.next())Xb(sa.value,Rd,Db[3]);kc=Db}Z[0].push.apply(Z[0],da(kc[0]));Z[1].push.apply(Z[1],da(kc[1]));Z[2].push.apply(Z[2],da(kc[2]));Z[3].push.apply(Z[3],da(kc[3]));aa.push(Aa)}Z=Z[0].concat(Z[1].concat(Z[2].concat(Z[3])));pa.length=0;for(var Ef=k(Z),De=[],ib=q(Ef),Nb=ib.next();!Nb.done;Nb=ib.next()){for(var Ff=Nb.value,vd=Ff.slice(),dd=new Yc,Gf=q(Ff),Eb=Gf.next();!Eb.done;Eb=Gf.next()){var Hf=Eb.value;dd.Ca(Hf.B,Hf.w)}var Ee=I.ac.jb(dd.l,0),If=I.ac.jb(dd.u,
0);vd.bound=new Qd;vd.bound.Ca(Ee.y,dd.h,Ee.x);vd.bound.Ca(If.y,dd.s,If.x);De.push.apply(De,da(xj(vd)));pa.push(vd)}var Jf=h(pa);Z=[];for(var Ja=q(Jf),wb=Ja.next();!wb.done;wb=Ja.next())for(var Lc=q(wb.value.pa),Ob=Lc.next();!Ob.done;Ob=Lc.next()){var Za=Ob.value;if(Za instanceof Lg){var wc=$c(I.ac,Za.ga);if(wc){wc[0]=Math.round(wc[0]);wc[1]=Math.round(wc[1]);var Ud=new P(wc[1],Za.y,wc[0],Za.y);Ud.weight=1;Z.push(Ud)}}else if(Za instanceof Kg){var lc=$c(I.ac,Za.ga);if(lc){lc[0]=Math.round(lc[0]);
lc[1]=Math.round(lc[1]);var Kf=new P(lc[0],Za.y,lc[1],Za.y);Kf.weight=1;Z.push(Kf)}}else{var wd=I.ac,$b=Za.U,qa=Q(wd,$b.g,$b.c),Mc=Q(wd,$b.B,$b.w),xc=wd.getParameter($b.g,$b.c),Fe=wd.getParameter($b.B,$b.w);if(qa<Mc){if(!(-256>Mc||256<qa)){var Nc=qa/(qa-Mc),Ge=Math.round(xc*(1-Nc)+Fe*Nc),Vd=Math.atan2(-qa,xc-Ge);if(!(Vd<zc(15))){var Wd=new P(Ge,Za.h,Ge,Za.s);Wd.weight=(180*Vd/Math.PI-15)/75;1<Wd.weight&&(Wd.weight=1);Z.push(Wd)}}}else if(qa>Mc&&!(-256>qa)&&!(256<Mc)){var Lf=qa/(qa-Mc),He=Math.round(xc*
(1-Lf)+Fe*Lf),Mf=Math.atan2(-Mc,He-Fe);if(!(Mf<zc(15))){var Xd=new P(He,Za.s,He,Za.h);Xd.weight=(180*Mf/Math.PI-15)/75;1<Xd.weight&&(Xd.weight=1);Z.push(Xd)}}}}l(Z,De,function(B){return function(G){var J=Math.round(G.x);G=Math.round(G.y);J/=B.ac.length;return new rd(Math.round(B.ac.c+(B.ac.w-B.ac.c)*J)-B.re.y,G,Math.round(B.ac.g+(B.ac.B-B.ac.g)*J)-B.re.x)}}(I))}var Fb={},Ie=q(r);for(la=Ie.next();!la.done;Fb={rf:Fb.rf},la=Ie.next()){var xd=la.value;Fb.rf=xd[0].y;var W=[],Fa=q(xd);for(y=Fa.next();!y.done;y=
Fa.next())W.push.apply(W,da(y.value.ga));xd.length=0;var ya=k(g(W)),ed=[],yd=q(ya);for(Nb=yd.next();!Nb.done;Nb=yd.next()){var zd=Nb.value,mc=zd.slice(),Oc=new Yc,Je=q(zd);for(Eb=Je.next();!Eb.done;Eb=Je.next()){var Ke=Eb.value;Oc.Ca(Ke.B,Ke.w)}mc.bound=new Qd;mc.bound.C=Oc.l;mc.bound.G=Oc.u;mc.bound.l=Oc.h;mc.bound.u=Oc.s;mc.bound.h=mc.bound.s=Fb.rf;ed.push.apply(ed,da(xj(mc)));xd.push(mc)}var Nf=h(xd);W=[];var Of=q(Nf);for(wb=Of.next();!wb.done;wb=Of.next()){var Yd=q(wb.value.pa);for(Ob=Yd.next();!Ob.done;Ob=
Yd.next()){var Zd=Ob.value;if(Zd instanceof Jg&&!(Zd.h>Fb.rf||Zd.s<=Fb.rf)){var Pb=Zd.U.da();Pb.weight=1;W.push(Pb)}}}l(W,ed,function(B){return function(G){return new rd(Math.round(G.y),B.rf,Math.round(G.x))}}(Fb))}var Pc={},Pf=q(p);for(la=Pf.next();!la.done;Pc={sf:Pc.sf},la=Pf.next()){var ac=la.value;Pc.sf=ac[0].y;var $d=[],Qf=q(ac);for(y=Qf.next();!y.done;y=Qf.next())for(var Le=q(y.value.ga),ae=Le.next();!ae.done;ae=Le.next()){var fd=ae.value;$d.push(fd.Ya(-fd.B,fd.w,-fd.g,fd.c))}ac.length=0;var Gg=
k(g($d)),be=[],ce=q(Gg);for(Nb=ce.next();!Nb.done;Nb=ce.next()){var Me=Nb.value,nc=Me.slice(),gd=new Yc,Rf=q(Me);for(Eb=Rf.next();!Eb.done;Eb=Rf.next()){var jb=Eb.value;gd.Ca(jb.B,jb.w)}nc.bound=new Qd;nc.bound.C=-gd.u;nc.bound.G=-gd.l;nc.bound.l=gd.h;nc.bound.u=gd.s;nc.bound.h=nc.bound.s=Pc.sf;be.push.apply(be,da(xj(nc)));ac.push(nc)}var Wa=h(ac);$d=[];var Bj=q(Wa);for(wb=Bj.next();!wb.done;wb=Bj.next()){var Cj=q(wb.value.pa);for(Ob=Cj.next();!Ob.done;Ob=Cj.next()){var Ad=Ob.value;if(Ad instanceof
Jg&&!(Ad.h>=Pc.sf||Ad.s<Pc.sf)){var Dj=Ad.U.Ya(-Ad.U.B,Ad.U.w,-Ad.U.g,Ad.U.c);Dj.weight=1;$d.push(Dj)}}}l($d,be,function(B){return function(G){return new rd(Math.round(G.y),B.sf,-Math.round(G.x))}}(Pc))}lj.Xe[2*nj+1]=mj-lj.Xe[2*nj];nj++;return!0}Nj=lj.Cd;delete lj.Cd;for(var Pe=0;Pe<bf.elements.length;Pe++)bf.elements[Pe].oj=lj.Xe[2*Pe],bf.elements[Pe].nj=lj.Xe[2*Pe+1];delete lj.Xe;nj=-1;Nj.compile();return!1};t.Ra=function(a){t.ua.call(this,a);this.b=new K(0,0,0);this.Mb=null;this.Sj=NaN;this.Nb=0;this.ja={Da:-2147483648,pb:new K(1,1,1)};this.lj=new ub;this.gg=new Yc};t.Ra.prototype=Object.create(t.ua.prototype);t.Ra.prototype.constructor=t.Ra;t.Ra.index=-2147483648;t.Ra.prototype.create=function(){this.index=t.Ra.index++;t.Ai.push(this);t.ua.prototype.create.call(this)};t.Ra.prototype.remove=function(){for(var a=this.lj.first();null!=a.item;){var b=a.next;xb(a);xb(a.Oc);a=b}t.Ai.remove(this);t.ua.prototype.remove.call(this)};
t.Ra.prototype.step=function(){this.gg.ue(this.b.z,this.b.x)||pj(this);var a=null,b=pf(this.b,new K(0,-1E8,0),fg);b&&(a=af(b.item.aa));a?(a!=this.Mb&&(this.Sj=t.f),this.Mb=a,bg(this.b,a,this.ja.pb)):this.Vj();t.ua.prototype.step.call(this)};t.Ra.prototype.Vj=function(){this.remove()};
function pj(a){for(var b=a.b.z-a.Nb,c=a.b.z+a.Nb,d=a.b.x-a.Nb,e=a.b.x+a.Nb,h=a.lj.first(),g=[Ye];g.length;){var k=g.shift();if(k instanceof lf)b<=k.value&&g.push(k.Qe),c>=k.value&&g.push(k.Re);else if(k instanceof mf)d<=k.value&&g.push(k.Qe),e>=k.value&&g.push(k.Re);else{for(;null!=h.item&&!(h.item.index>=k.index);){var l=h.next;xb(h);xb(h.Oc);h=l}if(h.item==k)h=h.next;else{l=new vb(k);var m=new vb(a);l.Oc=m;m.Oc=l;zb(l,h);yb(k.zh,m)}}}for(;null!=h.item;)g=h.next,xb(h),xb(h.Oc),h=g;a.gg.l=(b>>19<<
19)+a.Nb;a.gg.u=((c>>19)+1<<19)-a.Nb;a.gg.h=(d>>19<<19)+a.Nb;a.gg.s=((e>>19)+1<<19)-a.Nb}t.Ai=new sb(Gb);t.Me=function(a){t.Node.call(this,a);this.Xa=1E5};t.Me.prototype=Object.create(t.Node.prototype);t.Me.prototype.constructor=t.Me;t.Me.color=new T(0,0,0,64);
t.Me.prototype.Sa=function(){var a=new U;a.I=0;a.L=0;a.M=this.Xa;a.J=this.Xa;a.m11=0;a.m12=0;a.K=0;a.m21=1;a.m22=0;a.H=this.Ea.H;a.m31=this.Ea.m31+500;a.m32=this.Ea.m32;var b=pf(new K(this.Ea.H,this.Ea.m31,this.Ea.m32),new K(0,-1E8,0));b&&(a.m31-=b.d);t.D.N("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,0,4);t.Node.prototype.Sa.call(this)};var Oj,Pj=980700/3600*2,Qj=new K(0,-Pj,0),Rj=new sb(Gb),Sj=new t.Node("physProcessor");
Sj.step=function(){Oj=new qc;for(var a=q(Rj.elements),b=a.next();!b.done;b=a.next()){b=b.value;b.ce=0;b.t=0;b.vk=Tj(b.b,b.xa,b.hb);var c=b.kk();b.input();b.Lc&&!b.rg()&&0<b.Jf&&(b.v.x+=Qj.x,b.v.y+=Qj.y,b.v.z+=Qj.z);b.v.scale(b.Vk);var d=Ed(b.v,b.cb,new K(0,0,0));if(0<b.Cg){for(var e=b,h=b.vk,g=new K(0,0,0),k=0;k<h.length;k++){var l=h[k],m=-Dc(d,l);if(!(0>=m)){m*=e.Cg;var n=Dc(e.v,l);l=new K(e.v.x-l.x*n,e.v.y-l.y*n,e.v.z-l.z*n);m/=l.length();1<m&&(m=1);g.x-=l.x*m;g.y-=l.y*m;g.z-=l.z*m}}e.v.add(g)}b.Va.set(.5*
b.cb.x+.5*b.v.x,.5*b.cb.y+.5*b.v.y,.5*b.cb.z+.5*b.v.z);b.Va.y+=c;b.Va.round();b.bound=Uj(b.b,b.xa,b.hb,b.Va)}a=q(Rj.elements);for(b=a.next();!b.done;b=a.next())b.value.handleEvent();for(a=0;!Oj.ph();){b=Oj.pop();if(10<++a)break;b.target?(c=b.source,e=b.target,c.ce==b.wj&&e.ce==b.Ck&&(c.ce++,e.ce++,Vj(c,b),Vj(e,b),c.handleEvent(),e.handleEvent(),c.wi(e),e.wi(c))):(c=b.source,c.ce==b.wj&&(c.ce++,Vj(c,b),c.handleEvent()))}a=q(Rj.elements);for(b=a.next();!b.done;b=a.next())b=b.value,b.b.x+=b.Va.x,b.b.y+=
b.Va.y,b.b.z+=b.Va.z,b.cb.set(b.v.x,b.v.y,b.v.z),b.transform.H=b.b.x,b.transform.m31=b.b.y,b.transform.m32=b.b.z};function Wj(a){t.Ra.call(this,a);this.v=new K(0,0,0);this.cb=new K(0,0,0);this.hb=this.xa=0;this.Jf=1;this.Cg=0;this.Vk=1;this.Bg=0;this.jg=new sb(Gb);this.t=this.ce=0;this.Va=new K(0,0,0);this.Lc=!0}Wj.prototype=Object.create(t.Ra.prototype);f=Wj.prototype;f.constructor=Wj;f.create=function(){t.Ra.prototype.create.call(this);Rj.add(this)};
f.remove=function(){t.Ra.prototype.remove.call(this);Rj.remove(this)};f.kk=function(){return 0};function Vj(a,b){var c=(b.t-a.t)/(1-a.t);c=new K(a.Va.x*c,a.Va.y*c,a.Va.z*c);c.round();a.b.add(c);a.Va.sub(c);a.t=b.t}
f.handleEvent=function(){for(var a=new K(this.v.x,this.v.y,this.v.z),b=Tj(this.b,this.xa,this.hb),c=Xj(this),d=0;d<b.length;d++){var e=b[d],h=!1,g=-Dc(this.v,e);0<g&&(2E3<g*this.Bg&&(h=!0,g*=1+this.Bg),this.v.x+=e.x*g,this.v.y+=e.y*g,this.v.z+=e.z*g);g=-Dc(this.Va,e);0<g&&(h&&(g*=1+this.Bg),this.Va.x+=e.x*g,this.Va.y+=e.y*g,this.Va.z+=e.z*g)}for(d=0;d<c.length;d++){h=function(m,n){var r=Dc(m,e),p=Dc(n,e);var v=k.Jf;var z=l.Jf;r>=p?v=[r,p]:(v=(v*r+z*p)/(v+z),v=[v+(v-r)*k.Bg,v+(v-p)*l.Bg]);r=v[0]-r;
p=v[1]-p;m.x+=e.x*r;m.y+=e.y*r;m.z+=e.z*r;n.x+=e.x*p;n.y+=e.y*p;n.z+=e.z*p};e=c[d];var k=this,l=e.source;l.index<k.index||(h(k.Va,l.Va),h(k.v,l.v))}Gc(this.Va,b);Gc(this.v,b);0<b.length+c.length&&(Ed(this.v,a,a),a.na(1),this.$j());this.bound=Uj(this.b,this.xa,this.hb,this.Va);if(this.Va.ni())return null;t.Hf();b=q(b);for(a=b.next();!a.done;a=b.next())a.value.source.Da=t.Da;c=q(c);for(a=c.next();!a.done;a=c.next())a.value.source.Da=t.Da;0>=this.xa||!(c=Yj(this,this.b,this.xa,this.hb,this.Va,!0))||
(c.source=this,c.wj=this.ce,c.target&&(c.Ck=c.target.ce),Oj.add(c,c.t))};
function Yj(a,b,c,d,e,h){for(var g=new nf(b,e,c),k=null,l=1,m=g.next();m&&!(m.t>l);){for(var n=function(v){v.Da!=t.Da&&(v=v.uf(b,c,d,e))&&(v.d=v.t*e.length(),-1>v.d||(v.t=a.t+v.t*(1-a.t),v.t>=l||(k=v,l=v.t)))},r=q(m.node.pa),p=r.next();!p.done;p=r.next())n(p.value);m=q(m.node.vd);for(p=m.next();!p.done;p=m.next())n(p.value);m=g.next()}if(!h)return k;for(h=0;h<Rj.elements.length;h++)if(g=Rj.elements[h],a!=g&&g.Da!=t.Da&&!a.jg.get(g)&&!g.jg.get(a)&&de(a.bound,g.bound)&&(n=a.t>g.t?a.t:g.t,p=Zj(a,n),
m=Zj(g,n),r=ak(p.Uj,p.r,p.i,p.Sb,m.Uj,m.r,m.i,m.Sb)))r.d=r.t*Ed(p.Sb,m.Sb,new K(0,0,0)).length(),-1>r.d||(r.t=n+r.t*(1-n),r.t>=l||(r.target=g,k=r,l=r.t));return k}function Zj(a,b){b=(b-a.t)/(1-a.t);b=new K(a.Va.x*b,a.Va.y*b,a.Va.z*b);b.round();var c={};c.Uj=(new K(a.b.x,a.b.y,a.b.z)).add(b);c.r=a.xa;c.i=a.hb;c.Sb=(new K(a.Va.x,a.Va.y,a.Va.z)).sub(b);return c}
function Tj(a,b,c){var d=uf(a,b),e=[];t.Hf();d=q(d);for(var h=d.next();!h.done;h=d.next()){h=h.value;for(var g=q(h.pa),k=g.next();!k.done;k=g.next())k=k.value,k.Da!=t.Da&&k.Yg(a,b,c,e);h=q(h.vd);for(k=h.next();!k.done;k=h.next())g=k.value,g.Da!=t.Da&&g.Yg(a,b,c,e)}return e}
function Xj(a){for(var b=[],c=0;c<Rj.elements.length;c++){var d=Rj.elements[c];if(a!=d&&!a.jg.get(d)&&!d.jg.get(a)){var e=a.b;var h=a.xa,g=a.hb,k=d.b,l=d.xa,m=d.hb;if(0==g&&0==m){e=new K(e.x-k.x,e.y-k.y,e.z-k.z);var n=e.na(1);e.d=Dc(new K(k.x+e.x*l,k.y+e.y*l,k.z+e.z*l),e)+h;n-=h+l;e=2<n||n<-h?null:e}else{if(e.y-g>k.y+m){n=new K(e.x-k.x,e.y-g-(k.y+m),e.z-k.z);var r=n.na(1);e=new K(k.x+n.x*l,k.y+n.y*l,k.z+n.z*l)}else e.y+g<k.y-m?(n=new K(e.x-k.x,e.y+g-(k.y-m),e.z-k.z),r=n.na(1),e=new K(k.x+n.x*l,k.y+
n.y*l,k.z+n.z*l)):(n=new K(e.x-k.x,0,e.z-k.z),r=n.na(1),e=new K(k.x+n.x*l,(e.y*m+k.y*g)/(g+m),k.z+n.z*l));n.d=Dc(e,n)+h;r-=h+l;e=2<r||r<-h?null:n}e&&(e.source=d,b.push(e))}}return b}f.$j=function(){};f.wi=function(){};f.input=function(){};f.rg=function(){return!1};function bk(a){Wj.call(this,a);this.Yi=this.ai=this.Hd=this.oi=this.Gf=this.fc=0;this.pi=this.Vf=Number.NEGATIVE_INFINITY;this.wk=this.wg=!1;this.de=0;this.eh=18}bk.prototype=Object.create(Wj.prototype);bk.prototype.constructor=bk;
bk.tf=function(a){return Math.sqrt(2*a*Pj)};f=bk.prototype;f.rg=function(){return this.Vf<t.f-1?!1:!0};
f.kk=function(){var a=0,b=this.wk?this.ai:this.Hd,c=new K(this.b.x,this.b.y-this.hb-.5*this.xa,this.b.z);0>=this.v.y&&(this.wg=!1);if(this.rg()){this.wg=!1;var d=0;t.Hf();var e=this.Yi;if(e=Yj(this,c,.5*this.xa,0,new K(0,-e,0)))d=e.d;c.y+=.5*this.xa;c.y-=d;c=Tj(c,this.xa,0);e=Number.NEGATIVE_INFINITY;for(var h=0;h<c.length;h++){var g=c[h];g.y>e&&(e=g.y)}0<e&&(this.Vf=t.f,a=b-2*(this.xa+this.hb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}else if(!this.wg){d=0;t.Hf();e=this.Hd-2*this.hb-this.xa;if(e=Yj(this,
c,.5*this.xa,0,new K(0,-e,0)))d=e.d;c.y+=.5*this.xa;c.y-=d;c=Tj(c,this.xa,0);e=Number.NEGATIVE_INFINITY;for(h=0;h<c.length;h++)g=c[h],g.y>e&&(e=g.y);0<e&&(this.Vf=t.f,a=b-2*(this.xa+this.hb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}return a};f.ji=function(){return new K(0,0,0)};f.Bj=function(){};
f.input=function(){Wj.prototype.input.call(this);this.Bj();var a=this.ji();if(t.A.sa==this){var b=this.transform;a.set(b.I*a.x+b.K*a.z,0,b.M*a.x+b.m22*a.z)}b=a.na(1);0==b&&(this.de=0);if(this.rg())0<b&&(this.v.x+=a.x*this.Gf,this.v.z+=a.z*this.Gf,this==t.A.sa&&(this.de>=2*this.eh&&(this.de=0),0==this.de?t.j.ya.get("stepConcrete01").play({gain:.5}):this.de==this.eh&&t.j.ya.get("stepConcrete02").play({gain:.5})),this.de=this.Ua&&.5<this.Ua.focus?this.de+.5:this.de+1),this.v.scale(this.fc/(this.fc+this.Gf));
else{b=.25*this.Gf;var c=new S(this.v.z,this.v.x),d=c.length(),e=Dc(this.v,a);0>e&&(e=0);e>this.fc&&(e=this.fc);b=this.fc/(this.fc+b)*(e+b)-e;d>this.fc&&c.scale(Math.max(0,d-b)/d);c.x+=a.z*b;c.y+=a.x*b;this.v.z=c.x;this.v.x=c.y}this.pi<t.f-0||this.Vf<t.f-15||(this.v.y=this.oi,this.pi=this.Vf=Number.NEGATIVE_INFINITY,this.wg=!0)};var ck=2,dk=4,Fj=8;function ek(a){return a&ck||a&dk?!1:!0}function qf(a){return a&dk?!1:!0}function fg(a){return a&Fj?!0:!1}function fk(){this.index=gk++;this.t=NaN;this.n=this.p=null;this.Oa=!0}var gk=-2147483648;function sf(a,b){return a.t<b.t?-1:a.t>b.t?1:1==a.Oa&&0==b.Oa?-1:0==a.Oa&&1==b.Oa?1:a.index<b.index?-1:a.index>b.index?1:0}
function Uj(a,b,c,d){var e=new Qd,h=a.z-b;h<e.C&&(e.C=h);h=a.z+b;h>e.G&&(e.G=h);h=a.z+d.z-b;h<e.C&&(e.C=h);h=a.z+d.z+b;h>e.G&&(e.G=h);h=a.x-b;h<e.l&&(e.l=h);h=a.x+b;h>e.u&&(e.u=h);h=a.x+d.x-b;h<e.l&&(e.l=h);h=a.x+d.x+b;h>e.u&&(e.u=h);b+=c;c=a.y-b;c<e.h&&(e.h=c);c=a.y+b;c>e.s&&(e.s=c);c=a.y+d.y-b;c<e.h&&(e.h=c);c=a.y+d.y+b;c>e.s&&(e.s=c);return e}
function hk(a,b,c,d,e){var h=Cc(new K(a.x-c.x,0,a.z-c.z),new K(b.x,0,b.z),d);if(!h)return null;d=new fk;d.t=h.Fa;d.p=new K(a.x+b.x*d.t,a.y+b.y*d.t,a.z+b.z*d.t);d.n=new K(d.p.x-c.x,0,d.p.z-c.z);d.n.na(1);var g=new fk;g.t=h.rc;g.p=new K(a.x+b.x*g.t,a.y+b.y*g.t,a.z+b.z*g.t);g.n=new K(g.p.x-c.x,0,g.p.z-c.z);g.n.na(1);if(0<b.y){h=(c.y-e-a.y)/b.y;var k=(c.y+e-a.y)/b.y;h>d.t&&(d=new fk,d.t=h,d.p=new K(a.x+b.x*d.t,c.y-e,a.z+b.z*d.t),d.n=new K(0,-1,0));k<g.t&&(g=new fk,g.t=k,g.p=new K(a.x+b.x*g.t,c.y+e,a.z+
b.z*g.t),g.n=new K(0,1,0))}else if(0>b.y)h=(c.y+e-a.y)/b.y,k=(c.y-e-a.y)/b.y,h>d.t&&(d=new fk,d.t=h,d.p=new K(a.x+b.x*d.t,c.y+e,a.z+b.z*d.t),d.n=new K(0,1,0)),k<g.t&&(g=new fk,g.t=k,g.p=new K(a.x+b.x*g.t,c.y-e,a.z+b.z*g.t),g.n=new K(0,-1,0));else if(a.y>c.y+e||a.y<c.y-e)return null;if(d.t>g.t)return null;d.Oa=!0;g.Oa=!1;return d}
function ik(a,b,c,d,e){var h=new K(c.x,NaN,c.z),g=new K,k=new K,l=new S(c.z-a.z,c.x-a.x);var m=new S(b.z,b.x);var n=m.na(1);l=Cd(l,m);h.y=a.y+b.y/n*l;h.y>c.y+e?(h.y=c.y+e,m=Dc((new K(c.x,c.y+e,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):h.y<c.y-e?(h.y=c.y-e,m=Dc((new K(c.x,c.y-e,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):g.set(a.x+m.y*l,h.y,a.z+m.x*l);Ed(h,g,k);m=k.na(1);if(m<d){l=n=null;var r=Cc(new K(a.x-c.x,0,a.z-c.z),new K(b.x,0,b.z),d);if(r){var p=new fk;p.t=r.Fa;p.p=new K(a.x+
b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t);p.p.y<=c.y+e&&p.p.y>=c.y-e&&(p.n=new K(p.p.x-c.x,0,p.p.z-c.z),p.n.na(1),p.Oa=!0,n=p);p=new fk;p.t=r.rc;p.p=new K(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t);p.p.y<=c.y+e&&p.p.y>=c.y-e&&(p.n=new K(p.p.x-c.x,0,p.p.z-c.z),p.n.na(1),p.Oa=!1,l=p)}if(!n||!l)if(r=Bc(a,b,new K(c.x,c.y+e,c.z),d))n||(p=new fk,p.t=r.Fa,p.p=new K(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y>c.y+e&&(p.n=new K(p.p.x-c.x,p.p.y-(c.y+e),p.p.z-c.z),p.n.na(1),p.Oa=!0,n=p)),l||(p=new fk,p.t=r.rc,p.p=new K(a.x+
b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y>c.y+e&&(p.n=new K(p.p.x-c.x,p.p.y-(c.y+e),p.p.z-c.z),p.n.na(1),p.Oa=!1,l=p));if(!n||!l)if(r=Bc(a,b,new K(c.x,c.y-e,c.z),d))n||(p=new fk,p.t=r.Fa,p.p=new K(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y<c.y-e&&(p.n=new K(p.p.x-c.x,p.p.y-(c.y-e),p.p.z-c.z),p.n.na(1),p.Oa=!0,n=p)),l||(p=new fk,p.t=r.rc,p.p=new K(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y<c.y-e&&(p.n=new K(p.p.x-c.x,p.p.y-(c.y-e),p.p.z-c.z),p.n.na(1),p.Oa=!1,l=p));if(n&&l)return{$e:n,Jc:l}}return{Dg:g,
ul:h,Nd:k,Uh:m,tl:d}}function jk(a,b,c,d){b=Bc(d,c,a,b);if(!b)return null;var e=new fk;e.t=-b.rc;e.p=d;e.n=(new K(a.x-(d.x+c.x*b.rc),a.y-(d.y+c.y*b.rc),a.z-(d.z+c.z*b.rc))).round();e.n.na(1);e.Oa=!0;return e}
function kk(a,b,c,d,e){var h=Dc(c,e);c=new K(c.x-e.x*h,c.y-e.y*h,c.z-e.z*h);d=new K(d.x-a.x,d.y-a.y,d.z-a.z);var g=Dc(d,e);d.set(d.x-e.x*g,d.y-e.y*g,d.z-e.z*g);b=Cc(d,c,b);if(!b)return null;g=new fk;g.t=-b.rc;g.p=(new K(a.x+d.x+e.x*h*g.t,a.y+d.y+e.y*h*g.t,a.z+d.z+e.z*h*g.t)).round();g.n=new K(-(d.x+c.x*b.rc),-(d.y+c.y*b.rc),-(d.z+c.z*b.rc));g.n.na(1);g.Oa=!0;return g}
function ak(a,b,c,d,e,h,g,k){if(0==c&&0==g)return c=Ed(a,e,new K(0,0,0)),g=Ed(d,k,new K(0,0,0)),0==g.length()?h=null:(c=Cc(c,g,b+h))?(a=new K(a.x+d.x*c.Fa,a.y+d.y*c.Fa,a.z+d.z*c.Fa),e=new K(e.x+k.x*c.Fa,e.y+k.y*c.Fa,e.z+k.z*c.Fa),k=new fk,k.t=c.Fa,b=h/(h+b),d=1-b,k.p=(new K(e.x*d+a.x*b,e.y*d+a.y*b,e.z*d+a.z*b)).round(),k.n=new K((k.p.x-e.x)/h,(k.p.y-e.y)/h,(k.p.z-e.z)/h),h=k):h=null,h;var l=new K(a.x-e.x,0,a.z-e.z),m=new K(d.x-k.x,0,d.z-k.z);if(0==m.length())return null;l=Cc(l,m,b+h);if(!l)return null;
var n=new K(a.x+d.x*l.Fa,a.y+d.y*l.Fa,a.z+d.z*l.Fa);m=new K(e.x+k.x*l.Fa,e.y+k.y*l.Fa,e.z+k.z*l.Fa);var r=h/(h+b),p=1-r;n=new K(m.x*p+n.x*r,m.y*p+n.y*r,m.z*p+n.z*r);n.round();if(n.y>m.y+g){l=new K(a.x-e.x,a.y-c-(e.y+g),a.z-e.z);m=Ed(d,k,new K(0,0,0));l=Cc(l,m,b+h);if(!l)return null;n=new K(a.x+d.x*l.Fa,a.y-c+d.y*l.Fa,a.z+d.z*l.Fa);m=new K(e.x+k.x*l.Fa,e.y+g+k.y*l.Fa,e.z+k.z*l.Fa);e=new fk;e.t=l.Fa;r=h/(h+b);p=1-r;e.p=(new K(m.x*p+n.x*r,(m.y+g)*p+(n.y-c)*r,m.z*p+n.z*r)).round();e.n=new K((e.p.x-m.x)/
h,(e.p.y-(m.y+g))/h,(e.p.z-m.z)/h)}else if(n.y<m.y-g){l=new K(a.x-e.x,a.y+c-(e.y-g),a.z-e.z);m=Ed(d,k,new K(0,0,0));l=Cc(l,m,b+h);if(!l)return null;n=new K(a.x+d.x*l.Fa,a.y+c+d.y*l.Fa,a.z+d.z*l.Fa);m=new K(e.x+k.x*l.Fa,e.y-g+k.y*l.Fa,e.z+k.z*l.Fa);e=new fk;e.t=l.Fa;r=h/(h+b);p=1-r;e.p=(new K(m.x*p+n.x*r,(m.y-g)*p+(n.y+c)*r,m.z*p+n.z*r)).round();e.n=new K((e.p.x-m.x)/h,(e.p.y-(m.y-g))/h,(e.p.z-m.z)/h)}else e=new fk,e.t=l.Fa,e.p=n,e.n=new K((e.p.x-m.x)/h,0,(e.p.z-m.z)/h);return e}
Kg.prototype.uf=function(a,b,c,d){c=this.y+c;if(0<=d.y)var e=null;else{var h=new fk;h.t=-(a.y-c-b)/d.y;h.p=(new K(a.x+d.x*h.t,a.y-b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new K(0,1,0);e=h}if(!e)return null;if(0==Sc(e.p.z,e.p.x,this.ga).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ga.length;l++){var m=this.ga[l];e=new K(m.c,c,m.g);var n=new K(m.w-m.c,0,m.B-m.g);n.scale(1/m.length);(e=kk(a,b,d,e,n))?(n=m.getParameter(e.p.z,e.p.x),!(0>n||n>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.ga.length-1)+1:h|3<<l-1}for(l=0;l<this.ga.length;l++)h&1<<l||(m=this.ga[l],(e=jk(a,b,d,new K(m.w,c,m.B)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
Lg.prototype.uf=function(a,b,c,d){c=this.y-c;if(0>=d.y)var e=null;else{var h=new fk;h.t=-(c-a.y-b)/-d.y;h.p=(new K(a.x+d.x*h.t,a.y+b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new K(0,-1,0);e=h}if(!e)return null;if(0==Sc(e.p.z,e.p.x,this.ga).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ga.length;l++){var m=this.ga[l];e=new K(m.c,c,m.g);var n=new K(m.w-m.c,0,m.B-m.g);n.scale(1/m.length);(e=kk(a,b,d,e,n))?(n=m.getParameter(e.p.z,e.p.x),!(0>n||n>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.ga.length-1)+1:h|3<<l-1}for(l=0;l<this.ga.length;l++)h&1<<l||(m=this.ga[l],(e=jk(a,b,d,new K(m.w,c,m.B)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
Jg.prototype.uf=function(a,b,c,d){var e=this.U,h=this.h-c;c=this.s+c;if(0<=Q(e,e.g+d.z,e.c+d.x))var g=null;else{var k=new K(e.B-e.g,0,e.c-e.w);k.scale(1/e.length);var l=Dc(d,k),m=new fk;m.t=-(Q(e,a.z,a.x)-b)/l;m.p=(new K(a.x-k.x*b+d.x*m.t,a.y-k.y*b+d.y*m.t,a.z-k.z*b+d.z*m.t)).round();m.n=k;g=m}if(!g)return null;k=0;var n=e.getParameter(g.p.z,g.p.x);0>n&&(k|=1);g.p.y>c&&(k|=2);n>e.length&&(k|=4);g.p.y<h&&(k|=8);if(0==k)return g.item=this,g;if(0==b)return null;k=0;l=null;m=Number.POSITIVE_INFINITY;
g=new K(e.c,h,e.g);n=new K(0,1,0);g=kk(a,b,d,g,n);g?!(g.p.y<h||g.p.y>c)&&g.t<m&&(m=g.t,l=g):k|=9;g=new K(e.c,c,e.g);n=new K(e.w-e.c,0,e.B-e.g);n.scale(1/e.length);(g=kk(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<m&&(m=g.t,l=g)):k|=3;g=new K(e.w,c,e.B);n=new K(0,-1,0);g=kk(a,b,d,g,n);g?!(g.p.y>c||g.p.y<h)&&g.t<m&&(m=g.t,l=g):k|=6;g=new K(e.w,h,e.B);n=new K(e.c-e.w,0,e.g-e.B);n.scale(1/e.length);(g=kk(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<m&&(m=g.t,
l=g)):k|=18;0==(k&1)&&(g=new K(e.c,c,e.g),(g=jk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&2)&&(g=new K(e.w,c,e.B),(g=jk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&4)&&(g=new K(e.w,h,e.B),(g=jk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&8)&&(g=new K(e.c,h,e.g),(g=jk(a,b,d,g))&&g.t<m&&(l=g));return l?(l.item=this,l):null};
Kg.prototype.Yg=function(a,b,c,d){c=this.y+c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ga.length;k++){e=this.ga[k];var l=Q(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new K(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new K(e.c,c,e.g):h>e.length?e=new K(e.w,c,e.B):(h/=e.length,g=1-h,e=new K(e.c*g+e.w*h,c,e.g*g+e.B*h),e.round()));c=new K(a.x-e.x,a.y-e.y,a.z-e.z);c.na(1);c.d=Dc(e,c)+b;a=Dc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Lg.prototype.Yg=function(a,b,c,d){c=this.y-c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ga.length;k++){e=this.ga[k];var l=Q(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new K(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new K(e.c,c,e.g):h>e.length?e=new K(e.w,c,e.B):(h/=e.length,g=1-h,e=new K(e.c*g+e.w*h,c,e.g*g+e.B*h),e.round()));c=new K(a.x-e.x,a.y-e.y,a.z-e.z);c.na(1);c.d=Dc(e,c)+b;a=Dc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Jg.prototype.Yg=function(a,b,c,d){var e=this.h-c,h=this.s+c;c=null;var g=this.U;var k=g.getParameter(a.z,a.x);if(0>k)k=new K(g.c,a.y,g.g),k.y>h?k.y=h:k.y<e&&(k.y=e);else if(k>g.length)k=new K(g.w,a.y,g.B),k.y>h?k.y=h:k.y<e&&(k.y=e);else{k/=g.length;var l=1-k;k=new K(g.c*l+g.w*k,a.y,g.g*l+g.B*k);k.y>h?k.y=h:k.y<e?k.y=e:(c=new K(g.B-g.g,0,g.c-g.w),c.scale(1/g.length));k.round()}null==c&&(c=new K(a.x-k.x,a.y-k.y,a.z-k.z),c.na(1));c.d=Dc(k,c)+b;a=Dc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Kg.prototype.Zi=function(a,b){var c=rb(.5*Qj.y,b.y,a.y-this.y);if(!c)return null;var d=new fk;d.t=c.rc;if(0>d.t)return null;d.p=(new K(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=q(this.ga);for(b=a.next();!b.done;b=a.next())if(0>Q(b.value,d.p.z,d.p.x))return null;d.item=this;d.n=new K(0,1,0);return d};
Lg.prototype.Zi=function(a,b){if(a.y>=this.y)return null;var c=rb(.5*Qj.y,b.y,a.y-this.y);if(!c)return null;var d=new fk;d.t=c.Fa;if(0>d.t)return null;d.p=(new K(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=q(this.ga);for(b=a.next();!b.done;b=a.next())if(0>Q(b.value,d.p.z,d.p.x))return null;d.item=this;d.n=new K(0,-1,0);return d};
Jg.prototype.Zi=function(a,b){var c=Q(this.U,a.z,a.x);if(0>c)return null;var d=bd(this.U,1),e=d.x*b.z+d.y*b.x;if(0<=e)return null;var h=new fk;h.t=-c/e;if(0>h.t)return null;h.p=(new K(a.x+b.x*h.t,a.y+.5*(2*b.y+Qj.y*h.t)*h.t,a.z+b.z*h.t)).round();if(h.p.y>=this.s||h.p.y<this.h)return null;a=this.U.getParameter(h.p.z,h.p.x);if(0>a||a>=this.U.length)return null;h.item=this;h.n=new K(d.y,0,d.x);return h};
Kg.prototype.fi=function(a){for(var b=q(this.ga),c=b.next();!c.done;c=b.next())c=c.value,a.Ca(c.w,this.y,c.B)};Lg.prototype.fi=function(a){for(var b=q(this.ga),c=b.next();!c.done;c=b.next())c=c.value,a.Ca(c.w,this.y,c.B)};Jg.prototype.fi=function(a){a.Ca(this.U.c,this.h,this.U.g);a.Ca(this.U.w,this.s,this.U.B)};
function lk(){if(this.pa){for(var a=new Qd,b=q(this.pa),c=b.next();!c.done;c=b.next())c.value.fi(a);this.$g=vf(a.C,a.l,a.G,a.u);a=q(this.$g);for(b=a.next();!b.done;b=a.next())b=b.value,b.vd.push.apply(b.vd,da(this.pa))}}function mk(){if(this.$g){for(var a=q(this.$g),b=a.next();!b.done;b=a.next())b=b.value,b.vd.splice(b.vd.indexOf(this.pa[0]),this.pa.length);delete this.$g}};function nk(){this.height=this.width=2;this.depth=this.color=null}
nk.prototype.create=function(){this.object=u.createFramebuffer();u.bindFramebuffer(u.FRAMEBUFFER,this.object);var a=this.color=new t.Ld;a.width=this.width;a.height=this.height;a.oh=u.RGBA8;a.format=u.RGBA;a.type=u.UNSIGNED_BYTE;a.ye=u.NEAREST;a.Ff=u.NEAREST;a.create();u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,a.object,0);a=this.depth=u.createRenderbuffer();u.bindRenderbuffer(u.RENDERBUFFER,a);u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH24_STENCIL8,this.width,this.height);
u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,a)};function ok(a){cg.call(this,a);this.Ea=new U;this.pitch=this.heading=0;this.mg=112;this.kd=zc(40);this.hl=!1;this.Fh=8E3}ok.prototype=Object.create(cg.prototype);ok.prototype.constructor=ok;ok.prototype.create=function(){var a=this.jj=new cg;a.Ea=this.O;V(a,this);a=this.kj=new cg;a.Ea=this.O;V(a,this);return this};
ok.prototype.step=function(){this.mg+=Te.a;0>this.mg&&(this.mg=0);this.transform.m32=Math.pow(1.125,this.mg);Te.d[2]&&(this.heading-=4E6*Te.mc.x,this.pitch+=4E6*Te.mc.y);var a=Ac(this.heading),b=Ac(this.pitch);Kd(this.Ea);this.Ea.rotate(a,b,0);a=this.Ea.yf();var c=this.Ea.zf();b=this.Ea.ee();if(Te.d[1]){var d=2*Math.tan(this.kd)*this.transform.m32/t.canvas.height,e=-Te.mc.x*d;d*=Te.mc.y;this.Ea.H+=e*a.x+d*c.x;this.Ea.m31+=e*a.y+d*c.y;this.Ea.m32+=e*a.z+d*c.z}c=new K(0,0,0);Ue.d.KeyW&&--c.z;Ue.d.KeyS&&
(c.z+=1);Ue.d.KeyA&&--c.x;Ue.d.KeyD&&(c.x+=1);if(e=c.length())c.scale(this.transform.m32/(60*e)),this.Ea.H+=c.x*a.x+c.z*b.x,this.Ea.m31+=c.x*a.y+c.z*b.y,this.Ea.m32+=c.x*a.z+c.z*b.z;a=this.jj;Kd(a.transform);a.transform.H=-this.Fh;a.transform.rotate(Math.atan(.5*-this.Fh/this.transform.m32),0,0);a.kd=this.kd;a=this.kj;Kd(a.transform);a.transform.H=this.Fh;a.transform.rotate(Math.atan(.5*this.Fh/this.transform.m32),0,0);a.kd=this.kd;cg.prototype.step.call(this);return this};t.Animation=function(){t.Node.call(this);this.length=0;this.Hb=NaN;this.ig={}};t.Animation.prototype=Object.create(Node.prototype);f=t.Animation.prototype;f.constructor=t.Animation;f.step=function(){Node.prototype.step.call(this)};f.play=function(){this.Hb=t.f};f.key=function(a,b,c){var d=this.ig[a];d||(d=this.ig[a]=new pk);return d.key(b,c)};f.print=function(){console.log("{");console.log("let a = new NG.Animation();");for(var a in this.ig)this.ig.hasOwnProperty(a)&&this.ig[a].print(a);console.log("}")};
t.Animation.Z=function(a,b){b.reset();b.translate(a[0],a[1],a[2]);b.rotate(a[3],a[4],a[5]);return b};function pk(){this.keys=new sb(qk)}pk.prototype.key=function(a,b){var c=this.keys.get(a);c||(c=new rk,c.t=a,this.keys.add(c));c.Sb=b;return c};pk.prototype.print=function(a){for(var b=0;b<this.keys.elements.length;b++){var c=this.keys.elements[b];console.log("a.key('"+a+"', "+c.t+", "+c.Sb+");")}};function rk(){this.Sb=this.t=0}
function qk(a,b){return isNaN(a)?a.t<b.t?-1:a.t>b.t?1:0:a<b.t?-1:a>b.t?1:0};function Ji(a,b,c,d,e,h){t.Node.call(this);this.b=new K(a.c,b+112500,a.g);this.fd=-Infinity;this.Tg=NaN;this.open=this.state=0;e.la!=h.la&&(this.xh=Math.max(e.la,h.la));V(this,t.lf);var g=new kg(t.j.ge.get("bayDoor01"));g.transform.H=this.b.x;g.transform.m31=this.b.y;g.transform.m32=this.b.z;g.transform.I=-a.fa;g.transform.M=a.$;g.transform.K=-a.$;g.transform.m22=-a.fa;V(g,t.lf);g.create();he(g,e.ja);var k=q(g.Zc);for(b=k.next();!b.done;b=k.next())b=b.value,b.Vg=!0,b.D=t.j.qa.get("physical"),b.ba=
t.j.S.get("BayDoor01"),b.W=lh,b.Ma=["portalLightIndex",e.Be,!0,"color",od,!1];this.wh=g;this.hc=c;this.le=e;c=new kg(t.j.ge.get("bayDoor01"));c.transform.H=this.b.x;c.transform.m31=this.b.y;c.transform.m32=this.b.z;c.transform.I=a.fa;c.transform.M=-a.$;c.transform.K=a.$;c.transform.m22=a.fa;V(c,t.lf);c.create();he(c,h.ja);e=q(c.Zc);for(b=e.next();!b.done;b=e.next())b=b.value,b.Vg=!0,b.D=t.j.qa.get("physical"),b.ba=t.j.S.get("BayDoor01"),b.W=lh,b.Ma=["portalLightIndex",h.Be,!0,"color",od,!1];this.vh=
c;this.vc=d;this.ke=h;this.pa=[];h=[new S(-6250,-112500),new S(6250,-112500),new S(6250,112500),new S(-6250,112500)];for(d=0;d<h.length;d++)h[d]=a.jb(h[d].x,h[d].y);a=[];d=h[h.length-1];h=q(h);for(c=h.next();!c.done;c=h.next())c=c.value,a.push(new P(d.x,d.y,c.x,c.y)),d=c;this.pa.push(new Lg(a,this.b.y-112500));this.pa.push(new Jg(hd(a[0]),this.b.y-112500,this.b.y+112500),new Jg(hd(a[2]),this.b.y-112500,this.b.y+112500));a=q(this.pa);for(d=a.next();!d.done;d=a.next())d=d.value,d.item=this,d.qg();lk.call(this);
this.update()}Ji.prototype=Object.create(t.Node.prototype);f=Ji.prototype;f.constructor=Ji;
f.step=function(){if(!(t.f%4)){var a=Infinity,b=0;this.le.la<=Vh&&this.le.la>=Wh&&b++;this.ke.la<=Vh&&this.ke.la>=Wh&&b++;b||this.remove();for(var c=q(t.A.Qc),d=c.next();!d.done;d=c.next())d=d.value,d.fb&&(d=Math.abs(d.b.x-this.b.x)+Math.abs(d.b.y-this.b.y)+Math.abs(d.b.z-this.b.z),d<a&&(a=d));t.A.sa&&(c=t.A.sa,c=Math.abs(c.b.x-this.b.x)+Math.abs(c.b.y-this.b.y)+Math.abs(c.b.z-this.b.z),c<a&&(a=c));if(0==this.state&&0==this.open)2==b&&5E5>a&&(this.state=1,this.fd=4*Math.floor(t.f/4),this.Tg=NaN);
else if(1==this.state&&1==this.open)if(isNaN(this.xh))1E6<=a&&(isNaN(this.Tg)&&(this.Tg=t.f),0<=t.f-this.Tg&&(this.state=0,this.fd=t.f));else if(1E6<=a||t.A.ra.Mb.la==this.xh)this.state=0,this.fd=t.f;a=(t.f-this.fd)/36;if(!(1<a)){0==this.state?(this.open=1-Math.pow(a,2),1==a&&t.A.ra.Mb.la==this.xh&&(Wh=this.xh)):1==this.state&&(this.open=Math.pow(a,2));a=q(this.pa);for(b=a.next();!b.done;b=a.next())b.value.fd=t.f;this.update()}}};
f.update=function(){var a=this.hc.h+(this.hc.height-12500)*this.open;this.hc.s=this.vc.s=this.pa[0].y=this.pa[1].h=this.pa[2].h=a;this.pa[0].ca.y=this.pa[1].ca.h=this.pa[2].ca.h=a;this.wh.transform.m31=this.vh.transform.m31=a+112500;this.wh.Zc[0].Ma[1]=this.le.Be;this.vh.Zc[0].Ma[1]=this.ke.Be;this.wh.Zc[0].Ma[4]=this.le.style.qd;this.vh.Zc[0].Ma[4]=this.ke.style.qd};f.Sa=function(){t.D.N("clipY",this.b.y+225E3,!1)};
f.remove=function(){this.wh.remove();this.vh.remove();mk.call(this);for(var a=q(this.pa),b=a.next();!b.done;b=a.next())b.value.fd=t.f;t.Node.prototype.remove.call(this)};
function Ii(a,b,c,d){t.ua.call(this);this.b=new K(a.c,b+62500,a.g);this.transform.H=this.b.x;this.transform.m31=this.b.y;this.transform.m32=this.b.z;this.transform.I=-a.fa;this.transform.M=a.$;this.transform.K=-a.$;this.transform.m22=-a.fa;this.transform.I*=87500;this.transform.L*=87500;this.transform.M*=87500;this.transform.J*=62500;this.transform.m11*=62500;this.transform.m12*=62500;V(this,t.Ge);this.le=c;this.ke=d;this.pa=[];b=[new S(-625,-87500),new S(625,-87500),new S(625,87500),new S(-625,87500)];
for(c=0;c<b.length;c++)b[c]=a.jb(b[c].x,b[c].y);c=[];d=b[b.length-1];var e=q(b);for(b=e.next();!b.done;b=e.next())b=b.value,c.push(new P(d.x,d.y,b.x,b.y)),d=b;this.pa.push(new Jg(hd(c[0]),this.b.y-112500,this.b.y+112500),new Jg(hd(c[2]),this.b.y-112500,this.b.y+112500));for(b=0;2>b;b++)c=this.pa[b],c.item=this,c.flags|=ck,c.qg();this.pa[0].aa=this.le.index;this.pa[1].aa=this.ke.index;b=[new S(-9375,-87500),new S(9375,-87500),new S(9375,87500),new S(-9375,87500)];for(c=0;c<b.length;c++)b[c]=a.jb(b[c].x,
b[c].y);a=[];c=b[b.length-1];d=q(b);for(b=d.next();!b.done;b=d.next())b=b.value,a.push(new P(c.x,c.y,b.x,b.y)),c=b;this.pa.push(new Jg(hd(a[0]),this.b.y-112500,this.b.y+112500),new Jg(hd(a[2]),this.b.y-112500,this.b.y+112500));for(a=2;4>a;a++)this.pa[a].flags|=dk;lk.call(this)}Ii.prototype=Object.create(t.ua.prototype);Ii.prototype.constructor=Ii;Ii.Z=function(a,b){return a.depth-b.depth};Ii.prototype.update=function(){};
Ii.prototype.Ig=function(){return!this.Ha||this.le.ja.Da<t.f&&this.ke.ja.Da<t.f?!1:!0};Ii.De=function(){t.wb(tg);t.$a(t.j.qa.get("physical"));t.Qb(0,t.j.S.get("Window01"));mh.bind();t.qb(1);t.Pb(1);t.D.N("color",od);t.D.N("architectureLighting",1,!0);t.D.N("lightingFancy",t.$b.lightingFancy,!0)};
Ii.prototype.Sa=function(){t.D.N("modelMatrix",this.O);t.D.N("portalLightIndex",this.le.Be,!0);t.D.N("ambientLight",this.le.ja.pb,!1);u.drawArrays(u.TRIANGLE_FAN,ug(0,1),4);var a=(new U).set(this.O);a.I=-a.I;a.L=-a.L;a.M=-a.M;a.K=-a.K;a.m21=-a.m21;a.m22=-a.m22;t.D.N("modelMatrix",a);t.D.N("portalLightIndex",this.ke.Be,!0);t.D.N("ambientLight",this.ke.ja.pb,!1);u.drawArrays(u.TRIANGLE_FAN,ug(0,1),4)};
Ii.prototype.remove=function(){mk.call(this);for(var a=q(this.pa),b=a.next();!b.done;b=a.next())b.value.fd=t.f;t.ua.prototype.remove.call(this)};
function sk(a,b,c){t.Ra.call(this,"crate");this.rb=240;this.b.x=a;this.b.y=b+5E4;this.b.z=c;Od(this.transform,this.b);a=[new K(-5E4,0,-5E4),new K(-5E4,0,5E4),new K(5E4,0,5E4),new K(5E4,0,-5E4)];b=q(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.jb(c,c),c.round();a=[new P(a[0].z,a[0].x,a[1].z,a[1].x),new P(a[1].z,a[1].x,a[2].z,a[2].x),new P(a[2].z,a[2].x,a[3].z,a[3].x),new P(a[3].z,a[3].x,a[0].z,a[0].x)];this.pa=[];this.pa.push(new Kg(a,this.b.y+5E4),new Lg(a,this.b.y-5E4));a=kd(a);
this.pa.push(new Jg(a[0],this.b.y-5E4,this.b.y+5E4),new Jg(a[1],this.b.y-5E4,this.b.y+5E4),new Jg(a[2],this.b.y-5E4,this.b.y+5E4),new Jg(a[3],this.b.y-5E4,this.b.y+5E4));a=q(this.pa);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;lk.call(this)}sk.prototype=Object.create(t.Ra.prototype);f=sk.prototype;f.constructor=sk;
f.create=function(){var a=this.pc=new kg(t.j.ge.get("lootBox"));a.Ea=this.O;V(a,this);a.create();this.Nb=a.src.Nb;he(a,this.ja);ie(a,6E4);t.A.kg.push(this);tk.push(this);t.Ra.prototype.create.call(this)};
f.step=function(){if(t.A.sa){var a=Ed(t.A.sa.b,this.b,new K(0,0,0));a.y=0;a.na(1);this.transform.I=a.z;this.transform.M=-a.x;this.transform.K=a.x;this.transform.m22=a.z;this.transform.rotate(zc(-15),0,0)}10==t.f-this.wf&&this.Xh();t.f==this.Gd+4?this.pc.W=t.j.vb.get("flashWhite"):t.f==this.Gd+6?this.pc.W=t.j.vb.get("flashRed"):t.f==this.Gd+8&&delete this.pc.W;t.Ra.prototype.step.call(this)};f.Te=function(a){isNaN(this.wf)&&(this.Gd=t.f,this.rb-=a,0>=this.rb&&(this.wf=t.f))};
f.Xh=function(){if(t.A.sa){for(var a=[],b=q(t.A.sa.Ua.Ad),c=b.next();!c.done;c=b.next()){var d=c.value;c=a;var e=d.Vd-uk(d);d=d.constructor.Sh;for(e/=d.Wa;1<=e;)c.push(new vk(d)),e--;Lb(1/e)&&c.push(new vk(d))}a=q(a);for(b=a.next();!b.done;b=a.next())b=b.value,b.b.set(this.b.x,this.b.y,this.b.z),b.b.z+=5E4*(E(w)-.5),b.b.x+=5E4*(E(w)-.5),b.v.set(6E3*(E(w)-.5),9E3*(E(w)+1),6E3*(E(w)-.5)),V(b,t.Ji),b.create()}t.j.ya.get("hit02").play({gain:1});this.remove()};
f.remove=function(){t.Ra.prototype.remove.call(this);this.pc.remove();t.A.kg.splice(t.A.kg.indexOf(this),1);wk.call(this);mk.call(this);for(var a=q(this.pa),b=a.next();!b.done;b=a.next())b.value.fd=t.f};
function xk(a,b,c){t.Ra.call(this,"barrel");this.rb=160;this.b.x=a;this.b.y=b+65E3;this.b.z=c;Od(this.transform,this.b);a=[new K(-5E4,0,-5E4),new K(-5E4,0,5E4),new K(5E4,0,5E4),new K(5E4,0,-5E4)];b=q(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.jb(c,c),c.round();a=[new P(a[0].z,a[0].x,a[1].z,a[1].x),new P(a[1].z,a[1].x,a[2].z,a[2].x),new P(a[2].z,a[2].x,a[3].z,a[3].x),new P(a[3].z,a[3].x,a[0].z,a[0].x)];this.pa=[];this.pa.push(new Kg(a,this.b.y+5E4),new Lg(a,this.b.y-5E4));a=kd(a);
this.pa.push(new Jg(a[0],this.b.y-5E4,this.b.y+5E4),new Jg(a[1],this.b.y-5E4,this.b.y+5E4),new Jg(a[2],this.b.y-5E4,this.b.y+5E4),new Jg(a[3],this.b.y-5E4,this.b.y+5E4));a=q(this.pa);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;lk.call(this)}xk.prototype=Object.create(t.Ra.prototype);f=xk.prototype;f.constructor=xk;
f.create=function(){var a=this.pc=new kg(t.j.ge.get("nitroBarrel"));a.Ea=this.O;V(a,this);a.create();this.Nb=a.src.Nb;he(a,this.ja);ie(a,6E4);t.A.dg.push(this);tk.push(this);t.Ra.prototype.create.call(this)};
f.step=function(){if(isNaN(this.wf)){if(t.A.sa){var a=Ed(t.A.sa.b,this.b,new K(0,0,0));a.y=0;a.na(1);this.transform.I=a.z;this.transform.M=-a.x;this.transform.K=a.x;this.transform.m22=a.z;this.transform.rotate(zc(15),0,0)}a=1+.25*Math.sin(t.f*Math.PI/3)*(1-this.rb/160);this.rb=Math.min(this.rb+2,160);Kd(this.pc.transform);this.pc.transform.scale(a,a,a);t.f==this.Gd+4?this.pc.W=t.j.vb.get("flashWhite"):t.f==this.Gd+6?this.pc.W=t.j.vb.get("flashRed"):t.f==this.Gd+8&&delete this.pc.W;t.Ra.prototype.step.call(this)}else{a=
t.f-this.wf;var b=1+1/12*a;Kd(this.pc.transform);this.pc.transform.scale(b,b,b);6==a&&this.Xh()}};f.Te=function(a){isNaN(this.wf)&&(this.Gd=t.f,this.rb-=a,0>=this.rb&&(this.wf=t.f))};
f.Xh=function(){function a(d){var e=Ed(d.b,this.b,new K),h=e.na(1);if(d instanceof yk){var g=(h-5E5)/2E6;g=1-g;g=ob(g,0,1);d.Ia+=zc(10)*g}5E5<=h||(d instanceof Y&&(d.rb=0,d.ah()),d instanceof yk&&(d.Vf=Number.NEGATIVE_INFINITY,d.wg=!0,d.Ia+=zc(10)),h=1E4,e.y+=1,d.v.x+=e.x*h,d.v.y+=e.y*h,d.v.z+=e.z*h)}t.j.ya.get("explode01").play({gain:1});for(var b=q(t.A.Qc),c=b.next();!c.done;c=b.next())c=c.value,zk(c,this.b),a.call(this,c);b=q(t.A.dg);for(c=b.next();!c.done;c=b.next())c=c.value,5E5>Ed(c.b,this.b,
new K(0,0,0)).na(1)&&c.Te(Number.POSITIVE_INFINITY);b=q(t.A.kg);for(c=b.next();!c.done;c=b.next())c=c.value,5E5>Ed(c.b,this.b,new K(0,0,0)).na(1)&&c.Te(Number.POSITIVE_INFINITY);t.A.sa&&a.call(this,t.A.sa);c=new Ak(1E5);c.transform.H=this.b.x;c.transform.m31=this.b.y;c.transform.m32=this.b.z;V(c,t.nd);c.create();this.remove()};
f.remove=function(){t.Ra.prototype.remove.call(this);this.pc.remove();t.A.dg.splice(t.A.dg.indexOf(this),1);wk.call(this);mk.call(this);for(var a=q(this.pa),b=a.next();!b.done;b=a.next())b.value.fd=t.f};function Bk(a){t.Node.call(this,"GunManager "+a.name);this.ha=a;this.Ad=[];this.F=null;this.action="ready";this.V=NaN;this.focus=0;this.jc=!1;this.og=null;this.xb=this.Yb=this.Xc=0;this.gb=null;this.We=this.Ve=0;this.kc=[];this.xc=0}Bk.prototype=Object.create(t.Node.prototype);f=Bk.prototype;f.constructor=Bk;
f.create=function(){var a=this.ze=new t.ua("muzzleFlare");qg.call(a);a.Sa=sg;a.D=t.j.qa.get("image");a.ba=t.j.S.get("muzzleFlare01");a.W=new le;a.W.Aa=1;a.color=new T(255,255,255,0);a.Xa=12500;a.Ha=0;a.Ea=this.ha.od.O;V(a,t.Fd)};
f.step=function(){t.f==this.zj+1&&(this.bf.Fb.x-=this.gi,this.bf.Fb.y-=this.gi,this.bf.Fb.z-=this.gi,this.zj=NaN,this.bf=null);if(this.F){var a=this.ha;a.$f=null;var b=a.sc.O,c=new K(b.H,b.m31,b.m32);b=new K(-b.K,-b.m21,-b.m22);for(var d=q(t.A.Qc),e=d.next();!e.done;e=d.next()){e=e.value;var h=ik(c,b,e.b,e.xa,e.hb);if(h.$e){h=h.$e;if(0>h.t)continue;if(1E8<=h.t)continue;h=Ed(h.p,c,new K)}else{var g=h.Dg.da(),k=h.Uh-e.xa;g.x+=h.Nd.x*k;g.y+=h.Nd.y*k;g.z+=h.Nd.z*k;h=Ed(g,c,new K);if(0>=Dc(h,b))continue}pf(c,
h,ek)||(e.sh=t.f)}if(c=a.Ua.F.Hi(a.sc.O))a.$f=c}--this.xc;0>this.xc&&(this.xc=0);a=q(this.Ad);c=a.next();a:for(;!c.done;c=a.next())if(c=c.value,c!=this.F)for(b=q(c.ri),d=b.next();!d.done;d=b.next())if(Ue.p[d.value]){this.og=c;break a}Te.p[0]&&(this.Yb=1);Te.r[0]&&(this.Yb=0);Te.p[2]&&(this.Xc=1);Te.r[2]&&(this.Xc=0);this.Xc||(this.focus-=1/6,0>this.focus&&(this.focus=0));Ue.p.KeyR&&(this.xb=1);if(this.F)this.F[this.action].call(this);else for(Ck(this),a=0;a<this.kc.length;a++)c=this.kc[a],0<c.alpha||
(this.kc.splice(a--,1),V(c,null))};
f.Sa=function(){if(this.gb){var a=od;90>t.f-this.ha.qh&&(a=0==Math.floor(t.f/3)%2?new T(255,255,255,128):new T(255,255,255,0));u.enable(u.SCISSOR_TEST);t.Zb.Hc.N("viewMatrix",Pd);t.Zb.Hc.upload();t.Gb(0);t.Pb(0);t.qb(2);t.wb(tg);t.$a(t.j.qa.get("physicalCardThreshold"));t.D.N("color",a);t.D.N("ambientLight",this.ha.ja.pb,!1);a=this.F.constructor.bj;t.Qb(0,a);var b=Math.round(a.width/2-this.gb.x+this.gb.m+this.Ve),c=Math.round(a.height/2-this.gb.y+this.gb.o+this.We);u.scissor(this.gb.m+Math.round(this.Ve),
-this.gb.o-Math.round(this.We)+t.canvas.height-this.gb.i,this.gb.a,this.gb.i);var d=new U;d.I=a.width/t.canvas.width;d.m11=-a.height/t.canvas.height;d.H=-1+2*b/t.canvas.width;d.m31=1-2*c/t.canvas.height;t.D.N("modelMatrix",d);u.drawArrays(u.TRIANGLE_FAN,0,4);u.disable(u.SCISSOR_TEST)}};function Ck(a){if(!a.og)return!1;a.gb=null;a.Xc=0;a.Yb=0;a.xb=0;a.xc=0;a.jc=!1;a.F=a.og;t.A.sd();a.action="equip";a.V=t.f+1;a.og=null;return!0}
f.uc=function(){var a=400*this.ha.ie;a*=1-2/3*this.focus;this.Ve=this.ha.lh*a;this.We=this.ha.uc*a};Bk.Z=function(a,b,c,d,e,h){var g=new U;b*=1E5;c*=1E5;a*=1E5;g.rotate(zc(h),zc(e),zc(d));g.scale(1,1,1);g.translate(b,c,a);d=g;e=new U;e.I=d.m22;e.L=d.K;e.M=d.m21;e.J=d.M;e.m11=d.I;e.m12=d.L;e.K=d.m12;e.m21=d.J;e.m22=d.m11;e.H=d.m32;e.m31=d.H;e.m32=d.m31;d=e;e=new U;e.I=d.I;e.L=d.L;e.M=d.M;e.J=d.K;e.m11=d.m21;e.m12=d.m22;e.K=-d.J;e.m21=-d.m11;e.m22=-d.m12;e.H=d.H;e.m31=d.m32;e.m32=-d.m31;return e};
function Dk(a,b){a.bf=a.ha.Mb;a.zj=t.f;a.gi=b;a.ha.Mb.Fb.x+=b;a.ha.Mb.Fb.y+=b;a.ha.Mb.Fb.z+=b}function Ek(a){this.ti=a;this.actions={};this.cc=this.va=this.Ba=0;this.Wd=this.Vd=-1;this.hi=2/3;this.cg=this.zg=this.Oe=this.Mf=0}function uk(a){return a.cc+a.va+a.Ba}Ek.prototype.Nh=function(){return!1};Ek.prototype.Xf=function(){return!1};
function Fk(a){var b=new K(a.H,a.m31,a.m32);a=new K(-a.K,-a.m21,-a.m22);var c=[];c.cmp=function(m,n){return m.ef>n.ef?-1:1};for(var d=q(t.A.Qc),e=d.next();!e.done;e=d.next())if(e=e.value,e.fb||!(t.f>e.V)){var h=ik(b,a,e.b,e.xa-this.cg,e.hb);if(h.$e){var g=h.$e;0>g.t||1E8<=g.t||(g.p.ef=1E8-g.t,g.p.item=e,kb(c,g.p))}else{g=h.Dg.da();var k=h.Uh-(e.xa-this.cg);g.x+=h.Nd.x*k;g.y+=h.Nd.y*k;g.z+=h.Nd.z*k;k=Ed(h.Dg,b,new K);h=k.na(1);var l=Ed(g,b,new K);0>=Dc(l,a)||(l.normalize(),k=Dc(k,l),l=this.zg,5E5<
h&&(l=Math.atan(5E5*Math.tan(l)/h)),Math.acos(k)>=l||(g.ef=k-1,g.item=e,kb(c,g)))}}a=q(c);for(c=a.next();!c.done;c=a.next())if(c=c.value,!pf(b,Ed(c,b,new K)))return c;return null}
function Gk(a,b,c){function d(m){m=new Hk(m);m.transform.H=a.p.x;m.transform.m31=a.p.y;m.transform.m32=a.p.z;V(m,t.nd);m.create();m.step()}function e(){var m=new Ik;m.rh=120*(E(w)+.5);m.Xa=2E4;m.transform.H=a.p.x;m.transform.m31=a.p.y;m.transform.m32=a.p.z;m.v.x=a.n.x;m.v.y=a.n.y;m.v.z=a.n.z;m.v.scale(2E4*E(w)+1E4);V(m,t.nd);m.create();m.step()}if(a.item instanceof Y){var h=new U,g=new K,k=new K,l=a.Sb.da();Ec(l,g,k);h.Nf(g);h.Of(k);h.Pf(l);Od(h,a.p);Jk(a.item,h,c);V(new Kk,t.Yk);a.item.Te(b)}else a.item instanceof
xk?(d(31250),e(),a.item.Te(b)):a.item instanceof sk?(d(31250),e(),a.item.Te(b)):(d(12500),e(),Ig(t.A.pj,new K(2343.75*Math.round(a.p.x/2343.75),2343.75*Math.round(a.p.y/2343.75),2343.75*Math.round(a.p.z/2343.75)),a.n,Math.PI,18750,Jb(16),16))}function Lk(a){Ek.call(this,a);this.Vd=600;this.va=this.Wd=30;this.Ba=this.Vd-this.va;this.hi=1;this.zg=zc(4);this.cg=8E3}Lk.prototype=Object.create(Ek.prototype);Lk.prototype.constructor=Lk;
Lk.eb={CarbineEquip02:{m:291,o:265,x:1204,y:1548,a:189,i:31},CarbineEquip03:{m:90,o:191,x:814,y:1548,a:390,i:105},CarbineEquip04:{m:126,o:152,x:0,y:1548,a:354,i:144},CarbineEquip05:{m:46,o:96,x:1012,y:255,a:434,i:200},CarbineEquip06:{m:92,o:68,x:1281,y:0,a:356,i:228},CarbineEquip07:{m:106,o:65,x:960,y:0,a:321,i:231},CarbineEquip08:{m:129,o:76,x:0,y:255,a:282,i:220},CarbineEquip09:{m:145,o:91,x:282,y:255,a:250,i:205},CarbineEquip10:{m:163,o:109,x:1231,y:670,a:220,i:187},CarbineEquip11:{m:184,o:125,
x:292,y:1047,a:220,i:171},CarbineEquip12:{m:198,o:133,x:1541,y:1047,a:253,i:163},CarbineEquip13:{m:207,o:132,x:1296,y:1047,a:245,i:164},CarbineAim01:{m:194,o:133,x:0,y:1225,a:229,i:163},CarbineAim02:{m:170,o:136,x:1247,y:1225,a:187,i:160},CarbineAim03:{m:157,o:137,x:184,y:1388,a:174,i:159},CarbineFire01:{m:209,o:131,x:1030,y:1047,a:266,i:165},CarbineFire02:{m:213,o:128,x:512,y:1047,a:246,i:168},CarbineFire03:{m:212,o:133,x:229,y:1225,a:248,i:163},CarbineAimFire01:{m:147,o:136,x:1434,y:1225,a:193,
i:160},CarbineAimFire02:{m:152,o:136,x:0,y:1388,a:184,i:160},CarbineAimFire03:{m:155,o:134,x:730,y:1225,a:178,i:162},CarbineReload01:{m:185,o:133,x:477,y:1225,a:253,i:163},CarbineReload02:{m:101,o:134,x:908,y:1225,a:339,i:162},CarbineReload03:{m:14,o:144,x:838,y:1388,a:432,i:152},CarbineReload04:{m:0,o:153,x:354,y:1548,a:460,i:143},CarbineReload05:{m:0,o:149,x:1270,y:1388,a:480,i:147},CarbineReload06:{m:0,o:139,x:358,y:1388,a:480,i:157},CarbineReload07:{m:0,o:107,x:271,y:670,a:480,i:189},CarbineReload08:{m:0,
o:41,x:0,y:0,a:480,i:255},CarbineReload09:{m:0,o:47,x:480,y:0,a:480,i:249},CarbineReload10:{m:0,o:95,x:532,y:255,a:480,i:201},CarbineReload11:{m:0,o:107,x:751,y:670,a:480,i:189},CarbineReload12:{m:0,o:111,x:311,y:860,a:480,i:185},CarbineReload13:{m:0,o:114,x:791,y:860,a:480,i:182},CarbineReload14:{m:59,o:115,x:1271,y:860,a:421,i:181},CarbineReload15:{m:200,o:109,x:1451,y:670,a:280,i:187},CarbineReload16:{m:235,o:103,x:309,y:475,a:245,i:193},CarbineReload17:{m:246,o:104,x:838,y:475,a:234,i:192},CarbineReload18:{m:241,
o:105,x:1072,y:475,a:239,i:191},CarbineReload19:{m:209,o:106,x:0,y:670,a:271,i:190},CarbineReload20:{m:172,o:99,x:1446,y:255,a:308,i:197},CarbineReload21:{m:171,o:101,x:0,y:475,a:309,i:195},CarbineReload22:{m:196,o:103,x:554,y:475,a:284,i:193},CarbineReload23:{m:164,o:105,x:1311,y:475,a:316,i:191},CarbineReload24:{m:158,o:109,x:0,y:860,a:311,i:187},CarbineReload25:{m:173,o:118,x:0,y:1047,a:292,i:178},CarbineReload26:{m:175,o:128,x:758,y:1047,a:272,i:168}};
Lk.prototype.fire=function(){var a=t.f-this.V;this.uc();if(0==a){t.j.ya.get("CarbineFire01").play({gain:.5,pitch:1.5});t.j.ya.get("CarbineFire02").play({gain:1,pitch:1.5});--this.F.va;!this.F.va&&this.F.Ba&&(this.xb=1);t.A.sd();this.xc+=35;this.oc=Bk.Z(.053697,.319573,-.058355,-.833,.006,-179.61);var b=this.ze;b.Ha=1;var c=255*(8*E(w)+1)/12&255;b.color.r=c;b.color.Ta=c;b.color.ka=c;b.scale=E(w)+1;b.Ec=Ac(Ib());c=new U;c.translate(0,-35E3,0);Ld(this.oc,c,b.transform);Dk(this,.02);b=(new U).rotate(0,
zc(2.5*E(w)),0);c=(new U).rotate(0,0,E(w)*Math.PI*2);var d=Mk(this.ha);Ld(d,c,d);Ld(d,b,d);b=this.F.Ee(d);b=q(b);for(c=b.next();!c.done;c=b.next())Gk(c.value,72,1.2);b=new Nk("CartridgeCarbineSpent");b.Ni=zc(6*(3*E(w)+1));b.transform.H-=2E3;b.transform.m31+=2100;c=new U;Ld(this.ha.od.O,this.oc,c);Ld(c,b.transform,b.transform);b.v.x-=3E3*(2*E(w)+1);b.v.z=-b.v.x;Md(c,b.v,b.v);b.b.set(b.transform.H,b.transform.m31,b.transform.m32);b.v.add(this.ha.v);Gd(b.v,b.cb);V(b,t.Fd);b.create();180<=this.xc&&(this.xc-=
180,b=new Ok,b.Xa=6E4,b.transform.m31-=45E3,c=new U,Ld(this.ha.od.O,this.oc,c),Ld(c,b.transform,b.transform),b.v.y=-37500,Md(c,b.v,b.v),b.v.add(this.ha.v),Gd(b.v,b.cb),b.ja=this.ha.ja,V(b,t.nd),b.create(),b.step(),this.kc.push(b));3<this.kc.length&&(V(this.kc[0],null),this.kc.splice(0,1))}1==a&&(this.ze.Ha=0);2==a&&(this.ha.Ia+=zc(1));if(3<=a){if(Ck(this))return;if(!this.Xc&&this.Yb){if(this.F.va){this.action="fire";this.V=t.f+1;return}this.F.Ba&&(this.xb=1)}this.F.$d()}4<=a?this.action="ready":(a=
("00"+a).slice(-2),this.gb=this.F.constructor.eb["CarbineFire"+a]||this.F.constructor.eb.CarbineEquip13)};
Lk.prototype.aimFire=function(){var a=t.f-this.V;this.uc();if(0==a){t.j.ya.get("CarbineFire01").play({gain:.5,pitch:1.5});t.j.ya.get("CarbineFire02").play({gain:1,pitch:1.5});--this.F.va;!this.F.va&&this.F.Ba&&(this.xb=1);t.A.sd();this.xc+=35;this.oc=Bk.Z(0,.270042,-.06106,0,0,180);var b=this.ze;b.Ha=1;var c=255*(8*E(w)+1)/12&255;b.color.r=c;b.color.Ta=c;b.color.ka=c;b.scale=E(w)+1;b.Ec=Ac(Ib());c=new U;c.translate(0,-35E3,0);Ld(this.oc,c,b.transform);Dk(this,.02);b=(new U).rotate(0,zc(1*E(w)),0);
c=(new U).rotate(0,0,E(w)*Math.PI*2);var d=Mk(this.ha);Ld(d,c,d);Ld(d,b,d);b=this.F.Ee(d);b=q(b);for(c=b.next();!c.done;c=b.next())Gk(c.value,72,1.2);b=new Nk("CartridgeCarbineSpent");b.Ni=zc(6*(3*E(w)+1));b.transform.H-=2E3;b.transform.m31+=2100;c=new U;Ld(this.ha.od.O,this.oc,c);Ld(c,b.transform,b.transform);b.v.x-=3E3*(2*E(w)+1);b.v.z=-b.v.x;Md(c,b.v,b.v);b.b.set(b.transform.H,b.transform.m31,b.transform.m32);b.v.add(this.ha.v);Gd(b.v,b.cb);V(b,t.Fd);b.create();210<=this.xc&&(this.xc-=210,b=new Ok,
b.Xa=4E4,b.scale=1,b.transform.m31-=45E3,c=new U,Ld(this.ha.od.O,this.oc,c),Ld(c,b.transform,b.transform),b.v.y=-2E4,Md(c,b.v,b.v),b.v.add(this.ha.v),Gd(b.v,b.cb),b.ja=this.ha.ja,V(b,t.nd),b.create(),b.step(),this.kc.push(b));3<this.kc.length&&(V(this.kc[0],null),this.kc.splice(0,1))}1==a&&(this.ze.Ha=0);2==a&&(this.ha.Ia+=zc(.5));if(3<=a){if(Ck(this))return;if(this.Xc&&this.Yb){if(this.F.va){this.action="aimFire";this.V=t.f+1;return}this.F.Ba&&(this.xb=1)}}4<=a?this.action="ready":(a=("00"+a).slice(-2),
this.gb=this.F.constructor.eb["CarbineAimFire"+a]||this.F.constructor.eb.CarbineAim03)};
Lk.prototype.equip=function(){var a=t.f-this.V+5;if(!Ck(this))if(this.xb)this.action="reload",this.V=t.f+1;else{this.jc=this.F.va;this.We=this.Ve=0;9==a&&(this.ha.Ia+=zc(1));a=Math.floor(a/2.5);if(9<=a)if(this.F.Ef.call(this),1==this.focus){if(this.Yb){if(this.F.va){this.action="aimFire";this.V=t.f+1;return}this.F.Ba&&(this.xb=1)}}else if(0==this.focus&&this.Yb){if(this.F.va){this.action="fire";this.V=t.f+1;return}this.F.Ba&&(this.xb=1)}14<=a?this.action="ready":0==this.focus&&(a=("00"+a).slice(-2),
this.gb=this.F.constructor.eb["CarbineEquip"+a])}};Lk.prototype.reload=function(){var a=t.f-this.V+3;this.xb=0;if(!Ck(this)){this.jc=!1;this.We=this.Ve=0;3==a&&(this.F.Ba+=this.F.va,this.F.va=0,t.A.sd());if(60==a){this.ha.Ia+=zc(1);var b=Math.min(this.F.Wd-this.F.va,this.F.Ba);this.F.va+=b;this.F.Ba-=b;t.A.sd()}a=Math.floor(a/3);27<=a?this.action="ready":(a=("00"+a).slice(-2),this.gb=this.F.constructor.eb["CarbineReload"+a])}};
Lk.prototype.ready=function(){this.jc=this.F.va;if(!Ck(this))if(this.xb)this.action="reload",this.V=t.f+1;else{this.uc();this.F.Ef.call(this);if(1==this.focus){if(this.Yb){if(this.F.va){this.action="aimFire";this.V=t.f+1;return}this.F.Ba&&(this.xb=1)}}else if(0==this.focus&&this.Yb){if(this.F.va){this.action="fire";this.V=t.f+1;return}this.F.Ba&&(this.xb=1)}this.F.$d()}};f=Lk.prototype;
f.Ef=function(){this.Xc&&(this.focus+=1/6,1<this.focus&&(this.focus=1));this.jc=this.F.va;if(0<this.focus){var a=Math.floor(3*this.focus);a=("00"+a).slice(-2);this.gb=this.F.constructor.eb["CarbineAim"+a]||this.F.constructor.eb.CarbineEquip13}else this.gb=this.F.constructor.eb.CarbineEquip13};f.Hi=Fk;
f.Ee=function(a){var b=new K(a.H,a.m31,a.m32),c=new K(-a.K,-a.m21,-a.m22),d=1E8;if(a=pf(b,new K(c.x*d,c.y*d,c.z*d)))d=a.d;var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=q(t.A.Qc),g=h.next();!g.done;g=h.next())if(g=g.value,g.fb||!(t.f>g.V)){var k=ik(b,c,g.b,g.xa,g.hb).$e;!k||0>k.t||k.t>=d||(k.item=g,k.Sb=c,kb(e,k))}b=null;d=c=NaN;e=q(e);for(h=e.next();!h.done;h=e.next())h=h.value,h.item.mh>c||h.item.mh==c&&h.t>d||(b=h,
c=h.item.mh,d=h.t);e=[];b&&e.push(b);a&&e.push(a);return e};f.Nh=function(){return 0>=this.Ba||"reload"==this.ti.action||10<this.va?!1:!0};f.Xf=function(){var a=uk(this);return 0>=a?2:30>a?1:0};f.$d=function(){this.va>=this.Wd||!this.Ba?this.Mf=0:(this.Mf+=1,7.8<=this.Mf&&(this.Mf-=7.8,--this.Ba,this.va+=1))};function Pk(a){Ek.call(this,a);this.Vd=12;this.Wd=0;this.cc=1;this.va=this.Wd;this.Ba=this.Vd-this.va-this.cc;this.Li=!1;this.zg=zc(0)}Pk.prototype=Object.create(Ek.prototype);
Pk.prototype.constructor=Pk;
Pk.eb={ShotgunEquip01:{m:170,o:185,x:874,y:1644,a:310,i:111},ShotgunEquip02:{m:183,o:151,x:569,y:1351,a:297,i:145},ShotgunEquip03:{m:331,o:128,x:1175,y:704,a:149,i:168},ShotgunEquip04:{m:111,o:20,x:871,y:0,a:369,i:276},ShotgunEquip05:{m:140,o:0,x:0,y:0,a:340,i:296},ShotgunEquip06:{m:158,o:0,x:340,y:0,a:277,i:296},ShotgunEquip07:{m:173,o:0,x:617,y:0,a:254,i:296},ShotgunEquip08:{m:188,o:100,x:0,y:508,a:257,i:196},ShotgunEquip09:{m:195,o:152,x:1432,y:1351,a:258,i:144},ShotgunEquip10:{m:199,o:159,x:0,
y:1644,a:257,i:137},ShotgunEquip11:{m:201,o:160,x:257,y:1644,a:253,i:136},ShotgunEquip12:{m:197,o:156,x:1248,y:1500,a:254,i:140},ShotgunEquip13:{m:195,o:152,x:0,y:1500,a:254,i:144},ShotgunFire01:{m:202,o:152,x:254,y:1500,a:278,i:144},ShotgunFire02:{m:181,o:147,x:0,y:1351,a:299,i:149},ShotgunFire03:{m:175,o:133,x:0,y:884,a:305,i:163},ShotgunFire04:{m:177,o:118,x:299,y:704,a:303,i:178},ShotgunFire05:{m:182,o:112,x:651,y:508,a:298,i:184},ShotgunFire06:{m:184,o:112,x:949,y:508,a:296,i:184},ShotgunFire07:{m:183,
o:113,x:1245,y:508,a:297,i:183},ShotgunFire08:{m:181,o:116,x:0,y:704,a:299,i:180},ShotgunFire09:{m:187,o:120,x:602,y:704,a:293,i:176},ShotgunFire10:{m:200,o:125,x:895,y:704,a:280,i:171},ShotgunFire11:{m:211,o:132,x:1324,y:704,a:269,i:164},ShotgunFire12:{m:215,o:139,x:305,y:884,a:265,i:157},ShotgunFire13:{m:212,o:145,x:1320,y:1199,a:268,i:151},ShotgunFire14:{m:203,o:149,x:299,y:1351,a:270,i:147},ShotgunFire15:{m:196,o:152,x:532,y:1500,a:256,i:144},ShotgunCycle01:{m:187,o:139,x:570,y:884,a:209,i:157},
ShotgunCycle02:{m:162,o:109,x:475,y:508,a:176,i:187},ShotgunCycle03:{m:123,o:88,x:1399,y:296,a:176,i:208},ShotgunCycle04:{m:101,o:84,x:0,y:296,a:176,i:212},ShotgunCycle05:{m:103,o:84,x:176,y:296,a:174,i:212},ShotgunCycle06:{m:126,o:84,x:350,y:296,a:173,i:212},ShotgunCycle07:{m:126,o:86,x:1220,y:296,a:179,i:210},ShotgunCycle08:{m:127,o:85,x:1045,y:296,a:175,i:211},ShotgunCycle09:{m:126,o:84,x:523,y:296,a:173,i:212},ShotgunCycle10:{m:123,o:84,x:696,y:296,a:173,i:212},ShotgunCycle11:{m:101,o:84,x:869,
y:296,a:176,i:212},ShotgunCycle12:{m:97,o:82,x:1240,y:0,a:181,i:214},ShotgunCycle13:{m:93,o:83,x:1421,y:0,a:192,i:213},ShotgunCycle14:{m:114,o:108,x:257,y:508,a:218,i:188},ShotgunCycle15:{m:166,o:139,x:779,y:884,a:250,i:157},ShotgunReload01:{m:196,o:153,x:788,y:1500,a:230,i:143},ShotgunReload02:{m:209,o:156,x:1502,y:1500,a:158,i:140},ShotgunReload03:{m:183,o:164,x:510,y:1644,a:182,i:132},ShotgunReload04:{m:150,o:151,x:866,y:1351,a:283,i:145},ShotgunReload05:{m:124,o:144,x:1029,y:884,a:356,i:152},
ShotgunReload06:{m:108,o:144,x:1385,y:884,a:372,i:152},ShotgunReload07:{m:108,o:144,x:0,y:1047,a:372,i:152},ShotgunReload08:{m:108,o:144,x:372,y:1047,a:308,i:152},ShotgunReload09:{m:108,o:144,x:680,y:1047,a:262,i:152},ShotgunReload10:{m:108,o:144,x:942,y:1047,a:262,i:152},ShotgunReload11:{m:107,o:144,x:1204,y:1047,a:373,i:152},ShotgunReload12:{m:108,o:144,x:0,y:1199,a:262,i:152},ShotgunReload13:{m:108,o:144,x:262,y:1199,a:262,i:152},ShotgunReload14:{m:108,o:144,x:524,y:1199,a:262,i:152},ShotgunReload15:{m:108,
o:144,x:786,y:1199,a:262,i:152},ShotgunReload16:{m:124,o:144,x:1048,y:1199,a:272,i:152},ShotgunReload17:{m:150,o:151,x:1149,y:1351,a:283,i:145},ShotgunReload18:{m:183,o:164,x:692,y:1644,a:182,i:132},ShotgunReload19:{m:209,o:156,x:1588,y:1199,a:158,i:140},ShotgunReload20:{m:196,o:153,x:1018,y:1500,a:230,i:143}};
Pk.prototype.equip=function(){var a=t.f-this.V+2;Ck(this)||(this.jc=this.F.cc,9==a&&(this.ha.Ia+=zc(1)),a=Math.floor(a/2.5),9<=a&&this.Yb&&this.F.cc?(this.action="fire",this.V=t.f+1,this.Yb=0):9<=a&&(this.Xc||!this.F.cc&&this.F.Ba)?(this.action="cycleOpen",this.V=t.f+1-6):14<=a?this.action="ready":(a=("00"+a).slice(-2),this.gb=this.F.constructor.eb["ShotgunEquip"+a],this.We=this.Ve=0))};
Pk.prototype.ready=function(){Ck(this)||(this.jc=this.F.cc,this.Yb&&this.F.cc?(this.action="fire",this.V=t.f+1,this.Yb=0):this.Xc?(this.action="cycleOpen",this.V=t.f+1,this.jc=!1):(this.uc(),this.F.$d(),this.gb=this.F.constructor.eb.ShotgunEquip13))};
Pk.prototype.fire=function(){var a=t.f-this.V;this.uc();this.jc=!1;if(0==a){t.j.ya.get("ShotgunFire01").play({gain:1,pitch:.75});t.j.ya.get("explode01").play({gain:1,pitch:1.5});this.F.cc=0;this.F.Li=!0;t.A.sd();this.oc=Bk.Z(.04499,.31957,-.038305,-.596,.007,-179.3);var b=this.ze;b.Ha=1;var c=255*(E(w)+4)/5&255;b.color.r=c;b.color.Ta=c;b.color.ka=c;b.scale=E(w)+1;b.Ec=Ac(Ib());c=new U;c.translate(0,-4E4,0);Ld(this.oc,c,b.transform);Dk(this,.04);b=Mk(this.ha);var d=Pk.sb.length;c=Array(d);for(var e=
0;e<d;e++){var h=Jb(e+1);h!=e&&(c[e]=c[h]);c[h]=e}d=E(w)*Math.Zf;for(e=0;e<c.length;e++){h=(new U).rotate(0,Pk.sb[8-e],0);var g=(new U).rotate(0,0,d+c[e]*Math.Zf/9),k=new U;Ld(b,g,k);Ld(k,h,k);g=this.F.Ee(k);h=270;g=q(g);for(k=g.next();!k.done;k=g.next()){k=k.value;var l=h;k.item instanceof Y&&(l=Math.min(h,k.item.rb));Gk(k,l,1.2);h-=l;if(0>=h)break}}b=new Ok;b.Xa=6E4;b.scale=1;b.transform.m31-=45E3;c=new U;Ld(this.ha.od.O,this.oc,c);Ld(c,b.transform,b.transform);b.v.y=-37500;Md(c,b.v,b.v);b.v.add(this.ha.v);
Gd(b.v,b.cb);b.ja=this.ha.ja;V(b,t.nd);b.create();b.step();this.kc.push(b);3<this.kc.length&&(V(this.kc[0],null),this.kc.splice(0,1));this.ha.Ia+=zc(2)}1==a&&(this.ze.Ha=0);3==a&&(this.ha.Ia+=zc(4));if(4<=a){if(Ck(this))return;if(this.Xc){this.action="cycleOpen";this.V=t.f+1;return}this.F.$d()}7<=a&&(a=7+Math.floor((a-7)/4));16<=a?this.action="ready":(a=("00"+a).slice(-2),this.gb=this.F.constructor.eb["ShotgunFire"+a]||this.F.constructor.eb.ShotgunEquip13)};
Pk.prototype.cycleOpen=function(){var a=t.f-this.V;if(!Ck(this)){this.jc=!1;this.uc();12==a&&t.j.ya.get("ShotgunOpen01").play({gain:1,pitch:.8125});if(21==a){this.ha.Ia+=zc(1);this.F.Ba+=this.F.cc;this.oc=Bk.Z(-.018192,.25469,-.045699,-19.3,39.9,177);if(this.F.Li||this.F.cc){var b=new Nk("CartridgeShotgunSpent");b.ij=.65;b.Ni=zc(24*(1*E(w)+1));b.transform.m31+=6E3;var c=new U;Ld(this.ha.od.O,this.oc,c);Ld(c,b.transform,b.transform);b.v.x=-3E3;b.v.z=-b.v.x;Md(c,b.v,b.v);b.b.set(b.transform.H,b.transform.m31,
b.transform.m32);b.v.add(this.ha.v);Gd(b.v,b.cb);V(b,t.Fd);b.create();this.F.Li=!1}this.F.cc=0}a=Math.floor(a/3);if(9<=a){a=9;if(!this.Xc){this.action="cycleShut";this.V=t.f+1-27;return}this.F.$d()}a=("00"+a).slice(-2);this.gb=this.F.constructor.eb["ShotgunCycle"+a]||this.F.constructor.eb.ShotgunEquip13}};
Pk.prototype.cycleShut=function(){var a=t.f-this.V;Ck(this)||(this.uc(),30==a&&(t.j.ya.get("ShotgunShut01").play({gain:1,pitch:.8125}),1<=this.F.Ba&&(--this.F.Ba,this.F.cc+=1),t.A.sd()),39==a&&(this.jc=this.F.cc),a=Math.floor(a/3),13<=a&&Ck(this)||(16<=a?this.action="ready":(a=("00"+a).slice(-2),this.gb=this.F.constructor.eb["ShotgunCycle"+a]||this.F.constructor.eb.ShotgunEquip13)))};f=Pk.prototype;f.Hi=Fk;
f.Ee=function(a){var b=new K(a.H,a.m31,a.m32);a=new K(-a.K,-a.m21,-a.m22);var c=1E8,d=pf(b,new K(a.x*c,a.y*c,a.z*c));d&&(c=d.d);var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=q(t.A.Qc),g=h.next();!g.done;g=h.next())if(g=g.value,g.fb||!(t.f>g.V)){var k=hk(b,a,g.b,g.xa,g.hb+g.xa);!k||0>k.t||k.t>=c||(k.item=g,k.Sb=a,kb(e,k))}d&&e.push(d);return e};f.Nh=function(){return!1};
f.Xf=function(){var a=uk(this);return 0>=a?2:5>a?1:0};f.$d=function(){};function Qk(a){Ek.call(this,a);this.Vd=18;this.va=this.Wd=6;this.Ba=this.Vd-this.va;this.zg=zc(1);this.Mi=0}Qk.prototype=Object.create(Ek.prototype);Qk.prototype.constructor=Qk;
Qk.eb={RevolverEquip00:{m:0,o:255,x:799,y:1715,a:480,i:41},RevolverEquip01:{m:32,o:246,x:351,y:1715,a:448,i:50},RevolverEquip02:{m:129,o:224,x:0,y:1715,a:351,i:72},RevolverEquip03:{m:180,o:199,x:1327,y:1595,a:300,i:97},RevolverEquip04:{m:193,o:176,x:1215,y:1456,a:287,i:120},RevolverEquip05:{m:194,o:157,x:0,y:1456,a:249,i:139},RevolverEquip06:{m:184,o:144,x:1247,y:854,a:232,i:152},RevolverEquip07:{m:172,o:148,x:1158,y:1009,a:255,i:148},RevolverAim01:{m:178,o:152,x:906,y:1309,a:226,i:144},RevolverAim02:{m:150,
o:150,x:692,y:1309,a:214,i:146},RevolverAim03:{m:133,o:148,x:1413,y:1009,a:208,i:148},RevolverFire01:{m:184,o:149,x:1032,y:1161,a:238,i:147},RevolverFire02:{m:184,o:149,x:1270,y:1161,a:238,i:147},RevolverFire03:{m:184,o:149,x:1508,y:1161,a:238,i:147},RevolverFire04:{m:184,o:149,x:0,y:1309,a:238,i:147},RevolverFire05:{m:195,o:149,x:238,y:1309,a:217,i:147},RevolverFire06:{m:201,o:111,x:1504,y:266,a:148,i:185},RevolverFire07:{m:197,o:71,x:193,y:266,a:144,i:225},RevolverFire08:{m:212,o:100,x:634,y:266,
a:192,i:196},RevolverFire09:{m:173,o:114,x:486,y:494,a:253,i:182},RevolverFire10:{m:180,o:111,x:0,y:494,a:242,i:185},RevolverFire11:{m:176,o:113,x:242,y:494,a:244,i:183},RevolverFire12:{m:169,o:126,x:361,y:679,a:266,i:170},RevolverFire13:{m:171,o:139,x:1382,y:679,a:269,i:157},RevolverFire14:{m:171,o:147,x:900,y:1009,a:258,i:149},RevolverFire15:{m:185,o:149,x:455,y:1309,a:237,i:147},RevolverAimFire01:{m:133,o:148,x:1479,y:854,a:208,i:148},RevolverAimFire02:{m:133,o:148,x:0,y:1161,a:208,i:148},RevolverAimFire03:{m:133,
o:148,x:208,y:1161,a:208,i:148},RevolverAimFire04:{m:133,o:148,x:416,y:1161,a:208,i:148},RevolverAimFire05:{m:138,o:148,x:624,y:1161,a:200,i:148},RevolverAimFire06:{m:144,o:119,x:1054,y:494,a:168,i:177},RevolverAimFire07:{m:140,o:87,x:337,y:266,a:146,i:209},RevolverAimFire08:{m:153,o:110,x:1311,y:266,a:193,i:186},RevolverAimFire09:{m:126,o:121,x:0,y:679,a:219,i:175},RevolverAimFire10:{m:135,o:119,x:1222,y:494,a:211,i:177},RevolverAimFire11:{m:130,o:120,x:1433,y:494,a:211,i:176},RevolverAimFire12:{m:126,
o:130,x:955,y:679,a:219,i:166},RevolverAimFire13:{m:127,o:141,x:0,y:854,a:219,i:155},RevolverAimFire14:{m:131,o:146,x:688,y:1009,a:212,i:150},RevolverAimFire15:{m:133,o:148,x:824,y:1161,a:208,i:148},RevolverReload01:{m:179,o:135,x:1174,y:679,a:208,i:161},RevolverReload02:{m:168,o:104,x:826,y:266,a:178,i:192},RevolverReload03:{m:140,o:68,x:0,y:266,a:193,i:228},RevolverReload04:{m:114,o:40,x:1295,y:0,a:206,i:256},RevolverReload05:{m:99,o:30,x:0,y:0,a:214,i:266},RevolverReload06:{m:102,o:30,x:214,y:0,
a:227,i:266},RevolverReload07:{m:103,o:31,x:441,y:0,a:250,i:265},RevolverReload08:{m:107,o:33,x:895,y:0,a:200,i:263},RevolverReload09:{m:101,o:31,x:691,y:0,a:204,i:265},RevolverReload10:{m:106,o:38,x:1095,y:0,a:200,i:258},RevolverReload11:{m:129,o:60,x:1501,y:0,a:180,i:236},RevolverReload12:{m:161,o:92,x:483,y:266,a:151,i:204},RevolverReload13:{m:173,o:123,x:219,y:679,a:142,i:173},RevolverReload14:{m:173,o:106,x:1004,y:266,a:307,i:190},RevolverReload15:{m:165,o:114,x:739,y:494,a:315,i:182},RevolverReload16:{m:152,
o:129,x:627,y:679,a:328,i:167},RevolverReload17:{m:140,o:141,x:219,y:854,a:340,i:155},RevolverReload18:{m:136,o:143,x:559,y:854,a:344,i:153},RevolverReload19:{m:136,o:144,x:0,y:1009,a:344,i:152},RevolverReload20:{m:136,o:144,x:344,y:1009,a:344,i:152},RevolverReload21:{m:136,o:143,x:903,y:854,a:344,i:153},RevolverReload22:{m:136,o:152,x:1132,y:1309,a:344,i:144},RevolverReload23:{m:140,o:173,x:875,y:1456,a:340,i:123},RevolverReload24:{m:147,o:183,x:338,y:1595,a:333,i:113},RevolverReload25:{m:151,o:186,
x:998,y:1595,a:329,i:110},RevolverReload26:{m:153,o:183,x:671,y:1595,a:327,i:113},RevolverReload27:{m:142,o:176,x:0,y:1595,a:338,i:120},RevolverReload28:{m:155,o:168,x:550,y:1456,a:325,i:128},RevolverReload29:{m:156,o:160,x:249,y:1456,a:301,i:136},RevolverReload30:{m:166,o:155,x:1476,y:1309,a:269,i:141}};
Qk.prototype.equip=function(){var a=t.f-this.V;if(!Ck(this))if(this.xb)this.action="reload",this.V=t.f+1;else{this.jc=!0;0==a&&(this.ha.Ia+=zc(1));a=Math.floor(a/2.5);if(5<=a&&(this.F.Ef.call(this),this.Yb)){if(this.F.va){this.action="fire";this.V=t.f+1;return}this.F.Ba&&(this.xb=1)}8<=a?this.action="ready":0==this.focus&&(a=("00"+a).slice(-2),this.gb=this.F.constructor.eb["RevolverEquip"+a])}};
Qk.prototype.ready=function(){if(!Ck(this))if(this.jc=!0,this.xb)this.action="reload",this.V=t.f+1;else{if(this.Yb){if(this.F.va){this.action="fire";this.V=t.f+1;return}this.F.Ba&&(this.xb=1)}this.uc();this.F.Ef.call(this);this.F.$d()}};
Qk.prototype.fire=function(){var a=t.f-this.V;this.uc();if(4==a){t.j.ya.get("CarbineFire01").play({gain:1,pitch:1});t.j.ya.get("ShotgunFire01").play({gain:.5,pitch:1.5});this.Yb=0;this.F.va--;this.F.Mi++;!this.F.va&&this.F.Ba&&(this.xb=1);t.A.sd();this.oc=.5<this.focus?Bk.Z(0,.49195,-.017475,-.713,0,0):Bk.Z(.032225,.49195,-.022213,.367,-.151,.525);var b=this.ze;b.Ha=1;var c=255*(E(w)+4)/5&255;b.color.r=c;b.color.Ta=c;b.color.ka=c;b.scale=E(w)+1;b.Ec=Ac(Ib());c=new U;c.translate(0,-21E3,0);Ld(this.oc,
c,b.transform);Dk(this,.02);b=new Ok;b.Xa=6E4;b.scale=1;b.transform.m31-=45E3;c=new U;Ld(this.ha.od.O,this.oc,c);Ld(c,b.transform,b.transform);b.v.y=-37500;Md(c,b.v,b.v);b.v.add(this.ha.v);Gd(b.v,b.cb);b.ja=this.ha.ja;V(b,t.nd);b.create();b.step();this.kc.push(b);b=(new U).rotate(0,zc(0*E(w)),0);c=(new U).rotate(0,0,E(w)*Math.PI*2);var d=Mk(this.ha);Ld(d,c,d);Ld(d,b,d);b=this.F.Ee(d);b=q(b);for(c=b.next();!c.done;c=b.next()){c=c.value;d=c.item instanceof Y?3:1;for(var e=0;e<d;e++)Gk(c,360,1.7)}}5==
a&&(this.ze.Ha=0);7==a&&(this.ha.Ia+=zc(3));if(7<=a){if(Ck(this))return;a=7+Math.floor((a-7)/3)}if(13<=a){if(this.Yb){if(this.F.va){this.action="fire";this.V=t.f+1;return}this.F.Ba&&(this.xb=1)}if(this.xb){this.action="reload";this.V=t.f+1;return}this.F.$d()}16<=a?this.action="ready":(a=("00"+a).slice(-2),this.F.Ef.call(this),this.gb=.5<this.focus?this.F.constructor.eb["RevolverAimFire"+a]||this.F.constructor.eb.RevolverAim03:this.F.constructor.eb["RevolverFire"+a]||this.F.constructor.eb.RevolverEquip07)};
Qk.prototype.reload=function(){var a=t.f-this.V+3;this.xb=0;if(!Ck(this)){this.jc=!1;this.We=this.Ve=0;if(24==a){this.ha.Ia+=zc(.5);for(var b=0;b<this.F.Mi;b++)t.j.ya.get("shellCasing0"+(Jb(3)+1)).play({gain:.625,pitch:.65,delay:.125+.15*b});this.F.Mi=0;this.F.Ba+=this.F.va;this.F.va=0;t.A.sd()}57==a&&(this.ha.Ia+=zc(1),b=Math.min(this.F.Wd-this.F.va,this.F.Ba),this.F.va+=b,this.F.Ba-=b,t.A.sd());a=Math.floor(a/3);31<=a?this.action="ready":(a=("00"+a).slice(-2),this.gb=this.F.constructor.eb["RevolverReload"+
a])}};f=Qk.prototype;f.Ef=function(){this.Xc?(this.focus+=1/6,1<this.focus&&(this.focus=1)):this.jc=!0;if(0<this.focus){var a=Math.floor(3*this.focus);a=("00"+a).slice(-2);this.gb=this.F.constructor.eb["RevolverAim"+a]||this.F.constructor.eb.RevolverEquip07}else this.gb=this.F.constructor.eb.RevolverEquip07};f.Hi=function(a){return.5<this.ti.focus?Rk(this,a):Fk.call(this,a)};
function Rk(a,b){function c(n){var r=Ed(n,d,new K);n=r.length();var p=26512.5/n;r=rf(d,r);for(var v=0,z=!0;;){var y=r.shift();if(!y){if(!z){v+=p;break}v=1;break}if(!z){z=y.t-v;if(z>p){v+=p;break}p-=z}v=y.t;z=!y.Oa}return v*n>=n-1E3}var d=new K(b.H,b.m31,b.m32),e=new K(-b.K,-b.m21,-b.m22);b=[];b.cmp=function(n,r){return n.ef>r.ef?-1:1};for(var h=q(t.A.Qc),g=h.next();!g.done;g=h.next())if(g=g.value,(g.fb||!(t.f>g.V))&&600>t.f-g.sh){var k=ik(d,e,g.b,g.xa-a.cg,g.hb);if(k.$e){var l=k.$e;0>l.t||1E8<=l.t||
(l.p.ef=1E8-l.t,l.p.item=g,kb(b,l.p))}else{l=k.Dg.da();var m=k.Uh-(g.xa-a.cg);l.x+=k.Nd.x*m;l.y+=k.Nd.y*m;l.z+=k.Nd.z*m;k=Ed(k.Dg,d,new K).normalize();m=Ed(l,d,new K).normalize();0>=Dc(m,e)||(k=Dc(k,m),l.ef=k-1,l.item=g,kb(b,l),Math.acos(k)>=a.zg&&(l.Uk=!0))}}a=null;b=q(b);for(e=b.next();!e.done;e=b.next())e=e.value,c(e)&&(e.item.Nk=t.f,e.Uk||a||(a=e));return a}
f.Ee=function(a){var b=new K(a.H,a.m31,a.m32),c=new K(-a.K,-a.m21,-a.m22),d=1E8;a=[];for(var e=rf(b,new K(c.x*d,c.y*d,c.z*d)),h=26512.5/d,g=0,k=!0;;){var l=e.shift();if(!l){k||(d*=g+h);break}if(!k){k=l.t-g;if(k>h){d*=g+h;break}h-=k}g=l.t;l.Oa&&a.push(l);k=!l.Oa}e=[];e.cmp=function(m,n){return m.t<n.t?-1:m.t>n.t?1:m.item.index<n.item.index?-1:m.item.index>n.item.index?1:0};h=q(t.A.Qc);for(g=h.next();!g.done;g=h.next())g=g.value,!g.fb&&t.f>g.V||!(l=hk(b,c,g.b,g.xa,g.hb+g.xa))||0>l.t||l.t>=d||(l.item=
g,l.Sb=c,kb(e,l));b=[];e.length&&b.push(e[0]);b.push.apply(b,da(a));return b};f.Nh=function(){return 0>=this.Ba||"reload"==this.ti.action||2<this.va?!1:!0};f.Xf=function(){var a=uk(this);return 0>=a?2:6>a?1:0};f.$d=function(){};function Nk(a){Wj.call(this,a);this.Nb=12500;this.Jf=1;this.start=t.f;this.hk=new K(E(w)-.5,E(w)-.5,E(w)-.5);this.hk.na(1);this.ij=1}Nk.prototype=Object.create(Wj.prototype);Nk.prototype.constructor=Nk;
Nk.prototype.create=function(){Wj.prototype.create.call(this);var a=new kg(t.j.ge.get(this.name));a.Ea=this.O;a.transform.scale(.1,.1,.1);a.transform.rotate(0,-90,0);V(a,this);a.create();he(a,this.ja)};Nk.prototype.step=function(){this.transform.Gi(this.hk,this.Ni);30<=t.f-this.start&&this.remove();Wj.prototype.step.call(this)};Nk.prototype.remove=function(){t.j.ya.get("shellCasing0"+(Jb(3)+1)).play({gain:.625,pitch:this.ij});Wj.prototype.remove.call(this)};
function Kk(a){t.Node.call(this,a);this.Hb=t.f}Kk.prototype=Object.create(t.Node.prototype);Kk.prototype.constructor=Kk;Kk.prototype.step=function(){t.Node.prototype.step.call(this);var a=t.f-this.Hb-6;0>a||(0==a&&t.j.ya.get(Qb("woodSnap01","woodSnap02","woodSnap03")).play({gain:10/60}),5<=(1<=a?a-1:0)&&this.remove())};var tk=[];function wk(){var a=tk.indexOf(this);0>a||tk.splice(a,1)};function yk(a){bk.call(this,a);this.Jf=100;this.Cg=0;this.xa=4E4;this.Hd=18E4;this.ai=9E4;this.hb=.5*(this.Hd-2*this.xa-6E4);this.Yi=12E4;this.fc=12500;this.Gf=2/3*this.fc;this.oi=bk.tf(125E3);this.Nb=2E5;this.eh=16;this.kh=this.lh=this.uc=this.ie=this.ki=this.li=this.Mh=this.Ia=this.ag=this.Ug=0;this.rb=360;this.yg=[];this.qh=-Infinity;this.fb=!0;this.sg=0;this.Kj=-Infinity;this.Lj=Number.NEGATIVE_INFINITY;this.Mj=4E5;this.Tc={}}yk.prototype=Object.create(bk.prototype);f=yk.prototype;
f.constructor=yk;f.create=function(){Wj.prototype.create.call(this);var a=this.sc=new cg("worldCamera");a.hf=6E3;a.af=5E7;a.Ea=this.O;V(a,this);t.A.ra=a;a=this.od=new cg("selfCamera");a.hf=this.sc.hf;a.af=this.sc.af;a.Ea=this.sc.O;V(a,t.Fd);a=this.Ua=new Bk(this);a.Ha=0;V(a,t.Fd);a.create();a=new Lk(this.Ua);a.ri=["KeyE","Digit1"];this.Ua.Ad.push(a);a=new Qk(this.Ua);a.ri=["KeyQ","Digit2"];this.Ua.Ad.push(a);a=new Pk(this.Ua);a.ri=["KeyC","Digit3"];this.Ua.Ad.push(a);this.Ua.og=this.Ua.Ad[0]};
f.step=function(){bk.prototype.step.call(this);if(!(this.Mb.pd||this.Mb.Rk||10>t.f-this.Sj)){var a=this.Mb.ja.pb;.015<.2126*a.x+.7152*a.y+.0722*a.z||(a=Qb(.1125,.175),this.Mb.Fb=new K(a,a,a),this.Mb.Rk=!0)}if(this.fb){for(a=0;a<this.yg.length;a++){var b=this.yg[a],c=t.f-30-b.xk;0>c||(0<b.Wa?(b=b.Wa-2*c,0>=b&&this.yg.splice(a--,1)):0>b.Wa&&(b=b.Wa+2*c,0<=b&&this.yg.splice(a--,1)))}this.fb&&(Te.lock&&(a=1,this.Ua.F&&(a=pb(1,this.Ua.F.hi,this.Ua.focus)),a=t.Tk*a,this.Ug-=Te.mc.x*a,this.ag+=Te.mc.y*a),
this.ag=ob(this.ag,-1073741824,1073741824));a=Ac(this.Ug);b=Ac(this.ag)+zc(1.5*this.ki);c=zc(1.5*this.li);Kd(this.transform);this.transform.rotate(a,0,0);Kd(this.sc.transform);this.sc.transform.rotate(0,b,c);t.gk||(this.sc.transform.rotate((E(w)-.5)*this.Ia,(E(w)-.5)*this.Ia,0),this.Ia*=.8125);0==(t.f&1)&&(this.rg()?(a=this.de*Math.PI/this.eh,this.Mh=6E3*Math.abs(Math.sin(a)),this.lh=Math.sin(a)*Math.PI/210,this.uc=(1-Math.abs(Math.sin(a)))*Math.PI/210):(this.Mh*=.75,this.uc*=.75,this.lh*=.75),this.kh-=
zc(3),0>this.kh&&(this.kh=0));this.sc.transform.m31=this.hb+this.xa-6E3-6E3+this.Mh;a=1;this.Ua.F&&(a=pb(1,this.Ua.F.hi,this.Ua.focus));this.fc=11E3*pb(1,2/3,this.Ua.focus);this.od.kd=zc(24*a);this.sc.kd=zc(30*a);a=this.Mj;a*=a;for(var d in this.Tc)if(b=this.Tc[d],Ed(this.b,b.b,new K(0,0,0)).ff()>=a){c=b;for(var e=q(c.Tc.Ua.Ad),h=e.next();!h.done;h=e.next())h=h.value,h instanceof c.species.Df&&(h.Oe-=c.Wa);c.Ha=-1;c.Qf.Ha=-1;c.Tc=null;delete this.Tc[b.index]}else b.species.ih.call(b,this),b.Wa||(delete this.Tc[b.index],
b.remove());if(!(2>t.f-this.Lj)){d=a;a=null;b=uf(this.b,this.Mj);b=q(b);for(c=b.next();!c.done;c=b.next())for(c=c.value.zh.first();null!=c.item;c=c.next)c.item instanceof vk&&!(c.item.zd||c.item.Tc||0>=c.item.species.Ri.call(c.item,this))&&(e=Ed(this.b,c.item.b,new K(0,0,0)).ff(),e<d&&(d=e,a=c.item));if(a){d=a;d.zd=this;d.Ik=d.b.da();if(d.Jk=d.fb)d.fb=!1,Rj.remove(d);d.species.xi.call(d,d.zd);this.Lj=d.V=t.f}}}};
f.wi=function(a){if(a instanceof Sk){if(a.rk)debugger;a.rk=!0;90>t.f-this.qh||(t.j.ya.get("hit02").play({pitch:.5,gain:1}),t.j.ya.get(Qb("woodSnap01","woodSnap02","woodSnap03")).play({pitch:.5,gain:1}),Tk(this,-60),this.Ia+=zc(6))}};f.ji=function(){var a=new K(0,0,0);if(!this.fb)return a;Ue.d.KeyW&&--a.z;Ue.d.KeyS&&(a.z+=1);Ue.d.KeyA&&--a.x;Ue.d.KeyD&&(a.x+=1);a.na(1)?(this.ie+=1/6,1<this.ie&&(this.ie=1)):(this.ie-=1/6,0>this.ie&&(this.ie=0));this.li=(5*this.li-a.x)/6;this.ki=(5*this.ki-a.z)/6;return a};
f.Bj=function(){this.fb&&Ue.p.Space&&(this.pi=t.f)};function Mk(a){if(!a.$f){var b=new U;b.set(a.sc.O);return b}b=Ed(Nd(a.sc.O),a.$f,new K).normalize();var c=new K(b.z,0,-b.x),d=new K(0,1,0);Fc(b,c,d).na(1);Fc(d,b,c);var e=new U;e.I=c.x;e.L=c.y;e.M=c.z;e.J=d.x;e.m11=d.y;e.m12=d.z;e.K=b.x;e.m21=b.y;e.m22=b.z;e.H=a.sc.O.H;e.m31=a.sc.O.m31;e.m32=a.sc.O.m32;return e}function Tk(a,b){0>b&&(a.qh=t.f);b=ob(a.rb+b,0,360)-a.rb;a.yg.push({xk:t.f,Wa:b});a.rb+=b;0>=a.rb&&a.ah()}
f.ah=function(){if(this.fb){this.fb=!1;for(var a=q(t.A.Qc),b=a.next();!b.done;b=a.next())b=b.value,b.fb&&(b.action.length=0,b.action.unshift("idle"),b.V=NaN,b.path=null);this.Ua.remove();this.Ua=null;t.A.sa=null}};function Y(){bk.call(this,"mantato");this.Jf=150;this.Cg=0;this.xa=30800;this.Hd=189200;this.ai=86E3;this.hb=.5*(this.Hd-2*this.xa-6E4);this.Yi=12E4;this.fc=1/3*14887;this.Gf=2/3*this.fc;this.oi=bk.tf(3E5);this.Nb=2E5;this.mh=-Infinity;this.fb=!0;this.rb=360;this.ib=[];this.Zd=[];this.Ja=new U;this.f=this.Jh=this.qe=0;this.Ce=new U;this.Zg=0;this.Xd=11E4;this.D=t.j.qa.get("physicalCardThreshold");this.ba=t.j.S.get("monsterWalk01");this.color=od;this.action=["idle"];this.V=NaN;this.Nk=this.sh=-Infinity;
this.bg=0;return this}Y.prototype=Object.create(bk.prototype);Y.prototype.constructor=Y;Y.Ub=12;Y.La=NaN;
Y.ed=function(){Y.W=t.j.vb.get("defaultMaterial");var a=t.j.vb.get("monsterSkin").da();a.name="monsterSplatter";a.Aa=1;t.j.vb.add(a);Uk.D=t.j.qa.get("gib");Uk.ba=t.j.S.get("spudGib01");a=[];var b=new U;b.I=1;b.L=0;b.M=-0;b.J=0;b.m11=1;b.m12=0;b.K=0;b.m21=-0;b.m22=1;b.H=0;b.m31=0;b.m32=-0;a.push(b);b=new U;b.I=.9916;b.L=-.1173;b.M=.055;b.J=.1259;b.m11=.9725;b.m12=-.1958;b.K=-.0305;b.m21=.201;b.m22=.9791;b.H=-3498;b.m31=3796;b.m32=6804;a.push(b);b=new U;b.I=.9749;b.L=-.1934;b.M=.1102;b.J=.2213;b.m11=
.8963;b.m12=-.3843;b.K=-.0244;b.m21=.399;b.m22=.9166;b.H=-6400;b.m31=-2683;b.m32=15101;a.push(b);b=new U;b.I=.9601;b.L=-.2246;b.M=.1669;b.J=.2797;b.m11=.7517;b.m12=-.5972;b.K=.0087;b.m21=.62;b.m22=.7845;b.H=-8393;b.m31=-17164;b.m32=25181;a.push(b);b=new U;b.I=.9541;b.L=-.2123;b.M=.2114;b.J=.2942;b.m11=.5306;b.m12=-.795;b.K=.0566;b.m21=.8206;b.m22=.5686;b.H=-9429;b.m31=-39030;b.m32=35202;a.push(b);b=new U;b.I=.9591;b.L=-.1521;b.M=.2388;b.J=.2712;b.m11=.2519;b.m12=-.929;b.K=.0811;b.m21=.9557;b.m22=
.2828;b.H=-9721;b.m31=-68375;b.m32=44142;a.push(b);b=new U;b.I=.9359;b.L=-.2158;b.M=.2785;b.J=.2565;b.m11=-.1246;b.m12=-.9585;b.K=.2415;b.m21=.9685;b.m22=-.0613;b.H=-7782;b.m31=-63561;b.m32=42925;a.push(b);b=new U;b.I=.9573;b.L=-.1734;b.M=.2312;b.J=.1975;b.m11=-.1913;b.m12=-.9614;b.K=.2109;b.m21=.9661;b.m22=-.1489;b.H=-4587;b.m31=-61424;b.m32=39511;a.push(b);b=new U;b.I=.9812;b.L=-.1297;b.M=.143;b.J=.1237;b.m11=-.1466;b.m12=-.9814;b.K=.1482;b.m21=.9807;b.m22=-.1278;b.H=-2376;b.m31=-62808;b.m32=37771;
a.push(b);b=new U;b.I=.9889;b.L=-.134;b.M=.0638;b.J=.053;b.m11=-.0825;b.m12=-.9952;b.K=.1386;b.m21=.9875;b.m22=-.0745;b.H=-104;b.m31=-64955;b.m32=38224;a.push(b);b=new U;b.I=.9803;b.L=-.1963;b.M=.0226;b.J=.0119;b.m11=-.0555;b.m12=-.9984;b.K=.1973;b.m21=.979;b.m22=-.0521;b.H=2290;b.m31=-66053;b.m32=39447;a.push(b);b=new U;b.I=.9587;b.L=-.2839;b.M=.017;b.J=.0035;b.m11=-.0481;b.m12=-.9988;b.K=.2843;b.m21=.9577;b.m22=-.0451;b.H=4830;b.m31=-66621;b.m32=39607;a.push(b);b=new U;b.I=.939;b.L=-.3438;b.M=.0072;
b.J=-.0041;b.m11=-.0323;b.m12=-.9995;b.K=.3439;b.m21=.9385;b.m22=-.0317;b.H=6758;b.m31=-66864;b.m32=40168;a.push(b);b=new U;b.I=.9324;b.L=-.3614;b.M=5E-4;b.J=-.0114;b.m11=-.0308;b.m12=-.9995;b.K=.3612;b.m21=.9319;b.m22=-.0328;b.H=7520;b.m31=-66863;b.m32=40232;a.push(b);Y.Wc=a;a=[];b=new U;b.I=1;b.L=0;b.M=-0;b.J=0;b.m11=1;b.m12=-0;b.K=0;b.m21=0;b.m22=1;b.H=0;b.m31=-0;b.m32=0;a.push(b);b=new U;b.I=.9927;b.L=-.0183;b.M=-.119;b.J=.0277;b.m11=.9966;b.m12=.0773;b.K=.1171;b.m21=-.0801;b.m22=.9899;b.H=70;
b.m31=-3027;b.m32=-619;a.push(b);b=new U;b.I=.9816;b.L=-.0289;b.M=-.1886;b.J=.022;b.m11=.999;b.m12=-.0389;b.K=.1895;b.m21=.034;b.m22=.9813;b.H=288;b.m31=-5629;b.m32=253;a.push(b);b=new U;b.I=.9973;b.L=.0022;b.M=.074;b.J=.0054;b.m11=.9948;b.m12=-.1019;b.K=-.0738;b.m21=.1021;b.m22=.992;b.H=-219;b.m31=-2573;b.m32=764;a.push(b);b=new U;b.I=.9877;b.L=-.0202;b.M=-.155;b.J=.0055;b.m11=.9955;b.m12=-.0949;b.K=.1562;b.m21=.0929;b.m22=.9833;b.H=335;b.m31=259;b.m32=689;a.push(b);b=new U;b.I=.9986;b.L=.0123;b.M=
-.0519;b.J=-.0065;b.m11=.9937;b.m12=.1115;b.K=.053;b.m21=-.111;b.m22=.9924;b.H=178;b.m31=-3079;b.m32=-875;a.push(b);b=new U;b.I=.9996;b.L=.007;b.M=-.0256;b.J=-.0062;b.m11=.9994;b.m12=.0327;b.K=.0258;b.m21=-.0326;b.m22=.9991;b.H=110;b.m31=-5793;b.m32=-254;a.push(b);b=new U;b.I=.9893;b.L=-.0894;b.M=.1151;b.J=.0859;b.m11=.9957;b.m12=.0348;b.K=-.1177;b.m21=-.0245;b.m22=.9928;b.H=-944;b.m31=-2885;b.m32=-285;a.push(b);Y.sb=a};
Y.prototype.create=function(){this.transform.rotate(E(w)*Math.PI*2,0,0);ie(this,37500);tk.push(this);bk.prototype.create.call(this);t.A.Qc.push(this)};Y.prototype.step=function(){Y.prototype[this.action[0]].call(this);this.y=this.b.y+this.hb+this.xa-this.Hd+12500;bk.prototype.step.call(this)};
Y.prototype.De=function(){var a=Nd(this.O);a.y+=this.hb+this.xa-this.Hd+103400;var b=Ed(Nd(t.ra.O),a,new K),c=b.na(1);c=Math.min(1,c/(2*this.Hd));var d=new K(0,1,0),e=Fc(d,b,new K).normalize();Fc(b,e,d);var h=t.ra.O.zf(),g=t.ra.O.ee();this.Ja.Nf(Fd(t.ra.O.yf(),e,c).normalize());this.Ja.Of(Fd(h,d,c).normalize());this.Ja.Pf(Fd(g,b,c).normalize());Od(this.Ja,a);this.Od?this.Ce.set(this.Od[this.f%this.Od.length]):this.Ce.reset();this.fb&&(a=this.O,a=Math.round(4*(Math.atan2(a.K,a.m22)-Math.atan2(t.ra.O.H-
a.H,t.ra.O.m32-a.m32))/Math.PI),0>a&&(a+=8),8<=a&&(a-=8),this.Jh=a,this.Ce.rotate(this.Jh*Math.PI/4,0,0));Ld(this.Ja,this.Ce,this.Ce);this.Ja.H+=this.Ja.J*this.Zg;this.Ja.m31+=this.Ja.m11*this.Zg;this.Ja.m32+=this.Ja.m12*this.Zg;if(this.Ag){a=q(this.Ag);for(b=a.next();!b.done;b=a.next()){c=b.value;c.gf.H+=this.b.x;c.gf.m31+=this.b.y;c.gf.m32+=this.b.z;b=c.tk;c=Nd(c.gf);d=this.Ce;e=new U;h=d.I*-d.H+d.L*-d.m31+d.M*-d.m32;g=d.J*-d.H+d.m11*-d.m31+d.m12*-d.m32;var k=d.K*-d.H+d.m21*-d.m31+d.m22*-d.m32,
l=d.J,m=d.K,n=d.L,r=d.m11,p=d.m21,v=d.M,z=d.m12,y=d.m22;e.I=d.I;e.J=n;e.K=v;e.H=h;e.L=l;e.m11=r;e.m21=z;e.m31=g;e.M=m;e.m12=p;e.m22=y;e.m32=k;e.jb(c,c);d={};d.b=c;d.Hb=t.f+1;e=7E3*b;h=Lb(2)?-e:e;k=Ib()*(180/2147483648);g=Math.cos(k);k=Math.sin(k);d.wa=new Id;d.wa.I=g*h;d.wa.L=k*h;d.wa.J=-k*e;d.wa.m11=g*e;this.ib.push(d);this.ib.length>Y.Ub&&this.ib.shift();d={};d.b=c;d.Hb=t.f+1;b=7E3*b+3500;c=Lb(2)?-b:b;h=Ib()*(180/2147483648);e=Math.cos(h);h=Math.sin(h);d.wa=new Id;d.wa.I=e*c;d.wa.L=h*c;d.wa.J=-h*
b;d.wa.m11=e*b;this.Zd.push(d);this.Zd.length>Y.Ub&&this.Zd.shift()}delete this.Ag}};
Y.prototype.Sa=function(){Y.La+=2;255<Y.La&&(u.clear(u.STENCIL_BUFFER_BIT),Y.La=130);t.Gb(1);u.colorMask(!1,!1,!1,!1);u.stencilFunc(u.ALWAYS,Y.La-128,255);u.stencilOp(u.KEEP,u.KEEP,u.REPLACE);var a=this.Ja.ee(),b=Dc(a,Nd(this.Ja));t.wb(tg);t.$a(t.j.qa.get("monoThresholdEffect"));t.Qb(0,t.j.S.get("smokePuff01"));Y.W.bind();t.qb(0);t.Pb(0);t.D.N("color",od);for(var c=q(this.ib),d=c.next();!d.done;d=c.next()){var e=d.value;d=this.Ce.jb(e.b,new K);if(!(0>Dc(d,a)-b)){var h=4>t.f-e.Hb?1.4:1;e=(new Id).set(e.wa);
e.I*=h;e.L*=h;e.J*=h;e.m11*=h;e=Jd(this.Ja,e,new U);Od(e,d);t.D.N("modelMatrix",e);u.drawArrays(u.TRIANGLE_FAN,ug(0,1),4)}}t.Gb(2);u.colorMask(!0,!0,!0,!0);u.stencilFunc(u.GEQUAL,Y.La-1,127);u.stencilOp(u.KEEP,u.KEEP,u.REPLACE);t.f==this.Gd+1?this.D=t.j.qa.get("flashCardThreshold"):t.f==this.Gd+3&&(this.D=t.j.qa.get("physicalCardThreshold"));t.wb(tg);t.$a(this.D);t.Qb(0,this.ba);Y.W.bind();t.D.N("ambientLight",this.ja.pb,!1);t.qb(0);t.Pb(0);t.D.N("color",this.color);a=new U;a.set(this.Ja);b=this.Xd;
a.I*=b;a.L*=b;a.M*=b;a.J*=-b;a.m11*=-b;a.m12*=-b;t.D.N("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,ug(this.Jh*this.qe+this.f,this.ob),4);if("flashCardThreshold"!=this.D.name)for(t.Gb(0),u.stencilFunc(u.EQUAL,Y.La-1,255),u.stencilOp(u.KEEP,u.KEEP,u.KEEP),a=this.Ja.ee(),b=Dc(a,Nd(this.Ja)),t.wb(tg),t.$a(t.j.qa.get("monoEffect")),t.Qb(0,t.j.S.get("splatter01")),t.j.vb.get("monsterSplatter").bind(),t.qb(1),t.Pb(0),t.D.N("ambientLight",this.ja.pb,!1),t.D.N("color",Uk.jd),c=q(this.Zd),d=c.next();!d.done;d=
c.next())e=d.value,d=this.Ce.jb(e.b,new K),0>Dc(d,a)-b||(h=4>t.f-e.Hb?1.4:1,e=(new Id).set(e.wa),e.I*=h,e.L*=h,e.J*=h,e.m11*=h,e=Jd(this.Ja,e,new U),Od(e,d),t.D.N("modelMatrix",e),u.drawArrays(u.TRIANGLE_FAN,ug(0,1),4))};
Y.prototype.idle=function(){isNaN(this.V)&&(this.V=t.f,this.ba=t.j.S.get("monsterWalk01"),this.ob=64,this.qe=8,this.Od=Y.sb);var a=t.f-this.V;this.f=0;0==a%30&&(zk(this,t.A.sa.b),this.action[0]="rush",this.action.unshift("alert"),this.V=NaN,this.path=null);this.f=(Math.floor(a/8)%3+6)%8};
Y.prototype.wander=function(){isNaN(this.V)&&(this.V=t.f,this.ba=t.j.S.get("monsterWalk01"),this.ob=64,this.qe=8,this.Od=Y.sb,this.fc=1/3*14887);var a=t.f-this.V;if(!this.path){var b=Mb(Ui.If),c=Jb(b.G-b.C)+b.C;b=Jb(b.u-b.l)+b.l;this.path=Vk(this,c,b)}0==a%30&&(zk(this,t.A.sa.b),this.action[0]="rush",this.action.unshift("alert"),this.V=NaN,this.path=null);this.f=Math.floor(a/3)%8};
Y.prototype.alert=function(){isNaN(this.V)&&(this.V=t.f,this.ba=t.j.S.get("monsterWalk01"),this.ob=64,this.qe=8,this.Od=Y.sb);var a=t.f-this.V;this.f=0;a==18-0*t.$b.difficulty&&(this.action.shift(),this.bg&&(this.action.unshift("attack"),this.V=NaN))};Y.prototype.hit=function(){isNaN(this.V)&&(this.V=t.f,this.ba=t.j.S.get("monsterWalk01"),this.ob=64,this.qe=8,this.Od=Y.sb);var a=t.f-this.V;this.f=0;60==a&&(this.action.shift(),this.V=NaN)};
Y.prototype.attack=function(){isNaN(this.V)&&(this.V=t.f,this.ba=t.j.S.get("monsterWalk01"),this.ob=64,this.qe=8,this.Od=Y.sb,zk(this,t.A.sa.b));var a=t.f-this.V;this.f=Math.floor(a/6)%8;if(15==a){var b=new Sk;b.Yj=this;--this.bg;b.b.set(this.b.x,this.b.y,this.b.z);var c=t.A.sa.b.da();c.y+=t.A.sa.hb+t.A.sa.xa-12500;b.v.x=c.x-this.b.x;b.v.y=c.y-this.b.y;b.v.z=c.z-this.b.z;b.v.na(28E3);Od(b.transform,b.b);V(b,t.He);b.create();b.jg.push(this)}45==a&&(this.action.shift(),this.V=NaN)};
Y.prototype.rush=function(){isNaN(this.V)&&(this.V=t.f,this.ba=t.j.S.get("monsterWalk01"),this.ob=64,this.qe=8,this.Od=Y.sb,this.fc=7443.5,this.fc*=1+1/3*(t.$b.difficulty-1));var a=t.f-this.V;this.path||(this.path=Vk(this,t.A.sa.b.z,t.A.sa.b.x));0<a&&0==a%6&&this.bg&&(this.action.unshift("attack"),this.V=NaN);this.f=Math.floor(a/2)%8};
Y.prototype.death=function(){isNaN(this.V)&&(this.V=t.f,this.ba=t.j.S.get("monsterDeath01"),this.ob=16,this.qe=0,this.Od=Y.Wc);var a=t.f-this.V;4<=a&&(a-=4);this.f=Math.floor(a/4);13<this.f&&(this.f=13);6==a&&t.A.hj(1);20==a&&(this.Zg=.5*-this.Xd);24==a&&t.j.ya.get(Qb("bodyThud01","bodyThud02")).play({gain:.5});660<=a&&this.remove()};function Vk(a,b,c){Vi=300;return Xi(a.b.z,a.b.x,b,c)}
Y.prototype.ji=function(){var a=new K;if(!this.path||"alert"==this.action[0]||"hit"==this.action[0]||"attack"==this.action[0])return a;for(var b,c;;){b=this.path[0];c=b.getParameter(this.b.z,this.b.x);if(c<b.length)break;this.path.shift();if(!this.path.length)return this.path=null,a}b=b.evaluate(c+1E5);a.z=b.x-this.b.z;a.x=b.y-this.b.x;zk(this,new K(b.y,0,b.x));return a};Y.prototype.Te=function(a){this.fb&&(this.Gd=t.f,this.v.x=0,this.v.z=0,this.rb-=a,0>=this.rb&&this.ah())};
Y.prototype.ah=function(){this.fb&&(this.fb=!1,this.action=["death"],this.V=NaN,this.path=null,wk.call(this),Rj.remove(this))};Y.prototype.remove=function(){this.Qf&&this.Qf.remove();var a=t.A.Qc.indexOf(this);0<=a&&t.A.Qc.splice(a,1);bk.prototype.remove.call(this);this.fb&&wk.call(this)};function zk(a,b){b=Ed(b,a.b,new K(0,0,0));b.y=0;b.na(1);a.transform.I=b.z;a.transform.M=-b.x;a.transform.K=b.x;a.transform.m22=b.z}
function Jk(a,b,c){a.fb&&("attack"==a.action[0]&&a.action.shift(),"hit"!=a.action[0]&&a.action.unshift("hit"),a.V=NaN,a.mh=t.f);var d=c*(E(w)+1),e=new Uk;e.frame=Jb(16);e.Xa=12E3*(E(w)+1);e.Xa*=c;e.b.set(0,0,5E4);b.jb(e.b,e.b);e.v.x=5E3*(2*E(w)-1);e.v.y=5E3*(2*E(w)-1);e.v.z=2E4*(E(w)+1);Md(b,e.v,e.v);e.ne=zc(60*(.25+E(w)));Lb(2)&&(e.ne=-e.ne);V(e,t.He);e.create();e=new Uk;e.frame=Jb(16);e.Xa=8E3*(E(w)+1);e.Xa*=c;e.b.set(0,0,5E4);b.jb(e.b,e.b);e.v.x=5E3*(2*E(w)-1);e.v.y=5E3*(2*E(w)-1);e.v.z=2E4*(E(w)+
1);Md(b,e.v,e.v);e.vf=Uk.jd;V(e,t.He);e.create();c=Math.sqrt(3*c)+E(w)-.5;for(e=0;e<c;e++){var h=new Uk;h.rh=120;h.frame=Jb(16);h.Xa=12E3;h.b.set(0,0,5E4);b.jb(h.b,h.b);h.v.x=2*E(w)-1;h.v.y=2*E(w)-1;h.v.z=2*E(w);h.v.na(1E4*(E(w)+1));h.v.y+=6E3*E(w);Md(b,h.v,h.v);h.ne=zc(60*(.25+E(w)));Lb(2)&&(h.ne=-h.ne);Lb(2)&&(h.vf=Uk.jd);V(h,t.He);h.create()}zk(a,Nd(t.ra.O));je(a);a.Ag||(a.Ag=[]);b.H-=a.b.x;b.m31-=a.b.y;b.m32-=a.b.z;a.Ag.push({gf:b,tk:d})}
function Sk(){Wj.call(this,"potato");this.Nb=1E5;this.xa=12500;this.hb=0;this.Lc=!1;return this}Sk.prototype=Object.create(Wj.prototype);f=Sk.prototype;f.constructor=Sk;f.create=function(){this.V=t.f;this.Ja=new U;this.f=0;this.ob=16;this.Xd=25E3;this.D=t.j.qa.get("physicalCardThreshold");this.ba=t.j.S.get("Potato");ie(this,18750);Wj.prototype.create.call(this)};f.$j=function(){this.remove()};
f.De=function(){var a=Nd(this.O),b=Ed(Nd(t.ra.O),a,new K),c=b.na(1);c=Math.min(1,c/(4*this.xa));var d=new K(0,1,0),e=Fc(d,b,new K).normalize();Fc(b,e,d);var h=t.ra.O.zf(),g=t.ra.O.ee();this.Ja.Nf(Fd(t.ra.O.yf(),e,c).normalize());this.Ja.Of(Fd(h,d,c).normalize());this.Ja.Pf(Fd(g,b,c).normalize());Od(this.Ja,a);a=t.f-this.V;this.f=3*Math.floor(a/2);this.f%=this.ob;0==Math.floor(a/2)%13?(this.D=t.j.qa.get("flashCardThreshold"),this.color=od):1==Math.floor(a/2)%13?(this.D=t.j.qa.get("flashCardThreshold"),
this.color=pd):(this.D=t.j.qa.get("physicalCardThreshold"),this.color=od)};f.Sa=function(){this.De();t.wb(tg);t.$a(this.D);t.Qb(0,this.ba);Y.W.bind();t.D.N("ambientLight",this.ja.pb,!1);t.qb(0);t.Pb(0);t.D.N("color",this.color);var a=new U;a.set(this.Ja);var b=this.Xd;a.I*=b;a.L*=b;a.M*=b;a.J*=-b;a.m11*=-b;a.m12*=-b;t.D.N("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,ug(this.f,this.ob),4)};f.remove=function(){this.Yj.bg+=1;Wj.prototype.remove.call(this)};
function Uk(){t.Ra.call(this,"SpudGib");qg.call(this);this.ob=16;this.frame=0;this.Xa=25E3;this.scale=1;this.cf=Lb(2);this.Ec=Ac(Ib());this.ne=0;this.Nb=2*this.Xa;this.V=this.ik=t.f+4;this.v=new K(0,0,0);this.rh=600;this.vf=Uk.vf;this.jd=Uk.jd}Uk.prototype=Object.create(t.Ra.prototype);Uk.prototype.constructor=Uk;Uk.vf=new T(158,158,95,255);Uk.jd=new T(255,255,95,255);
Uk.prototype.create=function(){this.transform.H=this.b.x;this.transform.m31=this.b.y;this.transform.m32=this.b.z;t.Ra.prototype.create.call(this);Wk(this)};function Wk(a){a.Fg=t.f;a.Id=a.b.da();var b=tf(a.Id,a.v);b?(a.Uf=b.p,a.Lg=b.n,a.Je=Math.ceil(t.f+b.t),a.Mg=b.item):a.Je=Number.POSITIVE_INFINITY}
Uk.prototype.step=function(){this.Mg&&this.Mg.fd>this.Fg&&Wk(this);if(t.f<this.Je){this.Qi&&this.Qi.fd>this.Fg&&(this.Qi=null,this.V=t.f,this.v.set(0,0,0),this.Dh=!1,Wk(this));var a=t.f-this.V;0>a||(this.Dh?(this.b.y=this.Id.y+this.v.y*a,this.transform.m31=this.b.y):(this.b.set(this.Id.x+this.v.x*a,this.Id.y+.5*(2*this.v.y+Qj.y*a)*a,this.Id.z+this.v.z*a),this.transform.H=this.b.x,this.transform.m31=this.b.y,this.transform.m32=this.b.z,t.f%3||(this.Ec+=this.ne)))}else t.f==this.Je&&(this.b.set(this.Uf.x,
this.Uf.y,this.Uf.z),this.Qi=this.Mg,this.transform.H=this.b.x,this.transform.m31=this.b.y,this.transform.m32=this.b.z,this.vf==this.jd&&(Ig(t.A.qj,this.Uf,this.Lg,Ac(Ib()),this.Xa*this.scale*2.5,Jb(4),4),this.remove()),-1==this.Lg.y?(this.Id=this.b.da(),this.V=t.f+180+Jb(360),this.v.set(0,0,0),this.ne=0,this.Dh=!1,this.Fg=t.f,(a=pf(this.Id,this.v))?(this.Uf=a.p,this.Lg=a.n,this.Je=Math.ceil(t.f+a.t),this.Mg=a.item):this.Je=Number.POSITIVE_INFINITY):0==this.Lg.y?(this.Id=this.b.da(),this.V=t.f+180+
Jb(360),this.v.set(0,-500,0),this.Dh=!0,this.Fg=t.f,(a=pf(this.Id,this.v))?(this.Uf=a.p,this.Lg=a.n,this.Je=Math.ceil(t.f+a.t),this.Mg=a.item):this.Je=Number.POSITIVE_INFINITY):(this.Id=this.b.da(),this.V=Number.POSITIVE_INFINITY,this.v.set(0,0,0),this.ne=0,this.Dh=!1,this.Fg=t.f,this.Je=Number.POSITIVE_INFINITY));t.f-this.ik>this.rh&&this.remove();t.Ra.prototype.step.call(this)};
Uk.prototype.Sa=function(){rg.call(this,this.O);t.wb(tg);t.$a(Uk.D);t.Qb(0,Uk.ba);t.qb(0);t.Gb(2);t.Pb(0);t.D.N("modelMatrix",this.O);t.D.N("color1",this.vf);t.D.N("color2",this.jd);t.D.N("ambientLight",this.ja.pb);u.drawArrays(u.TRIANGLE_FAN,ug(this.frame,this.ob),4);t.Ra.prototype.Sa.call(this)};function vk(a){Wj.call(this,"loot");this.species=a;this.Wa=a.Wa;this.xa=37500;this.hb=0;this.Cg=.8;this.Hb=t.f+Jb(600);this.fb=!0}vk.prototype=Object.create(Wj.prototype);vk.prototype.constructor=vk;vk.Rg=function(){t.j.ya.get("coinPurse01");t.j.ya.get("coinPurse02");t.j.ya.get("coinPurse03");t.j.ya.get("coinPurse04");t.j.ya.get("ingot01");t.j.ya.get("ingot02");t.j.ya.get("gem01");t.j.ya.get("gem02");t.j.ya.get("gem03");t.j.ya.get("crumplePaper01");t.j.ya.get("crumplePaper02")};f=vk.prototype;
f.create=function(){this.V=t.f;this.Ja=new U;this.f=0;this.ob=16;this.D=t.j.qa.get("physicalCardThreshold");this.transform.scale(1,1,1);ie(this,18E3);Wj.prototype.create.call(this)};
f.step=function(){if(this.Tc)t.Ra.prototype.step.call(this);else if(this.fb)60==t.f-this.Hb&&(this.fb=!1,Rj.remove(this)),Wj.prototype.step.call(this);else{if(this.zd){var a=Ed(new K(this.zd.b.x,this.zd.b.y,this.zd.b.z),this.b,new K(0,0,0));a.ff()<Math.pow(5E4,2)?(a=this.zd,this.zd=null,this.species.ih.call(this,a),Mb(this.species.ya).play({gain:1}),a.Kj=t.f,this.Wa?(this.Tc=a,a.Tc[this.index]=this,Gd(this.Ik,this.b),this.Jk&&(this.Hb=t.f,this.fb=!0,this.v.set(0,0,0),this.cb.set(0,0,0),Rj.add(this)),
this.Ha=0,this.Qf.Ha=0):this.remove()):(a.y*=5,a.na(25E3),this.b.x+=a.x,this.b.y+=a.y,this.b.z+=a.z);this.transform.H=this.b.x;this.transform.m31=this.b.y;this.transform.m32=this.b.z}t.Ra.prototype.step.call(this)}};f.remove=function(){t.Ra.prototype.remove.call(this);Rj.remove(this);this.Tc&&delete this.Tc.Tc[this.index];this.pc&&this.pc.remove()};f.Vj=function(){this.zd||this.remove()};
f.De=function(){var a=Nd(this.O);this.Wa<this.species.Wa&&(a.y-=21875);var b=Ed(Nd(t.ra.O),a,new K),c=b.na(1);c=Math.min(1,c/(4*this.xa));var d=new K(0,1,0),e=Fc(d,b,new K).normalize();Fc(b,e,d);var h=t.ra.O.zf(),g=t.ra.O.ee();this.Ja.Nf(Fd(t.ra.O.yf(),e,c).normalize());this.Ja.Of(Fd(h,d,c).normalize());this.Ja.Pf(Fd(g,b,c).normalize());Od(this.Ja,a);this.f=this.zd?Math.floor(Math.min(15,(t.f-this.V)/2+8)):this.Wa<this.species.Wa?12:Math.floor((t.f-this.V)/3)%8};
f.Sa=function(){this.De();t.wb(tg);t.$a(this.D);t.Qb(0,this.species.Pi);Y.W.bind();t.D.N("ambientLight",this.ja.pb,!1);t.qb(0);t.Pb(0);t.D.N("color",od);var a=new U;a.set(this.Ja);var b=this.species.Xd;a.I*=b;a.L*=b;a.M*=b;a.J*=-b;a.m11*=-b;a.m12*=-b;t.D.N("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,ug(this.f,this.ob),4)};vk.ed=function(a){a=q(a.Ua.Ad);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b instanceof this.species.Df)return Math.min(b.Vd-uk(b)-b.Oe,this.Wa);return 0};
vk.Ub=function(a){a=q(a.Ua.Ad);for(var b=a.next();!b.done;b=a.next())b=b.value,b instanceof this.species.Df&&(b.Oe+=this.Wa)};vk.Kb=function(a){a=q(a.Ua.Ad);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b instanceof this.species.Df){var c=Math.min(this.Wa,b.Vd-uk(b));b.Ba+=c;b.Oe-=c;this.Wa-=c;t.A.qk(this.species,c);t.A.sd()}};vk.ql=function(a){return Math.min(360-a.rb-a.sg,this.Wa)};vk.pl=function(a){a.sg+=this.species.Wa};vk.nl=function(a){Tk(a,this.species.Wa);a.sg-=this.species.Wa};function Ok(a){t.ua.call(this,a);qg.call(this);this.D=t.j.qa.get("physicalCard");this.ba=t.j.S.get("smokePuff02");this.W=Ok.W;this.color=new T(Ok.color.r,Ok.color.Ta,Ok.color.ka,255);this.frame=0;this.ob=16;this.v=new K;this.cb=new K;this.scale=1;this.Ec=Ac(Ib());this.Hb=t.f}Ok.prototype=Object.create(t.ua.prototype);Ok.prototype.constructor=Ok;Ok.W=new le;Ok.W.Aa=2;Ok.color=new T(144,144,144,255);
Ok.prototype.step=function(){var a=t.f-this.Hb;a=Math.pow(a/540,.625);this.frame=Math.floor(9*a);this.alpha=.25*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.Ga=this.alpha*Ok.color.Ga&255;this.transform.m31+=200;this.v.scale(.8125);a=new K(.5*this.cb.x+.5*this.v.x,.5*this.cb.y+.5*this.v.y,.5*this.cb.z+.5*this.v.z);this.transform.H+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.cb.set(this.v.x,this.v.y,this.v.z);t.ua.prototype.step.call(this)};
Ok.prototype.Sa=function(){sg.call(this);t.ua.prototype.Sa.call(this)};function Ik(a){t.ua.call(this,a);qg.call(this);this.D=t.j.qa.get("physicalCard");this.ba=t.j.S.get("smokePuff02");this.W=Ok.W;this.color=new T(Ik.color.r,Ik.color.Ta,Ik.color.ka,255);this.frame=0;this.ob=16;this.v=new K;this.cb=new K;this.scale=1;this.Ec=Ac(Ib());this.ja={Da:4294967295,pb:new K(1,1,1)};this.Hb=t.f}Ik.prototype=Object.create(t.ua.prototype);Ik.prototype.constructor=Ik;Ik.color=new T(212,212,212,255);
Ik.prototype.step=function(){var a=t.f-this.Hb;a/=this.rh;a=Math.pow(a,.75);this.frame=Math.floor(9*a);this.alpha=.375*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.Ga=this.alpha*Ik.color.Ga&255;this.v.scale(.8125);var b=new K(.5*this.cb.x+.5*this.v.x,.5*this.cb.y+.5*this.v.y,.5*this.cb.z+.5*this.v.z);this.transform.H+=b.x;this.transform.m31+=b.y;this.transform.m32+=b.z;this.cb.set(this.v.x,this.v.y,this.v.z);if(0==a||0==t.f%4)a=Nd(this.transform),(b=pf(a,new K(0,-1E8,0),fg))&&(b=af(b.item.aa))&&
bg(a,b,this.ja.pb);t.ua.prototype.step.call(this)};Ik.prototype.Sa=function(){sg.call(this);t.ua.prototype.Sa.call(this)};function Xk(a){t.ua.call(this,a);qg.call(this);this.D=t.j.qa.get("spray");this.ba=t.j.S.get("spray01");this.W=Xk.W;this.color=new T(Uk.jd.r,Uk.jd.Ta,Uk.jd.ka,255);this.v=new K;this.cb=new K;this.scale=1;this.Ec=Ac(Ib());this.Hb=t.f}Xk.prototype=Object.create(t.ua.prototype);Xk.prototype.constructor=Xk;Xk.W=new le;Xk.W.Aa=0;
Xk.prototype.step=function(){var a=t.f-this.Hb;a/=this.Bl;this.scale=15*a;1<=a&&this.remove();this.color.Ga=254*(a+1)&255;this.v.add(Qj);a=new K(.5*this.cb.x+.5*this.v.x,.5*this.cb.y+.5*this.v.y,.5*this.cb.z+.5*this.v.z);this.transform.H+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.cb.set(this.v.x,this.v.y,this.v.z);t.ua.prototype.step.call(this)};Xk.prototype.Sa=function(){sg.call(this);t.ua.prototype.Sa.call(this)};
function Ak(a,b){t.ua.call(this,b);qg.call(this);this.D=t.j.qa.get("image");this.ba=t.j.S.get("explode");this.W=Ak.W;this.color=new T(255,255,255,255);this.scale=1;this.Xa=a;this.cf=Lb(2);this.Ec=Ac(Ib());this.Hb=t.f+1;this.ob=16}Ak.prototype=Object.create(t.ua.prototype);Ak.prototype.constructor=Ak;Ak.W=new le;Ak.W.Aa=1;
Ak.prototype.step=function(){var a=t.f-this.Hb;50<=a&&this.remove();this.scale+=.02;this.transform.m31+=3E3*(1-a/50);this.frame=Math.floor(16*(1-Math.pow(.9375,a)));a=255*(1-(a-15)/35);255<a&&(a=255);a&=255;this.color.r=a;this.color.Ta=a;this.color.ka=a;this.color.Ga=a;t.ua.prototype.step.call(this)};Ak.prototype.Sa=function(){sg.call(this);t.ua.prototype.Sa.call(this)};
function Hk(a,b){t.ua.call(this,b);qg.call(this);this.D=t.j.qa.get("image");this.ba=t.j.S.get("bulletFlare01");this.W=Hk.W;this.color=new T(255,255,255,0);this.scale=1;this.Xa=a;this.cf=Lb(2);this.Ec=Ac(Ib());this.Hb=t.f+1;this.ob=4}Hk.prototype=Object.create(t.ua.prototype);Hk.prototype.constructor=Hk;Hk.W=new le;Hk.W.Aa=1;Hk.prototype.step=function(){var a=t.f-this.Hb;0<=a&&(3<=a&&this.remove(),this.scale+=.25);this.frame=Math.floor(a);t.ua.prototype.step.call(this)};
Hk.prototype.Sa=function(){sg.call(this);t.ua.prototype.Sa.call(this)};t.A=new t.Node("game");t.Aj=new t.Node("gameDraw");t.A.jk=0;t.A.Qj=0;t.A.Pj=0;t.A.Oj=0;t.A.Qc=[];t.A.kg=[];t.A.dg=[];t.A.si=0;t.A.xg=0;t.A.Hj=NaN;t.A.gj=[];t.A.Ke=!0;t.A.sd=function(){var a=t.A.sa.Ua.F,b=-170,c=119;!(a instanceof Qk)&&a instanceof Lk&&(b+=6,c-=10);var d=uk(a).toLocaleString("en-US");var e=t.j.S.get("HUDNumerals24Bold");d=t.gh(e,d,0);d.color=pd;d.x=b;d.y=c;d.x-=d.width*d.Oi.width;a.Ph=d;t.A.Ke=!0};
t.A.kl=function(){var a=t.j.S.get("HUDNumeralsSilverAndGold");a=t.gh(a,"1,875 / 2,000",0);a.color=od;a.x=126;a.y=-127;t.A.ml=a;t.A.Ke=!0};t.A.qk=function(a,b){if(b){for(var c=null,d=0,e=q(t.A.te),h=e.next();!h.done;h=e.next())if(h=h.value,h.species!=a)d=h.y+h.species.Le.height;else{c=h;break}c||(c={},c.species=a,c.Wa=0,c.y=d,t.A.te.push(c));c.Wa+=b;c.V=t.f;a=t.j.S.get("HUDNumerals14Bold");c.fj=t.gh(a,c.Wa.toLocaleString("en-US"),0);t.A.Ke=!0}};
t.A.Mk=function(){for(var a=0,b=0;b<t.A.te.length;b++){var c=t.A.te[b];240<=t.f-c.V?(t.A.te.splice(b--,1),t.A.Ke=!0):(c.y=Math.max(c.y-.5,a),a+=c.species.Le.height)}};t.A.hj=function(a){t.A.si+=a;t.A.xg+=a};t.A.Lk=function(){0>=t.A.xg||t.f<t.A.Hj+2||(t.A.xg--,t.A.Hj=t.f,t.j.ya.get("hit02").play({gain:1}),t.A.gj=t.gh(t.j.S.get("HUDNumerals24Bold"),(t.A.si-t.A.xg).toLocaleString("en-US"),1),t.A.gj.zl=t.f,t.A.Ke=!0)};
t.j.ready=function(){t.$b.difficulty=1;t.$b.lightingFancy=document.getElementById("inputCheckbox_lightingFancy").checked;t.$b.mouseRaw=document.getElementById("inputCheckbox_mouseRaw").checked;t.$b.mouseDPI=parseFloat(document.getElementById("inputNumber_mouseDPI").value);t.$b.mouseScale=parseFloat(document.getElementById("inputNumber_mouseScale").value);t.Bh();var a=t.j.S.get("HUDNumerals10");a.fe=[7,5,7,7,8,7,7,7,7,7,3];a.ve=10;a.Bf=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.Cf=[0,1,0,0,-1,0,0,0,0,0,0];
t.nh(a);a=t.j.S.get("HUDNumerals14Bold");a.fe=[9,6,9,9,9,9,9,9,9,9,4];a.ve=14;a.Bf=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.Cf=[0,1,0,0,0,0,0,0,0,0,0];t.nh(a);a=t.j.S.get("HUDNumerals24Bold");a.fe=[13,9,13,13,14,13,13,13,13,13,5];a.ve=23;a.Bf=[0,1,0,0,-1,0,0,0,0,0,0];a.Cf=[0,3,0,0,0,0,0,0,0,0,0];t.nh(a);a=t.j.S.get("HUDNumeralsSilverAndGold");a.fe=[9,6,9,9,9,9,9,9,9,9,4,6,0];a.ve=14;a.Bf=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,0];a.Cf=[0,1,0,0,0,0,0,0,0,0,0,-1,4];t.nh(a);t.dk=V(new t.Node("scnBuilderMeshes"),
t.wc);t.He=V(new t.Node("scnWorld"),t.wc);t.lf=V(new t.Node("scnDoors"),t.He);t.lf.Ha=0;t.Fe=V(new t.Node("scnSpuds"),t.wc);t.Fe.Ha=0;t.Ji=V(new t.Node("scnLoot"),t.wc);t.Gg=V(new t.Node("scnShadows"),t.wc);t.Gg.Ha=0;t.Ge=V(new t.Node("scnWindowPanes"),t.wc);t.Ge.Ha=0;t.nd=V(new t.Node("scnEffects"),t.wc);t.nd.Ha=0;t.Fd=V(new t.Node("scnSelf"),t.wc);t.Fd.Ha=0;t.Yk=V(new t.Node("scnHUD"),t.wc);V(Sj,t.wc);V(t.A,t.wc);t.fh=1E3/60;t.Eg=new nk;t.Xk();a=[new K(135/255,223/255,206/255),new K(230/255,230/
255,172/255),new K(135/255,223/255,206/255),new K(135/255,223/255,206/255),new K(0,213/255,1),new K(135/255,223/255,206/255)];t.A.rl=a;for(var b=new Float32Array(36),c=0;c<a.length;c++)a[c].x=.1*a[c].x+.65,a[c].y=.1*a[c].y+.65,a[c].z=.1*a[c].z+.65,a[c].scale(.75),b[3*c]=a[c].x,b[3*c+1]=a[c].y,b[3*c+2]=a[c].z;t.$a(t.j.qa.get("physical"));t.D.N("ambient",b);t.D.N("clipY",Infinity,!1);t.$a(t.j.qa.get("imageContrast"));t.D.N("contrastOffset",0);t.D.N("contrastScale",1.0625);t.wb(xe);se(xe,xe.Og.length*
xe.yb);xe.upload(xe.Og);t.me(ze);se(ze,2*ze.elements.length);ze.upload(ze.elements);t.j.vb.get("gemRuby").Aa=0;t.j.vb.get("gemEmerald").Aa=0;t.j.vb.get("gemSapphire").Aa=0;t.j.vb.get("bulbGreen").Aa=0;Y.ed();a=zc(5);Pk.sb=[];for(b=0;9>b;b++)c=b,c*=1/9,c=Math.pow(c,.5),Pk.sb[b]=c*a;Lk.bj=t.j.S.get("ViewCarbine");Lk.Fi=t.j.S.get("HUDReticleCarbine");Lk.La=t.j.S.get("HUDItemCarbine");Lk.La.offsetY=-12;Pk.bj=t.j.S.get("ViewShotgun");Pk.Fi=t.j.S.get("HUDReticleShotgun");Pk.La=t.j.S.get("HUDItemShotgun");
Pk.La.offsetY=-10;Qk.bj=t.j.S.get("ViewRevolver");Qk.Fi=t.j.S.get("HUDReticleRevolver");Qk.La=t.j.S.get("HUDItemRevolver");Qk.La.offsetY=-9;a=[t.j.ya.get("ShotgunShut01")];Lk.Sh={Pi:t.j.S.get("CarbineMag"),Le:t.j.S.get("HUDCartridgeCarbine"),Xd:5E4,ya:a,Ri:vk.ed,xi:vk.Ub,ih:vk.Kb,Df:Lk,Wa:100};Pk.Sh={Pi:t.j.S.get("ShotshellBox"),Le:t.j.S.get("HUDCartridgeShotgun"),Xd:5E4,ya:a,Ri:vk.ed,xi:vk.Ub,ih:vk.Kb,Df:Pk,Wa:8};Qk.Sh={Pi:t.j.S.get("RevolverLoader"),Le:t.j.S.get("HUDCartridgeRevolver"),Xd:25E3,
ya:a,Ri:vk.ed,xi:vk.Ub,ih:vk.Kb,Df:Qk,Wa:6};vk.Rg();a=t.A.qj=new Fg;a.D=t.j.qa.get("splatter");a.ba=t.j.S.get("splatter02");a.color=Uk.jd;a.Aa=1;a=t.A.pj=new Fg;a.D=t.j.qa.get("image");a.ba=t.j.S.get("bulletPock01");a.color=new T(255,255,255,128);a.Aa=2;a=new le;a.name="flashWhite";a.ud=pd;a.zc=nd;a.be=od;a.Aa=0;t.j.vb.add(a);a=new le;a.name="flashRed";a.ud=pd;a.zc=nd;a.be=qd;a.Aa=0;t.j.vb.add(a);t.A.Ok();t.A.jk?(a=new ok("devCamera"),V(a,t.wc),a.create(),t.A.ra=a):(a=af(0)[0][0],b=t.A.sa=new yk("player"),
b.Ug=Math.floor(2147483648/180*90),b.b.y=a.y+.5*b.Hd,b.b.z=a.z,b.b.x=a.x,V(b,t.He),b.create());t.A.hj(0);t.A.kl();t.A.te=[];V(t.Aj,t.wc);t.start()};t.A.Ok=function(){for(;gj(););$i=!0;t.A.Qj=6;t.A.Oj=3;t.A.Pj=5;if(t.Ji.children)for(;;){var a=t.Ji.children.first().item;if(!a)break;a.remove()}};
t.A.gl=function(){if(!(t.A.Qc.length>=t.A.Qj*Ze.length/20)){var a=Mb(Ui.If);a=new K(Jb(a.u-a.l)+a.l,-1E5,Jb(a.G-a.C)+a.C);var b=pf(a,new K(0,-1E8,0),fg);b&&(a.y=b.p.y+1E5,t.A.sa?(b=Ed(t.A.sa.b,a,new K),b=pf(a,b,ek)?!0:!1):b=!0,b&&(b=new Y,b.b.x=a.x,b.b.y=a.y,b.b.z=a.z,Od(b.transform,b.b),V(b,t.Fe),b.create()))}};
t.A.fl=function(){if(!(this.kg.length>=t.A.Pj*Ze.length/20)){var a=Mb(Ui.If);a=new K(Jb(a.u-a.l)+a.l,-1E5,Jb(a.G-a.C)+a.C);var b=pf(a,new K(0,-1E8,0),fg);b&&(a.y=b.p.y+1E5,t.A.sa?(b=Ed(t.A.sa.b,a,new K),b=pf(a,b,ek)?!0:!1):b=!0,b&&(a=new sk(a.x,a.y-1E5,a.z),V(a,t.He),a.create()))}};
t.A.el=function(){if(!(this.dg.length>=t.A.Oj*Ze.length/20)){var a=Mb(Ui.If);a=new K(Jb(a.u-a.l)+a.l,-1E5,Jb(a.G-a.C)+a.C);var b=pf(a,new K(0,-1E8,0),fg);b&&(a.y=b.p.y+1E5,t.A.sa?(b=Ed(t.A.sa.b,a,new K),b=pf(a,b,ek)?!0:!1):b=!0,b&&(a=new xk(a.x,a.y-1E5,a.z),V(a,t.He),a.create()))}};
t.A.step=function(){for(var a,b,c=0;16>c;c++){Sf=1-Sf;a=yf[Sf];b=yf[1-Sf];for(var d=q(Ze),e=d.next();!e.done;e=d.next()){e=e.value;var h=e.index-yf.aa;b[0][h]=e.Fb.x;b[1][h]=e.Fb.y;b[2][h]=e.Fb.z}for(d=0;3>d;d++)for(e=q(xf),h=e.next();!h.done;h=e.next()){h=h.value;var g=h.Sc*a[d][h.tg.index-yf.aa];g*=h.Ah[d];b[d][h.kf.index-yf.aa]+=g/h.kf.Wi}a=q(Ze);for(e=a.next();!e.done;e=a.next())d=e.value,d.pd&&(e=d.index-yf.aa,b[0][e]=d.Fb.x,b[1][e]=d.Fb.y,b[2][e]=d.Fb.z)}if(0==t.f%1){c=q(Ze);for(e=c.next();!e.done;e=
c.next())a=e.value,d=a.index-yf.aa,a.ja.pb.x=b[0][d],a.ja.pb.y=b[1][d],a.ja.pb.z=b[2][d],b[0][d]=0,b[1][d]=0,b[2][d]=0;b=q(xf);for(h=b.next();!h.done;h=b.next())c=h.value,c.gc&&(c.Sc=c.tg==c.kf?Wf(c.gc):Vf(c.gc));b=0;c=t.Zb.ak;a=q(Ze);for(d=a.next();!d.done;d=a.next())for(d=d.value,d.Be=b&255|d.ic.length<<16,d=q(d.ic),e=d.next();!e.done;e=d.next())e=e.value,e.rd(new Float32Array(c.buffer,b*c.Gh,12)),e.index=b,b++;c.upload();b=q(dj.elements);for(c=b.next();!c.done;c=b.next())c=c.value,(a=af(c.aa))&&
c.Yc&&(c.Yc.Ma[1]=a.Be);wf&&Tf()}t.A.jk||0!=t.f%5||(this.gl(),this.fl(),this.el());t.A.Lk();for(t.A.Mk();!(performance.now()>=t.Bk-4)&&gj(););};
t.Aj.step=function(){t.Wb.r=0;t.Wb.Ta=0;t.Wb.ka=0;t.Wb.Ga=0;t.A.sa&&4>t.f-t.A.sa.Kj&&(t.Wb.r+=24,t.Wb.Ta+=24,t.Wb.ka+=24,t.Wb.Ga+=24);if(t.A.sa){var a=t.f-t.A.sa.qh;a=1.5-a/6;0>a&&(a=0);1<a&&(a=1);t.Wb.r+=170*a;t.Wb.Ga+=170*a}u.bindFramebuffer(u.FRAMEBUFFER,t.Eg.object);t.Gb(2);u.clear(u.DEPTH_BUFFER_BIT|u.STENCIL_BUFFER_BIT);0==t.f%60&&t.dk.children.sort(fj);eg();t.$a(t.j.qa.get("physical"));t.lf.Ha=1;fe(t.lf);t.lf.Ha=0;t.D.N("clipY",Infinity,!1);var b=Cb.first();for(a=cf.first();b.item;){if(a.item){if(a.item.Pg<
t.f){var c=a.next;xb(a);a=c;continue}if(0<Gb(b.item,a.item)){a=a.next;continue}}c=b.next;xb(b);zb(b,a);b=c}for(;a.item;)b=a.next,a.item.Pg<t.f&&xb(a),a=b;df.H=.00390625*t.ra.O.H;df.m31=.00390625*t.ra.O.m31;df.m32=.00390625*t.ra.O.m32;t.wb(tg);t.$a(t.j.qa.get("sky"));t.Qb(0,t.j.S.get("concr01"));t.D.N("texture1",1,!0);t.Qb(1,t.j.S.get("sky01"));t.D.N("color",od);t.qb(0);t.Gb(1);t.Pb(0);a=new U;b=(.5*t.ra.hf+.5*t.ra.af)*cg.Wc;a.scale(b*t.viewport.ratio,b,1);a.m32=-b/Math.tan(t.ra.kd);Ld(t.ra.O,a,a);
t.D.N("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,0,4);if(t.Fe.children){t.Fe.children.sort(ej);Y.La=128;for(a=t.Fe.children.first();a.item;a=a.next)a.item.Ig()&&a.item instanceof Y&&a.item.De();u.enable(u.STENCIL_TEST);for(a=t.Fe.children.first();a.item;a=a.next)a.item.Ig()&&(a.item instanceof Y||(u.stencilFunc(u.GEQUAL,128,255),u.stencilOp(u.KEEP,u.KEEP,u.KEEP)),a.item.Sa());u.disable(u.STENCIL_TEST)}if(t.A.sa&&t.A.sa.Ua.F instanceof Qk&&.5<t.A.sa.Ua.focus){t.$a(t.j.qa.get("flashCardThreshold"));
t.qb(1);t.Gb(1);u.depthFunc(u.GREATER);for(a=t.Fe.children.first();a.item;a=a.next)if(a.item instanceof Y&&a.item.Ha&&600>t.f-a.item.sh){t.D.N("color",new T(0,0,0,32*(1-(t.f-a.item.sh)/600)));b=a.item;t.wb(tg);t.Qb(0,b.ba);t.Pb(0);c=new U;c.set(b.Ja);var d=b.Xd;c.I*=d;c.L*=d;c.M*=d;c.J*=-d;c.m11*=-d;c.m12*=-d;t.D.N("modelMatrix",c);u.drawArrays(u.TRIANGLE_FAN,ug(b.Jh*b.qe+b.f,b.ob),4)}t.D.N("color",od);u.depthFunc(u.LEQUAL)}t.A.qj.Sa();t.A.pj.Sa();t.$a(Nj.D);t.D.N("modelMatrix",df);Nj.W.bind();t.qb(1);
t.Gb(1);t.Pb(1);t.wb(Nj.Qa);t.me(Nj.xd);b=a=0;for(c=cf.first();c.item;c=c.next)c.item.oj==a+b?b+=c.item.nj:(b&&u.drawElements(u.TRIANGLES,b,u.UNSIGNED_SHORT,2*a),a=c.item.oj,b=c.item.nj);b&&u.drawElements(u.TRIANGLES,b,u.UNSIGNED_SHORT,2*a);t.qb(1);t.Gb(1);t.Pb(0);t.$a(t.j.qa.get("monoEffect"));t.wb(tg);u.activeTexture(u.TEXTURE0);u.bindTexture(u.TEXTURE_2D,t.j.S.get("shadow").object);t.D.N("enableTexture0",1,!0);t.D.N("color",t.Me.color);t.Gg.Ha=1;fe(t.Gg);t.Gg.Ha=0;if(t.Ge.children){a=t.ra.O.ee();
for(b=t.Ge.children.first();b.item;b=b.next)b.item.Ig()&&(b.item.depth=Dc(a,b.item.b));t.Ge.children.sort(Ii.Z);Ii.De();t.Ge.Ha=1;fe(t.Ge);t.Ge.Ha=0}t.nd.Ha=1;fe(t.nd);t.nd.Ha=0;t.A.sa&&(t.ek(t.A.sa.od),dg(t.A.sa.od),t.Fd.Ha=1,fe(t.Fd),t.Fd.Ha=0);t.A.sa&&(a=t.A.sa.Ua,a.Ha=1,a.Sa(),a.Ha=0);t.qb(0);t.Gb(0);t.Pb(0);u.bindFramebuffer(u.FRAMEBUFFER,null);t.Zb.Hc.N("viewMatrix",Pd);t.Zb.Hc.upload();t.wb(tg);t.Hg(new Kc(t.canvas.width,t.canvas.height));t.$a(t.j.qa.get("imageContrast"));u.activeTexture(u.TEXTURE0);
u.bindTexture(u.TEXTURE_2D,t.Eg.color.object);t.D.N("texture0",0,!0);t.D.N("enableTexture0",1,!0);t.D.N("modelMatrix",Pd);t.D.N("color",od);t.D.N("fadeColor",t.Wb);u.drawArrays(u.TRIANGLE_FAN,0,4);t.A.sa&&t.A.Ak()};
t.A.Ak=function(){function a(){y.I=n*A.width/v;y.m11=r*A.height/z;y.H=x/v;y.m31=-C/z;t.D.N("modelMatrix",y)}function b(D,H,I,M,la,pa,Z){t.Qb(0,D);var aa=t.canvas.width>>1,Ab=t.canvas.height>>1,eb=.5*D.width,Xb=.5*D.height;0==l?H-=aa:1==l&&(H+=aa);2==m?I-=Ab:3==m&&(I+=Ab);0==g?H+=eb:1==g&&(H-=eb);2==k?I+=Xb:3==k&&(I-=Xb);H=Math.round(H);I=Math.round(I);b.Z&&(void 0===M?u.scissor(0,0,t.canvas.width,t.canvas.height):u.scissor(H+aa-eb+M,-I+Ab-Xb+la,pa,Z));M=new U;M.I=D.width/t.canvas.width*n;M.m11=-D.height/
t.canvas.height*r;M.H=2*H/t.canvas.width;M.m31=-2*I/t.canvas.height;t.D.N("modelMatrix",M);u.drawArrays(u.TRIANGLE_FAN,0,4)}var c=t.A.sa.Ua.F;if(t.A.Ke){t.A.nk=new te;var d=[];c&&(d=d.concat(c.Ph));for(var e=q(t.A.te),h=e.next();!h.done;h=e.next())d=d.concat(h.value.fj);ue(d);t.A.Ke=!1}t.Hg(new Kc(t.canvas.width,t.canvas.height));t.Zb.Hc.N("viewMatrix",Pd);t.Zb.Hc.upload();t.Gb(0);t.Pb(0);var g=0,k=2,l=0,m=2,n=1,r=1;t.qb(2);u.enable(u.SCISSOR_TEST);b.Z=!0;t.wb(tg);t.$a(t.j.qa.get("image"));t.D.N("color",
od);b.Z=!1;g=1;k=2;l=4;m=5;d=q(t.A.te);for(h=d.next();!h.done;h=d.next()){h=h.value;e=h.species.Le.height;var p=ob(-3+(t.f-h.V)/60,0,1)*e*.5;u.scissor(0,(t.canvas.height>>1)-44+h.y-e+p,t.canvas.width,t.canvas.height);b(h.species.Le,-189,44-h.y+p)}b.Z=!0;u.scissor(0,0,t.canvas.width,t.canvas.height);c&&(c.Nh()&&(g=4,k=2,l=4,m=5,d=Math.cos(60*t.f/Math.PI),d=ob(d,0,1),t.D.N("color",new T(255,255*d,255*d,127+128*d)),d=t.j.S.get("HUDWarnReload"),b(d,0,30),t.D.N("color",od)),h=[od,new T(255,255,64,255),
new T(208,0,0,255)],c instanceof Qk?(e=c.va,g=0,k=3,l=4,m=5,d=t.j.S.get("HUDMagRevolver"),b(d,-158-34*e,123,34*e,0,34,34),k=2,d=t.j.S.get("HUDAmmo2"),t.D.N("color",h[c.Xf()]),b(d,-201,91),t.D.N("color",od)):c instanceof Lk?(e=c.va,g=0,k=3,l=4,m=5,d=t.j.S.get("HUDMagCarbine"),b(d,-208,124+13*e,0,13*e,97,13),k=2,d=t.j.S.get("HUDAmmo3"),t.D.N("color",h[c.Xf()]),b(d,-208,81),t.D.N("color",od)):c instanceof Pk&&(e=c.cc,g=0,k=3,l=4,m=5,d=t.j.S.get("HUDMagShotgun"),b(d,-150-18*e,123,18*e,0,18,34),k=2,d=
t.j.S.get("HUDAmmo2"),t.D.N("color",h[c.Xf()]),b(d,-201,91),t.D.N("color",od)));c&&t.A.sa.Ua.jc&&(t.qb(1),t.$a(t.j.qa.get("monoEffect")),d=new Hd,t.A.sa.$f?(t.D.N("color",new T(255,0,0,255)),h=t.A.sa.$f,t.A.ra.aj.transform(new Hd(h.x,h.y,h.z,1),d),d.x/=2*d.a,d.y/=2*d.a):t.D.N("color",new T(0,128,255,255)),t.D.N("ambientLight",new K(1,1,1)),g=4,k=5,l=4,m=5,(h=c.constructor.Fi)&&b(h,Math.round(d.x*t.canvas.width),Math.round(-d.y*t.canvas.height)),t.qb(2),t.$a(t.j.qa.get("image")),t.D.N("color",od));
u.disable(u.SCISSOR_TEST);t.wb(t.A.nk);p=d=0;var v=t.canvas.width>>1,z=t.canvas.height>>1,y=new U;if(c&&c.Ph){c=c.Ph;var x=c.x;var C=c.y;var A=c.Oi;t.Qb(0,A);a();t.D.N("color",c.color);p=c.length;u.drawArrays(u.TRIANGLES,d,p);d+=p}u.enable(u.SCISSOR_TEST);c=q(t.A.te);for(h=c.next();!h.done;h=c.next())h=h.value,x=-188,C=44,p=h.species.Le.height,e=ob(-3+(t.f-h.V)/60,0,1)*p*.5,u.scissor(0,(t.canvas.height>>1)-C+h.y-p+e,t.canvas.width,t.canvas.height),p=h.fj,A=p.Oi,t.Qb(0,A),p=p.length,C+=-h.y+19,C+=
e,--x,C+=2,a(),t.D.N("color",pd),u.drawArrays(u.TRIANGLES,d,p),x+=1,C-=2,a(),t.D.N("color",od),u.drawArrays(u.TRIANGLES,d,p),d+=p;u.scissor(0,0,t.canvas.width,t.canvas.height);u.disable(u.SCISSOR_TEST)};
t.Nj=function(){var a=t.th=document.createElement("div");a.style.position="absolute";a.style.backgroundColor="rgba(0,0,0,0.8)";a.style.left=0;a.style.top=0;a.style.right=0;a.style.bottom=0;a.style.userSelect="none";a.style.display="flex";a.style.justifyContent="center";a.style.alignItems="center";a.style.imageRendering="pixelated";oe.appendChild(a);a=document.createElement("button");a.style.zIndex=2;a.style.width="128px";a.style.height="128px";a.style.border="none";a.style.background='no-repeat center/100% url("WebsitePlay.png")';
a.style.opacity="75%";a.style.cursor="pointer";a.title="play";a.onclick=function(){Te.$k()};a.onmouseenter=function(){this.style.opacity="100%"};a.onmouseleave=function(){this.style.opacity="75%"};t.uh=a;t.th.appendChild(a)};document.addEventListener("pointerlockchange",function(){document.pointerLockElement?(oe.removeChild(t.th),Ue.clear(),Te.clear(),t.resume()):(oe.appendChild(t.th),t.pause())});
(function(){var a,b,c,d,e;return Ia(new Ha(new za(function(h){if(1==h.Z){console.log("ShootPotato v0.005");a=(new Date).getTime();window.localStorage.removeItem("resources");window.localStorage.removeItem("resourceVersion");var g=fetch("resources_230425_01.gob");h.Z=2;return{value:g}}if(3!=h.Z)return b=h.Ub,c=Uint8Array,g=b.arrayBuffer(),h.Z=3,{value:g};d=new c(h.Ub);for(e=0;e<d.length;e++);d.position=0;g=d;for(var k=53,l=0;l<g.length;l++){var m=g[l];g[l]=g[l]-193*k-53&255;k=m}t.j.load(d);console.log("Resources loaded from URL in",
(new Date).getTime()-a,"ms.");h.Z=0})))})();
