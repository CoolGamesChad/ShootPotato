var f;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function q(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function da(a){if(!(a instanceof Array)){a=q(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
var ea="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ha="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function ka(a,b){if(b){var c=ea;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ha(c,a,{configurable:!0,writable:!0,value:b})}}
ka("Promise",function(a){function b(g){this.Ma=0;this.Vb=void 0;this.S=[];var k=this.wb();try{g(k.resolve,k.reject)}catch(l){k.reject(l)}}function c(){this.S=null}function d(g){return g instanceof b?g:new b(function(k){k(g)})}if(a)return a;c.prototype.Ma=function(g){if(null==this.S){this.S=[];var k=this;this.wb(function(){k.Vb()})}this.S.push(g)};var e=ea.setTimeout;c.prototype.wb=function(g){e(g,0)};c.prototype.Vb=function(){for(;this.S&&this.S.length;){var g=this.S;this.S=[];for(var k=0;k<g.length;++k){var l=
g[k];g[k]=null;try{l()}catch(m){this.Cb(m)}}}this.S=null};c.prototype.Cb=function(g){this.wb(function(){throw g;})};b.prototype.wb=function(){function g(m){return function(n){l||(l=!0,m.call(k,n))}}var k=this,l=!1;return{resolve:g(this.tg),reject:g(this.Cb)}};b.prototype.tg=function(g){if(g===this)this.Cb(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.oh(g);else{a:switch(typeof g){case "object":var k=null!=g;break a;case "function":k=!0;break a;default:k=!1}k?this.sg(g):
this.Bc(g)}};b.prototype.sg=function(g){var k=void 0;try{k=g.then}catch(l){this.Cb(l);return}"function"==typeof k?this.pi(k,g):this.Bc(g)};b.prototype.Cb=function(g){this.Rc(2,g)};b.prototype.Bc=function(g){this.Rc(1,g)};b.prototype.Rc=function(g,k){if(0!=this.Ma)throw Error("Cannot settle("+g+", "+k+"): Promise already settled in state"+this.Ma);this.Ma=g;this.Vb=k;this.Ve()};b.prototype.Ve=function(){if(null!=this.S){for(var g=0;g<this.S.length;++g)h.Ma(this.S[g]);this.S=null}};var h=new c;b.prototype.oh=
function(g){var k=this.wb();g.th(k.resolve,k.reject)};b.prototype.pi=function(g,k){var l=this.wb();try{g.call(k,l.resolve,l.reject)}catch(m){l.reject(m)}};b.prototype.then=function(g,k){function l(p,u){return"function"==typeof p?function(z){try{m(p(z))}catch(y){n(y)}}:u}var m,n,r=new b(function(p,u){m=p;n=u});this.th(l(g,m),l(k,n));return r};b.prototype.catch=function(g){return this.then(void 0,g)};b.prototype.th=function(g,k){function l(){switch(m.Ma){case 1:g(m.Vb);break;case 2:k(m.Vb);break;default:throw Error("Unexpected state: "+
m.Ma);}}var m=this;null==this.S?h.Ma(l):this.S.push(l)};b.resolve=d;b.reject=function(g){return new b(function(k,l){l(g)})};b.race=function(g){return new b(function(k,l){for(var m=q(g),n=m.next();!n.done;n=m.next())d(n.value).th(k,l)})};b.all=function(g){var k=q(g),l=k.next();return l.done?d([]):new b(function(m,n){function r(z){return function(y){p[z]=y;u--;0==u&&m(p)}}var p=[],u=0;do p.push(void 0),u++,d(l.value).th(r(p.length-1),n),l=k.next();while(!l.done)})};return b});
function la(){la=function(){};ea.Symbol||(ea.Symbol=ma)}function sa(a,b){this.S=a;ha(this,"description",{configurable:!0,writable:!0,value:b})}sa.prototype.toString=function(){return this.S};var ma=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new sa("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function ta(){la();var a=ea.Symbol.iterator;a||(a=ea.Symbol.iterator=ea.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ha(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return va(aa(this))}});ta=function(){}}function va(a){ta();a={next:a};a[ea.Symbol.iterator]=function(){return this};return a}function wa(){this.Cb=!1;this.Ma=null;this.Vb=void 0;this.S=1;this.Rc=0;this.wb=null}function xa(a){if(a.Cb)throw new TypeError("Generator is already running");a.Cb=!0}
wa.prototype.Bc=function(a){this.Vb=a};function ya(a,b){a.wb={$k:b,nl:!0};a.S=a.Rc}wa.prototype.return=function(a){this.wb={return:a};this.S=this.Rc};function Aa(a){this.S=new wa;this.Ma=a}function Ba(a,b){xa(a.S);var c=a.S.Ma;if(c)return Da(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.S.return);a.S.return(b);return Ea(a)}
function Da(a,b,c,d){try{var e=b.call(a.S.Ma,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.S.Cb=!1,e;var h=e.value}catch(g){return a.S.Ma=null,ya(a.S,g),Ea(a)}a.S.Ma=null;d.call(a.S,h);return Ea(a)}
function Ea(a){for(;a.S.S;)try{var b=a.Ma(a.S);if(b)return a.S.Cb=!1,{value:b.value,done:!1}}catch(c){a.S.Vb=void 0,ya(a.S,c)}a.S.Cb=!1;if(a.S.wb){b=a.S.wb;a.S.wb=null;if(b.nl)throw b.$k;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function Ga(a){this.next=function(b){xa(a.S);a.S.Ma?b=Da(a,a.S.Ma.next,b,a.S.Bc):(a.S.Bc(b),b=Ea(a));return b};this.throw=function(b){xa(a.S);a.S.Ma?b=Da(a,a.S.Ma["throw"],b,a.S.Bc):(ya(a.S,b),b=Ea(a));return b};this.return=function(b){return Ba(a,b)};ta();this[Symbol.iterator]=function(){return this}}
function Ja(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function h(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(h,e)}h(a.next())})}ka("Math.sign",function(a){return a?a:function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1}});
function Ka(a,b){ta();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}ka("Array.prototype.keys",function(a){return a?a:function(){return Ka(this,function(b){return b})}});var t={},v;t.canvas=document.createElement("canvas");t.canvas.width=480;t.canvas.height=296;var Na=document.body;Na.style.position="relative";
Na.style.left=(window.innerWidth-t.canvas.width>>1)+"px";Na.style.width=t.canvas.width+"px";Na.style.margin="0px";Na.style.marginBottom="20px";Na.style.padding="0px";Na.style.display="flex";Na.style.flexFlow="column nowrap";Na.style.justifyContent="flex-start";Na.style.alignItems="center";Na.style.alignContent="flex-start";Na.style.backgroundColor="#404040";Na.style.fontFamily="sans-serif";Na.style.fontSize="12pt";Na.style.color="white";Na.style.imageRendering="pixelated";
Na.style.transformOrigin="top center";Na.style.transform="scale(2)";var Oa=document.createElement("img");Oa.src="WebsiteBanner_230507_01.png";Oa.style.margin="0 auto";document.body.appendChild(Oa);var Pa=t.ye=document.createElement("div");Pa.style.position="relative";Pa.style.width=t.canvas.width+"px";Pa.style.height=t.canvas.height+"px";Pa.style.margin="6px 0";Pa.style.outline="5px solid black";Pa.style.backgroundColor="black";Pa.oncontextmenu=function(a){return a.preventDefault()};document.body.appendChild(Pa);
t.ye.appendChild(t.canvas);function Qa(a,b){for(var c=0,d=a.length,e=c+(d-c>>1);c<d;){var h=a.cmp.call(null,b,a[e]);if(0>h)d=e,e=c+(d-c>>1);else if(0<h)c=e+1,e=c+(d-c>>1);else break}return e}function Ra(a,b){var c=Qa(a,b);return a[c]&&0==a.cmp(a[c],b)?a[c]:null}function Sa(a,b){var c=Qa(a,b);if(a[c]&&0==a.cmp(a[c],b))return a[c];a.splice(c,0,b);return b}function Ta(a,b){var c=Qa(a,b);a[c]&&0==a.cmp(a[c],b)&&a.splice(c,1)};for(var Wa=new Uint8Array(256),Xa=0;256>Xa;Xa++)Wa[Xa]=Wa[Xa>>>1]+(Xa&1);function Ya(a,b,c){return a<b?b:a>c?c:a}function $a(a,b,c){return a*(1-c)+b*c}function ab(a,b){return a==b?a:0==a?b:0==b?a:0==(a&1)?0==(b&1)?ab(a>>1,b>>1)<<1:ab(a>>1,b):0==(b&1)?ab(a,b>>1):a>=b?ab(a-b>>1,b):ab(b-a>>1,a)}function cb(a,b,c){var d=b*b-4*a*c;if(0<d){c={};d=Math.sqrt(d);a=2*a;var e=(-b+d)/a;a=(-b-d)/a;a>e?(c.Ha=e,c.yc=a):(c.Ha=a,c.yc=e);return c}return 0==d?(c={},c.Ha=-b/(2*a),c.yc=c.Ha,c):null}
function db(a){this.cmp=a;this.elements=[]}f=db.prototype;f.get=function(a){var b=eb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements[b]};f.contains=function(a){var b=eb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?-1:b};f.add=function(a){return this.push(a)};f.push=function(a){var b=eb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return!1;this.elements.splice(b,0,a);return!0};
f.replace=function(a){var b=eb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b]=a,!0;this.elements.splice(b,0,a);return!0};f.Ea=function(a){var b=eb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b];this.elements.splice(b,0,a);return a};f.remove=function(a){var b=eb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements.splice(b,1)[0]};
function eb(a,b){for(var c=0,d=a.elements.length,e=Math.floor(c/2+d/2);c<d;){var h=a.cmp.call(a,b,a.elements[e]);if(0>h)d=e,e=Math.floor(c/2+d/2);else if(0<h)c=e+1,e=Math.floor(c/2+d/2);else break}return e}f.clear=function(){this.elements.length=0};f.Nh=function(){return 0==this.elements.length};function fb(){this.start=new gb(null);return this}f=fb.prototype;f.Nh=function(){return!this.first().item};f.size=function(){for(var a=0,b=this.first();b.item;b=b.next)a++;return a};f.first=function(){return this.start.next};
f.clear=function(){ib(this.start);return this};function jb(a,b){nb(b,a.start);return a}f.add=function(a){return jb(this,new gb(a))};function ob(a){for(var b=pb,c=qb,d=b.first();d.item;d=d.next)if(0>c.call(null,a.item,d.item)){nb(a,d);return}nb(a,b.start)}f.get=function(a){for(var b=this.first();b.item;b=b.next)if(b.item==a)return b;return null};f.remove=function(a){a=this.get(a);if(null==a)return null;ib(a);return this};
f.sort=function(a){for(var b,c=this.first();c.item;c=b){b=c.next;var d=c;for(var e=d.pb;e.item&&!(0<=a(d.item,e.item));)e=e.pb;d=e;d!=c.pb&&(ib(c),c.pb=d,c.next=d.next,c.pb.next=c,c.next.pb=c)}};function gb(a){this.item=a;this.pb=this;this.next=this;return this}function nb(a,b){a.next=b;a.pb=b.pb;a.next.pb=a;a.pb.next=a}function ib(a){a.pb.next=a.next;a.next.pb=a.pb;a.next=a.pb=a};function rb(){var a;isNaN(a)&&(a=(new Date).getTime()|0);this.r=a+643709624|0}rb.prototype.next=function(){this.r^=this.r<<13;this.r^=this.r>>17;this.r^=this.r<<5;this.r>>>=0};function sb(){var a=w;a.next();return a.r}function E(a){a.next();return a.r/4294967295}var w=new rb;function tb(a){return Math.floor(E(w)*a)}function ub(a){return 1>E(w)*a}function vb(a){return a[tb(a.length)]}function wb(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return vb(b)};function xb(a,b,c){for(var d=0,e=a.length,h=d+(e-d>>1);d<e;){var g=c.call(null,b,a[h]);if(0>g)e=h,h=d+(e-d>>1);else if(0<g)d=h+1,h=d+(e-d>>1);else break}return h}function yb(a,b){var c=a.splice(0);c=q(c);for(var d=c.next();!d.done;d=c.next())d=d.value,a.splice(xb(a,d,b),0,d)}function qb(a,b){return isNaN(a)?a.index<b.index?-1:a.index>b.index?1:0:a<b.index?-1:a>b.index?1:0}function zb(a,b){return"string"==typeof a?a<b.name?-1:a>b.name?1:0:a.name<b.name?-1:a.name>b.name?1:0};function Bb(a){var b=Cb(a);a=a.slice(a.position,a.position+=b);return String.fromCharCode.apply(null,a)}function Db(a,b){Eb(a,b.length);for(var c=0;c<b.length;c++)a[a.position++]=b.charCodeAt(c)}function Gb(a){var b=Hb(a);a=a.slice(a.position,a.position+=b);return String.fromCharCode.apply(null,a)}function Lb(a,b){Mb(a,b.length);for(var c=0;c<b.length;c++)a[a.position++]=b.charCodeAt(c)}function Cb(a){return a[a.position++]}function Eb(a,b){a[a.position++]=b&255}
function Ob(a){var b=0|a[a.position++]<<0;return b|=a[a.position++]<<8}function Sb(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}function Tb(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;return(b>>>0)-32768}function Ub(a,b){b+=32768;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}function Hb(a){var b=a[a.position++]<<0;b+=a[a.position++]<<8;b+=a[a.position++]<<16;return b+=a[a.position++]<<24}
function Mb(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}function Vb(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;b|=a[a.position++]<<16;b|=a[a.position++]<<24;return(b>>>0)-2147483648}function Wb(a,b){b+=2147483648;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}
function Xb(a){var b=new Uint8Array(4);b[0]=a[a.position++];b[1]=a[a.position++];b[2]=a[a.position++];b[3]=a[a.position++];return(new Float32Array(b.buffer))[0]}function Zb(a,b){var c=new Float32Array(1);c[0]=b;c=new Uint8Array(c.buffer);a[a.position++]=c[0];a[a.position++]=c[1];a[a.position++]=c[2];a[a.position++]=c[3]};function bc(){this.size=0;this.root=new cc;this.root.update=function(){};this.cc=null}bc.prototype.Nh=function(){return 0==this.size};bc.prototype.pop=function(){if(this.Nh())return null;var a=this.root.fe.Tf(),b=a.value;this.remove(a);return b};
bc.prototype.add=function(a,b){this.cc=new dc;if(0==this.size)this.root.fe=this.cc,this.cc.parent=this.root;else{var c=this.root;var d=this.size;d=Wa[d>>>0&255]+Wa[d>>>8&255]+Wa[d>>>16&255]+Wa[d>>>24];for(var e=0;e<d;e++)c=c.fe;d=new cc;d.parent=c.parent;c.parent.fe=d;d.xi=c;c.parent=d;d.fe=this.cc;this.cc.parent=d}c=this.cc;c.value=a;c.key=b;c.parent.update();this.size++;return this.cc};
bc.prototype.remove=function(a){if(a==this.cc)1==this.size?this.root.fe=this.cc=null:ec(this);else{var b=this.cc.value,c=this.cc.key;ec(this);a.value=b;a.key=c;a.parent.update()}this.size--};function ec(a){var b=a.cc.parent,c=b.xi;a.cc=c.cc();c.parent=b.parent;c.parent.fe=c;c.parent.update()}function cc(){}cc.prototype.Tf=function(){return this.first};cc.prototype.cc=function(){return this.fe.cc()};
cc.prototype.update=function(){this.first=this.fe.Tf().key<this.xi.Tf().key?this.fe.Tf():this.xi.Tf();this.parent.update()};function dc(){}dc.prototype.Tf=function(){return this};dc.prototype.cc=function(){return this};Math.ug=2*Math.PI;function fc(a){return a*Math.PI/180}function gc(a){return Math.PI/2147483648*a}function hc(a,b,c,d){return ic(new G(a.x-c.x,a.y-c.y,a.z-c.z),b,d)}function ic(a,b,c){return cb(jc(b,b),2*jc(a,b),jc(a,a)-c*c)}function oc(a,b,c){.7071>a.y&&-.7071<a.y?(b.set(a.z,0,-a.x),pc(a,b,c).pa(1),pc(c,a,b)):(c.set(0,a.z,-a.y),pc(c,a,b).pa(1),pc(a,b,c))}
function qc(a,b){var c;c||(c=new tc);for(var d=[],e=0;;){for(var h=-1,g=null,k=Number.POSITIVE_INFINITY,l=0;l<b.length;l++)if(!(e&1<<l)){var m=b[l],n=jc(m,a);n<k&&(h=l,g=m,k=n)}if(0<=k)break;c=c.Ui(a,g,k);d.push(g);e|=1<<h;if(!c)break}a.round()}function tc(){}tc.prototype.Ui=function(a,b,c){a.x-=b.x*c;a.y-=b.y*c;a.z-=b.z*c;return new uc(b)};function uc(a){this.n=a}uc.prototype.Ui=function(a,b){b=pc(this.n,b,new G(0,0,0));if(0==b.pa(1))return null;var c=jc(a,b);a.x=b.x*c;a.y=b.y*c;a.z=b.z*c;return new vc(b)};
function vc(a){this.n=a}vc.prototype.Ui=function(a,b,c){b=c/jc(this.n,b);if(!isFinite(b))return null;a.x-=this.n.x*b;a.y-=this.n.y*b;a.z-=this.n.z*b;return null};function zc(a,b,c){null==a?(this.a=b*c,this.j=b,this.ratio=c):null==b?(this.a=a,this.j=a/c,this.ratio=c):null==c?(this.a=a,this.j=b,this.ratio=a/b):(this.a=a,this.j=b,this.ratio=c);this.y=this.x=0;a=a>b?a:b;for(this.bufferSize=8;this.bufferSize<a;this.bufferSize*=2);}
function Ac(a,b,c,d,e){a=Math.round(a);b=Math.round(b);c=Math.round(c);d=Math.round(d);this.i=a;this.f=b;this.B=c;this.A=d;if(!e)return this.fa=c-a,this.$=d-b,this.Ib=this.ua=NaN,this.length=Math.sqrt(this.fa*this.fa+this.$*this.$),a=this.fa,b=this.$,0>a?0>b?-a<-b?(this.type=9,this.ua=-a/b,this.Ib=-b/this.length,a=ab(-a,-b),this.fa/=a,this.$/=a):-a>-b?(this.type=7,this.ua=b/a,this.Ib=-a/this.length,a=ab(-a,-b),this.fa/=a,this.$/=a):(this.type=8,this.ua=this.$=this.fa=-1,this.Ib=Math.SQRT1_2):0<b?
-a<b?(this.type=3,this.ua=-a/b,this.Ib=b/this.length,a=ab(-a,b),this.fa/=a,this.$/=a):-a>b?(this.type=5,this.ua=b/a,this.Ib=-a/this.length,a=ab(-a,b),this.fa/=a,this.$/=a):(this.type=4,this.fa=-1,this.$=1,this.ua=-1,this.Ib=Math.SQRT1_2):(this.type=6,this.fa=-1):0<a?0>b?a<-b?(this.type=11,this.ua=-a/b,this.Ib=-b/this.length,a=ab(a,-b),this.fa/=a,this.$/=a):a>-b?(this.type=13,this.ua=b/a,this.Ib=a/this.length,a=ab(a,-b),this.fa/=a,this.$/=a):(this.type=12,this.fa=1,this.ua=this.$=-1,this.Ib=Math.SQRT1_2):
0<b?a<b?(this.type=1,this.ua=-a/b,this.Ib=b/this.length,a=ab(a,b),this.fa/=a,this.$/=a):a>b?(this.type=15,this.ua=b/a,this.Ib=a/this.length,a=ab(a,b),this.fa/=a,this.$/=a):(this.type=0,this.$=this.fa=1,this.ua=-1,this.Ib=Math.SQRT1_2):(this.type=14,this.fa=1):a<b?(this.type=2,this.$=1):a>b&&(this.type=10,this.$=-1),this}function Bc(a,b){return a.i<b.i?-1:a.i>b.i?1:a.f<b.f?-1:a.f>b.f?1:a.B<b.B?-1:a.B>b.B?1:a.A<b.A?-1:a.A>b.A?1:0}f=Ac.prototype;
f.replace=function(a){this.remove=!0;if(this.Md){a=q(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b.Md){var c=q(this.Md);for(d=c.next();!d.done;d=c.next())d=d.value,0<=b.Md.indexOf(d)||(b.Md.push(d),d.push(b))}else{b.Md=this.Md.slice();c=q(b.Md);for(var d=c.next();!d.done;d=c.next())d.value.push(b)}a=q(this.Md);for(d=a.next();!d.done;d=a.next())b=d.value,b.splice(b.indexOf(this),1);delete this.Md}};
function Cc(a,b){var c=a.i+b.fa;b=a.f+b.$;return Math.atan2(L(a,c,b),a.getParameter(c,b))}function Dc(a,b,c){for(var d={Wk:[],code:0},e=0;e<c.length;e++)d.Wk.push(L(c[e],a,b)),1==Ec(c[e],a,b)&&(d.code+=1<<e);return d}
function Fc(a){var b;var c=Number.NEGATIVE_INFINITY;var d=Number.POSITIVE_INFINITY;var e=b=null;var h=a[a.length-1];a=q(a);for(var g=a.next();!g.done;g=a.next()){g=g.value;var k=g.i-g.f;k>c?(c=k,d=g.f,b=h,e=g):k==c&&g.f<d&&(d=g.f,b=h,e=g);h=g}c=b.type&7;d=e.type;return c<d?!0:c>d?!1:b.ua<e.ua?!0:b.ua>e.ua?!1:!0}
function Gc(a,b,c){var d=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,h=null,g=null;c=q(c);for(var k=c.next();!k.done;k=c.next()){k=k.value;var l=Hc(k,a,b);0>l?(l=-l,l<d&&(d=l,h=k)):0<l&&l<e&&(e=l,g=k)}--d;--e;return 0==d||0==e?0:h&&g?d<e?-1:d>e||h.B<g.i?1:-1:g?1:-1}
function Ic(a){var b=a.bound;if(!b){b=new Jc;for(var c=q(a),d=c.next();!d.done;d=c.next()){var e=d.value;b.Ea(e.B,e.A)}}b=b.l+(b.u-b.l>>1);e=c=Number.POSITIVE_INFINITY;a=q(a);for(d=a.next();!d.done;d=a.next())d=d.value,0<d.$?(d=Kc(d,b),d<e&&(e=d)):0>d.$&&(d=Kc(d,b),d<c&&(c=d));return new M(c+(e-c>>1),b)}
function Qc(a,b){var c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;b=q(b);for(var e=b.next();!e.done;e=b.next()){var h=e.value,g=L(a,h.i,h.f),k=L(a,h.B,h.A);e=a.getParameter(h.i,h.f);h=a.getParameter(h.B,h.A);if(g<k)g/=g-k,e=e*(1-g)+h*g,e<d&&(d=e);else if(g>k)g/=g-k,e=e*(1-g)+h*g,e>c&&(c=e);else if(0>g){if(e>h)return null}else if(0<g&&e<h)return null}return!isFinite(c)||!isFinite(d)||c>=d?null:[c,d]}
function Ec(a,b,c){if(void 0==a.type)return 0;switch(a.type){case 0:case 1:case 3:var d=0;a=(c-a.f)*-a.ua+a.i;b<=a&&(d+=2);b>=a&&(d+=1);return d;case 2:return d=0,b<=a.i&&(d+=2),b>=a.i&&(d+=1),d;case 4:case 5:case 7:return d=0,a=(b-a.i)*a.ua+a.f,c<=a&&(d+=2),c>=a&&(d+=1),d;case 6:return d=0,c<=a.f&&(d+=2),c>=a.f&&(d+=1),d;case 8:case 9:case 11:return d=0,a=(c-a.f)*-a.ua+a.i,b<=a&&(d+=1),b>=a&&(d+=2),d;case 10:return d=0,b<=a.i&&(d+=1),b>=a.i&&(d+=2),d;case 12:case 13:case 15:return d=0,a=(b-a.i)*
a.ua+a.f,c<=a&&(d+=1),c>=a&&(d+=2),d;case 14:return d=0,c<=a.f&&(d+=1),c>=a.f&&(d+=2),d}}
function L(a,b,c){switch(a.type){case 0:case 1:case 3:b-=a.i;c-=a.f;var d=Math.floor(c/a.$);b-=d*a.fa;c-=d*a.$;return(c*-a.ua-b)*a.Ib;case 2:return a.i-b;case 4:case 5:case 7:return b-=a.i,c-=a.f,d=Math.floor(b/-a.fa),b+=d*a.fa,c+=d*a.$,(b*a.ua-c)*a.Ib;case 6:return a.f-c;case 8:case 9:case 11:return b-=a.i,c-=a.f,d=Math.floor(c/-a.$),b+=d*a.fa,c+=d*a.$,(b-c*-a.ua)*a.Ib;case 10:return b-a.i;case 12:case 13:case 15:return b-=a.i,c-=a.f,d=Math.floor(b/a.fa),b-=d*a.fa,c-=d*a.$,(c-b*a.ua)*a.Ib;case 14:return c-
a.f}return NaN}f.getParameter=function(a,b){var c=this.type,d=this.fa,e=this.$;this.type=(c+12)%16;this.fa=e;this.$=-d;a=L(this,a,b);this.type=c;this.fa=d;this.$=e;return a};f.evaluate=function(a){a/=this.length;return(new M(this.i+(this.B-this.i)*a,this.f+(this.A-this.f)*a)).round()};f.lb=function(a,b){var c=(this.B-this.i)/this.length,d=(this.A-this.f)/this.length;return(new M(this.i+c*a-d*b,this.f+d*a+c*b)).round()};f.vf=function(a,b){return(new M(this.getParameter(a,b),L(this,a,b))).round()};
function Rc(a){return(new M(a.B-a.i,a.A-a.f)).scale(5E4/a.length)}function Sc(a,b){return(new M(a.f-a.A,a.B-a.i)).scale(b/a.length)}f.Cf=function(a,b){a=this.getParameter(a,b);a/=this.length;return 0>=a?new M(this.i,this.f):1<=a?new M(this.B,this.A):(new M(this.i+(this.B-this.i)*a,this.f+(this.A-this.f)*a)).round()};
function Kc(a,b){var c=0;switch(a.type){case 0:case 1:case 3:if(b<a.f)break;if(b>=a.A)break;c-=a.i;b-=a.f;var d=Math.floor(b/a.$);c-=d*a.fa;b-=d*a.$;return b*-a.ua-c;case 2:if(b<a.f)break;if(b>=a.A)break;return a.i-c;case 4:case 5:if(b<a.f)break;if(b>=a.A)break;c-=a.i;b-=a.f;d=Math.floor(b/a.$);c-=d*a.fa;b-=d*a.$;return b/a.ua-c;case 7:if(b<a.A)break;if(b>=a.f)break;c-=a.i;b-=a.f;d=Math.floor(b/-a.$);c+=d*a.fa;b+=d*a.$;return b/a.ua-c;case 8:case 9:case 11:if(b<a.A)break;if(b>=a.f)break;c-=a.i;b-=
a.f;d=Math.floor(b/-a.$);c+=d*a.fa;b+=d*a.$;return b*-a.ua-c;case 10:if(b<a.A)break;if(b>=a.f)break;return a.i-c;case 12:case 13:if(b<a.A)break;if(b>=a.f)break;c-=a.i;b-=a.f;d=Math.floor(b/-a.$);c+=d*a.fa;b+=d*a.$;return b/a.ua-c;case 15:if(!(b<a.f||b>=a.A))return c-=a.i,b-=a.f,d=Math.floor(b/a.$),c-=d*a.fa,b-=d*a.$,b/a.ua-c}return NaN}
function Hc(a,b,c){switch(a.type){case 0:case 1:case 3:if(c<a.f)break;if(c>=a.A)break;b-=a.i;c-=a.f;var d=Math.floor(c/a.$);b-=d*a.fa;c-=d*a.$;a=c*-a.ua-b;if(0>a)break;return a+1;case 2:if(c<a.f)break;if(c>=a.A)break;a=a.i-b;if(0>a)break;return a+1;case 4:case 5:if(c<a.f)break;if(c>=a.A)break;b-=a.i;c-=a.f;d=Math.floor(c/a.$);b-=d*a.fa;c-=d*a.$;a=c/a.ua-b;if(0>a)break;return a+1;case 7:if(c<a.A)break;if(c>=a.f)break;b-=a.i;c-=a.f;d=Math.floor(c/-a.$);b+=d*a.fa;c+=d*a.$;a=c/a.ua-b;if(0>a)break;return-a-
1;case 8:case 9:case 11:if(c<a.A)break;if(c>=a.f)break;b-=a.i;c-=a.f;d=Math.floor(c/-a.$);b+=d*a.fa;c+=d*a.$;a=c*-a.ua-b;if(0>a)break;return-a-1;case 10:if(c<a.A)break;if(c>=a.f)break;a=a.i-b;if(0>a)break;return-a-1;case 12:case 13:if(c<a.A)break;if(c>=a.f)break;b-=a.i;c-=a.f;d=Math.floor(c/-a.$);b+=d*a.fa;c+=d*a.$;a=c/a.ua-b;if(0>a)break;return-a-1;case 15:if(!(c<a.f||c>=a.A||(b-=a.i,c-=a.f,d=Math.floor(c/a.$),b-=d*a.fa,c-=d*a.$,a=c/a.ua-b,0>a)))return a+1}return NaN}
f.log=function(){console.log(this.i+" "+this.f+" "+this.fa+" "+this.$+" type: "+this.type+" slope: "+this.ua)};f.da=function(){var a=this.ab(this.i,this.f,this.B,this.A);a.type=this.type;a.ua=this.ua;a.Ib=this.Ib;a.length=this.length;a.fa=this.fa;a.$=this.$;return a};function Tc(a){var b=a.ab(a.B,a.A,a.i,a.f);b.type=(a.type+8)%16;b.ua=a.ua;b.Ib=a.Ib;b.length=a.length;b.fa=-a.fa;b.$=-a.$;return b}f.ab=function(a,b,c,d){return new Ac(a,b,c,d)};
function Uc(a){if(a.ca)return a.ca;var b=Tc(a);b.ca=a;return a.ca=b}function Vc(a,b){return a.type<b.type?-1:a.type>b.type?1:a.ua<b.ua?-1:a.ua>b.ua?1:0}function Wc(a){var b=[];a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(new M(c.i,c.f));return b}function Xc(a){var b=[];a.bound&&(b.bound=a.bound);a=q(a);for(var c=a.next();!c.done;c=a.next())b.unshift(Uc(c.value));return b}
function R(a,b,c,d){this.set(void 0===a?255:a,void 0===b?255:b,void 0===c?255:c,void 0===d?255:d);return this}function Yc(a,b){return a.r<b.r?-1:a.r>b.r?1:a.Wa<b.Wa?-1:a.Wa>b.Wa?1:a.ka<b.ka?-1:a.ka>b.ka?1:a.Fa<b.Fa?-1:a.Fa>b.Fa?1:0}R.prototype.set=function(a,b,c,d){255<a&&(a=255);0>a&&(a=0);255<b&&(b=255);0>b&&(b=0);255<c&&(c=255);0>c&&(c=0);255<d&&(d=255);0>d&&(d=0);this.r=a;this.Wa=b;this.ka=c;this.Fa=d;return this};
R.prototype.scale=function(a){this.r=Math.round(this.r*a);this.Wa=Math.round(this.Wa*a);this.ka=Math.round(this.ka*a);return this};R.prototype.save=function(a){Eb(a,this.r);Eb(a,this.Wa);Eb(a,this.ka);Eb(a,this.Fa);return this};function Zc(a){return new R(Cb(a),Cb(a),Cb(a),Cb(a))}new R(0,0,0,0);var $c=new R(255,255,255,255),ad=new R(0,0,0,255),fd=new R(255,0,0,255);new R(255,255,0,255);new R(0,255,0,255);new R(0,255,255,255);new R(0,0,255,255);new R(255,0,255,255);
function gd(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.hi=this.gi=this.we=this.ve=this.Nc=this.Mc=this.Hb=this.Cc=this.ic=this.be=this.ae=this.$d=this.Zd=this.Yd=this.Xd=0;this.Ba=this.rd=this.sd=this.ha=255;return this}
function hd(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:a.z<b.z?-1:a.z>b.z?1:a.Xd<b.Xd?-1:a.Xd>b.Xd?1:a.Yd<b.Yd?-1:a.Yd>b.Yd?1:a.Zd<b.Zd?-1:a.Zd>b.Zd?1:a.$d<b.$d?-1:a.$d>b.$d?1:a.ae<b.ae?-1:a.ae>b.ae?1:a.be<b.be?-1:a.be>b.be?1:a.ic<b.ic?-1:a.ic>b.ic?1:a.Cc<b.Cc?-1:a.Cc>b.Cc?1:a.Hb<b.Hb?-1:a.Hb>b.Hb?1:a.Mc<b.Mc?-1:a.Mc>b.Mc?1:a.Nc<b.Nc?-1:a.Nc>b.Nc?1:a.ve<b.ve?-1:a.ve>b.ve?1:a.we<b.we?-1:a.we>b.we?1:a.gi<b.gi?-1:a.gi>b.gi?1:a.hi<b.hi?-1:a.hi>b.hi?1:a.ha<b.ha?-1:a.ha>b.ha?1:a.sd<b.sd?-1:a.sd>
b.sd?1:a.rd<b.rd?-1:a.rd>b.rd?1:a.Ba<b.Ba?-1:a.Ba>b.Ba?1:0}function id(a,b,c){var d=1-c,e=new gd(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c);e.Xd=a.Xd*d+b.Xd*c;e.Yd=a.Yd*d+b.Yd*c;e.Zd=a.Zd*d+b.Zd*c;e.$d=a.$d*d+b.$d*c;e.ae=a.ae*d+b.ae*c;e.be=a.be*d+b.be*c;e.ic=a.ic*d+b.ic*c;e.Cc=a.Cc*d+b.Cc*c;e.Hb=a.Hb*d+b.Hb*c;e.Mc=a.Mc*d+b.Mc*c;e.Nc=a.Nc*d+b.Nc*c;e.ve=a.ve*d+b.ve*c;e.we=a.we*d+b.we*c;e.ha=a.ha*d+b.ha*c;e.sd=a.sd*d+b.sd*c;e.rd=a.rd*d+b.rd*c;e.Ba=a.Ba*d+b.Ba*c;return e}
gd.prototype.da=function(){var a=new gd(this.x,this.y,this.z);a.Xd=this.Xd;a.Yd=this.Yd;a.Zd=this.Zd;a.$d=this.$d;a.ae=this.ae;a.be=this.be;a.ic=this.ic;a.Cc=this.Cc;a.Hb=this.Hb;a.Mc=this.Mc;a.Nc=this.Nc;a.ve=this.ve;a.we=this.we;a.ha=this.ha;a.sd=this.sd;a.rd=this.rd;a.Ba=this.Ba;return a};function jd(a,b){a.ha=b.r;a.sd=b.Wa;a.rd=b.ka;a.Ba=b.Fa}function kd(a,b,c){a.Mc=b;a.Nc=c;return a};function M(a,b){this.x=void 0===a?0:a;this.y=void 0===b?0:b;return this}f=M.prototype;f.set=function(a,b){this.x=a;this.y=b;return this};f.xf=function(){return this.x*this.x+this.y*this.y};f.length=function(){return Math.sqrt(this.xf())};f.pa=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.pa(1);return this};f.scale=function(a){this.x*=a;this.y*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.sub=function(a){this.x=this.x-a.x;this.y=this.y-a.y;return this};f.da=function(){return new M(this.x,this.y)};f.Ad=function(a){a||(a=new Float32Array(2));a[0]=this.x;a[1]=this.y;return a};function ld(a,b){return a.x*b.x+a.y*b.y}function md(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0}f.Li=function(){return 0!=this.x||0!=this.y?!1:!0};function G(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;return this}
function jc(a,b){return a.x*b.x+a.y*b.y+a.z*b.z}function pc(a,b,c){c.x=a.y*b.z-a.z*b.y;c.y=b.x*a.z-b.z*a.x;c.z=a.x*b.y-a.y*b.x;return c}function nd(a,b,c){c.x=a.x-b.x;c.y=a.y-b.y;c.z=a.z-b.z;return c}function od(a,b,c){var d=1-c;return new G(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c)}function pd(a,b){b.x=a.x;b.y=a.y;b.z=a.z}f=G.prototype;f.da=function(){return new G(this.x,this.y,this.z)};f.set=function(a,b,c){this.x=a;this.y=b;this.z=c;return this};
f.xf=function(){return this.x*this.x+this.y*this.y+this.z*this.z};f.length=function(){return Math.sqrt(this.xf())};f.pa=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.pa(1);return this};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.sub=function(a){return nd(this,a,this)};f.Ad=function(a){a||(a=new Float32Array(3));a[0]=this.x;a[1]=this.y;a[2]=this.z;return a};f.Li=function(){return 0!=this.x||0!=this.y||0!=this.z?!1:!0};function qd(a,b,c,d){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.a=void 0===d?0:d;return this}qd.prototype.set=function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.a=d;return this};
qd.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.a=Math.round(this.a);return this};qd.prototype.Ad=function(a){a||(a=new Float32Array(4));a[0]=this.x;a[1]=this.y;a[2]=this.z;a[3]=this.a;return a};qd.prototype.Li=function(){return 0!=this.x||0!=this.y||0!=this.z||0!=this.a?!1:!0};function rd(){this.reset();return this}f=rd.prototype;
f.set=function(a){this.I=a.I;this.L=a.L;this.M=a.M;this.J=a.J;this.m11=a.m11;this.m12=a.m12;this.K=a.K;this.m21=a.m21;this.m22=a.m22;return this};f.reset=function(){this.I=1;this.J=this.M=this.L=0;this.m11=1;this.m21=this.K=this.m12=0;this.m22=1;return this};
f.rotate=function(a,b,c){var d=Math.cos(c);c=Math.sin(c);var e=c*this.I+d*this.L,h=d*this.J-c*this.m11,g=c*this.J+d*this.m11,k=d*this.K-c*this.m21,l=c*this.K+d*this.m21;this.I=d*this.I-c*this.L;this.L=e;this.J=h;this.m11=g;this.K=k;this.m21=l;d=Math.cos(b);b=Math.sin(b);c=d*this.M-b*this.L;e=b*this.m12+d*this.m11;h=d*this.m12-b*this.m11;g=b*this.m22+d*this.m21;k=d*this.m22-b*this.m21;this.L=b*this.M+d*this.L;this.M=c;this.m11=e;this.m12=h;this.m21=g;this.m22=k;b=Math.cos(a);a=Math.sin(a);d=a*this.M+
b*this.I;c=b*this.m12-a*this.J;e=a*this.m12+b*this.J;h=b*this.m22-a*this.K;g=a*this.m22+b*this.K;this.M=b*this.M-a*this.I;this.I=d;this.m12=c;this.J=e;this.m22=h;this.K=g;return this};f.ej=function(a,b){var c=Math.cos(b),d=Math.sin(b);b=1-c;var e=a.x*a.y,h=a.y*a.z,g=a.z*a.x,k=a.x*d,l=a.y*d;d*=a.z;this.I=a.x*a.x*b+c;this.L=e*b+d;this.M=g*b-l;this.J=e*b-d;this.m11=a.y*a.y*b+c;this.m12=h*b+k;this.K=g*b+l;this.m21=h*b-k;this.m22=a.z*a.z*b+c;return this};
f.bj=function(a,b){a=(new rd).ej(a,b);sd(a,this,this);return this};f.scale=function(a,b,c){this.I*=a;this.L*=a;this.M*=a;this.J*=b;this.m11*=b;this.m12*=b;this.K*=c;this.m21*=c;this.m22*=c;return this};
f.Ki=function(a){a||(a=this);var b=this.Bi();if(0==b)return a;var c=-(this.J*this.m22+this.m12*-this.K),d=this.J*this.m21+this.m11*-this.K,e=-(this.L*this.m22+this.M*-this.m21),h=this.I*this.m22+this.M*-this.K,g=-(this.I*this.m21+this.L*-this.K),k=this.L*this.m12+this.M*-this.m11,l=-(this.I*this.m12+this.M*-this.J),m=this.I*this.m11+this.L*-this.J;b=1/b;a.I=(this.m11*this.m22+this.m12*-this.m21)*b;a.J=c*b;a.K=d*b;a.L=e*b;a.m11=h*b;a.m21=g*b;a.M=k*b;a.m12=l*b;a.m22=m*b;return a};
f.Bi=function(){return this.I*(this.m11*this.m22-this.m12*this.m21)+this.L*(this.m12*this.K-this.J*this.m22)+this.M*(this.J*this.m21-this.m11*this.K)};f.Ad=function(a){a||(a=new Float32Array(9));a[0]=this.I;a[1]=this.L;a[2]=this.M;a[3]=this.J;a[4]=this.m11;a[5]=this.m12;a[6]=this.K;a[7]=this.m21;a[8]=this.m22;return a};
function sd(a,b,c){var d=a.L*b.I+a.m11*b.L+a.m21*b.M,e=a.M*b.I+a.m12*b.L+a.m22*b.M,h=a.I*b.J+a.J*b.m11+a.K*b.m12,g=a.L*b.J+a.m11*b.m11+a.m21*b.m12,k=a.M*b.J+a.m12*b.m11+a.m22*b.m12,l=a.I*b.K+a.J*b.m21+a.K*b.m22,m=a.L*b.K+a.m11*b.m21+a.m21*b.m22,n=a.M*b.K+a.m12*b.m21+a.m22*b.m22;c.I=a.I*b.I+a.J*b.L+a.K*b.M;c.J=h;c.K=l;c.L=d;c.m11=g;c.m21=m;c.M=e;c.m12=k;c.m22=n;return c}
f.transform=function(a,b){return b.set(this.I*a.x+this.J*a.y+this.K*a.z,this.L*a.x+this.m11*a.y+this.m21*a.z,this.M*a.x+this.m12*a.y+this.m22*a.z)};f.Rf=function(){return new G(this.I,this.L,this.M)};f.Sf=function(){return new G(this.J,this.m11,this.m12)};f.me=function(){return new G(this.K,this.m21,this.m22)};f.fg=function(a){this.I=a.x;this.L=a.y;this.M=a.z;return this};f.gg=function(a){this.J=a.x;this.m11=a.y;this.m12=a.z;return this};f.hg=function(a){this.K=a.x;this.m21=a.y;this.m22=a.z;return this};
f.save=function(a){var b=new Uint8Array((new Float32Array([this.I,this.L,this.M,this.J,this.m11,this.m12,this.K,this.m21,this.m22])).buffer);a.set(b,a.position);a.position+=36};f.load=function(a){a=a.slice(a.position,a.position+=36);a=new Float32Array(a.buffer);a=q(a);this.I=a.next().value;this.L=a.next().value;this.M=a.next().value;this.J=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.K=a.next().value;this.m21=a.next().value;this.m22=a.next().value};new rd;
function S(){this.reset();return this}f=S.prototype;f.set=function(a){this.I=a.I;this.L=a.L;this.M=a.M;this.bb=a.bb;this.J=a.J;this.m11=a.m11;this.m12=a.m12;this.m13=a.m13;this.K=a.K;this.m21=a.m21;this.m22=a.m22;this.m23=a.m23;this.H=a.H;this.m31=a.m31;this.m32=a.m32;this.m33=a.m33;return this};f.reset=function(){this.I=1;this.J=this.bb=this.M=this.L=0;this.m11=1;this.m21=this.K=this.m13=this.m12=0;this.m22=1;this.m32=this.m31=this.H=this.m23=0;this.m33=1;return this};
function td(a){rd.prototype.reset.call(a)}f.translate=function(a,b,c){this.H+=a;this.m31+=b;this.m32+=c;return this};f.rotate=rd.prototype.rotate;f.ej=rd.prototype.ej;f.bj=rd.prototype.bj;f.scale=rd.prototype.scale;
f.Ki=function(a){function b(D,I,J,O,oa,qa,ba,ca,Fb){return D*(oa*Fb-qa*ca)+I*(qa*ba-O*Fb)+J*(O*ca-oa*ba)}a||(a=this);var c=this.Bi();if(0==c)return a;var d=b(this.m11,this.m12,this.m13,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),e=-b(this.J,this.m12,this.m13,this.K,this.m22,this.m23,this.H,this.m32,this.m33),h=b(this.J,this.m11,this.m13,this.K,this.m21,this.m23,this.H,this.m31,this.m33),g=-b(this.J,this.m11,this.m12,this.K,this.m21,this.m22,this.H,this.m31,this.m32),k=-b(this.L,this.M,
this.bb,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),l=b(this.I,this.M,this.bb,this.K,this.m22,this.m23,this.H,this.m32,this.m33),m=-b(this.I,this.L,this.bb,this.K,this.m21,this.m23,this.H,this.m31,this.m33),n=b(this.I,this.L,this.M,this.K,this.m21,this.m22,this.H,this.m31,this.m32),r=b(this.L,this.M,this.bb,this.m11,this.m12,this.m13,this.m31,this.m32,this.m33),p=-b(this.I,this.M,this.bb,this.J,this.m12,this.m13,this.H,this.m32,this.m33),u=b(this.I,this.L,this.bb,this.J,this.m11,this.m13,
this.H,this.m31,this.m33),z=-b(this.I,this.L,this.M,this.J,this.m11,this.m12,this.H,this.m31,this.m32),y=-b(this.L,this.M,this.bb,this.m11,this.m12,this.m13,this.m21,this.m22,this.m23),x=b(this.I,this.M,this.bb,this.J,this.m12,this.m13,this.K,this.m22,this.m23),C=-b(this.I,this.L,this.bb,this.J,this.m11,this.m13,this.K,this.m21,this.m23),A=b(this.I,this.L,this.M,this.J,this.m11,this.m12,this.K,this.m21,this.m22);c=1/c;a.I=d*c;a.J=e*c;a.K=h*c;a.H=g*c;a.L=k*c;a.m11=l*c;a.m21=m*c;a.m31=n*c;a.M=r*c;a.m12=
p*c;a.m22=u*c;a.m32=z*c;a.bb=y*c;a.m13=x*c;a.m23=C*c;a.m33=A*c;return a};
f.Bi=function(){var a=this.I*(this.m11*this.m22*this.m33+this.m12*this.m23*this.m31+this.m13*this.m21*this.m32-(this.m13*this.m22*this.m31+this.m11*this.m23*this.m32+this.m12*this.m21*this.m33));a-=this.L*(this.J*this.m22*this.m33+this.m12*this.m23*this.H+this.m13*this.K*this.m32-(this.m13*this.m22*this.H+this.J*this.m23*this.m32+this.m12*this.K*this.m33));a+=this.M*(this.J*this.m21*this.m33+this.m11*this.m23*this.H+this.m13*this.K*this.m31-(this.m13*this.m21*this.H+this.J*this.m23*this.m31+this.m11*
this.K*this.m33));return a-=this.bb*(this.J*this.m21*this.m32+this.m11*this.m22*this.H+this.m12*this.K*this.m31-(this.m12*this.m21*this.H+this.J*this.m22*this.m31+this.m11*this.K*this.m32))};f.Ad=function(a){a||(a=new Float32Array(16));a[0]=this.I;a[1]=this.L;a[2]=this.M;a[3]=this.bb;a[4]=this.J;a[5]=this.m11;a[6]=this.m12;a[7]=this.m13;a[8]=this.K;a[9]=this.m21;a[10]=this.m22;a[11]=this.m23;a[12]=this.H;a[13]=this.m31;a[14]=this.m32;a[15]=this.m33;return a};
function Bd(a,b,c){var d=a.L*b.I+a.m11*b.L+a.m21*b.M+a.m31*b.bb,e=a.M*b.I+a.m12*b.L+a.m22*b.M+a.m32*b.bb,h=a.bb*b.I+a.m13*b.L+a.m23*b.M+a.m33*b.bb,g=a.I*b.J+a.J*b.m11+a.K*b.m12+a.H*b.m13,k=a.L*b.J+a.m11*b.m11+a.m21*b.m12+a.m31*b.m13,l=a.M*b.J+a.m12*b.m11+a.m22*b.m12+a.m32*b.m13,m=a.bb*b.J+a.m13*b.m11+a.m23*b.m12+a.m33*b.m13,n=a.I*b.K+a.J*b.m21+a.K*b.m22+a.H*b.m23,r=a.L*b.K+a.m11*b.m21+a.m21*b.m22+a.m31*b.m23,p=a.M*b.K+a.m12*b.m21+a.m22*b.m22+a.m32*b.m23,u=a.bb*b.K+a.m13*b.m21+a.m23*b.m22+a.m33*b.m23,
z=a.I*b.H+a.J*b.m31+a.K*b.m32+a.H*b.m33,y=a.L*b.H+a.m11*b.m31+a.m21*b.m32+a.m31*b.m33,x=a.M*b.H+a.m12*b.m31+a.m22*b.m32+a.m32*b.m33,C=a.bb*b.H+a.m13*b.m31+a.m23*b.m32+a.m33*b.m33;c.I=a.I*b.I+a.J*b.L+a.K*b.M+a.H*b.bb;c.J=g;c.K=n;c.H=z;c.L=d;c.m11=k;c.m21=r;c.m31=y;c.M=e;c.m12=l;c.m22=p;c.m32=x;c.bb=h;c.m13=m;c.m23=u;c.m33=C}
f.transform=function(a,b){return b.set(this.I*a.x+this.J*a.y+this.K*a.z+this.H*a.a,this.L*a.x+this.m11*a.y+this.m21*a.z+this.m31*a.a,this.M*a.x+this.m12*a.y+this.m22*a.z+this.m32*a.a,this.bb*a.x+this.m13*a.y+this.m23*a.z+this.m33*a.a)};f.lb=function(a,b){return b.set(this.I*a.x+this.J*a.y+this.K*a.z+this.H,this.L*a.x+this.m11*a.y+this.m21*a.z+this.m31,this.M*a.x+this.m12*a.y+this.m22*a.z+this.m32)};
function Cd(a,b,c){c.set(a.I*b.x+a.J*b.y+a.K*b.z,a.L*b.x+a.m11*b.y+a.m21*b.z,a.M*b.x+a.m12*b.y+a.m22*b.z)}f.Rf=rd.prototype.Rf;f.Sf=rd.prototype.Sf;f.me=rd.prototype.me;function Dd(a){return new G(a.H,a.m31,a.m32)}f.fg=rd.prototype.fg;f.gg=rd.prototype.gg;f.hg=rd.prototype.hg;function Ed(a,b){a.H=b.x;a.m31=b.y;a.m32=b.z}
f.save=function(a){var b=new Uint8Array((new Float32Array([this.I,this.L,this.M,this.bb,this.J,this.m11,this.m12,this.m13,this.K,this.m21,this.m22,this.m23,this.H,this.m31,this.m32,this.m33])).buffer);a.set(b,a.position);a.position+=64};
f.load=function(a){a=a.slice(a.position,a.position+=64);a=new Float32Array(a.buffer);a=q(a);this.I=a.next().value;this.L=a.next().value;this.M=a.next().value;this.bb=a.next().value;this.J=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.m13=a.next().value;this.K=a.next().value;this.m21=a.next().value;this.m22=a.next().value;this.m23=a.next().value;this.H=a.next().value;this.m31=a.next().value;this.m32=a.next().value;this.m33=a.next().value};var Fd=new S;
function Jc(){this.m=Number.POSITIVE_INFINITY;this.v=Number.NEGATIVE_INFINITY;this.l=Number.POSITIVE_INFINITY;this.u=Number.NEGATIVE_INFINITY}Jc.prototype.Ea=function(a,b){a<this.m&&(this.m=a);a>this.v&&(this.v=a);b<this.l&&(this.l=b);b>this.u&&(this.u=b);return this};Jc.prototype.$j=function(a){this.Ea(a.m,a.l);this.Ea(a.v,a.u)};Jc.prototype.da=function(){var a=new Jc;a.m=this.m;a.v=this.v;a.l=this.l;a.u=this.u;return a};
Jc.prototype.Ee=function(a,b){return a<=this.m||a>=this.v||b<=this.l||b>=this.u?!1:!0};function Gd(){this.m=Number.POSITIVE_INFINITY;this.v=Number.NEGATIVE_INFINITY;this.l=Number.POSITIVE_INFINITY;this.u=Number.NEGATIVE_INFINITY;this.C=Number.POSITIVE_INFINITY;this.G=Number.NEGATIVE_INFINITY}Gd.prototype.Ea=function(a,b,c){a<this.m&&(this.m=a);a>this.v&&(this.v=a);b<this.l&&(this.l=b);b>this.u&&(this.u=b);c<this.C&&(this.C=c);c>this.G&&(this.G=c);return this};
Gd.prototype.$j=function(a){this.Ea(a.m,a.l,a.C);this.Ea(a.v,a.u,a.G)};Gd.prototype.da=function(){var a=new Gd;a.m=this.m;a.v=this.v;a.l=this.l;a.u=this.u;a.C=this.C;a.G=this.G;return a};function Hd(a,b){return a.m>=b.v||a.v<=b.m||a.l>=b.u||a.u<=b.l||a.C>=b.G||a.G<=b.C?!1:!0}Gd.prototype.Ee=function(a,b){return a<=this.m||a>=this.v||b<=this.l||b>=this.u||void 0<=this.C||void 0>=this.G?!1:!0};t.Node=function(a){this.name=a;this.children=this.parent=null;this.wk=new gb(this);this.Ia=1;this.ia=t.ia;this.va=-2147483648;return this};f=t.Node.prototype;f.create=function(){};f.remove=function(){T(this,null)};function Id(a,b){if(0!=b.call(a)&&a.children)for(a=a.children.first();null!=a.item;a=a.next)Id(a.item,b)}f.step=function(){};f.Oe=function(){};f.Va=function(){};function Jd(a){Id(a,function(){if(!this.gh())return!1;this.Va(void 0)})}f.gh=function(){return!this.Ia||this.ia.va<t.h?!1:!0};
function T(a,b){if(a.parent)return a.parent=b,t.$i.push(a),a;if(b)return a.parent=b,Kd(a)}function Kd(a){ib(a.wk);if(!a.parent)return a;a.parent.children||(a.parent.children=new fb);jb(a.parent.children,a.wk);return a}function Ld(a,b){a.ia=b;if(a.children)for(a=a.children.first();null!=a.item;a=a.next)Ld(a.item,b)}
f.log=function(){this.name?console.group(this.constructor.name+": "+this.name):console.group(this.constructor.name);if(this.children)for(var a=this.children.first();null!=a.item;a=a.next)a.item.log();console.groupEnd()};t.xa=function(a){t.Node.call(this,a);this.transform=new S;this.Ga=null;this.O=new S};t.xa.prototype=Object.create(t.Node.prototype);t.xa.prototype.constructor=t.xa;function Md(a,b){var c=a.ig=new t.Ye;c.ia=a.ia;c.$a=1.75*b;c.Ga=a.O;T(c,t.eh)}
t.xa.prototype.remove=function(){this.ig&&this.ig.remove();t.Node.prototype.remove.call(this)};t.xa.prototype.save=function(a){Db(a,"NG.Node3D");this.O.save()};t.xa.prototype.step=function(){Nd(this)};function Nd(a){a.Ga?Bd(a.Ga,a.transform,a.O):a.O.set(a.transform)}t.ia={va:NaN,tb:new G(1,1,1)};t.$i=[];t.dj=new t.Node("schedule");t.Hc=T(new t.Node("scene"),t.dj);t.inputs=T(new t.Node("inputs"),t.dj);function Od(){this.yb=new db(zb);this.oe=new db(zb);this.qa=new db(zb);this.R=new db(zb);this.ja=new db(zb);return this}
Od.prototype.save=function(a){Sb(a,this.yb.elements.length);for(var b=0;b<this.yb.elements.length;b++)this.yb.elements[b].save(a);Sb(a,this.oe.elements.length);for(b=0;b<this.oe.elements.length;b++)this.oe.elements[b].save(a);Sb(a,this.qa.elements.length);for(b=0;b<this.qa.elements.length;b++)this.qa.elements[b].save(a);Sb(a,this.R.elements.length);for(b=0;b<this.R.elements.length;b++)this.R.elements[b].save(a);Sb(a,this.ja.elements.length);for(b=0;b<this.ja.elements.length;b++)this.ja.elements[b].save(a)};
Od.prototype.load=function(a){this.af=0;var b=Ob(a);for(var c=0;c<b;c++){var d=new Pd;d.load(a);this.yb.replace(d)}b=Ob(a);for(c=0;c<b;c++)d=new Qd,d.load(a),this.oe.replace(d);b=Ob(a);if(this.qa.elements.length){for(c=0;c<b;c++)Bb(a),Gb(a),Gb(a);b=q(this.qa.elements);for(c=b.next();!c.done;c=b.next())c.value.create()}else for(c=0;c<b;c++)d=new Rd,d.load(a),this.qa.replace(d);b=Ob(a);this.af+=b;for(c=0;c<b;c++)d=new t.Ud,d.Og=this,d.load(a),this.R.replace(d);b=Ob(a);this.af+=b;for(c=0;c<b;c++)d=new t.Audio,
d.Og=this,d.load(a),this.ja.replace(d);0==this.af&&this.ready&&this.ready.call(this)};function Sd(a){a.af--;0<a.af||a.ready&&a.ready.call(a)};t.Oa={difficulty:1,musicEnabled:1,viewportFitWindow:1,viewportSize:16,lightingFancy:1,mouseRaw:1,mouseDPI:1600,mouseScale:3};.006!=parseFloat(window.localStorage.getItem("version"))&&(window.localStorage.clear(),window.localStorage.setItem("version",.006));for(var fe in t.Oa){var ge=window.localStorage.getItem(fe);null==ge?window.localStorage.setItem(fe,t.Oa[fe]):t.Oa[fe]=parseFloat(ge)}t.$h=function(){t.sl=4294967296/(t.Oa.mouseDPI*t.Oa.mouseScale)};t.$h();t.Hg={};t.Hg.overflowX=document.body.style.overflowX;
t.Hg.overflowY=document.body.style.overflowY;t.Hg.userSelect=document.body.style.userSelect;v=t.canvas.getContext("webgl2",{alpha:!1,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1,Yl:!0});t.gc={};t.h=NaN;t.Dh=0;t.Mg=1E3/60;t.va=-2147483648;t.Df=function(){2147483647==t.va&&(t.va=-2147483648);t.va++};t.Wb=new R(0,0,0,0);t.ll=new R(255,255,255,0);t.g=new Od;t.D=null;t.ki=null;t.Qj=null;t.sa=null;t.viewport=null;
t.wl=function(){t.canvas.width=480;t.canvas.height=296;t.Bg=new zc(480,296,null);t.bh.width=480;t.bh.height=296;t.bh.create();t.ye.style.width=t.canvas.width+"px";t.ye.style.height=t.canvas.height+"px";document.body.style.width=t.canvas.width+"px";t.Gf()};t.ik=0;
t.Gf=function(a){var b=Math.min(window.innerWidth/document.body.clientWidth,window.innerHeight/document.body.clientHeight);b=Math.floor(8*b);b=Math.max(b,12);var c=t.Oa.viewportFitWindow?b:t.Oa.viewportSize;a&&(c+=a,t.Oa.viewportFitWindow=0,window.localStorage.setItem("viewportFitWindow",0),t.Sh&&(t.Sh.checked=!1));b=t.ik=Math.max(t.ik,b);c=Ya(c,12,b);t.Oa.viewportSize=c;window.localStorage.setItem("viewportSize",c);document.body.style.transform="scale("+c/8+")"};
window.onresize=function(){document.body.style.left=(window.innerWidth-t.canvas.width>>1)+"px";t.Gf()};t.fh=function(a){v.viewport(a.x,a.y,a.a,a.j);t.viewport=a;t.gc.Sc.N("viewport",new M(a.a,a.j),!0);t.gc.Sc.upload()};t.yk=function(a){t.sa=a};t.cb=function(a){t.D!=a&&(t.D=a.bind())};t.zb=function(a){t.ki!=a&&(t.ki=a.bind())};t.te=function(a){a&&t.Qj!=a&&(t.Qj=a.bind())};
t.$b=function(a,b){v.activeTexture(v.TEXTURE0+a);b?(v.bindTexture(v.TEXTURE_2D,b.object),t.D.N("enableTexture"+a,1,!0)):(v.bindTexture(v.TEXTURE_2D,null),t.D.N("enableTexture"+a,0,!0))};t.ub=function(a){if(t.Ca!=a){switch(a){case 0:v.disable(v.BLEND);break;case 1:v.enable(v.BLEND);v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA);break;case 2:v.enable(v.BLEND),v.blendFunc(v.SRC_ALPHA,v.ONE_MINUS_SRC_ALPHA)}t.Ca=a}};
t.Nb=function(a){if(t.depth!=a){switch(a){case 0:v.disable(v.DEPTH_TEST);break;case 1:v.enable(v.DEPTH_TEST);v.depthMask(!1);break;case 2:v.enable(v.DEPTH_TEST),v.depthMask(!0)}t.depth=a}};t.Zb=function(a){if(t.facing!=a){switch(a){case 0:v.disable(v.CULL_FACE);break;case 1:v.enable(v.CULL_FACE);v.frontFace(v.CCW);break;case 2:v.enable(v.CULL_FACE),v.frontFace(v.CW)}t.facing=a}};for(var he=0;4>he;he++)v.enableVertexAttribArray(he);v.clearColor(0,0,0,0);v.depthFunc(v.LEQUAL);
t.start=function(){t.gc.Sc.create(["u_eyeMatrix","u_viewMatrix","u_cameraPos","u_viewport"]);t.gc.uk.create([]);requestAnimationFrame(function(a){t.Ie.time=a;t.Ie.Kl=a;t.Hh=a;t.loop(a)})};t.Ie={};t.Ie.time=0;t.Ie.sb=0;t.Ie.bk=0;t.Ie.vl=function(a){this.Kl=a;a>=this.time+1E3&&(this.bk=this.sb=0,this.time+=1E3);this.sb++};t.paused=!0;
t.loop=function(a){var b=(t.Hh-a)/t.Mg;if(!(.5<b))if(-.5>b&&(t.Hh=a,t.Ie.bk++),t.Hh+=t.Mg,2==t.bi&&t.b.pause(),t.paused)t.b&&t.b.Il(),t.Dh++;else{t.Ie.vl(a);if(t.Ak){t.Ak--;requestAnimationFrame(t.loop);return}t.Yk=a+t.Mg;Id(t.dj,function(){this.step()});a=q(t.$i);for(b=a.next();!b.done;b=a.next())Kd(b.value);t.$i.length=0;t.h++}requestAnimationFrame(t.loop)};t.cm=function(a,b){for(var c=[],d=Math.floor(640/a);1920>=a*d;d++)c.push([a*d,b*d]);return c};function ie(a,b){a=v.createShader(a);v.shaderSource(a,b);v.compileShader(a);if(v.getShaderParameter(a,v.COMPILE_STATUS))return a;console.log(b);console.log(v.getShaderInfoLog(a));v.deleteShader(a)}function Rd(){this.name=void 0;this.Na={};this.ji={}}f=Rd.prototype;
f.create=function(){this.Cl=ie(v.VERTEX_SHADER,this.oj);this.Bl=ie(v.FRAGMENT_SHADER,this.nj);var a=this.Bl;var b=this.Vl;var c=v.createProgram();v.attachShader(c,this.Cl);v.attachShader(c,a);if(b)for(a=0;a<b.length;a++)v.bindAttribLocation(c,a,b[a]);else v.bindAttribLocation(c,0,"a_position"),v.bindAttribLocation(c,1,"a_texture0"),v.bindAttribLocation(c,2,"a_color"),v.bindAttribLocation(c,3,"a_basisZ");v.linkProgram(c);v.getProgramParameter(c,v.LINK_STATUS)?b=c:(console.log(v.getProgramInfoLog(c)),
v.deleteShader(c),b=void 0);this.cg=b;t.cb(this)};
f.N=function(a,b,c){a="u_"+a;this.Na.hasOwnProperty(a)||(this.Na[a]=v.getUniformLocation(this.cg,a));var d=this.ji[a];c?d!=b&&(this.ji[a]=b,v.uniform1i(this.Na[a],b)):isNaN(b)?b instanceof Float32Array?v.uniform3fv(this.Na[a],b):b instanceof S?v.uniformMatrix4fv(this.Na[a],!1,b.Ad()):b instanceof R?(this.ji[a]=b,v.uniform4f(this.Na[a],b.r/255,b.Wa/255,b.ka/255,b.Fa/255)):b instanceof qd?v.uniform4f(this.Na[a],b.x,b.y,b.z,b.a):b instanceof G?v.uniform3f(this.Na[a],b.x,b.y,b.z):b instanceof M&&v.uniform2f(this.Na[a],
b.x,b.y):d!=b&&(this.ji[a]=b,v.uniform1f(this.Na[a],b))};f.bind=function(){v.useProgram(this.cg);return this};f.load=function(a){this.name=Bb(a);this.oj=Gb(a);this.nj=Gb(a);this.create();delete this.oj;delete this.nj};f.save=function(a){Db(a,this.name);Lb(a,this.oj);Lb(a,this.nj)};function je(){this.usage=this.target=null;this.Zj=v.createBuffer();this.buffer=null}je.prototype.bind=function(){v.bindBuffer(this.target,this.Zj);return this};function ke(a,b){a.buffer=new ArrayBuffer(b);v.bufferData(a.target,a.buffer,a.usage)}je.prototype.upload=function(){v.bufferSubData(this.target,0,this.buffer);return this};function le(){je.call(this);this.target=v.ARRAY_BUFFER;this.usage=v.STATIC_DRAW;this.Eb=32;t.ki=null;t.zb(this)}le.prototype=Object.create(je.prototype);
le.prototype.constructor=le;le.prototype.bind=function(){je.prototype.bind.call(this);v.vertexAttribPointer(0,3,v.FLOAT,!1,this.Eb,0);v.vertexAttribPointer(1,2,v.FLOAT,!1,this.Eb,12);v.vertexAttribPointer(2,4,v.UNSIGNED_BYTE,!0,this.Eb,20);v.vertexAttribPointer(3,3,v.SHORT,!0,this.Eb,24);return this};le.prototype.upload=function(a){this.write(a);je.prototype.upload.call(this);return this};
function me(a){var b=t.ki;b.buffer=new ArrayBuffer(a.length*b.Eb);b.write(a);v.bufferData(b.target,b.buffer,b.usage)}
le.prototype.write=function(a,b){b*=this.Eb;var c=new Float32Array(this.buffer,b),d=new Int16Array(this.buffer,b);b=new Uint8Array(this.buffer,b);for(var e=0;e<a.length;e++){var h=a[e];var g=c;var k=e*this.Eb>>>2;g[k]=h.x;g[k+1]=h.y;g[k+2]=h.z;k=e*this.Eb+12>>>2;g[k]=h.Mc;g[k+1]=h.Nc;g=b;k=e*this.Eb+20;g[k]=h.ha;g[k+1]=h.sd;g[k+2]=h.rd;g[k+3]=h.Ba;g=d;k=e*this.Eb+24>>>1;g[k]=h.ic;g[k+1]=h.Cc;g[k+2]=h.Hb}return this};
function ne(){je.call(this);this.target=v.ELEMENT_ARRAY_BUFFER;this.usage=v.STATIC_DRAW;t.te(this)}ne.prototype=Object.create(je.prototype);ne.prototype.constructor=ne;ne.prototype.upload=function(a){(new Uint16Array(this.buffer)).set(a);return je.prototype.upload.call(this)};function oe(){je.call(this);this.target=v.UNIFORM_BUFFER;this.usage=v.DYNAMIC_DRAW;this.ui=null;this.fi=this.sh=0;this.Na={};je.prototype.bind.call(this)}oe.prototype=Object.create(je.prototype);oe.prototype.constructor=oe;
oe.prototype.create=function(a){v.bindBufferBase(this.target,this.sh,this.Zj);for(var b=0;b<t.g.qa.elements.length;b++){var c=t.g.qa.elements[b];t.cb(c);v.uniformBlockBinding(c.cg,v.getUniformBlockIndex(c.cg,this.ui),this.sh)}b=v.getUniformIndices(t.D.cg,a);c=q(b);for(var d=c.next();!d.done;d=c.next())if(d.value==v.INVALID_INDEX)return console.log("uniform not found ",this),this;b=v.getActiveUniforms(t.D.cg,b,v.UNIFORM_OFFSET);for(c=0;c<a.length;c++)this.Na[a[c]]=b[c];return this};
oe.prototype.N=function(a,b,c){a="u_"+a;b instanceof S?b.Ad(new Float32Array(this.buffer,this.Na[a],16)):b instanceof R||(b instanceof qd?b.Ad(new Float32Array(this.buffer,this.Na[a],4)):b instanceof G||b instanceof M&&(c?b.Ad(new Uint32Array(this.buffer,this.Na[a],2)):b.Ad(new Float32Array(this.buffer,this.Na[a],2))))};oe.prototype.upload=function(){je.prototype.bind.call(this);v.bufferData(this.target,this.buffer.byteLength,this.usage);v.bufferSubData(this.target,0,this.buffer);return this};
var pe,qe=pe=new le;qe.usage=v.STATIC_DRAW;qe.lh=[];var re,se=re=new ne;se.usage=v.STATIC_DRAW;se.elements=[];var te=t.gc.Sc=new oe;te.ui="Common";te.sh=0;te.fi=160;ke(te,te.fi);var ue=t.gc.uk=new oe;ue.ui="PortalLights";ue.sh=1;ue.fi=48;ke(ue,6144);function Pd(){this.name="defaultMaterial";this.Ed=new R(255,255,255,255);this.md=new R(255,255,255,51);this.Jc=4;this.Kc=1;this.pf=new R(0,0,0,0);this.Ca=0;return this}function ve(a,b){if(a.name<b.name)return-1;if(a.name>b.name)return 1;var c=Yc(a.Ed,b.Ed);if(0!=c)return c;c=Yc(a.md,b.md);if(0!=c)return c;c=Yc(a.pf,b.pf);return 0!=c?c:a.Jc<b.Jc?-1:a.Jc>b.Jc?1:a.Kc<b.Kc?-1:a.Kc>b.Kc?1:a.Ca<b.Ca?-1:a.Ca>b.Ca?1:0}
Pd.prototype.da=function(){var a=new Pd;a.Ed=this.Ed;a.md=this.md;a.Jc=this.Jc;a.Kc=this.Kc;a.pf=this.pf;a.Ca=this.Ca;return a};Pd.prototype.bind=function(){t.D.N("color",this.Ed);t.D.N("specularColor",this.md);t.D.N("specularExponent",this.Jc);t.D.N("specularSheen",this.Kc);t.D.N("emissiveColor",this.pf)};Pd.prototype.save=function(a){Db(a,this.name);this.Ed.save(a);this.md.save(a);Sb(a,Math.floor(1024*this.Jc));Eb(a,Math.floor(255*this.Kc));this.pf.save(a);Eb(a,this.Ca);return a};
Pd.prototype.load=function(a){this.name=Bb(a);this.Ed=Zc(a);this.md=Zc(a);this.Jc=Ob(a)/1024;this.Kc=Cb(a)/255;this.pf=Zc(a);this.Ca=Cb(a)};var we=t.g,xe=new Pd;we.yb.replace(xe);t.Ud=function(){this.Mh=v.RGBA8;this.height=this.width=2;this.border=0;this.format=v.RGBA;this.type=v.UNSIGNED_BYTE;this.data=null;this.Je=t.Ud.Je;this.Yf=t.Ud.Yf;this.zj=this.yj=v.CLAMP_TO_EDGE};t.Ud.Je=v.NEAREST;t.Ud.Yf=v.NEAREST;
t.Ud.prototype.create=function(){this.Og&&Sd(this.Og);v.activeTexture(v.TEXTURE0);this.object=v.createTexture();v.bindTexture(v.TEXTURE_2D,this.object);v.texImage2D(v.TEXTURE_2D,0,this.Mh,this.width,this.height,this.border,this.format,this.type,this.data);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,this.Je);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,this.Yf);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,this.yj);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,this.zj);9984<=this.Je&&9987>=
this.Je&&v.generateMipmap(v.TEXTURE_2D)};
t.Ud.prototype.load=function(a){this.name=Bb(a);this.Mh=Ob(a);this.width=Ob(a);this.height=Ob(a);this.border=Ob(a);this.format=Ob(a);this.type=Ob(a);this.Je=Ob(a);this.Yf=Ob(a);this.yj=Ob(a);this.zj=Ob(a);this.Dd=new R(Cb(a),Cb(a),Cb(a),Cb(a));var b=Hb(a);a=a.slice(a.position,a.position+=b);a=new Blob([a],{type:"image/png"});this.data=new Image;this.data.parent=this;this.data.onload=function(){this.parent.width=this.width;this.parent.height=this.height;this.parent.create()};this.data.src=URL.createObjectURL(a)};
t.Ud.prototype.save=function(a){Db(a,this.name);Sb(a,this.Mh);Sb(a,this.width);Sb(a,this.height);Sb(a,this.border);Sb(a,this.format);Sb(a,this.type);Sb(a,this.Je);Sb(a,this.Yf);Sb(a,this.yj);Sb(a,this.zj);Eb(a,this.Dd.r);Eb(a,this.Dd.Wa);Eb(a,this.Dd.ka);Eb(a,this.Dd.Fa);Mb(a,this.Lg.length);a.set(this.Lg,a.position);a.position+=this.Lg.length};
t.Lh=function(a){a.Xj=[];a.Yj=[];for(var b=0,c=0,d=0;d<a.ne.length;d++)b+a.ne[d]+1>a.width&&(b=0,c+=a.Fe+1),a.Xj.push(b/a.width),a.Yj.push(c/a.width),b+=a.ne[d]+1,a.ne[d]/=a.width,a.Uf[d]/=a.width,a.Vf[d]/=a.width;a.Fe/=a.height;a.dl=function(e){switch(e){case "0":return 0;case "1":return 1;case "2":return 2;case "3":return 3;case "4":return 4;case "5":return 5;case "6":return 6;case "7":return 7;case "8":return 8;case "9":return 9;case ",":return 10;case "/":return 11;case " ":return 12}return-1}};
t.Eh=function(a,b,c){for(var d=[],e=0,h=0;h<b.length;h++){var g=a.dl(b.charAt(h)),k=a.Xj[g],l=a.Yj[g],m=a.ne[g],n=a.Fe;e+=a.Uf[g];c&&(l+=.5);d.push(kd(new gd(e,0+n,0),k,l));d.push(kd(new gd(e,0,0),k,l+n));d.push(kd(new gd(e+m,0,0),k+m,l+n));d.push(kd(new gd(e+m,0,0),k+m,l+n));d.push(kd(new gd(e+m,0+n,0),k+m,l));d.push(kd(new gd(e,0+n,0),k,l));e+=m;e+=a.Vf[g]}d.width=e;d.height=a.Fe;d.ij=a;return d};var ye=new t.Node("mouse");ye.lock=!1;ye.d={};ye.p={};document.addEventListener("mousedown",function(a){document.pointerLockElement&&(a.preventDefault(),a.stopPropagation());ye.p[a.button]=!0;ye.d[a.button]=!0});ye.r={};document.addEventListener("mouseup",function(a){ye.r[a.button]=!0;ye.d[a.button]=!1});ye.a=0;document.addEventListener("wheel",function(a){ye.a=0<a.deltaY?1:-1});ye.c=new M(0,0);ye.tc=new M(0,0);
document.addEventListener("mousemove",function(a){ye.c.set(a.clientX,a.clientY);ye.tc.x+=a.movementX;ye.tc.y+=a.movementY});ye.step=function(){t.Node.prototype.step.call(this);this.tc.set(0,0);var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;this.a=0};
ye.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=q(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1;ye.a=0;ye.c.set(0,0);ye.tc.set(0,0)};T(ye,t.inputs);ye.Al=function(){document.documentElement.requestPointerLock({unadjustedMovement:t.Oa.mouseRaw})};
document.addEventListener("pointerlockchange",function(){if(document.pointerLockElement)ye.lock=!0,document.body.style.overflowX="hidden",document.body.style.overflowY="hidden",document.body.style.userSelect="none";else{ye.lock=!1;for(var a=q(Object.getOwnPropertyNames(t.Hg)),b=a.next();!b.done;b=a.next())b=b.value,document.body.style[b]=t.Hg[b]}});var ze=new t.Node("keyboard");ze.d={};ze.p={};document.addEventListener("keydown",function(a){document.pointerLockElement&&"Tab"==a.code&&(a.preventDefault(),a.stopPropagation());"Minus"==a.code?(t.g.ja.get("hit02").play({gain:1,pitch:.875}),t.Gf(-1)):"Equal"==a.code&&(t.g.ja.get("hit02").play({gain:1,pitch:1.125}),t.Gf(1));ze.d[a.code]||(ze.p[a.code]=!0);ze.d[a.code]=!0});ze.r={};document.addEventListener("keyup",function(a){ze.r[a.code]=!0;ze.d[a.code]=!1});
ze.step=function(){t.Node.prototype.step.call(this);var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1};
ze.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=q(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1};T(ze,t.inputs);t.Audio=function(){this.buffer=null;return this};t.Audio.S=new AudioContext;var Ae=t.Audio.Vb=t.Audio.S.createGain();Ae.gain.value=.5;Ae.connect(t.Audio.S.destination);var Me=t.Audio.Cb=t.Audio.S.createGain();Me.gain.value=0;Me.connect(t.Audio.S.destination);t.Audio.oh=function(a){t.Audio.Vb.gain.value=a};t.Audio.Rc=function(){t.Audio.Cb.gain.value=t.Oa.musicEnabled};
t.Audio.prototype.play=function(a){a?(void 0===a.gain&&(a.gain=1),void 0===a.pitch&&(a.pitch=1),void 0===a.Xh&&(a.Xh=0),void 0===a.delay&&(a.delay=0)):a={gain:1,pitch:1,Xh:0,delay:0};var b=t.Audio.S.createGain();b.gain.value=a.gain;b.connect(t.Audio.Vb);var c=new AudioBufferSourceNode(t.Audio.S);c.connect(b);a.loop?c.loop=!0:c.onended=function(){b.disconnect(t.Audio.Vb)};c.le=b;c.playbackRate.value=(1-a.Xh+Math.random()*a.Xh*2)*a.pitch;c.buffer=this.buffer;void 0===a.time?c.start(t.Audio.S.currentTime+
a.delay):c.start(a.time+a.delay);return c};t.Audio.prototype.load=function(a){this.name=Bb(a);var b=Hb(a);a=a.slice(a.position,a.position+=b);var c=this;t.Audio.S.decodeAudioData(a.buffer).then(function(d){c.buffer=d;c.Og&&Sd(c.Og)})};t.Audio.prototype.save=function(a){Db(a,this.name);Mb(a,this.Lg.length);a.set(this.Lg,a.position);a.position+=this.Lg.length};function Ne(){this.bf=NaN;this.jl=-1;this.Qh=new BiquadFilterNode(t.Audio.S,{type:"lowpass",Q:12,frequency:220});this.Qh.connect(t.Audio.Cb);this.le=t.Audio.S.createGain();this.le.gain.value=3;this.le.connect(this.Qh)}
Ne.prototype.play=function(a){var b=this;if(a.audio){var c=new AudioBufferSourceNode(t.Audio.S);c.buffer=a.audio.buffer;c.connect(this.le);this.bf+=a.gm;c.start(this.bf);setTimeout(function(){switch(b.jl){case 2:t.b.He=6;break;case 3:t.b.He=7;break;case 4:t.b.He=8;break;case 5:t.b.He=9;break;default:t.b.He=0}},1E3*(this.bf-t.Audio.S.currentTime));c.onended=function(){this.disconnect(this.le)}}setTimeout(function(){b.play(a.bm())},1E3*(this.bf-t.Audio.S.currentTime+a.duration)-2E3);this.bf+=a.duration};var Pe,Qe=[],Re=0;function Se(a){return Qe[a-Re]}var Te=new db(qb),Ue=new fb,pb=new fb,Ve=new S;Ve.scale(.99609375,.99609375,.99609375);function We(a){var b=Te.get(a);if(b)return b;b=new Xe(a);Te.push(b);return b}function Ye(a){a=Ze(a);return new M(a.x-4096<<19,a.y-4096<<19)}function $e(a,b){function c(d){d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;return(d|d<<1)&1431655765}return c(a)<<1|c(b)}
function Ze(a){function b(c){c=(c|c>>1)&858993459;c=(c|c>>2)&252645135;c=(c|c>>4)&16711935;return(c|c>>8)&65535}a=new M(a>>>1&1431655765,a>>>0&1431655765);a.x=b(a.x);a.y=b(a.y);return a}
function af(a,b){isNaN(a)&&(a=0);isNaN(b)&&(b=Te.elements.length-1);if(a==b)return Te.elements[a];for(var c=Te.elements[a].index,d=c^Te.elements[b].index,e=0;d>>=1;)e++;var h=1<<e,g=(2<<e)-1,k=a,l=b+1;for(d=Math.floor(k/2+l/2);k<l;){var m=Te.elements[d].index&g;if(h<m)l=d,d=Math.floor(k/2+l/2);else if(h>m)k=d+1,d=Math.floor(k/2+l/2);else break}c=e&1?new bf(Ze(c&~g|h).x):new cf(Ze(c&~g|h).y);c.value-=4096;c.value<<=19;c.ef=af(a,d-1);c.ff=af(d,b);return c}function bf(a){this.value=a}
function cf(a){this.value=a}function df(a,b,c){this.start=a;this.tc=b;this.$a=c;this.xc=[new ef(Pe,0,1)];this.t=0}function ef(a,b,c){this.node=a;this.Qa=b;this.Uc=c}df.prototype.next=function(){for(;this.xc.length;){var a=this.xc.shift();this.t=a.Qa;if(a.node instanceof Xe)return a;this.Pe(a)}return null};
df.prototype.Pe=function(a){var b=a.node;if(b instanceof bf){var c=this.start.z;var d=this.tc.z}else c=this.start.x,d=this.tc.x;if(0<d){var e=new ef(b.ff,(b.value-this.$a-c)/d,a.Uc);e.Qa<=a.Uc&&e.Uc>=a.Qa&&this.xc.unshift(e);c=new ef(b.ef,a.Qa,(b.value+this.$a-c)/d);c.Qa<=a.Uc&&c.Uc>=a.Qa&&this.xc.unshift(c)}else 0>d?(e=new ef(b.ef,(b.value+this.$a-c)/d,a.Uc),e.Qa<=a.Uc&&e.Uc>=a.Qa&&this.xc.unshift(e),c=new ef(b.ff,a.Qa,(b.value-this.$a-c)/d),c.Qa<=a.Uc&&c.Uc>=a.Qa&&this.xc.unshift(c)):(c>=b.value-
this.$a&&this.xc.unshift(new ef(b.ff,a.Qa,a.Uc)),c<=b.value+this.$a&&this.xc.unshift(new ef(b.ef,a.Qa,a.Uc)))};
function ff(a,b,c){c=void 0===c?gf:c;if(!Te.elements.length)return null;for(var d=b.length(),e=new df(a,b,0),h,g=null,k=1;(h=e.next())&&!(h.t>k);){for(var l=function(r){if(c(r.flags)){var p=r.cf(a,0,0,b);!p||p.t>k||(p.d=p.t*d,-1>p.d||(r.item&&(p.item=r.item),g=p,k=p.t))}},m=q(h.node.oa),n=m.next();!n.done;n=m.next())l(n.value);h=q(h.node.fd);for(n=h.next();!n.done;n=h.next())l(n.value)}return g}
function hf(a,b){var c=void 0===c?gf:c;if(!Te.elements.length)return null;var d=b.length(),e=new df(a,b,0),h,g=[];for(g.cmp=jf;(h=e.next())&&!(1<h.t);){for(var k=function(r){if(c(r.flags)){var p=r.cf(a,0,0,b);!p||1<p.t||(p.d=p.t*d,-1>p.d||(r.item&&(p.item=r.item),p.Qa=!0,Sa(g,p)))}},l=function(r){r=r.Ng();if(c(r.flags)){var p=r.cf(a,0,0,b);!p||1<p.t||(p.d=p.t*d,-1>p.d||(r.item&&(p.item=r.item),p.Qa=!1,Sa(g,p)))}},m=q(h.node.oa),n=m.next();!n.done;n=m.next())k(n.value);m=q(h.node.fd);for(n=m.next();!n.done;n=
m.next())k(n.value);k=q(h.node.oa);for(n=k.next();!n.done;n=k.next())l(n.value);h=q(h.node.fd);for(n=h.next();!n.done;n=h.next())l(n.value)}return g}
function kf(a,b){var c=void 0===c?gf:c;if(0==Te.elements.length)return null;for(var d=new df(a,new G(240*b.x,0,240*b.z),0),e,h=null,g=240;(e=d.next())&&!(240*e.t>g);){for(var k=function(n){c(n.flags)&&(!(n=n.sj(a,b))||n.t>g||(h=n,g=n.t))},l=q(e.node.oa),m=l.next();!m.done;m=l.next())k(m.value);e=q(e.node.fd);for(m=e.next();!m.done;m=e.next())k(m.value)}return h}function lf(a,b){return mf(a.z-b,a.x-b,a.z+b,a.x+b,void 0)}
function mf(a,b,c,d,e){e||(e=[]);for(var h=[Pe];h.length;){var g=h.shift();g instanceof bf?(a<=g.value&&h.push(g.ef),c>=g.value&&h.push(g.ff)):g instanceof cf?(b<=g.value&&h.push(g.ef),d>=g.value&&h.push(g.ff)):e.push(g)}return e};var nf,of,pf,qf;
function rf(){nf=!1;of=[];var a=pf;pf=[[Array(Qe.length),Array(Qe.length),Array(Qe.length)],[Array(Qe.length),Array(Qe.length),Array(Qe.length)]];if(a)for(var b=q(Qe),c=b.next();!c.done;c=b.next()){var d=c.value;c=d.index-Re;d=d.index-a.aa;for(var e=0;2>e;e++)pf[e][0][c]=a[e][0][d],pf[e][1][c]=a[e][1][d],pf[e][2][c]=a[e][2][d]}pf.aa=Re;qf=0;a=q(Qe);for(c=a.next();!c.done;c=a.next()){b=c.value;b.zc||(c=new sf,c.Rg=b,c.Ef=b,c.ad=b.ad,c.Zh=[$a(.05,.95,b.Fb.x),$a(.05,.95,b.Fb.y),$a(.05,.95,b.Fb.z)],of.push(c));
b.pj=b.ad;c=q(b.pc);for(d=c.next();!d.done;d=c.next())b.pj+=tf(d.value);for(c=0;c<b.pc.length;c++)d=new sf,d.Rg=b,d.Ef=Se(b.pc[c].Xc.aa),d.nc=b.pc[c],d.ad=tf(d.nc),d.Zh=[1,1,1],of.push(d),d=new sf,d.Rg=b,d.Ef=b,d.nc=b.pc[c],d.ad=uf(d.nc),d.Zh=[.625,.625,.625],of.push(d)}}function sf(){this.Ef=this.Rg=null;this.ad=0;this.Zh=null}
function vf(a,b,c){this.Z=a;this.n=new M(a.f-a.A,a.B-a.i);this.n.x/=a.length;this.n.y/=a.length;this.lk=this.Z.i*this.n.x+this.Z.f*this.n.y;this.l=b;this.u=c;this.height=c-b}vf.prototype.Ad=function(a){var b=0,c=Pf(this);a[b++]=c.x;a[b++]=c.y;a[b++]=c.z;a[b++]=this.lk;a[b++]=this.Z.i;a[b++]=this.Z.f;a[b++]=this.Z.B;a[b++]=this.Z.A;a[b++]=this.n.x;a[b++]=this.n.y;a[b++]=this.l;a[b++]=this.u;return a};function Pf(a){return od(Qf[a.aa-Rf].ia.tb,Qf[a.Xc.aa-Rf].ia.tb,.5)}
function Sf(a,b){function c(h,g){return Math.acos(Ya(ld(h,g)/Math.sqrt(ld(h,h)*ld(g,g)),-1,1))/Math.PI}var d=b.z*a.n.x+b.x*a.n.y-a.lk;if(0>=d)return 0;var e=c(new M(a.Z.B-b.z,a.Z.A-b.x),new M(a.Z.i-b.z,a.Z.f-b.x));a=c(new M(d,a.u-b.y),new M(d,a.l-b.y));return Ya(e*a,0,1)}function tf(a){return a.Z.length/1E5*((a.u-a.l)/1E5)}function uf(a){return a.Z.length/1E5*((a.height-(a.u-a.l))/1E5)}
function Tf(a,b,c){c.set(0,0,0);for(var d=1,e=q(b.pc),h=e.next();!h.done;h=e.next()){var g=h.value;h=Sf(g,a);d-=h;g=Pf(g);c.x+=g.x*h;c.y+=g.y*h;c.z+=g.z*h}0<d&&(a=b.ia.tb,c.x+=a.x*d,c.y+=a.y*d,c.z+=a.z*d)};function Uf(a){t.xa.call(this,a);this.Vi=new S;this.ud=45*Math.PI/180;this.Bf=1E4;this.tf=1E9;this.rect=null;this.Ah=new S;this.vj=new S}Uf.prototype=Object.create(t.xa.prototype);Uf.prototype.constructor=Uf;Uf.Bc=Math.tan(fc(30));Uf.pi=function(a,b,c,d){d.I=2/a.a;d.L=0;d.M=0;d.bb=0;d.J=0;d.m11=2/a.j;d.m12=0;d.m13=0;d.K=0;d.m21=0;d.m22=-2/(c-b);d.m23=0;d.H=0;d.m31=0;d.m32=-(c+b)/(c-b);d.m33=1};Uf.oh=function(a,b,c){c=Math.tan(c)*a;var d=c*t.viewport.ratio;return{n:a,$l:b,t:c,ka:2*-c+c,r:d,ol:-d}};
Uf.tg=function(a,b,c,d,e,h,g){g.I=2*a/(d-c);g.L=0;g.M=0;g.bb=0;g.J=0;g.m11=2*a/(e-h);g.m12=0;g.m13=0;g.K=(d+c)/(d-c);g.m21=(e+h)/(e-h);g.m22=(b+a)/(a-b);g.m23=-1;g.H=0;g.m31=0;g.m32=2*b*a/(a-b);g.m33=0};Uf.Ql=function(a,b,c,d,e){var h=b*Uf.Bc;c*=Uf.Bc;d=Math.tan(d);b=h/d;c/=d;e.I=b/(h*a.ratio);e.L=0;e.M=0;e.bb=0;e.J=0;e.m11=b/h;e.m12=0;e.m13=0;e.K=0;e.m21=0;e.m22=-(c+b)/(c-b);e.m23=-1;e.H=0;e.m31=0;e.m32=-(2*c*b)/(c-b);e.m33=0;return e};Uf.prototype.step=function(){t.xa.prototype.step.call(this)};
function Vf(a){if(a.rect)Uf.pi(a.rect,a.Bf,a.tf,a.Vi);else{var b=Uf.oh(a.Bf,a.tf,a.ud);Uf.tg(a.Bf,a.tf,b.ol,b.r,b.t,b.ka,a.Vi)}a.O.Ki(a.Ah);Bd(a.Vi,a.Ah,a.vj);t.gc.Sc.N("eyeMatrix",a.Ah);t.gc.Sc.N("viewMatrix",a.vj);t.gc.Sc.N("cameraPos",new qd(a.O.H,a.O.m31,a.O.m32,a.O.m33));t.gc.Sc.upload()}
function Wf(){function a(d){t.yk(d);Vf(d);Uf.Ik(d);Jd(t.Hc)}var b=t.b.sa;if(b.Jl){var c=new zc(b.rect.a/2,b.rect.j,null);c.x=t.Bg.x;c.y=t.Bg.y;t.fh(c);a(b.Fj);c=new zc(b.rect.a/2,b.rect.j,null);c.x=t.Bg.x+c.a;c.y=t.Bg.y;t.fh(c);a(b.Ej)}else t.fh(t.Bg),a(b)}
Uf.Ik=function(a){function b(m,n){function r(y){function x(I){C.Ea(Math.atan2(I.x,-I.z),Math.atan2(I.y,-I.z))}var C=new Jc;C.nc=y;y=[new G(y.Z.A,y.l,y.Z.B),new G(y.Z.f,y.l,y.Z.i),new G(y.Z.f,y.u,y.Z.i),new G(y.Z.A,y.u,y.Z.B)];for(var A=q(y),D=A.next();!D.done;D=A.next())D=D.value,a.Ah.lb(D,D);A=y[y.length-1];y=q(y);for(D=y.next();!D.done;D=y.next())D=D.value,0>=D.z&&x(D),2==Math.abs(Math.sign(D.z)-Math.sign(A.z))&&x(od(A,D,A.z/(A.z-D.z))),A=D;return C}if((!t.im||n!=a.Fc)&&n.ia.va!=t.h){n.ia.va=t.h;
n.Gk=l++;for(var p=q(n.cells.elements),u=p.next();!u.done;u=p.next())if(u=u.value,u.mh!=t.h)for(u.mh<t.h-1&&ob(u.Fk),u.mh=t.h,u=u.Yh.first();null!=u.item;u=u.next)u.item.ia.va=t.h}n=q(n.pc);for(p=n.next();!p.done;p=n.next())if(p=p.value,!(isNaN(p.index)||p.u<=p.l)){if(m.nc){if(0<=L(m.nc.Z,p.Z.i,p.Z.f)&&0<=L(m.nc.Z,p.Z.B,p.Z.A))continue;if(0>=L(p.Z,m.nc.Z.i,m.nc.Z.f)&&0>=L(p.Z,m.nc.Z.B,m.nc.Z.A))continue}if(!(0>=L(p.Z,c.z,c.x))){(u=e[p.index])||(e[p.index]=u=r(p));var z=u.da();z.nc=u.nc;z.m<m.m&&(z.m=
m.m);z.v>m.v&&(z.v=m.v);z.l<m.l&&(z.l=m.l);z.u>m.u&&(z.u=m.u);z.m>=z.v||z.l>=z.u||b(z,Se(p.Xc.aa))}}}var c=Dd(a.O),d=ff(c,new G(0,-4294967295,0),Xf);if(d){var e={},h=a.ud,g=Math.atan(Math.tan(h)*t.viewport.ratio),k=new Jc;k.m=-g;k.v=g;k.l=-h;k.u=h;var l=0;if(d=Se(d.item.aa))a.Fc=d,b(k,a.Fc)}};function Qd(){this.name=null;this.hd=[]}Qd.prototype.save=function(a){Db(a,this.name);Sb(a,Math.ceil(this.Ub/1E3));Eb(a,this.hd.length);for(var b=q(this.hd),c=b.next();!c.done;c=b.next())c.value.save(a)};Qd.prototype.load=function(a){this.name=Bb(a);this.Ub=1E3*Ob(a);for(var b=Cb(a),c=0;c<b;c++){var d=new Yf;d.load(a);this.hd.push(d)}};function Yf(){this.X=t.g.yb.get("defaultMaterial");this.Gb=[];this.Qb=[];this.uc=[]}
Yf.prototype.compile=function(){this.uj=pe.lh.length;pe.lh=pe.lh.concat(this.Gb);for(var a=0;a<this.Qb.length;a++)this.Qb[a]+=this.uj;for(a=0;a<this.uc.length;a++)this.uc[a]+=this.uj;this.Ll=re.elements.length;re.elements=re.elements.concat(this.Qb);this.Pj=re.elements.length;re.elements=re.elements.concat(this.uc)};Yf.prototype.da=function(){var a=new Yf;a.Gb=this.Gb;a.Ta=this.Ta;a.Qb=this.Qb;a.Gd=this.Gd;a.uc=this.uc;a.Fd=this.Fd;return a};
Yf.prototype.save=function(a){Db(a,this.X.name);Sb(a,this.Gb.length);for(var b=q(this.Gb),c=b.next();!c.done;c=b.next())c=c.value,Wb(a,c.x),Wb(a,c.y),Wb(a,c.z);b=q(this.Gb);for(c=b.next();!c.done;c=b.next())c=c.value,Ub(a,c.ic),Ub(a,c.Cc),Ub(a,c.Hb);b=q(this.Gb);for(c=b.next();!c.done;c=b.next())c=c.value,Zb(a,c.Mc),Zb(a,c.Nc);Sb(a,this.Qb.length);b=q(this.Qb);for(c=b.next();!c.done;c=b.next())Sb(a,c.value);Sb(a,this.uc.length);b=q(this.uc);for(c=b.next();!c.done;c=b.next())Sb(a,c.value);Sb(a,this.Le);
return a};Yf.prototype.load=function(a){this.X=t.g.yb.get(Bb(a));for(var b=Ob(a),c=0;c<b;c++){var d=new gd(Vb(a),Vb(a),Vb(a));this.Gb.push(d)}for(c=0;c<b;c++)d=this.Gb[c],d.ic=Tb(a),d.Cc=Tb(a),d.Hb=Tb(a);for(c=0;c<b;c++)d=this.Gb[c],d.Mc=Xb(a),d.Nc=Xb(a);b=Ob(a);for(c=0;c<b;c++)this.Qb.push(Ob(a));b=Ob(a);for(c=0;c<b;c++)this.uc.push(Ob(a));this.Le=Ob(a);this.compile()};
function Zf(){function a(p,u){return p.y<u.y?-1:p.y>u.y?1:0}function b(p,u){return p.z<u.z?-1:p.z>u.z?1:p.x<u.x?-1:p.x>u.x?1:0}var c=$f,d=[];d.cmp=b;for(var e=q(c),h=e.next();!h.done;h=e.next()){var g=h.value;h=g[g.length-1];g=q(g);for(var k=g.next();!k.done;k=g.next()){k=k.value;if(0==b(h,k)){var l=[];l.cmp=a;l.z=h.z;l.x=h.x;l=Sa(d,l);Sa(l,h);Sa(l,k)}h=k}}c=q(c);for(h=c.next();!h.done;h=c.next())for(e=h.value,k=e.length-1,k=e[k],h=0;h<e.length;h++){g=e[h];if(0==b(k,g))if(l=Ra(d,k),k.y<g.y){var m=
Qa(l,k),n=Qa(l,g);for(m+=1;m<l.length&&!(m>=n);){var r=id(k,g,(l[m].y-k.y)/(g.y-k.y));r.y=l[m].y;e.splice(h++,0,r);m++}}else for(m=Qa(l,k),n=Qa(l,g),--m;0<=m&&!(m<=n);)r=id(k,g,(l[m].y-k.y)/(g.y-k.y)),r.y=l[m].y,e.splice(h++,0,r),m--;k=h;k=g}}function ag(){Yf.call(this);this.Hd=[];this.Ta=new le;this.Fd=this.Gd=null;this.Le=0}ag.prototype=Object.create(Yf.prototype);ag.prototype.constructor=ag;
ag.prototype.compile=function(){this.Qb=[];for(var a=q(this.Hd),b=a.next();!b.done;b=a.next()){b=b.value;for(var c=2;c<b.length;c++)this.Qb.push(b[0]),this.Qb.push(b[c-1]),this.Qb.push(b[c])}t.zb(this.Ta);ke(this.Ta,this.Gb.length*this.Ta.Eb);this.Ta.upload(this.Gb);this.Qb.length?(this.Gd||(this.Gd=new ne),t.te(this.Gd),ke(this.Gd,2*this.Qb.length),this.Gd.upload(this.Qb)):this.Gd=null;this.uc.length?(this.Fd||(this.Fd=new ne),t.te(this.Fd),ke(this.Fd,2*this.uc.length),this.Fd.upload(this.uc)):this.Fd=
null};function bg(a,b){b||(b=a.name);t.xa.call(this,b);this.src=a}bg.prototype=Object.create(t.xa.prototype);bg.prototype.constructor=bg;bg.prototype.create=function(){this.hd=[];for(var a=q(this.src.hd),b=a.next();!b.done;b=a.next())b=b.value,b=b instanceof ag?new cg(b):new dg(b),this.hd.push(b),this.uf&&(b.uf=this.uf),b.Ga=this.O,T(b,this)};function dg(a,b){t.xa.call(this,b);this.src=a;this.facing=1;this.El=this.Dl=!1}dg.prototype=Object.create(t.xa.prototype);dg.prototype.constructor=dg;
function eg(a){var b=null;a.parent&&(b=a.parent.D);b||(b=a.D);b||(b=a.src.D);b||(b=t.g.qa.get("physical"));return b}function fg(a){var b=null;a.parent&&(b=a.parent.X);b||(b=a.X);b||(b=a.src.X);b||(b=t.g.yb.get("defaultMaterial"));return b}function gg(a){var b=null;a.parent&&(b=a.parent.ba);b||(b=a.ba);b||(b=a.src.ba);return b}
dg.prototype.Va=function(){t.zb(pe);t.cb(eg(this));t.D.N("modelMatrix",this.O);t.$b(0,gg(this));var a=fg(this);a.bind();t.D.N("lightingFancy",t.Oa.lightingFancy,!0);this.rh?t.D.N("architectureLighting",1,!0):t.D.N("architectureLighting",0,!0);t.D.N("ambientLight",this.ia.tb,!1);if(this.Na)for(var b=0;b<this.Na.length;b+=3)t.D.N(this.Na[b],this.Na[b+1],this.Na[b+2]);t.ub(a.Ca);t.Nb(a.Ca?1:2);t.Zb(this.facing);this.src.Qb.length?(t.te(re),v.drawElements(v.TRIANGLES,this.src.Qb.length,v.UNSIGNED_SHORT,
2*this.src.Ll)):v.drawArrays(v.TRIANGLES,this.src.uj,this.src.Gb.length);this.src.uc.length&&(this.Dl&&this.Nj(),this.El&&this.Oj())};
dg.prototype.Nj=function(){t.ub(1);t.Nb(1);t.cb(t.g.qa.get("edge"));t.D.N("toonMinDist",Infinity,!1);t.D.N("modelMatrix",this.O);var a=new G(this.O.I,this.O.L,this.O.M),b=new G(this.O.J,this.O.m11,this.O.m12),c=new G(this.O.K,this.O.m21,this.O.m22);a.pa(1);b.pa(1);c.pa(1);var d=new G(t.sa.O.H-this.O.H,t.sa.O.m31-this.O.m31,t.sa.O.m32-this.O.m32);a=jc(a,d);b=jc(b,d);c=jc(c,d);t.D.N("eyeVector",new G(a,b,c));v.drawElements(v.LINES,this.src.uc.length-this.src.Le,v.UNSIGNED_SHORT,2*this.src.Pj+2*this.src.Le)};
dg.prototype.Oj=function(){t.ub(1);t.Nb(1);t.cb(t.g.qa.get("toon"));t.D.N("toonMinDist",Infinity,!1);t.D.N("modelMatrix",this.O);v.drawElements(v.LINES,this.src.Le,v.UNSIGNED_SHORT,2*this.src.Pj)};function cg(a,b){dg.call(this,a,b)}cg.prototype=Object.create(dg.prototype);f=cg.prototype;f.constructor=cg;f.step=function(){dg.prototype.step.call(this)};
f.Va=function(){t.zb(this.src.Ta);t.cb(eg(this));t.D.N("modelMatrix",this.O);t.$b(0,gg(this));var a=fg(this);a.bind();t.D.N("lightingFancy",t.Oa.lightingFancy,!0);this.rh?t.D.N("architectureLighting",1,!0):t.D.N("architectureLighting",0,!0);t.D.N("ambientLight",this.ia.tb,!1);if(this.Na)for(var b=0;b<this.Na.length;b+=3)t.D.N(this.Na[b],this.Na[b+1],this.Na[b+2]);t.ub(a.Ca);t.Nb(a.Ca?1:2);t.Zb(this.facing);this.src.Qb.length?(t.te(this.src.Gd),v.drawElements(v.TRIANGLES,this.src.Qb.length,v.UNSIGNED_SHORT,
0)):v.drawArrays(v.TRIANGLES,0,this.src.Gb.length)};
f.Nj=function(){t.ub(1);t.Nb(1);t.cb(t.g.qa.get("edge"));t.D.N("toonMinDist",Math.pow(5E5,2),!1);t.D.N("modelMatrix",this.O);var a=new G(this.O.I,this.O.L,this.O.M),b=new G(this.O.J,this.O.m11,this.O.m12),c=new G(this.O.K,this.O.m21,this.O.m22);a.pa(1);b.pa(1);c.pa(1);var d=new G(t.sa.O.H-this.O.H,t.sa.O.m31-this.O.m31,t.sa.O.m32-this.O.m32);a=jc(a,d);b=jc(b,d);c=jc(c,d);t.D.N("eyeVector",new G(a,b,c));a=this.src.uc.length-this.src.Le;b=2*this.src.Le;t.te(this.src.Fd);v.drawElements(v.LINES,a,v.UNSIGNED_SHORT,
b)};f.Oj=function(){t.ub(1);t.Nb(1);t.cb(t.g.qa.get("toon"));t.D.N("toonMinDist",Math.pow(5E5,2),!1);t.D.N("modelMatrix",this.O);var a=this.src.Le;t.te(this.src.Fd);v.drawElements(v.LINES,a,v.UNSIGNED_SHORT,0)};function hg(){this.scale=1;this.$a=25E3;this.Oc=0;this.uf=!1;this.frame=0;this.sb=1}function ig(a){a.I=t.sa.O.I;a.L=t.sa.O.L;a.M=t.sa.O.M;a.J=t.sa.O.J;a.m11=t.sa.O.m11;a.m12=t.sa.O.m12;a.K=t.sa.O.K;a.m21=t.sa.O.m21;a.m22=t.sa.O.m22;var b=this.scale*this.$a,c=this.uf?-b:b,d=Math.cos(this.Oc),e=Math.sin(this.Oc),h=new S;h.I=d*c;h.L=e*c;h.J=-e*b;h.m11=d*b;sd(a,h,a)}
function jg(){0>this.frame||(ig.call(this,this.O),t.zb(kg),t.cb(this.D),t.$b(0,this.ba),this.X.bind(),t.D.N("ambientLight",this.ia.tb,!1),t.ub(this.X.Ca),t.Nb(this.X.Ca?1:2),t.Zb(0),t.D.N("modelMatrix",this.O),t.D.N("color",this.color),v.drawArrays(v.TRIANGLE_FAN,lg(this.frame,this.sb),4))}
for(var mg=[],ng=0;4>ng;ng++)for(var og=1<<ng,pg=og<<ng,qg=1/og,rg=0;rg<pg;rg++){var sg=rg%og,tg=rg/og|0;sg*=qg;tg*=qg;var ug=void 0;ug=new gd(-1,-1,0);kd(ug,sg,tg);ug.Hb=32767;mg.push(ug);ug=new gd(1,-1,0);kd(ug,sg+qg,tg);ug.Hb=32767;mg.push(ug);ug=new gd(1,1,0);kd(ug,sg+qg,tg+qg);ug.Hb=32767;mg.push(ug);ug=new gd(-1,1,0);kd(ug,sg,tg+qg);ug.Hb=32767;mg.push(ug)}var kg=new le;ke(kg,mg.length*kg.Eb);kg.upload(mg);
function vg(a,b){for(var c=0;b>Math.pow(1<<c,2);)c++;var d=1<<c;b=1/d;c=a%d*b;a=(a/d|0)*b;return[c,a,c+b,a+b]}function lg(a,b){switch(b){default:return 4*a;case 4:return 4+4*a;case 16:return 20+4*a;case 64:return 84+4*a}};function wg(){this.color=this.ba=this.D=null;this.Ca=NaN;this.ge=[];this.xc=[];this.xc.cmp=xg;this.ql=64}wg.prototype.clear=function(){this.ge.length=0;this.xc.length=0};wg.prototype.Va=function(){t.cb(this.D);t.D.N("modelMatrix",Ve);t.$b(0,this.ba);t.D.N("color",this.color);t.ub(this.Ca);t.Nb(1);t.Zb(0);for(var a=q(this.xc),b=a.next();!b.done;b=a.next())b.value.Va()};
function yg(a,b,c,d,e,h,g){function k(y,x){if(gf(x)&&Se(x.aa)){var C=[];if(x instanceof zg){if(x.u<b.y-z||x.l>b.y+z)return;var A=L(x.V,b.z,b.x);if(A<-z||A>z)return;A=x.V.getParameter(b.z,b.x);if(A<-z||A>x.V.length+z||.707107>jc(new G((x.V.B-x.V.i)/x.V.length,0,(x.V.f-x.V.A)/x.V.length),c))return;C.push(new G(x.V.A,x.l,x.V.B),new G(x.V.f,x.l,x.V.i),new G(x.V.f,x.u,x.V.i),new G(x.V.A,x.u,x.V.B))}else{if(x.y<b.y-z||x.y>b.y+z)return;var D=q(x.ga);for(A=D.next();!A.done;A=D.next())if(L(A.value,b.z,b.x)<
-z)return;if(x instanceof Bg){if(.707107>c.y)return}else if(-.707107<c.y)return;D=q(x.ga);for(A=D.next();!A.done;A=D.next())A=A.value,C.push(new G(A.A,x.y,A.B));x instanceof Cg&&C.reverse()}(function(){function I(ca,Fb){var hb=[],Yb=ca[ca.length-1],rc=Fb(Yb);ca=q(ca);for(var Nb=ca.next();!Nb.done;Nb=ca.next()){Nb=Nb.value;var sc=Fb(Nb);2==Math.abs(Math.sign(sc)-Math.sign(rc))&&hb.push(od(Yb,Nb,rc/(rc-sc)));0<=sc&&hb.push(Nb);rc=sc;Yb=Nb}return 3>hb.length?null:hb}for(var J=q(C),O=J.next();!O.done;O=
J.next())O=O.value,p.lb(O,O);J=q([function(ca){return 1-ca.x},function(ca){return 1+ca.x},function(ca){return 1-ca.y},function(ca){return 1+ca.y},function(ca){return 1-ca.z},function(ca){return 1+ca.z}]);for(O=J.next();!O.done;O=J.next())if(C=I(C,O.value),!C)return;for(J=0;J<C.length;J++){O=C[J];var oa=.5*O.x+.5,qa=.5*O.y+.5;r.lb(O,O);var ba=new gd;ba.x=O.x;ba.y=O.y;ba.z=O.z;ba.Mc=u[0]*(1-oa)+u[2]*oa;ba.Nc=u[1]*(1-qa)+u[3]*qa;C[J]=ba}J=[];J.aa=x.aa;J.cellIndex=y.index;J=Sa(l,J);for(O=2;O<C.length;O++)J.push(C[0]),
J.push(C[O-1]),J.push(C[O])})()}}a.ge.length==a.ql&&a.ge.shift().remove();var l=[];l.cmp=xg;var m=new G,n=new G;oc(c,m,n);var r=new S;r.I=m.x;r.J=n.x;r.K=c.x;r.H=b.x;r.L=m.y;r.m11=n.y;r.m21=c.y;r.m31=b.y;r.M=m.z;r.m12=n.z;r.m22=c.z;r.m32=b.z;m=new S;n=Math.cos(d)*e;d=Math.sin(d)*e;m.I=n;m.J=-d;m.L=d;m.m11=n;m.m22=e;Bd(r,m,r);var p=r.Ki(new S),u=vg(h,g),z=1.733*e;e=lf(b,z);e=q(e);for(h=e.next();!h.done;h=e.next())for(h=h.value,g=q(h.oa),d=g.next();!d.done;d=g.next())k(h,d.value);e=new Dg;h=q(l);for(g=
h.next();!g.done;g=h.next())g=g.value,d=Ra(a.xc,g),d||(d=new Eg(a),d.aa=g.aa,d.cellIndex=g.cellIndex,d.ia=Se(d.aa).ia,d.create(),Sa(a.xc,d)),Fg(d,g),e.vk.push({node:d,Pc:g.length});a.ge.push(e)}function Eg(a){this.Vk=a;this.cellIndex=this.aa=NaN;this.ia=null;this.Pc=this.Sd=0}function xg(a,b){return a.aa<b.aa?-1:a.aa>b.aa?1:a.cellIndex<b.cellIndex?-1:a.cellIndex>b.cellIndex?1:0}Eg.prototype.create=function(){this.Ta=new le;this.Ta.usage=v.DYNAMIC_DRAW;ke(this.Ta,48*this.Ta.Eb)};
function Gg(a,b){var c=a.Pc+b;if(0>=c)Ta(a.Vk.xc,a);else{c*=a.Ta.Eb;if((a.Sd+a.Pc+b)*a.Ta.Eb>a.Ta.buffer.byteLength)b=new ArrayBuffer(c<<1);else if(48<=a.Sd)b=a.Ta.buffer;else return;c=new Uint8Array(a.Ta.buffer,a.Sd*a.Ta.Eb,a.Pc*a.Ta.Eb);(new Uint8Array(b)).set(c);a.Ta.buffer=b;a.Ta.bind();v.bufferData(a.Ta.target,a.Ta.buffer,a.Ta.usage);a.Sd=0}}
function Fg(a,b){Gg(a,b.length);a.Ta.bind();a.Ta.write(b,a.Sd+a.Pc);v.bufferSubData(a.Ta.target,(a.Sd+a.Pc)*a.Ta.Eb,new Uint8Array(a.Ta.buffer,(a.Sd+a.Pc)*a.Ta.Eb,b.length*a.Ta.Eb));a.Pc+=b.length}Eg.prototype.Va=function(){if(this.ia.va<t.h)return!1;t.zb(this.Ta);t.D.N("ambientLight",this.ia.tb);v.drawArrays(v.TRIANGLES,this.Sd,this.Pc)};function Dg(){this.vk=[]}Dg.prototype.remove=function(){for(var a=q(this.vk),b=a.next();!b.done;b=a.next())b=b.value,b.node.Sd+=b.Pc,b.node.Pc-=b.Pc,Gg(b.node,0)};var Hg={},Ig,Jg,Kg,V,W,X,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg=new R(192,192,192,255),Tg=new R(64,64,64,255),Ug=new R(160,160,160,255),Vg=new R(160,160,160,255),Wg=new R(144,144,144,255),Xg,Yg=Xg=new Pd;Xg.name="concrete";Xg.md=new R(255,255,255,3.984375);Xg.Jc=4;Xg.Kc=1;Xg.Ca=0;var Zg=Xg=new Pd;Xg.name="paint";Xg.md=new R(255,255,255,31.875);Xg.Jc=128;Xg.Kc=1;Xg.Ca=0;var $g=Xg=new Pd;Xg.name="plaster";Xg.md=new R(255,255,255,15.9375);Xg.Jc=32;Xg.Kc=1;Xg.Ca=0;var ah=Xg=new Pd;Xg.name="metal";
Xg.md=new R(255,255,255,95.625);Xg.Jc=64;Xg.Kc=1;Xg.Ca=0;var bh=Xg=new Pd;Xg.name="glass";Xg.md=new R(255,255,255,63.75);Xg.Jc=256;Xg.Kc=1;Xg.Ca=1;
function ch(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new dh(c,c+h);b.push(g);c+=h;return g}}this.floor.ba=t.g.R.get("concr01");this.floor.X=Yg;this.floor.color=Sg;this.ra.ba=t.g.R.get("concr01");this.ra.X=Yg;this.ra.color=Vg;var b=[],c=this.Te,d=this.u,e;if(e=a(25E3))e.Y.ba=t.g.R.get("brick01"),e.Y.X=Zg,e.Y.color=Tg;if(e=a(this.Sa))e.Y.ba=t.g.R.get("brick01"),e.Y.X=Zg,e.Y.color=this.color;if(e=a(0))e.Y.ba=t.g.R.get("brick01"),e.Y.X=Yg,e.Y.color=Ug;return b}
function eh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new dh(c,c+h);b.push(g);c+=h;return g}}this.floor.ba=t.g.R.get("concr01");this.floor.X=Yg;this.floor.color=Sg;this.ra.ba=t.g.R.get("concr01");this.ra.X=Yg;this.ra.color=Vg;var b=[],c=this.Te,d=this.u,e;if(e=a(25E3))e.Y.ba=t.g.R.get("brick01"),e.Y.X=Zg,e.Y.color=Tg;if(e=a(this.Sa))e.Y.ba=t.g.R.get("brick01"),e.Y.X=Zg,e.Y.color=this.color;if(e=a(-25E3))e.Y.ba=t.g.R.get("brick01"),e.Y.X=Yg,e.Y.color=Ug;if(e=a(0))e.Y.ba=
t.g.R.get("concr01"),e.Y.X=Yg,e.Y.color=Wg;return b}
function fh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new dh(c,c+h);b.push(g);c+=h;return g}}this.floor.ba=t.g.R.get("concr01");this.floor.X=Yg;this.floor.color=Sg;this.ra.ba=t.g.R.get("concr01");this.ra.X=Yg;this.ra.color=Vg;var b=[],c=this.Te,d=this.u,e;if(e=a(25E3))e.Y.ba=t.g.R.get("metal01"),e.Y.X=ah,e.Y.color=Tg;if(e=a(this.Sa))e.Y.ba=t.g.R.get("metal01"),e.Y.X=Zg,e.Y.color=this.color;if(e=a(0))e.Y.ba=t.g.R.get("metal01"),e.Y.X=ah,e.Y.color=Ug;return b}
function gh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new dh(c,c+h);b.push(g);c+=h;return g}}this.floor.ba=t.g.R.get("concr01");this.floor.X=Yg;this.floor.color=Sg;this.ra.ba=t.g.R.get("concr01");this.ra.X=Yg;this.ra.color=Vg;var b=[],c=this.Te,d=this.u,e;if(e=a(25E3))e.Y.ba=t.g.R.get("metal01"),e.Y.X=ah,e.Y.color=Tg;if(e=a(this.Sa))e.Y.ba=t.g.R.get("metal01"),e.Y.X=Zg,e.Y.color=this.color;if(e=a(-25E3))e.Y.ba=t.g.R.get("metal01"),e.Y.X=ah,e.Y.color=Ug;if(e=a(0))e.Y.ba=
t.g.R.get("concr01"),e.Y.X=Yg,e.Y.color=Wg;return b}
function hh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new dh(c,c+h);b.push(g);c+=h;return g}}this.floor.ba=t.g.R.get("concr01");this.floor.X=Yg;this.floor.color=Sg;this.ra.ba=t.g.R.get("concr01");this.ra.X=Yg;this.ra.color=Vg;var b=[],c=this.Te,d=this.u,e;if(e=a(25E3))e.Y.ba=t.g.R.get("plaster01"),e.Y.X=Zg,e.Y.color=Tg;if(e=a(this.Sa))e.Y.ba=t.g.R.get("plaster01"),e.Y.X=$g,e.Y.color=this.color;if(e=a(0))e.Y.ba=t.g.R.get("plaster01"),e.Y.X=$g,e.Y.color=new R(248,248,
248,255);return b}var ih=new rb;function jh(a){return Math.floor(E(ih)*a)}function kh(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return b[jh(b.length)]}function lh(a){for(var b=0;b<a.length;b++){var c=jh(a.length-b),d=a[b];a[b]=a[c];a[c]=d}}function mh(){for(var a=[],b=q(Qf),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next())a=a.concat(d.value)}return a}
function nh(){for(var a=[],b=q(Qf),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;for(var e=q(d.mb),h=e.next();!h.done;h=e.next())h=h.value,h.na==d&&a.push(h)}}return a}function oh(a,b,c){var d=[];a=q(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.translate(b,c));return d}function ph(a,b){var c=[];a=q(a);for(var d=a.next();!d.done;d=a.next())c.push(d.value.If(b));return c}
function qh(a,b,c){a:{switch((4-c)%4){case 0:a=new M(a,b);break a;case 1:a=new M(-b,a);break a;case 2:a=new M(-a,-b);break a;case 3:a=new M(b,-a);break a}a=void 0}return a}function rh(a,b,c){var d=[];a=q(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.expand(b,c));return d}function sh(a,b){var c=[];a=q(a);for(var d=a.next();!d.done;d=a.next())c.push(th(d.value,b));return c}
function uh(a,b){b=q(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=a.length,e=0;e<d;e++)a[e].lg(c,a)&&(a.splice(e--,1),d--)}return a}function vh(a,b){for(var c=new wh,d=q(a),e=d.next();!e.done;e=d.next())xh(c,e.value);d=q(b);for(e=d.next();!e.done;e=d.next())xh(c,e.value);c=[c];uh(c,b);return uh(a.slice(),c)}function yh(a,b){b=void 0===b?0:b;for(var c=new wh,d=q(a),e=d.next();!e.done;e=d.next())xh(c,e.value);b=[c.expand(b,b)];uh(b,a);return b}
function zh(a){var b=[];b.cmp=function(h,g){return h.m<g.m?-1:h.m>g.m?1:h.C<g.C?-1:h.C>g.C?1:0};a=q(a);for(var c=a.next();!c.done;c=a.next())Sa(b,c.value);for(a=0;a<b.length;a++){c=b[a];var d=Qa(b,{m:c.v,C:c.C}),e=b[d];e&&e.m==c.v&&e.C==c.C&&e.G==c.G&&(b.splice(d,1),b[a--]=c.da(c.C,c.G,c.m,e.v))}return b}function Ah(a,b,c){var d=Infinity;c=q(c);for(var e=c.next();!e.done;e=c.next())if(e=e.value,!(e.m>=b||e.v<=b||e.G<=a||e.C>=d)){if(e.C<a){d=a;break}d=e.C}return d}
function Bh(a){for(var b=[],c=q(a),d=c.next();!d.done;d=c.next())Ch(d.value,b);uh(b,a);return b}function Dh(a){a.bound=new Jc;for(var b=0;b<a.length;b++){var c=a[b].hf();a.bound.Ea(c.B,c.A);a[b]=c}}
function Eh(a){var b=[];b.cmp=function(m,n){return m.x<n.x?-1:m.x>n.x?1:m.y<n.y?-1:m.y>n.y?1:m.type<n.type?-1:m.type>n.type?1:0};a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,Sa(b,{x:c.lc(),y:c.kc(),type:c.xb(),Z:c});a=[];c=[];for(var d={};b.length;){var e=!1;d.dd=[];d.dd.bound=new wh;d.sc=null;d.bc=null;var h=function(m){return function(n){n.Z.xb()==m.bc.xb()?m.bc.T+=n.Z.T-n.Z.P:((m.bc.xb()+3&3)==n.Z.xb()&&(m.bc.Jg=!0,n.Z.ih=!0),m.dd.push(n.Z),m.bc=n.Z);m.sc=new M(m.bc.Kb(),m.bc.Jb());m.sc.type=
-1;Fh(m.dd.bound,m.sc.x,m.sc.y)}}(d);d.bc=b.shift().Z;d.bc.xb()&&(e=!0,d.bc.ih=!0);d.dd.push(d.bc);d.sc=new M(d.bc.Kb(),d.bc.Jb());d.sc.type=-1;for(Fh(d.dd.bound,d.sc.x,d.sc.y);;){var g=[],k=Qa(b,d.sc),l=b[k];if(!l)break;if(l.x!=d.sc.x)break;if(l.y!=d.sc.y)break;g[0]=k;g[1]=k;k++;(l=b[k])&&l.x==d.sc.x&&l.y==d.sc.y&&(g[1]=k);switch(d.bc.xb()){case 0:k=g[0];break;case 1:k=g[1];break;case 2:k=g[1];break;case 3:k=g[0]}h(b.splice(k,1)[0])}e?(d.dd[d.dd.length-1].Jg=!0,c.push(d.dd)):(d.dd.kb=[],a.push(d.dd));
d={bc:d.bc,dd:d.dd,sc:d.sc}}b=q(c);for(c=b.next();!c.done;c=b.next())Gh(c.value,a);return a}function Hh(a,b){b||(b=[]);a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(c),c.kb&&Hh(c.kb,b);return b}
function Gh(a,b){var c=null;b=q(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.C<=d.bound.C||a.bound.m<=d.bound.m||a.bound.G>=d.bound.G||a.bound.v>=d.bound.v)){if(c){if(d.bound.C<=c.bound.C)continue;if(d.bound.m<=c.bound.m)continue;if(d.bound.G>=c.bound.G)continue;if(d.bound.v>=c.bound.v)continue}c=d}c&&c.kb.push(a)}
function Ih(a){var b=162500,c=162500;b=void 0===b?0:b;c=void 0===c?0:c;var d=Bh(a);a=[];d=q(d);for(var e=d.next();!e.done;e=d.next())e.value.Fh(b,c,a);d=mh();d=q(d);for(e=d.next();!e.done;e=d.next()){e=e.value;for(var h=0;h<a.length;h++)e.expand(b,c).Ee(a[h].x,a[h].y)&&a.splice(h--,1)}return a}var Jh=-1,Kh=-1,Lh=0,Mh=1,Nh=[],Qf=[],Rf=0,Oh=!1;
function Ph(){Oh||(Ig=Nh,Nh=[],Kg=Jg=1,Oh=!0);if(!V){if(!Kg){Qh();mh();Oh=!1;Jh++;if(Jh<Lh+2)return!0;Rh();return!0}V=[];V.De=Mh;V.Af=3;V.Lc=new R(233,234,85,255);V.Sa=-75E3;V.parent=null;V.children=[];V.yh=1;V.qd=0;Nh.push(V);Kg--}if(!W){if(!V.Af){if(V.parent){var a=V.parent;a.children.push(V);do a.yh++,V.qd++,a=a.parent;while(a)}V=null;return!0}W=[];Sh.call(W);W.index=Qf.length+Rf;W.Ob=V;W.zf=kh(1,2);1==W.index&&(W.zc=!0);W.style={};W.style.height=225E3+5E4*jh(4);W.style.Lc=V.Lc;W.zc?(W.style.vc=
kh(eh,gh),W.style.Sa=1E5):(W.style.vc=kh(ch,fh),W.style.Sa=V.Sa);V.push(W);Qf.push(W);V.Af--}if(!X){if(!W.zf)return Th(),W=null,!0;X=[];X.index=Uh++;X.mb=[];X.Tb=kh(1,2)}if(!X.Tb){if(Lg){Qh();a=X;var b=Lg,c=Vh([b],[a]);c||b.U.Ob!=a.U.Ob&&(c=Wh([b],[a]));if(!c)return X.length=0,X.Tb=kh(1,2),W.pop(),!0}Mg=X=Lg=null;W.zf--;return!0}if(X.length)return(a=Xh([X],0))?(a.platform=X,X.push(a),X.Tb--):(X.length=0,X.Tb=kh(1,2),W.pop()),!0;if(W.length)return a=W,Mg||(Mg={}),(a=Xh(a,0,Mg))?(Lg=a.zd,X.y=Lg.y+5E4*
kh(-2,-1,1,2),X.y=Math.min(X.y,-4E5),X.U=W,W.push(X),a.platform=X,X.push(a),X.Tb--):(Mg=X=null,W.zf=0),!0;if(1<V.length){b=[];c=q(V);for(a=c.next();!a.done;a=c.next())b.push.apply(b,da(a.value));Mg||(Mg={});(a=Xh(b,0,Mg))?(Lg=a.zd,X.y=Lg.y,X.U=W,W.push(X),a.platform=X,X.push(a),X.Tb--):(V.pop(),Qf.pop(),Mg=X=W=null,V.Af=0);return!0}if(1<Nh.length){b=[];c=q(Nh);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length)){var d=q(a);for(a=d.next();!a.done;a=d.next())b.push.apply(b,da(a.value))}Mg||
(Mg={});if(a=Xh(b,6E5,Mg))Lg=a.zd,V.parent=Lg.U.Ob,X.y=Lg.y+5E4*kh(-2,-1,0,0,0,1,2),X.y=Math.min(X.y,-4E5),X.U=W,W.push(X),a.platform=X,X.push(a),X.Tb--;else{for(;;){a=Qf[Qf.length-1];if(a.ma<=Jh)break;b=q(a);for(a=b.next();!a.done;a=b.next())for(c=q(a.value.mb),a=c.next();!a.done;a=c.next())Yh(a.value);Qf.pop()}V=null;Nh.length=0;Kg=Jg;Mg=Lg=X=W=null}return!0}if(Ig.length){b=[];c=q(Ig);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length))for(d=q(a),a=d.next();!a.done;a=d.next())b.push.apply(b,
da(a.value));Mg||(Mg={cmp:function(e,h){return e.dc<h.dc?-1:e.dc>h.dc?1:e.x<h.x?-1:e.x>h.x?1:e.y<h.y?-1:e.y>h.y?1:0}});if(a=Xh(b,0,Mg))Lg=a.zd,X.y=Lg.y+5E4*kh(-2,-1,0,0,0,1,2),X.y=Math.min(X.y,-4E5),X.U=W,W.push(X),a.platform=X,X.push(a),X.Tb--;else{for(;;){a=Qf[Qf.length-1];if(a.ma<=Jh)break;b=q(a);for(a=b.next();!a.done;a=b.next())for(c=q(a.value.mb),a=c.next();!a.done;a=c.next())Yh(a.value);Qf.pop()}V=null;Nh.length=0;Kg=Jg;Mg=Lg=X=W=null}return!0}a=Xh(null,0);X.y=-4E5;X.U=W;W.push(X);a.platform=
X;X.push(a);X.Tb--;return!0}function Zh(){Oh||(Ig=Nh,Nh=[],Kg=Jg=1,Oh=!0);if(!V&&!Kg){Qh();mh();Oh=!1;Jh++;if(Jh<Lh+2)return!0;Rh();return!0}return $h()}
function ai(){Oh||(Ig=Nh,Nh=[],Kg=Jg=4,Ng=-1,Mh=2,Oh=!0);if(0<=Ng){var a=Nh[Ng];if(!a){Qh();mh();bi();Oh=!1;Jh++;if(Jh<Lh+2)return!0;Rh();return!0}if(2==a.children.length&&3<=a.yh){var b=function(g,k){if(!g)return k;for(var l=q(g),m=l.next();!m.done;m=l.next())k.push.apply(k,da(m.value));b(g.children[0],k);b(g.children[1],k);return k},c=b(a.children[0],[]);a=b(a.children[1],[]);var d=Vh(c,a);d||(d=Wh(c,a))}Ng++;return!0}if(!V&&!Kg){var e=[],h=function(g){g&&(g.index=e.length,e.push(g),h(g.children[0]),
h(g.children[1]))};h(Nh[0]);Nh=e;Ng=0;return!0}return $h()}
function $h(){if(!V){V=[];V.De=Mh;V.Af=kh(2,3,3,4);var a=[new R(233,234,85,255),new R(85,85,234,255),new R(234,85,85,255),new R(41,166,191,255)];V.Lc=a[Nh.length%a.length];V.Sa=-75E3;V.parent=null;V.children=[];V.yh=1;V.qd=0;Nh.push(V);Kg--}if(!W){if(!V.Af){if(V.parent){a=V.parent;a.children.push(V);do a.yh++,V.qd++,a=a.parent;while(a)}V=null;return!0}W=[];Sh.call(W);W.index=Qf.length+Rf;W.Ob=V;W.zf=kh(1,2);5!=Mh&&0==W.index%5&&(W.zc=!0);W.style={};W.style.height=225E3;5!=Mh&&(W.style.height+=5E4*
jh(4));W.style.Lc=V.Lc;W.zc?(W.style.vc=kh(eh,gh),W.style.Sa=1E5):(W.style.vc=kh(ch,fh),W.style.Sa=V.Sa);V.push(W);Qf.push(W);V.Af--}if(!X){if(!W.zf)return Th(),W=null,!0;X=[];X.index=Uh++;X.mb=[];X.Tb=kh(1,2)}if(!X.Tb){if(Lg){Qh();a=X;var b=Lg,c=Vh([b],[a]);c||b.U.Ob!=a.U.Ob&&(c=Wh([b],[a]));if(!c)return X.length=0,X.Tb=kh(1,2),W.pop(),!0}Mg=X=Lg=null;W.zf--;return!0}if(X.length)return(a=Xh([X],0))?(a.platform=X,X.push(a),X.Tb--):(X.length=0,X.Tb=kh(1,2),W.pop()),!0;if(W.length)return a=W,Mg||(Mg=
{}),(a=Xh(a,0,Mg))?(Lg=a.zd,X.y=Lg.y+5E4*kh(-2,-1,1,2),X.y=Math.min(X.y,-4E5),X.U=W,W.push(X),a.platform=X,X.push(a),X.Tb--):(Mg=X=null,W.zf=0),!0;if(1<V.length){b=[];c=q(V);for(a=c.next();!a.done;a=c.next())b.push.apply(b,da(a.value));Mg||(Mg={});(a=Xh(b,0,Mg))?(Lg=a.zd,X.y=Lg.y,X.U=W,W.push(X),a.platform=X,X.push(a),X.Tb--):(V.pop(),Qf.pop(),Mg=X=W=null,V.Af=0);return!0}if(1<Nh.length){b=[];c=q(Nh);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length)){var d=q(a);for(a=d.next();!a.done;a=
d.next())b.push.apply(b,da(a.value))}Mg||(Mg={});if(a=Xh(b,6E5,Mg))Lg=a.zd,V.parent=Lg.U.Ob,X.y=Lg.y+5E4*kh(-2,-1,0,0,0,1,2),X.y=Math.min(X.y,-4E5),X.U=W,W.push(X),a.platform=X,X.push(a),X.Tb--;else{for(;;){a=Qf[Qf.length-1];if(a.ma<=Jh)break;b=q(a);for(a=b.next();!a.done;a=b.next())for(c=q(a.value.mb),a=c.next();!a.done;a=c.next())Yh(a.value);Qf.pop()}V=null;Nh.length=0;Kg=Jg;Mg=Lg=X=W=null}return!0}if(Ig.length){b=[];c=q(Ig);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length))for(d=
q(a),a=d.next();!a.done;a=d.next())b.push.apply(b,da(a.value));Mg||(Mg={cmp:function(e,h){return e.dc<h.dc?-1:e.dc>h.dc?1:e.x<h.x?-1:e.x>h.x?1:e.y<h.y?-1:e.y>h.y?1:0}});if(a=Xh(b,0,Mg))Lg=a.zd,X.y=Lg.y+5E4*kh(-2,-1,0,0,0,1,2),X.y=Math.min(X.y,-4E5),X.U=W,W.push(X),a.platform=X,X.push(a),X.Tb--;else{for(;;){a=Qf[Qf.length-1];if(a.ma<=Jh)break;b=q(a);for(a=b.next();!a.done;a=b.next())for(c=q(a.value.mb),a=c.next();!a.done;a=c.next())Yh(a.value);Qf.pop()}V=null;Nh.length=0;Kg=Jg;Mg=Lg=X=W=null}return!0}a=
Xh(null,0);X.y=-4E5;X.U=W;W.push(X);a.platform=X;X.push(a);X.Tb--;return!0}
function Xh(a,b,c){if(c){if(c.di)return ci(c)}else c={};c.cmp||(c.cmp=function(n,r){return n.qd<r.qd?-1:n.qd>r.qd?1:n.dc>r.dc?-1:n.dc<r.dc?1:n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0});c.Bb=5E4*Math.floor(jh(2)+4);c.ze=5E4*Math.floor(jh(2)+4);jh(16)||(c.Bb*=2,c.ze*=2);if(!a)return new wh(-c.Bb,c.Bb,-c.ze,c.ze);c.from=a;c.margin=b;c.Lk=0;for(var d=mh(),e=[],h=q(a),g=h.next();!g.done;g=h.next()){g=g.value;for(var k=[],l=q(g),m=l.next();!m.done;m=l.next())di(m.value,c.Bb,c.ze,b,k);l=d;l=sh(l,new wh(-c.Bb+
1,c.Bb,-c.ze+1,c.ze));k=uh(k,l);k=q(k);for(l=k.next();!l.done;l=k.next())l=l.value,m=void 0,m=new M(l.C,l.m),m.zd=g,m.qd=g.U.Ob.qd,e.push(m),m=new M(l.G-1,l.v-1),m.zd=g,m.qd=g.U.Ob.qd,e.push(m)}if(!e.length)return null;c.di=[];c.di.cmp=c.cmp;b=[];a=q(a);for(d=a.next();!d.done;d=a.next())b.push.apply(b,da(d.value));e=q(e);for(a=e.next();!a.done;a=e.next())a=a.value,a.dc=ei(b,a.x,a.y),Sa(c.di,a);return ci(c)}
function ci(a){var b=a.di[a.Lk++];if(!b)return null;a=new wh(b.x-a.Bb,b.x+a.Bb,b.y-a.ze,b.y+a.ze);a.zd=b.zd;return a}
function Rh(){Og=nh();if(Hg.Zl){for(var a=q(Og),b=a.next();!b.done;b=a.next())b.value.xj();Pg=[];Qg=[];Rg=[];a=q(Nh);for(b=a.next();!b.done;b=a.next()){for(var c=[],d=q(b.value),e=d.next();!e.done;e=d.next()){var h=[];e=q(e.value);for(b=e.next();!b.done;b=e.next())b=b.value,h=h.concat(b),Rg=Rg.concat(Bh(b));c=c.concat(h);Qg=Qg.concat(Bh(h))}Pg=Pg.concat(Bh(c))}for(;Qf.length&&!(Qf[0].ma>=Lh);)Qf.shift(),Rf++;Kh=Lh+1;fi=0}else{b=q(Qf);for(e=b.next();!e.done;e=b.next()){a=e.value;if(a.ma>=Lh)break;
a.kf=!0;e=q(a.qb);for(c=e.next();!c.done;c=e.next())gi(c.value);a=q(a);for(e=a.next();!e.done;e=a.next())for(e=q(e.value.mb),c=e.next();!c.done;c=e.next())c.value.Ai()}a=q(Qf);for(e=a.next();!e.done;e=a.next())if(e=e.value,!(e.ma<=Kh)){if(e.ma>Lh+1)break;e.bound.C-=1E5;e.bound.G+=1E5;e.bound.m-=1E5;e.bound.v+=1E5;c=q(e);for(b=c.next();!b.done;b=c.next())b=b.value,b.y<e.floor&&(e.floor=b.y),b.y>e.ra&&(e.ra=b.y);e.ra+=e.style.height;e.l=e.floor;e.Xb||(e.Xb=e.zc?new G(.8,.8,.8):new G);c=q(e);for(b=c.next();!b.done;b=
c.next())for(b=b.value,b.Sj=[],d=q(b),h=d.next();!h.done;h=d.next()){h=h.value;var g=[];Ch(h,g);Dh(g);b.Sj.push(g);h.z=.5*h.C+.5*h.G;h.x=.5*h.m+.5*h.v;h.y=h.platform.y;h.C<e.bound.C&&(e.bound.C=h.C);h.G>e.bound.G&&(e.bound.G=h.G);h.m<e.bound.m&&(e.bound.m=h.m);h.v>e.bound.v&&(e.bound.v=h.v)}}a=q(Qf);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.ma<=Kh)){if(b.ma>Lh+1)break;e=q(b);for(b=e.next();!b.done;b=e.next())for(c=q(b.value.mb),b=c.next();!b.done;b=c.next())b.value.yi()}a=q(Qf);for(e=a.next();!e.done;e=
a.next())if(e=e.value,!(e.ma<=Kh)){if(e.ma>Lh+1)break;e.ra=e.zc?0:Math.min(-18750,e.ra);c=[];d=q(e);for(b=d.next();!b.done;b=d.next())c.push.apply(c,da(b.value));d=c;d=rh(d,9375,9375);b=[];d=q(d);for(h=d.next();!h.done;h=d.next()){h=h.value;g=b.length;for(var k=0;k<g;k++)b[k].lg(h,b)&&(b.splice(k--,1),g--);b.push(h)}d=b;e.al=[];d=q(d);for(b=d.next();!b.done;b=d.next())h=[],Ch(b.value,h),Dh(h),e.al.push(h);b=c;b=yh(b,1);b=rh(b,9375,9375);b=yh(b,0);e.Tj=[];c=q(b);for(b=c.next();!b.done;b=c.next())d=
[],Ch(b.value,d),Dh(d),e.Tj.push(d)}b=q(Qf);for(e=b.next();!e.done;e=b.next())if(a=e.value,!(a.ma<=Kh)){if(a.ma>Lh+1)break;hi(a);c=a;a=ii(Infinity,c.index,t.g.R.get("HandRail01"),Zg);a.facing=0;a.Ca=2;e=c.style.Lc;c=q(c.gl);for(d=c.next();!d.done;d=c.next())for(d=d.value,h=q(d),g=h.next();!g.done;g=h.next()){g=g.value;var l=[];k=(g.T-g.P)/2E5;for(var m=Math.round(k),n=.5*(k-m);.125>n;)--m,n+=.5;if(!(0>m))for(l.push({Ab:.5,pg:0,length:n}),l.push({Ab:1,pg:0,length:k-2*n}),l.push({Ab:.5,pg:1-n,length:n}),
k=0,m=new M(g.lc(),g.kc()),l=q(l),n=l.next();!n.done;n=l.next()){n=n.value;k+=2E5*n.length;var r=g.vf(k,0),p=[];var u=new gd(m.y,d.y,m.x);kd(u,n.pg,n.Ab);jd(u,e);p.push(u);u=new gd(r.y,d.y,r.x);kd(u,n.pg+n.length,n.Ab);jd(u,e);p.push(u);u=new gd(r.y,d.y+112500,r.x);kd(u,n.pg+n.length,n.Ab-.5);jd(u,e);p.push(u);u=new gd(m.y,d.y+112500,m.x);kd(u,n.pg,n.Ab-.5);jd(u,e);p.push(u);a.Hd.push(p);m=r}}}a=q(Qf);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.ma<=Kh)){if(b.ma>Lh+1)break;e=q(b);for(b=e.next();!b.done;b=
e.next())for(c=q(b.value.mb),b=c.next();!b.done;b=c.next())b.value.vi()}b=q(Qf);for(e=b.next();!e.done;e=b.next())if(a=e.value,!(a.ma<=Kh)){if(a.ma>Lh+1)break;a=q(a.qb);for(e=a.next();!e.done;e=a.next())e.value.stroke()}a=q(Qf);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.ma<=Kh)){if(b.ma>Lh+1)break;e=q(b);for(b=e.next();!b.done;b=e.next())for(c=q(b.value.mb),b=c.next();!b.done;b=c.next())b.value.Zi()}fi++}}
function Vh(a,b){Og=nh();var c=[];c.length=0;for(var d=q(a),e=d.next();!e.done;e=d.next()){var h=e.value,g=q(b);for(e=g.next();!e.done;e=g.next()){var k=e.value,l=[];if(h.U==k.U&&h.y!=k.y){if(h.Rb){var m=void 0,n=q(h.Rb);for(e=n.next();!e.done;e=n.next())e=e.value,e.target==k&&(m||(m=ji(h)),l.push(ki(h,k,m,e.direction)))}if(k.Rb)for(m=void 0,n=q(k.Rb),e=n.next();!e.done;e=n.next())e=e.value,e.target==h&&(m||(m=ji(k)),l.push(ki(k,h,m,e.direction)));h.Rb||k.Rb||(l.push(li(h,k)),l.push(li(k,h)),!jh(2)&&
l.reverse());c=c.concat(l)}}}d=q(c);for(e=d.next();!e.done;e=d.next())for(e=e.value,lh(e),h=q(e),e=h.next();!e.done;e=h.next())if(e=e.value,mi(e))return e.na.mb.push(e),e;c.length=0;d=q(a);for(e=d.next();!e.done;e=d.next())for(h=e.value,g=q(b),e=g.next();!e.done;e=g.next())e=e.value,h.U!=e.U&&h.y==e.y&&(c=h.U.ma==e.U.ma&&h.U.Ob==e.U.Ob?c.concat(ni(h,e)):c.concat(oi(h,e,112500)));lh(c);d=q(c);for(e=d.next();!e.done;e=d.next())if(e=e.value,mi(e))return e.na.mb.push(e),e.Ra.mb.push(e),e;c.length=0;a=
q(a);for(e=a.next();!e.done;e=a.next())for(d=e.value,h=q(b),e=h.next();!e.done;e=h.next())if(g=e.value,k=[],d.U!=g.U&&d.y!=g.y){if(d.Rb)for(l=void 0,m=q(d.Rb),e=m.next();!e.done;e=m.next())e=e.value,e.target==g&&(l||(l=ji(d)),k.push(ki(d,g,l,e.direction)));if(g.Rb)for(l=void 0,m=q(g.Rb),e=m.next();!e.done;e=m.next())e=e.value,e.target==d&&(l||(l=ji(g)),k.push(ki(g,d,l,e.direction)));d.Rb||g.Rb||(k.push(li(d,g)),k.push(li(g,d)),!jh(2)&&k.reverse());c=c.concat(k)}b=q(c);for(e=b.next();!e.done;e=b.next())for(c=
e.value,lh(c),c=q(c),e=c.next();!e.done;e=c.next())if(a=e.value,mi(a)){a.na.mb.push(a);if(e=a.ck)e=a,h=e.ck,g=[],g.index=Uh++,g.mb=[],g.y=e.Ra.y,g.U=e.na.U,g.U.push(g),h.platform=g,g.push(h),d=e.na.slice(),uh(e.na,[h]),Qh(),h=Vh([g],[e.Ra]),h||(e.na.length=0,e.na.push.apply(e.na,da(d)),e.na.U.pop(),Uh--),e=!h;if(e)a.na.mb.pop();else return a}}
function Wh(a,b){function c(y,x,C){-x.d<=y.P||-x.d>y.T||x.P>=y.d||x.T<y.d||(C=[(new pi).raw(y.d,y.P,-x.d).rotate(C),(new qi).raw(-x.d,-y.d,-x.P).rotate(C)],C.kg=y.source,C.rf=x.source,C.Pa=C[0].T-C[0].P+(C[1].T-C[1].P),14E5>=C.Pa&&Sa(h,C))}function d(y,x,C){y.d!=-x.d||-x.P<=y.P||-x.T>y.T||(C=[(new pi).raw(y.d,y.P,-x.P).rotate(C)],C.kg=y.source,C.rf=x.source,C.Pa=C[0].T-C[0].P,14E5>=C.Pa&&Sa(h,C))}var e=rh(mh(),162500,162500),h=[];h.cmp=function(y,x){return y.Pa<x.Pa?-1:1};var g=[],k=[];a=q(a);for(var l=
a.next();!l.done;l=a.next())g=g.concat(Ih(l.value));b=q(b);for(a=b.next();!a.done;a=b.next())k=k.concat(Ih(a.value));b=[[],[],[],[]];a=[[],[],[],[]];for(l=0;4>l;l++){for(var m=ph(e,l),n=q(g),r=n.next();!r.done;r=n.next()){var p=r.value;r=p.source.source;p=qh(p.x,p.y,l);var u=p.y,z=p.x;p=Ah(p.x,p.y,m);p<=z||(u=new pi(u,z,p),u.source=r,b[l].push(u))}n=q(k);for(r=n.next();!r.done;r=n.next())p=r.value,r=p.source.source,p=qh(p.x,p.y,l),u=p.y,z=p.x,p=Ah(p.x,p.y,m),p<=z||(u=new pi(u,z,p),u.source=r,a[l].push(u))}for(e=
1;4>e;e++){g=void 0;g=(e+1)%4;k=q(b[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=q(a[g]),r=m.next();!r.done;r=m.next())c(l,r.value,e,g);k=q(a[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=q(b[g]),r=m.next();!r.done;r=m.next())c(l,r.value,e,g);g=(e+2)%4;k=q(b[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=q(a[g]),r=m.next();!r.done;r=m.next())d(l,r.value,e,g)}for(b=0;b<h.length;b++){a=h[b];e=a[0];g=a[a.length-1];k=a.kg.platform;l=a.rf.platform;m=Math.min(k.y,l.y);r=Math.max(k.y,
l.y);if(e==g){if(n=25E3*(Math.floor((e.T-e.P-325E3)/5E4)-1),0>n&&(n=0),Math.abs(l.y-k.y)>n){h.splice(b--,1);continue}}else if(n=25E3*(Math.floor((e.T-e.P-325E3)/5E4)-1),0>n&&(n=0),m=Math.max(m,k.y-n),r=Math.min(r,k.y+n),n=25E3*(Math.floor((g.T-g.P-325E3)/5E4)-1),0>n&&(n=0),m=Math.max(m,l.y-n),r=Math.min(r,l.y+n),m>r){h.splice(b--,1);continue}a.y=kh(m,r);a.Rb=[];Math.abs(k.y-a.y)/25E3&&a.Rb.push({direction:(e.xb()+2+3)%4,target:k});Math.abs(l.y-a.y)/25E3&&a.Rb.push({direction:(g.xb()+3)%4,target:l});
a.Rb.length||delete a.Rb}for(b=0;4>b;b++){a=h[b];if(!a)break;g=a.kg.platform;k=a.rf.platform;e=[];Sh.call(e);e.index=Qf.length+Rf;e.Ob=g.U.ma>k.U.ma?g.U.Ob:k.U.Ob;e.Ob.push(e);Qf.push(e);5!=Mh&&0==e.index%5&&(e.zc=!0);e.style={};e.style.height=225E3;5!=Mh&&(e.style.height+=5E4*jh(4));e.style.Lc=e.Ob.Lc;e.zc?(e.style.vc=kh(eh,gh),e.style.Sa=1E5):(e.style.vc=kh(ch,fh,hh),e.style.Sa=e.Ob.Sa);g=[];g.index=Uh++;g.mb=[];g.y=a.y;a.Rb&&(g.Rb=a.Rb);g.U=e;e.push(g);k=q(a);for(l=k.next();!l.done;l=k.next())l=
l.value.kh().expand(162500,162500),l.platform=g,g.push(l);Qh();k=k=void 0;if(g.y==a.rf.platform.y){if(k=Vh([a.kg.platform],[g])){if(k=Vh([g],[a.rf.platform]))return a;a.kg.platform.mb.pop()}}else if(k=Vh([g],[a.rf.platform])){if(k=Vh([a.kg.platform],[g]))return a;a.rf.platform.mb.pop()}Qf.pop();e.Ob.pop()}return!1}
function oi(a,b,c){a.ie=ri(a,c);b.ie=ri(b,c);var d=[],e=[],h=c+37500,g=oh(a.ie,h,0),k=oh(b.ie,-h,0);k=vh(g,k);var l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=0;e=e.concat(k);g=oh(a.ie,0,h);k=oh(b.ie,0,-h);k=vh(g,k);l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=1;e=e.concat(k);g=oh(a.ie,-h,0);k=oh(b.ie,h,0);k=vh(g,k);l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=2;e=e.concat(k);g=oh(a.ie,0,-h);h=oh(b.ie,0,h);h=vh(g,h);k=q(h);for(g=k.next();!g.done;g=k.next())g.value.direction=
3;e=e.concat(h);lh(e);h=new wh(-9375,9375,-c,c);e=q(e);for(g=e.next();!g.done;g=e.next()){g=g.value;k=h.If(g.direction);l=q([{z:g.C,x:g.m},{z:g.G-1,x:g.v-1}]);for(var m=l.next();!m.done;m=l.next())m=m.value,m=k.translate(m.z,m.x),m.y=a.y,m.direction=g.direction,d.push(new si(m,c,a,b))}return d}function ri(a,b){b+=37500;var c=sh(a,new wh(0,1,0,1));a=yh(c,1);a=sh(a,new wh(-b,b,-b,b));uh(c,a);return c}
function ni(a,b){for(var c=[],d=q(a),e=d.next();!e.done;e=d.next())Ch(e.value,c);d=[];c=q(c);for(e=c.next();!e.done;e=c.next()){e=e.value;for(var h=q(b),g=h.next();!g.done;g=h.next())e.Sg(g.value,d)}for(c=[];d.length;){e=d.pop();for(h=0;h<d.length;h++)g=d[h],e.xb()==g.xb()&&e.d==g.d&&(e.T==g.P?(d.splice(h,1),e.T=g.T,h=-1):e.P==g.T&&(d.splice(h,1),e.P=g.P,h=-1));225E3>e.T-e.P||c.push(e)}d=[];c=q(c);for(e=c.next();!e.done;e=c.next())d.push(new ti(e.value,a,b));return d}
function Th(){var a=W;if(!a.zc){for(var b=new wh,c=q(a),d=c.next();!d.done;d=c.next()){var e=q(d.value);for(d=e.next();!d.done;d=e.next())xh(b,d.value)}var h=b.G-b.C-2E5-2E5-30625-30625;d=b.v-b.m-2E5-2E5-30625-30625;c=Math.round(h/625E3);e=Math.round(d/625E3);h=b.C+2E5+30625+.5*(h-625E3*(c-1));b=b.m+2E5+30625+.5*(d-625E3*(e-1));var g=[],k=q(a);for(d=k.next();!d.done;d=k.next())g=g.concat(d.value);g=yh(g,1);g=rh(g,2E5,2E5);for(k=0;k<c;k++){for(var l=b,m={},n=0;n<e;m={nh:m.nh},n++){d=function(p){return function(){for(var u=
q(g),z=u.next();!z.done;z=u.next())if(ui(p.nh,z.value))return!1;return!0}}(m);m.nh=new wh(h-30625,h+30625,l-30625,l+30625);if(d()){var r=q(a);for(d=r.next();!d.done;d=r.next())uh(d.value,[m.nh])}l+=625E3}h+=625E3}}}function li(a,b){for(var c=ji(a),d=[],e=0;4>e;e++)d=d.concat(ki(a,b,c,e));return d}
function ki(a,b,c,d){var e=25E3*Math.ceil(Math.abs(b.y-a.y)/25E3),h=a.U!=b.U?325E3:0,g=function(l,m,n){function r(y){for(var x=0;x<y.length;x++)for(var C=y[x],A=x+1;A<y.length;A++){var D=y[A];if(C.C==D.C&&C.G==D.G){if(D.v==C.m){y.splice(A--,1);C.m=D.m;x--;break}if(D.m==C.v){y.splice(A--,1);C.v=D.v;x--;break}}}y=q(y);for(x=y.next();!x.done;x=y.next())x=x.value,x.m=x.v-1,x.direction=d}var p=yh(l,1);p=sh(p,new wh(-162499,162500,-e-h+1,e+162500+162500));l=p=yh(p,0);p=sh(n,new wh(0,0,-e-h+1,e));p=yh(p,
1);p=sh(p,new wh(-162500,162501,0,0));l=p=vh(l,p);p=yh(m,1);p=sh(p,new wh(-162499,162500,-162499,162500));p=yh(p,0);n=[];m=vh(l,oh(p,0,-e-h-162500));r(m);for(var u=q(m),z=u.next();!z.done;z=u.next())z.value.type=1;n=n.concat(m);if(0!=h){m=vh(l,oh(p,-325E3,-e-162500));r(m);u=q(m);for(z=u.next();!z.done;z=u.next())z.value.type=0;n=n.concat(m);m=vh(l,oh(p,325E3,-e-162500));r(m);l=q(m);for(z=l.next();!z.done;z=l.next())z.value.type=2;n=n.concat(m)}return n}(ph(a,d),ph(b,d),ph(c,d));c=[];g=q(g);for(var k=
g.next();!k.done;k=g.next())c.push(new vi(k.value,e,h,a,b));return c}function ji(a){for(var b=a.slice(),c=q(a.Ze),d=c.next();!d.done;d=c.next())d=d.value,d=d.Fa.platform!=a?d.Fa.platform:d.ka.platform,d.U==a.U&&(b=b.concat(d));return b}
function Qh(){for(var a=[],b=q(Qf),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;d.Ze=[];for(var e=q(d),h=e.next();!h.done;h=e.next())h.value.Ze=[];a=a.concat(d)}}for(b=0;b<a.length;b++)for(c=a[b],d=b+1;d<a.length;d++)if(e=a[d],h=wi(c,e))h.Fa=c,h.ka=e,c.Ze.push(h),e.Ze.push(h),c.platform!=e.platform&&(c.platform.Ze.push(h),e.platform.Ze.push(h))}
function bi(){Og=nh();var a=q(Qf),b=a.next();a:for(;!b.done;b=a.next())if(b=b.value,!b.Nl){b.Nl=!0;b=q(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=q(c.Ze),e=d.next();!e.done;e=d.next())if(e=e.value,e=e.Fa.platform!=c?e.Fa.platform:e.ka.platform,c.U.ma==e.U.ma&&!(c.index<=e.index)&&c.U!=e.U){var h=oi(c,e,87500);lh(h);h=q(h);for(var g=h.next();!g.done;g=h.next())if(g=g.value,mi(g)){g.Vc=!0;c.mb.push(g);e.mb.push(g);continue a}}}}}
function Sh(){this.ma=Jh+1;this.gl=[];this.qb=[];this.pc=[];this.bound=new Gd;this.ra=-Infinity;this.floor=Infinity;this.l=-Infinity;this.ia={};this.ia.va=-2147483648;this.ia.tb=new G(1,1,1);this.ad=0;this.Fb=new G;this.cells=new db(qb)}var Uh=0;
function si(a,b,c,d){this.La=a;this.direction=a.direction;this.a=b;this.na=c;this.Ra=d;this.z=.5*a.C+.5*a.G;this.x=.5*a.m+.5*a.v;this.y=Math.max(c.y,d.y);this.ac=[];this.qf=[];this.kd=[];this.vd=[];this.qb=[];c=new wh(a.C,a.G,a.m,a.v);c.l=a.y;c.u=c.l+225E3;this.kd.push(c);this.qf.push(c);b=new wh(2*-b,2*b,-b,b);b=b.rotate(this.direction);b=b.translate(this.z,this.x);b.u=a.y;b.l=b.u-18750;this.kd.push(b);b=new wh(b.C,b.G,b.m,b.v);b.l=a.y;b.u=b.l+225E3;this.vd.push(b)}f=si.prototype;f.xj=function(){Hg.Nk.push(this.La)};
f.translate=function(a,b){this.z+=a;this.x+=b};
f.vi=function(){if(!this.qb.length){this.Yc=0;var a=new pi(0,0,1);a=a.rotate(this.direction);this.za=new Ac(a.lc()+this.z,a.kc()+this.x,a.Kb()+this.z,a.Jb()+this.x);a=new xi;a.add=!0;a.Sa=0;a.color=Ug;this.Vc?(a.l=this.y+87500,a.u=a.l+125E3):(a.l=this.y,a.u=this.y+225E3);for(var b=[new M(0,-this.a),new M(0,this.a),new M(-9375,this.a),new M(-9375,-this.a)],c=[new M(0,this.a),new M(0,-this.a),new M(9375,-this.a),new M(9375,this.a)],d=0;d<b.length;d++)b[d]=this.za.lb(b[d].x,b[d].y);for(d=0;d<c.length;d++)c[d]=
this.za.lb(c[d].x,c[d].y);a.aa=this.na.U.index;yi(a,b);this.qb.push(a);a=a.da();a.aa=this.Ra.U.index;yi(a,c);this.qb.push(a);this.oc=new vf(new Ac(b[0].x,b[0].y,b[1].x,b[1].y),a.l,a.u);this.Gc=new vf(new Ac(c[0].x,c[0].y,c[1].x,c[1].y),a.l,a.u);this.oc.Xc=this.Gc;this.Gc.Xc=this.oc;this.oc.aa=this.na.U.index;this.Gc.aa=this.Ra.U.index;this.oc.Vc=this.Vc;this.Gc.Vc=this.Vc}};
f.Zi=function(){if(0==this.Yc){for(var a=q(this.qb),b=a.next();!b.done;b=a.next())b.value.stroke();this.Yc=1}1!=this.Yc||this.na.U.ma>Lh+1||this.Ra.U.ma>Lh+1||(this.na.U.pc.push(this.oc),this.Ra.U.pc.push(this.Gc),this.Yc=2)};f.create=function(){if(this.Gi)this.Gi.update();else if(0<this.Yc)if(this.Vc)this.Gi=new zi(this.za,this.y+87500,this.na.U,this.Ra.U);else if(this.na.U.ma!=this.Ra.U.ma||this.na.U.zc!=this.Ra.U.zc)this.Gi=new Ai(this.za,this.y,this.oc,this.Gc,this.na.U,this.Ra.U)};
f.Ai=function(){if(!this.kf){for(var a=q(this.qb),b=a.next();!b.done;b=a.next())gi(b.value);this.kf=!0}};function Yh(a){var b=a.na.mb,c=b.indexOf(a);0>c||b.splice(c,1);b=a.Ra.mb;a=b.indexOf(a);0>a||b.splice(a,1)}f.yi=function(){if(this.Vc){var a=this.y+87500;var b=a+125E3}else a=this.y,b=this.y+225E3;this.na.U.ra=Math.max(this.na.U.ra,b);this.Ra.U.ra=Math.max(this.Ra.U.ra,b);this.na.U.l=Math.min(this.na.U.l,a);this.Ra.U.l=Math.min(this.Ra.U.l,a)};
function ti(a,b,c){var d=.5*(a.T-a.P)-9375,e=a.kh();this.direction=(a.xb()+3)%4;this.a=d;this.La=e;this.na=b;this.Ra=c;this.z=.5*e.C+.5*e.G;this.x=.5*e.m+.5*e.v;this.y=Math.max(b.y,c.y);e.y=this.y;this.ac=[];this.qf=[];this.kd=[];this.vd=[];this.qb=[];a=new wh(e.C,e.G,e.m,e.v);a.l=e.y;a.u=a.l+225E3;this.kd.push(a);this.qf.push(a);d=new wh(-225E3,225E3,-d,d);d=d.rotate(this.direction);d=d.translate(this.z,this.x);d.u=e.y;d.l=d.u-18750;this.kd.push(d);d=new wh(d.C,d.G,d.m,d.v);d.l=e.y;d.u=d.l+225E3;
this.vd.push(d)}f=ti.prototype;f.xj=function(){Hg.Nk.push(this.La)};f.translate=function(a,b){this.z+=a;this.x+=b};
f.vi=function(){if(!this.qb.length){this.Yc=0;var a=new pi(0,0,1);a=a.rotate(this.direction);this.za=new Ac(a.lc()+this.z,a.kc()+this.x,a.Kb()+this.z,a.Jb()+this.x);a=new xi;a.add=!0;a.Sa=0;a.color=Ug;this.Vc?(a.l=this.y+87500,a.u=a.l+125E3):(a.l=this.y,a.u=Math.min(this.na.U.ra,this.Ra.U.ra));for(var b=[new M(0,-this.a),new M(0,this.a),new M(-9375,this.a),new M(-9375,-this.a)],c=[new M(0,this.a),new M(0,-this.a),new M(9375,-this.a),new M(9375,this.a)],d=0;d<b.length;d++)b[d]=this.za.lb(b[d].x,b[d].y);
for(d=0;d<c.length;d++)c[d]=this.za.lb(c[d].x,c[d].y);a.aa=this.na.U.index;yi(a,b);this.qb.push(a);a=a.da();a.aa=this.Ra.U.index;yi(a,c);this.qb.push(a);this.oc=new vf(new Ac(b[0].x,b[0].y,b[1].x,b[1].y),a.l,a.u);this.Gc=new vf(new Ac(c[0].x,c[0].y,c[1].x,c[1].y),a.l,a.u);this.oc.Xc=this.Gc;this.Gc.Xc=this.oc;this.oc.aa=this.na.U.index;this.Gc.aa=this.Ra.U.index;this.oc.Vc=this.Vc;this.Gc.Vc=this.Vc}};
f.Zi=function(){if(0==this.Yc){for(var a=q(this.qb),b=a.next();!b.done;b=a.next())b.value.stroke();this.Yc=1}1!=this.Yc||this.na.U.ma>Lh+1||this.Ra.U.ma>Lh+1||(this.na.U.pc.push(this.oc),this.Ra.U.pc.push(this.Gc),this.Yc=2)};f.create=function(){};f.Ai=function(){if(!this.kf){for(var a=q(this.qb),b=a.next();!b.done;b=a.next())gi(b.value);this.kf=!0}};f.yi=function(){};
function vi(a,b,c,d,e){this.La=a;this.direction=a.direction;this.type=a.type;this.Bb=162500;this.Kd=b;this.na=d;this.Ra=e;var h=Math.min(d.y,e.y),g=Math.max(d.y,e.y);this.ac=[];this.qf=[];this.kd=[];this.vd=[];this.qb=[];var k=new wh(-162500,162500,-b,b);k=k.translate(a.C,a.m);k=k.rotate(this.direction);k.l=h-18750;k.u=g;this.ac.push(k);this.qf.push(k);k=new wh(k.C,k.G,k.m,k.v);k.l=h;k.u=g+2E5;this.vd.push(k);k=new wh(-162500,162500,-b-162500-162500,-b);k=k.translate(a.C,a.m);k=k.rotate(this.direction);
k.l=d.y;k.u=g+2E5;this.vd.push(k);k=new wh(k.C,k.G,k.m,k.v);k.l=h-18750;k.u=d.y;this.ac.push(k);this.kd.push(k);if(c){d=new wh(-162500,162500,b,b+c);d=d.translate(a.C,a.m);d=d.rotate(this.direction);d.l=e.y;d.u=g+2E5;this.vd.push(d);d=new wh(d.C,d.G,d.m,d.v);d.l=h-18750;d.u=e.y;this.ac.push(d);this.kd.push(d);this.ck=d;var l;0==this.type?l=new wh(162500,487500,b,b+c):1==this.type?l=new wh(-162500,162500,b+c,b+c+325E3):2==this.type&&(l=new wh(-487500,-162500,b,b+c));l=l.translate(a.C,a.m);l=l.rotate(this.direction);
l.l=e.y;l.u=g+2E5;this.vd.push(l);l=new wh(l.C,l.G,l.m,l.v);l.l=h-18750;l.u=e.y;this.ac.push(l);this.kd.push(l)}else b=new wh(-162500,162500,b,b+162500),b=b.translate(a.C,a.m),b=b.rotate(this.direction),b.l=e.y,b.u=g+2E5,this.vd.push(b),b=new wh(b.C,b.G,b.m,b.v),b.l=h-18750,b.u=e.y,this.ac.push(b),this.kd.push(b)}f=vi.prototype;
f.xj=function(){var a=(this.Ra.y-this.na.y)/25E3;if(this.Ra.y>this.na.y)for(var b=0;b<=a;b++){var c=new pi(this.La.m-this.Kd+5E4*b,this.La.C-this.Bb,this.La.C+this.Bb);c=c.rotate(this.direction);c.y=this.na.y+25E3*b;Hg.zl.push(c)}else for(a=-a,b=0;b<=a;b++)c=new pi(this.La.m-this.Kd+5E4*b,this.La.C-this.Bb,this.La.C+this.Bb),c=c.rotate(this.direction),c.y=this.na.y-25E3*b,Hg.zl.push(c)};
f.translate=function(a,b){this.z+=a;this.x+=b;this.La=this.La.rotate(this.direction);this.La.C+=a;this.La.G+=a;this.La.m+=b;this.La.v+=b;this.La=this.La.If(this.direction);this.ac[0].C+=a;this.ac[0].G+=a;this.ac[0].m+=b;this.ac[0].v+=b};
f.vi=function(){if(!this.qb.length){this.Yc=0;var a=this.na.U,b=(this.Ra.y-this.na.y)/25E3,c=function(h){return 1!=h.Bh?!1:!0};if(this.Ra.y>this.na.y)for(c=0;c<b;c++){var d=new wh(this.La.C-this.Bb,this.La.C+this.Bb,this.La.m-this.Kd+5E4*c,this.La.m-this.Kd+5E4*(c+1));d=d.rotate(this.direction);d=[new M(d.C,d.m),new M(d.G,d.m),new M(d.G,d.v),new M(d.C,d.v)];a=new xi;a.add=!1;a.aa=this.na.U.index;a.Sa=0;a.color=Ug;a.l=this.na.y;a.u=this.na.y+25E3*(c+1);yi(a,d);this.qb.push(a)}else for(b=-b,d=new xi,
d.add=!0,d.Bh=1,d.aa=this.na.U.index,d.Tg=c,d.vc=a.style.vc,d.Sa=a.style.Sa,d.Te=a.l,d.color=a.style.Lc,d.l=this.Ra.y,d.u=this.na.y,a=this.ac[0],yi(d,[new M(a.C,a.m),new M(a.G,a.m),new M(a.G,a.v),new M(a.C,a.v)]),this.qb.push(d),d=0;d<b;d++){a=new wh(this.La.C-this.Bb,this.La.C+this.Bb,this.La.m-this.Kd+5E4*d,this.La.m-this.Kd+5E4*(d+1));a=a.rotate(this.direction);a=[new M(a.C,a.m),new M(a.G,a.m),new M(a.G,a.v),new M(a.C,a.v)];var e=new xi;e.add=!1;e.aa=this.na.U.index;e.Tg=c;e.Sa=0;e.color=Ug;e.l=
this.Ra.y;e.u=this.na.y-25E3*d;yi(e,a);this.qb.push(e)}}};f.Zi=function(){if(0==this.Yc){for(var a=q(this.qb),b=a.next();!b.done;b=a.next())b.value.stroke();this.Yc=2}};f.create=function(){};f.Ai=function(){if(!this.kf){for(var a=q(this.qb),b=a.next();!b.done;b=a.next())gi(b.value);this.kf=!0}};f.yi=function(){this.na.U.l=Math.min(this.na.U.l,this.Ra.y);this.Ra.U.l=Math.min(this.Ra.U.l,this.na.y)};
function Bi(a,b){for(var c=q(a.kd),d=c.next();!d.done;d=c.next()){var e=d.value,h=q(b.qf);for(d=h.next();!d.done;d=h.next())if(Ci(e,d.value))return!1}c=q(a.qf);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=q(b.kd),d=h.next();!d.done;d=h.next())if(Ci(e,d.value))return!1;c=q(a.vd);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=q(b.ac),d=h.next();!d.done;d=h.next())if(Ci(e,d.value))return!1;a=q(a.ac);for(d=a.next();!d.done;d=a.next())for(c=d.value,e=q(b.vd),d=e.next();!d.done;d=e.next())if(Ci(c,
d.value))return!1;return!0}function mi(a){for(var b=q(Og),c=b.next();!c.done;c=b.next())if(!Bi(a,c.value))return!1;return!0}
function hi(a){function b(k){return k.add&&k.aa==this.aa?!0:!1}0>a.style.Sa&&(a.style.Sa+=a.ra-a.floor);for(var c=q(a.Tj),d=c.next();!d.done;d=c.next()){d=d.value;var e=new xi;e.add=!0;e.Bh=1;e.aa=a.index;e.Sa=a.style.Sa;e.color=a.style.Lc;e.vc=a.style.vc;e.Te=a.l;e.l=a.l;e.u=a.ra;yi(e,Wc(d));a.qb.push(e);a.zc&&(e.ra=null)}if(a.bl)for(c=q(a.bl),d=c.next();!d.done;d=c.next())d=d.value,e=new xi,e.add=!0,e.Bh=1,e.aa=a.index,e.Sa=a.style.Sa,e.color=a.style.Lc,e.vc=a.style.vc,e.Te=a.l,e.l=a.l,e.u=a.ra,
yi(e,Wc(d)),a.qb.push(e);c=q(a);for(d=c.next();!d.done;d=c.next())if(e=d.value,!(e.y<=a.l)){var h=q(e.Sj);for(d=h.next();!d.done;d=h.next()){d=d.value;var g=new xi;g.add=!1;g.Bh=1;g.aa=a.index;g.Tg=b;g.Sa=a.style.Sa;g.color=a.style.Lc;g.vc=a.style.vc;g.Te=a.floor;g.l=a.l;g.u=e.y;yi(g,Wc(d));a.qb.push(g)}}};function wh(a,b,c,d){a=void 0===a?NaN:a;b=void 0===b?NaN:b;c=void 0===c?NaN:c;d=void 0===d?NaN:d;this.C=a;this.G=b;this.m=c;this.v=d}f=wh.prototype;f.Ee=function(a,b){return a<=this.C||a>=this.G||b<=this.m||b>=this.v?!1:!0};f.Cf=function(a,b){a<this.C?a=this.C:a>this.G&&(a=this.G);b<this.m?b=this.m:b>this.v&&(b=this.v);return new M(a,b)};function Di(a,b,c){var d=0;b<a.C?d+=a.C-b:b>a.G&&(d+=b-a.G);c<a.m?d+=a.m-c:c>a.v&&(d+=c-a.v);return d}
function Fh(a,b,c){b>=a.C||(a.C=b);b<=a.G||(a.G=b);c>=a.m||(a.m=c);c<=a.v||(a.v=c)}function xh(a,b){b.C>=a.C||(a.C=b.C);b.G<=a.G||(a.G=b.G);b.m>=a.m||(a.m=b.m);b.v<=a.v||(a.v=b.v)}f.dc=function(a,b){a-=.5*this.G+.5*this.C;b-=.5*this.v+.5*this.m;return 1E5/Math.sqrt(a*a+b*b)};f.expand=function(a,b){return this.da(this.C-a,this.G+a,this.m-b,this.v+b)};
function Ch(a,b){var c=new pi(a.m,a.C,a.G);c.source=a;b.push(c);c=new Ei(a.G,a.m,a.v);c.source=a;b.push(c);c=new Fi(a.v,a.G,a.C);c.source=a;b.push(c);c=new qi(a.C,a.v,a.m);c.source=a;b.push(c)}
function di(a,b,c,d,e){var h=new wh(a.G+b+d,a.G+b+d,Math.min(a.m+c,a.v-c)-d,Math.max(a.m+c,a.v-c)+d);h.G+=1;h.v+=1;e.push(h);h=new wh(Math.min(a.C+b,a.G-b)-d,Math.max(a.C+b,a.G-b)+d,a.v+c,a.v+c+d);h.G+=1;h.v+=1;e.push(h);h=new wh(a.C-b-d,a.C-b-d,Math.min(a.m+c,a.v-c)-d,Math.max(a.m+c,a.v-c)+d);h.G+=1;h.v+=1;e.push(h);h=new wh(Math.min(a.C+b,a.G-b)-d,Math.max(a.C+b,a.G-b)+d,a.m-c-d,a.m-c-d);h.G+=1;h.v+=1;e.push(h)}
f.da=function(a,b,c,d){a=new wh(a,b,c,d);this.Hj&&(a.Hj=this.Hj);this.platform&&(a.platform=this.platform);this.U&&(a.U=this.U);void 0!==this.direction&&(a.direction=this.direction);void 0!==this.type&&(a.type=this.type);return a};
f.lg=function(a,b){if(!ui(this,a))return!1;var c=this.m,d=this.v;this.v>a.v&&(b.push(this.da(this.C,this.G,a.v,this.v)),d=a.v);this.m<a.m&&(b.push(this.da(this.C,this.G,this.m,a.m)),c=a.m);this.G>a.G&&b.push(this.da(a.G,this.G,c,d));this.C<a.C&&b.push(this.da(this.C,a.C,c,d));return!0};f.Sg=function(a,b){a=this.da(Math.max(this.C,a.C),Math.min(this.G,a.G),Math.max(this.m,a.m),Math.min(this.v,a.v));a.G<=a.C||a.v<=a.m||b.push(a)};function th(a,b){return a.da(a.C+b.C,a.G+b.G,a.m+b.m,a.v+b.v)}
f.rotate=function(a){switch(a){case 0:return this.da(this.C,this.G,this.m,this.v);case 1:return this.da(-this.v,-this.m,this.C,this.G);case 2:return this.da(-this.G,-this.C,-this.v,-this.m);case 3:return this.da(this.m,this.v,-this.G,-this.C)}};f.If=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return this.da(this.C+a,this.G+a,this.m+b,this.v+b)};function wi(a,b){a=new wh(Math.max(a.C,b.C),Math.min(a.G,b.G),Math.max(a.m,b.m),Math.min(a.v,b.v));return a.G<a.C||a.v<a.m?null:a}
function ui(a,b){return a.C>=b.G||a.G<=b.C||a.m>=b.v||a.v<=b.m?!1:!0}function Ci(a,b){return!ui(a,b)||a.l>=b.u||a.u<=b.l?!1:!0}function ei(a,b,c){var d=0;a=q(a);for(var e=a.next();!e.done;e=a.next())d+=e.value.dc(b,c);return d}function pi(a,b,c){this.d=a;this.P=b;this.T=c}function Ei(a,b,c){this.d=-a;this.P=b;this.T=c}function Fi(a,b,c){this.d=-a;this.P=-b;this.T=-c}function qi(a,b,c){this.d=a;this.P=-b;this.T=-c}f=pi.prototype;f.xb=function(){return 0};f.lc=function(){return this.P};f.kc=function(){return this.d};
f.Kb=function(){return this.T};f.Jb=function(){return this.d};f.raw=function(a,b,c){this.d=a;this.P=b;this.T=c;return this};f.hf=function(){return new Ac(this.lc(),this.kc(),this.Kb(),this.Jb())};f.da=function(a,b,c){a=new pi(a,b,c);a.source=this.source;return a};f.Fh=function(a,b,c){if(!this.ih){var d=new M(this.P+a,this.d-b);d.source=this;c.push(d)}this.Jg||(a=new M(this.T-a,this.d-b),a.source=this,c.push(a))};f.vf=function(a,b){return new M(this.P+a,this.d+b)};
f.Ee=function(a,b){return b>this.d||b<this.d||a<this.P||a>=this.T?!1:!0};f.Cf=function(a){return a<this.P?new M(this.P,this.d):a>this.T?new M(this.T,this.d):new M(a,this.d)};f.lg=function(a,b){if(this.d>a.v||this.d<=a.m||this.P>=a.G||this.T<=a.C)return!1;this.P<a.C&&b.push(this.da(this.d,this.P,a.C));this.T>a.G&&b.push(this.da(this.d,a.G,this.T));return!0};f.Sg=function(a,b){this.d>a.v||this.d<=a.m||this.P>=a.G||this.T<=a.C||b.push(this.da(this.d,Math.max(this.P,a.C),Math.min(this.T,a.G)))};
f.kh=function(){return new wh(this.P,this.T,this.d,this.d)};f.rotate=function(a){switch(a){case 0:return(new pi).raw(this.d,this.P,this.T);case 1:return(new Ei).raw(this.d,this.P,this.T);case 2:return(new Fi).raw(this.d,this.P,this.T);case 3:return(new qi).raw(this.d,this.P,this.T)}};f.If=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new pi).raw(this.d+b,this.P+a,this.T+a)};f=Ei.prototype;f.xb=function(){return 1};f.lc=function(){return-this.d};f.kc=function(){return this.P};
f.Kb=function(){return-this.d};f.Jb=function(){return this.T};f.raw=pi.prototype.raw;f.hf=pi.prototype.hf;f.da=function(a,b,c){a=new Ei(-a,b,c);a.source=this.source;return a};f.Fh=function(a,b,c){if(!this.ih){var d=new M(-this.d+a,this.P+b);d.source=this;c.push(d)}this.Jg||(a=new M(-this.d+a,this.T-b),a.source=this,c.push(a))};f.vf=function(a,b){return new M(-this.d-b,this.P+a)};f.Ee=function(a,b){return a>-this.d||a<-this.d||b<this.P||b>=this.T?!1:!0};
f.Cf=function(a,b){return b<this.P?new M(-this.d,this.P):b>this.T?new M(-this.d,this.T):new M(-this.d,b)};f.lg=function(a,b){if(-this.d>=a.G||-this.d<a.C||this.P>=a.v||this.T<=a.m)return!1;this.P<a.m&&b.push(this.da(this.d,this.P,a.m));this.T>a.v&&b.push(this.da(this.d,a.v,this.T));return!0};f.Sg=function(a,b){-this.d>=a.G||-this.d<a.C||this.P>=a.v||this.T<=a.m||b.push(this.da(this.d,Math.max(this.P,a.m),Math.min(this.T,a.v)))};f.kh=function(){return new wh(-this.d,-this.d,this.P,this.T)};
f.rotate=function(a){switch(a){case 0:return(new Ei).raw(this.d,this.P,this.T);case 1:return(new Fi).raw(this.d,this.P,this.T);case 2:return(new qi).raw(this.d,this.P,this.T);case 3:return(new pi).raw(this.d,this.P,this.T)}};f.If=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Ei).raw(this.d-a,this.P+b,this.T+b)};f=Fi.prototype;f.xb=function(){return 2};f.lc=function(){return-this.P};f.kc=function(){return-this.d};f.Kb=function(){return-this.T};f.Jb=function(){return-this.d};
f.raw=pi.prototype.raw;f.hf=pi.prototype.hf;f.da=function(a,b,c){a=new Fi(-a,-b,-c);a.source=this.source;return a};f.Fh=function(a,b,c){if(!this.ih){var d=new M(-this.P-a,-this.d+b);d.source=this;c.push(d)}this.Jg||(a=new M(-this.T+a,-this.d+b),a.source=this,c.push(a))};f.vf=function(a,b){return new M(-this.P-a,-this.d-b)};f.Ee=function(a,b){return b>-this.d||b<-this.d||a>-this.P||a<=-this.T?!1:!0};f.Cf=function(a){return a<-this.T?new M(-this.T,-this.d):a>-this.P?new M(-this.P,-this.d):new M(a,-this.d)};
f.lg=function(a,b){if(-this.d>=a.v||-this.d<a.m||-this.T>=a.G||-this.P<=a.C)return!1;-this.T<a.C&&b.push(this.da(this.d,-a.C,this.T));-this.P>a.G&&b.push(this.da(this.d,this.P,-a.G));return!0};f.Sg=function(a,b){-this.d>=a.v||-this.d<a.m||-this.T>=a.G||-this.P<=a.C||b.push(this.da(this.d,Math.max(this.P,-a.G),Math.min(this.T,-a.C)))};f.kh=function(){return new wh(-this.T,-this.P,-this.d,-this.d)};
f.rotate=function(a){switch(a){case 0:return(new Fi).raw(this.d,this.P,this.T);case 1:return(new qi).raw(this.d,this.P,this.T);case 2:return(new pi).raw(this.d,this.P,this.T);case 3:return(new Ei).raw(this.d,this.P,this.T)}};f.If=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Fi).raw(this.d-b,this.P-a,this.T-a)};f=qi.prototype;f.xb=function(){return 3};f.lc=function(){return this.d};f.kc=function(){return-this.P};f.Kb=function(){return this.d};f.Jb=function(){return-this.T};
f.raw=pi.prototype.raw;f.hf=pi.prototype.hf;f.da=function(a,b,c){a=new qi(a,-b,-c);a.source=this.source;return a};f.Fh=function(a,b,c){if(!this.ih){var d=new M(this.d-a,-this.P-b);d.source=this;c.push(d)}this.Jg||(a=new M(this.d-a,-this.T+b),a.source=this,c.push(a))};f.vf=function(a,b){return new M(this.d+b,-this.P-a)};f.Ee=function(a,b){return a>this.d||a<this.d||b>-this.P||b<=-this.T?!1:!0};f.Cf=function(a,b){return b<-this.T?new M(this.d,-this.T):b>-this.P?new M(this.d,-this.P):new M(this.d,b)};
f.lg=function(a,b){if(this.d>a.G||this.d<=a.C||-this.T>=a.v||-this.P<=a.m)return!1;-this.T<a.m&&b.push(this.da(this.d,-a.m,this.T));-this.P>a.v&&b.push(this.da(this.d,this.P,-a.v));return!0};f.Sg=function(a,b){this.d>a.G||this.d<=a.C||-this.T>=a.v||-this.P<=a.m||b.push(this.da(this.d,Math.max(this.P,-a.v),Math.min(this.T,-a.m)))};f.kh=function(){return new wh(this.d,this.d,-this.T,-this.P)};
f.rotate=function(a){switch(a){case 0:return(new qi).raw(this.d,this.P,this.T);case 1:return(new pi).raw(this.d,this.P,this.T);case 2:return(new Ei).raw(this.d,this.P,this.T);case 3:return(new Fi).raw(this.d,this.P,this.T)}};f.If=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new qi).raw(this.d+a,this.P-b,this.T-b)};
function Gi(a,b){function c(){for(var n=new db(Bc),r=q(a),p=r.next();!p.done;p=r.next())p=p.value,n.add(p),n.add(p.ca);r=q(a);for(p=r.next();!p.done;p=r.next())if(p=p.value,!p.remove){var u=n.get(p);u!=p&&(p.replace([u]),p.ca.replace([u.ca]))}return n.elements}function d(){for(var n=q(m),r=n.next();!r.done;r=n.next()){r=r.value;var p=r.x&-524288,u=r.y&-524288,z=!1;r.x<=p+256?(r.x=p,z=!0):r.x>=p+524288-256&&(r.x=p+524288,z=!0);r.y<=u+256?(r.y=u,z=!0):r.y>=u+524288-256&&(r.y=u+524288,z=!0);if(z){u=
q(r.inputs);for(p=u.next();!p.done;p=u.next())p.value.Dg=!0;r=q(r.outputs);for(p=r.next();!p.done;p=r.next())p.value.Dg=!0}}}function e(n,r,p){var u=L(r,n.i,n.f),z=L(r,n.B,n.A),y=L(n,r.i,r.f),x=L(n,r.B,r.A);if(-256>y&&256<x&&(-256>u&&256<z||256<u&&-256>z)||256<y&&-256>x&&(-256>u&&256<z||256<u&&-256>z)){u/=u-z;z=1-u;x=new M(Math.round(n.i*z+n.B*u),Math.round(n.f*z+n.A*u));u=n.ab(n.i,n.f,x.x,x.y);z=n.ab(x.x,x.y,n.B,n.A);y=r.ab(r.i,r.f,x.x,x.y);x=r.ab(x.x,x.y,r.B,r.A);var C=Uc(u),A=Uc(z),D=Uc(y),I=Uc(x);
n.replace([u,z]);n.ca.replace([A,C]);r.replace([y,x]);r.ca.replace([I,D]);p.push(u,z,y,x);p.push(C,A,D,I);n=!0}else n=!1;return n}function h(n,r){if(!n.remove){for(var p=q(m),u=p.next();!u.done;u=p.next())if(u=u.value,u.x!=n.i||u.y!=n.f)if(u.x!=n.B||u.y!=n.A){var z=n.vf(u.x,u.y);if(!(0>=z.x||z.x>=n.length||-256>z.y||256<z.y)){p=n.ab(n.i,n.f,u.x,u.y);u=n.ab(u.x,u.y,n.B,n.A);z=n.ab(p.B,p.A,p.i,p.f);var y=n.ab(u.B,u.A,u.i,u.f);p.ca=z;z.ca=p;u.ca=y;y.ca=u;n.replace([p,u]);n.ca.replace([y,z]);h(p,r);h(u,
r);h(z,r);h(y,r);return}}r.push(n)}}for(var g=[],k=q(a),l=k.next();!l.done;l=k.next())l=l.value,l.remove||g.push(l);a=g;a=c();b&&(a=Hi(null,a,e));var m=new db(md);b=q(a);for(l=b.next();!l.done;l=b.next())g=l.value,k=new M(g.i,g.f),k.inputs=[],k.outputs=[],k.a=1,g.Fa=m.Ea(k),g.Fa.outputs.push(g),g.Fa.a++,k=new M(g.B,g.A),k.inputs=[],k.outputs=[],k.a=1,g.ka=m.Ea(k),g.ka.inputs.push(g),g.ka.a++;m=m.elements;d();m=Hi(null,m,function(n,r,p){if(256>(Math.abs(r.x-n.x)+Math.abs(r.y-n.y))*Math.SQRT1_2){var u=
new M(n.x*n.a+r.x*r.a,n.y*n.a+r.y*r.a);u.a=n.a+r.a;u.x/=u.a;u.y/=u.a;u.round();u.inputs=n.inputs.concat(r.inputs);u.outputs=n.outputs.concat(r.outputs);n=q(u.inputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.ka=u,r.Dg=!0;n=q(u.outputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.Fa=u,r.Dg=!0;p.push(u);p=!0}else p=!1;return p});d();for(b=0;b<a.length;b++)g=a[b],g.remove?a.splice(b--,1):g.Fa==g.ka?(g.replace([]),g.ca.replace([]),a.splice(b--,1)):g.Dg&&(k=g.ab(g.Fa.x,g.Fa.y,g.ka.x,g.ka.y),l=Uc(k),
g.replace([k]),g.ca.replace([l]),a.splice(b++,1,k,l)),delete g.Fa,delete g.ka,delete g.Dg;(function(){for(var n=[],r=q(a),p=r.next();!p.done;p=r.next())h(p.value,n);a=n})();return a=c()}
function Hi(a,b,c){var d=[];if(a)for(var e=0;e<a.length;e++){var h=a[e];if(h.remove)a.splice(e--,1);else for(var g=0;g<b.length;g++){var k=b[g];if(k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);a.splice(e--,1);break}}}for(e=0;e<b.length;e++)if(h=b[e],h.remove)b.splice(e--,1);else for(g=e+1;g<b.length;g++)if(k=b[g],k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);b.splice(e--,1);break}a&&(b=a.concat(b));return d.length?Hi(b,d,c):b};var Ii,Ji,Ki,Li,Mi=0;
function Ni(){function a(c){function d(x,C,A){return qh(C,A,x.xb()).y>=x.d}function e(x){x.Pa=0;var C=x.i,A=x.f;if(1==x.action)if(x.ob.length){var D=x.ob[0],I=D.lc()-C;D=D.kc()-A;x.Pa+=Math.sqrt(I*I+D*D);I=q(x.ob);for(D=I.next();!D.done;D=I.next())A=D.value,x.Pa+=A.T-A.P,C=A.Kb(),A=A.Jb()}else I=x.Z.Kb(),D=x.Z.Jb(),C=I-C,A=D-A,x.Pa+=Math.sqrt(C*C+A*A),C=I,A=D;else if(2==x.action)if(x.ob.length)for(D=x.ob[0],I=D.Kb()-C,D=D.Jb()-A,x.Pa+=Math.sqrt(I*I+D*D),I=q(x.ob),D=I.next();!D.done;D=I.next())A=D.value,
x.Pa+=A.T-A.P,C=A.lc(),A=A.kc();else I=x.Z.Kb(),D=x.Z.Jb(),C=I-C,A=D-A,x.Pa+=Math.sqrt(C*C+A*A),C=I,A=D;C=x.B-C;A=x.A-A;x.Pa+=Math.sqrt(C*C+A*A)}function h(x){x.ec=0;for(var C=q(x),A=C.next();!A.done;A=C.next())A=A.value,x.ec=A.complete?x.ec+.5*A.Pa:x.ec+A.Pa}for(var g=null,k=0,l=0;l<c.length;l++)if(!c[l].complete){k=l;g=c[l];break}if(!g)return!0;if(1==g.action){g.Z=g.Z.next;l=g.Z.Kb();var m=g.Z.Jb();if(l==g.i&&m==g.f||l==g.B&&m==g.A)return!1;for(var n=g.Z,r=g.Z.next;0<k;){var p=c[k-1],u=L(p,l,m);
if(1==p.nb&&0<=u||2==p.nb&&0>=u)p=new Ac(p.i,p.f,g.B,g.A),p.action=g.action,p.complete=g.complete,p.nb=g.nb,p.Z=g.Z,p.ob=g.ob,p.max=p,c=c.slice(),c.splice(--k,2,p),Sa(Ki,c),g=p;else break}p=!d(n,g.B,g.A)&&d(r,g.B,g.A);if(g.ob.length){if(qh(r.Kb(),r.Jb(),n.xb()).y>n.d||p){l=[];m=g.ob[0];m=new Ac(g.i,g.f,m.lc(),m.kc());m.Pa=m.length;m.action=0;m.nb=g.action;l.push(m);m=q(g.ob);for(n=m.next();!n.done;n=m.next())n=n.value,n=new Ac(n.lc(),n.kc(),n.Kb(),n.Jb()),n.Pa=n.length,n.complete=1,n.action=0,n.nb=
g.action,l.push(n);m=g.ob[g.ob.length-1];m=new Ac(m.Kb(),m.Jb(),g.B,g.A);m.Pa=m.length;m.action=0;m.nb=g.nb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(da(l)));e(g);h(c);Sa(Ki,c)==c&&Sa(Ii,c);return!1}g.ob.push(r)}else{u=r.Kb();var z=r.Jb();if(0<=L(g.max,l,m)&&(g.max=new Ac(g.i,g.f,l,m),qh(u,z,n.xb()).y<n.d&&!d(r,g.i,g.f))){if(p)return n=[],r=new Ac(g.i,g.f,l,m),r.Pa=r.length,r.action=0,r.nb=g.action,n.push(r),l=new Ac(l,m,g.B,g.A),l.Pa=l.length,l.action=0,l.nb=g.nb,n.push(l),c=c.slice(),
c.splice.apply(c,[k,1].concat(da(n))),e(g),h(c),Sa(Ki,c)==c&&Sa(Ii,c),!1;g.ob.push(r)}}e(g);h(c);Sa(Ii,c)}else if(2==g.action){g.Z=g.Z.pb;l=g.Z.Kb();m=g.Z.Jb();if(l==g.i&&m==g.f||l==g.B&&m==g.A)return!1;n=g.Z.next;for(r=g.Z;0<k;)if(p=c[k-1],u=L(p,l,m),1==p.nb&&0<=u||2==p.nb&&0>=u)p=new Ac(p.i,p.f,g.B,g.A),p.action=g.action,p.complete=g.complete,p.nb=g.nb,p.Z=g.Z,p.ob=g.ob,p.max=p,c=c.slice(),c.splice(--k,2,p),Sa(Ki,c),g=p;else break;p=!d(n,g.B,g.A)&&d(r,g.B,g.A);if(g.ob.length){if(qh(r.lc(),r.kc(),
n.xb()).y>n.d||p){l=[];m=g.ob[0];m=new Ac(g.i,g.f,m.Kb(),m.Jb());m.Pa=m.length;m.action=0;m.nb=g.action;l.push(m);m=q(g.ob);for(n=m.next();!n.done;n=m.next())n=n.value,n=new Ac(n.Kb(),n.Jb(),n.lc(),n.kc()),n.Pa=n.length,n.complete=1,n.action=0,n.nb=g.action,l.push(n);m=g.ob[g.ob.length-1];m=new Ac(m.lc(),m.kc(),g.B,g.A);m.Pa=m.length;m.action=0;m.nb=g.nb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(da(l)));e(g);h(c);Sa(Ki,c)==c&&Sa(Ii,c);return!1}g.ob.push(r)}else if(u=r.lc(),z=r.kc(),0>=L(g.max,
l,m)&&(g.max=new Ac(g.i,g.f,l,m),qh(u,z,n.xb()).y<n.d&&!d(r,g.i,g.f))){if(p)return n=[],r=new Ac(g.i,g.f,l,m),r.Pa=r.length,r.action=0,r.nb=g.action,n.push(r),l=new Ac(l,m,g.B,g.A),l.Pa=l.length,l.action=0,l.nb=g.nb,n.push(l),c=c.slice(),c.splice.apply(c,[k,1].concat(da(n))),e(g),h(c),Sa(Ki,c)==c&&Sa(Ii,c),!1;g.ob.push(r)}e(g);h(c);Sa(Ii,c)}else{l=[];l.cmp=function(x,C){return x.t<C.t?-1:x.t>C.t?1:x.Ge<C.Ge?-1:x.Ge>C.Ge?1:x.Z.next==C.Z?-x.Ge:x.Z.pb==C.Z?x.Ge:0};m=q(Li);for(n=m.next();!n.done;n=m.next())if(n=
n.value,!n.disabled)if(r=qh(g.i,g.f,n.xb()),p=qh(g.B,g.A,n.xb()),p.y==r.y){if(p.y==n.d){var y=z=void 0;u=void 0;if(p.x>r.x)z=Math.max(r.x,n.P),y=Math.min(p.x,n.T),u=1;else if(p.x<r.x)z=Math.max(p.x,n.P),y=Math.min(r.x,n.T),u=-1;else continue;z>=y||(z=Math.round(.5*z+.5*y),Sa(l,{t:(z-r.x)/(p.x-r.x),Ag:-1,Ge:u,Z:n,x:z,y:n.d}))}}else u=p.x<r.x?-1:1,z=(n.d-r.y)/(p.y-r.y),0>z||1<z||(y=Math.round(r.x+(p.x-r.x)*z),p.y<r.y?y<n.P||y>n.T||Sa(l,{t:z,Ag:0,Ge:u,Z:n,x:y,y:n.d}):p.y>r.y&&!(y<n.P)&&(y>n.T||Sa(l,
{t:z,Ag:1,Ge:u,Z:n,x:y,y:n.d})));m=null;for(n=1;n<l.length;n++)if(r=l[n-1],p=l[n],0==r.Ag&&1==p.Ag&&r.t<p.t){m=r;break}if(!m)return g.complete=1,Sa(Ii,c),!1;l=g.da();l.action=1;l.max=l;l.nb=g.nb;l.Z=m.x==m.Z.T?m.Z:m.Z.pb;l.ob=[];n=c.slice();n[k]=l;n.ec=0;Sa(Ki,n)==n&&Sa(Ii,n);l=g.da();l.action=2;l.max=l;l.nb=g.nb;l.Z=m.x==m.Z.P?m.Z.pb:m.Z;l.ob=[];c=c.slice();c[k]=l;c.ec=0;Sa(Ki,c)==c&&Sa(Ii,c)}return!1}for(;Mi&&Ii.length;){Ji++;Mi--;var b=Ii.shift();if(a(b))return Ii=null,b}if(0==Ii.length)return Ii=
null}
function Oi(a,b,c,d){var e=Li;Li=e;Ki=[];Ki.cmp=function(l,m){if(l.length<m.length)return-1;if(l.length>m.length)return 1;for(var n=0;n<l.length;n++){var r=l[n],p=m[n];if(r.i<p.i)return-1;if(r.i>p.i)return 1;if(r.f<p.f)return-1;if(r.f>p.f)return 1;if(r.B<p.B)return-1;if(r.B>p.B)return 1;if(r.A<p.A)return-1;if(r.A>p.A)return 1;if(r.action<p.action)return-1;if(r.action>p.action)return 1}return 0};a=(new M(a,b)).round();c=(new M(c,d)).round();b=null;var h=NaN,g=q(e.ag);for(d=g.next();!d.done;d=g.next()){d=
d.value;var k=Di(d,a.x,a.y);k>=h||(h=k,b=d)}a=b.Cf(a.x,a.y);b=null;h=NaN;e=q(e.ag);for(d=e.next();!d.done;d=e.next())d=d.value,g=Di(d,c.x,c.y),g>=h||(h=g,b=d);c=b.Cf(c.x,c.y);Ji=0;Ii=[];Ii.cmp=function(l,m){return l.ec<m.ec?-1:1};a=new Ac(a.x,a.y,c.x,c.y);a.Pa=a.length;a.action=0;a=[a];a.ec=0;Sa(Ii,a);return Ni()};var $f,Pi,Qi,Ri,Si=new Ac(0,0,1,0),Ti=4095/741455.429632,Ui=[];Ui.cmp=function(a,b){return a.index-b.index};var Vi=new db(function(a,b){return a.y<b.y?-1:a.y>b.y?1:a.aa<b.aa?-1:a.aa>b.aa?1:a.ba.name<b.ba.name?-1:a.ba.name>b.ba.name?1:ve(a.X,b.X)});function Wi(a,b){return a.y>b.y?-1:a.y<b.y?1:0}function Xi(a,b){a=Se(a.src.aa).Gk;b=Se(b.src.aa).Gk;return a-b}function ii(a,b,c,d){var e=new ag;e.y=a;e.aa=b;e.ba=c;e.X=d;e.Hd=[];return Vi.Ea(e)}var fi=0;
function Yi(){if(0==fi){if(Jh>=Lh+2)var a=!1;else{var b=[ai,Zh,Zh];a=0>Jh?Ph():b[Jh%b.length].call()}return a}if(1==fi){var c=Ui.slice();t.Df();for(var d=q(c),e=d.next();!e.done;e=d.next())e.value.va=t.va;var h=q(c);for(e=h.next();!e.done;e=h.next())for(var g=e.value,k=0;4>k;k++){var l=Zi(g,k);l&&l.va!=t.va&&(l.va=t.va,Sa(Ui,l))}$f=[];fi++;Pi=0;return!0}if(2==fi){var m=Ui[Pi];if(m)return $i(m),Pi++,!0;fi++;Pi=0}if(3==fi){t.Df();Qi=t.va;var n=Ui[Pi];if(n){for(var r=0;4>r;r++){var p=Zi(n,r);if(p&&p.va!=
Qi){var u=n,z=p,y=[];switch(r){case 0:var x=Ye(u.index);var C=x.x+512;for(var A=q(u.ga),D=A.next();!D.done;D=A.next()){var I=D.value;(I.i<=C||I.B<=C)&&y.push(I)}C=x.x-512;var J=q(z.ga);for(D=J.next();!D.done;D=J.next()){var O=D.value;(O.i>=C||O.B>=C)&&y.push(O)}break;case 1:x=Ye(u.index);C=x.y+512;var oa=q(u.ga);for(D=oa.next();!D.done;D=oa.next()){var qa=D.value;(qa.f<=C||qa.A<=C)&&y.push(qa)}C=x.y-512;var ba=q(z.ga);for(D=ba.next();!D.done;D=ba.next()){var ca=D.value;(ca.f>=C||ca.A>=C)&&y.push(ca)}break;
case 2:x=Ye(z.index);C=x.x+512;var Fb=q(z.ga);for(D=Fb.next();!D.done;D=Fb.next()){var hb=D.value;(hb.i<=C||hb.B<=C)&&y.push(hb)}C=x.x-512;var Yb=q(u.ga);for(D=Yb.next();!D.done;D=Yb.next()){var rc=D.value;(rc.i>=C||rc.B>=C)&&y.push(rc)}break;case 3:x=Ye(z.index);C=x.y+512;var Nb=q(z.ga);for(D=Nb.next();!D.done;D=Nb.next()){var sc=D.value;(sc.f<=C||sc.A<=C)&&y.push(sc)}C=x.y-512;var Ca=q(u.ga);for(D=Ca.next();!D.done;D=Ca.next()){var Ib=D.value;(Ib.f>=C||Ib.A>=C)&&y.push(Ib)}}Gi(y,!1)}}n.va=Qi;Pi++;
return!0}fi++;Pi=0}if(4==fi){var wf=Ui[Pi];if(wf)return wf.evaluate(),Pi++,!0;fi++;Pi=0}if(5==fi){var ua=Ui[Pi];if(ua){for(var xf=q(ua.zk),Be=xf.next();!Be.done;Be=xf.next())Be.value.evaluate();Pi++;return!0}fi++;Pi=0}if(6==fi){var yf=Ui[Pi];if(yf)return aj(yf),Pi++,!0;fi++;Pi=0}if(7==fi){var kc=Ui[Pi];if(kc)return bj(kc),Pi++,!0;fi++;Pi=0}if(8==fi)return Zf(),fi++,!0;if(9==fi)return Pe=af(),cj.Ld=new ag,cj.Ld.X=new Pd,cj.Ld.X.name="creaseShading",cj.Ld.X.Ca=1,cj.Ld.X.Ed=new R(0,0,0,127.5),cj.Ld.D=
t.g.qa.get("creaseShading"),dj=0,cj.nf=Array(Te.elements.length),ej=0,fi++,!0;if(10==fi){if(fj())return!0;fi++;return!0}if(11==fi){if(Ri&&0!=t.h%1)return!1;for(;Qf.length&&Qf[0].kf;)Qf.shift(),Rf++;Qe.length=0;Re=Rf;for(var zf=q(Qf),kb=zf.next();!kb.done;kb=zf.next()){var Td=kb.value;if(Td.ma>Lh+1)break;Qe.push(Td)}var Af=q(Qe);for(kb=Af.next();!kb.done;kb=Af.next())for(var Ce=kb.value,Ud=0;Ud<Ce.pc.length;Ud++)Ce.pc[Ud].Xc.aa>=Re||Ce.pc.splice(Ud--,1);for(var Vd=0;Vd<Vi.elements.length;Vd++){var Bf=
Vi.elements[Vd];Bf.aa<Rf&&(Vi.elements.splice(Vd--,1),Bf.gd.parent=null,Kd(Bf.gd))}var De=q(Qe);for(kb=De.next();!kb.done;kb=De.next()){var lb=kb.value;lb.ma<=Kh||(lb.Fb.x/=lb.ad,lb.Fb.y/=lb.ad,lb.Fb.z/=lb.ad,lb.Fb.x/=255,lb.Fb.y/=255,lb.Fb.z/=255)}var Pb=q(Qe);for(kb=Pb.next();!kb.done;kb=Pb.next()){var Cf=kb.value;if(!(Cf.ma<=Kh))for(var ud=q(Cf),bd=ud.next();!bd.done;bd=ud.next())for(var Df=q(bd.value.mb),Jb=Df.next();!Jb.done;Jb=Df.next())Jb.value.create()}of?nf=!0:rf();Kh=Lh+1;for(var Ef=q(t.Wi.elements),
Ee=Ef.next();!Ee.done;Ee=Ef.next())gj(Ee.value);for(var Ff=q(Vi.elements),Gf=Ff.next();!Gf.done;Gf=Ff.next()){var La=Gf.value;if(!La.gd){var Ab=Se(La.aa);if(Ab&&!(Ab.ma>Kh)){var Lc=La;Lc.Gb.cmp=hd;for(var Qb=q(Lc.Hd),bb=Qb.next();!bb.done;bb=Qb.next())for(var wc=bb.value,Wd=0;Wd<wc.length;Wd++)wc[Wd]=Sa(Lc.Gb,wc[Wd]);for(var lc=0;lc<Lc.Gb.length;lc++)Lc.Gb[lc].index=lc;var Hf=q(Lc.Hd);for(bb=Hf.next();!bb.done;bb=Hf.next())for(var vd=bb.value,$b=0;$b<vd.length;$b++)vd[$b]=vd[$b].index;delete Lc.Gb.cmp;
La.compile();delete La.Hd;La.gd=new cg(La,"worldMesh");isNaN(La.facing)||(La.gd.facing=La.facing);La.gd.ia=Ab.ia;La.gd.rh=!0;La.gd.Na=["portalLightIndex",Ab.Me,!0];Infinity!=La.y?(La.gd.y=La.y,T(La.gd,t.Qe)):T(La.gd,t.xk);delete La.y;0==La.facing&&(La.D=t.g.qa.get("physicalThreshold"))}}}fi++;return!0}if(12==fi){for(var ra=[],Mc=q(Qe),xc=Mc.next();!xc.done;xc=Mc.next())for(var Fe=q(xc.value),Nc=Fe.next();!Nc.done;Nc=Fe.next())ra=ra.concat(Nc.value);var Ge=[],Xd=[],Yd=[],If=[],He=q(Qe);for(xc=He.next();!xc.done;xc=
He.next()){var Jf=q(xc.value);for(Nc=Jf.next();!Nc.done;Nc=Jf.next())for(var Zd=q(Nc.value.mb),Kb=Zd.next();!Kb.done;Kb=Zd.next()){var wd=Kb.value;if(wd instanceof vi){if(!Se(wd.na.U.index))continue}else{if(!Se(wd.na.U.index))continue;if(!Se(wd.Ra.U.index))continue}If.push(wd)}}var xd=q(If);for(Kb=xd.next();!Kb.done;Kb=xd.next()){var Y=Kb.value;if(Y instanceof si){if(!Y.Vc){var Ha=new wh(-40675,40675,-Y.a+40675,Y.a-40675);Y.eb=[];var za=new Ei(Ha.C,Ha.m,Ha.v);za=za.rotate(Y.direction);za=za.translate(Y.z,
Y.x);za.source=Ha;Y.eb.push(za);za=new pi(Ha.m,Ha.C,Ha.G);za=za.rotate(Y.direction);za=za.translate(Y.z,Y.x);za.source=Ha;Y.eb.push(za);za=new qi(Ha.G,Ha.v,Ha.m);za=za.rotate(Y.direction);za=za.translate(Y.z,Y.x);za.source=Ha;Y.eb.push(za);za=new Fi(Ha.v,Ha.G,Ha.C);za=za.rotate(Y.direction);za=za.translate(Y.z,Y.x);za.source=Ha;Y.eb.push(za);Ha=Ha.rotate(Y.direction);Ha=Ha.translate(Y.z,Y.x);Ha.Ci=Y;Xd.push(Ha)}}else if(Y instanceof ti){var cd=new wh(-40675,40675,-Y.a+40675,Y.a-40675);cd=cd.rotate(Y.direction);
cd=cd.translate(Y.z,Y.x);Yd.push(cd)}else if(Y instanceof vi){var yd=new wh(-Y.Bb+40675,Y.Bb-40675,-Y.Kd-40675,Y.Kd+40675);yd=yd.translate(Y.La.C,Y.La.m);yd=yd.rotate(Y.direction);Ge.push(yd);var zd=new wh(-Y.Bb,Y.Bb,-Y.Kd,Y.Kd);zd=zd.translate(Y.La.C,Y.La.m);zd=zd.rotate(Y.direction);ra=uh(ra,[zd])}}for(var mc=[],Oc=0;Oc<ra.length;Oc++)for(var Ie=ra[Oc],Je=Oc+1;Je<ra.length;Je++){var Kf=ra[Je];if(Ie.platform.U!=Kf.platform.U||25E3<Math.abs(Kf.platform.y-Ie.platform.y)){var Lf=wi(Ie,Kf);Lf&&mc.push(Lf)}}ra=
yh(ra,1);ra=ra.concat(mc);ra=rh(ra,40675,40675);ra=yh(ra);ra=zh(ra);ra=ra.concat(Ge);ra=ra.concat(Yd);for(var $d=[],ae=q(ra),Rb=ae.next();!Rb.done;Rb=ae.next())Ch(Rb.value,$d);var Pc=q(Xd);for(Rb=Pc.next();!Rb.done;Rb=Pc.next()){var Mf=Rb.value;$d.push(Mf.Ci.eb[1],Mf.Ci.eb[3])}ra=ra.concat(Xd);uh($d,ra);for(var ac=Hh(Eh($d)),be=0,Nf=q(ac),Ke=Nf.next();!Ke.done;Ke=Nf.next())for(var ce=Ke.value,dd=ce[ce.length-1],Ag=q(ce),de=Ag.next();!de.done;de=Ag.next()){var ee=de.value;ee.index=be++;dd.next=ee;
ee.pb=dd;dd=ee}for(var Le=[],nc=q(ac),ed=nc.next();!ed.done;ed=nc.next())Le=Le.concat(ed.value);ac=Le;ac.ag=ra;var Of=q(Xd);for(Rb=Of.next();!Rb.done;Rb=Of.next()){var mb=Rb.value.Ci;mb.jd=[mb.eb[1].pb,mb.eb[1].next,mb.eb[3].pb,mb.eb[3].next];mb.eb[0].pb=mb.jd[0];mb.eb[0].next=mb.jd[3];mb.eb[2].pb=mb.jd[2];mb.eb[2].next=mb.jd[1];ac.push(mb.eb[0]);ac.push(mb.eb[2]);var Za=mb;Za.jd[0]&&Za.jd[1]&&Za.jd[2]&&Za.jd[3]&&(Za.jd[0].next=Za.eb[1],Za.jd[1].pb=Za.eb[1],Za.jd[2].next=Za.eb[3],Za.jd[3].pb=Za.eb[3],
Za.eb[0].disabled=!0,Za.eb[1].disabled=!1,Za.eb[2].disabled=!0,Za.eb[3].disabled=!1,Za.eb[0].y=-5E4,Za.eb[1].y=0,Za.eb[2].y=-5E4,Za.eb[3].y=0)}Li=ac;fi=0}return!1}function hj(a,b){var c=new db(md);a=q(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var e=new db(Vc);e.x=d.i;e.y=d.f;e=c.Ea(e);e.add(d);b&&(d=Uc(d),e=new db(Vc),e.x=d.i,e.y=d.f,e=c.Ea(e),e.add(d))}return c}
function ij(a){var b=[];b.bound=new Jc;var c=0,d=a.elements[c],e=d.elements.pop();d.elements.length||a.elements.splice(c,1);if(!e)return null;for(;;){b.push(e);b.bound.Ea(e.B,e.A);if(e.B==b[0].i&&e.A==b[0].f)return b;c=a.contains(new M(e.B,e.A));if(0>c)return null;d=a.elements[c];e=eb(d,Tc(e))-1;0>e&&(e+=d.elements.length);e=d.elements.splice(e,1)[0];d.elements.length||a.elements.splice(c,1)}}
function jj(a){for(var b=[],c=a[a.length-1],d=0;d<a.length;d++){var e=a[d];b.push(Cc(c,e));c=e}a.si=b;a.dg=[];a.qj=0;b=q(a.si);for(c=b.next();!c.done;c=b.next())c=c.value,0>c?(a.qj-=c,a.dg.push(-c)):a.dg.push(0)}
function kj(a,b){var c=null;b=q(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.m<=d.bound.m||a.bound.l<=d.bound.l||a.bound.v>=d.bound.v||a.bound.u>=d.bound.u)){if(c){if(d.bound.m<=c.bound.m)continue;if(d.bound.l<=c.bound.l)continue;if(d.bound.v>=c.bound.v)continue;if(d.bound.u>=c.bound.u)continue}0>=Gc(a[0].B,a[0].A,d)||(c=d)}c&&c.kb.push(a)}
function lj(a){if(0==a.kb.length)return a;var b=[a].concat(a.kb),c={};c.ec=Number.NEGATIVE_INFINITY;for(var d=0;d<b.length;d++)for(var e=b[d],h=d+1;h<b.length;h++)for(var g=b[h],k=0;k<e.length;k++)for(var l=(k+1)%e.length,m=0;m<g.length;m++)c=mj(e,k,l,g,m,(m+1)%g.length,c,b);if(0>c.ec)return console.log("could not solve holes"),a.kb=[],a;e=c.wd[c.ka].ab(c.wd[c.ka].i,c.wd[c.ka].f,c.Nd[c.d].i,c.Nd[c.d].f);d=e.ab(e.B,e.A,e.i,e.f);e.ca=d;d.ca=e;b=[];for(h=0;h<c.ka;h++)b.push(c.wd[h]);b.push(e);e=c.d;
for(h=0;h<c.Nd.length;h++)b.push(c.Nd[e]),++e==c.Nd.length&&(e=0);b.push(d);for(d=c.ka;d<c.wd.length;d++)b.push(c.wd[d]);if(c.wd==a)return a.kb.splice(a.kb.indexOf(c.Nd),1),b.kb=a.kb,jj(b),lj(b);a.kb.splice(a.kb.indexOf(c.wd),1,b);a.kb.splice(a.kb.indexOf(c.Nd),1);jj(b);return lj(a)}
function mj(a,b,c,d,e,h,g,k){function l(p,u){function z(D,I,J){if(I==D.i&&J==D.f||I==D.B&&J==D.A)return!1;I=D.vf(I,J);return 0>=I.x||I.x>=D.length||-256>I.y||256<I.y?!1:!0}var y=L(u,p.i,p.f),x=L(u,p.B,p.A),C=L(p,u.i,u.f),A=L(p,u.B,u.A);if(-256>C&&256<A&&(-256>y&&256<x||256<y&&-256>x)||256<C&&-256>A&&(-256>y&&256<x||256<y&&-256>x)||z(p,u.i,u.f)||z(p,u.B,u.A)||z(u,p.i,p.f)||z(u,p.B,p.A))return!0}var m=a[c],n=d[h];m=new Ac(m.i,m.f,n.i,n.f);if(0==a.dg[c]){if(0>=L(a[b],m.B,m.A)||0>=L(a[c],m.B,m.A))return g}else if(0>=
L(a[b],m.B,m.A)&&0>=L(a[c],m.B,m.A))return g;if(0==d.dg[h]){if(0>=L(d[e],m.i,m.f)||0>=L(d[h],m.i,m.f))return g}else if(0>=L(d[e],m.i,m.f)&&0>=L(d[h],m.i,m.f))return g;if(k)for(k=q(k),n=k.next();!n.done;n=k.next()){var r=q(n.value);for(n=r.next();!n.done;n=r.next())if(l(m,n.value))return g}else for(k=q(a),n=k.next();!n.done;n=k.next())if(l(m,n.value))return g;k={};k.wd=a;k.Fa=b;k.ka=c;k.Nd=d;k.Ag=e;k.d=h;k.Z=m;nj(k);return k.ec>g.ec?k:g}
function nj(a){a.ec=4095-a.Z.length*Ti;var b=Cc(a.wd[a.Fa],a.Z),c=b-a.wd.si[a.ka],d=Cc(a.Z,a.Nd[a.d]),e=d-a.Nd.si[a.d];a.ec+=.5/Math.PI*(a.wd.dg[a.ka]-(0>b?-b:0)-(0>c?-c:0)+(a.Nd.dg[a.d]-(0>d?-d:0)-(0>e?-e:0)))*1048575}
function oj(a){if(3>a.length)return[];jj(a);if(0>=a.qj)return[a];for(var b={ec:Number.NEGATIVE_INFINITY},c=a.length-1,d=0;d<a.length;d++){for(var e=d+1,h=e+1;h<a.length;h++)b=mj(a,c,d,a,e,h,b),e=h;c=d}if(0>b.ec)return console.log("could not convex path"),[a];h=new pj(a[b.ka].i,a[b.ka].f,a[b.d].i,a[b.d].f);c=new pj(a[b.d].i,a[b.d].f,a[b.ka].i,a[b.ka].f);h.ca=c;c.ca=h;d=[];e=[];for(var g=0;g<b.ka;g++)d.push(a[g]);d.push(h);for(h=b.d;h<a.length;h++)d.push(a[h]);for(h=b.ka;h<b.d;h++)e.push(a[h]);e.push(c);
return oj(d).concat(oj(e))}function qj(a){this.ga=null;this.l=Number.POSITIVE_INFINITY;this.u=Number.NEGATIVE_INFINITY;this.ra=this.floor=null;this.ea=a}qj.prototype.Pf=function(a,b){if(this.u<=a.l||this.l>=a.u)b.push(this);else{if(this.l<a.l){var c=new qj(this.ea);c.l=this.l;c.u=a.l;c.floor=this.floor;c.ra=a.ra;b.push(c)}this.u>a.u&&(c=new qj(this.ea),c.l=a.u,c.u=this.u,c.floor=a.floor,c.ra=this.ra,b.push(c))}};function zg(a,b,c){this.V=a;this.l=b;this.u=c;this.flags=0}
function Bg(a,b){this.ga=a;this.y=b;this.flags=0}function Cg(a,b){this.ga=a;this.y=b;this.flags=0}Bg.prototype.Ng=function(){if(this.ca)return this.ca;this.ca=new Cg(this.ga,this.y);this.ca.flags=this.flags;return this.ca};Cg.prototype.Ng=function(){if(this.ca)return this.ca;this.ca=new Bg(this.ga,this.y);this.ca.flags=this.flags;return this.ca};zg.prototype.Ng=function(){if(this.ca)return this.ca;this.ca=new zg(Uc(this.V),this.l,this.u);this.ca.flags=this.flags;return this.ca};function Xe(a){this.index=a;this.mh=this.va=-2147483648;this.Fk=new gb(this);this.$c=new db(qb);this.fd=[];this.Yh=new fb}function Zi(a,b){a=Ze(a.index);switch(b){case 0:if(0==a.x)break;return Te.get($e(a.x-1,a.y));case 1:if(0==a.y)break;return Te.get($e(a.x,a.y-1));case 2:if(8191==a.x)break;return Te.get($e(a.x+1,a.y));case 3:if(8191!=a.y)return Te.get($e(a.x,a.y+1))}return null}
function $i(a){function b(g,k){return g.ea.index<k.ea.index?-1:g.ea.index>k.ea.index?1:0}a.zk=[];a.ga=[];for(var c=q(a.$c.elements),d=c.next();!d.done;d=c.next()){d=q(d.value.ga);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=e.da();Uc(h);e.hh&&(h.Yb=[e]);h.Md=[a.ga];a.ga.push(h)}}Gi(a.ga.slice(),!0);a=q(a.ga);for(e=a.next();!e.done;e=a.next())c=e.value,c.Yb&&yb(c.Yb,b),c.ca.Yb&&yb(c.ca.Yb,b)}
Xe.prototype.evaluate=function(){this.Xi=[];this.Yi=[];for(var a=hj(this.ga,!0),b=[],c=[];a.elements.length;){var d=ij(a);d&&(Fc(d)?c.push(d):(d.kb=[],b.push(d)))}a=q(c);for(c=a.next();!c.done;c=a.next())kj(c.value,b);a=[];b=q(b);for(c=b.next();!c.done;c=b.next())if(d=c.value,0==d.kb.length)a.push(d);else{jj(d);var e=q(d.kb);for(c=e.next();!c.done;c=e.next())jj(c.value);a.push(lj(d))}b=[];a=q(a);for(c=a.next();!c.done;c=a.next())b=b.concat(oj(c.value));a=q(b);for(c=a.next();!c.done;c=a.next())this.zk.push(new uj(c.value,
this))};
function aj(a){function b(z,y){return z.nd<y.nd?-1:z.nd>y.nd?1:z.ea.aa<y.ea.aa?-1:z.ea.aa>y.ea.aa?1:vj(z.Y,y.Y)}function c(z,y){var x=fc(1/60);var C=-1;for(var A=1;A<z.length;A++){var D=Math.abs(Cc(z[A-1].V,z[A].V));D<x&&(x=D,C=A)}if(0>C)y.push.apply(y,da(z));else{x=z[C-1];A=z[C];D=x.V.ab(x.V.i,x.V.f,A.V.B,A.V.A);var I=Uc(D);x.cd&&(0>x.cd.nd?x.cd.splice(x.cd.indexOf(x.V),2,D):x.cd.splice(x.cd.indexOf(A.V.ca),2,I));x.Wc&&(0<x.Wc.nd?x.Wc.splice(x.Wc.indexOf(x.V),2,D):x.Wc.splice(x.Wc.indexOf(A.V.ca),2,
I));x.V=D;z.splice(C,1);c(z,y)}}function d(z){var y=fc(1/60);var x=-1;for(var C=1;C<z.length;C++){var A=Math.abs(Cc(z[C-1],z[C]));A<y&&(y=A,x=C)}if(!(0>x)){y=z[x-1];C=z[x];A=y.ab(y.i,y.f,C.B,C.A);var D=Uc(A);A.Tc=y.Tc;y.Tc.splice(y.Tc.indexOf(y),2,A);C.ca&&(D.Tc=C.ca.Tc,C.ca.Tc.splice(C.ca.Tc.indexOf(C.ca),2,D));z.splice(x-1,2,A);d(z)}}for(var e=0,h=new db(function(z,y){return z.y<y.y?-1:z.y>y.y?1:0}),g=q(a.Xi),k=g.next();!k.done;k=g.next()){var l=k.value,m=new db(b);m.y=l.y;m=h.Ea(m);k=[];k.nd=l.nd;
k.ea=l.ea;k.Y=l.Y;k=m.Ea(k);k.push(l)}g=q(h.elements);for(l=g.next();!l.done;l=g.next()){l=l.value;m=q(l.elements);for(k=m.next();!k.done;k=m.next()){var n=k.value,r=new db(Bc),p=q(n);for(k=p.next();!k.done;k=p.next()){var u=q(k.value);for(k=u.next();!k.done;k=u.next())k=k.value,r.remove(Tc(k))||r.push(k)}n.length=0;for(r=hj(r.elements);r.elements.length;){p=ij(r);if(!p)break;p.y=l.y;p.nd=n.nd;p.ea=n.ea;p.Y=n.Y;p.index=e++;u=q(p);for(k=u.next();!k.done;k=u.next())k.value.Tc=p;n.push(p)}}l.Di=new db(Bc);
m=q(l.elements);for(k=m.next();!k.done;k=m.next())for(n=q(k.value),k=n.next();!k.done;k=n.next())for(r=q(k.value),k=r.next();!k.done;k=r.next())k=k.value,(p=l.Di.remove(Tc(k)))?(k.ca=p,p.ca=k):l.Di.push(k)}e=q(a.Yi);for(g=e.next();!g.done;g=e.next())g=g.value,l=function(z,y){y=h.get({y:y});if(!y)return null;y=y.Di.remove(z);if(!y)return null;y.Tc.splice(y.Tc.indexOf(y),1,z);return y.Tc},m=g.V,k=Uc(m),g.Wc=l(m,g.l)||l(k,g.l),g.cd=l(m,g.u)||l(k,g.u);g=function(z){var y=[],x=new db(function(I,J){I=I[0];
J=J[0];if(I.l<J.l)return-1;if(I.l>J.l)return 1;if(I.u<J.u)return-1;if(I.u>J.u)return 1;if(I.Wc)if(J.Wc){if(I.Wc.index<J.Wc.index)return-1;if(I.Wc.index>J.Wc.index)return 1}else return 1;else if(J.Wc)return-1;if(I.cd)if(J.cd){if(I.cd.index<J.cd.index)return-1;if(I.cd.index>J.cd.index)return 1}else return 1;else if(J.cd)return-1;if(I.length<J.length)return-1;if(I.length>J.length)return 1;for(var O=0;O<I.length;O++){var oa=I[O],qa=J[O];if(oa.l<qa.l)return-1;if(oa.l>qa.l)return 1;if(oa.u<qa.u)return-1;
if(oa.u>qa.u)return 1;oa=vj(oa.Y,qa.Y);if(0!=oa)return oa}return 0});z=q(z);for(var C=z.next();!C.done;C=z.next()){C=C.value;var A=[C],D=x.Ea(A);D!=A&&D.push(C)}z={};x=q(x.elements);for(C=x.next();!C.done;z={Be:z.Be},C=x.next())for(z.Be=C.value,C={};z.Be.length;)C.rg=function(I,J){return function(O,oa,qa){for(var ba=0;ba<I.Be.length;ba++){var ca=I.Be[ba];if(ca.V.i==qa.B&&ca.V.f==qa.A)return I.Be.splice(ba,1),O.push(ca),ca.V.ld=O,ca.V.ca.ld=O,J.rg(O,oa,ca.V);if(ca.V.B==oa.i&&ca.V.A==oa.f)return I.Be.splice(ba,
1),O.unshift(ca),ca.V.ld=O,ca.V.ca.ld=O,J.rg(O,ca.V,qa)}return O}}(z,C),A=z.Be.shift(),D=[A],A.V.ld=D,A.V.ca.ld=D,y.push(C.rg(D,A.V,A.V)),C={rg:C.rg};return y}(a.Yi);e=function(){for(var z=[],y=q(h.elements),x=y.next();!x.done;x=y.next()){x=q(x.value.elements);for(var C=x.next();!C.done;C=x.next()){C=q(C.value);for(var A=C.next();!A.done;A=C.next()){A=A.value;for(var D=function(ba,ca){return ba.ld||ca.ld?!1:ba.ca?ca.ca?ba.ca.Tc==ca.ca.Tc:!1:ca.ca?!1:!0},I=0,J=A[A.length-1],O=A[0];I<A.length&&(O=A[I],
D(J,O));I++,J=O);if(I==A.length){D=[];J=q(A);for(A=J.next();!A.done;A=J.next())A=A.value,A.ld=D,A.ca&&(A.ca.ld=D),D.push(A);z.push(D)}else{A.unshift.apply(A,da(A.splice(I)));I=[];var oa=null;J=A[0];I.push(oa=[]);oa.push(J);for(var qa=1;qa<A.length;qa++,J=O)O=A[qa],D(J,O)||I.push(oa=[]),oa.push(O);D=q(I);for(A=D.next();!A.done;A=D.next())if(J=A.value,!J[0].ld){O=q(J);for(A=O.next();!A.done;A=O.next())A=A.value,A.ld=J,A.ca&&(A.ca.ld=J);z.push(J)}}}}}return z}();a.pk=[];l=q(g);for(g=l.next();!g.done;g=
l.next())c(g.value,a.pk);a.nk=[];e=q(e);for(g=e.next();!g.done;g=e.next())d(g.value);e=q(h.elements);for(l=e.next();!l.done;l=e.next())for(g=q(l.value.elements),k=g.next();!k.done;k=g.next())for(l=q(k.value),k=l.next();!k.done;k=l.next())m=k.value,m.rk=oj(m),a.nk.push(m)}
function bj(a){function b(r,p,u){var z=[],y=new Bg(p,r.y);y.flags|=wj;y.aa=r.ea.aa;h.push(y);if((y=Qf[u.aa-Rf])&&!(y.ma<=Kh||y.ma>Lh+1)){for(y=0;y<p.length;y++){var x=new gd(p[y].f,r.y,p[y].i);jd(x,r.Y.color);kd(x,x.z/4E5,x.x/4E5);x.Cc=32767;z.push(x)}u.Hd.push(z);$f.push(z);e(Qf[r.ea.aa-Rf],z,r.Y)}}function c(r,p,u){var z=[],y=new Cg(p,r.y);y.flags|=wj;y.aa=r.ea.aa;h.push(y);if((y=Qf[u.aa-Rf])&&!(y.ma<=Kh||y.ma>Lh+1)){for(y=p.length-1;0<=y;y--){var x=new gd(p[y].A,r.y,p[y].B);jd(x,r.Y.color);kd(x,
-x.z/4E5,x.x/4E5);x.Cc=-32767;z.push(x)}u.Hd.push(z);$f.push(z);e(Qf[r.ea.aa-Rf],z,r.Y)}}function d(r,p,u){var z=ii(Infinity,r.ea.aa,p.Y.ba,p.Y.X),y=Qf[z.aa-Rf];if(y&&!(y.ma<=Kh||y.ma>Lh+1)){y=[];var x=r.V.i/4E5+r.V.f/4E5,C=r.V.B/4E5+r.V.A/4E5;var A=new gd(r.V.A,p.l,r.V.B);jd(A,p.Y.color);kd(A,C,-A.y/4E5);A.Hb=u.x;A.ic=u.y;y.push(A);A=new gd(r.V.f,p.l,r.V.i);jd(A,p.Y.color);kd(A,x,-A.y/4E5);A.Hb=u.x;A.ic=u.y;y.push(A);A=new gd(r.V.f,p.u,r.V.i);jd(A,p.Y.color);kd(A,x,-A.y/4E5);A.Hb=u.x;A.ic=u.y;y.push(A);
A=new gd(r.V.A,p.u,r.V.B);jd(A,p.Y.color);kd(A,C,-A.y/4E5);A.Hb=u.x;A.ic=u.y;y.push(A);z.Hd.push(y);$f.push(y);e(Qf[r.ea.aa-Rf],y,p.Y)}}function e(r,p,u){var z=0,y=p[0],x=nd(p[1],y,new G);x.scale(1E-5);for(var C=2;C<p.length;C++){var A=nd(p[C],y,new G);A.scale(1E-5);z+=pc(x,A,new G).length();x=A}p=.5*z;z=u.ba;u=u.color;y=(z.Dd.r-z.Dd.Wa)/255;u=new R(u.r*y+z.Dd.Wa,u.Wa*y+z.Dd.Wa,u.ka*y+z.Dd.Wa,z.Dd.Fa);r.Fb.x+=u.r*p;r.Fb.y+=u.Wa*p;r.Fb.z+=u.ka*p;r.ad+=p}a.oa=[];for(var h=a.oa,g=q(a.nk),k=g.next();!k.done;k=
g.next())if(k=k.value,0<k.nd){for(var l=ii(k.y,k.ea.aa,k.Y.ba,k.Y.X),m=q(k.rk),n=m.next();!n.done;n=m.next())b(k,n.value,l);(k=Qf[k.ea.aa-Rf])&&(k.ma>Lh+1||k.cells.push(a))}else if(k.Y)for(l=ii(Infinity,k.ea.aa,k.Y.ba,k.Y.X),m=q(k.rk),n=m.next();!n.done;n=m.next())c(k,n.value,l);a=q(a.pk);for(k=a.next();!k.done;k=a.next())for(g=k.value,k=new zg(g.V,g.l,g.u),k.flags|=wj,k.aa=g[0].ea.aa,h.push(k),k=new M(g.V.f-g.V.A,g.V.B-g.V.i),k.pa(32767),n=q(g),l=n.next();!l.done;l=n.next())d(g,l.value,k)}
function uj(a,b){this.index=xj++;this.ga=a;this.df=b;a=new db(yj);for(var c=new M(0,0),d=1/this.ga.length,e=q(this.ga),h=e.next();!h.done;h=e.next())h=h.value,h.jg=this,c.x+=h.B*d,c.y+=h.A*d;b=q(b.$c.elements);for(d=b.next();!d.done;d=b.next())d=d.value,0>=Gc(c.x,c.y,d.ga)||a.add(d);this.$c=a.elements;zj(this);this.jk=[];a=Number.NEGATIVE_INFINITY;c=q(this.qe);for(b=c.next();!b.done;b=c.next())if(b=b.value,b.ea.add){if(b.l>a){var g=new qj(b.ea);g.l=b.l;g.u=b.u;g.floor=b.floor;g.ra=b.ra;g.ga=this.ga;
this.jk.push(g)}else g.u=b.u,g.ra=b.ra;a=g.u}}var xj=-2147483648;
function zj(a){var b=new qj;b.l=-2147483648;b.u=2147483647;b.ea={};a.qe=[b];b=q(a.$c);for(var c=b.next();!c.done;c=b.next()){c=c.value;var d=new qj(c.ea);d.l=c.ea.l;d.u=c.ea.u;d.floor=c.ea.floor;d.ra=c.ea.ra;c=[d];d=q(a.qe);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=[];c=q(c);for(var g=c.next();!g.done;g=c.next())g=g.value,g.ea.Tg(e.ea)?h.push(g):g.Pf(e,h);c=h}d=q(c);for(g=d.next();!g.done;g=d.next()){h=g.value;g=[];var k=q(a.qe);for(e=k.next();!e.done;e=k.next())e.value.Pf(h,g);a.qe=
g}a.qe.push.apply(a.qe,da(c))}yb(a.qe,function(l,m){return l.l<m.l?-1:l.l>m.l?1:0})}
uj.prototype.evaluate=function(){for(var a=q(this.jk),b=a.next();!b.done;b=a.next()){b=b.value;if(b.floor){for(var c=[],d=q(this.ga),e=d.next();!e.done;e=d.next())e=e.value,e=e.da(),c.push(e);c.y=b.l;c.Y=b.floor;c.nd=1;c.ea=b.ea;this.df.Xi.push(c)}if(b.ra){c=[];d=q(this.ga);for(e=d.next();!e.done;e=d.next())e=e.value,e=e.da(),c.push(e);c.y=b.u;c.Y=b.ra;c.nd=-1;c.ea=b.ea;this.df.Xi.push(c)}}a=[];b=[];e=q(this.qe);for(d=e.next();!d.done;d=e.next())c=d.value,(c.ea.add?a:b).push(c);b=q(this.ga);for(e=
b.next();!e.done;e=b.next()){e=e.value;var h=function(p,u){var z=[];p=q(p);for(var y=p.next();!y.done;y=p.next()){var x=y.value,C=q(u);for(y=C.next();!y.done;y=C.next()){var A=y.value,D=[];x.Ea(A.l,A.u,D);var I=q(D);for(y=I.next();!y.done;y=I.next())y.value.ea=A.ea;z.push.apply(z,da(D))}}return z},g=function(p,u){u=q(u);for(var z=u.next();!z.done;z=u.next()){z=z.value;var y=[];p=q(p);for(var x=p.next();!x.done;x=p.next())x.value.Pf(z.l,z.u,y);p=y}return p};c=function(p){for(var u=p[0],z=1;z<p.length;z++)if(vj(u.Y,
p[z].Y))u=p[z];else{var y=u.da(u.l,p[z].u);p.splice(--z,2,y)}};d=function(p,u,z){var y=[];if(!p.Yb)return y;u=q(u);for(var x=u.next();!x.done;x=u.next()){x=x.value;var C=p.Yb;var A=x,D=yj,I=xb(C,A,D);(C=I==C.length||0!=D.call(null,A,C[I])?null:C[I])&&C.ea.add==z&&y.push(new dh(x.ea.l,x.ea.u,C))}return y};var k=d(e,this.$c,!0),l=[],m=[],n=[];if(e.ca.jg){l=d(e.ca,e.ca.jg.$c,!1);var r=q(e.ca.jg.qe);for(d=r.next();!d.done;d=r.next())d=d.value,(d.ea.add?m:n).push(d)}k=g(k,m);l=g(l,m);k=h(k,a);l=h(l,a);
h=function(p){yb(p,function(D,I){return D.Hf.ea.index-I.Hf.ea.index});var u=[];p=q(p);for(var z=p.next();!z.done;z=p.next()){z=[z.value];for(var y=q(u),x=y.next();!x.done;x=y.next()){x=x.value;var C=[];z=q(z);for(var A=z.next();!A.done;A=z.next())A=A.value,A.Hf.ea.Tg(x.Hf.ea)?C.push(A):A.Pf(x.l,x.u,C);z=C}y=q(z);for(A=y.next();!A.done;A=y.next()){C=A.value;A=[];u=q(u);for(x=u.next();!x.done;x=u.next())x.value.Pf(C.l,C.u,A);u=A}u.push.apply(u,da(z))}return u}(l.concat(k));if(h.length){d=[];g=q(h);
for(h=g.next();!h.done;h=g.next())if(k=h.value,k.Hf.hh){l=[];m=q(k.Hf.hh);for(h=m.next();!h.done;h=m.next())h.value.Ea(k.l,k.u,l);m=q(l);for(h=m.next();!h.done;h=m.next())h.value.ea=k.ea;d.push.apply(d,da(l))}yb(d,function(p,u){return p.l<u.l?-1:p.l>u.l?1:0});g=void 0;k=Number.NEGATIVE_INFINITY;d=q(d);for(h=d.next();!h.done;h=d.next())h=h.value,h.l>k?(g&&c(g),g=[h],g.V=e.da(),g.ea=h.ea,g.l=h.l,g.u=h.u,this.df.Yi.push(g)):(g.push(h),g.u=h.u),k=h.u;g&&c(g)}}};
function pj(a,b,c,d){Ac.call(this,a,b,c,d);this.index=pj.index++;this.ca=null}pj.index=-2147483648;pj.prototype=Object.create(Ac.prototype);pj.prototype.constructor=pj;pj.prototype.ab=function(a,b,c,d){return new pj(a,b,c,d)};
pj.prototype.replace=function(a){Ac.prototype.replace.call(this,a);if(this.jg)for(var b=0;b<a.length;b++)a[b].jg=this.jg;if(this.Yb)for(a=q(a),b=a.next();!b.done;b=a.next())if(b=b.value,b.Yb)for(var c=q(this.Yb),d=c.next();!d.done;d=c.next())d=d.value,0<=b.Yb.indexOf(d)||b.Yb.push(d);else b.Yb=this.Yb.slice()};function dh(a,b,c){this.Y=new Aj;this.l=a;this.u=b;this.Hf=c;this.ea=null}dh.prototype.da=function(a,b){a=new dh(a,b,this.Hf);a.Y=this.Y;a.ea=this.ea;return a};
dh.prototype.Pf=function(a,b,c){this.u<=a||this.l>=b?c.push(this):(this.l<a&&c.push(this.da(this.l,a)),this.u>b&&c.push(this.da(b,this.u)))};dh.prototype.Ea=function(a,b,c){this.u<=a||this.l>=b||(this.u<=b&&this.l>=a?c.push(this):(b=b<this.u?b:this.u,a=a>this.l?a:this.l,c.push(this.da(a,b))))};function Aj(){this.ba=t.g.R.get("concr01");this.X=Yg;this.color=$c;this.y=this.x=0}
function vj(a,b){if(a.ba.name<b.ba.name)return-1;if(a.ba.name>b.ba.name)return 1;var c=ve(a.X,b.X);return 0!=c?c:a.color.r<b.color.r?-1:a.color.r>b.color.r?1:a.color.Wa<b.color.Wa?-1:a.color.Wa>b.color.Wa?1:a.color.ka<b.color.ka?-1:a.color.ka>b.color.ka?1:a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0};function xi(){this.index=Bj++;this.add=!0;this.ga=null;this.l=Number.POSITIVE_INFINITY;this.u=Number.NEGATIVE_INFINITY;this.floor=new Aj;this.ra=new Aj;this.color=$c;this.Sa=-1;this.$c=[]}var Bj=-2147483648;function yi(a,b){a.floor&&(a.floor.color=Sg);a.ra&&(a.ra.color=Vg);a.ga=[];for(var c=[],d=0;d<b.length;d++)c.push(Si.lb(b[d].x,b[d].y));b=c;var e=b[b.length-1];for(c=0;c<b.length;c++)d=b[c],e=new pj(e.x,e.y,d.x,d.y),e.ea=a,e.hh=a.vc(),a.ga.push(e),e=d}
xi.prototype.vc=function(){var a=new dh(this.l,this.u);a.Y.color=this.color;return[a]};
xi.prototype.stroke=function(){if(Fc(this.ga)){console.trace();debugger}if(this.u<=this.l){console.trace();debugger}for(var a=[],b=q(this.ga),c=b.next();!c.done;c=b.next()){c=c.value;var d=c.da();d.Yb=[c.hh];a.push(d);Uc(d);delete d.ca.Yb}b=new Jc;c=q(a);for(d=c.next();!d.done;d=c.next())d=d.value,b.Ea(d.B,d.A);d=b.m&-524288;c=b.l&-524288;d+=524288;for(c+=524288;d<b.v;){var e=new pj(d,b.l,d,b.u);Uc(e);a.push(e);d+=524288}for(;c<b.u;)d=new pj(b.m,c,b.v,c),Uc(d),a.push(d),c+=524288;a=Gi(a.slice(),!0);
a=hj(a);for(b={};a.elements.length;){a:if(c=function(g){return function(){for(var k=q(g.Td),l=k.next();!l.done;l=k.next())if(l.value.Yb)return!0;return!1}}(b),b.Td=ij(a),b.Td&&!Fc(b.Td)){if(!c()&&(c=Ic(b.Td),0>=Gc(c.x,c.y,this.ga)))break a;d=new Cj(this);e=q(b.Td);for(c=e.next();!c.done;c=e.next()){c=c.value;var h=c.da();Uc(h);h.ea=this;c.Yb&&(h.hh=c.Yb[0]);d.ga.push(h)}d.stroke(We($e(b.Td.bound.m+2147483648>>>19,b.Td.bound.l+2147483648>>>19)))}b={Td:b.Td}}};
function gi(a){for(var b=q(a.$c),c=b.next();!c.done;c=b.next())c.value.remove();a.$c.length=0}xi.prototype.da=function(){var a=new xi;a.add=this.add;a.l=this.l;a.u=this.u;a.floor=this.floor;a.ra=this.ra;a.color=this.color;a.Sa=this.Sa;return a};xi.prototype.Tg=function(){return!0};function Cj(a){this.index=Dj++;this.ea=a;this.ga=[];this.df=null}var Dj=-2147483648;function yj(a,b){return a.ea.index<b.ea.index?-1:a.ea.index>b.ea.index?1:0}
Cj.prototype.stroke=function(a){if(Fc(this.ga)){console.trace();debugger}this.ea.$c.push(this);a=this.df=a;a.$c.add(this);Sa(Ui,a)};Cj.prototype.remove=function(){var a=this.df;a.$c.remove(this);if(a.$c.elements.length)Sa(Ui,a);else{for(var b=a.Yh.first();null!=b.item;){var c=b.next;ib(b);ib(b.Xc);b=c}ib(a.Fk);Te.remove(a);Ta(Ui,a)}};var cj={},dj,Ej,ej=-1;cj.nf=[];
function fj(){function a(B,H){if(B.za.fa<H.za.fa)return-1;if(B.za.fa>H.za.fa)return 1;if(B.za.$<H.za.$)return-1;if(B.za.$>H.za.$)return 1;B=L(H.za,B.za.i,B.za.f);return 0>B?-1:0<B?1:0}function b(B,H){B=B[0];H=H[0];return B.y<H.y?-1:B.y>H.y?1:0}function c(B){if(!(2>B.length)){var H=2.197265625E7;var K=-1;for(var F,N,P=1;P<B.length;P++)F=B[P-1],N=B[P],F=new Ac(F.i,F.f,N.B,N.A),N=(F.length>>3)*(L(F,N.i,N.f)>>3),N>=H||-2E3>=N||(H=N,K=P);0>K||(F=B[K-1],N=B[K],H=N.ab(F.i,F.f,N.B,N.A),P=N.length/(F.length+
N.length),H.weight=F.weight*(1-P)+N.weight*P,B.splice(K-1,2,H),c(B))}}function d(B){if(!(2>B.length)){var H=2.197265625E7;var K=-1;for(var F=B[B.length-1],N,P=0;P<B.length;P++,F=N)N=B[P],F=new Ac(F.i,F.f,N.B,N.A),F=(F.length>>3)*(L(F,N.i,N.f)>>3),F>=H||-2E3>=F||(H=F,K=P);0>K||(B.unshift.apply(B,da(B.splice(K))),F=B.pop(),N=B.shift(),H=N.ab(F.i,F.f,N.B,N.A),K=N.length/(F.length+N.length),H.weight=F.weight*(1-K)+N.weight*K,B.unshift(H),d(B))}}function e(B){function H(Q,U){var Ma=Rc(Q),ja=Rc(U),Ua=-Cc(Q,
U)+Math.PI;if(Ua<fc(165)){var fa=new M(Q.B,Q.A);fa.round();fa.ha=Q.weight;fa.Ba=255;F.push(fa);var Va=new M(Q.B-Ma.y,Q.A+Ma.x);Va.round();Va.ha=fa.ha;Va.Ba=0;N.push(Va);K(Q);var Ia=new M(U.i,U.f);Ia.round();Ia.ha=U.weight;Ia.Ba=255;F.push(Ia);var yc=new M(U.i-ja.y,U.f+ja.x);yc.round();yc.ha=Ia.ha;yc.Ba=0;N.push(yc);Ua<=fc(90)||(Q=new M(Q.B+Ma.x,Q.A+Ma.y),Q.round(),Q.ha=fa.ha,Q.Ba=0,P.push([Va,fa,Q]),U=new M(U.i-ja.x,U.f-ja.y),U.round(),U.ha=Ia.ha,U.Ba=0,P.push([U,Ia,yc]))}else Ia=new M(U.i,U.f),Ia.ha=
(Q.weight+U.weight)*(1-Ua/Math.ug),Ia.Ba=255,F.push(Ia),Ua<=fc(195)?(ja=new M(-Ma.y-ja.y,Ma.x+ja.x),ja.scale(5E9/ja.xf()),ja.x+=U.i,ja.y+=U.f,ja.round(),ja.ha=Ia.ha,ja.Ba=0,N.push(ja),K(Q)):(yc=new M(Q.B-Ma.y,Q.A+Ma.x),yc.round(),yc.ha=Ia.ha,yc.Ba=0,N.push(yc),K(Q),U=new M(U.i-ja.y,U.f+ja.x),U.round(),U.ha=Ia.ha,U.Ba=0,N.push(U),P.push([yc,Ia,U]))}function K(Q){if(ia)ia=!1;else{var U=N[N.length-2],Ma=F[F.length-2],ja=F[F.length-1],Ua=N[N.length-1];if(Ma.ha!=Q.weight&&ja.ha!=Q.weight)if(1E5<Q.length){var fa=
Q.lb(5E4,0);fa.round();fa.ha=Q.weight;fa.Ba=255;var Va=Q.lb(Q.length-5E4,0);Va.round();Va.ha=Q.weight;Va.Ba=255;P.push([U,Ma,fa]);P.push([U,fa,Va,Ua]);P.push([Va,ja,Ua])}else if(fa=new M(Q.i+Q.B>>1,Q.f+Q.A>>1),fa.round(),1E5>Q.length){var Ia=5E4/Q.length-.5;Va=Q.length/1E5;fa.ha=.5*(Ma.ha+ja.ha)*(1-Va)+Q.weight*Va;fa.Ba=255;Ia=new M(fa.x+(Q.f-Q.A)*Ia,fa.y+(Q.B-Q.i)*Ia);Ia.ha=fa.ha;Ia.Ba=Q.weight*Va*255;Ia.round();P.push([U,Ma,fa,Ia]);P.push([U,Ia,Ua]);P.push([Ia,fa,ja,Ua])}else fa.ha=Q.weight,fa.Ba=
255,P.push([U,Ma,fa]),P.push([U,fa,Ua]),P.push([fa,ja,Ua]);else Ma.ha!=Q.weight?5E4<Q.length?(fa=Q.lb(5E4,0),fa.round(),fa.ha=Q.weight,fa.Ba=255,P.push([U,Ma,fa]),P.push([U,fa,ja,Ua])):P.push([U,Ma,ja,Ua]):ja.ha!=Q.weight?5E4<Q.length?(fa=Q.lb(Q.length-5E4,0),fa.round(),fa.ha=Q.weight,fa.Ba=255,P.push([U,Ma,fa,Ua]),P.push([fa,ja,Ua])):P.push([Ma,ja,Ua,U]):P.push([U,Ma,ja,Ua])}}var F=[],N=[],P=[],ia=!1;if(B[0].i==B[B.length-1].B&&B[0].f==B[B.length-1].A){ia=!0;H(B[B.length-1],B[0]);P=[];for(var na=
1;na<B.length;na++)H(B[na-1],B[na]);H(B[B.length-1],B[0])}else{var pa=B[0],Fa=Rc(pa);na=new M(pa.i,pa.f);na.round();na.ha=pa.weight;na.Ba=255;F.push(na);pa=new M(pa.i-Fa.y,pa.f+Fa.x);pa.round();pa.ha=na.ha;pa.Ba=0;N.push(pa);for(na=1;na<B.length;na++)H(B[na-1],B[na]);B=B[B.length-1];pa=Rc(B);na=new M(B.B,B.A);na.round();na.ha=B.weight;na.Ba=255;F.push(na);pa=new M(B.B-pa.y,B.A+pa.x);pa.round();pa.ha=na.ha;pa.Ba=0;N.push(pa);K(B)}return P}function h(B){var H=new db(qb);B=q(B);for(var K=B.next();!K.done;K=
B.next())K=K.value,mf(K.bound.C-5E4,K.bound.m-5E4,K.bound.G+5E4,K.bound.v+5E4,H);return H.elements}function g(B){var H=new db(Bc);B=q(B);for(var K=B.next();!K.done;K=B.next())K=K.value,H.remove(Tc(K))||H.add(K);return H.elements}function k(B){var H=hj(B,!1);B=[];for(var K=[];H.elements.length;){var F=ij(H);F?Fc(F)?K.push(F):(F.kb=[],B.push(F)):console.log("failed circuit")}K=q(K);for(H=K.next();!H.done;H=K.next())kj(H.value,B);K=[];B=q(B);for(H=B.next();!H.done;H=B.next())if(F=H.value,0==F.kb.length)K.push(F);
else{jj(F);var N=q(F.kb);for(H=N.next();!H.done;H=N.next())jj(H.value);K.push(lj(F))}return K}function l(B,H,K){var F=hj(B,!1);B=[];for(var N=new db(md);F.elements.length;){a:{var P=F;var ia=[];ia.bound=new Jc;var na=0,pa=P.elements[na],Fa=pa.elements.pop();pa.elements.length||P.elements.splice(na,1);if(Fa)for(ia.bound.Ea(Fa.i,Fa.f);;){ia.push(Fa);ia.bound.Ea(Fa.B,Fa.A);if(Fa.B==ia[0].i&&Fa.A==ia[0].f)break a;na=P.contains(new M(Fa.B,Fa.A));if(0>na)break a;pa=P.elements[na];Fa=eb(pa,Tc(Fa))-1;0>Fa&&
(Fa+=pa.elements.length);Fa=pa.elements.splice(Fa,1)[0];pa.elements.length||P.elements.splice(na,1)}else ia=null}B.push(ia);if(ia[0].i!=ia[ia.length-1].B||ia[0].f!=ia[ia.length-1].A)P=ia[0],P.ai=ia,ia=new db(Vc),ia.x=P.i,ia.y=P.f,ia=N.Ea(ia),ia.add(P)}for(F=0;F<B.length;F++)if(P=B[F],P[0].i!=P[P.length-1].B||P[0].f!=P[P.length-1].A)ia=P[P.length-1],na=N.contains(new M(ia.B,ia.A)),0>na||(pa=N.elements[na],ia=eb(pa,Tc(ia))-1,0>ia&&(ia+=pa.elements.length),ia=pa.elements.splice(ia,1)[0],pa.elements.length||
N.elements.splice(na,1),na=B.indexOf(ia.ai),B.splice(na,1),na<F&&F--,P.push.apply(P,da(ia.ai)),P.bound.$j(ia.ai.bound),F--);N=q(B);for(F=N.next();!F.done;F=N.next())delete F.value.ai;N=q(B);for(F=N.next();!F.done;F=N.next())F=F.value,F[0].i==F[F.length-1].B&&F[0].f==F[F.length-1].A?d(F):c(F);N=[];B=q(B);for(F=B.next();!F.done;F=B.next())N=N.concat(e(F.value));B=[];N=q(N);for(F=N.next();!F.done;F=N.next())for(F=F.value,P=q(H),na=P.next();!na.done;na=P.next()){a:for(ia=F,na=q(na.value),pa=na.next();!pa.done;pa=
na.next()){pa=pa.value;Fa=[];for(var Q=ia[ia.length-1],U=L(pa,Q.x,Q.y),Ma=0;Ma<ia.length;Ma++){var ja=ia[Ma],Ua=L(pa,ja.x,ja.y);if(0<Ua){if(0>U){U/=U-Ua;var fa=1-U,Va=new M(Q.x*fa+ja.x*U,Q.y*fa+ja.y*U);Va.ha=Q.ha*fa+ja.ha*U;Va.Ba=Q.Ba*fa+ja.Ba*U;Fa.push(Va)}Fa.push(ja)}else 0>Ua?0<U&&(U/=U-Ua,fa=1-U,Va=new M(Q.x*fa+ja.x*U,Q.y*fa+ja.y*U),Va.ha=Q.ha*fa+ja.ha*U,Va.Ba=Q.Ba*fa+ja.Ba*U,Fa.push(Va)):Fa.push(ja);Q=ja;U=Ua}if(3>Fa.length){ia=null;break a}ia=Fa}ia&&B.push(ia)}H=q(B);for(F=H.next();!F.done;F=
H.next()){B=F.value;for(N=0;N<B.length;N++)F=B[N],F.index?B[N]=F.index:(F.index=cj.Ld.Gb.length,B[N]=F.index,P=K(F),P.ha=225*F.ha,P.Ba=F.Ba,cj.Ld.Gb.push(P));dj+=3*(B.length-2);cj.Ld.Hd.push(B)}}var m=Te.elements[ej];if(m){cj.nf[2*ej]=dj;for(var n=new db(a),r=new db(b),p=new db(b),u={},z=q(m.oa),y=z.next();!y.done;u={Qc:u.Qc,od:u.od,ni:u.ni},y=z.next())if(u.od=y.value,u.od instanceof zg){u.ni=function(B){return function(H){var K=H.za,F=Math.atan2(K.$,K.fa)-Math.atan2(B.Qc.$,B.Qc.fa);if(Math.abs(F>
Math.PI?F-Math.ug:F<-Math.PI?F+Math.ug:F)>fc(5))return!1;F=K.weight/(K.weight+1);var N=1-F;F=K.ab(Math.round(K.i*F+B.Qc.i*N),Math.round(K.f*F+B.Qc.f*N),Math.round(K.B*F+B.Qc.B*N),Math.round(K.A*F+B.Qc.A*N));if(500<=Math.abs(L(F,B.Qc.i,B.Qc.f))||500<=Math.abs(L(F,B.Qc.B,B.Qc.A))||500<=Math.abs(L(F,K.i,K.f))||500<=Math.abs(L(F,K.B,K.A)))return!1;H.za=F;F.weight=K.weight+1;H.push(B.od);return!0}}(u);var x=function(B){return function(){for(var H=q(n.elements),K=H.next();!K.done;K=H.next())if(B.ni(K.value))return!0;
return!1}}(u);u.Qc=Tc(u.od.V);if(!x()){var C=[u.od];C.za=u.Qc;C.za.weight=1;var A=n.Ea(C);A!=C&&A.push(u.od)}}else{var D=[u.od],I=void 0;u.od instanceof Bg?I=r.Ea(D):u.od instanceof Cg&&(I=p.Ea(D));I!=D&&I.push(u.od)}n=n.elements;r=r.elements;p=p.elements;for(var J={},O=q(n),oa=O.next();!oa.done;J={hc:J.hc,Ae:J.Ae},oa=O.next()){var qa=oa.value;J.Ae=Sc(qa.za,-1E3);qa.za=qa.za.ab(qa.za.i+J.Ae.x,qa.za.f+J.Ae.y,qa.za.B+J.Ae.x,qa.za.A+J.Ae.y);J.hc=qa.za;var ba=[[],[],[],[]],ca=[],Fb=q(qa);for(y=Fb.next();!y.done;y=
Fb.next()){var hb=y.value,Yb=function(B,H,K){B.i<H.m||B.i>H.v||B.A>H.u||B.f<H.l?K.push(B):(B.A<H.l&&K.push(B.ab(B.i,H.l,B.B,B.A)),B.f>H.u&&K.push(B.ab(B.i,B.f,B.B,H.u)))},rc=function(B,H,K){B.f<H.l||B.f>H.u||B.B>H.v||B.i<H.m?K.push(B):(B.B<H.m&&K.push(B.ab(H.m,B.f,B.B,B.A)),B.i>H.v&&K.push(B.ab(B.i,B.f,H.v,B.A)))},Nb=function(B,H,K){B.i<H.m||B.i>H.v||B.f>H.u||B.A<H.l?K.push(B):(B.f<H.l&&K.push(B.ab(B.i,B.f,B.B,H.l)),B.A>H.u&&K.push(B.ab(B.i,H.u,B.B,B.A)))},sc=function(B,H,K){B.f<H.l||B.f>H.u||B.i>
H.v||B.B<H.m?K.push(B):(B.i<H.m&&K.push(B.ab(B.i,B.f,H.m,B.A)),B.B>H.v&&K.push(B.ab(H.v,B.f,B.B,B.A)))},Ca=new Jc;Ca.m=Math.round(J.hc.getParameter(hb.V.B,hb.V.A));Ca.v=Math.round(J.hc.getParameter(hb.V.i,hb.V.f));Ca.l=hb.l;Ca.u=hb.u;for(var Ib=[[],[],[],[]],wf=q(ba[0]),ua=wf.next();!ua.done;ua=wf.next())sc(ua.value,Ca,Ib[0]);var xf=q(ba[1]);for(ua=xf.next();!ua.done;ua=xf.next())Nb(ua.value,Ca,Ib[1]);var Be=q(ba[2]);for(ua=Be.next();!ua.done;ua=Be.next())rc(ua.value,Ca,Ib[2]);var yf=q(ba[3]);for(ua=
yf.next();!ua.done;ua=yf.next())Yb(ua.value,Ca,Ib[3]);ba=Ib;for(var kc=[[new Ac(Ca.m,Ca.l,Ca.v,Ca.l)],[new Ac(Ca.v,Ca.l,Ca.v,Ca.u)],[new Ac(Ca.v,Ca.u,Ca.m,Ca.u)],[new Ac(Ca.m,Ca.u,Ca.m,Ca.l)]],zf=q(ca),kb=zf.next();!kb.done;kb=zf.next()){var Td=kb.value;Ib=[[],[],[],[]];var Af=q(kc[0]);for(ua=Af.next();!ua.done;ua=Af.next())sc(ua.value,Td,Ib[0]);var Ce=q(kc[1]);for(ua=Ce.next();!ua.done;ua=Ce.next())Nb(ua.value,Td,Ib[1]);var Ud=q(kc[2]);for(ua=Ud.next();!ua.done;ua=Ud.next())rc(ua.value,Td,Ib[2]);
var Vd=q(kc[3]);for(ua=Vd.next();!ua.done;ua=Vd.next())Yb(ua.value,Td,Ib[3]);kc=Ib}ba[0].push.apply(ba[0],da(kc[0]));ba[1].push.apply(ba[1],da(kc[1]));ba[2].push.apply(ba[2],da(kc[2]));ba[3].push.apply(ba[3],da(kc[3]));ca.push(Ca)}ba=ba[0].concat(ba[1].concat(ba[2].concat(ba[3])));qa.length=0;for(var Bf=k(ba),De=[],lb=q(Bf),Pb=lb.next();!Pb.done;Pb=lb.next()){for(var Cf=Pb.value,ud=Cf.slice(),bd=new Jc,Df=q(Cf),Jb=Df.next();!Jb.done;Jb=Df.next()){var Ef=Jb.value;bd.Ea(Ef.B,Ef.A)}var Ee=J.hc.lb(bd.m,
0),Ff=J.hc.lb(bd.v,0);ud.bound=new Gd;ud.bound.Ea(Ee.y,bd.l,Ee.x);ud.bound.Ea(Ff.y,bd.u,Ff.x);De.push.apply(De,da(oj(ud)));qa.push(ud)}var Gf=h(qa);ba=[];for(var La=q(Gf),Ab=La.next();!Ab.done;Ab=La.next())for(var Lc=q(Ab.value.oa),Qb=Lc.next();!Qb.done;Qb=Lc.next()){var bb=Qb.value;if(bb instanceof Cg){var wc=Qc(J.hc,bb.ga);if(wc){wc[0]=Math.round(wc[0]);wc[1]=Math.round(wc[1]);var Wd=new Ac(wc[1],bb.y,wc[0],bb.y);Wd.weight=1;ba.push(Wd)}}else if(bb instanceof Bg){var lc=Qc(J.hc,bb.ga);if(lc){lc[0]=
Math.round(lc[0]);lc[1]=Math.round(lc[1]);var Hf=new Ac(lc[0],bb.y,lc[1],bb.y);Hf.weight=1;ba.push(Hf)}}else{var vd=J.hc,$b=bb.V,ra=L(vd,$b.i,$b.f),Mc=L(vd,$b.B,$b.A),xc=vd.getParameter($b.i,$b.f),Fe=vd.getParameter($b.B,$b.A);if(ra<Mc){if(!(-256>Mc||256<ra)){var Nc=ra/(ra-Mc),Ge=Math.round(xc*(1-Nc)+Fe*Nc),Xd=Math.atan2(-ra,xc-Ge);if(!(Xd<fc(15))){var Yd=new Ac(Ge,bb.l,Ge,bb.u);Yd.weight=(180*Xd/Math.PI-15)/75;1<Yd.weight&&(Yd.weight=1);ba.push(Yd)}}}else if(ra>Mc&&!(-256>ra)&&!(256<Mc)){var If=
ra/(ra-Mc),He=Math.round(xc*(1-If)+Fe*If),Jf=Math.atan2(-Mc,He-Fe);if(!(Jf<fc(15))){var Zd=new Ac(He,bb.u,He,bb.l);Zd.weight=(180*Jf/Math.PI-15)/75;1<Zd.weight&&(Zd.weight=1);ba.push(Zd)}}}}l(ba,De,function(B){return function(H){var K=Math.round(H.x);H=Math.round(H.y);K/=B.hc.length;return new gd(Math.round(B.hc.f+(B.hc.A-B.hc.f)*K)-B.Ae.y,H,Math.round(B.hc.i+(B.hc.B-B.hc.i)*K)-B.Ae.x)}}(J))}var Kb={},wd=q(r);for(oa=wd.next();!oa.done;Kb={Jf:Kb.Jf},oa=wd.next()){var xd=oa.value;Kb.Jf=xd[0].y;var Y=
[],Ha=q(xd);for(y=Ha.next();!y.done;y=Ha.next())Y.push.apply(Y,da(y.value.ga));xd.length=0;var za=k(g(Y)),cd=[],yd=q(za);for(Pb=yd.next();!Pb.done;Pb=yd.next()){var zd=Pb.value,mc=zd.slice(),Oc=new Jc,Ie=q(zd);for(Jb=Ie.next();!Jb.done;Jb=Ie.next()){var Je=Jb.value;Oc.Ea(Je.B,Je.A)}mc.bound=new Gd;mc.bound.C=Oc.m;mc.bound.G=Oc.v;mc.bound.m=Oc.l;mc.bound.v=Oc.u;mc.bound.l=mc.bound.u=Kb.Jf;cd.push.apply(cd,da(oj(mc)));xd.push(mc)}var Kf=h(xd);Y=[];var Lf=q(Kf);for(Ab=Lf.next();!Ab.done;Ab=Lf.next()){var $d=
q(Ab.value.oa);for(Qb=$d.next();!Qb.done;Qb=$d.next()){var ae=Qb.value;if(ae instanceof zg&&!(ae.l>Kb.Jf||ae.u<=Kb.Jf)){var Rb=ae.V.da();Rb.weight=1;Y.push(Rb)}}}l(Y,cd,function(B){return function(H){return new gd(Math.round(H.y),B.Jf,Math.round(H.x))}}(Kb))}var Pc={},Mf=q(p);for(oa=Mf.next();!oa.done;Pc={Kf:Pc.Kf},oa=Mf.next()){var ac=oa.value;Pc.Kf=ac[0].y;var be=[],Nf=q(ac);for(y=Nf.next();!y.done;y=Nf.next())for(var Ke=q(y.value.ga),ce=Ke.next();!ce.done;ce=Ke.next()){var dd=ce.value;be.push(dd.ab(-dd.B,
dd.A,-dd.i,dd.f))}ac.length=0;var Ag=k(g(be)),de=[],ee=q(Ag);for(Pb=ee.next();!Pb.done;Pb=ee.next()){var Le=Pb.value,nc=Le.slice(),ed=new Jc,Of=q(Le);for(Jb=Of.next();!Jb.done;Jb=Of.next()){var mb=Jb.value;ed.Ea(mb.B,mb.A)}nc.bound=new Gd;nc.bound.C=-ed.v;nc.bound.G=-ed.m;nc.bound.m=ed.l;nc.bound.v=ed.u;nc.bound.l=nc.bound.u=Pc.Kf;de.push.apply(de,da(oj(nc)));ac.push(nc)}var Za=h(ac);be=[];var rj=q(Za);for(Ab=rj.next();!Ab.done;Ab=rj.next()){var sj=q(Ab.value.oa);for(Qb=sj.next();!Qb.done;Qb=sj.next()){var Ad=
Qb.value;if(Ad instanceof zg&&!(Ad.l>=Pc.Kf||Ad.u<Pc.Kf)){var tj=Ad.V.ab(-Ad.V.B,Ad.V.A,-Ad.V.i,Ad.V.f);tj.weight=1;be.push(tj)}}}l(be,de,function(B){return function(H){return new gd(Math.round(H.y),B.Kf,-Math.round(H.x))}}(Pc))}cj.nf[2*ej+1]=dj-cj.nf[2*ej];ej++;return!0}Ej=cj.Ld;delete cj.Ld;for(var Oe=0;Oe<Te.elements.length;Oe++)Te.elements[Oe].Jj=cj.nf[2*Oe],Te.elements[Oe].Ij=cj.nf[2*Oe+1];delete cj.nf;ej=-1;Ej.compile();return!1};t.Ua=function(a){t.xa.call(this,a);this.c=new G(0,0,0);this.Fc=null;this.kk=NaN;this.Ub=0;this.ia={va:-2147483648,tb:new G(1,1,1)};this.Gj=new fb;this.Cg=new Jc};t.Ua.prototype=Object.create(t.xa.prototype);t.Ua.prototype.constructor=t.Ua;t.Ua.index=-2147483648;t.Ua.prototype.create=function(){this.index=t.Ua.index++;t.Wi.push(this);t.xa.prototype.create.call(this)};t.Ua.prototype.remove=function(){for(var a=this.Gj.first();null!=a.item;){var b=a.next;ib(a);ib(a.Xc);a=b}t.Wi.remove(this);t.xa.prototype.remove.call(this)};
t.Ua.prototype.step=function(){this.Cg.Ee(this.c.z,this.c.x)||gj(this);var a=null,b=ff(this.c,new G(0,-1E8,0),Xf);b&&(a=Se(b.item.aa));a?(a!=this.Fc&&(this.kk=t.h),this.Fc=a,Tf(this.c,a,this.ia.tb)):this.mk();t.xa.prototype.step.call(this)};t.Ua.prototype.mk=function(){this.remove()};
function gj(a){for(var b=a.c.z-a.Ub,c=a.c.z+a.Ub,d=a.c.x-a.Ub,e=a.c.x+a.Ub,h=a.Gj.first(),g=[Pe];g.length;){var k=g.shift();if(k instanceof bf)b<=k.value&&g.push(k.ef),c>=k.value&&g.push(k.ff);else if(k instanceof cf)d<=k.value&&g.push(k.ef),e>=k.value&&g.push(k.ff);else{for(;null!=h.item&&!(h.item.index>=k.index);){var l=h.next;ib(h);ib(h.Xc);h=l}if(h.item==k)h=h.next;else{l=new gb(k);var m=new gb(a);l.Xc=m;m.Xc=l;nb(l,h);jb(k.Yh,m)}}}for(;null!=h.item;)g=h.next,ib(h),ib(h.Xc),h=g;a.Cg.m=(b>>19<<
19)+a.Ub;a.Cg.v=((c>>19)+1<<19)-a.Ub;a.Cg.l=(d>>19<<19)+a.Ub;a.Cg.u=((e>>19)+1<<19)-a.Ub}t.Wi=new db(qb);t.Ye=function(a){t.Node.call(this,a);this.$a=1E5};t.Ye.prototype=Object.create(t.Node.prototype);t.Ye.prototype.constructor=t.Ye;t.Ye.color=new R(0,0,0,64);
t.Ye.prototype.Va=function(){var a=new S;a.I=0;a.L=0;a.M=this.$a;a.J=this.$a;a.m11=0;a.m12=0;a.K=0;a.m21=1;a.m22=0;a.H=this.Ga.H;a.m31=this.Ga.m31+500;a.m32=this.Ga.m32;var b=ff(new G(this.Ga.H,this.Ga.m31,this.Ga.m32),new G(0,-1E8,0));b&&(a.m31-=b.d);t.D.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,0,4);t.Node.prototype.Va.call(this)};var Fj,Gj=980700/3600*2,Hj=new G(0,-Gj,0),Ij=new db(qb),Jj=new t.Node("physProcessor");
Jj.step=function(){Fj=new bc;for(var a=q(Ij.elements),b=a.next();!b.done;b=a.next()){b=b.value;b.je=0;b.t=0;b.Ok=b.Fg(b.c,b.Aa,b.jb);var c=b.Dk();b.input();b.dc&&!b.Pg()&&0<b.bg&&(b.w.x+=Hj.x,b.w.y+=Hj.y,b.w.z+=Hj.z);b.w.scale(b.ul);var d=nd(b.w,b.fb,new G(0,0,0));if(0<b.$g){for(var e=b,h=b.Ok,g=new G(0,0,0),k=0;k<h.length;k++){var l=h[k],m=-jc(d,l);if(!(0>=m)){m*=e.$g;var n=jc(e.w,l);l=new G(e.w.x-l.x*n,e.w.y-l.y*n,e.w.z-l.z*n);m/=l.length();1<m&&(m=1);g.x-=l.x*m;g.y-=l.y*m;g.z-=l.z*m}}e.w.add(g)}b.Ya.set(.5*
b.fb.x+.5*b.w.x,.5*b.fb.y+.5*b.w.y,.5*b.fb.z+.5*b.w.z);b.Ya.y+=c;b.Ya.round();b.bound=Kj(b.c,b.Aa,b.jb,b.Ya)}a=q(Ij.elements);for(b=a.next();!b.done;b=a.next())b.value.handleEvent();for(a=0;!Fj.Nh();){b=Fj.pop();if(10<++a)break;b.target?(c=b.source,e=b.target,c.je==b.Rj&&e.je==b.Zk&&(c.je++,e.je++,Lj(c,b),Lj(e,b),c.handleEvent(),e.handleEvent(),c.Si(e),e.Si(c))):(c=b.source,c.je==b.Rj&&(c.je++,Lj(c,b),c.handleEvent()))}a=q(Ij.elements);for(b=a.next();!b.done;b=a.next())b=b.value,b.c.x+=b.Ya.x,b.c.y+=
b.Ya.y,b.c.z+=b.Ya.z,b.fb.set(b.w.x,b.w.y,b.w.z),b.transform.H=b.c.x,b.transform.m31=b.c.y,b.transform.m32=b.c.z};function Mj(a){t.Ua.call(this,a);this.w=new G(0,0,0);this.fb=new G(0,0,0);this.jb=this.Aa=0;this.bg=1;this.$g=0;this.ul=1;this.Zg=0;this.gf=new db(qb);this.t=this.je=0;this.Ya=new G(0,0,0);this.dc=!0}Mj.prototype=Object.create(t.Ua.prototype);f=Mj.prototype;f.constructor=Mj;f.create=function(){t.Ua.prototype.create.call(this);Ij.add(this)};
f.remove=function(){t.Ua.prototype.remove.call(this);Ij.remove(this)};f.Dk=function(){return 0};function Lj(a,b){var c=(b.t-a.t)/(1-a.t);c=new G(a.Ya.x*c,a.Ya.y*c,a.Ya.z*c);c.round();a.c.add(c);a.Ya.sub(c);a.t=b.t}
f.handleEvent=function(){for(var a=new G(this.w.x,this.w.y,this.w.z),b=this.Fg(this.c,this.Aa,this.jb),c=Nj(this),d=0;d<b.length;d++){var e=b[d],h=!1,g=-jc(this.w,e);0<g&&(2E3<g*this.Zg&&(h=!0,g*=1+this.Zg),this.w.x+=e.x*g,this.w.y+=e.y*g,this.w.z+=e.z*g);g=-jc(this.Ya,e);0<g&&(h&&(g*=1+this.Zg),this.Ya.x+=e.x*g,this.Ya.y+=e.y*g,this.Ya.z+=e.z*g)}for(d=0;d<c.length;d++){h=function(m,n){var r=jc(m,e),p=jc(n,e);var u=k.bg;var z=l.bg;r>=p?u=[r,p]:(u=(u*r+z*p)/(u+z),u=[u+(u-r)*k.Zg,u+(u-p)*l.Zg]);r=u[0]-
r;p=u[1]-p;m.x+=e.x*r;m.y+=e.y*r;m.z+=e.z*r;n.x+=e.x*p;n.y+=e.y*p;n.z+=e.z*p};e=c[d];var k=this,l=e.source;l.index<k.index||(h(k.Ya,l.Ya),h(k.w,l.w))}qc(this.Ya,b);qc(this.w,b);0<b.length+c.length&&(nd(this.w,a,a),a.pa(1),this.sk());this.bound=Kj(this.c,this.Aa,this.jb,this.Ya);if(this.Ya.Li())return null;t.Df();b=q(b);for(a=b.next();!a.done;a=b.next())a.value.source.va=t.va;c=q(c);for(a=c.next();!a.done;a=c.next())a.value.source.va=t.va;0>=this.Aa||!(c=this.wh(this.c,this.Aa,this.jb,this.Ya,!0))||
(c.source=this,c.Rj=this.je,c.target&&(c.Zk=c.target.je),Fj.add(c,c.t))};
f.wh=function(a,b,c,d,e){for(var h=this,g=new df(a,d,b),k=null,l=1,m=g.next();m&&!(m.t>l);){for(var n=function(u){u.va!=t.va&&(u=u.cf(a,b,c,d))&&(u.d=u.t*d.length(),-1>u.d||(u.t=h.t+u.t*(1-h.t),u.t>=l||(k=u,l=u.t)))},r=q(m.node.oa),p=r.next();!p.done;p=r.next())n(p.value);m=q(m.node.fd);for(p=m.next();!p.done;p=m.next())n(p.value);m=g.next()}if(!e)return k;for(e=0;e<Ij.elements.length;e++)if(g=Ij.elements[e],this!=g&&g.va!=t.va&&!this.gf.get(g)&&!g.gf.get(this)&&Hd(this.bound,g.bound)&&(n=this.t>
g.t?this.t:g.t,p=Oj(this,n),m=Oj(g,n),r=Pj(p.Wh,p.r,p.j,p.Ab,m.Wh,m.r,m.j,m.Ab)))r.d=r.t*nd(p.Ab,m.Ab,new G(0,0,0)).length(),-1>r.d||(r.t=n+r.t*(1-n),r.t>=l||(r.target=g,k=r,l=r.t));return k};function Oj(a,b){b=(b-a.t)/(1-a.t);b=new G(a.Ya.x*b,a.Ya.y*b,a.Ya.z*b);b.round();var c={};c.Wh=(new G(a.c.x,a.c.y,a.c.z)).add(b);c.r=a.Aa;c.j=a.jb;c.Ab=(new G(a.Ya.x,a.Ya.y,a.Ya.z)).sub(b);return c}
f.Fg=function(a,b,c){var d=lf(a,b),e=[];t.Df();d=q(d);for(var h=d.next();!h.done;h=d.next()){h=h.value;for(var g=q(h.oa),k=g.next();!k.done;k=g.next())k=k.value,k.va!=t.va&&k.Lf(a,b,c,e);h=q(h.fd);for(k=h.next();!k.done;k=h.next())g=k.value,g.va!=t.va&&g.Lf(a,b,c,e)}return e};
function Nj(a){for(var b=[],c=0;c<Ij.elements.length;c++){var d=Ij.elements[c];if(a!=d&&!a.gf.get(d)&&!d.gf.get(a)){var e=a.c;var h=a.Aa,g=a.jb,k=d.c,l=d.Aa,m=d.jb;if(0==g&&0==m){e=new G(e.x-k.x,e.y-k.y,e.z-k.z);var n=e.pa(1);e.d=jc(new G(k.x+e.x*l,k.y+e.y*l,k.z+e.z*l),e)+h;n-=h+l;e=2<n||n<-h?null:e}else{if(e.y-g>k.y+m){n=new G(e.x-k.x,e.y-g-(k.y+m),e.z-k.z);var r=n.pa(1);e=new G(k.x+n.x*l,k.y+n.y*l,k.z+n.z*l)}else e.y+g<k.y-m?(n=new G(e.x-k.x,e.y+g-(k.y-m),e.z-k.z),r=n.pa(1),e=new G(k.x+n.x*l,k.y+
n.y*l,k.z+n.z*l)):(n=new G(e.x-k.x,0,e.z-k.z),r=n.pa(1),e=new G(k.x+n.x*l,(e.y*m+k.y*g)/(g+m),k.z+n.z*l));n.d=jc(e,n)+h;r-=h+l;e=2<r||r<-h?null:n}e&&(e.source=d,b.push(e))}}return b}f.sk=function(){};f.Si=function(){};f.input=function(){};f.Pg=function(){return!1};function Qj(a){Mj.call(this,a);this.rj=this.zi=this.Qd=this.Mi=this.Zf=this.mc=0;this.Ni=this.og=Number.NEGATIVE_INFINITY;this.Tk=this.Ug=!1;this.ke=0;this.Ch=18}Qj.prototype=Object.create(Mj.prototype);Qj.prototype.constructor=Qj;
Qj.prototype.wh=function(a,b,c,d,e){for(var h=this,g=new df(a,d,b),k=null,l=1,m=g.next();m&&!(m.t>l);){for(var n=function(u){u.va==t.va||u.flags&1||!(u=u.cf(a,b,c,d))||(u.d=u.t*d.length(),-1>u.d||(u.t=h.t+u.t*(1-h.t),u.t>=l||(k=u,l=u.t)))},r=q(m.node.oa),p=r.next();!p.done;p=r.next())n(p.value);m=q(m.node.fd);for(p=m.next();!p.done;p=m.next())n(p.value);m=g.next()}if(!e)return k;for(e=0;e<Ij.elements.length;e++)if(g=Ij.elements[e],this!=g&&g.va!=t.va&&!this.gf.get(g)&&!g.gf.get(this)&&Hd(this.bound,
g.bound)&&(n=this.t>g.t?this.t:g.t,p=Oj(this,n),m=Oj(g,n),r=Pj(p.Wh,p.r,p.j,p.Ab,m.Wh,m.r,m.j,m.Ab)))r.d=r.t*nd(p.Ab,m.Ab,new G(0,0,0)).length(),-1>r.d||(r.t=n+r.t*(1-n),r.t>=l||(r.target=g,k=r,l=r.t));return k};
Mj.prototype.Fg=function(a,b,c){var d=lf(a,b),e=[];t.Df();d=q(d);for(var h=d.next();!h.done;h=d.next()){h=h.value;for(var g=q(h.oa),k=g.next();!k.done;k=g.next())k=k.value,k.va==t.va||k.flags&1||k.Lf(a,b,c,e);h=q(h.fd);for(k=h.next();!k.done;k=h.next())g=k.value,g.va==t.va||g.flags&1||g.Lf(a,b,c,e)}return e};Qj.Ve=function(a){return Math.sqrt(2*a*Gj)};f=Qj.prototype;f.Pg=function(){return this.og<t.h-1?!1:!0};
f.Dk=function(){var a=0,b=this.Tk?this.zi:this.Qd,c=new G(this.c.x,this.c.y-this.jb-.5*this.Aa,this.c.z);0>=this.w.y&&(this.Ug=!1);if(this.Pg()){this.Ug=!1;var d=0;t.Df();var e=this.rj;if(e=this.wh(c,.5*this.Aa,0,new G(0,-e,0)))d=e.d;c.y+=.5*this.Aa;c.y-=d;c=this.Fg(c,this.Aa,0);e=Number.NEGATIVE_INFINITY;for(var h=0;h<c.length;h++){var g=c[h];g.y>e&&(e=g.y)}0<e&&(this.og=t.h,a=b-2*(this.Aa+this.jb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}else if(!this.Ug){d=0;t.Df();e=this.Qd-2*this.jb-this.Aa;if(e=
this.wh(c,.5*this.Aa,0,new G(0,-e,0)))d=e.d;c.y+=.5*this.Aa;c.y-=d;c=this.Fg(c,this.Aa,0);e=Number.NEGATIVE_INFINITY;for(h=0;h<c.length;h++)g=c[h],g.y>e&&(e=g.y);0<e&&(this.og=t.h,a=b-2*(this.Aa+this.jb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}return a};f.Hi=function(){return new G(0,0,0)};f.Wj=function(){};
f.input=function(){Mj.prototype.input.call(this);this.Wj();var a=this.Hi();if(t.b.ta==this){var b=this.transform;a.set(b.I*a.x+b.K*a.z,0,b.M*a.x+b.m22*a.z)}b=a.pa(1);0==b&&(this.ke=0);if(this.Pg())0<b&&(this.w.x+=a.x*this.Zf,this.w.z+=a.z*this.Zf,this==t.b.ta&&(this.ke>=2*this.Ch&&(this.ke=0),0==this.ke?t.g.ja.get("stepConcrete01").play({gain:.5}):this.ke==this.Ch&&t.g.ja.get("stepConcrete02").play({gain:.5})),this.ke=this.Xa&&.5<this.Xa.focus?this.ke+.5:this.ke+1),this.w.scale(this.mc/(this.mc+this.Zf));
else{b=.25*this.Zf;var c=new M(this.w.z,this.w.x),d=c.length(),e=jc(this.w,a);0>e&&(e=0);e>this.mc&&(e=this.mc);b=this.mc/(this.mc+b)*(e+b)-e;d>this.mc&&c.scale(Math.max(0,d-b)/d);c.x+=a.z*b;c.y+=a.x*b;this.w.z=c.x;this.w.x=c.y}this.Ni<t.h||this.og<t.h-15||(this.w.y=this.Mi,this.Ni=this.og=Number.NEGATIVE_INFINITY,this.Ug=!0)};var Rj=2,Sj=4,wj=8;function Tj(a){return a&Rj||a&Sj?!1:!0}function gf(a){return a&Sj?!1:!0}function Xf(a){return a&wj?!0:!1}function Uj(){this.index=Vj++;this.t=NaN;this.n=this.p=null;this.Qa=!0}var Vj=-2147483648;function jf(a,b){return a.t<b.t?-1:a.t>b.t?1:1==a.Qa&&0==b.Qa?-1:0==a.Qa&&1==b.Qa?1:a.index<b.index?-1:a.index>b.index?1:0}
function Kj(a,b,c,d){var e=new Gd,h=a.z-b;h<e.C&&(e.C=h);h=a.z+b;h>e.G&&(e.G=h);h=a.z+d.z-b;h<e.C&&(e.C=h);h=a.z+d.z+b;h>e.G&&(e.G=h);h=a.x-b;h<e.m&&(e.m=h);h=a.x+b;h>e.v&&(e.v=h);h=a.x+d.x-b;h<e.m&&(e.m=h);h=a.x+d.x+b;h>e.v&&(e.v=h);b+=c;c=a.y-b;c<e.l&&(e.l=c);c=a.y+b;c>e.u&&(e.u=c);c=a.y+d.y-b;c<e.l&&(e.l=c);c=a.y+d.y+b;c>e.u&&(e.u=c);return e}
function Wj(a,b,c,d,e){var h=ic(new G(a.x-c.x,0,a.z-c.z),new G(b.x,0,b.z),d);if(!h)return null;d=new Uj;d.t=h.Ha;d.p=new G(a.x+b.x*d.t,a.y+b.y*d.t,a.z+b.z*d.t);d.n=new G(d.p.x-c.x,0,d.p.z-c.z);d.n.pa(1);var g=new Uj;g.t=h.yc;g.p=new G(a.x+b.x*g.t,a.y+b.y*g.t,a.z+b.z*g.t);g.n=new G(g.p.x-c.x,0,g.p.z-c.z);g.n.pa(1);if(0<b.y){h=(c.y-e-a.y)/b.y;var k=(c.y+e-a.y)/b.y;h>d.t&&(d=new Uj,d.t=h,d.p=new G(a.x+b.x*d.t,c.y-e,a.z+b.z*d.t),d.n=new G(0,-1,0));k<g.t&&(g=new Uj,g.t=k,g.p=new G(a.x+b.x*g.t,c.y+e,a.z+
b.z*g.t),g.n=new G(0,1,0))}else if(0>b.y)h=(c.y+e-a.y)/b.y,k=(c.y-e-a.y)/b.y,h>d.t&&(d=new Uj,d.t=h,d.p=new G(a.x+b.x*d.t,c.y+e,a.z+b.z*d.t),d.n=new G(0,1,0)),k<g.t&&(g=new Uj,g.t=k,g.p=new G(a.x+b.x*g.t,c.y-e,a.z+b.z*g.t),g.n=new G(0,-1,0));else if(a.y>c.y+e||a.y<c.y-e)return null;if(d.t>g.t)return null;d.Qa=!0;g.Qa=!1;return d}
function Xj(a,b,c,d,e){var h=new G(c.x,NaN,c.z),g=new G,k=new G,l=new M(c.z-a.z,c.x-a.x);var m=new M(b.z,b.x);var n=m.pa(1);l=ld(l,m);h.y=a.y+b.y/n*l;h.y>c.y+e?(h.y=c.y+e,m=jc((new G(c.x,c.y+e,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):h.y<c.y-e?(h.y=c.y-e,m=jc((new G(c.x,c.y-e,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):g.set(a.x+m.y*l,h.y,a.z+m.x*l);nd(h,g,k);m=k.pa(1);if(m<d){l=n=null;var r=ic(new G(a.x-c.x,0,a.z-c.z),new G(b.x,0,b.z),d);if(r){var p=new Uj;p.t=r.Ha;p.p=new G(a.x+
b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t);p.p.y<=c.y+e&&p.p.y>=c.y-e&&(p.n=new G(p.p.x-c.x,0,p.p.z-c.z),p.n.pa(1),p.Qa=!0,n=p);p=new Uj;p.t=r.yc;p.p=new G(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t);p.p.y<=c.y+e&&p.p.y>=c.y-e&&(p.n=new G(p.p.x-c.x,0,p.p.z-c.z),p.n.pa(1),p.Qa=!1,l=p)}if(!n||!l)if(r=hc(a,b,new G(c.x,c.y+e,c.z),d))n||(p=new Uj,p.t=r.Ha,p.p=new G(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y>c.y+e&&(p.n=new G(p.p.x-c.x,p.p.y-(c.y+e),p.p.z-c.z),p.n.pa(1),p.Qa=!0,n=p)),l||(p=new Uj,p.t=r.yc,p.p=new G(a.x+
b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y>c.y+e&&(p.n=new G(p.p.x-c.x,p.p.y-(c.y+e),p.p.z-c.z),p.n.pa(1),p.Qa=!1,l=p));if(!n||!l)if(r=hc(a,b,new G(c.x,c.y-e,c.z),d))n||(p=new Uj,p.t=r.Ha,p.p=new G(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y<c.y-e&&(p.n=new G(p.p.x-c.x,p.p.y-(c.y-e),p.p.z-c.z),p.n.pa(1),p.Qa=!0,n=p)),l||(p=new Uj,p.t=r.yc,p.p=new G(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y<c.y-e&&(p.n=new G(p.p.x-c.x,p.p.y-(c.y-e),p.p.z-c.z),p.n.pa(1),p.Qa=!1,l=p));if(n&&l)return{sf:n,Uc:l}}return{ah:g,
Xl:h,Vd:k,ti:m,Wl:d}}function Yj(a,b,c,d){b=hc(d,c,a,b);if(!b)return null;var e=new Uj;e.t=-b.yc;e.p=d;e.n=(new G(a.x-(d.x+c.x*b.yc),a.y-(d.y+c.y*b.yc),a.z-(d.z+c.z*b.yc))).round();e.n.pa(1);e.Qa=!0;return e}
function Zj(a,b,c,d,e){var h=jc(c,e);c=new G(c.x-e.x*h,c.y-e.y*h,c.z-e.z*h);d=new G(d.x-a.x,d.y-a.y,d.z-a.z);var g=jc(d,e);d.set(d.x-e.x*g,d.y-e.y*g,d.z-e.z*g);b=ic(d,c,b);if(!b)return null;g=new Uj;g.t=-b.yc;g.p=(new G(a.x+d.x+e.x*h*g.t,a.y+d.y+e.y*h*g.t,a.z+d.z+e.z*h*g.t)).round();g.n=new G(-(d.x+c.x*b.yc),-(d.y+c.y*b.yc),-(d.z+c.z*b.yc));g.n.pa(1);g.Qa=!0;return g}
function Pj(a,b,c,d,e,h,g,k){if(0==c&&0==g)return c=nd(a,e,new G(0,0,0)),g=nd(d,k,new G(0,0,0)),0==g.length()?h=null:(c=ic(c,g,b+h))?(a=new G(a.x+d.x*c.Ha,a.y+d.y*c.Ha,a.z+d.z*c.Ha),e=new G(e.x+k.x*c.Ha,e.y+k.y*c.Ha,e.z+k.z*c.Ha),k=new Uj,k.t=c.Ha,b=h/(h+b),d=1-b,k.p=(new G(e.x*d+a.x*b,e.y*d+a.y*b,e.z*d+a.z*b)).round(),k.n=new G((k.p.x-e.x)/h,(k.p.y-e.y)/h,(k.p.z-e.z)/h),h=k):h=null,h;var l=new G(a.x-e.x,0,a.z-e.z),m=new G(d.x-k.x,0,d.z-k.z);if(0==m.length())return null;l=ic(l,m,b+h);if(!l)return null;
var n=new G(a.x+d.x*l.Ha,a.y+d.y*l.Ha,a.z+d.z*l.Ha);m=new G(e.x+k.x*l.Ha,e.y+k.y*l.Ha,e.z+k.z*l.Ha);var r=h/(h+b),p=1-r;n=new G(m.x*p+n.x*r,m.y*p+n.y*r,m.z*p+n.z*r);n.round();if(n.y>m.y+g){l=new G(a.x-e.x,a.y-c-(e.y+g),a.z-e.z);m=nd(d,k,new G(0,0,0));l=ic(l,m,b+h);if(!l)return null;n=new G(a.x+d.x*l.Ha,a.y-c+d.y*l.Ha,a.z+d.z*l.Ha);m=new G(e.x+k.x*l.Ha,e.y+g+k.y*l.Ha,e.z+k.z*l.Ha);e=new Uj;e.t=l.Ha;r=h/(h+b);p=1-r;e.p=(new G(m.x*p+n.x*r,(m.y+g)*p+(n.y-c)*r,m.z*p+n.z*r)).round();e.n=new G((e.p.x-m.x)/
h,(e.p.y-(m.y+g))/h,(e.p.z-m.z)/h)}else if(n.y<m.y-g){l=new G(a.x-e.x,a.y+c-(e.y-g),a.z-e.z);m=nd(d,k,new G(0,0,0));l=ic(l,m,b+h);if(!l)return null;n=new G(a.x+d.x*l.Ha,a.y+c+d.y*l.Ha,a.z+d.z*l.Ha);m=new G(e.x+k.x*l.Ha,e.y-g+k.y*l.Ha,e.z+k.z*l.Ha);e=new Uj;e.t=l.Ha;r=h/(h+b);p=1-r;e.p=(new G(m.x*p+n.x*r,(m.y-g)*p+(n.y+c)*r,m.z*p+n.z*r)).round();e.n=new G((e.p.x-m.x)/h,(e.p.y-(m.y-g))/h,(e.p.z-m.z)/h)}else e=new Uj,e.t=l.Ha,e.p=n,e.n=new G((e.p.x-m.x)/h,0,(e.p.z-m.z)/h);return e}
Bg.prototype.cf=function(a,b,c,d){c=this.y+c;if(0<=d.y)var e=null;else{var h=new Uj;h.t=-(a.y-c-b)/d.y;h.p=(new G(a.x+d.x*h.t,a.y-b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new G(0,1,0);e=h}if(!e)return null;if(0==Dc(e.p.z,e.p.x,this.ga).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ga.length;l++){var m=this.ga[l];e=new G(m.f,c,m.i);var n=new G(m.A-m.f,0,m.B-m.i);n.scale(1/m.length);(e=Zj(a,b,d,e,n))?(n=m.getParameter(e.p.z,e.p.x),!(0>n||n>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.ga.length-1)+1:h|3<<l-1}for(l=0;l<this.ga.length;l++)h&1<<l||(m=this.ga[l],(e=Yj(a,b,d,new G(m.A,c,m.B)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
Cg.prototype.cf=function(a,b,c,d){c=this.y-c;if(0>=d.y)var e=null;else{var h=new Uj;h.t=-(c-a.y-b)/-d.y;h.p=(new G(a.x+d.x*h.t,a.y+b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new G(0,-1,0);e=h}if(!e)return null;if(0==Dc(e.p.z,e.p.x,this.ga).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ga.length;l++){var m=this.ga[l];e=new G(m.f,c,m.i);var n=new G(m.A-m.f,0,m.B-m.i);n.scale(1/m.length);(e=Zj(a,b,d,e,n))?(n=m.getParameter(e.p.z,e.p.x),!(0>n||n>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.ga.length-1)+1:h|3<<l-1}for(l=0;l<this.ga.length;l++)h&1<<l||(m=this.ga[l],(e=Yj(a,b,d,new G(m.A,c,m.B)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
zg.prototype.cf=function(a,b,c,d){var e=this.V,h=this.l-c;c=this.u+c;if(0<=L(e,e.i+d.z,e.f+d.x))var g=null;else{var k=new G(e.B-e.i,0,e.f-e.A);k.scale(1/e.length);var l=jc(d,k),m=new Uj;m.t=-(L(e,a.z,a.x)-b)/l;m.p=(new G(a.x-k.x*b+d.x*m.t,a.y-k.y*b+d.y*m.t,a.z-k.z*b+d.z*m.t)).round();m.n=k;g=m}if(!g)return null;k=0;var n=e.getParameter(g.p.z,g.p.x);0>n&&(k|=1);g.p.y>c&&(k|=2);n>e.length&&(k|=4);g.p.y<h&&(k|=8);if(0==k)return g.item=this,g;if(0==b)return null;k=0;l=null;m=Number.POSITIVE_INFINITY;
g=new G(e.f,h,e.i);n=new G(0,1,0);g=Zj(a,b,d,g,n);g?!(g.p.y<h||g.p.y>c)&&g.t<m&&(m=g.t,l=g):k|=9;g=new G(e.f,c,e.i);n=new G(e.A-e.f,0,e.B-e.i);n.scale(1/e.length);(g=Zj(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<m&&(m=g.t,l=g)):k|=3;g=new G(e.A,c,e.B);n=new G(0,-1,0);g=Zj(a,b,d,g,n);g?!(g.p.y>c||g.p.y<h)&&g.t<m&&(m=g.t,l=g):k|=6;g=new G(e.A,h,e.B);n=new G(e.f-e.A,0,e.i-e.B);n.scale(1/e.length);(g=Zj(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<m&&(m=g.t,
l=g)):k|=18;0==(k&1)&&(g=new G(e.f,c,e.i),(g=Yj(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&2)&&(g=new G(e.A,c,e.B),(g=Yj(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&4)&&(g=new G(e.A,h,e.B),(g=Yj(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&8)&&(g=new G(e.f,h,e.i),(g=Yj(a,b,d,g))&&g.t<m&&(l=g));return l?(l.item=this,l):null};
Bg.prototype.Lf=function(a,b,c,d){c=this.y+c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ga.length;k++){e=this.ga[k];var l=L(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new G(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new G(e.f,c,e.i):h>e.length?e=new G(e.A,c,e.B):(h/=e.length,g=1-h,e=new G(e.f*g+e.A*h,c,e.i*g+e.B*h),e.round()));c=new G(a.x-e.x,a.y-e.y,a.z-e.z);c.pa(1);c.d=jc(e,c)+b;a=jc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Cg.prototype.Lf=function(a,b,c,d){c=this.y-c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ga.length;k++){e=this.ga[k];var l=L(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new G(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new G(e.f,c,e.i):h>e.length?e=new G(e.A,c,e.B):(h/=e.length,g=1-h,e=new G(e.f*g+e.A*h,c,e.i*g+e.B*h),e.round()));c=new G(a.x-e.x,a.y-e.y,a.z-e.z);c.pa(1);c.d=jc(e,c)+b;a=jc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
zg.prototype.Lf=function(a,b,c,d){var e=this.l-c,h=this.u+c;c=null;var g=this.V;var k=g.getParameter(a.z,a.x);if(0>k)k=new G(g.f,a.y,g.i),k.y>h?k.y=h:k.y<e&&(k.y=e);else if(k>g.length)k=new G(g.A,a.y,g.B),k.y>h?k.y=h:k.y<e&&(k.y=e);else{k/=g.length;var l=1-k;k=new G(g.f*l+g.A*k,a.y,g.i*l+g.B*k);k.y>h?k.y=h:k.y<e?k.y=e:(c=new G(g.B-g.i,0,g.f-g.A),c.scale(1/g.length));k.round()}null==c&&(c=new G(a.x-k.x,a.y-k.y,a.z-k.z),c.pa(1));c.d=jc(k,c)+b;a=jc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Bg.prototype.sj=function(a,b){var c=cb(.5*Hj.y,b.y,a.y-this.y);if(!c)return null;var d=new Uj;d.t=c.yc;if(0>d.t)return null;d.p=(new G(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=q(this.ga);for(b=a.next();!b.done;b=a.next())if(0>L(b.value,d.p.z,d.p.x))return null;d.item=this;d.n=new G(0,1,0);return d};
Cg.prototype.sj=function(a,b){if(a.y>=this.y)return null;var c=cb(.5*Hj.y,b.y,a.y-this.y);if(!c)return null;var d=new Uj;d.t=c.Ha;if(0>d.t)return null;d.p=(new G(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=q(this.ga);for(b=a.next();!b.done;b=a.next())if(0>L(b.value,d.p.z,d.p.x))return null;d.item=this;d.n=new G(0,-1,0);return d};
zg.prototype.sj=function(a,b){var c=L(this.V,a.z,a.x);if(0>c)return null;var d=Sc(this.V,1),e=d.x*b.z+d.y*b.x;if(0<=e)return null;var h=new Uj;h.t=-c/e;if(0>h.t)return null;h.p=(new G(a.x+b.x*h.t,a.y+.5*(2*b.y+Hj.y*h.t)*h.t,a.z+b.z*h.t)).round();if(h.p.y>=this.u||h.p.y<this.l)return null;a=this.V.getParameter(h.p.z,h.p.x);if(0>a||a>=this.V.length)return null;h.item=this;h.n=new G(d.y,0,d.x);return h};
Bg.prototype.Ei=function(a){for(var b=q(this.ga),c=b.next();!c.done;c=b.next())c=c.value,a.Ea(c.A,this.y,c.B)};Cg.prototype.Ei=function(a){for(var b=q(this.ga),c=b.next();!c.done;c=b.next())c=c.value,a.Ea(c.A,this.y,c.B)};zg.prototype.Ei=function(a){a.Ea(this.V.f,this.l,this.V.i);a.Ea(this.V.A,this.u,this.V.B)};
function ak(){if(this.oa){for(var a=new Gd,b=q(this.oa),c=b.next();!c.done;c=b.next())c.value.Ei(a);this.vh=mf(a.C,a.m,a.G,a.v);a=q(this.vh);for(b=a.next();!b.done;b=a.next())b=b.value,b.fd.push.apply(b.fd,da(this.oa))}}function bk(){if(this.vh){for(var a=q(this.vh),b=a.next();!b.done;b=a.next())b=b.value,b.fd.splice(b.fd.indexOf(this.oa[0]),this.oa.length);delete this.vh}};function ck(){this.height=this.width=2;this.depth=this.color=null}
ck.prototype.create=function(){this.object=v.createFramebuffer();v.bindFramebuffer(v.FRAMEBUFFER,this.object);var a=this.color=new t.Ud;a.width=this.width;a.height=this.height;a.Mh=v.RGBA8;a.format=v.RGBA;a.type=v.UNSIGNED_BYTE;a.Je=v.NEAREST;a.Yf=v.NEAREST;a.create();v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,a.object,0);a=this.depth=v.createRenderbuffer();v.bindRenderbuffer(v.RENDERBUFFER,a);v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH24_STENCIL8,this.width,this.height);
v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.RENDERBUFFER,a)};function dk(a){Uf.call(this,a);this.Ga=new S;this.pitch=this.heading=0;this.Ig=112;this.ud=fc(40);this.Jl=!1;this.ei=8E3}dk.prototype=Object.create(Uf.prototype);dk.prototype.constructor=dk;dk.prototype.create=function(){var a=this.Ej=new Uf;a.Ga=this.O;T(a,this);a=this.Fj=new Uf;a.Ga=this.O;T(a,this);return this};
dk.prototype.step=function(){this.Ig+=ye.a;0>this.Ig&&(this.Ig=0);this.transform.m32=Math.pow(1.125,this.Ig);ye.d[2]&&(this.heading-=4E6*ye.tc.x,this.pitch+=4E6*ye.tc.y);var a=gc(this.heading),b=gc(this.pitch);td(this.Ga);this.Ga.rotate(a,b,0);a=this.Ga.Rf();var c=this.Ga.Sf();b=this.Ga.me();if(ye.d[1]){var d=2*Math.tan(this.ud)*this.transform.m32/t.canvas.height,e=-ye.tc.x*d;d*=ye.tc.y;this.Ga.H+=e*a.x+d*c.x;this.Ga.m31+=e*a.y+d*c.y;this.Ga.m32+=e*a.z+d*c.z}c=new G(0,0,0);ze.d.KeyW&&--c.z;ze.d.KeyS&&
(c.z+=1);ze.d.KeyA&&--c.x;ze.d.KeyD&&(c.x+=1);if(e=c.length())c.scale(this.transform.m32/(60*e)),this.Ga.H+=c.x*a.x+c.z*b.x,this.Ga.m31+=c.x*a.y+c.z*b.y,this.Ga.m32+=c.x*a.z+c.z*b.z;a=this.Ej;td(a.transform);a.transform.H=-this.ei;a.transform.rotate(Math.atan(.5*-this.ei/this.transform.m32),0,0);a.ud=this.ud;a=this.Fj;td(a.transform);a.transform.H=this.ei;a.transform.rotate(Math.atan(.5*this.ei/this.transform.m32),0,0);a.ud=this.ud;Uf.prototype.step.call(this);return this};t.Animation=function(){t.Node.call(this);this.length=0;this.Pb=NaN;this.Eg={}};t.Animation.prototype=Object.create(Node.prototype);f=t.Animation.prototype;f.constructor=t.Animation;f.step=function(){Node.prototype.step.call(this)};f.play=function(){this.Pb=t.h};f.key=function(a,b,c){var d=this.Eg[a];d||(d=this.Eg[a]=new ek);return d.key(b,c)};f.print=function(){console.log("{");console.log("let a = new NG.Animation();");for(var a in this.Eg)this.Eg.hasOwnProperty(a)&&this.Eg[a].print(a);console.log("}")};
t.Animation.S=function(a,b){b.reset();b.translate(a[0],a[1],a[2]);b.rotate(a[3],a[4],a[5]);return b};function ek(){this.keys=new db(fk)}ek.prototype.key=function(a,b){var c=this.keys.get(a);c||(c=new gk,c.t=a,this.keys.add(c));c.Ab=b;return c};ek.prototype.print=function(a){for(var b=0;b<this.keys.elements.length;b++){var c=this.keys.elements[b];console.log("a.key('"+a+"', "+c.t+", "+c.Ab+");")}};function gk(){this.Ab=this.t=0}
function fk(a,b){return isNaN(a)?a.t<b.t?-1:a.t>b.t?1:0:a<b.t?-1:a>b.t?1:0};function Ai(a,b,c,d,e,h){t.Node.call(this);this.c=new G(a.f,b+112500,a.i);this.pd=-Infinity;this.ph=NaN;this.open=this.state=0;e.ma!=h.ma&&(this.Vh=Math.max(e.ma,h.ma));T(this,t.Ff);var g=new bg(t.g.oe.get("bayDoor01"));g.transform.H=this.c.x;g.transform.m31=this.c.y;g.transform.m32=this.c.z;g.transform.I=-a.fa;g.transform.M=a.$;g.transform.K=-a.$;g.transform.m22=-a.fa;T(g,t.Ff);g.create();Ld(g,e.ia);var k=q(g.hd);for(b=k.next();!b.done;b=k.next())b=b.value,b.rh=!0,b.D=t.g.qa.get("physical"),b.ba=
t.g.R.get("BayDoor01"),b.X=ah,b.Na=["portalLightIndex",e.Me,!0,"color",$c,!1];this.Uh=g;this.oc=c;this.se=e;c=new bg(t.g.oe.get("bayDoor01"));c.transform.H=this.c.x;c.transform.m31=this.c.y;c.transform.m32=this.c.z;c.transform.I=a.fa;c.transform.M=-a.$;c.transform.K=a.$;c.transform.m22=a.fa;T(c,t.Ff);c.create();Ld(c,h.ia);e=q(c.hd);for(b=e.next();!b.done;b=e.next())b=b.value,b.rh=!0,b.D=t.g.qa.get("physical"),b.ba=t.g.R.get("BayDoor01"),b.X=ah,b.Na=["portalLightIndex",h.Me,!0,"color",$c,!1];this.Th=
c;this.Gc=d;this.re=h;this.oa=[];h=[new M(-6250,-112500),new M(6250,-112500),new M(6250,112500),new M(-6250,112500)];for(d=0;d<h.length;d++)h[d]=a.lb(h[d].x,h[d].y);a=[];d=h[h.length-1];h=q(h);for(c=h.next();!c.done;c=h.next())c=c.value,a.push(new Ac(d.x,d.y,c.x,c.y)),d=c;this.oa.push(new Cg(a,this.c.y-112500));this.oa.push(new zg(Uc(a[0]),this.c.y-112500,this.c.y+112500),new zg(Uc(a[2]),this.c.y-112500,this.c.y+112500));a=q(this.oa);for(d=a.next();!d.done;d=a.next())d=d.value,d.item=this,d.Ng();
ak.call(this);this.update()}Ai.prototype=Object.create(t.Node.prototype);f=Ai.prototype;f.constructor=Ai;
f.step=function(){if(!(t.h%4)){var a=Infinity,b=0;this.se.ma<=Kh&&this.se.ma>=Lh&&b++;this.re.ma<=Kh&&this.re.ma>=Lh&&b++;b||this.remove();for(var c=q(t.b.Zc),d=c.next();!d.done;d=c.next())d=d.value,d.hb&&(d=Math.abs(d.c.x-this.c.x)+Math.abs(d.c.y-this.c.y)+Math.abs(d.c.z-this.c.z),d<a&&(a=d));t.b.ta&&(c=t.b.ta,c=Math.abs(c.c.x-this.c.x)+Math.abs(c.c.y-this.c.y)+Math.abs(c.c.z-this.c.z),c<a&&(a=c));if(0==this.state&&0==this.open)2==b&&5E5>a&&(this.state=1,this.pd=4*Math.floor(t.h/4),this.ph=NaN);
else if(1==this.state&&1==this.open)if(isNaN(this.Vh))1E6<=a&&(isNaN(this.ph)&&(this.ph=t.h),0<=t.h-this.ph&&(this.state=0,this.pd=t.h));else if(1E6<=a||t.b.sa.Fc.ma==this.Vh)this.state=0,this.pd=t.h;a=(t.h-this.pd)/36;if(!(1<a)){0==this.state?(this.open=1-Math.pow(a,2),1==a&&t.b.sa.Fc.ma==this.Vh&&(Lh=this.Vh)):1==this.state&&(this.open=Math.pow(a,2));a=q(this.oa);for(b=a.next();!b.done;b=a.next())b.value.pd=t.h;this.update()}}};
f.update=function(){var a=this.oc.l+(this.oc.height-12500)*this.open;this.oc.u=this.Gc.u=this.oa[0].y=this.oa[1].l=this.oa[2].l=a;this.oa[0].ca.y=this.oa[1].ca.l=this.oa[2].ca.l=a;this.Uh.transform.m31=this.Th.transform.m31=a+112500;this.Uh.hd[0].Na[1]=this.se.Me;this.Th.hd[0].Na[1]=this.re.Me;this.Uh.hd[0].Na[4]=this.se.style.Lc;this.Th.hd[0].Na[4]=this.re.style.Lc};f.Va=function(){t.D.N("clipY",this.c.y+225E3,!1)};
f.remove=function(){this.Uh.remove();this.Th.remove();bk.call(this);for(var a=q(this.oa),b=a.next();!b.done;b=a.next())b.value.pd=t.h;t.Node.prototype.remove.call(this)};
function zi(a,b,c,d){t.xa.call(this);this.c=new G(a.f,b+62500,a.i);this.transform.H=this.c.x;this.transform.m31=this.c.y;this.transform.m32=this.c.z;this.transform.I=-a.fa;this.transform.M=a.$;this.transform.K=-a.$;this.transform.m22=-a.fa;this.transform.I*=87500;this.transform.L*=87500;this.transform.M*=87500;this.transform.J*=62500;this.transform.m11*=62500;this.transform.m12*=62500;T(this,t.Re);this.se=c;this.re=d;this.oa=[];b=[new M(-625,-87500),new M(625,-87500),new M(625,87500),new M(-625,87500)];
for(c=0;c<b.length;c++)b[c]=a.lb(b[c].x,b[c].y);c=[];d=b[b.length-1];var e=q(b);for(b=e.next();!b.done;b=e.next())b=b.value,c.push(new Ac(d.x,d.y,b.x,b.y)),d=b;this.oa.push(new zg(Uc(c[0]),this.c.y-112500,this.c.y+112500),new zg(Uc(c[2]),this.c.y-112500,this.c.y+112500));for(b=0;2>b;b++)c=this.oa[b],c.item=this,c.flags|=Rj,c.Ng();this.oa[0].aa=this.se.index;this.oa[1].aa=this.re.index;b=[new M(-9375,-87500),new M(9375,-87500),new M(9375,87500),new M(-9375,87500)];for(c=0;c<b.length;c++)b[c]=a.lb(b[c].x,
b[c].y);a=[];c=b[b.length-1];d=q(b);for(b=d.next();!b.done;b=d.next())b=b.value,a.push(new Ac(c.x,c.y,b.x,b.y)),c=b;this.oa.push(new zg(Uc(a[0]),this.c.y-112500,this.c.y+112500),new zg(Uc(a[2]),this.c.y-112500,this.c.y+112500));for(a=2;4>a;a++)this.oa[a].flags|=Sj;ak.call(this)}zi.prototype=Object.create(t.xa.prototype);zi.prototype.constructor=zi;zi.S=function(a,b){return a.depth-b.depth};zi.prototype.update=function(){};
zi.prototype.gh=function(){return!this.Ia||this.se.ia.va<t.h&&this.re.ia.va<t.h?!1:!0};zi.Oe=function(){t.zb(kg);t.cb(t.g.qa.get("physical"));t.$b(0,t.g.R.get("Window01"));bh.bind();t.ub(1);t.Zb(1);t.D.N("color",$c);t.D.N("architectureLighting",1,!0);t.D.N("lightingFancy",t.Oa.lightingFancy,!0)};
zi.prototype.Va=function(){t.D.N("modelMatrix",this.O);t.D.N("portalLightIndex",this.se.Me,!0);t.D.N("ambientLight",this.se.ia.tb,!1);v.drawArrays(v.TRIANGLE_FAN,lg(0,1),4);var a=(new S).set(this.O);a.I=-a.I;a.L=-a.L;a.M=-a.M;a.K=-a.K;a.m21=-a.m21;a.m22=-a.m22;t.D.N("modelMatrix",a);t.D.N("portalLightIndex",this.re.Me,!0);t.D.N("ambientLight",this.re.ia.tb,!1);v.drawArrays(v.TRIANGLE_FAN,lg(0,1),4)};
zi.prototype.remove=function(){bk.call(this);for(var a=q(this.oa),b=a.next();!b.done;b=a.next())b.value.pd=t.h;t.xa.prototype.remove.call(this)};
function hk(a,b,c){t.Ua.call(this,"crate");this.vb=240;this.c.x=a;this.c.y=b+5E4;this.c.z=c;Ed(this.transform,this.c);a=[new G(-5E4,0,-5E4),new G(-5E4,0,5E4),new G(5E4,0,5E4),new G(5E4,0,-5E4)];b=q(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.lb(c,c),c.round();a=[new Ac(a[0].z,a[0].x,a[1].z,a[1].x),new Ac(a[1].z,a[1].x,a[2].z,a[2].x),new Ac(a[2].z,a[2].x,a[3].z,a[3].x),new Ac(a[3].z,a[3].x,a[0].z,a[0].x)];this.oa=[];this.oa.push(new Bg(a,this.c.y+5E4),new Cg(a,this.c.y-5E4));a=Xc(a);
this.oa.push(new zg(a[0],this.c.y-5E4,this.c.y+5E4),new zg(a[1],this.c.y-5E4,this.c.y+5E4),new zg(a[2],this.c.y-5E4,this.c.y+5E4),new zg(a[3],this.c.y-5E4,this.c.y+5E4));a=q(this.oa);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;ak.call(this)}hk.prototype=Object.create(t.Ua.prototype);f=hk.prototype;f.constructor=hk;
f.create=function(){var a=this.Sb=new bg(t.g.oe.get("lootBox"));a.Ga=this.O;T(a,this);a.create();this.Ub=a.src.Ub;Ld(a,this.ia);Md(a,6E4);t.b.Gg.push(this);ik.push(this);t.Ua.prototype.create.call(this)};
f.step=function(){if(t.b.ta){var a=nd(t.b.ta.c,this.c,new G(0,0,0));a.y=0;a.pa(1);this.transform.I=a.z;this.transform.M=-a.x;this.transform.K=a.x;this.transform.m22=a.z;this.transform.rotate(fc(-15),0,0)}10==t.h-this.Of&&this.wi();t.h==this.Pd+4?(this.Sb.D=t.g.qa.get("flash"),this.Sb.X=t.g.yb.get("flashWhite")):t.h==this.Pd+6?this.Sb.X=t.g.yb.get("flashRed"):t.h==this.Pd+8&&(delete this.Sb.X,delete this.Sb.D);t.Ua.prototype.step.call(this)};
f.jf=function(a){isNaN(this.Of)&&(this.Pd=t.h,this.vb-=a,0>=this.vb&&(this.Of=t.h))};
f.wi=function(){if(t.b.ta){for(var a=[],b=q(t.b.ta.Xa.Jd),c=b.next();!c.done;c=b.next()){var d=c.value;c=a;var e=d.ce-jk(d);d=d.constructor.ri;for(e/=d.Za;1<=e;)c.push(new kk(d)),e--;ub(1/e)&&c.push(new kk(d))}a=q(a);for(b=a.next();!b.done;b=a.next())b=b.value,b.c.set(this.c.x,this.c.y,this.c.z),b.c.z+=5E4*(E(w)-.5),b.c.x+=5E4*(E(w)-.5),b.w.set(6E3*(E(w)-.5),9E3*(E(w)+1),6E3*(E(w)-.5)),T(b,t.yl),b.create()}t.g.ja.get("hit02").play({gain:1});this.remove()};
f.remove=function(){t.Ua.prototype.remove.call(this);this.Sb.remove();t.b.Gg.splice(t.b.Gg.indexOf(this),1);lk.call(this);bk.call(this);for(var a=q(this.oa),b=a.next();!b.done;b=a.next())b.value.pd=t.h};
function mk(a,b,c){t.Ua.call(this,"barrel");this.vb=160;this.c.x=a;this.c.y=b+65E3;this.c.z=c;Ed(this.transform,this.c);a=[new G(-5E4,0,-5E4),new G(-5E4,0,5E4),new G(5E4,0,5E4),new G(5E4,0,-5E4)];b=q(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.lb(c,c),c.round();a=[new Ac(a[0].z,a[0].x,a[1].z,a[1].x),new Ac(a[1].z,a[1].x,a[2].z,a[2].x),new Ac(a[2].z,a[2].x,a[3].z,a[3].x),new Ac(a[3].z,a[3].x,a[0].z,a[0].x)];this.oa=[];this.oa.push(new Bg(a,this.c.y+5E4),new Cg(a,this.c.y-5E4));a=
Xc(a);this.oa.push(new zg(a[0],this.c.y-5E4,this.c.y+5E4),new zg(a[1],this.c.y-5E4,this.c.y+5E4),new zg(a[2],this.c.y-5E4,this.c.y+5E4),new zg(a[3],this.c.y-5E4,this.c.y+5E4));a=q(this.oa);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;ak.call(this)}mk.prototype=Object.create(t.Ua.prototype);f=mk.prototype;f.constructor=mk;
f.create=function(){var a=this.Sb=new bg(t.g.oe.get("nitroBarrel"));a.Ga=this.O;T(a,this);a.create();this.Ub=a.src.Ub;Ld(a,this.ia);Md(a,6E4);t.b.zg.push(this);ik.push(this);t.Ua.prototype.create.call(this)};
f.step=function(){if(isNaN(this.Of)){if(t.b.ta){var a=nd(t.b.ta.c,this.c,new G(0,0,0));a.y=0;a.pa(1);this.transform.I=a.z;this.transform.M=-a.x;this.transform.K=a.x;this.transform.m22=a.z;this.transform.rotate(fc(15),0,0)}a=1+.25*Math.sin(t.h*Math.PI/3)*(1-this.vb/160);this.vb=Math.min(this.vb+2,160);td(this.Sb.transform);this.Sb.transform.scale(a,a,a);t.h==this.Pd+4?(this.Sb.D=t.g.qa.get("flash"),this.Sb.X=t.g.yb.get("flashWhite")):t.h==this.Pd+6?this.Sb.X=t.g.yb.get("flashRed"):t.h==this.Pd+8&&
(delete this.Sb.X,delete this.Sb.D);t.Ua.prototype.step.call(this)}else{a=t.h-this.Of;var b=1+1/12*a;td(this.Sb.transform);this.Sb.transform.scale(b,b,b);6==a&&this.wi()}};f.jf=function(a){isNaN(this.Of)&&(this.Pd=t.h,this.vb-=a,0>=this.vb&&(this.Of=t.h))};
f.wi=function(){function a(d){var e=nd(d.c,this.c,new G),h=e.pa(1);if(d instanceof nk){var g=(h-5E5)/2E6;g=1-g;g=Ya(g,0,1);d.Ja+=fc(10)*g}5E5<=h||(d instanceof Z&&(d.vb=0,d.zh()),d instanceof nk&&(d.og=Number.NEGATIVE_INFINITY,d.Ug=!0,d.Ja+=fc(10)),h=1E4,e.y+=1,d.w.x+=e.x*h,d.w.y+=e.y*h,d.w.z+=e.z*h)}t.g.ja.get("explode01").play({gain:1});for(var b=q(t.b.Zc),c=b.next();!c.done;c=b.next())c=c.value,ok(c,this.c),a.call(this,c);b=q(t.b.zg);for(c=b.next();!c.done;c=b.next())c=c.value,5E5>nd(c.c,this.c,
new G(0,0,0)).pa(1)&&c.jf(Number.POSITIVE_INFINITY);b=q(t.b.Gg);for(c=b.next();!c.done;c=b.next())c=c.value,5E5>nd(c.c,this.c,new G(0,0,0)).pa(1)&&c.jf(Number.POSITIVE_INFINITY);t.b.ta&&a.call(this,t.b.ta);c=new pk(1E5);c.transform.H=this.c.x;c.transform.m31=this.c.y;c.transform.m32=this.c.z;T(c,t.xd);c.create();this.remove()};
f.remove=function(){t.Ua.prototype.remove.call(this);this.Sb.remove();t.b.zg.splice(t.b.zg.indexOf(this),1);lk.call(this);bk.call(this);for(var a=q(this.oa),b=a.next();!b.done;b=a.next())b.value.pd=t.h};function qk(a){t.Node.call(this,"GunManager "+a.name);this.la=a;this.Jd=[];this.F=null;this.action="ready";this.W=NaN;this.focus=0;this.qc=!1;this.Kg=null;this.Db=this.fc=this.ed=0;this.ib=null;this.mf=this.lf=0;this.rc=[];this.Ic=0}qk.prototype=Object.create(t.Node.prototype);f=qk.prototype;f.constructor=qk;
f.create=function(){var a=this.Ke=new t.xa("muzzleFlare");hg.call(a);a.Va=jg;a.D=t.g.qa.get("image");a.ba=t.g.R.get("muzzleFlare01");a.X=new Pd;a.X.Ca=1;a.color=new R(255,255,255,0);a.$a=12500;a.Ia=0;a.Ga=this.la.yd.O;T(a,t.Od)};
f.step=function(){t.h==this.cl+1&&(this.Qf.Xb.x-=this.Uj,this.Qf.Xb.y-=this.Uj,this.Qf.Xb.z-=this.Uj,this.cl=NaN,this.Qf=null);if(this.F){var a=this.la;a.vg=null;var b=a.Ac.O,c=new G(b.H,b.m31,b.m32);b=new G(-b.K,-b.m21,-b.m22);for(var d=q(t.b.Zc),e=d.next();!e.done;e=d.next()){e=e.value;var h=Xj(c,b,e.c,e.Aa,e.jb);if(h.sf){h=h.sf;if(0>h.t)continue;if(1E8<=h.t)continue;h=nd(h.p,c,new G)}else{var g=h.ah.da(),k=h.ti-e.Aa;g.x+=h.Vd.x*k;g.y+=h.Vd.y*k;g.z+=h.Vd.z*k;h=nd(g,c,new G);if(0>=jc(h,b))continue}ff(c,
h,Tj)||(e.Rh=t.h)}if(c=a.Xa.F.cj(a.Ac.O))a.vg=c}--this.Ic;0>this.Ic&&(this.Ic=0);a=q(this.Jd);c=a.next();a:for(;!c.done;c=a.next())if(c=c.value,c!=this.F)for(b=q(c.Oi),d=b.next();!d.done;d=b.next())if(ze.p[d.value]){this.Kg=c;break a}ye.p[0]&&(this.fc=1);ye.r[0]&&(this.fc=0);ye.p[2]&&(this.ed=1);ye.r[2]&&(this.ed=0);this.ed||(this.focus-=1/6,0>this.focus&&(this.focus=0));ze.p.KeyR&&(this.Db=1);if(this.F)this.F[this.action].call(this);else for(rk(this),a=0;a<this.rc.length;a++)c=this.rc[a],0<c.alpha||
(this.rc.splice(a--,1),T(c,null))};
f.Va=function(){if(this.ib){var a=$c;90>t.h-this.la.Oh&&(a=0==Math.floor(t.h/3)%2?new R(255,255,255,128):new R(255,255,255,0));v.enable(v.SCISSOR_TEST);t.gc.Sc.N("viewMatrix",Fd);t.gc.Sc.upload();t.Nb(0);t.Zb(0);t.ub(2);t.zb(kg);t.cb(t.g.qa.get("physicalCardThreshold"));t.D.N("color",a);t.D.N("ambientLight",this.la.ia.tb,!1);a=this.F.constructor.wj;t.$b(0,a);var b=Math.round(a.width/2-this.ib.x+this.ib.o+this.lf),c=Math.round(a.height/2-this.ib.y+this.ib.s+this.mf);v.scissor(this.ib.o+Math.round(this.lf),
-this.ib.s-Math.round(this.mf)+t.canvas.height-this.ib.j,this.ib.a,this.ib.j);var d=new S;d.I=a.width/t.canvas.width;d.m11=-a.height/t.canvas.height;d.H=-1+2*b/t.canvas.width;d.m31=1-2*c/t.canvas.height;t.D.N("modelMatrix",d);v.drawArrays(v.TRIANGLE_FAN,0,4);v.disable(v.SCISSOR_TEST)}};function rk(a){if(!a.Kg)return!1;a.ib=null;a.ed=0;a.fc=0;a.Db=0;a.Ic=0;a.qc=!1;a.F=a.Kg;t.b.Bd();a.action="equip";a.W=t.h+1;a.Kg=null;return!0}
f.Dc=function(){var a=400*this.la.pe;a*=1-2/3*this.focus;this.lf=this.la.Jh*a;this.mf=this.la.Dc*a};qk.S=function(a,b,c,d,e,h){var g=new S;b*=1E5;c*=1E5;a*=1E5;g.rotate(fc(h),fc(e),fc(d));g.scale(1,1,1);g.translate(b,c,a);d=g;e=new S;e.I=d.m22;e.L=d.K;e.M=d.m21;e.J=d.M;e.m11=d.I;e.m12=d.L;e.K=d.m12;e.m21=d.J;e.m22=d.m11;e.H=d.m32;e.m31=d.H;e.m32=d.m31;d=e;e=new S;e.I=d.I;e.L=d.L;e.M=d.M;e.J=d.K;e.m11=d.m21;e.m12=d.m22;e.K=-d.J;e.m21=-d.m11;e.m22=-d.m12;e.H=d.H;e.m31=d.m32;e.m32=-d.m31;return e};
function sk(a){this.Qi=a;this.actions={};this.jc=this.ya=this.Da=0;this.de=this.ce=-1;this.Fi=2/3;this.yg=this.Xg=this.$e=this.eg=0}function jk(a){return a.jc+a.ya+a.Da}sk.prototype.mi=function(){return!1};sk.prototype.qg=function(){return!1};
function tk(a){var b=new G(a.H,a.m31,a.m32);a=new G(-a.K,-a.m21,-a.m22);var c=[];c.cmp=function(m,n){return m.wf>n.wf?-1:1};for(var d=q(t.b.Zc),e=d.next();!e.done;e=d.next())if(e=e.value,e.hb||!(t.h>e.W)){var h=Xj(b,a,e.c,e.Aa-this.yg,e.jb);if(h.sf){var g=h.sf;0>g.t||1E8<=g.t||(g.p.wf=1E8-g.t,g.p.item=e,Sa(c,g.p))}else{g=h.ah.da();var k=h.ti-(e.Aa-this.yg);g.x+=h.Vd.x*k;g.y+=h.Vd.y*k;g.z+=h.Vd.z*k;k=nd(h.ah,b,new G);h=k.pa(1);var l=nd(g,b,new G);0>=jc(l,a)||(l.normalize(),k=jc(k,l),l=this.Xg,5E5<
h&&(l=Math.atan(5E5*Math.tan(l)/h)),Math.acos(k)>=l||(g.wf=k-1,g.item=e,Sa(c,g)))}}a=q(c);for(c=a.next();!c.done;c=a.next())if(c=c.value,!ff(b,nd(c,b,new G)))return c;return null}
function uk(a,b,c){function d(m){m=new vk(m);m.transform.H=a.p.x;m.transform.m31=a.p.y;m.transform.m32=a.p.z;T(m,t.xd);m.create();m.step()}function e(){var m=new wk;m.Ph=120*(E(w)+.5);m.$a=2E4;m.transform.H=a.p.x;m.transform.m31=a.p.y;m.transform.m32=a.p.z;m.w.x=a.n.x;m.w.y=a.n.y;m.w.z=a.n.z;m.w.scale(2E4*E(w)+1E4);T(m,t.xd);m.create();m.step()}if(a.item instanceof Z){var h=new S,g=new G,k=new G,l=a.Ab.da();oc(l,g,k);h.fg(g);h.gg(k);h.hg(l);Ed(h,a.p);xk(a.item,h,c);T(new yk,t.xl);a.item.jf(b)}else a.item instanceof
mk?(d(31250),e(),a.item.jf(b)):a.item instanceof hk?(d(31250),e(),a.item.jf(b)):(d(12500),e(),yg(t.b.Lj,new G(2343.75*Math.round(a.p.x/2343.75),2343.75*Math.round(a.p.y/2343.75),2343.75*Math.round(a.p.z/2343.75)),a.n,Math.PI,18750,tb(16),16))}function zk(a){sk.call(this,a);this.ce=600;this.ya=this.de=30;this.Da=this.ce-this.ya;this.Fi=1;this.Xg=fc(4);this.yg=8E3}zk.prototype=Object.create(sk.prototype);zk.prototype.constructor=zk;
zk.gb={CarbineEquip02:{o:291,s:265,x:1204,y:1548,a:189,j:31},CarbineEquip03:{o:90,s:191,x:814,y:1548,a:390,j:105},CarbineEquip04:{o:126,s:152,x:0,y:1548,a:354,j:144},CarbineEquip05:{o:46,s:96,x:1012,y:255,a:434,j:200},CarbineEquip06:{o:92,s:68,x:1281,y:0,a:356,j:228},CarbineEquip07:{o:106,s:65,x:960,y:0,a:321,j:231},CarbineEquip08:{o:129,s:76,x:0,y:255,a:282,j:220},CarbineEquip09:{o:145,s:91,x:282,y:255,a:250,j:205},CarbineEquip10:{o:163,s:109,x:1231,y:670,a:220,j:187},CarbineEquip11:{o:184,s:125,
x:292,y:1047,a:220,j:171},CarbineEquip12:{o:198,s:133,x:1541,y:1047,a:253,j:163},CarbineEquip13:{o:207,s:132,x:1296,y:1047,a:245,j:164},CarbineAim01:{o:194,s:133,x:0,y:1225,a:229,j:163},CarbineAim02:{o:170,s:136,x:1247,y:1225,a:187,j:160},CarbineAim03:{o:157,s:137,x:184,y:1388,a:174,j:159},CarbineFire01:{o:209,s:131,x:1030,y:1047,a:266,j:165},CarbineFire02:{o:213,s:128,x:512,y:1047,a:246,j:168},CarbineFire03:{o:212,s:133,x:229,y:1225,a:248,j:163},CarbineAimFire01:{o:147,s:136,x:1434,y:1225,a:193,
j:160},CarbineAimFire02:{o:152,s:136,x:0,y:1388,a:184,j:160},CarbineAimFire03:{o:155,s:134,x:730,y:1225,a:178,j:162},CarbineReload01:{o:185,s:133,x:477,y:1225,a:253,j:163},CarbineReload02:{o:101,s:134,x:908,y:1225,a:339,j:162},CarbineReload03:{o:14,s:144,x:838,y:1388,a:432,j:152},CarbineReload04:{o:0,s:153,x:354,y:1548,a:460,j:143},CarbineReload05:{o:0,s:149,x:1270,y:1388,a:480,j:147},CarbineReload06:{o:0,s:139,x:358,y:1388,a:480,j:157},CarbineReload07:{o:0,s:107,x:271,y:670,a:480,j:189},CarbineReload08:{o:0,
s:41,x:0,y:0,a:480,j:255},CarbineReload09:{o:0,s:47,x:480,y:0,a:480,j:249},CarbineReload10:{o:0,s:95,x:532,y:255,a:480,j:201},CarbineReload11:{o:0,s:107,x:751,y:670,a:480,j:189},CarbineReload12:{o:0,s:111,x:311,y:860,a:480,j:185},CarbineReload13:{o:0,s:114,x:791,y:860,a:480,j:182},CarbineReload14:{o:59,s:115,x:1271,y:860,a:421,j:181},CarbineReload15:{o:200,s:109,x:1451,y:670,a:280,j:187},CarbineReload16:{o:235,s:103,x:309,y:475,a:245,j:193},CarbineReload17:{o:246,s:104,x:838,y:475,a:234,j:192},CarbineReload18:{o:241,
s:105,x:1072,y:475,a:239,j:191},CarbineReload19:{o:209,s:106,x:0,y:670,a:271,j:190},CarbineReload20:{o:172,s:99,x:1446,y:255,a:308,j:197},CarbineReload21:{o:171,s:101,x:0,y:475,a:309,j:195},CarbineReload22:{o:196,s:103,x:554,y:475,a:284,j:193},CarbineReload23:{o:164,s:105,x:1311,y:475,a:316,j:191},CarbineReload24:{o:158,s:109,x:0,y:860,a:311,j:187},CarbineReload25:{o:173,s:118,x:0,y:1047,a:292,j:178},CarbineReload26:{o:175,s:128,x:758,y:1047,a:272,j:168}};
zk.prototype.fire=function(){var a=t.h-this.W;this.Dc();if(0==a){t.g.ja.get("CarbineFire01").play({gain:.5,pitch:1.5});t.g.ja.get("CarbineFire02").play({gain:1,pitch:1.5});--this.F.ya;!this.F.ya&&this.F.Da&&(this.Db=1);t.b.Bd();this.Ic+=35;this.wc=qk.S(.053697,.319573,-.058355,-.833,.006,-179.61);var b=this.Ke;b.Ia=1;var c=255*(8*E(w)+1)/12&255;b.color.r=c;b.color.Wa=c;b.color.ka=c;b.scale=E(w)+1;b.Oc=gc(sb());c=new S;c.translate(0,-35E3,0);Bd(this.wc,c,b.transform);b=(new S).rotate(0,fc(2.5*E(w)),
0);c=(new S).rotate(0,0,E(w)*Math.PI*2);var d=Ak(this.la);Bd(d,c,d);Bd(d,b,d);b=this.F.Pe(d);b=q(b);for(c=b.next();!c.done;c=b.next())uk(c.value,72,1.2);b=new Bk("CartridgeCarbineSpent");b.hj=fc(6*(3*E(w)+1));b.transform.H-=2E3;b.transform.m31+=2100;c=new S;Bd(this.la.yd.O,this.wc,c);Bd(c,b.transform,b.transform);b.w.x-=3E3*(2*E(w)+1);b.w.z=-b.w.x;Cd(c,b.w,b.w);b.c.set(b.transform.H,b.transform.m31,b.transform.m32);b.w.add(this.la.w);pd(b.w,b.fb);T(b,t.Od);b.create();180<=this.Ic&&(this.Ic-=180,b=
new Ck,b.$a=6E4,b.transform.m31-=45E3,c=new S,Bd(this.la.yd.O,this.wc,c),Bd(c,b.transform,b.transform),b.w.y=-37500,Cd(c,b.w,b.w),b.w.add(this.la.w),pd(b.w,b.fb),b.ia=this.la.ia,T(b,t.xd),b.create(),b.step(),this.rc.push(b));3<this.rc.length&&(T(this.rc[0],null),this.rc.splice(0,1))}1==a&&(this.Ke.Ia=0);2==a&&(this.la.Ja+=fc(1));if(3<=a){if(rk(this))return;if(!this.ed&&this.fc){if(this.F.ya){this.action="fire";this.W=t.h+1;return}this.F.Da&&(this.Db=1)}this.F.he()}4<=a?this.action="ready":(a=("00"+
a).slice(-2),this.ib=this.F.constructor.gb["CarbineFire"+a]||this.F.constructor.gb.CarbineEquip13)};
zk.prototype.aimFire=function(){var a=t.h-this.W;this.Dc();if(0==a){t.g.ja.get("CarbineFire01").play({gain:.5,pitch:1.5});t.g.ja.get("CarbineFire02").play({gain:1,pitch:1.5});--this.F.ya;!this.F.ya&&this.F.Da&&(this.Db=1);t.b.Bd();this.Ic+=35;this.wc=qk.S(0,.270042,-.06106,0,0,180);var b=this.Ke;b.Ia=1;var c=255*(8*E(w)+1)/12&255;b.color.r=c;b.color.Wa=c;b.color.ka=c;b.scale=E(w)+1;b.Oc=gc(sb());c=new S;c.translate(0,-35E3,0);Bd(this.wc,c,b.transform);b=(new S).rotate(0,fc(1*E(w)),0);c=(new S).rotate(0,
0,E(w)*Math.PI*2);var d=Ak(this.la);Bd(d,c,d);Bd(d,b,d);b=this.F.Pe(d);b=q(b);for(c=b.next();!c.done;c=b.next())uk(c.value,72,1.2);b=new Bk("CartridgeCarbineSpent");b.hj=fc(6*(3*E(w)+1));b.transform.H-=2E3;b.transform.m31+=2100;c=new S;Bd(this.la.yd.O,this.wc,c);Bd(c,b.transform,b.transform);b.w.x-=3E3*(2*E(w)+1);b.w.z=-b.w.x;Cd(c,b.w,b.w);b.c.set(b.transform.H,b.transform.m31,b.transform.m32);b.w.add(this.la.w);pd(b.w,b.fb);T(b,t.Od);b.create();210<=this.Ic&&(this.Ic-=210,b=new Ck,b.$a=4E4,b.scale=
1,b.transform.m31-=45E3,c=new S,Bd(this.la.yd.O,this.wc,c),Bd(c,b.transform,b.transform),b.w.y=-2E4,Cd(c,b.w,b.w),b.w.add(this.la.w),pd(b.w,b.fb),b.ia=this.la.ia,T(b,t.xd),b.create(),b.step(),this.rc.push(b));3<this.rc.length&&(T(this.rc[0],null),this.rc.splice(0,1))}1==a&&(this.Ke.Ia=0);2==a&&(this.la.Ja+=fc(.5));if(3<=a){if(rk(this))return;if(this.ed&&this.fc){if(this.F.ya){this.action="aimFire";this.W=t.h+1;return}this.F.Da&&(this.Db=1)}}4<=a?this.action="ready":(a=("00"+a).slice(-2),this.ib=this.F.constructor.gb["CarbineAimFire"+
a]||this.F.constructor.gb.CarbineAim03)};
zk.prototype.equip=function(){var a=t.h-this.W+5;if(!rk(this))if(this.Db)this.action="reload",this.W=t.h+1;else{this.qc=this.F.ya;this.mf=this.lf=0;9==a&&(this.la.Ja+=fc(1));a=Math.floor(a/2.5);if(9<=a)if(this.F.Xf.call(this),1==this.focus){if(this.fc){if(this.F.ya){this.action="aimFire";this.W=t.h+1;return}this.F.Da&&(this.Db=1)}}else if(0==this.focus&&this.fc){if(this.F.ya){this.action="fire";this.W=t.h+1;return}this.F.Da&&(this.Db=1)}14<=a?this.action="ready":0==this.focus&&(a=("00"+a).slice(-2),
this.ib=this.F.constructor.gb["CarbineEquip"+a])}};zk.prototype.reload=function(){var a=t.h-this.W+3;this.Db=0;if(!rk(this)){this.qc=!1;this.mf=this.lf=0;3==a&&(this.F.Da+=this.F.ya,this.F.ya=0,t.b.Bd());if(60==a){this.la.Ja+=fc(1);var b=Math.min(this.F.de-this.F.ya,this.F.Da);this.F.ya+=b;this.F.Da-=b;t.b.Bd()}a=Math.floor(a/3);27<=a?this.action="ready":(a=("00"+a).slice(-2),this.ib=this.F.constructor.gb["CarbineReload"+a])}};
zk.prototype.ready=function(){this.qc=this.F.ya;if(!rk(this))if(this.Db)this.action="reload",this.W=t.h+1;else{this.Dc();this.F.Xf.call(this);if(1==this.focus){if(this.fc){if(this.F.ya){this.action="aimFire";this.W=t.h+1;return}this.F.Da&&(this.Db=1)}}else if(0==this.focus&&this.fc){if(this.F.ya){this.action="fire";this.W=t.h+1;return}this.F.Da&&(this.Db=1)}this.F.he()}};f=zk.prototype;
f.Xf=function(){this.ed&&(this.focus+=1/6,1<this.focus&&(this.focus=1));this.qc=this.F.ya;if(0<this.focus){var a=Math.floor(3*this.focus);a=("00"+a).slice(-2);this.ib=this.F.constructor.gb["CarbineAim"+a]||this.F.constructor.gb.CarbineEquip13}else this.ib=this.F.constructor.gb.CarbineEquip13};f.cj=tk;
f.Pe=function(a){var b=new G(a.H,a.m31,a.m32),c=new G(-a.K,-a.m21,-a.m22),d=1E8;if(a=ff(b,new G(c.x*d,c.y*d,c.z*d)))d=a.d;var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=q(t.b.Zc),g=h.next();!g.done;g=h.next())if(g=g.value,g.hb||!(t.h>g.W)){var k=Xj(b,c,g.c,g.Aa,g.jb).sf;!k||0>k.t||k.t>=d||(k.item=g,k.Ab=c,Sa(e,k))}b=null;d=c=NaN;e=q(e);for(h=e.next();!h.done;h=e.next())h=h.value,h.item.Kh>c||h.item.Kh==c&&h.t>d||(b=h,
c=h.item.Kh,d=h.t);e=[];b&&e.push(b);a&&e.push(a);return e};f.mi=function(){return 0>=this.Da||"reload"==this.Qi.action||10<this.ya?!1:!0};f.qg=function(){var a=jk(this);return 0>=a?2:30>a?1:0};f.he=function(){this.ya>=this.de||!this.Da?this.eg=0:(this.eg+=1,7.8<=this.eg&&(this.eg-=7.8,--this.Da,this.ya+=1))};function Dk(a){sk.call(this,a);this.ce=12;this.de=0;this.jc=1;this.ya=this.de;this.Da=this.ce-this.ya-this.jc;this.fj=!1;this.Xg=fc(0)}Dk.prototype=Object.create(sk.prototype);
Dk.prototype.constructor=Dk;
Dk.gb={ShotgunEquip01:{o:170,s:185,x:874,y:1644,a:310,j:111},ShotgunEquip02:{o:183,s:151,x:569,y:1351,a:297,j:145},ShotgunEquip03:{o:331,s:128,x:1175,y:704,a:149,j:168},ShotgunEquip04:{o:111,s:20,x:871,y:0,a:369,j:276},ShotgunEquip05:{o:140,s:0,x:0,y:0,a:340,j:296},ShotgunEquip06:{o:158,s:0,x:340,y:0,a:277,j:296},ShotgunEquip07:{o:173,s:0,x:617,y:0,a:254,j:296},ShotgunEquip08:{o:188,s:100,x:0,y:508,a:257,j:196},ShotgunEquip09:{o:195,s:152,x:1432,y:1351,a:258,j:144},ShotgunEquip10:{o:199,s:159,x:0,
y:1644,a:257,j:137},ShotgunEquip11:{o:201,s:160,x:257,y:1644,a:253,j:136},ShotgunEquip12:{o:197,s:156,x:1248,y:1500,a:254,j:140},ShotgunEquip13:{o:195,s:152,x:0,y:1500,a:254,j:144},ShotgunFire01:{o:202,s:152,x:254,y:1500,a:278,j:144},ShotgunFire02:{o:181,s:147,x:0,y:1351,a:299,j:149},ShotgunFire03:{o:175,s:133,x:0,y:884,a:305,j:163},ShotgunFire04:{o:177,s:118,x:299,y:704,a:303,j:178},ShotgunFire05:{o:182,s:112,x:651,y:508,a:298,j:184},ShotgunFire06:{o:184,s:112,x:949,y:508,a:296,j:184},ShotgunFire07:{o:183,
s:113,x:1245,y:508,a:297,j:183},ShotgunFire08:{o:181,s:116,x:0,y:704,a:299,j:180},ShotgunFire09:{o:187,s:120,x:602,y:704,a:293,j:176},ShotgunFire10:{o:200,s:125,x:895,y:704,a:280,j:171},ShotgunFire11:{o:211,s:132,x:1324,y:704,a:269,j:164},ShotgunFire12:{o:215,s:139,x:305,y:884,a:265,j:157},ShotgunFire13:{o:212,s:145,x:1320,y:1199,a:268,j:151},ShotgunFire14:{o:203,s:149,x:299,y:1351,a:270,j:147},ShotgunFire15:{o:196,s:152,x:532,y:1500,a:256,j:144},ShotgunCycle01:{o:187,s:139,x:570,y:884,a:209,j:157},
ShotgunCycle02:{o:162,s:109,x:475,y:508,a:176,j:187},ShotgunCycle03:{o:123,s:88,x:1399,y:296,a:176,j:208},ShotgunCycle04:{o:101,s:84,x:0,y:296,a:176,j:212},ShotgunCycle05:{o:103,s:84,x:176,y:296,a:174,j:212},ShotgunCycle06:{o:126,s:84,x:350,y:296,a:173,j:212},ShotgunCycle07:{o:126,s:86,x:1220,y:296,a:179,j:210},ShotgunCycle08:{o:127,s:85,x:1045,y:296,a:175,j:211},ShotgunCycle09:{o:126,s:84,x:523,y:296,a:173,j:212},ShotgunCycle10:{o:123,s:84,x:696,y:296,a:173,j:212},ShotgunCycle11:{o:101,s:84,x:869,
y:296,a:176,j:212},ShotgunCycle12:{o:97,s:82,x:1240,y:0,a:181,j:214},ShotgunCycle13:{o:93,s:83,x:1421,y:0,a:192,j:213},ShotgunCycle14:{o:114,s:108,x:257,y:508,a:218,j:188},ShotgunCycle15:{o:166,s:139,x:779,y:884,a:250,j:157},ShotgunReload01:{o:196,s:153,x:788,y:1500,a:230,j:143},ShotgunReload02:{o:209,s:156,x:1502,y:1500,a:158,j:140},ShotgunReload03:{o:183,s:164,x:510,y:1644,a:182,j:132},ShotgunReload04:{o:150,s:151,x:866,y:1351,a:283,j:145},ShotgunReload05:{o:124,s:144,x:1029,y:884,a:356,j:152},
ShotgunReload06:{o:108,s:144,x:1385,y:884,a:372,j:152},ShotgunReload07:{o:108,s:144,x:0,y:1047,a:372,j:152},ShotgunReload08:{o:108,s:144,x:372,y:1047,a:308,j:152},ShotgunReload09:{o:108,s:144,x:680,y:1047,a:262,j:152},ShotgunReload10:{o:108,s:144,x:942,y:1047,a:262,j:152},ShotgunReload11:{o:107,s:144,x:1204,y:1047,a:373,j:152},ShotgunReload12:{o:108,s:144,x:0,y:1199,a:262,j:152},ShotgunReload13:{o:108,s:144,x:262,y:1199,a:262,j:152},ShotgunReload14:{o:108,s:144,x:524,y:1199,a:262,j:152},ShotgunReload15:{o:108,
s:144,x:786,y:1199,a:262,j:152},ShotgunReload16:{o:124,s:144,x:1048,y:1199,a:272,j:152},ShotgunReload17:{o:150,s:151,x:1149,y:1351,a:283,j:145},ShotgunReload18:{o:183,s:164,x:692,y:1644,a:182,j:132},ShotgunReload19:{o:209,s:156,x:1588,y:1199,a:158,j:140},ShotgunReload20:{o:196,s:153,x:1018,y:1500,a:230,j:143}};
Dk.prototype.equip=function(){var a=t.h-this.W+2;rk(this)||(this.qc=this.F.jc,9==a&&(this.la.Ja+=fc(1)),a=Math.floor(a/2.5),9<=a&&this.fc&&this.F.jc?(this.action="fire",this.W=t.h+1,this.fc=0):9<=a&&(this.ed||!this.F.jc&&this.F.Da)?(this.action="cycleOpen",this.W=t.h+1-6):14<=a?this.action="ready":(a=("00"+a).slice(-2),this.ib=this.F.constructor.gb["ShotgunEquip"+a],this.mf=this.lf=0))};
Dk.prototype.ready=function(){rk(this)||(this.qc=this.F.jc,this.fc&&this.F.jc?(this.action="fire",this.W=t.h+1,this.fc=0):this.ed?(this.action="cycleOpen",this.W=t.h+1,this.qc=!1):(this.Dc(),this.F.he(),this.ib=this.F.constructor.gb.ShotgunEquip13))};
Dk.prototype.fire=function(){var a=t.h-this.W;this.Dc();this.qc=!1;if(0==a){t.g.ja.get("ShotgunFire01").play({gain:1,pitch:.75});t.g.ja.get("explode01").play({gain:1,pitch:1.5});this.F.jc=0;this.F.fj=!0;t.b.Bd();this.wc=qk.S(.04499,.31957,-.038305,-.596,.007,-179.3);var b=this.Ke;b.Ia=1;var c=255*(E(w)+4)/5&255;b.color.r=c;b.color.Wa=c;b.color.ka=c;b.scale=E(w)+1;b.Oc=gc(sb());c=new S;c.translate(0,-4E4,0);Bd(this.wc,c,b.transform);b=Ak(this.la);var d=Dk.wb.length;c=Array(d);for(var e=0;e<d;e++){var h=
tb(e+1);h!=e&&(c[e]=c[h]);c[h]=e}d=E(w)*Math.ug;for(e=0;e<c.length;e++){h=(new S).rotate(0,Dk.wb[8-e],0);var g=(new S).rotate(0,0,d+c[e]*Math.ug/9),k=new S;Bd(b,g,k);Bd(k,h,k);g=this.F.Pe(k);h=270;g=q(g);for(k=g.next();!k.done;k=g.next()){k=k.value;var l=h;k.item instanceof Z&&(l=Math.min(h,k.item.vb));uk(k,l,1.2);h-=l;if(0>=h)break}}b=new Ck;b.$a=6E4;b.scale=1;b.transform.m31-=45E3;c=new S;Bd(this.la.yd.O,this.wc,c);Bd(c,b.transform,b.transform);b.w.y=-37500;Cd(c,b.w,b.w);b.w.add(this.la.w);pd(b.w,
b.fb);b.ia=this.la.ia;T(b,t.xd);b.create();b.step();this.rc.push(b);3<this.rc.length&&(T(this.rc[0],null),this.rc.splice(0,1));this.la.Ja+=fc(2)}1==a&&(this.Ke.Ia=0);3==a&&(this.la.Ja+=fc(4));if(4<=a){if(rk(this))return;if(this.ed){this.action="cycleOpen";this.W=t.h+1;return}this.F.he()}7<=a&&(a=7+Math.floor((a-7)/4));16<=a?this.action="ready":(a=("00"+a).slice(-2),this.ib=this.F.constructor.gb["ShotgunFire"+a]||this.F.constructor.gb.ShotgunEquip13)};
Dk.prototype.cycleOpen=function(){var a=t.h-this.W;if(!rk(this)){this.qc=!1;this.Dc();12==a&&t.g.ja.get("ShotgunOpen01").play({gain:1,pitch:.8125});if(21==a){this.la.Ja+=fc(1);this.F.Da+=this.F.jc;this.wc=qk.S(-.018192,.25469,-.045699,-19.3,39.9,177);if(this.F.fj||this.F.jc){var b=new Bk("CartridgeShotgunSpent");b.Dj=.65;b.hj=fc(24*(1*E(w)+1));b.transform.m31+=6E3;var c=new S;Bd(this.la.yd.O,this.wc,c);Bd(c,b.transform,b.transform);b.w.x=-3E3;b.w.z=-b.w.x;Cd(c,b.w,b.w);b.c.set(b.transform.H,b.transform.m31,
b.transform.m32);b.w.add(this.la.w);pd(b.w,b.fb);T(b,t.Od);b.create();this.F.fj=!1}this.F.jc=0}a=Math.floor(a/3);if(9<=a){a=9;if(!this.ed){this.action="cycleShut";this.W=t.h+1-27;return}this.F.he()}a=("00"+a).slice(-2);this.ib=this.F.constructor.gb["ShotgunCycle"+a]||this.F.constructor.gb.ShotgunEquip13}};
Dk.prototype.cycleShut=function(){var a=t.h-this.W;rk(this)||(this.Dc(),30==a&&(t.g.ja.get("ShotgunShut01").play({gain:1,pitch:.8125}),1<=this.F.Da&&(--this.F.Da,this.F.jc+=1),t.b.Bd()),39==a&&(this.qc=this.F.jc),a=Math.floor(a/3),13<=a&&rk(this)||(16<=a?this.action="ready":(a=("00"+a).slice(-2),this.ib=this.F.constructor.gb["ShotgunCycle"+a]||this.F.constructor.gb.ShotgunEquip13)))};f=Dk.prototype;f.cj=tk;
f.Pe=function(a){var b=new G(a.H,a.m31,a.m32);a=new G(-a.K,-a.m21,-a.m22);var c=1E8,d=ff(b,new G(a.x*c,a.y*c,a.z*c));d&&(c=d.d);var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=q(t.b.Zc),g=h.next();!g.done;g=h.next())if(g=g.value,g.hb||!(t.h>g.W)){var k=Wj(b,a,g.c,g.Aa,g.jb+g.Aa);!k||0>k.t||k.t>=c||(k.item=g,k.Ab=a,Sa(e,k))}d&&e.push(d);return e};f.mi=function(){return!1};
f.qg=function(){var a=jk(this);return 0>=a?2:5>a?1:0};f.he=function(){};function Ek(a){sk.call(this,a);this.ce=18;this.ya=this.de=6;this.Da=this.ce-this.ya;this.Xg=fc(1);this.gj=0}Ek.prototype=Object.create(sk.prototype);Ek.prototype.constructor=Ek;
Ek.gb={RevolverEquip00:{o:0,s:255,x:799,y:1715,a:480,j:41},RevolverEquip01:{o:32,s:246,x:351,y:1715,a:448,j:50},RevolverEquip02:{o:129,s:224,x:0,y:1715,a:351,j:72},RevolverEquip03:{o:180,s:199,x:1327,y:1595,a:300,j:97},RevolverEquip04:{o:193,s:176,x:1215,y:1456,a:287,j:120},RevolverEquip05:{o:194,s:157,x:0,y:1456,a:249,j:139},RevolverEquip06:{o:184,s:144,x:1247,y:854,a:232,j:152},RevolverEquip07:{o:172,s:148,x:1158,y:1009,a:255,j:148},RevolverAim01:{o:178,s:152,x:906,y:1309,a:226,j:144},RevolverAim02:{o:150,
s:150,x:692,y:1309,a:214,j:146},RevolverAim03:{o:133,s:148,x:1413,y:1009,a:208,j:148},RevolverFire01:{o:184,s:149,x:1032,y:1161,a:238,j:147},RevolverFire02:{o:184,s:149,x:1270,y:1161,a:238,j:147},RevolverFire03:{o:184,s:149,x:1508,y:1161,a:238,j:147},RevolverFire04:{o:184,s:149,x:0,y:1309,a:238,j:147},RevolverFire05:{o:195,s:149,x:238,y:1309,a:217,j:147},RevolverFire06:{o:201,s:111,x:1504,y:266,a:148,j:185},RevolverFire07:{o:197,s:71,x:193,y:266,a:144,j:225},RevolverFire08:{o:212,s:100,x:634,y:266,
a:192,j:196},RevolverFire09:{o:173,s:114,x:486,y:494,a:253,j:182},RevolverFire10:{o:180,s:111,x:0,y:494,a:242,j:185},RevolverFire11:{o:176,s:113,x:242,y:494,a:244,j:183},RevolverFire12:{o:169,s:126,x:361,y:679,a:266,j:170},RevolverFire13:{o:171,s:139,x:1382,y:679,a:269,j:157},RevolverFire14:{o:171,s:147,x:900,y:1009,a:258,j:149},RevolverFire15:{o:185,s:149,x:455,y:1309,a:237,j:147},RevolverAimFire01:{o:133,s:148,x:1479,y:854,a:208,j:148},RevolverAimFire02:{o:133,s:148,x:0,y:1161,a:208,j:148},RevolverAimFire03:{o:133,
s:148,x:208,y:1161,a:208,j:148},RevolverAimFire04:{o:133,s:148,x:416,y:1161,a:208,j:148},RevolverAimFire05:{o:138,s:148,x:624,y:1161,a:200,j:148},RevolverAimFire06:{o:144,s:119,x:1054,y:494,a:168,j:177},RevolverAimFire07:{o:140,s:87,x:337,y:266,a:146,j:209},RevolverAimFire08:{o:153,s:110,x:1311,y:266,a:193,j:186},RevolverAimFire09:{o:126,s:121,x:0,y:679,a:219,j:175},RevolverAimFire10:{o:135,s:119,x:1222,y:494,a:211,j:177},RevolverAimFire11:{o:130,s:120,x:1433,y:494,a:211,j:176},RevolverAimFire12:{o:126,
s:130,x:955,y:679,a:219,j:166},RevolverAimFire13:{o:127,s:141,x:0,y:854,a:219,j:155},RevolverAimFire14:{o:131,s:146,x:688,y:1009,a:212,j:150},RevolverAimFire15:{o:133,s:148,x:824,y:1161,a:208,j:148},RevolverReload01:{o:179,s:135,x:1174,y:679,a:208,j:161},RevolverReload02:{o:168,s:104,x:826,y:266,a:178,j:192},RevolverReload03:{o:140,s:68,x:0,y:266,a:193,j:228},RevolverReload04:{o:114,s:40,x:1295,y:0,a:206,j:256},RevolverReload05:{o:99,s:30,x:0,y:0,a:214,j:266},RevolverReload06:{o:102,s:30,x:214,y:0,
a:227,j:266},RevolverReload07:{o:103,s:31,x:441,y:0,a:250,j:265},RevolverReload08:{o:107,s:33,x:895,y:0,a:200,j:263},RevolverReload09:{o:101,s:31,x:691,y:0,a:204,j:265},RevolverReload10:{o:106,s:38,x:1095,y:0,a:200,j:258},RevolverReload11:{o:129,s:60,x:1501,y:0,a:180,j:236},RevolverReload12:{o:161,s:92,x:483,y:266,a:151,j:204},RevolverReload13:{o:173,s:123,x:219,y:679,a:142,j:173},RevolverReload14:{o:173,s:106,x:1004,y:266,a:307,j:190},RevolverReload15:{o:165,s:114,x:739,y:494,a:315,j:182},RevolverReload16:{o:152,
s:129,x:627,y:679,a:328,j:167},RevolverReload17:{o:140,s:141,x:219,y:854,a:340,j:155},RevolverReload18:{o:136,s:143,x:559,y:854,a:344,j:153},RevolverReload19:{o:136,s:144,x:0,y:1009,a:344,j:152},RevolverReload20:{o:136,s:144,x:344,y:1009,a:344,j:152},RevolverReload21:{o:136,s:143,x:903,y:854,a:344,j:153},RevolverReload22:{o:136,s:152,x:1132,y:1309,a:344,j:144},RevolverReload23:{o:140,s:173,x:875,y:1456,a:340,j:123},RevolverReload24:{o:147,s:183,x:338,y:1595,a:333,j:113},RevolverReload25:{o:151,s:186,
x:998,y:1595,a:329,j:110},RevolverReload26:{o:153,s:183,x:671,y:1595,a:327,j:113},RevolverReload27:{o:142,s:176,x:0,y:1595,a:338,j:120},RevolverReload28:{o:155,s:168,x:550,y:1456,a:325,j:128},RevolverReload29:{o:156,s:160,x:249,y:1456,a:301,j:136},RevolverReload30:{o:166,s:155,x:1476,y:1309,a:269,j:141}};
Ek.prototype.equip=function(){var a=t.h-this.W;if(!rk(this))if(this.Db)this.action="reload",this.W=t.h+1;else{this.qc=!0;0==a&&(this.la.Ja+=fc(1));a=Math.floor(a/2.5);if(5<=a&&(this.F.Xf.call(this),this.fc)){if(this.F.ya){this.action="fire";this.W=t.h+1;return}this.F.Da&&(this.Db=1)}8<=a?this.action="ready":0==this.focus&&(a=("00"+a).slice(-2),this.ib=this.F.constructor.gb["RevolverEquip"+a])}};
Ek.prototype.ready=function(){if(!rk(this))if(this.qc=!0,this.Db)this.action="reload",this.W=t.h+1;else{if(this.fc){if(this.F.ya){this.action="fire";this.W=t.h+1;return}this.F.Da&&(this.Db=1)}this.Dc();this.F.Xf.call(this);this.F.he()}};
Ek.prototype.fire=function(){var a=t.h-this.W;this.Dc();if(4==a){t.g.ja.get("CarbineFire01").play({gain:1,pitch:1});t.g.ja.get("ShotgunFire01").play({gain:.5,pitch:1.5});this.fc=0;this.F.ya--;this.F.gj++;!this.F.ya&&this.F.Da&&(this.Db=1);t.b.Bd();this.wc=.5<this.focus?qk.S(0,.49195,-.017475,-.713,0,0):qk.S(.032225,.49195,-.022213,.367,-.151,.525);var b=this.Ke;b.Ia=1;var c=255*(E(w)+4)/5&255;b.color.r=c;b.color.Wa=c;b.color.ka=c;b.scale=E(w)+1;b.Oc=gc(sb());c=new S;c.translate(0,-21E3,0);Bd(this.wc,
c,b.transform);b=new Ck;b.$a=6E4;b.scale=1;b.transform.m31-=45E3;c=new S;Bd(this.la.yd.O,this.wc,c);Bd(c,b.transform,b.transform);b.w.y=-37500;Cd(c,b.w,b.w);b.w.add(this.la.w);pd(b.w,b.fb);b.ia=this.la.ia;T(b,t.xd);b.create();b.step();this.rc.push(b);b=(new S).rotate(0,fc(0*E(w)),0);c=(new S).rotate(0,0,E(w)*Math.PI*2);var d=Ak(this.la);Bd(d,c,d);Bd(d,b,d);b=this.F.Pe(d);b=q(b);for(c=b.next();!c.done;c=b.next()){c=c.value;d=c.item instanceof Z?3:1;for(var e=0;e<d;e++)uk(c,360,1.7)}}5==a&&(this.Ke.Ia=
0);7==a&&(this.la.Ja+=fc(3));if(7<=a){if(rk(this))return;a=7+Math.floor((a-7)/3)}if(13<=a){if(this.fc){if(this.F.ya){this.action="fire";this.W=t.h+1;return}this.F.Da&&(this.Db=1)}if(this.Db){this.action="reload";this.W=t.h+1;return}this.F.he()}16<=a?this.action="ready":(a=("00"+a).slice(-2),this.F.Xf.call(this),this.ib=.5<this.focus?this.F.constructor.gb["RevolverAimFire"+a]||this.F.constructor.gb.RevolverAim03:this.F.constructor.gb["RevolverFire"+a]||this.F.constructor.gb.RevolverEquip07)};
Ek.prototype.reload=function(){var a=t.h-this.W+3;this.Db=0;if(!rk(this)){this.qc=!1;this.mf=this.lf=0;if(24==a){this.la.Ja+=fc(.5);for(var b=0;b<this.F.gj;b++)t.g.ja.get("shellCasing0"+(tb(3)+1)).play({gain:.625,pitch:.65,delay:.125+.15*b});this.F.gj=0;this.F.Da+=this.F.ya;this.F.ya=0;t.b.Bd()}57==a&&(this.la.Ja+=fc(1),b=Math.min(this.F.de-this.F.ya,this.F.Da),this.F.ya+=b,this.F.Da-=b,t.b.Bd());a=Math.floor(a/3);31<=a?this.action="ready":(a=("00"+a).slice(-2),this.ib=this.F.constructor.gb["RevolverReload"+
a])}};f=Ek.prototype;f.Xf=function(){this.ed?(this.focus+=1/6,1<this.focus&&(this.focus=1)):this.qc=!0;if(0<this.focus){var a=Math.floor(3*this.focus);a=("00"+a).slice(-2);this.ib=this.F.constructor.gb["RevolverAim"+a]||this.F.constructor.gb.RevolverEquip07}else this.ib=this.F.constructor.gb.RevolverEquip07};f.cj=function(a){return.5<this.Qi.focus?Fk(this,a):tk.call(this,a)};
function Fk(a,b){function c(n){var r=nd(n,d,new G);n=r.length();var p=26512.5/n;r=hf(d,r);for(var u=0,z=!0;;){var y=r.shift();if(!y){if(!z){u+=p;break}u=1;break}if(!z){z=y.t-u;if(z>p){u+=p;break}p-=z}u=y.t;z=!y.Qa}return u*n>=n-1E3}var d=new G(b.H,b.m31,b.m32),e=new G(-b.K,-b.m21,-b.m22);b=[];b.cmp=function(n,r){return n.wf>r.wf?-1:1};for(var h=q(t.b.Zc),g=h.next();!g.done;g=h.next())if(g=g.value,(g.hb||!(t.h>g.W))&&600>t.h-g.Rh){var k=Xj(d,e,g.c,g.Aa-a.yg,g.jb);if(k.sf){var l=k.sf;0>l.t||1E8<=l.t||
(l.p.wf=1E8-l.t,l.p.item=g,Sa(b,l.p))}else{l=k.ah.da();var m=k.ti-(g.Aa-a.yg);l.x+=k.Vd.x*m;l.y+=k.Vd.y*m;l.z+=k.Vd.z*m;k=nd(k.ah,d,new G).normalize();m=nd(l,d,new G).normalize();0>=jc(m,e)||(k=jc(k,m),l.wf=k-1,l.item=g,Sa(b,l),Math.acos(k)>=a.Xg&&(l.tl=!0))}}a=null;b=q(b);for(e=b.next();!e.done;e=b.next())e=e.value,c(e)&&(e.item.kl=t.h,e.tl||a||(a=e));return a}
f.Pe=function(a){var b=new G(a.H,a.m31,a.m32),c=new G(-a.K,-a.m21,-a.m22),d=1E8;a=[];for(var e=hf(b,new G(c.x*d,c.y*d,c.z*d)),h=26512.5/d,g=0,k=!0;;){var l=e.shift();if(!l){k||(d*=g+h);break}if(!k){k=l.t-g;if(k>h){d*=g+h;break}h-=k}g=l.t;l.Qa&&a.push(l);k=!l.Qa}e=[];e.cmp=function(m,n){return m.t<n.t?-1:m.t>n.t?1:m.item.index<n.item.index?-1:m.item.index>n.item.index?1:0};h=q(t.b.Zc);for(g=h.next();!g.done;g=h.next())g=g.value,!g.hb&&t.h>g.W||!(l=Wj(b,c,g.c,g.Aa,g.jb+g.Aa))||0>l.t||l.t>=d||(l.item=
g,l.Ab=c,Sa(e,l));b=[];e.length&&b.push(e[0]);b.push.apply(b,da(a));return b};f.mi=function(){return 0>=this.Da||"reload"==this.Qi.action||2<this.ya?!1:!0};f.qg=function(){var a=jk(this);return 0>=a?2:6>a?1:0};f.he=function(){};function Bk(a){Mj.call(this,a);this.Ub=12500;this.bg=1;this.start=t.h;this.Bk=new G(E(w)-.5,E(w)-.5,E(w)-.5);this.Bk.pa(1);this.Dj=1}Bk.prototype=Object.create(Mj.prototype);Bk.prototype.constructor=Bk;
Bk.prototype.create=function(){Mj.prototype.create.call(this);var a=new bg(t.g.oe.get(this.name));a.Ga=this.O;a.transform.scale(.1,.1,.1);a.transform.rotate(0,-90,0);T(a,this);a.create();Ld(a,this.ia)};Bk.prototype.step=function(){this.transform.bj(this.Bk,this.hj);30<=t.h-this.start&&this.remove();Mj.prototype.step.call(this)};Bk.prototype.remove=function(){t.g.ja.get("shellCasing0"+(tb(3)+1)).play({gain:.625,pitch:this.Dj});Mj.prototype.remove.call(this)};
function yk(a){t.Node.call(this,a);this.Pb=t.h}yk.prototype=Object.create(t.Node.prototype);yk.prototype.constructor=yk;yk.prototype.step=function(){t.Node.prototype.step.call(this);var a=t.h-this.Pb-6;0>a||(0==a&&t.g.ja.get(wb("woodSnap01","woodSnap02","woodSnap03")).play({gain:10/60}),5<=(1<=a?a-1:0)&&this.remove())};var ik=[];function lk(){var a=ik.indexOf(this);0>a||ik.splice(a,1)};function nk(a){Qj.call(this,a);this.bg=100;this.$g=0;this.Aa=4E4;this.Qd=18E4;this.zi=9E4;this.jb=.5*(this.Qd-2*this.Aa-6E4);this.rj=12E4;this.mc=12500;this.Zf=2/3*this.mc;this.Mi=Qj.Ve(125E3);this.Ub=2E5;this.Ch=16;this.Ih=this.Jh=this.Dc=this.pe=this.Ii=this.Ji=this.li=this.Ja=this.wg=this.qh=0;this.vb=360;this.Wg=[];this.Oh=-Infinity;this.hb=!0;this.Qg=0;this.dk=-Infinity;this.ek=Number.NEGATIVE_INFINITY;this.fk=4E5;this.bd={}}nk.prototype=Object.create(Qj.prototype);f=nk.prototype;
f.constructor=nk;f.create=function(){Mj.prototype.create.call(this);var a=this.Ac=new Uf("worldCamera");a.Bf=6E3;a.tf=5E7;a.Ga=this.O;T(a,this);t.b.sa=a;a=this.yd=new Uf("selfCamera");a.Bf=this.Ac.Bf;a.tf=this.Ac.tf;a.Ga=this.Ac.O;T(a,t.Od);a=this.Xa=new qk(this);a.Ia=0;T(a,t.Od);a.create();a=new zk(this.Xa);a.Oi=["KeyE","Digit1"];this.Xa.Jd.push(a);a=new Ek(this.Xa);a.Oi=["KeyQ","Digit2"];this.Xa.Jd.push(a);a=new Dk(this.Xa);a.Oi=["KeyC","Digit3"];this.Xa.Jd.push(a);this.Xa.Kg=this.Xa.Jd[0]};
f.step=function(){Qj.prototype.step.call(this);if(!(this.Fc.zc||this.Fc.pl||10>t.h-this.kk)){var a=this.Fc.ia.tb;.015<.2126*a.x+.7152*a.y+.0722*a.z||(a=wb(.1125,.175),this.Fc.Xb=new G(a,a,a),this.Fc.pl=!0,t.g.ja.get("hit02").play({gain:.5,pitch:2}))}t.b.De!=this.Fc.Ob.De&&(t.b.De=this.Fc.Ob.De,t.b.He=1<t.b.De?6:0);if(this.hb){for(a=0;a<this.Wg.length;a++){var b=this.Wg[a],c=t.h-30-b.Uk;0>c||(0<b.Za?(b=b.Za-2*c,0>=b&&this.Wg.splice(a--,1)):0>b.Za&&(b=b.Za+2*c,0<=b&&this.Wg.splice(a--,1)))}this.hb&&
(ye.lock&&(a=1,this.Xa.F&&(a=$a(1,this.Xa.F.Fi,this.Xa.focus)),a=t.sl*a,this.qh-=ye.tc.x*a,this.wg+=ye.tc.y*a),this.wg=Ya(this.wg,-1073741824,1073741824));a=gc(this.qh);b=gc(this.wg)+fc(1.5*this.Ii);c=fc(1.5*this.Ji);td(this.transform);this.transform.rotate(a,0,0);td(this.Ac.transform);this.Ac.transform.rotate(0,b,c);t.Ak||(this.Ac.transform.rotate((E(w)-.5)*this.Ja,(E(w)-.5)*this.Ja,0),this.Ja*=.8125);0==(t.h&1)&&(this.Pg()?(a=this.ke*Math.PI/this.Ch,this.li=6E3*Math.abs(Math.sin(a)),this.Jh=Math.sin(a)*
Math.PI/210,this.Dc=(1-Math.abs(Math.sin(a)))*Math.PI/210):(this.li*=.75,this.Dc*=.75,this.Jh*=.75),this.Ih-=fc(3),0>this.Ih&&(this.Ih=0));this.Ac.transform.m31=this.jb+this.Aa-6E3-6E3+this.li;a=1;this.Xa.F&&(a=$a(1,this.Xa.F.Fi,this.Xa.focus));this.mc=11E3*$a(1,2/3,this.Xa.focus);this.yd.ud=fc(24*a);this.Ac.ud=fc(30*a);a=this.fk;a*=a;for(var d in this.bd)if(b=this.bd[d],nd(this.c,b.c,new G(0,0,0)).xf()>=a){c=b;for(var e=q(c.bd.Xa.Jd),h=e.next();!h.done;h=e.next())h=h.value,h instanceof c.species.Wf&&
(h.$e-=c.Za);c.Ia=-1;c.ig.Ia=-1;c.bd=null;delete this.bd[b.index]}else b.species.Gh.call(b,this),b.Za||(delete this.bd[b.index],b.remove());if(!(2>t.h-this.ek)){d=a;a=null;b=lf(this.c,this.fk);b=q(b);for(c=b.next();!c.done;c=b.next())for(c=c.value.Yh.first();null!=c.item;c=c.next)c.item instanceof kk&&!(c.item.Id||c.item.bd||0>=c.item.species.mj.call(c.item,this))&&(e=nd(this.c,c.item.c,new G(0,0,0)).xf(),e<d&&(d=e,a=c.item));if(a){d=a;d.Id=this;d.el=d.c.da();if(d.fl=d.hb)d.hb=!1,Ij.remove(d);d.species.Ti.call(d,
d.Id);this.ek=d.W=t.h}}}};f.Si=function(a){if(a instanceof Gk){if(a.Kk)debugger;a.Kk=!0;90>t.h-this.Oh||(t.g.ja.get("hit02").play({pitch:.5,gain:1}),t.g.ja.get(wb("woodSnap01","woodSnap02","woodSnap03")).play({pitch:.5,gain:1}),Hk(this,-60),this.Ja+=fc(6))}};
f.Hi=function(){var a=new G(0,0,0);if(!this.hb)return a;ze.d.KeyW&&--a.z;ze.d.KeyS&&(a.z+=1);ze.d.KeyA&&--a.x;ze.d.KeyD&&(a.x+=1);a.pa(1)?(this.pe+=1/6,1<this.pe&&(this.pe=1)):(this.pe-=1/6,0>this.pe&&(this.pe=0));this.Ji=(5*this.Ji-a.x)/6;this.Ii=(5*this.Ii-a.z)/6;return a};f.Wj=function(){this.hb&&ze.p.Space&&(this.Ni=t.h)};
function Ak(a){if(!a.vg){var b=new S;b.set(a.Ac.O);return b}b=nd(Dd(a.Ac.O),a.vg,new G).normalize();var c=new G(b.z,0,-b.x),d=new G(0,1,0);pc(b,c,d).pa(1);pc(d,b,c);var e=new S;e.I=c.x;e.L=c.y;e.M=c.z;e.J=d.x;e.m11=d.y;e.m12=d.z;e.K=b.x;e.m21=b.y;e.m22=b.z;e.H=a.Ac.O.H;e.m31=a.Ac.O.m31;e.m32=a.Ac.O.m32;return e}function Hk(a,b){0>b&&(a.Oh=t.h);b=Ya(a.vb+b,0,360)-a.vb;a.Wg.push({Uk:t.h,Za:b});a.vb+=b;0>=a.vb&&a.zh()}
f.zh=function(){if(this.hb){this.hb=!1;for(var a=q(t.b.Zc),b=a.next();!b.done;b=a.next())b=b.value,b.hb&&(b.action.length=0,b.action.unshift("idle"),b.W=NaN,b.path=null);this.Xa.remove();this.Xa=null;t.b.ta=null}};function Z(){Qj.call(this,"mantato");this.bg=150;this.$g=0;this.Aa=30800;this.Qd=189200;this.zi=86E3;this.jb=.5*(this.Qd-2*this.Aa-6E4);this.rj=12E4;this.mc=1/3*14887;this.Zf=2/3*this.mc;this.Mi=Qj.Ve(3E5);this.Ub=2E5;this.Kh=-Infinity;this.hb=!0;this.vb=360;this.kb=[];this.ge=[];this.Ka=new S;this.h=this.ii=this.xe=0;this.Ne=new S;this.uh=0;this.ee=11E4;this.D=t.g.qa.get("physicalCardThreshold");this.ba=t.g.R.get("monsterWalk01");this.color=$c;this.action=["idle"];this.W=NaN;this.kl=this.Rh=-Infinity;
this.xg=0;return this}Z.prototype=Object.create(Qj.prototype);Z.prototype.constructor=Z;Z.Ve=12;Z.Ma=NaN;
Z.tg=function(){Z.X=t.g.yb.get("defaultMaterial");var a=t.g.yb.get("monsterSkin").da();a.name="monsterSplatter";a.Ca=1;t.g.yb.add(a);Ik.D=t.g.qa.get("gib");Ik.ba=t.g.R.get("spudGib01");a=[];var b=new S;b.I=1;b.L=0;b.M=-0;b.J=0;b.m11=1;b.m12=0;b.K=0;b.m21=-0;b.m22=1;b.H=0;b.m31=0;b.m32=-0;a.push(b);b=new S;b.I=.9916;b.L=-.1173;b.M=.055;b.J=.1259;b.m11=.9725;b.m12=-.1958;b.K=-.0305;b.m21=.201;b.m22=.9791;b.H=-3498;b.m31=3796;b.m32=6804;a.push(b);b=new S;b.I=.9749;b.L=-.1934;b.M=.1102;b.J=.2213;b.m11=
.8963;b.m12=-.3843;b.K=-.0244;b.m21=.399;b.m22=.9166;b.H=-6400;b.m31=-2683;b.m32=15101;a.push(b);b=new S;b.I=.9601;b.L=-.2246;b.M=.1669;b.J=.2797;b.m11=.7517;b.m12=-.5972;b.K=.0087;b.m21=.62;b.m22=.7845;b.H=-8393;b.m31=-17164;b.m32=25181;a.push(b);b=new S;b.I=.9541;b.L=-.2123;b.M=.2114;b.J=.2942;b.m11=.5306;b.m12=-.795;b.K=.0566;b.m21=.8206;b.m22=.5686;b.H=-9429;b.m31=-39030;b.m32=35202;a.push(b);b=new S;b.I=.9591;b.L=-.1521;b.M=.2388;b.J=.2712;b.m11=.2519;b.m12=-.929;b.K=.0811;b.m21=.9557;b.m22=
.2828;b.H=-9721;b.m31=-68375;b.m32=44142;a.push(b);b=new S;b.I=.9359;b.L=-.2158;b.M=.2785;b.J=.2565;b.m11=-.1246;b.m12=-.9585;b.K=.2415;b.m21=.9685;b.m22=-.0613;b.H=-7782;b.m31=-63561;b.m32=42925;a.push(b);b=new S;b.I=.9573;b.L=-.1734;b.M=.2312;b.J=.1975;b.m11=-.1913;b.m12=-.9614;b.K=.2109;b.m21=.9661;b.m22=-.1489;b.H=-4587;b.m31=-61424;b.m32=39511;a.push(b);b=new S;b.I=.9812;b.L=-.1297;b.M=.143;b.J=.1237;b.m11=-.1466;b.m12=-.9814;b.K=.1482;b.m21=.9807;b.m22=-.1278;b.H=-2376;b.m31=-62808;b.m32=37771;
a.push(b);b=new S;b.I=.9889;b.L=-.134;b.M=.0638;b.J=.053;b.m11=-.0825;b.m12=-.9952;b.K=.1386;b.m21=.9875;b.m22=-.0745;b.H=-104;b.m31=-64955;b.m32=38224;a.push(b);b=new S;b.I=.9803;b.L=-.1963;b.M=.0226;b.J=.0119;b.m11=-.0555;b.m12=-.9984;b.K=.1973;b.m21=.979;b.m22=-.0521;b.H=2290;b.m31=-66053;b.m32=39447;a.push(b);b=new S;b.I=.9587;b.L=-.2839;b.M=.017;b.J=.0035;b.m11=-.0481;b.m12=-.9988;b.K=.2843;b.m21=.9577;b.m22=-.0451;b.H=4830;b.m31=-66621;b.m32=39607;a.push(b);b=new S;b.I=.939;b.L=-.3438;b.M=.0072;
b.J=-.0041;b.m11=-.0323;b.m12=-.9995;b.K=.3439;b.m21=.9385;b.m22=-.0317;b.H=6758;b.m31=-66864;b.m32=40168;a.push(b);b=new S;b.I=.9324;b.L=-.3614;b.M=5E-4;b.J=-.0114;b.m11=-.0308;b.m12=-.9995;b.K=.3612;b.m21=.9319;b.m22=-.0328;b.H=7520;b.m31=-66863;b.m32=40232;a.push(b);Z.sg=a;a=[];b=new S;b.I=1;b.L=0;b.M=-0;b.J=0;b.m11=1;b.m12=-0;b.K=0;b.m21=0;b.m22=1;b.H=0;b.m31=-0;b.m32=0;a.push(b);b=new S;b.I=.9927;b.L=-.0183;b.M=-.119;b.J=.0277;b.m11=.9966;b.m12=.0773;b.K=.1171;b.m21=-.0801;b.m22=.9899;b.H=70;
b.m31=-3027;b.m32=-619;a.push(b);b=new S;b.I=.9816;b.L=-.0289;b.M=-.1886;b.J=.022;b.m11=.999;b.m12=-.0389;b.K=.1895;b.m21=.034;b.m22=.9813;b.H=288;b.m31=-5629;b.m32=253;a.push(b);b=new S;b.I=.9973;b.L=.0022;b.M=.074;b.J=.0054;b.m11=.9948;b.m12=-.1019;b.K=-.0738;b.m21=.1021;b.m22=.992;b.H=-219;b.m31=-2573;b.m32=764;a.push(b);b=new S;b.I=.9877;b.L=-.0202;b.M=-.155;b.J=.0055;b.m11=.9955;b.m12=-.0949;b.K=.1562;b.m21=.0929;b.m22=.9833;b.H=335;b.m31=259;b.m32=689;a.push(b);b=new S;b.I=.9986;b.L=.0123;b.M=
-.0519;b.J=-.0065;b.m11=.9937;b.m12=.1115;b.K=.053;b.m21=-.111;b.m22=.9924;b.H=178;b.m31=-3079;b.m32=-875;a.push(b);b=new S;b.I=.9996;b.L=.007;b.M=-.0256;b.J=-.0062;b.m11=.9994;b.m12=.0327;b.K=.0258;b.m21=-.0326;b.m22=.9991;b.H=110;b.m31=-5793;b.m32=-254;a.push(b);b=new S;b.I=.9893;b.L=-.0894;b.M=.1151;b.J=.0859;b.m11=.9957;b.m12=.0348;b.K=-.1177;b.m21=-.0245;b.m22=.9928;b.H=-944;b.m31=-2885;b.m32=-285;a.push(b);Z.wb=a};
Z.prototype.create=function(){this.transform.rotate(E(w)*Math.PI*2,0,0);Md(this,37500);ik.push(this);Qj.prototype.create.call(this);t.b.Zc.push(this)};Z.prototype.step=function(){Z.prototype[this.action[0]].call(this);this.y=this.c.y+this.jb+this.Aa-this.Qd+12500;Qj.prototype.step.call(this)};
Z.prototype.Oe=function(){var a=Dd(this.O);a.y+=this.jb+this.Aa-this.Qd+103400;var b=nd(Dd(t.sa.O),a,new G),c=b.pa(1);c=Math.min(1,c/(2*this.Qd));var d=new G(0,1,0),e=pc(d,b,new G).normalize();pc(b,e,d);var h=t.sa.O.Sf(),g=t.sa.O.me();this.Ka.fg(od(t.sa.O.Rf(),e,c).normalize());this.Ka.gg(od(h,d,c).normalize());this.Ka.hg(od(g,b,c).normalize());Ed(this.Ka,a);this.Wd?this.Ne.set(this.Wd[this.h%this.Wd.length]):this.Ne.reset();this.hb&&(a=this.O,a=Math.round(4*(Math.atan2(a.K,a.m22)-Math.atan2(t.sa.O.H-
a.H,t.sa.O.m32-a.m32))/Math.PI),0>a&&(a+=8),8<=a&&(a-=8),this.ii=a,this.Ne.rotate(this.ii*Math.PI/4,0,0));Bd(this.Ka,this.Ne,this.Ne);this.Ka.H+=this.Ka.J*this.uh;this.Ka.m31+=this.Ka.m11*this.uh;this.Ka.m32+=this.Ka.m12*this.uh;if(this.Yg){a=q(this.Yg);for(b=a.next();!b.done;b=a.next()){c=b.value;c.yf.H+=this.c.x;c.yf.m31+=this.c.y;c.yf.m32+=this.c.z;b=c.Mk;c=Dd(c.yf);d=this.Ne;e=new S;h=d.I*-d.H+d.L*-d.m31+d.M*-d.m32;g=d.J*-d.H+d.m11*-d.m31+d.m12*-d.m32;var k=d.K*-d.H+d.m21*-d.m31+d.m22*-d.m32,
l=d.J,m=d.K,n=d.L,r=d.m11,p=d.m21,u=d.M,z=d.m12,y=d.m22;e.I=d.I;e.J=n;e.K=u;e.H=h;e.L=l;e.m11=r;e.m21=z;e.m31=g;e.M=m;e.m12=p;e.m22=y;e.m32=k;e.lb(c,c);d={};d.c=c;d.Pb=t.h+1;e=7E3*b;h=ub(2)?-e:e;k=sb()*(180/2147483648);g=Math.cos(k);k=Math.sin(k);d.za=new rd;d.za.I=g*h;d.za.L=k*h;d.za.J=-k*e;d.za.m11=g*e;this.kb.push(d);this.kb.length>Z.Ve&&this.kb.shift();d={};d.c=c;d.Pb=t.h+1;b=7E3*b+3500;c=ub(2)?-b:b;h=sb()*(180/2147483648);e=Math.cos(h);h=Math.sin(h);d.za=new rd;d.za.I=e*c;d.za.L=h*c;d.za.J=-h*
b;d.za.m11=e*b;this.ge.push(d);this.ge.length>Z.Ve&&this.ge.shift()}delete this.Yg}};
Z.prototype.Va=function(){Z.Ma+=2;255<Z.Ma&&(v.clear(v.STENCIL_BUFFER_BIT),Z.Ma=130);t.Nb(1);v.colorMask(!1,!1,!1,!1);v.stencilFunc(v.ALWAYS,Z.Ma-128,255);v.stencilOp(v.KEEP,v.KEEP,v.REPLACE);var a=this.Ka.me(),b=jc(a,Dd(this.Ka));t.zb(kg);t.cb(t.g.qa.get("monoThresholdEffect"));t.$b(0,t.g.R.get("smokePuff01"));Z.X.bind();t.ub(0);t.Zb(0);t.D.N("color",$c);for(var c=q(this.kb),d=c.next();!d.done;d=c.next()){var e=d.value;d=this.Ne.lb(e.c,new G);if(!(0>jc(d,a)-b)){var h=4>t.h-e.Pb?1.4:1;e=(new rd).set(e.za);
e.I*=h;e.L*=h;e.J*=h;e.m11*=h;e=sd(this.Ka,e,new S);Ed(e,d);t.D.N("modelMatrix",e);v.drawArrays(v.TRIANGLE_FAN,lg(0,1),4)}}t.Nb(2);v.colorMask(!0,!0,!0,!0);v.stencilFunc(v.GEQUAL,Z.Ma-1,127);v.stencilOp(v.KEEP,v.KEEP,v.REPLACE);t.h==this.Pd+1?this.D=t.g.qa.get("flashCardThreshold"):t.h==this.Pd+3&&(this.D=t.g.qa.get("physicalCardThreshold"));t.zb(kg);t.cb(this.D);t.$b(0,this.ba);Z.X.bind();t.D.N("ambientLight",this.ia.tb,!1);t.ub(0);t.Zb(0);t.D.N("color",this.color);a=new S;a.set(this.Ka);b=this.ee;
a.I*=b;a.L*=b;a.M*=b;a.J*=-b;a.m11*=-b;a.m12*=-b;t.D.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,lg(this.ii*this.xe+this.h,this.sb),4);if("flashCardThreshold"!=this.D.name)for(t.Nb(0),v.stencilFunc(v.EQUAL,Z.Ma-1,255),v.stencilOp(v.KEEP,v.KEEP,v.KEEP),a=this.Ka.me(),b=jc(a,Dd(this.Ka)),t.zb(kg),t.cb(t.g.qa.get("monoEffect")),t.$b(0,t.g.R.get("splatter01")),t.g.yb.get("monsterSplatter").bind(),t.ub(1),t.Zb(0),t.D.N("ambientLight",this.ia.tb,!1),t.D.N("color",Ik.td),c=q(this.ge),d=c.next();!d.done;d=
c.next())e=d.value,d=this.Ne.lb(e.c,new G),0>jc(d,a)-b||(h=4>t.h-e.Pb?1.4:1,e=(new rd).set(e.za),e.I*=h,e.L*=h,e.J*=h,e.m11*=h,e=sd(this.Ka,e,new S),Ed(e,d),t.D.N("modelMatrix",e),v.drawArrays(v.TRIANGLE_FAN,lg(0,1),4))};
Z.prototype.idle=function(){isNaN(this.W)&&(this.W=t.h,this.ba=t.g.R.get("monsterWalk01"),this.sb=64,this.xe=8,this.Wd=Z.wb);var a=t.h-this.W;this.h=0;0==a%30&&(ok(this,t.b.ta.c),this.action[0]="rush",this.action.unshift("alert"),this.W=NaN,this.path=null);this.h=(Math.floor(a/8)%3+6)%8};
Z.prototype.wander=function(){isNaN(this.W)&&(this.W=t.h,this.ba=t.g.R.get("monsterWalk01"),this.sb=64,this.xe=8,this.Wd=Z.wb,this.mc=1/3*14887);var a=t.h-this.W;if(!this.path){var b=vb(Li.ag),c=tb(b.G-b.C)+b.C;b=tb(b.v-b.m)+b.m;this.path=Jk(this,c,b)}0==a%30&&(ok(this,t.b.ta.c),this.action[0]="rush",this.action.unshift("alert"),this.W=NaN,this.path=null);this.h=Math.floor(a/3)%8};
Z.prototype.alert=function(){isNaN(this.W)&&(this.W=t.h,this.ba=t.g.R.get("monsterWalk01"),this.sb=64,this.xe=8,this.Wd=Z.wb);var a=t.h-this.W;this.h=0;a==18-0*t.Oa.difficulty&&(this.action.shift(),this.xg&&(this.action.unshift("attack"),this.W=NaN))};Z.prototype.hit=function(){isNaN(this.W)&&(this.W=t.h,this.ba=t.g.R.get("monsterWalk01"),this.sb=64,this.xe=8,this.Wd=Z.wb);var a=t.h-this.W;this.h=0;60==a&&(this.action.shift(),this.W=NaN)};
Z.prototype.attack=function(){isNaN(this.W)&&(this.W=t.h,this.ba=t.g.R.get("monsterWalk01"),this.sb=64,this.xe=8,this.Wd=Z.wb,ok(this,t.b.ta.c));var a=t.h-this.W;this.h=Math.floor(a/6)%8;if(15==a){var b=new Gk;b.qk=this;--this.xg;b.c.set(this.c.x,this.c.y,this.c.z);var c=t.b.ta.c.da();c.y+=t.b.ta.jb+t.b.ta.Aa-12500;b.w.x=c.x-this.c.x;b.w.y=c.y-this.c.y;b.w.z=c.z-this.c.z;b.w.pa(28E3);Ed(b.transform,b.c);T(b,t.Se);b.create();b.gf.push(this)}45==a&&(this.action.shift(),this.W=NaN)};
Z.prototype.rush=function(){isNaN(this.W)&&(this.W=t.h,this.ba=t.g.R.get("monsterWalk01"),this.sb=64,this.xe=8,this.Wd=Z.wb,this.mc=7443.5,this.mc*=1+1/3*(t.Oa.difficulty-1));var a=t.h-this.W;this.path&&0!=a%12||(this.path=Jk(this,t.b.ta.c.z,t.b.ta.c.x));0<a&&0==a%6&&this.xg&&(this.action.unshift("attack"),this.W=NaN);this.h=Math.floor(a/2)%8};
Z.prototype.death=function(){isNaN(this.W)&&(this.W=t.h,this.ba=t.g.R.get("monsterDeath01"),this.sb=16,this.xe=0,this.Wd=Z.sg);var a=t.h-this.W;4<=a&&(a-=4);this.h=Math.floor(a/4);13<this.h&&(this.h=13);6==a&&t.b.Cj(1);20==a&&(this.uh=.5*-this.ee);24==a&&t.g.ja.get(wb("bodyThud01","bodyThud02")).play({gain:.5});300<=a&&this.remove()};function Jk(a,b,c){Mi=300;return Oi(a.c.z,a.c.x,b,c)}
Z.prototype.Hi=function(){var a=new G;if(!this.path||"alert"==this.action[0]||"hit"==this.action[0]||"attack"==this.action[0])return a;for(var b,c;;){b=this.path[0];c=b.getParameter(this.c.z,this.c.x);if(c<b.length)break;this.path.shift();if(!this.path.length)return this.path=null,a}b=b.evaluate(c+1E5);a.z=b.x-this.c.z;a.x=b.y-this.c.x;ok(this,new G(b.y,0,b.x));return a};Z.prototype.jf=function(a){this.hb&&(this.Pd=t.h,this.w.x=0,this.w.z=0,this.vb-=a,0>=this.vb&&this.zh())};
Z.prototype.zh=function(){this.hb&&(this.hb=!1,this.action=["death"],this.W=NaN,this.path=null,lk.call(this),Ij.remove(this))};Z.prototype.remove=function(){this.ig&&this.ig.remove();var a=t.b.Zc.indexOf(this);0<=a&&t.b.Zc.splice(a,1);Qj.prototype.remove.call(this);this.hb&&lk.call(this)};function ok(a,b){b=nd(b,a.c,new G(0,0,0));b.y=0;b.pa(1);a.transform.I=b.z;a.transform.M=-b.x;a.transform.K=b.x;a.transform.m22=b.z}
function xk(a,b,c){a.hb&&("attack"==a.action[0]&&a.action.shift(),"hit"!=a.action[0]&&a.action.unshift("hit"),a.W=NaN,a.Kh=t.h);var d=c*(E(w)+1),e=new Ik;e.frame=tb(16);e.$a=12E3*(E(w)+1);e.$a*=c;e.c.set(0,0,5E4);b.lb(e.c,e.c);e.w.x=5E3*(2*E(w)-1);e.w.y=5E3*(2*E(w)-1);e.w.z=2E4*(E(w)+1);Cd(b,e.w,e.w);e.ue=fc(60*(.25+E(w)));ub(2)&&(e.ue=-e.ue);T(e,t.Se);e.create();e=new Ik;e.frame=tb(16);e.$a=8E3*(E(w)+1);e.$a*=c;e.c.set(0,0,5E4);b.lb(e.c,e.c);e.w.x=5E3*(2*E(w)-1);e.w.y=5E3*(2*E(w)-1);e.w.z=2E4*(E(w)+
1);Cd(b,e.w,e.w);e.Mf=Ik.td;T(e,t.Se);e.create();c=Math.sqrt(3*c)+E(w)-.5;for(e=0;e<c;e++){var h=new Ik;h.Ph=120;h.frame=tb(16);h.$a=12E3;h.c.set(0,0,5E4);b.lb(h.c,h.c);h.w.x=2*E(w)-1;h.w.y=2*E(w)-1;h.w.z=2*E(w);h.w.pa(1E4*(E(w)+1));h.w.y+=6E3*E(w);Cd(b,h.w,h.w);h.ue=fc(60*(.25+E(w)));ub(2)&&(h.ue=-h.ue);ub(2)&&(h.Mf=Ik.td);T(h,t.Se);h.create()}ok(a,Dd(t.sa.O));Nd(a);a.Yg||(a.Yg=[]);b.H-=a.c.x;b.m31-=a.c.y;b.m32-=a.c.z;a.Yg.push({yf:b,Mk:d})}
function Gk(){Mj.call(this,"potato");this.Ub=1E5;this.Aa=12500;this.jb=0;this.dc=!1;return this}Gk.prototype=Object.create(Mj.prototype);f=Gk.prototype;f.constructor=Gk;f.create=function(){this.W=t.h;this.Ka=new S;this.h=0;this.sb=16;this.ee=25E3;this.D=t.g.qa.get("physicalCardThreshold");this.ba=t.g.R.get("Potato");Md(this,18750);Mj.prototype.create.call(this)};f.sk=function(){this.remove()};
f.Oe=function(){var a=Dd(this.O),b=nd(Dd(t.sa.O),a,new G),c=b.pa(1);c=Math.min(1,c/(4*this.Aa));var d=new G(0,1,0),e=pc(d,b,new G).normalize();pc(b,e,d);var h=t.sa.O.Sf(),g=t.sa.O.me();this.Ka.fg(od(t.sa.O.Rf(),e,c).normalize());this.Ka.gg(od(h,d,c).normalize());this.Ka.hg(od(g,b,c).normalize());Ed(this.Ka,a);a=t.h-this.W;this.h=3*Math.floor(a/2);this.h%=this.sb;0==Math.floor(a/2)%13?(this.D=t.g.qa.get("flashCardThreshold"),this.color=$c):1==Math.floor(a/2)%13?(this.D=t.g.qa.get("flashCardThreshold"),
this.color=ad):(this.D=t.g.qa.get("physicalCardThreshold"),this.color=$c)};f.Va=function(){this.Oe();t.zb(kg);t.cb(this.D);t.$b(0,this.ba);Z.X.bind();t.D.N("ambientLight",this.ia.tb,!1);t.ub(0);t.Zb(0);t.D.N("color",this.color);var a=new S;a.set(this.Ka);var b=this.ee;a.I*=b;a.L*=b;a.M*=b;a.J*=-b;a.m11*=-b;a.m12*=-b;t.D.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,lg(this.h,this.sb),4)};f.remove=function(){this.qk.xg+=1;Mj.prototype.remove.call(this)};
function Ik(){t.Ua.call(this,"SpudGib");hg.call(this);this.sb=16;this.frame=0;this.$a=25E3;this.scale=1;this.uf=ub(2);this.Oc=gc(sb());this.ue=0;this.Ub=2*this.$a;this.W=this.kj=t.h+4;this.w=new G(0,0,0);this.Ph=600;this.Mf=Ik.Mf;this.td=Ik.td}Ik.prototype=Object.create(t.Ua.prototype);Ik.prototype.constructor=Ik;Ik.Mf=new R(191,158,101,255);Ik.td=new R(255,255,95,255);
Ik.prototype.create=function(){this.transform.H=this.c.x;this.transform.m31=this.c.y;this.transform.m32=this.c.z;t.Ua.prototype.create.call(this);Kk(this)};function Kk(a){a.dh=t.h;a.Rd=a.c.da();var b=kf(a.Rd,a.w);b?(a.mg=b.p,a.jh=b.n,a.Ue=Math.ceil(t.h+b.t),a.ng=b.item):a.Ue=Number.POSITIVE_INFINITY}
Ik.prototype.step=function(){this.ng&&this.ng.pd>this.dh&&Kk(this);if(t.h<this.Ue){this.lj&&this.lj.pd>this.dh&&(this.lj=null,this.W=t.h,this.w.set(0,0,0),this.ci=!1,Kk(this));var a=t.h-this.W;0>a||(this.ci?(this.c.y=this.Rd.y+this.w.y*a,this.transform.m31=this.c.y):(this.c.set(this.Rd.x+this.w.x*a,this.Rd.y+.5*(2*this.w.y+Hj.y*a)*a,this.Rd.z+this.w.z*a),this.transform.H=this.c.x,this.transform.m31=this.c.y,this.transform.m32=this.c.z,t.h%3||(this.Oc+=this.ue)))}else t.h==this.Ue&&(this.c.set(this.mg.x,
this.mg.y,this.mg.z),this.lj=this.ng,this.transform.H=this.c.x,this.transform.m31=this.c.y,this.transform.m32=this.c.z,this.Mf==this.td&&(yg(t.b.Mj,this.mg,this.jh,gc(sb()),this.$a*this.scale*2.5,tb(4),4),this.remove()),-1==this.jh.y?(this.Rd=this.c.da(),this.W=t.h+180+tb(360),this.w.set(0,0,0),this.ue=0,this.ci=!1,this.dh=t.h,(a=ff(this.Rd,this.w))?(this.mg=a.p,this.jh=a.n,this.Ue=Math.ceil(t.h+a.t),this.ng=a.item):this.Ue=Number.POSITIVE_INFINITY):0==this.jh.y?(this.Rd=this.c.da(),this.W=t.h+180+
tb(360),this.w.set(0,-500,0),this.ci=!0,this.dh=t.h,(a=ff(this.Rd,this.w))?(this.mg=a.p,this.jh=a.n,this.Ue=Math.ceil(t.h+a.t),this.ng=a.item):this.Ue=Number.POSITIVE_INFINITY):(this.Rd=this.c.da(),this.W=Number.POSITIVE_INFINITY,this.w.set(0,0,0),this.ue=0,this.ci=!1,this.dh=t.h,this.Ue=Number.POSITIVE_INFINITY,this.ng=null));t.h-this.kj>this.Ph&&this.remove();t.Ua.prototype.step.call(this)};
Ik.prototype.Va=function(){ig.call(this,this.O);t.zb(kg);t.cb(Ik.D);t.$b(0,Ik.ba);t.ub(0);t.Nb(2);t.Zb(0);t.D.N("modelMatrix",this.O);t.D.N("color1",this.Mf);t.D.N("color2",this.td);t.D.N("ambientLight",this.ia.tb);v.drawArrays(v.TRIANGLE_FAN,lg(this.frame,this.sb),4);t.Ua.prototype.Va.call(this)};function kk(a){Mj.call(this,"loot");this.species=a;this.Za=a.Za;this.Aa=37500;this.jb=0;this.$g=.8;this.Pb=t.h+tb(600);this.hb=!0}kk.prototype=Object.create(Mj.prototype);kk.prototype.constructor=kk;kk.sg=function(){t.g.ja.get("coinPurse01");t.g.ja.get("coinPurse02");t.g.ja.get("coinPurse03");t.g.ja.get("coinPurse04");t.g.ja.get("ingot01");t.g.ja.get("ingot02");t.g.ja.get("gem01");t.g.ja.get("gem02");t.g.ja.get("gem03");t.g.ja.get("crumplePaper01");t.g.ja.get("crumplePaper02")};f=kk.prototype;
f.create=function(){this.W=t.h;this.Ka=new S;this.h=0;this.sb=16;this.D=t.g.qa.get("physicalCardThreshold");this.transform.scale(1,1,1);Md(this,18E3);Mj.prototype.create.call(this)};
f.step=function(){if(this.bd)t.Ua.prototype.step.call(this);else if(this.hb)60==t.h-this.Pb&&(this.hb=!1,Ij.remove(this)),Mj.prototype.step.call(this);else{if(this.Id){var a=nd(new G(this.Id.c.x,this.Id.c.y,this.Id.c.z),this.c,new G(0,0,0));a.xf()<Math.pow(5E4,2)?(a=this.Id,this.Id=null,this.species.Gh.call(this,a),vb(this.species.ja).play({gain:1}),a.dk=t.h,this.Za?(this.bd=a,a.bd[this.index]=this,pd(this.el,this.c),this.fl&&(this.Pb=t.h,this.hb=!0,this.w.set(0,0,0),this.fb.set(0,0,0),Ij.add(this)),
this.Ia=0,this.ig.Ia=0):this.remove()):(a.y*=5,a.pa(25E3),this.c.x+=a.x,this.c.y+=a.y,this.c.z+=a.z);this.transform.H=this.c.x;this.transform.m31=this.c.y;this.transform.m32=this.c.z}t.Ua.prototype.step.call(this)}};f.remove=function(){t.Ua.prototype.remove.call(this);Ij.remove(this);this.bd&&delete this.bd.bd[this.index];this.Sb&&this.Sb.remove()};f.mk=function(){this.Id||this.remove()};
f.Oe=function(){var a=Dd(this.O);this.Za<this.species.Za&&(a.y-=21875);var b=nd(Dd(t.sa.O),a,new G),c=b.pa(1);c=Math.min(1,c/(4*this.Aa));var d=new G(0,1,0),e=pc(d,b,new G).normalize();pc(b,e,d);var h=t.sa.O.Sf(),g=t.sa.O.me();this.Ka.fg(od(t.sa.O.Rf(),e,c).normalize());this.Ka.gg(od(h,d,c).normalize());this.Ka.hg(od(g,b,c).normalize());Ed(this.Ka,a);this.h=this.Id?Math.floor(Math.min(15,(t.h-this.W)/2+8)):this.Za<this.species.Za?12:Math.floor((t.h-this.W)/3)%8};
f.Va=function(){this.Oe();t.zb(kg);t.cb(this.D);t.$b(0,this.species.jj);Z.X.bind();t.D.N("ambientLight",this.ia.tb,!1);t.ub(0);t.Zb(0);t.D.N("color",$c);var a=new S;a.set(this.Ka);var b=this.species.ee;a.I*=b;a.L*=b;a.M*=b;a.J*=-b;a.m11*=-b;a.m12*=-b;t.D.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,lg(this.h,this.sb),4)};kk.Rc=function(a){a=q(a.Xa.Jd);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b instanceof this.species.Wf)return Math.min(b.ce-jk(b)-b.$e,this.Za);return 0};
kk.Vb=function(a){a=q(a.Xa.Jd);for(var b=a.next();!b.done;b=a.next())b=b.value,b instanceof this.species.Wf&&(b.$e+=this.Za)};kk.Cb=function(a){a=q(a.Xa.Jd);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b instanceof this.species.Wf){var c=Math.min(this.Za,b.ce-jk(b));b.Da+=c;b.$e-=c;this.Za-=c;t.b.Jk(this.species,c);t.b.Bd()}};kk.Sl=function(a){return Math.min(360-a.vb-a.Qg,this.Za)};kk.Rl=function(a){a.Qg+=this.species.Za};kk.Pl=function(a){Hk(a,this.species.Za);a.Qg-=this.species.Za};function Ck(a){t.xa.call(this,a);hg.call(this);this.D=t.g.qa.get("physicalCard");this.ba=t.g.R.get("smokePuff02");this.X=Ck.X;this.color=new R(Ck.color.r,Ck.color.Wa,Ck.color.ka,255);this.frame=0;this.sb=16;this.w=new G;this.fb=new G;this.scale=1;this.Oc=gc(sb());this.Pb=t.h}Ck.prototype=Object.create(t.xa.prototype);Ck.prototype.constructor=Ck;Ck.X=new Pd;Ck.X.Ca=2;Ck.color=new R(144,144,144,255);
Ck.prototype.step=function(){var a=t.h-this.Pb;a=Math.pow(a/540,.625);this.frame=Math.floor(9*a);this.alpha=.25*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.Fa=this.alpha*Ck.color.Fa&255;this.transform.m31+=200;this.w.scale(.8125);a=new G(.5*this.fb.x+.5*this.w.x,.5*this.fb.y+.5*this.w.y,.5*this.fb.z+.5*this.w.z);this.transform.H+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.fb.set(this.w.x,this.w.y,this.w.z);t.xa.prototype.step.call(this)};
Ck.prototype.Va=function(){jg.call(this);t.xa.prototype.Va.call(this)};function wk(a){t.xa.call(this,a);hg.call(this);this.D=t.g.qa.get("physicalCard");this.ba=t.g.R.get("smokePuff02");this.X=Ck.X;this.color=new R(wk.color.r,wk.color.Wa,wk.color.ka,255);this.frame=0;this.sb=16;this.w=new G;this.fb=new G;this.scale=1;this.Oc=gc(sb());this.ia={va:4294967295,tb:new G(1,1,1)};this.Pb=t.h}wk.prototype=Object.create(t.xa.prototype);wk.prototype.constructor=wk;wk.color=new R(212,212,212,255);
wk.prototype.step=function(){var a=t.h-this.Pb;a/=this.Ph;a=Math.pow(a,.75);this.frame=Math.floor(9*a);this.alpha=.375*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.Fa=this.alpha*wk.color.Fa&255;this.w.scale(.8125);var b=new G(.5*this.fb.x+.5*this.w.x,.5*this.fb.y+.5*this.w.y,.5*this.fb.z+.5*this.w.z);this.transform.H+=b.x;this.transform.m31+=b.y;this.transform.m32+=b.z;this.fb.set(this.w.x,this.w.y,this.w.z);if(0==a||0==t.h%4)a=Dd(this.transform),(b=ff(a,new G(0,-1E8,0),Xf))&&(b=Se(b.item.aa))&&
Tf(a,b,this.ia.tb);t.xa.prototype.step.call(this)};wk.prototype.Va=function(){jg.call(this);t.xa.prototype.Va.call(this)};function Lk(a){t.xa.call(this,a);hg.call(this);this.D=t.g.qa.get("spray");this.ba=t.g.R.get("spray01");this.X=Lk.X;this.color=new R(Ik.td.r,Ik.td.Wa,Ik.td.ka,255);this.w=new G;this.fb=new G;this.scale=1;this.Oc=gc(sb());this.Pb=t.h}Lk.prototype=Object.create(t.xa.prototype);Lk.prototype.constructor=Lk;Lk.X=new Pd;Lk.X.Ca=0;
Lk.prototype.step=function(){var a=t.h-this.Pb;a/=this.dm;this.scale=15*a;1<=a&&this.remove();this.color.Fa=254*(a+1)&255;this.w.add(Hj);a=new G(.5*this.fb.x+.5*this.w.x,.5*this.fb.y+.5*this.w.y,.5*this.fb.z+.5*this.w.z);this.transform.H+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.fb.set(this.w.x,this.w.y,this.w.z);t.xa.prototype.step.call(this)};Lk.prototype.Va=function(){jg.call(this);t.xa.prototype.Va.call(this)};
function pk(a,b){t.xa.call(this,b);hg.call(this);this.D=t.g.qa.get("image");this.ba=t.g.R.get("explode");this.X=pk.X;this.color=new R(255,255,255,255);this.scale=1;this.$a=a;this.uf=ub(2);this.Oc=gc(sb());this.Pb=t.h+1;this.sb=16}pk.prototype=Object.create(t.xa.prototype);pk.prototype.constructor=pk;pk.X=new Pd;pk.X.Ca=1;
pk.prototype.step=function(){var a=t.h-this.Pb;50<=a&&this.remove();this.scale+=.02;this.transform.m31+=3E3*(1-a/50);this.frame=Math.floor(16*(1-Math.pow(.9375,a)));a=255*(1-(a-15)/35);255<a&&(a=255);a&=255;this.color.r=a;this.color.Wa=a;this.color.ka=a;this.color.Fa=a;t.xa.prototype.step.call(this)};pk.prototype.Va=function(){jg.call(this);t.xa.prototype.Va.call(this)};
function vk(a,b){t.xa.call(this,b);hg.call(this);this.D=t.g.qa.get("image");this.ba=t.g.R.get("bulletFlare01");this.X=vk.X;this.color=new R(255,255,255,0);this.scale=1;this.$a=a;this.uf=ub(2);this.Oc=gc(sb());this.Pb=t.h+1;this.sb=4}vk.prototype=Object.create(t.xa.prototype);vk.prototype.constructor=vk;vk.X=new Pd;vk.X.Ca=1;vk.prototype.step=function(){var a=t.h-this.Pb;0<=a&&(3<=a&&this.remove(),this.scale+=.25);this.frame=Math.floor(a);t.xa.prototype.step.call(this)};
vk.prototype.Va=function(){jg.call(this);t.xa.prototype.Va.call(this)};t.b=new t.Node("game");t.Vj=new t.Node("gameDraw");t.b.Ck=0;t.b.De=0;t.b.He=0;t.b.hk=0;t.b.gk=0;t.b.Zc=[];t.b.Gg=[];t.b.zg=[];t.b.Pi=0;t.b.Vg=0;t.b.ak=NaN;t.b.Bj=[];t.b.We=!0;t.b.Bd=function(){var a=t.b.ta.Xa.F,b=-170,c=119;!(a instanceof Ek)&&a instanceof zk&&(b+=6,c-=10);var d=jk(a).toLocaleString("en-US");var e=t.g.R.get("HUDNumerals24Bold");d=t.Eh(e,d,0);d.color=ad;d.x=b;d.y=c;d.x-=d.width*d.ij.width;a.oi=d;t.b.We=!0};
t.b.Ml=function(){var a=t.g.R.get("HUDNumeralsSilverAndGold");a=t.Eh(a,"1,875 / 2,000",0);a.color=$c;a.x=126;a.y=-127;t.b.Ol=a;t.b.We=!0};t.b.Jk=function(a,b){if(b){for(var c=null,d=0,e=q(t.b.Ce),h=e.next();!h.done;h=e.next())if(h=h.value,h.species!=a)d=h.y+h.species.Xe.height;else{c=h;break}c||(c={},c.species=a,c.Za=0,c.y=d,t.b.Ce.push(c));c.Za+=b;c.W=t.h;a=t.g.R.get("HUDNumerals14Bold");c.Aj=t.Eh(a,c.Za.toLocaleString("en-US"),0);t.b.We=!0}};
t.b.il=function(){for(var a=0,b=0;b<t.b.Ce.length;b++){var c=t.b.Ce[b];240<=t.h-c.W?(t.b.Ce.splice(b--,1),t.b.We=!0):(c.y=Math.max(c.y-.5,a),a+=c.species.Xe.height)}};t.b.Cj=function(a){t.b.Pi+=a;t.b.Vg+=a};t.b.hl=function(){0>=t.b.Vg||t.h<t.b.ak+2||(t.b.Vg--,t.b.ak=t.h,t.g.ja.get("hit02").play({gain:1}),t.b.Bj=t.Eh(t.g.R.get("HUDNumerals24Bold"),(t.b.Pi-t.b.Vg).toLocaleString("en-US"),1),t.b.Bj.am=t.h,t.b.We=!0)};
t.b.Tl=function(a){var b=document.createElement("div");b.style.position="relative";b.style.padding="8px";b.style.marginTop="4px";b.style.fontSize="14pt";b.style.background="#2c80fd";b.style.boxShadow="-2px 5px 0px black";b.innerHTML=a;b.kj=t.h;t.b.Ek.appendChild(b)};t.b.hm=function(a){t.b.Ek.removeChild(a)};
t.g.ready=function(){t.b.Ek=document.getElementById("tutorialDiv");var a=t.g.R.get("HUDNumerals10");a.ne=[7,5,7,7,8,7,7,7,7,7,3];a.Fe=10;a.Uf=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.Vf=[0,1,0,0,-1,0,0,0,0,0,0];t.Lh(a);a=t.g.R.get("HUDNumerals14Bold");a.ne=[9,6,9,9,9,9,9,9,9,9,4];a.Fe=14;a.Uf=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.Vf=[0,1,0,0,0,0,0,0,0,0,0];t.Lh(a);a=t.g.R.get("HUDNumerals24Bold");a.ne=[13,9,13,13,14,13,13,13,13,13,5];a.Fe=23;a.Uf=[0,1,0,0,-1,0,0,0,0,0,0];a.Vf=[0,3,0,0,0,0,0,0,0,0,0];t.Lh(a);
a=t.g.R.get("HUDNumeralsSilverAndGold");a.ne=[9,6,9,9,9,9,9,9,9,9,4,6,0];a.Fe=14;a.Uf=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,0];a.Vf=[0,1,0,0,0,0,0,0,0,0,0,-1,4];t.Lh(a);t.xk=T(new t.Node("scnBuilderMeshes"),t.Hc);t.Se=T(new t.Node("scnWorld"),t.Hc);t.Ff=T(new t.Node("scnDoors"),t.Se);t.Ff.Ia=0;t.Qe=T(new t.Node("scnSpuds"),t.Hc);t.Qe.Ia=0;t.yl=T(new t.Node("scnLoot"),t.Hc);t.eh=T(new t.Node("scnShadows"),t.Hc);t.eh.Ia=0;t.Re=T(new t.Node("scnWindowPanes"),t.Hc);t.Re.Ia=0;t.xd=T(new t.Node("scnEffects"),
t.Hc);t.xd.Ia=0;t.Od=T(new t.Node("scnSelf"),t.Hc);t.Od.Ia=0;t.xl=T(new t.Node("scnHUD"),t.Hc);T(Jj,t.Hc);T(t.b,t.Hc);t.Mg=1E3/60;t.h=0;a=[new G(135/255,223/255,206/255),new G(230/255,230/255,172/255),new G(135/255,223/255,206/255),new G(135/255,223/255,206/255),new G(0,213/255,1),new G(135/255,223/255,206/255)];t.b.Ul=a;for(var b=new Float32Array(36),c=0;c<a.length;c++)a[c].x=.1*a[c].x+.65,a[c].y=.1*a[c].y+.65,a[c].z=.1*a[c].z+.65,a[c].scale(.75),b[3*c]=a[c].x,b[3*c+1]=a[c].y,b[3*c+2]=a[c].z;t.cb(t.g.qa.get("physical"));
t.D.N("ambient",b);t.D.N("clipY",Infinity,!1);t.cb(t.g.qa.get("imageContrast"));t.D.N("contrastOffset",0);t.D.N("contrastScale",1.0625);t.zb(pe);ke(pe,pe.lh.length*pe.Eb);pe.upload(pe.lh);t.te(re);ke(re,2*re.elements.length);re.upload(re.elements);t.b.$f=new Ne;t.g.yb.get("gemRuby").Ca=0;t.g.yb.get("gemEmerald").Ca=0;t.g.yb.get("gemSapphire").Ca=0;t.g.yb.get("bulbGreen").Ca=0;Z.tg();a=fc(5);Dk.wb=[];for(b=0;9>b;b++)c=b,c*=1/9,c=Math.pow(c,.5),Dk.wb[b]=c*a;zk.wj=t.g.R.get("ViewCarbine");zk.aj=t.g.R.get("HUDReticleCarbine");
zk.Ma=t.g.R.get("HUDItemCarbine");zk.Ma.offsetY=-12;Dk.wj=t.g.R.get("ViewShotgun");Dk.aj=t.g.R.get("HUDReticleShotgun");Dk.Ma=t.g.R.get("HUDItemShotgun");Dk.Ma.offsetY=-10;Ek.wj=t.g.R.get("ViewRevolver");Ek.aj=t.g.R.get("HUDReticleRevolver");Ek.Ma=t.g.R.get("HUDItemRevolver");Ek.Ma.offsetY=-9;a=[t.g.ja.get("ShotgunShut01")];zk.ri={jj:t.g.R.get("CarbineMag"),Xe:t.g.R.get("HUDCartridgeCarbine"),ee:5E4,ja:a,mj:kk.Rc,Ti:kk.Vb,Gh:kk.Cb,Wf:zk,Za:100};Dk.ri={jj:t.g.R.get("ShotshellBox"),Xe:t.g.R.get("HUDCartridgeShotgun"),
ee:5E4,ja:a,mj:kk.Rc,Ti:kk.Vb,Gh:kk.Cb,Wf:Dk,Za:8};Ek.ri={jj:t.g.R.get("RevolverLoader"),Xe:t.g.R.get("HUDCartridgeRevolver"),ee:25E3,ja:a,mj:kk.Rc,Ti:kk.Vb,Gh:kk.Cb,Wf:Ek,Za:6};kk.sg();a=t.b.Mj=new wg;a.D=t.g.qa.get("splatter");a.ba=t.g.R.get("splatter02");a.color=Ik.td;a.Ca=1;a=t.b.Lj=new wg;a.D=t.g.qa.get("image");a.ba=t.g.R.get("bulletPock01");a.color=new R(255,255,255,128);a.Ca=2;a=new Pd;a.name="flashWhite";a.Ed=$c;a.Ca=0;t.g.yb.add(a);a=new Pd;a.name="flashRed";a.Ed=fd;a.Ca=0;t.g.yb.add(a);
t.b.ml();t.b.Cj(0);t.b.Ml();t.b.Ce=[];T(t.Vj,t.Hc);t.start()};
t.b.ml=function(){var a=performance.now();for(t.wa.insertAdjacentHTML("beforeend","Generating world... ");Yi(););Ri=!0;t.wa.insertAdjacentHTML("beforeend","done ("+t.wa.Ri.format(performance.now()-a)+" ms).<br />");t.wa.insertAdjacentHTML("beforeend","<br />Ready. Click to play!<br />");t.b.He=0;t.b.gk=3;t.b.hk=5;if(t.b.Ck)a=new dk("devCamera"),T(a,t.Hc),a.create(),t.b.sa=a;else{a=Se(0)[0][0];var b=t.b.ta=new nk("player");b.qh=Math.floor(2147483648/180*90);b.c.y=a.y+.5*b.Qd;b.c.z=a.z;b.c.x=a.x;T(b,
t.Se);b.create()}t.b.Sk()};t.b.Hl=function(){if(!(t.b.Zc.length>=t.b.He)){var a=vb(Li.ag);a=new G(tb(a.v-a.m)+a.m,-1E5,tb(a.G-a.C)+a.C);var b=ff(a,new G(0,-1E8,0),Xf);b&&(a.y=b.p.y+1E5,t.b.ta?(b=nd(t.b.ta.c,a,new G),b=ff(a,b,Tj)?!0:!1):b=!0,b&&(b=new Z,b.c.x=a.x,b.c.y=a.y,b.c.z=a.z,Ed(b.transform,b.c),T(b,t.Qe),b.create()))}};
t.b.Gl=function(){if(!(this.Gg.length>=t.b.hk*Qe.length/20)){var a=vb(Li.ag);a=new G(tb(a.v-a.m)+a.m,-1E5,tb(a.G-a.C)+a.C);var b=ff(a,new G(0,-1E8,0),Xf);b&&(a.y=b.p.y+1E5,t.b.ta?(b=nd(t.b.ta.c,a,new G),b=ff(a,b,Tj)?!0:!1):b=!0,b&&(a=new hk(a.x,a.y-1E5,a.z),T(a,t.Se),a.create()))}};
t.b.Fl=function(){if(!(this.zg.length>=t.b.gk*Qe.length/20)){var a=vb(Li.ag);a=new G(tb(a.v-a.m)+a.m,-1E5,tb(a.G-a.C)+a.C);var b=ff(a,new G(0,-1E8,0),Xf);b&&(a.y=b.p.y+1E5,t.b.ta?(b=nd(t.b.ta.c,a,new G),b=ff(a,b,Tj)?!0:!1):b=!0,b&&(a=new mk(a.x,a.y-1E5,a.z),T(a,t.Se),a.create()))}};
t.b.step=function(){for(var a,b,c=0;16>c;c++){qf=1-qf;a=pf[qf];b=pf[1-qf];for(var d=q(Qe),e=d.next();!e.done;e=d.next()){e=e.value;var h=e.index-pf.aa;5==t.b.De?(b[0][h]=.2*e.Xb.x+.8*e.Xb.x*(e.zc?1:Math.max(0,Math.cos(t.h/30*Math.PI))),b[1][h]=.2*e.Xb.y,b[2][h]=.2*e.Xb.z):(b[0][h]=e.Xb.x,b[1][h]=e.Xb.y,b[2][h]=e.Xb.z)}for(d=0;3>d;d++)for(e=q(of),h=e.next();!h.done;h=e.next()){h=h.value;var g=h.ad*a[d][h.Rg.index-pf.aa];g*=h.Zh[d];b[d][h.Ef.index-pf.aa]+=g/h.Ef.pj}a=q(Qe);for(e=a.next();!e.done;e=
a.next())d=e.value,d.zc&&(e=d.index-pf.aa,b[0][e]=d.Xb.x,b[1][e]=d.Xb.y,b[2][e]=d.Xb.z)}if(0==t.h%1){c=q(Qe);for(e=c.next();!e.done;e=c.next())a=e.value,d=a.index-pf.aa,a.ia.tb.x=b[0][d],a.ia.tb.y=b[1][d],a.ia.tb.z=b[2][d],b[0][d]=0,b[1][d]=0,b[2][d]=0;b=q(of);for(h=b.next();!h.done;h=b.next())c=h.value,c.nc&&(c.ad=c.Rg==c.Ef?uf(c.nc):tf(c.nc));b=0;c=t.gc.uk;a=q(Qe);for(d=a.next();!d.done;d=a.next())for(d=d.value,d.Me=b&255|d.pc.length<<16,d=q(d.pc),e=d.next();!e.done;e=d.next())e=e.value,e.Ad(new Float32Array(c.buffer,
b*c.fi,12)),e.index=b,b++;c.upload();b=q(Vi.elements);for(c=b.next();!c.done;c=b.next())c=c.value,(a=Se(c.aa))&&c.gd&&(c.gd.Na[1]=a.Me);nf&&rf()}t.b.Ck||0!=t.h%5||(this.Hl(),this.Gl(),this.Fl());t.b.hl();for(t.b.il();!(performance.now()>=t.Yk-4)&&Yi(););};
t.Vj.step=function(){t.Wb.r=0;t.Wb.Wa=0;t.Wb.ka=0;t.Wb.Fa=0;t.b.ta&&4>t.h-t.b.ta.dk&&(t.Wb.r+=24,t.Wb.Wa+=24,t.Wb.ka+=24,t.Wb.Fa+=24);if(t.b.ta){var a=t.h-t.b.ta.Oh;a=1.5-a/6;0>a&&(a=0);1<a&&(a=1);t.Wb.r+=170*a;t.Wb.Fa+=170*a}a=1-t.h/180;0<=a&&(t.Wb.Fa=255*a);v.bindFramebuffer(v.FRAMEBUFFER,t.bh.object);t.Nb(2);v.clear(v.DEPTH_BUFFER_BIT|v.STENCIL_BUFFER_BIT);0==t.h%60&&t.xk.children.sort(Xi);Wf();t.cb(t.g.qa.get("physical"));t.Ff.Ia=1;Jd(t.Ff);t.Ff.Ia=0;t.D.N("clipY",Infinity,!1);var b=pb.first();
for(a=Ue.first();b.item;){if(a.item){if(a.item.mh<t.h){var c=a.next;ib(a);a=c;continue}if(0<qb(b.item,a.item)){a=a.next;continue}}c=b.next;ib(b);nb(b,a);b=c}for(;a.item;)b=a.next,a.item.mh<t.h&&ib(a),a=b;Ve.H=.00390625*t.sa.O.H;Ve.m31=.00390625*t.sa.O.m31;Ve.m32=.00390625*t.sa.O.m32;t.zb(kg);t.cb(t.g.qa.get("sky"));t.$b(0,t.g.R.get("concr01"));t.D.N("texture1",1,!0);t.$b(1,t.g.R.get("sky01"));t.D.N("color",$c);t.ub(0);t.Nb(1);t.Zb(0);a=new S;b=(.5*t.sa.Bf+.5*t.sa.tf)*Uf.Bc;a.scale(b*t.viewport.ratio,
b,1);a.m32=-b/Math.tan(t.sa.ud);Bd(t.sa.O,a,a);t.D.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,0,4);if(t.Qe.children){t.Qe.children.sort(Wi);Z.Ma=128;for(a=t.Qe.children.first();a.item;a=a.next)a.item.gh()&&a.item instanceof Z&&a.item.Oe();v.enable(v.STENCIL_TEST);for(a=t.Qe.children.first();a.item;a=a.next)a.item.gh()&&(a.item instanceof Z||(v.stencilFunc(v.GEQUAL,128,255),v.stencilOp(v.KEEP,v.KEEP,v.KEEP)),a.item.Va());v.disable(v.STENCIL_TEST)}if(t.b.ta&&t.b.ta.Xa.F instanceof Ek&&.5<t.b.ta.Xa.focus){t.cb(t.g.qa.get("flashCardThreshold"));
t.ub(1);t.Nb(1);v.depthFunc(v.GREATER);for(a=t.Qe.children.first();a.item;a=a.next)if(a.item instanceof Z&&a.item.Ia&&600>t.h-a.item.Rh){t.D.N("color",new R(0,0,0,32*(1-(t.h-a.item.Rh)/600)));b=a.item;t.zb(kg);t.$b(0,b.ba);t.Zb(0);c=new S;c.set(b.Ka);var d=b.ee;c.I*=d;c.L*=d;c.M*=d;c.J*=-d;c.m11*=-d;c.m12*=-d;t.D.N("modelMatrix",c);v.drawArrays(v.TRIANGLE_FAN,lg(b.ii*b.xe+b.h,b.sb),4)}t.D.N("color",$c);v.depthFunc(v.LEQUAL)}t.b.Mj.Va();t.b.Lj.Va();t.cb(Ej.D);t.D.N("modelMatrix",Ve);Ej.X.bind();t.ub(1);
t.Nb(1);t.Zb(1);t.zb(Ej.Ta);t.te(Ej.Gd);b=a=0;for(c=Ue.first();c.item;c=c.next)c.item.Jj==a+b?b+=c.item.Ij:(b&&v.drawElements(v.TRIANGLES,b,v.UNSIGNED_SHORT,2*a),a=c.item.Jj,b=c.item.Ij);b&&v.drawElements(v.TRIANGLES,b,v.UNSIGNED_SHORT,2*a);t.ub(1);t.Nb(1);t.Zb(0);t.cb(t.g.qa.get("monoEffect"));t.zb(kg);v.activeTexture(v.TEXTURE0);v.bindTexture(v.TEXTURE_2D,t.g.R.get("shadow").object);t.D.N("enableTexture0",1,!0);t.D.N("color",t.Ye.color);t.eh.Ia=1;Jd(t.eh);t.eh.Ia=0;if(t.Re.children){a=t.sa.O.me();
for(b=t.Re.children.first();b.item;b=b.next)b.item.gh()&&(b.item.depth=jc(a,b.item.c));t.Re.children.sort(zi.S);zi.Oe();t.Re.Ia=1;Jd(t.Re);t.Re.Ia=0}t.xd.Ia=1;Jd(t.xd);t.xd.Ia=0;t.b.ta&&(t.yk(t.b.ta.yd),Vf(t.b.ta.yd),t.Od.Ia=1,Jd(t.Od),t.Od.Ia=0);t.b.ta&&(a=t.b.ta.Xa,a.Ia=1,a.Va(),a.Ia=0);t.ub(0);t.Nb(0);t.Zb(0);v.bindFramebuffer(v.FRAMEBUFFER,null);t.gc.Sc.N("viewMatrix",Fd);t.gc.Sc.upload();t.zb(kg);t.fh(new zc(t.canvas.width,t.canvas.height));t.cb(t.g.qa.get("imageContrast"));v.activeTexture(v.TEXTURE0);
v.bindTexture(v.TEXTURE_2D,t.bh.color.object);t.D.N("texture0",0,!0);t.D.N("enableTexture0",1,!0);t.D.N("modelMatrix",Fd);t.D.N("color",$c);t.D.N("imageAdd",t.Wb);t.D.N("imageSub",t.ll);v.drawArrays(v.TRIANGLE_FAN,0,4);t.b.ta&&t.b.Xk()};
t.b.Xk=function(){function a(D,I,J,O,oa,qa,ba){t.$b(0,D);var ca=t.canvas.width>>1,Fb=t.canvas.height>>1,hb=.5*D.width,Yb=.5*D.height;0==k?I-=ca:1==k&&(I+=ca);2==l?J-=Fb:3==l&&(J+=Fb);0==h?I+=hb:1==h&&(I-=hb);2==g?J+=Yb:3==g&&(J-=Yb);I=Math.round(I);J=Math.round(J);a.S&&(void 0===O?v.scissor(0,0,t.canvas.width,t.canvas.height):v.scissor(I+ca-hb+O,-J+Fb-Yb+oa,qa,ba));O=new S;O.I=D.width/t.canvas.width*m;O.m11=-D.height/t.canvas.height*n;O.H=2*I/t.canvas.width;O.m31=-2*J/t.canvas.height;t.D.N("modelMatrix",
O);v.drawArrays(v.TRIANGLE_FAN,0,4)}if(1==t.bi)t.bi=2;else{var b=t.b.ta.Xa.F;if(t.b.We){t.b.Hk=new le;var c=[];b&&(c=c.concat(b.oi));for(var d=q(t.b.Ce),e=d.next();!e.done;e=d.next())c=c.concat(e.value.Aj);me(c);t.b.We=!1}t.fh(new zc(t.canvas.width,t.canvas.height));t.gc.Sc.N("viewMatrix",Fd);t.gc.Sc.upload();t.Nb(0);t.Zb(0);var h=0,g=2,k=0,l=2,m=1,n=1;t.ub(2);v.enable(v.SCISSOR_TEST);a.S=!0;t.zb(kg);t.cb(t.g.qa.get("image"));t.D.N("color",$c);a.S=!1;h=1;g=2;k=4;l=5;c=q(t.b.Ce);for(e=c.next();!e.done;e=
c.next()){d=e.value;e=d.species.Xe.height;var r=Ya(-3+(t.h-d.W)/60,0,1)*e*.5;v.scissor(0,(t.canvas.height>>1)-44+d.y-e+r,t.canvas.width,t.canvas.height);a(d.species.Xe,-189,44-d.y+r)}a.S=!0;v.scissor(0,0,t.canvas.width,t.canvas.height);b&&(b.mi()&&(h=4,g=2,k=4,l=5,c=Math.cos(60*t.h/Math.PI),c=Ya(c,0,1),t.D.N("color",new R(255,255*c,255*c,127+128*c)),c=t.g.R.get("HUDWarnReload"),a(c,0,30),t.D.N("color",$c)),d=[$c,new R(255,255,64,255),new R(208,0,0,255)],b instanceof Ek?(e=b.ya,h=0,g=3,k=4,l=5,c=t.g.R.get("HUDMagRevolver"),
a(c,-158-34*e,123,34*e,0,34,34),g=2,c=t.g.R.get("HUDAmmo2"),t.D.N("color",d[b.qg()]),a(c,-201,91),t.D.N("color",$c)):b instanceof zk?(e=b.ya,h=0,g=3,k=4,l=5,c=t.g.R.get("HUDMagCarbine"),a(c,-208,124+13*e,0,13*e,97,13),g=2,c=t.g.R.get("HUDAmmo3"),t.D.N("color",d[b.qg()]),a(c,-208,81),t.D.N("color",$c)):b instanceof Dk&&(e=b.jc,h=0,g=3,k=4,l=5,c=t.g.R.get("HUDMagShotgun"),a(c,-150-18*e,123,18*e,0,18,34),g=2,c=t.g.R.get("HUDAmmo2"),t.D.N("color",d[b.qg()]),a(c,-201,91),t.D.N("color",$c)));b&&t.b.ta.Xa.qc&&
(t.ub(1),t.cb(t.g.qa.get("monoEffect")),c=new qd,t.b.ta.vg?(t.D.N("color",new R(255,0,0,255)),d=t.b.ta.vg,t.b.sa.vj.transform(new qd(d.x,d.y,d.z,1),c),c.x/=2*c.a,c.y/=2*c.a):t.D.N("color",new R(0,128,255,255)),t.D.N("ambientLight",new G(1,1,1)),h=4,g=5,k=4,l=5,(d=b.constructor.aj)&&a(d,Math.round(c.x*t.canvas.width),Math.round(-c.y*t.canvas.height)),t.ub(2),t.cb(t.g.qa.get("image")),t.D.N("color",$c));v.disable(v.SCISSOR_TEST);t.zb(t.b.Hk);c=function(){y.I=m*A.width/u;y.m11=n*A.height/z;y.H=x/u;y.m31=
-C/z;t.D.N("modelMatrix",y)};var p=d=0,u=t.canvas.width>>1,z=t.canvas.height>>1,y=new S;if(b&&b.oi){b=b.oi;var x=b.x;var C=b.y;var A=b.ij;t.$b(0,A);c();t.D.N("color",b.color);p=b.length;v.drawArrays(v.TRIANGLES,d,p);d+=p}v.enable(v.SCISSOR_TEST);b=q(t.b.Ce);for(e=b.next();!e.done;e=b.next())e=e.value,x=-188,C=44,p=e.species.Xe.height,r=Ya(-3+(t.h-e.W)/60,0,1)*p*.5,v.scissor(0,(t.canvas.height>>1)-C+e.y-p+r,t.canvas.width,t.canvas.height),p=e.Aj,A=p.ij,t.$b(0,A),p=p.length,C+=-e.y+19,C+=r,--x,C+=2,
c(),t.D.N("color",ad),v.drawArrays(v.TRIANGLES,d,p),x+=1,C-=2,c(),t.D.N("color",$c),v.drawArrays(v.TRIANGLES,d,p),d+=p;v.scissor(0,0,t.canvas.width,t.canvas.height);v.disable(v.SCISSOR_TEST)}};t.b.Il=function(){if(t.b.Ec)for(var a=q(t.b.Ec),b=a.next();!b.done;b=a.next()){b=b.value;var c=b.Lb,d=b.Mb,e=1-(t.Dh-b.Cd)/20;0<e?(c-=240*e*e,b.style.left=c+"px",b.style.top=d+"px"):0!=t.Dh%4||b.rb||(c+=Math.floor(2*Math.random()),d+=Math.floor(2*Math.random()),b.style.left=c+"px",b.style.top=d+"px")}};
t.b.Kj=function(){var a=t.rl=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor="#2c80fd";a.style.mixBlendMode="color";t.ye.appendChild(a)};
t.b.xh=function(){t.wa&&t.ye.removeChild(t.wa);var a=t.wa=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor="#2c80fdc0";a.style.overflow="hidden";t.ye.appendChild(a);t.b.Ec=[];t.Dh=0};
t.b.Nf=function(){function a(){t.g.ja.get("hit02").play({gain:.5})}function b(){t.g.ja.get("woodSnap02").play()}t.b.xh();var c=62,d=18,e=document.createElement("button");e.style.zIndex=2;e.style.width="134px";e.style.height="44px";e.style.position="absolute";e.Mb=c;c+=44;e.Lb=29;e.Cd=d;d+=-6;isNaN(t.b.tk)||(e.Cd=Math.max(e.Cd,(t.b.tk+1E3-performance.now())/t.Mg));t.b.Ec.push(e);e.style.border="none";e.style.background='url("'+t.g.R.get("MenuButtonPlay").data.src+'")';e.style.backgroundPosition="0px 0px";
e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -44px";ye.Al()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.rb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.rb=1;this.style.left=this.Lb+"px";this.style.top=this.Mb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.rb=0};t.em=e;t.wa.appendChild(e);e=document.createElement("button");e.style.zIndex=2;e.style.width=
"133px";e.style.height="42px";e.style.position="absolute";e.Mb=c;c+=44;e.Lb=29;e.Cd=d;d+=-6;t.b.Ec.push(e);e.style.border="none";e.style.background='url("'+t.g.R.get("MenuButtonOptions").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -44px";t.b.Qk()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.rb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";
this.rb=1;this.style.left=this.Lb+"px";this.style.top=this.Mb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.rb=0};t.wa.appendChild(e);e=document.createElement("button");e.style.zIndex=2;e.style.width="133px";e.style.height="42px";e.style.position="absolute";e.Mb=c;c+=44;e.Lb=29;e.Cd=d;d+=-6;t.b.Ec.push(e);e.style.border="none";e.style.background='url("'+t.g.R.get("MenuButtonReadme").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=
function(){this.style.backgroundPosition="0px -44px";t.b.Rk()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.rb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.rb=1;this.style.left=this.Lb+"px";this.style.top=this.Mb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.rb=0};t.wa.appendChild(e);e=document.createElement("button");e.style.zIndex=2;e.style.width="133px";e.style.height="42px";e.style.position=
"absolute";e.Mb=c;c+=44;e.Lb=29;e.Cd=d;d+=-6;t.b.Ec.push(e);e.style.border="none";e.style.background='url("'+t.g.R.get("MenuButtonDonate").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -44px";t.b.Pk()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.rb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.rb=1;this.style.left=this.Lb+"px";this.style.top=
this.Mb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.rb=0};t.wa.appendChild(e);c=q(t.b.Ec);for(d=c.next();!d.done;d=c.next())d=d.value,d.style.left=d.Lb+"px",d.style.top=d.Mb+"px"};
t.b.Qk=function(){function a(){t.g.ja.get("hit02").play({gain:.5})}function b(){t.g.ja.get("woodSnap02").play()}t.b.xh();t.tj={};for(var c in t.Oa)t.tj[c]=t.Oa[c];var d=document.createElement("div");d.style.height="100%";d.style.fontSize="6pt";d.style.lineHeight="1.5em";d.style.overflowY="scroll";d.style.padding="0";d.style.background="#505050";d.style.userSelect="none";t.wa.appendChild(d);c=t.wa.S=document.createElement("div");c.style.position="absolute";c.style.top="40px";c.style.right="56px";c.style.width=
"240px";c.style.fontSize="6pt";c.style.lineHeight="1.5em";t.wa.appendChild(c);c=document.createElement("div");c.style.padding="5px 102px 5px 20px";d.appendChild(c);c.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Options</h2>\n\t\t');d=document.createElement("input");d.id="inputCheckbox_musicEnabled";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Oa.musicEnabled;d.oninput=function(h){b();t.Oa.musicEnabled=h.target.checked?1:0;t.Audio.Rc()};d.style.marginTop=
"8px";var e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Music";d.onmouseenter=e.onmouseenter=function(){t.wa.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Music</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tBoots and Pants and Boots and Pants.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tTitle screen only. Game music coming soon.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);
c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputCheckbox_viewportFitWindow";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Oa.viewportFitWindow;d.oninput=function(h){b();t.Oa.viewportFitWindow=h.target.checked?1:0;t.Gf()};d.style.marginTop="8px";t.Sh=d;e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Fit window";d.onmouseenter=e.onmouseenter=function(){t.wa.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Fit Window</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tHave the game display as big as possible inside the browser window.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tYou can also use the <b>-</b> and <b>+</b> keys to adjust the size at any time.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputCheckbox_lightingFancy";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Oa.lightingFancy;d.oninput=function(h){b();t.Oa.lightingFancy=h.target.checked?1:0};d.style.marginTop="8px";e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Illumination Sampling";d.onmouseenter=e.onmouseenter=function(){t.wa.S.innerHTML=
'\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Illumination Sampling</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tAllow global illumination sampling in the fragment shader, for a realistic-looking world.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDisabling this might improve your framerate.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");
d.id="inputCheckbox_mouseRaw";d.name="mouseRaw";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Oa.mouseRaw;d.oninput=function(h){b();t.Oa.mouseRaw=h.target.checked?1:0};d.style.marginTop="8px";e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Raw mouse input";d.onmouseenter=e.onmouseenter=function(){t.wa.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Raw Mouse Input</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tEnable unadjusted hardware mouse input.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tThis will make your aiming rotation based on the movement of your mouse, regardless of how fast you move it, which is recommended for first-person gaming.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tCurrently supported only in Chrome, Edge, Opera, and <em>not</em> available in Firefox, Safari, or Linux.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputNumber_mouseDPI";d.name="mouseDPI";d.type="number";d.min=100;d.step=100;d.style.fontSize="7pt";d.value=t.Oa.mouseDPI;d.oninput=function(h){h.target.checkValidity()&&(t.Oa.mouseDPI=parseFloat(h.target.value),t.$h())};d.style.marginTop="8px";d.style.width="5em";e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Mouse DPI:";
d.onmouseenter=e.onmouseenter=function(){t.wa.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Mouse DPI</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tFor gamers: if you know the DPI of your mouse, enter it here.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tOtherwise, just leave this value at its default.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: 1600\n\t\t\t\t\t</p>\n\t\t\t\t\t';a()};c.appendChild(e);c.insertAdjacentHTML("beforeend"," ");c.appendChild(d);c.insertAdjacentHTML("beforeend","<br />");d=
document.createElement("input");d.id="inputNumber_mouseScale";d.name="mouseScale";d.type="number";d.min=.125;d.step=.125;d.style.fontSize="7pt";d.value=t.Oa.mouseScale;d.oninput=function(h){h.target.checkValidity()&&(t.Oa.mouseScale=parseFloat(h.target.value),t.$h())};d.style.marginTop="8px";d.style.width="5em";e=document.createElement("label");e.setAttribute("for",d.id);e.title=" ";e.innerHTML="Mouse scale:";d.onmouseenter=e.onmouseenter=function(){t.wa.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Mouse Scale</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tInches of mouse movement at the given DPI to perform a 360\u00b0 rotation in the game.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tLower values will increase the aiming sensitivity.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: 3\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(e);c.insertAdjacentHTML("beforeend"," ");c.appendChild(d);c.insertAdjacentHTML("beforeend","<br />");c=293;d=0;e=document.createElement("button");e.style.zIndex=2;e.style.width="76px";e.style.height="34px";e.style.position="absolute";e.Mb=250;e.Lb=c;c+=80;e.Cd=d;d+=6;t.b.Ec.push(e);e.style.border="none";e.style.background='url("'+t.g.R.get("MenuButtonCancel").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition=
"0px -36px";delete t.wa.S;delete t.Sh;for(var h in t.Oa)t.Oa[h]=t.tj[h];delete t.tj;t.Gf();t.$h();t.Audio.Rc();t.b.Nf()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -72px";this.rb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.rb=1;this.style.left=this.Lb+"px";this.style.top=this.Mb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.rb=0};t.wa.appendChild(e);e=document.createElement("button");e.style.zIndex=
2;e.style.width="76px";e.style.height="34px";e.style.position="absolute";e.Mb=250;e.Lb=c;c+=80;e.Cd=d;d+=6;t.b.Ec.push(e);e.style.border="none";e.style.background='url("'+t.g.R.get("MenuButtonOK").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -36px";delete t.wa.S;delete t.Sh;for(var h in t.Oa)window.localStorage.setItem(h,t.Oa[h]);t.Gf();t.b.Nf()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition=
"0px -72px";this.rb=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.rb=1;this.style.left=this.Lb+"px";this.style.top=this.Mb+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.rb=0};t.wa.appendChild(e);c=q(t.b.Ec);for(d=c.next();!d.done;d=c.next())d=d.value,d.style.left=d.Lb+"px",d.style.top=d.Mb+"px"};
t.b.Rk=function(){t.b.xh();var a=document.createElement("div");a.style.height="100%";a.style.fontSize="6pt";a.style.lineHeight="1.5em";a.style.overflowY="scroll";a.style.padding="0";a.style.background="#505050";a.style.userSelect="auto";t.wa.appendChild(a);var b=document.createElement("div");b.style.padding="5px 102px 5px 20px";a.appendChild(b);b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">How to Play</h2>\n\t\t\t\u2022 Use\t<b>W,A,S,D</b> and <b>Space</b> to move and jump.<br />\n\t\t\t\u2022 Use the <b>Mouse</b> to aim and shoot.<br />\n\t\t\t<br />\n\t\t');
a=document.createElement("img");a.src=t.g.R.get("HUDItemCarbine").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend","\n\t\t\t<br />\n\t\t\t\u2022 Press <span style=\"color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;\">E</span> to equip the <b>Carbine</b>.<br />\n\t\t\tIt's a short-barreled assault rifle with <em>lots of ammo</em> and a <em>high rate of fire</em>.<br />\n\t\t\tBullets will juggle-strike all the targets in your line-of-fire!<br />\n\t\t\t\u2022 Hold the <b>Right Mouse Button</b> to improve accuracy.<br />\n\t\t\t\u2022 Press <b>R</b> to reload.<br />\n\t\t\tThe 30-round magazine will regenerate whenever you're not shooting.<br />\n\t\t\t<br />\n\t\t");
a=document.createElement("img");a.src=t.g.R.get("HUDItemShotgun").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">C</span> to equip the <b>Shotgun</b>.<br />\n\t\t\tIt\'s a pump-action 12-gauge with great <em>multi-damage</em> stopping power.<br />\n\t\t\tPellets will continually dig through enemies until their full damage has been delivered!<br />\n\t\t\t\u2022 Press the <b>Right Mouse Button</b> to cycle it.<br />\n\t\t\tYou must cycle the shotgun before each shot.<br />\n\t\t\t<br />\n\t\t');
a=document.createElement("img");a.src=t.g.R.get("HUDItemRevolver").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend","\n\t\t\t<br />\n\t\t\t\u2022 Press <span style=\"color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;\">Q</span> to equip the <b>Revolver</b>.<br />\n\t\t\tIt's a six-shot double-action with great <em>accuracy</em> and <em>reach</em>.<br />\n\t\t\tBullets will go through walls, if not too thick!<br />\n\t\t\t\u2022 Hold the <b>Right Mouse Button</b> to track enemies you've glimpsed.<br />\n\t\t\t\u2022 Press <b>R</b> to reload.<br />\n\t\t\t<br />\n\t\t");
b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Contact</h2>\n\t\t\t<p>\n\t\t\tThis game is a preview of a work in progress.<br />\n\t\t\tPlease email me about any technical problems so I can fix them!<br />\n\t\t\tchad.chisholm@protonmail.com<br />\n\t\t\t</p>\n\t\t');b=373;a=0;var c=document.createElement("button");c.style.zIndex=2;c.style.width="76px";c.style.height="34px";c.style.position="absolute";c.Mb=250;c.Lb=b;b+=80;c.Cd=a;a+=6;t.b.Ec.push(c);
c.style.border="none";c.style.background='url("'+t.g.R.get("MenuButtonOK").data.src+'")';c.style.backgroundPosition="0px 0px";c.style.cursor="pointer";c.onclick=function(){this.style.backgroundPosition="0px -36px";t.b.Nf()};c.onmousedown=function(d){d.preventDefault();this.style.backgroundPosition="0px -72px";this.rb=2;t.g.ja.get("woodSnap02").play()};c.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.rb=1;this.style.left=this.Lb+"px";this.style.top=this.Mb+"px";t.g.ja.get("hit02").play({gain:.5})};
c.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.rb=0};t.wa.appendChild(c);b=q(t.b.Ec);for(a=b.next();!a.done;a=b.next())a=a.value,a.style.left=a.Lb+"px",a.style.top=a.Mb+"px"};
t.b.Pk=function(){t.b.xh();var a=document.createElement("div");a.style.height="100%";a.style.fontSize="6pt";a.style.lineHeight="1.5em";a.style.overflowY="scroll";a.style.padding="0";a.style.background="#505050";a.style.userSelect="auto";t.wa.appendChild(a);var b=document.createElement("div");b.style.padding="5px 102px 5px 20px";a.appendChild(b);b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Support the Project</h2>\n\t\t\t<p>\n\t\t\t<b>ShootPotato.com</b> is a free game for everyone. If you like it, and want it to be completed, then please consider making a donation to represent a purchase. This enables me to devote time and resources to continuing its development.\n\t\t\t<br />\n\t\t\t</p><p>\n\t\t');
b.insertAdjacentHTML("beforeend",'\n\t\t\t<form action="https://www.paypal.com/donate" method="post" target="_blank">\n\t\t\t<input type="hidden" name="hosted_button_id" value="8X4ZJS35NSYYJ" />\n\t\t\t<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />\n\t\t\t<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />\n\t\t\t</form>\n\t\t');
b.insertAdjacentHTML("beforeend",'\n\t\t\t</p>\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Coming Soon...</h2>\n\t\t\t<p>\n\t\t\t\u2022 melee weapon<br />\n\t\t\t\u2022 grenades!<br />\n\t\t\t\u2022 breakable glass<br />\n\t\t\t\u2022 organized enemy and loot spawning<br />\n\t\t\t\u2022 enemy NPC attacks<br />\n\t\t\t\u2022 enemy NPC hit, attack, and death animations<br />\n\t\t\t\u2022 enemy NPC behavioral logic, strategy<br />\n\t\t\t\u2022 collectible goodies, treasure, keys<br />\n\t\t\t\u2022 architectural art assets, textures, variation<br />\n\t\t\t\u2022 ambient sound effects, dynamic music<br />\n\t\t\t\u2022 more/better weapon and character sounds<br />\n\t\t\t\u2022 player death<br />\n\t\t\t\u2022 score and high score table<br />\n\t\t\t\u2022 more...<br />\n\t\t\t</p>\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Past Updates</h2>\n\t\t\t<p>\n\t\t\t<b>May 28th, 2023:</b><br />\n\t\t\t\u2022 app loading console<br />\n\t\t\t\u2022 window resizing<br />\n\t\t\t\u2022 main menu<br />\n\t\t\t\u2022 main menu music<br />\n\t\t\t\u2022 options menu<br />\n\t\t\t\u2022 readme page with pictures<br />\n\t\t\t\u2022 donation via PayPal<br />\n\t\t\t\u2022 large rooms with pillars<br />\n\t\t\t\u2022 improved color palette<br />\n\t\t\t</p><p>\n\t\t\t<b>May 7th, 2023:</b><br />\n\t\t\t\u2022 maze world generator<br />\n\t\t\t\u2022 global illumination at 60 FPS<br />\n\t\t\t\u2022 room lights switching on<br />\n\t\t\t\u2022 improved performance of collision scans<br />\n\t\t\t\u2022 gibs colliding with props<br />\n\t\t\t\u2022 HUD cards for ammo collection<br />\n\t\t\t</p><p>\n\t\t\t<b>Dec 18th, 2022:</b><br />\n\t\t\t\u2022 endless world generation<br />\n\t\t\t\u2022 user settings panel<br />\n\t\t\t\u2022 weapons reloading<br />\n\t\t\t\u2022 ammo collectibles<br />\n\t\t\t</p><p>\n\t\t\t<b>Oct 30th, 2022:</b><br />\n\t\t\t\u2022 NPC navigation graph<br />\n\t\t\t</p><p>\n\t\t\t<b>Oct 11th, 2022:</b><br />\n\t\t\t\u2022 website launched<br />\n\t\t\t</p><p>\n\t\t');
a=373;b=0;var c=document.createElement("button");c.style.zIndex=2;c.style.width="76px";c.style.height="34px";c.style.position="absolute";c.Mb=250;c.Lb=a;a+=80;c.Cd=b;b+=6;t.b.Ec.push(c);c.style.border="none";c.style.background='url("'+t.g.R.get("MenuButtonOK").data.src+'")';c.style.backgroundPosition="0px 0px";c.style.cursor="pointer";c.onclick=function(){this.style.backgroundPosition="0px -36px";t.b.Nf()};c.onmousedown=function(d){d.preventDefault();this.style.backgroundPosition="0px -72px";this.rb=
2;t.g.ja.get("woodSnap02").play()};c.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.rb=1;this.style.left=this.Lb+"px";this.style.top=this.Mb+"px";t.g.ja.get("hit02").play({gain:.5})};c.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.rb=0};t.wa.appendChild(c);a=q(t.b.Ec);for(b=a.next();!b.done;b=a.next())b=b.value,b.style.left=b.Lb+"px",b.style.top=b.Mb+"px"};
t.b.Sk=function(){var a=document.createElement("button");a.style.zIndex=2;a.style.position="absolute";a.style.width="64px";a.style.height="64px";a.style.left=(t.canvas.width-64>>1)+"px";a.style.top=(t.canvas.height-64>>1)+"px";a.style.border="none";a.style.background='url("WebsitePlay_230507_01.png")';a.style.backgroundSize="64px 64px";a.style.backgroundPosition="center";a.style.backgroundRepeat="no-repeat";a.style.opacity="75%";a.style.cursor="pointer";a.onclick=function(){t.g.ja.get("woodSnap02").play();
t.fm=!0;t.b.Kj();t.b.Nf();t.Audio.Rc();var b=t.g.ja.get("MusicFactoryBeat01");t.Audio.Bc&&t.Audio.Bc.stop();var c=t.Audio.S.createGain();c.gain.value=.75;c.connect(t.Audio.Cb);var d=new AudioBufferSourceNode(t.Audio.S);d.connect(c);d.loop=!0;d.buffer=b.buffer;d.start();t.Audio.Bc=d};a.onmouseenter=function(){this.style.opacity="100%"};a.onmouseleave=function(){this.style.opacity="75%"};t.wa.appendChild(a)};
document.addEventListener("pointerlockchange",function(){document.pointerLockElement?(t.ye.removeChild(t.rl),t.ye.removeChild(t.wa),t.wa=null,t.Audio.Bc.stop(),ze.clear(),ye.clear(),t.paused=!1,t.b.$f.le.disconnect(t.b.$f.Qh),t.b.$f.le.connect(t.Audio.Cb)):(t.bi=1,t.b.tk=performance.now(),t.b.$f.le.disconnect(t.Audio.Cb),t.b.$f.le.connect(t.b.$f.Qh))});t.b.pause=function(){t.bi=0;t.paused=!0;t.b.Kj();t.b.Nf()};
(function(){var a,b,c,d,e,h,g;return Ja(new Ga(new Aa(function(k){if(1==k.S){t.bh=new ck;t.wl();a=t.wa=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor="black";a.style.overflow="hidden";a.style.fontFamily="monospace";a.style.fontSize="8pt";a.style.color="white";t.ye.appendChild(a);t.wa.Ri=new Intl.NumberFormat("en-US",{maximumFractionDigits:2});t.wa.insertAdjacentHTML("beforeend",
"\n\t----------------------------------------------------------------------------<br />\n\tThis game is a preview of a work in progress.<br />\n\tPlease email me about any technical problems so I can fix them!<br />\n\tchad.chisholm@protonmail.com<br />\n\t----------------------------------------------------------------------------<br />\n\t<br />\n\t");t.wa.insertAdjacentHTML("beforeend","ShootPotato v0.006<br />");t.wa.insertAdjacentHTML("beforeend","May 27, 2023<br />");t.wa.insertAdjacentHTML("beforeend",
"GL Vendor: "+v.getParameter(v.VENDOR)+"<br />");t.wa.insertAdjacentHTML("beforeend","GL Version: "+v.getParameter(v.VERSION)+"<br />");t.wa.insertAdjacentHTML("beforeend","GL Renderer: "+v.getParameter(v.RENDERER)+"<br />");t.wa.insertAdjacentHTML("beforeend","Fetching resources... ");c=b=performance.now();window.localStorage.removeItem("resources");window.localStorage.removeItem("resourceVersion");var l=fetch("resources_230528_01.gob");k.S=2;return{value:l}}if(3!=k.S)return d=k.Vb,c=performance.now(),
t.wa.insertAdjacentHTML("beforeend","done ("+t.wa.Ri.format(c-b)+" ms).<br />"),b=c,t.wa.insertAdjacentHTML("beforeend","Unpacking resources... "),e=Uint8Array,l=d.arrayBuffer(),k.S=3,{value:l};h=new e(k.Vb);for(g=0;g<h.length;g++);h.position=0;l=h;for(var m=53,n=0;n<l.length;n++){var r=l[n];l[n]=l[n]-193*m-53&255;m=r}t.g.load(h);c=performance.now();t.wa.insertAdjacentHTML("beforeend","done ("+t.wa.Ri.format(c-b)+" ms).<br />");k.S=0})))})();
