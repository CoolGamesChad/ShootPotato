var f;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function q(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function ca(a){if(!(a instanceof Array)){a=q(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
var ea="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ha="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function ia(a,b){if(b){var c=ea;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ha(c,a,{configurable:!0,writable:!0,value:b})}}
ia("Promise",function(a){function b(g){this.Ia=0;this.Ob=void 0;this.W=[];var k=this.qb();try{g(k.resolve,k.reject)}catch(l){k.reject(l)}}function c(){this.W=null}function d(g){return g instanceof b?g:new b(function(k){k(g)})}if(a)return a;c.prototype.Ia=function(g){if(null==this.W){this.W=[];var k=this;this.qb(function(){k.Ob()})}this.W.push(g)};var e=ea.setTimeout;c.prototype.qb=function(g){e(g,0)};c.prototype.Ob=function(){for(;this.W&&this.W.length;){var g=this.W;this.W=[];for(var k=0;k<g.length;++k){var l=
g[k];g[k]=null;try{l()}catch(m){this.Gb(m)}}}this.W=null};c.prototype.Gb=function(g){this.qb(function(){throw g;})};b.prototype.qb=function(){function g(m){return function(n){l||(l=!0,m.call(k,n))}}var k=this,l=!1;return{resolve:g(this.Gg),reject:g(this.Gb)}};b.prototype.Gg=function(g){if(g===this)this.Gb(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.yh(g);else{a:switch(typeof g){case "object":var k=null!=g;break a;case "function":k=!0;break a;default:k=!1}k?this.If(g):
this.Lc(g)}};b.prototype.If=function(g){var k=void 0;try{k=g.then}catch(l){this.Gb(l);return}"function"==typeof k?this.zh(k,g):this.Lc(g)};b.prototype.Gb=function(g){this.$c(2,g)};b.prototype.Lc=function(g){this.$c(1,g)};b.prototype.$c=function(g,k){if(0!=this.Ia)throw Error("Cannot settle("+g+", "+k+"): Promise already settled in state"+this.Ia);this.Ia=g;this.Ob=k;this.$e()};b.prototype.$e=function(){if(null!=this.W){for(var g=0;g<this.W.length;++g)h.Ia(this.W[g]);this.W=null}};var h=new c;b.prototype.yh=
function(g){var k=this.qb();g.Mg(k.resolve,k.reject)};b.prototype.zh=function(g,k){var l=this.qb();try{g.call(k,l.resolve,l.reject)}catch(m){l.reject(m)}};b.prototype.then=function(g,k){function l(p,t){return"function"==typeof p?function(z){try{m(p(z))}catch(w){n(w)}}:t}var m,n,r=new b(function(p,t){m=p;n=t});this.Mg(l(g,m),l(k,n));return r};b.prototype.catch=function(g){return this.then(void 0,g)};b.prototype.Mg=function(g,k){function l(){switch(m.Ia){case 1:g(m.Ob);break;case 2:k(m.Ob);break;default:throw Error("Unexpected state: "+
m.Ia);}}var m=this;null==this.W?h.Ia(l):this.W.push(l)};b.resolve=d;b.reject=function(g){return new b(function(k,l){l(g)})};b.race=function(g){return new b(function(k,l){for(var m=q(g),n=m.next();!n.done;n=m.next())d(n.value).Mg(k,l)})};b.all=function(g){var k=q(g),l=k.next();return l.done?d([]):new b(function(m,n){function r(z){return function(w){p[z]=w;t--;0==t&&m(p)}}var p=[],t=0;do p.push(void 0),t++,d(l.value).Mg(r(p.length-1),n),l=k.next();while(!l.done)})};return b});
function na(){na=function(){};ea.Symbol||(ea.Symbol=pa)}function ra(a,b){this.W=a;ha(this,"description",{configurable:!0,writable:!0,value:b})}ra.prototype.toString=function(){return this.W};var pa=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new ra("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function sa(){na();var a=ea.Symbol.iterator;a||(a=ea.Symbol.iterator=ea.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ha(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ua(aa(this))}});sa=function(){}}function ua(a){sa();a={next:a};a[ea.Symbol.iterator]=function(){return this};return a}function va(){this.Gb=!1;this.Ia=null;this.Ob=void 0;this.W=1;this.$c=0;this.qb=null}function wa(a){if(a.Gb)throw new TypeError("Generator is already running");a.Gb=!0}
va.prototype.Lc=function(a){this.Ob=a};function ya(a,b){a.qb={$j:b,ik:!0};a.W=a.$c}va.prototype.return=function(a){this.qb={return:a};this.W=this.$c};function Da(a){this.W=new va;this.Ia=a}function Ea(a,b){wa(a.W);var c=a.W.Ia;if(c)return Fa(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.W.return);a.W.return(b);return Ga(a)}
function Fa(a,b,c,d){try{var e=b.call(a.W.Ia,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.W.Gb=!1,e;var h=e.value}catch(g){return a.W.Ia=null,ya(a.W,g),Ga(a)}a.W.Ia=null;d.call(a.W,h);return Ga(a)}
function Ga(a){for(;a.W.W;)try{var b=a.Ia(a.W);if(b)return a.W.Gb=!1,{value:b.value,done:!1}}catch(c){a.W.Ob=void 0,ya(a.W,c)}a.W.Gb=!1;if(a.W.qb){b=a.W.qb;a.W.qb=null;if(b.ik)throw b.$j;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function Ha(a){this.next=function(b){wa(a.W);a.W.Ia?b=Fa(a,a.W.Ia.next,b,a.W.Lc):(a.W.Lc(b),b=Ga(a));return b};this.throw=function(b){wa(a.W);a.W.Ia?b=Fa(a,a.W.Ia["throw"],b,a.W.Lc):(ya(a.W,b),b=Ga(a));return b};this.return=function(b){return Ea(a,b)};sa();this[Symbol.iterator]=function(){return this}}
function Ja(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function h(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(h,e)}h(a.next())})}ia("Math.sign",function(a){return a?a:function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1}});
function Ka(a,b){sa();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}ia("Array.prototype.keys",function(a){return a?a:function(){return Ka(this,function(b){return b})}});var La=document.body;La.style.position="relative";La.style.left=(window.innerWidth-960>>1)+"px";La.style.width="960px";La.style.margin="0px";
La.style.marginBottom="20px";La.style.padding="0px";La.style.display="flex";La.style.flexFlow="row wrap";La.style.alignItems="flex-start";La.style.alignContent="flex-start";La.style.backgroundColor="#404040";La.style.fontFamily="sans-serif";La.style.fontSize="12pt";La.style.lineHeight="1.4em";La.style.color="white";window.onresize=function(){document.body.style.left=(window.innerWidth-960>>1)+"px"};var Ma=document.createElement("div");Ma.innerHTML="The website where you shoot potatoes.";
Ma.style.fontSize="18pt";Ma.style.fontWeight="bold";Ma.style.flex="1 0 auto";Ma.style.textAlign="center";Ma.style.margin="0";document.body.appendChild(Ma);var Na=document.createElement("div");Na.id="paneContainer";Na.style.width="960px";Na.style.height="592px";Na.style.margin="40px 0";Na.style.outline="10px solid black";Na.style.backgroundColor="black";document.body.appendChild(Na);var Ra=document.createElement("div");Ra.id="divCPanel";document.body.appendChild(Ra);var Sa=document.getElementById("divCPanel");
Sa.style.width="960px";Sa.insertAdjacentHTML("beforeend",'\n\t\t<h2 style="color:#ffff80">How to Play:</h2>\n\t\t<b>W,A,S,D</b> and <b>Space</b> - move and jump.<br />\n\t\t<b>[Q,E,C]</b> - select guns.<br />\n\t\t<b>Mouse</b> - aim and shoot.<br />\n\t\t<b>Right Mouse Button</b> - gun special feature.<br />\n\t\t<b>R</b> - reload.<br />\n\t\t<b>Esc</b> - pause the game.<br />\n\t\t\n\t\t<h2 style="color:#ffff80">Options:</h2>\n\t');var Ua=document.createElement("input");Ua.id="inputCheckbox_lightingFancy";
Ua.name="lightingFancy";Ua.title="Enable per-pixel global illumination. Disable this to improve framerate. Default: true";Ua.type="checkbox";var Va=window.localStorage.getItem("lightingFancy");null===Va&&(Va="true");Ua.checked="true"==Va;Ua.onchange=function(a){u.Ib.lightingFancy=a.target.checked;window.localStorage.setItem("lightingFancy",a.target.checked)};Ua.style.marginTop="8px";var Xa=document.createElement("label");Xa.setAttribute("for",Ua.id);Xa.title="Enable per-pixel global illumination. Disable this to improve framerate. Default: true";
Xa.innerHTML="Fancy lighting";Sa.appendChild(Ua);Sa.insertAdjacentHTML("beforeend"," ");Sa.appendChild(Xa);Sa.insertAdjacentHTML("beforeend","<br />");var Ya=document.createElement("input");Ya.id="inputCheckbox_mouseRaw";Ya.name="mouseRaw";Ya.title="Enable unadjusted hardware mouse delta (in compatible browsers). Default: true";Ya.type="checkbox";var Za=window.localStorage.getItem("mouseRaw");null===Za&&(Za="true");Ya.checked="true"==Za;
Ya.onchange=function(a){u.Ib.mouseRaw=a.target.checked;window.localStorage.setItem("mouseRaw",a.target.checked)};Ya.style.marginTop="8px";var $a=document.createElement("label");$a.setAttribute("for",Ya.id);$a.title="Enable unadjusted hardware mouse delta (in compatible browsers). Default: true";$a.innerHTML="Raw mouse input";Sa.appendChild(Ya);Sa.insertAdjacentHTML("beforeend"," ");Sa.appendChild($a);Sa.insertAdjacentHTML("beforeend","<br />");var ab=document.createElement("input");ab.id="inputNumber_mouseDPI";
ab.name="mouseDPI";ab.title="The DPI of your mouse. Default: 800";ab.type="number";ab.min=100;ab.step=100;var cb=window.localStorage.getItem("mouseDPI");null===cb&&(cb="800");ab.value=cb;ab.onchange=function(a){a.target.checkValidity()&&(u.Ib.mouseDPI=parseFloat(a.target.value),window.localStorage.setItem("mouseDPI",a.target.value),u.ih())};ab.style.marginTop="8px";ab.style.width="5em";var db=document.createElement("label");db.setAttribute("for",ab.id);db.title="The DPI of your mouse. Default: 800";
db.innerHTML="Mouse DPI:";Sa.appendChild(db);Sa.insertAdjacentHTML("beforeend"," ");Sa.appendChild(ab);Sa.insertAdjacentHTML("beforeend","<br />");var fb=document.createElement("input");fb.id="inputNumber_mouseScale";fb.name="mouseScale";fb.title="Inches of mouse movement per 360\u00b0 rotation. Default: 3.5";fb.type="number";fb.min=.125;fb.step=.125;var gb=window.localStorage.getItem("mouseScale");null===gb&&(gb="3.5");fb.value=gb;
fb.onchange=function(a){a.target.checkValidity()&&(u.Ib.mouseScale=parseFloat(a.target.value),window.localStorage.setItem("mouseScale",a.target.value),u.ih())};fb.style.marginTop="8px";fb.style.width="5em";var hb=document.createElement("label");hb.setAttribute("for",fb.id);hb.title="Inches of mouse movement per 360\u00b0 rotation. Default: 3.5";hb.innerHTML="Mouse scale:";Sa.appendChild(hb);Sa.insertAdjacentHTML("beforeend"," ");Sa.appendChild(fb);Sa.insertAdjacentHTML("beforeend","<br />");
Sa.insertAdjacentHTML("beforeend",'\n\t\t<h2 style="color:#ffff80">About:</h2>\n\t\tThis game is currently in development.<br />\n\t\tPlease let me know of any technical problems\u2014your feedback is essential to identifying those problems.<br />\n\t\tchad.chisholm@protonmail.com\n\t');function ib(a,b){for(var c=0,d=a.length,e=c+(d-c>>1);c<d;){var h=a.cmp.call(null,b,a[e]);if(0>h)d=e,e=c+(d-c>>1);else if(0<h)c=e+1,e=c+(d-c>>1);else break}return e}function jb(a,b){var c=ib(a,b);return a[c]&&0==a.cmp(a[c],b)?a[c]:null}function kb(a,b){var c=ib(a,b);if(a[c]&&0==a.cmp(a[c],b))return a[c];a.splice(c,0,b);return b}function lb(a,b){var c=ib(a,b);a[c]&&0==a.cmp(a[c],b)&&a.splice(c,1)};for(var u={},v,nb=new Uint8Array(256),ob=0;256>ob;ob++)nb[ob]=nb[ob>>>1]+(ob&1);function pb(a,b,c){return a<b?b:a>c?c:a}function qb(a,b,c){return a*(1-c)+b*c}function rb(a,b){return a==b?a:0==a?b:0==b?a:0==(a&1)?0==(b&1)?rb(a>>1,b>>1)<<1:rb(a>>1,b):0==(b&1)?rb(a,b>>1):a>=b?rb(a-b>>1,b):rb(b-a>>1,a)}function sb(a,b,c){var d=b*b-4*a*c;if(0<d){c={};d=Math.sqrt(d);a=2*a;var e=(-b+d)/a;a=(-b-d)/a;a>e?(c.Ca=e,c.mc=a):(c.Ca=a,c.mc=e);return c}return 0==d?(c={},c.Ca=-b/(2*a),c.mc=c.Ca,c):null}
function tb(a){this.cmp=a;this.elements=[]}f=tb.prototype;f.get=function(a){var b=wb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements[b]};f.contains=function(a){var b=wb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?-1:b};f.add=function(a){return this.push(a)};f.push=function(a){var b=wb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return!1;this.elements.splice(b,0,a);return!0};
f.replace=function(a){var b=wb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b]=a,!0;this.elements.splice(b,0,a);return!0};f.Ka=function(a){var b=wb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b];this.elements.splice(b,0,a);return a};f.remove=function(a){var b=wb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements.splice(b,1)[0]};
function wb(a,b){for(var c=0,d=a.elements.length,e=Math.floor(c/2+d/2);c<d;){var h=a.cmp.call(a,b,a.elements[e]);if(0>h)d=e,e=Math.floor(c/2+d/2);else if(0<h)c=e+1,e=Math.floor(c/2+d/2);else break}return e}f.clear=function(){this.elements.length=0};f.Xg=function(){return 0==this.elements.length};function xb(){this.start=new yb(null);return this}f=xb.prototype;f.Xg=function(){return!this.first().item};f.size=function(){for(var a=0,b=this.first();b.item;b=b.next)a++;return a};f.first=function(){return this.start.next};
f.clear=function(){Ab(this.start);return this};function Bb(a,b){Cb(b,a.start);return a}f.add=function(a){return Bb(this,new yb(a))};function Db(a){for(var b=Ib,c=Jb,d=b.first();d.item;d=d.next)if(0>c.call(null,a.item,d.item)){Cb(a,d);return}Cb(a,b.start)}f.get=function(a){for(var b=this.first();b.item;b=b.next)if(b.item==a)return b;return null};f.remove=function(a){a=this.get(a);if(null==a)return null;Ab(a);return this};
f.sort=function(a){for(var b,c=this.first();c.item;c=b){b=c.next;var d=c;for(var e=d.ib;e.item&&!(0<=a(d.item,e.item));)e=e.ib;d=e;d!=c.ib&&(Ab(c),c.ib=d,c.next=d.next,c.ib.next=c,c.next.ib=c)}};function yb(a){this.item=a;this.ib=this;this.next=this;return this}function Cb(a,b){a.next=b;a.ib=b.ib;a.next.ib=a;a.ib.next=a}function Ab(a){a.ib.next=a.next;a.next.ib=a.ib;a.next=a.ib=a};function Lb(){var a;isNaN(a)&&(a=(new Date).getTime()|0);this.sk=a;this.r=a+643709624|0}Lb.prototype.next=function(){this.r^=this.r<<13;this.r^=this.r>>17;this.r^=this.r<<5;this.r>>>=0};function Mb(){var a=x;a.next();return a.r}function E(a){a.next();return a.r/4294967295}var x=new Lb;function Nb(a){return Math.floor(E(x)*a)}function Ob(a){return 1>E(x)*a}function Pb(a){return a[Nb(a.length)]}function Qb(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return Pb(b)};function Rb(a,b,c){for(var d=0,e=a.length,h=d+(e-d>>1);d<e;){var g=c.call(null,b,a[h]);if(0>g)e=h,h=d+(e-d>>1);else if(0<g)d=h+1,h=d+(e-d>>1);else break}return h}function Sb(a,b){var c=a.splice(0);c=q(c);for(var d=c.next();!d.done;d=c.next())d=d.value,a.splice(Rb(a,d,b),0,d)}function Jb(a,b){return isNaN(a)?a.index<b.index?-1:a.index>b.index?1:0:a<b.index?-1:a>b.index?1:0}function Tb(a,b){return"string"==typeof a?a<b.name?-1:a>b.name?1:0:a.name<b.name?-1:a.name>b.name?1:0};function Ub(a){var b=Vb(a);a=a.slice(a.position,a.position+=b);return String.fromCharCode.apply(null,a)}function Wb(a,b){Xb(a,b.length);for(var c=0;c<b.length;c++)a[a.position++]=b.charCodeAt(c)}function dc(a){var b=ec(a);a=a.slice(a.position,a.position+=b);return String.fromCharCode.apply(null,a)}function fc(a,b){gc(a,b.length);for(var c=0;c<b.length;c++)a[a.position++]=b.charCodeAt(c)}function Vb(a){return a[a.position++]}function Xb(a,b){a[a.position++]=b&255}
function hc(a){var b=0|a[a.position++]<<0;return b|=a[a.position++]<<8}function ic(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}function oc(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;return(b>>>0)-32768}function pc(a,b){b+=32768;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}function ec(a){var b=a[a.position++]<<0;b+=a[a.position++]<<8;b+=a[a.position++]<<16;return b+=a[a.position++]<<24}
function gc(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}function qc(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;b|=a[a.position++]<<16;b|=a[a.position++]<<24;return(b>>>0)-2147483648}function rc(a,b){b+=2147483648;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}
function sc(a){var b=new Uint8Array(4);b[0]=a[a.position++];b[1]=a[a.position++];b[2]=a[a.position++];b[3]=a[a.position++];return(new Float32Array(b.buffer))[0]}function tc(a,b){var c=new Float32Array(1);c[0]=b;c=new Uint8Array(c.buffer);a[a.position++]=c[0];a[a.position++]=c[1];a[a.position++]=c[2];a[a.position++]=c[3]};function uc(){this.size=0;this.root=new vc;this.root.update=function(){};this.Pb=null}uc.prototype.Xg=function(){return 0==this.size};uc.prototype.pop=function(){if(this.Xg())return null;var a=this.root.Pd.hf(),b=a.value;this.remove(a);return b};
uc.prototype.add=function(a,b){this.Pb=new wc;if(0==this.size)this.root.Pd=this.Pb,this.Pb.parent=this.root;else{var c=this.root;var d=this.size;d=nb[d>>>0&255]+nb[d>>>8&255]+nb[d>>>16&255]+nb[d>>>24];for(var e=0;e<d;e++)c=c.Pd;d=new vc;d.parent=c.parent;c.parent.Pd=d;d.Ih=c;c.parent=d;d.Pd=this.Pb;this.Pb.parent=d}c=this.Pb;c.value=a;c.key=b;c.parent.update();this.size++;return this.Pb};
uc.prototype.remove=function(a){if(a==this.Pb)1==this.size?this.root.Pd=this.Pb=null:xc(this);else{var b=this.Pb.value,c=this.Pb.key;xc(this);a.value=b;a.key=c;a.parent.update()}this.size--};function xc(a){var b=a.Pb.parent,c=b.Ih;a.Pb=c.Pb();c.parent=b.parent;c.parent.Pd=c;c.parent.update()}function vc(){}vc.prototype.hf=function(){return this.first};vc.prototype.Pb=function(){return this.Pd.Pb()};
vc.prototype.update=function(){this.first=this.Pd.hf().key<this.Ih.hf().key?this.Pd.hf():this.Ih.hf();this.parent.update()};function wc(){}wc.prototype.hf=function(){return this};wc.prototype.Pb=function(){return this};Math.Jf=2*Math.PI;function zc(a){return a*Math.PI/180}function Ac(a){return Math.PI/2147483648*a}function Bc(a,b,c,d){return Cc(new J(a.x-c.x,a.y-c.y,a.z-c.z),b,d)}function Cc(a,b,c){return sb(Dc(b,b),2*Dc(a,b),Dc(a,a)-c*c)}function Kc(a,b,c){.7071>a.y&&-.7071<a.y?(b.set(a.z,0,-a.x),Lc(a,b,c).ja(1),Lc(c,a,b)):(c.set(0,a.z,-a.y),Lc(c,a,b).ja(1),Lc(a,b,c))}
function Mc(a,b){var c;c||(c=new Nc);for(var d=[],e=0;;){for(var h=-1,g=null,k=Number.POSITIVE_INFINITY,l=0;l<b.length;l++)if(!(e&1<<l)){var m=b[l],n=Dc(m,a);n<k&&(h=l,g=m,k=n)}if(0<=k)break;c=c.gi(a,g,k);d.push(g);e|=1<<h;if(!c)break}a.round()}function Nc(){}Nc.prototype.gi=function(a,b,c){a.x-=b.x*c;a.y-=b.y*c;a.z-=b.z*c;return new Oc(b)};function Oc(a){this.n=a}Oc.prototype.gi=function(a,b){b=Lc(this.n,b,new J(0,0,0));if(0==b.ja(1))return null;var c=Dc(a,b);a.x=b.x*c;a.y=b.y*c;a.z=b.z*c;return new Pc(b)};
function Pc(a){this.n=a}Pc.prototype.gi=function(a,b,c){b=c/Dc(this.n,b);if(!isFinite(b))return null;a.x-=this.n.x*b;a.y-=this.n.y*b;a.z-=this.n.z*b;return null};function Qc(a,b,c){null==a?(this.a=b*c,this.g=b,this.ratio=c):null==b?(this.a=a,this.g=a/c,this.ratio=c):null==c?(this.a=a,this.g=b,this.ratio=a/b):(this.a=a,this.g=b,this.ratio=c);this.y=this.x=0;a=a>b?a:b;for(this.bufferSize=8;this.bufferSize<a;this.bufferSize*=2);}
function O(a,b,c,d,e){a=Math.round(a);b=Math.round(b);c=Math.round(c);d=Math.round(d);this.f=a;this.c=b;this.A=c;this.u=d;if(!e)return this.$=c-a,this.V=d-b,this.Ab=this.oa=NaN,this.length=Math.sqrt(this.$*this.$+this.V*this.V),a=this.$,b=this.V,0>a?0>b?-a<-b?(this.type=9,this.oa=-a/b,this.Ab=-b/this.length,a=rb(-a,-b),this.$/=a,this.V/=a):-a>-b?(this.type=7,this.oa=b/a,this.Ab=-a/this.length,a=rb(-a,-b),this.$/=a,this.V/=a):(this.type=8,this.oa=this.V=this.$=-1,this.Ab=Math.SQRT1_2):0<b?-a<b?(this.type=
3,this.oa=-a/b,this.Ab=b/this.length,a=rb(-a,b),this.$/=a,this.V/=a):-a>b?(this.type=5,this.oa=b/a,this.Ab=-a/this.length,a=rb(-a,b),this.$/=a,this.V/=a):(this.type=4,this.$=-1,this.V=1,this.oa=-1,this.Ab=Math.SQRT1_2):(this.type=6,this.$=-1):0<a?0>b?a<-b?(this.type=11,this.oa=-a/b,this.Ab=-b/this.length,a=rb(a,-b),this.$/=a,this.V/=a):a>-b?(this.type=13,this.oa=b/a,this.Ab=a/this.length,a=rb(a,-b),this.$/=a,this.V/=a):(this.type=12,this.$=1,this.oa=this.V=-1,this.Ab=Math.SQRT1_2):0<b?a<b?(this.type=
1,this.oa=-a/b,this.Ab=b/this.length,a=rb(a,b),this.$/=a,this.V/=a):a>b?(this.type=15,this.oa=b/a,this.Ab=a/this.length,a=rb(a,b),this.$/=a,this.V/=a):(this.type=0,this.V=this.$=1,this.oa=-1,this.Ab=Math.SQRT1_2):(this.type=14,this.$=1):a<b?(this.type=2,this.V=1):a>b&&(this.type=10,this.V=-1),this}function Rc(a,b){return a.f<b.f?-1:a.f>b.f?1:a.c<b.c?-1:a.c>b.c?1:a.A<b.A?-1:a.A>b.A?1:a.u<b.u?-1:a.u>b.u?1:0}f=O.prototype;
f.replace=function(a){this.remove=!0;if(this.vd){a=q(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b.vd){var c=q(this.vd);for(d=c.next();!d.done;d=c.next())d=d.value,0<=b.vd.indexOf(d)||(b.vd.push(d),d.push(b))}else{b.vd=this.vd.slice();c=q(b.vd);for(var d=c.next();!d.done;d=c.next())d.value.push(b)}a=q(this.vd);for(d=a.next();!d.done;d=a.next())b=d.value,b.splice(b.indexOf(this),1);delete this.vd}};function Sc(a,b){var c=a.f+b.$;b=a.c+b.V;return Math.atan2(R(a,c,b),a.getParameter(c,b))}
function Tc(a,b,c){for(var d={Xj:[],code:0},e=0;e<c.length;e++)d.Xj.push(R(c[e],a,b)),1==Uc(c[e],a,b)&&(d.code+=1<<e);return d}function Vc(a){var b;var c=Number.NEGATIVE_INFINITY;var d=Number.POSITIVE_INFINITY;var e=b=null;var h=a[a.length-1];a=q(a);for(var g=a.next();!g.done;g=a.next()){g=g.value;var k=g.f-g.c;k>c?(c=k,d=g.c,b=h,e=g):k==c&&g.c<d&&(d=g.c,b=h,e=g);h=g}c=b.type&7;d=e.type;return c<d?!0:c>d?!1:b.oa<e.oa?!0:b.oa>e.oa?!1:!0}
function ad(a,b,c){var d=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,h=null,g=null;c=q(c);for(var k=c.next();!k.done;k=c.next()){k=k.value;var l=bd(k,a,b);0>l?(l=-l,l<d&&(d=l,h=k)):0<l&&l<e&&(e=l,g=k)}--d;--e;return 0==d||0==e?0:h&&g?d<e?-1:d>e||h.A<g.f?1:-1:g?1:-1}
function cd(a){var b=a.bound;if(!b){b=new dd;for(var c=q(a),d=c.next();!d.done;d=c.next()){var e=d.value;b.Ka(e.A,e.u)}}b=b.h+(b.o-b.h>>1);e=c=Number.POSITIVE_INFINITY;a=q(a);for(d=a.next();!d.done;d=a.next())d=d.value,0<d.V?(d=ed(d,b),d<e&&(e=d)):0>d.V&&(d=ed(d,b),d<c&&(c=d));return new S(c+(e-c>>1),b)}
function fd(a,b){var c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;b=q(b);for(var e=b.next();!e.done;e=b.next()){var h=e.value,g=R(a,h.f,h.c),k=R(a,h.A,h.u);e=a.getParameter(h.f,h.c);h=a.getParameter(h.A,h.u);if(g<k)g/=g-k,e=e*(1-g)+h*g,e<d&&(d=e);else if(g>k)g/=g-k,e=e*(1-g)+h*g,e>c&&(c=e);else if(0>g){if(e>h)return null}else if(0<g&&e<h)return null}return!isFinite(c)||!isFinite(d)||c>=d?null:[c,d]}
function Uc(a,b,c){if(void 0==a.type)return 0;switch(a.type){case 0:case 1:case 3:var d=0;a=(c-a.c)*-a.oa+a.f;b<=a&&(d+=2);b>=a&&(d+=1);return d;case 2:return d=0,b<=a.f&&(d+=2),b>=a.f&&(d+=1),d;case 4:case 5:case 7:return d=0,a=(b-a.f)*a.oa+a.c,c<=a&&(d+=2),c>=a&&(d+=1),d;case 6:return d=0,c<=a.c&&(d+=2),c>=a.c&&(d+=1),d;case 8:case 9:case 11:return d=0,a=(c-a.c)*-a.oa+a.f,b<=a&&(d+=1),b>=a&&(d+=2),d;case 10:return d=0,b<=a.f&&(d+=1),b>=a.f&&(d+=2),d;case 12:case 13:case 15:return d=0,a=(b-a.f)*
a.oa+a.c,c<=a&&(d+=1),c>=a&&(d+=2),d;case 14:return d=0,c<=a.c&&(d+=1),c>=a.c&&(d+=2),d}}
function R(a,b,c){switch(a.type){case 0:case 1:case 3:b-=a.f;c-=a.c;var d=Math.floor(c/a.V);b-=d*a.$;c-=d*a.V;return(c*-a.oa-b)*a.Ab;case 2:return a.f-b;case 4:case 5:case 7:return b-=a.f,c-=a.c,d=Math.floor(b/-a.$),b+=d*a.$,c+=d*a.V,(b*a.oa-c)*a.Ab;case 6:return a.c-c;case 8:case 9:case 11:return b-=a.f,c-=a.c,d=Math.floor(c/-a.V),b+=d*a.$,c+=d*a.V,(b-c*-a.oa)*a.Ab;case 10:return b-a.f;case 12:case 13:case 15:return b-=a.f,c-=a.c,d=Math.floor(b/a.$),b-=d*a.$,c-=d*a.V,(c-b*a.oa)*a.Ab;case 14:return c-
a.c}return NaN}f.getParameter=function(a,b){var c=this.type,d=this.$,e=this.V;this.type=(c+12)%16;this.$=e;this.V=-d;a=R(this,a,b);this.type=c;this.$=d;this.V=e;return a};f.evaluate=function(a){a/=this.length;return(new S(this.f+(this.A-this.f)*a,this.c+(this.u-this.c)*a)).round()};f.jb=function(a,b){var c=(this.A-this.f)/this.length,d=(this.u-this.c)/this.length;return(new S(this.f+c*a-d*b,this.c+d*a+c*b)).round()};f.Oe=function(a,b){return(new S(this.getParameter(a,b),R(this,a,b))).round()};
function gd(a){return(new S(a.A-a.f,a.u-a.c)).scale(5E4/a.length)}function hd(a,b){return(new S(a.c-a.u,a.A-a.f)).scale(b/a.length)}f.Te=function(a,b){a=this.getParameter(a,b);a/=this.length;return 0>=a?new S(this.f,this.c):1<=a?new S(this.A,this.u):(new S(this.f+(this.A-this.f)*a,this.c+(this.u-this.c)*a)).round()};
function ed(a,b){var c=0;switch(a.type){case 0:case 1:case 3:if(b<a.c)break;if(b>=a.u)break;c-=a.f;b-=a.c;var d=Math.floor(b/a.V);c-=d*a.$;b-=d*a.V;return b*-a.oa-c;case 2:if(b<a.c)break;if(b>=a.u)break;return a.f-c;case 4:case 5:if(b<a.c)break;if(b>=a.u)break;c-=a.f;b-=a.c;d=Math.floor(b/a.V);c-=d*a.$;b-=d*a.V;return b/a.oa-c;case 7:if(b<a.u)break;if(b>=a.c)break;c-=a.f;b-=a.c;d=Math.floor(b/-a.V);c+=d*a.$;b+=d*a.V;return b/a.oa-c;case 8:case 9:case 11:if(b<a.u)break;if(b>=a.c)break;c-=a.f;b-=a.c;
d=Math.floor(b/-a.V);c+=d*a.$;b+=d*a.V;return b*-a.oa-c;case 10:if(b<a.u)break;if(b>=a.c)break;return a.f-c;case 12:case 13:if(b<a.u)break;if(b>=a.c)break;c-=a.f;b-=a.c;d=Math.floor(b/-a.V);c+=d*a.$;b+=d*a.V;return b/a.oa-c;case 15:if(!(b<a.c||b>=a.u))return c-=a.f,b-=a.c,d=Math.floor(b/a.V),c-=d*a.$,b-=d*a.V,b/a.oa-c}return NaN}
function bd(a,b,c){switch(a.type){case 0:case 1:case 3:if(c<a.c)break;if(c>=a.u)break;b-=a.f;c-=a.c;var d=Math.floor(c/a.V);b-=d*a.$;c-=d*a.V;a=c*-a.oa-b;if(0>a)break;return a+1;case 2:if(c<a.c)break;if(c>=a.u)break;a=a.f-b;if(0>a)break;return a+1;case 4:case 5:if(c<a.c)break;if(c>=a.u)break;b-=a.f;c-=a.c;d=Math.floor(c/a.V);b-=d*a.$;c-=d*a.V;a=c/a.oa-b;if(0>a)break;return a+1;case 7:if(c<a.u)break;if(c>=a.c)break;b-=a.f;c-=a.c;d=Math.floor(c/-a.V);b+=d*a.$;c+=d*a.V;a=c/a.oa-b;if(0>a)break;return-a-
1;case 8:case 9:case 11:if(c<a.u)break;if(c>=a.c)break;b-=a.f;c-=a.c;d=Math.floor(c/-a.V);b+=d*a.$;c+=d*a.V;a=c*-a.oa-b;if(0>a)break;return-a-1;case 10:if(c<a.u)break;if(c>=a.c)break;a=a.f-b;if(0>a)break;return-a-1;case 12:case 13:if(c<a.u)break;if(c>=a.c)break;b-=a.f;c-=a.c;d=Math.floor(c/-a.V);b+=d*a.$;c+=d*a.V;a=c/a.oa-b;if(0>a)break;return-a-1;case 15:if(!(c<a.c||c>=a.u||(b-=a.f,c-=a.c,d=Math.floor(c/a.V),b-=d*a.$,c-=d*a.V,a=c/a.oa-b,0>a)))return a+1}return NaN}
f.log=function(){console.log(this.f+" "+this.c+" "+this.$+" "+this.V+" type: "+this.type+" slope: "+this.oa)};f.X=function(){var a=this.Ua(this.f,this.c,this.A,this.u);a.type=this.type;a.oa=this.oa;a.Ab=this.Ab;a.length=this.length;a.$=this.$;a.V=this.V;return a};function id(a){var b=a.Ua(a.A,a.u,a.f,a.c);b.type=(a.type+8)%16;b.oa=a.oa;b.Ab=a.Ab;b.length=a.length;b.$=-a.$;b.V=-a.V;return b}f.Ua=function(a,b,c,d){return new O(a,b,c,d)};
function jd(a){if(a.Y)return a.Y;var b=id(a);b.Y=a;return a.Y=b}function kd(a,b){return a.type<b.type?-1:a.type>b.type?1:a.oa<b.oa?-1:a.oa>b.oa?1:0}function ld(a){var b=[];a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(new S(c.f,c.c));return b}function yd(a){var b=[];a.bound&&(b.bound=a.bound);a=q(a);for(var c=a.next();!c.done;c=a.next())b.unshift(jd(c.value));return b}function T(a,b,c,d){this.set(void 0===a?255:a,void 0===b?255:b,void 0===c?255:c,void 0===d?255:d);return this}
function zd(a,b){return a.r<b.r?-1:a.r>b.r?1:a.Pa<b.Pa?-1:a.Pa>b.Pa?1:a.ga<b.ga?-1:a.ga>b.ga?1:a.Ea<b.Ea?-1:a.Ea>b.Ea?1:0}T.prototype.set=function(a,b,c,d){255<a&&(a=255);0>a&&(a=0);255<b&&(b=255);0>b&&(b=0);255<c&&(c=255);0>c&&(c=0);255<d&&(d=255);0>d&&(d=0);this.r=a;this.Pa=b;this.ga=c;this.Ea=d;return this};T.prototype.scale=function(a){this.r=Math.round(this.r*a);this.Pa=Math.round(this.Pa*a);this.ga=Math.round(this.ga*a);return this};
T.prototype.save=function(a){Xb(a,this.r);Xb(a,this.Pa);Xb(a,this.ga);Xb(a,this.Ea);return this};function Ad(a){return new T(Vb(a),Vb(a),Vb(a),Vb(a))}var Bd=new T(0,0,0,0),Cd=new T(255,255,255,255),Dd=new T(0,0,0,255),Ed=new T(255,0,0,255);new T(255,255,0,255);new T(0,255,0,255);new T(0,255,255,255);new T(0,0,255,255);new T(255,0,255,255);
function Fd(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.ph=this.oh=this.ee=this.de=this.vc=this.uc=this.zb=this.pc=this.Xb=this.Ld=this.Kd=this.Jd=this.Id=this.Hd=this.Gd=0;this.wa=this.ad=this.bd=this.fa=255;return this}
function Gd(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:a.z<b.z?-1:a.z>b.z?1:a.Gd<b.Gd?-1:a.Gd>b.Gd?1:a.Hd<b.Hd?-1:a.Hd>b.Hd?1:a.Id<b.Id?-1:a.Id>b.Id?1:a.Jd<b.Jd?-1:a.Jd>b.Jd?1:a.Kd<b.Kd?-1:a.Kd>b.Kd?1:a.Ld<b.Ld?-1:a.Ld>b.Ld?1:a.Xb<b.Xb?-1:a.Xb>b.Xb?1:a.pc<b.pc?-1:a.pc>b.pc?1:a.zb<b.zb?-1:a.zb>b.zb?1:a.uc<b.uc?-1:a.uc>b.uc?1:a.vc<b.vc?-1:a.vc>b.vc?1:a.de<b.de?-1:a.de>b.de?1:a.ee<b.ee?-1:a.ee>b.ee?1:a.oh<b.oh?-1:a.oh>b.oh?1:a.ph<b.ph?-1:a.ph>b.ph?1:a.fa<b.fa?-1:a.fa>b.fa?1:a.bd<b.bd?-1:a.bd>
b.bd?1:a.ad<b.ad?-1:a.ad>b.ad?1:a.wa<b.wa?-1:a.wa>b.wa?1:0}function Hd(a,b,c){var d=1-c,e=new Fd(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c);e.Gd=a.Gd*d+b.Gd*c;e.Hd=a.Hd*d+b.Hd*c;e.Id=a.Id*d+b.Id*c;e.Jd=a.Jd*d+b.Jd*c;e.Kd=a.Kd*d+b.Kd*c;e.Ld=a.Ld*d+b.Ld*c;e.Xb=a.Xb*d+b.Xb*c;e.pc=a.pc*d+b.pc*c;e.zb=a.zb*d+b.zb*c;e.uc=a.uc*d+b.uc*c;e.vc=a.vc*d+b.vc*c;e.de=a.de*d+b.de*c;e.ee=a.ee*d+b.ee*c;e.fa=a.fa*d+b.fa*c;e.bd=a.bd*d+b.bd*c;e.ad=a.ad*d+b.ad*c;e.wa=a.wa*d+b.wa*c;return e}
Fd.prototype.X=function(){var a=new Fd(this.x,this.y,this.z);a.Gd=this.Gd;a.Hd=this.Hd;a.Id=this.Id;a.Jd=this.Jd;a.Kd=this.Kd;a.Ld=this.Ld;a.Xb=this.Xb;a.pc=this.pc;a.zb=this.zb;a.uc=this.uc;a.vc=this.vc;a.de=this.de;a.ee=this.ee;a.fa=this.fa;a.bd=this.bd;a.ad=this.ad;a.wa=this.wa;return a};function Id(a,b){a.fa=b.r;a.bd=b.Pa;a.ad=b.ga;a.wa=b.Ea}function Jd(a,b,c){a.uc=b;a.vc=c;return a};function S(a,b){this.x=void 0===a?0:a;this.y=void 0===b?0:b;return this}f=S.prototype;f.set=function(a,b){this.x=a;this.y=b;return this};f.lf=function(){return this.x*this.x+this.y*this.y};f.length=function(){return Math.sqrt(this.lf())};f.ja=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.ja(1);return this};f.scale=function(a){this.x*=a;this.y*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.sub=function(a){this.x=this.x-a.x;this.y=this.y-a.y;return this};f.X=function(){return new S(this.x,this.y)};f.kd=function(a){a||(a=new Float32Array(2));a[0]=this.x;a[1]=this.y;return a};function Kd(a,b){return a.x*b.x+a.y*b.y}function Ld(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0}f.Yh=function(){return 0!=this.x||0!=this.y?!1:!0};function J(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;return this}
function Dc(a,b){return a.x*b.x+a.y*b.y+a.z*b.z}function Lc(a,b,c){c.x=a.y*b.z-a.z*b.y;c.y=b.x*a.z-b.z*a.x;c.z=a.x*b.y-a.y*b.x;return c}function Md(a,b,c){c.x=a.x-b.x;c.y=a.y-b.y;c.z=a.z-b.z;return c}function Nd(a,b,c){var d=1-c;return new J(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c)}function Od(a,b){b.x=a.x;b.y=a.y;b.z=a.z}f=J.prototype;f.X=function(){return new J(this.x,this.y,this.z)};f.set=function(a,b,c){this.x=a;this.y=b;this.z=c;return this};
f.lf=function(){return this.x*this.x+this.y*this.y+this.z*this.z};f.length=function(){return Math.sqrt(this.lf())};f.ja=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.ja(1);return this};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.sub=function(a){return Md(this,a,this)};f.kd=function(a){a||(a=new Float32Array(3));a[0]=this.x;a[1]=this.y;a[2]=this.z;return a};f.Yh=function(){return 0!=this.x||0!=this.y||0!=this.z?!1:!0};function Pd(a,b,c,d){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.a=void 0===d?0:d;return this}Pd.prototype.set=function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.a=d;return this};
Pd.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.a=Math.round(this.a);return this};Pd.prototype.kd=function(a){a||(a=new Float32Array(4));a[0]=this.x;a[1]=this.y;a[2]=this.z;a[3]=this.a;return a};Pd.prototype.Yh=function(){return 0!=this.x||0!=this.y||0!=this.z||0!=this.a?!1:!0};function Qd(){this.reset();return this}f=Qd.prototype;
f.set=function(a){this.G=a.G;this.K=a.K;this.L=a.L;this.I=a.I;this.m11=a.m11;this.m12=a.m12;this.J=a.J;this.m21=a.m21;this.m22=a.m22;return this};f.reset=function(){this.G=1;this.I=this.L=this.K=0;this.m11=1;this.m21=this.J=this.m12=0;this.m22=1;return this};
f.rotate=function(a,b,c){var d=Math.cos(c);c=Math.sin(c);var e=c*this.G+d*this.K,h=d*this.I-c*this.m11,g=c*this.I+d*this.m11,k=d*this.J-c*this.m21,l=c*this.J+d*this.m21;this.G=d*this.G-c*this.K;this.K=e;this.I=h;this.m11=g;this.J=k;this.m21=l;d=Math.cos(b);b=Math.sin(b);c=d*this.L-b*this.K;e=b*this.m12+d*this.m11;h=d*this.m12-b*this.m11;g=b*this.m22+d*this.m21;k=d*this.m22-b*this.m21;this.K=b*this.L+d*this.K;this.L=c;this.m11=e;this.m12=h;this.m21=g;this.m22=k;b=Math.cos(a);a=Math.sin(a);d=a*this.L+
b*this.G;c=b*this.m12-a*this.I;e=a*this.m12+b*this.I;h=b*this.m22-a*this.J;g=a*this.m22+b*this.J;this.L=b*this.L-a*this.G;this.G=d;this.m12=c;this.I=e;this.m22=h;this.J=g;return this};f.ti=function(a,b){var c=Math.cos(b),d=Math.sin(b);b=1-c;var e=a.x*a.y,h=a.y*a.z,g=a.z*a.x,k=a.x*d,l=a.y*d;d*=a.z;this.G=a.x*a.x*b+c;this.K=e*b+d;this.L=g*b-l;this.I=e*b-d;this.m11=a.y*a.y*b+c;this.m12=h*b+k;this.J=g*b+l;this.m21=h*b-k;this.m22=a.z*a.z*b+c;return this};
f.oi=function(a,b){a=(new Qd).ti(a,b);$d(a,this,this);return this};f.scale=function(a,b,c){this.G*=a;this.K*=a;this.L*=a;this.I*=b;this.m11*=b;this.m12*=b;this.J*=c;this.m21*=c;this.m22*=c;return this};
f.Xh=function(a){a||(a=this);var b=this.Mh();if(0==b)return a;var c=-(this.I*this.m22+this.m12*-this.J),d=this.I*this.m21+this.m11*-this.J,e=-(this.K*this.m22+this.L*-this.m21),h=this.G*this.m22+this.L*-this.J,g=-(this.G*this.m21+this.K*-this.J),k=this.K*this.m12+this.L*-this.m11,l=-(this.G*this.m12+this.L*-this.I),m=this.G*this.m11+this.K*-this.I;b=1/b;a.G=(this.m11*this.m22+this.m12*-this.m21)*b;a.I=c*b;a.J=d*b;a.K=e*b;a.m11=h*b;a.m21=g*b;a.L=k*b;a.m12=l*b;a.m22=m*b;return a};
f.Mh=function(){return this.G*(this.m11*this.m22-this.m12*this.m21)+this.K*(this.m12*this.J-this.I*this.m22)+this.L*(this.I*this.m21-this.m11*this.J)};f.kd=function(a){a||(a=new Float32Array(9));a[0]=this.G;a[1]=this.K;a[2]=this.L;a[3]=this.I;a[4]=this.m11;a[5]=this.m12;a[6]=this.J;a[7]=this.m21;a[8]=this.m22;return a};
function $d(a,b,c){var d=a.K*b.G+a.m11*b.K+a.m21*b.L,e=a.L*b.G+a.m12*b.K+a.m22*b.L,h=a.G*b.I+a.I*b.m11+a.J*b.m12,g=a.K*b.I+a.m11*b.m11+a.m21*b.m12,k=a.L*b.I+a.m12*b.m11+a.m22*b.m12,l=a.G*b.J+a.I*b.m21+a.J*b.m22,m=a.K*b.J+a.m11*b.m21+a.m21*b.m22,n=a.L*b.J+a.m12*b.m21+a.m22*b.m22;c.G=a.G*b.G+a.I*b.K+a.J*b.L;c.I=h;c.J=l;c.K=d;c.m11=g;c.m21=m;c.L=e;c.m12=k;c.m22=n;return c}
f.transform=function(a,b){return b.set(this.G*a.x+this.I*a.y+this.J*a.z,this.K*a.x+this.m11*a.y+this.m21*a.z,this.L*a.x+this.m12*a.y+this.m22*a.z)};f.ef=function(){return new J(this.G,this.K,this.L)};f.ff=function(){return new J(this.I,this.m11,this.m12)};f.sd=function(){return new J(this.J,this.m21,this.m22)};f.xf=function(a){this.G=a.x;this.K=a.y;this.L=a.z;return this};f.yf=function(a){this.I=a.x;this.m11=a.y;this.m12=a.z;return this};f.zf=function(a){this.J=a.x;this.m21=a.y;this.m22=a.z;return this};
f.save=function(a){var b=new Uint8Array((new Float32Array([this.G,this.K,this.L,this.I,this.m11,this.m12,this.J,this.m21,this.m22])).buffer);a.set(b,a.position);a.position+=36};f.load=function(a){a=a.slice(a.position,a.position+=36);a=new Float32Array(a.buffer);a=q(a);this.G=a.next().value;this.K=a.next().value;this.L=a.next().value;this.I=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.J=a.next().value;this.m21=a.next().value;this.m22=a.next().value};new Qd;
function U(){this.reset();return this}f=U.prototype;f.set=function(a){this.G=a.G;this.K=a.K;this.L=a.L;this.Wa=a.Wa;this.I=a.I;this.m11=a.m11;this.m12=a.m12;this.m13=a.m13;this.J=a.J;this.m21=a.m21;this.m22=a.m22;this.m23=a.m23;this.H=a.H;this.m31=a.m31;this.m32=a.m32;this.m33=a.m33;return this};f.reset=function(){this.G=1;this.I=this.Wa=this.L=this.K=0;this.m11=1;this.m21=this.J=this.m13=this.m12=0;this.m22=1;this.m32=this.m31=this.H=this.m23=0;this.m33=1;return this};
function ae(a){Qd.prototype.reset.call(a)}f.translate=function(a,b,c){this.H+=a;this.m31+=b;this.m32+=c;return this};f.rotate=Qd.prototype.rotate;f.ti=Qd.prototype.ti;f.oi=Qd.prototype.oi;f.scale=Qd.prototype.scale;
f.Xh=function(a){function b(D,F,L,da,P,ka,X,qa,Kb){return D*(P*Kb-ka*qa)+F*(ka*X-da*Kb)+L*(da*qa-P*X)}a||(a=this);var c=this.Mh();if(0==c)return a;var d=b(this.m11,this.m12,this.m13,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),e=-b(this.I,this.m12,this.m13,this.J,this.m22,this.m23,this.H,this.m32,this.m33),h=b(this.I,this.m11,this.m13,this.J,this.m21,this.m23,this.H,this.m31,this.m33),g=-b(this.I,this.m11,this.m12,this.J,this.m21,this.m22,this.H,this.m31,this.m32),k=-b(this.K,this.L,this.Wa,
this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),l=b(this.G,this.L,this.Wa,this.J,this.m22,this.m23,this.H,this.m32,this.m33),m=-b(this.G,this.K,this.Wa,this.J,this.m21,this.m23,this.H,this.m31,this.m33),n=b(this.G,this.K,this.L,this.J,this.m21,this.m22,this.H,this.m31,this.m32),r=b(this.K,this.L,this.Wa,this.m11,this.m12,this.m13,this.m31,this.m32,this.m33),p=-b(this.G,this.L,this.Wa,this.I,this.m12,this.m13,this.H,this.m32,this.m33),t=b(this.G,this.K,this.Wa,this.I,this.m11,this.m13,this.H,
this.m31,this.m33),z=-b(this.G,this.K,this.L,this.I,this.m11,this.m12,this.H,this.m31,this.m32),w=-b(this.K,this.L,this.Wa,this.m11,this.m12,this.m13,this.m21,this.m22,this.m23),y=b(this.G,this.L,this.Wa,this.I,this.m12,this.m13,this.J,this.m22,this.m23),B=-b(this.G,this.K,this.Wa,this.I,this.m11,this.m13,this.J,this.m21,this.m23),A=b(this.G,this.K,this.L,this.I,this.m11,this.m12,this.J,this.m21,this.m22);c=1/c;a.G=d*c;a.I=e*c;a.J=h*c;a.H=g*c;a.K=k*c;a.m11=l*c;a.m21=m*c;a.m31=n*c;a.L=r*c;a.m12=p*
c;a.m22=t*c;a.m32=z*c;a.Wa=w*c;a.m13=y*c;a.m23=B*c;a.m33=A*c;return a};
f.Mh=function(){var a=this.G*(this.m11*this.m22*this.m33+this.m12*this.m23*this.m31+this.m13*this.m21*this.m32-(this.m13*this.m22*this.m31+this.m11*this.m23*this.m32+this.m12*this.m21*this.m33));a-=this.K*(this.I*this.m22*this.m33+this.m12*this.m23*this.H+this.m13*this.J*this.m32-(this.m13*this.m22*this.H+this.I*this.m23*this.m32+this.m12*this.J*this.m33));a+=this.L*(this.I*this.m21*this.m33+this.m11*this.m23*this.H+this.m13*this.J*this.m31-(this.m13*this.m21*this.H+this.I*this.m23*this.m31+this.m11*
this.J*this.m33));return a-=this.Wa*(this.I*this.m21*this.m32+this.m11*this.m22*this.H+this.m12*this.J*this.m31-(this.m12*this.m21*this.H+this.I*this.m22*this.m31+this.m11*this.J*this.m32))};f.kd=function(a){a||(a=new Float32Array(16));a[0]=this.G;a[1]=this.K;a[2]=this.L;a[3]=this.Wa;a[4]=this.I;a[5]=this.m11;a[6]=this.m12;a[7]=this.m13;a[8]=this.J;a[9]=this.m21;a[10]=this.m22;a[11]=this.m23;a[12]=this.H;a[13]=this.m31;a[14]=this.m32;a[15]=this.m33;return a};
function be(a,b,c){var d=a.K*b.G+a.m11*b.K+a.m21*b.L+a.m31*b.Wa,e=a.L*b.G+a.m12*b.K+a.m22*b.L+a.m32*b.Wa,h=a.Wa*b.G+a.m13*b.K+a.m23*b.L+a.m33*b.Wa,g=a.G*b.I+a.I*b.m11+a.J*b.m12+a.H*b.m13,k=a.K*b.I+a.m11*b.m11+a.m21*b.m12+a.m31*b.m13,l=a.L*b.I+a.m12*b.m11+a.m22*b.m12+a.m32*b.m13,m=a.Wa*b.I+a.m13*b.m11+a.m23*b.m12+a.m33*b.m13,n=a.G*b.J+a.I*b.m21+a.J*b.m22+a.H*b.m23,r=a.K*b.J+a.m11*b.m21+a.m21*b.m22+a.m31*b.m23,p=a.L*b.J+a.m12*b.m21+a.m22*b.m22+a.m32*b.m23,t=a.Wa*b.J+a.m13*b.m21+a.m23*b.m22+a.m33*b.m23,
z=a.G*b.H+a.I*b.m31+a.J*b.m32+a.H*b.m33,w=a.K*b.H+a.m11*b.m31+a.m21*b.m32+a.m31*b.m33,y=a.L*b.H+a.m12*b.m31+a.m22*b.m32+a.m32*b.m33,B=a.Wa*b.H+a.m13*b.m31+a.m23*b.m32+a.m33*b.m33;c.G=a.G*b.G+a.I*b.K+a.J*b.L+a.H*b.Wa;c.I=g;c.J=n;c.H=z;c.K=d;c.m11=k;c.m21=r;c.m31=w;c.L=e;c.m12=l;c.m22=p;c.m32=y;c.Wa=h;c.m13=m;c.m23=t;c.m33=B}
f.transform=function(a,b){return b.set(this.G*a.x+this.I*a.y+this.J*a.z+this.H*a.a,this.K*a.x+this.m11*a.y+this.m21*a.z+this.m31*a.a,this.L*a.x+this.m12*a.y+this.m22*a.z+this.m32*a.a,this.Wa*a.x+this.m13*a.y+this.m23*a.z+this.m33*a.a)};f.jb=function(a,b){return b.set(this.G*a.x+this.I*a.y+this.J*a.z+this.H,this.K*a.x+this.m11*a.y+this.m21*a.z+this.m31,this.L*a.x+this.m12*a.y+this.m22*a.z+this.m32)};
function ce(a,b,c){c.set(a.G*b.x+a.I*b.y+a.J*b.z,a.K*b.x+a.m11*b.y+a.m21*b.z,a.L*b.x+a.m12*b.y+a.m22*b.z)}f.ef=Qd.prototype.ef;f.ff=Qd.prototype.ff;f.sd=Qd.prototype.sd;function de(a){return new J(a.H,a.m31,a.m32)}f.xf=Qd.prototype.xf;f.yf=Qd.prototype.yf;f.zf=Qd.prototype.zf;function ee(a,b){a.H=b.x;a.m31=b.y;a.m32=b.z}
f.save=function(a){var b=new Uint8Array((new Float32Array([this.G,this.K,this.L,this.Wa,this.I,this.m11,this.m12,this.m13,this.J,this.m21,this.m22,this.m23,this.H,this.m31,this.m32,this.m33])).buffer);a.set(b,a.position);a.position+=64};
f.load=function(a){a=a.slice(a.position,a.position+=64);a=new Float32Array(a.buffer);a=q(a);this.G=a.next().value;this.K=a.next().value;this.L=a.next().value;this.Wa=a.next().value;this.I=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.m13=a.next().value;this.J=a.next().value;this.m21=a.next().value;this.m22=a.next().value;this.m23=a.next().value;this.H=a.next().value;this.m31=a.next().value;this.m32=a.next().value;this.m33=a.next().value};var fe=new U;
function dd(){this.m=Number.POSITIVE_INFINITY;this.w=Number.NEGATIVE_INFINITY;this.h=Number.POSITIVE_INFINITY;this.o=Number.NEGATIVE_INFINITY}dd.prototype.Ka=function(a,b){a<this.m&&(this.m=a);a>this.w&&(this.w=a);b<this.h&&(this.h=b);b>this.o&&(this.o=b);return this};dd.prototype.gj=function(a){this.Ka(a.m,a.h);this.Ka(a.w,a.o)};dd.prototype.X=function(){var a=new dd;a.m=this.m;a.w=this.w;a.h=this.h;a.o=this.o;return a};
dd.prototype.ie=function(a,b){return a<=this.m||a>=this.w||b<=this.h||b>=this.o?!1:!0};function ge(){this.m=Number.POSITIVE_INFINITY;this.w=Number.NEGATIVE_INFINITY;this.h=Number.POSITIVE_INFINITY;this.o=Number.NEGATIVE_INFINITY;this.C=Number.POSITIVE_INFINITY;this.M=Number.NEGATIVE_INFINITY}ge.prototype.Ka=function(a,b,c){a<this.m&&(this.m=a);a>this.w&&(this.w=a);b<this.h&&(this.h=b);b>this.o&&(this.o=b);c<this.C&&(this.C=c);c>this.M&&(this.M=c);return this};
ge.prototype.gj=function(a){this.Ka(a.m,a.h,a.C);this.Ka(a.w,a.o,a.M)};ge.prototype.X=function(){var a=new ge;a.m=this.m;a.w=this.w;a.h=this.h;a.o=this.o;a.C=this.C;a.M=this.M;return a};ge.prototype.ie=function(a,b){return a<=this.m||a>=this.w||b<=this.h||b>=this.o||void 0<=this.C||void 0>=this.M?!1:!0};u.Node=function(a){this.name=a;this.children=this.parent=null;this.Bj=new yb(this);this.Ra=1;this.ea=u.ea;this.Aa=-2147483648;return this};f=u.Node.prototype;f.create=function(){};f.remove=function(){W(this,null)};function he(a,b){if(0!=b.call(a)&&a.children)for(a=a.children.first();null!=a.item;a=a.next)he(a.item,b)}f.step=function(){};f.se=function(){};f.Oa=function(){};function ie(a){he(a,function(){if(!this.wg())return!1;this.Oa(void 0)})}f.wg=function(){return!this.Ra||this.ea.Aa<u.l?!1:!0};
function W(a,b){if(a.parent)return a.parent=b,u.mi.push(a),a;if(b)return a.parent=b,je(a)}function je(a){Ab(a.Bj);if(!a.parent)return a;a.parent.children||(a.parent.children=new xb);Bb(a.parent.children,a.Bj);return a}function ke(a,b){a.ea=b;if(a.children)for(a=a.children.first();null!=a.item;a=a.next)ke(a.item,b)}
f.log=function(){this.name?console.group(this.constructor.name+": "+this.name):console.group(this.constructor.name);if(this.children)for(var a=this.children.first();null!=a.item;a=a.next)a.item.log();console.groupEnd()};u.qa=function(a){u.Node.call(this,a);this.transform=new U;this.Ba=null;this.O=new U};u.qa.prototype=Object.create(u.Node.prototype);u.qa.prototype.constructor=u.qa;function le(a,b){var c=a.kh=new u.ze;c.ea=a.ea;c.Ta=1.75*b;c.Ba=a.O;W(c,u.ug)}
u.qa.prototype.remove=function(){this.kh&&this.kh.remove();u.Node.prototype.remove.call(this)};u.qa.prototype.save=function(a){Wb(a,"NG.Node3D");this.O.save()};u.qa.prototype.step=function(){me(this)};function me(a){a.Ba?be(a.Ba,a.transform,a.O):a.O.set(a.transform)}u.ea={Aa:NaN,pb:new J(1,1,1)};u.mi=[];u.ri=new u.Node("schedule");u.sc=W(new u.Node("scene"),u.ri);u.inputs=W(new u.Node("inputs"),u.ri);function ne(){this.sb=new tb(Tb);this.Yd=new tb(Tb);this.la=new tb(Tb);this.ba=new tb(Tb);this.sa=new tb(Tb);return this}
ne.prototype.save=function(a){ic(a,this.sb.elements.length);for(var b=0;b<this.sb.elements.length;b++)this.sb.elements[b].save(a);ic(a,this.Yd.elements.length);for(b=0;b<this.Yd.elements.length;b++)this.Yd.elements[b].save(a);ic(a,this.la.elements.length);for(b=0;b<this.la.elements.length;b++)this.la.elements[b].save(a);ic(a,this.ba.elements.length);for(b=0;b<this.ba.elements.length;b++)this.ba.elements[b].save(a);ic(a,this.sa.elements.length);for(b=0;b<this.sa.elements.length;b++)this.sa.elements[b].save(a)};
ne.prototype.load=function(a){var b=hc(a);for(var c=0;c<b;c++){var d=new oe;d.load(a);this.sb.replace(d)}b=hc(a);for(c=0;c<b;c++)d=new pe,d.load(a),this.Yd.replace(d);b=hc(a);if(this.la.elements.length){for(c=0;c<b;c++)Ub(a),dc(a),dc(a);b=q(this.la.elements);for(c=b.next();!c.done;c=b.next())c.value.create()}else for(c=0;c<b;c++)d=new qe,d.load(a),this.la.replace(d);this.zi=b=hc(a);for(c=0;c<b;c++)d=new u.Dd,d.ej=this,d.load(a),this.ba.replace(d);b=hc(a);for(c=0;c<b;c++)d=new u.Audio,d.load(a),this.sa.replace(d);
0==this.zi&&this.ready&&this.ready.call(this)};u.Qk=0;u.Ib={difficulty:1,lightingFancy:!0,mouseRaw:!0,mouseDPI:800,mouseScale:3.5};u.ih=function(){u.lk=4294967296/(u.Ib.mouseDPI*u.Ib.mouseScale)};u.ih();u.ck=!1;u.Xf={};u.Xf.overflowX=document.body.style.overflowX;u.Xf.overflowY=document.body.style.overflowY;u.Xf.userSelect=document.body.style.userSelect;var re=document.getElementById("paneContainer");re.style.position="relative";re.style.flex="0 0 auto";re.style.zIndex=1;re.addEventListener("contextmenu",function(a){return a.preventDefault()});
u.canvas=document.createElement("canvas");u.canvas.style.transformOrigin="top left";u.canvas.style.transform="scale(2.0, 2.0)";u.canvas.style.imageRendering="pixelated";u.canvas.style.zIndex=-1;re.appendChild(u.canvas);v=u.canvas.getContext("webgl2",{alpha:!1,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1,Pk:!0});console.log(v.getParameter(v.VENDOR),v.getParameter(v.VERSION));console.log(v.getParameter(v.RENDERER));u.Ub={};u.l=0;u.Qh=1E3/60;u.Aa=-2147483648;
u.pf=function(){2147483647==u.Aa&&(u.Aa=-2147483648);u.Aa++};u.Qb=new T(0,0,0,0);u.v=new ne;u.D=null;u.sh=null;u.Wi=null;u.pa=null;u.viewport=null;u.qk=function(){u.canvas.width=480;u.canvas.height=296;u.Rf=new Qc(480,296,null);u.tg.width=480;u.tg.height=296;u.tg.create();re.style.width="960px";re.style.height="592px"};u.vg=function(a){v.viewport(a.x,a.y,a.a,a.g);u.viewport=a;u.Ub.zc.N("viewport",new S(a.a,a.g),!0);u.Ub.zc.upload()};u.Dj=function(a){u.pa=a};u.Xa=function(a){u.D!=a&&(u.D=a.bind())};
u.ub=function(a){u.sh!=a&&(u.sh=a.bind())};u.ae=function(a){a&&u.Wi!=a&&(u.Wi=a.bind())};u.Sb=function(a,b){v.activeTexture(v.TEXTURE0+a);b?(v.bindTexture(v.TEXTURE_2D,b.object),u.D.N("enableTexture"+a,1,!0)):(v.bindTexture(v.TEXTURE_2D,null),u.D.N("enableTexture"+a,0,!0))};u.mb=function(a){if(u.za!=a){switch(a){case 0:v.disable(v.BLEND);break;case 1:v.enable(v.BLEND);v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA);break;case 2:v.enable(v.BLEND),v.blendFunc(v.SRC_ALPHA,v.ONE_MINUS_SRC_ALPHA)}u.za=a}};
u.Db=function(a){if(u.depth!=a){switch(a){case 0:v.disable(v.DEPTH_TEST);break;case 1:v.enable(v.DEPTH_TEST);v.depthMask(!1);break;case 2:v.enable(v.DEPTH_TEST),v.depthMask(!0)}u.depth=a}};u.Lb=function(a){if(u.facing!=a){switch(a){case 0:v.disable(v.CULL_FACE);break;case 1:v.enable(v.CULL_FACE);v.frontFace(v.CCW);break;case 2:v.enable(v.CULL_FACE),v.frontFace(v.CW)}u.facing=a}};for(var se=0;4>se;se++)v.enableVertexAttribArray(se);v.clearColor(0,0,0,0);v.depthFunc(v.LEQUAL);
u.start=function(){u.Ub.zc.create(["u_eyeMatrix","u_viewMatrix","u_cameraPos","u_viewport"]);u.Ub.zj.create([]);u.nj()};u.me={};u.me.time=0;u.me.lb=0;u.me.ij=0;u.me.pk=function(a){this.Dk=a;a>=this.time+1E3&&(this.ij=this.lb=0,this.time+=1E3);this.lb++};u.Jh=!0;
u.loop=function(a){var b=(u.Sg-a)/u.Qh;if(.5<b)requestAnimationFrame(u.loop);else{-.5>b&&(u.Sg=a,u.me.ij++);u.Sg+=u.Qh;u.me.pk(a);if(u.Fj)u.Fj--;else{he(u.ri,function(){this.step()});a=q(u.mi);for(b=a.next();!b.done;b=a.next())je(b.value);u.mi.length=0;u.l++}u.Jh&&requestAnimationFrame(u.loop)}};u.pause=function(){u.Jh=!1};u.resume=function(){u.Jh=!0;requestAnimationFrame(function(a){u.me.time=a;u.me.Dk=a;u.Sg=a;u.loop(a)})};u.nj=function(){u.resume()};
u.Uk=function(a,b){for(var c=[],d=Math.floor(640/a);1920>=a*d;d++)c.push([a*d,b*d]);return c};u.Wk=function(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()};document.addEventListener("fullscreenchange",function(){u.ck=document.fullscreenElement?!0:!1});function te(a,b){a=v.createShader(a);v.shaderSource(a,b);v.compileShader(a);if(v.getShaderParameter(a,v.COMPILE_STATUS))return a;console.log(b);console.log(v.getShaderInfoLog(a));v.deleteShader(a)}function qe(){this.name=void 0;this.Ja={};this.rh={}}f=qe.prototype;
f.create=function(){this.vk=te(v.VERTEX_SHADER,this.yi);this.uk=te(v.FRAGMENT_SHADER,this.xi);var a=this.uk;var b=this.Mk;var c=v.createProgram();v.attachShader(c,this.vk);v.attachShader(c,a);if(b)for(a=0;a<b.length;a++)v.bindAttribLocation(c,a,b[a]);else v.bindAttribLocation(c,0,"a_position"),v.bindAttribLocation(c,1,"a_texture0"),v.bindAttribLocation(c,2,"a_color"),v.bindAttribLocation(c,3,"a_basisZ");v.linkProgram(c);v.getProgramParameter(c,v.LINK_STATUS)?b=c:(console.log(v.getProgramInfoLog(c)),
v.deleteShader(c),b=void 0);this.sf=b;u.Xa(this)};
f.N=function(a,b,c){a="u_"+a;this.Ja.hasOwnProperty(a)||(this.Ja[a]=v.getUniformLocation(this.sf,a));var d=this.rh[a];c?d!=b&&(this.rh[a]=b,v.uniform1i(this.Ja[a],b)):isNaN(b)?b instanceof Float32Array?v.uniform3fv(this.Ja[a],b):b instanceof U?v.uniformMatrix4fv(this.Ja[a],!1,b.kd()):b instanceof T?(this.rh[a]=b,v.uniform4f(this.Ja[a],b.r/255,b.Pa/255,b.ga/255,b.Ea/255)):b instanceof Pd?v.uniform4f(this.Ja[a],b.x,b.y,b.z,b.a):b instanceof J?v.uniform3f(this.Ja[a],b.x,b.y,b.z):b instanceof S&&v.uniform2f(this.Ja[a],
b.x,b.y):d!=b&&(this.rh[a]=b,v.uniform1f(this.Ja[a],b))};f.bind=function(){v.useProgram(this.sf);return this};f.load=function(a){this.name=Ub(a);this.yi=dc(a);this.xi=dc(a);this.create();delete this.yi;delete this.xi};f.save=function(a){Wb(a,this.name);fc(a,this.yi);fc(a,this.xi)};function ue(){this.usage=this.target=null;this.fj=v.createBuffer();this.buffer=null}ue.prototype.bind=function(){v.bindBuffer(this.target,this.fj);return this};function ve(a,b){a.buffer=new ArrayBuffer(b);v.bufferData(a.target,a.buffer,a.usage)}ue.prototype.upload=function(){v.bufferSubData(this.target,0,this.buffer);return this};function we(){ue.call(this);this.target=v.ARRAY_BUFFER;this.usage=v.STATIC_DRAW;this.wb=32;u.sh=null;u.ub(this)}we.prototype=Object.create(ue.prototype);
we.prototype.constructor=we;we.prototype.bind=function(){ue.prototype.bind.call(this);v.vertexAttribPointer(0,3,v.FLOAT,!1,this.wb,0);v.vertexAttribPointer(1,2,v.FLOAT,!1,this.wb,12);v.vertexAttribPointer(2,4,v.UNSIGNED_BYTE,!0,this.wb,20);v.vertexAttribPointer(3,3,v.SHORT,!0,this.wb,24);return this};we.prototype.upload=function(a){this.write(a);ue.prototype.upload.call(this);return this};
function xe(a){var b=u.sh;b.buffer=new ArrayBuffer(a.length*b.wb);b.write(a);v.bufferData(b.target,b.buffer,b.usage)}
we.prototype.write=function(a,b){b*=this.wb;var c=new Float32Array(this.buffer,b),d=new Int16Array(this.buffer,b);b=new Uint8Array(this.buffer,b);for(var e=0;e<a.length;e++){var h=a[e];var g=c;var k=e*this.wb>>>2;g[k]=h.x;g[k+1]=h.y;g[k+2]=h.z;k=e*this.wb+12>>>2;g[k]=h.uc;g[k+1]=h.vc;g=b;k=e*this.wb+20;g[k]=h.fa;g[k+1]=h.bd;g[k+2]=h.ad;g[k+3]=h.wa;g=d;k=e*this.wb+24>>>1;g[k]=h.Xb;g[k+1]=h.pc;g[k+2]=h.zb}return this};
function ye(){ue.call(this);this.target=v.ELEMENT_ARRAY_BUFFER;this.usage=v.STATIC_DRAW;u.ae(this)}ye.prototype=Object.create(ue.prototype);ye.prototype.constructor=ye;ye.prototype.upload=function(a){(new Uint16Array(this.buffer)).set(a);return ue.prototype.upload.call(this)};function Me(){ue.call(this);this.target=v.UNIFORM_BUFFER;this.usage=v.DYNAMIC_DRAW;this.Eh=null;this.nh=this.Lg=0;this.Ja={};ue.prototype.bind.call(this)}Me.prototype=Object.create(ue.prototype);Me.prototype.constructor=Me;
Me.prototype.create=function(a){v.bindBufferBase(this.target,this.Lg,this.fj);for(var b=0;b<u.v.la.elements.length;b++){var c=u.v.la.elements[b];u.Xa(c);v.uniformBlockBinding(c.sf,v.getUniformBlockIndex(c.sf,this.Eh),this.Lg)}b=v.getUniformIndices(u.D.sf,a);c=q(b);for(var d=c.next();!d.done;d=c.next())if(d.value==v.INVALID_INDEX)return console.log("uniform not found ",this),this;b=v.getActiveUniforms(u.D.sf,b,v.UNIFORM_OFFSET);for(c=0;c<a.length;c++)this.Ja[a[c]]=b[c];return this};
Me.prototype.N=function(a,b,c){a="u_"+a;b instanceof U?b.kd(new Float32Array(this.buffer,this.Ja[a],16)):b instanceof T||(b instanceof Pd?b.kd(new Float32Array(this.buffer,this.Ja[a],4)):b instanceof J||b instanceof S&&(c?b.kd(new Uint32Array(this.buffer,this.Ja[a],2)):b.kd(new Float32Array(this.buffer,this.Ja[a],2))))};Me.prototype.upload=function(){ue.prototype.bind.call(this);v.bufferData(this.target,this.buffer.byteLength,this.usage);v.bufferSubData(this.target,0,this.buffer);return this};
var Ne,Pe=Ne=new we;Pe.usage=v.STATIC_DRAW;Pe.Cg=[];var Qe,Re=Qe=new ye;Re.usage=v.STATIC_DRAW;Re.elements=[];var Se=u.Ub.zc=new Me;Se.Eh="Common";Se.Lg=0;Se.nh=160;ve(Se,Se.nh);var Te=u.Ub.zj=new Me;Te.Eh="PortalLights";Te.Lg=1;Te.nh=48;ve(Te,6144);function oe(){this.name="defaultMaterial";this.od=new T(255,255,255,255);this.Uc=new T(255,255,255,51);this.Vc=4;this.Wc=1;this.Td=new T(0,0,0,0);this.za=0;return this}function Ue(a,b){if(a.name<b.name)return-1;if(a.name>b.name)return 1;var c=zd(a.od,b.od);if(0!=c)return c;c=zd(a.Uc,b.Uc);if(0!=c)return c;c=zd(a.Td,b.Td);return 0!=c?c:a.Vc<b.Vc?-1:a.Vc>b.Vc?1:a.Wc<b.Wc?-1:a.Wc>b.Wc?1:a.za<b.za?-1:a.za>b.za?1:0}
oe.prototype.X=function(){var a=new oe;a.od=this.od;a.Uc=this.Uc;a.Vc=this.Vc;a.Wc=this.Wc;a.Td=this.Td;a.za=this.za;return a};oe.prototype.bind=function(){u.D.N("color",this.od);u.D.N("specularColor",this.Uc);u.D.N("specularExponent",this.Vc);u.D.N("specularSheen",this.Wc);u.D.N("emissiveColor",this.Td)};oe.prototype.save=function(a){Wb(a,this.name);this.od.save(a);this.Uc.save(a);ic(a,Math.floor(1024*this.Vc));Xb(a,Math.floor(255*this.Wc));this.Td.save(a);Xb(a,this.za);return a};
oe.prototype.load=function(a){this.name=Ub(a);this.od=Ad(a);this.Uc=Ad(a);this.Vc=hc(a)/1024;this.Wc=Vb(a)/255;this.Td=Ad(a);this.za=Vb(a)};var Ve=u.v,We=new oe;Ve.sb.replace(We);u.Dd=function(){this.Wg=v.RGBA8;this.height=this.width=2;this.border=0;this.format=v.RGBA;this.type=v.UNSIGNED_BYTE;this.data=null;this.ne=u.Dd.ne;this.mf=u.Dd.mf;this.Ji=this.Ii=v.CLAMP_TO_EDGE};u.Dd.ne=v.NEAREST;u.Dd.mf=v.NEAREST;
u.Dd.prototype.create=function(){if(this.ej){var a=this.ej;a.zi--;0<a.zi||a.ready&&a.ready.call(a)}v.activeTexture(v.TEXTURE0);this.object=v.createTexture();v.bindTexture(v.TEXTURE_2D,this.object);v.texImage2D(v.TEXTURE_2D,0,this.Wg,this.width,this.height,this.border,this.format,this.type,this.data);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,this.ne);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,this.mf);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,this.Ii);v.texParameteri(v.TEXTURE_2D,
v.TEXTURE_WRAP_T,this.Ji);9984<=this.ne&&9987>=this.ne&&v.generateMipmap(v.TEXTURE_2D)};
u.Dd.prototype.load=function(a){this.name=Ub(a);this.Wg=hc(a);this.width=hc(a);this.height=hc(a);this.border=hc(a);this.format=hc(a);this.type=hc(a);this.ne=hc(a);this.mf=hc(a);this.Ii=hc(a);this.Ji=hc(a);this.md=new T(Vb(a),Vb(a),Vb(a),Vb(a));var b=ec(a);a=a.slice(a.position,a.position+=b);a=new Blob([a],{type:"image/png"});this.data=new Image;this.data.parent=this;this.data.onload=function(){this.parent.width=this.width;this.parent.height=this.height;this.parent.create()};this.data.src=URL.createObjectURL(a)};
u.Dd.prototype.save=function(a){Wb(a,this.name);ic(a,this.Wg);ic(a,this.width);ic(a,this.height);ic(a,this.border);ic(a,this.format);ic(a,this.type);ic(a,this.ne);ic(a,this.mf);ic(a,this.Ii);ic(a,this.Ji);Xb(a,this.md.r);Xb(a,this.md.Pa);Xb(a,this.md.ga);Xb(a,this.md.Ea);gc(a,this.bg.length);a.set(this.bg,a.position);a.position+=this.bg.length};
u.Wh=function(a){a.cj=[];a.dj=[];for(var b=0,c=0,d=0;d<a.je.length;d++)b+a.je[d]+1>a.width&&(b=0,c+=a.Pe+1),a.cj.push(b/a.width),a.dj.push(c/a.width),b+=a.je[d]+1,a.je[d]/=a.width,a.eg[d]/=a.width,a.fg[d]/=a.width;a.Pe/=a.height;a.dk=function(e){switch(e){case "0":return 0;case "1":return 1;case "2":return 2;case "3":return 3;case "4":return 4;case "5":return 5;case "6":return 6;case "7":return 7;case "8":return 8;case "9":return 9;case ",":return 10}return-1}};
u.aj=function(a,b,c){for(var d=[],e=0,h=0;h<b.length;h++){var g=a.dk(b.charAt(h)),k=a.cj[g],l=a.dj[g],m=a.je[g],n=a.Pe;e+=a.eg[g];c&&(l+=.5);d.push(Jd(new Fd(e,0+n,0),k,l));d.push(Jd(new Fd(e,0,0),k,l+n));d.push(Jd(new Fd(e+m,0,0),k+m,l+n));d.push(Jd(new Fd(e+m,0,0),k+m,l+n));d.push(Jd(new Fd(e+m,0+n,0),k+m,l));d.push(Jd(new Fd(e,0+n,0),k,l));e+=m;e+=a.fg[g]}d.width=e;d.height=a.Pe;d.Hj=a;return d};var Xe=new u.Node("mouse");Xe.lock=!1;Xe.d={};Xe.p={};document.addEventListener("mousedown",function(a){Xe.p[a.button]=!0;Xe.d[a.button]=!0});Xe.r={};document.addEventListener("mouseup",function(a){Xe.r[a.button]=!0;Xe.d[a.button]=!1});Xe.a=0;document.addEventListener("wheel",function(a){Xe.a=0<a.deltaY?1:-1});Xe.b=new S(0,0);Xe.hc=new S(0,0);document.addEventListener("mousemove",function(a){Xe.b.set(a.clientX,a.clientY);Xe.hc.x+=a.movementX;Xe.hc.y+=a.movementY});
Xe.step=function(){u.Node.prototype.step.call(this);this.hc.set(0,0);var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;this.a=0};
Xe.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=q(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1;Xe.a=0;Xe.b.set(0,0);Xe.hc.set(0,0)};W(Xe,u.inputs);Xe.tk=function(){document.documentElement.requestPointerLock({unadjustedMovement:u.Ib.mouseRaw})};
document.addEventListener("pointerlockchange",function(){if(document.pointerLockElement)Xe.lock=!0,document.body.style.overflowX="hidden",document.body.style.overflowY="hidden",document.body.style.userSelect="none";else{Xe.lock=!1;for(var a=q(Object.getOwnPropertyNames(u.Xf)),b=a.next();!b.done;b=a.next())b=b.value,document.body.style[b]=u.Xf[b]}});var Ye=new u.Node("keyboard");Ye.d={};Ye.p={};document.addEventListener("keypress",function(a){Ye.d[a.code]||(Ye.p[a.code]=!0);Ye.d[a.code]=!0});Ye.r={};document.addEventListener("keyup",function(a){Ye.r[a.code]=!0;Ye.d[a.code]=!1});Ye.step=function(){u.Node.prototype.step.call(this);var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1};
Ye.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=q(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1};W(Ye,u.inputs);u.Audio=function(){this.buffer=null;return this};u.Audio.W=new AudioContext;var Ze=u.Audio.Gb=u.Audio.W.createGain();Ze.gain.value=.5;Ze.connect(u.Audio.W.destination);var $e=u.Audio.$e=u.Audio.W.createGain(),af=window.localStorage.getItem("musicVolume");null!=af?$e.gain.value=af:$e.gain.value=0;$e.connect(u.Audio.W.destination);u.Audio.If=function(a){u.Audio.Gb.gain.value=a};u.Audio.Gg=function(a){u.Audio.$e.gain.value=a};
u.Audio.prototype.play=function(a){a?(void 0===a.gain&&(a.gain=1),void 0===a.pitch&&(a.pitch=1),void 0===a.fh&&(a.fh=0),void 0===a.delay&&(a.delay=0)):a={gain:1,pitch:1,fh:0,delay:0};var b=u.Audio.W.createGain();b.gain.value=a.gain;b.connect(u.Audio.Gb);var c=new AudioBufferSourceNode(u.Audio.W);c.connect(b);a.loop?c.loop=!0:c.onended=function(){b.disconnect(u.Audio.Gb)};c.W=b;c.playbackRate.value=(1-a.fh+Math.random()*a.fh*2)*a.pitch;c.buffer=this.buffer;void 0===a.time?c.start(u.Audio.W.currentTime+
a.delay):c.start(a.time+a.delay);return c};u.Audio.prototype.load=function(a){this.name=Ub(a);var b=ec(a);a=a.slice(a.position,a.position+=b);var c=this;u.Audio.W.decodeAudioData(a.buffer).then(function(d){c.buffer=d})};u.Audio.prototype.save=function(a){Wb(a,this.name);gc(a,this.bg.length);a.set(this.bg,a.position);a.position+=this.bg.length};var bf,cf=[],df=0;function ef(a){return cf[a-df]}var ff=new tb(Jb),gf=new xb,Ib=new xb,hf=new U;hf.scale(.99609375,.99609375,.99609375);var jf=[];function kf(a){var b=ff.get(a);if(b)return b;b=new lf(a);ff.push(b);return b}function mf(a){a=nf(a);return new S(a.x-4096<<19,a.y-4096<<19)}function of(a,b){function c(d){d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;return(d|d<<1)&1431655765}return c(a)<<1|c(b)}
function nf(a){function b(c){c=(c|c>>1)&858993459;c=(c|c>>2)&252645135;c=(c|c>>4)&16711935;return(c|c>>8)&65535}a=new S(a>>>1&1431655765,a>>>0&1431655765);a.x=b(a.x);a.y=b(a.y);return a}
function pf(a,b){isNaN(a)&&(a=0);isNaN(b)&&(b=ff.elements.length-1);if(a==b)return ff.elements[a];for(var c=ff.elements[a].index,d=c^ff.elements[b].index,e=0;d>>=1;)e++;var h=1<<e,g=(2<<e)-1,k=a,l=b+1;for(d=Math.floor(k/2+l/2);k<l;){var m=ff.elements[d].index&g;if(h<m)l=d,d=Math.floor(k/2+l/2);else if(h>m)k=d+1,d=Math.floor(k/2+l/2);else break}c=e&1?new qf(nf(c&~g|h).x):new rf(nf(c&~g|h).y);c.value-=4096;c.value<<=19;c.Ce=pf(a,d-1);c.De=pf(d,b);return c}function qf(a){this.value=a}
function rf(a){this.value=a}function sf(a,b,c){this.start=a;this.hc=b;this.Ta=c;this.lc=[new Ef(bf,0,1)];this.t=0}function Ef(a,b,c){this.node=a;this.Fa=b;this.Bc=c}sf.prototype.next=function(){for(;this.lc.length;){var a=this.lc.shift();this.t=a.Fa;if(a.node instanceof lf)return a;this.te(a)}return null};
sf.prototype.te=function(a){var b=a.node;if(b instanceof qf){var c=this.start.z;var d=this.hc.z}else c=this.start.x,d=this.hc.x;if(0<d){var e=new Ef(b.De,(b.value-this.Ta-c)/d,a.Bc);e.Fa<=a.Bc&&e.Bc>=a.Fa&&this.lc.unshift(e);c=new Ef(b.Ce,a.Fa,(b.value+this.Ta-c)/d);c.Fa<=a.Bc&&c.Bc>=a.Fa&&this.lc.unshift(c)}else 0>d?(e=new Ef(b.Ce,(b.value+this.Ta-c)/d,a.Bc),e.Fa<=a.Bc&&e.Bc>=a.Fa&&this.lc.unshift(e),c=new Ef(b.De,a.Fa,(b.value-this.Ta-c)/d),c.Fa<=a.Bc&&c.Bc>=a.Fa&&this.lc.unshift(c)):(c>=b.value-
this.Ta&&this.lc.unshift(new Ef(b.De,a.Fa,a.Bc)),c<=b.value+this.Ta&&this.lc.unshift(new Ef(b.Ce,a.Fa,a.Bc)))};
function Ff(a,b,c){c=void 0===c?Gf:c;if(!ff.elements.length)return null;for(var d=b.length(),e=new sf(a,b,0),h,g=null,k=1;(h=e.next())&&!(h.t>k);){h=q(h.node.na);for(var l=h.next();!l.done;l=h.next())!(l=l.value.nd(a,0,0,b))||l.t>k||(l.d=l.t*d,-1>l.d||(g=l,k=l.t))}if(!c)return g;e=q(jf);for(l=e.next();!l.done;l=e.next())h=l.value,c(h.flags)&&(!(l=h.nd(a,0,0,b))||l.t>k||(l.d=l.t*d,-1>l.d||(l.item=h.item,g=l,k=l.t)));return g}
function Hf(a,b){var c=void 0===c?!1:c;if(!ff.elements.length)return null;var d=b.length(),e=new sf(a,b,0),h,g=[];for(g.cmp=If;(h=e.next())&&!(1<h.t);){for(var k=q(h.node.na),l=k.next();!l.done;l=k.next())!(l=l.value.nd(a,0,0,b))||1<l.t||(l.d=l.t*d,-1>l.d||(l.Fa=!0,kb(g,l)));h=q(h.node.na);for(l=h.next();!l.done;l=h.next())l=l.value,l=l.gf(),!(l=l.nd(a,0,0,b))||1<l.t||(l.d=l.t*d,-1>l.d||(l.Fa=!1,kb(g,l)))}if(c)return g;c=q(jf);for(l=c.next();!l.done;l=c.next())e=l.value,!(l=e.nd(a,0,0,b))||1<l.t||
(l.d=l.t*d,-1>l.d||(l.item=e.item,l.Fa=!0,kb(g,l)));c=q(jf);for(l=c.next();!l.done;l=c.next())e=l.value,e=e.gf(),!(l=e.nd(a,0,0,b))||1<l.t||(l.d=l.t*d,-1>l.d||(l.item=e.item,l.Fa=!1,kb(g,l)));return g}function Jf(a,b){if(0==ff.elements.length)return null;for(var c=new sf(a,new J(240*b.x,0,240*b.z),0),d,e=null,h=240;(d=c.next())&&!(240*d.t>h);){d=q(d.node.na);for(var g=d.next();!g.done;g=d.next())!(g=g.value.Di(a,b))||g.t>h||(e=g,h=g.t)}return e}
function Kf(a,b){return Lf(a.z-b,a.x-b,a.z+b,a.x+b,void 0)}function Lf(a,b,c,d,e){e||(e=[]);for(var h=[bf];h.length;){var g=h.shift();g instanceof qf?(a<=g.value&&h.push(g.Ce),c>=g.value&&h.push(g.De)):g instanceof rf?(b<=g.value&&h.push(g.Ce),d>=g.value&&h.push(g.De)):e.push(g)}return e};var Mf,Nf,Of;function Pf(){for(var a=0,b=u.Ub.zj,c=q(cf),d=c.next();!d.done;d=c.next()){d=d.value;d.qe=a&255|d.dc.length<<16;d=q(d.dc);for(var e=d.next();!e.done;e=d.next())e=e.value,e.kd(new Float32Array(b.buffer,a*b.nh,12)),e.index=a,a++}b.upload()}function Qf(){this.Ue=this.jg=null;this.Ic=0;this.hh=null}function Rf(a,b,c){this.S=a;this.n=new S(a.c-a.u,a.A-a.f);this.n.x/=a.length;this.n.y/=a.length;this.sj=this.S.f*this.n.x+this.S.c*this.n.y;this.h=b;this.o=c;this.height=c-b}
Rf.prototype.kd=function(a){var b=0,c=Sf(this);a[b++]=c.x;a[b++]=c.y;a[b++]=c.z;a[b++]=this.sj;a[b++]=this.S.f;a[b++]=this.S.c;a[b++]=this.S.A;a[b++]=this.S.u;a[b++]=this.n.x;a[b++]=this.n.y;a[b++]=this.h;a[b++]=this.o;return a};function Sf(a){return Nd(ef(a.aa).ea.pb,ef(a.Ec.aa).ea.pb,.5)}
function Tf(a,b){function c(h,g){return Math.acos(pb(Kd(h,g)/Math.sqrt(Kd(h,h)*Kd(g,g)),-1,1))/Math.PI}var d=b.z*a.n.x+b.x*a.n.y-a.sj;if(0>=d)return 0;var e=c(new S(a.S.A-b.z,a.S.u-b.x),new S(a.S.f-b.z,a.S.c-b.x));a=c(new S(d,a.o-b.y),new S(d,a.h-b.y));return pb(e*a,0,1)}function Uf(a){return a.S.length/1E5*((a.o-a.h)/1E5)}function Vf(a){return a.S.length/1E5*((a.height-(a.o-a.h))/1E5)}
function Wf(a,b,c){c.set(0,0,0);for(var d=1,e=q(b.dc),h=e.next();!h.done;h=e.next()){var g=h.value;h=Tf(g,a);d-=h;g=Sf(g);c.x+=g.x*h;c.y+=g.y*h;c.z+=g.z*h}0<d&&(a=b.ea.pb,c.x+=a.x*d,c.y+=a.y*d,c.z+=a.z*d)};function Xf(a){u.qa.call(this,a);this.hi=new U;this.dd=45*Math.PI/180;this.Se=1E4;this.Me=1E9;this.rect=null;this.Qg=new U;this.Fi=new U}Xf.prototype=Object.create(u.qa.prototype);Xf.prototype.constructor=Xf;Xf.Lc=Math.tan(zc(30));Xf.Pj=function(a,b,c,d){d.G=2/a.a;d.K=0;d.L=0;d.Wa=0;d.I=0;d.m11=2/a.g;d.m12=0;d.m13=0;d.J=0;d.m21=0;d.m22=-2/(c-b);d.m23=0;d.H=0;d.m31=0;d.m32=-(c+b)/(c-b);d.m33=1};Xf.zh=function(a,b,c){c=Math.tan(c)*a;var d=c*u.viewport.ratio;return{n:a,Sk:b,t:c,ga:2*-c+c,r:d,jk:-d}};
Xf.yh=function(a,b,c,d,e,h,g){g.G=2*a/(d-c);g.K=0;g.L=0;g.Wa=0;g.I=0;g.m11=2*a/(e-h);g.m12=0;g.m13=0;g.J=(d+c)/(d-c);g.m21=(e+h)/(e-h);g.m22=(b+a)/(a-b);g.m23=-1;g.H=0;g.m31=0;g.m32=2*b*a/(a-b);g.m33=0};Xf.Ik=function(a,b,c,d,e){var h=b*Xf.Lc;c*=Xf.Lc;d=Math.tan(d);b=h/d;c/=d;e.G=b/(h*a.ratio);e.K=0;e.L=0;e.Wa=0;e.I=0;e.m11=b/h;e.m12=0;e.m13=0;e.J=0;e.m21=0;e.m22=-(c+b)/(c-b);e.m23=-1;e.H=0;e.m31=0;e.m32=-(2*c*b)/(c-b);e.m33=0;return e};Xf.prototype.step=function(){u.qa.prototype.step.call(this)};
function Yf(a){if(a.rect)Xf.Pj(a.rect,a.Se,a.Me,a.hi);else{var b=Xf.zh(a.Se,a.Me,a.dd);Xf.yh(a.Se,a.Me,b.jk,b.r,b.t,b.ga,a.hi)}a.O.Xh(a.Qg);be(a.hi,a.Qg,a.Fi);u.Ub.zc.N("eyeMatrix",a.Qg);u.Ub.zc.N("viewMatrix",a.Fi);u.Ub.zc.N("cameraPos",new Pd(a.O.H,a.O.m31,a.O.m32,a.O.m33));u.Ub.zc.upload()}
function Zf(){function a(d){u.Dj(d);Yf(d);Xf.Qj(d);ie(u.sc)}var b=u.B.pa;if(b.Ck){var c=new Qc(b.rect.a/2,b.rect.g,null);c.x=u.Rf.x;c.y=u.Rf.y;u.vg(c);a(b.Mi);c=new Qc(b.rect.a/2,b.rect.g,null);c.x=u.Rf.x+c.a;c.y=u.Rf.y;u.vg(c);a(b.Li)}else u.vg(u.Rf),a(b)}
Xf.Qj=function(a){function b(n,r){function p(y){function B(L){A.Ka(Math.atan2(L.x,-L.z),Math.atan2(L.y,-L.z))}var A=new dd;A.bc=y;y=[new J(y.S.u,y.h,y.S.A),new J(y.S.c,y.h,y.S.f),new J(y.S.c,y.o,y.S.f),new J(y.S.u,y.o,y.S.A)];for(var D=q(y),F=D.next();!F.done;F=D.next())F=F.value,a.Qg.jb(F,F);D=y[y.length-1];y=q(y);for(F=y.next();!F.done;F=y.next())F=F.value,0>=F.z&&B(F),2==Math.abs(Math.sign(F.z)-Math.sign(D.z))&&B(Nd(D,F,D.z/(D.z-F.z))),D=F;return A}if((!u.Xk||r!=m)&&r.ea.Aa!=u.l){r.ea.Aa=u.l;r.Nj=
l++;0>$f&&(r.ob>ag&&(ag=r.ob),r.ob<bg&&(bg=r.ob));for(var t=q(r.cells.elements),z=t.next();!z.done;z=t.next())if(z=z.value,z.Dg!=u.l)for(z.Dg<u.l-1&&Db(z.Mj),z.Dg=u.l,z=z.gh.first();null!=z.item;z=z.next)z.item.ea.Aa=u.l}r=q(r.dc);for(t=r.next();!t.done;t=r.next())if(t=t.value,!(isNaN(t.index)||t.o<=t.h)){if(n.bc){if(0<=R(n.bc.S,t.S.f,t.S.c)&&0<=R(n.bc.S,t.S.A,t.S.u))continue;if(0>=R(t.S,n.bc.S.f,n.bc.S.c)&&0>=R(t.S,n.bc.S.A,n.bc.S.u))continue}if(!(0>=R(t.S,c.z,c.x))){(z=e[t.index])||(e[t.index]=
z=p(t));var w=z.X();w.bc=z.bc;w.m<n.m&&(w.m=n.m);w.w>n.w&&(w.w=n.w);w.h<n.h&&(w.h=n.h);w.o>n.o&&(w.o=n.o);w.m>=w.w||w.h>=w.o||b(w,ef(t.Ec.aa))}}}var c=de(a.O),d=Ff(c,new J(0,-4294967295,0),null);if(d){var e={},h=a.dd,g=Math.atan(Math.tan(h)*u.viewport.ratio),k=new dd;k.m=-g;k.w=g;k.h=-h;k.o=h;var l=0;0>$f&&(bg=Infinity);var m=ef(d.item.aa);m&&b(k,m)}};function pe(){this.name=null;this.Qc=[]}pe.prototype.save=function(a){Wb(a,this.name);ic(a,Math.ceil(this.Jb/1E3));Xb(a,this.Qc.length);for(var b=q(this.Qc),c=b.next();!c.done;c=b.next())c.value.save(a)};pe.prototype.load=function(a){this.name=Ub(a);this.Jb=1E3*hc(a);for(var b=Vb(a),c=0;c<b;c++){var d=new cg;d.load(a);this.Qc.push(d)}};function cg(){this.da=u.v.sb.get("defaultMaterial");this.yb=[];this.Fb=[];this.ic=[]}
cg.prototype.compile=function(){this.Ei=Ne.Cg.length;Ne.Cg=Ne.Cg.concat(this.yb);for(var a=0;a<this.Fb.length;a++)this.Fb[a]+=this.Ei;for(a=0;a<this.ic.length;a++)this.ic[a]+=this.Ei;this.Ek=Qe.elements.length;Qe.elements=Qe.elements.concat(this.Fb);this.Vi=Qe.elements.length;Qe.elements=Qe.elements.concat(this.ic)};cg.prototype.X=function(){var a=new cg;a.yb=this.yb;a.Ma=this.Ma;a.Fb=this.Fb;a.qd=this.qd;a.ic=this.ic;a.pd=this.pd;return a};
cg.prototype.save=function(a){Wb(a,this.da.name);ic(a,this.yb.length);for(var b=q(this.yb),c=b.next();!c.done;c=b.next())c=c.value,rc(a,c.x),rc(a,c.y),rc(a,c.z);b=q(this.yb);for(c=b.next();!c.done;c=b.next())c=c.value,pc(a,c.Xb),pc(a,c.pc),pc(a,c.zb);b=q(this.yb);for(c=b.next();!c.done;c=b.next())c=c.value,tc(a,c.uc),tc(a,c.vc);ic(a,this.Fb.length);b=q(this.Fb);for(c=b.next();!c.done;c=b.next())ic(a,c.value);ic(a,this.ic.length);b=q(this.ic);for(c=b.next();!c.done;c=b.next())ic(a,c.value);ic(a,this.pe);
return a};cg.prototype.load=function(a){this.da=u.v.sb.get(Ub(a));for(var b=hc(a),c=0;c<b;c++){var d=new Fd(qc(a),qc(a),qc(a));this.yb.push(d)}for(c=0;c<b;c++)d=this.yb[c],d.Xb=oc(a),d.pc=oc(a),d.zb=oc(a);for(c=0;c<b;c++)d=this.yb[c],d.uc=sc(a),d.vc=sc(a);b=hc(a);for(c=0;c<b;c++)this.Fb.push(hc(a));b=hc(a);for(c=0;c<b;c++)this.ic.push(hc(a));this.pe=hc(a);this.compile()};
function dg(){function a(p,t){return p.y<t.y?-1:p.y>t.y?1:0}function b(p,t){return p.z<t.z?-1:p.z>t.z?1:p.x<t.x?-1:p.x>t.x?1:0}var c=eg,d=[];d.cmp=b;for(var e=q(c),h=e.next();!h.done;h=e.next()){var g=h.value;h=g[g.length-1];g=q(g);for(var k=g.next();!k.done;k=g.next()){k=k.value;if(0==b(h,k)){var l=[];l.cmp=a;l.z=h.z;l.x=h.x;l=kb(d,l);kb(l,h);kb(l,k)}h=k}}c=q(c);for(h=c.next();!h.done;h=c.next())for(e=h.value,k=e.length-1,k=e[k],h=0;h<e.length;h++){g=e[h];if(0==b(k,g))if(l=jb(d,k),k.y<g.y){var m=
ib(l,k),n=ib(l,g);for(m+=1;m<l.length&&!(m>=n);){var r=Hd(k,g,(l[m].y-k.y)/(g.y-k.y));r.y=l[m].y;e.splice(h++,0,r);m++}}else for(m=ib(l,k),n=ib(l,g),--m;0<=m&&!(m<=n);)r=Hd(k,g,(l[m].y-k.y)/(g.y-k.y)),r.y=l[m].y,e.splice(h++,0,r),m--;k=h;k=g}}function fg(){cg.call(this);this.rd=[];this.Ma=new we;this.pd=this.qd=null;this.pe=0}fg.prototype=Object.create(cg.prototype);fg.prototype.constructor=fg;
fg.prototype.compile=function(){this.Fb=[];for(var a=q(this.rd),b=a.next();!b.done;b=a.next()){b=b.value;for(var c=2;c<b.length;c++)this.Fb.push(b[0]),this.Fb.push(b[c-1]),this.Fb.push(b[c])}u.ub(this.Ma);ve(this.Ma,this.yb.length*this.Ma.wb);this.Ma.upload(this.yb);this.Fb.length?(this.qd||(this.qd=new ye),u.ae(this.qd),ve(this.qd,2*this.Fb.length),this.qd.upload(this.Fb)):this.qd=null;this.ic.length?(this.pd||(this.pd=new ye),u.ae(this.pd),ve(this.pd,2*this.ic.length),this.pd.upload(this.ic)):this.pd=
null};function gg(a,b){b||(b=a.name);u.qa.call(this,b);this.src=a}gg.prototype=Object.create(u.qa.prototype);gg.prototype.constructor=gg;gg.prototype.create=function(){this.Qc=[];for(var a=q(this.src.Qc),b=a.next();!b.done;b=a.next())b=b.value,b=b instanceof fg?new hg(b):new ig(b),this.Qc.push(b),this.Ne&&(b.Ne=this.Ne),b.Ba=this.O,W(b,this)};function ig(a,b){u.qa.call(this,b);this.src=a;this.facing=1;this.xk=this.wk=!1}ig.prototype=Object.create(u.qa.prototype);ig.prototype.constructor=ig;
function jg(a){var b=null;a.parent&&(b=a.parent.D);b||(b=a.D);b||(b=a.src.D);b||(b=u.v.la.get("physical"));return b}function kg(a){var b=null;a.parent&&(b=a.parent.da);b||(b=a.da);b||(b=a.src.da);b||(b=u.v.sb.get("defaultMaterial"));return b}function lg(a){var b=null;a.parent&&(b=a.parent.ma);b||(b=a.ma);b||(b=a.src.ma);return b}
ig.prototype.Oa=function(){u.ub(Ne);u.Xa(jg(this));u.D.N("modelMatrix",this.O);u.Sb(0,lg(this));var a=kg(this);a.bind();u.D.N("lightingFancy",u.Ib.lightingFancy,!0);this.Kg?u.D.N("architectureLighting",1,!0):u.D.N("architectureLighting",0,!0);u.D.N("ambientLight",this.ea.pb,!1);if(this.Ja)for(var b=0;b<this.Ja.length;b+=3)u.D.N(this.Ja[b],this.Ja[b+1],this.Ja[b+2]);u.mb(a.za);u.Db(a.za?1:2);u.Lb(this.facing);this.src.Fb.length?(u.ae(Qe),v.drawElements(v.TRIANGLES,this.src.Fb.length,v.UNSIGNED_SHORT,
2*this.src.Ek)):v.drawArrays(v.TRIANGLES,this.src.Ei,this.src.yb.length);this.src.ic.length&&(this.wk&&this.Ti(),this.xk&&this.Ui())};
ig.prototype.Ti=function(){u.mb(1);u.Db(1);u.Xa(u.v.la.get("edge"));u.D.N("toonMinDist",Infinity,!1);u.D.N("modelMatrix",this.O);var a=new J(this.O.G,this.O.K,this.O.L),b=new J(this.O.I,this.O.m11,this.O.m12),c=new J(this.O.J,this.O.m21,this.O.m22);a.ja(1);b.ja(1);c.ja(1);var d=new J(u.pa.O.H-this.O.H,u.pa.O.m31-this.O.m31,u.pa.O.m32-this.O.m32);a=Dc(a,d);b=Dc(b,d);c=Dc(c,d);u.D.N("eyeVector",new J(a,b,c));v.drawElements(v.LINES,this.src.ic.length-this.src.pe,v.UNSIGNED_SHORT,2*this.src.Vi+2*this.src.pe)};
ig.prototype.Ui=function(){u.mb(1);u.Db(1);u.Xa(u.v.la.get("toon"));u.D.N("toonMinDist",Infinity,!1);u.D.N("modelMatrix",this.O);v.drawElements(v.LINES,this.src.pe,v.UNSIGNED_SHORT,2*this.src.Vi)};function hg(a,b){ig.call(this,a,b)}hg.prototype=Object.create(ig.prototype);f=hg.prototype;f.constructor=hg;f.step=function(){ig.prototype.step.call(this)};
f.Oa=function(){u.ub(this.src.Ma);u.Xa(jg(this));u.D.N("modelMatrix",this.O);u.Sb(0,lg(this));var a=kg(this);a.bind();u.D.N("lightingFancy",u.Ib.lightingFancy,!0);this.Kg?u.D.N("architectureLighting",1,!0):u.D.N("architectureLighting",0,!0);u.D.N("ambientLight",this.ea.pb,!1);if(this.Ja)for(var b=0;b<this.Ja.length;b+=3)u.D.N(this.Ja[b],this.Ja[b+1],this.Ja[b+2]);u.mb(a.za);u.Db(a.za?1:2);u.Lb(this.facing);this.src.Fb.length?(u.ae(this.src.qd),v.drawElements(v.TRIANGLES,this.src.Fb.length,v.UNSIGNED_SHORT,
0)):v.drawArrays(v.TRIANGLES,0,this.src.yb.length)};
f.Ti=function(){u.mb(1);u.Db(1);u.Xa(u.v.la.get("edge"));u.D.N("toonMinDist",Math.pow(5E5,2),!1);u.D.N("modelMatrix",this.O);var a=new J(this.O.G,this.O.K,this.O.L),b=new J(this.O.I,this.O.m11,this.O.m12),c=new J(this.O.J,this.O.m21,this.O.m22);a.ja(1);b.ja(1);c.ja(1);var d=new J(u.pa.O.H-this.O.H,u.pa.O.m31-this.O.m31,u.pa.O.m32-this.O.m32);a=Dc(a,d);b=Dc(b,d);c=Dc(c,d);u.D.N("eyeVector",new J(a,b,c));a=this.src.ic.length-this.src.pe;b=2*this.src.pe;u.ae(this.src.pd);v.drawElements(v.LINES,a,v.UNSIGNED_SHORT,
b)};f.Ui=function(){u.mb(1);u.Db(1);u.Xa(u.v.la.get("toon"));u.D.N("toonMinDist",Math.pow(5E5,2),!1);u.D.N("modelMatrix",this.O);var a=this.src.pe;u.ae(this.src.pd);v.drawElements(v.LINES,a,v.UNSIGNED_SHORT,0)};function mg(){this.scale=1;this.Ta=25E3;this.wc=0;this.Ne=!1;this.frame=0;this.lb=1}function ng(a){a.G=u.pa.O.G;a.K=u.pa.O.K;a.L=u.pa.O.L;a.I=u.pa.O.I;a.m11=u.pa.O.m11;a.m12=u.pa.O.m12;a.J=u.pa.O.J;a.m21=u.pa.O.m21;a.m22=u.pa.O.m22;var b=this.scale*this.Ta,c=this.Ne?-b:b,d=Math.cos(this.wc),e=Math.sin(this.wc),h=new U;h.G=d*c;h.K=e*c;h.I=-e*b;h.m11=d*b;$d(a,h,a)}
function og(){0>this.frame||(ng.call(this,this.O),u.ub(pg),u.Xa(this.D),u.Sb(0,this.ma),this.da.bind(),u.D.N("ambientLight",this.ea.pb,!1),u.mb(this.da.za),u.Db(this.da.za?1:2),u.Lb(0),u.D.N("modelMatrix",this.O),u.D.N("color",this.color),v.drawArrays(v.TRIANGLE_FAN,qg(this.frame,this.lb),4))}
for(var rg=[],vg=0;4>vg;vg++)for(var wg=1<<vg,xg=wg<<vg,yg=1/wg,zg=0;zg<xg;zg++){var Ag=zg%wg,Bg=zg/wg|0;Ag*=yg;Bg*=yg;var Cg=void 0;Cg=new Fd(-1,-1,0);Jd(Cg,Ag,Bg);Cg.zb=32767;rg.push(Cg);Cg=new Fd(1,-1,0);Jd(Cg,Ag+yg,Bg);Cg.zb=32767;rg.push(Cg);Cg=new Fd(1,1,0);Jd(Cg,Ag+yg,Bg+yg);Cg.zb=32767;rg.push(Cg);Cg=new Fd(-1,1,0);Jd(Cg,Ag,Bg+yg);Cg.zb=32767;rg.push(Cg)}var pg=new we;ve(pg,rg.length*pg.wb);pg.upload(rg);
function Dg(a,b){for(var c=0;b>Math.pow(1<<c,2);)c++;var d=1<<c;b=1/d;c=a%d*b;a=(a/d|0)*b;return[c,a,c+b,a+b]}function qg(a,b){switch(b){default:return 4*a;case 4:return 4+4*a;case 16:return 20+4*a;case 64:return 84+4*a}};function Eg(){this.color=this.ma=this.D=null;this.za=NaN;this.Qd=[];this.lc=[];this.lc.cmp=Fg;this.kk=64}Eg.prototype.clear=function(){this.Qd.length=0;this.lc.length=0};Eg.prototype.Oa=function(){u.Xa(this.D);u.D.N("modelMatrix",hf);u.Sb(0,this.ma);u.D.N("color",this.color);u.mb(this.za);u.Db(1);u.Lb(0);for(var a=q(this.lc),b=a.next();!b.done;b=a.next())b.value.Oa()};
function Gg(a,b,c,d,e,h,g){a.Qd.length==a.kk&&a.Qd.shift().remove();var k=[];k.cmp=Fg;var l=new J,m=new J;Kc(c,l,m);var n=new U;n.G=l.x;n.I=m.x;n.J=c.x;n.H=b.x;n.K=l.y;n.m11=m.y;n.m21=c.y;n.m31=b.y;n.L=l.z;n.m12=m.z;n.m22=c.z;n.m32=b.z;l=new U;m=Math.cos(d)*e;d=Math.sin(d)*e;l.G=m;l.I=-d;l.K=d;l.m11=m;l.m22=e;be(n,l,n);var r=n.Xh(new U),p=Dg(h,g);e*=1.733;g=Kf(b,e);h={};g=q(g);for(d=g.next();!d.done;h={Eg:h.Eg},d=g.next())for(h.Eg=d.value,d={},l=q(h.Eg.na),m=l.next();!m.done;d={Wb:d.Wb,Da:d.Da},m=
l.next())if(d.Da=m.value,m=function(w,y){return function(){function B(P,ka){var X=[],qa=P[P.length-1],Kb=ka(qa);P=q(P);for(var bb=P.next();!bb.done;bb=P.next()){bb=bb.value;var yc=ka(bb);2==Math.abs(Math.sign(yc)-Math.sign(Kb))&&X.push(Nd(qa,bb,Kb/(Kb-yc)));0<=yc&&X.push(bb);Kb=yc;qa=bb}return 3>X.length?null:X}for(var A=q(w.Wb),D=A.next();!D.done;D=A.next())D=D.value,r.jb(D,D);A=q([function(P){return 1-P.x},function(P){return 1+P.x},function(P){return 1-P.y},function(P){return 1+P.y},function(P){return 1-
P.z},function(P){return 1+P.z}]);for(D=A.next();!D.done;D=A.next())if(w.Wb=B(w.Wb,D.value),!w.Wb)return;for(A=0;A<w.Wb.length;A++){D=w.Wb[A];var F=.5*D.x+.5,L=.5*D.y+.5;n.jb(D,D);var da=new Fd;da.x=D.x;da.y=D.y;da.z=D.z;da.uc=p[0]*(1-F)+p[2]*F;da.vc=p[1]*(1-L)+p[3]*L;w.Wb[A]=da}A=[];A.aa=w.Da.aa;A.cellIndex=y.Eg.index;A=kb(k,A);for(D=2;D<w.Wb.length;D++)A.push(w.Wb[0]),A.push(w.Wb[D-1]),A.push(w.Wb[D])}}(d,h),ef(d.Da.aa)){d.Wb=[];if(d.Da instanceof Hg){if(d.Da.o<b.y-e)continue;if(d.Da.h>b.y+e)continue;
var t=R(d.Da.T,b.z,b.x);if(t<-e)continue;if(t>e)continue;t=d.Da.T.getParameter(b.z,b.x);if(t<-e)continue;if(t>d.Da.T.length+e)continue;if(.707107>Dc(new J((d.Da.T.A-d.Da.T.f)/d.Da.T.length,0,(d.Da.T.c-d.Da.T.u)/d.Da.T.length),c))continue;d.Wb.push(new J(d.Da.T.u,d.Da.h,d.Da.T.A),new J(d.Da.T.c,d.Da.h,d.Da.T.f),new J(d.Da.T.c,d.Da.o,d.Da.T.f),new J(d.Da.T.u,d.Da.o,d.Da.T.A))}else{if(d.Da.y<b.y-e)continue;if(d.Da.y>b.y+e)continue;var z=q(d.Da.ca);for(t=z.next();!t.done;t=z.next());if(d.Da instanceof
Ig){if(.707107>c.y)continue}else if(-.707107<c.y)continue;z=q(d.Da.ca);for(t=z.next();!t.done;t=z.next())t=t.value,d.Wb.push(new J(t.u,d.Da.y,t.A));d.Da instanceof Jg&&d.Wb.reverse()}m()}b=new Kg;c=q(k);for(e=c.next();!e.done;e=c.next())e=e.value,h=jb(a.lc,e),h||(h=new Lg(a),h.aa=e.aa,h.cellIndex=e.cellIndex,h.ea=ef(h.aa).ea,h.create(),kb(a.lc,h)),Mg(h,e),b.Aj.push({node:h,xc:e.length});a.Qd.push(b)}function Lg(a){this.Wj=a;this.cellIndex=this.aa=NaN;this.ea=null;this.xc=this.Bd=0}
function Fg(a,b){return a.aa<b.aa?-1:a.aa>b.aa?1:a.cellIndex<b.cellIndex?-1:a.cellIndex>b.cellIndex?1:0}Lg.prototype.create=function(){this.Ma=new we;this.Ma.usage=v.DYNAMIC_DRAW;ve(this.Ma,48*this.Ma.wb)};
function Ng(a,b){var c=a.xc+b;if(0>=c)lb(a.Wj.lc,a);else{c*=a.Ma.wb;if((a.Bd+a.xc+b)*a.Ma.wb>a.Ma.buffer.byteLength)b=new ArrayBuffer(c<<1);else if(48<=a.Bd)b=a.Ma.buffer;else return;c=new Uint8Array(a.Ma.buffer,a.Bd*a.Ma.wb,a.xc*a.Ma.wb);(new Uint8Array(b)).set(c);a.Ma.buffer=b;a.Ma.bind();v.bufferData(a.Ma.target,a.Ma.buffer,a.Ma.usage);a.Bd=0}}
function Mg(a,b){Ng(a,b.length);a.Ma.bind();a.Ma.write(b,a.Bd+a.xc);v.bufferSubData(a.Ma.target,(a.Bd+a.xc)*a.Ma.wb,new Uint8Array(a.Ma.buffer,(a.Bd+a.xc)*a.Ma.wb,b.length*a.Ma.wb));a.xc+=b.length}Lg.prototype.Oa=function(){if(this.ea.Aa<u.l)return!1;u.ub(this.Ma);u.D.N("ambientLight",this.ea.pb);v.drawArrays(v.TRIANGLES,this.Bd,this.xc)};function Kg(){this.Aj=[]}Kg.prototype.remove=function(){for(var a=q(this.Aj),b=a.next();!b.done;b=a.next())b=b.value,b.node.Bd+=b.xc,b.node.xc-=b.xc,Ng(b.node,0)};var Og={},ag,bg,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch=bh=new oe;bh.name="concrete";bh.Uc=new T(255,255,255,3.984375);bh.Vc=4;bh.Wc=1;bh.za=0;var dh=bh=new oe;bh.name="paint";bh.Uc=new T(255,255,255,63.75);bh.Vc=16;bh.Wc=1;bh.za=0;var eh=bh=new oe;bh.name="glass";bh.Uc=new T(255,255,255,63.75);bh.Vc=256;bh.Wc=1;bh.za=1;
function fh(){function a(h){if(!(c>=d)&&(0>h&&(h=d-c),c+h>d&&(h=d-c),0!=h)){var g=new gh(c,c+h);b.push(g);c+=h;return g}}this.floor.ma=u.v.ba.get("concr01");this.floor.da=ch;this.floor.color=hh;this.ua.ma=u.v.ba.get("concr01");this.ua.da=ch;this.ua.color=ih;var b=[],c=this.xg,d=this.o,e;if(e=a(25E3))e.xa.ma=u.v.ba.get("brick01"),e.xa.da=dh,e.xa.color=jh;if(e=a(this.Eb))e.xa.ma=u.v.ba.get("brick01"),e.xa.da=dh,e.xa.color=this.color;if(e=a(-1))e.xa.ma=u.v.ba.get("brick01"),e.xa.da=ch,e.xa.color=kh;
return b}function lh(a,b,c,d){a=void 0===a?NaN:a;b=void 0===b?NaN:b;c=void 0===c?NaN:c;d=void 0===d?NaN:d;this.C=a;this.M=b;this.m=c;this.w=d}function mh(a,b,c){this.d=a;this.P=b;this.R=c}function nh(a,b,c){this.d=-a;this.P=b;this.R=c}function oh(a,b,c){this.d=-a;this.P=-b;this.R=-c}function ph(a,b,c){this.d=a;this.P=-b;this.R=-c}f=lh.prototype;f.ie=function(a,b){return a<=this.C||a>=this.M||b<=this.m||b>=this.w?!1:!0};
f.Te=function(a,b){a<this.C?a=this.C:a>this.M&&(a=this.M);b<this.m?b=this.m:b>this.w&&(b=this.w);return new S(a,b)};function qh(a,b,c){var d=0;b<a.C?d+=a.C-b:b>a.M&&(d+=b-a.M);c<a.m?d+=a.m-c:c>a.w&&(d+=c-a.w);return d}function rh(a,b,c){b>=a.C||(a.C=b);b<=a.M||(a.M=b);c>=a.m||(a.m=c);c<=a.w||(a.w=c)}function sh(a,b){b.C>=a.C||(a.C=b.C);b.M<=a.M||(a.M=b.M);b.m>=a.m||(a.m=b.m);b.w<=a.w||(a.w=b.w)}f.Wd=function(a,b){a-=.5*this.M+.5*this.C;b-=.5*this.w+.5*this.m;return 1E5/Math.sqrt(a*a+b*b)};
f.expand=function(a,b){return this.X(this.C-a,this.M+a,this.m-b,this.w+b)};function th(a,b){var c=new mh(a.m,a.C,a.M);c.source=a;b.push(c);c=new nh(a.M,a.m,a.w);c.source=a;b.push(c);c=new oh(a.w,a.M,a.C);c.source=a;b.push(c);c=new ph(a.C,a.w,a.m);c.source=a;b.push(c)}f.X=function(a,b,c,d){a=new lh(a,b,c,d);this.Oi&&(a.Oi=this.Oi);this.platform&&(a.platform=this.platform);this.ia&&(a.ia=this.ia);void 0!==this.direction&&(a.direction=this.direction);void 0!==this.type&&(a.type=this.type);return a};
f.Bf=function(a,b){if(!uh(this,a))return!1;var c=this.m,d=this.w;this.w>a.w&&(b.push(this.X(this.C,this.M,a.w,this.w)),d=a.w);this.m<a.m&&(b.push(this.X(this.C,this.M,this.m,a.m)),c=a.m);this.M>a.M&&b.push(this.X(a.M,this.M,c,d));this.C<a.C&&b.push(this.X(this.C,a.C,c,d));return!0};f.kg=function(a,b){a=this.X(Math.max(this.C,a.C),Math.min(this.M,a.M),Math.max(this.m,a.m),Math.min(this.w,a.w));a.M<=a.C||a.w<=a.m||b.push(a)};function vh(a,b){return a.X(a.C+b.C,a.M+b.M,a.m+b.m,a.w+b.w)}
f.rotate=function(a){switch(a){case 0:return this.X(this.C,this.M,this.m,this.w);case 1:return this.X(-this.w,-this.m,this.C,this.M);case 2:return this.X(-this.M,-this.C,-this.w,-this.m);case 3:return this.X(this.m,this.w,-this.M,-this.C)}};f.Ff=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return this.X(this.C+a,this.M+a,this.m+b,this.w+b)};function wh(a,b){a=new lh(Math.max(a.C,b.C),Math.min(a.M,b.M),Math.max(a.m,b.m),Math.min(a.w,b.w));return a.M<a.C||a.w<a.m?null:a}
function uh(a,b){return a.C>=b.M||a.M<=b.C||a.m>=b.w||a.w<=b.m?!1:!0}function xh(a,b){return!uh(a,b)||a.h>=b.o||a.o<=b.h?!1:!0}function yh(a,b,c){var d=0;a=q(a);for(var e=a.next();!e.done;e=a.next())d+=e.value.Wd(b,c);return d}f=mh.prototype;f.rb=function(){return 0};f.$b=function(){return this.P};f.Zb=function(){return this.d};f.Cb=function(){return this.R};f.Bb=function(){return this.d};f.raw=function(a,b,c){this.d=a;this.P=b;this.R=c;return this};
f.Ee=function(){return new O(this.$b(),this.Zb(),this.Cb(),this.Bb())};f.X=function(a,b,c){a=new mh(a,b,c);a.source=this.source;return a};f.dg=function(a,b,c){if(!this.zg){var d=new S(this.P+a,this.d-b);d.source=this;c.push(d)}this.Zf||(a=new S(this.R-a,this.d-b),a.source=this,c.push(a))};f.Oe=function(a,b){return new S(this.P+a,this.d+b)};f.ie=function(a,b){return b>this.d||b<this.d||a<this.P||a>=this.R?!1:!0};
f.Te=function(a){return a<this.P?new S(this.P,this.d):a>this.R?new S(this.R,this.d):new S(a,this.d)};f.Bf=function(a,b){if(this.d>a.w||this.d<=a.m||this.P>=a.M||this.R<=a.C)return!1;this.P<a.C&&b.push(this.X(this.d,this.P,a.C));this.R>a.M&&b.push(this.X(this.d,a.M,this.R));return!0};f.kg=function(a,b){this.d>a.w||this.d<=a.m||this.P>=a.M||this.R<=a.C||b.push(this.X(this.d,Math.max(this.P,a.C),Math.min(this.R,a.M)))};f.Bg=function(){return new lh(this.P,this.R,this.d,this.d)};
f.rotate=function(a){switch(a){case 0:return(new mh).raw(this.d,this.P,this.R);case 1:return(new nh).raw(this.d,this.P,this.R);case 2:return(new oh).raw(this.d,this.P,this.R);case 3:return(new ph).raw(this.d,this.P,this.R)}};f.Ff=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new mh).raw(this.d+b,this.P+a,this.R+a)};f=nh.prototype;f.rb=function(){return 1};f.$b=function(){return-this.d};f.Zb=function(){return this.P};f.Cb=function(){return-this.d};f.Bb=function(){return this.R};
f.raw=mh.prototype.raw;f.Ee=mh.prototype.Ee;f.X=function(a,b,c){a=new nh(-a,b,c);a.source=this.source;return a};f.dg=function(a,b,c){if(!this.zg){var d=new S(-this.d+a,this.P+b);d.source=this;c.push(d)}this.Zf||(a=new S(-this.d+a,this.R-b),a.source=this,c.push(a))};f.Oe=function(a,b){return new S(-this.d-b,this.P+a)};f.ie=function(a,b){return a>-this.d||a<-this.d||b<this.P||b>=this.R?!1:!0};f.Te=function(a,b){return b<this.P?new S(-this.d,this.P):b>this.R?new S(-this.d,this.R):new S(-this.d,b)};
f.Bf=function(a,b){if(-this.d>=a.M||-this.d<a.C||this.P>=a.w||this.R<=a.m)return!1;this.P<a.m&&b.push(this.X(this.d,this.P,a.m));this.R>a.w&&b.push(this.X(this.d,a.w,this.R));return!0};f.kg=function(a,b){-this.d>=a.M||-this.d<a.C||this.P>=a.w||this.R<=a.m||b.push(this.X(this.d,Math.max(this.P,a.m),Math.min(this.R,a.w)))};f.Bg=function(){return new lh(-this.d,-this.d,this.P,this.R)};
f.rotate=function(a){switch(a){case 0:return(new nh).raw(this.d,this.P,this.R);case 1:return(new oh).raw(this.d,this.P,this.R);case 2:return(new ph).raw(this.d,this.P,this.R);case 3:return(new mh).raw(this.d,this.P,this.R)}};f.Ff=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new nh).raw(this.d-a,this.P+b,this.R+b)};f=oh.prototype;f.rb=function(){return 2};f.$b=function(){return-this.P};f.Zb=function(){return-this.d};f.Cb=function(){return-this.R};f.Bb=function(){return-this.d};
f.raw=mh.prototype.raw;f.Ee=mh.prototype.Ee;f.X=function(a,b,c){a=new oh(-a,-b,-c);a.source=this.source;return a};f.dg=function(a,b,c){if(!this.zg){var d=new S(-this.P-a,-this.d+b);d.source=this;c.push(d)}this.Zf||(a=new S(-this.R+a,-this.d+b),a.source=this,c.push(a))};f.Oe=function(a,b){return new S(-this.P-a,-this.d-b)};f.ie=function(a,b){return b>-this.d||b<-this.d||a>-this.P||a<=-this.R?!1:!0};f.Te=function(a){return a<-this.R?new S(-this.R,-this.d):a>-this.P?new S(-this.P,-this.d):new S(a,-this.d)};
f.Bf=function(a,b){if(-this.d>=a.w||-this.d<a.m||-this.R>=a.M||-this.P<=a.C)return!1;-this.R<a.C&&b.push(this.X(this.d,-a.C,this.R));-this.P>a.M&&b.push(this.X(this.d,this.P,-a.M));return!0};f.kg=function(a,b){-this.d>=a.w||-this.d<a.m||-this.R>=a.M||-this.P<=a.C||b.push(this.X(this.d,Math.max(this.P,-a.M),Math.min(this.R,-a.C)))};f.Bg=function(){return new lh(-this.R,-this.P,-this.d,-this.d)};
f.rotate=function(a){switch(a){case 0:return(new oh).raw(this.d,this.P,this.R);case 1:return(new ph).raw(this.d,this.P,this.R);case 2:return(new mh).raw(this.d,this.P,this.R);case 3:return(new nh).raw(this.d,this.P,this.R)}};f.Ff=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new oh).raw(this.d-b,this.P-a,this.R-a)};f=ph.prototype;f.rb=function(){return 3};f.$b=function(){return this.d};f.Zb=function(){return-this.P};f.Cb=function(){return this.d};f.Bb=function(){return-this.R};
f.raw=mh.prototype.raw;f.Ee=mh.prototype.Ee;f.X=function(a,b,c){a=new ph(a,-b,-c);a.source=this.source;return a};f.dg=function(a,b,c){if(!this.zg){var d=new S(this.d-a,-this.P-b);d.source=this;c.push(d)}this.Zf||(a=new S(this.d-a,-this.R+b),a.source=this,c.push(a))};f.Oe=function(a,b){return new S(this.d+b,-this.P-a)};f.ie=function(a,b){return a>this.d||a<this.d||b>-this.P||b<=-this.R?!1:!0};f.Te=function(a,b){return b<-this.R?new S(this.d,-this.R):b>-this.P?new S(this.d,-this.P):new S(this.d,b)};
f.Bf=function(a,b){if(this.d>a.M||this.d<=a.C||-this.R>=a.w||-this.P<=a.m)return!1;-this.R<a.m&&b.push(this.X(this.d,-a.m,this.R));-this.P>a.w&&b.push(this.X(this.d,this.P,-a.w));return!0};f.kg=function(a,b){this.d>a.M||this.d<=a.C||-this.R>=a.w||-this.P<=a.m||b.push(this.X(this.d,Math.max(this.P,-a.w),Math.min(this.R,-a.m)))};f.Bg=function(){return new lh(this.d,this.d,-this.R,-this.P)};
f.rotate=function(a){switch(a){case 0:return(new ph).raw(this.d,this.P,this.R);case 1:return(new mh).raw(this.d,this.P,this.R);case 2:return(new nh).raw(this.d,this.P,this.R);case 3:return(new oh).raw(this.d,this.P,this.R)}};f.Ff=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new ph).raw(this.d+a,this.P-b,this.R-b)};var zh=new Lb;function Ah(a){return Math.floor(E(zh)*a)}function Bh(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return b[Ah(b.length)]}
function Ch(a){for(var b=0;b<a.length;b++){var c=Ah(a.length-b),d=a[b];a[b]=a[c];a[c]=d}}console.log("Arch.rand.setSeed("+zh.sk+");");function Dh(){for(var a=[],b=q(Pg),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next())a=a.concat(d.value)}return a}function Eh(){for(var a=[],b=q(Pg),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;for(var e=q(d.Nc),h=e.next();!h.done;h=e.next())h=h.value,h.La==d&&a.push(h)}}return a}
function Fh(a,b,c){var d=[];a=q(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.translate(b,c));return d}function Gh(a,b){var c=[];a=q(a);for(var d=a.next();!d.done;d=a.next())c.push(d.value.Ff(b));return c}function Hh(a,b,c){a:{switch((4-c)%4){case 0:a=new S(a,b);break a;case 1:a=new S(-b,a);break a;case 2:a=new S(-a,-b);break a;case 3:a=new S(b,-a);break a}a=void 0}return a}function Ih(a,b,c){var d=[];a=q(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.expand(b,c));return d}
function Jh(a,b){var c=[];a=q(a);for(var d=a.next();!d.done;d=a.next())c.push(vh(d.value,b));return c}function Kh(a,b){b=q(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=a.length,e=0;e<d;e++)a[e].Bf(c,a)&&(a.splice(e--,1),d--)}return a}function Lh(a,b){for(var c=new lh,d=q(a),e=d.next();!e.done;e=d.next())sh(c,e.value);d=q(b);for(e=d.next();!e.done;e=d.next())sh(c,e.value);c=[c];Kh(c,b);return Kh(a.slice(),c)}
function Mh(a,b){b=void 0===b?0:b;for(var c=new lh,d=q(a),e=d.next();!e.done;e=d.next())sh(c,e.value);b=[c.expand(b,b)];Kh(b,a);return b}function Nh(a){var b=[];b.cmp=function(h,g){return h.m<g.m?-1:h.m>g.m?1:h.C<g.C?-1:h.C>g.C?1:0};a=q(a);for(var c=a.next();!c.done;c=a.next())kb(b,c.value);for(a=0;a<b.length;a++){c=b[a];var d=ib(b,{m:c.w,C:c.C}),e=b[d];e&&e.m==c.w&&e.C==c.C&&e.M==c.M&&(b.splice(d,1),b[a--]=c.X(c.C,c.M,c.m,e.w))}return b}
function Oh(a,b,c){var d=Infinity;c=q(c);for(var e=c.next();!e.done;e=c.next())if(e=e.value,!(e.m>=b||e.w<=b||e.M<=a||e.C>=d)){if(e.C<a){d=a;break}d=e.C}return d}function Ph(a){for(var b=[],c=q(a),d=c.next();!d.done;d=c.next())th(d.value,b);Kh(b,a);return b}function Qh(a){a.bound=new dd;for(var b=0;b<a.length;b++){var c=a[b].Ee();a.bound.Ka(c.A,c.u);a[b]=c}}
function Rh(a){var b=[];b.cmp=function(m,n){return m.x<n.x?-1:m.x>n.x?1:m.y<n.y?-1:m.y>n.y?1:m.type<n.type?-1:m.type>n.type?1:0};a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,kb(b,{x:c.$b(),y:c.Zb(),type:c.rb(),S:c});a=[];c=[];for(var d={};b.length;){var e=!1;d.Kc=[];d.Kc.bound=new lh;d.gc=null;d.Nb=null;var h=function(m){return function(n){n.S.rb()==m.Nb.rb()?m.Nb.R+=n.S.R-n.S.P:((m.Nb.rb()+3&3)==n.S.rb()&&(m.Nb.Zf=!0,n.S.zg=!0),m.Kc.push(n.S),m.Nb=n.S);m.gc=new S(m.Nb.Cb(),m.Nb.Bb());m.gc.type=
-1;rh(m.Kc.bound,m.gc.x,m.gc.y)}}(d);d.Nb=b.shift().S;d.Nb.rb()&&(e=!0,d.Nb.zg=!0);d.Kc.push(d.Nb);d.gc=new S(d.Nb.Cb(),d.Nb.Bb());d.gc.type=-1;for(rh(d.Kc.bound,d.gc.x,d.gc.y);;){var g=[],k=ib(b,d.gc),l=b[k];if(!l)break;if(l.x!=d.gc.x)break;if(l.y!=d.gc.y)break;g[0]=k;g[1]=k;k++;(l=b[k])&&l.x==d.gc.x&&l.y==d.gc.y&&(g[1]=k);switch(d.Nb.rb()){case 0:k=g[0];break;case 1:k=g[1];break;case 2:k=g[1];break;case 3:k=g[0]}h(b.splice(k,1)[0])}e?(d.Kc[d.Kc.length-1].Zf=!0,c.push(d.Kc)):(d.Kc.cb=[],a.push(d.Kc));
d={Nb:d.Nb,Kc:d.Kc,gc:d.gc}}b=q(c);for(c=b.next();!c.done;c=b.next())Sh(c.value,a);return a}function Th(a,b){b||(b=[]);a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(c),c.cb&&Th(c.cb,b);return b}
function Sh(a,b){var c=null;b=q(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.C<=d.bound.C||a.bound.m<=d.bound.m||a.bound.M>=d.bound.M||a.bound.w>=d.bound.w)){if(c){if(d.bound.C<=c.bound.C)continue;if(d.bound.m<=c.bound.m)continue;if(d.bound.M>=c.bound.M)continue;if(d.bound.w>=c.bound.w)continue}c=d}c&&c.cb.push(a)}
function Uh(a){var b=162500,c=162500;b=void 0===b?0:b;c=void 0===c?0:c;var d=Ph(a);a=[];d=q(d);for(var e=d.next();!e.done;e=d.next())e.value.dg(b,c,a);d=Dh();d=q(d);for(e=d.next();!e.done;e=d.next()){e=e.value;for(var h=0;h<a.length;h++)e.expand(b,c).ie(a[h].x,a[h].y)&&a.splice(h--,1)}return a}
function Vh(){function a(e,h){var g=25E3*Math.floor(Ah(8)+12),k=25E3*Math.floor(Ah(8)+12),l=Dh(),m=[];var n=Ih(e,g+h,k+h);var r=Ph(n);n=Ih(l,g+h,k+h);r=Kh(r,n);n=q(r);for(r=n.next();!r.done;r=n.next())r.value.dg(0,0,m);if(!m.length)return null;n=[];n.cmp=function(p,t){return p.Wd>t.Wd?-1:p.Wd<t.Wd?1:p.x<t.x?-1:p.x>t.x?1:p.z<t.z?-1:p.z>t.z?1:0};m=q(m);for(r=m.next();!r.done;r=m.next())r=r.value,r.Wd=0==h?yh(e,r.x,r.y):yh(l,r.x,r.y),kb(n,r);e=n[0];return new lh(e.x-g,e.x+g,e.y-k,e.y+k)}if(Yg){if(Yg.eh){if(Yg.length)var b=
a(Yg,0);else b=0,Ug.ia!=Xg&&(b=Ah(4)?0:325E3),b=a(Ug,b);if(!b)return console.error("could not place pad"),!1;b.platform=Yg;Yg.push(b);Yg.eh--;return!0}if(Ug){b=Ug;var c=Yg;Wh();var d=Xh(b,c);d||(d=Yh(b,c));if(!d)return Yg.length=0,Yg.eh=Bh(1,1,1,2,3),!0}Ug=Yg;Yg=null;return!0}if(Xg){if(Xg.di)return Yg=[],Yg.index=Tg++,Yg.Nc=[],Yg.eh=Bh(1,1,1,2,3),Yg.y=Ug.ia==Xg?Ug.y+5E4*Bh(-2,-1,1,2):Ug.y+5E4*Bh(-2,-1,0,0,0,1,2),Yg.y=Math.min(Yg.y,-4E5),Zh(Yg,Xg),Xg.di--,!0;$h();Xg=null;Rg++;Wh();Dh();ai();if(Rg<
ag+6)return!0;bi();return!0}Xg=[];ci.call(Xg);Xg.di=Bh(1,1,1,2,2);Xg.index=Pg.length+Qg;Pg.push(Xg);0==Xg.index%5&&(Xg.be=!0);return!0}
function bi(){Zg=Eh();if(Og.Rk){for(var a=q(Zg),b=a.next();!b.done;b=a.next())b.value.Hi();$g=[];ah=[];b=q(Pg);for(a=b.next();!a.done;a=b.next()){var c=[];a=q(a.value);for(var d=a.next();!d.done;d=a.next())d=d.value,c=c.concat(d),$g=$g.concat(Ph(d));ah=ah.concat(Ph(c))}}else{b=q(Pg);for(a=b.next();!a.done;a=b.next()){a=a.value;if(300>u.l-a.ea.Aa)break;if(a.ob>=bg-4)break;a.Ge=!0;d=q(a.fb);for(c=d.next();!c.done;c=d.next())di(c.value);a=q(a);for(d=a.next();!d.done;d=a.next())for(d=q(d.value.Nc),c=
d.next();!c.done;c=d.next())c.value.Lh()}cf.length=0;df=Qg;b=q(Pg);for(a=b.next();!a.done;a=b.next()){a=a.value;if(a.ob>ag+2)break;cf.push(a)}b=q(cf);for(a=b.next();!a.done;a=b.next())if(a=a.value,!(a.ob<=Sg))for(a.h=a.floor,a.ed||(a.be?a.ed=new J(.8,.8,.8):(d=Bh(.0125,.0625,.1125,.175),a.ed=new J(d,d,d))),c=q(a),d=c.next();!d.done;d=c.next()){d=d.value;d.Yi=[];for(var e=q(d),h=e.next();!h.done;h=e.next()){h=h.value;var g=[];th(h,g);Qh(g);d.Yi.push(g);h.z=.5*h.C+.5*h.M;h.x=.5*h.m+.5*h.w;h.y=h.platform.y;
h.C<a.bound.C&&(a.bound.C=h.C);h.M>a.bound.M&&(a.bound.M=h.M);h.m<a.bound.m&&(a.bound.m=h.m);h.w>a.bound.w&&(a.bound.w=h.w)}}b=q(cf);for(a=b.next();!a.done;a=b.next())if(a=a.value,!(a.ob<=Sg)){a.bound.C-=1E5;a.bound.M+=1E5;a.bound.m-=1E5;a.bound.w+=1E5;a.be&&(a.ua=0);c=[];e=q(a);for(d=e.next();!d.done;d=e.next())c.push.apply(c,ca(d.value));e=c;e=Ih(e,9375,9375);d=[];e=q(e);for(h=e.next();!h.done;h=e.next()){h=h.value;g=d.length;for(var k=0;k<g;k++)d[k].Bf(h,d)&&(d.splice(k--,1),g--);d.push(h)}e=d;
a.ak=[];e=q(e);for(d=e.next();!d.done;d=e.next())h=[],th(d.value,h),Qh(h),a.ak.push(h);d=c;d=Mh(d,1);d=Ih(d,9375,9375);d=Mh(d,0);a.Zi=[];c=q(d);for(d=c.next();!d.done;d=c.next())e=[],th(d.value,e),Qh(e),a.Zi.push(e)}b=q(cf);for(a=b.next();!a.done;a=b.next())if(a=a.value,!(a.ob<=Sg))for(ei(a),c=a,a=fi(Infinity,c.index,u.v.ba.get("HandRail01"),dh),a.facing=0,a.za=2,d=c.ye,c=q(c.ek),e=c.next();!e.done;e=c.next())for(e=e.value,h=q(e),g=h.next();!g.done;g=h.next()){g=g.value;var l=[];k=(g.R-g.P)/2E5;for(var m=
Math.round(k),n=.5*(k-m);.125>n;)--m,n+=.5;if(!(0>m))for(l.push({Mb:.5,Ef:0,length:n}),l.push({Mb:1,Ef:0,length:k-2*n}),l.push({Mb:.5,Ef:1-n,length:n}),k=0,m=new S(g.$b(),g.Zb()),l=q(l),n=l.next();!n.done;n=l.next()){n=n.value;k+=2E5*n.length;var r=g.Oe(k,0),p=[];var t=new Fd(m.y,e.y,m.x);Jd(t,n.Ef,n.Mb);Id(t,d);p.push(t);t=new Fd(r.y,e.y,r.x);Jd(t,n.Ef+n.length,n.Mb);Id(t,d);p.push(t);t=new Fd(r.y,e.y+112500,r.x);Jd(t,n.Ef+n.length,n.Mb-.5);Id(t,d);p.push(t);t=new Fd(m.y,e.y+112500,m.x);Jd(t,n.Ef,
n.Mb-.5);Id(t,d);p.push(t);a.rd.push(p);m=r}}c=q(cf);for(a=c.next();!a.done;a=c.next())if(b=a.value,!(b.ob<=Sg))for(a=q(b),d=a.next();!d.done;d=a.next())for(d=q(d.value.Nc),b=d.next();!b.done;b=d.next())b.value.Fh();b=q(cf);for(a=b.next();!a.done;a=b.next())if(a=a.value,!(a.ob<=Sg))for(a=q(a.fb),d=a.next();!d.done;d=a.next())d.value.stroke();c=q(cf);for(a=c.next();!a.done;a=c.next())if(b=a.value,!(b.ob<=Sg))for(a=q(b),d=a.next();!d.done;d=a.next())for(d=q(d.value.Nc),b=d.next();!b.done;b=d.next())b.value.li()}$f++}
function Xh(a,b){Zg=Eh();var c=[];if(a.y!=b.y){if(a.Cc)for(var d,e=q(a.Cc),h=e.next();!h.done;h=e.next())h=h.value,h.target==b&&(d||(d=gi(a)),c.push(hi(a,b,d,h.direction)));if(b.Cc){var g;d=q(b.Cc);for(h=d.next();!h.done;h=d.next())h=h.value,h.target==a&&(g||(g=gi(b)),c.push(hi(b,a,g,h.direction)))}a.Cc||b.Cc||(c.push(ii(a,b)),c.push(ii(b,a)),!Ah(2)&&c.reverse());a=q(c);for(b=a.next();!b.done;b=a.next())for(b=b.value,Ch(b),c=q(b),h=c.next();!h.done;h=c.next())if(b=h.value,ji(b))return b.La.Nc.push(b),
b.jj&&(a=b,h=a.jj,c=[],c.index=Tg++,c.Nc=[],c.y=a.tb.y,Zh(c,a.La.ia),h.platform=c,c.push(h),Kh(a.La,[h]),Wh(),Xh(c,a.tb)),b;return null}if(a.ia!=b.ia){h=ki(a,b,112500);Ch(h);g=[];c=q(a);for(d=c.next();!d.done;d=c.next())th(d.value,g);c=[];g=q(g);for(d=g.next();!d.done;d=g.next()){d=d.value;e=q(b);for(var k=e.next();!k.done;k=e.next())d.kg(k.value,c)}for(g=[];c.length;){d=c.pop();for(e=0;e<c.length;e++)k=c[e],d.rb()==k.rb()&&d.d==k.d&&(d.R==k.P?(c.splice(e,1),d.R=k.R,e=-1):d.P==k.R&&(c.splice(e,1),
d.P=k.P,e=-1));225E3>d.R-d.P||g.push(d)}c=[];g=q(g);for(d=g.next();!d.done;d=g.next())c.push(new li(d.value,a,b));Ch(c);c=Ah(5)?c.concat(h):h.concat(c);c=q(c);for(h=c.next();!h.done;h=c.next())if(h=h.value,ji(h))return a.Nc.push(h),b.Nc.push(h),mi(a.ia,b.ia,b.y,b.y+225E3),h;return null}return!0}
function Yh(a,b){function c(w,y,B){-y.d<=w.P||-y.d>w.R||y.P>=w.d||y.R<w.d||(B=[(new mh).raw(w.d,w.P,-y.d).rotate(B),(new ph).raw(-y.d,-w.d,-y.P).rotate(B)],B.lh=w.source,B.$f=y.source,B.Na=B[0].R-B[0].P+(B[1].R-B[1].P),kb(h,B))}function d(w,y,B){w.d!=-y.d||-y.P<=w.P||-y.R>w.R||(B=[(new mh).raw(w.d,w.P,-y.P).rotate(B)],B.lh=w.source,B.$f=y.source,B.Na=B[0].R-B[0].P,kb(h,B))}var e=Ih(Dh(),162500,162500),h=[];h.cmp=function(w,y){return w.Na<y.Na?-1:1};if(a==b){var g=Uh(a);a=[[],[],[],[]];for(var k=0;4>
k;k++){var l=Gh(e,k),m=q(g);for(b=m.next();!b.done;b=m.next()){var n=b.value;b=n.source.source;n=Hh(n.x,n.y,k);var r=n.y,p=n.x;n=Oh(n.x,n.y,l);n<=p||(r=new mh(r,p,n),r.source=b,a[k].push(r))}}for(e=0;4>e;e++){g=void 0;g=(e+1)%4;k=q(a[e]);for(b=k.next();!b.done;b=k.next())for(l=b.value,m=q(a[g]),b=m.next();!b.done;b=m.next())c(l,b.value,e,g);if(!(2<=e))for(g=e+2,k=q(a[e]),b=k.next();!b.done;b=k.next())for(l=b.value,m=q(a[g]),b=m.next();!b.done;b=m.next())d(l,b.value,e,g)}}else{k=Uh(a);l=Uh(b);a=[[],
[],[],[]];g=[[],[],[],[]];for(m=0;4>m;m++){r=Gh(e,m);p=q(k);for(b=p.next();!b.done;b=p.next()){var t=b.value;b=t.source.source;t=Hh(t.x,t.y,m);n=t.y;var z=t.x;t=Oh(t.x,t.y,r);t<=z||(n=new mh(n,z,t),n.source=b,a[m].push(n))}p=q(l);for(b=p.next();!b.done;b=p.next())t=b.value,b=t.source.source,t=Hh(t.x,t.y,m),n=t.y,z=t.x,t=Oh(t.x,t.y,r),t<=z||(n=new mh(n,z,t),n.source=b,g[m].push(n))}for(e=1;4>e;e++){k=void 0;k=(e+1)%4;l=q(a[e]);for(b=l.next();!b.done;b=l.next())for(m=b.value,r=q(g[k]),b=r.next();!b.done;b=
r.next())c(m,b.value,e,k);l=q(g[e]);for(b=l.next();!b.done;b=l.next())for(m=b.value,r=q(a[k]),b=r.next();!b.done;b=r.next())c(m,b.value,e,k);k=(e+2)%4;l=q(a[e]);for(b=l.next();!b.done;b=l.next())for(m=b.value,r=q(g[k]),b=r.next();!b.done;b=r.next())d(m,b.value,e,k)}}for(e=0;e<h.length;e++){b=h[e];a=b[0];g=b[b.length-1];k=b.lh.platform;l=b.$f.platform;m=Math.min(k.y,l.y);r=Math.max(k.y,l.y);if(a==g){if(p=25E3*(Math.floor((a.R-a.P-325E3)/5E4)-1),0>p&&(p=0),Math.abs(l.y-k.y)>p){h.splice(e--,1);continue}}else if(p=
25E3*(Math.floor((a.R-a.P-325E3)/5E4)-1),0>p&&(p=0),m=Math.max(m,k.y-p),r=Math.min(r,k.y+p),p=25E3*(Math.floor((g.R-g.P-325E3)/5E4)-1),0>p&&(p=0),m=Math.max(m,l.y-p),r=Math.min(r,l.y+p),m>r){h.splice(e--,1);continue}b.y=Bh(m,r);b.Cc=[];Math.abs(k.y-b.y)/25E3&&b.Cc.push({direction:(a.rb()+2+3)%4,target:k});Math.abs(l.y-b.y)/25E3&&b.Cc.push({direction:(g.rb()+3)%4,target:l});b.Cc.length||delete b.Cc}e=h[Ah(h.length/10)];if(!e)return!1;a=[];ci.call(a);a.index=Pg.length+Qg;Pg.push(a);0==Xg.index%5&&(Xg.be=
!0);b=[];b.index=Tg++;b.Nc=[];b.y=e.y;e.Cc&&(b.Cc=e.Cc);Zh(b,a);a=q(e);for(g=a.next();!g.done;g=a.next())g=g.value.Bg().expand(162500,162500),g.platform=b,b.push(g);Wh();b.y==e.$f.platform.y?(Xh(e.lh.platform,b),Xh(b,e.$f.platform)):(Xh(b,e.$f.platform),Xh(e.lh.platform,b));return e}
function ki(a,b,c){a.Sd=ni(a,c);b.Sd=ni(b,c);var d=[],e=[],h=c+37500,g=Fh(a.Sd,h,0),k=Fh(b.Sd,-h,0);k=Lh(g,k);var l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=0;e=e.concat(k);g=Fh(a.Sd,0,h);k=Fh(b.Sd,0,-h);k=Lh(g,k);l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=1;e=e.concat(k);g=Fh(a.Sd,-h,0);k=Fh(b.Sd,h,0);k=Lh(g,k);l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=2;e=e.concat(k);g=Fh(a.Sd,0,-h);h=Fh(b.Sd,0,h);h=Lh(g,h);k=q(h);for(g=k.next();!g.done;g=k.next())g.value.direction=
3;e=e.concat(h);Ch(e);h=new lh(-9375,9375,-c,c);e=q(e);for(g=e.next();!g.done;g=e.next()){g=g.value;k=h.Ff(g.direction);l=q([{z:g.C,x:g.m},{z:g.M-1,x:g.w-1}]);for(var m=l.next();!m.done;m=l.next())m=m.value,m=k.translate(m.z,m.x),m.y=a.y,m.direction=g.direction,d.push(new oi(m,c,a,b))}return d}function ni(a,b){b+=37500;var c=Jh(a,new lh(0,1,0,1));a=Mh(c,1);a=Jh(a,new lh(-b,b,-b,b));Kh(c,a);return c}
function $h(){for(var a=Xg,b=new lh,c=q(a),d=c.next();!d.done;d=c.next())for(var e=q(d.value),h=e.next();!h.done;h=e.next())sh(b,h.value);c=75E3;var g=b.M-b.C;d=b.w-b.m;e=Math.round(g/1E6)-1;h=Math.round(d/1E6)-1;g=b.C+.5*(g-1E6*(e-1));b=b.m+.5*(d-1E6*(h-1));var k=[],l=q(a);for(d=l.next();!d.done;d=l.next())k=k.concat(d.value);k=Mh(k,1);k=Ih(k,1E5,1E5);c-=9375;for(l=0;l<e;l++){for(var m=b,n={},r=0;r<h;n={Fg:n.Fg},r++){d=function(t){return function(){for(var z=q(k),w=z.next();!w.done;w=z.next())if(uh(t.Fg,
w.value))return!1;return!0}}(n);n.Fg=new lh(g-c,g+c,m-c,m+c);if(d()){var p=q(a);for(d=p.next();!d.done;d=p.next())Kh(d.value,[n.Fg])}m+=1E6}g+=1E6}}function ii(a,b){for(var c=gi(a),d=[],e=0;4>e;e++)d=d.concat(hi(a,b,c,e));return d}
function hi(a,b,c,d){var e=25E3*Math.ceil(Math.abs(b.y-a.y)/25E3),h=a.ia!=b.ia?325E3:0,g=function(l,m,n){function r(w){for(var y=0;y<w.length;y++)for(var B=w[y],A=y+1;A<w.length;A++){var D=w[A];if(B.C==D.C&&B.M==D.M){if(D.w==B.m){w.splice(A--,1);B.m=D.m;y--;break}if(D.m==B.w){w.splice(A--,1);B.w=D.w;y--;break}}}w=q(w);for(y=w.next();!y.done;y=w.next())y=y.value,y.m=y.w-1,y.direction=d}var p=Mh(l,1);p=Jh(p,new lh(-162499,162500,-e-h+1,e+162500+162500));l=p=Mh(p,0);p=Jh(n,new lh(0,0,-e-h+1,e));p=Mh(p,
1);p=Jh(p,new lh(-162500,162501,0,0));l=p=Lh(l,p);p=Mh(m,1);p=Jh(p,new lh(-162499,162500,-162499,162500));p=Mh(p,0);n=[];m=Lh(l,Fh(p,0,-e-h-162500));r(m);for(var t=q(m),z=t.next();!z.done;z=t.next())z.value.type=1;n=n.concat(m);if(0!=h){m=Lh(l,Fh(p,-325E3,-e-162500));r(m);t=q(m);for(z=t.next();!z.done;z=t.next())z.value.type=0;n=n.concat(m);m=Lh(l,Fh(p,325E3,-e-162500));r(m);l=q(m);for(z=l.next();!z.done;z=l.next())z.value.type=2;n=n.concat(m)}return n}(Gh(a,d),Gh(b,d),Gh(c,d));c=[];g=q(g);for(var k=
g.next();!k.done;k=g.next())c.push(new pi(k.value,e,h,a,b));return c}function gi(a){for(var b=a.slice(),c=q(a.Ae),d=c.next();!d.done;d=c.next())d=d.value,d=d.Ea.platform!=a?d.Ea.platform:d.ga.platform,d.ia==a.ia&&(b=b.concat(d));return b}
function Wh(){for(var a=[],b=q(Pg),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;d.Ae=[];for(var e=q(d),h=e.next();!h.done;h=e.next())h.value.Ae=[];a=a.concat(d)}}for(b=0;b<a.length;b++)for(c=a[b],d=b+1;d<a.length;d++)if(e=a[d],h=wh(c,e))h.Ea=c,h.ga=e,c.Ae.push(h),e.Ae.push(h),c.platform!=e.platform&&(c.platform.Ae.push(h),e.platform.Ae.push(h))}
function ai(){Zg=Eh();var a=q(Pg),b=a.next();a:for(;!b.done;b=a.next())if(b=b.value,!b.Fk){b.Fk=!0;b=q(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=q(c.Ae),e=d.next();!e.done;e=d.next())if(e=e.value,e=e.Ea.platform!=c?e.Ea.platform:e.ga.platform,!(e.ia.ob<=Sg||c.index<=e.index||c.ia==e.ia)){var h=ki(c,e,87500);Ch(h);h=q(h);for(var g=h.next();!g.done;g=h.next())if(g=g.value,ji(g)){g.Pc=!0;c.Nc.push(g);e.Nc.push(g);mi(c.ia,e.ia,Infinity,g.y+87500+125E3);b=c.ia;c=e.ia.ob-b.ob-1;if(!(1>
c)){for(d=b.ob;b;)b.ob=Math.max(d,b.ob-c),b=Pg[b.index+1-Qg];Rg=Math.max(d,Rg-c)}continue a}}}}}function ci(){this.ob=Rg+1;this.ek=[];this.fb=[];this.dc=[];this.bound=new ge;this.ua=-Infinity;this.floor=Infinity;this.h=-Infinity;this.ea={};this.ea.Aa=-2147483648;this.ea.pb=new J(1,1,1);this.Ic=0;this.xb=new J;this.cells=new tb(Jb)}function Zh(a,b){b.push(a);a.ia=b;1==b.length&&(b.ua=a.y+25E4+25E3*Ah(10));a.y<b.floor&&(b.floor=a.y);a.y+25E4>b.ua&&(b.ua=a.y+25E4);b.ua=Math.min(-18750,b.ua)}
function oi(a,b,c,d){this.kb=a;this.direction=a.direction;this.a=b;this.La=c;this.tb=d;this.z=.5*a.C+.5*a.M;this.x=.5*a.m+.5*a.w;this.y=Math.max(c.y,d.y);this.zd=[];this.Ke=[];this.Sc=[];this.fd=[];this.fb=[];c=new lh(a.C,a.M,a.m,a.w);c.h=a.y;c.o=c.h+225E3;this.Sc.push(c);this.Ke.push(c);b=new lh(2*-b,2*b,-b,b);b=b.rotate(this.direction);b=b.translate(this.z,this.x);b.o=a.y;b.h=b.o-18750;this.Sc.push(b);b=new lh(b.C,b.M,b.m,b.w);b.h=a.y;b.o=b.h+225E3;this.fd.push(b)}oi.prototype.Hi=function(){Wg.push(this.kb)};
oi.prototype.Fh=function(){if(!this.fb.length){this.Fc=0;Wg.push(this.kb);var a=new mh(0,0,1);a=a.rotate(this.direction);this.ta=new O(a.$b()+this.z,a.Zb()+this.x,a.Cb()+this.z,a.Bb()+this.x);a=new qi;a.add=!0;a.Eb=0;a.color=kh;this.Pc?(a.h=this.y+87500,a.o=a.h+125E3):(a.h=this.y,a.o=this.y+225E3);for(var b=[new S(0,-this.a),new S(0,this.a),new S(-9375,this.a),new S(-9375,-this.a)],c=[new S(0,this.a),new S(0,-this.a),new S(9375,-this.a),new S(9375,this.a)],d=0;d<b.length;d++)b[d]=this.ta.jb(b[d].x,
b[d].y);for(d=0;d<c.length;d++)c[d]=this.ta.jb(c[d].x,c[d].y);a.aa=this.La.ia.index;ri(a,b);this.fb.push(a);a=a.X();a.aa=this.tb.ia.index;ri(a,c);this.fb.push(a);this.cc=new Rf(new O(b[0].x,b[0].y,b[1].x,b[1].y),a.h,a.o);this.rc=new Rf(new O(c[0].x,c[0].y,c[1].x,c[1].y),a.h,a.o);this.cc.Ec=this.rc;this.rc.Ec=this.cc;this.cc.aa=this.La.ia.index;this.rc.aa=this.tb.ia.index;this.cc.Pc=this.Pc;this.rc.Pc=this.Pc}};
oi.prototype.li=function(){if(0==this.Fc){for(var a=q(this.fb),b=a.next();!b.done;b=a.next())b.value.stroke();this.Fc=1}1==this.Fc&&ef(this.La.ia.index)&&ef(this.tb.ia.index)&&(this.La.ia.dc.push(this.cc),this.tb.ia.dc.push(this.rc),this.Pc?this.Rh=new si(this.ta,this.y+87500,this.La.ia,this.tb.ia):this.La.ia.be!=this.tb.ia.be&&(this.Rh=new ti(this.ta,this.y,this.cc,this.rc,this.La.ia,this.tb.ia)),this.Fc=2)};
oi.prototype.Lh=function(){if(!this.Ge){for(var a=q(this.fb),b=a.next();!b.done;b=a.next())di(b.value);this.Rh&&this.Rh.remove();this.Ge=!0}};
function li(a,b,c){var d=.5*(a.R-a.P)-9375,e=a.Bg();this.direction=(a.rb()+3)%4;this.a=d;this.kb=e;this.La=b;this.tb=c;this.z=.5*e.C+.5*e.M;this.x=.5*e.m+.5*e.w;this.y=Math.max(b.y,c.y);e.y=this.y;this.zd=[];this.Ke=[];this.Sc=[];this.fd=[];this.fb=[];a=new lh(e.C,e.M,e.m,e.w);a.h=e.y;a.o=a.h+225E3;this.Sc.push(a);this.Ke.push(a);d=new lh(-225E3,225E3,-d,d);d=d.rotate(this.direction);d=d.translate(this.z,this.x);d.o=e.y;d.h=d.o-18750;this.Sc.push(d);d=new lh(d.C,d.M,d.m,d.w);d.h=e.y;d.o=d.h+225E3;
this.fd.push(d)}li.prototype.Hi=function(){Wg.push(this.kb)};
li.prototype.Fh=function(){if(!this.fb.length){this.Fc=0;Wg.push(this.kb);var a=new mh(0,0,1);a=a.rotate(this.direction);this.ta=new O(a.$b()+this.z,a.Zb()+this.x,a.Cb()+this.z,a.Bb()+this.x);a=new qi;a.add=!0;a.Eb=0;a.color=kh;this.Pc?(a.h=this.y+87500,a.o=a.h+125E3):(a.h=this.y,a.o=Math.min(this.La.ia.ua,this.tb.ia.ua));for(var b=[new S(0,-this.a),new S(0,this.a),new S(-9375,this.a),new S(-9375,-this.a)],c=[new S(0,this.a),new S(0,-this.a),new S(9375,-this.a),new S(9375,this.a)],d=0;d<b.length;d++)b[d]=
this.ta.jb(b[d].x,b[d].y);for(d=0;d<c.length;d++)c[d]=this.ta.jb(c[d].x,c[d].y);a.aa=this.La.ia.index;ri(a,b);this.fb.push(a);a=a.X();a.aa=this.tb.ia.index;ri(a,c);this.fb.push(a);this.cc=new Rf(new O(b[0].x,b[0].y,b[1].x,b[1].y),a.h,a.o);this.rc=new Rf(new O(c[0].x,c[0].y,c[1].x,c[1].y),a.h,a.o);this.cc.Ec=this.rc;this.rc.Ec=this.cc;this.cc.aa=this.La.ia.index;this.rc.aa=this.tb.ia.index;this.cc.Pc=this.Pc;this.rc.Pc=this.Pc}};
li.prototype.li=function(){if(0==this.Fc){for(var a=q(this.fb),b=a.next();!b.done;b=a.next())b.value.stroke();this.Fc=1}1==this.Fc&&ef(this.La.ia.index)&&ef(this.tb.ia.index)&&(this.La.ia.dc.push(this.cc),this.tb.ia.dc.push(this.rc),this.Fc=2)};li.prototype.Lh=function(){if(!this.Ge){for(var a=q(this.fb),b=a.next();!b.done;b=a.next())di(b.value);this.Ge=!0}};
function pi(a,b,c,d,e){this.kb=a;this.direction=a.direction;this.type=a.type;this.Yc=162500;this.td=b;this.La=d;this.tb=e;var h=Math.min(d.y,e.y),g=Math.max(d.y,e.y);this.zd=[];this.Ke=[];this.Sc=[];this.fd=[];this.fb=[];var k=new lh(-162500,162500,-b,b);k=k.translate(a.C,a.m);k=k.rotate(this.direction);k.h=h-18750;k.o=g;this.zd.push(k);this.Ke.push(k);k=new lh(k.C,k.M,k.m,k.w);k.h=h;k.o=g+2E5;this.fd.push(k);k=new lh(-162500,162500,-b-162500-162500,-b);k=k.translate(a.C,a.m);k=k.rotate(this.direction);
k.h=d.y;k.o=g+2E5;this.fd.push(k);k=new lh(k.C,k.M,k.m,k.w);k.h=h-18750;k.o=d.y;this.zd.push(k);this.Sc.push(k);if(c){d=new lh(-162500,162500,b,b+c);d=d.translate(a.C,a.m);d=d.rotate(this.direction);d.h=e.y;d.o=g+2E5;this.fd.push(d);d=new lh(d.C,d.M,d.m,d.w);d.h=h-18750;d.o=e.y;this.zd.push(d);this.Sc.push(d);this.jj=d;var l;0==this.type?l=new lh(162500,487500,b,b+c):1==this.type?l=new lh(-162500,162500,b+c,b+c+325E3):2==this.type&&(l=new lh(-487500,-162500,b,b+c));l=l.translate(a.C,a.m);l=l.rotate(this.direction);
l.h=e.y;l.o=g+2E5;this.fd.push(l);l=new lh(l.C,l.M,l.m,l.w);l.h=h-18750;l.o=e.y;this.zd.push(l);this.Sc.push(l)}else b=new lh(-162500,162500,b,b+162500),b=b.translate(a.C,a.m),b=b.rotate(this.direction),b.h=e.y,b.o=g+2E5,this.fd.push(b),b=new lh(b.C,b.M,b.m,b.w),b.h=h-18750,b.o=e.y,this.zd.push(b),this.Sc.push(b)}
pi.prototype.Hi=function(){var a=(this.tb.y-this.La.y)/25E3;if(this.tb.y>this.La.y)for(var b=0;b<=a;b++){var c=new mh(this.kb.m-this.td+5E4*b,this.kb.C-this.Yc,this.kb.C+this.Yc);c=c.rotate(this.direction);c.y=this.La.y+25E3*b;Vg.push(c)}else for(a=-a,b=0;b<=a;b++)c=new mh(this.kb.m-this.td+5E4*b,this.kb.C-this.Yc,this.kb.C+this.Yc),c=c.rotate(this.direction),c.y=this.La.y-25E3*b,Vg.push(c)};
pi.prototype.Fh=function(){if(!this.fb.length){this.Fc=0;var a=this.La.ia,b=(this.tb.y-this.La.y)/25E3,c=function(h){return 1!=h.cg?!1:!0};if(this.tb.y>this.La.y)for(c=0;c<b;c++){var d=new lh(this.kb.C-this.Yc,this.kb.C+this.Yc,this.kb.m-this.td+5E4*c,this.kb.m-this.td+5E4*(c+1));d=d.rotate(this.direction);d=[new S(d.C,d.m),new S(d.M,d.m),new S(d.M,d.w),new S(d.C,d.w)];a=new qi;a.add=!1;a.aa=this.La.ia.index;a.Eb=0;a.color=kh;a.h=this.La.y;a.o=this.La.y+25E3*(c+1);ri(a,d);this.fb.push(a)}else for(b=
-b,d=new qi,d.add=!0,d.cg=1,d.aa=this.La.ia.index,d.kf=c,d.df=fh,d.Eb=a.Eb,d.xg=a.h,d.color=a.ye,d.h=this.tb.y,d.o=this.La.y,a=this.zd[0],ri(d,[new S(a.C,a.m),new S(a.M,a.m),new S(a.M,a.w),new S(a.C,a.w)]),this.fb.push(d),d=0;d<b;d++){a=new lh(this.kb.C-this.Yc,this.kb.C+this.Yc,this.kb.m-this.td+5E4*d,this.kb.m-this.td+5E4*(d+1));a=a.rotate(this.direction);a=[new S(a.C,a.m),new S(a.M,a.m),new S(a.M,a.w),new S(a.C,a.w)];var e=new qi;e.add=!1;e.aa=this.La.ia.index;e.kf=c;e.Eb=0;e.color=kh;e.h=this.tb.y;
e.o=this.La.y-25E3*d;ri(e,a);this.fb.push(e)}}};pi.prototype.li=function(){if(0==this.Fc){for(var a=q(this.fb),b=a.next();!b.done;b=a.next())b.value.stroke();this.Fc=2}};pi.prototype.Lh=function(){if(!this.Ge){for(var a=q(this.fb),b=a.next();!b.done;b=a.next())di(b.value);this.Ge=!0}};
function ui(a,b){for(var c=q(a.Sc),d=c.next();!d.done;d=c.next()){var e=d.value,h=q(b.Ke);for(d=h.next();!d.done;d=h.next())if(xh(e,d.value))return!1}c=q(a.Ke);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=q(b.Sc),d=h.next();!d.done;d=h.next())if(xh(e,d.value))return!1;c=q(a.fd);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=q(b.zd),d=h.next();!d.done;d=h.next())if(xh(e,d.value))return!1;a=q(a.zd);for(d=a.next();!d.done;d=a.next())for(c=d.value,e=q(b.fd),d=e.next();!d.done;d=e.next())if(xh(c,
d.value))return!1;return!0}function ji(a){for(var b=q(Zg),c=b.next();!c.done;c=b.next())if(!ui(a,c.value))return!1;return!0}function mi(a,b,c,d){c<a.h&&(a.h=c);d>a.ua&&(a.ua=d);c<b.h&&(b.h=c);d>b.ua&&(b.ua=d);a.ua=Math.min(-18750,a.ua);b.ua=Math.min(-18750,b.ua)}
function ei(a){function b(k){return k.add&&k.aa==this.aa?!0:!1}a.ye=Bh(new T(255,0,64,255),new T(255,255,64,255),new T(0,96,255,255));a.be?a.Eb=75E3:Ah(3)?a.Eb=75E3:a.Eb=a.ua-a.h-75E3;if(a.be){var c=new qi;c.add=!0;c.cg=1;c.aa=a.index;c.kf=function(k){return isNaN(k.index)?!0:!1};c.Eb=a.Eb;c.color=a.ye;c.df=function(){return[]};c.xg=0;c.h=0;c.o=2147483647;var d=[new S(a.bound.C,a.bound.m),new S(a.bound.M,a.bound.m),new S(a.bound.M,a.bound.w),new S(a.bound.C,a.bound.w)];c.ua=null;ri(c,d);a.fb.push(c)}c=
q(a.Zi);for(d=c.next();!d.done;d=c.next()){d=d.value;var e=new qi;e.add=!0;e.cg=1;e.aa=a.index;e.Eb=a.Eb;e.color=a.ye;e.df=fh;e.xg=a.h;e.h=a.h;e.o=a.ua;ri(e,ld(d));a.fb.push(e)}if(a.bk)for(c=q(a.bk),d=c.next();!d.done;d=c.next())d=d.value,e=new qi,e.add=!0,e.cg=1,e.aa=a.index,e.Eb=a.Eb,e.color=a.ye,e.df=fh,e.xg=a.h,e.h=a.h,e.o=a.ua,ri(e,ld(d)),a.fb.push(e);c=q(a);for(d=c.next();!d.done;d=c.next())if(e=d.value,!(e.y<=a.h)){var h=q(e.Yi);for(d=h.next();!d.done;d=h.next()){d=d.value;var g=new qi;g.add=
!1;g.cg=1;g.aa=a.index;g.kf=b;g.Eb=a.Eb;g.color=a.ye;g.df=fh;g.xg=a.floor;g.h=a.h;g.o=e.y;ri(g,ld(d));a.fb.push(g)}}};function vi(a,b){function c(){for(var n=new tb(Rc),r=q(a),p=r.next();!p.done;p=r.next())p=p.value,n.add(p),n.add(p.Y);r=q(a);for(p=r.next();!p.done;p=r.next())if(p=p.value,!p.remove){var t=n.get(p);t!=p&&(p.replace([t]),p.Y.replace([t.Y]))}return n.elements}function d(){for(var n=q(m),r=n.next();!r.done;r=n.next()){r=r.value;var p=r.x&-524288,t=r.y&-524288,z=!1;r.x<=p+256?(r.x=p,z=!0):r.x>=p+524288-256&&(r.x=p+524288,z=!0);r.y<=t+256?(r.y=t,z=!0):r.y>=t+524288-256&&(r.y=t+524288,z=!0);if(z){t=q(r.inputs);
for(p=t.next();!p.done;p=t.next())p.value.Tf=!0;r=q(r.outputs);for(p=r.next();!p.done;p=r.next())p.value.Tf=!0}}}function e(n,r,p){var t=R(r,n.f,n.c),z=R(r,n.A,n.u),w=R(n,r.f,r.c),y=R(n,r.A,r.u);if(-256>w&&256<y&&(-256>t&&256<z||256<t&&-256>z)||256<w&&-256>y&&(-256>t&&256<z||256<t&&-256>z)){t/=t-z;z=1-t;y=new S(Math.round(n.f*z+n.A*t),Math.round(n.c*z+n.u*t));t=n.Ua(n.f,n.c,y.x,y.y);z=n.Ua(y.x,y.y,n.A,n.u);w=r.Ua(r.f,r.c,y.x,y.y);y=r.Ua(y.x,y.y,r.A,r.u);var B=jd(t),A=jd(z),D=jd(w),F=jd(y);n.replace([t,
z]);n.Y.replace([A,B]);r.replace([w,y]);r.Y.replace([F,D]);p.push(t,z,w,y);p.push(B,A,D,F);n=!0}else n=!1;return n}function h(n,r){if(!n.remove){for(var p=q(m),t=p.next();!t.done;t=p.next())if(t=t.value,t.x!=n.f||t.y!=n.c)if(t.x!=n.A||t.y!=n.u){var z=n.Oe(t.x,t.y);if(!(0>=z.x||z.x>=n.length||-256>z.y||256<z.y)){p=n.Ua(n.f,n.c,t.x,t.y);t=n.Ua(t.x,t.y,n.A,n.u);z=n.Ua(p.A,p.u,p.f,p.c);var w=n.Ua(t.A,t.u,t.f,t.c);p.Y=z;z.Y=p;t.Y=w;w.Y=t;n.replace([p,t]);n.Y.replace([w,z]);h(p,r);h(t,r);h(z,r);h(w,r);
return}}r.push(n)}}for(var g=[],k=q(a),l=k.next();!l.done;l=k.next())l=l.value,l.remove||g.push(l);a=g;a=c();b&&(a=wi(null,a,e));var m=new tb(Ld);b=q(a);for(l=b.next();!l.done;l=b.next())g=l.value,k=new S(g.f,g.c),k.inputs=[],k.outputs=[],k.a=1,g.Ea=m.Ka(k),g.Ea.outputs.push(g),g.Ea.a++,k=new S(g.A,g.u),k.inputs=[],k.outputs=[],k.a=1,g.ga=m.Ka(k),g.ga.inputs.push(g),g.ga.a++;m=m.elements;d();m=wi(null,m,function(n,r,p){if(256>(Math.abs(r.x-n.x)+Math.abs(r.y-n.y))*Math.SQRT1_2){var t=new S(n.x*n.a+
r.x*r.a,n.y*n.a+r.y*r.a);t.a=n.a+r.a;t.x/=t.a;t.y/=t.a;t.round();t.inputs=n.inputs.concat(r.inputs);t.outputs=n.outputs.concat(r.outputs);n=q(t.inputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.ga=t,r.Tf=!0;n=q(t.outputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.Ea=t,r.Tf=!0;p.push(t);p=!0}else p=!1;return p});d();for(b=0;b<a.length;b++)g=a[b],g.remove?a.splice(b--,1):g.Ea==g.ga?(g.replace([]),g.Y.replace([]),a.splice(b--,1)):g.Tf&&(k=g.Ua(g.Ea.x,g.Ea.y,g.ga.x,g.ga.y),l=jd(k),g.replace([k]),
g.Y.replace([l]),a.splice(b++,1,k,l)),delete g.Ea,delete g.ga,delete g.Tf;(function(){for(var n=[],r=q(a),p=r.next();!p.done;p=r.next())h(p.value,n);a=n})();return a=c()}
function wi(a,b,c){var d=[];if(a)for(var e=0;e<a.length;e++){var h=a[e];if(h.remove)a.splice(e--,1);else for(var g=0;g<b.length;g++){var k=b[g];if(k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);a.splice(e--,1);break}}}for(e=0;e<b.length;e++)if(h=b[e],h.remove)b.splice(e--,1);else for(g=e+1;g<b.length;g++)if(k=b[g],k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);b.splice(e--,1);break}a&&(b=a.concat(b));return d.length?wi(b,d,c):b};var xi,yi,zi,Ai,Bi=0;
function Ci(){function a(c){function d(y,B,A){return Hh(B,A,y.rb()).y>=y.d}function e(y){y.Na=0;var B=y.f,A=y.c;if(1==y.action)if(y.hb.length){var D=y.hb[0],F=D.$b()-B;D=D.Zb()-A;y.Na+=Math.sqrt(F*F+D*D);F=q(y.hb);for(D=F.next();!D.done;D=F.next())A=D.value,y.Na+=A.R-A.P,B=A.Cb(),A=A.Bb()}else F=y.S.Cb(),D=y.S.Bb(),B=F-B,A=D-A,y.Na+=Math.sqrt(B*B+A*A),B=F,A=D;else if(2==y.action)if(y.hb.length)for(D=y.hb[0],F=D.Cb()-B,D=D.Bb()-A,y.Na+=Math.sqrt(F*F+D*D),F=q(y.hb),D=F.next();!D.done;D=F.next())A=D.value,
y.Na+=A.R-A.P,B=A.$b(),A=A.Zb();else F=y.S.Cb(),D=y.S.Bb(),B=F-B,A=D-A,y.Na+=Math.sqrt(B*B+A*A),B=F,A=D;B=y.A-B;A=y.u-A;y.Na+=Math.sqrt(B*B+A*A)}function h(y){y.Rb=0;for(var B=q(y),A=B.next();!A.done;A=B.next())A=A.value,y.Rb=A.complete?y.Rb+.5*A.Na:y.Rb+A.Na}for(var g=null,k=0,l=0;l<c.length;l++)if(!c[l].complete){k=l;g=c[l];break}if(!g)return!0;if(1==g.action){g.S=g.S.next;l=g.S.Cb();var m=g.S.Bb();if(l==g.f&&m==g.c||l==g.A&&m==g.u)return!1;for(var n=g.S,r=g.S.next;0<k;){var p=c[k-1],t=R(p,l,m);
if(1==p.gb&&0<=t||2==p.gb&&0>=t)p=new O(p.f,p.c,g.A,g.u),p.action=g.action,p.complete=g.complete,p.gb=g.gb,p.S=g.S,p.hb=g.hb,p.max=p,c=c.slice(),c.splice(--k,2,p),kb(zi,c),g=p;else break}p=!d(n,g.A,g.u)&&d(r,g.A,g.u);if(g.hb.length){if(Hh(r.Cb(),r.Bb(),n.rb()).y>n.d||p){l=[];m=g.hb[0];m=new O(g.f,g.c,m.$b(),m.Zb());m.Na=m.length;m.action=0;m.gb=g.action;l.push(m);m=q(g.hb);for(n=m.next();!n.done;n=m.next())n=n.value,n=new O(n.$b(),n.Zb(),n.Cb(),n.Bb()),n.Na=n.length,n.complete=1,n.action=0,n.gb=g.action,
l.push(n);m=g.hb[g.hb.length-1];m=new O(m.Cb(),m.Bb(),g.A,g.u);m.Na=m.length;m.action=0;m.gb=g.gb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(ca(l)));e(g);h(c);kb(zi,c)==c&&kb(xi,c);return!1}g.hb.push(r)}else{t=r.Cb();var z=r.Bb();if(0<=R(g.max,l,m)&&(g.max=new O(g.f,g.c,l,m),Hh(t,z,n.rb()).y<n.d&&!d(r,g.f,g.c))){if(p)return n=[],r=new O(g.f,g.c,l,m),r.Na=r.length,r.action=0,r.gb=g.action,n.push(r),l=new O(l,m,g.A,g.u),l.Na=l.length,l.action=0,l.gb=g.gb,n.push(l),c=c.slice(),c.splice.apply(c,
[k,1].concat(ca(n))),e(g),h(c),kb(zi,c)==c&&kb(xi,c),!1;g.hb.push(r)}}e(g);h(c);kb(xi,c)}else if(2==g.action){g.S=g.S.ib;l=g.S.Cb();m=g.S.Bb();if(l==g.f&&m==g.c||l==g.A&&m==g.u)return!1;n=g.S.next;for(r=g.S;0<k;)if(p=c[k-1],t=R(p,l,m),1==p.gb&&0<=t||2==p.gb&&0>=t)p=new O(p.f,p.c,g.A,g.u),p.action=g.action,p.complete=g.complete,p.gb=g.gb,p.S=g.S,p.hb=g.hb,p.max=p,c=c.slice(),c.splice(--k,2,p),kb(zi,c),g=p;else break;p=!d(n,g.A,g.u)&&d(r,g.A,g.u);if(g.hb.length){if(Hh(r.$b(),r.Zb(),n.rb()).y>n.d||p){l=
[];m=g.hb[0];m=new O(g.f,g.c,m.Cb(),m.Bb());m.Na=m.length;m.action=0;m.gb=g.action;l.push(m);m=q(g.hb);for(n=m.next();!n.done;n=m.next())n=n.value,n=new O(n.Cb(),n.Bb(),n.$b(),n.Zb()),n.Na=n.length,n.complete=1,n.action=0,n.gb=g.action,l.push(n);m=g.hb[g.hb.length-1];m=new O(m.$b(),m.Zb(),g.A,g.u);m.Na=m.length;m.action=0;m.gb=g.gb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(ca(l)));e(g);h(c);kb(zi,c)==c&&kb(xi,c);return!1}g.hb.push(r)}else if(t=r.$b(),z=r.Zb(),0>=R(g.max,l,m)&&(g.max=new O(g.f,
g.c,l,m),Hh(t,z,n.rb()).y<n.d&&!d(r,g.f,g.c))){if(p)return n=[],r=new O(g.f,g.c,l,m),r.Na=r.length,r.action=0,r.gb=g.action,n.push(r),l=new O(l,m,g.A,g.u),l.Na=l.length,l.action=0,l.gb=g.gb,n.push(l),c=c.slice(),c.splice.apply(c,[k,1].concat(ca(n))),e(g),h(c),kb(zi,c)==c&&kb(xi,c),!1;g.hb.push(r)}e(g);h(c);kb(xi,c)}else{l=[];l.cmp=function(y,B){return y.t<B.t?-1:y.t>B.t?1:y.le<B.le?-1:y.le>B.le?1:y.S.next==B.S?-y.le:y.S.ib==B.S?y.le:0};m=q(Ai);for(n=m.next();!n.done;n=m.next())if(n=n.value,!n.disabled)if(r=
Hh(g.f,g.c,n.rb()),p=Hh(g.A,g.u,n.rb()),p.y==r.y){if(p.y==n.d){var w=z=void 0;t=void 0;if(p.x>r.x)z=Math.max(r.x,n.P),w=Math.min(p.x,n.R),t=1;else if(p.x<r.x)z=Math.max(p.x,n.P),w=Math.min(r.x,n.R),t=-1;else continue;z>=w||(z=Math.round(.5*z+.5*w),kb(l,{t:(z-r.x)/(p.x-r.x),Qf:-1,le:t,S:n,x:z,y:n.d}))}}else t=p.x<r.x?-1:1,z=(n.d-r.y)/(p.y-r.y),0>z||1<z||(w=Math.round(r.x+(p.x-r.x)*z),p.y<r.y?w<n.P||w>n.R||kb(l,{t:z,Qf:0,le:t,S:n,x:w,y:n.d}):p.y>r.y&&!(w<n.P)&&(w>n.R||kb(l,{t:z,Qf:1,le:t,S:n,x:w,y:n.d})));
m=null;for(n=1;n<l.length;n++)if(r=l[n-1],p=l[n],0==r.Qf&&1==p.Qf&&r.t<p.t){m=r;break}if(!m)return g.complete=1,kb(xi,c),!1;l=g.X();l.action=1;l.max=l;l.gb=g.gb;l.S=m.x==m.S.R?m.S:m.S.ib;l.hb=[];n=c.slice();n[k]=l;n.Rb=0;kb(zi,n)==n&&kb(xi,n);l=g.X();l.action=2;l.max=l;l.gb=g.gb;l.S=m.x==m.S.P?m.S.ib:m.S;l.hb=[];c=c.slice();c[k]=l;c.Rb=0;kb(zi,c)==c&&kb(xi,c)}return!1}for(;Bi&&xi.length;){yi++;Bi--;var b=xi.shift();if(a(b))return xi=null,b}if(0==xi.length)return xi=null}
function Di(a,b,c,d){var e=Ai;Ai=e;zi=[];zi.cmp=function(l,m){if(l.length<m.length)return-1;if(l.length>m.length)return 1;for(var n=0;n<l.length;n++){var r=l[n],p=m[n];if(r.f<p.f)return-1;if(r.f>p.f)return 1;if(r.c<p.c)return-1;if(r.c>p.c)return 1;if(r.A<p.A)return-1;if(r.A>p.A)return 1;if(r.u<p.u)return-1;if(r.u>p.u)return 1;if(r.action<p.action)return-1;if(r.action>p.action)return 1}return 0};a=(new S(a,b)).round();c=(new S(c,d)).round();b=null;var h=NaN,g=q(e.qf);for(d=g.next();!d.done;d=g.next()){d=
d.value;var k=qh(d,a.x,a.y);k>=h||(h=k,b=d)}a=b.Te(a.x,a.y);b=null;h=NaN;e=q(e.qf);for(d=e.next();!d.done;d=e.next())d=d.value,g=qh(d,c.x,c.y),g>=h||(h=g,b=d);c=b.Te(c.x,c.y);yi=0;xi=[];xi.cmp=function(l,m){return l.Rb<m.Rb?-1:1};a=new O(a.x,a.y,c.x,c.y);a.Na=a.length;a.action=0;a=[a];a.Rb=0;kb(xi,a);return Ci()};var eg,Ei,Fi,Gi,Hi=new O(0,0,1,0),Ii=4095/741455.429632,Ji=[];Ji.cmp=function(a,b){return a.index-b.index};var Ki=new tb(function(a,b){return a.y<b.y?-1:a.y>b.y?1:a.aa<b.aa?-1:a.aa>b.aa?1:a.ma.name<b.ma.name?-1:a.ma.name>b.ma.name?1:Ue(a.da,b.da)});function Li(a,b){return a.y>b.y?-1:a.y<b.y?1:0}function Mi(a,b){a=ef(a.src.aa).Nj;b=ef(b.src.aa).Nj;return a-b}function fi(a,b,c,d){var e=new fg;e.y=a;e.aa=b;e.ma=c;e.da=d;e.rd=[];return Ki.Ka(e)}var $f=0;
function Ni(){if(0>$f)if(Rg<ag+6)$f=0;else return!1;if(0==$f)return Vh();if(1==$f){var a=Ji.slice();u.pf();for(var b=q(a),c=b.next();!c.done;c=b.next())c.value.Aa=u.Aa;var d=q(a);for(c=d.next();!c.done;c=d.next())for(var e=c.value,h=0;4>h;h++){var g=Oi(e,h);g&&g.Aa!=u.Aa&&(g.Aa=u.Aa,kb(Ji,g))}eg=[];$f++;Ei=0;return!0}if(2==$f){var k=Ji[Ei];if(k)return Pi(k),Ei++,!0;$f++;Ei=0}if(3==$f){u.pf();Fi=u.Aa;var l=Ji[Ei];if(l){for(var m=0;4>m;m++){var n=Oi(l,m);if(n&&n.Aa!=Fi){var r=l,p=n,t=[];switch(m){case 0:var z=
mf(r.index);var w=z.x+512;for(var y=q(r.ca),B=y.next();!B.done;B=y.next()){var A=B.value;(A.f<=w||A.A<=w)&&t.push(A)}w=z.x-512;var D=q(p.ca);for(B=D.next();!B.done;B=D.next()){var F=B.value;(F.f>=w||F.A>=w)&&t.push(F)}break;case 1:z=mf(r.index);w=z.y+512;var L=q(r.ca);for(B=L.next();!B.done;B=L.next()){var da=B.value;(da.c<=w||da.u<=w)&&t.push(da)}w=z.y-512;var P=q(p.ca);for(B=P.next();!B.done;B=P.next()){var ka=B.value;(ka.c>=w||ka.u>=w)&&t.push(ka)}break;case 2:z=mf(p.index);w=z.x+512;var X=q(p.ca);
for(B=X.next();!B.done;B=X.next()){var qa=B.value;(qa.f<=w||qa.A<=w)&&t.push(qa)}w=z.x-512;var Kb=q(r.ca);for(B=Kb.next();!B.done;B=Kb.next()){var bb=B.value;(bb.f>=w||bb.A>=w)&&t.push(bb)}break;case 3:z=mf(p.index);w=z.y+512;var yc=q(p.ca);for(B=yc.next();!B.done;B=yc.next()){var ze=B.value;(ze.c<=w||ze.u<=w)&&t.push(ze)}w=z.y-512;var tf=q(r.ca);for(B=tf.next();!B.done;B=tf.next()){var Ae=B.value;(Ae.c>=w||Ae.u>=w)&&t.push(Ae)}}vi(t,!1)}}l.Aa=Fi;Ei++;return!0}$f++;Ei=0}if(4==$f){var xa=Ji[Ei];if(xa)return xa.evaluate(),
Ei++,!0;$f++;Ei=0}if(5==$f){var Eb=Ji[Ei];if(Eb){for(var uf=q(Eb.Ej),oa=uf.next();!oa.done;oa=uf.next())oa.value.evaluate();Ei++;return!0}$f++;Ei=0}if(6==$f){var vf=Ji[Ei];if(vf)return Qi(vf),Ei++,!0;$f++;Ei=0}if(7==$f){var wf=Ji[Ei];if(wf)return Ri(wf),Ei++,!0;$f++;Ei=0}if(8==$f)return dg(),$f++,!0;if(9==$f)return bf=pf(),Si.ud=new fg,Si.ud.da=new oe,Si.ud.da.name="creaseShading",Si.ud.da.za=1,Si.ud.da.od=new T(0,0,0,127.5),Si.ud.D=u.v.la.get("creaseShading"),Ti=0,Si.Je=Array(ff.elements.length),
Ui=0,$f++,!0;if(10==$f){if(Vi())return!0;$f++;return!0}if(11==$f){for(var ta=[],Yb=q(cf),Be=Yb.next();!Be.done;Be=Yb.next())for(var Ce=q(Be.value),md=Ce.next();!md.done;md=Ce.next())ta=ta.concat(md.value);for(var xf=[],Rd=[],yf=[],zf=q(Zg),Af=zf.next();!Af.done;Af=zf.next()){var V=Af.value;if(2==V.Fc)if(V instanceof oi){if(!V.Pc){var Aa=new lh(-40675,40675,-V.a+40675,V.a-40675);V.Za=[];var la=new nh(Aa.C,Aa.m,Aa.w);la=la.rotate(V.direction);la=la.translate(V.z,V.x);la.source=Aa;V.Za.push(la);la=new mh(Aa.m,
Aa.C,Aa.M);la=la.rotate(V.direction);la=la.translate(V.z,V.x);la.source=Aa;V.Za.push(la);la=new ph(Aa.M,Aa.w,Aa.m);la=la.rotate(V.direction);la=la.translate(V.z,V.x);la.source=Aa;V.Za.push(la);la=new oh(Aa.w,Aa.M,Aa.C);la=la.rotate(V.direction);la=la.translate(V.z,V.x);la.source=Aa;V.Za.push(la);Aa=Aa.rotate(V.direction);Aa=Aa.translate(V.z,V.x);Aa.Nh=V;Rd.push(Aa)}}else if(V instanceof li){var nd=new lh(-40675,40675,-V.a+40675,V.a-40675);nd=nd.rotate(V.direction);nd=nd.translate(V.z,V.x);yf.push(nd)}else if(V instanceof
pi){var jc=new lh(-V.Yc+40675,V.Yc-40675,-V.td-40675,V.td+40675);jc=jc.translate(V.kb.C,V.kb.m);jc=jc.rotate(V.direction);xf.push(jc);var kc=new lh(-V.Yc,V.Yc,-V.td,V.td);kc=kc.translate(V.kb.C,V.kb.m);kc=kc.rotate(V.direction);ta=Kh(ta,[kc])}}for(var Bf=[],ub=0;ub<ta.length;ub++)for(var De=ta[ub],Ee=ub+1;Ee<ta.length;Ee++){var Fe=ta[Ee];if(De.platform.ia!=Fe.platform.ia||25E3<Math.abs(Fe.platform.y-De.platform.y)){var sg=wh(De,Fe);sg&&Bf.push(sg)}}ta=Mh(ta,1);ta=ta.concat(Bf);ta=Ih(ta,40675,40675);
ta=Mh(ta);ta=Nh(ta);ta=ta.concat(xf);ta=ta.concat(yf);for(var Sd=[],Fb=q(ta),Gb=Fb.next();!Gb.done;Gb=Fb.next())th(Gb.value,Sd);var Hb=q(Rd);for(Gb=Hb.next();!Gb.done;Gb=Hb.next()){var vb=Gb.value;Sd.push(vb.Nh.Za[1],vb.Nh.Za[3])}ta=ta.concat(Rd);Kh(Sd,ta);for(var zb=Th(Rh(Sd)),tg=0,Ec=q(zb),Ge=Ec.next();!Ge.done;Ge=Ec.next())for(var od=Ge.value,Zb=od[od.length-1],$b=q(od),lc=$b.next();!lc.done;lc=$b.next()){var pd=lc.value;pd.index=tg++;Zb.next=pd;pd.ib=Zb;Zb=pd}for(var Td=[],Cf=q(zb),Ud=Cf.next();!Ud.done;Ud=
Cf.next())Td=Td.concat(Ud.value);zb=Td;zb.qf=ta;var Df=q(Rd);for(Gb=Df.next();!Gb.done;Gb=Df.next()){var Wa=Gb.value.Nh;Wa.Rc=[Wa.Za[1].ib,Wa.Za[1].next,Wa.Za[3].ib,Wa.Za[3].next];Wa.Za[0].ib=Wa.Rc[0];Wa.Za[0].next=Wa.Rc[3];Wa.Za[2].ib=Wa.Rc[2];Wa.Za[2].next=Wa.Rc[1];zb.push(Wa.Za[0]);zb.push(Wa.Za[2]);var Oa=Wa;Oa.Rc[0]&&Oa.Rc[1]&&Oa.Rc[2]&&Oa.Rc[3]&&(Oa.Rc[0].next=Oa.Za[1],Oa.Rc[1].ib=Oa.Za[1],Oa.Rc[2].next=Oa.Za[3],Oa.Rc[3].ib=Oa.Za[3],Oa.Za[0].disabled=!0,Oa.Za[1].disabled=!1,Oa.Za[2].disabled=
!0,Oa.Za[3].disabled=!1,Oa.Za[0].y=-5E4,Oa.Za[1].y=0,Oa.Za[2].y=-5E4,Oa.Za[3].y=0)}Ai=zb;$f++;return!0}if(12==$f){if(Gi&&0!=u.l%4)return!1;for(;Pg.length&&Pg[0].Ge;)Pg.shift(),Qg++,cf.shift(),df++;for(var He=q(cf),Fc=He.next();!Fc.done;Fc=He.next())for(var qd=Fc.value,ac=0;ac<qd.dc.length;ac++)qd.dc[ac].Ec.aa>=df||qd.dc.splice(ac--,1);for(var Vd=0;Vd<Ki.elements.length;Vd++){var Gc=Ki.elements[Vd];Gc.aa<Qg&&(Ki.elements.splice(Vd--,1),Gc.Oc&&(Gc.Oc.parent=null,je(Gc.Oc)))}var Wc=q(cf);for(Fc=Wc.next();!Fc.done;Fc=
Wc.next()){var eb=Fc.value;eb.ob<=Sg||(eb.xb.x/=eb.Ic,eb.xb.y/=eb.Ic,eb.xb.z/=eb.Ic,eb.xb.x/=255,eb.xb.y/=255,eb.xb.z/=255)}Mf=[];var Ie=Nf;Nf=[[Array(cf.length),Array(cf.length),Array(cf.length)],[Array(cf.length),Array(cf.length),Array(cf.length)]];if(Ie)for(var Je=q(cf),Hc=Je.next();!Hc.done;Hc=Je.next())for(var Xc=Hc.value.index-df,mb=0;2>mb;mb++)Nf[mb][0][Xc]=Ie[mb][0][Xc],Nf[mb][1][Xc]=Ie[mb][1][Xc],Nf[mb][2][Xc]=Ie[mb][2][Xc];Of=0;var rd=q(cf);for(Hc=rd.next();!Hc.done;Hc=rd.next()){var Ta=
Hc.value;if(!Ta.be){var sd=new Qf;sd.jg=Ta;sd.Ue=Ta;sd.Ic=Ta.Ic;sd.hh=[qb(.05,.95,Ta.xb.x),qb(.05,.95,Ta.xb.y),qb(.05,.95,Ta.xb.z)];Mf.push(sd)}Ta.Ai=Ta.Ic;for(var ug=q(Ta.dc),Ke=ug.next();!Ke.done;Ke=ug.next())Ta.Ai+=Uf(Ke.value);for(var td=0;td<Ta.dc.length;td++){var bc=new Qf;bc.jg=Ta;bc.Ue=ef(Ta.dc[td].Ec.aa);bc.bc=Ta.dc[td];bc.Ic=Uf(bc.bc);bc.hh=[1,1,1];Mf.push(bc);var Ic=new Qf;Ic.jg=Ta;Ic.Ue=Ta;Ic.bc=Ta.dc[td];Ic.Ic=Vf(Ic.bc);Ic.hh=[.625,.625,.625];Mf.push(Ic)}}Pf();Sg=ag+2;for(var Jc=q(u.ii.elements),
Le=Jc.next();!Le.done;Le=Jc.next())Wi(Le.value);for(var ud=q(Ki.elements),Yc=ud.next();!Yc.done;Yc=ud.next()){var Ba=Yc.value,vd=ef(Ba.aa);if(vd&&!(vd.ob>Sg))if(Ba.Oc)Ba.Oc.Ja[1]=vd.qe;else{var mc=Ba;mc.yb.cmp=Gd;for(var wd=q(mc.rd),Zc=wd.next();!Zc.done;Zc=wd.next())for(var Wd=Zc.value,Xd=0;Xd<Wd.length;Xd++)Wd[Xd]=kb(mc.yb,Wd[Xd]);for(var Yd=0;Yd<mc.yb.length;Yd++)mc.yb[Yd].index=Yd;var cc=q(mc.rd);for(Zc=cc.next();!Zc.done;Zc=cc.next())for(var $c=Zc.value,Zd=0;Zd<$c.length;Zd++)$c[Zd]=$c[Zd].index;
delete mc.yb.cmp;Ba.compile();delete Ba.rd;Ba.Oc=new hg(Ba,"worldMesh");isNaN(Ba.facing)||(Ba.Oc.facing=Ba.facing);Ba.Oc.ea=vd.ea;Ba.Oc.Kg=!0;Ba.Oc.Ja=["portalLightIndex",vd.qe,!0];Infinity!=Ba.y?(Ba.Oc.y=Ba.y,W(Ba.Oc,u.ue)):W(Ba.Oc,u.Cj);delete Ba.y;0==Ba.facing&&(Ba.D=u.v.la.get("physicalThreshold"))}}$f=-1}return!1}
function Xi(a,b){var c=new tb(Ld);a=q(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var e=new tb(kd);e.x=d.f;e.y=d.c;e=c.Ka(e);e.add(d);b&&(d=jd(d),e=new tb(kd),e.x=d.f,e.y=d.c,e=c.Ka(e),e.add(d))}return c}
function Yi(a){var b=[];b.bound=new dd;var c=0,d=a.elements[c],e=d.elements.pop();d.elements.length||a.elements.splice(c,1);if(!e)return null;for(;;){b.push(e);b.bound.Ka(e.A,e.u);if(e.A==b[0].f&&e.u==b[0].c)return b;c=a.contains(new S(e.A,e.u));if(0>c)return null;d=a.elements[c];e=wb(d,id(e))-1;0>e&&(e+=d.elements.length);e=d.elements.splice(e,1)[0];d.elements.length||a.elements.splice(c,1)}}
function Zi(a){for(var b=[],c=a[a.length-1],d=0;d<a.length;d++){var e=a[d];b.push(Sc(c,e));c=e}a.Ch=b;a.tf=[];a.Bi=0;b=q(a.Ch);for(c=b.next();!c.done;c=b.next())c=c.value,0>c?(a.Bi-=c,a.tf.push(-c)):a.tf.push(0)}
function $i(a,b){var c=null;b=q(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.m<=d.bound.m||a.bound.h<=d.bound.h||a.bound.w>=d.bound.w||a.bound.o>=d.bound.o)){if(c){if(d.bound.m<=c.bound.m)continue;if(d.bound.h<=c.bound.h)continue;if(d.bound.w>=c.bound.w)continue;if(d.bound.o>=c.bound.o)continue}0>=ad(a[0].A,a[0].u,d)||(c=d)}c&&c.cb.push(a)}
function aj(a){if(0==a.cb.length)return a;var b=[a].concat(a.cb),c={};c.Rb=Number.NEGATIVE_INFINITY;for(var d=0;d<b.length;d++)for(var e=b[d],h=d+1;h<b.length;h++)for(var g=b[h],k=0;k<e.length;k++)for(var l=(k+1)%e.length,m=0;m<g.length;m++)c=bj(e,k,l,g,m,(m+1)%g.length,c,b);if(0>c.Rb)return console.log("could not solve holes"),a.cb=[],a;e=c.gd[c.ga].Ua(c.gd[c.ga].f,c.gd[c.ga].c,c.wd[c.d].f,c.wd[c.d].c);d=e.Ua(e.A,e.u,e.f,e.c);e.Y=d;d.Y=e;b=[];for(h=0;h<c.ga;h++)b.push(c.gd[h]);b.push(e);e=c.d;for(h=
0;h<c.wd.length;h++)b.push(c.wd[e]),++e==c.wd.length&&(e=0);b.push(d);for(d=c.ga;d<c.gd.length;d++)b.push(c.gd[d]);if(c.gd==a)return a.cb.splice(a.cb.indexOf(c.wd),1),b.cb=a.cb,Zi(b),aj(b);a.cb.splice(a.cb.indexOf(c.gd),1,b);a.cb.splice(a.cb.indexOf(c.wd),1);Zi(b);return aj(a)}
function bj(a,b,c,d,e,h,g,k){function l(p,t){function z(D,F,L){if(F==D.f&&L==D.c||F==D.A&&L==D.u)return!1;F=D.Oe(F,L);return 0>=F.x||F.x>=D.length||-256>F.y||256<F.y?!1:!0}var w=R(t,p.f,p.c),y=R(t,p.A,p.u),B=R(p,t.f,t.c),A=R(p,t.A,t.u);if(-256>B&&256<A&&(-256>w&&256<y||256<w&&-256>y)||256<B&&-256>A&&(-256>w&&256<y||256<w&&-256>y)||z(p,t.f,t.c)||z(p,t.A,t.u)||z(t,p.f,p.c)||z(t,p.A,p.u))return!0}var m=a[c],n=d[h];m=new O(m.f,m.c,n.f,n.c);if(0==a.tf[c]){if(0>=R(a[b],m.A,m.u)||0>=R(a[c],m.A,m.u))return g}else if(0>=
R(a[b],m.A,m.u)&&0>=R(a[c],m.A,m.u))return g;if(0==d.tf[h]){if(0>=R(d[e],m.f,m.c)||0>=R(d[h],m.f,m.c))return g}else if(0>=R(d[e],m.f,m.c)&&0>=R(d[h],m.f,m.c))return g;if(k)for(k=q(k),n=k.next();!n.done;n=k.next()){var r=q(n.value);for(n=r.next();!n.done;n=r.next())if(l(m,n.value))return g}else for(k=q(a),n=k.next();!n.done;n=k.next())if(l(m,n.value))return g;k={};k.gd=a;k.Ea=b;k.ga=c;k.wd=d;k.Qf=e;k.d=h;k.S=m;cj(k);return k.Rb>g.Rb?k:g}
function cj(a){a.Rb=4095-a.S.length*Ii;var b=Sc(a.gd[a.Ea],a.S),c=b-a.gd.Ch[a.ga],d=Sc(a.S,a.wd[a.d]),e=d-a.wd.Ch[a.d];a.Rb+=.5/Math.PI*(a.gd.tf[a.ga]-(0>b?-b:0)-(0>c?-c:0)+(a.wd.tf[a.d]-(0>d?-d:0)-(0>e?-e:0)))*1048575}
function dj(a){if(3>a.length)return[];Zi(a);if(0>=a.Bi)return[a];for(var b={Rb:Number.NEGATIVE_INFINITY},c=a.length-1,d=0;d<a.length;d++){for(var e=d+1,h=e+1;h<a.length;h++)b=bj(a,c,d,a,e,h,b),e=h;c=d}if(0>b.Rb)return console.log("could not convex path"),[a];h=new ej(a[b.ga].f,a[b.ga].c,a[b.d].f,a[b.d].c);c=new ej(a[b.d].f,a[b.d].c,a[b.ga].f,a[b.ga].c);h.Y=c;c.Y=h;d=[];e=[];for(var g=0;g<b.ga;g++)d.push(a[g]);d.push(h);for(h=b.d;h<a.length;h++)d.push(a[h]);for(h=b.ga;h<b.d;h++)e.push(a[h]);e.push(c);
return dj(d).concat(dj(e))}function jj(a){this.ca=null;this.h=Number.POSITIVE_INFINITY;this.o=Number.NEGATIVE_INFINITY;this.ua=this.floor=null;this.Z=a}jj.prototype.cf=function(a,b){if(this.o<=a.h||this.h>=a.o)b.push(this);else{if(this.h<a.h){var c=new jj(this.Z);c.h=this.h;c.o=a.h;c.floor=this.floor;c.ua=a.ua;b.push(c)}this.o>a.o&&(c=new jj(this.Z),c.h=a.o,c.o=this.o,c.floor=a.floor,c.ua=this.ua,b.push(c))}};function Hg(a,b,c){this.T=a;this.h=b;this.o=c;this.flags=0}
function Ig(a,b){this.ca=a;this.y=b;this.flags=0}function Jg(a,b){this.ca=a;this.y=b;this.flags=0}Ig.prototype.gf=function(){if(this.Y)return this.Y;this.Y=new Jg(this.ca,this.y);this.Y.flags=this.flags;return this.Y};Jg.prototype.gf=function(){if(this.Y)return this.Y;this.Y=new Ig(this.ca,this.y);this.Y.flags=this.flags;return this.Y};Hg.prototype.gf=function(){if(this.Y)return this.Y;this.Y=new Hg(jd(this.T),this.h,this.o);this.Y.flags=this.flags;return this.Y};function lf(a){this.index=a;this.Dg=this.Aa=-2147483648;this.Mj=new yb(this);this.Hc=new tb(Jb);this.gh=new xb}function Oi(a,b){a=nf(a.index);switch(b){case 0:if(0==a.x)break;return ff.get(of(a.x-1,a.y));case 1:if(0==a.y)break;return ff.get(of(a.x,a.y-1));case 2:if(8191==a.x)break;return ff.get(of(a.x+1,a.y));case 3:if(8191!=a.y)return ff.get(of(a.x,a.y+1))}return null}
function Pi(a){function b(g,k){return g.Z.index<k.Z.index?-1:g.Z.index>k.Z.index?1:0}a.Ej=[];a.ca=[];for(var c=q(a.Hc.elements),d=c.next();!d.done;d=c.next()){d=q(d.value.ca);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=e.X();jd(h);e.yg&&(h.Kb=[e]);h.vd=[a.ca];a.ca.push(h)}}vi(a.ca.slice(),!0);a=q(a.ca);for(e=a.next();!e.done;e=a.next())c=e.value,c.Kb&&Sb(c.Kb,b),c.Y.Kb&&Sb(c.Y.Kb,b)}
lf.prototype.evaluate=function(){this.ji=[];this.ki=[];for(var a=Xi(this.ca,!0),b=[],c=[];a.elements.length;){var d=Yi(a);d&&(Vc(d)?c.push(d):(d.cb=[],b.push(d)))}a=q(c);for(c=a.next();!c.done;c=a.next())$i(c.value,b);a=[];b=q(b);for(c=b.next();!c.done;c=b.next())if(d=c.value,0==d.cb.length)a.push(d);else{Zi(d);var e=q(d.cb);for(c=e.next();!c.done;c=e.next())Zi(c.value);a.push(aj(d))}b=[];a=q(a);for(c=a.next();!c.done;c=a.next())b=b.concat(dj(c.value));a=q(b);for(c=a.next();!c.done;c=a.next())this.Ej.push(new kj(c.value,
this))};
function Qi(a){function b(z,w){return z.Xc<w.Xc?-1:z.Xc>w.Xc?1:z.Z.aa<w.Z.aa?-1:z.Z.aa>w.Z.aa?1:lj(z.xa,w.xa)}function c(z,w){var y=zc(1/60);var B=-1;for(var A=1;A<z.length;A++){var D=Math.abs(Sc(z[A-1].T,z[A].T));D<y&&(y=D,B=A)}if(0>B)w.push.apply(w,ca(z));else{y=z[B-1];A=z[B];D=y.T.Ua(y.T.f,y.T.c,A.T.A,A.T.u);var F=jd(D);y.Jc&&(0>y.Jc.Xc?y.Jc.splice(y.Jc.indexOf(y.T),2,D):y.Jc.splice(y.Jc.indexOf(A.T.Y),2,F));y.Dc&&(0<y.Dc.Xc?y.Dc.splice(y.Dc.indexOf(y.T),2,D):y.Dc.splice(y.Dc.indexOf(A.T.Y),2,
F));y.T=D;z.splice(B,1);c(z,w)}}function d(z){var w=zc(1/60);var y=-1;for(var B=1;B<z.length;B++){var A=Math.abs(Sc(z[B-1],z[B]));A<w&&(w=A,y=B)}if(!(0>y)){w=z[y-1];B=z[y];A=w.Ua(w.f,w.c,B.A,B.u);var D=jd(A);A.Ac=w.Ac;w.Ac.splice(w.Ac.indexOf(w),2,A);B.Y&&(D.Ac=B.Y.Ac,B.Y.Ac.splice(B.Y.Ac.indexOf(B.Y),2,D));z.splice(y-1,2,A);d(z)}}for(var e=0,h=new tb(function(z,w){return z.y<w.y?-1:z.y>w.y?1:0}),g=q(a.ji),k=g.next();!k.done;k=g.next()){var l=k.value,m=new tb(b);m.y=l.y;m=h.Ka(m);k=[];k.Xc=l.Xc;k.Z=
l.Z;k.xa=l.xa;k=m.Ka(k);k.push(l)}g=q(h.elements);for(l=g.next();!l.done;l=g.next()){l=l.value;m=q(l.elements);for(k=m.next();!k.done;k=m.next()){var n=k.value,r=new tb(Rc),p=q(n);for(k=p.next();!k.done;k=p.next()){var t=q(k.value);for(k=t.next();!k.done;k=t.next())k=k.value,r.remove(id(k))||r.push(k)}n.length=0;for(r=Xi(r.elements);r.elements.length;){p=Yi(r);if(!p)break;p.y=l.y;p.Xc=n.Xc;p.Z=n.Z;p.xa=n.xa;p.index=e++;t=q(p);for(k=t.next();!k.done;k=t.next())k.value.Ac=p;n.push(p)}}l.Oh=new tb(Rc);
m=q(l.elements);for(k=m.next();!k.done;k=m.next())for(n=q(k.value),k=n.next();!k.done;k=n.next())for(r=q(k.value),k=r.next();!k.done;k=r.next())k=k.value,(p=l.Oh.remove(id(k)))?(k.Y=p,p.Y=k):l.Oh.push(k)}e=q(a.ki);for(g=e.next();!g.done;g=e.next())g=g.value,l=function(z,w){w=h.get({y:w});if(!w)return null;w=w.Oh.remove(z);if(!w)return null;w.Ac.splice(w.Ac.indexOf(w),1,z);return w.Ac},m=g.T,k=jd(m),g.Dc=l(m,g.h)||l(k,g.h),g.Jc=l(m,g.o)||l(k,g.o);g=function(z){var w=[],y=new tb(function(F,L){F=F[0];
L=L[0];if(F.h<L.h)return-1;if(F.h>L.h)return 1;if(F.o<L.o)return-1;if(F.o>L.o)return 1;if(F.Dc)if(L.Dc){if(F.Dc.index<L.Dc.index)return-1;if(F.Dc.index>L.Dc.index)return 1}else return 1;else if(L.Dc)return-1;if(F.Jc)if(L.Jc){if(F.Jc.index<L.Jc.index)return-1;if(F.Jc.index>L.Jc.index)return 1}else return 1;else if(L.Jc)return-1;if(F.length<L.length)return-1;if(F.length>L.length)return 1;for(var da=0;da<F.length;da++){var P=F[da],ka=L[da];if(P.h<ka.h)return-1;if(P.h>ka.h)return 1;if(P.o<ka.o)return-1;
if(P.o>ka.o)return 1;P=lj(P.xa,ka.xa);if(0!=P)return P}return 0});z=q(z);for(var B=z.next();!B.done;B=z.next()){B=B.value;var A=[B],D=y.Ka(A);D!=A&&D.push(B)}z={};y=q(y.elements);for(B=y.next();!B.done;z={he:z.he},B=y.next())for(z.he=B.value,B={};z.he.length;)B.Hf=function(F,L){return function(da,P,ka){for(var X=0;X<F.he.length;X++){var qa=F.he[X];if(qa.T.f==ka.A&&qa.T.c==ka.u)return F.he.splice(X,1),da.push(qa),qa.T.Tc=da,qa.T.Y.Tc=da,L.Hf(da,P,qa.T);if(qa.T.A==P.f&&qa.T.u==P.c)return F.he.splice(X,
1),da.unshift(qa),qa.T.Tc=da,qa.T.Y.Tc=da,L.Hf(da,qa.T,ka)}return da}}(z,B),A=z.he.shift(),D=[A],A.T.Tc=D,A.T.Y.Tc=D,w.push(B.Hf(D,A.T,A.T)),B={Hf:B.Hf};return w}(a.ki);e=function(){for(var z=[],w=q(h.elements),y=w.next();!y.done;y=w.next()){y=q(y.value.elements);for(var B=y.next();!B.done;B=y.next()){B=q(B.value);for(var A=B.next();!A.done;A=B.next()){A=A.value;for(var D=function(X,qa){return X.Tc||qa.Tc?!1:X.Y?qa.Y?X.Y.Ac==qa.Y.Ac:!1:qa.Y?!1:!0},F=0,L=A[A.length-1],da=A[0];F<A.length&&(da=A[F],
D(L,da));F++,L=da);if(F==A.length){D=[];L=q(A);for(A=L.next();!A.done;A=L.next())A=A.value,A.Tc=D,A.Y&&(A.Y.Tc=D),D.push(A);z.push(D)}else{A.unshift.apply(A,ca(A.splice(F)));F=[];var P=null;L=A[0];F.push(P=[]);P.push(L);for(var ka=1;ka<A.length;ka++,L=da)da=A[ka],D(L,da)||F.push(P=[]),P.push(da);D=q(F);for(A=D.next();!A.done;A=D.next())if(L=A.value,!L[0].Tc){da=q(L);for(A=da.next();!A.done;A=da.next())A=A.value,A.Tc=L,A.Y&&(A.Y.Tc=L);z.push(L)}}}}}return z}();a.vj=[];l=q(g);for(g=l.next();!g.done;g=
l.next())c(g.value,a.vj);a.uj=[];e=q(e);for(g=e.next();!g.done;g=e.next())d(g.value);e=q(h.elements);for(l=e.next();!l.done;l=e.next())for(g=q(l.value.elements),k=g.next();!k.done;k=g.next())for(l=q(k.value),k=l.next();!k.done;k=l.next())m=k.value,m.xj=dj(m),a.uj.push(m)}
function Ri(a){function b(r,p,t){var z=[],w=new Ig(p,r.y);w.aa=r.Z.aa;h.push(w);if((w=ef(t.aa))&&!(w.ob<=Sg)){for(w=0;w<p.length;w++){var y=new Fd(p[w].c,r.y,p[w].f);Id(y,r.xa.color);Jd(y,y.z/4E5,y.x/4E5);y.pc=32767;z.push(y)}t.rd.push(z);eg.push(z);e(ef(r.Z.aa),z,r.xa)}}function c(r,p,t){var z=[],w=new Jg(p,r.y);w.aa=r.Z.aa;h.push(w);if((w=ef(t.aa))&&!(w.ob<=Sg)){for(w=p.length-1;0<=w;w--){var y=new Fd(p[w].u,r.y,p[w].A);Id(y,r.xa.color);Jd(y,-y.z/4E5,y.x/4E5);y.pc=-32767;z.push(y)}t.rd.push(z);
eg.push(z);e(ef(r.Z.aa),z,r.xa)}}function d(r,p,t){var z=fi(Infinity,r.Z.aa,p.xa.ma,p.xa.da),w=ef(z.aa);if(w&&!(w.ob<=Sg)){w=[];var y=r.T.f/4E5+r.T.c/4E5,B=r.T.A/4E5+r.T.u/4E5;var A=new Fd(r.T.u,p.h,r.T.A);Id(A,p.xa.color);Jd(A,B,-A.y/4E5);A.zb=t.x;A.Xb=t.y;w.push(A);A=new Fd(r.T.c,p.h,r.T.f);Id(A,p.xa.color);Jd(A,y,-A.y/4E5);A.zb=t.x;A.Xb=t.y;w.push(A);A=new Fd(r.T.c,p.o,r.T.f);Id(A,p.xa.color);Jd(A,y,-A.y/4E5);A.zb=t.x;A.Xb=t.y;w.push(A);A=new Fd(r.T.u,p.o,r.T.A);Id(A,p.xa.color);Jd(A,B,-A.y/4E5);
A.zb=t.x;A.Xb=t.y;w.push(A);z.rd.push(w);eg.push(w);e(ef(r.Z.aa),w,p.xa)}}function e(r,p,t){var z=0,w=p[0],y=Md(p[1],w,new J);y.scale(1E-5);for(var B=2;B<p.length;B++){var A=Md(p[B],w,new J);A.scale(1E-5);z+=Lc(y,A,new J).length();y=A}p=.5*z;z=t.ma;t=t.color;w=(z.md.r-z.md.Pa)/255;t=new T(t.r*w+z.md.Pa,t.Pa*w+z.md.Pa,t.ga*w+z.md.Pa,z.md.Ea);r.xb.x+=t.r*p;r.xb.y+=t.Pa*p;r.xb.z+=t.ga*p;r.Ic+=p}a.na=[];for(var h=a.na,g=q(a.uj),k=g.next();!k.done;k=g.next())if(k=k.value,0<k.Xc){for(var l=fi(k.y,k.Z.aa,
k.xa.ma,k.xa.da),m=q(k.xj),n=m.next();!n.done;n=m.next())b(k,n.value,l);(k=ef(k.Z.aa))&&k.cells.push(a)}else for(l=fi(Infinity,k.Z.aa,k.xa.ma,k.xa.da),m=q(k.xj),n=m.next();!n.done;n=m.next())c(k,n.value,l);a=q(a.vj);for(k=a.next();!k.done;k=a.next())for(g=k.value,k=new Hg(g.T,g.h,g.o),k.aa=g[0].Z.aa,h.push(k),k=new S(g.T.c-g.T.u,g.T.A-g.T.f),k.ja(32767),n=q(g),l=n.next();!l.done;l=n.next())d(g,l.value,k)}
function kj(a,b){this.index=mj++;this.ca=a;this.Be=b;a=new tb(nj);for(var c=new S(0,0),d=1/this.ca.length,e=q(this.ca),h=e.next();!h.done;h=e.next())h=h.value,h.Af=this,c.x+=h.A*d,c.y+=h.u*d;b=q(b.Hc.elements);for(d=b.next();!d.done;d=b.next())d=d.value,0>=ad(c.x,c.y,d.ca)||a.add(d);this.Hc=a.elements;oj(this);this.rj=[];a=Number.NEGATIVE_INFINITY;c=q(this.$d);for(b=c.next();!b.done;b=c.next())if(b=b.value,b.Z.add){if(b.h>a){var g=new jj(b.Z);g.h=b.h;g.o=b.o;g.floor=b.floor;g.ua=b.ua;g.ca=this.ca;
this.rj.push(g)}else g.o=b.o,g.ua=b.ua;a=g.o}}var mj=-2147483648;
function oj(a){var b=new jj;b.h=-2147483648;b.o=2147483647;b.Z={};a.$d=[b];b=q(a.Hc);for(var c=b.next();!c.done;c=b.next()){c=c.value;var d=new jj(c.Z);d.h=c.Z.h;d.o=c.Z.o;d.floor=c.Z.floor;d.ua=c.Z.ua;c=[d];d=q(a.$d);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=[];c=q(c);for(var g=c.next();!g.done;g=c.next())g=g.value,g.Z.kf(e.Z)?h.push(g):g.cf(e,h);c=h}d=q(c);for(g=d.next();!g.done;g=d.next()){h=g.value;g=[];var k=q(a.$d);for(e=k.next();!e.done;e=k.next())e.value.cf(h,g);a.$d=g}a.$d.push.apply(a.$d,
ca(c))}Sb(a.$d,function(l,m){return l.h<m.h?-1:l.h>m.h?1:0})}
kj.prototype.evaluate=function(){for(var a=q(this.rj),b=a.next();!b.done;b=a.next()){b=b.value;if(b.floor){for(var c=[],d=q(this.ca),e=d.next();!e.done;e=d.next())e=e.value,e=e.X(),c.push(e);c.y=b.h;c.xa=b.floor;c.Xc=1;c.Z=b.Z;this.Be.ji.push(c)}if(b.ua){c=[];d=q(this.ca);for(e=d.next();!e.done;e=d.next())e=e.value,e=e.X(),c.push(e);c.y=b.o;c.xa=b.ua;c.Xc=-1;c.Z=b.Z;this.Be.ji.push(c)}}a=[];b=[];e=q(this.$d);for(d=e.next();!d.done;d=e.next())c=d.value,(c.Z.add?a:b).push(c);b=q(this.ca);for(e=b.next();!e.done;e=
b.next()){e=e.value;var h=function(p,t){var z=[];p=q(p);for(var w=p.next();!w.done;w=p.next()){var y=w.value,B=q(t);for(w=B.next();!w.done;w=B.next()){var A=w.value,D=[];y.Ka(A.h,A.o,D);var F=q(D);for(w=F.next();!w.done;w=F.next())w.value.Z=A.Z;z.push.apply(z,ca(D))}}return z},g=function(p,t){t=q(t);for(var z=t.next();!z.done;z=t.next()){z=z.value;var w=[];p=q(p);for(var y=p.next();!y.done;y=p.next())y.value.cf(z.h,z.o,w);p=w}return p};c=function(p){for(var t=p[0],z=1;z<p.length;z++)if(lj(t.xa,p[z].xa))t=
p[z];else{var w=t.X(t.h,p[z].o);p.splice(--z,2,w)}};d=function(p,t,z){var w=[];if(!p.Kb)return w;t=q(t);for(var y=t.next();!y.done;y=t.next()){y=y.value;var B=p.Kb;var A=y,D=nj,F=Rb(B,A,D);(B=F==B.length||0!=D.call(null,A,B[F])?null:B[F])&&B.Z.add==z&&w.push(new gh(y.Z.h,y.Z.o,B))}return w};var k=d(e,this.Hc,!0),l=[],m=[],n=[];if(e.Y.Af){l=d(e.Y,e.Y.Af.Hc,!1);var r=q(e.Y.Af.$d);for(d=r.next();!d.done;d=r.next())d=d.value,(d.Z.add?m:n).push(d)}k=g(k,m);l=g(l,m);k=h(k,a);l=h(l,a);h=function(p){Sb(p,
function(D,F){return D.We.Z.index-F.We.Z.index});var t=[];p=q(p);for(var z=p.next();!z.done;z=p.next()){z=[z.value];for(var w=q(t),y=w.next();!y.done;y=w.next()){y=y.value;var B=[];z=q(z);for(var A=z.next();!A.done;A=z.next())A=A.value,A.We.Z.kf(y.We.Z)?B.push(A):A.cf(y.h,y.o,B);z=B}w=q(z);for(A=w.next();!A.done;A=w.next()){B=A.value;A=[];t=q(t);for(y=t.next();!y.done;y=t.next())y.value.cf(B.h,B.o,A);t=A}t.push.apply(t,ca(z))}return t}(l.concat(k));if(h.length){d=[];g=q(h);for(h=g.next();!h.done;h=
g.next())if(k=h.value,k.We.yg){l=[];m=q(k.We.yg);for(h=m.next();!h.done;h=m.next())h.value.Ka(k.h,k.o,l);m=q(l);for(h=m.next();!h.done;h=m.next())h.value.Z=k.Z;d.push.apply(d,ca(l))}Sb(d,function(p,t){return p.h<t.h?-1:p.h>t.h?1:0});g=void 0;k=Number.NEGATIVE_INFINITY;d=q(d);for(h=d.next();!h.done;h=d.next())h=h.value,h.h>k?(g&&c(g),g=[h],g.T=e.X(),g.Z=h.Z,g.h=h.h,g.o=h.o,this.Be.ki.push(g)):(g.push(h),g.o=h.o),k=h.o;g&&c(g)}}};
function ej(a,b,c,d){O.call(this,a,b,c,d);this.index=ej.index++;this.Y=null}ej.index=-2147483648;ej.prototype=Object.create(O.prototype);ej.prototype.constructor=ej;ej.prototype.Ua=function(a,b,c,d){return new ej(a,b,c,d)};
ej.prototype.replace=function(a){O.prototype.replace.call(this,a);if(this.Af)for(var b=0;b<a.length;b++)a[b].Af=this.Af;if(this.Kb)for(a=q(a),b=a.next();!b.done;b=a.next())if(b=b.value,b.Kb)for(var c=q(this.Kb),d=c.next();!d.done;d=c.next())d=d.value,0<=b.Kb.indexOf(d)||b.Kb.push(d);else b.Kb=this.Kb.slice()};function gh(a,b,c){this.xa=new pj;this.h=a;this.o=b;this.We=c;this.Z=null}gh.prototype.X=function(a,b){a=new gh(a,b,this.We);a.xa=this.xa;a.Z=this.Z;return a};
gh.prototype.cf=function(a,b,c){this.o<=a||this.h>=b?c.push(this):(this.h<a&&c.push(this.X(this.h,a)),this.o>b&&c.push(this.X(b,this.o)))};gh.prototype.Ka=function(a,b,c){this.o<=a||this.h>=b||(this.o<=b&&this.h>=a?c.push(this):(b=b<this.o?b:this.o,a=a>this.h?a:this.h,c.push(this.X(a,b))))};function pj(){this.ma=u.v.ba.get("concr01");this.da=ch;this.color=Cd;this.y=this.x=0}
function lj(a,b){if(a.ma.name<b.ma.name)return-1;if(a.ma.name>b.ma.name)return 1;var c=Ue(a.da,b.da);return 0!=c?c:a.color.r<b.color.r?-1:a.color.r>b.color.r?1:a.color.Pa<b.color.Pa?-1:a.color.Pa>b.color.Pa?1:a.color.ga<b.color.ga?-1:a.color.ga>b.color.ga?1:a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0};function qi(){this.index=qj++;this.add=!0;this.ca=null;this.h=Number.POSITIVE_INFINITY;this.o=Number.NEGATIVE_INFINITY;this.floor=new pj;this.ua=new pj;this.color=Cd;this.Eb=-1;this.Hc=[]}var qj=-2147483648,hh=new T(192,192,192,255),jh=new T(64,64,64,255),kh=new T(160,160,160,255),ih=new T(160,160,160,255);
function ri(a,b){a.floor&&(a.floor.color=hh);a.ua&&(a.ua.color=ih);a.ca=[];for(var c=[],d=0;d<b.length;d++)c.push(Hi.jb(b[d].x,b[d].y));b=c;var e=b[b.length-1];for(c=0;c<b.length;c++)d=b[c],e=new ej(e.x,e.y,d.x,d.y),e.Z=a,e.yg=a.df(),a.ca.push(e),e=d}qi.prototype.df=function(){var a=new gh(this.h,this.o);a.xa.color=this.color;return[a]};
qi.prototype.stroke=function(){if(Vc(this.ca)){console.trace();debugger}if(this.o<=this.h){console.trace();debugger}for(var a=[],b=q(this.ca),c=b.next();!c.done;c=b.next()){c=c.value;var d=c.X();d.Kb=[c.yg];a.push(d);jd(d);delete d.Y.Kb}b=new dd;c=q(a);for(d=c.next();!d.done;d=c.next())d=d.value,b.Ka(d.A,d.u);d=b.m&-524288;c=b.h&-524288;d+=524288;for(c+=524288;d<b.w;){var e=new ej(d,b.h,d,b.o);jd(e);a.push(e);d+=524288}for(;c<b.o;)d=new ej(b.m,c,b.w,c),jd(d),a.push(d),c+=524288;a=vi(a.slice(),!0);
a=Xi(a);for(b={};a.elements.length;){a:if(c=function(g){return function(){for(var k=q(g.Cd),l=k.next();!l.done;l=k.next())if(l.value.Kb)return!0;return!1}}(b),b.Cd=Yi(a),b.Cd&&!Vc(b.Cd)){if(!c()&&(c=cd(b.Cd),0>=ad(c.x,c.y,this.ca)))break a;d=new rj(this);e=q(b.Cd);for(c=e.next();!c.done;c=e.next()){c=c.value;var h=c.X();jd(h);h.Z=this;c.Kb&&(h.yg=c.Kb[0]);d.ca.push(h)}d.stroke(kf(of(b.Cd.bound.m+2147483648>>>19,b.Cd.bound.h+2147483648>>>19)))}b={Cd:b.Cd}}};
function di(a){for(var b=q(a.Hc),c=b.next();!c.done;c=b.next())c.value.remove();a.Hc.length=0}qi.prototype.X=function(){var a=new qi;a.add=this.add;a.h=this.h;a.o=this.o;a.floor=this.floor;a.ua=this.ua;a.color=this.color;a.Eb=this.Eb;return a};qi.prototype.kf=function(){return!0};function rj(a){this.index=sj++;this.Z=a;this.ca=[];this.Be=null}var sj=-2147483648;function nj(a,b){return a.Z.index<b.Z.index?-1:a.Z.index>b.Z.index?1:0}
rj.prototype.stroke=function(a){if(Vc(this.ca)){console.trace();debugger}this.Z.Hc.push(this);a=this.Be=a;a.Hc.add(this);kb(Ji,a)};rj.prototype.remove=function(){var a=this.Be;a.Hc.remove(this);if(a.Hc.elements.length)kb(Ji,a);else{for(var b=a.gh.first();null!=b.item;){var c=b.next;Ab(b);Ab(b.Ec);b=c}Ab(a.Mj);ff.remove(a);lb(Ji,a)}};var Si={},Ti,tj,Ui=-1;Si.Je=[];
function Vi(){function a(C,H){if(C.ta.$<H.ta.$)return-1;if(C.ta.$>H.ta.$)return 1;if(C.ta.V<H.ta.V)return-1;if(C.ta.V>H.ta.V)return 1;C=R(H.ta,C.ta.f,C.ta.c);return 0>C?-1:0<C?1:0}function b(C,H){C=C[0];H=H[0];return C.y<H.y?-1:C.y>H.y?1:0}function c(C){if(!(2>C.length)){var H=2.197265625E7;var I=-1;for(var G,K,M=1;M<C.length;M++)G=C[M-1],K=C[M],G=new O(G.f,G.c,K.A,K.u),K=(G.length>>3)*(R(G,K.f,K.c)>>3),K>=H||-2E3>=K||(H=K,I=M);0>I||(G=C[I-1],K=C[I],H=K.Ua(G.f,G.c,K.A,K.u),M=K.length/(G.length+K.length),
H.weight=G.weight*(1-M)+K.weight*M,C.splice(I-1,2,H),c(C))}}function d(C){if(!(2>C.length)){var H=2.197265625E7;var I=-1;for(var G=C[C.length-1],K,M=0;M<C.length;M++,G=K)K=C[M],G=new O(G.f,G.c,K.A,K.u),G=(G.length>>3)*(R(G,K.f,K.c)>>3),G>=H||-2E3>=G||(H=G,I=M);0>I||(C.unshift.apply(C,ca(C.splice(I))),G=C.pop(),K=C.shift(),H=K.Ua(G.f,G.c,K.A,K.u),I=K.length/(G.length+K.length),H.weight=G.weight*(1-I)+K.weight*I,C.unshift(H),d(C))}}function e(C){function H(N,Q){var Ia=gd(N),fa=gd(Q),Pa=-Sc(N,Q)+Math.PI;
if(Pa<zc(165)){var Z=new S(N.A,N.u);Z.round();Z.fa=N.weight;Z.wa=255;G.push(Z);var Qa=new S(N.A-Ia.y,N.u+Ia.x);Qa.round();Qa.fa=Z.fa;Qa.wa=0;K.push(Qa);I(N);var Ca=new S(Q.f,Q.c);Ca.round();Ca.fa=Q.weight;Ca.wa=255;G.push(Ca);var nc=new S(Q.f-fa.y,Q.c+fa.x);nc.round();nc.fa=Ca.fa;nc.wa=0;K.push(nc);Pa<=zc(90)||(N=new S(N.A+Ia.x,N.u+Ia.y),N.round(),N.fa=Z.fa,N.wa=0,M.push([Qa,Z,N]),Q=new S(Q.f-fa.x,Q.c-fa.y),Q.round(),Q.fa=Ca.fa,Q.wa=0,M.push([Q,Ca,nc]))}else Ca=new S(Q.f,Q.c),Ca.fa=(N.weight+Q.weight)*
(1-Pa/Math.Jf),Ca.wa=255,G.push(Ca),Pa<=zc(195)?(fa=new S(-Ia.y-fa.y,Ia.x+fa.x),fa.scale(5E9/fa.lf()),fa.x+=Q.f,fa.y+=Q.c,fa.round(),fa.fa=Ca.fa,fa.wa=0,K.push(fa),I(N)):(nc=new S(N.A-Ia.y,N.u+Ia.x),nc.round(),nc.fa=Ca.fa,nc.wa=0,K.push(nc),I(N),Q=new S(Q.f-fa.y,Q.c+fa.x),Q.round(),Q.fa=Ca.fa,Q.wa=0,K.push(Q),M.push([nc,Ca,Q]))}function I(N){if(ba)ba=!1;else{var Q=K[K.length-2],Ia=G[G.length-2],fa=G[G.length-1],Pa=K[K.length-1];if(Ia.fa!=N.weight&&fa.fa!=N.weight)if(1E5<N.length){var Z=N.jb(5E4,0);
Z.round();Z.fa=N.weight;Z.wa=255;var Qa=N.jb(N.length-5E4,0);Qa.round();Qa.fa=N.weight;Qa.wa=255;M.push([Q,Ia,Z]);M.push([Q,Z,Qa,Pa]);M.push([Qa,fa,Pa])}else if(Z=new S(N.f+N.A>>1,N.c+N.u>>1),Z.round(),1E5>N.length){var Ca=5E4/N.length-.5;Qa=N.length/1E5;Z.fa=.5*(Ia.fa+fa.fa)*(1-Qa)+N.weight*Qa;Z.wa=255;Ca=new S(Z.x+(N.c-N.u)*Ca,Z.y+(N.A-N.f)*Ca);Ca.fa=Z.fa;Ca.wa=N.weight*Qa*255;Ca.round();M.push([Q,Ia,Z,Ca]);M.push([Q,Ca,Pa]);M.push([Ca,Z,fa,Pa])}else Z.fa=N.weight,Z.wa=255,M.push([Q,Ia,Z]),M.push([Q,
Z,Pa]),M.push([Z,fa,Pa]);else Ia.fa!=N.weight?5E4<N.length?(Z=N.jb(5E4,0),Z.round(),Z.fa=N.weight,Z.wa=255,M.push([Q,Ia,Z]),M.push([Q,Z,fa,Pa])):M.push([Q,Ia,fa,Pa]):fa.fa!=N.weight?5E4<N.length?(Z=N.jb(N.length-5E4,0),Z.round(),Z.fa=N.weight,Z.wa=255,M.push([Q,Ia,Z,Pa]),M.push([Z,fa,Pa])):M.push([Ia,fa,Pa,Q]):M.push([Q,Ia,fa,Pa])}}var G=[],K=[],M=[],ba=!1;if(C[0].f==C[C.length-1].A&&C[0].c==C[C.length-1].u){ba=!0;H(C[C.length-1],C[0]);M=[];for(var ja=1;ja<C.length;ja++)H(C[ja-1],C[ja]);H(C[C.length-
1],C[0])}else{var ma=C[0],za=gd(ma);ja=new S(ma.f,ma.c);ja.round();ja.fa=ma.weight;ja.wa=255;G.push(ja);ma=new S(ma.f-za.y,ma.c+za.x);ma.round();ma.fa=ja.fa;ma.wa=0;K.push(ma);for(ja=1;ja<C.length;ja++)H(C[ja-1],C[ja]);C=C[C.length-1];ma=gd(C);ja=new S(C.A,C.u);ja.round();ja.fa=C.weight;ja.wa=255;G.push(ja);ma=new S(C.A-ma.y,C.u+ma.x);ma.round();ma.fa=ja.fa;ma.wa=0;K.push(ma);I(C)}return M}function h(C){var H=new tb(Jb);C=q(C);for(var I=C.next();!I.done;I=C.next())I=I.value,Lf(I.bound.C-5E4,I.bound.m-
5E4,I.bound.M+5E4,I.bound.w+5E4,H);return H.elements}function g(C){var H=new tb(Rc);C=q(C);for(var I=C.next();!I.done;I=C.next())I=I.value,H.remove(id(I))||H.add(I);return H.elements}function k(C){var H=Xi(C,!1);C=[];for(var I=[];H.elements.length;){var G=Yi(H);G?Vc(G)?I.push(G):(G.cb=[],C.push(G)):console.log("failed circuit")}I=q(I);for(H=I.next();!H.done;H=I.next())$i(H.value,C);I=[];C=q(C);for(H=C.next();!H.done;H=C.next())if(G=H.value,0==G.cb.length)I.push(G);else{Zi(G);var K=q(G.cb);for(H=K.next();!H.done;H=
K.next())Zi(H.value);I.push(aj(G))}return I}function l(C,H,I){var G=Xi(C,!1);C=[];for(var K=new tb(Ld);G.elements.length;){a:{var M=G;var ba=[];ba.bound=new dd;var ja=0,ma=M.elements[ja],za=ma.elements.pop();ma.elements.length||M.elements.splice(ja,1);if(za)for(ba.bound.Ka(za.f,za.c);;){ba.push(za);ba.bound.Ka(za.A,za.u);if(za.A==ba[0].f&&za.u==ba[0].c)break a;ja=M.contains(new S(za.A,za.u));if(0>ja)break a;ma=M.elements[ja];za=wb(ma,id(za))-1;0>za&&(za+=ma.elements.length);za=ma.elements.splice(za,
1)[0];ma.elements.length||M.elements.splice(ja,1)}else ba=null}C.push(ba);if(ba[0].f!=ba[ba.length-1].A||ba[0].c!=ba[ba.length-1].u)M=ba[0],M.jh=ba,ba=new tb(kd),ba.x=M.f,ba.y=M.c,ba=K.Ka(ba),ba.add(M)}for(G=0;G<C.length;G++)if(M=C[G],M[0].f!=M[M.length-1].A||M[0].c!=M[M.length-1].u)ba=M[M.length-1],ja=K.contains(new S(ba.A,ba.u)),0>ja||(ma=K.elements[ja],ba=wb(ma,id(ba))-1,0>ba&&(ba+=ma.elements.length),ba=ma.elements.splice(ba,1)[0],ma.elements.length||K.elements.splice(ja,1),ja=C.indexOf(ba.jh),
C.splice(ja,1),ja<G&&G--,M.push.apply(M,ca(ba.jh)),M.bound.gj(ba.jh.bound),G--);K=q(C);for(G=K.next();!G.done;G=K.next())delete G.value.jh;K=q(C);for(G=K.next();!G.done;G=K.next())G=G.value,G[0].f==G[G.length-1].A&&G[0].c==G[G.length-1].u?d(G):c(G);K=[];C=q(C);for(G=C.next();!G.done;G=C.next())K=K.concat(e(G.value));C=[];K=q(K);for(G=K.next();!G.done;G=K.next())for(G=G.value,M=q(H),ja=M.next();!ja.done;ja=M.next()){a:for(ba=G,ja=q(ja.value),ma=ja.next();!ma.done;ma=ja.next()){ma=ma.value;za=[];for(var N=
ba[ba.length-1],Q=R(ma,N.x,N.y),Ia=0;Ia<ba.length;Ia++){var fa=ba[Ia],Pa=R(ma,fa.x,fa.y);if(0<Pa){if(0>Q){Q/=Q-Pa;var Z=1-Q,Qa=new S(N.x*Z+fa.x*Q,N.y*Z+fa.y*Q);Qa.fa=N.fa*Z+fa.fa*Q;Qa.wa=N.wa*Z+fa.wa*Q;za.push(Qa)}za.push(fa)}else 0>Pa?0<Q&&(Q/=Q-Pa,Z=1-Q,Qa=new S(N.x*Z+fa.x*Q,N.y*Z+fa.y*Q),Qa.fa=N.fa*Z+fa.fa*Q,Qa.wa=N.wa*Z+fa.wa*Q,za.push(Qa)):za.push(fa);N=fa;Q=Pa}if(3>za.length){ba=null;break a}ba=za}ba&&C.push(ba)}H=q(C);for(G=H.next();!G.done;G=H.next()){C=G.value;for(K=0;K<C.length;K++)G=C[K],
G.index?C[K]=G.index:(G.index=Si.ud.yb.length,C[K]=G.index,M=I(G),M.fa=225*G.fa,M.wa=G.wa,Si.ud.yb.push(M));Ti+=3*(C.length-2);Si.ud.rd.push(C)}}var m=ff.elements[Ui];if(m){Si.Je[2*Ui]=Ti;for(var n=new tb(a),r=new tb(b),p=new tb(b),t={},z=q(m.na),w=z.next();!w.done;t={yc:t.yc,Zc:t.Zc,vh:t.vh},w=z.next())if(t.Zc=w.value,t.Zc instanceof Hg){t.vh=function(C){return function(H){var I=H.ta,G=Math.atan2(I.V,I.$)-Math.atan2(C.yc.V,C.yc.$);if(Math.abs(G>Math.PI?G-Math.Jf:G<-Math.PI?G+Math.Jf:G)>zc(5))return!1;
G=I.weight/(I.weight+1);var K=1-G;G=I.Ua(Math.round(I.f*G+C.yc.f*K),Math.round(I.c*G+C.yc.c*K),Math.round(I.A*G+C.yc.A*K),Math.round(I.u*G+C.yc.u*K));if(500<=Math.abs(R(G,C.yc.f,C.yc.c))||500<=Math.abs(R(G,C.yc.A,C.yc.u))||500<=Math.abs(R(G,I.f,I.c))||500<=Math.abs(R(G,I.A,I.u)))return!1;H.ta=G;G.weight=I.weight+1;H.push(C.Zc);return!0}}(t);var y=function(C){return function(){for(var H=q(n.elements),I=H.next();!I.done;I=H.next())if(C.vh(I.value))return!0;return!1}}(t);t.yc=id(t.Zc.T);if(!y()){var B=
[t.Zc];B.ta=t.yc;B.ta.weight=1;var A=n.Ka(B);A!=B&&A.push(t.Zc)}}else{var D=[t.Zc],F=void 0;t.Zc instanceof Ig?F=r.Ka(D):t.Zc instanceof Jg&&(F=p.Ka(D));F!=D&&F.push(t.Zc)}n=n.elements;r=r.elements;p=p.elements;for(var L={},da=q(n),P=da.next();!P.done;L={Vb:L.Vb,ge:L.ge},P=da.next()){var ka=P.value;L.ge=hd(ka.ta,-1E3);ka.ta=ka.ta.Ua(ka.ta.f+L.ge.x,ka.ta.c+L.ge.y,ka.ta.A+L.ge.x,ka.ta.u+L.ge.y);L.Vb=ka.ta;var X=[[],[],[],[]],qa=[],Kb=q(ka);for(w=Kb.next();!w.done;w=Kb.next()){var bb=w.value,yc=function(C,
H,I){C.f<H.m||C.f>H.w||C.u>H.o||C.c<H.h?I.push(C):(C.u<H.h&&I.push(C.Ua(C.f,H.h,C.A,C.u)),C.c>H.o&&I.push(C.Ua(C.f,C.c,C.A,H.o)))},ze=function(C,H,I){C.c<H.h||C.c>H.o||C.A>H.w||C.f<H.m?I.push(C):(C.A<H.m&&I.push(C.Ua(H.m,C.c,C.A,C.u)),C.f>H.w&&I.push(C.Ua(C.f,C.c,H.w,C.u)))},tf=function(C,H,I){C.f<H.m||C.f>H.w||C.c>H.o||C.u<H.h?I.push(C):(C.c<H.h&&I.push(C.Ua(C.f,C.c,C.A,H.h)),C.u>H.o&&I.push(C.Ua(C.f,H.o,C.A,C.u)))},Ae=function(C,H,I){C.c<H.h||C.c>H.o||C.f>H.w||C.A<H.m?I.push(C):(C.f<H.m&&I.push(C.Ua(C.f,
C.c,H.m,C.u)),C.A>H.w&&I.push(C.Ua(H.w,C.c,C.A,C.u)))},xa=new dd;xa.m=Math.round(L.Vb.getParameter(bb.T.A,bb.T.u));xa.w=Math.round(L.Vb.getParameter(bb.T.f,bb.T.c));xa.h=bb.h;xa.o=bb.o;for(var Eb=[[],[],[],[]],uf=q(X[0]),oa=uf.next();!oa.done;oa=uf.next())Ae(oa.value,xa,Eb[0]);var vf=q(X[1]);for(oa=vf.next();!oa.done;oa=vf.next())tf(oa.value,xa,Eb[1]);var wf=q(X[2]);for(oa=wf.next();!oa.done;oa=wf.next())ze(oa.value,xa,Eb[2]);var ta=q(X[3]);for(oa=ta.next();!oa.done;oa=ta.next())yc(oa.value,xa,Eb[3]);
X=Eb;for(var Yb=[[new O(xa.m,xa.h,xa.w,xa.h)],[new O(xa.w,xa.h,xa.w,xa.o)],[new O(xa.w,xa.o,xa.m,xa.o)],[new O(xa.m,xa.o,xa.m,xa.h)]],Be=q(qa),Ce=Be.next();!Ce.done;Ce=Be.next()){var md=Ce.value;Eb=[[],[],[],[]];var xf=q(Yb[0]);for(oa=xf.next();!oa.done;oa=xf.next())Ae(oa.value,md,Eb[0]);var Rd=q(Yb[1]);for(oa=Rd.next();!oa.done;oa=Rd.next())tf(oa.value,md,Eb[1]);var yf=q(Yb[2]);for(oa=yf.next();!oa.done;oa=yf.next())ze(oa.value,md,Eb[2]);var zf=q(Yb[3]);for(oa=zf.next();!oa.done;oa=zf.next())yc(oa.value,
md,Eb[3]);Yb=Eb}X[0].push.apply(X[0],ca(Yb[0]));X[1].push.apply(X[1],ca(Yb[1]));X[2].push.apply(X[2],ca(Yb[2]));X[3].push.apply(X[3],ca(Yb[3]));qa.push(xa)}X=X[0].concat(X[1].concat(X[2].concat(X[3])));ka.length=0;for(var Af=k(X),V=[],Aa=q(Af),la=Aa.next();!la.done;la=Aa.next()){for(var nd=la.value,jc=nd.slice(),kc=new dd,Bf=q(nd),ub=Bf.next();!ub.done;ub=Bf.next()){var De=ub.value;kc.Ka(De.A,De.u)}var Ee=L.Vb.jb(kc.m,0),Fe=L.Vb.jb(kc.w,0);jc.bound=new ge;jc.bound.Ka(Ee.y,kc.h,Ee.x);jc.bound.Ka(Fe.y,
kc.o,Fe.x);V.push.apply(V,ca(dj(jc)));ka.push(jc)}var sg=h(ka);X=[];for(var Sd=q(sg),Fb=Sd.next();!Fb.done;Fb=Sd.next())for(var Gb=q(Fb.value.na),Hb=Gb.next();!Hb.done;Hb=Gb.next()){var vb=Hb.value;if(vb instanceof Jg){var zb=fd(L.Vb,vb.ca);if(zb){zb[0]=Math.round(zb[0]);zb[1]=Math.round(zb[1]);var tg=new O(zb[1],vb.y,zb[0],vb.y);tg.weight=1;X.push(tg)}}else if(vb instanceof Ig){var Ec=fd(L.Vb,vb.ca);if(Ec){Ec[0]=Math.round(Ec[0]);Ec[1]=Math.round(Ec[1]);var Ge=new O(Ec[0],vb.y,Ec[1],vb.y);Ge.weight=
1;X.push(Ge)}}else{var od=L.Vb,Zb=vb.T,$b=R(od,Zb.f,Zb.c),lc=R(od,Zb.A,Zb.u),pd=od.getParameter(Zb.f,Zb.c),Td=od.getParameter(Zb.A,Zb.u);if($b<lc){if(!(-256>lc||256<$b)){var Cf=$b/($b-lc),Ud=Math.round(pd*(1-Cf)+Td*Cf),Df=Math.atan2(-$b,pd-Ud);if(!(Df<zc(15))){var Wa=new O(Ud,vb.h,Ud,vb.o);Wa.weight=(180*Df/Math.PI-15)/75;1<Wa.weight&&(Wa.weight=1);X.push(Wa)}}}else if($b>lc&&!(-256>$b)&&!(256<lc)){var Oa=$b/($b-lc),He=Math.round(pd*(1-Oa)+Td*Oa),Fc=Math.atan2(-lc,He-Td);if(!(Fc<zc(15))){var qd=new O(He,
vb.o,He,vb.h);qd.weight=(180*Fc/Math.PI-15)/75;1<qd.weight&&(qd.weight=1);X.push(qd)}}}}l(X,V,function(C){return function(H){var I=Math.round(H.x);H=Math.round(H.y);I/=C.Vb.length;return new Fd(Math.round(C.Vb.c+(C.Vb.u-C.Vb.c)*I)-C.ge.y,H,Math.round(C.Vb.f+(C.Vb.A-C.Vb.f)*I)-C.ge.x)}}(L))}var ac={},Vd=q(r);for(P=Vd.next();!P.done;ac={Ye:ac.Ye},P=Vd.next()){var Gc=P.value;ac.Ye=Gc[0].y;var Wc=[],eb=q(Gc);for(w=eb.next();!w.done;w=eb.next())Wc.push.apply(Wc,ca(w.value.ca));Gc.length=0;var Ie=k(g(Wc)),
Je=[],Hc=q(Ie);for(la=Hc.next();!la.done;la=Hc.next()){var Xc=la.value,mb=Xc.slice(),rd=new dd,Ta=q(Xc);for(ub=Ta.next();!ub.done;ub=Ta.next()){var sd=ub.value;rd.Ka(sd.A,sd.u)}mb.bound=new ge;mb.bound.C=rd.m;mb.bound.M=rd.w;mb.bound.m=rd.h;mb.bound.w=rd.o;mb.bound.h=mb.bound.o=ac.Ye;Je.push.apply(Je,ca(dj(mb)));Gc.push(mb)}var ug=h(Gc);Wc=[];var Ke=q(ug);for(Fb=Ke.next();!Fb.done;Fb=Ke.next()){var td=q(Fb.value.na);for(Hb=td.next();!Hb.done;Hb=td.next()){var bc=Hb.value;if(bc instanceof Hg&&!(bc.h>
ac.Ye||bc.o<=ac.Ye)){var Ic=bc.T.X();Ic.weight=1;Wc.push(Ic)}}}l(Wc,Je,function(C){return function(H){return new Fd(Math.round(H.y),C.Ye,Math.round(H.x))}}(ac))}var Jc={},Le=q(p);for(P=Le.next();!P.done;Jc={Ze:Jc.Ze},P=Le.next()){var ud=P.value;Jc.Ze=ud[0].y;var Yc=[],Ba=q(ud);for(w=Ba.next();!w.done;w=Ba.next())for(var vd=q(w.value.ca),mc=vd.next();!mc.done;mc=vd.next()){var wd=mc.value;Yc.push(wd.Ua(-wd.A,wd.u,-wd.f,wd.c))}ud.length=0;var Zc=k(g(Yc)),Wd=[],Xd=q(Zc);for(la=Xd.next();!la.done;la=
Xd.next()){var Yd=la.value,cc=Yd.slice(),$c=new dd,Zd=q(Yd);for(ub=Zd.next();!ub.done;ub=Zd.next()){var fj=ub.value;$c.Ka(fj.A,fj.u)}cc.bound=new ge;cc.bound.C=-$c.w;cc.bound.M=-$c.m;cc.bound.m=$c.h;cc.bound.w=$c.o;cc.bound.h=cc.bound.o=Jc.Ze;Wd.push.apply(Wd,ca(dj(cc)));ud.push(cc)}var uk=h(ud);Yc=[];var gj=q(uk);for(Fb=gj.next();!Fb.done;Fb=gj.next()){var hj=q(Fb.value.na);for(Hb=hj.next();!Hb.done;Hb=hj.next()){var xd=Hb.value;if(xd instanceof Hg&&!(xd.h>=Jc.Ze||xd.o<Jc.Ze)){var ij=xd.T.Ua(-xd.T.A,
xd.T.u,-xd.T.f,xd.T.c);ij.weight=1;Yc.push(ij)}}}l(Yc,Wd,function(C){return function(H){return new Fd(Math.round(H.y),C.Ze,-Math.round(H.x))}}(Jc))}Si.Je[2*Ui+1]=Ti-Si.Je[2*Ui];Ui++;return!0}tj=Si.ud;delete Si.ud;for(var Oe=0;Oe<ff.elements.length;Oe++)ff.elements[Oe].Qi=Si.Je[2*Oe],ff.elements[Oe].Pi=Si.Je[2*Oe+1];delete Si.Je;Ui=-1;tj.compile();return!1};u.Va=function(a){u.qa.call(this,a);this.b=new J(0,0,0);this.Jb=0;this.ea={Aa:-2147483648,pb:new J(1,1,1)};this.Ni=new xb;this.Sf=new dd};u.Va.prototype=Object.create(u.qa.prototype);u.Va.prototype.constructor=u.Va;u.Va.index=-2147483648;u.Va.prototype.create=function(){this.index=u.Va.index++;u.ii.push(this);u.qa.prototype.create.call(this)};u.Va.prototype.remove=function(){for(var a=this.Ni.first();null!=a.item;){var b=a.next;Ab(a);Ab(a.Ec);a=b}u.ii.remove(this);u.qa.prototype.remove.call(this)};
u.Va.prototype.step=function(){this.Sf.ie(this.b.z,this.b.x)||Wi(this);var a=Ff(this.b,new J(0,-1E8,0),null);a?(a=ef(a.item.aa))&&Wf(this.b,a,this.ea.pb):this.remove();u.qa.prototype.step.call(this)};
function Wi(a){for(var b=a.b.z-a.Jb,c=a.b.z+a.Jb,d=a.b.x-a.Jb,e=a.b.x+a.Jb,h=a.Ni.first(),g=[bf];g.length;){var k=g.shift();if(k instanceof qf)b<=k.value&&g.push(k.Ce),c>=k.value&&g.push(k.De);else if(k instanceof rf)d<=k.value&&g.push(k.Ce),e>=k.value&&g.push(k.De);else{for(;null!=h.item&&!(h.item.index>=k.index);){var l=h.next;Ab(h);Ab(h.Ec);h=l}if(h.item==k)h=h.next;else{l=new yb(k);var m=new yb(a);l.Ec=m;m.Ec=l;Cb(l,h);Bb(k.gh,m)}}}for(;null!=h.item;)g=h.next,Ab(h),Ab(h.Ec),h=g;a.Sf.m=(b>>19<<
19)+a.Jb;a.Sf.w=((c>>19)+1<<19)-a.Jb;a.Sf.h=(d>>19<<19)+a.Jb;a.Sf.o=((e>>19)+1<<19)-a.Jb}u.ii=new tb(Jb);u.ze=function(a){u.Node.call(this,a);this.Ta=1E5};u.ze.prototype=Object.create(u.Node.prototype);u.ze.prototype.constructor=u.ze;u.ze.color=new T(0,0,0,64);
u.ze.prototype.Oa=function(){var a=new U;a.G=0;a.K=0;a.L=this.Ta;a.I=this.Ta;a.m11=0;a.m12=0;a.J=0;a.m21=1;a.m22=0;a.H=this.Ba.H;a.m31=this.Ba.m31+500;a.m32=this.Ba.m32;var b=Ff(new J(this.Ba.H,this.Ba.m31,this.Ba.m32),new J(0,-1E8,0));b&&(a.m31-=b.d);u.D.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,0,4);u.Node.prototype.Oa.call(this)};var uj,vj=980700/3600*2,wj=new J(0,-vj,0),xj=new tb(Jb),yj=new u.Node("physProcessor");
yj.step=function(){uj=new uc;for(var a=q(xj.elements),b=a.next();!b.done;b=a.next()){b=b.value;b.Ud=0;b.t=0;b.Tj=zj(b.b,b.va,b.Ya);var c=b.Lj();b.input();b.Wd&&!b.hg()&&0<b.rf&&(b.s.x+=wj.x,b.s.y+=wj.y,b.s.z+=wj.z);b.s.scale(b.nk);var d=Md(b.s,b.bb,new J(0,0,0));if(0<b.rg){for(var e=b,h=b.Tj,g=new J(0,0,0),k=0;k<h.length;k++){var l=h[k],m=-Dc(d,l);if(!(0>=m)){m*=e.rg;var n=Dc(e.s,l);l=new J(e.s.x-l.x*n,e.s.y-l.y*n,e.s.z-l.z*n);m/=l.length();1<m&&(m=1);g.x-=l.x*m;g.y-=l.y*m;g.z-=l.z*m}}e.s.add(g)}b.Qa.set(.5*
b.bb.x+.5*b.s.x,.5*b.bb.y+.5*b.s.y,.5*b.bb.z+.5*b.s.z);b.Qa.y+=c;b.Qa.round();b.bound=Aj(b.b,b.va,b.Ya,b.Qa)}a=q(xj.elements);for(b=a.next();!b.done;b=a.next())b.value.handleEvent();for(a=0;!uj.Xg();){b=uj.pop();if(10<++a)break;b.target?(c=b.source,e=b.target,c.Ud==b.Xi&&e.Ud==b.Zj&&(c.Ud++,e.Ud++,Bj(c,b),Bj(e,b),c.handleEvent(),e.handleEvent(),c.ei(e),e.ei(c))):(c=b.source,c.Ud==b.Xi&&(c.Ud++,Bj(c,b),c.handleEvent()))}a=q(xj.elements);for(b=a.next();!b.done;b=a.next())b=b.value,b.b.x+=b.Qa.x,b.b.y+=
b.Qa.y,b.b.z+=b.Qa.z,b.bb.set(b.s.x,b.s.y,b.s.z),b.transform.H=b.b.x,b.transform.m31=b.b.y,b.transform.m32=b.b.z};function Cj(a){u.Va.call(this,a);this.s=new J(0,0,0);this.bb=new J(0,0,0);this.Ya=this.va=0;this.rf=1;this.rg=0;this.nk=1;this.qg=0;this.Vf=new tb(Jb);this.t=this.Ud=0;this.Qa=new J(0,0,0);this.Wd=!0}Cj.prototype=Object.create(u.Va.prototype);f=Cj.prototype;f.constructor=Cj;f.create=function(){u.Va.prototype.create.call(this);xj.add(this)};
f.remove=function(){u.Va.prototype.remove.call(this);xj.remove(this)};f.Lj=function(){return 0};function Bj(a,b){var c=(b.t-a.t)/(1-a.t);c=new J(a.Qa.x*c,a.Qa.y*c,a.Qa.z*c);c.round();a.b.add(c);a.Qa.sub(c);a.t=b.t}
f.handleEvent=function(){for(var a=new J(this.s.x,this.s.y,this.s.z),b=zj(this.b,this.va,this.Ya),c=Dj(this),d=0;d<b.length;d++){var e=b[d],h=!1,g=-Dc(this.s,e);0<g&&(2E3<g*this.qg&&(h=!0,g*=1+this.qg),this.s.x+=e.x*g,this.s.y+=e.y*g,this.s.z+=e.z*g);g=-Dc(this.Qa,e);0<g&&(h&&(g*=1+this.qg),this.Qa.x+=e.x*g,this.Qa.y+=e.y*g,this.Qa.z+=e.z*g)}for(d=0;d<c.length;d++){h=function(m,n){var r=Dc(m,e),p=Dc(n,e);var t=k.rf;var z=l.rf;r>=p?t=[r,p]:(t=(t*r+z*p)/(t+z),t=[t+(t-r)*k.qg,t+(t-p)*l.qg]);r=t[0]-r;
p=t[1]-p;m.x+=e.x*r;m.y+=e.y*r;m.z+=e.z*r;n.x+=e.x*p;n.y+=e.y*p;n.z+=e.z*p};e=c[d];var k=this,l=e.source;l.index<k.index||(h(k.Qa,l.Qa),h(k.s,l.s))}Mc(this.Qa,b);Mc(this.s,b);0<b.length+c.length&&(Md(this.s,a,a),a.ja(1),this.yj());this.bound=Aj(this.b,this.va,this.Ya,this.Qa);if(this.Qa.Yh())return null;u.pf();b=q(b);for(a=b.next();!a.done;a=b.next())a.value.source.Aa=u.Aa;c=q(c);for(a=c.next();!a.done;a=c.next())a.value.source.Aa=u.Aa;0>=this.va||!(c=Ej(this,this.b,this.va,this.Ya,this.Qa,!0))||
(c.source=this,c.Xi=this.Ud,c.target&&(c.Zj=c.target.Ud),uj.add(c,c.t))};
function Ej(a,b,c,d,e,h){for(var g=new sf(b,e,c),k=null,l=1,m=g.next();m&&!(m.t>l);){m=q(m.node.na);for(var n=m.next();!n.done;n=m.next())if(n=n.value,n.Aa!=u.Aa&&(n=n.nd(b,c,d,e)))n.d=n.t*e.length(),-1>n.d||(n.t=a.t+n.t*(1-a.t),n.t>=l||(k=n,l=n.t));m=g.next()}g=q(jf);for(n=g.next();!n.done;n=g.next())if(m=n.value,m.Aa!=u.Aa&&(m=m.nd(b,c,d,e)))m.d=m.t*e.length(),-1>m.d||(m.t=a.t+m.t*(1-a.t),m.t>=l||(k=m,l=m.t));if(!h)return k;for(b=0;b<xj.elements.length;b++){c=xj.elements[b];if(d=a!=c)if(d=c.Aa!=
u.Aa)if(d=!a.Vf.get(c))if(d=!c.Vf.get(a))d=a.bound,e=c.bound,d=d.m>=e.w||d.w<=e.m||d.h>=e.o||d.o<=e.h||d.C>=e.M||d.M<=e.C?!1:!0;if(d){d=a.t>c.t?a.t:c.t;e=Fj(a,d);h=Fj(c,d);a:{var r=e.tj,p=e.r,t=e.g,z=e.Mb;n=h.tj;g=h.r;var w=h.g;m=h.Mb;if(0==t&&0==w)t=r,w=Md(t,n,new J(0,0,0)),r=Md(z,m,new J(0,0,0)),0==r.length()?g=null:(w=Cc(w,r,p+g))?(z=new J(t.x+z.x*w.Ca,t.y+z.y*w.Ca,t.z+z.z*w.Ca),m=new J(n.x+m.x*w.Ca,n.y+m.y*w.Ca,n.z+m.z*w.Ca),n=new Gj,n.t=w.Ca,p=g/(g+p),t=1-p,n.p=(new J(m.x*t+z.x*p,m.y*t+z.y*p,
m.z*t+z.z*p)).round(),n.n=new J((n.p.x-m.x)/g,(n.p.y-m.y)/g,(n.p.z-m.z)/g),g=n):g=null;else{var y=new J(r.x-n.x,0,r.z-n.z),B=new J(z.x-m.x,0,z.z-m.z);if(0==B.length())g=null;else if(y=Cc(y,B,p+g)){var A=new J(r.x+z.x*y.Ca,r.y+z.y*y.Ca,r.z+z.z*y.Ca);B=new J(n.x+m.x*y.Ca,n.y+m.y*y.Ca,n.z+m.z*y.Ca);var D=g/(g+p),F=1-D;A=new J(B.x*F+A.x*D,B.y*F+A.y*D,B.z*F+A.z*D);A.round();if(A.y>B.y+w){y=new J(r.x-n.x,r.y-t-(n.y+w),r.z-n.z);B=Md(z,m,new J(0,0,0));y=Cc(y,B,p+g);if(!y){g=null;break a}A=new J(r.x+z.x*y.Ca,
r.y-t+z.y*y.Ca,r.z+z.z*y.Ca);B=new J(n.x+m.x*y.Ca,n.y+w+m.y*y.Ca,n.z+m.z*y.Ca);m=new Gj;m.t=y.Ca;D=g/(g+p);F=1-D;m.p=(new J(B.x*F+A.x*D,(B.y+w)*F+(A.y-t)*D,B.z*F+A.z*D)).round();m.n=new J((m.p.x-B.x)/g,(m.p.y-(B.y+w))/g,(m.p.z-B.z)/g)}else if(A.y<B.y-w){y=new J(r.x-n.x,r.y+t-(n.y-w),r.z-n.z);B=Md(z,m,new J(0,0,0));y=Cc(y,B,p+g);if(!y){g=null;break a}A=new J(r.x+z.x*y.Ca,r.y+t+z.y*y.Ca,r.z+z.z*y.Ca);B=new J(n.x+m.x*y.Ca,n.y-w+m.y*y.Ca,n.z+m.z*y.Ca);m=new Gj;m.t=y.Ca;D=g/(g+p);F=1-D;m.p=(new J(B.x*
F+A.x*D,(B.y-w)*F+(A.y+t)*D,B.z*F+A.z*D)).round();m.n=new J((m.p.x-B.x)/g,(m.p.y-(B.y-w))/g,(m.p.z-B.z)/g)}else m=new Gj,m.t=y.Ca,m.p=A,m.n=new J((m.p.x-B.x)/g,0,(m.p.z-B.z)/g);g=m}else g=null}}g&&(g.d=g.t*Md(e.Mb,h.Mb,new J(0,0,0)).length(),-1>g.d||(g.t=d+g.t*(1-d),g.t>=l||(g.target=c,k=g,l=g.t)))}}return k}
function Fj(a,b){b=(b-a.t)/(1-a.t);b=new J(a.Qa.x*b,a.Qa.y*b,a.Qa.z*b);b.round();var c={};c.tj=(new J(a.b.x,a.b.y,a.b.z)).add(b);c.r=a.va;c.g=a.Ya;c.Mb=(new J(a.Qa.x,a.Qa.y,a.Qa.z)).sub(b);return c}function zj(a,b,c){var d=Kf(a,b),e=[];u.pf();d=q(d);for(var h=d.next();!h.done;h=d.next()){var g=q(h.value.na);for(h=g.next();!h.done;h=g.next())h.value.Ng(a,b,c,e)}d=q(jf);for(h=d.next();!h.done;h=d.next())h.value.Ng(a,b,c,e);return e}
function Dj(a){for(var b=[],c=0;c<xj.elements.length;c++){var d=xj.elements[c];if(a!=d&&!a.Vf.get(d)&&!d.Vf.get(a)){var e=a.b;var h=a.va,g=a.Ya,k=d.b,l=d.va,m=d.Ya;if(0==g&&0==m){e=new J(e.x-k.x,e.y-k.y,e.z-k.z);var n=e.ja(1);e.d=Dc(new J(k.x+e.x*l,k.y+e.y*l,k.z+e.z*l),e)+h;n-=h+l;e=2<n||n<-h?null:e}else{if(e.y-g>k.y+m){n=new J(e.x-k.x,e.y-g-(k.y+m),e.z-k.z);var r=n.ja(1);e=new J(k.x+n.x*l,k.y+n.y*l,k.z+n.z*l)}else e.y+g<k.y-m?(n=new J(e.x-k.x,e.y+g-(k.y-m),e.z-k.z),r=n.ja(1),e=new J(k.x+n.x*l,k.y+
n.y*l,k.z+n.z*l)):(n=new J(e.x-k.x,0,e.z-k.z),r=n.ja(1),e=new J(k.x+n.x*l,(e.y*m+k.y*g)/(g+m),k.z+n.z*l));n.d=Dc(e,n)+h;r-=h+l;e=2<r||r<-h?null:n}e&&(e.source=d,b.push(e))}}return b}f.yj=function(){};f.ei=function(){};f.input=function(){};f.hg=function(){return!1};function Hj(a){Cj.call(this,a);this.Ci=this.Kh=this.Ad=this.Zh=this.nf=this.ac=0;this.Yg=this.Df=Number.NEGATIVE_INFINITY;this.lg=!1;this.Hh=!0;this.Uj=!1;this.Vd=0;this.Rg=18}Hj.prototype=Object.create(Cj.prototype);
Hj.prototype.constructor=Hj;Hj.If=function(a){return Math.sqrt(2*a*vj)};f=Hj.prototype;f.hg=function(){return this.Df<u.l-1?!1:!0};function Ij(a){a.s.y=a.Zh;a.Df=Number.NEGATIVE_INFINITY;a.Yg=Number.NEGATIVE_INFINITY;a.lg=!0}
f.Lj=function(){var a=0,b=this.Uj?this.Kh:this.Ad,c=new J(this.b.x,this.b.y-this.Ya,this.b.z);0>=this.s.y&&(this.lg=!1);if(this.hg()){this.lg=!1;var d=0;u.pf();var e=this.Ci;if(e=Ej(this,c,this.va,0,new J(0,-e,0)))d=e.d;c.y-=d;c=zj(c,this.va,0);e=Number.NEGATIVE_INFINITY;for(var h=0;h<c.length;h++){var g=c[h];g.y>e&&(e=g.y)}0<e&&(this.Df=u.l,a=b-2*(this.va+this.Ya)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}else if(!this.lg){d=0;u.pf();e=this.Ad-2*this.Ya-this.va;if(e=Ej(this,c,this.va,0,new J(0,-e,
0)))d=e.d;c.y-=d;c=zj(c,this.va,0);e=Number.NEGATIVE_INFINITY;for(h=0;h<c.length;h++)g=c[h],g.y>e&&(e=g.y);0<e&&(this.Df=u.l,this.Hh=!0,a=b-2*(this.va+this.Ya)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}return a};f.Sh=function(){return new J(0,0,0)};f.bj=function(){};
f.input=function(){Cj.prototype.input.call(this);this.bj();var a=this.Sh();if(u.B.ka==this){var b=this.transform;a.set(b.G*a.x+b.J*a.z,0,b.L*a.x+b.m22*a.z)}b=a.ja(1);0==b&&(this.Vd=0);if(this.hg())0<b&&(this.s.x+=a.x*this.nf,this.s.z+=a.z*this.nf,this==u.B.ka&&(this.Vd>=2*this.Rg&&(this.Vd=0),0==this.Vd?u.v.sa.get("stepConcrete01").play({gain:.5}):this.Vd==this.Rg&&u.v.sa.get("stepConcrete02").play({gain:.5})),this.Vd=this.Sa&&.5<this.Sa.focus?this.Vd+.5:this.Vd+1),this.s.scale(this.ac/(this.ac+this.nf));
else{b=.25*this.nf;var c=new S(this.s.z,this.s.x),d=c.length(),e=Dc(this.s,a);0>e&&(e=0);e>this.ac&&(e=this.ac);b=this.ac/(this.ac+b)*(e+b)-e;d>this.ac&&c.scale(Math.max(0,d-b)/d);c.x+=a.z*b;c.y+=a.x*b;this.s.z=c.x;this.s.x=c.y}this.Yg<u.l-0||this.Df<u.l-15?this.Yg<u.l-0||!this.Hh||(Ij(this),this.Hh=!1):Ij(this)};var Jj=2;function Kj(a){return a&0==Jj}function Gf(){return!0}function Gj(){this.index=Lj++;this.t=NaN;this.n=this.p=null;this.Fa=!0}var Lj=-2147483648;function If(a,b){return a.t<b.t?-1:a.t>b.t?1:1==a.Fa&&0==b.Fa?-1:0==a.Fa&&1==b.Fa?1:a.index<b.index?-1:a.index>b.index?1:0}
function Aj(a,b,c,d){var e=new ge,h=a.z-b;h<e.C&&(e.C=h);h=a.z+b;h>e.M&&(e.M=h);h=a.z+d.z-b;h<e.C&&(e.C=h);h=a.z+d.z+b;h>e.M&&(e.M=h);h=a.x-b;h<e.m&&(e.m=h);h=a.x+b;h>e.w&&(e.w=h);h=a.x+d.x-b;h<e.m&&(e.m=h);h=a.x+d.x+b;h>e.w&&(e.w=h);b+=c;c=a.y-b;c<e.h&&(e.h=c);c=a.y+b;c>e.o&&(e.o=c);c=a.y+d.y-b;c<e.h&&(e.h=c);c=a.y+d.y+b;c>e.o&&(e.o=c);return e}
function Mj(a,b,c,d,e){var h=Cc(new J(a.x-c.x,0,a.z-c.z),new J(b.x,0,b.z),d);if(!h)return null;d=new Gj;d.t=h.Ca;d.p=new J(a.x+b.x*d.t,a.y+b.y*d.t,a.z+b.z*d.t);d.n=new J(d.p.x-c.x,0,d.p.z-c.z);d.n.ja(1);var g=new Gj;g.t=h.mc;g.p=new J(a.x+b.x*g.t,a.y+b.y*g.t,a.z+b.z*g.t);g.n=new J(g.p.x-c.x,0,g.p.z-c.z);g.n.ja(1);if(0<b.y){h=(c.y-e-a.y)/b.y;var k=(c.y+e-a.y)/b.y;h>d.t&&(d=new Gj,d.t=h,d.p=new J(a.x+b.x*d.t,c.y-e,a.z+b.z*d.t),d.n=new J(0,-1,0));k<g.t&&(g=new Gj,g.t=k,g.p=new J(a.x+b.x*g.t,c.y+e,a.z+
b.z*g.t),g.n=new J(0,1,0))}else if(0>b.y)h=(c.y+e-a.y)/b.y,k=(c.y-e-a.y)/b.y,h>d.t&&(d=new Gj,d.t=h,d.p=new J(a.x+b.x*d.t,c.y+e,a.z+b.z*d.t),d.n=new J(0,1,0)),k<g.t&&(g=new Gj,g.t=k,g.p=new J(a.x+b.x*g.t,c.y-e,a.z+b.z*g.t),g.n=new J(0,-1,0));else if(a.y>c.y+e||a.y<c.y-e)return null;if(d.t>g.t)return null;d.Fa=!0;g.Fa=!1;return d}
function Nj(a,b,c,d,e){var h=new J(c.x,NaN,c.z),g=new J,k=new J,l=new S(c.z-a.z,c.x-a.x);var m=new S(b.z,b.x);var n=m.ja(1);l=Kd(l,m);h.y=a.y+b.y/n*l;h.y>c.y+e?(h.y=c.y+e,m=Dc((new J(c.x,c.y+e,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):h.y<c.y-e?(h.y=c.y-e,m=Dc((new J(c.x,c.y-e,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):g.set(a.x+m.y*l,h.y,a.z+m.x*l);Md(h,g,k);m=k.ja(1);if(m<d){l=n=null;var r=Cc(new J(a.x-c.x,0,a.z-c.z),new J(b.x,0,b.z),d);if(r){var p=new Gj;p.t=r.Ca;p.p=new J(a.x+
b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t);p.p.y<=c.y+e&&p.p.y>=c.y-e&&(p.n=new J(p.p.x-c.x,0,p.p.z-c.z),p.n.ja(1),p.Fa=!0,n=p);p=new Gj;p.t=r.mc;p.p=new J(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t);p.p.y<=c.y+e&&p.p.y>=c.y-e&&(p.n=new J(p.p.x-c.x,0,p.p.z-c.z),p.n.ja(1),p.Fa=!1,l=p)}if(!n||!l)if(r=Bc(a,b,new J(c.x,c.y+e,c.z),d))n||(p=new Gj,p.t=r.Ca,p.p=new J(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y>c.y+e&&(p.n=new J(p.p.x-c.x,p.p.y-(c.y+e),p.p.z-c.z),p.n.ja(1),p.Fa=!0,n=p)),l||(p=new Gj,p.t=r.mc,p.p=new J(a.x+
b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y>c.y+e&&(p.n=new J(p.p.x-c.x,p.p.y-(c.y+e),p.p.z-c.z),p.n.ja(1),p.Fa=!1,l=p));if(!n||!l)if(r=Bc(a,b,new J(c.x,c.y-e,c.z),d))n||(p=new Gj,p.t=r.Ca,p.p=new J(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y<c.y-e&&(p.n=new J(p.p.x-c.x,p.p.y-(c.y-e),p.p.z-c.z),p.n.ja(1),p.Fa=!0,n=p)),l||(p=new Gj,p.t=r.mc,p.p=new J(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y<c.y-e&&(p.n=new J(p.p.x-c.x,p.p.y-(c.y-e),p.p.z-c.z),p.n.ja(1),p.Fa=!1,l=p));if(n&&l)return{Le:n,Bc:l}}return{sg:g,
Ok:h,Ed:k,Dh:m,Nk:d}}function Oj(a,b,c,d){b=Bc(d,c,a,b);if(!b)return null;var e=new Gj;e.t=-b.mc;e.p=d;e.n=(new J(a.x-(d.x+c.x*b.mc),a.y-(d.y+c.y*b.mc),a.z-(d.z+c.z*b.mc))).round();e.n.ja(1);e.Fa=!0;return e}
function Pj(a,b,c,d,e){var h=Dc(c,e);c=new J(c.x-e.x*h,c.y-e.y*h,c.z-e.z*h);d=new J(d.x-a.x,d.y-a.y,d.z-a.z);var g=Dc(d,e);d.set(d.x-e.x*g,d.y-e.y*g,d.z-e.z*g);b=Cc(d,c,b);if(!b)return null;g=new Gj;g.t=-b.mc;g.p=(new J(a.x+d.x+e.x*h*g.t,a.y+d.y+e.y*h*g.t,a.z+d.z+e.z*h*g.t)).round();g.n=new J(-(d.x+c.x*b.mc),-(d.y+c.y*b.mc),-(d.z+c.z*b.mc));g.n.ja(1);g.Fa=!0;return g}
Ig.prototype.nd=function(a,b,c,d){c=this.y+c;if(0<=d.y)var e=null;else{var h=new Gj;h.t=-(a.y-c-b)/d.y;h.p=(new J(a.x+d.x*h.t,a.y-b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new J(0,1,0);e=h}if(!e)return null;if(0==Tc(e.p.z,e.p.x,this.ca).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ca.length;l++){var m=this.ca[l];e=new J(m.c,c,m.f);var n=new J(m.u-m.c,0,m.A-m.f);n.scale(1/m.length);(e=Pj(a,b,d,e,n))?(n=m.getParameter(e.p.z,e.p.x),!(0>n||n>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.ca.length-1)+1:h|3<<l-1}for(l=0;l<this.ca.length;l++)h&1<<l||(m=this.ca[l],(e=Oj(a,b,d,new J(m.u,c,m.A)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
Jg.prototype.nd=function(a,b,c,d){c=this.y-c;if(0>=d.y)var e=null;else{var h=new Gj;h.t=-(c-a.y-b)/-d.y;h.p=(new J(a.x+d.x*h.t,a.y+b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new J(0,-1,0);e=h}if(!e)return null;if(0==Tc(e.p.z,e.p.x,this.ca).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ca.length;l++){var m=this.ca[l];e=new J(m.c,c,m.f);var n=new J(m.u-m.c,0,m.A-m.f);n.scale(1/m.length);(e=Pj(a,b,d,e,n))?(n=m.getParameter(e.p.z,e.p.x),!(0>n||n>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.ca.length-1)+1:h|3<<l-1}for(l=0;l<this.ca.length;l++)h&1<<l||(m=this.ca[l],(e=Oj(a,b,d,new J(m.u,c,m.A)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
Hg.prototype.nd=function(a,b,c,d){var e=this.T,h=this.h-c;c=this.o+c;if(0<=R(e,e.f+d.z,e.c+d.x))var g=null;else{var k=new J(e.A-e.f,0,e.c-e.u);k.scale(1/e.length);var l=Dc(d,k),m=new Gj;m.t=-(R(e,a.z,a.x)-b)/l;m.p=(new J(a.x-k.x*b+d.x*m.t,a.y-k.y*b+d.y*m.t,a.z-k.z*b+d.z*m.t)).round();m.n=k;g=m}if(!g)return null;k=0;var n=e.getParameter(g.p.z,g.p.x);0>n&&(k|=1);g.p.y>c&&(k|=2);n>e.length&&(k|=4);g.p.y<h&&(k|=8);if(0==k)return g.item=this,g;if(0==b)return null;k=0;l=null;m=Number.POSITIVE_INFINITY;
g=new J(e.c,h,e.f);n=new J(0,1,0);g=Pj(a,b,d,g,n);g?!(g.p.y<h||g.p.y>c)&&g.t<m&&(m=g.t,l=g):k|=9;g=new J(e.c,c,e.f);n=new J(e.u-e.c,0,e.A-e.f);n.scale(1/e.length);(g=Pj(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<m&&(m=g.t,l=g)):k|=3;g=new J(e.u,c,e.A);n=new J(0,-1,0);g=Pj(a,b,d,g,n);g?!(g.p.y>c||g.p.y<h)&&g.t<m&&(m=g.t,l=g):k|=6;g=new J(e.u,h,e.A);n=new J(e.c-e.u,0,e.f-e.A);n.scale(1/e.length);(g=Pj(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<m&&(m=g.t,
l=g)):k|=18;0==(k&1)&&(g=new J(e.c,c,e.f),(g=Oj(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&2)&&(g=new J(e.u,c,e.A),(g=Oj(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&4)&&(g=new J(e.u,h,e.A),(g=Oj(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&8)&&(g=new J(e.c,h,e.f),(g=Oj(a,b,d,g))&&g.t<m&&(l=g));return l?(l.item=this,l):null};
Ig.prototype.Ng=function(a,b,c,d){c=this.y+c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ca.length;k++){e=this.ca[k];var l=R(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new J(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new J(e.c,c,e.f):h>e.length?e=new J(e.u,c,e.A):(h/=e.length,g=1-h,e=new J(e.c*g+e.u*h,c,e.f*g+e.A*h),e.round()));c=new J(a.x-e.x,a.y-e.y,a.z-e.z);c.ja(1);c.d=Dc(e,c)+b;a=Dc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Jg.prototype.Ng=function(a,b,c,d){c=this.y-c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ca.length;k++){e=this.ca[k];var l=R(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new J(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new J(e.c,c,e.f):h>e.length?e=new J(e.u,c,e.A):(h/=e.length,g=1-h,e=new J(e.c*g+e.u*h,c,e.f*g+e.A*h),e.round()));c=new J(a.x-e.x,a.y-e.y,a.z-e.z);c.ja(1);c.d=Dc(e,c)+b;a=Dc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Hg.prototype.Ng=function(a,b,c,d){var e=this.h-c,h=this.o+c;c=null;var g=this.T;var k=g.getParameter(a.z,a.x);if(0>k)k=new J(g.c,a.y,g.f),k.y>h?k.y=h:k.y<e&&(k.y=e);else if(k>g.length)k=new J(g.u,a.y,g.A),k.y>h?k.y=h:k.y<e&&(k.y=e);else{k/=g.length;var l=1-k;k=new J(g.c*l+g.u*k,a.y,g.f*l+g.A*k);k.y>h?k.y=h:k.y<e?k.y=e:(c=new J(g.A-g.f,0,g.c-g.u),c.scale(1/g.length));k.round()}null==c&&(c=new J(a.x-k.x,a.y-k.y,a.z-k.z),c.ja(1));c.d=Dc(k,c)+b;a=Dc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Ig.prototype.Di=function(a,b){var c=sb(.5*wj.y,b.y,a.y-this.y);if(!c)return null;var d=new Gj;d.t=c.mc;if(0>d.t)return null;d.p=(new J(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=q(this.ca);for(b=a.next();!b.done;b=a.next())if(0>R(b.value,d.p.z,d.p.x))return null;d.n=new J(0,1,0);return d};
Jg.prototype.Di=function(a,b){if(a.y>=this.y)return null;var c=sb(.5*wj.y,b.y,a.y-this.y);if(!c)return null;var d=new Gj;d.t=c.Ca;if(0>d.t)return null;d.p=(new J(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=q(this.ca);for(b=a.next();!b.done;b=a.next())if(0>R(b.value,d.p.z,d.p.x))return null;d.n=new J(0,-1,0);return d};
Hg.prototype.Di=function(a,b){var c=R(this.T,a.z,a.x);if(0>c)return null;var d=hd(this.T,1),e=d.x*b.z+d.y*b.x;if(0<=e)return null;var h=new Gj;h.t=-c/e;if(0>h.t)return null;h.p=(new J(a.x+b.x*h.t,a.y+.5*(2*b.y+wj.y*h.t)*h.t,a.z+b.z*h.t)).round();if(h.p.y>=this.o||h.p.y<this.h)return null;a=this.T.getParameter(h.p.z,h.p.x);if(0>a||a>=this.T.length)return null;h.n=new J(d.y,0,d.x);return h};function Qj(){this.height=this.width=2;this.depth=this.color=null}
Qj.prototype.create=function(){this.object=v.createFramebuffer();v.bindFramebuffer(v.FRAMEBUFFER,this.object);var a=this.color=new u.Dd;a.width=this.width;a.height=this.height;a.Wg=v.RGBA8;a.format=v.RGBA;a.type=v.UNSIGNED_BYTE;a.ne=v.NEAREST;a.mf=v.NEAREST;a.create();v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,a.object,0);a=this.depth=v.createRenderbuffer();v.bindRenderbuffer(v.RENDERBUFFER,a);v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH24_STENCIL8,this.width,this.height);
v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.RENDERBUFFER,a)};function Rj(a){Xf.call(this,a);this.Ba=new U;this.pitch=this.heading=0;this.Yf=112;this.dd=zc(40);this.Ck=!1;this.mh=8E3}Rj.prototype=Object.create(Xf.prototype);Rj.prototype.constructor=Rj;Rj.prototype.create=function(){var a=this.Li=new Xf;a.Ba=this.O;W(a,this);a=this.Mi=new Xf;a.Ba=this.O;W(a,this);return this};
Rj.prototype.step=function(){this.Yf+=Xe.a;0>this.Yf&&(this.Yf=0);this.transform.m32=Math.pow(1.125,this.Yf);Xe.d[2]&&(this.heading-=4E6*Xe.hc.x,this.pitch+=4E6*Xe.hc.y);var a=Ac(this.heading),b=Ac(this.pitch);ae(this.Ba);this.Ba.rotate(a,b,0);a=this.Ba.ef();var c=this.Ba.ff();b=this.Ba.sd();if(Xe.d[1]){var d=2*Math.tan(this.dd)*this.transform.m32/u.canvas.height,e=-Xe.hc.x*d;d*=Xe.hc.y;this.Ba.H+=e*a.x+d*c.x;this.Ba.m31+=e*a.y+d*c.y;this.Ba.m32+=e*a.z+d*c.z}c=new J(0,0,0);Ye.d.KeyW&&--c.z;Ye.d.KeyS&&
(c.z+=1);Ye.d.KeyA&&--c.x;Ye.d.KeyD&&(c.x+=1);if(e=c.length())c.scale(this.transform.m32/(60*e)),this.Ba.H+=c.x*a.x+c.z*b.x,this.Ba.m31+=c.x*a.y+c.z*b.y,this.Ba.m32+=c.x*a.z+c.z*b.z;a=this.Li;ae(a.transform);a.transform.H=-this.mh;a.transform.rotate(Math.atan(.5*-this.mh/this.transform.m32),0,0);a.dd=this.dd;a=this.Mi;ae(a.transform);a.transform.H=this.mh;a.transform.rotate(Math.atan(.5*this.mh/this.transform.m32),0,0);a.dd=this.dd;Xf.prototype.step.call(this);return this};u.Animation=function(){u.Node.call(this);this.length=0;this.Hb=NaN;this.Uf={}};u.Animation.prototype=Object.create(Node.prototype);f=u.Animation.prototype;f.constructor=u.Animation;f.step=function(){Node.prototype.step.call(this)};f.play=function(){this.Hb=u.l};f.key=function(a,b,c){var d=this.Uf[a];d||(d=this.Uf[a]=new Sj);return d.key(b,c)};f.print=function(){console.log("{");console.log("let a = new NG.Animation();");for(var a in this.Uf)this.Uf.hasOwnProperty(a)&&this.Uf[a].print(a);console.log("}")};
u.Animation.W=function(a,b){b.reset();b.translate(a[0],a[1],a[2]);b.rotate(a[3],a[4],a[5]);return b};function Sj(){this.keys=new tb(Tj)}Sj.prototype.key=function(a,b){var c=this.keys.get(a);c||(c=new Uj,c.t=a,this.keys.add(c));c.Mb=b;return c};Sj.prototype.print=function(a){for(var b=0;b<this.keys.elements.length;b++){var c=this.keys.elements[b];console.log("a.key('"+a+"', "+c.t+", "+c.Mb+");")}};function Uj(){this.Mb=this.t=0}
function Tj(a,b){return isNaN(a)?a.t<b.t?-1:a.t>b.t?1:0:a<b.t?-1:a>b.t?1:0};function ti(a,b,c,d,e,h){u.Node.call(this);this.b=new J(a.c,b+112500,a.f);this.Ah=-Infinity;this.Ig=NaN;this.open=this.state=0;W(this,u.Ve);var g=new gg(u.v.Yd.get("bayDoor01"));g.transform.H=this.b.x;g.transform.m31=this.b.y;g.transform.m32=this.b.z;g.transform.G=-a.$;g.transform.L=a.V;g.transform.J=-a.V;g.transform.m22=-a.$;W(g,u.Ve);g.create();ke(g,e.ea);var k=q(g.Qc);for(b=k.next();!b.done;b=k.next())b=b.value,b.Kg=!0,b.D=u.v.la.get("physical"),b.ma=u.v.ba.get("BayDoor01"),b.da=dh,b.Ja=["portalLightIndex",
e.qe,!0,"color",Cd,!1];this.dh=g;this.cc=c;this.wf=e;c=new gg(u.v.Yd.get("bayDoor01"));c.transform.H=this.b.x;c.transform.m31=this.b.y;c.transform.m32=this.b.z;c.transform.G=a.$;c.transform.L=-a.V;c.transform.J=a.V;c.transform.m22=a.$;W(c,u.Ve);c.create();ke(c,h.ea);e=q(c.Qc);for(b=e.next();!b.done;b=e.next())b=b.value,b.Kg=!0,b.D=u.v.la.get("physical"),b.ma=u.v.ba.get("BayDoor01"),b.da=dh,b.Ja=["portalLightIndex",h.qe,!0,"color",Cd,!1];this.bh=c;this.rc=d;this.vf=h;this.na=[];h=[new S(-6250,-112500),
new S(6250,-112500),new S(6250,112500),new S(-6250,112500)];for(d=0;d<h.length;d++)h[d]=a.jb(h[d].x,h[d].y);a=[];d=h[h.length-1];h=q(h);for(c=h.next();!c.done;c=h.next())c=c.value,a.push(new O(d.x,d.y,c.x,c.y)),d=c;this.na.push(new Jg(a,this.b.y-112500));this.na.push(new Hg(jd(a[0]),this.b.y-112500,this.b.y+112500),new Hg(jd(a[2]),this.b.y-112500,this.b.y+112500));a=q(this.na);for(d=a.next();!d.done;d=a.next())d=d.value,d.item=this,d.gf();jf.push.apply(jf,ca(this.na));this.update()}ti.prototype=Object.create(u.Node.prototype);
f=ti.prototype;f.constructor=ti;
f.step=function(){if(!(u.l%4)){for(var a=Infinity,b=q(u.B.Gc),c=b.next();!c.done;c=b.next())c=c.value,c.eb&&(c=Math.abs(c.b.x-this.b.x)+Math.abs(c.b.y-this.b.y)+Math.abs(c.b.z-this.b.z),c<a&&(a=c));u.B.ka&&(b=u.B.ka,b=Math.abs(b.b.x-this.b.x)+Math.abs(b.b.y-this.b.y)+Math.abs(b.b.z-this.b.z),b<a&&(a=b));0==this.state&&0==this.open?5E5>a&&(this.state=1,this.Ah=4*Math.floor(u.l/4),this.Ig=NaN):1==this.state&&5E5<=a&&(isNaN(this.Ig)&&(this.Ig=u.l),180<=u.l-this.Ig&&(this.state=0,this.Ah=u.l));a=(u.l-
this.Ah)/36;1<a||(0==this.state?this.open=1-Math.pow(a,2):1==this.state&&(this.open=Math.pow(a,2)),this.update())}};f.update=function(){var a=this.cc.h+(this.cc.height-12500)*this.open;this.cc.o=this.rc.o=this.na[0].y=this.na[1].h=this.na[2].h=a;this.na[0].Y.y=this.na[1].Y.h=this.na[2].Y.h=a;this.dh.transform.m31=this.bh.transform.m31=a+112500;this.dh.Qc[0].Ja[1]=this.wf.qe;this.bh.Qc[0].Ja[1]=this.vf.qe;this.dh.Qc[0].Ja[4]=this.wf.ye;this.bh.Qc[0].Ja[4]=this.vf.ye};
f.Oa=function(){u.D.N("clipY",this.b.y+225E3,!1)};f.remove=function(){this.dh.remove();this.bh.remove();jf.splice(jf.indexOf(this.na[0]),this.na.length);u.Node.prototype.remove.call(this)};
function si(a,b,c,d){u.qa.call(this);this.b=new J(a.c,b+62500,a.f);this.transform.H=this.b.x;this.transform.m31=this.b.y;this.transform.m32=this.b.z;this.transform.G=-a.$;this.transform.L=a.V;this.transform.J=-a.V;this.transform.m22=-a.$;this.transform.G*=87500;this.transform.K*=87500;this.transform.L*=87500;this.transform.I*=62500;this.transform.m11*=62500;this.transform.m12*=62500;W(this,u.ve);this.wf=c;this.vf=d;this.na=[];c=[new S(-625,-87500),new S(625,-87500),new S(625,87500),new S(-625,87500)];
for(b=0;b<c.length;b++)c[b]=a.jb(c[b].x,c[b].y);a=[];b=c[c.length-1];c=q(c);for(d=c.next();!d.done;d=c.next())d=d.value,a.push(new O(b.x,b.y,d.x,d.y)),b=d;this.na.push(new Hg(jd(a[0]),this.b.y-112500,this.b.y+112500),new Hg(jd(a[2]),this.b.y-112500,this.b.y+112500));a=q(this.na);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=Jj,b.gf();jf.push.apply(jf,ca(this.na))}si.prototype=Object.create(u.qa.prototype);si.prototype.constructor=si;si.W=function(a,b){return a.depth-b.depth};
si.prototype.update=function(){};si.prototype.wg=function(){return!this.Ra||this.wf.ea.Aa<u.l&&this.vf.ea.Aa<u.l?!1:!0};si.se=function(){u.ub(pg);u.Xa(u.v.la.get("physical"));u.Sb(0,u.v.ba.get("Window01"));eh.bind();u.mb(1);u.Lb(1);u.D.N("color",Cd);u.D.N("architectureLighting",1,!0);u.D.N("lightingFancy",u.Ib.lightingFancy,!0)};
si.prototype.Oa=function(){u.D.N("modelMatrix",this.O);u.D.N("portalLightIndex",this.wf.qe,!0);u.D.N("ambientLight",this.wf.ea.pb,!1);v.drawArrays(v.TRIANGLE_FAN,qg(0,1),4);var a=(new U).set(this.O);a.G=-a.G;a.K=-a.K;a.L=-a.L;a.J=-a.J;a.m21=-a.m21;a.m22=-a.m22;u.D.N("modelMatrix",a);u.D.N("portalLightIndex",this.vf.qe,!0);u.D.N("ambientLight",this.vf.ea.pb,!1);v.drawArrays(v.TRIANGLE_FAN,qg(0,1),4)};si.prototype.remove=function(){jf.splice(jf.indexOf(this.na[0]),this.na.length);u.qa.prototype.remove.call(this)};
function Vj(a,b,c){u.Va.call(this,"crate");this.nb=240;this.b.x=a;this.b.y=b+5E4;this.b.z=c;ee(this.transform,this.b);a=[new J(-5E4,0,-5E4),new J(-5E4,0,5E4),new J(5E4,0,5E4),new J(5E4,0,-5E4)];b=q(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.jb(c,c),c.round();a=[new O(a[0].z,a[0].x,a[1].z,a[1].x),new O(a[1].z,a[1].x,a[2].z,a[2].x),new O(a[2].z,a[2].x,a[3].z,a[3].x),new O(a[3].z,a[3].x,a[0].z,a[0].x)];this.na=[];this.na.push(new Ig(a,this.b.y+5E4),new Jg(a,this.b.y-5E4));a=yd(a);
this.na.push(new Hg(a[0],this.b.y-5E4,this.b.y+5E4),new Hg(a[1],this.b.y-5E4,this.b.y+5E4),new Hg(a[2],this.b.y-5E4,this.b.y+5E4),new Hg(a[3],this.b.y-5E4,this.b.y+5E4));a=q(this.na);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;jf.push.apply(jf,ca(this.na))}Vj.prototype=Object.create(u.Va.prototype);f=Vj.prototype;f.constructor=Vj;
f.create=function(){var a=this.kc=new gg(u.v.Yd.get("lootBox"));a.Ba=this.O;W(a,this);a.create();this.Jb=a.src.Jb;ke(a,this.ea);le(a,6E4);u.B.Wf.push(this);Wj.push(this);u.Va.prototype.create.call(this)};
f.step=function(){if(u.B.ka){var a=Md(u.B.ka.b,this.b,new J(0,0,0));a.y=0;a.ja(1);this.transform.G=a.z;this.transform.L=-a.x;this.transform.J=a.x;this.transform.m22=a.z;this.transform.rotate(zc(-15),0,0)}10==u.l-this.bf&&this.Gh();u.l==this.yd+4?this.kc.da=u.v.sb.get("flashWhite"):u.l==this.yd+6?this.kc.da=u.v.sb.get("flashRed"):u.l==this.yd+8&&delete this.kc.da;u.Va.prototype.step.call(this)};f.Fe=function(a){isNaN(this.bf)&&(this.yd=u.l,this.nb-=a,0>=this.nb&&(this.bf=u.l))};
f.Gh=function(){if(u.B.ka){for(var a=[],b=q(u.B.ka.Sa.Xd),c=b.next();!c.done;c=b.next()){var d=c.value;c=a;var e=7*d.Md/6-Xj(d);d=d.constructor.Bh;for(e=1/3*e/d.oc;1<=e;)c.push(new Yj(d)),e--;Ob(1/e)&&c.push(new Yj(d))}a=q(a);for(b=a.next();!b.done;b=a.next())b=b.value,b.b.set(this.b.x,this.b.y,this.b.z),b.b.z+=5E4*(E(x)-.5),b.b.x+=5E4*(E(x)-.5),b.s.set(6E3*(E(x)-.5),9E3*(E(x)+1),6E3*(E(x)-.5)),W(b,u.si),b.create()}u.v.sa.get("hit02").play({gain:1});this.remove()};
f.remove=function(){u.Va.prototype.remove.call(this);this.kc.remove();u.B.Wf.splice(u.B.Wf.indexOf(this),1);Zj.call(this);jf.splice(jf.indexOf(this.na[0]),this.na.length)};
function ak(a,b,c){u.Va.call(this,"barrel");this.nb=160;this.b.x=a;this.b.y=b+65E3;this.b.z=c;ee(this.transform,this.b);a=[new J(-5E4,0,-5E4),new J(-5E4,0,5E4),new J(5E4,0,5E4),new J(5E4,0,-5E4)];b=q(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.jb(c,c),c.round();a=[new O(a[0].z,a[0].x,a[1].z,a[1].x),new O(a[1].z,a[1].x,a[2].z,a[2].x),new O(a[2].z,a[2].x,a[3].z,a[3].x),new O(a[3].z,a[3].x,a[0].z,a[0].x)];this.na=[];this.na.push(new Ig(a,this.b.y+5E4),new Jg(a,this.b.y-5E4));a=yd(a);
this.na.push(new Hg(a[0],this.b.y-5E4,this.b.y+5E4),new Hg(a[1],this.b.y-5E4,this.b.y+5E4),new Hg(a[2],this.b.y-5E4,this.b.y+5E4),new Hg(a[3],this.b.y-5E4,this.b.y+5E4));a=q(this.na);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;jf.push.apply(jf,ca(this.na))}ak.prototype=Object.create(u.Va.prototype);f=ak.prototype;f.constructor=ak;
f.create=function(){var a=this.kc=new gg(u.v.Yd.get("nitroBarrel"));a.Ba=this.O;W(a,this);a.create();this.Jb=a.src.Jb;ke(a,this.ea);le(a,6E4);u.B.Pf.push(this);Wj.push(this);u.Va.prototype.create.call(this)};
f.step=function(){if(isNaN(this.bf)){if(u.B.ka){var a=Md(u.B.ka.b,this.b,new J(0,0,0));a.y=0;a.ja(1);this.transform.G=a.z;this.transform.L=-a.x;this.transform.J=a.x;this.transform.m22=a.z;this.transform.rotate(zc(15),0,0)}a=1+.25*Math.sin(u.l*Math.PI/3)*(1-this.nb/160);this.nb=Math.min(this.nb+2,160);ae(this.kc.transform);this.kc.transform.scale(a,a,a);u.l==this.yd+4?this.kc.da=u.v.sb.get("flashWhite"):u.l==this.yd+6?this.kc.da=u.v.sb.get("flashRed"):u.l==this.yd+8&&delete this.kc.da;u.Va.prototype.step.call(this)}else{a=
u.l-this.bf;var b=1+1/12*a;ae(this.kc.transform);this.kc.transform.scale(b,b,b);6==a&&this.Gh()}};f.Fe=function(a){isNaN(this.bf)&&(this.yd=u.l,this.nb-=a,0>=this.nb&&(this.bf=u.l))};
f.Gh=function(){function a(d){var e=Md(d.b,this.b,new J),h=e.ja(1);if(d instanceof bk){var g=(h-5E5)/2E6;g=1-g;g=pb(g,0,1);d.Ga+=zc(10)*g}5E5<=h||(d instanceof Y&&(d.nb=0,d.Pg()),d instanceof bk&&(d.Df=Number.NEGATIVE_INFINITY,d.lg=!0,d.Ga+=zc(10)),h=1E4,e.y+=1,d.s.x+=e.x*h,d.s.y+=e.y*h,d.s.z+=e.z*h)}u.v.sa.get("explode01").play({gain:1});for(var b=q(u.B.Gc),c=b.next();!c.done;c=b.next())c=c.value,ck(c,this.b),a.call(this,c);b=q(u.B.Pf);for(c=b.next();!c.done;c=b.next())c=c.value,5E5>Md(c.b,this.b,
new J(0,0,0)).ja(1)&&c.Fe(Number.POSITIVE_INFINITY);b=q(u.B.Wf);for(c=b.next();!c.done;c=b.next())c=c.value,5E5>Md(c.b,this.b,new J(0,0,0)).ja(1)&&c.Fe(Number.POSITIVE_INFINITY);u.B.ka&&a.call(this,u.B.ka);c=new dk(1E5);c.transform.H=this.b.x;c.transform.m31=this.b.y;c.transform.m32=this.b.z;W(c,u.hd);c.create();this.remove()};f.remove=function(){u.Va.prototype.remove.call(this);this.kc.remove();u.B.Pf.splice(u.B.Pf.indexOf(this),1);Zj.call(this);jf.splice(jf.indexOf(this.na[0]),this.na.length)};function ek(a){u.Node.call(this,"GunManager "+a.name);this.ha=a;this.Xd=[];this.F=null;this.action="ready";this.U=NaN;this.focus=0;this.ec=!1;this.ag=null;this.vb=this.Tb=this.Mc=0;this.ab=null;this.Ie=this.He=0;this.fc=[];this.tc=0}ek.prototype=Object.create(u.Node.prototype);f=ek.prototype;f.constructor=ek;
f.create=function(){var a=this.oe=new u.qa("muzzleFlare");mg.call(a);a.Oa=og;a.D=u.v.la.get("image");a.ma=u.v.ba.get("muzzleFlare01");a.da=new oe;a.da.za=1;a.color=new T(255,255,255,0);a.Ta=12500;a.Ra=0;a.Ba=this.ha.jd.O;W(a,u.xd)};
f.step=function(){if(this.F){var a=this.ha;a.Kf=null;var b=a.nc.O,c=new J(b.H,b.m31,b.m32);b=new J(-b.J,-b.m21,-b.m22);for(var d=q(u.B.Gc),e=d.next();!e.done;e=d.next()){e=e.value;var h=Nj(c,b,e.b,e.va,e.Ya);if(h.Le){h=h.Le;if(0>h.t)continue;if(1E8<=h.t)continue;h=Md(h.p,c,new J)}else{var g=h.sg.X(),k=h.Dh-e.va;g.x+=h.Ed.x*k;g.y+=h.Ed.y*k;g.z+=h.Ed.z*k;h=Md(g,c,new J);if(0>=Dc(h,b))continue}Ff(c,h,Kj)||(e.ah=u.l)}if(c=a.Sa.F.pi(a.nc.O))a.Kf=c}--this.tc;0>this.tc&&(this.tc=0);a=q(this.Xd);c=a.next();
a:for(;!c.done;c=a.next())if(c=c.value,c!=this.F)for(b=q(c.$h),d=b.next();!d.done;d=b.next())if(Ye.p[d.value]){this.ag=c;break a}Xe.p[0]&&(this.Tb=1);Xe.r[0]&&(this.Tb=0);Xe.p[2]&&(this.Mc=1);Xe.r[2]&&(this.Mc=0);this.Mc||(this.focus-=1/6,0>this.focus&&(this.focus=0));Ye.p.KeyR&&(this.vb=1);if(this.F)this.F[this.action].call(this);else for(fk(this),a=0;a<this.fc.length;a++)c=this.fc[a],0<c.alpha||(this.fc.splice(a--,1),W(c,null))};
f.Oa=function(){if(this.ab){var a=Cd;90>u.l-this.ha.Zg&&(a=0==Math.floor(u.l/3)%2?new T(255,255,255,128):new T(255,255,255,0));v.enable(v.SCISSOR_TEST);u.Ub.zc.N("viewMatrix",fe);u.Ub.zc.upload();u.Db(0);u.Lb(0);u.mb(2);u.ub(pg);u.Xa(u.v.la.get("physicalCardThreshold"));u.D.N("color",a);u.D.N("ambientLight",this.ha.ea.pb,!1);a=this.F.constructor.Gi;u.Sb(0,a);var b=Math.round(a.width/2-this.ab.x+this.ab.i+this.He),c=Math.round(a.height/2-this.ab.y+this.ab.j+this.Ie);v.scissor(this.ab.i+Math.round(this.He),
-this.ab.j-Math.round(this.Ie)+u.canvas.height-this.ab.g,this.ab.a,this.ab.g);var d=new U;d.G=a.width/u.canvas.width;d.m11=-a.height/u.canvas.height;d.H=-1+2*b/u.canvas.width;d.m31=1-2*c/u.canvas.height;u.D.N("modelMatrix",d);v.drawArrays(v.TRIANGLE_FAN,0,4);v.disable(v.SCISSOR_TEST)}};function fk(a){if(!a.ag)return!1;a.ab=null;a.Mc=0;a.Tb=0;a.vb=0;a.tc=0;a.ec=!1;a.F=a.ag;u.B.ld();a.action="equip";a.U=u.l+1;a.ag=null;return!0}
f.qc=function(){var a=400*this.ha.Zd;a*=1-2/3*this.focus;this.He=this.ha.Ug*a;this.Ie=this.ha.qc*a};ek.W=function(a,b,c,d,e,h){var g=new U;b*=1E5;c*=1E5;a*=1E5;g.rotate(zc(h),zc(e),zc(d));g.scale(1,1,1);g.translate(b,c,a);d=g;e=new U;e.G=d.m22;e.K=d.J;e.L=d.m21;e.I=d.L;e.m11=d.G;e.m12=d.K;e.J=d.m12;e.m21=d.I;e.m22=d.m11;e.H=d.m32;e.m31=d.H;e.m32=d.m31;d=e;e=new U;e.G=d.G;e.K=d.K;e.L=d.L;e.I=d.J;e.m11=d.m21;e.m12=d.m22;e.J=-d.I;e.m21=-d.m11;e.m22=-d.m12;e.H=d.H;e.m31=d.m32;e.m32=-d.m31;return e};
function gk(a){this.bi=a;this.actions={};this.Yb=this.ra=this.ya=0;this.Nd=this.Md=-1;this.Ph=2/3;this.Of=this.og=this.Nf=this.uf=0}function Xj(a){return a.Yb+a.ra+a.ya}gk.prototype.uh=function(){return!1};gk.prototype.Gf=function(){return!1};
function hk(a){var b=new J(a.H,a.m31,a.m32);a=new J(-a.J,-a.m21,-a.m22);var c=[];c.cmp=function(m,n){return m.Qe>n.Qe?-1:1};for(var d=q(u.B.Gc),e=d.next();!e.done;e=d.next())if(e=e.value,e.eb||!(u.l>e.U)){var h=Nj(b,a,e.b,e.va-this.Of,e.Ya);if(h.Le){var g=h.Le;0>g.t||1E8<=g.t||(g.p.Qe=1E8-g.t,g.p.item=e,kb(c,g.p))}else{g=h.sg.X();var k=h.Dh-(e.va-this.Of);g.x+=h.Ed.x*k;g.y+=h.Ed.y*k;g.z+=h.Ed.z*k;k=Md(h.sg,b,new J);h=k.ja(1);var l=Md(g,b,new J);0>=Dc(l,a)||(l.normalize(),k=Dc(k,l),l=this.og,5E5<h&&
(l=Math.atan(5E5*Math.tan(l)/h)),Math.acos(k)>=l||(g.Qe=k-1,g.item=e,kb(c,g)))}}a=q(c);for(c=a.next();!c.done;c=a.next())if(c=c.value,!Ff(b,Md(c,b,new J)))return c;return null}
function ik(a,b,c){function d(m){m=new jk(m);m.transform.H=a.p.x;m.transform.m31=a.p.y;m.transform.m32=a.p.z;W(m,u.hd);m.create();m.step()}function e(){var m=new kk;m.$g=120*(E(x)+.5);m.Ta=2E4;m.transform.H=a.p.x;m.transform.m31=a.p.y;m.transform.m32=a.p.z;m.s.x=a.n.x;m.s.y=a.n.y;m.s.z=a.n.z;m.s.scale(2E4*E(x)+1E4);W(m,u.hd);m.create();m.step()}if(a.item instanceof Y){var h=new U,g=new J,k=new J,l=a.Mb.X();Kc(l,g,k);h.xf(g);h.yf(k);h.zf(l);ee(h,a.p);lk(a.item,h,c);W(new mk,u.rk);a.item.Fe(b)}else a.item instanceof
ak?(d(31250),e(),a.item.Fe(b)):a.item instanceof Vj?(d(31250),e(),a.item.Fe(b)):(d(12500),e(),Gg(u.B.Ri,new J(2343.75*Math.round(a.p.x/2343.75),2343.75*Math.round(a.p.y/2343.75),2343.75*Math.round(a.p.z/2343.75)),a.n,Math.PI,18750,Nb(16),16))}function nk(a){gk.call(this,a);this.Md=150;this.ra=this.Nd=30;this.ya=this.Md-this.ra;this.Ph=1;this.og=zc(4);this.Of=8E3}nk.prototype=Object.create(gk.prototype);nk.prototype.constructor=nk;
nk.$a={CarbineEquip02:{i:291,j:265,x:1204,y:1548,a:189,g:31},CarbineEquip03:{i:90,j:191,x:814,y:1548,a:390,g:105},CarbineEquip04:{i:126,j:152,x:0,y:1548,a:354,g:144},CarbineEquip05:{i:46,j:96,x:1012,y:255,a:434,g:200},CarbineEquip06:{i:92,j:68,x:1281,y:0,a:356,g:228},CarbineEquip07:{i:106,j:65,x:960,y:0,a:321,g:231},CarbineEquip08:{i:129,j:76,x:0,y:255,a:282,g:220},CarbineEquip09:{i:145,j:91,x:282,y:255,a:250,g:205},CarbineEquip10:{i:163,j:109,x:1231,y:670,a:220,g:187},CarbineEquip11:{i:184,j:125,
x:292,y:1047,a:220,g:171},CarbineEquip12:{i:198,j:133,x:1541,y:1047,a:253,g:163},CarbineEquip13:{i:207,j:132,x:1296,y:1047,a:245,g:164},CarbineAim01:{i:194,j:133,x:0,y:1225,a:229,g:163},CarbineAim02:{i:170,j:136,x:1247,y:1225,a:187,g:160},CarbineAim03:{i:157,j:137,x:184,y:1388,a:174,g:159},CarbineFire01:{i:209,j:131,x:1030,y:1047,a:266,g:165},CarbineFire02:{i:213,j:128,x:512,y:1047,a:246,g:168},CarbineFire03:{i:212,j:133,x:229,y:1225,a:248,g:163},CarbineAimFire01:{i:147,j:136,x:1434,y:1225,a:193,
g:160},CarbineAimFire02:{i:152,j:136,x:0,y:1388,a:184,g:160},CarbineAimFire03:{i:155,j:134,x:730,y:1225,a:178,g:162},CarbineReload01:{i:185,j:133,x:477,y:1225,a:253,g:163},CarbineReload02:{i:101,j:134,x:908,y:1225,a:339,g:162},CarbineReload03:{i:14,j:144,x:838,y:1388,a:432,g:152},CarbineReload04:{i:0,j:153,x:354,y:1548,a:460,g:143},CarbineReload05:{i:0,j:149,x:1270,y:1388,a:480,g:147},CarbineReload06:{i:0,j:139,x:358,y:1388,a:480,g:157},CarbineReload07:{i:0,j:107,x:271,y:670,a:480,g:189},CarbineReload08:{i:0,
j:41,x:0,y:0,a:480,g:255},CarbineReload09:{i:0,j:47,x:480,y:0,a:480,g:249},CarbineReload10:{i:0,j:95,x:532,y:255,a:480,g:201},CarbineReload11:{i:0,j:107,x:751,y:670,a:480,g:189},CarbineReload12:{i:0,j:111,x:311,y:860,a:480,g:185},CarbineReload13:{i:0,j:114,x:791,y:860,a:480,g:182},CarbineReload14:{i:59,j:115,x:1271,y:860,a:421,g:181},CarbineReload15:{i:200,j:109,x:1451,y:670,a:280,g:187},CarbineReload16:{i:235,j:103,x:309,y:475,a:245,g:193},CarbineReload17:{i:246,j:104,x:838,y:475,a:234,g:192},CarbineReload18:{i:241,
j:105,x:1072,y:475,a:239,g:191},CarbineReload19:{i:209,j:106,x:0,y:670,a:271,g:190},CarbineReload20:{i:172,j:99,x:1446,y:255,a:308,g:197},CarbineReload21:{i:171,j:101,x:0,y:475,a:309,g:195},CarbineReload22:{i:196,j:103,x:554,y:475,a:284,g:193},CarbineReload23:{i:164,j:105,x:1311,y:475,a:316,g:191},CarbineReload24:{i:158,j:109,x:0,y:860,a:311,g:187},CarbineReload25:{i:173,j:118,x:0,y:1047,a:292,g:178},CarbineReload26:{i:175,j:128,x:758,y:1047,a:272,g:168}};
nk.prototype.fire=function(){var a=u.l-this.U;this.qc();if(0==a){u.v.sa.get("CarbineFire01").play({gain:.5,pitch:1.5});u.v.sa.get("CarbineFire02").play({gain:1,pitch:1.5});--this.F.ra;!this.F.ra&&this.F.ya&&(this.vb=1);u.B.ld();this.tc+=35;this.jc=ek.W(.053697,.319573,-.058355,-.833,.006,-179.61);var b=this.oe;b.Ra=1;var c=255*(4*E(x)+1)/12&255;b.color.r=c;b.color.Pa=c;b.color.ga=c;b.scale=E(x)+1;b.wc=Ac(Mb());c=new U;c.translate(0,-35E3,0);be(this.jc,c,b.transform);b=(new U).rotate(0,zc(2.5*E(x)),
0);c=(new U).rotate(0,0,E(x)*Math.PI*2);var d=ok(this.ha);be(d,c,d);be(d,b,d);b=this.F.te(d);b=q(b);for(c=b.next();!c.done;c=b.next())ik(c.value,72,1.2);b=new pk("CartridgeCarbineSpent");b.vi=zc(6*(3*E(x)+1));b.transform.m31-=2100;c=new U;be(this.ha.jd.O,this.jc,c);be(c,b.transform,b.transform);b.s.x-=3E3*(2*E(x)+1);b.s.z=-b.s.x;ce(c,b.s,b.s);b.b.set(b.transform.H,b.transform.m31,b.transform.m32);b.s.add(this.ha.s);Od(b.s,b.bb);W(b,u.xd);b.create();180<=this.tc&&(this.tc-=180,b=new qk,b.Ta=6E4,b.transform.m31-=
45E3,c=new U,be(this.ha.jd.O,this.jc,c),be(c,b.transform,b.transform),b.s.y=-37500,ce(c,b.s,b.s),b.s.add(this.ha.s),Od(b.s,b.bb),b.ea=this.ha.ea,W(b,u.hd),b.create(),b.step(),this.fc.push(b));3<this.fc.length&&(W(this.fc[0],null),this.fc.splice(0,1))}1==a&&(this.oe.Ra=0);2==a&&(this.ha.Ga+=zc(1));if(3<=a){if(fk(this))return;if(!this.Mc&&this.Tb){if(this.F.ra){this.action="fire";this.U=u.l+1;return}this.F.ya&&(this.vb=1)}this.F.Rd()}4<=a?this.action="ready":(a=("00"+a).slice(-2),this.ab=this.F.constructor.$a["CarbineFire"+
a]||this.F.constructor.$a.CarbineEquip13)};
nk.prototype.aimFire=function(){var a=u.l-this.U;this.qc();if(0==a){u.v.sa.get("CarbineFire01").play({gain:.5,pitch:1.5});u.v.sa.get("CarbineFire02").play({gain:1,pitch:1.5});--this.F.ra;!this.F.ra&&this.F.ya&&(this.vb=1);u.B.ld();this.tc+=35;this.jc=ek.W(0,.270042,-.06106,0,0,180);var b=this.oe;b.Ra=1;var c=255*(4*E(x)+1)/12&255;b.color.r=c;b.color.Pa=c;b.color.ga=c;b.scale=E(x)+1;b.wc=Ac(Mb());c=new U;c.translate(0,-35E3,0);be(this.jc,c,b.transform);b=(new U).rotate(0,zc(1*E(x)),0);c=(new U).rotate(0,
0,E(x)*Math.PI*2);var d=ok(this.ha);be(d,c,d);be(d,b,d);b=this.F.te(d);b=q(b);for(c=b.next();!c.done;c=b.next())ik(c.value,72,1.2);b=new pk("CartridgeCarbineSpent");b.vi=zc(6*(3*E(x)+1));b.transform.m31-=2100;c=new U;be(this.ha.jd.O,this.jc,c);be(c,b.transform,b.transform);b.s.x-=3E3*(2*E(x)+1);b.s.z=-b.s.x;ce(c,b.s,b.s);b.b.set(b.transform.H,b.transform.m31,b.transform.m32);b.s.add(this.ha.s);Od(b.s,b.bb);W(b,u.xd);b.create();210<=this.tc&&(this.tc-=210,b=new qk,b.Ta=4E4,b.scale=1,b.transform.m31-=
45E3,c=new U,be(this.ha.jd.O,this.jc,c),be(c,b.transform,b.transform),b.s.y=-2E4,ce(c,b.s,b.s),b.s.add(this.ha.s),Od(b.s,b.bb),b.ea=this.ha.ea,W(b,u.hd),b.create(),b.step(),this.fc.push(b));3<this.fc.length&&(W(this.fc[0],null),this.fc.splice(0,1))}1==a&&(this.oe.Ra=0);2==a&&(this.ha.Ga+=zc(.5));if(3<=a){if(fk(this))return;if(this.Mc&&this.Tb){if(this.F.ra){this.action="aimFire";this.U=u.l+1;return}this.F.ya&&(this.vb=1)}}4<=a?this.action="ready":(a=("00"+a).slice(-2),this.ab=this.F.constructor.$a["CarbineAimFire"+
a]||this.F.constructor.$a.CarbineAim03)};
nk.prototype.equip=function(){var a=u.l-this.U+5;if(!fk(this))if(this.vb)this.action="reload",this.U=u.l+1;else{this.ec=this.F.ra;this.Ie=this.He=0;9==a&&(this.ha.Ga+=zc(1));a=Math.floor(a/2.5);if(9<=a)if(this.F.jf.call(this),1==this.focus){if(this.Tb){if(this.F.ra){this.action="aimFire";this.U=u.l+1;return}this.F.ya&&(this.vb=1)}}else if(0==this.focus&&this.Tb){if(this.F.ra){this.action="fire";this.U=u.l+1;return}this.F.ya&&(this.vb=1)}14<=a?this.action="ready":0==this.focus&&(a=("00"+a).slice(-2),
this.ab=this.F.constructor.$a["CarbineEquip"+a])}};nk.prototype.reload=function(){var a=u.l-this.U+3;this.vb=0;if(!fk(this)){this.ec=!1;this.Ie=this.He=0;3==a&&(this.F.ya+=this.F.ra,this.F.ra=0,u.B.ld());if(60==a){this.ha.Ga+=zc(1);var b=Math.min(this.F.Nd-this.F.ra,this.F.ya);this.F.ra+=b;this.F.ya-=b;u.B.ld()}a=Math.floor(a/3);27<=a?this.action="ready":(a=("00"+a).slice(-2),this.ab=this.F.constructor.$a["CarbineReload"+a])}};
nk.prototype.ready=function(){this.ec=this.F.ra;if(!fk(this))if(this.vb)this.action="reload",this.U=u.l+1;else{this.qc();this.F.jf.call(this);if(1==this.focus){if(this.Tb){if(this.F.ra){this.action="aimFire";this.U=u.l+1;return}this.F.ya&&(this.vb=1)}}else if(0==this.focus&&this.Tb){if(this.F.ra){this.action="fire";this.U=u.l+1;return}this.F.ya&&(this.vb=1)}this.F.Rd()}};f=nk.prototype;
f.jf=function(){this.Mc&&(this.focus+=1/6,1<this.focus&&(this.focus=1));this.ec=this.F.ra;if(0<this.focus){var a=Math.floor(3*this.focus);a=("00"+a).slice(-2);this.ab=this.F.constructor.$a["CarbineAim"+a]||this.F.constructor.$a.CarbineEquip13}else this.ab=this.F.constructor.$a.CarbineEquip13};f.pi=hk;
f.te=function(a){var b=new J(a.H,a.m31,a.m32),c=new J(-a.J,-a.m21,-a.m22),d=1E8;if(a=Ff(b,new J(c.x*d,c.y*d,c.z*d)))d=a.d;var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=q(u.B.Gc),g=h.next();!g.done;g=h.next())if(g=g.value,g.eb||!(u.l>g.U)){var k=Nj(b,c,g.b,g.va,g.Ya).Le;!k||0>k.t||k.t>=d||(k.item=g,k.Mb=c,kb(e,k))}b=null;d=c=NaN;e=q(e);for(h=e.next();!h.done;h=e.next())h=h.value,h.item.Vg>c||h.item.Vg==c&&h.t>d||(b=h,
c=h.item.Vg,d=h.t);e=[];b&&e.push(b);a&&e.push(a);return e};f.uh=function(){return 0>=this.ya||"reload"==this.bi.action||10<this.ra?!1:!0};f.Gf=function(){var a=Xj(this);return 0>=a?2:30>a?1:0};f.Rd=function(){this.ra>=this.Nd||!this.ya?this.uf=0:(this.uf+=1,7.8<=this.uf&&(this.uf-=7.8,--this.ya,this.ra+=1))};function rk(a){gk.call(this,a);this.Md=12;this.Nd=0;this.Yb=1;this.ra=this.Nd;this.ya=this.Md-this.ra-this.Yb;this.ui=!1;this.og=zc(0)}rk.prototype=Object.create(gk.prototype);
rk.prototype.constructor=rk;
rk.$a={ShotgunEquip01:{i:170,j:185,x:874,y:1644,a:310,g:111},ShotgunEquip02:{i:183,j:151,x:569,y:1351,a:297,g:145},ShotgunEquip03:{i:331,j:128,x:1175,y:704,a:149,g:168},ShotgunEquip04:{i:111,j:20,x:871,y:0,a:369,g:276},ShotgunEquip05:{i:140,j:0,x:0,y:0,a:340,g:296},ShotgunEquip06:{i:158,j:0,x:340,y:0,a:277,g:296},ShotgunEquip07:{i:173,j:0,x:617,y:0,a:254,g:296},ShotgunEquip08:{i:188,j:100,x:0,y:508,a:257,g:196},ShotgunEquip09:{i:195,j:152,x:1432,y:1351,a:258,g:144},ShotgunEquip10:{i:199,j:159,x:0,
y:1644,a:257,g:137},ShotgunEquip11:{i:201,j:160,x:257,y:1644,a:253,g:136},ShotgunEquip12:{i:197,j:156,x:1248,y:1500,a:254,g:140},ShotgunEquip13:{i:195,j:152,x:0,y:1500,a:254,g:144},ShotgunFire01:{i:202,j:152,x:254,y:1500,a:278,g:144},ShotgunFire02:{i:181,j:147,x:0,y:1351,a:299,g:149},ShotgunFire03:{i:175,j:133,x:0,y:884,a:305,g:163},ShotgunFire04:{i:177,j:118,x:299,y:704,a:303,g:178},ShotgunFire05:{i:182,j:112,x:651,y:508,a:298,g:184},ShotgunFire06:{i:184,j:112,x:949,y:508,a:296,g:184},ShotgunFire07:{i:183,
j:113,x:1245,y:508,a:297,g:183},ShotgunFire08:{i:181,j:116,x:0,y:704,a:299,g:180},ShotgunFire09:{i:187,j:120,x:602,y:704,a:293,g:176},ShotgunFire10:{i:200,j:125,x:895,y:704,a:280,g:171},ShotgunFire11:{i:211,j:132,x:1324,y:704,a:269,g:164},ShotgunFire12:{i:215,j:139,x:305,y:884,a:265,g:157},ShotgunFire13:{i:212,j:145,x:1320,y:1199,a:268,g:151},ShotgunFire14:{i:203,j:149,x:299,y:1351,a:270,g:147},ShotgunFire15:{i:196,j:152,x:532,y:1500,a:256,g:144},ShotgunCycle01:{i:187,j:139,x:570,y:884,a:209,g:157},
ShotgunCycle02:{i:162,j:109,x:475,y:508,a:176,g:187},ShotgunCycle03:{i:123,j:88,x:1399,y:296,a:176,g:208},ShotgunCycle04:{i:101,j:84,x:0,y:296,a:176,g:212},ShotgunCycle05:{i:103,j:84,x:176,y:296,a:174,g:212},ShotgunCycle06:{i:126,j:84,x:350,y:296,a:173,g:212},ShotgunCycle07:{i:126,j:86,x:1220,y:296,a:179,g:210},ShotgunCycle08:{i:127,j:85,x:1045,y:296,a:175,g:211},ShotgunCycle09:{i:126,j:84,x:523,y:296,a:173,g:212},ShotgunCycle10:{i:123,j:84,x:696,y:296,a:173,g:212},ShotgunCycle11:{i:101,j:84,x:869,
y:296,a:176,g:212},ShotgunCycle12:{i:97,j:82,x:1240,y:0,a:181,g:214},ShotgunCycle13:{i:93,j:83,x:1421,y:0,a:192,g:213},ShotgunCycle14:{i:114,j:108,x:257,y:508,a:218,g:188},ShotgunCycle15:{i:166,j:139,x:779,y:884,a:250,g:157},ShotgunReload01:{i:196,j:153,x:788,y:1500,a:230,g:143},ShotgunReload02:{i:209,j:156,x:1502,y:1500,a:158,g:140},ShotgunReload03:{i:183,j:164,x:510,y:1644,a:182,g:132},ShotgunReload04:{i:150,j:151,x:866,y:1351,a:283,g:145},ShotgunReload05:{i:124,j:144,x:1029,y:884,a:356,g:152},
ShotgunReload06:{i:108,j:144,x:1385,y:884,a:372,g:152},ShotgunReload07:{i:108,j:144,x:0,y:1047,a:372,g:152},ShotgunReload08:{i:108,j:144,x:372,y:1047,a:308,g:152},ShotgunReload09:{i:108,j:144,x:680,y:1047,a:262,g:152},ShotgunReload10:{i:108,j:144,x:942,y:1047,a:262,g:152},ShotgunReload11:{i:107,j:144,x:1204,y:1047,a:373,g:152},ShotgunReload12:{i:108,j:144,x:0,y:1199,a:262,g:152},ShotgunReload13:{i:108,j:144,x:262,y:1199,a:262,g:152},ShotgunReload14:{i:108,j:144,x:524,y:1199,a:262,g:152},ShotgunReload15:{i:108,
j:144,x:786,y:1199,a:262,g:152},ShotgunReload16:{i:124,j:144,x:1048,y:1199,a:272,g:152},ShotgunReload17:{i:150,j:151,x:1149,y:1351,a:283,g:145},ShotgunReload18:{i:183,j:164,x:692,y:1644,a:182,g:132},ShotgunReload19:{i:209,j:156,x:1588,y:1199,a:158,g:140},ShotgunReload20:{i:196,j:153,x:1018,y:1500,a:230,g:143}};
rk.prototype.equip=function(){var a=u.l-this.U+2;fk(this)||(this.ec=this.F.Yb,9==a&&(this.ha.Ga+=zc(1)),a=Math.floor(a/2.5),9<=a&&this.Tb&&this.F.Yb?(this.action="fire",this.U=u.l+1,this.Tb=0):9<=a&&(this.Mc||!this.F.Yb&&this.F.ya)?(this.action="cycleOpen",this.U=u.l+1-6):14<=a?this.action="ready":(a=("00"+a).slice(-2),this.ab=this.F.constructor.$a["ShotgunEquip"+a],this.Ie=this.He=0))};
rk.prototype.ready=function(){fk(this)||(this.ec=this.F.Yb,this.Tb&&this.F.Yb?(this.action="fire",this.U=u.l+1,this.Tb=0):this.Mc?(this.action="cycleOpen",this.U=u.l+1,this.ec=!1):(this.qc(),this.F.Rd(),this.ab=this.F.constructor.$a.ShotgunEquip13))};
rk.prototype.fire=function(){var a=u.l-this.U;this.qc();this.ec=!1;if(0==a){u.v.sa.get("ShotgunFire01").play({gain:1,pitch:.75});u.v.sa.get("explode01").play({gain:.5,pitch:1.5});this.F.Yb=0;this.F.ui=!0;u.B.ld();this.jc=ek.W(.04499,.31957,-.038305,-.596,.007,-179.3);var b=this.oe;b.Ra=1;var c=255*(E(x)+4)/5&255;b.color.r=c;b.color.Pa=c;b.color.ga=c;b.scale=E(x)+1;b.wc=Ac(Mb());c=new U;c.translate(0,-4E4,0);be(this.jc,c,b.transform);b=ok(this.ha);var d=rk.qb.length;c=Array(d);for(var e=0;e<d;e++){var h=
Nb(e+1);h!=e&&(c[e]=c[h]);c[h]=e}d=E(x)*Math.Jf;for(e=0;e<c.length;e++){h=(new U).rotate(0,rk.qb[8-e],0);var g=(new U).rotate(0,0,d+c[e]*Math.Jf/9),k=new U;be(b,g,k);be(k,h,k);g=this.F.te(k);h=270;g=q(g);for(k=g.next();!k.done;k=g.next()){k=k.value;var l=h;k.item instanceof Y&&(l=Math.min(h,k.item.nb));ik(k,l,1.2);h-=l;if(0>=h)break}}b=new qk;b.Ta=6E4;b.scale=1;b.transform.m31-=45E3;c=new U;be(this.ha.jd.O,this.jc,c);be(c,b.transform,b.transform);b.s.y=-37500;ce(c,b.s,b.s);b.s.add(this.ha.s);Od(b.s,
b.bb);b.ea=this.ha.ea;W(b,u.hd);b.create();b.step();this.fc.push(b);3<this.fc.length&&(W(this.fc[0],null),this.fc.splice(0,1));this.ha.Ga+=zc(2)}1==a&&(this.oe.Ra=0);3==a&&(this.ha.Ga+=zc(4));if(4<=a){if(fk(this))return;if(this.Mc){this.action="cycleOpen";this.U=u.l+1;return}this.F.Rd()}7<=a&&(a=7+Math.floor((a-7)/4));16<=a?this.action="ready":(a=("00"+a).slice(-2),this.ab=this.F.constructor.$a["ShotgunFire"+a]||this.F.constructor.$a.ShotgunEquip13)};
rk.prototype.cycleOpen=function(){var a=u.l-this.U;if(!fk(this)){this.ec=!1;this.qc();12==a&&u.v.sa.get("ShotgunOpen01").play({gain:1});if(21==a){this.ha.Ga+=zc(1);this.F.ya+=this.F.Yb;this.jc=ek.W(-.018192,.25469,-.045699,-19.3,39.9,177);if(this.F.ui||this.F.Yb){var b=new pk("CartridgeShotgunSpent");b.vi=zc(24*(1*E(x)+1));b.transform.m31+=6E3;var c=new U;be(this.ha.jd.O,this.jc,c);be(c,b.transform,b.transform);b.s.x-=2E3*(2*E(x)+1);b.s.z=2*-b.s.x;ce(c,b.s,b.s);b.b.set(b.transform.H,b.transform.m31,
b.transform.m32);b.s.add(this.ha.s);Od(b.s,b.bb);W(b,u.xd);b.create();this.F.ui=!1}this.F.Yb=0}a=Math.floor(a/3);if(9<=a){a=9;if(!this.Mc){this.action="cycleShut";this.U=u.l+1-27;return}this.F.Rd()}a=("00"+a).slice(-2);this.ab=this.F.constructor.$a["ShotgunCycle"+a]||this.F.constructor.$a.ShotgunEquip13}};
rk.prototype.cycleShut=function(){var a=u.l-this.U;fk(this)||(this.qc(),30==a&&(u.v.sa.get("ShotgunShut01").play({gain:1}),1<=this.F.ya&&(--this.F.ya,this.F.Yb+=1),u.B.ld()),39==a&&(this.ec=this.F.Yb),a=Math.floor(a/3),13<=a&&fk(this)||(16<=a?this.action="ready":(a=("00"+a).slice(-2),this.ab=this.F.constructor.$a["ShotgunCycle"+a]||this.F.constructor.$a.ShotgunEquip13)))};f=rk.prototype;f.pi=hk;
f.te=function(a){var b=new J(a.H,a.m31,a.m32);a=new J(-a.J,-a.m21,-a.m22);var c=1E8,d=Ff(b,new J(a.x*c,a.y*c,a.z*c));d&&(c=d.d);var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=q(u.B.Gc),g=h.next();!g.done;g=h.next())if(g=g.value,g.eb||!(u.l>g.U)){var k=Mj(b,a,g.b,g.va,g.Ya+g.va);!k||0>k.t||k.t>=c||(k.item=g,k.Mb=a,kb(e,k))}d&&e.push(d);return e};f.uh=function(){return!1};
f.Gf=function(){var a=Xj(this);return 0>=a?2:5>a?1:0};f.Rd=function(){};function sk(a){gk.call(this,a);this.Md=18;this.ra=this.Nd=6;this.ya=this.Md-this.ra;this.og=zc(0)}sk.prototype=Object.create(gk.prototype);sk.prototype.constructor=sk;
sk.$a={RevolverEquip00:{i:0,j:255,x:799,y:1715,a:480,g:41},RevolverEquip01:{i:32,j:246,x:351,y:1715,a:448,g:50},RevolverEquip02:{i:129,j:224,x:0,y:1715,a:351,g:72},RevolverEquip03:{i:180,j:199,x:1327,y:1595,a:300,g:97},RevolverEquip04:{i:193,j:176,x:1215,y:1456,a:287,g:120},RevolverEquip05:{i:194,j:157,x:0,y:1456,a:249,g:139},RevolverEquip06:{i:184,j:144,x:1247,y:854,a:232,g:152},RevolverEquip07:{i:172,j:148,x:1158,y:1009,a:255,g:148},RevolverAim01:{i:178,j:152,x:906,y:1309,a:226,g:144},RevolverAim02:{i:150,
j:150,x:692,y:1309,a:214,g:146},RevolverAim03:{i:133,j:148,x:1413,y:1009,a:208,g:148},RevolverFire01:{i:184,j:149,x:1032,y:1161,a:238,g:147},RevolverFire02:{i:184,j:149,x:1270,y:1161,a:238,g:147},RevolverFire03:{i:184,j:149,x:1508,y:1161,a:238,g:147},RevolverFire04:{i:184,j:149,x:0,y:1309,a:238,g:147},RevolverFire05:{i:195,j:149,x:238,y:1309,a:217,g:147},RevolverFire06:{i:201,j:111,x:1504,y:266,a:148,g:185},RevolverFire07:{i:197,j:71,x:193,y:266,a:144,g:225},RevolverFire08:{i:212,j:100,x:634,y:266,
a:192,g:196},RevolverFire09:{i:173,j:114,x:486,y:494,a:253,g:182},RevolverFire10:{i:180,j:111,x:0,y:494,a:242,g:185},RevolverFire11:{i:176,j:113,x:242,y:494,a:244,g:183},RevolverFire12:{i:169,j:126,x:361,y:679,a:266,g:170},RevolverFire13:{i:171,j:139,x:1382,y:679,a:269,g:157},RevolverFire14:{i:171,j:147,x:900,y:1009,a:258,g:149},RevolverFire15:{i:185,j:149,x:455,y:1309,a:237,g:147},RevolverAimFire01:{i:133,j:148,x:1479,y:854,a:208,g:148},RevolverAimFire02:{i:133,j:148,x:0,y:1161,a:208,g:148},RevolverAimFire03:{i:133,
j:148,x:208,y:1161,a:208,g:148},RevolverAimFire04:{i:133,j:148,x:416,y:1161,a:208,g:148},RevolverAimFire05:{i:138,j:148,x:624,y:1161,a:200,g:148},RevolverAimFire06:{i:144,j:119,x:1054,y:494,a:168,g:177},RevolverAimFire07:{i:140,j:87,x:337,y:266,a:146,g:209},RevolverAimFire08:{i:153,j:110,x:1311,y:266,a:193,g:186},RevolverAimFire09:{i:126,j:121,x:0,y:679,a:219,g:175},RevolverAimFire10:{i:135,j:119,x:1222,y:494,a:211,g:177},RevolverAimFire11:{i:130,j:120,x:1433,y:494,a:211,g:176},RevolverAimFire12:{i:126,
j:130,x:955,y:679,a:219,g:166},RevolverAimFire13:{i:127,j:141,x:0,y:854,a:219,g:155},RevolverAimFire14:{i:131,j:146,x:688,y:1009,a:212,g:150},RevolverAimFire15:{i:133,j:148,x:824,y:1161,a:208,g:148},RevolverReload01:{i:179,j:135,x:1174,y:679,a:208,g:161},RevolverReload02:{i:168,j:104,x:826,y:266,a:178,g:192},RevolverReload03:{i:140,j:68,x:0,y:266,a:193,g:228},RevolverReload04:{i:114,j:40,x:1295,y:0,a:206,g:256},RevolverReload05:{i:99,j:30,x:0,y:0,a:214,g:266},RevolverReload06:{i:102,j:30,x:214,y:0,
a:227,g:266},RevolverReload07:{i:103,j:31,x:441,y:0,a:250,g:265},RevolverReload08:{i:107,j:33,x:895,y:0,a:200,g:263},RevolverReload09:{i:101,j:31,x:691,y:0,a:204,g:265},RevolverReload10:{i:106,j:38,x:1095,y:0,a:200,g:258},RevolverReload11:{i:129,j:60,x:1501,y:0,a:180,g:236},RevolverReload12:{i:161,j:92,x:483,y:266,a:151,g:204},RevolverReload13:{i:173,j:123,x:219,y:679,a:142,g:173},RevolverReload14:{i:173,j:106,x:1004,y:266,a:307,g:190},RevolverReload15:{i:165,j:114,x:739,y:494,a:315,g:182},RevolverReload16:{i:152,
j:129,x:627,y:679,a:328,g:167},RevolverReload17:{i:140,j:141,x:219,y:854,a:340,g:155},RevolverReload18:{i:136,j:143,x:559,y:854,a:344,g:153},RevolverReload19:{i:136,j:144,x:0,y:1009,a:344,g:152},RevolverReload20:{i:136,j:144,x:344,y:1009,a:344,g:152},RevolverReload21:{i:136,j:143,x:903,y:854,a:344,g:153},RevolverReload22:{i:136,j:152,x:1132,y:1309,a:344,g:144},RevolverReload23:{i:140,j:173,x:875,y:1456,a:340,g:123},RevolverReload24:{i:147,j:183,x:338,y:1595,a:333,g:113},RevolverReload25:{i:151,j:186,
x:998,y:1595,a:329,g:110},RevolverReload26:{i:153,j:183,x:671,y:1595,a:327,g:113},RevolverReload27:{i:142,j:176,x:0,y:1595,a:338,g:120},RevolverReload28:{i:155,j:168,x:550,y:1456,a:325,g:128},RevolverReload29:{i:156,j:160,x:249,y:1456,a:301,g:136},RevolverReload30:{i:166,j:155,x:1476,y:1309,a:269,g:141}};
sk.prototype.equip=function(){var a=u.l-this.U;if(!fk(this))if(this.vb)this.action="reload",this.U=u.l+1;else{this.ec=!0;0==a&&(this.ha.Ga+=zc(1));a=Math.floor(a/2.5);if(5<=a&&(this.F.jf.call(this),this.Tb)){if(this.F.ra){this.action="fire";this.U=u.l+1;return}this.F.ya&&(this.vb=1)}8<=a?this.action="ready":0==this.focus&&(a=("00"+a).slice(-2),this.ab=this.F.constructor.$a["RevolverEquip"+a])}};
sk.prototype.ready=function(){if(!fk(this))if(this.ec=!0,this.vb)this.action="reload",this.U=u.l+1;else{if(this.Tb){if(this.F.ra){this.action="fire";this.U=u.l+1;return}this.F.ya&&(this.vb=1)}this.qc();this.F.jf.call(this);this.F.Rd()}};
sk.prototype.fire=function(){var a=u.l-this.U;this.qc();if(4==a){u.v.sa.get("CarbineFire01").play({gain:1,pitch:1});u.v.sa.get("ShotgunFire01").play({gain:.5,pitch:1.5});this.Tb=0;this.F.ra--;!this.F.ra&&this.F.ya&&(this.vb=1);u.B.ld();this.jc=.5<this.focus?ek.W(0,.49195,-.017475,-.713,0,0):ek.W(.032225,.49195,-.022213,.367,-.151,.525);var b=this.oe;b.Ra=1;var c=255*(E(x)+4)/5&255;b.color.r=c;b.color.Pa=c;b.color.ga=c;b.scale=E(x)+1;b.wc=Ac(Mb());c=new U;c.translate(0,-21E3,0);be(this.jc,c,b.transform);
b=new qk;b.Ta=6E4;b.scale=1;b.transform.m31-=45E3;c=new U;be(this.ha.jd.O,this.jc,c);be(c,b.transform,b.transform);b.s.y=-37500;ce(c,b.s,b.s);b.s.add(this.ha.s);Od(b.s,b.bb);b.ea=this.ha.ea;W(b,u.hd);b.create();b.step();this.fc.push(b);b=(new U).rotate(0,zc(0*E(x)),0);c=(new U).rotate(0,0,E(x)*Math.PI*2);var d=ok(this.ha);be(d,c,d);be(d,b,d);b=this.F.te(d);b=q(b);for(c=b.next();!c.done;c=b.next()){c=c.value;d=c.item instanceof Y?3:1;for(var e=0;e<d;e++)ik(c,360,1.7)}}5==a&&(this.oe.Ra=0);7==a&&(this.ha.Ga+=
zc(3));if(7<=a){if(fk(this))return;a=7+Math.floor((a-7)/3)}if(13<=a){if(this.Tb){if(this.F.ra){this.action="fire";this.U=u.l+1;return}this.F.ya&&(this.vb=1)}if(this.vb){this.action="reload";this.U=u.l+1;return}this.F.Rd()}16<=a?this.action="ready":(a=("00"+a).slice(-2),this.F.jf.call(this),this.ab=.5<this.focus?this.F.constructor.$a["RevolverAimFire"+a]||this.F.constructor.$a.RevolverAim03:this.F.constructor.$a["RevolverFire"+a]||this.F.constructor.$a.RevolverEquip07)};
sk.prototype.reload=function(){var a=u.l-this.U+3;this.vb=0;if(!fk(this)){this.ec=!1;this.Ie=this.He=0;24==a&&(this.ha.Ga+=zc(.5),this.F.ya+=this.F.ra,this.F.ra=0,u.B.ld());if(57==a){this.ha.Ga+=zc(1);var b=Math.min(this.F.Nd-this.F.ra,this.F.ya);this.F.ra+=b;this.F.ya-=b;u.B.ld()}a=Math.floor(a/3);31<=a?this.action="ready":(a=("00"+a).slice(-2),this.ab=this.F.constructor.$a["RevolverReload"+a])}};f=sk.prototype;
f.jf=function(){this.Mc?(this.focus+=1/6,1<this.focus&&(this.focus=1)):this.ec=!0;if(0<this.focus){var a=Math.floor(3*this.focus);a=("00"+a).slice(-2);this.ab=this.F.constructor.$a["RevolverAim"+a]||this.F.constructor.$a.RevolverEquip07}else this.ab=this.F.constructor.$a.RevolverEquip07};f.pi=function(a){return.5<this.bi.focus?tk(this,a):hk.call(this,a)};
function tk(a,b){function c(n){var r=Md(n,d,new J);n=r.length();var p=26512.5/n;r=Hf(d,r);for(var t=0,z=!0;;){var w=r.shift();if(!w){if(!z){t+=p;break}t=1;break}if(!z){z=w.t-t;if(z>p){t+=p;break}p-=z}t=w.t;z=!w.Fa}return t*n>=n-1E3}var d=new J(b.H,b.m31,b.m32),e=new J(-b.J,-b.m21,-b.m22);b=[];b.cmp=function(n,r){return n.Qe>r.Qe?-1:1};for(var h=q(u.B.Gc),g=h.next();!g.done;g=h.next())if(g=g.value,(g.eb||!(u.l>g.U))&&600>u.l-g.ah){var k=Nj(d,e,g.b,g.va-a.Of,g.Ya);if(k.Le){var l=k.Le;0>l.t||1E8<=l.t||
(l.p.Qe=1E8-l.t,l.p.item=g,kb(b,l.p))}else{l=k.sg.X();var m=k.Dh-(g.va-a.Of);l.x+=k.Ed.x*m;l.y+=k.Ed.y*m;l.z+=k.Ed.z*m;k=Md(k.sg,d,new J).normalize();m=Md(l,d,new J).normalize();0>=Dc(m,e)||(k=Dc(k,m),l.Qe=k-1,l.item=g,kb(b,l),Math.acos(k)>=a.og&&(l.mk=!0))}}a=null;b=q(b);for(e=b.next();!e.done;e=b.next())e=e.value,c(e)&&(e.item.gk=u.l,e.mk||a||(a=e));return a}
f.te=function(a){var b=new J(a.H,a.m31,a.m32),c=new J(-a.J,-a.m21,-a.m22),d=1E8;a=[];for(var e=Hf(b,new J(c.x*d,c.y*d,c.z*d)),h=26512.5/d,g=0,k=!0;;){var l=e.shift();if(!l){k||(d*=g+h);break}if(!k){k=l.t-g;if(k>h){d*=g+h;break}h-=k}g=l.t;l.Fa&&a.push(l);k=!l.Fa}e=[];e.cmp=function(m,n){return m.t<n.t?-1:m.t>n.t?1:m.item.index<n.item.index?-1:m.item.index>n.item.index?1:0};h=q(u.B.Gc);for(g=h.next();!g.done;g=h.next())g=g.value,!g.eb&&u.l>g.U||!(l=Mj(b,c,g.b,g.va,g.Ya+g.va))||0>l.t||l.t>=d||(l.item=
g,l.Mb=c,kb(e,l));b=[];e.length&&b.push(e[0]);b.push.apply(b,ca(a));return b};f.uh=function(){return 0>=this.ya||"reload"==this.bi.action||2<this.ra?!1:!0};f.Gf=function(){var a=Xj(this);return 0>=a?2:6>a?1:0};f.Rd=function(){};function pk(a){Cj.call(this,a);this.Jb=12500;this.rf=1;this.start=u.l;this.Gj=new J(E(x)-.5,E(x)-.5,E(x)-.5);this.Gj.ja(1)}pk.prototype=Object.create(Cj.prototype);pk.prototype.constructor=pk;
pk.prototype.create=function(){Cj.prototype.create.call(this);var a=new gg(u.v.Yd.get(this.name));a.Ba=this.O;a.transform.scale(.1,.1,.1);a.transform.rotate(0,-90,0);W(a,this);a.create();ke(a,this.ea)};pk.prototype.step=function(){this.transform.oi(this.Gj,this.vi);30==u.l-this.start&&(u.v.sa.get("shellCasing0"+(Nb(3)+1)).play({gain:.625}),this.remove());Cj.prototype.step.call(this)};function mk(a){u.Node.call(this,a);this.Hb=u.l}mk.prototype=Object.create(u.Node.prototype);
mk.prototype.constructor=mk;mk.prototype.step=function(){u.Node.prototype.step.call(this);var a=u.l-this.Hb-6;0>a||(0==a&&u.v.sa.get(Qb("woodSnap01","woodSnap02","woodSnap03")).play({gain:10/60}),5<=(1<=a?a-1:0)&&this.remove())};var Wj=[];function Zj(){var a=Wj.indexOf(this);0>a||Wj.splice(a,1)};function bk(a){Hj.call(this,a);this.rf=100;this.rg=0;this.va=4E4;this.Ad=18E4;this.Kh=9E4;this.Ya=.5*(this.Ad-2*this.va-6E4);this.Ci=12E4;this.ac=12500;this.nf=2/3*this.ac;this.Zh=Hj.If(175E3);this.Jb=2E5;this.Rg=16;this.Tg=this.Ug=this.qc=this.Zd=this.Uh=this.Vh=this.th=this.Ga=this.Lf=this.Jg=0;this.nb=360;this.ng=[];this.Zg=-Infinity;this.eb=!0;this.ig=0;this.kj=-Infinity;this.lj=Number.NEGATIVE_INFINITY;this.mj=4E5}bk.prototype=Object.create(Hj.prototype);f=bk.prototype;f.constructor=bk;
f.create=function(){Cj.prototype.create.call(this);var a=this.nc=new Xf("worldCamera");a.Se=6E3;a.Me=5E7;a.Ba=this.O;W(a,this);u.B.pa=a;a=this.jd=new Xf("selfCamera");a.Se=this.nc.Se;a.Me=this.nc.Me;a.Ba=this.nc.O;W(a,u.xd);a=this.Sa=new ek(this);a.Ra=0;W(a,u.xd);a.create();a=new nk(this.Sa);a.$h=["KeyE","Digit1"];this.Sa.Xd.push(a);a=new rk(this.Sa);a.$h=["KeyC","Digit2"];this.Sa.Xd.push(a);a=new sk(this.Sa);a.$h=["KeyQ","Digit3"];this.Sa.Xd.push(a);this.Sa.ag=this.Sa.Xd[0]};
f.step=function(){Hj.prototype.step.call(this);if(this.eb){for(var a=0;a<this.ng.length;a++){var b=this.ng[a],c=u.l-30-b.Vj;0>c||(0<b.oc?(b=b.oc-2*c,0>=b&&this.ng.splice(a--,1)):0>b.oc&&(b=b.oc+2*c,0<=b&&this.ng.splice(a--,1)))}this.eb&&(Xe.lock&&(a=1,this.Sa.F&&(a=qb(1,this.Sa.F.Ph,this.Sa.focus)),a=u.lk*a,this.Jg-=Xe.hc.x*a,this.Lf+=Xe.hc.y*a),this.Lf=pb(this.Lf,-1073741824,1073741824));a=Ac(this.Jg);b=Ac(this.Lf)+zc(1.5*this.Uh);c=zc(1.5*this.Vh);ae(this.transform);this.transform.rotate(a,0,0);
ae(this.nc.transform);this.nc.transform.rotate(0,b,c);u.Fj||(this.nc.transform.rotate((E(x)-.5)*this.Ga,(E(x)-.5)*this.Ga,0),this.Ga*=.8125);0==(u.l&1)&&(this.hg()?(a=this.Vd*Math.PI/this.Rg,this.th=6E3*Math.abs(Math.sin(a)),this.Ug=Math.sin(a)*Math.PI/210,this.qc=(1-Math.abs(Math.sin(a)))*Math.PI/210):(this.th*=.75,this.qc*=.75,this.Ug*=.75),this.Tg-=zc(3),0>this.Tg&&(this.Tg=0));this.nc.transform.m31=this.Ya+this.va-6E3-6E3+this.th;a=1;this.Sa.F&&(a=qb(1,this.Sa.F.Ph,this.Sa.focus));this.ac=11E3*
qb(1,2/3,this.Sa.focus);this.jd.dd=zc(24*a);this.nc.dd=zc(30*a);if(!(2>u.l-this.lj)){a=this.mj;a*=a;b=null;c=Kf(this.b,this.mj);c=q(c);for(var d=c.next();!d.done;d=c.next())for(d=d.value.gh.first();null!=d.item;d=d.next)if(d.item instanceof Yj&&!d.item.ke){var e=Md(this.b,d.item.b,new J(0,0,0)).lf();e<a&&(a=e,b=d.item)}b&&(a=b,a.eb&&(a.eb=!1,xj.remove(a)),a.ke=this,a.species.fi.call(a,a.ke),this.lj=a.U=u.l)}}};
f.ei=function(a){if(a instanceof vk){if(a.Rj)debugger;a.Rj=!0;90>u.l-this.Zg||(u.v.sa.get("hit02").play({pitch:.5,gain:1}),u.v.sa.get(Qb("woodSnap01","woodSnap02","woodSnap03")).play({pitch:.5,gain:1}),wk(this,-60),this.Ga+=zc(6))}};f.Sh=function(){var a=new J(0,0,0);if(!this.eb)return a;Ye.d.KeyW&&--a.z;Ye.d.KeyS&&(a.z+=1);Ye.d.KeyA&&--a.x;Ye.d.KeyD&&(a.x+=1);a.ja(1)?(this.Zd+=1/6,1<this.Zd&&(this.Zd=1)):(this.Zd-=1/6,0>this.Zd&&(this.Zd=0));this.Vh=(5*this.Vh-a.x)/6;this.Uh=(5*this.Uh-a.z)/6;return a};
f.bj=function(){this.eb&&Ye.p.Space&&(this.Yg=u.l)};function ok(a){if(!a.Kf){var b=new U;b.set(a.nc.O);return b}b=Md(de(a.nc.O),a.Kf,new J).normalize();var c=new J(b.z,0,-b.x),d=new J(0,1,0);Lc(b,c,d).ja(1);Lc(d,b,c);var e=new U;e.G=c.x;e.K=c.y;e.L=c.z;e.I=d.x;e.m11=d.y;e.m12=d.z;e.J=b.x;e.m21=b.y;e.m22=b.z;e.H=a.nc.O.H;e.m31=a.nc.O.m31;e.m32=a.nc.O.m32;return e}function wk(a,b){0>b&&(a.Zg=u.l);b=pb(a.nb+b,0,360)-a.nb;a.ng.push({Vj:u.l,oc:b});a.nb+=b;0>=a.nb&&a.Pg()}
f.Pg=function(){if(this.eb){this.eb=!1;for(var a=q(u.B.Gc),b=a.next();!b.done;b=a.next())b=b.value,b.eb&&(b.action.length=0,b.action.unshift("idle"),b.U=NaN,b.path=null);this.Sa.remove();this.Sa=null;u.B.ka=null}};function Y(){Hj.call(this,"mantato");this.rf=150;this.rg=0;this.va=30800;this.Ad=189200;this.Kh=86E3;this.Ya=.5*(this.Ad-2*this.va-6E4);this.Ci=12E4;this.ac=1/3*14887;this.nf=2/3*this.ac;this.Zh=Hj.If(3E5);this.Jb=2E5;this.Vg=-Infinity;this.eb=!0;this.nb=360;this.cb=[];this.Qd=[];this.Ha=new U;this.l=this.qh=this.fe=0;this.re=new U;this.Og=0;this.Od=11E4;this.D=u.v.la.get("physicalCardThreshold");this.ma=u.v.ba.get("monsterWalk01");this.color=Cd;this.action=["idle"];this.U=NaN;this.gk=this.ah=-Infinity;
this.Mf=0;return this}Y.prototype=Object.create(Hj.prototype);Y.prototype.constructor=Y;Y.Ob=12;Y.Ia=NaN;
Y.$c=function(){Y.da=u.v.sb.get("defaultMaterial");var a=u.v.sb.get("monsterSkin").X();a.name="monsterSplatter";a.za=1;u.v.sb.add(a);xk.D=u.v.la.get("gib");xk.ma=u.v.ba.get("spudGib01");a=[];var b=new U;b.G=1;b.K=0;b.L=-0;b.I=0;b.m11=1;b.m12=0;b.J=0;b.m21=-0;b.m22=1;b.H=0;b.m31=0;b.m32=-0;a.push(b);b=new U;b.G=.9916;b.K=-.1173;b.L=.055;b.I=.1259;b.m11=.9725;b.m12=-.1958;b.J=-.0305;b.m21=.201;b.m22=.9791;b.H=-3498;b.m31=3796;b.m32=6804;a.push(b);b=new U;b.G=.9749;b.K=-.1934;b.L=.1102;b.I=.2213;b.m11=
.8963;b.m12=-.3843;b.J=-.0244;b.m21=.399;b.m22=.9166;b.H=-6400;b.m31=-2683;b.m32=15101;a.push(b);b=new U;b.G=.9601;b.K=-.2246;b.L=.1669;b.I=.2797;b.m11=.7517;b.m12=-.5972;b.J=.0087;b.m21=.62;b.m22=.7845;b.H=-8393;b.m31=-17164;b.m32=25181;a.push(b);b=new U;b.G=.9541;b.K=-.2123;b.L=.2114;b.I=.2942;b.m11=.5306;b.m12=-.795;b.J=.0566;b.m21=.8206;b.m22=.5686;b.H=-9429;b.m31=-39030;b.m32=35202;a.push(b);b=new U;b.G=.9591;b.K=-.1521;b.L=.2388;b.I=.2712;b.m11=.2519;b.m12=-.929;b.J=.0811;b.m21=.9557;b.m22=
.2828;b.H=-9721;b.m31=-68375;b.m32=44142;a.push(b);b=new U;b.G=.9359;b.K=-.2158;b.L=.2785;b.I=.2565;b.m11=-.1246;b.m12=-.9585;b.J=.2415;b.m21=.9685;b.m22=-.0613;b.H=-7782;b.m31=-63561;b.m32=42925;a.push(b);b=new U;b.G=.9573;b.K=-.1734;b.L=.2312;b.I=.1975;b.m11=-.1913;b.m12=-.9614;b.J=.2109;b.m21=.9661;b.m22=-.1489;b.H=-4587;b.m31=-61424;b.m32=39511;a.push(b);b=new U;b.G=.9812;b.K=-.1297;b.L=.143;b.I=.1237;b.m11=-.1466;b.m12=-.9814;b.J=.1482;b.m21=.9807;b.m22=-.1278;b.H=-2376;b.m31=-62808;b.m32=37771;
a.push(b);b=new U;b.G=.9889;b.K=-.134;b.L=.0638;b.I=.053;b.m11=-.0825;b.m12=-.9952;b.J=.1386;b.m21=.9875;b.m22=-.0745;b.H=-104;b.m31=-64955;b.m32=38224;a.push(b);b=new U;b.G=.9803;b.K=-.1963;b.L=.0226;b.I=.0119;b.m11=-.0555;b.m12=-.9984;b.J=.1973;b.m21=.979;b.m22=-.0521;b.H=2290;b.m31=-66053;b.m32=39447;a.push(b);b=new U;b.G=.9587;b.K=-.2839;b.L=.017;b.I=.0035;b.m11=-.0481;b.m12=-.9988;b.J=.2843;b.m21=.9577;b.m22=-.0451;b.H=4830;b.m31=-66621;b.m32=39607;a.push(b);b=new U;b.G=.939;b.K=-.3438;b.L=.0072;
b.I=-.0041;b.m11=-.0323;b.m12=-.9995;b.J=.3439;b.m21=.9385;b.m22=-.0317;b.H=6758;b.m31=-66864;b.m32=40168;a.push(b);b=new U;b.G=.9324;b.K=-.3614;b.L=5E-4;b.I=-.0114;b.m11=-.0308;b.m12=-.9995;b.J=.3612;b.m21=.9319;b.m22=-.0328;b.H=7520;b.m31=-66863;b.m32=40232;a.push(b);Y.Lc=a;a=[];b=new U;b.G=1;b.K=0;b.L=-0;b.I=0;b.m11=1;b.m12=-0;b.J=0;b.m21=0;b.m22=1;b.H=0;b.m31=-0;b.m32=0;a.push(b);b=new U;b.G=.9927;b.K=-.0183;b.L=-.119;b.I=.0277;b.m11=.9966;b.m12=.0773;b.J=.1171;b.m21=-.0801;b.m22=.9899;b.H=70;
b.m31=-3027;b.m32=-619;a.push(b);b=new U;b.G=.9816;b.K=-.0289;b.L=-.1886;b.I=.022;b.m11=.999;b.m12=-.0389;b.J=.1895;b.m21=.034;b.m22=.9813;b.H=288;b.m31=-5629;b.m32=253;a.push(b);b=new U;b.G=.9973;b.K=.0022;b.L=.074;b.I=.0054;b.m11=.9948;b.m12=-.1019;b.J=-.0738;b.m21=.1021;b.m22=.992;b.H=-219;b.m31=-2573;b.m32=764;a.push(b);b=new U;b.G=.9877;b.K=-.0202;b.L=-.155;b.I=.0055;b.m11=.9955;b.m12=-.0949;b.J=.1562;b.m21=.0929;b.m22=.9833;b.H=335;b.m31=259;b.m32=689;a.push(b);b=new U;b.G=.9986;b.K=.0123;b.L=
-.0519;b.I=-.0065;b.m11=.9937;b.m12=.1115;b.J=.053;b.m21=-.111;b.m22=.9924;b.H=178;b.m31=-3079;b.m32=-875;a.push(b);b=new U;b.G=.9996;b.K=.007;b.L=-.0256;b.I=-.0062;b.m11=.9994;b.m12=.0327;b.J=.0258;b.m21=-.0326;b.m22=.9991;b.H=110;b.m31=-5793;b.m32=-254;a.push(b);b=new U;b.G=.9893;b.K=-.0894;b.L=.1151;b.I=.0859;b.m11=.9957;b.m12=.0348;b.J=-.1177;b.m21=-.0245;b.m22=.9928;b.H=-944;b.m31=-2885;b.m32=-285;a.push(b);Y.qb=a};
Y.prototype.create=function(){this.transform.rotate(E(x)*Math.PI*2,0,0);le(this,37500);Wj.push(this);Hj.prototype.create.call(this);u.B.Gc.push(this)};Y.prototype.step=function(){Y.prototype[this.action[0]].call(this);this.y=this.b.y+this.Ya+this.va-this.Ad+12500;Hj.prototype.step.call(this)};
Y.prototype.se=function(){var a=de(this.O);a.y+=this.Ya+this.va-this.Ad+103400;var b=Md(de(u.pa.O),a,new J),c=b.ja(1);c=Math.min(1,c/(2*this.Ad));var d=new J(0,1,0),e=Lc(d,b,new J).normalize();Lc(b,e,d);var h=u.pa.O.ff(),g=u.pa.O.sd();this.Ha.xf(Nd(u.pa.O.ef(),e,c).normalize());this.Ha.yf(Nd(h,d,c).normalize());this.Ha.zf(Nd(g,b,c).normalize());ee(this.Ha,a);this.Fd?this.re.set(this.Fd[this.l%this.Fd.length]):this.re.reset();this.eb&&(a=this.O,a=Math.round(4*(Math.atan2(a.J,a.m22)-Math.atan2(u.pa.O.H-
a.H,u.pa.O.m32-a.m32))/Math.PI),0>a&&(a+=8),8<=a&&(a-=8),this.qh=a,this.re.rotate(this.qh*Math.PI/4,0,0));be(this.Ha,this.re,this.re);this.Ha.H+=this.Ha.I*this.Og;this.Ha.m31+=this.Ha.m11*this.Og;this.Ha.m32+=this.Ha.m12*this.Og;if(this.pg){a=q(this.pg);for(b=a.next();!b.done;b=a.next()){c=b.value;c.Re.H+=this.b.x;c.Re.m31+=this.b.y;c.Re.m32+=this.b.z;b=c.Sj;c=de(c.Re);d=this.re;e=new U;h=d.G*-d.H+d.K*-d.m31+d.L*-d.m32;g=d.I*-d.H+d.m11*-d.m31+d.m12*-d.m32;var k=d.J*-d.H+d.m21*-d.m31+d.m22*-d.m32,
l=d.I,m=d.J,n=d.K,r=d.m11,p=d.m21,t=d.L,z=d.m12,w=d.m22;e.G=d.G;e.I=n;e.J=t;e.H=h;e.K=l;e.m11=r;e.m21=z;e.m31=g;e.L=m;e.m12=p;e.m22=w;e.m32=k;e.jb(c,c);d={};d.b=c;d.Hb=u.l+1;e=7E3*b;h=Ob(2)?-e:e;k=Mb()*(180/2147483648);g=Math.cos(k);k=Math.sin(k);d.ta=new Qd;d.ta.G=g*h;d.ta.K=k*h;d.ta.I=-k*e;d.ta.m11=g*e;this.cb.push(d);this.cb.length>Y.Ob&&this.cb.shift();d={};d.b=c;d.Hb=u.l+1;b=7E3*b+3500;c=Ob(2)?-b:b;h=Mb()*(180/2147483648);e=Math.cos(h);h=Math.sin(h);d.ta=new Qd;d.ta.G=e*c;d.ta.K=h*c;d.ta.I=-h*
b;d.ta.m11=e*b;this.Qd.push(d);this.Qd.length>Y.Ob&&this.Qd.shift()}delete this.pg}};
Y.prototype.Oa=function(){Y.Ia+=2;255<Y.Ia&&(v.clear(v.STENCIL_BUFFER_BIT),Y.Ia=130);u.Db(1);v.colorMask(!1,!1,!1,!1);v.stencilFunc(v.ALWAYS,Y.Ia-128,255);v.stencilOp(v.KEEP,v.KEEP,v.REPLACE);var a=this.Ha.sd(),b=Dc(a,de(this.Ha));u.ub(pg);u.Xa(u.v.la.get("monoThresholdEffect"));u.Sb(0,u.v.ba.get("smokePuff01"));Y.da.bind();u.mb(0);u.Lb(0);u.D.N("color",Cd);for(var c=q(this.cb),d=c.next();!d.done;d=c.next()){var e=d.value;d=this.re.jb(e.b,new J);if(!(0>Dc(d,a)-b)){var h=4>u.l-e.Hb?1.4:1;e=(new Qd).set(e.ta);
e.G*=h;e.K*=h;e.I*=h;e.m11*=h;e=$d(this.Ha,e,new U);ee(e,d);u.D.N("modelMatrix",e);v.drawArrays(v.TRIANGLE_FAN,qg(0,1),4)}}u.Db(2);v.colorMask(!0,!0,!0,!0);v.stencilFunc(v.GEQUAL,Y.Ia-1,127);v.stencilOp(v.KEEP,v.KEEP,v.REPLACE);u.l==this.yd+1?this.D=u.v.la.get("flashCardThreshold"):u.l==this.yd+3&&(this.D=u.v.la.get("physicalCardThreshold"));u.ub(pg);u.Xa(this.D);u.Sb(0,this.ma);Y.da.bind();u.D.N("ambientLight",this.ea.pb,!1);u.mb(0);u.Lb(0);u.D.N("color",this.color);a=new U;a.set(this.Ha);b=this.Od;
a.G*=b;a.K*=b;a.L*=b;a.I*=-b;a.m11*=-b;a.m12*=-b;u.D.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,qg(this.qh*this.fe+this.l,this.lb),4);if("flashCardThreshold"!=this.D.name)for(u.Db(0),v.stencilFunc(v.EQUAL,Y.Ia-1,255),v.stencilOp(v.KEEP,v.KEEP,v.KEEP),a=this.Ha.sd(),b=Dc(a,de(this.Ha)),u.ub(pg),u.Xa(u.v.la.get("monoEffect")),u.Sb(0,u.v.ba.get("splatter01")),u.v.sb.get("monsterSplatter").bind(),u.mb(1),u.Lb(0),u.D.N("ambientLight",this.ea.pb,!1),u.D.N("color",xk.cd),c=q(this.Qd),d=c.next();!d.done;d=
c.next())e=d.value,d=this.re.jb(e.b,new J),0>Dc(d,a)-b||(h=4>u.l-e.Hb?1.4:1,e=(new Qd).set(e.ta),e.G*=h,e.K*=h,e.I*=h,e.m11*=h,e=$d(this.Ha,e,new U),ee(e,d),u.D.N("modelMatrix",e),v.drawArrays(v.TRIANGLE_FAN,qg(0,1),4))};
Y.prototype.idle=function(){isNaN(this.U)&&(this.U=u.l,this.ma=u.v.ba.get("monsterWalk01"),this.lb=64,this.fe=8,this.Fd=Y.qb);var a=u.l-this.U;this.l=0;0==a%30&&yk(this)&&(ck(this,u.B.ka.b),this.action[0]="rush",this.action.unshift("alert"),this.U=NaN,this.path=null);this.l=(Math.floor(a/8)%3+6)%8};
Y.prototype.wander=function(){isNaN(this.U)&&(this.U=u.l,this.ma=u.v.ba.get("monsterWalk01"),this.lb=64,this.fe=8,this.Fd=Y.qb,this.ac=1/3*14887);var a=u.l-this.U;if(!this.path){var b=Pb(Ai.qf),c=Nb(b.M-b.C)+b.C;b=Nb(b.w-b.m)+b.m;this.path=zk(this,c,b)}0==a%30&&yk(this)&&(ck(this,u.B.ka.b),this.action[0]="rush",this.action.unshift("alert"),this.U=NaN,this.path=null);this.l=Math.floor(a/3)%8};
Y.prototype.alert=function(){isNaN(this.U)&&(this.U=u.l,this.ma=u.v.ba.get("monsterWalk01"),this.lb=64,this.fe=8,this.Fd=Y.qb);var a=u.l-this.U;this.l=0;a==18-0*u.Ib.difficulty&&(this.action.shift(),this.Mf&&(this.action.unshift("attack"),this.U=NaN))};Y.prototype.hit=function(){isNaN(this.U)&&(this.U=u.l,this.ma=u.v.ba.get("monsterWalk01"),this.lb=64,this.fe=8,this.Fd=Y.qb);var a=u.l-this.U;this.l=0;60==a&&(this.action.shift(),this.U=NaN)};
Y.prototype.attack=function(){isNaN(this.U)&&(this.U=u.l,this.ma=u.v.ba.get("monsterWalk01"),this.lb=64,this.fe=8,this.Fd=Y.qb,ck(this,u.B.ka.b));var a=u.l-this.U;this.l=Math.floor(a/6)%8;if(15==a){var b=new vk;b.wj=this;--this.Mf;b.b.set(this.b.x,this.b.y,this.b.z);var c=u.B.ka.b.X();c.y+=u.B.ka.Ya+u.B.ka.va-12500;b.s.x=c.x-this.b.x;b.s.y=c.y-this.b.y;b.s.z=c.z-this.b.z;b.s.ja(28E3);ee(b.transform,b.b);W(b,u.we);b.create();b.Vf.push(this)}45==a&&(this.action.shift(),this.U=NaN)};
Y.prototype.rush=function(){isNaN(this.U)&&(this.U=u.l,this.ma=u.v.ba.get("monsterWalk01"),this.lb=64,this.fe=8,this.Fd=Y.qb,this.ac=7443.5,this.ac*=1+1/3*(u.Ib.difficulty-1));var a=u.l-this.U;this.path||(this.path=zk(this,u.B.ka.b.z,u.B.ka.b.x));0<a&&0==a%6&&this.Mf&&yk(this)&&(this.action.unshift("attack"),this.U=NaN);this.l=Math.floor(a/2)%8};
Y.prototype.death=function(){isNaN(this.U)&&(this.U=u.l,this.ma=u.v.ba.get("monsterDeath01"),this.lb=16,this.fe=0,this.Fd=Y.Lc);var a=u.l-this.U;4<=a&&(a-=4);this.l=Math.floor(a/4);13<this.l&&(this.l=13);6==a&&u.B.Ki(1);20==a&&(this.Og=.5*-this.Od);24==a&&u.v.sa.get(Qb("bodyThud01","bodyThud02")).play({gain:.5});660<=a&&this.remove()};
function yk(a){if(0>=u.Ib.difficulty||!u.B.ka)return!1;var b=a.b.X();b.y+=a.Ya+a.va-6E3;var c=u.B.ka.b.X();c.y+=u.B.ka.Ya+u.B.ka.va-6E3;c=Md(c,b,new J);if(Ff(b,c,Kj))return!1;b=c.X().normalize();return 180*Math.acos(Dc(b,a.O.sd()))/Math.PI<90+45*u.Ib.difficulty}function zk(a,b,c){Bi=300;return Di(a.b.z,a.b.x,b,c)}
Y.prototype.Sh=function(){var a=new J;if(!this.path||"alert"==this.action[0]||"hit"==this.action[0]||"attack"==this.action[0])return a;for(var b,c;;){b=this.path[0];c=b.getParameter(this.b.z,this.b.x);if(c<b.length)break;this.path.shift();if(!this.path.length)return this.path=null,a}b=b.evaluate(c+1E5);a.z=b.x-this.b.z;a.x=b.y-this.b.x;ck(this,new J(b.y,0,b.x));return a};Y.prototype.Fe=function(a){this.eb&&(this.yd=u.l,this.s.x=0,this.s.z=0,this.nb-=a,0>=this.nb&&this.Pg())};
Y.prototype.Pg=function(){this.eb&&(this.eb=!1,this.action=["death"],this.U=NaN,this.path=null,Zj.call(this),xj.remove(this))};Y.prototype.remove=function(){this.kh&&this.kh.remove();var a=u.B.Gc.indexOf(this);0<=a&&u.B.Gc.splice(a,1);Hj.prototype.remove.call(this);this.eb&&Zj.call(this)};function ck(a,b){b=Md(b,a.b,new J(0,0,0));b.y=0;b.ja(1);a.transform.G=b.z;a.transform.L=-b.x;a.transform.J=b.x;a.transform.m22=b.z}
function lk(a,b,c){a.eb&&("attack"==a.action[0]&&a.action.shift(),"hit"!=a.action[0]&&a.action.unshift("hit"),a.U=NaN,a.Vg=u.l);var d=c*(E(x)+1),e=new xk;e.frame=Nb(16);e.Ta=12E3*(E(x)+1);e.Ta*=c;e.b.set(0,0,5E4);b.jb(e.b,e.b);e.s.x=5E3*(2*E(x)-1);e.s.y=5E3*(2*E(x)-1);e.s.z=2E4*(E(x)+1);ce(b,e.s,e.s);e.xe=zc(60*(.25+E(x)));Ob(2)&&(e.xe=-e.xe);W(e,u.we);e.create();e=new xk;e.frame=Nb(16);e.Ta=8E3*(E(x)+1);e.Ta*=c;e.b.set(0,0,5E4);b.jb(e.b,e.b);e.s.x=5E3*(2*E(x)-1);e.s.y=5E3*(2*E(x)-1);e.s.z=2E4*(E(x)+
1);ce(b,e.s,e.s);e.af=xk.cd;W(e,u.we);e.create();c=Math.sqrt(3*c)+E(x)-.5;for(e=0;e<c;e++){var h=new xk;h.$g=120;h.frame=Nb(16);h.Ta=12E3;h.b.set(0,0,5E4);b.jb(h.b,h.b);h.s.x=2*E(x)-1;h.s.y=2*E(x)-1;h.s.z=2*E(x);h.s.ja(1E4*(E(x)+1));h.s.y+=6E3*E(x);ce(b,h.s,h.s);h.xe=zc(60*(.25+E(x)));Ob(2)&&(h.xe=-h.xe);Ob(2)&&(h.af=xk.cd);W(h,u.we);h.create()}ck(a,de(u.pa.O));me(a);a.pg||(a.pg=[]);b.H-=a.b.x;b.m31-=a.b.y;b.m32-=a.b.z;a.pg.push({Re:b,Sj:d})}
function vk(){Cj.call(this,"potato");this.Jb=1E5;this.va=12500;this.Ya=0;this.Wd=!1;return this}vk.prototype=Object.create(Cj.prototype);f=vk.prototype;f.constructor=vk;f.create=function(){this.U=u.l;this.Ha=new U;this.l=0;this.lb=16;this.Od=25E3;this.D=u.v.la.get("physicalCardThreshold");this.ma=u.v.ba.get("Potato");le(this,18750);Cj.prototype.create.call(this)};f.yj=function(){this.remove()};
f.se=function(){var a=de(this.O),b=Md(de(u.pa.O),a,new J),c=b.ja(1);c=Math.min(1,c/(4*this.va));var d=new J(0,1,0),e=Lc(d,b,new J).normalize();Lc(b,e,d);var h=u.pa.O.ff(),g=u.pa.O.sd();this.Ha.xf(Nd(u.pa.O.ef(),e,c).normalize());this.Ha.yf(Nd(h,d,c).normalize());this.Ha.zf(Nd(g,b,c).normalize());ee(this.Ha,a);a=u.l-this.U;this.l=3*Math.floor(a/2);this.l%=this.lb;0==Math.floor(a/2)%13?(this.D=u.v.la.get("flashCardThreshold"),this.color=Cd):1==Math.floor(a/2)%13?(this.D=u.v.la.get("flashCardThreshold"),
this.color=Dd):(this.D=u.v.la.get("physicalCardThreshold"),this.color=Cd)};f.Oa=function(){this.se();u.ub(pg);u.Xa(this.D);u.Sb(0,this.ma);Y.da.bind();u.D.N("ambientLight",this.ea.pb,!1);u.mb(0);u.Lb(0);u.D.N("color",this.color);var a=new U;a.set(this.Ha);var b=this.Od;a.G*=b;a.K*=b;a.L*=b;a.I*=-b;a.m11*=-b;a.m12*=-b;u.D.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,qg(this.l,this.lb),4)};f.remove=function(){this.wj.Mf+=1;Cj.prototype.remove.call(this)};
function xk(){u.Va.call(this,"SpudGib");mg.call(this);this.lb=16;this.frame=0;this.Ta=25E3;this.scale=1;this.Ne=Ob(2);this.wc=Ac(Mb());this.xe=0;this.Jb=2*this.Ta;this.U=this.Ij=u.l+4;this.s=new J(0,0,0);this.$g=600;this.af=xk.af;this.cd=xk.cd}xk.prototype=Object.create(u.Va.prototype);xk.prototype.constructor=xk;xk.af=new T(158,158,95,255);xk.cd=new T(255,255,95,255);
xk.prototype.create=function(){this.ce=this.b.X();this.transform.H=this.b.x;this.transform.m31=this.b.y;this.transform.m32=this.b.z;u.Va.prototype.create.call(this);var a=Jf(this.ce,this.s);a?(this.Cf=a.p,this.Ag=a.n,this.Xe=a.t):this.Xe=Number.POSITIVE_INFINITY};
xk.prototype.step=function(){var a=u.l-this.U;0>a||(a<this.Xe?this.yk?(this.b.y=this.ce.y+this.s.y*a,this.transform.m31=this.b.y):(this.b.set(this.ce.x+this.s.x*a,this.ce.y+.5*(2*this.s.y+wj.y*a)*a,this.ce.z+this.s.z*a),this.transform.H=this.b.x,this.transform.m31=this.b.y,this.transform.m32=this.b.z,u.l%3||(this.wc+=this.xe)):a==Math.ceil(this.Xe)&&(this.b.set(this.Cf.x,this.Cf.y,this.Cf.z),this.transform.H=this.b.x,this.transform.m31=this.b.y,this.transform.m32=this.b.z,this.af==this.cd&&(Gg(u.B.Si,
this.Cf,this.Ag,Ac(Mb()),this.Ta*this.scale*2.5,Nb(4),4),this.remove()),-1==this.Ag.y?(this.ce=this.b.X(),this.U=u.l+180+Nb(360),this.s.set(0,0,0),this.xe=0,(a=Jf(this.ce,this.s))?(this.Cf=a.p,this.Ag=a.n,this.Xe=a.t):this.Xe=Number.POSITIVE_INFINITY):0==this.Ag.y&&(this.ce=this.b.X(),this.U=u.l+180+Nb(360),this.s.set(0,-500,0),this.yk=!0,(a=Ff(this.ce,this.s,null))?(this.Cf=a.p,this.Ag=a.n,this.Xe=a.t):this.Xe=Number.POSITIVE_INFINITY)));u.l-this.Ij>this.$g&&this.remove();u.Va.prototype.step.call(this)};
xk.prototype.Oa=function(){ng.call(this,this.O);u.ub(pg);u.Xa(xk.D);u.Sb(0,xk.ma);u.mb(0);u.Db(2);u.Lb(0);u.D.N("modelMatrix",this.O);u.D.N("color1",this.af);u.D.N("color2",this.cd);u.D.N("ambientLight",this.ea.pb);v.drawArrays(v.TRIANGLE_FAN,qg(this.frame,this.lb),4);u.Va.prototype.Oa.call(this)};function Yj(a){Cj.call(this,"loot");this.species=a;this.va=37500;this.Ya=0;this.rg=.8;this.Hb=u.l+Nb(600);this.eb=!0}Yj.prototype=Object.create(Cj.prototype);Yj.prototype.constructor=Yj;Yj.Gg=function(){u.v.sa.get("coinPurse01");u.v.sa.get("coinPurse02");u.v.sa.get("coinPurse03");u.v.sa.get("coinPurse04");u.v.sa.get("ingot01");u.v.sa.get("ingot02");u.v.sa.get("gem01");u.v.sa.get("gem02");u.v.sa.get("gem03");u.v.sa.get("crumplePaper01");u.v.sa.get("crumplePaper02")};
Yj.Gk=function(a,b){for(var c=[];a;){for(var d=0;d<Yj.$e.length&&!(Yj.$e[d].value>a);)d++;if(1==b)--d;else if(0==b)d=0;else{var e=2*b;e=1<=e?2-e:1/e;d=Math.floor(Math.pow(E(x),e)*d)}d=Yj.$e[d];a-=d.value;c.push(new Yj(d))}return c};f=Yj.prototype;f.create=function(){this.U=u.l;this.Ha=new U;this.l=0;this.lb=16;this.D=u.v.la.get("physicalCardThreshold");this.transform.scale(1,1,1);le(this,18E3);Cj.prototype.create.call(this)};
f.step=function(){if(this.eb)60==u.l-this.Hb&&(this.eb=!1,xj.remove(this)),Cj.prototype.step.call(this);else{if(this.ke){var a=Md(new J(this.ke.b.x,this.ke.b.y,this.ke.b.z),this.b,new J(0,0,0));a.lf()<Math.pow(5E4,2)?(a=this.ke,this.species.Th.call(this,a),Pb(this.species.sa).play({gain:1}),a.kj=u.l,wk(a,Qb(3,3,3,3,3,5,5,5,8)),this.remove()):(a.y*=5,a.ja(25E3),this.b.x+=a.x,this.b.y+=a.y,this.b.z+=a.z);this.transform.H=this.b.x;this.transform.m31=this.b.y;this.transform.m32=this.b.z}u.Va.prototype.step.call(this)}};
f.remove=function(){u.Va.prototype.remove.call(this);xj.remove(this);this.kc&&this.kc.remove()};f.se=function(){var a=de(this.O),b=Md(de(u.pa.O),a,new J),c=b.ja(1);c=Math.min(1,c/(4*this.va));var d=new J(0,1,0),e=Lc(d,b,new J).normalize();Lc(b,e,d);var h=u.pa.O.ff(),g=u.pa.O.sd();this.Ha.xf(Nd(u.pa.O.ef(),e,c).normalize());this.Ha.yf(Nd(h,d,c).normalize());this.Ha.zf(Nd(g,b,c).normalize());ee(this.Ha,a);this.l=this.ke?Math.floor(Math.min(15,(u.l-this.U)/2+8)):Math.floor((u.l-this.U)/3)%8};
f.Oa=function(){this.se();u.ub(pg);u.Xa(this.D);u.Sb(0,this.species.wi);Y.da.bind();u.D.N("ambientLight",this.ea.pb,!1);u.mb(0);u.Lb(0);u.D.N("color",Cd);var a=new U;a.set(this.Ha);var b=this.species.Od;a.G*=b;a.K*=b;a.L*=b;a.I*=-b;a.m11*=-b;a.m12*=-b;u.D.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,qg(this.l,this.lb),4)};Yj.$c=function(a){a=q(a.Sa.Xd);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b instanceof this.species.gg)return b.Md-Xj(b)-b.Nf;return 0};
Yj.Ob=function(a){a=q(a.Sa.Xd);for(var b=a.next();!b.done;b=a.next())b=b.value,b instanceof this.species.gg&&(b.Nf+=this.species.oc)};Yj.Gb=function(a){a=q(a.Sa.Xd);for(var b=a.next();!b.done;b=a.next())b=b.value,b instanceof this.species.gg&&(b.ya+=Math.min(this.species.oc,b.Md-Xj(b)),b.Nf-=this.species.oc,u.B.ld())};Yj.Kk=function(a){return 360-a.nb-a.ig};Yj.Jk=function(a){a.ig+=this.species.oc};Yj.Hk=function(a){wk(a,this.species.oc);a.ig-=this.species.oc};function qk(a){u.qa.call(this,a);mg.call(this);this.D=u.v.la.get("physicalCard");this.ma=u.v.ba.get("smokePuff02");this.da=qk.da;this.color=new T(qk.color.r,qk.color.Pa,qk.color.ga,255);this.frame=0;this.lb=16;this.s=new J;this.bb=new J;this.scale=1;this.wc=Ac(Mb());this.Hb=u.l}qk.prototype=Object.create(u.qa.prototype);qk.prototype.constructor=qk;qk.da=new oe;qk.da.za=2;qk.color=new T(144,144,144,255);
qk.prototype.step=function(){var a=u.l-this.Hb;a=Math.pow(a/540,.625);this.frame=Math.floor(9*a);this.alpha=.25*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.Ea=this.alpha*qk.color.Ea&255;this.transform.m31+=200;this.s.scale(.8125);a=new J(.5*this.bb.x+.5*this.s.x,.5*this.bb.y+.5*this.s.y,.5*this.bb.z+.5*this.s.z);this.transform.H+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.bb.set(this.s.x,this.s.y,this.s.z);u.qa.prototype.step.call(this)};
qk.prototype.Oa=function(){og.call(this);u.qa.prototype.Oa.call(this)};function kk(a){u.qa.call(this,a);mg.call(this);this.D=u.v.la.get("physicalCard");this.ma=u.v.ba.get("smokePuff02");this.da=qk.da;this.color=new T(kk.color.r,kk.color.Pa,kk.color.ga,255);this.frame=0;this.lb=16;this.s=new J;this.bb=new J;this.scale=1;this.wc=Ac(Mb());this.ea={Aa:4294967295,pb:new J(1,1,1)};this.Hb=u.l}kk.prototype=Object.create(u.qa.prototype);kk.prototype.constructor=kk;kk.color=new T(212,212,212,255);
kk.prototype.step=function(){var a=u.l-this.Hb;a/=this.$g;a=Math.pow(a,.75);this.frame=Math.floor(9*a);this.alpha=.375*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.Ea=this.alpha*kk.color.Ea&255;this.s.scale(.8125);var b=new J(.5*this.bb.x+.5*this.s.x,.5*this.bb.y+.5*this.s.y,.5*this.bb.z+.5*this.s.z);this.transform.H+=b.x;this.transform.m31+=b.y;this.transform.m32+=b.z;this.bb.set(this.s.x,this.s.y,this.s.z);if(0==a||0==u.l%4)a=de(this.transform),(b=Ff(a,new J(0,-1E8,0),null))&&(b=ef(b.item.aa))&&
Wf(a,b,this.ea.pb);u.qa.prototype.step.call(this)};kk.prototype.Oa=function(){og.call(this);u.qa.prototype.Oa.call(this)};function Ak(a){u.qa.call(this,a);mg.call(this);this.D=u.v.la.get("spray");this.ma=u.v.ba.get("spray01");this.da=Ak.da;this.color=new T(xk.cd.r,xk.cd.Pa,xk.cd.ga,255);this.s=new J;this.bb=new J;this.scale=1;this.wc=Ac(Mb());this.Hb=u.l}Ak.prototype=Object.create(u.qa.prototype);Ak.prototype.constructor=Ak;Ak.da=new oe;Ak.da.za=0;
Ak.prototype.step=function(){var a=u.l-this.Hb;a/=this.Vk;this.scale=15*a;1<=a&&this.remove();this.color.Ea=254*(a+1)&255;this.s.add(wj);a=new J(.5*this.bb.x+.5*this.s.x,.5*this.bb.y+.5*this.s.y,.5*this.bb.z+.5*this.s.z);this.transform.H+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.bb.set(this.s.x,this.s.y,this.s.z);u.qa.prototype.step.call(this)};Ak.prototype.Oa=function(){og.call(this);u.qa.prototype.Oa.call(this)};
function dk(a,b){u.qa.call(this,b);mg.call(this);this.D=u.v.la.get("image");this.ma=u.v.ba.get("explode");this.da=dk.da;this.color=new T(255,255,255,255);this.scale=1;this.Ta=a;this.Ne=Ob(2);this.wc=Ac(Mb());this.Hb=u.l+1;this.lb=16}dk.prototype=Object.create(u.qa.prototype);dk.prototype.constructor=dk;dk.da=new oe;dk.da.za=1;
dk.prototype.step=function(){var a=u.l-this.Hb;50<=a&&this.remove();this.scale+=.02;this.transform.m31+=3E3*(1-a/50);this.frame=Math.floor(16*(1-Math.pow(.9375,a)));a=255*(1-(a-15)/35);255<a&&(a=255);a&=255;this.color.r=a;this.color.Pa=a;this.color.ga=a;this.color.Ea=a;u.qa.prototype.step.call(this)};dk.prototype.Oa=function(){og.call(this);u.qa.prototype.Oa.call(this)};
function jk(a,b){u.qa.call(this,b);mg.call(this);this.D=u.v.la.get("image");this.ma=u.v.ba.get("bulletFlare01");this.da=jk.da;this.color=new T(255,255,255,0);this.scale=1;this.Ta=a;this.Ne=Ob(2);this.wc=Ac(Mb());this.Hb=u.l+1;this.lb=4}jk.prototype=Object.create(u.qa.prototype);jk.prototype.constructor=jk;jk.da=new oe;jk.da.za=1;jk.prototype.step=function(){var a=u.l-this.Hb;0<=a&&(3<=a&&this.remove(),this.scale+=.25);this.frame=Math.floor(a);u.qa.prototype.step.call(this)};
jk.prototype.Oa=function(){og.call(this);u.qa.prototype.Oa.call(this)};u.B=new u.Node("game");u.$i=new u.Node("gameDraw");u.B.Jj=0;u.B.qj=0;u.B.pj=0;u.B.oj=0;u.B.Gc=[];u.B.Wf=[];u.B.Pf=[];u.B.ai=0;u.B.mg=0;u.B.hj=NaN;u.B.xh=[];u.B.Hg=!0;u.B.ld=function(){var a=u.B.ka.Sa.F,b=-170,c=119;!(a instanceof sk)&&a instanceof nk&&(b+=6,c-=10);var d=Xj(a).toLocaleString("en-US");var e=u.v.ba.get("HUDNumerals24Bold");d=u.aj(e,d,0);d.color=Dd;d.x=b;d.y=c;d.x-=d.width*d.Hj.width;a.wh=d;u.B.Hg=!0};u.B.Ki=function(a){u.B.ai+=a;u.B.mg+=a};
u.B.fk=function(){0>=u.B.mg||u.l<u.B.hj+2||(u.B.mg--,u.B.hj=u.l,u.v.sa.get("hit02").play({gain:1}),u.B.xh=u.aj(u.v.ba.get("HUDNumerals24Bold"),(u.B.ai-u.B.mg).toLocaleString("en-US"),1),u.B.xh.Tk=u.l,u.B.Hg=!0)};
u.v.ready=function(){u.Ib.difficulty=1;u.Ib.lightingFancy=document.getElementById("inputCheckbox_lightingFancy").checked;u.Ib.mouseRaw=document.getElementById("inputCheckbox_mouseRaw").checked;u.Ib.mouseDPI=parseFloat(document.getElementById("inputNumber_mouseDPI").value);u.Ib.mouseScale=parseFloat(document.getElementById("inputNumber_mouseScale").value);u.ih();var a=u.v.ba.get("HUDNumerals10");a.je=[7,5,7,7,8,7,7,7,7,7,3];a.Pe=10;a.eg=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.fg=[0,1,0,0,-1,0,0,0,0,0,0];
u.Wh(a);a=u.v.ba.get("HUDNumerals14Bold");a.je=[9,6,9,9,9,9,9,9,9,9,4];a.Pe=14;a.eg=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.fg=[0,1,0,0,0,0,0,0,0,0,0];u.Wh(a);a=u.v.ba.get("HUDNumerals24Bold");a.je=[13,9,13,13,14,13,13,13,13,13,5];a.Pe=23;a.eg=[0,1,0,0,-1,0,0,0,0,0,0];a.fg=[0,3,0,0,0,0,0,0,0,0,0];u.Wh(a);u.Cj=W(new u.Node("scnBuilderMeshes"),u.sc);u.we=W(new u.Node("scnWorld"),u.sc);u.Ve=W(new u.Node("scnDoors"),u.we);u.Ve.Ra=0;u.ue=W(new u.Node("scnSpuds"),u.sc);u.ue.Ra=0;u.si=W(new u.Node("scnLoot"),
u.sc);u.ug=W(new u.Node("scnShadows"),u.sc);u.ug.Ra=0;u.ve=W(new u.Node("scnWindowPanes"),u.sc);u.ve.Ra=0;u.hd=W(new u.Node("scnEffects"),u.sc);u.hd.Ra=0;u.xd=W(new u.Node("scnSelf"),u.sc);u.xd.Ra=0;u.rk=W(new u.Node("scnHUD"),u.sc);W(yj,u.sc);W(u.B,u.sc);u.Qh=1E3/60;u.tg=new Qj;u.qk();a=[new J(135/255,223/255,206/255),new J(230/255,230/255,172/255),new J(135/255,223/255,206/255),new J(135/255,223/255,206/255),new J(0,213/255,1),new J(135/255,223/255,206/255)];u.B.Lk=a;for(var b=new Float32Array(36),
c=0;c<a.length;c++)a[c].x=.1*a[c].x+.65,a[c].y=.1*a[c].y+.65,a[c].z=.1*a[c].z+.65,a[c].scale(.75),b[3*c]=a[c].x,b[3*c+1]=a[c].y,b[3*c+2]=a[c].z;u.Xa(u.v.la.get("physical"));u.D.N("ambient",b);u.D.N("clipY",Infinity,!1);u.Xa(u.v.la.get("imageContrast"));u.D.N("contrastOffset",0);u.D.N("contrastScale",1.0625);u.ub(Ne);ve(Ne,Ne.Cg.length*Ne.wb);Ne.upload(Ne.Cg);u.ae(Qe);ve(Qe,2*Qe.elements.length);Qe.upload(Qe.elements);u.v.sb.get("gemRuby").za=0;u.v.sb.get("gemEmerald").za=0;u.v.sb.get("gemSapphire").za=
0;u.v.sb.get("bulbGreen").za=0;Y.$c();a=zc(5);rk.qb=[];for(b=0;9>b;b++)c=b,c*=1/9,c=Math.pow(c,.5),rk.qb[b]=c*a;nk.Gi=u.v.ba.get("ViewCarbine");nk.ni=u.v.ba.get("HUDReticleCarbine");nk.Ia=u.v.ba.get("HUDItemCarbine");nk.Ia.offsetY=-12;rk.Gi=u.v.ba.get("ViewShotgun");rk.ni=u.v.ba.get("HUDReticleShotgun");rk.Ia=u.v.ba.get("HUDItemShotgun");rk.Ia.offsetY=-10;sk.Gi=u.v.ba.get("ViewRevolver");sk.ni=u.v.ba.get("HUDReticleRevolver");sk.Ia=u.v.ba.get("HUDItemRevolver");sk.Ia.offsetY=-9;a=[u.v.sa.get("crumplePaper01"),
u.v.sa.get("crumplePaper02"),u.v.sa.get("ShotgunShut01")];nk.Bh={wi:u.v.ba.get("CarbineMag"),Od:5E4,sa:a,Kj:Yj.$c,fi:Yj.Ob,Th:Yj.Gb,gg:nk,oc:30};rk.Bh={wi:u.v.ba.get("ShotshellBox"),Od:5E4,sa:a,Kj:Yj.$c,fi:Yj.Ob,Th:Yj.Gb,gg:rk,oc:8};sk.Bh={wi:u.v.ba.get("RevolverLoader"),Od:25E3,sa:a,Kj:Yj.$c,fi:Yj.Ob,Th:Yj.Gb,gg:sk,oc:6};Yj.Gg();a=u.B.Si=new Eg;a.D=u.v.la.get("splatter");a.ma=u.v.ba.get("splatter02");a.color=xk.cd;a.za=1;a=u.B.Ri=new Eg;a.D=u.v.la.get("image");a.ma=u.v.ba.get("bulletPock01");a.color=
new T(255,255,255,128);a.za=2;a=new oe;a.name="flashWhite";a.od=Dd;a.Uc=Bd;a.Td=Cd;a.za=0;u.v.sb.add(a);a=new oe;a.name="flashRed";a.od=Dd;a.Uc=Bd;a.Td=Ed;a.za=0;u.v.sb.add(a);u.B.hk();u.B.Jj?(a=new Rj("devCamera"),W(a,u.sc),a.create(),u.B.pa=a):(a=ef(0)[0][0],b=u.B.ka=new bk("player"),b.Jg=Math.floor(2147483648/180*90),b.b.y=a.y+.5*b.Ad,b.b.z=a.z,b.b.x=a.x,W(b,u.we),b.create());u.B.Ki(0);W(u.$i,u.sc);u.start()};
u.B.hk=function(){Sg=bg=ag=Rg=-1;Pg=[];Tg=0;Ug=null;Vg=[];Wg=[];Qg=0;Xg=[];ci.call(Xg);Xg.ea.Aa=u.l;Xg.di=0;Xg.index=Pg.length+Qg;Pg.push(Xg);Yg=[];Yg.index=Tg++;Yg.Nc=[];Yg.eh=0;Yg.y=-4E5;Zh(Yg,Xg);var a=new lh(-4E5,4E5,-3E5,3E5);a.platform=Yg;for(Yg.push(a);Ni(););Gi=!0;u.B.qj=19;u.B.oj=3;u.B.pj=5;if(u.si.children)for(;;){a=u.si.children.first().item;if(!a)break;a.remove()}};
u.B.Bk=function(){if(!(u.B.Gc.length>=u.B.qj)){var a=Pb(Ai.qf);a=new J(Nb(a.w-a.m)+a.m,-1E5,Nb(a.M-a.C)+a.C);var b=Ff(a,new J(0,-1E8,0),null);b&&(a.y=b.p.y+1E5,u.B.ka?(b=Md(u.B.ka.b,a,new J),b=Ff(a,b,Kj)?!0:!1):b=!0,b&&(b=new Y,b.b.x=a.x,b.b.y=a.y,b.b.z=a.z,ee(b.transform,b.b),W(b,u.ue),b.create()))}};
u.B.Ak=function(){if(!(this.Wf.length>=u.B.pj)){var a=Pb(Ai.qf);a=new J(Nb(a.w-a.m)+a.m,-1E5,Nb(a.M-a.C)+a.C);var b=Ff(a,new J(0,-1E8,0),null);b&&(a.y=b.p.y+1E5,u.B.ka?(b=Md(u.B.ka.b,a,new J),b=Ff(a,b,Kj)?!0:!1):b=!0,b&&(a=new Vj(a.x,a.y-1E5,a.z),W(a,u.we),a.create()))}};
u.B.zk=function(){if(!(this.Pf.length>=u.B.oj)){var a=Pb(Ai.qf);a=new J(Nb(a.w-a.m)+a.m,-1E5,Nb(a.M-a.C)+a.C);var b=Ff(a,new J(0,-1E8,0),null);b&&(a.y=b.p.y+1E5,u.B.ka?(b=Md(u.B.ka.b,a,new J),b=Ff(a,b,Kj)?!0:!1):b=!0,b&&(a=new ak(a.x,a.y-1E5,a.z),W(a,u.we),a.create()))}};
u.B.step=function(){var a=Nf[1-Of];if(0==u.l%4){var b=q(cf);for(var c=b.next();!c.done;c=b.next()){var d=c.value,e=d.index-df;d.ea.pb.x=a[0][e];d.ea.pb.y=a[1][e];d.ea.pb.z=a[2][e];a[0][e]=0;a[1][e]=0;a[2][e]=0}a=q(Mf);for(var h=a.next();!h.done;h=a.next())b=h.value,b.bc&&(b.Ic=b.jg==b.Ue?Vf(b.bc):Uf(b.bc));Pf()}for(d=0;4>d;d++){Of=1-Of;b=Nf[Of];a=Nf[1-Of];for(e=0;3>e;e++)for(c=q(Mf),h=c.next();!h.done;h=c.next()){h=h.value;var g=h.Ic*b[e][h.jg.index-df];g*=h.hh[e];a[e][h.Ue.index-df]+=g/h.Ue.Ai}e=
q(cf);for(c=e.next();!c.done;c=e.next())c=c.value,h=c.index-df,c.be?(b[0][h]=c.ed.x,b[1][h]=c.ed.y,b[2][h]=c.ed.z,a[0][h]=c.ed.x,a[1][h]=c.ed.y,a[2][h]=c.ed.z):(b[0][h]=c.ed.x,b[1][h]=c.ed.y,b[2][h]=c.ed.z)}for(a=performance.now()+4;performance.now()<a&&Ni(););u.B.Jj||0!=u.l%5||(this.Bk(),this.Ak(),this.zk());u.B.fk()};
u.$i.step=function(){u.Qb.r=0;u.Qb.Pa=0;u.Qb.ga=0;u.Qb.Ea=0;u.B.ka&&4>u.l-u.B.ka.kj&&(u.Qb.r+=24,u.Qb.Pa+=24,u.Qb.ga+=24,u.Qb.Ea+=24);if(u.B.ka){var a=u.l-u.B.ka.Zg;a=1.5-a/6;0>a&&(a=0);1<a&&(a=1);u.Qb.r+=170*a;u.Qb.Ea+=170*a}v.bindFramebuffer(v.FRAMEBUFFER,u.tg.object);u.Db(2);v.clear(v.DEPTH_BUFFER_BIT|v.STENCIL_BUFFER_BIT);0==u.l%60&&u.Cj.children.sort(Mi);Zf();u.Xa(u.v.la.get("physical"));u.Ve.Ra=1;ie(u.Ve);u.Ve.Ra=0;u.D.N("clipY",Infinity,!1);var b=Ib.first();for(a=gf.first();b.item;){if(a.item){if(a.item.Dg<
u.l){var c=a.next;Ab(a);a=c;continue}if(0<Jb(b.item,a.item)){a=a.next;continue}}c=b.next;Ab(b);Cb(b,a);b=c}for(;a.item;)b=a.next,a.item.Dg<u.l&&Ab(a),a=b;hf.H=.00390625*u.pa.O.H;hf.m31=.00390625*u.pa.O.m31;hf.m32=.00390625*u.pa.O.m32;u.ub(pg);u.Xa(u.v.la.get("sky"));u.Sb(0,u.v.ba.get("concr01"));u.D.N("texture1",1,!0);u.Sb(1,u.v.ba.get("sky01"));u.D.N("color",Cd);u.mb(0);u.Db(1);u.Lb(0);a=new U;b=(.5*u.pa.Se+.5*u.pa.Me)*Xf.Lc;a.scale(b*u.viewport.ratio,b,1);a.m32=-b/Math.tan(u.pa.dd);be(u.pa.O,a,
a);u.D.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,0,4);if(u.ue.children){u.ue.children.sort(Li);Y.Ia=128;for(a=u.ue.children.first();a.item;a=a.next)a.item.wg()&&a.item instanceof Y&&a.item.se();v.enable(v.STENCIL_TEST);for(a=u.ue.children.first();a.item;a=a.next)a.item.wg()&&(a.item instanceof Y||(v.stencilFunc(v.GEQUAL,128,255),v.stencilOp(v.KEEP,v.KEEP,v.KEEP)),a.item.Oa());v.disable(v.STENCIL_TEST)}if(u.B.ka&&u.B.ka.Sa.F instanceof sk&&.5<u.B.ka.Sa.focus){u.Xa(u.v.la.get("flashCardThreshold"));
u.mb(1);u.Db(1);v.depthFunc(v.GREATER);for(a=u.ue.children.first();a.item;a=a.next)if(a.item instanceof Y&&a.item.Ra&&600>u.l-a.item.ah){u.D.N("color",new T(0,0,0,32*(1-(u.l-a.item.ah)/600)));b=a.item;u.ub(pg);u.Sb(0,b.ma);u.Lb(0);c=new U;c.set(b.Ha);var d=b.Od;c.G*=d;c.K*=d;c.L*=d;c.I*=-d;c.m11*=-d;c.m12*=-d;u.D.N("modelMatrix",c);v.drawArrays(v.TRIANGLE_FAN,qg(b.qh*b.fe+b.l,b.lb),4)}u.D.N("color",Cd);v.depthFunc(v.LEQUAL)}u.B.Si.Oa();u.B.Ri.Oa();u.Xa(tj.D);u.D.N("modelMatrix",hf);tj.da.bind();u.mb(1);
u.Db(1);u.Lb(1);u.ub(tj.Ma);u.ae(tj.qd);b=a=0;for(c=gf.first();c.item;c=c.next)c.item.Qi==a+b?b+=c.item.Pi:(b&&v.drawElements(v.TRIANGLES,b,v.UNSIGNED_SHORT,2*a),a=c.item.Qi,b=c.item.Pi);b&&v.drawElements(v.TRIANGLES,b,v.UNSIGNED_SHORT,2*a);u.mb(1);u.Db(1);u.Lb(0);u.Xa(u.v.la.get("monoEffect"));u.ub(pg);v.activeTexture(v.TEXTURE0);v.bindTexture(v.TEXTURE_2D,u.v.ba.get("shadow").object);u.D.N("enableTexture0",1,!0);u.D.N("color",u.ze.color);u.ug.Ra=1;ie(u.ug);u.ug.Ra=0;if(u.ve.children){a=u.pa.O.sd();
for(b=u.ve.children.first();b.item;b=b.next)b.item.wg()&&(b.item.depth=Dc(a,b.item.b));u.ve.children.sort(si.W);si.se();u.ve.Ra=1;ie(u.ve);u.ve.Ra=0}u.hd.Ra=1;ie(u.hd);u.hd.Ra=0;u.B.ka&&(u.Dj(u.B.ka.jd),Yf(u.B.ka.jd),u.xd.Ra=1,ie(u.xd),u.xd.Ra=0);u.B.ka&&(a=u.B.ka.Sa,a.Ra=1,a.Oa(),a.Ra=0);u.mb(0);u.Db(0);u.Lb(0);v.bindFramebuffer(v.FRAMEBUFFER,null);u.Ub.zc.N("viewMatrix",fe);u.Ub.zc.upload();u.ub(pg);u.vg(new Qc(u.canvas.width,u.canvas.height));u.Xa(u.v.la.get("imageContrast"));v.activeTexture(v.TEXTURE0);
v.bindTexture(v.TEXTURE_2D,u.tg.color.object);u.D.N("texture0",0,!0);u.D.N("enableTexture0",1,!0);u.D.N("modelMatrix",fe);u.D.N("color",Cd);u.D.N("fadeColor",u.Qb);v.drawArrays(v.TRIANGLE_FAN,0,4);u.B.ka&&u.B.Yj()};
u.B.Yj=function(){function a(w,y,B,A,D,F,L){u.Sb(0,w);var da=u.canvas.width>>1,P=u.canvas.height>>1,ka=.5*w.width,X=.5*w.height;0==h?y-=da:1==h&&(y+=da);2==g?B-=P:3==g&&(B+=P);0==d?y+=ka:1==d&&(y-=ka);2==e?B+=X:3==e&&(B-=X);y=Math.round(y);B=Math.round(B);void 0===A?v.scissor(0,0,u.canvas.width,u.canvas.height):v.scissor(y+da-ka+A,-B+P-X+D,F,L);A=new U;A.G=w.width/u.canvas.width*k;A.m11=-w.height/u.canvas.height*l;A.H=2*y/u.canvas.width;A.m31=-2*B/u.canvas.height;u.D.N("modelMatrix",A);v.drawArrays(v.TRIANGLE_FAN,
0,4)}var b=u.B.ka.Sa.F;if(u.B.Hg){u.B.Oj=new we;var c=[];b&&(c=c.concat(b.wh));c=c.concat(u.B.xh);xe(c);u.B.Hg=!1}u.vg(new Qc(u.canvas.width,u.canvas.height));u.Ub.zc.N("viewMatrix",fe);u.Ub.zc.upload();u.Db(0);u.Lb(0);var d=0,e=2,h=0,g=2,k=1,l=1;u.mb(2);v.enable(v.SCISSOR_TEST);u.ub(pg);u.Xa(u.v.la.get("image"));u.D.N("color",Cd);if(b){b.uh()&&(d=4,e=2,h=4,g=5,c=Math.cos(60*u.l/Math.PI),c=pb(c,0,1),u.D.N("color",new T(255,255*c,255*c,127+128*c)),c=u.v.ba.get("HUDWarnReload"),a(c,0,30),u.D.N("color",
Cd));var m=[Cd,new T(255,255,64,255),new T(208,0,0,255)];if(b instanceof sk){var n=b.ra;d=0;e=3;h=4;g=5;c=u.v.ba.get("HUDMagRevolver");a(c,-158-34*n,123,34*n,0,34,34);e=2;c=u.v.ba.get("HUDAmmo2");u.D.N("color",m[b.Gf()]);a(c,-201,91);u.D.N("color",Cd)}else b instanceof nk?(n=b.ra,d=0,e=3,h=4,g=5,c=u.v.ba.get("HUDMagCarbine"),a(c,-208,124+13*n,0,13*n,97,13),e=2,c=u.v.ba.get("HUDAmmo3"),u.D.N("color",m[b.Gf()]),a(c,-208,81),u.D.N("color",Cd)):b instanceof rk&&(n=b.Yb,d=0,e=3,h=4,g=5,c=u.v.ba.get("HUDMagShotgun"),
a(c,-150-18*n,123,18*n,0,18,34),e=2,c=u.v.ba.get("HUDAmmo2"),u.D.N("color",m[b.Gf()]),a(c,-201,91),u.D.N("color",Cd))}d=1;e=3;h=4;g=5;c=u.v.ba.get("HUDGrenade");for(m=0;4>m;m++)a(c,208,125-18*m);b&&u.B.ka.Sa.ec&&(u.mb(1),u.Xa(u.v.la.get("monoEffect")),c=new Pd,u.B.ka.Kf?(u.D.N("color",new T(255,0,0,255)),m=u.B.ka.Kf,u.B.pa.Fi.transform(new Pd(m.x,m.y,m.z,1),c),c.x/=2*c.a,c.y/=2*c.a):u.D.N("color",new T(0,128,255,255)),u.D.N("ambientLight",new J(1,1,1)),d=4,e=5,h=4,g=5,(m=b.constructor.ni)&&a(m,Math.round(c.x*
u.canvas.width),Math.round(-c.y*u.canvas.height)),u.mb(2),u.Xa(u.v.la.get("image")),u.D.N("color",Cd));v.disable(v.SCISSOR_TEST);u.ub(u.B.Oj);m=c=0;m=u.canvas.width>>1;n=u.canvas.height>>1;var r=new U;if(b&&b.wh){var p=b.wh;var t=p.x;var z=p.y;b=p.Hj;u.Sb(0,b);r.G=k*b.width/m;r.m11=l*b.height/n;r.H=t/m;r.m31=-z/n;u.D.N("modelMatrix",r);u.D.N("color",p.color);m=p.length;v.drawArrays(v.TRIANGLES,c,m);c+=m}};
u.nj=function(){var a=u.ci=document.createElement("div");a.style.position="absolute";a.style.backgroundColor="rgba(0,0,0,0.8)";a.style.left=0;a.style.top=0;a.style.right=0;a.style.bottom=0;a.style.userSelect="none";re.appendChild(a);a=document.createElement("div");a.style.position="absolute";a.style.left="50%";a.style.top="50%";u.ci.appendChild(a);var b=document.createElement("button");b.style.position="relative";b.style.left="-50%";b.style.top="-1em";b.style.zIndex=2;b.style.margin="0px";b.style.padding=
"16px";b.style.background="none";b.style.color="white";b.style.fontFamily="'Arial', sans-serif";b.style.fontSize="2em";b.style.fontWeight="bold";b.style.border="0px";b.style.cursor="pointer";b.title="play";b.innerHTML="Play";b.onclick=function(){Xe.tk()};a.appendChild(b)};document.addEventListener("pointerlockchange",function(){document.pointerLockElement?(re.removeChild(u.ci),Ye.clear(),Xe.clear(),u.resume()):(re.appendChild(u.ci),u.pause())});
(function(){var a,b,c,d,e;return Ja(new Ha(new Da(function(h){if(1==h.W){console.log("ShootPotato v0.004");a=(new Date).getTime();window.localStorage.removeItem("resources");window.localStorage.removeItem("resourceVersion");var g=fetch("resources_221218_01.gob");h.W=2;return{value:g}}if(3!=h.W)return b=h.Ob,c=Uint8Array,g=b.arrayBuffer(),h.W=3,{value:g};d=new c(h.Ob);for(e=0;e<d.length;e++);d.position=0;g=d;for(var k=53,l=0;l<g.length;l++){var m=g[l];g[l]=g[l]-193*k-53&255;k=m}u.v.load(d);console.log("Resources loaded from URL in",
(new Date).getTime()-a,"ms.");h.W=0})))})();
