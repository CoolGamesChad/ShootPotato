var f;function ba(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function q(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:ba(a)}}function da(a){if(!(a instanceof Array)){a=q(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
var ea="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ha="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function ia(a,b){if(b){var c=ea;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ha(c,a,{configurable:!0,writable:!0,value:b})}}
ia("Promise",function(a){function b(g){this.Ia=0;this.Pb=void 0;this.W=[];var k=this.qb();try{g(k.resolve,k.reject)}catch(l){k.reject(l)}}function c(){this.W=null}function d(g){return g instanceof b?g:new b(function(k){k(g)})}if(a)return a;c.prototype.Ia=function(g){if(null==this.W){this.W=[];var k=this;this.qb(function(){k.Pb()})}this.W.push(g)};var e=ea.setTimeout;c.prototype.qb=function(g){e(g,0)};c.prototype.Pb=function(){for(;this.W&&this.W.length;){var g=this.W;this.W=[];for(var k=0;k<g.length;++k){var l=
g[k];g[k]=null;try{l()}catch(m){this.Gb(m)}}}this.W=null};c.prototype.Gb=function(g){this.qb(function(){throw g;})};b.prototype.qb=function(){function g(m){return function(n){l||(l=!0,m.call(k,n))}}var k=this,l=!1;return{resolve:g(this.Fg),reject:g(this.Gb)}};b.prototype.Fg=function(g){if(g===this)this.Gb(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.xh(g);else{a:switch(typeof g){case "object":var k=null!=g;break a;case "function":k=!0;break a;default:k=!1}k?this.Jf(g):
this.Lc(g)}};b.prototype.Jf=function(g){var k=void 0;try{k=g.then}catch(l){this.Gb(l);return}"function"==typeof k?this.yh(k,g):this.Lc(g)};b.prototype.Gb=function(g){this.$c(2,g)};b.prototype.Lc=function(g){this.$c(1,g)};b.prototype.$c=function(g,k){if(0!=this.Ia)throw Error("Cannot settle("+g+", "+k+"): Promise already settled in state"+this.Ia);this.Ia=g;this.Pb=k;this.cf()};b.prototype.cf=function(){if(null!=this.W){for(var g=0;g<this.W.length;++g)h.Ia(this.W[g]);this.W=null}};var h=new c;b.prototype.xh=
function(g){var k=this.qb();g.Lg(k.resolve,k.reject)};b.prototype.yh=function(g,k){var l=this.qb();try{g.call(k,l.resolve,l.reject)}catch(m){l.reject(m)}};b.prototype.then=function(g,k){function l(p,t){return"function"==typeof p?function(z){try{m(p(z))}catch(w){n(w)}}:t}var m,n,r=new b(function(p,t){m=p;n=t});this.Lg(l(g,m),l(k,n));return r};b.prototype.catch=function(g){return this.then(void 0,g)};b.prototype.Lg=function(g,k){function l(){switch(m.Ia){case 1:g(m.Pb);break;case 2:k(m.Pb);break;default:throw Error("Unexpected state: "+
m.Ia);}}var m=this;null==this.W?h.Ia(l):this.W.push(l)};b.resolve=d;b.reject=function(g){return new b(function(k,l){l(g)})};b.race=function(g){return new b(function(k,l){for(var m=q(g),n=m.next();!n.done;n=m.next())d(n.value).Lg(k,l)})};b.all=function(g){var k=q(g),l=k.next();return l.done?d([]):new b(function(m,n){function r(z){return function(w){p[z]=w;t--;0==t&&m(p)}}var p=[],t=0;do p.push(void 0),t++,d(l.value).Lg(r(p.length-1),n),l=k.next();while(!l.done)})};return b});
function na(){na=function(){};ea.Symbol||(ea.Symbol=qa)}function ra(a,b){this.W=a;ha(this,"description",{configurable:!0,writable:!0,value:b})}ra.prototype.toString=function(){return this.W};var qa=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new ra("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function sa(){na();var a=ea.Symbol.iterator;a||(a=ea.Symbol.iterator=ea.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ha(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ua(ba(this))}});sa=function(){}}function ua(a){sa();a={next:a};a[ea.Symbol.iterator]=function(){return this};return a}function va(){this.Gb=!1;this.Ia=null;this.Pb=void 0;this.W=1;this.$c=0;this.qb=null}function wa(a){if(a.Gb)throw new TypeError("Generator is already running");a.Gb=!0}
va.prototype.Lc=function(a){this.Pb=a};function ya(a,b){a.qb={Zj:b,hk:!0};a.W=a.$c}va.prototype.return=function(a){this.qb={return:a};this.W=this.$c};function Da(a){this.W=new va;this.Ia=a}function Ea(a,b){wa(a.W);var c=a.W.Ia;if(c)return Fa(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.W.return);a.W.return(b);return Ga(a)}
function Fa(a,b,c,d){try{var e=b.call(a.W.Ia,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.W.Gb=!1,e;var h=e.value}catch(g){return a.W.Ia=null,ya(a.W,g),Ga(a)}a.W.Ia=null;d.call(a.W,h);return Ga(a)}
function Ga(a){for(;a.W.W;)try{var b=a.Ia(a.W);if(b)return a.W.Gb=!1,{value:b.value,done:!1}}catch(c){a.W.Pb=void 0,ya(a.W,c)}a.W.Gb=!1;if(a.W.qb){b=a.W.qb;a.W.qb=null;if(b.hk)throw b.Zj;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function Ha(a){this.next=function(b){wa(a.W);a.W.Ia?b=Fa(a,a.W.Ia.next,b,a.W.Lc):(a.W.Lc(b),b=Ga(a));return b};this.throw=function(b){wa(a.W);a.W.Ia?b=Fa(a,a.W.Ia["throw"],b,a.W.Lc):(ya(a.W,b),b=Ga(a));return b};this.return=function(b){return Ea(a,b)};sa();this[Symbol.iterator]=function(){return this}}
function Ja(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function h(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(h,e)}h(a.next())})}ia("Math.sign",function(a){return a?a:function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1}});
function Ka(a,b){sa();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}ia("Array.prototype.keys",function(a){return a?a:function(){return Ka(this,function(b){return b})}});var La=document.body;La.style.position="relative";La.style.left=(window.innerWidth-960>>1)+"px";La.style.width="960px";La.style.margin="0px";
La.style.marginBottom="20px";La.style.padding="0px";La.style.display="flex";La.style.flexFlow="row wrap";La.style.alignItems="flex-start";La.style.alignContent="flex-start";La.style.backgroundColor="#404040";La.style.fontFamily="sans-serif";La.style.fontSize="12pt";La.style.lineHeight="1.4em";La.style.color="white";window.onresize=function(){document.body.style.left=(window.innerWidth-960>>1)+"px"};var Ma=document.createElement("div");Ma.innerHTML="The website where you shoot potatoes.";
Ma.style.fontSize="18pt";Ma.style.fontWeight="bold";Ma.style.flex="1 0 auto";Ma.style.textAlign="center";Ma.style.margin="0";document.body.appendChild(Ma);var Na=document.createElement("div");Na.id="paneContainer";Na.style.width="960px";Na.style.height="592px";Na.style.margin="40px 0";Na.style.outline="10px solid black";Na.style.backgroundColor="black";document.body.appendChild(Na);var Oa=document.createElement("div");Oa.id="divCPanel";document.body.appendChild(Oa);var Ta=document.getElementById("divCPanel");
Ta.style.width="960px";Ta.insertAdjacentHTML("beforeend",'\n\t\t<h2 style="color:#ffff80">How to Play:</h2>\n\t\t<b>W,A,S,D</b> and <b>Space</b> - move and jump.<br />\n\t\t<b>[Q,E,C]</b> - select guns.<br />\n\t\t<b>Mouse</b> - aim and shoot.<br />\n\t\t<b>Right Mouse Button</b> - gun special feature.<br />\n\t\t<b>R</b> - reload.<br />\n\t\t<b>Esc</b> - pause the game.<br />\n\t\t\n\t\t<h2 style="color:#ffff80">Options:</h2>\n\t');var Ua=document.createElement("input");Ua.id="inputCheckbox_lightingFancy";
Ua.name="lightingFancy";Ua.title="Enable per-pixel global illumination. Disable this to improve framerate. Default: true";Ua.type="checkbox";var Wa=window.localStorage.getItem("lightingFancy");null===Wa&&(Wa="true");Ua.checked="true"==Wa;Ua.onchange=function(a){u.Ib.lightingFancy=a.target.checked;window.localStorage.setItem("lightingFancy",a.target.checked)};Ua.style.marginTop="8px";var Ya=document.createElement("label");Ya.setAttribute("for",Ua.id);Ya.title="Enable per-pixel global illumination. Disable this to improve framerate. Default: true";
Ya.innerHTML="Fancy lighting";Ta.appendChild(Ua);Ta.insertAdjacentHTML("beforeend"," ");Ta.appendChild(Ya);Ta.insertAdjacentHTML("beforeend","<br />");var Za=document.createElement("input");Za.id="inputCheckbox_mouseRaw";Za.name="mouseRaw";Za.title="Enable unadjusted hardware mouse delta (in compatible browsers). Default: true";Za.type="checkbox";var $a=window.localStorage.getItem("mouseRaw");null===$a&&($a="true");Za.checked="true"==$a;
Za.onchange=function(a){u.Ib.mouseRaw=a.target.checked;window.localStorage.setItem("mouseRaw",a.target.checked)};Za.style.marginTop="8px";var ab=document.createElement("label");ab.setAttribute("for",Za.id);ab.title="Enable unadjusted hardware mouse delta (in compatible browsers). Default: true";ab.innerHTML="Raw mouse input";Ta.appendChild(Za);Ta.insertAdjacentHTML("beforeend"," ");Ta.appendChild(ab);Ta.insertAdjacentHTML("beforeend","<br />");var bb=document.createElement("input");bb.id="inputNumber_mouseDPI";
bb.name="mouseDPI";bb.title="The DPI of your mouse. Default: 800";bb.type="number";bb.min=100;bb.step=100;var cb=window.localStorage.getItem("mouseDPI");null===cb&&(cb="800");bb.value=cb;bb.onchange=function(a){a.target.checkValidity()&&(u.Ib.mouseDPI=parseFloat(a.target.value),window.localStorage.setItem("mouseDPI",a.target.value),u.ih())};bb.style.marginTop="8px";bb.style.width="5em";var db=document.createElement("label");db.setAttribute("for",bb.id);db.title="The DPI of your mouse. Default: 800";
db.innerHTML="Mouse DPI:";Ta.appendChild(db);Ta.insertAdjacentHTML("beforeend"," ");Ta.appendChild(bb);Ta.insertAdjacentHTML("beforeend","<br />");var fb=document.createElement("input");fb.id="inputNumber_mouseScale";fb.name="mouseScale";fb.title="Inches of mouse movement per 360\u00b0 rotation. Default: 3.5";fb.type="number";fb.min=.125;fb.step=.125;var gb=window.localStorage.getItem("mouseScale");null===gb&&(gb="3.5");fb.value=gb;
fb.onchange=function(a){a.target.checkValidity()&&(u.Ib.mouseScale=parseFloat(a.target.value),window.localStorage.setItem("mouseScale",a.target.value),u.ih())};fb.style.marginTop="8px";fb.style.width="5em";var hb=document.createElement("label");hb.setAttribute("for",fb.id);hb.title="Inches of mouse movement per 360\u00b0 rotation. Default: 3.5";hb.innerHTML="Mouse scale:";Ta.appendChild(hb);Ta.insertAdjacentHTML("beforeend"," ");Ta.appendChild(fb);Ta.insertAdjacentHTML("beforeend","<br />");
Ta.insertAdjacentHTML("beforeend",'\n\t\t<h2 style="color:#ffff80">About:</h2>\n\t\tThis game is currently in development.<br />\n\t\tPlease let me know of any technical problems\u2014your feedback is essential to identifying those problems.<br />\n\t\tchad.chisholm@protonmail.com\n\t');function ib(a,b){for(var c=0,d=a.length,e=c+(d-c>>1);c<d;){var h=a.cmp.call(null,b,a[e]);if(0>h)d=e,e=c+(d-c>>1);else if(0<h)c=e+1,e=c+(d-c>>1);else break}return e}function jb(a,b){var c=ib(a,b);return a[c]&&0==a.cmp(a[c],b)?a[c]:null}function kb(a,b){var c=ib(a,b);if(a[c]&&0==a.cmp(a[c],b))return a[c];a.splice(c,0,b);return b}function mb(a,b){var c=ib(a,b);a[c]&&0==a.cmp(a[c],b)&&a.splice(c,1)};for(var u={},v,nb=new Uint8Array(256),pb=0;256>pb;pb++)nb[pb]=nb[pb>>>1]+(pb&1);function qb(a,b,c){return a<b?b:a>c?c:a}function rb(a,b,c){return a*(1-c)+b*c}function sb(a,b){return a==b?a:0==a?b:0==b?a:0==(a&1)?0==(b&1)?sb(a>>1,b>>1)<<1:sb(a>>1,b):0==(b&1)?sb(a,b>>1):a>=b?sb(a-b>>1,b):sb(b-a>>1,a)}function tb(a,b,c){var d=b*b-4*a*c;if(0<d){c={};d=Math.sqrt(d);a=2*a;var e=(-b+d)/a;a=(-b-d)/a;a>e?(c.Ca=e,c.mc=a):(c.Ca=a,c.mc=e);return c}return 0==d?(c={},c.Ca=-b/(2*a),c.mc=c.Ca,c):null}
function ub(a){this.cmp=a;this.elements=[]}f=ub.prototype;f.get=function(a){var b=xb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements[b]};f.contains=function(a){var b=xb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?-1:b};f.add=function(a){return this.push(a)};f.push=function(a){var b=xb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return!1;this.elements.splice(b,0,a);return!0};
f.replace=function(a){var b=xb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b]=a,!0;this.elements.splice(b,0,a);return!0};f.Ka=function(a){var b=xb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b];this.elements.splice(b,0,a);return a};f.remove=function(a){var b=xb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements.splice(b,1)[0]};
function xb(a,b){for(var c=0,d=a.elements.length,e=Math.floor(c/2+d/2);c<d;){var h=a.cmp.call(a,b,a.elements[e]);if(0>h)d=e,e=Math.floor(c/2+d/2);else if(0<h)c=e+1,e=Math.floor(c/2+d/2);else break}return e}f.clear=function(){this.elements.length=0};f.Xg=function(){return 0==this.elements.length};function yb(){this.start=new zb(null);return this}f=yb.prototype;f.Xg=function(){return!this.first().item};f.size=function(){for(var a=0,b=this.first();b.item;b=b.next)a++;return a};f.first=function(){return this.start.next};
f.clear=function(){Bb(this.start);return this};function Cb(a,b){Eb(b,a.start);return a}f.add=function(a){return Cb(this,new zb(a))};function Fb(a){for(var b=Kb,c=Lb,d=b.first();d.item;d=d.next)if(0>c.call(null,a.item,d.item)){Eb(a,d);return}Eb(a,b.start)}f.get=function(a){for(var b=this.first();b.item;b=b.next)if(b.item==a)return b;return null};f.remove=function(a){a=this.get(a);if(null==a)return null;Bb(a);return this};
f.sort=function(a){for(var b,c=this.first();c.item;c=b){b=c.next;var d=c;for(var e=d.jb;e.item&&!(0<=a(d.item,e.item));)e=e.jb;d=e;d!=c.jb&&(Bb(c),c.jb=d,c.next=d.next,c.jb.next=c,c.next.jb=c)}};function zb(a){this.item=a;this.jb=this;this.next=this;return this}function Eb(a,b){a.next=b;a.jb=b.jb;a.next.jb=a;a.jb.next=a}function Bb(a){a.jb.next=a.next;a.next.jb=a.jb;a.next=a.jb=a};function Mb(){var a;isNaN(a)&&(a=(new Date).getTime()|0);this.rk=a;this.r=a+643709624|0}Mb.prototype.next=function(){this.r^=this.r<<13;this.r^=this.r>>17;this.r^=this.r<<5;this.r>>>=0};function Nb(){var a=x;a.next();return a.r}function E(a){a.next();return a.r/4294967295}var x=new Mb;function Ob(a){return Math.floor(E(x)*a)}function Pb(a){return 1>E(x)*a}function Qb(a){return a[Ob(a.length)]}function Rb(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return Qb(b)};function Sb(a,b,c){for(var d=0,e=a.length,h=d+(e-d>>1);d<e;){var g=c.call(null,b,a[h]);if(0>g)e=h,h=d+(e-d>>1);else if(0<g)d=h+1,h=d+(e-d>>1);else break}return h}function Tb(a,b){var c=a.splice(0);c=q(c);for(var d=c.next();!d.done;d=c.next())d=d.value,a.splice(Sb(a,d,b),0,d)}function Lb(a,b){return isNaN(a)?a.index<b.index?-1:a.index>b.index?1:0:a<b.index?-1:a>b.index?1:0}function Ub(a,b){return"string"==typeof a?a<b.name?-1:a>b.name?1:0:a.name<b.name?-1:a.name>b.name?1:0};function Vb(a){var b=Wb(a);a=a.slice(a.position,a.position+=b);return String.fromCharCode.apply(null,a)}function Xb(a,b){Yb(a,b.length);for(var c=0;c<b.length;c++)a[a.position++]=b.charCodeAt(c)}function ec(a){var b=fc(a);a=a.slice(a.position,a.position+=b);return String.fromCharCode.apply(null,a)}function gc(a,b){hc(a,b.length);for(var c=0;c<b.length;c++)a[a.position++]=b.charCodeAt(c)}function Wb(a){return a[a.position++]}function Yb(a,b){a[a.position++]=b&255}
function ic(a){var b=0|a[a.position++]<<0;return b|=a[a.position++]<<8}function jc(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}function pc(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;return(b>>>0)-32768}function qc(a,b){b+=32768;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}function fc(a){var b=a[a.position++]<<0;b+=a[a.position++]<<8;b+=a[a.position++]<<16;return b+=a[a.position++]<<24}
function hc(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}function rc(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;b|=a[a.position++]<<16;b|=a[a.position++]<<24;return(b>>>0)-2147483648}function sc(a,b){b+=2147483648;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}
function tc(a){var b=new Uint8Array(4);b[0]=a[a.position++];b[1]=a[a.position++];b[2]=a[a.position++];b[3]=a[a.position++];return(new Float32Array(b.buffer))[0]}function uc(a,b){var c=new Float32Array(1);c[0]=b;c=new Uint8Array(c.buffer);a[a.position++]=c[0];a[a.position++]=c[1];a[a.position++]=c[2];a[a.position++]=c[3]};function vc(){this.size=0;this.root=new wc;this.root.update=function(){};this.Qb=null}vc.prototype.Xg=function(){return 0==this.size};vc.prototype.pop=function(){if(this.Xg())return null;var a=this.root.Pd.lf(),b=a.value;this.remove(a);return b};
vc.prototype.add=function(a,b){this.Qb=new xc;if(0==this.size)this.root.Pd=this.Qb,this.Qb.parent=this.root;else{var c=this.root;var d=this.size;d=nb[d>>>0&255]+nb[d>>>8&255]+nb[d>>>16&255]+nb[d>>>24];for(var e=0;e<d;e++)c=c.Pd;d=new wc;d.parent=c.parent;c.parent.Pd=d;d.Hh=c;c.parent=d;d.Pd=this.Qb;this.Qb.parent=d}c=this.Qb;c.value=a;c.key=b;c.parent.update();this.size++;return this.Qb};
vc.prototype.remove=function(a){if(a==this.Qb)1==this.size?this.root.Pd=this.Qb=null:yc(this);else{var b=this.Qb.value,c=this.Qb.key;yc(this);a.value=b;a.key=c;a.parent.update()}this.size--};function yc(a){var b=a.Qb.parent,c=b.Hh;a.Qb=c.Qb();c.parent=b.parent;c.parent.Pd=c;c.parent.update()}function wc(){}wc.prototype.lf=function(){return this.first};wc.prototype.Qb=function(){return this.Pd.Qb()};
wc.prototype.update=function(){this.first=this.Pd.lf().key<this.Hh.lf().key?this.Pd.lf():this.Hh.lf();this.parent.update()};function xc(){}xc.prototype.lf=function(){return this};xc.prototype.Qb=function(){return this};Math.Kf=2*Math.PI;function zc(a){return a*Math.PI/180}function Ac(a){return Math.PI/2147483648*a}function Bc(a,b,c,d){return Cc(new J(a.x-c.x,a.y-c.y,a.z-c.z),b,d)}function Cc(a,b,c){return tb(Dc(b,b),2*Dc(a,b),Dc(a,a)-c*c)}function Kc(a,b,c){.7071>a.y&&-.7071<a.y?(b.set(a.z,0,-a.x),Lc(a,b,c).ka(1),Lc(c,a,b)):(c.set(0,a.z,-a.y),Lc(c,a,b).ka(1),Lc(a,b,c))}
function Mc(a,b){var c;c||(c=new Nc);for(var d=[],e=0;;){for(var h=-1,g=null,k=Number.POSITIVE_INFINITY,l=0;l<b.length;l++)if(!(e&1<<l)){var m=b[l],n=Dc(m,a);n<k&&(h=l,g=m,k=n)}if(0<=k)break;c=c.gi(a,g,k);d.push(g);e|=1<<h;if(!c)break}a.round()}function Nc(){}Nc.prototype.gi=function(a,b,c){a.x-=b.x*c;a.y-=b.y*c;a.z-=b.z*c;return new Oc(b)};function Oc(a){this.n=a}Oc.prototype.gi=function(a,b){b=Lc(this.n,b,new J(0,0,0));if(0==b.ka(1))return null;var c=Dc(a,b);a.x=b.x*c;a.y=b.y*c;a.z=b.z*c;return new Pc(b)};
function Pc(a){this.n=a}Pc.prototype.gi=function(a,b,c){b=c/Dc(this.n,b);if(!isFinite(b))return null;a.x-=this.n.x*b;a.y-=this.n.y*b;a.z-=this.n.z*b;return null};function Qc(a,b,c){null==a?(this.a=b*c,this.g=b,this.ratio=c):null==b?(this.a=a,this.g=a/c,this.ratio=c):null==c?(this.a=a,this.g=b,this.ratio=a/b):(this.a=a,this.g=b,this.ratio=c);this.y=this.x=0;a=a>b?a:b;for(this.bufferSize=8;this.bufferSize<a;this.bufferSize*=2);}
function O(a,b,c,d,e){a=Math.round(a);b=Math.round(b);c=Math.round(c);d=Math.round(d);this.f=a;this.c=b;this.B=c;this.u=d;if(!e)return this.$=c-a,this.V=d-b,this.zb=this.oa=NaN,this.length=Math.sqrt(this.$*this.$+this.V*this.V),a=this.$,b=this.V,0>a?0>b?-a<-b?(this.type=9,this.oa=-a/b,this.zb=-b/this.length,a=sb(-a,-b),this.$/=a,this.V/=a):-a>-b?(this.type=7,this.oa=b/a,this.zb=-a/this.length,a=sb(-a,-b),this.$/=a,this.V/=a):(this.type=8,this.oa=this.V=this.$=-1,this.zb=Math.SQRT1_2):0<b?-a<b?(this.type=
3,this.oa=-a/b,this.zb=b/this.length,a=sb(-a,b),this.$/=a,this.V/=a):-a>b?(this.type=5,this.oa=b/a,this.zb=-a/this.length,a=sb(-a,b),this.$/=a,this.V/=a):(this.type=4,this.$=-1,this.V=1,this.oa=-1,this.zb=Math.SQRT1_2):(this.type=6,this.$=-1):0<a?0>b?a<-b?(this.type=11,this.oa=-a/b,this.zb=-b/this.length,a=sb(a,-b),this.$/=a,this.V/=a):a>-b?(this.type=13,this.oa=b/a,this.zb=a/this.length,a=sb(a,-b),this.$/=a,this.V/=a):(this.type=12,this.$=1,this.oa=this.V=-1,this.zb=Math.SQRT1_2):0<b?a<b?(this.type=
1,this.oa=-a/b,this.zb=b/this.length,a=sb(a,b),this.$/=a,this.V/=a):a>b?(this.type=15,this.oa=b/a,this.zb=a/this.length,a=sb(a,b),this.$/=a,this.V/=a):(this.type=0,this.V=this.$=1,this.oa=-1,this.zb=Math.SQRT1_2):(this.type=14,this.$=1):a<b?(this.type=2,this.V=1):a>b&&(this.type=10,this.V=-1),this}function Rc(a,b){return a.f<b.f?-1:a.f>b.f?1:a.c<b.c?-1:a.c>b.c?1:a.B<b.B?-1:a.B>b.B?1:a.u<b.u?-1:a.u>b.u?1:0}f=O.prototype;
f.replace=function(a){this.remove=!0;if(this.wd){a=q(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b.wd){var c=q(this.wd);for(d=c.next();!d.done;d=c.next())d=d.value,0<=b.wd.indexOf(d)||(b.wd.push(d),d.push(b))}else{b.wd=this.wd.slice();c=q(b.wd);for(var d=c.next();!d.done;d=c.next())d.value.push(b)}a=q(this.wd);for(d=a.next();!d.done;d=a.next())b=d.value,b.splice(b.indexOf(this),1);delete this.wd}};function Sc(a,b){var c=a.f+b.$;b=a.c+b.V;return Math.atan2(R(a,c,b),a.getParameter(c,b))}
function Tc(a,b,c){for(var d={Wj:[],code:0},e=0;e<c.length;e++)d.Wj.push(R(c[e],a,b)),1==Uc(c[e],a,b)&&(d.code+=1<<e);return d}function Vc(a){var b;var c=Number.NEGATIVE_INFINITY;var d=Number.POSITIVE_INFINITY;var e=b=null;var h=a[a.length-1];a=q(a);for(var g=a.next();!g.done;g=a.next()){g=g.value;var k=g.f-g.c;k>c?(c=k,d=g.c,b=h,e=g):k==c&&g.c<d&&(d=g.c,b=h,e=g);h=g}c=b.type&7;d=e.type;return c<d?!0:c>d?!1:b.oa<e.oa?!0:b.oa>e.oa?!1:!0}
function ad(a,b,c){var d=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,h=null,g=null;c=q(c);for(var k=c.next();!k.done;k=c.next()){k=k.value;var l=bd(k,a,b);0>l?(l=-l,l<d&&(d=l,h=k)):0<l&&l<e&&(e=l,g=k)}--d;--e;return 0==d||0==e?0:h&&g?d<e?-1:d>e||h.B<g.f?1:-1:g?1:-1}
function cd(a){var b=a.bound;if(!b){b=new dd;for(var c=q(a),d=c.next();!d.done;d=c.next()){var e=d.value;b.Ka(e.B,e.u)}}b=b.h+(b.o-b.h>>1);e=c=Number.POSITIVE_INFINITY;a=q(a);for(d=a.next();!d.done;d=a.next())d=d.value,0<d.V?(d=ed(d,b),d<e&&(e=d)):0>d.V&&(d=ed(d,b),d<c&&(c=d));return new S(c+(e-c>>1),b)}
function fd(a,b){var c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;b=q(b);for(var e=b.next();!e.done;e=b.next()){var h=e.value,g=R(a,h.f,h.c),k=R(a,h.B,h.u);e=a.getParameter(h.f,h.c);h=a.getParameter(h.B,h.u);if(g<k)g/=g-k,e=e*(1-g)+h*g,e<d&&(d=e);else if(g>k)g/=g-k,e=e*(1-g)+h*g,e>c&&(c=e);else if(0>g){if(e>h)return null}else if(0<g&&e<h)return null}return!isFinite(c)||!isFinite(d)||c>=d?null:[c,d]}
function Uc(a,b,c){if(void 0==a.type)return 0;switch(a.type){case 0:case 1:case 3:var d=0;a=(c-a.c)*-a.oa+a.f;b<=a&&(d+=2);b>=a&&(d+=1);return d;case 2:return d=0,b<=a.f&&(d+=2),b>=a.f&&(d+=1),d;case 4:case 5:case 7:return d=0,a=(b-a.f)*a.oa+a.c,c<=a&&(d+=2),c>=a&&(d+=1),d;case 6:return d=0,c<=a.c&&(d+=2),c>=a.c&&(d+=1),d;case 8:case 9:case 11:return d=0,a=(c-a.c)*-a.oa+a.f,b<=a&&(d+=1),b>=a&&(d+=2),d;case 10:return d=0,b<=a.f&&(d+=1),b>=a.f&&(d+=2),d;case 12:case 13:case 15:return d=0,a=(b-a.f)*
a.oa+a.c,c<=a&&(d+=1),c>=a&&(d+=2),d;case 14:return d=0,c<=a.c&&(d+=1),c>=a.c&&(d+=2),d}}
function R(a,b,c){switch(a.type){case 0:case 1:case 3:b-=a.f;c-=a.c;var d=Math.floor(c/a.V);b-=d*a.$;c-=d*a.V;return(c*-a.oa-b)*a.zb;case 2:return a.f-b;case 4:case 5:case 7:return b-=a.f,c-=a.c,d=Math.floor(b/-a.$),b+=d*a.$,c+=d*a.V,(b*a.oa-c)*a.zb;case 6:return a.c-c;case 8:case 9:case 11:return b-=a.f,c-=a.c,d=Math.floor(c/-a.V),b+=d*a.$,c+=d*a.V,(b-c*-a.oa)*a.zb;case 10:return b-a.f;case 12:case 13:case 15:return b-=a.f,c-=a.c,d=Math.floor(b/a.$),b-=d*a.$,c-=d*a.V,(c-b*a.oa)*a.zb;case 14:return c-
a.c}return NaN}f.getParameter=function(a,b){var c=this.type,d=this.$,e=this.V;this.type=(c+12)%16;this.$=e;this.V=-d;a=R(this,a,b);this.type=c;this.$=d;this.V=e;return a};f.evaluate=function(a){a/=this.length;return(new S(this.f+(this.B-this.f)*a,this.c+(this.u-this.c)*a)).round()};f.kb=function(a,b){var c=(this.B-this.f)/this.length,d=(this.u-this.c)/this.length;return(new S(this.f+c*a-d*b,this.c+d*a+c*b)).round()};f.Re=function(a,b){return(new S(this.getParameter(a,b),R(this,a,b))).round()};
function gd(a){return(new S(a.B-a.f,a.u-a.c)).scale(5E4/a.length)}function hd(a,b){return(new S(a.c-a.u,a.B-a.f)).scale(b/a.length)}f.We=function(a,b){a=this.getParameter(a,b);a/=this.length;return 0>=a?new S(this.f,this.c):1<=a?new S(this.B,this.u):(new S(this.f+(this.B-this.f)*a,this.c+(this.u-this.c)*a)).round()};
function ed(a,b){var c=0;switch(a.type){case 0:case 1:case 3:if(b<a.c)break;if(b>=a.u)break;c-=a.f;b-=a.c;var d=Math.floor(b/a.V);c-=d*a.$;b-=d*a.V;return b*-a.oa-c;case 2:if(b<a.c)break;if(b>=a.u)break;return a.f-c;case 4:case 5:if(b<a.c)break;if(b>=a.u)break;c-=a.f;b-=a.c;d=Math.floor(b/a.V);c-=d*a.$;b-=d*a.V;return b/a.oa-c;case 7:if(b<a.u)break;if(b>=a.c)break;c-=a.f;b-=a.c;d=Math.floor(b/-a.V);c+=d*a.$;b+=d*a.V;return b/a.oa-c;case 8:case 9:case 11:if(b<a.u)break;if(b>=a.c)break;c-=a.f;b-=a.c;
d=Math.floor(b/-a.V);c+=d*a.$;b+=d*a.V;return b*-a.oa-c;case 10:if(b<a.u)break;if(b>=a.c)break;return a.f-c;case 12:case 13:if(b<a.u)break;if(b>=a.c)break;c-=a.f;b-=a.c;d=Math.floor(b/-a.V);c+=d*a.$;b+=d*a.V;return b/a.oa-c;case 15:if(!(b<a.c||b>=a.u))return c-=a.f,b-=a.c,d=Math.floor(b/a.V),c-=d*a.$,b-=d*a.V,b/a.oa-c}return NaN}
function bd(a,b,c){switch(a.type){case 0:case 1:case 3:if(c<a.c)break;if(c>=a.u)break;b-=a.f;c-=a.c;var d=Math.floor(c/a.V);b-=d*a.$;c-=d*a.V;a=c*-a.oa-b;if(0>a)break;return a+1;case 2:if(c<a.c)break;if(c>=a.u)break;a=a.f-b;if(0>a)break;return a+1;case 4:case 5:if(c<a.c)break;if(c>=a.u)break;b-=a.f;c-=a.c;d=Math.floor(c/a.V);b-=d*a.$;c-=d*a.V;a=c/a.oa-b;if(0>a)break;return a+1;case 7:if(c<a.u)break;if(c>=a.c)break;b-=a.f;c-=a.c;d=Math.floor(c/-a.V);b+=d*a.$;c+=d*a.V;a=c/a.oa-b;if(0>a)break;return-a-
1;case 8:case 9:case 11:if(c<a.u)break;if(c>=a.c)break;b-=a.f;c-=a.c;d=Math.floor(c/-a.V);b+=d*a.$;c+=d*a.V;a=c*-a.oa-b;if(0>a)break;return-a-1;case 10:if(c<a.u)break;if(c>=a.c)break;a=a.f-b;if(0>a)break;return-a-1;case 12:case 13:if(c<a.u)break;if(c>=a.c)break;b-=a.f;c-=a.c;d=Math.floor(c/-a.V);b+=d*a.$;c+=d*a.V;a=c/a.oa-b;if(0>a)break;return-a-1;case 15:if(!(c<a.c||c>=a.u||(b-=a.f,c-=a.c,d=Math.floor(c/a.V),b-=d*a.$,c-=d*a.V,a=c/a.oa-b,0>a)))return a+1}return NaN}
f.log=function(){console.log(this.f+" "+this.c+" "+this.$+" "+this.V+" type: "+this.type+" slope: "+this.oa)};f.X=function(){var a=this.Sa(this.f,this.c,this.B,this.u);a.type=this.type;a.oa=this.oa;a.zb=this.zb;a.length=this.length;a.$=this.$;a.V=this.V;return a};function id(a){var b=a.Sa(a.B,a.u,a.f,a.c);b.type=(a.type+8)%16;b.oa=a.oa;b.zb=a.zb;b.length=a.length;b.$=-a.$;b.V=-a.V;return b}f.Sa=function(a,b,c,d){return new O(a,b,c,d)};
function jd(a){if(a.Y)return a.Y;var b=id(a);b.Y=a;return a.Y=b}function kd(a,b){return a.type<b.type?-1:a.type>b.type?1:a.oa<b.oa?-1:a.oa>b.oa?1:0}function ld(a){var b=[];a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(new S(c.f,c.c));return b}function yd(a){var b=[];a.bound&&(b.bound=a.bound);a=q(a);for(var c=a.next();!c.done;c=a.next())b.unshift(jd(c.value));return b}function T(a,b,c,d){this.set(void 0===a?255:a,void 0===b?255:b,void 0===c?255:c,void 0===d?255:d);return this}
function zd(a,b){return a.r<b.r?-1:a.r>b.r?1:a.Oa<b.Oa?-1:a.Oa>b.Oa?1:a.ga<b.ga?-1:a.ga>b.ga?1:a.Ea<b.Ea?-1:a.Ea>b.Ea?1:0}T.prototype.set=function(a,b,c,d){255<a&&(a=255);0>a&&(a=0);255<b&&(b=255);0>b&&(b=0);255<c&&(c=255);0>c&&(c=0);255<d&&(d=255);0>d&&(d=0);this.r=a;this.Oa=b;this.ga=c;this.Ea=d;return this};T.prototype.scale=function(a){this.r=Math.round(this.r*a);this.Oa=Math.round(this.Oa*a);this.ga=Math.round(this.ga*a);return this};
T.prototype.save=function(a){Yb(a,this.r);Yb(a,this.Oa);Yb(a,this.ga);Yb(a,this.Ea);return this};function Ad(a){return new T(Wb(a),Wb(a),Wb(a),Wb(a))}var Bd=new T(0,0,0,0),Cd=new T(255,255,255,255),Dd=new T(0,0,0,255),Ed=new T(255,0,0,255),Fd=new T(255,255,0,255);new T(0,255,0,255);new T(0,255,255,255);new T(0,0,255,255);new T(255,0,255,255);
function Gd(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.ph=this.oh=this.de=this.ce=this.vc=this.uc=this.yb=this.pc=this.Xb=this.Md=this.Ld=this.Kd=this.Jd=this.Id=this.Hd=0;this.va=this.bd=this.cd=this.fa=255;return this}
function Hd(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:a.z<b.z?-1:a.z>b.z?1:a.Hd<b.Hd?-1:a.Hd>b.Hd?1:a.Id<b.Id?-1:a.Id>b.Id?1:a.Jd<b.Jd?-1:a.Jd>b.Jd?1:a.Kd<b.Kd?-1:a.Kd>b.Kd?1:a.Ld<b.Ld?-1:a.Ld>b.Ld?1:a.Md<b.Md?-1:a.Md>b.Md?1:a.Xb<b.Xb?-1:a.Xb>b.Xb?1:a.pc<b.pc?-1:a.pc>b.pc?1:a.yb<b.yb?-1:a.yb>b.yb?1:a.uc<b.uc?-1:a.uc>b.uc?1:a.vc<b.vc?-1:a.vc>b.vc?1:a.ce<b.ce?-1:a.ce>b.ce?1:a.de<b.de?-1:a.de>b.de?1:a.oh<b.oh?-1:a.oh>b.oh?1:a.ph<b.ph?-1:a.ph>b.ph?1:a.fa<b.fa?-1:a.fa>b.fa?1:a.cd<b.cd?-1:a.cd>
b.cd?1:a.bd<b.bd?-1:a.bd>b.bd?1:a.va<b.va?-1:a.va>b.va?1:0}function Id(a,b,c){var d=1-c,e=new Gd(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c);e.Hd=a.Hd*d+b.Hd*c;e.Id=a.Id*d+b.Id*c;e.Jd=a.Jd*d+b.Jd*c;e.Kd=a.Kd*d+b.Kd*c;e.Ld=a.Ld*d+b.Ld*c;e.Md=a.Md*d+b.Md*c;e.Xb=a.Xb*d+b.Xb*c;e.pc=a.pc*d+b.pc*c;e.yb=a.yb*d+b.yb*c;e.uc=a.uc*d+b.uc*c;e.vc=a.vc*d+b.vc*c;e.ce=a.ce*d+b.ce*c;e.de=a.de*d+b.de*c;e.fa=a.fa*d+b.fa*c;e.cd=a.cd*d+b.cd*c;e.bd=a.bd*d+b.bd*c;e.va=a.va*d+b.va*c;return e}
Gd.prototype.X=function(){var a=new Gd(this.x,this.y,this.z);a.Hd=this.Hd;a.Id=this.Id;a.Jd=this.Jd;a.Kd=this.Kd;a.Ld=this.Ld;a.Md=this.Md;a.Xb=this.Xb;a.pc=this.pc;a.yb=this.yb;a.uc=this.uc;a.vc=this.vc;a.ce=this.ce;a.de=this.de;a.fa=this.fa;a.cd=this.cd;a.bd=this.bd;a.va=this.va;return a};function Jd(a,b){a.fa=b.r;a.cd=b.Oa;a.bd=b.ga;a.va=b.Ea}function Kd(a,b,c){a.uc=b;a.vc=c;return a};function S(a,b){this.x=void 0===a?0:a;this.y=void 0===b?0:b;return this}f=S.prototype;f.set=function(a,b){this.x=a;this.y=b;return this};f.pf=function(){return this.x*this.x+this.y*this.y};f.length=function(){return Math.sqrt(this.pf())};f.ka=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.ka(1);return this};f.scale=function(a){this.x*=a;this.y*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.sub=function(a){this.x=this.x-a.x;this.y=this.y-a.y;return this};f.X=function(){return new S(this.x,this.y)};f.ld=function(a){a||(a=new Float32Array(2));a[0]=this.x;a[1]=this.y;return a};function Ld(a,b){return a.x*b.x+a.y*b.y}function Md(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0}f.Yh=function(){return 0!=this.x||0!=this.y?!1:!0};function J(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;return this}
function Dc(a,b){return a.x*b.x+a.y*b.y+a.z*b.z}function Lc(a,b,c){c.x=a.y*b.z-a.z*b.y;c.y=b.x*a.z-b.z*a.x;c.z=a.x*b.y-a.y*b.x;return c}function Nd(a,b,c){c.x=a.x-b.x;c.y=a.y-b.y;c.z=a.z-b.z;return c}function Od(a,b,c){var d=1-c;return new J(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c)}function Pd(a,b){b.x=a.x;b.y=a.y;b.z=a.z}f=J.prototype;f.X=function(){return new J(this.x,this.y,this.z)};f.set=function(a,b,c){this.x=a;this.y=b;this.z=c;return this};
f.pf=function(){return this.x*this.x+this.y*this.y+this.z*this.z};f.length=function(){return Math.sqrt(this.pf())};f.ka=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.ka(1);return this};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.sub=function(a){return Nd(this,a,this)};f.ld=function(a){a||(a=new Float32Array(3));a[0]=this.x;a[1]=this.y;a[2]=this.z;return a};f.Yh=function(){return 0!=this.x||0!=this.y||0!=this.z?!1:!0};function Zd(a,b,c,d){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.a=void 0===d?0:d;return this}Zd.prototype.set=function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.a=d;return this};
Zd.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.a=Math.round(this.a);return this};Zd.prototype.ld=function(a){a||(a=new Float32Array(4));a[0]=this.x;a[1]=this.y;a[2]=this.z;a[3]=this.a;return a};Zd.prototype.Yh=function(){return 0!=this.x||0!=this.y||0!=this.z||0!=this.a?!1:!0};function $d(){this.reset();return this}f=$d.prototype;
f.set=function(a){this.G=a.G;this.K=a.K;this.L=a.L;this.I=a.I;this.m11=a.m11;this.m12=a.m12;this.J=a.J;this.m21=a.m21;this.m22=a.m22;return this};f.reset=function(){this.G=1;this.I=this.L=this.K=0;this.m11=1;this.m21=this.J=this.m12=0;this.m22=1;return this};
f.rotate=function(a,b,c){var d=Math.cos(c);c=Math.sin(c);var e=c*this.G+d*this.K,h=d*this.I-c*this.m11,g=c*this.I+d*this.m11,k=d*this.J-c*this.m21,l=c*this.J+d*this.m21;this.G=d*this.G-c*this.K;this.K=e;this.I=h;this.m11=g;this.J=k;this.m21=l;d=Math.cos(b);b=Math.sin(b);c=d*this.L-b*this.K;e=b*this.m12+d*this.m11;h=d*this.m12-b*this.m11;g=b*this.m22+d*this.m21;k=d*this.m22-b*this.m21;this.K=b*this.L+d*this.K;this.L=c;this.m11=e;this.m12=h;this.m21=g;this.m22=k;b=Math.cos(a);a=Math.sin(a);d=a*this.L+
b*this.G;c=b*this.m12-a*this.I;e=a*this.m12+b*this.I;h=b*this.m22-a*this.J;g=a*this.m22+b*this.J;this.L=b*this.L-a*this.G;this.G=d;this.m12=c;this.I=e;this.m22=h;this.J=g;return this};f.ti=function(a,b){var c=Math.cos(b),d=Math.sin(b);b=1-c;var e=a.x*a.y,h=a.y*a.z,g=a.z*a.x,k=a.x*d,l=a.y*d;d*=a.z;this.G=a.x*a.x*b+c;this.K=e*b+d;this.L=g*b-l;this.I=e*b-d;this.m11=a.y*a.y*b+c;this.m12=h*b+k;this.J=g*b+l;this.m21=h*b-k;this.m22=a.z*a.z*b+c;return this};
f.oi=function(a,b){a=(new $d).ti(a,b);ae(a,this,this);return this};f.scale=function(a,b,c){this.G*=a;this.K*=a;this.L*=a;this.I*=b;this.m11*=b;this.m12*=b;this.J*=c;this.m21*=c;this.m22*=c;return this};
f.Xh=function(a){a||(a=this);var b=this.Lh();if(0==b)return a;var c=-(this.I*this.m22+this.m12*-this.J),d=this.I*this.m21+this.m11*-this.J,e=-(this.K*this.m22+this.L*-this.m21),h=this.G*this.m22+this.L*-this.J,g=-(this.G*this.m21+this.K*-this.J),k=this.K*this.m12+this.L*-this.m11,l=-(this.G*this.m12+this.L*-this.I),m=this.G*this.m11+this.K*-this.I;b=1/b;a.G=(this.m11*this.m22+this.m12*-this.m21)*b;a.I=c*b;a.J=d*b;a.K=e*b;a.m11=h*b;a.m21=g*b;a.L=k*b;a.m12=l*b;a.m22=m*b;return a};
f.Lh=function(){return this.G*(this.m11*this.m22-this.m12*this.m21)+this.K*(this.m12*this.J-this.I*this.m22)+this.L*(this.I*this.m21-this.m11*this.J)};f.ld=function(a){a||(a=new Float32Array(9));a[0]=this.G;a[1]=this.K;a[2]=this.L;a[3]=this.I;a[4]=this.m11;a[5]=this.m12;a[6]=this.J;a[7]=this.m21;a[8]=this.m22;return a};
function ae(a,b,c){var d=a.K*b.G+a.m11*b.K+a.m21*b.L,e=a.L*b.G+a.m12*b.K+a.m22*b.L,h=a.G*b.I+a.I*b.m11+a.J*b.m12,g=a.K*b.I+a.m11*b.m11+a.m21*b.m12,k=a.L*b.I+a.m12*b.m11+a.m22*b.m12,l=a.G*b.J+a.I*b.m21+a.J*b.m22,m=a.K*b.J+a.m11*b.m21+a.m21*b.m22,n=a.L*b.J+a.m12*b.m21+a.m22*b.m22;c.G=a.G*b.G+a.I*b.K+a.J*b.L;c.I=h;c.J=l;c.K=d;c.m11=g;c.m21=m;c.L=e;c.m12=k;c.m22=n;return c}
f.transform=function(a,b){return b.set(this.G*a.x+this.I*a.y+this.J*a.z,this.K*a.x+this.m11*a.y+this.m21*a.z,this.L*a.x+this.m12*a.y+this.m22*a.z)};f.hf=function(){return new J(this.G,this.K,this.L)};f.jf=function(){return new J(this.I,this.m11,this.m12)};f.ud=function(){return new J(this.J,this.m21,this.m22)};f.zf=function(a){this.G=a.x;this.K=a.y;this.L=a.z;return this};f.Af=function(a){this.I=a.x;this.m11=a.y;this.m12=a.z;return this};f.Bf=function(a){this.J=a.x;this.m21=a.y;this.m22=a.z;return this};
f.save=function(a){var b=new Uint8Array((new Float32Array([this.G,this.K,this.L,this.I,this.m11,this.m12,this.J,this.m21,this.m22])).buffer);a.set(b,a.position);a.position+=36};f.load=function(a){a=a.slice(a.position,a.position+=36);a=new Float32Array(a.buffer);a=q(a);this.G=a.next().value;this.K=a.next().value;this.L=a.next().value;this.I=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.J=a.next().value;this.m21=a.next().value;this.m22=a.next().value};new $d;
function U(){this.reset();return this}f=U.prototype;f.set=function(a){this.G=a.G;this.K=a.K;this.L=a.L;this.Ua=a.Ua;this.I=a.I;this.m11=a.m11;this.m12=a.m12;this.m13=a.m13;this.J=a.J;this.m21=a.m21;this.m22=a.m22;this.m23=a.m23;this.H=a.H;this.m31=a.m31;this.m32=a.m32;this.m33=a.m33;return this};f.reset=function(){this.G=1;this.I=this.Ua=this.L=this.K=0;this.m11=1;this.m21=this.J=this.m13=this.m12=0;this.m22=1;this.m32=this.m31=this.H=this.m23=0;this.m33=1;return this};
function be(a){$d.prototype.reset.call(a)}f.translate=function(a,b,c){this.H+=a;this.m31+=b;this.m32+=c;return this};f.rotate=$d.prototype.rotate;f.ti=$d.prototype.ti;f.oi=$d.prototype.oi;f.scale=$d.prototype.scale;
f.Xh=function(a){function b(D,F,K,V,Q,ma,aa,oa,ob){return D*(Q*ob-ma*oa)+F*(ma*aa-V*ob)+K*(V*oa-Q*aa)}a||(a=this);var c=this.Lh();if(0==c)return a;var d=b(this.m11,this.m12,this.m13,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),e=-b(this.I,this.m12,this.m13,this.J,this.m22,this.m23,this.H,this.m32,this.m33),h=b(this.I,this.m11,this.m13,this.J,this.m21,this.m23,this.H,this.m31,this.m33),g=-b(this.I,this.m11,this.m12,this.J,this.m21,this.m22,this.H,this.m31,this.m32),k=-b(this.K,this.L,this.Ua,
this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),l=b(this.G,this.L,this.Ua,this.J,this.m22,this.m23,this.H,this.m32,this.m33),m=-b(this.G,this.K,this.Ua,this.J,this.m21,this.m23,this.H,this.m31,this.m33),n=b(this.G,this.K,this.L,this.J,this.m21,this.m22,this.H,this.m31,this.m32),r=b(this.K,this.L,this.Ua,this.m11,this.m12,this.m13,this.m31,this.m32,this.m33),p=-b(this.G,this.L,this.Ua,this.I,this.m12,this.m13,this.H,this.m32,this.m33),t=b(this.G,this.K,this.Ua,this.I,this.m11,this.m13,this.H,
this.m31,this.m33),z=-b(this.G,this.K,this.L,this.I,this.m11,this.m12,this.H,this.m31,this.m32),w=-b(this.K,this.L,this.Ua,this.m11,this.m12,this.m13,this.m21,this.m22,this.m23),y=b(this.G,this.L,this.Ua,this.I,this.m12,this.m13,this.J,this.m22,this.m23),B=-b(this.G,this.K,this.Ua,this.I,this.m11,this.m13,this.J,this.m21,this.m23),A=b(this.G,this.K,this.L,this.I,this.m11,this.m12,this.J,this.m21,this.m22);c=1/c;a.G=d*c;a.I=e*c;a.J=h*c;a.H=g*c;a.K=k*c;a.m11=l*c;a.m21=m*c;a.m31=n*c;a.L=r*c;a.m12=p*
c;a.m22=t*c;a.m32=z*c;a.Ua=w*c;a.m13=y*c;a.m23=B*c;a.m33=A*c;return a};
f.Lh=function(){var a=this.G*(this.m11*this.m22*this.m33+this.m12*this.m23*this.m31+this.m13*this.m21*this.m32-(this.m13*this.m22*this.m31+this.m11*this.m23*this.m32+this.m12*this.m21*this.m33));a-=this.K*(this.I*this.m22*this.m33+this.m12*this.m23*this.H+this.m13*this.J*this.m32-(this.m13*this.m22*this.H+this.I*this.m23*this.m32+this.m12*this.J*this.m33));a+=this.L*(this.I*this.m21*this.m33+this.m11*this.m23*this.H+this.m13*this.J*this.m31-(this.m13*this.m21*this.H+this.I*this.m23*this.m31+this.m11*
this.J*this.m33));return a-=this.Ua*(this.I*this.m21*this.m32+this.m11*this.m22*this.H+this.m12*this.J*this.m31-(this.m12*this.m21*this.H+this.I*this.m22*this.m31+this.m11*this.J*this.m32))};f.ld=function(a){a||(a=new Float32Array(16));a[0]=this.G;a[1]=this.K;a[2]=this.L;a[3]=this.Ua;a[4]=this.I;a[5]=this.m11;a[6]=this.m12;a[7]=this.m13;a[8]=this.J;a[9]=this.m21;a[10]=this.m22;a[11]=this.m23;a[12]=this.H;a[13]=this.m31;a[14]=this.m32;a[15]=this.m33;return a};
function ce(a,b,c){var d=a.K*b.G+a.m11*b.K+a.m21*b.L+a.m31*b.Ua,e=a.L*b.G+a.m12*b.K+a.m22*b.L+a.m32*b.Ua,h=a.Ua*b.G+a.m13*b.K+a.m23*b.L+a.m33*b.Ua,g=a.G*b.I+a.I*b.m11+a.J*b.m12+a.H*b.m13,k=a.K*b.I+a.m11*b.m11+a.m21*b.m12+a.m31*b.m13,l=a.L*b.I+a.m12*b.m11+a.m22*b.m12+a.m32*b.m13,m=a.Ua*b.I+a.m13*b.m11+a.m23*b.m12+a.m33*b.m13,n=a.G*b.J+a.I*b.m21+a.J*b.m22+a.H*b.m23,r=a.K*b.J+a.m11*b.m21+a.m21*b.m22+a.m31*b.m23,p=a.L*b.J+a.m12*b.m21+a.m22*b.m22+a.m32*b.m23,t=a.Ua*b.J+a.m13*b.m21+a.m23*b.m22+a.m33*b.m23,
z=a.G*b.H+a.I*b.m31+a.J*b.m32+a.H*b.m33,w=a.K*b.H+a.m11*b.m31+a.m21*b.m32+a.m31*b.m33,y=a.L*b.H+a.m12*b.m31+a.m22*b.m32+a.m32*b.m33,B=a.Ua*b.H+a.m13*b.m31+a.m23*b.m32+a.m33*b.m33;c.G=a.G*b.G+a.I*b.K+a.J*b.L+a.H*b.Ua;c.I=g;c.J=n;c.H=z;c.K=d;c.m11=k;c.m21=r;c.m31=w;c.L=e;c.m12=l;c.m22=p;c.m32=y;c.Ua=h;c.m13=m;c.m23=t;c.m33=B}
f.transform=function(a,b){return b.set(this.G*a.x+this.I*a.y+this.J*a.z+this.H*a.a,this.K*a.x+this.m11*a.y+this.m21*a.z+this.m31*a.a,this.L*a.x+this.m12*a.y+this.m22*a.z+this.m32*a.a,this.Ua*a.x+this.m13*a.y+this.m23*a.z+this.m33*a.a)};f.kb=function(a,b){return b.set(this.G*a.x+this.I*a.y+this.J*a.z+this.H,this.K*a.x+this.m11*a.y+this.m21*a.z+this.m31,this.L*a.x+this.m12*a.y+this.m22*a.z+this.m32)};
function de(a,b,c){c.set(a.G*b.x+a.I*b.y+a.J*b.z,a.K*b.x+a.m11*b.y+a.m21*b.z,a.L*b.x+a.m12*b.y+a.m22*b.z)}f.hf=$d.prototype.hf;f.jf=$d.prototype.jf;f.ud=$d.prototype.ud;function ee(a){return new J(a.H,a.m31,a.m32)}f.zf=$d.prototype.zf;f.Af=$d.prototype.Af;f.Bf=$d.prototype.Bf;function fe(a,b){a.H=b.x;a.m31=b.y;a.m32=b.z}
f.save=function(a){var b=new Uint8Array((new Float32Array([this.G,this.K,this.L,this.Ua,this.I,this.m11,this.m12,this.m13,this.J,this.m21,this.m22,this.m23,this.H,this.m31,this.m32,this.m33])).buffer);a.set(b,a.position);a.position+=64};
f.load=function(a){a=a.slice(a.position,a.position+=64);a=new Float32Array(a.buffer);a=q(a);this.G=a.next().value;this.K=a.next().value;this.L=a.next().value;this.Ua=a.next().value;this.I=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.m13=a.next().value;this.J=a.next().value;this.m21=a.next().value;this.m22=a.next().value;this.m23=a.next().value;this.H=a.next().value;this.m31=a.next().value;this.m32=a.next().value;this.m33=a.next().value};var ge=new U;
function dd(){this.m=Number.POSITIVE_INFINITY;this.A=Number.NEGATIVE_INFINITY;this.h=Number.POSITIVE_INFINITY;this.o=Number.NEGATIVE_INFINITY}dd.prototype.Ka=function(a,b){a<this.m&&(this.m=a);a>this.A&&(this.A=a);b<this.h&&(this.h=b);b>this.o&&(this.o=b);return this};dd.prototype.fj=function(a){this.Ka(a.m,a.h);this.Ka(a.A,a.o)};dd.prototype.X=function(){var a=new dd;a.m=this.m;a.A=this.A;a.h=this.h;a.o=this.o;return a};
dd.prototype.he=function(a,b){return a<=this.m||a>=this.A||b<=this.h||b>=this.o?!1:!0};function he(){this.m=Number.POSITIVE_INFINITY;this.A=Number.NEGATIVE_INFINITY;this.h=Number.POSITIVE_INFINITY;this.o=Number.NEGATIVE_INFINITY;this.D=Number.POSITIVE_INFINITY;this.M=Number.NEGATIVE_INFINITY}he.prototype.Ka=function(a,b,c){a<this.m&&(this.m=a);a>this.A&&(this.A=a);b<this.h&&(this.h=b);b>this.o&&(this.o=b);c<this.D&&(this.D=c);c>this.M&&(this.M=c);return this};
he.prototype.fj=function(a){this.Ka(a.m,a.h,a.D);this.Ka(a.A,a.o,a.M)};he.prototype.X=function(){var a=new he;a.m=this.m;a.A=this.A;a.h=this.h;a.o=this.o;a.D=this.D;a.M=this.M;return a};he.prototype.he=function(a,b){return a<=this.m||a>=this.A||b<=this.h||b>=this.o||void 0<=this.D||void 0>=this.M?!1:!0};u.Node=function(a){this.name=a;this.children=this.parent=null;this.Aj=new zb(this);this.Qa=1;this.ea=u.ea;this.Aa=-2147483648;return this};f=u.Node.prototype;f.create=function(){};f.remove=function(){X(this,null)};function ie(a,b){if(0!=b.call(a)&&a.children)for(a=a.children.first();null!=a.item;a=a.next)ie(a.item,b)}f.step=function(){};f.ue=function(){};f.Na=function(){};function je(a){ie(a,function(){if(!this.vg())return!1;this.Na(void 0)})}f.vg=function(){return!this.Qa||this.ea.Aa<u.l?!1:!0};
function X(a,b){if(a.parent)return a.parent=b,u.mi.push(a),a;if(b)return a.parent=b,ke(a)}function ke(a){Bb(a.Aj);if(!a.parent)return a;a.parent.children||(a.parent.children=new yb);Cb(a.parent.children,a.Aj);return a}function le(a,b){a.ea=b;if(a.children)for(a=a.children.first();null!=a.item;a=a.next)le(a.item,b)}
f.log=function(){this.name?console.group(this.constructor.name+": "+this.name):console.group(this.constructor.name);if(this.children)for(var a=this.children.first();null!=a.item;a=a.next)a.item.log();console.groupEnd()};u.qa=function(a){u.Node.call(this,a);this.transform=new U;this.Ba=null;this.O=new U};u.qa.prototype=Object.create(u.Node.prototype);u.qa.prototype.constructor=u.qa;function me(a,b){var c=a.kh=new u.Ce;c.ea=a.ea;c.Ra=1.75*b;c.Ba=a.O;X(c,u.tg)}
u.qa.prototype.remove=function(){this.kh&&this.kh.remove();u.Node.prototype.remove.call(this)};u.qa.prototype.save=function(a){Xb(a,"NG.Node3D");this.O.save()};u.qa.prototype.step=function(){ne(this)};function ne(a){a.Ba?ce(a.Ba,a.transform,a.O):a.O.set(a.transform)}u.ea={Aa:NaN,pb:new J(1,1,1)};u.mi=[];u.ri=new u.Node("schedule");u.sc=X(new u.Node("scene"),u.ri);u.inputs=X(new u.Node("inputs"),u.ri);function oe(){this.sb=new ub(Ub);this.Xd=new ub(Ub);this.la=new ub(Ub);this.ba=new ub(Ub);this.ra=new ub(Ub);return this}
oe.prototype.save=function(a){jc(a,this.sb.elements.length);for(var b=0;b<this.sb.elements.length;b++)this.sb.elements[b].save(a);jc(a,this.Xd.elements.length);for(b=0;b<this.Xd.elements.length;b++)this.Xd.elements[b].save(a);jc(a,this.la.elements.length);for(b=0;b<this.la.elements.length;b++)this.la.elements[b].save(a);jc(a,this.ba.elements.length);for(b=0;b<this.ba.elements.length;b++)this.ba.elements[b].save(a);jc(a,this.ra.elements.length);for(b=0;b<this.ra.elements.length;b++)this.ra.elements[b].save(a)};
oe.prototype.load=function(a){var b=ic(a);for(var c=0;c<b;c++){var d=new pe;d.load(a);this.sb.replace(d)}b=ic(a);for(c=0;c<b;c++)d=new qe,d.load(a),this.Xd.replace(d);b=ic(a);if(this.la.elements.length){for(c=0;c<b;c++)Vb(a),ec(a),ec(a);b=q(this.la.elements);for(c=b.next();!c.done;c=b.next())c.value.create()}else for(c=0;c<b;c++)d=new re,d.load(a),this.la.replace(d);this.zi=b=ic(a);for(c=0;c<b;c++)d=new u.Ed,d.dj=this,d.load(a),this.ba.replace(d);b=ic(a);for(c=0;c<b;c++)d=new u.Audio,d.load(a),this.ra.replace(d);
0==this.zi&&this.ready&&this.ready.call(this)};u.Pk=0;u.Ib={difficulty:1,lightingFancy:!0,mouseRaw:!0,mouseDPI:800,mouseScale:3.5};u.ih=function(){u.kk=4294967296/(u.Ib.mouseDPI*u.Ib.mouseScale)};u.ih();u.bk=!1;u.Xf={};u.Xf.overflowX=document.body.style.overflowX;u.Xf.overflowY=document.body.style.overflowY;u.Xf.userSelect=document.body.style.userSelect;var se=document.getElementById("paneContainer");se.style.position="relative";se.style.flex="0 0 auto";se.style.zIndex=1;se.addEventListener("contextmenu",function(a){return a.preventDefault()});
u.canvas=document.createElement("canvas");u.canvas.style.transformOrigin="top left";u.canvas.style.transform="scale(2.0, 2.0)";u.canvas.style.imageRendering="pixelated";u.canvas.style.zIndex=-1;se.appendChild(u.canvas);v=u.canvas.getContext("webgl2",{alpha:!1,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1,Ok:!0});console.log(v.getParameter(v.VENDOR),v.getParameter(v.VERSION));console.log(v.getParameter(v.RENDERER));u.Ub={};u.l=0;u.Qh=1E3/60;u.Aa=-2147483648;
u.sf=function(){2147483647==u.Aa&&(u.Aa=-2147483648);u.Aa++};u.Rb=new T(0,0,0,0);u.v=new oe;u.C=null;u.sh=null;u.Vi=null;u.pa=null;u.viewport=null;u.pk=function(){u.canvas.width=480;u.canvas.height=296;u.Rf=new Qc(480,296,null);u.sg.width=480;u.sg.height=296;u.sg.create();se.style.width="960px";se.style.height="592px"};u.ug=function(a){v.viewport(a.x,a.y,a.a,a.g);u.viewport=a;u.Ub.zc.N("viewport",new S(a.a,a.g),!0);u.Ub.zc.upload()};u.Cj=function(a){u.pa=a};u.Va=function(a){u.C!=a&&(u.C=a.bind())};
u.tb=function(a){u.sh!=a&&(u.sh=a.bind())};u.$d=function(a){a&&u.Vi!=a&&(u.Vi=a.bind())};u.Mb=function(a,b){v.activeTexture(v.TEXTURE0+a);b?(v.bindTexture(v.TEXTURE_2D,b.object),u.C.N("enableTexture"+a,1,!0)):(v.bindTexture(v.TEXTURE_2D,null),u.C.N("enableTexture"+a,0,!0))};u.nb=function(a){if(u.za!=a){switch(a){case 0:v.disable(v.BLEND);break;case 1:v.enable(v.BLEND);v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA);break;case 2:v.enable(v.BLEND),v.blendFunc(v.SRC_ALPHA,v.ONE_MINUS_SRC_ALPHA)}u.za=a}};
u.Db=function(a){if(u.depth!=a){switch(a){case 0:v.disable(v.DEPTH_TEST);break;case 1:v.enable(v.DEPTH_TEST);v.depthMask(!1);break;case 2:v.enable(v.DEPTH_TEST),v.depthMask(!0)}u.depth=a}};u.Lb=function(a){if(u.facing!=a){switch(a){case 0:v.disable(v.CULL_FACE);break;case 1:v.enable(v.CULL_FACE);v.frontFace(v.CCW);break;case 2:v.enable(v.CULL_FACE),v.frontFace(v.CW)}u.facing=a}};for(var te=0;4>te;te++)v.enableVertexAttribArray(te);v.clearColor(0,0,0,0);v.depthFunc(v.LEQUAL);
u.start=function(){u.Ub.zc.create(["u_eyeMatrix","u_viewMatrix","u_cameraPos","u_viewport"]);u.Ub.yj.create([]);u.mj()};u.oe={};u.oe.time=0;u.oe.mb=0;u.oe.hj=0;u.oe.nk=function(a){this.Ck=a;a>=this.time+1E3&&(this.hj=this.mb=0,this.time+=1E3);this.mb++};u.Ih=!0;
u.loop=function(a){var b=(u.Sg-a)/u.Qh;if(.5<b)requestAnimationFrame(u.loop);else{-.5>b&&(u.Sg=a,u.oe.hj++);u.Sg+=u.Qh;u.oe.nk(a);if(u.Ej)u.Ej--;else{ie(u.ri,function(){this.step()});a=q(u.mi);for(b=a.next();!b.done;b=a.next())ke(b.value);u.mi.length=0;u.l++}u.Ih&&requestAnimationFrame(u.loop)}};u.pause=function(){u.Ih=!1};u.resume=function(){u.Ih=!0;requestAnimationFrame(function(a){u.oe.time=a;u.oe.Ck=a;u.Sg=a;u.loop(a)})};u.mj=function(){u.resume()};
u.Rk=function(a,b){for(var c=[],d=Math.floor(640/a);1920>=a*d;d++)c.push([a*d,b*d]);return c};u.Tk=function(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()};document.addEventListener("fullscreenchange",function(){u.bk=document.fullscreenElement?!0:!1});function He(a,b){a=v.createShader(a);v.shaderSource(a,b);v.compileShader(a);if(v.getShaderParameter(a,v.COMPILE_STATUS))return a;console.log(b);console.log(v.getShaderInfoLog(a));v.deleteShader(a)}function re(){this.name=void 0;this.Ja={};this.rh={}}f=re.prototype;
f.create=function(){this.uk=He(v.VERTEX_SHADER,this.yi);this.tk=He(v.FRAGMENT_SHADER,this.xi);var a=this.tk;var b=this.Lk;var c=v.createProgram();v.attachShader(c,this.uk);v.attachShader(c,a);if(b)for(a=0;a<b.length;a++)v.bindAttribLocation(c,a,b[a]);else v.bindAttribLocation(c,0,"a_position"),v.bindAttribLocation(c,1,"a_texture0"),v.bindAttribLocation(c,2,"a_color"),v.bindAttribLocation(c,3,"a_basisZ");v.linkProgram(c);v.getProgramParameter(c,v.LINK_STATUS)?b=c:(console.log(v.getProgramInfoLog(c)),
v.deleteShader(c),b=void 0);this.vf=b;u.Va(this)};
f.N=function(a,b,c){a="u_"+a;this.Ja.hasOwnProperty(a)||(this.Ja[a]=v.getUniformLocation(this.vf,a));var d=this.rh[a];c?d!=b&&(this.rh[a]=b,v.uniform1i(this.Ja[a],b)):isNaN(b)?b instanceof Float32Array?v.uniform3fv(this.Ja[a],b):b instanceof U?v.uniformMatrix4fv(this.Ja[a],!1,b.ld()):b instanceof T?(this.rh[a]=b,v.uniform4f(this.Ja[a],b.r/255,b.Oa/255,b.ga/255,b.Ea/255)):b instanceof Zd?v.uniform4f(this.Ja[a],b.x,b.y,b.z,b.a):b instanceof J?v.uniform3f(this.Ja[a],b.x,b.y,b.z):b instanceof S&&v.uniform2f(this.Ja[a],
b.x,b.y):d!=b&&(this.rh[a]=b,v.uniform1f(this.Ja[a],b))};f.bind=function(){v.useProgram(this.vf);return this};f.load=function(a){this.name=Vb(a);this.yi=ec(a);this.xi=ec(a);this.create();delete this.yi;delete this.xi};f.save=function(a){Xb(a,this.name);gc(a,this.yi);gc(a,this.xi)};function Ie(){this.usage=this.target=null;this.ej=v.createBuffer();this.buffer=null}Ie.prototype.bind=function(){v.bindBuffer(this.target,this.ej);return this};function Ke(a,b){a.buffer=new ArrayBuffer(b);v.bufferData(a.target,a.buffer,a.usage)}Ie.prototype.upload=function(){v.bufferSubData(this.target,0,this.buffer);return this};function Le(){Ie.call(this);this.target=v.ARRAY_BUFFER;this.usage=v.STATIC_DRAW;this.vb=32;u.sh=null;u.tb(this)}Le.prototype=Object.create(Ie.prototype);
Le.prototype.constructor=Le;Le.prototype.bind=function(){Ie.prototype.bind.call(this);v.vertexAttribPointer(0,3,v.FLOAT,!1,this.vb,0);v.vertexAttribPointer(1,2,v.FLOAT,!1,this.vb,12);v.vertexAttribPointer(2,4,v.UNSIGNED_BYTE,!0,this.vb,20);v.vertexAttribPointer(3,3,v.SHORT,!0,this.vb,24);return this};Le.prototype.upload=function(a){this.write(a);Ie.prototype.upload.call(this);return this};
function Me(a){var b=u.sh;b.buffer=new ArrayBuffer(a.length*b.vb);b.write(a);v.bufferData(b.target,b.buffer,b.usage)}
Le.prototype.write=function(a,b){b*=this.vb;var c=new Float32Array(this.buffer,b),d=new Int16Array(this.buffer,b);b=new Uint8Array(this.buffer,b);for(var e=0;e<a.length;e++){var h=a[e];var g=c;var k=e*this.vb>>>2;g[k]=h.x;g[k+1]=h.y;g[k+2]=h.z;k=e*this.vb+12>>>2;g[k]=h.uc;g[k+1]=h.vc;g=b;k=e*this.vb+20;g[k]=h.fa;g[k+1]=h.cd;g[k+2]=h.bd;g[k+3]=h.va;g=d;k=e*this.vb+24>>>1;g[k]=h.Xb;g[k+1]=h.pc;g[k+2]=h.yb}return this};
function Ne(){Ie.call(this);this.target=v.ELEMENT_ARRAY_BUFFER;this.usage=v.STATIC_DRAW;u.$d(this)}Ne.prototype=Object.create(Ie.prototype);Ne.prototype.constructor=Ne;Ne.prototype.upload=function(a){(new Uint16Array(this.buffer)).set(a);return Ie.prototype.upload.call(this)};function Oe(){Ie.call(this);this.target=v.UNIFORM_BUFFER;this.usage=v.DYNAMIC_DRAW;this.Dh=null;this.nh=this.Kg=0;this.Ja={};Ie.prototype.bind.call(this)}Oe.prototype=Object.create(Ie.prototype);Oe.prototype.constructor=Oe;
Oe.prototype.create=function(a){v.bindBufferBase(this.target,this.Kg,this.ej);for(var b=0;b<u.v.la.elements.length;b++){var c=u.v.la.elements[b];u.Va(c);v.uniformBlockBinding(c.vf,v.getUniformBlockIndex(c.vf,this.Dh),this.Kg)}b=v.getUniformIndices(u.C.vf,a);c=q(b);for(var d=c.next();!d.done;d=c.next())if(d.value==v.INVALID_INDEX)return console.log("uniform not found ",this),this;b=v.getActiveUniforms(u.C.vf,b,v.UNIFORM_OFFSET);for(c=0;c<a.length;c++)this.Ja[a[c]]=b[c];return this};
Oe.prototype.N=function(a,b,c){a="u_"+a;b instanceof U?b.ld(new Float32Array(this.buffer,this.Ja[a],16)):b instanceof T||(b instanceof Zd?b.ld(new Float32Array(this.buffer,this.Ja[a],4)):b instanceof J||b instanceof S&&(c?b.ld(new Uint32Array(this.buffer,this.Ja[a],2)):b.ld(new Float32Array(this.buffer,this.Ja[a],2))))};Oe.prototype.upload=function(){Ie.prototype.bind.call(this);v.bufferData(this.target,this.buffer.byteLength,this.usage);v.bufferSubData(this.target,0,this.buffer);return this};
var Pe,Qe=Pe=new Le;Qe.usage=v.STATIC_DRAW;Qe.Bg=[];var Re,Se=Re=new Ne;Se.usage=v.STATIC_DRAW;Se.elements=[];var Te=u.Ub.zc=new Oe;Te.Dh="Common";Te.Kg=0;Te.nh=160;Ke(Te,Te.nh);var Ue=u.Ub.yj=new Oe;Ue.Dh="PortalLights";Ue.Kg=1;Ue.nh=48;Ke(Ue,6144);function pe(){this.name="defaultMaterial";this.qd=new T(255,255,255,255);this.Vc=new T(255,255,255,51);this.Wc=4;this.Xc=1;this.Td=new T(0,0,0,0);this.za=0;return this}function Ve(a,b){if(a.name<b.name)return-1;if(a.name>b.name)return 1;var c=zd(a.qd,b.qd);if(0!=c)return c;c=zd(a.Vc,b.Vc);if(0!=c)return c;c=zd(a.Td,b.Td);return 0!=c?c:a.Wc<b.Wc?-1:a.Wc>b.Wc?1:a.Xc<b.Xc?-1:a.Xc>b.Xc?1:a.za<b.za?-1:a.za>b.za?1:0}
pe.prototype.X=function(){var a=new pe;a.qd=this.qd;a.Vc=this.Vc;a.Wc=this.Wc;a.Xc=this.Xc;a.Td=this.Td;a.za=this.za;return a};pe.prototype.bind=function(){u.C.N("color",this.qd);u.C.N("specularColor",this.Vc);u.C.N("specularExponent",this.Wc);u.C.N("specularSheen",this.Xc);u.C.N("emissiveColor",this.Td)};pe.prototype.save=function(a){Xb(a,this.name);this.qd.save(a);this.Vc.save(a);jc(a,Math.floor(1024*this.Wc));Yb(a,Math.floor(255*this.Xc));this.Td.save(a);Yb(a,this.za);return a};
pe.prototype.load=function(a){this.name=Vb(a);this.qd=Ad(a);this.Vc=Ad(a);this.Wc=ic(a)/1024;this.Xc=Wb(a)/255;this.Td=Ad(a);this.za=Wb(a)};var We=u.v,Xe=new pe;We.sb.replace(Xe);u.Ed=function(){this.Wg=v.RGBA8;this.height=this.width=2;this.border=0;this.format=v.RGBA;this.type=v.UNSIGNED_BYTE;this.data=null;this.pe=u.Ed.pe;this.qf=u.Ed.qf;this.Ii=this.Hi=v.CLAMP_TO_EDGE};u.Ed.pe=v.NEAREST;u.Ed.qf=v.NEAREST;
u.Ed.prototype.create=function(){if(this.dj){var a=this.dj;a.zi--;0<a.zi||a.ready&&a.ready.call(a)}v.activeTexture(v.TEXTURE0);this.object=v.createTexture();v.bindTexture(v.TEXTURE_2D,this.object);v.texImage2D(v.TEXTURE_2D,0,this.Wg,this.width,this.height,this.border,this.format,this.type,this.data);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,this.pe);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,this.qf);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,this.Hi);v.texParameteri(v.TEXTURE_2D,
v.TEXTURE_WRAP_T,this.Ii);9984<=this.pe&&9987>=this.pe&&v.generateMipmap(v.TEXTURE_2D)};
u.Ed.prototype.load=function(a){this.name=Vb(a);this.Wg=ic(a);this.width=ic(a);this.height=ic(a);this.border=ic(a);this.format=ic(a);this.type=ic(a);this.pe=ic(a);this.qf=ic(a);this.Hi=ic(a);this.Ii=ic(a);this.nd=new T(Wb(a),Wb(a),Wb(a),Wb(a));var b=fc(a);a=a.slice(a.position,a.position+=b);a=new Blob([a],{type:"image/png"});this.data=new Image;this.data.parent=this;this.data.onload=function(){this.parent.width=this.width;this.parent.height=this.height;this.parent.create()};this.data.src=URL.createObjectURL(a)};
u.Ed.prototype.save=function(a){Xb(a,this.name);jc(a,this.Wg);jc(a,this.width);jc(a,this.height);jc(a,this.border);jc(a,this.format);jc(a,this.type);jc(a,this.pe);jc(a,this.qf);jc(a,this.Hi);jc(a,this.Ii);Yb(a,this.nd.r);Yb(a,this.nd.Oa);Yb(a,this.nd.ga);Yb(a,this.nd.Ea);hc(a,this.ag.length);a.set(this.ag,a.position);a.position+=this.ag.length};
u.Wh=function(a){a.bj=[];a.cj=[];for(var b=0,c=0,d=0;d<a.ie.length;d++)b+a.ie[d]+1>a.width&&(b=0,c+=a.Se+1),a.bj.push(b/a.width),a.cj.push(c/a.width),b+=a.ie[d]+1,a.ie[d]/=a.width,a.dg[d]/=a.width,a.eg[d]/=a.width;a.Se/=a.height;a.ck=function(e){switch(e){case "0":return 0;case "1":return 1;case "2":return 2;case "3":return 3;case "4":return 4;case "5":return 5;case "6":return 6;case "7":return 7;case "8":return 8;case "9":return 9;case ",":return 10}return-1}};
u.$i=function(a,b){for(var c=[],d=0,e=0;e<b.length;e++){var h=a.ck(b.charAt(e)),g=a.bj[h],k=a.cj[h],l=a.ie[h],m=a.Se;d+=a.dg[h];k+=.5;c.push(Kd(new Gd(d,0+m,0),g,k));c.push(Kd(new Gd(d,0,0),g,k+m));c.push(Kd(new Gd(d+l,0,0),g+l,k+m));c.push(Kd(new Gd(d+l,0,0),g+l,k+m));c.push(Kd(new Gd(d+l,0+m,0),g+l,k));c.push(Kd(new Gd(d,0+m,0),g,k));d+=l;d+=a.eg[h]}c.width=d;c.height=a.Se;c.Gj=a;return c};var Ye=new u.Node("mouse");Ye.lock=!1;Ye.d={};Ye.p={};document.addEventListener("mousedown",function(a){Ye.p[a.button]=!0;Ye.d[a.button]=!0});Ye.r={};document.addEventListener("mouseup",function(a){Ye.r[a.button]=!0;Ye.d[a.button]=!1});Ye.a=0;document.addEventListener("wheel",function(a){Ye.a=0<a.deltaY?1:-1});Ye.b=new S(0,0);Ye.hc=new S(0,0);document.addEventListener("mousemove",function(a){Ye.b.set(a.clientX,a.clientY);Ye.hc.x+=a.movementX;Ye.hc.y+=a.movementY});
Ye.step=function(){u.Node.prototype.step.call(this);this.hc.set(0,0);var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;this.a=0};
Ye.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=q(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1;Ye.a=0;Ye.b.set(0,0);Ye.hc.set(0,0)};X(Ye,u.inputs);Ye.sk=function(){document.documentElement.requestPointerLock({unadjustedMovement:u.Ib.mouseRaw})};
document.addEventListener("pointerlockchange",function(){if(document.pointerLockElement)Ye.lock=!0,document.body.style.overflowX="hidden",document.body.style.overflowY="hidden",document.body.style.userSelect="none";else{Ye.lock=!1;for(var a=q(Object.getOwnPropertyNames(u.Xf)),b=a.next();!b.done;b=a.next())b=b.value,document.body.style[b]=u.Xf[b]}});var Ze=new u.Node("keyboard");Ze.d={};Ze.p={};document.addEventListener("keypress",function(a){Ze.d[a.code]||(Ze.p[a.code]=!0);Ze.d[a.code]=!0});Ze.r={};document.addEventListener("keyup",function(a){Ze.r[a.code]=!0;Ze.d[a.code]=!1});Ze.step=function(){u.Node.prototype.step.call(this);var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1};
Ze.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=q(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=q(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=q(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1};X(Ze,u.inputs);u.Audio=function(){this.buffer=null;return this};u.Audio.W=new AudioContext;var $e=u.Audio.Gb=u.Audio.W.createGain();$e.gain.value=.5;$e.connect(u.Audio.W.destination);var af=u.Audio.cf=u.Audio.W.createGain(),bf=window.localStorage.getItem("musicVolume");null!=bf?af.gain.value=bf:af.gain.value=0;af.connect(u.Audio.W.destination);u.Audio.Jf=function(a){u.Audio.Gb.gain.value=a};u.Audio.Fg=function(a){u.Audio.cf.gain.value=a};
u.Audio.prototype.play=function(a){a?(void 0===a.gain&&(a.gain=1),void 0===a.pitch&&(a.pitch=1),void 0===a.fh&&(a.fh=0),void 0===a.delay&&(a.delay=0)):a={gain:1,pitch:1,fh:0,delay:0};var b=u.Audio.W.createGain();b.gain.value=a.gain;b.connect(u.Audio.Gb);var c=new AudioBufferSourceNode(u.Audio.W);c.connect(b);a.loop?c.loop=!0:c.onended=function(){b.disconnect(u.Audio.Gb)};c.W=b;c.playbackRate.value=(1-a.fh+Math.random()*a.fh*2)*a.pitch;c.buffer=this.buffer;void 0===a.time?c.start(u.Audio.W.currentTime+
a.delay):c.start(a.time+a.delay);return c};u.Audio.prototype.load=function(a){this.name=Vb(a);var b=fc(a);a=a.slice(a.position,a.position+=b);var c=this;u.Audio.W.decodeAudioData(a.buffer).then(function(d){c.buffer=d})};u.Audio.prototype.save=function(a){Xb(a,this.name);hc(a,this.ag.length);a.set(this.ag,a.position);a.position+=this.ag.length};var cf,df=[],ef=0;function ff(a){return df[a-ef]}var gf=new ub(Lb),hf=new yb,Kb=new yb,jf=new U;jf.scale(.99609375,.99609375,.99609375);var kf=[];function lf(a){var b=gf.get(a);if(b)return b;b=new mf(a);gf.push(b);return b}function nf(a){a=of(a);return new S(a.x-4096<<19,a.y-4096<<19)}function pf(a,b){function c(d){d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;return(d|d<<1)&1431655765}return c(a)<<1|c(b)}
function of(a){function b(c){c=(c|c>>1)&858993459;c=(c|c>>2)&252645135;c=(c|c>>4)&16711935;return(c|c>>8)&65535}a=new S(a>>>1&1431655765,a>>>0&1431655765);a.x=b(a.x);a.y=b(a.y);return a}
function qf(a,b){isNaN(a)&&(a=0);isNaN(b)&&(b=gf.elements.length-1);if(a==b)return gf.elements[a];for(var c=gf.elements[a].index,d=c^gf.elements[b].index,e=0;d>>=1;)e++;var h=1<<e,g=(2<<e)-1,k=a,l=b+1;for(d=Math.floor(k/2+l/2);k<l;){var m=gf.elements[d].index&g;if(h<m)l=d,d=Math.floor(k/2+l/2);else if(h>m)k=d+1,d=Math.floor(k/2+l/2);else break}c=e&1?new Cf(of(c&~g|h).x):new Df(of(c&~g|h).y);c.value-=4096;c.value<<=19;c.Fe=qf(a,d-1);c.Ge=qf(d,b);return c}function Cf(a){this.value=a}
function Df(a){this.value=a}function Ef(a,b,c){this.start=a;this.hc=b;this.Ra=c;this.lc=[new Ff(cf,0,1)];this.t=0}function Ff(a,b,c){this.node=a;this.Fa=b;this.Bc=c}Ef.prototype.next=function(){for(;this.lc.length;){var a=this.lc.shift();this.t=a.Fa;if(a.node instanceof mf)return a;this.ve(a)}return null};
Ef.prototype.ve=function(a){var b=a.node;if(b instanceof Cf){var c=this.start.z;var d=this.hc.z}else c=this.start.x,d=this.hc.x;if(0<d){var e=new Ff(b.Ge,(b.value-this.Ra-c)/d,a.Bc);e.Fa<=a.Bc&&e.Bc>=a.Fa&&this.lc.unshift(e);c=new Ff(b.Fe,a.Fa,(b.value+this.Ra-c)/d);c.Fa<=a.Bc&&c.Bc>=a.Fa&&this.lc.unshift(c)}else 0>d?(e=new Ff(b.Fe,(b.value+this.Ra-c)/d,a.Bc),e.Fa<=a.Bc&&e.Bc>=a.Fa&&this.lc.unshift(e),c=new Ff(b.Ge,a.Fa,(b.value-this.Ra-c)/d),c.Fa<=a.Bc&&c.Bc>=a.Fa&&this.lc.unshift(c)):(c>=b.value-
this.Ra&&this.lc.unshift(new Ff(b.Ge,a.Fa,a.Bc)),c<=b.value+this.Ra&&this.lc.unshift(new Ff(b.Fe,a.Fa,a.Bc)))};
function Gf(a,b,c){c=void 0===c?Hf:c;if(!gf.elements.length)return null;for(var d=b.length(),e=new Ef(a,b,0),h,g=null,k=1;(h=e.next())&&!(h.t>k);){h=q(h.node.na);for(var l=h.next();!l.done;l=h.next())!(l=l.value.pd(a,0,0,b))||l.t>k||(l.d=l.t*d,-1>l.d||(g=l,k=l.t))}if(!c)return g;e=q(kf);for(l=e.next();!l.done;l=e.next())h=l.value,c(h.flags)&&(!(l=h.pd(a,0,0,b))||l.t>k||(l.d=l.t*d,-1>l.d||(l.item=h.item,g=l,k=l.t)));return g}
function If(a,b){var c=void 0===c?!1:c;if(!gf.elements.length)return null;var d=b.length(),e=new Ef(a,b,0),h,g=[];for(g.cmp=Jf;(h=e.next())&&!(1<h.t);){for(var k=q(h.node.na),l=k.next();!l.done;l=k.next())!(l=l.value.pd(a,0,0,b))||1<l.t||(l.d=l.t*d,-1>l.d||(l.Fa=!0,kb(g,l)));h=q(h.node.na);for(l=h.next();!l.done;l=h.next())l=l.value,l=l.kf(),!(l=l.pd(a,0,0,b))||1<l.t||(l.d=l.t*d,-1>l.d||(l.Fa=!1,kb(g,l)))}if(c)return g;c=q(kf);for(l=c.next();!l.done;l=c.next())e=l.value,!(l=e.pd(a,0,0,b))||1<l.t||
(l.d=l.t*d,-1>l.d||(l.item=e.item,l.Fa=!0,kb(g,l)));c=q(kf);for(l=c.next();!l.done;l=c.next())e=l.value,e=e.kf(),!(l=e.pd(a,0,0,b))||1<l.t||(l.d=l.t*d,-1>l.d||(l.item=e.item,l.Fa=!1,kb(g,l)));return g}function Kf(a,b){if(0==gf.elements.length)return null;for(var c=new Ef(a,new J(240*b.x,0,240*b.z),0),d,e=null,h=240;(d=c.next())&&!(240*d.t>h);){d=q(d.node.na);for(var g=d.next();!g.done;g=d.next())!(g=g.value.Di(a,b))||g.t>h||(e=g,h=g.t)}return e}
function Lf(a,b){return Mf(a.z-b,a.x-b,a.z+b,a.x+b,void 0)}function Mf(a,b,c,d,e){e||(e=[]);for(var h=[cf];h.length;){var g=h.shift();g instanceof Cf?(a<=g.value&&h.push(g.Fe),c>=g.value&&h.push(g.Ge)):g instanceof Df?(b<=g.value&&h.push(g.Fe),d>=g.value&&h.push(g.Ge)):e.push(g)}return e};var Nf,Of,Pf;function Qf(){for(var a=0,b=u.Ub.yj,c=q(df),d=c.next();!d.done;d=c.next()){d=d.value;d.se=a&255|d.dc.length<<16;d=q(d.dc);for(var e=d.next();!e.done;e=d.next())e=e.value,e.ld(new Float32Array(b.buffer,a*b.nh,12)),e.index=a,a++}b.upload()}function Rf(){this.Xe=this.ig=null;this.Ic=0;this.hh=null}function Sf(a,b,c){this.S=a;this.n=new S(a.c-a.u,a.B-a.f);this.n.x/=a.length;this.n.y/=a.length;this.rj=this.S.f*this.n.x+this.S.c*this.n.y;this.h=b;this.o=c;this.height=c-b}
Sf.prototype.ld=function(a){var b=0,c=Tf(this);a[b++]=c.x;a[b++]=c.y;a[b++]=c.z;a[b++]=this.rj;a[b++]=this.S.f;a[b++]=this.S.c;a[b++]=this.S.B;a[b++]=this.S.u;a[b++]=this.n.x;a[b++]=this.n.y;a[b++]=this.h;a[b++]=this.o;return a};function Tf(a){return Od(ff(a.aa).ea.pb,ff(a.Ec.aa).ea.pb,.5)}
function Uf(a,b){function c(h,g){return Math.acos(qb(Ld(h,g)/Math.sqrt(Ld(h,h)*Ld(g,g)),-1,1))/Math.PI}var d=b.z*a.n.x+b.x*a.n.y-a.rj;if(0>=d)return 0;var e=c(new S(a.S.B-b.z,a.S.u-b.x),new S(a.S.f-b.z,a.S.c-b.x));a=c(new S(d,a.o-b.y),new S(d,a.h-b.y));return qb(e*a,0,1)}function Vf(a){return a.S.length/1E5*((a.o-a.h)/1E5)}function Wf(a){return a.S.length/1E5*((a.height-(a.o-a.h))/1E5)}
function Xf(a,b,c){c.set(0,0,0);for(var d=1,e=q(b.dc),h=e.next();!h.done;h=e.next()){var g=h.value;h=Uf(g,a);d-=h;g=Tf(g);c.x+=g.x*h;c.y+=g.y*h;c.z+=g.z*h}0<d&&(a=b.ea.pb,c.x+=a.x*d,c.y+=a.y*d,c.z+=a.z*d)};function Yf(a){u.qa.call(this,a);this.hi=new U;this.ed=45*Math.PI/180;this.Ve=1E4;this.Pe=1E9;this.rect=null;this.Qg=new U;this.Fi=new U}Yf.prototype=Object.create(u.qa.prototype);Yf.prototype.constructor=Yf;Yf.Lc=Math.tan(zc(30));Yf.Oj=function(a,b,c,d){d.G=2/a.a;d.K=0;d.L=0;d.Ua=0;d.I=0;d.m11=2/a.g;d.m12=0;d.m13=0;d.J=0;d.m21=0;d.m22=-2/(c-b);d.m23=0;d.H=0;d.m31=0;d.m32=-(c+b)/(c-b);d.m33=1};Yf.yh=function(a,b,c){c=Math.tan(c)*a;var d=c*u.viewport.ratio;return{n:a,Qk:b,t:c,ga:2*-c+c,r:d,ik:-d}};
Yf.xh=function(a,b,c,d,e,h,g){g.G=2*a/(d-c);g.K=0;g.L=0;g.Ua=0;g.I=0;g.m11=2*a/(e-h);g.m12=0;g.m13=0;g.J=(d+c)/(d-c);g.m21=(e+h)/(e-h);g.m22=(b+a)/(a-b);g.m23=-1;g.H=0;g.m31=0;g.m32=2*b*a/(a-b);g.m33=0};Yf.Hk=function(a,b,c,d,e){var h=b*Yf.Lc;c*=Yf.Lc;d=Math.tan(d);b=h/d;c/=d;e.G=b/(h*a.ratio);e.K=0;e.L=0;e.Ua=0;e.I=0;e.m11=b/h;e.m12=0;e.m13=0;e.J=0;e.m21=0;e.m22=-(c+b)/(c-b);e.m23=-1;e.H=0;e.m31=0;e.m32=-(2*c*b)/(c-b);e.m33=0;return e};Yf.prototype.step=function(){u.qa.prototype.step.call(this)};
function Zf(a){if(a.rect)Yf.Oj(a.rect,a.Ve,a.Pe,a.hi);else{var b=Yf.yh(a.Ve,a.Pe,a.ed);Yf.xh(a.Ve,a.Pe,b.ik,b.r,b.t,b.ga,a.hi)}a.O.Xh(a.Qg);ce(a.hi,a.Qg,a.Fi);u.Ub.zc.N("eyeMatrix",a.Qg);u.Ub.zc.N("viewMatrix",a.Fi);u.Ub.zc.N("cameraPos",new Zd(a.O.H,a.O.m31,a.O.m32,a.O.m33));u.Ub.zc.upload()}
function $f(){function a(d){u.Cj(d);Zf(d);Yf.Pj(d);je(u.sc)}var b=u.w.pa;if(b.Bk){var c=new Qc(b.rect.a/2,b.rect.g,null);c.x=u.Rf.x;c.y=u.Rf.y;u.ug(c);a(b.Li);c=new Qc(b.rect.a/2,b.rect.g,null);c.x=u.Rf.x+c.a;c.y=u.Rf.y;u.ug(c);a(b.Ki)}else u.ug(u.Rf),a(b)}
Yf.Pj=function(a){function b(n,r){function p(y){function B(K){A.Ka(Math.atan2(K.x,-K.z),Math.atan2(K.y,-K.z))}var A=new dd;A.bc=y;y=[new J(y.S.u,y.h,y.S.B),new J(y.S.c,y.h,y.S.f),new J(y.S.c,y.o,y.S.f),new J(y.S.u,y.o,y.S.B)];for(var D=q(y),F=D.next();!F.done;F=D.next())F=F.value,a.Qg.kb(F,F);D=y[y.length-1];y=q(y);for(F=y.next();!F.done;F=y.next())F=F.value,0>=F.z&&B(F),2==Math.abs(Math.sign(F.z)-Math.sign(D.z))&&B(Od(D,F,D.z/(D.z-F.z))),D=F;return A}if((!u.Uk||r!=m)&&r.ea.Aa!=u.l){r.ea.Aa=u.l;r.Mj=
l++;0>ag&&(r.ob>bg&&(bg=r.ob),r.ob<cg&&(cg=r.ob));for(var t=q(r.cells.elements),z=t.next();!z.done;z=t.next())if(z=z.value,z.Cg!=u.l)for(z.Cg<u.l-1&&Fb(z.Lj),z.Cg=u.l,z=z.gh.first();null!=z.item;z=z.next)z.item.ea.Aa=u.l}r=q(r.dc);for(t=r.next();!t.done;t=r.next())if(t=t.value,!(isNaN(t.index)||t.o<=t.h)){if(n.bc){if(0<=R(n.bc.S,t.S.f,t.S.c)&&0<=R(n.bc.S,t.S.B,t.S.u))continue;if(0>=R(t.S,n.bc.S.f,n.bc.S.c)&&0>=R(t.S,n.bc.S.B,n.bc.S.u))continue}if(!(0>=R(t.S,c.z,c.x))){(z=e[t.index])||(e[t.index]=
z=p(t));var w=z.X();w.bc=z.bc;w.m<n.m&&(w.m=n.m);w.A>n.A&&(w.A=n.A);w.h<n.h&&(w.h=n.h);w.o>n.o&&(w.o=n.o);w.m>=w.A||w.h>=w.o||b(w,ff(t.Ec.aa))}}}var c=ee(a.O),d=Gf(c,new J(0,-4294967295,0),null);if(d){var e={},h=a.ed,g=Math.atan(Math.tan(h)*u.viewport.ratio),k=new dd;k.m=-g;k.A=g;k.h=-h;k.o=h;var l=0;0>ag&&(cg=Infinity);var m=ff(d.item.aa);m&&b(k,m)}};function qe(){this.name=null;this.Qc=[]}qe.prototype.save=function(a){Xb(a,this.name);jc(a,Math.ceil(this.Jb/1E3));Yb(a,this.Qc.length);for(var b=q(this.Qc),c=b.next();!c.done;c=b.next())c.value.save(a)};qe.prototype.load=function(a){this.name=Vb(a);this.Jb=1E3*ic(a);for(var b=Wb(a),c=0;c<b;c++){var d=new dg;d.load(a);this.Qc.push(d)}};function dg(){this.da=u.v.sb.get("defaultMaterial");this.xb=[];this.Fb=[];this.ic=[]}
dg.prototype.compile=function(){this.Ei=Pe.Bg.length;Pe.Bg=Pe.Bg.concat(this.xb);for(var a=0;a<this.Fb.length;a++)this.Fb[a]+=this.Ei;for(a=0;a<this.ic.length;a++)this.ic[a]+=this.Ei;this.Dk=Re.elements.length;Re.elements=Re.elements.concat(this.Fb);this.Ui=Re.elements.length;Re.elements=Re.elements.concat(this.ic)};dg.prototype.X=function(){var a=new dg;a.xb=this.xb;a.La=this.La;a.Fb=this.Fb;a.sd=this.sd;a.ic=this.ic;a.rd=this.rd;return a};
dg.prototype.save=function(a){Xb(a,this.da.name);jc(a,this.xb.length);for(var b=q(this.xb),c=b.next();!c.done;c=b.next())c=c.value,sc(a,c.x),sc(a,c.y),sc(a,c.z);b=q(this.xb);for(c=b.next();!c.done;c=b.next())c=c.value,qc(a,c.Xb),qc(a,c.pc),qc(a,c.yb);b=q(this.xb);for(c=b.next();!c.done;c=b.next())c=c.value,uc(a,c.uc),uc(a,c.vc);jc(a,this.Fb.length);b=q(this.Fb);for(c=b.next();!c.done;c=b.next())jc(a,c.value);jc(a,this.ic.length);b=q(this.ic);for(c=b.next();!c.done;c=b.next())jc(a,c.value);jc(a,this.re);
return a};dg.prototype.load=function(a){this.da=u.v.sb.get(Vb(a));for(var b=ic(a),c=0;c<b;c++){var d=new Gd(rc(a),rc(a),rc(a));this.xb.push(d)}for(c=0;c<b;c++)d=this.xb[c],d.Xb=pc(a),d.pc=pc(a),d.yb=pc(a);for(c=0;c<b;c++)d=this.xb[c],d.uc=tc(a),d.vc=tc(a);b=ic(a);for(c=0;c<b;c++)this.Fb.push(ic(a));b=ic(a);for(c=0;c<b;c++)this.ic.push(ic(a));this.re=ic(a);this.compile()};
function eg(){function a(p,t){return p.y<t.y?-1:p.y>t.y?1:0}function b(p,t){return p.z<t.z?-1:p.z>t.z?1:p.x<t.x?-1:p.x>t.x?1:0}var c=fg,d=[];d.cmp=b;for(var e=q(c),h=e.next();!h.done;h=e.next()){var g=h.value;h=g[g.length-1];g=q(g);for(var k=g.next();!k.done;k=g.next()){k=k.value;if(0==b(h,k)){var l=[];l.cmp=a;l.z=h.z;l.x=h.x;l=kb(d,l);kb(l,h);kb(l,k)}h=k}}c=q(c);for(h=c.next();!h.done;h=c.next())for(e=h.value,k=e.length-1,k=e[k],h=0;h<e.length;h++){g=e[h];if(0==b(k,g))if(l=jb(d,k),k.y<g.y){var m=
ib(l,k),n=ib(l,g);for(m+=1;m<l.length&&!(m>=n);){var r=Id(k,g,(l[m].y-k.y)/(g.y-k.y));r.y=l[m].y;e.splice(h++,0,r);m++}}else for(m=ib(l,k),n=ib(l,g),--m;0<=m&&!(m<=n);)r=Id(k,g,(l[m].y-k.y)/(g.y-k.y)),r.y=l[m].y,e.splice(h++,0,r),m--;k=h;k=g}}function gg(){dg.call(this);this.td=[];this.La=new Le;this.rd=this.sd=null;this.re=0}gg.prototype=Object.create(dg.prototype);gg.prototype.constructor=gg;
gg.prototype.compile=function(){this.Fb=[];for(var a=q(this.td),b=a.next();!b.done;b=a.next()){b=b.value;for(var c=2;c<b.length;c++)this.Fb.push(b[0]),this.Fb.push(b[c-1]),this.Fb.push(b[c])}u.tb(this.La);Ke(this.La,this.xb.length*this.La.vb);this.La.upload(this.xb);this.Fb.length?(this.sd||(this.sd=new Ne),u.$d(this.sd),Ke(this.sd,2*this.Fb.length),this.sd.upload(this.Fb)):this.sd=null;this.ic.length?(this.rd||(this.rd=new Ne),u.$d(this.rd),Ke(this.rd,2*this.ic.length),this.rd.upload(this.ic)):this.rd=
null};function hg(a,b){b||(b=a.name);u.qa.call(this,b);this.src=a}hg.prototype=Object.create(u.qa.prototype);hg.prototype.constructor=hg;hg.prototype.create=function(){this.Qc=[];for(var a=q(this.src.Qc),b=a.next();!b.done;b=a.next())b=b.value,b=b instanceof gg?new ig(b):new jg(b),this.Qc.push(b),this.Qe&&(b.Qe=this.Qe),b.Ba=this.O,X(b,this)};function jg(a,b){u.qa.call(this,b);this.src=a;this.facing=1;this.wk=this.vk=!1}jg.prototype=Object.create(u.qa.prototype);jg.prototype.constructor=jg;
function kg(a){var b=null;a.parent&&(b=a.parent.C);b||(b=a.C);b||(b=a.src.C);b||(b=u.v.la.get("physical"));return b}function lg(a){var b=null;a.parent&&(b=a.parent.da);b||(b=a.da);b||(b=a.src.da);b||(b=u.v.sb.get("defaultMaterial"));return b}function mg(a){var b=null;a.parent&&(b=a.parent.ma);b||(b=a.ma);b||(b=a.src.ma);return b}
jg.prototype.Na=function(){u.tb(Pe);u.Va(kg(this));u.C.N("modelMatrix",this.O);u.Mb(0,mg(this));var a=lg(this);a.bind();u.C.N("lightingFancy",u.Ib.lightingFancy,!0);this.Jg?u.C.N("architectureLighting",1,!0):u.C.N("architectureLighting",0,!0);u.C.N("ambientLight",this.ea.pb,!1);if(this.Ja)for(var b=0;b<this.Ja.length;b+=3)u.C.N(this.Ja[b],this.Ja[b+1],this.Ja[b+2]);u.nb(a.za);u.Db(a.za?1:2);u.Lb(this.facing);this.src.Fb.length?(u.$d(Re),v.drawElements(v.TRIANGLES,this.src.Fb.length,v.UNSIGNED_SHORT,
2*this.src.Dk)):v.drawArrays(v.TRIANGLES,this.src.Ei,this.src.xb.length);this.src.ic.length&&(this.vk&&this.Si(),this.wk&&this.Ti())};
jg.prototype.Si=function(){u.nb(1);u.Db(1);u.Va(u.v.la.get("edge"));u.C.N("toonMinDist",Infinity,!1);u.C.N("modelMatrix",this.O);var a=new J(this.O.G,this.O.K,this.O.L),b=new J(this.O.I,this.O.m11,this.O.m12),c=new J(this.O.J,this.O.m21,this.O.m22);a.ka(1);b.ka(1);c.ka(1);var d=new J(u.pa.O.H-this.O.H,u.pa.O.m31-this.O.m31,u.pa.O.m32-this.O.m32);a=Dc(a,d);b=Dc(b,d);c=Dc(c,d);u.C.N("eyeVector",new J(a,b,c));v.drawElements(v.LINES,this.src.ic.length-this.src.re,v.UNSIGNED_SHORT,2*this.src.Ui+2*this.src.re)};
jg.prototype.Ti=function(){u.nb(1);u.Db(1);u.Va(u.v.la.get("toon"));u.C.N("toonMinDist",Infinity,!1);u.C.N("modelMatrix",this.O);v.drawElements(v.LINES,this.src.re,v.UNSIGNED_SHORT,2*this.src.Ui)};function ig(a,b){jg.call(this,a,b)}ig.prototype=Object.create(jg.prototype);f=ig.prototype;f.constructor=ig;f.step=function(){jg.prototype.step.call(this)};
f.Na=function(){u.tb(this.src.La);u.Va(kg(this));u.C.N("modelMatrix",this.O);u.Mb(0,mg(this));var a=lg(this);a.bind();u.C.N("lightingFancy",u.Ib.lightingFancy,!0);this.Jg?u.C.N("architectureLighting",1,!0):u.C.N("architectureLighting",0,!0);u.C.N("ambientLight",this.ea.pb,!1);if(this.Ja)for(var b=0;b<this.Ja.length;b+=3)u.C.N(this.Ja[b],this.Ja[b+1],this.Ja[b+2]);u.nb(a.za);u.Db(a.za?1:2);u.Lb(this.facing);this.src.Fb.length?(u.$d(this.src.sd),v.drawElements(v.TRIANGLES,this.src.Fb.length,v.UNSIGNED_SHORT,
0)):v.drawArrays(v.TRIANGLES,0,this.src.xb.length)};
f.Si=function(){u.nb(1);u.Db(1);u.Va(u.v.la.get("edge"));u.C.N("toonMinDist",Math.pow(5E5,2),!1);u.C.N("modelMatrix",this.O);var a=new J(this.O.G,this.O.K,this.O.L),b=new J(this.O.I,this.O.m11,this.O.m12),c=new J(this.O.J,this.O.m21,this.O.m22);a.ka(1);b.ka(1);c.ka(1);var d=new J(u.pa.O.H-this.O.H,u.pa.O.m31-this.O.m31,u.pa.O.m32-this.O.m32);a=Dc(a,d);b=Dc(b,d);c=Dc(c,d);u.C.N("eyeVector",new J(a,b,c));a=this.src.ic.length-this.src.re;b=2*this.src.re;u.$d(this.src.rd);v.drawElements(v.LINES,a,v.UNSIGNED_SHORT,
b)};f.Ti=function(){u.nb(1);u.Db(1);u.Va(u.v.la.get("toon"));u.C.N("toonMinDist",Math.pow(5E5,2),!1);u.C.N("modelMatrix",this.O);var a=this.src.re;u.$d(this.src.rd);v.drawElements(v.LINES,a,v.UNSIGNED_SHORT,0)};function ng(){this.scale=1;this.Ra=25E3;this.wc=0;this.Qe=!1;this.frame=0;this.mb=1}function og(a){a.G=u.pa.O.G;a.K=u.pa.O.K;a.L=u.pa.O.L;a.I=u.pa.O.I;a.m11=u.pa.O.m11;a.m12=u.pa.O.m12;a.J=u.pa.O.J;a.m21=u.pa.O.m21;a.m22=u.pa.O.m22;var b=this.scale*this.Ra,c=this.Qe?-b:b,d=Math.cos(this.wc),e=Math.sin(this.wc),h=new U;h.G=d*c;h.K=e*c;h.I=-e*b;h.m11=d*b;ae(a,h,a)}
function sg(){0>this.frame||(og.call(this,this.O),u.tb(tg),u.Va(this.C),u.Mb(0,this.ma),this.da.bind(),u.C.N("ambientLight",this.ea.pb,!1),u.nb(this.da.za),u.Db(this.da.za?1:2),u.Lb(0),u.C.N("modelMatrix",this.O),u.C.N("color",this.color),v.drawArrays(v.TRIANGLE_FAN,ug(this.frame,this.mb),4))}
for(var vg=[],wg=0;4>wg;wg++)for(var xg=1<<wg,yg=xg<<wg,zg=1/xg,Ag=0;Ag<yg;Ag++){var Bg=Ag%xg,Cg=Ag/xg|0;Bg*=zg;Cg*=zg;var Dg=void 0;Dg=new Gd(-1,-1,0);Kd(Dg,Bg,Cg);Dg.yb=32767;vg.push(Dg);Dg=new Gd(1,-1,0);Kd(Dg,Bg+zg,Cg);Dg.yb=32767;vg.push(Dg);Dg=new Gd(1,1,0);Kd(Dg,Bg+zg,Cg+zg);Dg.yb=32767;vg.push(Dg);Dg=new Gd(-1,1,0);Kd(Dg,Bg,Cg+zg);Dg.yb=32767;vg.push(Dg)}var tg=new Le;Ke(tg,vg.length*tg.vb);tg.upload(vg);
function Eg(a,b){for(var c=0;b>Math.pow(1<<c,2);)c++;var d=1<<c;b=1/d;c=a%d*b;a=(a/d|0)*b;return[c,a,c+b,a+b]}function ug(a,b){switch(b){default:return 4*a;case 4:return 4+4*a;case 16:return 20+4*a;case 64:return 84+4*a}};function Fg(){this.color=this.ma=this.C=null;this.za=NaN;this.Qd=[];this.lc=[];this.lc.cmp=Gg;this.jk=64}Fg.prototype.clear=function(){this.Qd.length=0;this.lc.length=0};Fg.prototype.Na=function(){u.Va(this.C);u.C.N("modelMatrix",jf);u.Mb(0,this.ma);u.C.N("color",this.color);u.nb(this.za);u.Db(1);u.Lb(0);for(var a=q(this.lc),b=a.next();!b.done;b=a.next())b.value.Na()};
function Hg(a,b,c,d,e,h,g){a.Qd.length==a.jk&&a.Qd.shift().remove();var k=[];k.cmp=Gg;var l=new J,m=new J;Kc(c,l,m);var n=new U;n.G=l.x;n.I=m.x;n.J=c.x;n.H=b.x;n.K=l.y;n.m11=m.y;n.m21=c.y;n.m31=b.y;n.L=l.z;n.m12=m.z;n.m22=c.z;n.m32=b.z;l=new U;m=Math.cos(d)*e;d=Math.sin(d)*e;l.G=m;l.I=-d;l.K=d;l.m11=m;l.m22=e;ce(n,l,n);var r=n.Xh(new U),p=Eg(h,g);e*=1.733;g=Lf(b,e);h={};g=q(g);for(d=g.next();!d.done;h={Dg:h.Dg},d=g.next())for(h.Dg=d.value,d={},l=q(h.Dg.na),m=l.next();!m.done;d={Wb:d.Wb,Da:d.Da},m=
l.next())if(d.Da=m.value,m=function(w,y){return function(){function B(Q,ma){var aa=[],oa=Q[Q.length-1],ob=ma(oa);Q=q(Q);for(var Pa=Q.next();!Pa.done;Pa=Q.next()){Pa=Pa.value;var Db=ma(Pa);2==Math.abs(Math.sign(Db)-Math.sign(ob))&&aa.push(Od(oa,Pa,ob/(ob-Db)));0<=Db&&aa.push(Pa);ob=Db;oa=Pa}return 3>aa.length?null:aa}for(var A=q(w.Wb),D=A.next();!D.done;D=A.next())D=D.value,r.kb(D,D);A=q([function(Q){return 1-Q.x},function(Q){return 1+Q.x},function(Q){return 1-Q.y},function(Q){return 1+Q.y},function(Q){return 1-
Q.z},function(Q){return 1+Q.z}]);for(D=A.next();!D.done;D=A.next())if(w.Wb=B(w.Wb,D.value),!w.Wb)return;for(A=0;A<w.Wb.length;A++){D=w.Wb[A];var F=.5*D.x+.5,K=.5*D.y+.5;n.kb(D,D);var V=new Gd;V.x=D.x;V.y=D.y;V.z=D.z;V.uc=p[0]*(1-F)+p[2]*F;V.vc=p[1]*(1-K)+p[3]*K;w.Wb[A]=V}A=[];A.aa=w.Da.aa;A.cellIndex=y.Dg.index;A=kb(k,A);for(D=2;D<w.Wb.length;D++)A.push(w.Wb[0]),A.push(w.Wb[D-1]),A.push(w.Wb[D])}}(d,h),ff(d.Da.aa)){d.Wb=[];if(d.Da instanceof Ig){if(d.Da.o<b.y-e)continue;if(d.Da.h>b.y+e)continue;var t=
R(d.Da.T,b.z,b.x);if(t<-e)continue;if(t>e)continue;t=d.Da.T.getParameter(b.z,b.x);if(t<-e)continue;if(t>d.Da.T.length+e)continue;if(.707107>Dc(new J((d.Da.T.B-d.Da.T.f)/d.Da.T.length,0,(d.Da.T.c-d.Da.T.u)/d.Da.T.length),c))continue;d.Wb.push(new J(d.Da.T.u,d.Da.h,d.Da.T.B),new J(d.Da.T.c,d.Da.h,d.Da.T.f),new J(d.Da.T.c,d.Da.o,d.Da.T.f),new J(d.Da.T.u,d.Da.o,d.Da.T.B))}else{if(d.Da.y<b.y-e)continue;if(d.Da.y>b.y+e)continue;var z=q(d.Da.ca);for(t=z.next();!t.done;t=z.next());if(d.Da instanceof Jg){if(.707107>
c.y)continue}else if(-.707107<c.y)continue;z=q(d.Da.ca);for(t=z.next();!t.done;t=z.next())t=t.value,d.Wb.push(new J(t.u,d.Da.y,t.B));d.Da instanceof Kg&&d.Wb.reverse()}m()}b=new Lg;c=q(k);for(e=c.next();!e.done;e=c.next())e=e.value,h=jb(a.lc,e),h||(h=new Mg(a),h.aa=e.aa,h.cellIndex=e.cellIndex,h.ea=ff(h.aa).ea,h.create(),kb(a.lc,h)),Ng(h,e),b.zj.push({node:h,xc:e.length});a.Qd.push(b)}function Mg(a){this.Vj=a;this.cellIndex=this.aa=NaN;this.ea=null;this.xc=this.Cd=0}
function Gg(a,b){return a.aa<b.aa?-1:a.aa>b.aa?1:a.cellIndex<b.cellIndex?-1:a.cellIndex>b.cellIndex?1:0}Mg.prototype.create=function(){this.La=new Le;this.La.usage=v.DYNAMIC_DRAW;Ke(this.La,48*this.La.vb)};
function Og(a,b){var c=a.xc+b;if(0>=c)mb(a.Vj.lc,a);else{c*=a.La.vb;if((a.Cd+a.xc+b)*a.La.vb>a.La.buffer.byteLength)b=new ArrayBuffer(c<<1);else if(48<=a.Cd)b=a.La.buffer;else return;c=new Uint8Array(a.La.buffer,a.Cd*a.La.vb,a.xc*a.La.vb);(new Uint8Array(b)).set(c);a.La.buffer=b;a.La.bind();v.bufferData(a.La.target,a.La.buffer,a.La.usage);a.Cd=0}}
function Ng(a,b){Og(a,b.length);a.La.bind();a.La.write(b,a.Cd+a.xc);v.bufferSubData(a.La.target,(a.Cd+a.xc)*a.La.vb,new Uint8Array(a.La.buffer,(a.Cd+a.xc)*a.La.vb,b.length*a.La.vb));a.xc+=b.length}Mg.prototype.Na=function(){if(this.ea.Aa<u.l)return!1;u.tb(this.La);u.C.N("ambientLight",this.ea.pb);v.drawArrays(v.TRIANGLES,this.Cd,this.xc)};function Lg(){this.zj=[]}Lg.prototype.remove=function(){for(var a=q(this.zj),b=a.next();!b.done;b=a.next())b=b.value,b.node.Cd+=b.xc,b.node.xc-=b.xc,Og(b.node,0)};var bg,cg,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g=Zg=new pe;Zg.name="concrete";Zg.Vc=new T(255,255,255,3.984375);Zg.Wc=4;Zg.Xc=1;Zg.za=0;var ah=Zg=new pe;Zg.name="paint";Zg.Vc=new T(255,255,255,63.75);Zg.Wc=16;Zg.Xc=1;Zg.za=0;var bh=Zg=new pe;Zg.name="glass";Zg.Vc=new T(255,255,255,63.75);Zg.Wc=256;Zg.Xc=1;Zg.za=1;
function ch(){function a(h){if(!(c>=d)&&(0>h&&(h=d-c),c+h>d&&(h=d-c),0!=h)){var g=new dh(c,c+h);b.push(g);c+=h;return g}}this.floor.ma=u.v.ba.get("concr01");this.floor.da=$g;this.floor.color=eh;this.ta.ma=u.v.ba.get("concr01");this.ta.da=$g;this.ta.color=fh;var b=[],c=this.wg,d=this.o,e;if(e=a(25E3))e.xa.ma=u.v.ba.get("brick01"),e.xa.da=ah,e.xa.color=gh;if(e=a(this.Eb))e.xa.ma=u.v.ba.get("brick01"),e.xa.da=ah,e.xa.color=this.color;if(e=a(-1))e.xa.ma=u.v.ba.get("brick01"),e.xa.da=$g,e.xa.color=hh;
return b}function ih(a,b,c,d){a=void 0===a?NaN:a;b=void 0===b?NaN:b;c=void 0===c?NaN:c;d=void 0===d?NaN:d;this.D=a;this.M=b;this.m=c;this.A=d}function jh(a,b,c){this.d=a;this.P=b;this.R=c}function kh(a,b,c){this.d=-a;this.P=b;this.R=c}function lh(a,b,c){this.d=-a;this.P=-b;this.R=-c}function mh(a,b,c){this.d=a;this.P=-b;this.R=-c}f=ih.prototype;f.he=function(a,b){return a<=this.D||a>=this.M||b<=this.m||b>=this.A?!1:!0};
f.We=function(a,b){a<this.D?a=this.D:a>this.M&&(a=this.M);b<this.m?b=this.m:b>this.A&&(b=this.A);return new S(a,b)};function nh(a,b,c){var d=0;b<a.D?d+=a.D-b:b>a.M&&(d+=b-a.M);c<a.m?d+=a.m-c:c>a.A&&(d+=c-a.A);return d}function oh(a,b,c){b>=a.D||(a.D=b);b<=a.M||(a.M=b);c>=a.m||(a.m=c);c<=a.A||(a.A=c)}function ph(a,b){b.D>=a.D||(a.D=b.D);b.M<=a.M||(a.M=b.M);b.m>=a.m||(a.m=b.m);b.A<=a.A||(a.A=b.A)}f.Wd=function(a,b){a-=.5*this.M+.5*this.D;b-=.5*this.A+.5*this.m;return 1E5/Math.sqrt(a*a+b*b)};
f.expand=function(a,b){return this.X(this.D-a,this.M+a,this.m-b,this.A+b)};function qh(a,b){var c=new jh(a.m,a.D,a.M);c.source=a;b.push(c);c=new kh(a.M,a.m,a.A);c.source=a;b.push(c);c=new lh(a.A,a.M,a.D);c.source=a;b.push(c);c=new mh(a.D,a.A,a.m);c.source=a;b.push(c)}f.X=function(a,b,c,d){a=new ih(a,b,c,d);this.Ni&&(a.Ni=this.Ni);this.platform&&(a.platform=this.platform);this.ja&&(a.ja=this.ja);void 0!==this.direction&&(a.direction=this.direction);void 0!==this.type&&(a.type=this.type);return a};
f.Df=function(a,b){if(!rh(this,a))return!1;var c=this.m,d=this.A;this.A>a.A&&(b.push(this.X(this.D,this.M,a.A,this.A)),d=a.A);this.m<a.m&&(b.push(this.X(this.D,this.M,this.m,a.m)),c=a.m);this.M>a.M&&b.push(this.X(a.M,this.M,c,d));this.D<a.D&&b.push(this.X(this.D,a.D,c,d));return!0};f.jg=function(a,b){a=this.X(Math.max(this.D,a.D),Math.min(this.M,a.M),Math.max(this.m,a.m),Math.min(this.A,a.A));a.M<=a.D||a.A<=a.m||b.push(a)};function sh(a,b){return a.X(a.D+b.D,a.M+b.M,a.m+b.m,a.A+b.A)}
f.rotate=function(a){switch(a){case 0:return this.X(this.D,this.M,this.m,this.A);case 1:return this.X(-this.A,-this.m,this.D,this.M);case 2:return this.X(-this.M,-this.D,-this.A,-this.m);case 3:return this.X(this.m,this.A,-this.M,-this.D)}};f.Hf=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return this.X(this.D+a,this.M+a,this.m+b,this.A+b)};function th(a,b){a=new ih(Math.max(a.D,b.D),Math.min(a.M,b.M),Math.max(a.m,b.m),Math.min(a.A,b.A));return a.M<a.D||a.A<a.m?null:a}
function rh(a,b){return a.D>=b.M||a.M<=b.D||a.m>=b.A||a.A<=b.m?!1:!0}function uh(a,b){return!rh(a,b)||a.h>=b.o||a.o<=b.h?!1:!0}function vh(a,b,c){var d=0;a=q(a);for(var e=a.next();!e.done;e=a.next())d+=e.value.Wd(b,c);return d}f=jh.prototype;f.rb=function(){return 0};f.$b=function(){return this.P};f.Zb=function(){return this.d};f.Bb=function(){return this.R};f.Ab=function(){return this.d};f.raw=function(a,b,c){this.d=a;this.P=b;this.R=c;return this};
f.He=function(){return new O(this.$b(),this.Zb(),this.Bb(),this.Ab())};f.X=function(a,b,c){a=new jh(a,b,c);a.source=this.source;return a};f.cg=function(a,b,c){if(!this.yg){var d=new S(this.P+a,this.d-b);d.source=this;c.push(d)}this.Zf||(a=new S(this.R-a,this.d-b),a.source=this,c.push(a))};f.Re=function(a,b){return new S(this.P+a,this.d+b)};f.he=function(a,b){return b>this.d||b<this.d||a<this.P||a>=this.R?!1:!0};
f.We=function(a){return a<this.P?new S(this.P,this.d):a>this.R?new S(this.R,this.d):new S(a,this.d)};f.Df=function(a,b){if(this.d>a.A||this.d<=a.m||this.P>=a.M||this.R<=a.D)return!1;this.P<a.D&&b.push(this.X(this.d,this.P,a.D));this.R>a.M&&b.push(this.X(this.d,a.M,this.R));return!0};f.jg=function(a,b){this.d>a.A||this.d<=a.m||this.P>=a.M||this.R<=a.D||b.push(this.X(this.d,Math.max(this.P,a.D),Math.min(this.R,a.M)))};f.Ag=function(){return new ih(this.P,this.R,this.d,this.d)};
f.rotate=function(a){switch(a){case 0:return(new jh).raw(this.d,this.P,this.R);case 1:return(new kh).raw(this.d,this.P,this.R);case 2:return(new lh).raw(this.d,this.P,this.R);case 3:return(new mh).raw(this.d,this.P,this.R)}};f.Hf=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new jh).raw(this.d+b,this.P+a,this.R+a)};f=kh.prototype;f.rb=function(){return 1};f.$b=function(){return-this.d};f.Zb=function(){return this.P};f.Bb=function(){return-this.d};f.Ab=function(){return this.R};
f.raw=jh.prototype.raw;f.He=jh.prototype.He;f.X=function(a,b,c){a=new kh(-a,b,c);a.source=this.source;return a};f.cg=function(a,b,c){if(!this.yg){var d=new S(-this.d+a,this.P+b);d.source=this;c.push(d)}this.Zf||(a=new S(-this.d+a,this.R-b),a.source=this,c.push(a))};f.Re=function(a,b){return new S(-this.d-b,this.P+a)};f.he=function(a,b){return a>-this.d||a<-this.d||b<this.P||b>=this.R?!1:!0};f.We=function(a,b){return b<this.P?new S(-this.d,this.P):b>this.R?new S(-this.d,this.R):new S(-this.d,b)};
f.Df=function(a,b){if(-this.d>=a.M||-this.d<a.D||this.P>=a.A||this.R<=a.m)return!1;this.P<a.m&&b.push(this.X(this.d,this.P,a.m));this.R>a.A&&b.push(this.X(this.d,a.A,this.R));return!0};f.jg=function(a,b){-this.d>=a.M||-this.d<a.D||this.P>=a.A||this.R<=a.m||b.push(this.X(this.d,Math.max(this.P,a.m),Math.min(this.R,a.A)))};f.Ag=function(){return new ih(-this.d,-this.d,this.P,this.R)};
f.rotate=function(a){switch(a){case 0:return(new kh).raw(this.d,this.P,this.R);case 1:return(new lh).raw(this.d,this.P,this.R);case 2:return(new mh).raw(this.d,this.P,this.R);case 3:return(new jh).raw(this.d,this.P,this.R)}};f.Hf=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new kh).raw(this.d-a,this.P+b,this.R+b)};f=lh.prototype;f.rb=function(){return 2};f.$b=function(){return-this.P};f.Zb=function(){return-this.d};f.Bb=function(){return-this.R};f.Ab=function(){return-this.d};
f.raw=jh.prototype.raw;f.He=jh.prototype.He;f.X=function(a,b,c){a=new lh(-a,-b,-c);a.source=this.source;return a};f.cg=function(a,b,c){if(!this.yg){var d=new S(-this.P-a,-this.d+b);d.source=this;c.push(d)}this.Zf||(a=new S(-this.R+a,-this.d+b),a.source=this,c.push(a))};f.Re=function(a,b){return new S(-this.P-a,-this.d-b)};f.he=function(a,b){return b>-this.d||b<-this.d||a>-this.P||a<=-this.R?!1:!0};f.We=function(a){return a<-this.R?new S(-this.R,-this.d):a>-this.P?new S(-this.P,-this.d):new S(a,-this.d)};
f.Df=function(a,b){if(-this.d>=a.A||-this.d<a.m||-this.R>=a.M||-this.P<=a.D)return!1;-this.R<a.D&&b.push(this.X(this.d,-a.D,this.R));-this.P>a.M&&b.push(this.X(this.d,this.P,-a.M));return!0};f.jg=function(a,b){-this.d>=a.A||-this.d<a.m||-this.R>=a.M||-this.P<=a.D||b.push(this.X(this.d,Math.max(this.P,-a.M),Math.min(this.R,-a.D)))};f.Ag=function(){return new ih(-this.R,-this.P,-this.d,-this.d)};
f.rotate=function(a){switch(a){case 0:return(new lh).raw(this.d,this.P,this.R);case 1:return(new mh).raw(this.d,this.P,this.R);case 2:return(new jh).raw(this.d,this.P,this.R);case 3:return(new kh).raw(this.d,this.P,this.R)}};f.Hf=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new lh).raw(this.d-b,this.P-a,this.R-a)};f=mh.prototype;f.rb=function(){return 3};f.$b=function(){return this.d};f.Zb=function(){return-this.P};f.Bb=function(){return this.d};f.Ab=function(){return-this.R};
f.raw=jh.prototype.raw;f.He=jh.prototype.He;f.X=function(a,b,c){a=new mh(a,-b,-c);a.source=this.source;return a};f.cg=function(a,b,c){if(!this.yg){var d=new S(this.d-a,-this.P-b);d.source=this;c.push(d)}this.Zf||(a=new S(this.d-a,-this.R+b),a.source=this,c.push(a))};f.Re=function(a,b){return new S(this.d+b,-this.P-a)};f.he=function(a,b){return a>this.d||a<this.d||b>-this.P||b<=-this.R?!1:!0};f.We=function(a,b){return b<-this.R?new S(this.d,-this.R):b>-this.P?new S(this.d,-this.P):new S(this.d,b)};
f.Df=function(a,b){if(this.d>a.M||this.d<=a.D||-this.R>=a.A||-this.P<=a.m)return!1;-this.R<a.m&&b.push(this.X(this.d,-a.m,this.R));-this.P>a.A&&b.push(this.X(this.d,this.P,-a.A));return!0};f.jg=function(a,b){this.d>a.M||this.d<=a.D||-this.R>=a.A||-this.P<=a.m||b.push(this.X(this.d,Math.max(this.P,-a.A),Math.min(this.R,-a.m)))};f.Ag=function(){return new ih(this.d,this.d,-this.R,-this.P)};
f.rotate=function(a){switch(a){case 0:return(new mh).raw(this.d,this.P,this.R);case 1:return(new jh).raw(this.d,this.P,this.R);case 2:return(new kh).raw(this.d,this.P,this.R);case 3:return(new lh).raw(this.d,this.P,this.R)}};f.Hf=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new mh).raw(this.d+a,this.P-b,this.R-b)};var wh=new Mb;function xh(a){return Math.floor(E(wh)*a)}function yh(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return b[xh(b.length)]}
function zh(a){for(var b=0;b<a.length;b++){var c=xh(a.length-b),d=a[b];a[b]=a[c];a[c]=d}}console.log("Arch.rand.setSeed("+wh.rk+");");function Ah(){for(var a=[],b=q(Pg),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next())a=a.concat(d.value)}return a}function Bh(){for(var a=[],b=q(Pg),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;for(var e=q(d.Nc),h=e.next();!h.done;h=e.next())h=h.value,h.Za==d&&a.push(h)}}return a}
function Ch(a,b,c){var d=[];a=q(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.translate(b,c));return d}function Dh(a,b){var c=[];a=q(a);for(var d=a.next();!d.done;d=a.next())c.push(d.value.Hf(b));return c}function Eh(a,b,c){a:{switch((4-c)%4){case 0:a=new S(a,b);break a;case 1:a=new S(-b,a);break a;case 2:a=new S(-a,-b);break a;case 3:a=new S(b,-a);break a}a=void 0}return a}function Fh(a,b,c){var d=[];a=q(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.expand(b,c));return d}
function Gh(a,b){var c=[];a=q(a);for(var d=a.next();!d.done;d=a.next())c.push(sh(d.value,b));return c}function Hh(a,b){b=q(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=a.length,e=0;e<d;e++)a[e].Df(c,a)&&(a.splice(e--,1),d--)}return a}function Ih(a,b){for(var c=new ih,d=q(a),e=d.next();!e.done;e=d.next())ph(c,e.value);d=q(b);for(e=d.next();!e.done;e=d.next())ph(c,e.value);c=[c];Hh(c,b);return Hh(a.slice(),c)}
function Jh(a,b){b=void 0===b?0:b;for(var c=new ih,d=q(a),e=d.next();!e.done;e=d.next())ph(c,e.value);b=[c.expand(b,b)];Hh(b,a);return b}function Kh(a){var b=[];b.cmp=function(h,g){return h.m<g.m?-1:h.m>g.m?1:h.D<g.D?-1:h.D>g.D?1:0};a=q(a);for(var c=a.next();!c.done;c=a.next())kb(b,c.value);for(a=0;a<b.length;a++){c=b[a];var d=ib(b,{m:c.A,D:c.D}),e=b[d];e&&e.m==c.A&&e.D==c.D&&e.M==c.M&&(b.splice(d,1),b[a--]=c.X(c.D,c.M,c.m,e.A))}return b}
function Lh(a,b,c){var d=Infinity;c=q(c);for(var e=c.next();!e.done;e=c.next())if(e=e.value,!(e.m>=b||e.A<=b||e.M<=a||e.D>=d)){if(e.D<a){d=a;break}d=e.D}return d}function Mh(a){for(var b=[],c=q(a),d=c.next();!d.done;d=c.next())qh(d.value,b);Hh(b,a);return b}function Nh(a){a.bound=new dd;for(var b=0;b<a.length;b++){var c=a[b].He();a.bound.Ka(c.B,c.u);a[b]=c}}
function Oh(a){var b=[];b.cmp=function(m,n){return m.x<n.x?-1:m.x>n.x?1:m.y<n.y?-1:m.y>n.y?1:m.type<n.type?-1:m.type>n.type?1:0};a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,kb(b,{x:c.$b(),y:c.Zb(),type:c.rb(),S:c});a=[];c=[];for(var d={};b.length;){var e=!1;d.Kc=[];d.Kc.bound=new ih;d.fc=null;d.Ob=null;var h=function(m){return function(n){n.S.rb()==m.Ob.rb()?m.Ob.R+=n.S.R-n.S.P:((m.Ob.rb()+3&3)==n.S.rb()&&(m.Ob.Zf=!0,n.S.yg=!0),m.Kc.push(n.S),m.Ob=n.S);m.fc=new S(m.Ob.Bb(),m.Ob.Ab());m.fc.type=
-1;oh(m.Kc.bound,m.fc.x,m.fc.y)}}(d);d.Ob=b.shift().S;d.Ob.rb()&&(e=!0,d.Ob.yg=!0);d.Kc.push(d.Ob);d.fc=new S(d.Ob.Bb(),d.Ob.Ab());d.fc.type=-1;for(oh(d.Kc.bound,d.fc.x,d.fc.y);;){var g=[],k=ib(b,d.fc),l=b[k];if(!l)break;if(l.x!=d.fc.x)break;if(l.y!=d.fc.y)break;g[0]=k;g[1]=k;k++;(l=b[k])&&l.x==d.fc.x&&l.y==d.fc.y&&(g[1]=k);switch(d.Ob.rb()){case 0:k=g[0];break;case 1:k=g[1];break;case 2:k=g[1];break;case 3:k=g[0]}h(b.splice(k,1)[0])}e?(d.Kc[d.Kc.length-1].Zf=!0,c.push(d.Kc)):(d.Kc.eb=[],a.push(d.Kc));
d={Ob:d.Ob,Kc:d.Kc,fc:d.fc}}b=q(c);for(c=b.next();!c.done;c=b.next())Ph(c.value,a);return a}function Qh(a,b){b||(b=[]);a=q(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(c),c.eb&&Qh(c.eb,b);return b}
function Ph(a,b){var c=null;b=q(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.D<=d.bound.D||a.bound.m<=d.bound.m||a.bound.M>=d.bound.M||a.bound.A>=d.bound.A)){if(c){if(d.bound.D<=c.bound.D)continue;if(d.bound.m<=c.bound.m)continue;if(d.bound.M>=c.bound.M)continue;if(d.bound.A>=c.bound.A)continue}c=d}c&&c.eb.push(a)}
function Rh(a){var b=162500,c=162500;b=void 0===b?0:b;c=void 0===c?0:c;var d=Mh(a);a=[];d=q(d);for(var e=d.next();!e.done;e=d.next())e.value.cg(b,c,a);d=Ah();d=q(d);for(e=d.next();!e.done;e=d.next()){e=e.value;for(var h=0;h<a.length;h++)e.expand(b,c).he(a[h].x,a[h].y)&&a.splice(h--,1)}return a}
function Sh(){function a(e,h){var g=25E3*Math.floor(xh(8)+12),k=25E3*Math.floor(xh(8)+12),l=Ah(),m=[];var n=Fh(e,g+h,k+h);var r=Mh(n);n=Fh(l,g+h,k+h);r=Hh(r,n);n=q(r);for(r=n.next();!r.done;r=n.next())r.value.cg(0,0,m);if(!m.length)return null;n=[];n.cmp=function(p,t){return p.Wd>t.Wd?-1:p.Wd<t.Wd?1:p.x<t.x?-1:p.x>t.x?1:p.z<t.z?-1:p.z>t.z?1:0};m=q(m);for(r=m.next();!r.done;r=m.next())r=r.value,r.Wd=0==h?vh(e,r.x,r.y):vh(l,r.x,r.y),kb(n,r);e=n[0];return new ih(e.x-g,e.x+g,e.y-k,e.y+k)}if(Xg){if(Xg.eh){if(Xg.length)var b=
a(Xg,0);else b=0,Ug.ja!=Wg&&(b=xh(4)?0:325E3),b=a(Ug,b);if(!b)return console.error("could not place pad"),!1;b.platform=Xg;Xg.push(b);Xg.eh--;return!0}if(Ug){b=Ug;var c=Xg;Th();var d=Uh(b,c);d||(d=Vh(b,c));if(!d)return Xg.length=0,Xg.eh=yh(1,1,1,2,3),!0}Ug=Xg;Xg=null;return!0}if(Wg){if(Wg.di)return Xg=[],Xg.index=Tg++,Xg.Nc=[],Xg.eh=yh(1,1,1,2,3),Xg.y=Ug.ja==Wg?Ug.y+5E4*yh(-2,-1,1,2):Ug.y+5E4*yh(-2,-1,0,0,0,1,2),Xg.y=Math.min(Xg.y,-4E5),Wh(Xg,Wg),Wg.di--,!0;Xh();Wg=null;Rg++;Th();Ah();Yh();if(Rg<
bg+6)return!0;Zh();return!0}Wg=[];$h.call(Wg);Wg.di=yh(1,1,1,2,2);Wg.index=Pg.length+Qg;Pg.push(Wg);0==Wg.index%5&&(Wg.ae=!0);return!0}
function Zh(){Yg=Bh();for(var a=q(Pg),b=a.next();!b.done;b=a.next()){b=b.value;if(300>u.l-b.ea.Aa)break;if(b.ob>=cg-4)break;b.Je=!0;for(var c=q(b.gb),d=c.next();!d.done;d=c.next())ai(d.value);b=q(b);for(c=b.next();!c.done;c=b.next())for(c=q(c.value.Nc),d=c.next();!d.done;d=c.next())d.value.Kh()}df.length=0;ef=Qg;a=q(Pg);for(b=a.next();!b.done;b=a.next()){b=b.value;if(b.ob>bg+2)break;df.push(b)}a=q(df);for(b=a.next();!b.done;b=a.next())if(b=b.value,!(b.ob<=Sg))for(b.h=b.floor,b.fd||(b.ae?b.fd=new J(.8,
.8,.8):(c=yh(.0125,.0625,.1125,.175),b.fd=new J(c,c,c))),c=q(b),d=c.next();!d.done;d=c.next()){d=d.value;d.Xi=[];for(var e=q(d),h=e.next();!h.done;h=e.next()){h=h.value;var g=[];qh(h,g);Nh(g);d.Xi.push(g);h.z=.5*h.D+.5*h.M;h.x=.5*h.m+.5*h.A;h.y=h.platform.y;h.D<b.bound.D&&(b.bound.D=h.D);h.M>b.bound.M&&(b.bound.M=h.M);h.m<b.bound.m&&(b.bound.m=h.m);h.A>b.bound.A&&(b.bound.A=h.A)}}a=q(df);for(b=a.next();!b.done;b=a.next())if(b=b.value,!(b.ob<=Sg)){b.bound.D-=1E5;b.bound.M+=1E5;b.bound.m-=1E5;b.bound.A+=
1E5;b.ae&&(b.ta=0);c=[];e=q(b);for(d=e.next();!d.done;d=e.next())c.push.apply(c,da(d.value));e=c;e=Fh(e,9375,9375);d=[];e=q(e);for(h=e.next();!h.done;h=e.next()){h=h.value;g=d.length;for(var k=0;k<g;k++)d[k].Df(h,d)&&(d.splice(k--,1),g--);d.push(h)}e=d;b.$j=[];e=q(e);for(d=e.next();!d.done;d=e.next())h=[],qh(d.value,h),Nh(h),b.$j.push(h);c=Jh(c,1);c=Fh(c,9375,9375);c=Jh(c,0);b.Yi=[];c=q(c);for(d=c.next();!d.done;d=c.next())e=[],qh(d.value,e),Nh(e),b.Yi.push(e)}a=q(df);for(b=a.next();!b.done;b=a.next())if(b=
b.value,!(b.ob<=Sg))for(bi(b),d=b,b=ci(Infinity,d.index,u.v.ba.get("HandRail01"),ah),b.facing=0,b.za=2,c=d.Ae,d=q(d.dk),e=d.next();!e.done;e=d.next())for(e=e.value,h=q(e),g=h.next();!g.done;g=h.next()){g=g.value;var l=[];k=(g.R-g.P)/2E5;for(var m=Math.round(k),n=.5*(k-m);.125>n;)--m,n+=.5;if(!(0>m))for(l.push({Nb:.5,Gf:0,length:n}),l.push({Nb:1,Gf:0,length:k-2*n}),l.push({Nb:.5,Gf:1-n,length:n}),k=0,m=new S(g.$b(),g.Zb()),l=q(l),n=l.next();!n.done;n=l.next()){n=n.value;k+=2E5*n.length;var r=g.Re(k,
0),p=[];var t=new Gd(m.y,e.y,m.x);Kd(t,n.Gf,n.Nb);Jd(t,c);p.push(t);t=new Gd(r.y,e.y,r.x);Kd(t,n.Gf+n.length,n.Nb);Jd(t,c);p.push(t);t=new Gd(r.y,e.y+112500,r.x);Kd(t,n.Gf+n.length,n.Nb-.5);Jd(t,c);p.push(t);t=new Gd(m.y,e.y+112500,m.x);Kd(t,n.Gf,n.Nb-.5);Jd(t,c);p.push(t);b.td.push(p);m=r}}a=q(df);for(b=a.next();!b.done;b=a.next())if(b=b.value,!(b.ob<=Sg))for(c=q(b),d=c.next();!d.done;d=c.next())for(d=q(d.value.Nc),b=d.next();!b.done;b=d.next())b.value.Eh();a=q(df);for(b=a.next();!b.done;b=a.next())if(b=
b.value,!(b.ob<=Sg))for(b=q(b.gb),c=b.next();!c.done;c=b.next())c.value.stroke();a=q(df);for(b=a.next();!b.done;b=a.next())if(b=b.value,!(b.ob<=Sg))for(c=q(b),d=c.next();!d.done;d=c.next())for(d=q(d.value.Nc),b=d.next();!b.done;b=d.next())b.value.li();ag++}
function Uh(a,b){Yg=Bh();var c=[];if(a.y!=b.y){if(a.Cc)for(var d,e=q(a.Cc),h=e.next();!h.done;h=e.next())h=h.value,h.target==b&&(d||(d=di(a)),c.push(ei(a,b,d,h.direction)));if(b.Cc){var g;d=q(b.Cc);for(h=d.next();!h.done;h=d.next())h=h.value,h.target==a&&(g||(g=di(b)),c.push(ei(b,a,g,h.direction)))}a.Cc||b.Cc||(c.push(fi(a,b)),c.push(fi(b,a)),!xh(2)&&c.reverse());a=q(c);for(b=a.next();!b.done;b=a.next())for(b=b.value,zh(b),c=q(b),h=c.next();!h.done;h=c.next())if(b=h.value,gi(b))return b.Za.Nc.push(b),
b.ij&&(a=b,h=a.ij,c=[],c.index=Tg++,c.Nc=[],c.y=a.Cb.y,Wh(c,a.Za.ja),h.platform=c,c.push(h),Hh(a.Za,[h]),Th(),Uh(c,a.Cb)),b;return null}if(a.ja!=b.ja){h=hi(a,b,112500);zh(h);g=[];c=q(a);for(d=c.next();!d.done;d=c.next())qh(d.value,g);c=[];g=q(g);for(d=g.next();!d.done;d=g.next()){d=d.value;e=q(b);for(var k=e.next();!k.done;k=e.next())d.jg(k.value,c)}for(g=[];c.length;){d=c.pop();for(e=0;e<c.length;e++)k=c[e],d.rb()==k.rb()&&d.d==k.d&&(d.R==k.P?(c.splice(e,1),d.R=k.R,e=-1):d.P==k.R&&(c.splice(e,1),
d.P=k.P,e=-1));225E3>d.R-d.P||g.push(d)}c=[];g=q(g);for(d=g.next();!d.done;d=g.next())c.push(new ii(d.value,a,b));zh(c);c=xh(5)?c.concat(h):h.concat(c);c=q(c);for(h=c.next();!h.done;h=c.next())if(h=h.value,gi(h))return a.Nc.push(h),b.Nc.push(h),ji(a.ja,b.ja,b.y,b.y+225E3),h;return null}return!0}
function Vh(a,b){function c(w,y,B){-y.d<=w.P||-y.d>w.R||y.P>=w.d||y.R<w.d||(B=[(new jh).raw(w.d,w.P,-y.d).rotate(B),(new mh).raw(-y.d,-w.d,-y.P).rotate(B)],B.lh=w.source,B.$f=y.source,B.Ma=B[0].R-B[0].P+(B[1].R-B[1].P),kb(h,B))}function d(w,y,B){w.d!=-y.d||-y.P<=w.P||-y.R>w.R||(B=[(new jh).raw(w.d,w.P,-y.P).rotate(B)],B.lh=w.source,B.$f=y.source,B.Ma=B[0].R-B[0].P,kb(h,B))}var e=Fh(Ah(),162500,162500),h=[];h.cmp=function(w,y){return w.Ma<y.Ma?-1:1};if(a==b){var g=Rh(a);a=[[],[],[],[]];for(var k=0;4>
k;k++){var l=Dh(e,k),m=q(g);for(b=m.next();!b.done;b=m.next()){var n=b.value;b=n.source.source;n=Eh(n.x,n.y,k);var r=n.y,p=n.x;n=Lh(n.x,n.y,l);n<=p||(r=new jh(r,p,n),r.source=b,a[k].push(r))}}for(e=0;4>e;e++){g=void 0;g=(e+1)%4;k=q(a[e]);for(b=k.next();!b.done;b=k.next())for(l=b.value,m=q(a[g]),b=m.next();!b.done;b=m.next())c(l,b.value,e,g);if(!(2<=e))for(g=e+2,k=q(a[e]),b=k.next();!b.done;b=k.next())for(l=b.value,m=q(a[g]),b=m.next();!b.done;b=m.next())d(l,b.value,e,g)}}else{k=Rh(a);l=Rh(b);a=[[],
[],[],[]];g=[[],[],[],[]];for(m=0;4>m;m++){r=Dh(e,m);p=q(k);for(b=p.next();!b.done;b=p.next()){var t=b.value;b=t.source.source;t=Eh(t.x,t.y,m);n=t.y;var z=t.x;t=Lh(t.x,t.y,r);t<=z||(n=new jh(n,z,t),n.source=b,a[m].push(n))}p=q(l);for(b=p.next();!b.done;b=p.next())t=b.value,b=t.source.source,t=Eh(t.x,t.y,m),n=t.y,z=t.x,t=Lh(t.x,t.y,r),t<=z||(n=new jh(n,z,t),n.source=b,g[m].push(n))}for(e=1;4>e;e++){k=void 0;k=(e+1)%4;l=q(a[e]);for(b=l.next();!b.done;b=l.next())for(m=b.value,r=q(g[k]),b=r.next();!b.done;b=
r.next())c(m,b.value,e,k);l=q(g[e]);for(b=l.next();!b.done;b=l.next())for(m=b.value,r=q(a[k]),b=r.next();!b.done;b=r.next())c(m,b.value,e,k);k=(e+2)%4;l=q(a[e]);for(b=l.next();!b.done;b=l.next())for(m=b.value,r=q(g[k]),b=r.next();!b.done;b=r.next())d(m,b.value,e,k)}}for(e=0;e<h.length;e++){b=h[e];a=b[0];g=b[b.length-1];k=b.lh.platform;l=b.$f.platform;m=Math.min(k.y,l.y);r=Math.max(k.y,l.y);if(a==g){if(p=25E3*(Math.floor((a.R-a.P-325E3)/5E4)-1),0>p&&(p=0),Math.abs(l.y-k.y)>p){h.splice(e--,1);continue}}else if(p=
25E3*(Math.floor((a.R-a.P-325E3)/5E4)-1),0>p&&(p=0),m=Math.max(m,k.y-p),r=Math.min(r,k.y+p),p=25E3*(Math.floor((g.R-g.P-325E3)/5E4)-1),0>p&&(p=0),m=Math.max(m,l.y-p),r=Math.min(r,l.y+p),m>r){h.splice(e--,1);continue}b.y=yh(m,r);b.Cc=[];Math.abs(k.y-b.y)/25E3&&b.Cc.push({direction:(a.rb()+2+3)%4,target:k});Math.abs(l.y-b.y)/25E3&&b.Cc.push({direction:(g.rb()+3)%4,target:l});b.Cc.length||delete b.Cc}e=h[xh(h.length/10)];if(!e)return!1;a=[];$h.call(a);a.index=Pg.length+Qg;Pg.push(a);0==Wg.index%5&&(Wg.ae=
!0);b=[];b.index=Tg++;b.Nc=[];b.y=e.y;e.Cc&&(b.Cc=e.Cc);Wh(b,a);a=q(e);for(g=a.next();!g.done;g=a.next())g=g.value.Ag().expand(162500,162500),g.platform=b,b.push(g);Th();b.y==e.$f.platform.y?(Uh(e.lh.platform,b),Uh(b,e.$f.platform)):(Uh(b,e.$f.platform),Uh(e.lh.platform,b));return e}
function hi(a,b,c){a.Sd=ki(a,c);b.Sd=ki(b,c);var d=[],e=[],h=c+37500,g=Ch(a.Sd,h,0),k=Ch(b.Sd,-h,0);k=Ih(g,k);var l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=0;e=e.concat(k);g=Ch(a.Sd,0,h);k=Ch(b.Sd,0,-h);k=Ih(g,k);l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=1;e=e.concat(k);g=Ch(a.Sd,-h,0);k=Ch(b.Sd,h,0);k=Ih(g,k);l=q(k);for(g=l.next();!g.done;g=l.next())g.value.direction=2;e=e.concat(k);g=Ch(a.Sd,0,-h);h=Ch(b.Sd,0,h);h=Ih(g,h);k=q(h);for(g=k.next();!g.done;g=k.next())g.value.direction=
3;e=e.concat(h);zh(e);h=new ih(-9375,9375,-c,c);e=q(e);for(g=e.next();!g.done;g=e.next()){g=g.value;k=h.Hf(g.direction);l=q([{z:g.D,x:g.m},{z:g.M-1,x:g.A-1}]);for(var m=l.next();!m.done;m=l.next())m=m.value,m=k.translate(m.z,m.x),m.y=a.y,m.direction=g.direction,d.push(new li(m,c,a,b))}return d}function ki(a,b){b+=37500;var c=Gh(a,new ih(0,1,0,1));a=Jh(c,1);a=Gh(a,new ih(-b,b,-b,b));Hh(c,a);return c}
function Xh(){for(var a=Wg,b=new ih,c=q(a),d=c.next();!d.done;d=c.next())for(var e=q(d.value),h=e.next();!h.done;h=e.next())ph(b,h.value);c=75E3;var g=b.M-b.D;d=b.A-b.m;e=Math.round(g/1E6)-1;h=Math.round(d/1E6)-1;g=b.D+.5*(g-1E6*(e-1));b=b.m+.5*(d-1E6*(h-1));var k=[],l=q(a);for(d=l.next();!d.done;d=l.next())k=k.concat(d.value);k=Jh(k,1);k=Fh(k,1E5,1E5);c-=9375;for(l=0;l<e;l++){for(var m=b,n={},r=0;r<h;n={Eg:n.Eg},r++){d=function(t){return function(){for(var z=q(k),w=z.next();!w.done;w=z.next())if(rh(t.Eg,
w.value))return!1;return!0}}(n);n.Eg=new ih(g-c,g+c,m-c,m+c);if(d()){var p=q(a);for(d=p.next();!d.done;d=p.next())Hh(d.value,[n.Eg])}m+=1E6}g+=1E6}}function fi(a,b){for(var c=di(a),d=[],e=0;4>e;e++)d=d.concat(ei(a,b,c,e));return d}
function ei(a,b,c,d){var e=25E3*Math.ceil(Math.abs(b.y-a.y)/25E3),h=a.ja!=b.ja?325E3:0,g=function(l,m,n){function r(w){for(var y=0;y<w.length;y++)for(var B=w[y],A=y+1;A<w.length;A++){var D=w[A];if(B.D==D.D&&B.M==D.M){if(D.A==B.m){w.splice(A--,1);B.m=D.m;y--;break}if(D.m==B.A){w.splice(A--,1);B.A=D.A;y--;break}}}w=q(w);for(y=w.next();!y.done;y=w.next())y=y.value,y.m=y.A-1,y.direction=d}var p=Jh(l,1);p=Gh(p,new ih(-162499,162500,-e-h+1,e+162500+162500));l=p=Jh(p,0);p=Gh(n,new ih(0,0,-e-h+1,e));p=Jh(p,
1);p=Gh(p,new ih(-162500,162501,0,0));l=p=Ih(l,p);p=Jh(m,1);p=Gh(p,new ih(-162499,162500,-162499,162500));p=Jh(p,0);n=[];m=Ih(l,Ch(p,0,-e-h-162500));r(m);for(var t=q(m),z=t.next();!z.done;z=t.next())z.value.type=1;n=n.concat(m);if(0!=h){m=Ih(l,Ch(p,-325E3,-e-162500));r(m);t=q(m);for(z=t.next();!z.done;z=t.next())z.value.type=0;n=n.concat(m);m=Ih(l,Ch(p,325E3,-e-162500));r(m);l=q(m);for(z=l.next();!z.done;z=l.next())z.value.type=2;n=n.concat(m)}return n}(Dh(a,d),Dh(b,d),Dh(c,d));c=[];g=q(g);for(var k=
g.next();!k.done;k=g.next())c.push(new mi(k.value,e,h,a,b));return c}function di(a){for(var b=a.slice(),c=q(a.De),d=c.next();!d.done;d=c.next())d=d.value,d=d.Ea.platform!=a?d.Ea.platform:d.ga.platform,d.ja==a.ja&&(b=b.concat(d));return b}
function Th(){for(var a=[],b=q(Pg),c=b.next();!c.done;c=b.next()){c=q(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;d.De=[];for(var e=q(d),h=e.next();!h.done;h=e.next())h.value.De=[];a=a.concat(d)}}for(b=0;b<a.length;b++)for(c=a[b],d=b+1;d<a.length;d++)if(e=a[d],h=th(c,e))h.Ea=c,h.ga=e,c.De.push(h),e.De.push(h),c.platform!=e.platform&&(c.platform.De.push(h),e.platform.De.push(h))}
function Yh(){Yg=Bh();var a=q(Pg),b=a.next();a:for(;!b.done;b=a.next())if(b=b.value,!b.Ek){b.Ek=!0;b=q(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=q(c.De),e=d.next();!e.done;e=d.next())if(e=e.value,e=e.Ea.platform!=c?e.Ea.platform:e.ga.platform,!(e.ja.ob<=Sg||c.index<=e.index||c.ja==e.ja)){var h=hi(c,e,87500);zh(h);h=q(h);for(var g=h.next();!g.done;g=h.next())if(g=g.value,gi(g)){g.Pc=!0;c.Nc.push(g);e.Nc.push(g);ji(c.ja,e.ja,Infinity,g.y+87500+125E3);b=c.ja;c=e.ja.ob-b.ob-1;if(!(1>
c)){for(d=b.ob;b;)b.ob=Math.max(d,b.ob-c),b=Pg[b.index+1-Qg];Rg=Math.max(d,Rg-c)}continue a}}}}}function $h(){this.ob=Rg+1;this.dk=[];this.gb=[];this.dc=[];this.bound=new he;this.ta=-Infinity;this.floor=Infinity;this.h=-Infinity;this.ea={};this.ea.Aa=-2147483648;this.ea.pb=new J(1,1,1);this.Ic=0;this.wb=new J;this.cells=new ub(Lb)}function Wh(a,b){b.push(a);a.ja=b;1==b.length&&(b.ta=a.y+25E4+25E3*xh(10));a.y<b.floor&&(b.floor=a.y);a.y+25E4>b.ta&&(b.ta=a.y+25E4);b.ta=Math.min(-18750,b.ta)}
function li(a,b,c,d){this.Yb=a;this.direction=a.direction;this.a=b;this.Za=c;this.Cb=d;this.z=.5*a.D+.5*a.M;this.x=.5*a.m+.5*a.A;this.y=Math.max(c.y,d.y);this.Ad=[];this.Ne=[];this.Sc=[];this.gd=[];this.gb=[];c=new ih(a.D,a.M,a.m,a.A);c.h=a.y;c.o=c.h+225E3;this.Sc.push(c);this.Ne.push(c);b=new ih(2*-b,2*b,-b,b);b=b.rotate(this.direction);b=b.translate(this.z,this.x);b.o=a.y;b.h=b.o-18750;this.Sc.push(b);b=new ih(b.D,b.M,b.m,b.A);b.h=a.y;b.o=b.h+225E3;this.gd.push(b)}
li.prototype.Eh=function(){if(!this.gb.length){this.Fc=0;Vg.push(this.Yb);var a=new jh(0,0,1);a=a.rotate(this.direction);this.sa=new O(a.$b()+this.z,a.Zb()+this.x,a.Bb()+this.z,a.Ab()+this.x);a=new ni;a.add=!0;a.Eb=0;a.color=hh;this.Pc?(a.h=this.y+87500,a.o=a.h+125E3):(a.h=this.y,a.o=this.y+225E3);for(var b=[new S(0,-this.a),new S(0,this.a),new S(-9375,this.a),new S(-9375,-this.a)],c=[new S(0,this.a),new S(0,-this.a),new S(9375,-this.a),new S(9375,this.a)],d=0;d<b.length;d++)b[d]=this.sa.kb(b[d].x,
b[d].y);for(d=0;d<c.length;d++)c[d]=this.sa.kb(c[d].x,c[d].y);a.aa=this.Za.ja.index;oi(a,b);this.gb.push(a);a=a.X();a.aa=this.Cb.ja.index;oi(a,c);this.gb.push(a);this.cc=new Sf(new O(b[0].x,b[0].y,b[1].x,b[1].y),a.h,a.o);this.rc=new Sf(new O(c[0].x,c[0].y,c[1].x,c[1].y),a.h,a.o);this.cc.Ec=this.rc;this.rc.Ec=this.cc;this.cc.aa=this.Za.ja.index;this.rc.aa=this.Cb.ja.index;this.cc.Pc=this.Pc;this.rc.Pc=this.Pc}};
li.prototype.li=function(){if(0==this.Fc){for(var a=q(this.gb),b=a.next();!b.done;b=a.next())b.value.stroke();this.Fc=1}1==this.Fc&&ff(this.Za.ja.index)&&ff(this.Cb.ja.index)&&(this.Za.ja.dc.push(this.cc),this.Cb.ja.dc.push(this.rc),this.Pc?this.Rh=new pi(this.sa,this.y+87500,this.Za.ja,this.Cb.ja):this.Za.ja.ae!=this.Cb.ja.ae&&(this.Rh=new qi(this.sa,this.y,this.cc,this.rc,this.Za.ja,this.Cb.ja)),this.Fc=2)};
li.prototype.Kh=function(){if(!this.Je){for(var a=q(this.gb),b=a.next();!b.done;b=a.next())ai(b.value);this.Rh&&this.Rh.remove();this.Je=!0}};
function ii(a,b,c){var d=.5*(a.R-a.P)-9375,e=a.Ag();this.direction=(a.rb()+3)%4;this.a=d;this.Yb=e;this.Za=b;this.Cb=c;this.z=.5*e.D+.5*e.M;this.x=.5*e.m+.5*e.A;this.y=Math.max(b.y,c.y);e.y=this.y;this.Ad=[];this.Ne=[];this.Sc=[];this.gd=[];this.gb=[];a=new ih(e.D,e.M,e.m,e.A);a.h=e.y;a.o=a.h+225E3;this.Sc.push(a);this.Ne.push(a);d=new ih(-225E3,225E3,-d,d);d=d.rotate(this.direction);d=d.translate(this.z,this.x);d.o=e.y;d.h=d.o-18750;this.Sc.push(d);d=new ih(d.D,d.M,d.m,d.A);d.h=e.y;d.o=d.h+225E3;
this.gd.push(d)}
ii.prototype.Eh=function(){if(!this.gb.length){this.Fc=0;Vg.push(this.Yb);var a=new jh(0,0,1);a=a.rotate(this.direction);this.sa=new O(a.$b()+this.z,a.Zb()+this.x,a.Bb()+this.z,a.Ab()+this.x);a=new ni;a.add=!0;a.Eb=0;a.color=hh;this.Pc?(a.h=this.y+87500,a.o=a.h+125E3):(a.h=this.y,a.o=Math.min(this.Za.ja.ta,this.Cb.ja.ta));for(var b=[new S(0,-this.a),new S(0,this.a),new S(-9375,this.a),new S(-9375,-this.a)],c=[new S(0,this.a),new S(0,-this.a),new S(9375,-this.a),new S(9375,this.a)],d=0;d<b.length;d++)b[d]=
this.sa.kb(b[d].x,b[d].y);for(d=0;d<c.length;d++)c[d]=this.sa.kb(c[d].x,c[d].y);a.aa=this.Za.ja.index;oi(a,b);this.gb.push(a);a=a.X();a.aa=this.Cb.ja.index;oi(a,c);this.gb.push(a);this.cc=new Sf(new O(b[0].x,b[0].y,b[1].x,b[1].y),a.h,a.o);this.rc=new Sf(new O(c[0].x,c[0].y,c[1].x,c[1].y),a.h,a.o);this.cc.Ec=this.rc;this.rc.Ec=this.cc;this.cc.aa=this.Za.ja.index;this.rc.aa=this.Cb.ja.index;this.cc.Pc=this.Pc;this.rc.Pc=this.Pc}};
ii.prototype.li=function(){if(0==this.Fc){for(var a=q(this.gb),b=a.next();!b.done;b=a.next())b.value.stroke();this.Fc=1}1==this.Fc&&ff(this.Za.ja.index)&&ff(this.Cb.ja.index)&&(this.Za.ja.dc.push(this.cc),this.Cb.ja.dc.push(this.rc),this.Fc=2)};ii.prototype.Kh=function(){if(!this.Je){for(var a=q(this.gb),b=a.next();!b.done;b=a.next())ai(b.value);this.Je=!0}};
function mi(a,b,c,d,e){this.Yb=a;this.direction=a.direction;this.type=a.type;this.Be=162500;this.le=b;this.Za=d;this.Cb=e;var h=Math.min(d.y,e.y),g=Math.max(d.y,e.y);this.Ad=[];this.Ne=[];this.Sc=[];this.gd=[];this.gb=[];var k=new ih(-162500,162500,-b,b);k=k.translate(a.D,a.m);k=k.rotate(this.direction);k.h=h-18750;k.o=g;this.Ad.push(k);this.Ne.push(k);k=new ih(k.D,k.M,k.m,k.A);k.h=h;k.o=g+2E5;this.gd.push(k);k=new ih(-162500,162500,-b-162500-162500,-b);k=k.translate(a.D,a.m);k=k.rotate(this.direction);
k.h=d.y;k.o=g+2E5;this.gd.push(k);k=new ih(k.D,k.M,k.m,k.A);k.h=h-18750;k.o=d.y;this.Ad.push(k);this.Sc.push(k);if(c){d=new ih(-162500,162500,b,b+c);d=d.translate(a.D,a.m);d=d.rotate(this.direction);d.h=e.y;d.o=g+2E5;this.gd.push(d);d=new ih(d.D,d.M,d.m,d.A);d.h=h-18750;d.o=e.y;this.Ad.push(d);this.Sc.push(d);this.ij=d;var l;0==this.type?l=new ih(162500,487500,b,b+c):1==this.type?l=new ih(-162500,162500,b+c,b+c+325E3):2==this.type&&(l=new ih(-487500,-162500,b,b+c));l=l.translate(a.D,a.m);l=l.rotate(this.direction);
l.h=e.y;l.o=g+2E5;this.gd.push(l);l=new ih(l.D,l.M,l.m,l.A);l.h=h-18750;l.o=e.y;this.Ad.push(l);this.Sc.push(l)}else b=new ih(-162500,162500,b,b+162500),b=b.translate(a.D,a.m),b=b.rotate(this.direction),b.h=e.y,b.o=g+2E5,this.gd.push(b),b=new ih(b.D,b.M,b.m,b.A),b.h=h-18750,b.o=e.y,this.Ad.push(b),this.Sc.push(b)}
mi.prototype.Eh=function(){if(!this.gb.length){this.Fc=0;var a=this.Za.ja,b=(this.Cb.y-this.Za.y)/25E3,c=function(h){return 1!=h.bg?!1:!0};if(this.Cb.y>this.Za.y)for(c=0;c<b;c++){var d=new ih(this.Yb.D-this.Be,this.Yb.D+this.Be,this.Yb.m-this.le+5E4*c,this.Yb.m-this.le+5E4*(c+1));d=d.rotate(this.direction);d=[new S(d.D,d.m),new S(d.M,d.m),new S(d.M,d.A),new S(d.D,d.A)];a=new ni;a.add=!1;a.aa=this.Za.ja.index;a.Eb=0;a.color=hh;a.h=this.Za.y;a.o=this.Za.y+25E3*(c+1);oi(a,d);this.gb.push(a)}else for(b=
-b,d=new ni,d.add=!0,d.bg=1,d.aa=this.Za.ja.index,d.nf=c,d.gf=ch,d.Eb=a.Eb,d.wg=a.h,d.color=a.Ae,d.h=this.Cb.y,d.o=this.Za.y,a=this.Ad[0],oi(d,[new S(a.D,a.m),new S(a.M,a.m),new S(a.M,a.A),new S(a.D,a.A)]),this.gb.push(d),d=0;d<b;d++){a=new ih(this.Yb.D-this.Be,this.Yb.D+this.Be,this.Yb.m-this.le+5E4*d,this.Yb.m-this.le+5E4*(d+1));a=a.rotate(this.direction);a=[new S(a.D,a.m),new S(a.M,a.m),new S(a.M,a.A),new S(a.D,a.A)];var e=new ni;e.add=!1;e.aa=this.Za.ja.index;e.nf=c;e.Eb=0;e.color=hh;e.h=this.Cb.y;
e.o=this.Za.y-25E3*d;oi(e,a);this.gb.push(e)}}};mi.prototype.li=function(){if(0==this.Fc){for(var a=q(this.gb),b=a.next();!b.done;b=a.next())b.value.stroke();this.Fc=2}};mi.prototype.Kh=function(){if(!this.Je){for(var a=q(this.gb),b=a.next();!b.done;b=a.next())ai(b.value);this.Je=!0}};
function ri(a,b){for(var c=q(a.Sc),d=c.next();!d.done;d=c.next()){var e=d.value,h=q(b.Ne);for(d=h.next();!d.done;d=h.next())if(uh(e,d.value))return!1}c=q(a.Ne);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=q(b.Sc),d=h.next();!d.done;d=h.next())if(uh(e,d.value))return!1;c=q(a.gd);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=q(b.Ad),d=h.next();!d.done;d=h.next())if(uh(e,d.value))return!1;a=q(a.Ad);for(d=a.next();!d.done;d=a.next())for(c=d.value,e=q(b.gd),d=e.next();!d.done;d=e.next())if(uh(c,
d.value))return!1;return!0}function gi(a){for(var b=q(Yg),c=b.next();!c.done;c=b.next())if(!ri(a,c.value))return!1;return!0}function ji(a,b,c,d){c<a.h&&(a.h=c);d>a.ta&&(a.ta=d);c<b.h&&(b.h=c);d>b.ta&&(b.ta=d);a.ta=Math.min(-18750,a.ta);b.ta=Math.min(-18750,b.ta)}
function bi(a){function b(k){return k.add&&k.aa==this.aa?!0:!1}a.Ae=yh(new T(255,0,64,255),new T(255,255,64,255),new T(0,96,255,255));a.ae?a.Eb=75E3:xh(3)?a.Eb=75E3:a.Eb=a.ta-a.h-75E3;if(a.ae){var c=new ni;c.add=!0;c.bg=1;c.aa=a.index;c.nf=function(k){return isNaN(k.index)?!0:!1};c.Eb=a.Eb;c.color=a.Ae;c.gf=function(){return[]};c.wg=0;c.h=0;c.o=2147483647;var d=[new S(a.bound.D,a.bound.m),new S(a.bound.M,a.bound.m),new S(a.bound.M,a.bound.A),new S(a.bound.D,a.bound.A)];c.ta=null;oi(c,d);a.gb.push(c)}c=
q(a.Yi);for(d=c.next();!d.done;d=c.next()){d=d.value;var e=new ni;e.add=!0;e.bg=1;e.aa=a.index;e.Eb=a.Eb;e.color=a.Ae;e.gf=ch;e.wg=a.h;e.h=a.h;e.o=a.ta;oi(e,ld(d));a.gb.push(e)}if(a.ak)for(c=q(a.ak),d=c.next();!d.done;d=c.next())d=d.value,e=new ni,e.add=!0,e.bg=1,e.aa=a.index,e.Eb=a.Eb,e.color=a.Ae,e.gf=ch,e.wg=a.h,e.h=a.h,e.o=a.ta,oi(e,ld(d)),a.gb.push(e);c=q(a);for(d=c.next();!d.done;d=c.next())if(e=d.value,!(e.y<=a.h)){var h=q(e.Xi);for(d=h.next();!d.done;d=h.next()){d=d.value;var g=new ni;g.add=
!1;g.bg=1;g.aa=a.index;g.nf=b;g.Eb=a.Eb;g.color=a.Ae;g.gf=ch;g.wg=a.floor;g.h=a.h;g.o=e.y;oi(g,ld(d));a.gb.push(g)}}};function si(a,b){function c(){for(var n=new ub(Rc),r=q(a),p=r.next();!p.done;p=r.next())p=p.value,n.add(p),n.add(p.Y);r=q(a);for(p=r.next();!p.done;p=r.next())if(p=p.value,!p.remove){var t=n.get(p);t!=p&&(p.replace([t]),p.Y.replace([t.Y]))}return n.elements}function d(){for(var n=q(m),r=n.next();!r.done;r=n.next()){r=r.value;var p=r.x&-524288,t=r.y&-524288,z=!1;r.x<=p+256?(r.x=p,z=!0):r.x>=p+524288-256&&(r.x=p+524288,z=!0);r.y<=t+256?(r.y=t,z=!0):r.y>=t+524288-256&&(r.y=t+524288,z=!0);if(z){t=q(r.inputs);
for(p=t.next();!p.done;p=t.next())p.value.Tf=!0;r=q(r.outputs);for(p=r.next();!p.done;p=r.next())p.value.Tf=!0}}}function e(n,r,p){var t=R(r,n.f,n.c),z=R(r,n.B,n.u),w=R(n,r.f,r.c),y=R(n,r.B,r.u);if(-256>w&&256<y&&(-256>t&&256<z||256<t&&-256>z)||256<w&&-256>y&&(-256>t&&256<z||256<t&&-256>z)){t/=t-z;z=1-t;y=new S(Math.round(n.f*z+n.B*t),Math.round(n.c*z+n.u*t));t=n.Sa(n.f,n.c,y.x,y.y);z=n.Sa(y.x,y.y,n.B,n.u);w=r.Sa(r.f,r.c,y.x,y.y);y=r.Sa(y.x,y.y,r.B,r.u);var B=jd(t),A=jd(z),D=jd(w),F=jd(y);n.replace([t,
z]);n.Y.replace([A,B]);r.replace([w,y]);r.Y.replace([F,D]);p.push(t,z,w,y);p.push(B,A,D,F);n=!0}else n=!1;return n}function h(n,r){if(!n.remove){for(var p=q(m),t=p.next();!t.done;t=p.next())if(t=t.value,t.x!=n.f||t.y!=n.c)if(t.x!=n.B||t.y!=n.u){var z=n.Re(t.x,t.y);if(!(0>=z.x||z.x>=n.length||-256>z.y||256<z.y)){p=n.Sa(n.f,n.c,t.x,t.y);t=n.Sa(t.x,t.y,n.B,n.u);z=n.Sa(p.B,p.u,p.f,p.c);var w=n.Sa(t.B,t.u,t.f,t.c);p.Y=z;z.Y=p;t.Y=w;w.Y=t;n.replace([p,t]);n.Y.replace([w,z]);h(p,r);h(t,r);h(z,r);h(w,r);
return}}r.push(n)}}for(var g=[],k=q(a),l=k.next();!l.done;l=k.next())l=l.value,l.remove||g.push(l);a=g;a=c();b&&(a=ti(null,a,e));var m=new ub(Md);b=q(a);for(l=b.next();!l.done;l=b.next())g=l.value,k=new S(g.f,g.c),k.inputs=[],k.outputs=[],k.a=1,g.Ea=m.Ka(k),g.Ea.outputs.push(g),g.Ea.a++,k=new S(g.B,g.u),k.inputs=[],k.outputs=[],k.a=1,g.ga=m.Ka(k),g.ga.inputs.push(g),g.ga.a++;m=m.elements;d();m=ti(null,m,function(n,r,p){if(256>(Math.abs(r.x-n.x)+Math.abs(r.y-n.y))*Math.SQRT1_2){var t=new S(n.x*n.a+
r.x*r.a,n.y*n.a+r.y*r.a);t.a=n.a+r.a;t.x/=t.a;t.y/=t.a;t.round();t.inputs=n.inputs.concat(r.inputs);t.outputs=n.outputs.concat(r.outputs);n=q(t.inputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.ga=t,r.Tf=!0;n=q(t.outputs);for(r=n.next();!r.done;r=n.next())r=r.value,r.Ea=t,r.Tf=!0;p.push(t);p=!0}else p=!1;return p});d();for(b=0;b<a.length;b++)g=a[b],g.remove?a.splice(b--,1):g.Ea==g.ga?(g.replace([]),g.Y.replace([]),a.splice(b--,1)):g.Tf&&(k=g.Sa(g.Ea.x,g.Ea.y,g.ga.x,g.ga.y),l=jd(k),g.replace([k]),
g.Y.replace([l]),a.splice(b++,1,k,l)),delete g.Ea,delete g.ga,delete g.Tf;(function(){for(var n=[],r=q(a),p=r.next();!p.done;p=r.next())h(p.value,n);a=n})();return a=c()}
function ti(a,b,c){var d=[];if(a)for(var e=0;e<a.length;e++){var h=a[e];if(h.remove)a.splice(e--,1);else for(var g=0;g<b.length;g++){var k=b[g];if(k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);a.splice(e--,1);break}}}for(e=0;e<b.length;e++)if(h=b[e],h.remove)b.splice(e--,1);else for(g=e+1;g<b.length;g++)if(k=b[g],k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);b.splice(e--,1);break}a&&(b=a.concat(b));return d.length?ti(b,d,c):b};var ui,vi,wi,xi,yi=0;
function zi(){function a(c){function d(y,B,A){return Eh(B,A,y.rb()).y>=y.d}function e(y){y.Ma=0;var B=y.f,A=y.c;if(1==y.action)if(y.ib.length){var D=y.ib[0],F=D.$b()-B;D=D.Zb()-A;y.Ma+=Math.sqrt(F*F+D*D);F=q(y.ib);for(D=F.next();!D.done;D=F.next())A=D.value,y.Ma+=A.R-A.P,B=A.Bb(),A=A.Ab()}else F=y.S.Bb(),D=y.S.Ab(),B=F-B,A=D-A,y.Ma+=Math.sqrt(B*B+A*A),B=F,A=D;else if(2==y.action)if(y.ib.length)for(D=y.ib[0],F=D.Bb()-B,D=D.Ab()-A,y.Ma+=Math.sqrt(F*F+D*D),F=q(y.ib),D=F.next();!D.done;D=F.next())A=D.value,
y.Ma+=A.R-A.P,B=A.$b(),A=A.Zb();else F=y.S.Bb(),D=y.S.Ab(),B=F-B,A=D-A,y.Ma+=Math.sqrt(B*B+A*A),B=F,A=D;B=y.B-B;A=y.u-A;y.Ma+=Math.sqrt(B*B+A*A)}function h(y){y.Sb=0;for(var B=q(y),A=B.next();!A.done;A=B.next())A=A.value,y.Sb=A.complete?y.Sb+.5*A.Ma:y.Sb+A.Ma}for(var g=null,k=0,l=0;l<c.length;l++)if(!c[l].complete){k=l;g=c[l];break}if(!g)return!0;if(1==g.action){g.S=g.S.next;l=g.S.Bb();var m=g.S.Ab();if(l==g.f&&m==g.c||l==g.B&&m==g.u)return!1;for(var n=g.S,r=g.S.next;0<k;){var p=c[k-1],t=R(p,l,m);
if(1==p.hb&&0<=t||2==p.hb&&0>=t)p=new O(p.f,p.c,g.B,g.u),p.action=g.action,p.complete=g.complete,p.hb=g.hb,p.S=g.S,p.ib=g.ib,p.max=p,c=c.slice(),c.splice(--k,2,p),kb(wi,c),g=p;else break}p=!d(n,g.B,g.u)&&d(r,g.B,g.u);if(g.ib.length){if(Eh(r.Bb(),r.Ab(),n.rb()).y>n.d||p){l=[];m=g.ib[0];m=new O(g.f,g.c,m.$b(),m.Zb());m.Ma=m.length;m.action=0;m.hb=g.action;l.push(m);m=q(g.ib);for(n=m.next();!n.done;n=m.next())n=n.value,n=new O(n.$b(),n.Zb(),n.Bb(),n.Ab()),n.Ma=n.length,n.complete=1,n.action=0,n.hb=g.action,
l.push(n);m=g.ib[g.ib.length-1];m=new O(m.Bb(),m.Ab(),g.B,g.u);m.Ma=m.length;m.action=0;m.hb=g.hb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(da(l)));e(g);h(c);kb(wi,c)==c&&kb(ui,c);return!1}g.ib.push(r)}else{t=r.Bb();var z=r.Ab();if(0<=R(g.max,l,m)&&(g.max=new O(g.f,g.c,l,m),Eh(t,z,n.rb()).y<n.d&&!d(r,g.f,g.c))){if(p)return n=[],r=new O(g.f,g.c,l,m),r.Ma=r.length,r.action=0,r.hb=g.action,n.push(r),l=new O(l,m,g.B,g.u),l.Ma=l.length,l.action=0,l.hb=g.hb,n.push(l),c=c.slice(),c.splice.apply(c,
[k,1].concat(da(n))),e(g),h(c),kb(wi,c)==c&&kb(ui,c),!1;g.ib.push(r)}}e(g);h(c);kb(ui,c)}else if(2==g.action){g.S=g.S.jb;l=g.S.Bb();m=g.S.Ab();if(l==g.f&&m==g.c||l==g.B&&m==g.u)return!1;n=g.S.next;for(r=g.S;0<k;)if(p=c[k-1],t=R(p,l,m),1==p.hb&&0<=t||2==p.hb&&0>=t)p=new O(p.f,p.c,g.B,g.u),p.action=g.action,p.complete=g.complete,p.hb=g.hb,p.S=g.S,p.ib=g.ib,p.max=p,c=c.slice(),c.splice(--k,2,p),kb(wi,c),g=p;else break;p=!d(n,g.B,g.u)&&d(r,g.B,g.u);if(g.ib.length){if(Eh(r.$b(),r.Zb(),n.rb()).y>n.d||p){l=
[];m=g.ib[0];m=new O(g.f,g.c,m.Bb(),m.Ab());m.Ma=m.length;m.action=0;m.hb=g.action;l.push(m);m=q(g.ib);for(n=m.next();!n.done;n=m.next())n=n.value,n=new O(n.Bb(),n.Ab(),n.$b(),n.Zb()),n.Ma=n.length,n.complete=1,n.action=0,n.hb=g.action,l.push(n);m=g.ib[g.ib.length-1];m=new O(m.$b(),m.Zb(),g.B,g.u);m.Ma=m.length;m.action=0;m.hb=g.hb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(da(l)));e(g);h(c);kb(wi,c)==c&&kb(ui,c);return!1}g.ib.push(r)}else if(t=r.$b(),z=r.Zb(),0>=R(g.max,l,m)&&(g.max=new O(g.f,
g.c,l,m),Eh(t,z,n.rb()).y<n.d&&!d(r,g.f,g.c))){if(p)return n=[],r=new O(g.f,g.c,l,m),r.Ma=r.length,r.action=0,r.hb=g.action,n.push(r),l=new O(l,m,g.B,g.u),l.Ma=l.length,l.action=0,l.hb=g.hb,n.push(l),c=c.slice(),c.splice.apply(c,[k,1].concat(da(n))),e(g),h(c),kb(wi,c)==c&&kb(ui,c),!1;g.ib.push(r)}e(g);h(c);kb(ui,c)}else{l=[];l.cmp=function(y,B){return y.t<B.t?-1:y.t>B.t?1:y.me<B.me?-1:y.me>B.me?1:y.S.next==B.S?-y.me:y.S.jb==B.S?y.me:0};m=q(xi);for(n=m.next();!n.done;n=m.next())if(n=n.value,!n.disabled)if(r=
Eh(g.f,g.c,n.rb()),p=Eh(g.B,g.u,n.rb()),p.y==r.y){if(p.y==n.d){var w=z=void 0;t=void 0;if(p.x>r.x)z=Math.max(r.x,n.P),w=Math.min(p.x,n.R),t=1;else if(p.x<r.x)z=Math.max(p.x,n.P),w=Math.min(r.x,n.R),t=-1;else continue;z>=w||(z=Math.round(.5*z+.5*w),kb(l,{t:(z-r.x)/(p.x-r.x),Qf:-1,me:t,S:n,x:z,y:n.d}))}}else t=p.x<r.x?-1:1,z=(n.d-r.y)/(p.y-r.y),0>z||1<z||(w=Math.round(r.x+(p.x-r.x)*z),p.y<r.y?w<n.P||w>n.R||kb(l,{t:z,Qf:0,me:t,S:n,x:w,y:n.d}):p.y>r.y&&!(w<n.P)&&(w>n.R||kb(l,{t:z,Qf:1,me:t,S:n,x:w,y:n.d})));
m=null;for(n=1;n<l.length;n++)if(r=l[n-1],p=l[n],0==r.Qf&&1==p.Qf&&r.t<p.t){m=r;break}if(!m)return g.complete=1,kb(ui,c),!1;l=g.X();l.action=1;l.max=l;l.hb=g.hb;l.S=m.x==m.S.R?m.S:m.S.jb;l.ib=[];n=c.slice();n[k]=l;n.Sb=0;kb(wi,n)==n&&kb(ui,n);l=g.X();l.action=2;l.max=l;l.hb=g.hb;l.S=m.x==m.S.P?m.S.jb:m.S;l.ib=[];c=c.slice();c[k]=l;c.Sb=0;kb(wi,c)==c&&kb(ui,c)}return!1}for(;yi&&ui.length;){vi++;yi--;var b=ui.shift();if(a(b))return ui=null,b}if(0==ui.length)return ui=null}
function Ai(a,b,c,d){var e=xi;xi=e;wi=[];wi.cmp=function(l,m){if(l.length<m.length)return-1;if(l.length>m.length)return 1;for(var n=0;n<l.length;n++){var r=l[n],p=m[n];if(r.f<p.f)return-1;if(r.f>p.f)return 1;if(r.c<p.c)return-1;if(r.c>p.c)return 1;if(r.B<p.B)return-1;if(r.B>p.B)return 1;if(r.u<p.u)return-1;if(r.u>p.u)return 1;if(r.action<p.action)return-1;if(r.action>p.action)return 1}return 0};a=(new S(a,b)).round();c=(new S(c,d)).round();b=null;var h=NaN,g=q(e.tf);for(d=g.next();!d.done;d=g.next()){d=
d.value;var k=nh(d,a.x,a.y);k>=h||(h=k,b=d)}a=b.We(a.x,a.y);b=null;h=NaN;e=q(e.tf);for(d=e.next();!d.done;d=e.next())d=d.value,g=nh(d,c.x,c.y),g>=h||(h=g,b=d);c=b.We(c.x,c.y);vi=0;ui=[];ui.cmp=function(l,m){return l.Sb<m.Sb?-1:1};a=new O(a.x,a.y,c.x,c.y);a.Ma=a.length;a.action=0;a=[a];a.Sb=0;kb(ui,a);return zi()};var fg,Bi,Ci,Di,Ei=new O(0,0,1,0),Fi=4095/741455.429632,Gi=[];Gi.cmp=function(a,b){return a.index-b.index};var Hi=new ub(function(a,b){return a.y<b.y?-1:a.y>b.y?1:a.aa<b.aa?-1:a.aa>b.aa?1:a.ma.name<b.ma.name?-1:a.ma.name>b.ma.name?1:Ve(a.da,b.da)});function Ii(a,b){return a.y>b.y?-1:a.y<b.y?1:0}function Ji(a,b){a=ff(a.src.aa).Mj;b=ff(b.src.aa).Mj;return a-b}function ci(a,b,c,d){var e=new gg;e.y=a;e.aa=b;e.ma=c;e.da=d;e.td=[];return Hi.Ka(e)}var ag=0;
function Ki(){if(0>ag)if(Rg<bg+6)ag=0;else return!1;if(0==ag)return Sh();if(1==ag){var a=Gi.slice();u.sf();for(var b=q(a),c=b.next();!c.done;c=b.next())c.value.Aa=u.Aa;var d=q(a);for(c=d.next();!c.done;c=d.next())for(var e=c.value,h=0;4>h;h++){var g=Li(e,h);g&&g.Aa!=u.Aa&&(g.Aa=u.Aa,kb(Gi,g))}fg=[];ag++;Bi=0;return!0}if(2==ag){var k=Gi[Bi];if(k)return Mi(k),Bi++,!0;ag++;Bi=0}if(3==ag){u.sf();Ci=u.Aa;var l=Gi[Bi];if(l){for(var m=0;4>m;m++){var n=Li(l,m);if(n&&n.Aa!=Ci){var r=l,p=n,t=[];switch(m){case 0:var z=
nf(r.index);var w=z.x+512;for(var y=q(r.ca),B=y.next();!B.done;B=y.next()){var A=B.value;(A.f<=w||A.B<=w)&&t.push(A)}w=z.x-512;var D=q(p.ca);for(B=D.next();!B.done;B=D.next()){var F=B.value;(F.f>=w||F.B>=w)&&t.push(F)}break;case 1:z=nf(r.index);w=z.y+512;var K=q(r.ca);for(B=K.next();!B.done;B=K.next()){var V=B.value;(V.c<=w||V.u<=w)&&t.push(V)}w=z.y-512;var Q=q(p.ca);for(B=Q.next();!B.done;B=Q.next()){var ma=B.value;(ma.c>=w||ma.u>=w)&&t.push(ma)}break;case 2:z=nf(p.index);w=z.x+512;var aa=q(p.ca);
for(B=aa.next();!B.done;B=aa.next()){var oa=B.value;(oa.f<=w||oa.B<=w)&&t.push(oa)}w=z.x-512;var ob=q(r.ca);for(B=ob.next();!B.done;B=ob.next()){var Pa=B.value;(Pa.f>=w||Pa.B>=w)&&t.push(Pa)}break;case 3:z=nf(p.index);w=z.y+512;var Db=q(p.ca);for(B=Db.next();!B.done;B=Db.next()){var ue=B.value;(ue.c<=w||ue.u<=w)&&t.push(ue)}w=z.y-512;var rf=q(r.ca);for(B=rf.next();!B.done;B=rf.next()){var ve=B.value;(ve.c>=w||ve.u>=w)&&t.push(ve)}}si(t,!1)}}l.Aa=Ci;Bi++;return!0}ag++;Bi=0}if(4==ag){var xa=Gi[Bi];
if(xa)return xa.evaluate(),Bi++,!0;ag++;Bi=0}if(5==ag){var Gb=Gi[Bi];if(Gb){for(var sf=q(Gb.Dj),pa=sf.next();!pa.done;pa=sf.next())pa.value.evaluate();Bi++;return!0}ag++;Bi=0}if(6==ag){var tf=Gi[Bi];if(tf)return Ni(tf),Bi++,!0;ag++;Bi=0}if(7==ag){var uf=Gi[Bi];if(uf)return Oi(uf),Bi++,!0;ag++;Bi=0}if(8==ag)return eg(),ag++,!0;if(9==ag)return cf=qf(),Pi.vd=new gg,Pi.vd.da=new pe,Pi.vd.da.name="creaseShading",Pi.vd.da.za=1,Pi.vd.da.qd=new T(0,0,0,127.5),Pi.vd.C=u.v.la.get("creaseShading"),Qi=0,Pi.Me=
Array(gf.elements.length),Ri=0,ag++,!0;if(10==ag){if(Si())return!0;ag++;return!0}if(11==ag){for(var ta=[],Zb=q(df),we=Zb.next();!we.done;we=Zb.next())for(var xe=q(we.value),md=xe.next();!md.done;md=xe.next())ta=ta.concat(md.value);for(var vf=[],Qd=[],wf=[],xf=q(Yg),yf=xf.next();!yf.done;yf=xf.next()){var W=yf.value;if(2==W.Fc)if(W instanceof li){if(!W.Pc){var Aa=new ih(-40675,40675,-W.a+40675,W.a-40675);W.Ya=[];var ka=new kh(Aa.D,Aa.m,Aa.A);ka=ka.rotate(W.direction);ka=ka.translate(W.z,W.x);ka.source=
Aa;W.Ya.push(ka);ka=new jh(Aa.m,Aa.D,Aa.M);ka=ka.rotate(W.direction);ka=ka.translate(W.z,W.x);ka.source=Aa;W.Ya.push(ka);ka=new mh(Aa.M,Aa.A,Aa.m);ka=ka.rotate(W.direction);ka=ka.translate(W.z,W.x);ka.source=Aa;W.Ya.push(ka);ka=new lh(Aa.A,Aa.M,Aa.D);ka=ka.rotate(W.direction);ka=ka.translate(W.z,W.x);ka.source=Aa;W.Ya.push(ka);Aa=Aa.rotate(W.direction);Aa=Aa.translate(W.z,W.x);Aa.Mh=W;Qd.push(Aa)}}else if(W instanceof ii){var nd=new ih(-40675,40675,-W.a+40675,W.a-40675);nd=nd.rotate(W.direction);
nd=nd.translate(W.z,W.x);wf.push(nd)}else if(W instanceof mi){var kc=new ih(-W.Be+40675,W.Be-40675,-W.le-40675,W.le+40675);kc=kc.translate(W.Yb.D,W.Yb.m);kc=kc.rotate(W.direction);vf.push(kc);var lc=new ih(-W.Be,W.Be,-W.le,W.le);lc=lc.translate(W.Yb.D,W.Yb.m);lc=lc.rotate(W.direction);ta=Hh(ta,[lc])}}for(var zf=[],vb=0;vb<ta.length;vb++)for(var ye=ta[vb],ze=vb+1;ze<ta.length;ze++){var Ae=ta[ze];if(ye.platform.ja!=Ae.platform.ja||25E3<Math.abs(Ae.platform.y-ye.platform.y)){var pg=th(ye,Ae);pg&&zf.push(pg)}}ta=
Jh(ta,1);ta=ta.concat(zf);ta=Fh(ta,40675,40675);ta=Jh(ta);ta=Kh(ta);ta=ta.concat(vf);ta=ta.concat(wf);for(var Rd=[],Hb=q(ta),Ib=Hb.next();!Ib.done;Ib=Hb.next())qh(Ib.value,Rd);var Jb=q(Qd);for(Ib=Jb.next();!Ib.done;Ib=Jb.next()){var wb=Ib.value;Rd.push(wb.Mh.Ya[1],wb.Mh.Ya[3])}ta=ta.concat(Qd);Hh(Rd,ta);for(var Ab=Qh(Oh(Rd)),qg=0,Ec=q(Ab),Be=Ec.next();!Be.done;Be=Ec.next())for(var od=Be.value,$b=od[od.length-1],ac=q(od),mc=ac.next();!mc.done;mc=ac.next()){var pd=mc.value;pd.index=qg++;$b.next=pd;
pd.jb=$b;$b=pd}for(var Sd=[],Af=q(Ab),Td=Af.next();!Td.done;Td=Af.next())Sd=Sd.concat(Td.value);Ab=Sd;Ab.tf=ta;var Bf=q(Qd);for(Ib=Bf.next();!Ib.done;Ib=Bf.next()){var Xa=Ib.value.Mh;Xa.Rc=[Xa.Ya[1].jb,Xa.Ya[1].next,Xa.Ya[3].jb,Xa.Ya[3].next];Xa.Ya[0].jb=Xa.Rc[0];Xa.Ya[0].next=Xa.Rc[3];Xa.Ya[2].jb=Xa.Rc[2];Xa.Ya[2].next=Xa.Rc[1];Ab.push(Xa.Ya[0]);Ab.push(Xa.Ya[2]);var Qa=Xa;Qa.Rc[0]&&Qa.Rc[1]&&Qa.Rc[2]&&Qa.Rc[3]&&(Qa.Rc[0].next=Qa.Ya[1],Qa.Rc[1].jb=Qa.Ya[1],Qa.Rc[2].next=Qa.Ya[3],Qa.Rc[3].jb=Qa.Ya[3],
Qa.Ya[0].disabled=!0,Qa.Ya[1].disabled=!1,Qa.Ya[2].disabled=!0,Qa.Ya[3].disabled=!1,Qa.Ya[0].y=-5E4,Qa.Ya[1].y=0,Qa.Ya[2].y=-5E4,Qa.Ya[3].y=0)}xi=Ab;ag++;return!0}if(12==ag){if(Di&&0!=u.l%4)return!1;for(;Pg.length&&Pg[0].Je;)Pg.shift(),Qg++,df.shift(),ef++;for(var Ce=q(df),Fc=Ce.next();!Fc.done;Fc=Ce.next())for(var qd=Fc.value,bc=0;bc<qd.dc.length;bc++)qd.dc[bc].Ec.aa>=ef||qd.dc.splice(bc--,1);for(var Ud=0;Ud<Hi.elements.length;Ud++){var Gc=Hi.elements[Ud];Gc.aa<Qg&&(Hi.elements.splice(Ud--,1),Gc.Oc&&
(Gc.Oc.parent=null,ke(Gc.Oc)))}var Wc=q(df);for(Fc=Wc.next();!Fc.done;Fc=Wc.next()){var eb=Fc.value;eb.ob<=Sg||(eb.wb.x/=eb.Ic,eb.wb.y/=eb.Ic,eb.wb.z/=eb.Ic,eb.wb.x/=255,eb.wb.y/=255,eb.wb.z/=255)}Nf=[];var De=Of;Of=[[Array(df.length),Array(df.length),Array(df.length)],[Array(df.length),Array(df.length),Array(df.length)]];if(De)for(var Ee=q(df),Hc=Ee.next();!Hc.done;Hc=Ee.next())for(var Xc=Hc.value.index-ef,lb=0;2>lb;lb++)Of[lb][0][Xc]=De[lb][0][Xc],Of[lb][1][Xc]=De[lb][1][Xc],Of[lb][2][Xc]=De[lb][2][Xc];
Pf=0;var rd=q(df);for(Hc=rd.next();!Hc.done;Hc=rd.next()){var Va=Hc.value;if(!Va.ae){var sd=new Rf;sd.ig=Va;sd.Xe=Va;sd.Ic=Va.Ic;sd.hh=[rb(.05,.95,Va.wb.x),rb(.05,.95,Va.wb.y),rb(.05,.95,Va.wb.z)];Nf.push(sd)}Va.Ai=Va.Ic;for(var rg=q(Va.dc),Fe=rg.next();!Fe.done;Fe=rg.next())Va.Ai+=Vf(Fe.value);for(var td=0;td<Va.dc.length;td++){var cc=new Rf;cc.ig=Va;cc.Xe=ff(Va.dc[td].Ec.aa);cc.bc=Va.dc[td];cc.Ic=Vf(cc.bc);cc.hh=[1,1,1];Nf.push(cc);var Ic=new Rf;Ic.ig=Va;Ic.Xe=Va;Ic.bc=Va.dc[td];Ic.Ic=Wf(Ic.bc);
Ic.hh=[.625,.625,.625];Nf.push(Ic)}}Qf();Sg=bg+2;for(var Jc=q(u.ii.elements),Ge=Jc.next();!Ge.done;Ge=Jc.next())Ti(Ge.value);for(var ud=q(Hi.elements),Yc=ud.next();!Yc.done;Yc=ud.next()){var Ba=Yc.value,vd=ff(Ba.aa);if(vd&&!(vd.ob>Sg))if(Ba.Oc)Ba.Oc.Ja[1]=vd.se;else{var nc=Ba;nc.xb.cmp=Hd;for(var wd=q(nc.td),Zc=wd.next();!Zc.done;Zc=wd.next())for(var Vd=Zc.value,Wd=0;Wd<Vd.length;Wd++)Vd[Wd]=kb(nc.xb,Vd[Wd]);for(var Xd=0;Xd<nc.xb.length;Xd++)nc.xb[Xd].index=Xd;var dc=q(nc.td);for(Zc=dc.next();!Zc.done;Zc=
dc.next())for(var $c=Zc.value,Yd=0;Yd<$c.length;Yd++)$c[Yd]=$c[Yd].index;delete nc.xb.cmp;Ba.compile();delete Ba.td;Ba.Oc=new ig(Ba,"worldMesh");isNaN(Ba.facing)||(Ba.Oc.facing=Ba.facing);Ba.Oc.ea=vd.ea;Ba.Oc.Jg=!0;Ba.Oc.Ja=["portalLightIndex",vd.se,!0];Infinity!=Ba.y?(Ba.Oc.y=Ba.y,X(Ba.Oc,u.we)):X(Ba.Oc,u.Bj);delete Ba.y;0==Ba.facing&&(Ba.C=u.v.la.get("physicalThreshold"))}}ag=-1}return!1}
function Ui(a,b){var c=new ub(Md);a=q(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var e=new ub(kd);e.x=d.f;e.y=d.c;e=c.Ka(e);e.add(d);b&&(d=jd(d),e=new ub(kd),e.x=d.f,e.y=d.c,e=c.Ka(e),e.add(d))}return c}
function Vi(a){var b=[];b.bound=new dd;var c=0,d=a.elements[c],e=d.elements.pop();d.elements.length||a.elements.splice(c,1);if(!e)return null;for(;;){b.push(e);b.bound.Ka(e.B,e.u);if(e.B==b[0].f&&e.u==b[0].c)return b;c=a.contains(new S(e.B,e.u));if(0>c)return null;d=a.elements[c];e=xb(d,id(e))-1;0>e&&(e+=d.elements.length);e=d.elements.splice(e,1)[0];d.elements.length||a.elements.splice(c,1)}}
function Wi(a){for(var b=[],c=a[a.length-1],d=0;d<a.length;d++){var e=a[d];b.push(Sc(c,e));c=e}a.Bh=b;a.wf=[];a.Bi=0;b=q(a.Bh);for(c=b.next();!c.done;c=b.next())c=c.value,0>c?(a.Bi-=c,a.wf.push(-c)):a.wf.push(0)}
function Xi(a,b){var c=null;b=q(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.m<=d.bound.m||a.bound.h<=d.bound.h||a.bound.A>=d.bound.A||a.bound.o>=d.bound.o)){if(c){if(d.bound.m<=c.bound.m)continue;if(d.bound.h<=c.bound.h)continue;if(d.bound.A>=c.bound.A)continue;if(d.bound.o>=c.bound.o)continue}0>=ad(a[0].B,a[0].u,d)||(c=d)}c&&c.eb.push(a)}
function Yi(a){if(0==a.eb.length)return a;var b=[a].concat(a.eb),c={};c.Sb=Number.NEGATIVE_INFINITY;for(var d=0;d<b.length;d++)for(var e=b[d],h=d+1;h<b.length;h++)for(var g=b[h],k=0;k<e.length;k++)for(var l=(k+1)%e.length,m=0;m<g.length;m++)c=Zi(e,k,l,g,m,(m+1)%g.length,c,b);if(0>c.Sb)return console.log("could not solve holes"),a.eb=[],a;e=c.hd[c.ga].Sa(c.hd[c.ga].f,c.hd[c.ga].c,c.xd[c.d].f,c.xd[c.d].c);d=e.Sa(e.B,e.u,e.f,e.c);e.Y=d;d.Y=e;b=[];for(h=0;h<c.ga;h++)b.push(c.hd[h]);b.push(e);e=c.d;for(h=
0;h<c.xd.length;h++)b.push(c.xd[e]),++e==c.xd.length&&(e=0);b.push(d);for(d=c.ga;d<c.hd.length;d++)b.push(c.hd[d]);if(c.hd==a)return a.eb.splice(a.eb.indexOf(c.xd),1),b.eb=a.eb,Wi(b),Yi(b);a.eb.splice(a.eb.indexOf(c.hd),1,b);a.eb.splice(a.eb.indexOf(c.xd),1);Wi(b);return Yi(a)}
function Zi(a,b,c,d,e,h,g,k){function l(p,t){function z(D,F,K){if(F==D.f&&K==D.c||F==D.B&&K==D.u)return!1;F=D.Re(F,K);return 0>=F.x||F.x>=D.length||-256>F.y||256<F.y?!1:!0}var w=R(t,p.f,p.c),y=R(t,p.B,p.u),B=R(p,t.f,t.c),A=R(p,t.B,t.u);if(-256>B&&256<A&&(-256>w&&256<y||256<w&&-256>y)||256<B&&-256>A&&(-256>w&&256<y||256<w&&-256>y)||z(p,t.f,t.c)||z(p,t.B,t.u)||z(t,p.f,p.c)||z(t,p.B,p.u))return!0}var m=a[c],n=d[h];m=new O(m.f,m.c,n.f,n.c);if(0==a.wf[c]){if(0>=R(a[b],m.B,m.u)||0>=R(a[c],m.B,m.u))return g}else if(0>=
R(a[b],m.B,m.u)&&0>=R(a[c],m.B,m.u))return g;if(0==d.wf[h]){if(0>=R(d[e],m.f,m.c)||0>=R(d[h],m.f,m.c))return g}else if(0>=R(d[e],m.f,m.c)&&0>=R(d[h],m.f,m.c))return g;if(k)for(k=q(k),n=k.next();!n.done;n=k.next()){var r=q(n.value);for(n=r.next();!n.done;n=r.next())if(l(m,n.value))return g}else for(k=q(a),n=k.next();!n.done;n=k.next())if(l(m,n.value))return g;k={};k.hd=a;k.Ea=b;k.ga=c;k.xd=d;k.Qf=e;k.d=h;k.S=m;$i(k);return k.Sb>g.Sb?k:g}
function $i(a){a.Sb=4095-a.S.length*Fi;var b=Sc(a.hd[a.Ea],a.S),c=b-a.hd.Bh[a.ga],d=Sc(a.S,a.xd[a.d]),e=d-a.xd.Bh[a.d];a.Sb+=.5/Math.PI*(a.hd.wf[a.ga]-(0>b?-b:0)-(0>c?-c:0)+(a.xd.wf[a.d]-(0>d?-d:0)-(0>e?-e:0)))*1048575}
function aj(a){if(3>a.length)return[];Wi(a);if(0>=a.Bi)return[a];for(var b={Sb:Number.NEGATIVE_INFINITY},c=a.length-1,d=0;d<a.length;d++){for(var e=d+1,h=e+1;h<a.length;h++)b=Zi(a,c,d,a,e,h,b),e=h;c=d}if(0>b.Sb)return console.log("could not convex path"),[a];h=new bj(a[b.ga].f,a[b.ga].c,a[b.d].f,a[b.d].c);c=new bj(a[b.d].f,a[b.d].c,a[b.ga].f,a[b.ga].c);h.Y=c;c.Y=h;d=[];e=[];for(var g=0;g<b.ga;g++)d.push(a[g]);d.push(h);for(h=b.d;h<a.length;h++)d.push(a[h]);for(h=b.ga;h<b.d;h++)e.push(a[h]);e.push(c);
return aj(d).concat(aj(e))}function gj(a){this.ca=null;this.h=Number.POSITIVE_INFINITY;this.o=Number.NEGATIVE_INFINITY;this.ta=this.floor=null;this.Z=a}gj.prototype.ff=function(a,b){if(this.o<=a.h||this.h>=a.o)b.push(this);else{if(this.h<a.h){var c=new gj(this.Z);c.h=this.h;c.o=a.h;c.floor=this.floor;c.ta=a.ta;b.push(c)}this.o>a.o&&(c=new gj(this.Z),c.h=a.o,c.o=this.o,c.floor=a.floor,c.ta=this.ta,b.push(c))}};function Ig(a,b,c){this.T=a;this.h=b;this.o=c;this.flags=0}
function Jg(a,b){this.ca=a;this.y=b;this.flags=0}function Kg(a,b){this.ca=a;this.y=b;this.flags=0}Jg.prototype.kf=function(){if(this.Y)return this.Y;this.Y=new Kg(this.ca,this.y);this.Y.flags=this.flags;return this.Y};Kg.prototype.kf=function(){if(this.Y)return this.Y;this.Y=new Jg(this.ca,this.y);this.Y.flags=this.flags;return this.Y};Ig.prototype.kf=function(){if(this.Y)return this.Y;this.Y=new Ig(jd(this.T),this.h,this.o);this.Y.flags=this.flags;return this.Y};function mf(a){this.index=a;this.Cg=this.Aa=-2147483648;this.Lj=new zb(this);this.Hc=new ub(Lb);this.gh=new yb}function Li(a,b){a=of(a.index);switch(b){case 0:if(0==a.x)break;return gf.get(pf(a.x-1,a.y));case 1:if(0==a.y)break;return gf.get(pf(a.x,a.y-1));case 2:if(8191==a.x)break;return gf.get(pf(a.x+1,a.y));case 3:if(8191!=a.y)return gf.get(pf(a.x,a.y+1))}return null}
function Mi(a){function b(g,k){return g.Z.index<k.Z.index?-1:g.Z.index>k.Z.index?1:0}a.Dj=[];a.ca=[];for(var c=q(a.Hc.elements),d=c.next();!d.done;d=c.next()){d=q(d.value.ca);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=e.X();jd(h);e.xg&&(h.Kb=[e]);h.wd=[a.ca];a.ca.push(h)}}si(a.ca.slice(),!0);a=q(a.ca);for(e=a.next();!e.done;e=a.next())c=e.value,c.Kb&&Tb(c.Kb,b),c.Y.Kb&&Tb(c.Y.Kb,b)}
mf.prototype.evaluate=function(){this.ji=[];this.ki=[];for(var a=Ui(this.ca,!0),b=[],c=[];a.elements.length;){var d=Vi(a);d&&(Vc(d)?c.push(d):(d.eb=[],b.push(d)))}a=q(c);for(c=a.next();!c.done;c=a.next())Xi(c.value,b);a=[];b=q(b);for(c=b.next();!c.done;c=b.next())if(d=c.value,0==d.eb.length)a.push(d);else{Wi(d);var e=q(d.eb);for(c=e.next();!c.done;c=e.next())Wi(c.value);a.push(Yi(d))}b=[];a=q(a);for(c=a.next();!c.done;c=a.next())b=b.concat(aj(c.value));a=q(b);for(c=a.next();!c.done;c=a.next())this.Dj.push(new hj(c.value,
this))};
function Ni(a){function b(z,w){return z.Yc<w.Yc?-1:z.Yc>w.Yc?1:z.Z.aa<w.Z.aa?-1:z.Z.aa>w.Z.aa?1:ij(z.xa,w.xa)}function c(z,w){var y=zc(1/60);var B=-1;for(var A=1;A<z.length;A++){var D=Math.abs(Sc(z[A-1].T,z[A].T));D<y&&(y=D,B=A)}if(0>B)w.push.apply(w,da(z));else{y=z[B-1];A=z[B];D=y.T.Sa(y.T.f,y.T.c,A.T.B,A.T.u);var F=jd(D);y.Jc&&(0>y.Jc.Yc?y.Jc.splice(y.Jc.indexOf(y.T),2,D):y.Jc.splice(y.Jc.indexOf(A.T.Y),2,F));y.Dc&&(0<y.Dc.Yc?y.Dc.splice(y.Dc.indexOf(y.T),2,D):y.Dc.splice(y.Dc.indexOf(A.T.Y),2,
F));y.T=D;z.splice(B,1);c(z,w)}}function d(z){var w=zc(1/60);var y=-1;for(var B=1;B<z.length;B++){var A=Math.abs(Sc(z[B-1],z[B]));A<w&&(w=A,y=B)}if(!(0>y)){w=z[y-1];B=z[y];A=w.Sa(w.f,w.c,B.B,B.u);var D=jd(A);A.Ac=w.Ac;w.Ac.splice(w.Ac.indexOf(w),2,A);B.Y&&(D.Ac=B.Y.Ac,B.Y.Ac.splice(B.Y.Ac.indexOf(B.Y),2,D));z.splice(y-1,2,A);d(z)}}for(var e=0,h=new ub(function(z,w){return z.y<w.y?-1:z.y>w.y?1:0}),g=q(a.ji),k=g.next();!k.done;k=g.next()){var l=k.value,m=new ub(b);m.y=l.y;m=h.Ka(m);k=[];k.Yc=l.Yc;k.Z=
l.Z;k.xa=l.xa;k=m.Ka(k);k.push(l)}g=q(h.elements);for(l=g.next();!l.done;l=g.next()){l=l.value;m=q(l.elements);for(k=m.next();!k.done;k=m.next()){var n=k.value,r=new ub(Rc),p=q(n);for(k=p.next();!k.done;k=p.next()){var t=q(k.value);for(k=t.next();!k.done;k=t.next())k=k.value,r.remove(id(k))||r.push(k)}n.length=0;for(r=Ui(r.elements);r.elements.length;){p=Vi(r);if(!p)break;p.y=l.y;p.Yc=n.Yc;p.Z=n.Z;p.xa=n.xa;p.index=e++;t=q(p);for(k=t.next();!k.done;k=t.next())k.value.Ac=p;n.push(p)}}l.Nh=new ub(Rc);
m=q(l.elements);for(k=m.next();!k.done;k=m.next())for(n=q(k.value),k=n.next();!k.done;k=n.next())for(r=q(k.value),k=r.next();!k.done;k=r.next())k=k.value,(p=l.Nh.remove(id(k)))?(k.Y=p,p.Y=k):l.Nh.push(k)}e=q(a.ki);for(g=e.next();!g.done;g=e.next())g=g.value,l=function(z,w){w=h.get({y:w});if(!w)return null;w=w.Nh.remove(z);if(!w)return null;w.Ac.splice(w.Ac.indexOf(w),1,z);return w.Ac},m=g.T,k=jd(m),g.Dc=l(m,g.h)||l(k,g.h),g.Jc=l(m,g.o)||l(k,g.o);g=function(z){var w=[],y=new ub(function(F,K){F=F[0];
K=K[0];if(F.h<K.h)return-1;if(F.h>K.h)return 1;if(F.o<K.o)return-1;if(F.o>K.o)return 1;if(F.Dc)if(K.Dc){if(F.Dc.index<K.Dc.index)return-1;if(F.Dc.index>K.Dc.index)return 1}else return 1;else if(K.Dc)return-1;if(F.Jc)if(K.Jc){if(F.Jc.index<K.Jc.index)return-1;if(F.Jc.index>K.Jc.index)return 1}else return 1;else if(K.Jc)return-1;if(F.length<K.length)return-1;if(F.length>K.length)return 1;for(var V=0;V<F.length;V++){var Q=F[V],ma=K[V];if(Q.h<ma.h)return-1;if(Q.h>ma.h)return 1;if(Q.o<ma.o)return-1;if(Q.o>
ma.o)return 1;Q=ij(Q.xa,ma.xa);if(0!=Q)return Q}return 0});z=q(z);for(var B=z.next();!B.done;B=z.next()){B=B.value;var A=[B],D=y.Ka(A);D!=A&&D.push(B)}z={};y=q(y.elements);for(B=y.next();!B.done;z={ge:z.ge},B=y.next())for(z.ge=B.value,B={};z.ge.length;)B.If=function(F,K){return function(V,Q,ma){for(var aa=0;aa<F.ge.length;aa++){var oa=F.ge[aa];if(oa.T.f==ma.B&&oa.T.c==ma.u)return F.ge.splice(aa,1),V.push(oa),oa.T.Uc=V,oa.T.Y.Uc=V,K.If(V,Q,oa.T);if(oa.T.B==Q.f&&oa.T.u==Q.c)return F.ge.splice(aa,1),
V.unshift(oa),oa.T.Uc=V,oa.T.Y.Uc=V,K.If(V,oa.T,ma)}return V}}(z,B),A=z.ge.shift(),D=[A],A.T.Uc=D,A.T.Y.Uc=D,w.push(B.If(D,A.T,A.T)),B={If:B.If};return w}(a.ki);e=function(){for(var z=[],w=q(h.elements),y=w.next();!y.done;y=w.next()){y=q(y.value.elements);for(var B=y.next();!B.done;B=y.next()){B=q(B.value);for(var A=B.next();!A.done;A=B.next()){A=A.value;for(var D=function(aa,oa){return aa.Uc||oa.Uc?!1:aa.Y?oa.Y?aa.Y.Ac==oa.Y.Ac:!1:oa.Y?!1:!0},F=0,K=A[A.length-1],V=A[0];F<A.length&&(V=A[F],D(K,V));F++,
K=V);if(F==A.length){D=[];K=q(A);for(A=K.next();!A.done;A=K.next())A=A.value,A.Uc=D,A.Y&&(A.Y.Uc=D),D.push(A);z.push(D)}else{A.unshift.apply(A,da(A.splice(F)));F=[];var Q=null;K=A[0];F.push(Q=[]);Q.push(K);for(var ma=1;ma<A.length;ma++,K=V)V=A[ma],D(K,V)||F.push(Q=[]),Q.push(V);D=q(F);for(A=D.next();!A.done;A=D.next())if(K=A.value,!K[0].Uc){V=q(K);for(A=V.next();!A.done;A=V.next())A=A.value,A.Uc=K,A.Y&&(A.Y.Uc=K);z.push(K)}}}}}return z}();a.uj=[];l=q(g);for(g=l.next();!g.done;g=l.next())c(g.value,
a.uj);a.tj=[];e=q(e);for(g=e.next();!g.done;g=e.next())d(g.value);e=q(h.elements);for(l=e.next();!l.done;l=e.next())for(g=q(l.value.elements),k=g.next();!k.done;k=g.next())for(l=q(k.value),k=l.next();!k.done;k=l.next())m=k.value,m.wj=aj(m),a.tj.push(m)}
function Oi(a){function b(r,p,t){var z=[],w=new Jg(p,r.y);w.aa=r.Z.aa;h.push(w);if((w=ff(t.aa))&&!(w.ob<=Sg)){for(w=0;w<p.length;w++){var y=new Gd(p[w].c,r.y,p[w].f);Jd(y,r.xa.color);Kd(y,y.z/4E5,y.x/4E5);y.pc=32767;z.push(y)}t.td.push(z);fg.push(z);e(ff(r.Z.aa),z,r.xa)}}function c(r,p,t){var z=[],w=new Kg(p,r.y);w.aa=r.Z.aa;h.push(w);if((w=ff(t.aa))&&!(w.ob<=Sg)){for(w=p.length-1;0<=w;w--){var y=new Gd(p[w].u,r.y,p[w].B);Jd(y,r.xa.color);Kd(y,-y.z/4E5,y.x/4E5);y.pc=-32767;z.push(y)}t.td.push(z);
fg.push(z);e(ff(r.Z.aa),z,r.xa)}}function d(r,p,t){var z=ci(Infinity,r.Z.aa,p.xa.ma,p.xa.da),w=ff(z.aa);if(w&&!(w.ob<=Sg)){w=[];var y=r.T.f/4E5+r.T.c/4E5,B=r.T.B/4E5+r.T.u/4E5;var A=new Gd(r.T.u,p.h,r.T.B);Jd(A,p.xa.color);Kd(A,B,-A.y/4E5);A.yb=t.x;A.Xb=t.y;w.push(A);A=new Gd(r.T.c,p.h,r.T.f);Jd(A,p.xa.color);Kd(A,y,-A.y/4E5);A.yb=t.x;A.Xb=t.y;w.push(A);A=new Gd(r.T.c,p.o,r.T.f);Jd(A,p.xa.color);Kd(A,y,-A.y/4E5);A.yb=t.x;A.Xb=t.y;w.push(A);A=new Gd(r.T.u,p.o,r.T.B);Jd(A,p.xa.color);Kd(A,B,-A.y/4E5);
A.yb=t.x;A.Xb=t.y;w.push(A);z.td.push(w);fg.push(w);e(ff(r.Z.aa),w,p.xa)}}function e(r,p,t){var z=0,w=p[0],y=Nd(p[1],w,new J);y.scale(1E-5);for(var B=2;B<p.length;B++){var A=Nd(p[B],w,new J);A.scale(1E-5);z+=Lc(y,A,new J).length();y=A}p=.5*z;z=t.ma;t=t.color;w=(z.nd.r-z.nd.Oa)/255;t=new T(t.r*w+z.nd.Oa,t.Oa*w+z.nd.Oa,t.ga*w+z.nd.Oa,z.nd.Ea);r.wb.x+=t.r*p;r.wb.y+=t.Oa*p;r.wb.z+=t.ga*p;r.Ic+=p}a.na=[];for(var h=a.na,g=q(a.tj),k=g.next();!k.done;k=g.next())if(k=k.value,0<k.Yc){for(var l=ci(k.y,k.Z.aa,
k.xa.ma,k.xa.da),m=q(k.wj),n=m.next();!n.done;n=m.next())b(k,n.value,l);(k=ff(k.Z.aa))&&k.cells.push(a)}else for(l=ci(Infinity,k.Z.aa,k.xa.ma,k.xa.da),m=q(k.wj),n=m.next();!n.done;n=m.next())c(k,n.value,l);a=q(a.uj);for(k=a.next();!k.done;k=a.next())for(g=k.value,k=new Ig(g.T,g.h,g.o),k.aa=g[0].Z.aa,h.push(k),k=new S(g.T.c-g.T.u,g.T.B-g.T.f),k.ka(32767),n=q(g),l=n.next();!l.done;l=n.next())d(g,l.value,k)}
function hj(a,b){this.index=jj++;this.ca=a;this.Ee=b;a=new ub(kj);for(var c=new S(0,0),d=1/this.ca.length,e=q(this.ca),h=e.next();!h.done;h=e.next())h=h.value,h.Cf=this,c.x+=h.B*d,c.y+=h.u*d;b=q(b.Hc.elements);for(d=b.next();!d.done;d=b.next())d=d.value,0>=ad(c.x,c.y,d.ca)||a.add(d);this.Hc=a.elements;lj(this);this.qj=[];a=Number.NEGATIVE_INFINITY;c=q(this.Zd);for(b=c.next();!b.done;b=c.next())if(b=b.value,b.Z.add){if(b.h>a){var g=new gj(b.Z);g.h=b.h;g.o=b.o;g.floor=b.floor;g.ta=b.ta;g.ca=this.ca;
this.qj.push(g)}else g.o=b.o,g.ta=b.ta;a=g.o}}var jj=-2147483648;
function lj(a){var b=new gj;b.h=-2147483648;b.o=2147483647;b.Z={};a.Zd=[b];b=q(a.Hc);for(var c=b.next();!c.done;c=b.next()){c=c.value;var d=new gj(c.Z);d.h=c.Z.h;d.o=c.Z.o;d.floor=c.Z.floor;d.ta=c.Z.ta;c=[d];d=q(a.Zd);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=[];c=q(c);for(var g=c.next();!g.done;g=c.next())g=g.value,g.Z.nf(e.Z)?h.push(g):g.ff(e,h);c=h}d=q(c);for(g=d.next();!g.done;g=d.next()){h=g.value;g=[];var k=q(a.Zd);for(e=k.next();!e.done;e=k.next())e.value.ff(h,g);a.Zd=g}a.Zd.push.apply(a.Zd,
da(c))}Tb(a.Zd,function(l,m){return l.h<m.h?-1:l.h>m.h?1:0})}
hj.prototype.evaluate=function(){for(var a=q(this.qj),b=a.next();!b.done;b=a.next()){b=b.value;if(b.floor){for(var c=[],d=q(this.ca),e=d.next();!e.done;e=d.next())e=e.value,e=e.X(),c.push(e);c.y=b.h;c.xa=b.floor;c.Yc=1;c.Z=b.Z;this.Ee.ji.push(c)}if(b.ta){c=[];d=q(this.ca);for(e=d.next();!e.done;e=d.next())e=e.value,e=e.X(),c.push(e);c.y=b.o;c.xa=b.ta;c.Yc=-1;c.Z=b.Z;this.Ee.ji.push(c)}}a=[];b=[];e=q(this.Zd);for(d=e.next();!d.done;d=e.next())c=d.value,(c.Z.add?a:b).push(c);b=q(this.ca);for(e=b.next();!e.done;e=
b.next()){e=e.value;var h=function(p,t){var z=[];p=q(p);for(var w=p.next();!w.done;w=p.next()){var y=w.value,B=q(t);for(w=B.next();!w.done;w=B.next()){var A=w.value,D=[];y.Ka(A.h,A.o,D);var F=q(D);for(w=F.next();!w.done;w=F.next())w.value.Z=A.Z;z.push.apply(z,da(D))}}return z},g=function(p,t){t=q(t);for(var z=t.next();!z.done;z=t.next()){z=z.value;var w=[];p=q(p);for(var y=p.next();!y.done;y=p.next())y.value.ff(z.h,z.o,w);p=w}return p};c=function(p){for(var t=p[0],z=1;z<p.length;z++)if(ij(t.xa,p[z].xa))t=
p[z];else{var w=t.X(t.h,p[z].o);p.splice(--z,2,w)}};d=function(p,t,z){var w=[];if(!p.Kb)return w;t=q(t);for(var y=t.next();!y.done;y=t.next()){y=y.value;var B=p.Kb;var A=y,D=kj,F=Sb(B,A,D);(B=F==B.length||0!=D.call(null,A,B[F])?null:B[F])&&B.Z.add==z&&w.push(new dh(y.Z.h,y.Z.o,B))}return w};var k=d(e,this.Hc,!0),l=[],m=[],n=[];if(e.Y.Cf){l=d(e.Y,e.Y.Cf.Hc,!1);var r=q(e.Y.Cf.Zd);for(d=r.next();!d.done;d=r.next())d=d.value,(d.Z.add?m:n).push(d)}k=g(k,m);l=g(l,m);k=h(k,a);l=h(l,a);h=function(p){Tb(p,
function(D,F){return D.Ze.Z.index-F.Ze.Z.index});var t=[];p=q(p);for(var z=p.next();!z.done;z=p.next()){z=[z.value];for(var w=q(t),y=w.next();!y.done;y=w.next()){y=y.value;var B=[];z=q(z);for(var A=z.next();!A.done;A=z.next())A=A.value,A.Ze.Z.nf(y.Ze.Z)?B.push(A):A.ff(y.h,y.o,B);z=B}w=q(z);for(A=w.next();!A.done;A=w.next()){B=A.value;A=[];t=q(t);for(y=t.next();!y.done;y=t.next())y.value.ff(B.h,B.o,A);t=A}t.push.apply(t,da(z))}return t}(l.concat(k));if(h.length){d=[];g=q(h);for(h=g.next();!h.done;h=
g.next())if(k=h.value,k.Ze.xg){l=[];m=q(k.Ze.xg);for(h=m.next();!h.done;h=m.next())h.value.Ka(k.h,k.o,l);m=q(l);for(h=m.next();!h.done;h=m.next())h.value.Z=k.Z;d.push.apply(d,da(l))}Tb(d,function(p,t){return p.h<t.h?-1:p.h>t.h?1:0});g=void 0;k=Number.NEGATIVE_INFINITY;d=q(d);for(h=d.next();!h.done;h=d.next())h=h.value,h.h>k?(g&&c(g),g=[h],g.T=e.X(),g.Z=h.Z,g.h=h.h,g.o=h.o,this.Ee.ki.push(g)):(g.push(h),g.o=h.o),k=h.o;g&&c(g)}}};
function bj(a,b,c,d){O.call(this,a,b,c,d);this.index=bj.index++;this.Y=null}bj.index=-2147483648;bj.prototype=Object.create(O.prototype);bj.prototype.constructor=bj;bj.prototype.Sa=function(a,b,c,d){return new bj(a,b,c,d)};
bj.prototype.replace=function(a){O.prototype.replace.call(this,a);if(this.Cf)for(var b=0;b<a.length;b++)a[b].Cf=this.Cf;if(this.Kb)for(a=q(a),b=a.next();!b.done;b=a.next())if(b=b.value,b.Kb)for(var c=q(this.Kb),d=c.next();!d.done;d=c.next())d=d.value,0<=b.Kb.indexOf(d)||b.Kb.push(d);else b.Kb=this.Kb.slice()};function dh(a,b,c){this.xa=new mj;this.h=a;this.o=b;this.Ze=c;this.Z=null}dh.prototype.X=function(a,b){a=new dh(a,b,this.Ze);a.xa=this.xa;a.Z=this.Z;return a};
dh.prototype.ff=function(a,b,c){this.o<=a||this.h>=b?c.push(this):(this.h<a&&c.push(this.X(this.h,a)),this.o>b&&c.push(this.X(b,this.o)))};dh.prototype.Ka=function(a,b,c){this.o<=a||this.h>=b||(this.o<=b&&this.h>=a?c.push(this):(b=b<this.o?b:this.o,a=a>this.h?a:this.h,c.push(this.X(a,b))))};function mj(){this.ma=u.v.ba.get("concr01");this.da=$g;this.color=Cd;this.y=this.x=0}
function ij(a,b){if(a.ma.name<b.ma.name)return-1;if(a.ma.name>b.ma.name)return 1;var c=Ve(a.da,b.da);return 0!=c?c:a.color.r<b.color.r?-1:a.color.r>b.color.r?1:a.color.Oa<b.color.Oa?-1:a.color.Oa>b.color.Oa?1:a.color.ga<b.color.ga?-1:a.color.ga>b.color.ga?1:a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0};function ni(){this.index=nj++;this.add=!0;this.ca=null;this.h=Number.POSITIVE_INFINITY;this.o=Number.NEGATIVE_INFINITY;this.floor=new mj;this.ta=new mj;this.color=Cd;this.Eb=-1;this.Hc=[]}var nj=-2147483648,eh=new T(192,192,192,255),gh=new T(64,64,64,255),hh=new T(160,160,160,255),fh=new T(160,160,160,255);
function oi(a,b){a.floor&&(a.floor.color=eh);a.ta&&(a.ta.color=fh);a.ca=[];for(var c=[],d=0;d<b.length;d++)c.push(Ei.kb(b[d].x,b[d].y));b=c;var e=b[b.length-1];for(c=0;c<b.length;c++)d=b[c],e=new bj(e.x,e.y,d.x,d.y),e.Z=a,e.xg=a.gf(),a.ca.push(e),e=d}ni.prototype.gf=function(){var a=new dh(this.h,this.o);a.xa.color=this.color;return[a]};
ni.prototype.stroke=function(){if(Vc(this.ca)){console.trace();debugger}if(this.o<=this.h){console.trace();debugger}for(var a=[],b=q(this.ca),c=b.next();!c.done;c=b.next()){c=c.value;var d=c.X();d.Kb=[c.xg];a.push(d);jd(d);delete d.Y.Kb}b=new dd;c=q(a);for(d=c.next();!d.done;d=c.next())d=d.value,b.Ka(d.B,d.u);d=b.m&-524288;c=b.h&-524288;d+=524288;for(c+=524288;d<b.A;){var e=new bj(d,b.h,d,b.o);jd(e);a.push(e);d+=524288}for(;c<b.o;)d=new bj(b.m,c,b.A,c),jd(d),a.push(d),c+=524288;a=si(a.slice(),!0);
a=Ui(a);for(b={};a.elements.length;){a:if(c=function(g){return function(){for(var k=q(g.Dd),l=k.next();!l.done;l=k.next())if(l.value.Kb)return!0;return!1}}(b),b.Dd=Vi(a),b.Dd&&!Vc(b.Dd)){if(!c()&&(c=cd(b.Dd),0>=ad(c.x,c.y,this.ca)))break a;d=new oj(this);e=q(b.Dd);for(c=e.next();!c.done;c=e.next()){c=c.value;var h=c.X();jd(h);h.Z=this;c.Kb&&(h.xg=c.Kb[0]);d.ca.push(h)}d.stroke(lf(pf(b.Dd.bound.m+2147483648>>>19,b.Dd.bound.h+2147483648>>>19)))}b={Dd:b.Dd}}};
function ai(a){for(var b=q(a.Hc),c=b.next();!c.done;c=b.next())c.value.remove();a.Hc.length=0}ni.prototype.X=function(){var a=new ni;a.add=this.add;a.h=this.h;a.o=this.o;a.floor=this.floor;a.ta=this.ta;a.color=this.color;a.Eb=this.Eb;return a};ni.prototype.nf=function(){return!0};function oj(a){this.index=pj++;this.Z=a;this.ca=[];this.Ee=null}var pj=-2147483648;function kj(a,b){return a.Z.index<b.Z.index?-1:a.Z.index>b.Z.index?1:0}
oj.prototype.stroke=function(a){if(Vc(this.ca)){console.trace();debugger}this.Z.Hc.push(this);a=this.Ee=a;a.Hc.add(this);kb(Gi,a)};oj.prototype.remove=function(){var a=this.Ee;a.Hc.remove(this);if(a.Hc.elements.length)kb(Gi,a);else{for(var b=a.gh.first();null!=b.item;){var c=b.next;Bb(b);Bb(b.Ec);b=c}Bb(a.Lj);gf.remove(a);mb(Gi,a)}};var Pi={},Qi,qj,Ri=-1;Pi.Me=[];
function Si(){function a(C,H){if(C.sa.$<H.sa.$)return-1;if(C.sa.$>H.sa.$)return 1;if(C.sa.V<H.sa.V)return-1;if(C.sa.V>H.sa.V)return 1;C=R(H.sa,C.sa.f,C.sa.c);return 0>C?-1:0<C?1:0}function b(C,H){C=C[0];H=H[0];return C.y<H.y?-1:C.y>H.y?1:0}function c(C){if(!(2>C.length)){var H=2.197265625E7;var I=-1;for(var G,L,M=1;M<C.length;M++)G=C[M-1],L=C[M],G=new O(G.f,G.c,L.B,L.u),L=(G.length>>3)*(R(G,L.f,L.c)>>3),L>=H||-2E3>=L||(H=L,I=M);0>I||(G=C[I-1],L=C[I],H=L.Sa(G.f,G.c,L.B,L.u),M=L.length/(G.length+L.length),
H.weight=G.weight*(1-M)+L.weight*M,C.splice(I-1,2,H),c(C))}}function d(C){if(!(2>C.length)){var H=2.197265625E7;var I=-1;for(var G=C[C.length-1],L,M=0;M<C.length;M++,G=L)L=C[M],G=new O(G.f,G.c,L.B,L.u),G=(G.length>>3)*(R(G,L.f,L.c)>>3),G>=H||-2E3>=G||(H=G,I=M);0>I||(C.unshift.apply(C,da(C.splice(I))),G=C.pop(),L=C.shift(),H=L.Sa(G.f,G.c,L.B,L.u),I=L.length/(G.length+L.length),H.weight=G.weight*(1-I)+L.weight*I,C.unshift(H),d(C))}}function e(C){function H(N,P){var Ia=gd(N),fa=gd(P),Ra=-Sc(N,P)+Math.PI;
if(Ra<zc(165)){var Z=new S(N.B,N.u);Z.round();Z.fa=N.weight;Z.va=255;G.push(Z);var Sa=new S(N.B-Ia.y,N.u+Ia.x);Sa.round();Sa.fa=Z.fa;Sa.va=0;L.push(Sa);I(N);var Ca=new S(P.f,P.c);Ca.round();Ca.fa=P.weight;Ca.va=255;G.push(Ca);var oc=new S(P.f-fa.y,P.c+fa.x);oc.round();oc.fa=Ca.fa;oc.va=0;L.push(oc);Ra<=zc(90)||(N=new S(N.B+Ia.x,N.u+Ia.y),N.round(),N.fa=Z.fa,N.va=0,M.push([Sa,Z,N]),P=new S(P.f-fa.x,P.c-fa.y),P.round(),P.fa=Ca.fa,P.va=0,M.push([P,Ca,oc]))}else Ca=new S(P.f,P.c),Ca.fa=(N.weight+P.weight)*
(1-Ra/Math.Kf),Ca.va=255,G.push(Ca),Ra<=zc(195)?(fa=new S(-Ia.y-fa.y,Ia.x+fa.x),fa.scale(5E9/fa.pf()),fa.x+=P.f,fa.y+=P.c,fa.round(),fa.fa=Ca.fa,fa.va=0,L.push(fa),I(N)):(oc=new S(N.B-Ia.y,N.u+Ia.x),oc.round(),oc.fa=Ca.fa,oc.va=0,L.push(oc),I(N),P=new S(P.f-fa.y,P.c+fa.x),P.round(),P.fa=Ca.fa,P.va=0,L.push(P),M.push([oc,Ca,P]))}function I(N){if(ca)ca=!1;else{var P=L[L.length-2],Ia=G[G.length-2],fa=G[G.length-1],Ra=L[L.length-1];if(Ia.fa!=N.weight&&fa.fa!=N.weight)if(1E5<N.length){var Z=N.kb(5E4,0);
Z.round();Z.fa=N.weight;Z.va=255;var Sa=N.kb(N.length-5E4,0);Sa.round();Sa.fa=N.weight;Sa.va=255;M.push([P,Ia,Z]);M.push([P,Z,Sa,Ra]);M.push([Sa,fa,Ra])}else if(Z=new S(N.f+N.B>>1,N.c+N.u>>1),Z.round(),1E5>N.length){var Ca=5E4/N.length-.5;Sa=N.length/1E5;Z.fa=.5*(Ia.fa+fa.fa)*(1-Sa)+N.weight*Sa;Z.va=255;Ca=new S(Z.x+(N.c-N.u)*Ca,Z.y+(N.B-N.f)*Ca);Ca.fa=Z.fa;Ca.va=N.weight*Sa*255;Ca.round();M.push([P,Ia,Z,Ca]);M.push([P,Ca,Ra]);M.push([Ca,Z,fa,Ra])}else Z.fa=N.weight,Z.va=255,M.push([P,Ia,Z]),M.push([P,
Z,Ra]),M.push([Z,fa,Ra]);else Ia.fa!=N.weight?5E4<N.length?(Z=N.kb(5E4,0),Z.round(),Z.fa=N.weight,Z.va=255,M.push([P,Ia,Z]),M.push([P,Z,fa,Ra])):M.push([P,Ia,fa,Ra]):fa.fa!=N.weight?5E4<N.length?(Z=N.kb(N.length-5E4,0),Z.round(),Z.fa=N.weight,Z.va=255,M.push([P,Ia,Z,Ra]),M.push([Z,fa,Ra])):M.push([Ia,fa,Ra,P]):M.push([P,Ia,fa,Ra])}}var G=[],L=[],M=[],ca=!1;if(C[0].f==C[C.length-1].B&&C[0].c==C[C.length-1].u){ca=!0;H(C[C.length-1],C[0]);M=[];for(var ja=1;ja<C.length;ja++)H(C[ja-1],C[ja]);H(C[C.length-
1],C[0])}else{var la=C[0],za=gd(la);ja=new S(la.f,la.c);ja.round();ja.fa=la.weight;ja.va=255;G.push(ja);la=new S(la.f-za.y,la.c+za.x);la.round();la.fa=ja.fa;la.va=0;L.push(la);for(ja=1;ja<C.length;ja++)H(C[ja-1],C[ja]);C=C[C.length-1];la=gd(C);ja=new S(C.B,C.u);ja.round();ja.fa=C.weight;ja.va=255;G.push(ja);la=new S(C.B-la.y,C.u+la.x);la.round();la.fa=ja.fa;la.va=0;L.push(la);I(C)}return M}function h(C){var H=new ub(Lb);C=q(C);for(var I=C.next();!I.done;I=C.next())I=I.value,Mf(I.bound.D-5E4,I.bound.m-
5E4,I.bound.M+5E4,I.bound.A+5E4,H);return H.elements}function g(C){var H=new ub(Rc);C=q(C);for(var I=C.next();!I.done;I=C.next())I=I.value,H.remove(id(I))||H.add(I);return H.elements}function k(C){var H=Ui(C,!1);C=[];for(var I=[];H.elements.length;){var G=Vi(H);G?Vc(G)?I.push(G):(G.eb=[],C.push(G)):console.log("failed circuit")}I=q(I);for(H=I.next();!H.done;H=I.next())Xi(H.value,C);I=[];C=q(C);for(H=C.next();!H.done;H=C.next())if(G=H.value,0==G.eb.length)I.push(G);else{Wi(G);var L=q(G.eb);for(H=L.next();!H.done;H=
L.next())Wi(H.value);I.push(Yi(G))}return I}function l(C,H,I){var G=Ui(C,!1);C=[];for(var L=new ub(Md);G.elements.length;){a:{var M=G;var ca=[];ca.bound=new dd;var ja=0,la=M.elements[ja],za=la.elements.pop();la.elements.length||M.elements.splice(ja,1);if(za)for(ca.bound.Ka(za.f,za.c);;){ca.push(za);ca.bound.Ka(za.B,za.u);if(za.B==ca[0].f&&za.u==ca[0].c)break a;ja=M.contains(new S(za.B,za.u));if(0>ja)break a;la=M.elements[ja];za=xb(la,id(za))-1;0>za&&(za+=la.elements.length);za=la.elements.splice(za,
1)[0];la.elements.length||M.elements.splice(ja,1)}else ca=null}C.push(ca);if(ca[0].f!=ca[ca.length-1].B||ca[0].c!=ca[ca.length-1].u)M=ca[0],M.jh=ca,ca=new ub(kd),ca.x=M.f,ca.y=M.c,ca=L.Ka(ca),ca.add(M)}for(G=0;G<C.length;G++)if(M=C[G],M[0].f!=M[M.length-1].B||M[0].c!=M[M.length-1].u)ca=M[M.length-1],ja=L.contains(new S(ca.B,ca.u)),0>ja||(la=L.elements[ja],ca=xb(la,id(ca))-1,0>ca&&(ca+=la.elements.length),ca=la.elements.splice(ca,1)[0],la.elements.length||L.elements.splice(ja,1),ja=C.indexOf(ca.jh),
C.splice(ja,1),ja<G&&G--,M.push.apply(M,da(ca.jh)),M.bound.fj(ca.jh.bound),G--);L=q(C);for(G=L.next();!G.done;G=L.next())delete G.value.jh;L=q(C);for(G=L.next();!G.done;G=L.next())G=G.value,G[0].f==G[G.length-1].B&&G[0].c==G[G.length-1].u?d(G):c(G);L=[];C=q(C);for(G=C.next();!G.done;G=C.next())L=L.concat(e(G.value));C=[];L=q(L);for(G=L.next();!G.done;G=L.next())for(G=G.value,M=q(H),ja=M.next();!ja.done;ja=M.next()){a:for(ca=G,ja=q(ja.value),la=ja.next();!la.done;la=ja.next()){la=la.value;za=[];for(var N=
ca[ca.length-1],P=R(la,N.x,N.y),Ia=0;Ia<ca.length;Ia++){var fa=ca[Ia],Ra=R(la,fa.x,fa.y);if(0<Ra){if(0>P){P/=P-Ra;var Z=1-P,Sa=new S(N.x*Z+fa.x*P,N.y*Z+fa.y*P);Sa.fa=N.fa*Z+fa.fa*P;Sa.va=N.va*Z+fa.va*P;za.push(Sa)}za.push(fa)}else 0>Ra?0<P&&(P/=P-Ra,Z=1-P,Sa=new S(N.x*Z+fa.x*P,N.y*Z+fa.y*P),Sa.fa=N.fa*Z+fa.fa*P,Sa.va=N.va*Z+fa.va*P,za.push(Sa)):za.push(fa);N=fa;P=Ra}if(3>za.length){ca=null;break a}ca=za}ca&&C.push(ca)}H=q(C);for(G=H.next();!G.done;G=H.next()){C=G.value;for(L=0;L<C.length;L++)G=C[L],
G.index?C[L]=G.index:(G.index=Pi.vd.xb.length,C[L]=G.index,M=I(G),M.fa=225*G.fa,M.va=G.va,Pi.vd.xb.push(M));Qi+=3*(C.length-2);Pi.vd.td.push(C)}}var m=gf.elements[Ri];if(m){Pi.Me[2*Ri]=Qi;for(var n=new ub(a),r=new ub(b),p=new ub(b),t={},z=q(m.na),w=z.next();!w.done;t={yc:t.yc,Zc:t.Zc,vh:t.vh},w=z.next())if(t.Zc=w.value,t.Zc instanceof Ig){t.vh=function(C){return function(H){var I=H.sa,G=Math.atan2(I.V,I.$)-Math.atan2(C.yc.V,C.yc.$);if(Math.abs(G>Math.PI?G-Math.Kf:G<-Math.PI?G+Math.Kf:G)>zc(5))return!1;
G=I.weight/(I.weight+1);var L=1-G;G=I.Sa(Math.round(I.f*G+C.yc.f*L),Math.round(I.c*G+C.yc.c*L),Math.round(I.B*G+C.yc.B*L),Math.round(I.u*G+C.yc.u*L));if(500<=Math.abs(R(G,C.yc.f,C.yc.c))||500<=Math.abs(R(G,C.yc.B,C.yc.u))||500<=Math.abs(R(G,I.f,I.c))||500<=Math.abs(R(G,I.B,I.u)))return!1;H.sa=G;G.weight=I.weight+1;H.push(C.Zc);return!0}}(t);var y=function(C){return function(){for(var H=q(n.elements),I=H.next();!I.done;I=H.next())if(C.vh(I.value))return!0;return!1}}(t);t.yc=id(t.Zc.T);if(!y()){var B=
[t.Zc];B.sa=t.yc;B.sa.weight=1;var A=n.Ka(B);A!=B&&A.push(t.Zc)}}else{var D=[t.Zc],F=void 0;t.Zc instanceof Jg?F=r.Ka(D):t.Zc instanceof Kg&&(F=p.Ka(D));F!=D&&F.push(t.Zc)}n=n.elements;r=r.elements;p=p.elements;for(var K={},V=q(n),Q=V.next();!Q.done;K={Vb:K.Vb,fe:K.fe},Q=V.next()){var ma=Q.value;K.fe=hd(ma.sa,-1E3);ma.sa=ma.sa.Sa(ma.sa.f+K.fe.x,ma.sa.c+K.fe.y,ma.sa.B+K.fe.x,ma.sa.u+K.fe.y);K.Vb=ma.sa;var aa=[[],[],[],[]],oa=[],ob=q(ma);for(w=ob.next();!w.done;w=ob.next()){var Pa=w.value,Db=function(C,
H,I){C.f<H.m||C.f>H.A||C.u>H.o||C.c<H.h?I.push(C):(C.u<H.h&&I.push(C.Sa(C.f,H.h,C.B,C.u)),C.c>H.o&&I.push(C.Sa(C.f,C.c,C.B,H.o)))},ue=function(C,H,I){C.c<H.h||C.c>H.o||C.B>H.A||C.f<H.m?I.push(C):(C.B<H.m&&I.push(C.Sa(H.m,C.c,C.B,C.u)),C.f>H.A&&I.push(C.Sa(C.f,C.c,H.A,C.u)))},rf=function(C,H,I){C.f<H.m||C.f>H.A||C.c>H.o||C.u<H.h?I.push(C):(C.c<H.h&&I.push(C.Sa(C.f,C.c,C.B,H.h)),C.u>H.o&&I.push(C.Sa(C.f,H.o,C.B,C.u)))},ve=function(C,H,I){C.c<H.h||C.c>H.o||C.f>H.A||C.B<H.m?I.push(C):(C.f<H.m&&I.push(C.Sa(C.f,
C.c,H.m,C.u)),C.B>H.A&&I.push(C.Sa(H.A,C.c,C.B,C.u)))},xa=new dd;xa.m=Math.round(K.Vb.getParameter(Pa.T.B,Pa.T.u));xa.A=Math.round(K.Vb.getParameter(Pa.T.f,Pa.T.c));xa.h=Pa.h;xa.o=Pa.o;for(var Gb=[[],[],[],[]],sf=q(aa[0]),pa=sf.next();!pa.done;pa=sf.next())ve(pa.value,xa,Gb[0]);var tf=q(aa[1]);for(pa=tf.next();!pa.done;pa=tf.next())rf(pa.value,xa,Gb[1]);var uf=q(aa[2]);for(pa=uf.next();!pa.done;pa=uf.next())ue(pa.value,xa,Gb[2]);var ta=q(aa[3]);for(pa=ta.next();!pa.done;pa=ta.next())Db(pa.value,xa,
Gb[3]);aa=Gb;for(var Zb=[[new O(xa.m,xa.h,xa.A,xa.h)],[new O(xa.A,xa.h,xa.A,xa.o)],[new O(xa.A,xa.o,xa.m,xa.o)],[new O(xa.m,xa.o,xa.m,xa.h)]],we=q(oa),xe=we.next();!xe.done;xe=we.next()){var md=xe.value;Gb=[[],[],[],[]];var vf=q(Zb[0]);for(pa=vf.next();!pa.done;pa=vf.next())ve(pa.value,md,Gb[0]);var Qd=q(Zb[1]);for(pa=Qd.next();!pa.done;pa=Qd.next())rf(pa.value,md,Gb[1]);var wf=q(Zb[2]);for(pa=wf.next();!pa.done;pa=wf.next())ue(pa.value,md,Gb[2]);var xf=q(Zb[3]);for(pa=xf.next();!pa.done;pa=xf.next())Db(pa.value,
md,Gb[3]);Zb=Gb}aa[0].push.apply(aa[0],da(Zb[0]));aa[1].push.apply(aa[1],da(Zb[1]));aa[2].push.apply(aa[2],da(Zb[2]));aa[3].push.apply(aa[3],da(Zb[3]));oa.push(xa)}aa=aa[0].concat(aa[1].concat(aa[2].concat(aa[3])));ma.length=0;for(var yf=k(aa),W=[],Aa=q(yf),ka=Aa.next();!ka.done;ka=Aa.next()){for(var nd=ka.value,kc=nd.slice(),lc=new dd,zf=q(nd),vb=zf.next();!vb.done;vb=zf.next()){var ye=vb.value;lc.Ka(ye.B,ye.u)}var ze=K.Vb.kb(lc.m,0),Ae=K.Vb.kb(lc.A,0);kc.bound=new he;kc.bound.Ka(ze.y,lc.h,ze.x);
kc.bound.Ka(Ae.y,lc.o,Ae.x);W.push.apply(W,da(aj(kc)));ma.push(kc)}var pg=h(ma);aa=[];for(var Rd=q(pg),Hb=Rd.next();!Hb.done;Hb=Rd.next())for(var Ib=q(Hb.value.na),Jb=Ib.next();!Jb.done;Jb=Ib.next()){var wb=Jb.value;if(wb instanceof Kg){var Ab=fd(K.Vb,wb.ca);if(Ab){Ab[0]=Math.round(Ab[0]);Ab[1]=Math.round(Ab[1]);var qg=new O(Ab[1],wb.y,Ab[0],wb.y);qg.weight=1;aa.push(qg)}}else if(wb instanceof Jg){var Ec=fd(K.Vb,wb.ca);if(Ec){Ec[0]=Math.round(Ec[0]);Ec[1]=Math.round(Ec[1]);var Be=new O(Ec[0],wb.y,
Ec[1],wb.y);Be.weight=1;aa.push(Be)}}else{var od=K.Vb,$b=wb.T,ac=R(od,$b.f,$b.c),mc=R(od,$b.B,$b.u),pd=od.getParameter($b.f,$b.c),Sd=od.getParameter($b.B,$b.u);if(ac<mc){if(!(-256>mc||256<ac)){var Af=ac/(ac-mc),Td=Math.round(pd*(1-Af)+Sd*Af),Bf=Math.atan2(-ac,pd-Td);if(!(Bf<zc(15))){var Xa=new O(Td,wb.h,Td,wb.o);Xa.weight=(180*Bf/Math.PI-15)/75;1<Xa.weight&&(Xa.weight=1);aa.push(Xa)}}}else if(ac>mc&&!(-256>ac)&&!(256<mc)){var Qa=ac/(ac-mc),Ce=Math.round(pd*(1-Qa)+Sd*Qa),Fc=Math.atan2(-mc,Ce-Sd);if(!(Fc<
zc(15))){var qd=new O(Ce,wb.o,Ce,wb.h);qd.weight=(180*Fc/Math.PI-15)/75;1<qd.weight&&(qd.weight=1);aa.push(qd)}}}}l(aa,W,function(C){return function(H){var I=Math.round(H.x);H=Math.round(H.y);I/=C.Vb.length;return new Gd(Math.round(C.Vb.c+(C.Vb.u-C.Vb.c)*I)-C.fe.y,H,Math.round(C.Vb.f+(C.Vb.B-C.Vb.f)*I)-C.fe.x)}}(K))}var bc={},Ud=q(r);for(Q=Ud.next();!Q.done;bc={af:bc.af},Q=Ud.next()){var Gc=Q.value;bc.af=Gc[0].y;var Wc=[],eb=q(Gc);for(w=eb.next();!w.done;w=eb.next())Wc.push.apply(Wc,da(w.value.ca));
Gc.length=0;var De=k(g(Wc)),Ee=[],Hc=q(De);for(ka=Hc.next();!ka.done;ka=Hc.next()){var Xc=ka.value,lb=Xc.slice(),rd=new dd,Va=q(Xc);for(vb=Va.next();!vb.done;vb=Va.next()){var sd=vb.value;rd.Ka(sd.B,sd.u)}lb.bound=new he;lb.bound.D=rd.m;lb.bound.M=rd.A;lb.bound.m=rd.h;lb.bound.A=rd.o;lb.bound.h=lb.bound.o=bc.af;Ee.push.apply(Ee,da(aj(lb)));Gc.push(lb)}var rg=h(Gc);Wc=[];var Fe=q(rg);for(Hb=Fe.next();!Hb.done;Hb=Fe.next()){var td=q(Hb.value.na);for(Jb=td.next();!Jb.done;Jb=td.next()){var cc=Jb.value;
if(cc instanceof Ig&&!(cc.h>bc.af||cc.o<=bc.af)){var Ic=cc.T.X();Ic.weight=1;Wc.push(Ic)}}}l(Wc,Ee,function(C){return function(H){return new Gd(Math.round(H.y),C.af,Math.round(H.x))}}(bc))}var Jc={},Ge=q(p);for(Q=Ge.next();!Q.done;Jc={bf:Jc.bf},Q=Ge.next()){var ud=Q.value;Jc.bf=ud[0].y;var Yc=[],Ba=q(ud);for(w=Ba.next();!w.done;w=Ba.next())for(var vd=q(w.value.ca),nc=vd.next();!nc.done;nc=vd.next()){var wd=nc.value;Yc.push(wd.Sa(-wd.B,wd.u,-wd.f,wd.c))}ud.length=0;var Zc=k(g(Yc)),Vd=[],Wd=q(Zc);for(ka=
Wd.next();!ka.done;ka=Wd.next()){var Xd=ka.value,dc=Xd.slice(),$c=new dd,Yd=q(Xd);for(vb=Yd.next();!vb.done;vb=Yd.next()){var cj=vb.value;$c.Ka(cj.B,cj.u)}dc.bound=new he;dc.bound.D=-$c.A;dc.bound.M=-$c.m;dc.bound.m=$c.h;dc.bound.A=$c.o;dc.bound.h=dc.bound.o=Jc.bf;Vd.push.apply(Vd,da(aj(dc)));ud.push(dc)}var rk=h(ud);Yc=[];var dj=q(rk);for(Hb=dj.next();!Hb.done;Hb=dj.next()){var ej=q(Hb.value.na);for(Jb=ej.next();!Jb.done;Jb=ej.next()){var xd=Jb.value;if(xd instanceof Ig&&!(xd.h>=Jc.bf||xd.o<Jc.bf)){var fj=
xd.T.Sa(-xd.T.B,xd.T.u,-xd.T.f,xd.T.c);fj.weight=1;Yc.push(fj)}}}l(Yc,Vd,function(C){return function(H){return new Gd(Math.round(H.y),C.bf,-Math.round(H.x))}}(Jc))}Pi.Me[2*Ri+1]=Qi-Pi.Me[2*Ri];Ri++;return!0}qj=Pi.vd;delete Pi.vd;for(var Je=0;Je<gf.elements.length;Je++)gf.elements[Je].Pi=Pi.Me[2*Je],gf.elements[Je].Oi=Pi.Me[2*Je+1];delete Pi.Me;Ri=-1;qj.compile();return!1};u.Ta=function(a){u.qa.call(this,a);this.b=new J(0,0,0);this.Jb=0;this.ea={Aa:-2147483648,pb:new J(1,1,1)};this.Mi=new yb;this.Sf=new dd};u.Ta.prototype=Object.create(u.qa.prototype);u.Ta.prototype.constructor=u.Ta;u.Ta.index=-2147483648;u.Ta.prototype.create=function(){this.index=u.Ta.index++;u.ii.push(this);u.qa.prototype.create.call(this)};u.Ta.prototype.remove=function(){for(var a=this.Mi.first();null!=a.item;){var b=a.next;Bb(a);Bb(a.Ec);a=b}u.ii.remove(this);u.qa.prototype.remove.call(this)};
u.Ta.prototype.step=function(){this.Sf.he(this.b.z,this.b.x)||Ti(this);var a=Gf(this.b,new J(0,-1E8,0),null);a?(a=ff(a.item.aa))&&Xf(this.b,a,this.ea.pb):this.remove();u.qa.prototype.step.call(this)};
function Ti(a){for(var b=a.b.z-a.Jb,c=a.b.z+a.Jb,d=a.b.x-a.Jb,e=a.b.x+a.Jb,h=a.Mi.first(),g=[cf];g.length;){var k=g.shift();if(k instanceof Cf)b<=k.value&&g.push(k.Fe),c>=k.value&&g.push(k.Ge);else if(k instanceof Df)d<=k.value&&g.push(k.Fe),e>=k.value&&g.push(k.Ge);else{for(;null!=h.item&&!(h.item.index>=k.index);){var l=h.next;Bb(h);Bb(h.Ec);h=l}if(h.item==k)h=h.next;else{l=new zb(k);var m=new zb(a);l.Ec=m;m.Ec=l;Eb(l,h);Cb(k.gh,m)}}}for(;null!=h.item;)g=h.next,Bb(h),Bb(h.Ec),h=g;a.Sf.m=(b>>19<<
19)+a.Jb;a.Sf.A=((c>>19)+1<<19)-a.Jb;a.Sf.h=(d>>19<<19)+a.Jb;a.Sf.o=((e>>19)+1<<19)-a.Jb}u.ii=new ub(Lb);u.Ce=function(a){u.Node.call(this,a);this.Ra=1E5};u.Ce.prototype=Object.create(u.Node.prototype);u.Ce.prototype.constructor=u.Ce;u.Ce.color=new T(0,0,0,64);
u.Ce.prototype.Na=function(){var a=new U;a.G=0;a.K=0;a.L=this.Ra;a.I=this.Ra;a.m11=0;a.m12=0;a.J=0;a.m21=1;a.m22=0;a.H=this.Ba.H;a.m31=this.Ba.m31+500;a.m32=this.Ba.m32;var b=Gf(new J(this.Ba.H,this.Ba.m31,this.Ba.m32),new J(0,-1E8,0));b&&(a.m31-=b.d);u.C.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,0,4);u.Node.prototype.Na.call(this)};var rj,sj=980700/3600*2,tj=new J(0,-sj,0),uj=new ub(Lb),vj=new u.Node("physProcessor");
vj.step=function(){rj=new vc;for(var a=q(uj.elements),b=a.next();!b.done;b=a.next()){b=b.value;b.Ud=0;b.t=0;b.Sj=wj(b.b,b.ua,b.Wa);var c=b.Kj();b.input();b.Wd&&!b.gg()&&0<b.uf&&(b.s.x+=tj.x,b.s.y+=tj.y,b.s.z+=tj.z);b.s.scale(b.mk);var d=Nd(b.s,b.cb,new J(0,0,0));if(0<b.qg){for(var e=b,h=b.Sj,g=new J(0,0,0),k=0;k<h.length;k++){var l=h[k],m=-Dc(d,l);if(!(0>=m)){m*=e.qg;var n=Dc(e.s,l);l=new J(e.s.x-l.x*n,e.s.y-l.y*n,e.s.z-l.z*n);m/=l.length();1<m&&(m=1);g.x-=l.x*m;g.y-=l.y*m;g.z-=l.z*m}}e.s.add(g)}b.Pa.set(.5*
b.cb.x+.5*b.s.x,.5*b.cb.y+.5*b.s.y,.5*b.cb.z+.5*b.s.z);b.Pa.y+=c;b.Pa.round();b.bound=xj(b.b,b.ua,b.Wa,b.Pa)}a=q(uj.elements);for(b=a.next();!b.done;b=a.next())b.value.handleEvent();for(a=0;!rj.Xg();){b=rj.pop();if(10<++a)break;b.target?(c=b.source,e=b.target,c.Ud==b.Wi&&e.Ud==b.Yj&&(c.Ud++,e.Ud++,yj(c,b),yj(e,b),c.handleEvent(),e.handleEvent(),c.ei(e),e.ei(c))):(c=b.source,c.Ud==b.Wi&&(c.Ud++,yj(c,b),c.handleEvent()))}a=q(uj.elements);for(b=a.next();!b.done;b=a.next())b=b.value,b.b.x+=b.Pa.x,b.b.y+=
b.Pa.y,b.b.z+=b.Pa.z,b.cb.set(b.s.x,b.s.y,b.s.z),b.transform.H=b.b.x,b.transform.m31=b.b.y,b.transform.m32=b.b.z};function zj(a){u.Ta.call(this,a);this.s=new J(0,0,0);this.cb=new J(0,0,0);this.Wa=this.ua=0;this.uf=1;this.qg=0;this.mk=1;this.pg=0;this.Vf=new ub(Lb);this.t=this.Ud=0;this.Pa=new J(0,0,0);this.Wd=!0}zj.prototype=Object.create(u.Ta.prototype);f=zj.prototype;f.constructor=zj;f.create=function(){u.Ta.prototype.create.call(this);uj.add(this)};
f.remove=function(){u.Ta.prototype.remove.call(this);uj.remove(this)};f.Kj=function(){return 0};function yj(a,b){var c=(b.t-a.t)/(1-a.t);c=new J(a.Pa.x*c,a.Pa.y*c,a.Pa.z*c);c.round();a.b.add(c);a.Pa.sub(c);a.t=b.t}
f.handleEvent=function(){for(var a=new J(this.s.x,this.s.y,this.s.z),b=wj(this.b,this.ua,this.Wa),c=Aj(this),d=0;d<b.length;d++){var e=b[d],h=!1,g=-Dc(this.s,e);0<g&&(2E3<g*this.pg&&(h=!0,g*=1+this.pg),this.s.x+=e.x*g,this.s.y+=e.y*g,this.s.z+=e.z*g);g=-Dc(this.Pa,e);0<g&&(h&&(g*=1+this.pg),this.Pa.x+=e.x*g,this.Pa.y+=e.y*g,this.Pa.z+=e.z*g)}for(d=0;d<c.length;d++){h=function(m,n){var r=Dc(m,e),p=Dc(n,e);var t=k.uf;var z=l.uf;r>=p?t=[r,p]:(t=(t*r+z*p)/(t+z),t=[t+(t-r)*k.pg,t+(t-p)*l.pg]);r=t[0]-r;
p=t[1]-p;m.x+=e.x*r;m.y+=e.y*r;m.z+=e.z*r;n.x+=e.x*p;n.y+=e.y*p;n.z+=e.z*p};e=c[d];var k=this,l=e.source;l.index<k.index||(h(k.Pa,l.Pa),h(k.s,l.s))}Mc(this.Pa,b);Mc(this.s,b);0<b.length+c.length&&(Nd(this.s,a,a),a.ka(1),this.xj());this.bound=xj(this.b,this.ua,this.Wa,this.Pa);if(this.Pa.Yh())return null;u.sf();b=q(b);for(a=b.next();!a.done;a=b.next())a.value.source.Aa=u.Aa;c=q(c);for(a=c.next();!a.done;a=c.next())a.value.source.Aa=u.Aa;0>=this.ua||!(c=Bj(this,this.b,this.ua,this.Wa,this.Pa,!0))||
(c.source=this,c.Wi=this.Ud,c.target&&(c.Yj=c.target.Ud),rj.add(c,c.t))};
function Bj(a,b,c,d,e,h){for(var g=new Ef(b,e,c),k=null,l=1,m=g.next();m&&!(m.t>l);){m=q(m.node.na);for(var n=m.next();!n.done;n=m.next())if(n=n.value,n.Aa!=u.Aa&&(n=n.pd(b,c,d,e)))n.d=n.t*e.length(),-1>n.d||(n.t=a.t+n.t*(1-a.t),n.t>=l||(k=n,l=n.t));m=g.next()}g=q(kf);for(n=g.next();!n.done;n=g.next())if(m=n.value,m.Aa!=u.Aa&&(m=m.pd(b,c,d,e)))m.d=m.t*e.length(),-1>m.d||(m.t=a.t+m.t*(1-a.t),m.t>=l||(k=m,l=m.t));if(!h)return k;for(b=0;b<uj.elements.length;b++){c=uj.elements[b];if(d=a!=c)if(d=c.Aa!=
u.Aa)if(d=!a.Vf.get(c))if(d=!c.Vf.get(a))d=a.bound,e=c.bound,d=d.m>=e.A||d.A<=e.m||d.h>=e.o||d.o<=e.h||d.D>=e.M||d.M<=e.D?!1:!0;if(d){d=a.t>c.t?a.t:c.t;e=Cj(a,d);h=Cj(c,d);a:{var r=e.sj,p=e.r,t=e.g,z=e.Nb;n=h.sj;g=h.r;var w=h.g;m=h.Nb;if(0==t&&0==w)t=r,w=Nd(t,n,new J(0,0,0)),r=Nd(z,m,new J(0,0,0)),0==r.length()?g=null:(w=Cc(w,r,p+g))?(z=new J(t.x+z.x*w.Ca,t.y+z.y*w.Ca,t.z+z.z*w.Ca),m=new J(n.x+m.x*w.Ca,n.y+m.y*w.Ca,n.z+m.z*w.Ca),n=new Dj,n.t=w.Ca,p=g/(g+p),t=1-p,n.p=(new J(m.x*t+z.x*p,m.y*t+z.y*p,
m.z*t+z.z*p)).round(),n.n=new J((n.p.x-m.x)/g,(n.p.y-m.y)/g,(n.p.z-m.z)/g),g=n):g=null;else{var y=new J(r.x-n.x,0,r.z-n.z),B=new J(z.x-m.x,0,z.z-m.z);if(0==B.length())g=null;else if(y=Cc(y,B,p+g)){var A=new J(r.x+z.x*y.Ca,r.y+z.y*y.Ca,r.z+z.z*y.Ca);B=new J(n.x+m.x*y.Ca,n.y+m.y*y.Ca,n.z+m.z*y.Ca);var D=g/(g+p),F=1-D;A=new J(B.x*F+A.x*D,B.y*F+A.y*D,B.z*F+A.z*D);A.round();if(A.y>B.y+w){y=new J(r.x-n.x,r.y-t-(n.y+w),r.z-n.z);B=Nd(z,m,new J(0,0,0));y=Cc(y,B,p+g);if(!y){g=null;break a}A=new J(r.x+z.x*y.Ca,
r.y-t+z.y*y.Ca,r.z+z.z*y.Ca);B=new J(n.x+m.x*y.Ca,n.y+w+m.y*y.Ca,n.z+m.z*y.Ca);m=new Dj;m.t=y.Ca;D=g/(g+p);F=1-D;m.p=(new J(B.x*F+A.x*D,(B.y+w)*F+(A.y-t)*D,B.z*F+A.z*D)).round();m.n=new J((m.p.x-B.x)/g,(m.p.y-(B.y+w))/g,(m.p.z-B.z)/g)}else if(A.y<B.y-w){y=new J(r.x-n.x,r.y+t-(n.y-w),r.z-n.z);B=Nd(z,m,new J(0,0,0));y=Cc(y,B,p+g);if(!y){g=null;break a}A=new J(r.x+z.x*y.Ca,r.y+t+z.y*y.Ca,r.z+z.z*y.Ca);B=new J(n.x+m.x*y.Ca,n.y-w+m.y*y.Ca,n.z+m.z*y.Ca);m=new Dj;m.t=y.Ca;D=g/(g+p);F=1-D;m.p=(new J(B.x*
F+A.x*D,(B.y-w)*F+(A.y+t)*D,B.z*F+A.z*D)).round();m.n=new J((m.p.x-B.x)/g,(m.p.y-(B.y-w))/g,(m.p.z-B.z)/g)}else m=new Dj,m.t=y.Ca,m.p=A,m.n=new J((m.p.x-B.x)/g,0,(m.p.z-B.z)/g);g=m}else g=null}}g&&(g.d=g.t*Nd(e.Nb,h.Nb,new J(0,0,0)).length(),-1>g.d||(g.t=d+g.t*(1-d),g.t>=l||(g.target=c,k=g,l=g.t)))}}return k}
function Cj(a,b){b=(b-a.t)/(1-a.t);b=new J(a.Pa.x*b,a.Pa.y*b,a.Pa.z*b);b.round();var c={};c.sj=(new J(a.b.x,a.b.y,a.b.z)).add(b);c.r=a.ua;c.g=a.Wa;c.Nb=(new J(a.Pa.x,a.Pa.y,a.Pa.z)).sub(b);return c}function wj(a,b,c){var d=Lf(a,b),e=[];u.sf();d=q(d);for(var h=d.next();!h.done;h=d.next()){var g=q(h.value.na);for(h=g.next();!h.done;h=g.next())h.value.Mg(a,b,c,e)}d=q(kf);for(h=d.next();!h.done;h=d.next())h.value.Mg(a,b,c,e);return e}
function Aj(a){for(var b=[],c=0;c<uj.elements.length;c++){var d=uj.elements[c];if(a!=d&&!a.Vf.get(d)&&!d.Vf.get(a)){var e=a.b;var h=a.ua,g=a.Wa,k=d.b,l=d.ua,m=d.Wa;if(0==g&&0==m){e=new J(e.x-k.x,e.y-k.y,e.z-k.z);var n=e.ka(1);e.d=Dc(new J(k.x+e.x*l,k.y+e.y*l,k.z+e.z*l),e)+h;n-=h+l;e=2<n||n<-h?null:e}else{if(e.y-g>k.y+m){n=new J(e.x-k.x,e.y-g-(k.y+m),e.z-k.z);var r=n.ka(1);e=new J(k.x+n.x*l,k.y+n.y*l,k.z+n.z*l)}else e.y+g<k.y-m?(n=new J(e.x-k.x,e.y+g-(k.y-m),e.z-k.z),r=n.ka(1),e=new J(k.x+n.x*l,k.y+
n.y*l,k.z+n.z*l)):(n=new J(e.x-k.x,0,e.z-k.z),r=n.ka(1),e=new J(k.x+n.x*l,(e.y*m+k.y*g)/(g+m),k.z+n.z*l));n.d=Dc(e,n)+h;r-=h+l;e=2<r||r<-h?null:n}e&&(e.source=d,b.push(e))}}return b}f.xj=function(){};f.ei=function(){};f.input=function(){};f.gg=function(){return!1};function Ej(a){zj.call(this,a);this.Ci=this.Jh=this.Bd=this.Zh=this.rf=this.ac=0;this.Yg=this.Ff=Number.NEGATIVE_INFINITY;this.kg=!1;this.Gh=!0;this.Tj=!1;this.Vd=0;this.Rg=18}Ej.prototype=Object.create(zj.prototype);
Ej.prototype.constructor=Ej;Ej.Jf=function(a){return Math.sqrt(2*a*sj)};f=Ej.prototype;f.gg=function(){return this.Ff<u.l-1?!1:!0};function Fj(a){a.s.y=a.Zh;a.Ff=Number.NEGATIVE_INFINITY;a.Yg=Number.NEGATIVE_INFINITY;a.kg=!0}
f.Kj=function(){var a=0,b=this.Tj?this.Jh:this.Bd,c=new J(this.b.x,this.b.y-this.Wa,this.b.z);0>=this.s.y&&(this.kg=!1);if(this.gg()){this.kg=!1;var d=0;u.sf();var e=this.Ci;if(e=Bj(this,c,this.ua,0,new J(0,-e,0)))d=e.d;c.y-=d;c=wj(c,this.ua,0);e=Number.NEGATIVE_INFINITY;for(var h=0;h<c.length;h++){var g=c[h];g.y>e&&(e=g.y)}0<e&&(this.Ff=u.l,a=b-2*(this.ua+this.Wa)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}else if(!this.kg){d=0;u.sf();e=this.Bd-2*this.Wa-this.ua;if(e=Bj(this,c,this.ua,0,new J(0,-e,
0)))d=e.d;c.y-=d;c=wj(c,this.ua,0);e=Number.NEGATIVE_INFINITY;for(h=0;h<c.length;h++)g=c[h],g.y>e&&(e=g.y);0<e&&(this.Ff=u.l,this.Gh=!0,a=b-2*(this.ua+this.Wa)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}return a};f.Sh=function(){return new J(0,0,0)};f.aj=function(){};
f.input=function(){zj.prototype.input.call(this);this.aj();var a=this.Sh();if(u.w.ia==this){var b=this.transform;a.set(b.G*a.x+b.J*a.z,0,b.L*a.x+b.m22*a.z)}b=a.ka(1);0==b&&(this.Vd=0);if(this.gg())0<b&&(this.s.x+=a.x*this.rf,this.s.z+=a.z*this.rf,this==u.w.ia&&(this.Vd>=2*this.Rg&&(this.Vd=0),0==this.Vd?u.v.ra.get("stepConcrete01").play({gain:.5}):this.Vd==this.Rg&&u.v.ra.get("stepConcrete02").play({gain:.5})),this.Vd=this.Xa&&.5<this.Xa.focus?this.Vd+.5:this.Vd+1),this.s.scale(this.ac/(this.ac+this.rf));
else{b=.25*this.rf;var c=new S(this.s.z,this.s.x),d=c.length(),e=Dc(this.s,a);0>e&&(e=0);e>this.ac&&(e=this.ac);b=this.ac/(this.ac+b)*(e+b)-e;d>this.ac&&c.scale(Math.max(0,d-b)/d);c.x+=a.z*b;c.y+=a.x*b;this.s.z=c.x;this.s.x=c.y}this.Yg<u.l-0||this.Ff<u.l-15?this.Yg<u.l-0||!this.Gh||(Fj(this),this.Gh=!1):Fj(this)};var Gj=2;function Hj(a){return a&0==Gj}function Hf(){return!0}function Dj(){this.index=Ij++;this.t=NaN;this.n=this.p=null;this.Fa=!0}var Ij=-2147483648;function Jf(a,b){return a.t<b.t?-1:a.t>b.t?1:1==a.Fa&&0==b.Fa?-1:0==a.Fa&&1==b.Fa?1:a.index<b.index?-1:a.index>b.index?1:0}
function xj(a,b,c,d){var e=new he,h=a.z-b;h<e.D&&(e.D=h);h=a.z+b;h>e.M&&(e.M=h);h=a.z+d.z-b;h<e.D&&(e.D=h);h=a.z+d.z+b;h>e.M&&(e.M=h);h=a.x-b;h<e.m&&(e.m=h);h=a.x+b;h>e.A&&(e.A=h);h=a.x+d.x-b;h<e.m&&(e.m=h);h=a.x+d.x+b;h>e.A&&(e.A=h);b+=c;c=a.y-b;c<e.h&&(e.h=c);c=a.y+b;c>e.o&&(e.o=c);c=a.y+d.y-b;c<e.h&&(e.h=c);c=a.y+d.y+b;c>e.o&&(e.o=c);return e}
function Jj(a,b,c,d,e){var h=Cc(new J(a.x-c.x,0,a.z-c.z),new J(b.x,0,b.z),d);if(!h)return null;d=new Dj;d.t=h.Ca;d.p=new J(a.x+b.x*d.t,a.y+b.y*d.t,a.z+b.z*d.t);d.n=new J(d.p.x-c.x,0,d.p.z-c.z);d.n.ka(1);var g=new Dj;g.t=h.mc;g.p=new J(a.x+b.x*g.t,a.y+b.y*g.t,a.z+b.z*g.t);g.n=new J(g.p.x-c.x,0,g.p.z-c.z);g.n.ka(1);if(0<b.y){h=(c.y-e-a.y)/b.y;var k=(c.y+e-a.y)/b.y;h>d.t&&(d=new Dj,d.t=h,d.p=new J(a.x+b.x*d.t,c.y-e,a.z+b.z*d.t),d.n=new J(0,-1,0));k<g.t&&(g=new Dj,g.t=k,g.p=new J(a.x+b.x*g.t,c.y+e,a.z+
b.z*g.t),g.n=new J(0,1,0))}else if(0>b.y)h=(c.y+e-a.y)/b.y,k=(c.y-e-a.y)/b.y,h>d.t&&(d=new Dj,d.t=h,d.p=new J(a.x+b.x*d.t,c.y+e,a.z+b.z*d.t),d.n=new J(0,1,0)),k<g.t&&(g=new Dj,g.t=k,g.p=new J(a.x+b.x*g.t,c.y-e,a.z+b.z*g.t),g.n=new J(0,-1,0));else if(a.y>c.y+e||a.y<c.y-e)return null;if(d.t>g.t)return null;d.Fa=!0;g.Fa=!1;return d}
function Kj(a,b,c,d,e){var h=new J(c.x,NaN,c.z),g=new J,k=new J,l=new S(c.z-a.z,c.x-a.x);var m=new S(b.z,b.x);var n=m.ka(1);l=Ld(l,m);h.y=a.y+b.y/n*l;h.y>c.y+e?(h.y=c.y+e,m=Dc((new J(c.x,c.y+e,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):h.y<c.y-e?(h.y=c.y-e,m=Dc((new J(c.x,c.y-e,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):g.set(a.x+m.y*l,h.y,a.z+m.x*l);Nd(h,g,k);m=k.ka(1);if(m<d){l=n=null;var r=Cc(new J(a.x-c.x,0,a.z-c.z),new J(b.x,0,b.z),d);if(r){var p=new Dj;p.t=r.Ca;p.p=new J(a.x+
b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t);p.p.y<=c.y+e&&p.p.y>=c.y-e&&(p.n=new J(p.p.x-c.x,0,p.p.z-c.z),p.n.ka(1),p.Fa=!0,n=p);p=new Dj;p.t=r.mc;p.p=new J(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t);p.p.y<=c.y+e&&p.p.y>=c.y-e&&(p.n=new J(p.p.x-c.x,0,p.p.z-c.z),p.n.ka(1),p.Fa=!1,l=p)}if(!n||!l)if(r=Bc(a,b,new J(c.x,c.y+e,c.z),d))n||(p=new Dj,p.t=r.Ca,p.p=new J(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y>c.y+e&&(p.n=new J(p.p.x-c.x,p.p.y-(c.y+e),p.p.z-c.z),p.n.ka(1),p.Fa=!0,n=p)),l||(p=new Dj,p.t=r.mc,p.p=new J(a.x+
b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y>c.y+e&&(p.n=new J(p.p.x-c.x,p.p.y-(c.y+e),p.p.z-c.z),p.n.ka(1),p.Fa=!1,l=p));if(!n||!l)if(r=Bc(a,b,new J(c.x,c.y-e,c.z),d))n||(p=new Dj,p.t=r.Ca,p.p=new J(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y<c.y-e&&(p.n=new J(p.p.x-c.x,p.p.y-(c.y-e),p.p.z-c.z),p.n.ka(1),p.Fa=!0,n=p)),l||(p=new Dj,p.t=r.mc,p.p=new J(a.x+b.x*p.t,a.y+b.y*p.t,a.z+b.z*p.t),p.p.y<c.y-e&&(p.n=new J(p.p.x-c.x,p.p.y-(c.y-e),p.p.z-c.z),p.n.ka(1),p.Fa=!1,l=p));if(n&&l)return{Oe:n,Bc:l}}return{rg:g,
Nk:h,Fd:k,Ch:m,Mk:d}}function Lj(a,b,c,d){b=Bc(d,c,a,b);if(!b)return null;var e=new Dj;e.t=-b.mc;e.p=d;e.n=(new J(a.x-(d.x+c.x*b.mc),a.y-(d.y+c.y*b.mc),a.z-(d.z+c.z*b.mc))).round();e.n.ka(1);e.Fa=!0;return e}
function Mj(a,b,c,d,e){var h=Dc(c,e);c=new J(c.x-e.x*h,c.y-e.y*h,c.z-e.z*h);d=new J(d.x-a.x,d.y-a.y,d.z-a.z);var g=Dc(d,e);d.set(d.x-e.x*g,d.y-e.y*g,d.z-e.z*g);b=Cc(d,c,b);if(!b)return null;g=new Dj;g.t=-b.mc;g.p=(new J(a.x+d.x+e.x*h*g.t,a.y+d.y+e.y*h*g.t,a.z+d.z+e.z*h*g.t)).round();g.n=new J(-(d.x+c.x*b.mc),-(d.y+c.y*b.mc),-(d.z+c.z*b.mc));g.n.ka(1);g.Fa=!0;return g}
Jg.prototype.pd=function(a,b,c,d){c=this.y+c;if(0<=d.y)var e=null;else{var h=new Dj;h.t=-(a.y-c-b)/d.y;h.p=(new J(a.x+d.x*h.t,a.y-b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new J(0,1,0);e=h}if(!e)return null;if(0==Tc(e.p.z,e.p.x,this.ca).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ca.length;l++){var m=this.ca[l];e=new J(m.c,c,m.f);var n=new J(m.u-m.c,0,m.B-m.f);n.scale(1/m.length);(e=Mj(a,b,d,e,n))?(n=m.getParameter(e.p.z,e.p.x),!(0>n||n>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.ca.length-1)+1:h|3<<l-1}for(l=0;l<this.ca.length;l++)h&1<<l||(m=this.ca[l],(e=Lj(a,b,d,new J(m.u,c,m.B)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
Kg.prototype.pd=function(a,b,c,d){c=this.y-c;if(0>=d.y)var e=null;else{var h=new Dj;h.t=-(c-a.y-b)/-d.y;h.p=(new J(a.x+d.x*h.t,a.y+b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new J(0,-1,0);e=h}if(!e)return null;if(0==Tc(e.p.z,e.p.x,this.ca).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ca.length;l++){var m=this.ca[l];e=new J(m.c,c,m.f);var n=new J(m.u-m.c,0,m.B-m.f);n.scale(1/m.length);(e=Mj(a,b,d,e,n))?(n=m.getParameter(e.p.z,e.p.x),!(0>n||n>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.ca.length-1)+1:h|3<<l-1}for(l=0;l<this.ca.length;l++)h&1<<l||(m=this.ca[l],(e=Lj(a,b,d,new J(m.u,c,m.B)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
Ig.prototype.pd=function(a,b,c,d){var e=this.T,h=this.h-c;c=this.o+c;if(0<=R(e,e.f+d.z,e.c+d.x))var g=null;else{var k=new J(e.B-e.f,0,e.c-e.u);k.scale(1/e.length);var l=Dc(d,k),m=new Dj;m.t=-(R(e,a.z,a.x)-b)/l;m.p=(new J(a.x-k.x*b+d.x*m.t,a.y-k.y*b+d.y*m.t,a.z-k.z*b+d.z*m.t)).round();m.n=k;g=m}if(!g)return null;k=0;var n=e.getParameter(g.p.z,g.p.x);0>n&&(k|=1);g.p.y>c&&(k|=2);n>e.length&&(k|=4);g.p.y<h&&(k|=8);if(0==k)return g.item=this,g;if(0==b)return null;k=0;l=null;m=Number.POSITIVE_INFINITY;
g=new J(e.c,h,e.f);n=new J(0,1,0);g=Mj(a,b,d,g,n);g?!(g.p.y<h||g.p.y>c)&&g.t<m&&(m=g.t,l=g):k|=9;g=new J(e.c,c,e.f);n=new J(e.u-e.c,0,e.B-e.f);n.scale(1/e.length);(g=Mj(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<m&&(m=g.t,l=g)):k|=3;g=new J(e.u,c,e.B);n=new J(0,-1,0);g=Mj(a,b,d,g,n);g?!(g.p.y>c||g.p.y<h)&&g.t<m&&(m=g.t,l=g):k|=6;g=new J(e.u,h,e.B);n=new J(e.c-e.u,0,e.f-e.B);n.scale(1/e.length);(g=Mj(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<m&&(m=g.t,
l=g)):k|=18;0==(k&1)&&(g=new J(e.c,c,e.f),(g=Lj(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&2)&&(g=new J(e.u,c,e.B),(g=Lj(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&4)&&(g=new J(e.u,h,e.B),(g=Lj(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&8)&&(g=new J(e.c,h,e.f),(g=Lj(a,b,d,g))&&g.t<m&&(l=g));return l?(l.item=this,l):null};
Jg.prototype.Mg=function(a,b,c,d){c=this.y+c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ca.length;k++){e=this.ca[k];var l=R(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new J(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new J(e.c,c,e.f):h>e.length?e=new J(e.u,c,e.B):(h/=e.length,g=1-h,e=new J(e.c*g+e.u*h,c,e.f*g+e.B*h),e.round()));c=new J(a.x-e.x,a.y-e.y,a.z-e.z);c.ka(1);c.d=Dc(e,c)+b;a=Dc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Kg.prototype.Mg=function(a,b,c,d){c=this.y-c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ca.length;k++){e=this.ca[k];var l=R(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new J(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new J(e.c,c,e.f):h>e.length?e=new J(e.u,c,e.B):(h/=e.length,g=1-h,e=new J(e.c*g+e.u*h,c,e.f*g+e.B*h),e.round()));c=new J(a.x-e.x,a.y-e.y,a.z-e.z);c.ka(1);c.d=Dc(e,c)+b;a=Dc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Ig.prototype.Mg=function(a,b,c,d){var e=this.h-c,h=this.o+c;c=null;var g=this.T;var k=g.getParameter(a.z,a.x);if(0>k)k=new J(g.c,a.y,g.f),k.y>h?k.y=h:k.y<e&&(k.y=e);else if(k>g.length)k=new J(g.u,a.y,g.B),k.y>h?k.y=h:k.y<e&&(k.y=e);else{k/=g.length;var l=1-k;k=new J(g.c*l+g.u*k,a.y,g.f*l+g.B*k);k.y>h?k.y=h:k.y<e?k.y=e:(c=new J(g.B-g.f,0,g.c-g.u),c.scale(1/g.length));k.round()}null==c&&(c=new J(a.x-k.x,a.y-k.y,a.z-k.z),c.ka(1));c.d=Dc(k,c)+b;a=Dc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Jg.prototype.Di=function(a,b){var c=tb(.5*tj.y,b.y,a.y-this.y);if(!c)return null;var d=new Dj;d.t=c.mc;if(0>d.t)return null;d.p=(new J(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=q(this.ca);for(b=a.next();!b.done;b=a.next())if(0>R(b.value,d.p.z,d.p.x))return null;d.n=new J(0,1,0);return d};
Kg.prototype.Di=function(a,b){if(a.y>=this.y)return null;var c=tb(.5*tj.y,b.y,a.y-this.y);if(!c)return null;var d=new Dj;d.t=c.Ca;if(0>d.t)return null;d.p=(new J(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=q(this.ca);for(b=a.next();!b.done;b=a.next())if(0>R(b.value,d.p.z,d.p.x))return null;d.n=new J(0,-1,0);return d};
Ig.prototype.Di=function(a,b){var c=R(this.T,a.z,a.x);if(0>c)return null;var d=hd(this.T,1),e=d.x*b.z+d.y*b.x;if(0<=e)return null;var h=new Dj;h.t=-c/e;if(0>h.t)return null;h.p=(new J(a.x+b.x*h.t,a.y+.5*(2*b.y+tj.y*h.t)*h.t,a.z+b.z*h.t)).round();if(h.p.y>=this.o||h.p.y<this.h)return null;a=this.T.getParameter(h.p.z,h.p.x);if(0>a||a>=this.T.length)return null;h.n=new J(d.y,0,d.x);return h};function Nj(){this.height=this.width=2;this.depth=this.color=null}
Nj.prototype.create=function(){this.object=v.createFramebuffer();v.bindFramebuffer(v.FRAMEBUFFER,this.object);var a=this.color=new u.Ed;a.width=this.width;a.height=this.height;a.Wg=v.RGBA8;a.format=v.RGBA;a.type=v.UNSIGNED_BYTE;a.pe=v.NEAREST;a.qf=v.NEAREST;a.create();v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,a.object,0);a=this.depth=v.createRenderbuffer();v.bindRenderbuffer(v.RENDERBUFFER,a);v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH24_STENCIL8,this.width,this.height);
v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.RENDERBUFFER,a)};function Oj(a){Yf.call(this,a);this.Ba=new U;this.pitch=this.heading=0;this.Yf=112;this.ed=zc(40);this.Bk=!1;this.mh=8E3}Oj.prototype=Object.create(Yf.prototype);Oj.prototype.constructor=Oj;Oj.prototype.create=function(){var a=this.Ki=new Yf;a.Ba=this.O;X(a,this);a=this.Li=new Yf;a.Ba=this.O;X(a,this);return this};
Oj.prototype.step=function(){this.Yf+=Ye.a;0>this.Yf&&(this.Yf=0);this.transform.m32=Math.pow(1.125,this.Yf);Ye.d[2]&&(this.heading-=4E6*Ye.hc.x,this.pitch+=4E6*Ye.hc.y);var a=Ac(this.heading),b=Ac(this.pitch);be(this.Ba);this.Ba.rotate(a,b,0);a=this.Ba.hf();var c=this.Ba.jf();b=this.Ba.ud();if(Ye.d[1]){var d=2*Math.tan(this.ed)*this.transform.m32/u.canvas.height,e=-Ye.hc.x*d;d*=Ye.hc.y;this.Ba.H+=e*a.x+d*c.x;this.Ba.m31+=e*a.y+d*c.y;this.Ba.m32+=e*a.z+d*c.z}c=new J(0,0,0);Ze.d.KeyW&&--c.z;Ze.d.KeyS&&
(c.z+=1);Ze.d.KeyA&&--c.x;Ze.d.KeyD&&(c.x+=1);if(e=c.length())c.scale(this.transform.m32/(60*e)),this.Ba.H+=c.x*a.x+c.z*b.x,this.Ba.m31+=c.x*a.y+c.z*b.y,this.Ba.m32+=c.x*a.z+c.z*b.z;a=this.Ki;be(a.transform);a.transform.H=-this.mh;a.transform.rotate(Math.atan(.5*-this.mh/this.transform.m32),0,0);a.ed=this.ed;a=this.Li;be(a.transform);a.transform.H=this.mh;a.transform.rotate(Math.atan(.5*this.mh/this.transform.m32),0,0);a.ed=this.ed;Yf.prototype.step.call(this);return this};u.Animation=function(){u.Node.call(this);this.length=0;this.Hb=NaN;this.Uf={}};u.Animation.prototype=Object.create(Node.prototype);f=u.Animation.prototype;f.constructor=u.Animation;f.step=function(){Node.prototype.step.call(this)};f.play=function(){this.Hb=u.l};f.key=function(a,b,c){var d=this.Uf[a];d||(d=this.Uf[a]=new Pj);return d.key(b,c)};f.print=function(){console.log("{");console.log("let a = new NG.Animation();");for(var a in this.Uf)this.Uf.hasOwnProperty(a)&&this.Uf[a].print(a);console.log("}")};
u.Animation.W=function(a,b){b.reset();b.translate(a[0],a[1],a[2]);b.rotate(a[3],a[4],a[5]);return b};function Pj(){this.keys=new ub(Qj)}Pj.prototype.key=function(a,b){var c=this.keys.get(a);c||(c=new Rj,c.t=a,this.keys.add(c));c.Nb=b;return c};Pj.prototype.print=function(a){for(var b=0;b<this.keys.elements.length;b++){var c=this.keys.elements[b];console.log("a.key('"+a+"', "+c.t+", "+c.Nb+");")}};function Rj(){this.Nb=this.t=0}
function Qj(a,b){return isNaN(a)?a.t<b.t?-1:a.t>b.t?1:0:a<b.t?-1:a>b.t?1:0};function qi(a,b,c,d,e,h){u.Node.call(this);this.b=new J(a.c,b+112500,a.f);this.zh=-Infinity;this.Hg=NaN;this.open=this.state=0;X(this,u.Ye);var g=new hg(u.v.Xd.get("bayDoor01"));g.transform.H=this.b.x;g.transform.m31=this.b.y;g.transform.m32=this.b.z;g.transform.G=-a.$;g.transform.L=a.V;g.transform.J=-a.V;g.transform.m22=-a.$;X(g,u.Ye);g.create();le(g,e.ea);var k=q(g.Qc);for(b=k.next();!b.done;b=k.next())b=b.value,b.Jg=!0,b.C=u.v.la.get("physical"),b.ma=u.v.ba.get("BayDoor01"),b.da=ah,b.Ja=["portalLightIndex",
e.se,!0,"color",Cd,!1];this.dh=g;this.cc=c;this.yf=e;c=new hg(u.v.Xd.get("bayDoor01"));c.transform.H=this.b.x;c.transform.m31=this.b.y;c.transform.m32=this.b.z;c.transform.G=a.$;c.transform.L=-a.V;c.transform.J=a.V;c.transform.m22=a.$;X(c,u.Ye);c.create();le(c,h.ea);e=q(c.Qc);for(b=e.next();!b.done;b=e.next())b=b.value,b.Jg=!0,b.C=u.v.la.get("physical"),b.ma=u.v.ba.get("BayDoor01"),b.da=ah,b.Ja=["portalLightIndex",h.se,!0,"color",Cd,!1];this.bh=c;this.rc=d;this.xf=h;this.na=[];h=[new S(-6250,-112500),
new S(6250,-112500),new S(6250,112500),new S(-6250,112500)];for(d=0;d<h.length;d++)h[d]=a.kb(h[d].x,h[d].y);a=[];d=h[h.length-1];h=q(h);for(c=h.next();!c.done;c=h.next())c=c.value,a.push(new O(d.x,d.y,c.x,c.y)),d=c;this.na.push(new Kg(a,this.b.y-112500));this.na.push(new Ig(jd(a[0]),this.b.y-112500,this.b.y+112500),new Ig(jd(a[2]),this.b.y-112500,this.b.y+112500));a=q(this.na);for(d=a.next();!d.done;d=a.next())d=d.value,d.item=this,d.kf();kf.push.apply(kf,da(this.na));this.update()}qi.prototype=Object.create(u.Node.prototype);
f=qi.prototype;f.constructor=qi;
f.step=function(){if(!(u.l%4)){for(var a=Infinity,b=q(u.w.Gc),c=b.next();!c.done;c=b.next())c=c.value,c.fb&&(c=Math.abs(c.b.x-this.b.x)+Math.abs(c.b.y-this.b.y)+Math.abs(c.b.z-this.b.z),c<a&&(a=c));u.w.ia&&(b=u.w.ia,b=Math.abs(b.b.x-this.b.x)+Math.abs(b.b.y-this.b.y)+Math.abs(b.b.z-this.b.z),b<a&&(a=b));0==this.state&&0==this.open?5E5>a&&(this.state=1,this.zh=4*Math.floor(u.l/4),this.Hg=NaN):1==this.state&&5E5<=a&&(isNaN(this.Hg)&&(this.Hg=u.l),180<=u.l-this.Hg&&(this.state=0,this.zh=u.l));a=(u.l-
this.zh)/36;1<a||(0==this.state?this.open=1-Math.pow(a,2):1==this.state&&(this.open=Math.pow(a,2)),this.update())}};f.update=function(){var a=this.cc.h+(this.cc.height-12500)*this.open;this.cc.o=this.rc.o=this.na[0].y=this.na[1].h=this.na[2].h=a;this.na[0].Y.y=this.na[1].Y.h=this.na[2].Y.h=a;this.dh.transform.m31=this.bh.transform.m31=a+112500;this.dh.Qc[0].Ja[1]=this.yf.se;this.bh.Qc[0].Ja[1]=this.xf.se;this.dh.Qc[0].Ja[4]=this.yf.Ae;this.bh.Qc[0].Ja[4]=this.xf.Ae};
f.Na=function(){u.C.N("clipY",this.b.y+225E3,!1)};f.remove=function(){this.dh.remove();this.bh.remove();kf.splice(kf.indexOf(this.na[0]),this.na.length);u.Node.prototype.remove.call(this)};
function pi(a,b,c,d){u.qa.call(this);this.b=new J(a.c,b+62500,a.f);this.transform.H=this.b.x;this.transform.m31=this.b.y;this.transform.m32=this.b.z;this.transform.G=-a.$;this.transform.L=a.V;this.transform.J=-a.V;this.transform.m22=-a.$;this.transform.G*=87500;this.transform.K*=87500;this.transform.L*=87500;this.transform.I*=62500;this.transform.m11*=62500;this.transform.m12*=62500;X(this,u.xe);this.yf=c;this.xf=d;this.na=[];c=[new S(-625,-87500),new S(625,-87500),new S(625,87500),new S(-625,87500)];
for(b=0;b<c.length;b++)c[b]=a.kb(c[b].x,c[b].y);a=[];b=c[c.length-1];c=q(c);for(d=c.next();!d.done;d=c.next())d=d.value,a.push(new O(b.x,b.y,d.x,d.y)),b=d;this.na.push(new Ig(jd(a[0]),this.b.y-112500,this.b.y+112500),new Ig(jd(a[2]),this.b.y-112500,this.b.y+112500));a=q(this.na);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=Gj,b.kf();kf.push.apply(kf,da(this.na))}pi.prototype=Object.create(u.qa.prototype);pi.prototype.constructor=pi;pi.W=function(a,b){return a.depth-b.depth};
pi.prototype.update=function(){};pi.prototype.vg=function(){return!this.Qa||this.yf.ea.Aa<u.l&&this.xf.ea.Aa<u.l?!1:!0};pi.ue=function(){u.tb(tg);u.Va(u.v.la.get("physical"));u.Mb(0,u.v.ba.get("Window01"));bh.bind();u.nb(1);u.Lb(1);u.C.N("color",Cd);u.C.N("architectureLighting",1,!0);u.C.N("lightingFancy",u.Ib.lightingFancy,!0)};
pi.prototype.Na=function(){u.C.N("modelMatrix",this.O);u.C.N("portalLightIndex",this.yf.se,!0);u.C.N("ambientLight",this.yf.ea.pb,!1);v.drawArrays(v.TRIANGLE_FAN,ug(0,1),4);var a=(new U).set(this.O);a.G=-a.G;a.K=-a.K;a.L=-a.L;a.J=-a.J;a.m21=-a.m21;a.m22=-a.m22;u.C.N("modelMatrix",a);u.C.N("portalLightIndex",this.xf.se,!0);u.C.N("ambientLight",this.xf.ea.pb,!1);v.drawArrays(v.TRIANGLE_FAN,ug(0,1),4)};pi.prototype.remove=function(){kf.splice(kf.indexOf(this.na[0]),this.na.length);u.qa.prototype.remove.call(this)};
function Sj(a,b,c){u.Ta.call(this,"crate");this.lb=240;this.b.x=a;this.b.y=b+5E4;this.b.z=c;fe(this.transform,this.b);a=[new J(-5E4,0,-5E4),new J(-5E4,0,5E4),new J(5E4,0,5E4),new J(5E4,0,-5E4)];b=q(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.kb(c,c),c.round();a=[new O(a[0].z,a[0].x,a[1].z,a[1].x),new O(a[1].z,a[1].x,a[2].z,a[2].x),new O(a[2].z,a[2].x,a[3].z,a[3].x),new O(a[3].z,a[3].x,a[0].z,a[0].x)];this.na=[];this.na.push(new Jg(a,this.b.y+5E4),new Kg(a,this.b.y-5E4));a=yd(a);
this.na.push(new Ig(a[0],this.b.y-5E4,this.b.y+5E4),new Ig(a[1],this.b.y-5E4,this.b.y+5E4),new Ig(a[2],this.b.y-5E4,this.b.y+5E4),new Ig(a[3],this.b.y-5E4,this.b.y+5E4));a=q(this.na);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;kf.push.apply(kf,da(this.na))}Sj.prototype=Object.create(u.Ta.prototype);f=Sj.prototype;f.constructor=Sj;
f.create=function(){var a=this.kc=new hg(u.v.Xd.get("lootBox"));a.Ba=this.O;X(a,this);a.create();this.Jb=a.src.Jb;le(a,this.ea);me(a,6E4);u.w.Wf.push(this);Tj.push(this);u.Ta.prototype.create.call(this)};
f.step=function(){if(u.w.ia){var a=Nd(u.w.ia.b,this.b,new J(0,0,0));a.y=0;a.ka(1);this.transform.G=a.z;this.transform.L=-a.x;this.transform.J=a.x;this.transform.m22=a.z;this.transform.rotate(zc(-15),0,0)}10==u.l-this.ef&&this.Fh();u.l==this.zd+4?this.kc.da=u.v.sb.get("flashWhite"):u.l==this.zd+6?this.kc.da=u.v.sb.get("flashRed"):u.l==this.zd+8&&delete this.kc.da;u.Ta.prototype.step.call(this)};f.Ie=function(a){isNaN(this.ef)&&(this.zd=u.l,this.lb-=a,0>=this.lb&&(this.ef=u.l))};
f.Fh=function(){if(u.w.ia){for(var a=[],b=q(u.w.ia.Xa.ke),c=b.next();!c.done;c=b.next()){var d=c.value;c=a;var e=7*d.Nd/6-Uj(d);d=d.constructor.Ah;for(e=1/3*e/d.gc;1<=e;)c.push(new Vj(d)),e--;Pb(1/e)&&c.push(new Vj(d))}a=q(a);for(b=a.next();!b.done;b=a.next())b=b.value,b.b.set(this.b.x,this.b.y,this.b.z),b.b.z+=5E4*(E(x)-.5),b.b.x+=5E4*(E(x)-.5),b.s.set(6E3*(E(x)-.5),9E3*(E(x)+1),6E3*(E(x)-.5)),X(b,u.si),b.create()}u.v.ra.get("hit02").play({gain:1});this.remove()};
f.remove=function(){u.Ta.prototype.remove.call(this);this.kc.remove();u.w.Wf.splice(u.w.Wf.indexOf(this),1);Wj.call(this);kf.splice(kf.indexOf(this.na[0]),this.na.length)};
function Xj(a,b,c){u.Ta.call(this,"barrel");this.lb=160;this.b.x=a;this.b.y=b+65E3;this.b.z=c;fe(this.transform,this.b);a=[new J(-5E4,0,-5E4),new J(-5E4,0,5E4),new J(5E4,0,5E4),new J(5E4,0,-5E4)];b=q(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.kb(c,c),c.round();a=[new O(a[0].z,a[0].x,a[1].z,a[1].x),new O(a[1].z,a[1].x,a[2].z,a[2].x),new O(a[2].z,a[2].x,a[3].z,a[3].x),new O(a[3].z,a[3].x,a[0].z,a[0].x)];this.na=[];this.na.push(new Jg(a,this.b.y+5E4),new Kg(a,this.b.y-5E4));a=yd(a);
this.na.push(new Ig(a[0],this.b.y-5E4,this.b.y+5E4),new Ig(a[1],this.b.y-5E4,this.b.y+5E4),new Ig(a[2],this.b.y-5E4,this.b.y+5E4),new Ig(a[3],this.b.y-5E4,this.b.y+5E4));a=q(this.na);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;kf.push.apply(kf,da(this.na))}Xj.prototype=Object.create(u.Ta.prototype);f=Xj.prototype;f.constructor=Xj;
f.create=function(){var a=this.kc=new hg(u.v.Xd.get("nitroBarrel"));a.Ba=this.O;X(a,this);a.create();this.Jb=a.src.Jb;le(a,this.ea);me(a,6E4);u.w.Pf.push(this);Tj.push(this);u.Ta.prototype.create.call(this)};
f.step=function(){if(isNaN(this.ef)){if(u.w.ia){var a=Nd(u.w.ia.b,this.b,new J(0,0,0));a.y=0;a.ka(1);this.transform.G=a.z;this.transform.L=-a.x;this.transform.J=a.x;this.transform.m22=a.z;this.transform.rotate(zc(15),0,0)}a=1+.25*Math.sin(u.l*Math.PI/3)*(1-this.lb/160);this.lb=Math.min(this.lb+2,160);be(this.kc.transform);this.kc.transform.scale(a,a,a);u.l==this.zd+4?this.kc.da=u.v.sb.get("flashWhite"):u.l==this.zd+6?this.kc.da=u.v.sb.get("flashRed"):u.l==this.zd+8&&delete this.kc.da;u.Ta.prototype.step.call(this)}else{a=
u.l-this.ef;var b=1+1/12*a;be(this.kc.transform);this.kc.transform.scale(b,b,b);6==a&&this.Fh()}};f.Ie=function(a){isNaN(this.ef)&&(this.zd=u.l,this.lb-=a,0>=this.lb&&(this.ef=u.l))};
f.Fh=function(){function a(d){var e=Nd(d.b,this.b,new J),h=e.ka(1);if(d instanceof Yj){var g=(h-5E5)/2E6;g=1-g;g=qb(g,0,1);d.Ga+=zc(10)*g}5E5<=h||(d instanceof Y&&(d.lb=0,d.Og()),d instanceof Yj&&(d.Ff=Number.NEGATIVE_INFINITY,d.kg=!0,d.Ga+=zc(10)),h=1E4,e.y+=1,d.s.x+=e.x*h,d.s.y+=e.y*h,d.s.z+=e.z*h)}u.v.ra.get("explode01").play({gain:1});for(var b=q(u.w.Gc),c=b.next();!c.done;c=b.next())c=c.value,Zj(c,this.b),a.call(this,c);b=q(u.w.Pf);for(c=b.next();!c.done;c=b.next())c=c.value,5E5>Nd(c.b,this.b,
new J(0,0,0)).ka(1)&&c.Ie(Number.POSITIVE_INFINITY);b=q(u.w.Wf);for(c=b.next();!c.done;c=b.next())c=c.value,5E5>Nd(c.b,this.b,new J(0,0,0)).ka(1)&&c.Ie(Number.POSITIVE_INFINITY);u.w.ia&&a.call(this,u.w.ia);c=new ak(1E5);c.transform.H=this.b.x;c.transform.m31=this.b.y;c.transform.m32=this.b.z;X(c,u.jd);c.create();this.remove()};f.remove=function(){u.Ta.prototype.remove.call(this);this.kc.remove();u.w.Pf.splice(u.w.Pf.indexOf(this),1);Wj.call(this);kf.splice(kf.indexOf(this.na[0]),this.na.length)};function bk(a){u.Node.call(this,"GunManager "+a.name);this.ha=a;this.ke=[];this.F=null;this.action="ready";this.U=NaN;this.focus=0;this.nc=!1;this.Pg=null;this.ub=this.Tb=this.Mc=0;this.bb=null;this.Le=this.Ke=0;this.ec=[];this.tc=0}bk.prototype=Object.create(u.Node.prototype);f=bk.prototype;f.constructor=bk;
f.create=function(){var a=this.qe=new u.qa("muzzleFlare");ng.call(a);a.Na=sg;a.C=u.v.la.get("image");a.ma=u.v.ba.get("muzzleFlare01");a.da=new pe;a.da.za=1;a.color=new T(255,255,255,0);a.Ra=12500;a.Qa=0;a.Ba=this.ha.kd.O;X(a,u.yd)};
f.step=function(){if(this.F){var a=this.ha;a.Lf=null;var b=a.oc.O,c=new J(b.H,b.m31,b.m32);b=new J(-b.J,-b.m21,-b.m22);for(var d=q(u.w.Gc),e=d.next();!e.done;e=d.next()){e=e.value;var h=Kj(c,b,e.b,e.ua-8E3,e.Wa);if(h.Oe){h=h.Oe;if(0>h.t)continue;if(1E8<=h.t)continue;h=Nd(h.p,c,new J)}else{var g=h.rg.X(),k=h.Ch-(e.ua-8E3);g.x+=h.Fd.x*k;g.y+=h.Fd.y*k;g.z+=h.Fd.z*k;h=Nd(g,c,new J);if(0>=Dc(h,b))continue}Gf(c,h,Hj)||(e.ah=u.l)}if(c=a.Xa.F.pi(a.oc.O))a.Lf=c}--this.tc;0>this.tc&&(this.tc=0);a=q(this.ke);
c=a.next();a:for(;!c.done;c=a.next())if(c=c.value,c!=this.F)for(b=q(c.$h),d=b.next();!d.done;d=b.next())if(Ze.p[d.value]){this.Pg=c;break a}Ye.p[0]&&(this.Tb=1);Ye.r[0]&&(this.Tb=0);Ye.p[2]&&(this.Mc=1);Ye.r[2]&&(this.Mc=0);this.Mc||(this.focus-=1/6,0>this.focus&&(this.focus=0));Ze.p.KeyR&&(this.ub=1);if(this.F)this.F[this.action].call(this);else for(ck(this),a=0;a<this.ec.length;a++)c=this.ec[a],0<c.alpha||(this.ec.splice(a--,1),X(c,null))};
f.Na=function(){if(this.bb){var a=Cd;90>u.l-this.ha.Zg&&(a=0==Math.floor(u.l/3)%2?new T(255,255,255,128):new T(255,255,255,0));v.enable(v.SCISSOR_TEST);u.Ub.zc.N("viewMatrix",ge);u.Ub.zc.upload();u.Db(0);u.Lb(0);u.nb(2);u.tb(tg);u.Va(u.v.la.get("physicalCardThreshold"));u.C.N("color",a);u.C.N("ambientLight",this.ha.ea.pb,!1);a=this.F.constructor.Gi;u.Mb(0,a);var b=Math.round(a.width/2-this.bb.x+this.bb.i+this.Ke),c=Math.round(a.height/2-this.bb.y+this.bb.j+this.Le);v.scissor(this.bb.i+Math.round(this.Ke),
-this.bb.j-Math.round(this.Le)+u.canvas.height-this.bb.g,this.bb.a,this.bb.g);var d=new U;d.G=a.width/u.canvas.width;d.m11=-a.height/u.canvas.height;d.H=-1+2*b/u.canvas.width;d.m31=1-2*c/u.canvas.height;u.C.N("modelMatrix",d);v.drawArrays(v.TRIANGLE_FAN,0,4);v.disable(v.SCISSOR_TEST)}};function ck(a){if(!a.Pg)return!1;a.bb=null;a.Mc=0;a.Tb=0;a.ub=0;a.tc=0;a.nc=!1;a.F=a.Pg;u.w.md();a.action="equip";a.U=u.l+1;a.Pg=null;return!0}
f.qc=function(){var a=400*this.ha.Yd;a*=1-2/3*this.focus;this.Ke=this.ha.Ug*a;this.Le=this.ha.qc*a};bk.W=function(a,b,c,d,e,h){var g=new U;b*=1E5;c*=1E5;a*=1E5;g.rotate(zc(h),zc(e),zc(d));g.scale(1,1,1);g.translate(b,c,a);d=g;e=new U;e.G=d.m22;e.K=d.J;e.L=d.m21;e.I=d.L;e.m11=d.G;e.m12=d.K;e.J=d.m12;e.m21=d.I;e.m22=d.m11;e.H=d.m32;e.m31=d.H;e.m32=d.m31;d=e;e=new U;e.G=d.G;e.K=d.K;e.L=d.L;e.I=d.J;e.m11=d.m21;e.m12=d.m22;e.J=-d.I;e.m21=-d.m11;e.m22=-d.m12;e.H=d.H;e.m31=d.m32;e.m32=-d.m31;return e};
function dk(a){this.bi=a;this.actions={};this.wa=this.ya=this.ab=0;this.od=this.Nd=-1;this.Ph=2/3;this.ng=this.Of=this.Tc=0}function Uj(a){return a.wa+a.ya+a.ab}dk.prototype.uh=function(){return!1};
function ek(a){var b=new J(a.H,a.m31,a.m32);a=new J(-a.J,-a.m21,-a.m22);var c=[];c.cmp=function(m,n){return m.Te>n.Te?-1:1};for(var d=q(u.w.Gc),e=d.next();!e.done;e=d.next())if(e=e.value,e.fb||!(u.l>e.U)){var h=Kj(b,a,e.b,e.ua-8E3,e.Wa);if(h.Oe){var g=h.Oe;0>g.t||1E8<=g.t||(g.p.Te=1E8-g.t,g.p.item=e,kb(c,g.p))}else{g=h.rg.X();var k=h.Ch-(e.ua-8E3);g.x+=h.Fd.x*k;g.y+=h.Fd.y*k;g.z+=h.Fd.z*k;k=Nd(h.rg,b,new J);h=k.ka(1);var l=Nd(g,b,new J);0>=Dc(l,a)||(l.normalize(),k=Dc(k,l),l=this.ng,5E5<h&&(l=Math.atan(5E5*
Math.tan(l)/h)),Math.acos(k)>=l||(g.Te=k-1,g.item=e,kb(c,g)))}}a=q(c);for(c=a.next();!c.done;c=a.next())if(c=c.value,!Gf(b,Nd(c,b,new J)))return c;return null}
function fk(a,b,c){function d(m){m=new gk(m);m.transform.H=a.p.x;m.transform.m31=a.p.y;m.transform.m32=a.p.z;X(m,u.jd);m.create();m.step()}function e(){var m=new hk;m.$g=120*(E(x)+.5);m.Ra=2E4;m.transform.H=a.p.x;m.transform.m31=a.p.y;m.transform.m32=a.p.z;m.s.x=a.n.x;m.s.y=a.n.y;m.s.z=a.n.z;m.s.scale(2E4*E(x)+1E4);X(m,u.jd);m.create();m.step()}if(a.item instanceof Y){var h=new U,g=new J,k=new J,l=a.Nb.X();Kc(l,g,k);h.zf(g);h.Af(k);h.Bf(l);fe(h,a.p);ik(a.item,h,c);X(new jk,u.qk);a.item.Ie(b)}else a.item instanceof
Xj?(d(31250),e(),a.item.Ie(b)):a.item instanceof Sj?(d(31250),e(),a.item.Ie(b)):(d(12500),e(),Hg(u.w.Qi,new J(2343.75*Math.round(a.p.x/2343.75),2343.75*Math.round(a.p.y/2343.75),2343.75*Math.round(a.p.z/2343.75)),a.n,Math.PI,18750,Ob(16),16))}function kk(a){dk.call(this,a);this.Nd=150;this.od=30;this.wa=1;this.ya=this.od-this.wa;this.ab=this.Nd-this.ya-this.wa;this.Ph=1;this.ng=zc(12)}kk.prototype=Object.create(dk.prototype);kk.prototype.constructor=kk;
kk.$a={CarbineEquip02:{i:291,j:265,x:1204,y:1548,a:189,g:31},CarbineEquip03:{i:90,j:191,x:814,y:1548,a:390,g:105},CarbineEquip04:{i:126,j:152,x:0,y:1548,a:354,g:144},CarbineEquip05:{i:46,j:96,x:1012,y:255,a:434,g:200},CarbineEquip06:{i:92,j:68,x:1281,y:0,a:356,g:228},CarbineEquip07:{i:106,j:65,x:960,y:0,a:321,g:231},CarbineEquip08:{i:129,j:76,x:0,y:255,a:282,g:220},CarbineEquip09:{i:145,j:91,x:282,y:255,a:250,g:205},CarbineEquip10:{i:163,j:109,x:1231,y:670,a:220,g:187},CarbineEquip11:{i:184,j:125,
x:292,y:1047,a:220,g:171},CarbineEquip12:{i:198,j:133,x:1541,y:1047,a:253,g:163},CarbineEquip13:{i:207,j:132,x:1296,y:1047,a:245,g:164},CarbineAim01:{i:194,j:133,x:0,y:1225,a:229,g:163},CarbineAim02:{i:170,j:136,x:1247,y:1225,a:187,g:160},CarbineAim03:{i:157,j:137,x:184,y:1388,a:174,g:159},CarbineFire01:{i:209,j:131,x:1030,y:1047,a:266,g:165},CarbineFire02:{i:213,j:128,x:512,y:1047,a:246,g:168},CarbineFire03:{i:212,j:133,x:229,y:1225,a:248,g:163},CarbineAimFire01:{i:147,j:136,x:1434,y:1225,a:193,
g:160},CarbineAimFire02:{i:152,j:136,x:0,y:1388,a:184,g:160},CarbineAimFire03:{i:155,j:134,x:730,y:1225,a:178,g:162},CarbineReload01:{i:185,j:133,x:477,y:1225,a:253,g:163},CarbineReload02:{i:101,j:134,x:908,y:1225,a:339,g:162},CarbineReload03:{i:14,j:144,x:838,y:1388,a:432,g:152},CarbineReload04:{i:0,j:153,x:354,y:1548,a:460,g:143},CarbineReload05:{i:0,j:149,x:1270,y:1388,a:480,g:147},CarbineReload06:{i:0,j:139,x:358,y:1388,a:480,g:157},CarbineReload07:{i:0,j:107,x:271,y:670,a:480,g:189},CarbineReload08:{i:0,
j:41,x:0,y:0,a:480,g:255},CarbineReload09:{i:0,j:47,x:480,y:0,a:480,g:249},CarbineReload10:{i:0,j:95,x:532,y:255,a:480,g:201},CarbineReload11:{i:0,j:107,x:751,y:670,a:480,g:189},CarbineReload12:{i:0,j:111,x:311,y:860,a:480,g:185},CarbineReload13:{i:0,j:114,x:791,y:860,a:480,g:182},CarbineReload14:{i:59,j:115,x:1271,y:860,a:421,g:181},CarbineReload15:{i:200,j:109,x:1451,y:670,a:280,g:187},CarbineReload16:{i:235,j:103,x:309,y:475,a:245,g:193},CarbineReload17:{i:246,j:104,x:838,y:475,a:234,g:192},CarbineReload18:{i:241,
j:105,x:1072,y:475,a:239,g:191},CarbineReload19:{i:209,j:106,x:0,y:670,a:271,g:190},CarbineReload20:{i:172,j:99,x:1446,y:255,a:308,g:197},CarbineReload21:{i:171,j:101,x:0,y:475,a:309,g:195},CarbineReload22:{i:196,j:103,x:554,y:475,a:284,g:193},CarbineReload23:{i:164,j:105,x:1311,y:475,a:316,g:191},CarbineReload24:{i:158,j:109,x:0,y:860,a:311,g:187},CarbineReload25:{i:173,j:118,x:0,y:1047,a:292,g:178},CarbineReload26:{i:175,j:128,x:758,y:1047,a:272,g:168}};
kk.prototype.fire=function(){var a=u.l-this.U;this.qc();if(0==a){u.v.ra.get("CarbineFire01").play({gain:.5,pitch:1.5});u.v.ra.get("CarbineFire02").play({gain:1,pitch:1.5});this.F.wa=0;1<=this.F.ya?(--this.F.ya,this.F.wa=1):this.ub=1;u.w.md();this.tc+=35;this.jc=bk.W(.053697,.319573,-.058355,-.833,.006,-179.61);var b=this.qe;b.Qa=1;var c=255*(4*E(x)+1)/12&255;b.color.r=c;b.color.Oa=c;b.color.ga=c;b.scale=E(x)+1;b.wc=Ac(Nb());c=new U;c.translate(0,-35E3,0);ce(this.jc,c,b.transform);b=(new U).rotate(0,
zc(2.5*E(x)),0);c=(new U).rotate(0,0,E(x)*Math.PI*2);var d=lk(this.ha);ce(d,c,d);ce(d,b,d);b=this.F.ve(d);b=q(b);for(c=b.next();!c.done;c=b.next())fk(c.value,120,1.2);b=new mk("CartridgeCarbineSpent");b.vi=zc(6*(3*E(x)+1));b.transform.m31-=2100;c=new U;ce(this.ha.kd.O,this.jc,c);ce(c,b.transform,b.transform);b.s.x-=3E3*(2*E(x)+1);b.s.z=-b.s.x;de(c,b.s,b.s);b.b.set(b.transform.H,b.transform.m31,b.transform.m32);b.s.add(this.ha.s);Pd(b.s,b.cb);X(b,u.yd);b.create();180<=this.tc&&(this.tc-=180,b=new nk,
b.Ra=6E4,b.transform.m31-=45E3,c=new U,ce(this.ha.kd.O,this.jc,c),ce(c,b.transform,b.transform),b.s.y=-37500,de(c,b.s,b.s),b.s.add(this.ha.s),Pd(b.s,b.cb),b.ea=this.ha.ea,X(b,u.jd),b.create(),b.step(),this.ec.push(b));3<this.ec.length&&(X(this.ec[0],null),this.ec.splice(0,1))}1==a&&(this.qe.Qa=0);2==a&&(this.ha.Ga+=zc(1));if(3<=a){if(ck(this))return;if(!this.Mc&&this.Tb){if(this.F.wa){this.action="fire";this.U=u.l+1;return}this.ub=1}this.F.Rd()}4<=a?this.action="ready":(a=("00"+a).slice(-2),this.bb=
this.F.constructor.$a["CarbineFire"+a]||this.F.constructor.$a.CarbineEquip13)};
kk.prototype.aimFire=function(){var a=u.l-this.U;this.qc();if(0==a){u.v.ra.get("CarbineFire01").play({gain:.5,pitch:1.5});u.v.ra.get("CarbineFire02").play({gain:1,pitch:1.5});this.F.wa=0;1<=this.F.ya?(--this.F.ya,this.F.wa=1):this.ub=1;u.w.md();this.tc+=35;this.jc=bk.W(0,.270042,-.06106,0,0,180);var b=this.qe;b.Qa=1;var c=255*(4*E(x)+1)/12&255;b.color.r=c;b.color.Oa=c;b.color.ga=c;b.scale=E(x)+1;b.wc=Ac(Nb());c=new U;c.translate(0,-35E3,0);ce(this.jc,c,b.transform);b=(new U).rotate(0,zc(1*E(x)),0);
c=(new U).rotate(0,0,E(x)*Math.PI*2);var d=lk(this.ha);ce(d,c,d);ce(d,b,d);b=this.F.ve(d);b=q(b);for(c=b.next();!c.done;c=b.next())fk(c.value,120,1.2);b=new mk("CartridgeCarbineSpent");b.vi=zc(6*(3*E(x)+1));b.transform.m31-=2100;c=new U;ce(this.ha.kd.O,this.jc,c);ce(c,b.transform,b.transform);b.s.x-=3E3*(2*E(x)+1);b.s.z=-b.s.x;de(c,b.s,b.s);b.b.set(b.transform.H,b.transform.m31,b.transform.m32);b.s.add(this.ha.s);Pd(b.s,b.cb);X(b,u.yd);b.create();210<=this.tc&&(this.tc-=210,b=new nk,b.Ra=4E4,b.scale=
1,b.transform.m31-=45E3,c=new U,ce(this.ha.kd.O,this.jc,c),ce(c,b.transform,b.transform),b.s.y=-2E4,de(c,b.s,b.s),b.s.add(this.ha.s),Pd(b.s,b.cb),b.ea=this.ha.ea,X(b,u.jd),b.create(),b.step(),this.ec.push(b));3<this.ec.length&&(X(this.ec[0],null),this.ec.splice(0,1))}1==a&&(this.qe.Qa=0);2==a&&(this.ha.Ga+=zc(.5));if(3<=a){if(ck(this))return;if(this.Mc&&this.Tb){if(this.F.wa){this.action="aimFire";this.U=u.l+1;return}this.ub=1}}4<=a?this.action="ready":(a=("00"+a).slice(-2),this.bb=this.F.constructor.$a["CarbineAimFire"+
a]||this.F.constructor.$a.CarbineAim03)};
kk.prototype.equip=function(){var a=u.l-this.U+5;if(!ck(this))if(this.ub)this.action="reload",this.U=u.l+1;else{this.nc=this.F.wa;this.Le=this.Ke=0;9==a&&(this.ha.Ga+=zc(1));a=Math.floor(a/2.5);if(9<=a)if(this.F.mf.call(this),1==this.focus){if(this.Tb){if(this.F.wa){this.action="aimFire";this.U=u.l+1;return}this.ub=1}}else if(0==this.focus&&this.Tb){if(this.F.wa){this.action="fire";this.U=u.l+1;return}this.ub=1}14<=a?this.action="ready":0==this.focus&&(a=("00"+a).slice(-2),this.bb=this.F.constructor.$a["CarbineEquip"+
a])}};kk.prototype.reload=function(){var a=u.l-this.U+3;this.ub=0;if(!ck(this)){this.nc=!1;this.Le=this.Ke=0;3==a&&(this.F.ab+=this.F.ya,this.F.ya=0,this.F.ab+=this.F.wa,this.F.wa=0,u.w.md());if(60==a){this.ha.Ga+=zc(1);var b=Math.min(this.F.od-this.F.ya-this.F.wa,this.F.ab);this.F.ya+=b;this.F.ab-=b;!this.F.wa&&0<this.F.ya&&(--this.F.ya,this.F.wa+=1);u.w.md()}a=Math.floor(a/3);27<=a?this.action="ready":(a=("00"+a).slice(-2),this.bb=this.F.constructor.$a["CarbineReload"+a])}};
kk.prototype.ready=function(){if(!ck(this))if(this.ub)this.action="reload",this.U=u.l+1;else{this.qc();this.F.mf.call(this);if(1==this.focus){if(this.Tb){if(this.F.wa){this.action="aimFire";this.U=u.l+1;return}this.ub=1}}else if(0==this.focus&&this.Tb){if(this.F.wa){this.action="fire";this.U=u.l+1;return}this.ub=1}this.F.Rd()}};f=kk.prototype;
f.mf=function(){this.Mc?(this.focus+=1/6,1<this.focus&&(this.focus=1)):this.nc=!0;if(0<this.focus){var a=Math.floor(3*this.focus);a=("00"+a).slice(-2);this.bb=this.F.constructor.$a["CarbineAim"+a]||this.F.constructor.$a.CarbineEquip13}else this.bb=this.F.constructor.$a.CarbineEquip13};f.pi=ek;
f.ve=function(a){var b=new J(a.H,a.m31,a.m32),c=new J(-a.J,-a.m21,-a.m22),d=1E8;if(a=Gf(b,new J(c.x*d,c.y*d,c.z*d)))d=a.d;var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=q(u.w.Gc),g=h.next();!g.done;g=h.next())if(g=g.value,g.fb||!(u.l>g.U)){var k=Kj(b,c,g.b,g.ua,g.Wa).Oe;!k||0>k.t||k.t>=d||(k.item=g,k.Nb=c,kb(e,k))}b=null;d=c=NaN;e=q(e);for(h=e.next();!h.done;h=e.next())h=h.value,h.item.Vg>c||h.item.Vg==c&&h.t>d||(b=h,
c=h.item.Vg,d=h.t);e=[];b&&e.push(b);a&&e.push(a);return e};f.uh=function(){return"reload"==this.bi.action||10<this.ya+this.wa?!1:!0};f.Rd=function(){this.ya+this.wa>=this.od||!this.ab?this.Tc=0:(this.Tc+=1,7.8<=this.Tc&&(this.Tc-=7.8,--this.ab,this.ya+=1))};function ok(a){dk.call(this,a);this.Nd=20;this.od=0;this.wa=1;this.ya=this.od;this.ab=this.Nd-this.ya-this.wa;this.ui=!1;this.ng=zc(12)}ok.prototype=Object.create(dk.prototype);ok.prototype.constructor=ok;
ok.$a={ShotgunEquip01:{i:170,j:185,x:874,y:1644,a:310,g:111},ShotgunEquip02:{i:183,j:151,x:569,y:1351,a:297,g:145},ShotgunEquip03:{i:331,j:128,x:1175,y:704,a:149,g:168},ShotgunEquip04:{i:111,j:20,x:871,y:0,a:369,g:276},ShotgunEquip05:{i:140,j:0,x:0,y:0,a:340,g:296},ShotgunEquip06:{i:158,j:0,x:340,y:0,a:277,g:296},ShotgunEquip07:{i:173,j:0,x:617,y:0,a:254,g:296},ShotgunEquip08:{i:188,j:100,x:0,y:508,a:257,g:196},ShotgunEquip09:{i:195,j:152,x:1432,y:1351,a:258,g:144},ShotgunEquip10:{i:199,j:159,x:0,
y:1644,a:257,g:137},ShotgunEquip11:{i:201,j:160,x:257,y:1644,a:253,g:136},ShotgunEquip12:{i:197,j:156,x:1248,y:1500,a:254,g:140},ShotgunEquip13:{i:195,j:152,x:0,y:1500,a:254,g:144},ShotgunFire01:{i:202,j:152,x:254,y:1500,a:278,g:144},ShotgunFire02:{i:181,j:147,x:0,y:1351,a:299,g:149},ShotgunFire03:{i:175,j:133,x:0,y:884,a:305,g:163},ShotgunFire04:{i:177,j:118,x:299,y:704,a:303,g:178},ShotgunFire05:{i:182,j:112,x:651,y:508,a:298,g:184},ShotgunFire06:{i:184,j:112,x:949,y:508,a:296,g:184},ShotgunFire07:{i:183,
j:113,x:1245,y:508,a:297,g:183},ShotgunFire08:{i:181,j:116,x:0,y:704,a:299,g:180},ShotgunFire09:{i:187,j:120,x:602,y:704,a:293,g:176},ShotgunFire10:{i:200,j:125,x:895,y:704,a:280,g:171},ShotgunFire11:{i:211,j:132,x:1324,y:704,a:269,g:164},ShotgunFire12:{i:215,j:139,x:305,y:884,a:265,g:157},ShotgunFire13:{i:212,j:145,x:1320,y:1199,a:268,g:151},ShotgunFire14:{i:203,j:149,x:299,y:1351,a:270,g:147},ShotgunFire15:{i:196,j:152,x:532,y:1500,a:256,g:144},ShotgunCycle01:{i:187,j:139,x:570,y:884,a:209,g:157},
ShotgunCycle02:{i:162,j:109,x:475,y:508,a:176,g:187},ShotgunCycle03:{i:123,j:88,x:1399,y:296,a:176,g:208},ShotgunCycle04:{i:101,j:84,x:0,y:296,a:176,g:212},ShotgunCycle05:{i:103,j:84,x:176,y:296,a:174,g:212},ShotgunCycle06:{i:126,j:84,x:350,y:296,a:173,g:212},ShotgunCycle07:{i:126,j:86,x:1220,y:296,a:179,g:210},ShotgunCycle08:{i:127,j:85,x:1045,y:296,a:175,g:211},ShotgunCycle09:{i:126,j:84,x:523,y:296,a:173,g:212},ShotgunCycle10:{i:123,j:84,x:696,y:296,a:173,g:212},ShotgunCycle11:{i:101,j:84,x:869,
y:296,a:176,g:212},ShotgunCycle12:{i:97,j:82,x:1240,y:0,a:181,g:214},ShotgunCycle13:{i:93,j:83,x:1421,y:0,a:192,g:213},ShotgunCycle14:{i:114,j:108,x:257,y:508,a:218,g:188},ShotgunCycle15:{i:166,j:139,x:779,y:884,a:250,g:157},ShotgunReload01:{i:196,j:153,x:788,y:1500,a:230,g:143},ShotgunReload02:{i:209,j:156,x:1502,y:1500,a:158,g:140},ShotgunReload03:{i:183,j:164,x:510,y:1644,a:182,g:132},ShotgunReload04:{i:150,j:151,x:866,y:1351,a:283,g:145},ShotgunReload05:{i:124,j:144,x:1029,y:884,a:356,g:152},
ShotgunReload06:{i:108,j:144,x:1385,y:884,a:372,g:152},ShotgunReload07:{i:108,j:144,x:0,y:1047,a:372,g:152},ShotgunReload08:{i:108,j:144,x:372,y:1047,a:308,g:152},ShotgunReload09:{i:108,j:144,x:680,y:1047,a:262,g:152},ShotgunReload10:{i:108,j:144,x:942,y:1047,a:262,g:152},ShotgunReload11:{i:107,j:144,x:1204,y:1047,a:373,g:152},ShotgunReload12:{i:108,j:144,x:0,y:1199,a:262,g:152},ShotgunReload13:{i:108,j:144,x:262,y:1199,a:262,g:152},ShotgunReload14:{i:108,j:144,x:524,y:1199,a:262,g:152},ShotgunReload15:{i:108,
j:144,x:786,y:1199,a:262,g:152},ShotgunReload16:{i:124,j:144,x:1048,y:1199,a:272,g:152},ShotgunReload17:{i:150,j:151,x:1149,y:1351,a:283,g:145},ShotgunReload18:{i:183,j:164,x:692,y:1644,a:182,g:132},ShotgunReload19:{i:209,j:156,x:1588,y:1199,a:158,g:140},ShotgunReload20:{i:196,j:153,x:1018,y:1500,a:230,g:143}};
ok.prototype.equip=function(){var a=u.l-this.U+2;ck(this)||(this.nc=this.F.wa,9==a&&(this.ha.Ga+=zc(1)),a=Math.floor(a/2.5),9<=a&&this.Tb&&this.F.wa?(this.action="fire",this.U=u.l+1,this.Tb=0):9<=a&&(this.Mc||!this.F.wa&&this.F.ab)?(this.action="cycleOpen",this.U=u.l+1-6):14<=a?this.action="ready":(a=("00"+a).slice(-2),this.bb=this.F.constructor.$a["ShotgunEquip"+a],this.Le=this.Ke=0))};
ok.prototype.ready=function(){ck(this)||(this.nc=this.F.wa,this.Tb&&this.F.wa?(this.action="fire",this.U=u.l+1,this.Tb=0):this.Mc?(this.action="cycleOpen",this.U=u.l+1,this.nc=!1):(this.qc(),this.F.Rd(),this.bb=this.F.constructor.$a.ShotgunEquip13))};
ok.prototype.fire=function(){var a=u.l-this.U;this.qc();this.nc=!1;if(0==a){u.v.ra.get("ShotgunFire01").play({gain:1,pitch:.75});u.v.ra.get("explode01").play({gain:.5,pitch:1.5});this.F.wa=0;this.F.ui=!0;u.w.md();this.jc=bk.W(.04499,.31957,-.038305,-.596,.007,-179.3);var b=this.qe;b.Qa=1;var c=255*(E(x)+4)/5&255;b.color.r=c;b.color.Oa=c;b.color.ga=c;b.scale=E(x)+1;b.wc=Ac(Nb());c=new U;c.translate(0,-4E4,0);ce(this.jc,c,b.transform);b=lk(this.ha);var d=ok.qb.length;c=Array(d);for(var e=0;e<d;e++){var h=
Ob(e+1);h!=e&&(c[e]=c[h]);c[h]=e}d=E(x)*Math.Kf;for(e=0;e<c.length;e++){h=(new U).rotate(0,ok.qb[8-e],0);var g=(new U).rotate(0,0,d+c[e]*Math.Kf/9),k=new U;ce(b,g,k);ce(k,h,k);g=this.F.ve(k);h=720;g=q(g);for(k=g.next();!k.done;k=g.next()){k=k.value;var l=h;k.item instanceof Y&&(l=Math.min(h,k.item.lb));fk(k,l,1.2);h-=l;if(0>=h)break}}b=new nk;b.Ra=6E4;b.scale=1;b.transform.m31-=45E3;c=new U;ce(this.ha.kd.O,this.jc,c);ce(c,b.transform,b.transform);b.s.y=-37500;de(c,b.s,b.s);b.s.add(this.ha.s);Pd(b.s,
b.cb);b.ea=this.ha.ea;X(b,u.jd);b.create();b.step();this.ec.push(b);3<this.ec.length&&(X(this.ec[0],null),this.ec.splice(0,1));this.ha.Ga+=zc(2)}1==a&&(this.qe.Qa=0);3==a&&(this.ha.Ga+=zc(4));if(4<=a){if(ck(this))return;if(this.Mc){this.action="cycleOpen";this.U=u.l+1;return}this.F.Rd()}7<=a&&(a=7+Math.floor((a-7)/4));16<=a?this.action="ready":(a=("00"+a).slice(-2),this.bb=this.F.constructor.$a["ShotgunFire"+a]||this.F.constructor.$a.ShotgunEquip13)};
ok.prototype.cycleOpen=function(){var a=u.l-this.U;if(!ck(this)){this.nc=!1;this.qc();12==a&&u.v.ra.get("ShotgunOpen01").play({gain:1});if(21==a){this.ha.Ga+=zc(1);this.F.ab+=this.F.wa;this.jc=bk.W(-.018192,.25469,-.045699,-19.3,39.9,177);if(this.F.ui||this.F.wa){var b=new mk("CartridgeShotgunSpent");b.vi=zc(24*(1*E(x)+1));b.transform.m31+=6E3;var c=new U;ce(this.ha.kd.O,this.jc,c);ce(c,b.transform,b.transform);b.s.x-=2E3*(2*E(x)+1);b.s.z=2*-b.s.x;de(c,b.s,b.s);b.b.set(b.transform.H,b.transform.m31,
b.transform.m32);b.s.add(this.ha.s);Pd(b.s,b.cb);X(b,u.yd);b.create();this.F.ui=!1}this.F.wa=0}a=Math.floor(a/3);if(9<=a){a=9;if(!this.Mc){this.action="cycleShut";this.U=u.l+1-27;return}this.F.Rd()}a=("00"+a).slice(-2);this.bb=this.F.constructor.$a["ShotgunCycle"+a]||this.F.constructor.$a.ShotgunEquip13}};
ok.prototype.cycleShut=function(){var a=u.l-this.U;ck(this)||(this.qc(),30==a&&(u.v.ra.get("ShotgunShut01").play({gain:1}),1<=this.F.ab&&(--this.F.ab,this.F.wa+=1),u.w.md()),39==a&&(this.nc=this.F.wa),a=Math.floor(a/3),13<=a&&ck(this)||(16<=a?this.action="ready":(a=("00"+a).slice(-2),this.bb=this.F.constructor.$a["ShotgunCycle"+a]||this.F.constructor.$a.ShotgunEquip13)))};ok.prototype.pi=ek;
ok.prototype.ve=function(a){var b=new J(a.H,a.m31,a.m32);a=new J(-a.J,-a.m21,-a.m22);var c=1E8,d=Gf(b,new J(a.x*c,a.y*c,a.z*c));d&&(c=d.d);var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=q(u.w.Gc),g=h.next();!g.done;g=h.next())if(g=g.value,g.fb||!(u.l>g.U)){var k=Jj(b,a,g.b,g.ua,g.Wa+g.ua);!k||0>k.t||k.t>=c||(k.item=g,k.Nb=a,kb(e,k))}d&&e.push(d);return e};ok.prototype.uh=function(){return!1};ok.prototype.Rd=function(){};
function pk(a){dk.call(this,a);this.Nd=24;this.ya=this.od=6;this.ab=this.Nd-this.ya;this.ng=zc(12)}pk.prototype=Object.create(dk.prototype);pk.prototype.constructor=pk;
pk.$a={RevolverEquip00:{i:0,j:255,x:799,y:1715,a:480,g:41},RevolverEquip01:{i:32,j:246,x:351,y:1715,a:448,g:50},RevolverEquip02:{i:129,j:224,x:0,y:1715,a:351,g:72},RevolverEquip03:{i:180,j:199,x:1327,y:1595,a:300,g:97},RevolverEquip04:{i:193,j:176,x:1215,y:1456,a:287,g:120},RevolverEquip05:{i:194,j:157,x:0,y:1456,a:249,g:139},RevolverEquip06:{i:184,j:144,x:1247,y:854,a:232,g:152},RevolverEquip07:{i:172,j:148,x:1158,y:1009,a:255,g:148},RevolverAim01:{i:178,j:152,x:906,y:1309,a:226,g:144},RevolverAim02:{i:150,
j:150,x:692,y:1309,a:214,g:146},RevolverAim03:{i:133,j:148,x:1413,y:1009,a:208,g:148},RevolverFire01:{i:184,j:149,x:1032,y:1161,a:238,g:147},RevolverFire02:{i:184,j:149,x:1270,y:1161,a:238,g:147},RevolverFire03:{i:184,j:149,x:1508,y:1161,a:238,g:147},RevolverFire04:{i:184,j:149,x:0,y:1309,a:238,g:147},RevolverFire05:{i:195,j:149,x:238,y:1309,a:217,g:147},RevolverFire06:{i:201,j:111,x:1504,y:266,a:148,g:185},RevolverFire07:{i:197,j:71,x:193,y:266,a:144,g:225},RevolverFire08:{i:212,j:100,x:634,y:266,
a:192,g:196},RevolverFire09:{i:173,j:114,x:486,y:494,a:253,g:182},RevolverFire10:{i:180,j:111,x:0,y:494,a:242,g:185},RevolverFire11:{i:176,j:113,x:242,y:494,a:244,g:183},RevolverFire12:{i:169,j:126,x:361,y:679,a:266,g:170},RevolverFire13:{i:171,j:139,x:1382,y:679,a:269,g:157},RevolverFire14:{i:171,j:147,x:900,y:1009,a:258,g:149},RevolverFire15:{i:185,j:149,x:455,y:1309,a:237,g:147},RevolverAimFire01:{i:133,j:148,x:1479,y:854,a:208,g:148},RevolverAimFire02:{i:133,j:148,x:0,y:1161,a:208,g:148},RevolverAimFire03:{i:133,
j:148,x:208,y:1161,a:208,g:148},RevolverAimFire04:{i:133,j:148,x:416,y:1161,a:208,g:148},RevolverAimFire05:{i:138,j:148,x:624,y:1161,a:200,g:148},RevolverAimFire06:{i:144,j:119,x:1054,y:494,a:168,g:177},RevolverAimFire07:{i:140,j:87,x:337,y:266,a:146,g:209},RevolverAimFire08:{i:153,j:110,x:1311,y:266,a:193,g:186},RevolverAimFire09:{i:126,j:121,x:0,y:679,a:219,g:175},RevolverAimFire10:{i:135,j:119,x:1222,y:494,a:211,g:177},RevolverAimFire11:{i:130,j:120,x:1433,y:494,a:211,g:176},RevolverAimFire12:{i:126,
j:130,x:955,y:679,a:219,g:166},RevolverAimFire13:{i:127,j:141,x:0,y:854,a:219,g:155},RevolverAimFire14:{i:131,j:146,x:688,y:1009,a:212,g:150},RevolverAimFire15:{i:133,j:148,x:824,y:1161,a:208,g:148},RevolverReload01:{i:179,j:135,x:1174,y:679,a:208,g:161},RevolverReload02:{i:168,j:104,x:826,y:266,a:178,g:192},RevolverReload03:{i:140,j:68,x:0,y:266,a:193,g:228},RevolverReload04:{i:114,j:40,x:1295,y:0,a:206,g:256},RevolverReload05:{i:99,j:30,x:0,y:0,a:214,g:266},RevolverReload06:{i:102,j:30,x:214,y:0,
a:227,g:266},RevolverReload07:{i:103,j:31,x:441,y:0,a:250,g:265},RevolverReload08:{i:107,j:33,x:895,y:0,a:200,g:263},RevolverReload09:{i:101,j:31,x:691,y:0,a:204,g:265},RevolverReload10:{i:106,j:38,x:1095,y:0,a:200,g:258},RevolverReload11:{i:129,j:60,x:1501,y:0,a:180,g:236},RevolverReload12:{i:161,j:92,x:483,y:266,a:151,g:204},RevolverReload13:{i:173,j:123,x:219,y:679,a:142,g:173},RevolverReload14:{i:173,j:106,x:1004,y:266,a:307,g:190},RevolverReload15:{i:165,j:114,x:739,y:494,a:315,g:182},RevolverReload16:{i:152,
j:129,x:627,y:679,a:328,g:167},RevolverReload17:{i:140,j:141,x:219,y:854,a:340,g:155},RevolverReload18:{i:136,j:143,x:559,y:854,a:344,g:153},RevolverReload19:{i:136,j:144,x:0,y:1009,a:344,g:152},RevolverReload20:{i:136,j:144,x:344,y:1009,a:344,g:152},RevolverReload21:{i:136,j:143,x:903,y:854,a:344,g:153},RevolverReload22:{i:136,j:152,x:1132,y:1309,a:344,g:144},RevolverReload23:{i:140,j:173,x:875,y:1456,a:340,g:123},RevolverReload24:{i:147,j:183,x:338,y:1595,a:333,g:113},RevolverReload25:{i:151,j:186,
x:998,y:1595,a:329,g:110},RevolverReload26:{i:153,j:183,x:671,y:1595,a:327,g:113},RevolverReload27:{i:142,j:176,x:0,y:1595,a:338,g:120},RevolverReload28:{i:155,j:168,x:550,y:1456,a:325,g:128},RevolverReload29:{i:156,j:160,x:249,y:1456,a:301,g:136},RevolverReload30:{i:166,j:155,x:1476,y:1309,a:269,g:141}};
pk.prototype.equip=function(){var a=u.l-this.U;if(!ck(this))if(this.ub)this.action="reload",this.U=u.l+1;else{this.nc=!0;0==a&&(this.ha.Ga+=zc(1));a=Math.floor(a/2.5);if(5<=a&&(this.F.mf.call(this),this.Tb)){if(this.F.ya){this.action="fire";this.U=u.l+1;return}this.ub=1}8<=a?this.action="ready":0==this.focus&&(a=("00"+a).slice(-2),this.bb=this.F.constructor.$a["RevolverEquip"+a])}};
pk.prototype.ready=function(){if(!ck(this))if(this.nc=!0,this.ub)this.action="reload",this.U=u.l+1;else{if(this.Tb){if(this.F.ya){this.action="fire";this.U=u.l+1;return}this.ub=1}this.qc();this.F.mf.call(this);this.F.Rd()}};
pk.prototype.fire=function(){var a=u.l-this.U;this.qc();if(4==a){u.v.ra.get("CarbineFire01").play({gain:1,pitch:1});u.v.ra.get("ShotgunFire01").play({gain:.5,pitch:1.5});this.Tb=0;this.F.ya--;this.F.ya||(this.ub=1);u.w.md();this.jc=.5<this.focus?bk.W(0,.49195,-.017475,-.713,0,0):bk.W(.032225,.49195,-.022213,.367,-.151,.525);var b=this.qe;b.Qa=1;var c=255*(E(x)+4)/5&255;b.color.r=c;b.color.Oa=c;b.color.ga=c;b.scale=E(x)+1;b.wc=Ac(Nb());c=new U;c.translate(0,-21E3,0);ce(this.jc,c,b.transform);b=new nk;
b.Ra=6E4;b.scale=1;b.transform.m31-=45E3;c=new U;ce(this.ha.kd.O,this.jc,c);ce(c,b.transform,b.transform);b.s.y=-37500;de(c,b.s,b.s);b.s.add(this.ha.s);Pd(b.s,b.cb);b.ea=this.ha.ea;X(b,u.jd);b.create();b.step();this.ec.push(b);b=(new U).rotate(0,zc(0*E(x)),0);c=(new U).rotate(0,0,E(x)*Math.PI*2);var d=lk(this.ha);ce(d,c,d);ce(d,b,d);b=this.F.ve(d);b=q(b);for(c=b.next();!c.done;c=b.next()){c=c.value;d=c.item instanceof Y?3:1;for(var e=0;e<d;e++)fk(c,360,1.7)}}5==a&&(this.qe.Qa=0);7==a&&(this.ha.Ga+=
zc(3));if(7<=a){if(ck(this))return;a=7+Math.floor((a-7)/3)}if(13<=a){if(this.Tb){if(this.F.ya){this.action="fire";this.U=u.l+1;return}this.ub=1}if(this.ub){this.action="reload";this.U=u.l+1;return}this.F.Rd()}16<=a?this.action="ready":(a=("00"+a).slice(-2),this.F.mf.call(this),this.bb=.5<this.focus?this.F.constructor.$a["RevolverAimFire"+a]||this.F.constructor.$a.RevolverAim03:this.F.constructor.$a["RevolverFire"+a]||this.F.constructor.$a.RevolverEquip07)};
pk.prototype.reload=function(){var a=u.l-this.U+3;this.ub=0;if(!ck(this)){this.nc=!1;this.Le=this.Ke=0;24==a&&(this.ha.Ga+=zc(.5),this.F.ab+=this.F.ya,this.F.ya=0,u.w.md());if(57==a){this.ha.Ga+=zc(1);var b=Math.min(this.F.od-this.F.ya,this.F.ab);this.F.ya+=b;this.F.ab-=b;u.w.md()}a=Math.floor(a/3);31<=a?this.action="ready":(a=("00"+a).slice(-2),this.bb=this.F.constructor.$a["RevolverReload"+a])}};f=pk.prototype;
f.mf=function(){this.Mc?(this.focus+=1/6,1<this.focus&&(this.focus=1)):this.nc=!0;if(0<this.focus){var a=Math.floor(3*this.focus);a=("00"+a).slice(-2);this.bb=this.F.constructor.$a["RevolverAim"+a]||this.F.constructor.$a.RevolverEquip07}else this.bb=this.F.constructor.$a.RevolverEquip07};f.pi=function(a){return.5<this.bi.focus?qk(this,a):ek.call(this,a)};
function qk(a,b){function c(n){var r=Nd(n,d,new J);n=r.length();var p=26512.5/n;r=If(d,r);for(var t=0,z=!0;;){var w=r.shift();if(!w){if(!z){t+=p;break}t=1;break}if(!z){z=w.t-t;if(z>p){t+=p;break}p-=z}t=w.t;z=!w.Fa}return t*n>=n-1E3}var d=new J(b.H,b.m31,b.m32),e=new J(-b.J,-b.m21,-b.m22);b=[];b.cmp=function(n,r){return n.Te>r.Te?-1:1};for(var h=q(u.w.Gc),g=h.next();!g.done;g=h.next())if(g=g.value,(g.fb||!(u.l>g.U))&&600>u.l-g.ah){var k=Kj(d,e,g.b,g.ua-8E3,g.Wa);if(k.Oe){var l=k.Oe;0>l.t||1E8<=l.t||
(l.p.Te=1E8-l.t,l.p.item=g,kb(b,l.p))}else{l=k.rg.X();var m=k.Ch-(g.ua-8E3);l.x+=k.Fd.x*m;l.y+=k.Fd.y*m;l.z+=k.Fd.z*m;k=Nd(k.rg,d,new J).normalize();m=Nd(l,d,new J).normalize();0>=Dc(m,e)||(k=Dc(k,m),l.Te=k-1,l.item=g,kb(b,l),Math.acos(k)>=a.ng&&(l.lk=!0))}}a=null;b=q(b);for(e=b.next();!e.done;e=b.next())e=e.value,c(e)&&(e.item.fk=u.l,e.lk||a||(a=e));return a}
f.ve=function(a){var b=new J(a.H,a.m31,a.m32),c=new J(-a.J,-a.m21,-a.m22),d=1E8;a=[];for(var e=If(b,new J(c.x*d,c.y*d,c.z*d)),h=26512.5/d,g=0,k=!0;;){var l=e.shift();if(!l){k||(d*=g+h);break}if(!k){k=l.t-g;if(k>h){d*=g+h;break}h-=k}g=l.t;l.Fa&&a.push(l);k=!l.Fa}e=[];e.cmp=function(m,n){return m.t<n.t?-1:m.t>n.t?1:m.item.index<n.item.index?-1:m.item.index>n.item.index?1:0};h=q(u.w.Gc);for(g=h.next();!g.done;g=h.next())g=g.value,!g.fb&&u.l>g.U||!(l=Jj(b,c,g.b,g.ua,g.Wa+g.ua))||0>l.t||l.t>=d||(l.item=
g,l.Nb=c,kb(e,l));b=[];e.length&&b.push(e[0]);b.push.apply(b,da(a));return b};f.uh=function(){return"reload"==this.bi.action||2<this.ya?!1:!0};f.Rd=function(){this.ya>=this.od||!this.ab?this.Tc=0:(this.Tc+=1,45<=this.Tc&&(this.Tc-=45,--this.ab,this.ya+=1))};function mk(a){zj.call(this,a);this.Jb=12500;this.uf=1;this.start=u.l;this.Fj=new J(E(x)-.5,E(x)-.5,E(x)-.5);this.Fj.ka(1)}mk.prototype=Object.create(zj.prototype);mk.prototype.constructor=mk;
mk.prototype.create=function(){zj.prototype.create.call(this);var a=new hg(u.v.Xd.get(this.name));a.Ba=this.O;a.transform.scale(.1,.1,.1);a.transform.rotate(0,-90,0);X(a,this);a.create();le(a,this.ea)};mk.prototype.step=function(){this.transform.oi(this.Fj,this.vi);30==u.l-this.start&&(u.v.ra.get("shellCasing0"+(Ob(3)+1)).play({gain:.625}),this.remove());zj.prototype.step.call(this)};function jk(a){u.Node.call(this,a);this.Hb=u.l}jk.prototype=Object.create(u.Node.prototype);
jk.prototype.constructor=jk;jk.prototype.step=function(){u.Node.prototype.step.call(this);var a=u.l-this.Hb-6;0>a||(0==a&&u.v.ra.get(Rb("woodSnap01","woodSnap02","woodSnap03")).play({gain:10/60}),5<=(1<=a?a-1:0)&&this.remove())};var Tj=[];function Wj(){var a=Tj.indexOf(this);0>a||Tj.splice(a,1)};function Yj(a){Ej.call(this,a);this.uf=100;this.qg=0;this.ua=4E4;this.Bd=18E4;this.Jh=9E4;this.Wa=.5*(this.Bd-2*this.ua-6E4);this.Ci=12E4;this.ac=11E3;this.rf=2/3*this.ac;this.Zh=Ej.Jf(125E3);this.Jb=2E5;this.Rg=16;this.Tg=this.Ug=this.qc=this.Yd=this.Uh=this.Vh=this.th=this.Ga=this.Mf=this.Ig=0;this.lb=360;this.mg=[];this.Zg=-Infinity;this.ne=0;this.fb=!0;this.hg=0;this.jj=-Infinity;this.kj=Number.NEGATIVE_INFINITY;this.lj=4E5}Yj.prototype=Object.create(Ej.prototype);f=Yj.prototype;
f.constructor=Yj;f.create=function(){zj.prototype.create.call(this);var a=this.oc=new Yf("worldCamera");a.Ve=6E3;a.Pe=5E7;a.Ba=this.O;X(a,this);u.w.pa=a;a=this.kd=new Yf("selfCamera");a.Ve=this.oc.Ve;a.Pe=this.oc.Pe;a.Ba=this.oc.O;X(a,u.yd);a=this.Xa=new bk(this);a.Qa=0;X(a,u.yd);a.create();a=new pk(this.Xa);a.$h=["KeyQ","Digit1"];this.Xa.ke.push(a);a=new kk(this.Xa);a.$h=["KeyE","Digit2"];this.Xa.ke.push(a);a=new ok(this.Xa);a.$h=["KeyC","Digit3"];this.Xa.ke.push(a)};
f.step=function(){Ej.prototype.step.call(this);if(this.fb){for(var a=this.ne=0;a<this.mg.length;a++){var b=this.mg[a],c=u.l-30-b.Uj;0>c?this.ne+=b.gc:0<b.gc?(b=b.gc-2*c,0>=b?this.mg.splice(a--,1):this.ne+=b):0>b.gc&&(b=b.gc+2*c,0<=b?this.mg.splice(a--,1):this.ne+=b)}this.fb&&(Ye.lock&&(a=1,this.Xa.F&&(a=rb(1,this.Xa.F.Ph,this.Xa.focus)),a=u.kk*a,this.Ig-=Ye.hc.x*a,this.Mf+=Ye.hc.y*a),this.Mf=qb(this.Mf,-1073741824,1073741824));a=Ac(this.Ig);b=Ac(this.Mf)+zc(1.5*this.Uh);c=zc(1.5*this.Vh);be(this.transform);
this.transform.rotate(a,0,0);be(this.oc.transform);this.oc.transform.rotate(0,b,c);u.Ej||(this.oc.transform.rotate((E(x)-.5)*this.Ga,(E(x)-.5)*this.Ga,0),this.Ga*=.8125);0==(u.l&1)&&(this.gg()?(a=this.Vd*Math.PI/this.Rg,this.th=6E3*Math.abs(Math.sin(a)),this.Ug=Math.sin(a)*Math.PI/210,this.qc=(1-Math.abs(Math.sin(a)))*Math.PI/210):(this.th*=.75,this.qc*=.75,this.Ug*=.75),this.Tg-=zc(3),0>this.Tg&&(this.Tg=0));this.oc.transform.m31=this.Wa+this.ua-6E3-6E3+this.th;a=1;this.Xa.F&&(a=rb(1,this.Xa.F.Ph,
this.Xa.focus));this.ac=11E3*rb(1,2/3,this.Xa.focus);this.kd.ed=zc(24*a);this.oc.ed=zc(30*a);if(!(2>u.l-this.kj)){a=this.lj;a*=a;b=null;c=Lf(this.b,this.lj);c=q(c);for(var d=c.next();!d.done;d=c.next())for(d=d.value.gh.first();null!=d.item;d=d.next)if(d.item instanceof Vj&&!d.item.je){var e=Nd(this.b,d.item.b,new J(0,0,0)).pf();e<a&&(a=e,b=d.item)}b&&(a=b,a.fb&&(a.fb=!1,uj.remove(a)),a.je=this,a.species.fi.call(a,a.je),this.kj=a.U=u.l)}}};
f.ei=function(a){if(a instanceof sk){if(a.Qj)debugger;a.Qj=!0;90>u.l-this.Zg||(u.v.ra.get("hit02").play({pitch:.5,gain:1}),u.v.ra.get(Rb("woodSnap01","woodSnap02","woodSnap03")).play({pitch:.5,gain:1}),tk(this,-60),this.Ga+=zc(6))}};f.Sh=function(){var a=new J(0,0,0);if(!this.fb)return a;Ze.d.KeyW&&--a.z;Ze.d.KeyS&&(a.z+=1);Ze.d.KeyA&&--a.x;Ze.d.KeyD&&(a.x+=1);a.ka(1)?(this.Yd+=1/6,1<this.Yd&&(this.Yd=1)):(this.Yd-=1/6,0>this.Yd&&(this.Yd=0));this.Vh=(5*this.Vh-a.x)/6;this.Uh=(5*this.Uh-a.z)/6;return a};
f.aj=function(){this.fb&&Ze.p.Space&&(this.Yg=u.l)};function lk(a){if(!a.Lf){var b=new U;b.set(a.oc.O);return b}b=Nd(ee(a.oc.O),a.Lf,new J).normalize();var c=new J(b.z,0,-b.x),d=new J(0,1,0);Lc(b,c,d).ka(1);Lc(d,b,c);var e=new U;e.G=c.x;e.K=c.y;e.L=c.z;e.I=d.x;e.m11=d.y;e.m12=d.z;e.J=b.x;e.m21=b.y;e.m22=b.z;e.H=a.oc.O.H;e.m31=a.oc.O.m31;e.m32=a.oc.O.m32;return e}function tk(a,b){0>b&&(a.Zg=u.l);b=qb(a.lb+b,0,360)-a.lb;a.mg.push({Uj:u.l,gc:b});a.lb+=b;0>=a.lb&&a.Og()}
f.Og=function(){if(this.fb){this.fb=!1;for(var a=q(u.w.Gc),b=a.next();!b.done;b=a.next())b=b.value,b.fb&&(b.action.length=0,b.action.unshift("idle"),b.U=NaN,b.path=null);this.Xa.remove();this.Xa=null;u.w.ia=null}};function Y(){Ej.call(this,"mantato");this.uf=150;this.qg=0;this.ua=30800;this.Bd=189200;this.Jh=86E3;this.Wa=.5*(this.Bd-2*this.ua-6E4);this.Ci=12E4;this.ac=1/3*14887;this.rf=2/3*this.ac;this.Zh=Ej.Jf(3E5);this.Jb=2E5;this.Vg=-Infinity;this.fb=!0;this.lb=360;this.eb=[];this.Qd=[];this.Ha=new U;this.l=this.qh=this.ee=0;this.te=new U;this.Ng=0;this.Od=11E4;this.C=u.v.la.get("physicalCardThreshold");this.ma=u.v.ba.get("monsterWalk01");this.color=Cd;this.action=["idle"];this.U=NaN;this.fk=this.ah=-Infinity;
this.Nf=1;return this}Y.prototype=Object.create(Ej.prototype);Y.prototype.constructor=Y;Y.Pb=12;Y.Ia=NaN;
Y.$c=function(){Y.da=u.v.sb.get("defaultMaterial");var a=u.v.sb.get("monsterSkin").X();a.name="monsterSplatter";a.za=1;u.v.sb.add(a);uk.C=u.v.la.get("gib");uk.ma=u.v.ba.get("spudGib01");a=[];var b=new U;b.G=1;b.K=0;b.L=-0;b.I=0;b.m11=1;b.m12=0;b.J=0;b.m21=-0;b.m22=1;b.H=0;b.m31=0;b.m32=-0;a.push(b);b=new U;b.G=.9916;b.K=-.1173;b.L=.055;b.I=.1259;b.m11=.9725;b.m12=-.1958;b.J=-.0305;b.m21=.201;b.m22=.9791;b.H=-3498;b.m31=3796;b.m32=6804;a.push(b);b=new U;b.G=.9749;b.K=-.1934;b.L=.1102;b.I=.2213;b.m11=
.8963;b.m12=-.3843;b.J=-.0244;b.m21=.399;b.m22=.9166;b.H=-6400;b.m31=-2683;b.m32=15101;a.push(b);b=new U;b.G=.9601;b.K=-.2246;b.L=.1669;b.I=.2797;b.m11=.7517;b.m12=-.5972;b.J=.0087;b.m21=.62;b.m22=.7845;b.H=-8393;b.m31=-17164;b.m32=25181;a.push(b);b=new U;b.G=.9541;b.K=-.2123;b.L=.2114;b.I=.2942;b.m11=.5306;b.m12=-.795;b.J=.0566;b.m21=.8206;b.m22=.5686;b.H=-9429;b.m31=-39030;b.m32=35202;a.push(b);b=new U;b.G=.9591;b.K=-.1521;b.L=.2388;b.I=.2712;b.m11=.2519;b.m12=-.929;b.J=.0811;b.m21=.9557;b.m22=
.2828;b.H=-9721;b.m31=-68375;b.m32=44142;a.push(b);b=new U;b.G=.9359;b.K=-.2158;b.L=.2785;b.I=.2565;b.m11=-.1246;b.m12=-.9585;b.J=.2415;b.m21=.9685;b.m22=-.0613;b.H=-7782;b.m31=-63561;b.m32=42925;a.push(b);b=new U;b.G=.9573;b.K=-.1734;b.L=.2312;b.I=.1975;b.m11=-.1913;b.m12=-.9614;b.J=.2109;b.m21=.9661;b.m22=-.1489;b.H=-4587;b.m31=-61424;b.m32=39511;a.push(b);b=new U;b.G=.9812;b.K=-.1297;b.L=.143;b.I=.1237;b.m11=-.1466;b.m12=-.9814;b.J=.1482;b.m21=.9807;b.m22=-.1278;b.H=-2376;b.m31=-62808;b.m32=37771;
a.push(b);b=new U;b.G=.9889;b.K=-.134;b.L=.0638;b.I=.053;b.m11=-.0825;b.m12=-.9952;b.J=.1386;b.m21=.9875;b.m22=-.0745;b.H=-104;b.m31=-64955;b.m32=38224;a.push(b);b=new U;b.G=.9803;b.K=-.1963;b.L=.0226;b.I=.0119;b.m11=-.0555;b.m12=-.9984;b.J=.1973;b.m21=.979;b.m22=-.0521;b.H=2290;b.m31=-66053;b.m32=39447;a.push(b);b=new U;b.G=.9587;b.K=-.2839;b.L=.017;b.I=.0035;b.m11=-.0481;b.m12=-.9988;b.J=.2843;b.m21=.9577;b.m22=-.0451;b.H=4830;b.m31=-66621;b.m32=39607;a.push(b);b=new U;b.G=.939;b.K=-.3438;b.L=.0072;
b.I=-.0041;b.m11=-.0323;b.m12=-.9995;b.J=.3439;b.m21=.9385;b.m22=-.0317;b.H=6758;b.m31=-66864;b.m32=40168;a.push(b);b=new U;b.G=.9324;b.K=-.3614;b.L=5E-4;b.I=-.0114;b.m11=-.0308;b.m12=-.9995;b.J=.3612;b.m21=.9319;b.m22=-.0328;b.H=7520;b.m31=-66863;b.m32=40232;a.push(b);Y.Lc=a;a=[];b=new U;b.G=1;b.K=0;b.L=-0;b.I=0;b.m11=1;b.m12=-0;b.J=0;b.m21=0;b.m22=1;b.H=0;b.m31=-0;b.m32=0;a.push(b);b=new U;b.G=.9927;b.K=-.0183;b.L=-.119;b.I=.0277;b.m11=.9966;b.m12=.0773;b.J=.1171;b.m21=-.0801;b.m22=.9899;b.H=70;
b.m31=-3027;b.m32=-619;a.push(b);b=new U;b.G=.9816;b.K=-.0289;b.L=-.1886;b.I=.022;b.m11=.999;b.m12=-.0389;b.J=.1895;b.m21=.034;b.m22=.9813;b.H=288;b.m31=-5629;b.m32=253;a.push(b);b=new U;b.G=.9973;b.K=.0022;b.L=.074;b.I=.0054;b.m11=.9948;b.m12=-.1019;b.J=-.0738;b.m21=.1021;b.m22=.992;b.H=-219;b.m31=-2573;b.m32=764;a.push(b);b=new U;b.G=.9877;b.K=-.0202;b.L=-.155;b.I=.0055;b.m11=.9955;b.m12=-.0949;b.J=.1562;b.m21=.0929;b.m22=.9833;b.H=335;b.m31=259;b.m32=689;a.push(b);b=new U;b.G=.9986;b.K=.0123;b.L=
-.0519;b.I=-.0065;b.m11=.9937;b.m12=.1115;b.J=.053;b.m21=-.111;b.m22=.9924;b.H=178;b.m31=-3079;b.m32=-875;a.push(b);b=new U;b.G=.9996;b.K=.007;b.L=-.0256;b.I=-.0062;b.m11=.9994;b.m12=.0327;b.J=.0258;b.m21=-.0326;b.m22=.9991;b.H=110;b.m31=-5793;b.m32=-254;a.push(b);b=new U;b.G=.9893;b.K=-.0894;b.L=.1151;b.I=.0859;b.m11=.9957;b.m12=.0348;b.J=-.1177;b.m21=-.0245;b.m22=.9928;b.H=-944;b.m31=-2885;b.m32=-285;a.push(b);Y.qb=a};
Y.prototype.create=function(){this.transform.rotate(E(x)*Math.PI*2,0,0);me(this,37500);Tj.push(this);Ej.prototype.create.call(this);u.w.Gc.push(this)};Y.prototype.step=function(){Y.prototype[this.action[0]].call(this);this.y=this.b.y+this.Wa+this.ua-this.Bd+12500;Ej.prototype.step.call(this)};
Y.prototype.ue=function(){var a=ee(this.O);a.y+=this.Wa+this.ua-this.Bd+103400;var b=Nd(ee(u.pa.O),a,new J),c=b.ka(1);c=Math.min(1,c/(2*this.Bd));var d=new J(0,1,0),e=Lc(d,b,new J).normalize();Lc(b,e,d);var h=u.pa.O.jf(),g=u.pa.O.ud();this.Ha.zf(Od(u.pa.O.hf(),e,c).normalize());this.Ha.Af(Od(h,d,c).normalize());this.Ha.Bf(Od(g,b,c).normalize());fe(this.Ha,a);this.Gd?this.te.set(this.Gd[this.l%this.Gd.length]):this.te.reset();this.fb&&(a=this.O,a=Math.round(4*(Math.atan2(a.J,a.m22)-Math.atan2(u.pa.O.H-
a.H,u.pa.O.m32-a.m32))/Math.PI),0>a&&(a+=8),8<=a&&(a-=8),this.qh=a,this.te.rotate(this.qh*Math.PI/4,0,0));ce(this.Ha,this.te,this.te);this.Ha.H+=this.Ha.I*this.Ng;this.Ha.m31+=this.Ha.m11*this.Ng;this.Ha.m32+=this.Ha.m12*this.Ng;if(this.og){a=q(this.og);for(b=a.next();!b.done;b=a.next()){c=b.value;c.Ue.H+=this.b.x;c.Ue.m31+=this.b.y;c.Ue.m32+=this.b.z;b=c.Rj;c=ee(c.Ue);d=this.te;e=new U;h=d.G*-d.H+d.K*-d.m31+d.L*-d.m32;g=d.I*-d.H+d.m11*-d.m31+d.m12*-d.m32;var k=d.J*-d.H+d.m21*-d.m31+d.m22*-d.m32,
l=d.I,m=d.J,n=d.K,r=d.m11,p=d.m21,t=d.L,z=d.m12,w=d.m22;e.G=d.G;e.I=n;e.J=t;e.H=h;e.K=l;e.m11=r;e.m21=z;e.m31=g;e.L=m;e.m12=p;e.m22=w;e.m32=k;e.kb(c,c);d={};d.b=c;d.Hb=u.l+1;e=7E3*b;h=Pb(2)?-e:e;k=Nb()*(180/2147483648);g=Math.cos(k);k=Math.sin(k);d.sa=new $d;d.sa.G=g*h;d.sa.K=k*h;d.sa.I=-k*e;d.sa.m11=g*e;this.eb.push(d);this.eb.length>Y.Pb&&this.eb.shift();d={};d.b=c;d.Hb=u.l+1;b=7E3*b+3500;c=Pb(2)?-b:b;h=Nb()*(180/2147483648);e=Math.cos(h);h=Math.sin(h);d.sa=new $d;d.sa.G=e*c;d.sa.K=h*c;d.sa.I=-h*
b;d.sa.m11=e*b;this.Qd.push(d);this.Qd.length>Y.Pb&&this.Qd.shift()}delete this.og}};
Y.prototype.Na=function(){Y.Ia+=2;255<Y.Ia&&(v.clear(v.STENCIL_BUFFER_BIT),Y.Ia=130);u.Db(1);v.colorMask(!1,!1,!1,!1);v.stencilFunc(v.ALWAYS,Y.Ia-128,255);v.stencilOp(v.KEEP,v.KEEP,v.REPLACE);var a=this.Ha.ud(),b=Dc(a,ee(this.Ha));u.tb(tg);u.Va(u.v.la.get("monoThresholdEffect"));u.Mb(0,u.v.ba.get("smokePuff01"));Y.da.bind();u.nb(0);u.Lb(0);u.C.N("color",Cd);for(var c=q(this.eb),d=c.next();!d.done;d=c.next()){var e=d.value;d=this.te.kb(e.b,new J);if(!(0>Dc(d,a)-b)){var h=4>u.l-e.Hb?1.4:1;e=(new $d).set(e.sa);
e.G*=h;e.K*=h;e.I*=h;e.m11*=h;e=ae(this.Ha,e,new U);fe(e,d);u.C.N("modelMatrix",e);v.drawArrays(v.TRIANGLE_FAN,ug(0,1),4)}}u.Db(2);v.colorMask(!0,!0,!0,!0);v.stencilFunc(v.GEQUAL,Y.Ia-1,127);v.stencilOp(v.KEEP,v.KEEP,v.REPLACE);u.l==this.zd+1?this.C=u.v.la.get("flashCardThreshold"):u.l==this.zd+3&&(this.C=u.v.la.get("physicalCardThreshold"));u.tb(tg);u.Va(this.C);u.Mb(0,this.ma);Y.da.bind();u.C.N("ambientLight",this.ea.pb,!1);u.nb(0);u.Lb(0);u.C.N("color",this.color);a=new U;a.set(this.Ha);b=this.Od;
a.G*=b;a.K*=b;a.L*=b;a.I*=-b;a.m11*=-b;a.m12*=-b;u.C.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,ug(this.qh*this.ee+this.l,this.mb),4);if("flashCardThreshold"!=this.C.name)for(u.Db(0),v.stencilFunc(v.EQUAL,Y.Ia-1,255),v.stencilOp(v.KEEP,v.KEEP,v.KEEP),a=this.Ha.ud(),b=Dc(a,ee(this.Ha)),u.tb(tg),u.Va(u.v.la.get("monoEffect")),u.Mb(0,u.v.ba.get("splatter01")),u.v.sb.get("monsterSplatter").bind(),u.nb(1),u.Lb(0),u.C.N("ambientLight",this.ea.pb,!1),u.C.N("color",uk.dd),c=q(this.Qd),d=c.next();!d.done;d=
c.next())e=d.value,d=this.te.kb(e.b,new J),0>Dc(d,a)-b||(h=4>u.l-e.Hb?1.4:1,e=(new $d).set(e.sa),e.G*=h,e.K*=h,e.I*=h,e.m11*=h,e=ae(this.Ha,e,new U),fe(e,d),u.C.N("modelMatrix",e),v.drawArrays(v.TRIANGLE_FAN,ug(0,1),4))};
Y.prototype.idle=function(){isNaN(this.U)&&(this.U=u.l,this.ma=u.v.ba.get("monsterWalk01"),this.mb=64,this.ee=8,this.Gd=Y.qb);var a=u.l-this.U;this.l=0;0==a%30&&vk(this)&&(Zj(this,u.w.ia.b),this.action[0]="rush",this.action.unshift("alert"),this.U=NaN,this.path=null);this.l=(Math.floor(a/8)%3+6)%8};
Y.prototype.wander=function(){isNaN(this.U)&&(this.U=u.l,this.ma=u.v.ba.get("monsterWalk01"),this.mb=64,this.ee=8,this.Gd=Y.qb,this.ac=1/3*14887);var a=u.l-this.U;if(!this.path){var b=Qb(xi.tf),c=Ob(b.M-b.D)+b.D;b=Ob(b.A-b.m)+b.m;this.path=wk(this,c,b)}0==a%30&&vk(this)&&(Zj(this,u.w.ia.b),this.action[0]="rush",this.action.unshift("alert"),this.U=NaN,this.path=null);this.l=Math.floor(a/3)%8};
Y.prototype.alert=function(){isNaN(this.U)&&(this.U=u.l,this.ma=u.v.ba.get("monsterWalk01"),this.mb=64,this.ee=8,this.Gd=Y.qb);var a=u.l-this.U;this.l=0;a==17-5*u.Ib.difficulty&&this.Nf&&(this.action.shift(),this.action.unshift("attack"),this.U=NaN)};Y.prototype.hit=function(){isNaN(this.U)&&(this.U=u.l,this.ma=u.v.ba.get("monsterWalk01"),this.mb=64,this.ee=8,this.Gd=Y.qb);var a=u.l-this.U;this.l=0;60==a&&(this.action.shift(),this.U=NaN)};
Y.prototype.attack=function(){isNaN(this.U)&&(this.U=u.l,this.ma=u.v.ba.get("monsterWalk01"),this.mb=64,this.ee=8,this.Gd=Y.qb,Zj(this,u.w.ia.b));var a=u.l-this.U;this.l=Math.floor(a/6)%8;if(15==a){var b=new sk;b.vj=this;--this.Nf;b.b.set(this.b.x,this.b.y,this.b.z);var c=u.w.ia.b.X();c.y+=u.w.ia.Wa+u.w.ia.ua-12500;b.s.x=c.x-this.b.x;b.s.y=c.y-this.b.y;b.s.z=c.z-this.b.z;b.s.ka(28E3);fe(b.transform,b.b);X(b,u.ye);b.create();b.Vf.push(this)}45==a&&(this.action.shift(),this.U=NaN)};
Y.prototype.rush=function(){isNaN(this.U)&&(this.U=u.l,this.ma=u.v.ba.get("monsterWalk01"),this.mb=64,this.ee=8,this.Gd=Y.qb,this.ac=7443.5,this.ac*=1+1/3*(u.Ib.difficulty-1));var a=u.l-this.U;this.path||(this.path=wk(this,u.w.ia.b.z,u.w.ia.b.x));0<a&&0==a%6&&this.Nf&&vk(this)&&(this.action.unshift("attack"),this.U=NaN);this.l=Math.floor(a/2)%8};
Y.prototype.death=function(){isNaN(this.U)&&(this.U=u.l,this.ma=u.v.ba.get("monsterDeath01"),this.mb=16,this.ee=0,this.Gd=Y.Lc);var a=u.l-this.U;4<=a&&(a-=4);this.l=Math.floor(a/4);13<this.l&&(this.l=13);6==a&&u.w.Ji(1);20==a&&(this.Ng=.5*-this.Od);24==a&&u.v.ra.get(Rb("bodyThud01","bodyThud02")).play({gain:.5});660<=a&&this.remove()};
function vk(a){if(0>=u.Ib.difficulty||!u.w.ia)return!1;var b=a.b.X();b.y+=a.Wa+a.ua-6E3;var c=u.w.ia.b.X();c.y+=u.w.ia.Wa+u.w.ia.ua-6E3;c=Nd(c,b,new J);if(Gf(b,c,Hj))return!1;b=c.X().normalize();return 180*Math.acos(Dc(b,a.O.ud()))/Math.PI<90+45*u.Ib.difficulty}function wk(a,b,c){yi=300;return Ai(a.b.z,a.b.x,b,c)}
Y.prototype.Sh=function(){var a=new J;if(!this.path||"alert"==this.action[0]||"hit"==this.action[0]||"attack"==this.action[0])return a;for(var b,c;;){b=this.path[0];c=b.getParameter(this.b.z,this.b.x);if(c<b.length)break;this.path.shift();if(!this.path.length)return this.path=null,a}b=b.evaluate(c+1E5);a.z=b.x-this.b.z;a.x=b.y-this.b.x;Zj(this,new J(b.y,0,b.x));return a};Y.prototype.Ie=function(a){this.fb&&(this.zd=u.l,this.s.x=0,this.s.z=0,this.lb-=a,0>=this.lb&&this.Og())};
Y.prototype.Og=function(){this.fb&&(this.fb=!1,this.action=["death"],this.U=NaN,this.path=null,Wj.call(this),uj.remove(this))};Y.prototype.remove=function(){this.kh&&this.kh.remove();var a=u.w.Gc.indexOf(this);0<=a&&u.w.Gc.splice(a,1);Ej.prototype.remove.call(this);this.fb&&Wj.call(this)};function Zj(a,b){b=Nd(b,a.b,new J(0,0,0));b.y=0;b.ka(1);a.transform.G=b.z;a.transform.L=-b.x;a.transform.J=b.x;a.transform.m22=b.z}
function ik(a,b,c){a.fb&&("attack"==a.action[0]&&a.action.shift(),"hit"!=a.action[0]&&a.action.unshift("hit"),a.U=NaN,a.Vg=u.l);var d=c*(E(x)+1),e=new uk;e.frame=Ob(16);e.Ra=12E3*(E(x)+1);e.Ra*=c;e.b.set(0,0,5E4);b.kb(e.b,e.b);e.s.x=5E3*(2*E(x)-1);e.s.y=5E3*(2*E(x)-1);e.s.z=2E4*(E(x)+1);de(b,e.s,e.s);e.ze=zc(60*(.25+E(x)));Pb(2)&&(e.ze=-e.ze);X(e,u.ye);e.create();e=new uk;e.frame=Ob(16);e.Ra=8E3*(E(x)+1);e.Ra*=c;e.b.set(0,0,5E4);b.kb(e.b,e.b);e.s.x=5E3*(2*E(x)-1);e.s.y=5E3*(2*E(x)-1);e.s.z=2E4*(E(x)+
1);de(b,e.s,e.s);e.df=uk.dd;X(e,u.ye);e.create();c=Math.sqrt(3*c)+E(x)-.5;for(e=0;e<c;e++){var h=new uk;h.$g=120;h.frame=Ob(16);h.Ra=12E3;h.b.set(0,0,5E4);b.kb(h.b,h.b);h.s.x=2*E(x)-1;h.s.y=2*E(x)-1;h.s.z=2*E(x);h.s.ka(1E4*(E(x)+1));h.s.y+=6E3*E(x);de(b,h.s,h.s);h.ze=zc(60*(.25+E(x)));Pb(2)&&(h.ze=-h.ze);Pb(2)&&(h.df=uk.dd);X(h,u.ye);h.create()}Zj(a,ee(u.pa.O));ne(a);a.og||(a.og=[]);b.H-=a.b.x;b.m31-=a.b.y;b.m32-=a.b.z;a.og.push({Ue:b,Rj:d})}
function sk(){zj.call(this,"potato");this.Jb=1E5;this.ua=12500;this.Wa=0;this.Wd=!1;return this}sk.prototype=Object.create(zj.prototype);f=sk.prototype;f.constructor=sk;f.create=function(){this.U=u.l;this.Ha=new U;this.l=0;this.mb=16;this.Od=25E3;this.C=u.v.la.get("physicalCardThreshold");this.ma=u.v.ba.get("Potato");me(this,18750);zj.prototype.create.call(this)};f.xj=function(){this.remove()};
f.ue=function(){var a=ee(this.O),b=Nd(ee(u.pa.O),a,new J),c=b.ka(1);c=Math.min(1,c/(4*this.ua));var d=new J(0,1,0),e=Lc(d,b,new J).normalize();Lc(b,e,d);var h=u.pa.O.jf(),g=u.pa.O.ud();this.Ha.zf(Od(u.pa.O.hf(),e,c).normalize());this.Ha.Af(Od(h,d,c).normalize());this.Ha.Bf(Od(g,b,c).normalize());fe(this.Ha,a);a=u.l-this.U;this.l=3*Math.floor(a/2);this.l%=this.mb;0==Math.floor(a/2)%13?(this.C=u.v.la.get("flashCardThreshold"),this.color=Cd):1==Math.floor(a/2)%13?(this.C=u.v.la.get("flashCardThreshold"),
this.color=Dd):(this.C=u.v.la.get("physicalCardThreshold"),this.color=Cd)};f.Na=function(){this.ue();u.tb(tg);u.Va(this.C);u.Mb(0,this.ma);Y.da.bind();u.C.N("ambientLight",this.ea.pb,!1);u.nb(0);u.Lb(0);u.C.N("color",this.color);var a=new U;a.set(this.Ha);var b=this.Od;a.G*=b;a.K*=b;a.L*=b;a.I*=-b;a.m11*=-b;a.m12*=-b;u.C.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,ug(this.l,this.mb),4)};f.remove=function(){this.vj.Nf+=1;zj.prototype.remove.call(this)};
function uk(){u.Ta.call(this,"SpudGib");ng.call(this);this.mb=16;this.frame=0;this.Ra=25E3;this.scale=1;this.Qe=Pb(2);this.wc=Ac(Nb());this.ze=0;this.Jb=2*this.Ra;this.U=this.Hj=u.l+4;this.s=new J(0,0,0);this.$g=600;this.df=uk.df;this.dd=uk.dd}uk.prototype=Object.create(u.Ta.prototype);uk.prototype.constructor=uk;uk.df=new T(158,158,95,255);uk.dd=new T(255,255,95,255);
uk.prototype.create=function(){this.be=this.b.X();this.transform.H=this.b.x;this.transform.m31=this.b.y;this.transform.m32=this.b.z;u.Ta.prototype.create.call(this);var a=Kf(this.be,this.s);a?(this.Ef=a.p,this.zg=a.n,this.$e=a.t):this.$e=Number.POSITIVE_INFINITY};
uk.prototype.step=function(){var a=u.l-this.U;0>a||(a<this.$e?this.xk?(this.b.y=this.be.y+this.s.y*a,this.transform.m31=this.b.y):(this.b.set(this.be.x+this.s.x*a,this.be.y+.5*(2*this.s.y+tj.y*a)*a,this.be.z+this.s.z*a),this.transform.H=this.b.x,this.transform.m31=this.b.y,this.transform.m32=this.b.z,u.l%3||(this.wc+=this.ze)):a==Math.ceil(this.$e)&&(this.b.set(this.Ef.x,this.Ef.y,this.Ef.z),this.transform.H=this.b.x,this.transform.m31=this.b.y,this.transform.m32=this.b.z,this.df==this.dd&&(Hg(u.w.Ri,
this.Ef,this.zg,Ac(Nb()),this.Ra*this.scale*2.5,Ob(4),4),this.remove()),-1==this.zg.y?(this.be=this.b.X(),this.U=u.l+180+Ob(360),this.s.set(0,0,0),this.ze=0,(a=Kf(this.be,this.s))?(this.Ef=a.p,this.zg=a.n,this.$e=a.t):this.$e=Number.POSITIVE_INFINITY):0==this.zg.y&&(this.be=this.b.X(),this.U=u.l+180+Ob(360),this.s.set(0,-500,0),this.xk=!0,(a=Gf(this.be,this.s,null))?(this.Ef=a.p,this.zg=a.n,this.$e=a.t):this.$e=Number.POSITIVE_INFINITY)));u.l-this.Hj>this.$g&&this.remove();u.Ta.prototype.step.call(this)};
uk.prototype.Na=function(){og.call(this,this.O);u.tb(tg);u.Va(uk.C);u.Mb(0,uk.ma);u.nb(0);u.Db(2);u.Lb(0);u.C.N("modelMatrix",this.O);u.C.N("color1",this.df);u.C.N("color2",this.dd);u.C.N("ambientLight",this.ea.pb);v.drawArrays(v.TRIANGLE_FAN,ug(this.frame,this.mb),4);u.Ta.prototype.Na.call(this)};function Vj(a){zj.call(this,"loot");this.species=a;this.ua=37500;this.Wa=0;this.qg=.8;this.Hb=u.l+Ob(600);this.fb=!0}Vj.prototype=Object.create(zj.prototype);Vj.prototype.constructor=Vj;Vj.Fg=function(){u.v.ra.get("coinPurse01");u.v.ra.get("coinPurse02");u.v.ra.get("coinPurse03");u.v.ra.get("coinPurse04");u.v.ra.get("ingot01");u.v.ra.get("ingot02");u.v.ra.get("gem01");u.v.ra.get("gem02");u.v.ra.get("gem03");u.v.ra.get("crumplePaper01");u.v.ra.get("crumplePaper02")};
Vj.Fk=function(a,b){for(var c=[];a;){for(var d=0;d<Vj.cf.length&&!(Vj.cf[d].value>a);)d++;if(1==b)--d;else if(0==b)d=0;else{var e=2*b;e=1<=e?2-e:1/e;d=Math.floor(Math.pow(E(x),e)*d)}d=Vj.cf[d];a-=d.value;c.push(new Vj(d))}return c};f=Vj.prototype;f.create=function(){this.U=u.l;this.Ha=new U;this.l=0;this.mb=16;this.C=u.v.la.get("physicalCardThreshold");this.transform.scale(1,1,1);me(this,18E3);zj.prototype.create.call(this)};
f.step=function(){if(this.fb)60==u.l-this.Hb&&(this.fb=!1,uj.remove(this)),zj.prototype.step.call(this);else{if(this.je){var a=Nd(new J(this.je.b.x,this.je.b.y,this.je.b.z),this.b,new J(0,0,0));a.pf()<Math.pow(5E4,2)?(a=this.je,this.species.Th.call(this,a),Qb(this.species.ra).play({gain:1}),a.jj=u.l,tk(a,Rb(3,3,3,3,3,5,5,5,8)),this.remove()):(a.y*=5,a.ka(25E3),this.b.x+=a.x,this.b.y+=a.y,this.b.z+=a.z);this.transform.H=this.b.x;this.transform.m31=this.b.y;this.transform.m32=this.b.z}u.Ta.prototype.step.call(this)}};
f.remove=function(){u.Ta.prototype.remove.call(this);uj.remove(this);this.kc&&this.kc.remove()};f.ue=function(){var a=ee(this.O),b=Nd(ee(u.pa.O),a,new J),c=b.ka(1);c=Math.min(1,c/(4*this.ua));var d=new J(0,1,0),e=Lc(d,b,new J).normalize();Lc(b,e,d);var h=u.pa.O.jf(),g=u.pa.O.ud();this.Ha.zf(Od(u.pa.O.hf(),e,c).normalize());this.Ha.Af(Od(h,d,c).normalize());this.Ha.Bf(Od(g,b,c).normalize());fe(this.Ha,a);this.l=this.je?Math.floor(Math.min(15,(u.l-this.U)/2+8)):Math.floor((u.l-this.U)/3)%8};
f.Na=function(){this.ue();u.tb(tg);u.Va(this.C);u.Mb(0,this.species.wi);Y.da.bind();u.C.N("ambientLight",this.ea.pb,!1);u.nb(0);u.Lb(0);u.C.N("color",Cd);var a=new U;a.set(this.Ha);var b=this.species.Od;a.G*=b;a.K*=b;a.L*=b;a.I*=-b;a.m11*=-b;a.m12*=-b;u.C.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,ug(this.l,this.mb),4)};Vj.$c=function(a){a=q(a.Xa.ke);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b instanceof this.species.fg)return b.Nd-Uj(b)-b.Of;return 0};
Vj.Pb=function(a){a=q(a.Xa.ke);for(var b=a.next();!b.done;b=a.next())b=b.value,b instanceof this.species.fg&&(b.Of+=this.species.gc)};Vj.Gb=function(a){a=q(a.Xa.ke);for(var b=a.next();!b.done;b=a.next())b=b.value,b instanceof this.species.fg&&(b.ab+=Math.min(this.species.gc,b.Nd-Uj(b)),b.Of-=this.species.gc,u.w.md())};Vj.Jk=function(a){return 360-a.lb-a.hg};Vj.Ik=function(a){a.hg+=this.species.gc};Vj.Gk=function(a){tk(a,this.species.gc);a.hg-=this.species.gc};function nk(a){u.qa.call(this,a);ng.call(this);this.C=u.v.la.get("physicalCard");this.ma=u.v.ba.get("smokePuff02");this.da=nk.da;this.color=new T(nk.color.r,nk.color.Oa,nk.color.ga,255);this.frame=0;this.mb=16;this.s=new J;this.cb=new J;this.scale=1;this.wc=Ac(Nb());this.Hb=u.l}nk.prototype=Object.create(u.qa.prototype);nk.prototype.constructor=nk;nk.da=new pe;nk.da.za=2;nk.color=new T(144,144,144,255);
nk.prototype.step=function(){var a=u.l-this.Hb;a=Math.pow(a/540,.625);this.frame=Math.floor(9*a);this.alpha=.25*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.Ea=this.alpha*nk.color.Ea&255;this.transform.m31+=200;this.s.scale(.8125);a=new J(.5*this.cb.x+.5*this.s.x,.5*this.cb.y+.5*this.s.y,.5*this.cb.z+.5*this.s.z);this.transform.H+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.cb.set(this.s.x,this.s.y,this.s.z);u.qa.prototype.step.call(this)};
nk.prototype.Na=function(){sg.call(this);u.qa.prototype.Na.call(this)};function hk(a){u.qa.call(this,a);ng.call(this);this.C=u.v.la.get("physicalCard");this.ma=u.v.ba.get("smokePuff02");this.da=nk.da;this.color=new T(hk.color.r,hk.color.Oa,hk.color.ga,255);this.frame=0;this.mb=16;this.s=new J;this.cb=new J;this.scale=1;this.wc=Ac(Nb());this.ea={Aa:4294967295,pb:new J(1,1,1)};this.Hb=u.l}hk.prototype=Object.create(u.qa.prototype);hk.prototype.constructor=hk;hk.color=new T(212,212,212,255);
hk.prototype.step=function(){var a=u.l-this.Hb;a/=this.$g;a=Math.pow(a,.75);this.frame=Math.floor(9*a);this.alpha=.375*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.Ea=this.alpha*hk.color.Ea&255;this.s.scale(.8125);var b=new J(.5*this.cb.x+.5*this.s.x,.5*this.cb.y+.5*this.s.y,.5*this.cb.z+.5*this.s.z);this.transform.H+=b.x;this.transform.m31+=b.y;this.transform.m32+=b.z;this.cb.set(this.s.x,this.s.y,this.s.z);if(0==a||0==u.l%4)a=ee(this.transform),(b=Gf(a,new J(0,-1E8,0),null))&&(b=ff(b.item.aa))&&
Xf(a,b,this.ea.pb);u.qa.prototype.step.call(this)};hk.prototype.Na=function(){sg.call(this);u.qa.prototype.Na.call(this)};function xk(a){u.qa.call(this,a);ng.call(this);this.C=u.v.la.get("spray");this.ma=u.v.ba.get("spray01");this.da=xk.da;this.color=new T(uk.dd.r,uk.dd.Oa,uk.dd.ga,255);this.s=new J;this.cb=new J;this.scale=1;this.wc=Ac(Nb());this.Hb=u.l}xk.prototype=Object.create(u.qa.prototype);xk.prototype.constructor=xk;xk.da=new pe;xk.da.za=0;
xk.prototype.step=function(){var a=u.l-this.Hb;a/=this.Sk;this.scale=15*a;1<=a&&this.remove();this.color.Ea=254*(a+1)&255;this.s.add(tj);a=new J(.5*this.cb.x+.5*this.s.x,.5*this.cb.y+.5*this.s.y,.5*this.cb.z+.5*this.s.z);this.transform.H+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.cb.set(this.s.x,this.s.y,this.s.z);u.qa.prototype.step.call(this)};xk.prototype.Na=function(){sg.call(this);u.qa.prototype.Na.call(this)};
function ak(a,b){u.qa.call(this,b);ng.call(this);this.C=u.v.la.get("image");this.ma=u.v.ba.get("explode");this.da=ak.da;this.color=new T(255,255,255,255);this.scale=1;this.Ra=a;this.Qe=Pb(2);this.wc=Ac(Nb());this.Hb=u.l+1;this.mb=16}ak.prototype=Object.create(u.qa.prototype);ak.prototype.constructor=ak;ak.da=new pe;ak.da.za=1;
ak.prototype.step=function(){var a=u.l-this.Hb;50<=a&&this.remove();this.scale+=.02;this.transform.m31+=3E3*(1-a/50);this.frame=Math.floor(16*(1-Math.pow(.9375,a)));a=255*(1-(a-15)/35);255<a&&(a=255);a&=255;this.color.r=a;this.color.Oa=a;this.color.ga=a;this.color.Ea=a;u.qa.prototype.step.call(this)};ak.prototype.Na=function(){sg.call(this);u.qa.prototype.Na.call(this)};
function gk(a,b){u.qa.call(this,b);ng.call(this);this.C=u.v.la.get("image");this.ma=u.v.ba.get("bulletFlare01");this.da=gk.da;this.color=new T(255,255,255,0);this.scale=1;this.Ra=a;this.Qe=Pb(2);this.wc=Ac(Nb());this.Hb=u.l+1;this.mb=4}gk.prototype=Object.create(u.qa.prototype);gk.prototype.constructor=gk;gk.da=new pe;gk.da.za=1;gk.prototype.step=function(){var a=u.l-this.Hb;0<=a&&(3<=a&&this.remove(),this.scale+=.25);this.frame=Math.floor(a);u.qa.prototype.step.call(this)};
gk.prototype.Na=function(){sg.call(this);u.qa.prototype.Na.call(this)};u.w=new u.Node("game");u.Zi=new u.Node("gameDraw");u.w.Ij=0;u.w.pj=0;u.w.oj=0;u.w.nj=0;u.w.Gc=[];u.w.Wf=[];u.w.Pf=[];u.w.ai=0;u.w.lg=0;u.w.gj=NaN;u.w.ad=[];u.w.Gg=!0;u.w.md=function(){var a=u.w.ia.Xa.F,b=-170,c=119;!(a instanceof pk)&&a instanceof kk&&(b+=6,c-=10);var d=Uj(a).toLocaleString("en-US");var e=u.v.ba.get("HUDNumerals24Bold");d=u.$i(e,d);d.color=Cd;d.x=b;d.y=c;d.x-=d.width*d.Gj.width;a.wh=d;u.w.Gg=!0};u.w.Ji=function(a){u.w.ai+=a;u.w.lg+=a};
u.w.ek=function(){0>=u.w.lg||u.l<u.w.gj+2||(u.w.lg--,u.w.gj=u.l,u.v.ra.get("hit02").play({gain:1}),u.w.ad=u.$i(u.v.ba.get("HUDNumerals24Bold"),(u.w.ai-u.w.lg).toLocaleString("en-US")),u.w.ad.Oh=u.l,u.w.Gg=!0)};
u.v.ready=function(){u.Ib.difficulty=1;u.Ib.lightingFancy=document.getElementById("inputCheckbox_lightingFancy").checked;u.Ib.mouseRaw=document.getElementById("inputCheckbox_mouseRaw").checked;u.Ib.mouseDPI=parseFloat(document.getElementById("inputNumber_mouseDPI").value);u.Ib.mouseScale=parseFloat(document.getElementById("inputNumber_mouseScale").value);u.ih();var a=u.v.ba.get("HUDNumerals10");a.ie=[7,5,7,7,8,7,7,7,7,7,3];a.Se=10;a.dg=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.eg=[0,1,0,0,-1,0,0,0,0,0,0];
u.Wh(a);a=u.v.ba.get("HUDNumerals14Bold");a.ie=[9,6,9,9,9,9,9,9,9,9,4];a.Se=14;a.dg=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.eg=[0,1,0,0,0,0,0,0,0,0,0];u.Wh(a);a=u.v.ba.get("HUDNumerals24Bold");a.ie=[13,9,13,13,14,13,13,13,13,13,5];a.Se=23;a.dg=[0,1,0,0,-1,0,0,0,0,0,0];a.eg=[0,3,0,0,0,0,0,0,0,0,0];u.Wh(a);u.Bj=X(new u.Node("scnBuilderMeshes"),u.sc);u.ye=X(new u.Node("scnWorld"),u.sc);u.Ye=X(new u.Node("scnDoors"),u.ye);u.Ye.Qa=0;u.we=X(new u.Node("scnSpuds"),u.sc);u.we.Qa=0;u.si=X(new u.Node("scnLoot"),
u.sc);u.tg=X(new u.Node("scnShadows"),u.sc);u.tg.Qa=0;u.xe=X(new u.Node("scnWindowPanes"),u.sc);u.xe.Qa=0;u.jd=X(new u.Node("scnEffects"),u.sc);u.jd.Qa=0;u.yd=X(new u.Node("scnSelf"),u.sc);u.yd.Qa=0;u.qk=X(new u.Node("scnHUD"),u.sc);X(vj,u.sc);X(u.w,u.sc);u.Qh=1E3/60;u.sg=new Nj;u.pk();a=[new J(135/255,223/255,206/255),new J(230/255,230/255,172/255),new J(135/255,223/255,206/255),new J(135/255,223/255,206/255),new J(0,213/255,1),new J(135/255,223/255,206/255)];u.w.Kk=a;for(var b=new Float32Array(36),
c=0;c<a.length;c++)a[c].x=.1*a[c].x+.65,a[c].y=.1*a[c].y+.65,a[c].z=.1*a[c].z+.65,a[c].scale(.75),b[3*c]=a[c].x,b[3*c+1]=a[c].y,b[3*c+2]=a[c].z;u.Va(u.v.la.get("physical"));u.C.N("ambient",b);u.C.N("clipY",Infinity,!1);u.Va(u.v.la.get("imageContrast"));u.C.N("contrastOffset",0);u.C.N("contrastScale",1.0625);u.tb(Pe);Ke(Pe,Pe.Bg.length*Pe.vb);Pe.upload(Pe.Bg);u.$d(Re);Ke(Re,2*Re.elements.length);Re.upload(Re.elements);u.v.sb.get("gemRuby").za=0;u.v.sb.get("gemEmerald").za=0;u.v.sb.get("gemSapphire").za=
0;u.v.sb.get("bulbGreen").za=0;Y.$c();a=zc(5);ok.qb=[];for(b=0;9>b;b++)c=b,c*=1/9,c=Math.pow(c,.5),ok.qb[b]=c*a;kk.Gi=u.v.ba.get("ViewCarbine");kk.ni=u.v.ba.get("HUDReticleCarbine");kk.Ia=u.v.ba.get("HUDItemCarbine");kk.Ia.offsetY=-12;ok.Gi=u.v.ba.get("ViewShotgun");ok.ni=u.v.ba.get("HUDReticleShotgun");ok.Ia=u.v.ba.get("HUDItemShotgun");ok.Ia.offsetY=-10;pk.Gi=u.v.ba.get("ViewRevolver");pk.ni=u.v.ba.get("HUDReticleRevolver");pk.Ia=u.v.ba.get("HUDItemRevolver");pk.Ia.offsetY=-9;a=[u.v.ra.get("crumplePaper01"),
u.v.ra.get("crumplePaper02"),u.v.ra.get("ShotgunShut01")];kk.Ah={wi:u.v.ba.get("CarbineMag"),Od:5E4,ra:a,Jj:Vj.$c,fi:Vj.Pb,Th:Vj.Gb,fg:kk,gc:30};ok.Ah={wi:u.v.ba.get("ShotshellBox"),Od:5E4,ra:a,Jj:Vj.$c,fi:Vj.Pb,Th:Vj.Gb,fg:ok,gc:8};pk.Ah={wi:u.v.ba.get("RevolverLoader"),Od:25E3,ra:a,Jj:Vj.$c,fi:Vj.Pb,Th:Vj.Gb,fg:pk,gc:6};Vj.Fg();a=u.w.Ri=new Fg;a.C=u.v.la.get("splatter");a.ma=u.v.ba.get("splatter02");a.color=uk.dd;a.za=1;a=u.w.Qi=new Fg;a.C=u.v.la.get("image");a.ma=u.v.ba.get("bulletPock01");a.color=
new T(255,255,255,128);a.za=2;a=new pe;a.name="flashWhite";a.qd=Dd;a.Vc=Bd;a.Td=Cd;a.za=0;u.v.sb.add(a);a=new pe;a.name="flashRed";a.qd=Dd;a.Vc=Bd;a.Td=Ed;a.za=0;u.v.sb.add(a);u.w.gk();u.w.Ij?(a=new Oj("devCamera"),X(a,u.sc),a.create(),u.w.pa=a):(a=ff(0)[0][0],b=u.w.ia=new Yj("player"),b.Ig=Math.floor(2147483648/180*90),b.b.y=a.y+.5*b.Bd,b.b.z=a.z,b.b.x=a.x,X(b,u.ye),b.create());u.w.Ji(0);X(u.Zi,u.sc);u.start()};
u.w.gk=function(){Sg=cg=bg=Rg=-1;Pg=[];Tg=0;Ug=null;Vg=[];Qg=0;Wg=[];$h.call(Wg);Wg.ea.Aa=u.l;Wg.di=0;Wg.index=Pg.length+Qg;Pg.push(Wg);Xg=[];Xg.index=Tg++;Xg.Nc=[];Xg.eh=0;Xg.y=-4E5;Wh(Xg,Wg);var a=new ih(-4E5,4E5,-3E5,3E5);a.platform=Xg;for(Xg.push(a);Ki(););Di=!0;u.w.pj=19;u.w.nj=3;u.w.oj=5;if(u.si.children)for(;;){a=u.si.children.first().item;if(!a)break;a.remove()}};
u.w.Ak=function(){if(!(u.w.Gc.length>=u.w.pj)){var a=Qb(xi.tf);a=new J(Ob(a.A-a.m)+a.m,-1E5,Ob(a.M-a.D)+a.D);var b=Gf(a,new J(0,-1E8,0),null);b&&(a.y=b.p.y+1E5,u.w.ia?(b=Nd(u.w.ia.b,a,new J),b=Gf(a,b,Hj)?!0:!1):b=!0,b&&(b=new Y,b.b.x=a.x,b.b.y=a.y,b.b.z=a.z,fe(b.transform,b.b),X(b,u.we),b.create()))}};
u.w.zk=function(){if(!(this.Wf.length>=u.w.oj)){var a=Qb(xi.tf);a=new J(Ob(a.A-a.m)+a.m,-1E5,Ob(a.M-a.D)+a.D);var b=Gf(a,new J(0,-1E8,0),null);b&&(a.y=b.p.y+1E5,u.w.ia?(b=Nd(u.w.ia.b,a,new J),b=Gf(a,b,Hj)?!0:!1):b=!0,b&&(a=new Sj(a.x,a.y-1E5,a.z),X(a,u.ye),a.create()))}};
u.w.yk=function(){if(!(this.Pf.length>=u.w.nj)){var a=Qb(xi.tf);a=new J(Ob(a.A-a.m)+a.m,-1E5,Ob(a.M-a.D)+a.D);var b=Gf(a,new J(0,-1E8,0),null);b&&(a.y=b.p.y+1E5,u.w.ia?(b=Nd(u.w.ia.b,a,new J),b=Gf(a,b,Hj)?!0:!1):b=!0,b&&(a=new Xj(a.x,a.y-1E5,a.z),X(a,u.ye),a.create()))}};
u.w.step=function(){var a=Of[1-Pf];if(0==u.l%4){var b=q(df);for(var c=b.next();!c.done;c=b.next()){var d=c.value,e=d.index-ef;d.ea.pb.x=a[0][e];d.ea.pb.y=a[1][e];d.ea.pb.z=a[2][e];a[0][e]=0;a[1][e]=0;a[2][e]=0}a=q(Nf);for(var h=a.next();!h.done;h=a.next())b=h.value,b.bc&&(b.Ic=b.ig==b.Xe?Wf(b.bc):Vf(b.bc));Qf()}for(d=0;4>d;d++){Pf=1-Pf;b=Of[Pf];a=Of[1-Pf];for(e=0;3>e;e++)for(c=q(Nf),h=c.next();!h.done;h=c.next()){h=h.value;var g=h.Ic*b[e][h.ig.index-ef];g*=h.hh[e];a[e][h.Xe.index-ef]+=g/h.Xe.Ai}e=
q(df);for(c=e.next();!c.done;c=e.next())c=c.value,h=c.index-ef,c.ae?(b[0][h]=c.fd.x,b[1][h]=c.fd.y,b[2][h]=c.fd.z,a[0][h]=c.fd.x,a[1][h]=c.fd.y,a[2][h]=c.fd.z):(b[0][h]=c.fd.x,b[1][h]=c.fd.y,b[2][h]=c.fd.z)}for(a=performance.now()+4;performance.now()<a&&Ki(););u.w.Ij||0!=u.l%5||(this.Ak(),this.zk(),this.yk());u.w.ek()};
u.Zi.step=function(){u.Rb.r=0;u.Rb.Oa=0;u.Rb.ga=0;u.Rb.Ea=0;u.w.ia&&4>u.l-u.w.ia.jj&&(u.Rb.r+=24,u.Rb.Oa+=24,u.Rb.ga+=24,u.Rb.Ea+=24);if(u.w.ia){var a=u.l-u.w.ia.Zg;a=1.5-a/6;0>a&&(a=0);1<a&&(a=1);u.Rb.r+=170*a;u.Rb.Ea+=170*a}v.bindFramebuffer(v.FRAMEBUFFER,u.sg.object);u.Db(2);v.clear(v.DEPTH_BUFFER_BIT|v.STENCIL_BUFFER_BIT);0==u.l%60&&u.Bj.children.sort(Ji);$f();u.Va(u.v.la.get("physical"));u.Ye.Qa=1;je(u.Ye);u.Ye.Qa=0;u.C.N("clipY",Infinity,!1);var b=Kb.first();for(a=hf.first();b.item;){if(a.item){if(a.item.Cg<
u.l){var c=a.next;Bb(a);a=c;continue}if(0<Lb(b.item,a.item)){a=a.next;continue}}c=b.next;Bb(b);Eb(b,a);b=c}for(;a.item;)b=a.next,a.item.Cg<u.l&&Bb(a),a=b;jf.H=.00390625*u.pa.O.H;jf.m31=.00390625*u.pa.O.m31;jf.m32=.00390625*u.pa.O.m32;u.tb(tg);u.Va(u.v.la.get("sky"));u.Mb(0,u.v.ba.get("concr01"));u.C.N("texture1",1,!0);u.Mb(1,u.v.ba.get("sky01"));u.C.N("color",Cd);u.nb(0);u.Db(1);u.Lb(0);a=new U;b=(.5*u.pa.Ve+.5*u.pa.Pe)*Yf.Lc;a.scale(b*u.viewport.ratio,b,1);a.m32=-b/Math.tan(u.pa.ed);ce(u.pa.O,a,
a);u.C.N("modelMatrix",a);v.drawArrays(v.TRIANGLE_FAN,0,4);if(u.we.children){u.we.children.sort(Ii);Y.Ia=128;for(a=u.we.children.first();a.item;a=a.next)a.item.vg()&&a.item instanceof Y&&a.item.ue();v.enable(v.STENCIL_TEST);for(a=u.we.children.first();a.item;a=a.next)a.item.vg()&&(a.item instanceof Y||(v.stencilFunc(v.GEQUAL,128,255),v.stencilOp(v.KEEP,v.KEEP,v.KEEP)),a.item.Na());v.disable(v.STENCIL_TEST)}if(u.w.ia&&u.w.ia.Xa.F instanceof pk&&.5<u.w.ia.Xa.focus){u.Va(u.v.la.get("flashCardThreshold"));
u.nb(1);u.Db(1);v.depthFunc(v.GREATER);for(a=u.we.children.first();a.item;a=a.next)if(a.item instanceof Y&&a.item.Qa&&600>u.l-a.item.ah){u.C.N("color",new T(0,0,0,32*(1-(u.l-a.item.ah)/600)));b=a.item;u.tb(tg);u.Mb(0,b.ma);u.Lb(0);c=new U;c.set(b.Ha);var d=b.Od;c.G*=d;c.K*=d;c.L*=d;c.I*=-d;c.m11*=-d;c.m12*=-d;u.C.N("modelMatrix",c);v.drawArrays(v.TRIANGLE_FAN,ug(b.qh*b.ee+b.l,b.mb),4)}u.C.N("color",Cd);v.depthFunc(v.LEQUAL)}u.w.Ri.Na();u.w.Qi.Na();u.Va(qj.C);u.C.N("modelMatrix",jf);qj.da.bind();u.nb(1);
u.Db(1);u.Lb(1);u.tb(qj.La);u.$d(qj.sd);b=a=0;for(c=hf.first();c.item;c=c.next)c.item.Pi==a+b?b+=c.item.Oi:(b&&v.drawElements(v.TRIANGLES,b,v.UNSIGNED_SHORT,2*a),a=c.item.Pi,b=c.item.Oi);b&&v.drawElements(v.TRIANGLES,b,v.UNSIGNED_SHORT,2*a);u.nb(1);u.Db(1);u.Lb(0);u.Va(u.v.la.get("monoEffect"));u.tb(tg);v.activeTexture(v.TEXTURE0);v.bindTexture(v.TEXTURE_2D,u.v.ba.get("shadow").object);u.C.N("enableTexture0",1,!0);u.C.N("color",u.Ce.color);u.tg.Qa=1;je(u.tg);u.tg.Qa=0;if(u.xe.children){a=u.pa.O.ud();
for(b=u.xe.children.first();b.item;b=b.next)b.item.vg()&&(b.item.depth=Dc(a,b.item.b));u.xe.children.sort(pi.W);pi.ue();u.xe.Qa=1;je(u.xe);u.xe.Qa=0}u.jd.Qa=1;je(u.jd);u.jd.Qa=0;u.w.ia&&(u.Cj(u.w.ia.kd),Zf(u.w.ia.kd),u.yd.Qa=1,je(u.yd),u.yd.Qa=0);u.w.ia&&(a=u.w.ia.Xa,a.Qa=1,a.Na(),a.Qa=0);u.nb(0);u.Db(0);u.Lb(0);v.bindFramebuffer(v.FRAMEBUFFER,null);u.Ub.zc.N("viewMatrix",ge);u.Ub.zc.upload();u.tb(tg);u.ug(new Qc(u.canvas.width,u.canvas.height));u.Va(u.v.la.get("imageContrast"));v.activeTexture(v.TEXTURE0);
v.bindTexture(v.TEXTURE_2D,u.sg.color.object);u.C.N("texture0",0,!0);u.C.N("enableTexture0",1,!0);u.C.N("modelMatrix",ge);u.C.N("color",Cd);u.C.N("fadeColor",u.Rb);v.drawArrays(v.TRIANGLE_FAN,0,4);u.w.ia&&u.w.Xj()};
u.w.Xj=function(){function a(){w.G=m*A.width/t;w.m11=n*A.height/z;w.H=y/t;w.m31=-B/z;u.C.N("modelMatrix",w)}function b(D,F,K,V,Q,ma,aa){u.Mb(0,D);var oa=u.canvas.width>>1,ob=u.canvas.height>>1,Pa=.5*D.width,Db=.5*D.height;0==k?F-=oa:1==k&&(F+=oa);2==l?K-=ob:3==l&&(K+=ob);0==h?F+=Pa:1==h&&(F-=Pa);2==g?K+=Db:3==g&&(K-=Db);F=Math.round(F);K=Math.round(K);void 0===V?v.scissor(0,0,u.canvas.width,u.canvas.height):v.scissor(F+oa-Pa+V,-K+ob-Db+Q,ma,aa);V=new U;V.G=D.width/u.canvas.width*m;V.m11=-D.height/
u.canvas.height*n;V.H=2*F/u.canvas.width;V.m31=-2*K/u.canvas.height;u.C.N("modelMatrix",V);v.drawArrays(v.TRIANGLE_FAN,0,4)}function c(D){D=u.l-D.Oh;return 60<D?1:1+.25*Math.pow(.9375,D)}var d=u.w.ia.Xa.F;if(u.w.Gg){u.w.Nj=new Le;var e=[];d&&(e=e.concat(d.wh));e=e.concat(u.w.ad);Me(e);u.w.Gg=!1}u.ug(new Qc(u.canvas.width,u.canvas.height));u.Ub.zc.N("viewMatrix",ge);u.Ub.zc.upload();u.Db(0);u.Lb(0);var h=0,g=2,k=0,l=2,m=1,n=1;u.nb(2);v.enable(v.SCISSOR_TEST);u.tb(tg);u.Va(u.v.la.get("image"));u.C.N("color",
Cd);if(d)if(d.uh()&&(h=4,g=2,k=4,l=5,e=Math.cos(60*u.l/Math.PI),e=qb(e,0,1),u.C.N("color",new T(255,255*e,255*e,127+128*e)),e=u.v.ba.get("HUDWarnReload"),b(e,0,30),u.C.N("color",Cd)),d instanceof pk){var r=d.ya;h=0;g=3;k=4;l=5;e=u.v.ba.get("HUDMagRevolver");b(e,-158-34*r,123,34*r,0,34,34);g=2;e=u.v.ba.get("HUDAmmo2");u.C.N("color",new T(0,0,0,128));b(e,-201,91);u.C.N("color",Cd)}else d instanceof kk?(r=d.ya+d.wa,h=0,g=3,k=4,l=5,e=u.v.ba.get("HUDMagCarbine"),b(e,-208,124+13*r,0,13*r,97,13),g=2,e=u.v.ba.get("HUDAmmo3"),
u.C.N("color",new T(0,0,0,128)),b(e,-208,81),u.C.N("color",Cd)):d instanceof ok&&(r=d.wa,h=0,g=3,k=4,l=5,e=u.v.ba.get("HUDMagShotgun"),b(e,-150-18*r,123,18*r,0,18,34),g=2,e=u.v.ba.get("HUDAmmo2"),u.C.N("color",new T(0,0,0,128)),b(e,-201,91),u.C.N("color",Cd));h=1;g=3;k=4;l=5;e=u.v.ba.get("HUDGrenade");for(r=0;4>r;r++)b(e,208,125-18*r);e=Math.round(u.w.ia.lb/3);h=0;g=2;k=4;l=5;r=u.v.ba.get("HUDLife");b(r,-208,-137,0,18,148,22);b(r,-181,-152,0,12,e,6);var p=Math.round(u.w.ia.ne/3);0>p?b(r,-181+e,-158,
0,6,-p,6):0<p&&b(r,-181+e-120,-164,120-p,0,p,6);d&&u.w.ia.Xa.nc&&(u.nb(1),u.Va(u.v.la.get("monoEffect")),e=new Zd,u.w.ia.Lf?(u.C.N("color",new T(255,0,0,255)),r=u.w.ia.Lf,u.w.pa.Fi.transform(new Zd(r.x,r.y,r.z,1),e),e.x/=2*e.a,e.y/=2*e.a):u.C.N("color",new T(0,128,255,255)),u.C.N("ambientLight",new J(1,1,1)),h=4,g=5,k=4,l=5,(r=d.constructor.ni)&&b(r,Math.round(e.x*u.canvas.width),Math.round(-e.y*u.canvas.height)),u.nb(2),u.Va(u.v.la.get("image")),u.C.N("color",Cd));v.disable(v.SCISSOR_TEST);u.tb(u.w.Nj);
r=e=0;var t=u.canvas.width>>1,z=u.canvas.height>>1,w=new U;if(d&&d.wh){d=d.wh;var y=d.x;var B=d.y;var A=d.Gj;u.Mb(0,A);a();u.C.N("color",d.color);r=d.length;v.drawArrays(v.TRIANGLES,e,r);e+=r}A=u.v.ba.get("HUDNumerals24Bold");u.Mb(0,A);y=208;B=-134;d=u.l-u.w.ad.Oh;60>d?(m=n=1.5*(1+.25*Math.pow(.9375,d)),y=0,y-=u.w.ad.width*A.width*m*.5,B+=30-.5*d,B+=u.w.ad.height*A.height*n):(m=n=c(u.w.ad),y-=u.w.ad.width*A.width*m,B+=u.w.ad.height*A.height*n);y+=1;B+=2;a();r=u.w.ad.length;u.C.N("color",Dd);v.drawArrays(v.TRIANGLES,
e,r);--y;B-=2;a();u.C.N("color",2>u.l-u.w.ad.Oh?Cd:Fd);v.drawArrays(v.TRIANGLES,e,r);e+=r;m=n=1};
u.mj=function(){var a=u.ci=document.createElement("div");a.style.position="absolute";a.style.backgroundColor="rgba(0,0,0,0.8)";a.style.left=0;a.style.top=0;a.style.right=0;a.style.bottom=0;a.style.userSelect="none";se.appendChild(a);a=document.createElement("div");a.style.position="absolute";a.style.left="50%";a.style.top="50%";u.ci.appendChild(a);var b=document.createElement("button");b.style.position="relative";b.style.left="-50%";b.style.top="-1em";b.style.zIndex=2;b.style.margin="0px";b.style.padding=
"16px";b.style.background="none";b.style.color="white";b.style.fontFamily="'Arial', sans-serif";b.style.fontSize="2em";b.style.fontWeight="bold";b.style.border="0px";b.style.cursor="pointer";b.title="play";b.innerHTML="Play";b.onclick=function(){Ye.sk()};a.appendChild(b)};document.addEventListener("pointerlockchange",function(){document.pointerLockElement?(se.removeChild(u.ci),Ze.clear(),Ye.clear(),u.resume()):(se.appendChild(u.ci),u.pause())});
(function(){var a,b,c,d,e;return Ja(new Ha(new Da(function(h){if(1==h.W){console.log("ShootPotato v0.004");a=(new Date).getTime();window.localStorage.removeItem("resources");window.localStorage.removeItem("resourceVersion");var g=fetch("resources_221218_01.gob");h.W=2;return{value:g}}if(3!=h.W)return b=h.Pb,c=Uint8Array,g=b.arrayBuffer(),h.W=3,{value:g};d=new c(h.Pb);for(e=0;e<d.length;e++);d.position=0;g=d;for(var k=53,l=0;l<g.length;l++){var m=g[l];g[l]=g[l]-193*k-53&255;k=m}u.v.load(d);console.log("Resources loaded from URL in",
(new Date).getTime()-a,"ms.");h.W=0})))})();
