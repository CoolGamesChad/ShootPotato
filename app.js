var f;function ba(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function p(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:ba(a)}}function fa(a){if(!(a instanceof Array)){a=p(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
var ha="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ia="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function ja(a,b){if(b){var c=ha;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ia(c,a,{configurable:!0,writable:!0,value:b})}}
ja("Promise",function(a){function b(g){this.va=0;this.yb=void 0;this.N=[];var k=this.Za();try{g(k.resolve,k.reject)}catch(m){k.reject(m)}}function c(){this.N=null}function d(g){return g instanceof b?g:new b(function(k){k(g)})}if(a)return a;c.prototype.va=function(g){if(null==this.N){this.N=[];var k=this;this.Za(function(){k.yb()})}this.N.push(g)};var e=ha.setTimeout;c.prototype.Za=function(g){e(g,0)};c.prototype.yb=function(){for(;this.N&&this.N.length;){var g=this.N;this.N=[];for(var k=0;k<g.length;++k){var m=
g[k];g[k]=null;try{m()}catch(l){this.lb(l)}}}this.N=null};c.prototype.lb=function(g){this.Za(function(){throw g;})};b.prototype.Za=function(){function g(l){return function(n){m||(m=!0,l.call(k,n))}}var k=this,m=!1;return{resolve:g(this.mg),reject:g(this.lb)}};b.prototype.mg=function(g){if(g===this)this.lb(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.ng(g);else{a:switch(typeof g){case "object":var k=null!=g;break a;case "function":k=!0;break a;default:k=!1}k?this.uf(g):
this.qc(g)}};b.prototype.uf=function(g){var k=void 0;try{k=g.then}catch(m){this.lb(m);return}"function"==typeof k?this.og(k,g):this.qc(g)};b.prototype.lb=function(g){this.Xc(2,g)};b.prototype.qc=function(g){this.Xc(1,g)};b.prototype.Xc=function(g,k){if(0!=this.va)throw Error("Cannot settle("+g+", "+k+"): Promise already settled in state"+this.va);this.va=g;this.yb=k;this.tf()};b.prototype.tf=function(){if(null!=this.N){for(var g=0;g<this.N.length;++g)h.va(this.N[g]);this.N=null}};var h=new c;b.prototype.ng=
function(g){var k=this.Za();g.Af(k.resolve,k.reject)};b.prototype.og=function(g,k){var m=this.Za();try{g.call(k,m.resolve,m.reject)}catch(l){m.reject(l)}};b.prototype.then=function(g,k){function m(r,q){return"function"==typeof r?function(t){try{l(r(t))}catch(B){n(B)}}:q}var l,n,v=new b(function(r,q){l=r;n=q});this.Af(m(g,l),m(k,n));return v};b.prototype.catch=function(g){return this.then(void 0,g)};b.prototype.Af=function(g,k){function m(){switch(l.va){case 1:g(l.yb);break;case 2:k(l.yb);break;default:throw Error("Unexpected state: "+
l.va);}}var l=this;null==this.N?h.va(m):this.N.push(m)};b.resolve=d;b.reject=function(g){return new b(function(k,m){m(g)})};b.race=function(g){return new b(function(k,m){for(var l=p(g),n=l.next();!n.done;n=l.next())d(n.value).Af(k,m)})};b.all=function(g){var k=p(g),m=k.next();return m.done?d([]):new b(function(l,n){function v(t){return function(B){r[t]=B;q--;0==q&&l(r)}}var r=[],q=0;do r.push(void 0),q++,d(m.value).Af(v(r.length-1),n),m=k.next();while(!m.done)})};return b});
function ka(){ka=function(){};ha.Symbol||(ha.Symbol=la)}function ma(a,b){this.N=a;ia(this,"description",{configurable:!0,writable:!0,value:b})}ma.prototype.toString=function(){return this.N};var la=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new ma("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function oa(){ka();var a=ha.Symbol.iterator;a||(a=ha.Symbol.iterator=ha.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ia(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return pa(ba(this))}});oa=function(){}}function pa(a){oa();a={next:a};a[ha.Symbol.iterator]=function(){return this};return a}function ra(){this.lb=!1;this.va=null;this.yb=void 0;this.N=1;this.Xc=0;this.Za=null}function ua(a){if(a.lb)throw new TypeError("Generator is already running");a.lb=!0}
ra.prototype.qc=function(a){this.yb=a};function va(a,b){a.Za={Fi:b,Ki:!0};a.N=a.Xc}ra.prototype.return=function(a){this.Za={return:a};this.N=this.Xc};function ya(a){this.N=new ra;this.va=a}function za(a,b){ua(a.N);var c=a.N.va;if(c)return Aa(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.N.return);a.N.return(b);return Ca(a)}
function Aa(a,b,c,d){try{var e=b.call(a.N.va,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.N.lb=!1,e;var h=e.value}catch(g){return a.N.va=null,va(a.N,g),Ca(a)}a.N.va=null;d.call(a.N,h);return Ca(a)}
function Ca(a){for(;a.N.N;)try{var b=a.va(a.N);if(b)return a.N.lb=!1,{value:b.value,done:!1}}catch(c){a.N.yb=void 0,va(a.N,c)}a.N.lb=!1;if(a.N.Za){b=a.N.Za;a.N.Za=null;if(b.Ki)throw b.Fi;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function Da(a){this.next=function(b){ua(a.N);a.N.va?b=Aa(a,a.N.va.next,b,a.N.qc):(a.N.qc(b),b=Ca(a));return b};this.throw=function(b){ua(a.N);a.N.va?b=Aa(a,a.N.va["throw"],b,a.N.qc):(va(a.N,b),b=Ca(a));return b};this.return=function(b){return za(a,b)};oa();this[Symbol.iterator]=function(){return this}}
function Ea(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function h(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(h,e)}h(a.next())})}ja("Math.sign",function(a){return a?a:function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1}});
function Ha(a,b){oa();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}ja("Array.prototype.keys",function(a){return a?a:function(){return Ha(this,function(b){return b})}});var Ia=document.body;Ia.style.position="relative";Ia.style.left=(window.innerWidth-960>>1)+"px";Ia.style.width="960px";Ia.style.margin="0px";
Ia.style.marginBottom="20px";Ia.style.padding="0px";Ia.style.display="flex";Ia.style.flexFlow="row wrap";Ia.style.alignItems="flex-start";Ia.style.alignContent="flex-start";Ia.style.backgroundColor="#404040";Ia.style.fontFamily="sans-serif";Ia.style.fontSize="12pt";Ia.style.lineHeight="1.4em";Ia.style.color="white";window.onresize=function(){document.body.style.left=(window.innerWidth-960>>1)+"px"};var Ja=document.createElement("div");Ja.innerHTML="The website where you shoot potatoes.";
Ja.style.fontSize="18pt";Ja.style.fontWeight="bold";Ja.style.flex="1 0 auto";Ja.style.textAlign="center";Ja.style.margin="0";document.body.appendChild(Ja);var Ka=document.createElement("div");Ka.id="paneContainer";Ka.style.width="960px";Ka.style.height="592px";Ka.style.margin="40px 0";Ka.style.outline="10px solid black";Ka.style.backgroundColor="black";document.body.appendChild(Ka);var La=document.createElement("div");La.id="divCPanel";document.body.appendChild(La);var Ma=document.getElementById("divCPanel");
Ma.style.width="960px";Ma.innerHTML='\n\t\t<b>[Q,E,C]</b> - select guns.<br />\n\t\t<b>Mouse</b> - aim and shoot.<br />\n\t\t<b>Right Mouse Button</b> - gun special feature.<br />\n\t\t<b>W,A,S,D</b> and <b>Space</b> - move and jump.<br />\n\t\t<b>Esc</b> - pause the game.<br />\n\t\t\n\t\t<h2 style="color:#ffff80">Requirements:</h2>\n\t\t<ul><li>A desktop computer with a graphics card.</li>\n\t\t<li>Google Chrome.</li></ul>\n\t\tThe graphics are currently too complex for laptops and office computers, but that may change in the future when I implement user graphics settings.<br />\n\t\t<br />\n\t\tChrome is only required because other browsers, such as Firefox, have not yet implemented the "unadjustedMovement" option of the Pointer Lock API, but hopefully they will catch up soon.<br />\n\t\t\n\t\t<h2 style="color:#ffff80">About the game:</h2>\n\t\tShootPotato is currently in development.\n\t\tI am working full-time to implement the remaining features, assets, and fixes to complete it.\n\t\tEventually, I will integrate advertisements on this page to make money, so everyone can always play the game for free, at any time, from any computer, without a login.<br />\n\t\t<br />\n\t\tIn the meantime, have fun with what I\'ve created so far!<br />\n\t\t<br />\n\t\tPlease let me know of any technical problems\u2014your feedback is essential to identifying those problems.<br />\n\t\t<br />\n\t\tSend me an email:<br />\n\t\tchad.chisholm@protonmail.com\n\t';for(var u={},w,Na=new Uint8Array(256),Oa=0;256>Oa;Oa++)Na[Oa]=Na[Oa>>>1]+(Oa&1);function Pa(a,b,c){return a<b?b:a>c?c:a}function Qa(a,b,c){return a*(1-c)+b*c}function Ra(a,b){return a==b?a:0==a?b:0==b?a:0==(a&1)?0==(b&1)?Ra(a>>1,b>>1)<<1:Ra(a>>1,b):0==(b&1)?Ra(a,b>>1):a>=b?Ra(a-b>>1,b):Ra(b-a>>1,a)}function Sa(a,b,c){var d=b*b-4*a*c;if(0<d){c={};d=Math.sqrt(d);a=2*a;var e=(-b+d)/a;a=(-b-d)/a;a>e?(c.ra=e,c.hc=a):(c.ra=a,c.hc=e);return c}return 0==d?(c={},c.ra=-b/(2*a),c.hc=c.ra,c):null}
function Ta(a){this.cmp=a;this.elements=[]}f=Ta.prototype;f.get=function(a){var b=Ua(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements[b]};f.contains=function(a){var b=Ua(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?-1:b};f.add=function(a){return this.push(a)};f.push=function(a){var b=Ua(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return!1;this.elements.splice(b,0,a);return!0};
f.replace=function(a){var b=Ua(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b]=a,!0;this.elements.splice(b,0,a);return!0};f.xa=function(a){var b=Ua(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b];this.elements.splice(b,0,a);return a};f.remove=function(a){var b=Ua(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements.splice(b,1)[0]};
function Ua(a,b){for(var c=0,d=a.elements.length,e=Math.floor(c/2+d/2);c<d;){var h=a.cmp.call(a,b,a.elements[e]);if(0>h)d=e,e=Math.floor(c/2+d/2);else if(0<h)c=e+1,e=Math.floor(c/2+d/2);else break}return e}f.clear=function(){this.elements.length=0};f.Qf=function(){return 0==this.elements.length};function Va(){this.start=new Wa(null);return this}f=Va.prototype;f.Qf=function(){return!this.first().item};f.size=function(){for(var a=0,b=this.first();b.item;b=b.next)a++;return a};f.first=function(){return this.start.next};
f.clear=function(){Xa(this.start);return this};function Ya(a,b){Za(b,a.start);return a}f.add=function(a){return Ya(this,new Wa(a))};function $a(a){for(var b=ab,c=bb,d=b.first();d.item;d=d.next)if(0>c.call(null,a.item,d.item)){Za(a,d);return}Za(a,b.start)}f.get=function(a){for(var b=this.first();b.item;b=b.next)if(b.item==a)return b;return null};f.remove=function(a){a=this.get(a);if(null==a)return null;Xa(a);return this};
f.sort=function(a){for(var b,c=this.first();c.item;c=b){b=c.next;var d=c;for(var e=d.Qb;e.item&&!(0<=a(d.item,e.item));)e=e.Qb;d=e;d!=c.Qb&&(Xa(c),c.Qb=d,c.next=d.next,c.Qb.next=c,c.next.Qb=c)}};function Wa(a){this.item=a;this.Qb=this;this.next=this;return this}function Za(a,b){a.next=b;a.Qb=b.Qb;a.next.Qb=a;a.Qb.next=a}function Xa(a){a.Qb.next=a.next;a.next.Qb=a.Qb;a.next=a.Qb=a};function cb(){if(null===a||void 0===a)var a=(new Date).getTime()+643709624|0;this.r=this.Vi=a}cb.prototype.next=function(){this.r^=this.r<<13;this.r^=this.r>>17;this.r^=this.r<<5;this.r>>>=0};function db(){var a=eb;a.next();return a.r}function x(){var a=eb;a.next();return a.r/4294967295}var eb=new cb;console.log("seed",eb.Vi);function fb(a){return Math.floor(x()*a)}function gb(a){return a[fb(a.length)]}function hb(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return gb(b)};function ib(a,b,c){for(var d=0,e=a.length,h=d+(e-d>>1);d<e;){var g=c.call(null,b,a[h]);if(0>g)e=h,h=d+(e-d>>1);else if(0<g)d=h+1,h=d+(e-d>>1);else break}return h}function jb(a){for(var b=0;b<a.length;b++){var c=fb(a.length-b),d=a[b];a[b]=a[c];a[c]=d}}function kb(a,b){var c=a.splice(0);c=p(c);for(var d=c.next();!d.done;d=c.next())d=d.value,a.splice(ib(a,d,b),0,d)}function bb(a,b){return isNaN(a)?a.index<b.index?-1:a.index>b.index?1:0:a<b.index?-1:a>b.index?1:0}
function lb(a,b){return"string"==typeof a?a<b.name?-1:a>b.name?1:0:a.name<b.name?-1:a.name>b.name?1:0};function mb(a){for(var b=53,c=0;c<a.length;c++){var d=a[c];a[c]=a[c]-193*b-53&255;b=d}}function nb(a){var b=pb(a);a=a.slice(a.position,a.position+=b);return String.fromCharCode.apply(null,a)}function qb(a,b){rb(a,b.length);for(var c=0;c<b.length;c++)a[a.position++]=b.charCodeAt(c)}function sb(a){var b=tb(a);a=a.slice(a.position,a.position+=b);return String.fromCharCode.apply(null,a)}function ub(a,b){vb(a,b.length);for(var c=0;c<b.length;c++)a[a.position++]=b.charCodeAt(c)}
function pb(a){return a[a.position++]}function rb(a,b){a[a.position++]=b&255}function wb(a){var b=0|a[a.position++]<<0;return b|=a[a.position++]<<8}function xb(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}function Db(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;return(b>>>0)-32768}function Eb(a,b){b+=32768;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}function tb(a){var b=a[a.position++]<<0;b+=a[a.position++]<<8;b+=a[a.position++]<<16;return b+=a[a.position++]<<24}
function vb(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}function Fb(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;b|=a[a.position++]<<16;b|=a[a.position++]<<24;return(b>>>0)-2147483648}function Gb(a,b){b+=2147483648;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}
function Hb(a){var b=new Uint8Array(4);b[0]=a[a.position++];b[1]=a[a.position++];b[2]=a[a.position++];b[3]=a[a.position++];return(new Float32Array(b.buffer))[0]}function Ib(a,b){var c=new Float32Array(1);c[0]=b;c=new Uint8Array(c.buffer);a[a.position++]=c[0];a[a.position++]=c[1];a[a.position++]=c[2];a[a.position++]=c[3]};function Jb(){this.size=0;this.root=new Kb;this.root.update=function(){};this.tb=null}Jb.prototype.Qf=function(){return 0==this.size};Jb.prototype.pop=function(){if(this.Qf())return null;var a=this.root.fd.le(),b=a.value;this.remove(a);return b};
Jb.prototype.add=function(a,b){this.tb=new Lb;if(0==this.size)this.root.fd=this.tb,this.tb.parent=this.root;else{var c=this.root;var d=this.size;d=Na[d>>>0&255]+Na[d>>>8&255]+Na[d>>>16&255]+Na[d>>>24];for(var e=0;e<d;e++)c=c.fd;d=new Kb;d.parent=c.parent;c.parent.fd=d;d.wg=c;c.parent=d;d.fd=this.tb;this.tb.parent=d}c=this.tb;c.value=a;c.key=b;c.parent.update();this.size++;return this.tb};
Jb.prototype.remove=function(a){if(a==this.tb)1==this.size?this.root.fd=this.tb=null:Mb(this);else{var b=this.tb.value,c=this.tb.key;Mb(this);a.value=b;a.key=c;a.parent.update()}this.size--};function Mb(a){var b=a.tb.parent,c=b.wg;a.tb=c.tb();c.parent=b.parent;c.parent.fd=c;c.parent.update()}function Kb(){}Kb.prototype.le=function(){return this.first};Kb.prototype.tb=function(){return this.fd.tb()};
Kb.prototype.update=function(){this.first=this.fd.le().key<this.wg.le().key?this.fd.le():this.wg.le();this.parent.update()};function Lb(){}Lb.prototype.le=function(){return this};Lb.prototype.tb=function(){return this};Math.Fe=2*Math.PI;function Nb(a){return a*Math.PI/180}function Ob(a){return Math.PI/2147483648*a}function Pb(a,b,c,d){return Qb(new G(a.x-c.x,a.y-c.y,a.z-c.z),b,d)}function Qb(a,b,c){return Sa(Rb(b,b),2*Rb(a,b),Rb(a,a)-c*c)}function Wb(a,b,c){.7071>a.y&&-.7071<a.y?(b.set(a.z,0,-a.x),Xb(a,b,c).na(1),Xb(c,a,b)):(c.set(0,a.z,-a.y),Xb(c,a,b).na(1),Xb(a,b,c))}
function Yb(a,b){var c;c||(c=new Zb);for(var d=[],e=0;;){for(var h=-1,g=null,k=Number.POSITIVE_INFINITY,m=0;m<b.length;m++)if(!(e&1<<m)){var l=b[m],n=Rb(l,a);n<k&&(h=m,g=l,k=n)}if(0<=k)break;c=c.Sg(a,g,k);d.push(g);e|=1<<h;if(!c)break}a.round()}function Zb(){}Zb.prototype.Sg=function(a,b,c){a.x-=b.x*c;a.y-=b.y*c;a.z-=b.z*c;return new $b(b)};function $b(a){this.n=a}$b.prototype.Sg=function(a,b){b=Xb(this.n,b,new G(0,0,0));if(0==b.na(1))return null;var c=Rb(a,b);a.x=b.x*c;a.y=b.y*c;a.z=b.z*c;return new ac(b)};
function ac(a){this.n=a}ac.prototype.Sg=function(a,b,c){b=c/Rb(this.n,b);if(!isFinite(b))return null;a.x-=this.n.x*b;a.y-=this.n.y*b;a.z-=this.n.z*b;return null};function bc(a,b,c){null==a?(this.ca=b*c,this.xc=b,this.ratio=c):null==b?(this.ca=a,this.xc=a/c,this.ratio=c):null==c?(this.ca=a,this.xc=b,this.ratio=a/b):(this.ca=a,this.xc=b,this.ratio=c);this.y=this.x=0;a=a>b?a:b;for(this.bufferSize=8;this.bufferSize<a;this.bufferSize*=2);}
function cc(a,b,c,d,e){a=Math.round(a);b=Math.round(b);c=Math.round(c);d=Math.round(d);this.h=a;this.c=b;this.u=c;this.j=d;if(!e)return this.S=c-a,this.M=d-b,this.fb=this.da=NaN,this.length=Math.sqrt(this.S*this.S+this.M*this.M),a=this.S,b=this.M,0>a?0>b?-a<-b?(this.type=9,this.da=-a/b,this.fb=-b/this.length,a=Ra(-a,-b),this.S/=a,this.M/=a):-a>-b?(this.type=7,this.da=b/a,this.fb=-a/this.length,a=Ra(-a,-b),this.S/=a,this.M/=a):(this.type=8,this.da=this.M=this.S=-1,this.fb=Math.SQRT1_2):0<b?-a<b?(this.type=
3,this.da=-a/b,this.fb=b/this.length,a=Ra(-a,b),this.S/=a,this.M/=a):-a>b?(this.type=5,this.da=b/a,this.fb=-a/this.length,a=Ra(-a,b),this.S/=a,this.M/=a):(this.type=4,this.S=-1,this.M=1,this.da=-1,this.fb=Math.SQRT1_2):(this.type=6,this.S=-1):0<a?0>b?a<-b?(this.type=11,this.da=-a/b,this.fb=-b/this.length,a=Ra(a,-b),this.S/=a,this.M/=a):a>-b?(this.type=13,this.da=b/a,this.fb=a/this.length,a=Ra(a,-b),this.S/=a,this.M/=a):(this.type=12,this.S=1,this.da=this.M=-1,this.fb=Math.SQRT1_2):0<b?a<b?(this.type=
1,this.da=-a/b,this.fb=b/this.length,a=Ra(a,b),this.S/=a,this.M/=a):a>b?(this.type=15,this.da=b/a,this.fb=a/this.length,a=Ra(a,b),this.S/=a,this.M/=a):(this.type=0,this.M=this.S=1,this.da=-1,this.fb=Math.SQRT1_2):(this.type=14,this.S=1):a<b?(this.type=2,this.M=1):a>b&&(this.type=10,this.M=-1),this}function dc(a,b){return a.h<b.h?-1:a.h>b.h?1:a.c<b.c?-1:a.c>b.c?1:a.u<b.u?-1:a.u>b.u?1:a.j<b.j?-1:a.j>b.j?1:0}f=cc.prototype;
f.replace=function(a){this.remove=!0;if(this.Pc){a=p(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b.Pc){var c=p(this.Pc);for(d=c.next();!d.done;d=c.next())d=d.value,0<=b.Pc.indexOf(d)||(b.Pc.push(d),d.push(b))}else{b.Pc=this.Pc.slice();c=p(b.Pc);for(var d=c.next();!d.done;d=c.next())d.value.push(b)}a=p(this.Pc);for(d=a.next();!d.done;d=a.next())b=d.value,b.splice(b.indexOf(this),1);delete this.Pc}};function ec(a,b){var c=a.h+b.S;b=a.c+b.M;return Math.atan2(L(a,c,b),a.getParameter(c,b))}
function fc(a,b,c){for(var d={Ci:[],code:0},e=0;e<c.length;e++)d.Ci.push(L(c[e],a,b)),1==gc(c[e],a,b)&&(d.code+=1<<e);return d}function hc(a){var b;var c=Number.NEGATIVE_INFINITY;var d=Number.POSITIVE_INFINITY;var e=b=null;var h=a[a.length-1];a=p(a);for(var g=a.next();!g.done;g=a.next()){g=g.value;var k=g.h-g.c;k>c?(c=k,d=g.c,b=h,e=g):k==c&&g.c<d&&(d=g.c,b=h,e=g);h=g}c=b.type&7;d=e.type;return c<d?!0:c>d?!1:b.da<e.da?!0:b.da>e.da?!1:!0}
function kc(a,b,c){var d=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,h=null,g=null;c=p(c);for(var k=c.next();!k.done;k=c.next()){k=k.value;var m=lc(k,a,b);0>m?(m=-m,m<d&&(d=m,h=k)):0<m&&m<e&&(e=m,g=k)}--d;--e;return 0==d||0==e?0:h&&g?d<e?-1:d>e||h.u<g.h?1:-1:g?1:-1}
function mc(a){var b=a.bound;if(!b){b=new nc;for(var c=p(a),d=c.next();!d.done;d=c.next()){var e=d.value;b.xa(e.u,e.j)}}b=b.a+(b.f-b.a>>1);e=c=Number.POSITIVE_INFINITY;a=p(a);for(d=a.next();!d.done;d=a.next())d=d.value,0<d.M?(d=oc(d,b),d<e&&(e=d)):0>d.M&&(d=oc(d,b),d<c&&(c=d));return new O(c+(e-c>>1),b)}
function pc(a,b){var c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;b=p(b);for(var e=b.next();!e.done;e=b.next()){var h=e.value,g=L(a,h.h,h.c),k=L(a,h.u,h.j);e=a.getParameter(h.h,h.c);h=a.getParameter(h.u,h.j);if(g<k)g/=g-k,e=e*(1-g)+h*g,e<d&&(d=e);else if(g>k)g/=g-k,e=e*(1-g)+h*g,e>c&&(c=e);else if(0>g){if(e>h)return null}else if(0<g&&e<h)return null}return!isFinite(c)||!isFinite(d)||c>=d?null:[c,d]}
function gc(a,b,c){if(void 0==a.type)return 0;switch(a.type){case 0:case 1:case 3:var d=0;a=(c-a.c)*-a.da+a.h;b<=a&&(d+=2);b>=a&&(d+=1);return d;case 2:return d=0,b<=a.h&&(d+=2),b>=a.h&&(d+=1),d;case 4:case 5:case 7:return d=0,a=(b-a.h)*a.da+a.c,c<=a&&(d+=2),c>=a&&(d+=1),d;case 6:return d=0,c<=a.c&&(d+=2),c>=a.c&&(d+=1),d;case 8:case 9:case 11:return d=0,a=(c-a.c)*-a.da+a.h,b<=a&&(d+=1),b>=a&&(d+=2),d;case 10:return d=0,b<=a.h&&(d+=1),b>=a.h&&(d+=2),d;case 12:case 13:case 15:return d=0,a=(b-a.h)*
a.da+a.c,c<=a&&(d+=1),c>=a&&(d+=2),d;case 14:return d=0,c<=a.c&&(d+=1),c>=a.c&&(d+=2),d}}
function L(a,b,c){switch(a.type){case 0:case 1:case 3:b-=a.h;c-=a.c;var d=Math.floor(c/a.M);b-=d*a.S;c-=d*a.M;return(c*-a.da-b)*a.fb;case 2:return a.h-b;case 4:case 5:case 7:return b-=a.h,c-=a.c,d=Math.floor(b/-a.S),b+=d*a.S,c+=d*a.M,(b*a.da-c)*a.fb;case 6:return a.c-c;case 8:case 9:case 11:return b-=a.h,c-=a.c,d=Math.floor(c/-a.M),b+=d*a.S,c+=d*a.M,(b-c*-a.da)*a.fb;case 10:return b-a.h;case 12:case 13:case 15:return b-=a.h,c-=a.c,d=Math.floor(b/a.S),b-=d*a.S,c-=d*a.M,(c-b*a.da)*a.fb;case 14:return c-
a.c}return NaN}f.getParameter=function(a,b){var c=this.type,d=this.S,e=this.M;this.type=(c+12)%16;this.S=e;this.M=-d;a=L(this,a,b);this.type=c;this.S=d;this.M=e;return a};f.evaluate=function(a){a/=this.length;return(new O(this.h+(this.u-this.h)*a,this.c+(this.j-this.c)*a)).round()};f.$a=function(a,b){var c=(this.u-this.h)/this.length,d=(this.j-this.c)/this.length;return(new O(this.h+c*a-d*b,this.c+d*a+c*b)).round()};f.me=function(a,b){return(new O(this.getParameter(a,b),L(this,a,b))).round()};
function qc(a){return(new O(a.u-a.h,a.j-a.c)).scale(5E4/a.length)}function rc(a,b){return(new O(a.c-a.j,a.u-a.h)).scale(b/a.length)}
function oc(a,b){var c=0;switch(a.type){case 0:case 1:case 3:if(b<a.c)break;if(b>=a.j)break;c-=a.h;b-=a.c;var d=Math.floor(b/a.M);c-=d*a.S;b-=d*a.M;return b*-a.da-c;case 2:if(b<a.c)break;if(b>=a.j)break;return a.h-c;case 4:case 5:if(b<a.c)break;if(b>=a.j)break;c-=a.h;b-=a.c;d=Math.floor(b/a.M);c-=d*a.S;b-=d*a.M;return b/a.da-c;case 7:if(b<a.j)break;if(b>=a.c)break;c-=a.h;b-=a.c;d=Math.floor(b/-a.M);c+=d*a.S;b+=d*a.M;return b/a.da-c;case 8:case 9:case 11:if(b<a.j)break;if(b>=a.c)break;c-=a.h;b-=a.c;
d=Math.floor(b/-a.M);c+=d*a.S;b+=d*a.M;return b*-a.da-c;case 10:if(b<a.j)break;if(b>=a.c)break;return a.h-c;case 12:case 13:if(b<a.j)break;if(b>=a.c)break;c-=a.h;b-=a.c;d=Math.floor(b/-a.M);c+=d*a.S;b+=d*a.M;return b/a.da-c;case 15:if(!(b<a.c||b>=a.j))return c-=a.h,b-=a.c,d=Math.floor(b/a.M),c-=d*a.S,b-=d*a.M,b/a.da-c}return NaN}
function lc(a,b,c){switch(a.type){case 0:case 1:case 3:if(c<a.c)break;if(c>=a.j)break;b-=a.h;c-=a.c;var d=Math.floor(c/a.M);b-=d*a.S;c-=d*a.M;a=c*-a.da-b;if(0>a)break;return a+1;case 2:if(c<a.c)break;if(c>=a.j)break;a=a.h-b;if(0>a)break;return a+1;case 4:case 5:if(c<a.c)break;if(c>=a.j)break;b-=a.h;c-=a.c;d=Math.floor(c/a.M);b-=d*a.S;c-=d*a.M;a=c/a.da-b;if(0>a)break;return a+1;case 7:if(c<a.j)break;if(c>=a.c)break;b-=a.h;c-=a.c;d=Math.floor(c/-a.M);b+=d*a.S;c+=d*a.M;a=c/a.da-b;if(0>a)break;return-a-
1;case 8:case 9:case 11:if(c<a.j)break;if(c>=a.c)break;b-=a.h;c-=a.c;d=Math.floor(c/-a.M);b+=d*a.S;c+=d*a.M;a=c*-a.da-b;if(0>a)break;return-a-1;case 10:if(c<a.j)break;if(c>=a.c)break;a=a.h-b;if(0>a)break;return-a-1;case 12:case 13:if(c<a.j)break;if(c>=a.c)break;b-=a.h;c-=a.c;d=Math.floor(c/-a.M);b+=d*a.S;c+=d*a.M;a=c/a.da-b;if(0>a)break;return-a-1;case 15:if(!(c<a.c||c>=a.j||(b-=a.h,c-=a.c,d=Math.floor(c/a.M),b-=d*a.S,c-=d*a.M,a=c/a.da-b,0>a)))return a+1}return NaN}
f.log=function(){console.log(this.h+" "+this.c+" "+this.S+" "+this.M+" type: "+this.type+" slope: "+this.da)};f.$=function(){var a=this.Ia(this.h,this.c,this.u,this.j);a.type=this.type;a.da=this.da;a.fb=this.fb;a.length=this.length;a.S=this.S;a.M=this.M;return a};function sc(a){var b=a.Ia(a.u,a.j,a.h,a.c);b.type=(a.type+8)%16;b.da=a.da;b.fb=a.fb;b.length=a.length;b.S=-a.S;b.M=-a.M;return b}f.Ia=function(a,b,c,d){return new cc(a,b,c,d)};
function tc(a){if(a.ba)return a.ba;var b=sc(a);b.ba=a;return a.ba=b}function uc(a,b){return a.type<b.type?-1:a.type>b.type?1:a.da<b.da?-1:a.da>b.da?1:0}function vc(a){var b=[];a=p(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(new O(c.h,c.c));return b}function wc(a){var b=[];a.bound&&(b.bound=a.bound);a=p(a);for(var c=a.next();!c.done;c=a.next())b.unshift(tc(c.value));return b}
function P(a,b,c,d){this.set(void 0===a?255:a,void 0===b?255:b,void 0===c?255:c,void 0===d?255:d);return this}function xc(a,b){return a.r<b.r?-1:a.r>b.r?1:a.Ca<b.Ca?-1:a.Ca>b.Ca?1:a.Y<b.Y?-1:a.Y>b.Y?1:a.pa<b.pa?-1:a.pa>b.pa?1:0}P.prototype.set=function(a,b,c,d){255<a&&(a=255);0>a&&(a=0);255<b&&(b=255);0>b&&(b=0);255<c&&(c=255);0>c&&(c=0);255<d&&(d=255);0>d&&(d=0);this.r=a;this.Ca=b;this.Y=c;this.pa=d;return this};
P.prototype.scale=function(a){this.r=Math.round(this.r*a);this.Ca=Math.round(this.Ca*a);this.Y=Math.round(this.Y*a);return this};P.prototype.save=function(a){rb(a,this.r);rb(a,this.Ca);rb(a,this.Y);rb(a,this.pa);return this};function yc(a){return new P(pb(a),pb(a),pb(a),pb(a))}var zc=new P(0,0,0,0),Bc=new P(255,255,255,255),Cc=new P(0,0,0,255),Dc=new P(255,0,0,255),Ec=new P(255,255,0,255);new P(0,255,0,255);new P(0,255,255,255);new P(0,0,255,255);new P(255,0,255,255);
function Fc(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.gg=this.fg=this.wd=this.vd=this.Wb=this.Vb=this.Db=this.Ob=this.Cb=this.dd=this.cd=this.bd=this.ad=this.$c=this.Zc=0;this.ja=this.tc=this.uc=this.X=255;return this}
function Gc(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:a.z<b.z?-1:a.z>b.z?1:a.Zc<b.Zc?-1:a.Zc>b.Zc?1:a.$c<b.$c?-1:a.$c>b.$c?1:a.ad<b.ad?-1:a.ad>b.ad?1:a.bd<b.bd?-1:a.bd>b.bd?1:a.cd<b.cd?-1:a.cd>b.cd?1:a.dd<b.dd?-1:a.dd>b.dd?1:a.Cb<b.Cb?-1:a.Cb>b.Cb?1:a.Ob<b.Ob?-1:a.Ob>b.Ob?1:a.Db<b.Db?-1:a.Db>b.Db?1:a.Vb<b.Vb?-1:a.Vb>b.Vb?1:a.Wb<b.Wb?-1:a.Wb>b.Wb?1:a.vd<b.vd?-1:a.vd>b.vd?1:a.wd<b.wd?-1:a.wd>b.wd?1:a.fg<b.fg?-1:a.fg>b.fg?1:a.gg<b.gg?-1:a.gg>b.gg?1:a.X<b.X?-1:a.X>b.X?1:a.uc<b.uc?-1:a.uc>
b.uc?1:a.tc<b.tc?-1:a.tc>b.tc?1:a.ja<b.ja?-1:a.ja>b.ja?1:0}function Hc(a,b,c){var d=1-c,e=new Fc(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c);e.Zc=a.Zc*d+b.Zc*c;e.$c=a.$c*d+b.$c*c;e.ad=a.ad*d+b.ad*c;e.bd=a.bd*d+b.bd*c;e.cd=a.cd*d+b.cd*c;e.dd=a.dd*d+b.dd*c;e.Cb=a.Cb*d+b.Cb*c;e.Ob=a.Ob*d+b.Ob*c;e.Db=a.Db*d+b.Db*c;e.Vb=a.Vb*d+b.Vb*c;e.Wb=a.Wb*d+b.Wb*c;e.vd=a.vd*d+b.vd*c;e.wd=a.wd*d+b.wd*c;e.X=a.X*d+b.X*c;e.uc=a.uc*d+b.uc*c;e.tc=a.tc*d+b.tc*c;e.ja=a.ja*d+b.ja*c;return e}
Fc.prototype.$=function(){var a=new Fc(this.x,this.y,this.z);a.Zc=this.Zc;a.$c=this.$c;a.ad=this.ad;a.bd=this.bd;a.cd=this.cd;a.dd=this.dd;a.Cb=this.Cb;a.Ob=this.Ob;a.Db=this.Db;a.Vb=this.Vb;a.Wb=this.Wb;a.vd=this.vd;a.wd=this.wd;a.X=this.X;a.uc=this.uc;a.tc=this.tc;a.ja=this.ja;return a};function Nc(a,b){a.X=b.r;a.uc=b.Ca;a.tc=b.Y;a.ja=b.pa}function Oc(a,b,c){a.Vb=b;a.Wb=c;return a};function O(a,b){this.x=void 0===a?0:a;this.y=void 0===b?0:b;return this}f=O.prototype;f.set=function(a,b){this.x=a;this.y=b;return this};f.se=function(){return this.x*this.x+this.y*this.y};f.length=function(){return Math.sqrt(this.se())};f.na=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.na(1);return this};f.scale=function(a){this.x*=a;this.y*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.sub=function(a){this.x=this.x-a.x;this.y=this.y-a.y;return this};f.$=function(){return new O(this.x,this.y)};f.Hc=function(a){a||(a=new Float32Array(2));a[0]=this.x;a[1]=this.y;return a};function Pc(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0}f.Lg=function(){return 0!=this.x||0!=this.y?!1:!0};function G(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;return this}
function Rb(a,b){return a.x*b.x+a.y*b.y+a.z*b.z}function Xb(a,b,c){c.x=a.y*b.z-a.z*b.y;c.y=b.x*a.z-b.z*a.x;c.z=a.x*b.y-a.y*b.x;return c}function Qc(a,b,c){c.x=a.x-b.x;c.y=a.y-b.y;c.z=a.z-b.z;return c}function Rc(a,b,c){var d=1-c;return new G(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c)}function Sc(a,b){b.x=a.x;b.y=a.y;b.z=a.z}f=G.prototype;f.$=function(){return new G(this.x,this.y,this.z)};f.set=function(a,b,c){this.x=a;this.y=b;this.z=c;return this};
f.se=function(){return this.x*this.x+this.y*this.y+this.z*this.z};f.length=function(){return Math.sqrt(this.se())};f.na=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.na(1);return this};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.sub=function(a){return Qc(this,a,this)};f.Hc=function(a){a||(a=new Float32Array(3));a[0]=this.x;a[1]=this.y;a[2]=this.z;return a};f.Lg=function(){return 0!=this.x||0!=this.y||0!=this.z?!1:!0};function Tc(a,b,c,d){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.ca=void 0===d?0:d;return this}Tc.prototype.set=function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.ca=d;return this};
Tc.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.ca=Math.round(this.ca);return this};Tc.prototype.Hc=function(a){a||(a=new Float32Array(4));a[0]=this.x;a[1]=this.y;a[2]=this.z;a[3]=this.ca;return a};Tc.prototype.Lg=function(){return 0!=this.x||0!=this.y||0!=this.z||0!=this.ca?!1:!0};function Uc(){this.reset();return this}f=Uc.prototype;
f.set=function(a){this.A=a.A;this.G=a.G;this.H=a.H;this.D=a.D;this.m11=a.m11;this.m12=a.m12;this.B=a.B;this.m21=a.m21;this.m22=a.m22;return this};f.reset=function(){this.A=1;this.D=this.H=this.G=0;this.m11=1;this.m21=this.B=this.m12=0;this.m22=1;return this};
f.rotate=function(a,b,c){var d=Math.cos(c);c=Math.sin(c);var e=c*this.A+d*this.G,h=d*this.D-c*this.m11,g=c*this.D+d*this.m11,k=d*this.B-c*this.m21,m=c*this.B+d*this.m21;this.A=d*this.A-c*this.G;this.G=e;this.D=h;this.m11=g;this.B=k;this.m21=m;d=Math.cos(b);b=Math.sin(b);c=d*this.H-b*this.G;e=b*this.m12+d*this.m11;h=d*this.m12-b*this.m11;g=b*this.m22+d*this.m21;k=d*this.m22-b*this.m21;this.G=b*this.H+d*this.G;this.H=c;this.m11=e;this.m12=h;this.m21=g;this.m22=k;b=Math.cos(a);a=Math.sin(a);d=a*this.H+
b*this.A;c=b*this.m12-a*this.D;e=a*this.m12+b*this.D;h=b*this.m22-a*this.B;g=a*this.m22+b*this.B;this.H=b*this.H-a*this.A;this.A=d;this.m12=c;this.D=e;this.m22=h;this.B=g;return this};f.eh=function(a,b){var c=Math.cos(b),d=Math.sin(b);b=1-c;var e=a.x*a.y,h=a.y*a.z,g=a.z*a.x,k=a.x*d,m=a.y*d;d*=a.z;this.A=a.x*a.x*b+c;this.G=e*b+d;this.H=g*b-m;this.D=e*b-d;this.m11=a.y*a.y*b+c;this.m12=h*b+k;this.B=g*b+m;this.m21=h*b-k;this.m22=a.z*a.z*b+c;return this};
f.$g=function(a,b){a=(new Uc).eh(a,b);Vc(a,this,this);return this};f.scale=function(a,b,c){this.A*=a;this.G*=a;this.H*=a;this.D*=b;this.m11*=b;this.m12*=b;this.B*=c;this.m21*=c;this.m22*=c;return this};
f.Kg=function(a){a||(a=this);var b=this.Bg();if(0==b)return a;var c=-(this.D*this.m22+this.m12*-this.B),d=this.D*this.m21+this.m11*-this.B,e=-(this.G*this.m22+this.H*-this.m21),h=this.A*this.m22+this.H*-this.B,g=-(this.A*this.m21+this.G*-this.B),k=this.G*this.m12+this.H*-this.m11,m=-(this.A*this.m12+this.H*-this.D),l=this.A*this.m11+this.G*-this.D;b=1/b;a.A=(this.m11*this.m22+this.m12*-this.m21)*b;a.D=c*b;a.B=d*b;a.G=e*b;a.m11=h*b;a.m21=g*b;a.H=k*b;a.m12=m*b;a.m22=l*b;return a};
f.Bg=function(){return this.A*(this.m11*this.m22-this.m12*this.m21)+this.G*(this.m12*this.B-this.D*this.m22)+this.H*(this.D*this.m21-this.m11*this.B)};f.Hc=function(a){a||(a=new Float32Array(9));a[0]=this.A;a[1]=this.G;a[2]=this.H;a[3]=this.D;a[4]=this.m11;a[5]=this.m12;a[6]=this.B;a[7]=this.m21;a[8]=this.m22;return a};
function Vc(a,b,c){var d=a.G*b.A+a.m11*b.G+a.m21*b.H,e=a.H*b.A+a.m12*b.G+a.m22*b.H,h=a.A*b.D+a.D*b.m11+a.B*b.m12,g=a.G*b.D+a.m11*b.m11+a.m21*b.m12,k=a.H*b.D+a.m12*b.m11+a.m22*b.m12,m=a.A*b.B+a.D*b.m21+a.B*b.m22,l=a.G*b.B+a.m11*b.m21+a.m21*b.m22,n=a.H*b.B+a.m12*b.m21+a.m22*b.m22;c.A=a.A*b.A+a.D*b.G+a.B*b.H;c.D=h;c.B=m;c.G=d;c.m11=g;c.m21=l;c.H=e;c.m12=k;c.m22=n;return c}
f.transform=function(a,b){return b.set(this.A*a.x+this.D*a.y+this.B*a.z,this.G*a.x+this.m11*a.y+this.m21*a.z,this.H*a.x+this.m12*a.y+this.m22*a.z)};f.Jf=function(){return new G(this.A,this.G,this.H)};f.Kf=function(){return new G(this.D,this.m11,this.m12)};f.ke=function(){return new G(this.B,this.m21,this.m22)};f.Zf=function(a){this.A=a.x;this.G=a.y;this.H=a.z;return this};f.$f=function(a){this.D=a.x;this.m11=a.y;this.m12=a.z;return this};f.ag=function(a){this.B=a.x;this.m21=a.y;this.m22=a.z;return this};
f.save=function(a){var b=new Uint8Array((new Float32Array([this.A,this.G,this.H,this.D,this.m11,this.m12,this.B,this.m21,this.m22])).buffer);a.set(b,a.position);a.position+=36};f.load=function(a){a=a.slice(a.position,a.position+=36);a=new Float32Array(a.buffer);a=p(a);this.A=a.next().value;this.G=a.next().value;this.H=a.next().value;this.D=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.B=a.next().value;this.m21=a.next().value;this.m22=a.next().value};new Uc;
function R(){this.reset();return this}f=R.prototype;f.set=function(a){this.A=a.A;this.G=a.G;this.H=a.H;this.Ka=a.Ka;this.D=a.D;this.m11=a.m11;this.m12=a.m12;this.m13=a.m13;this.B=a.B;this.m21=a.m21;this.m22=a.m22;this.m23=a.m23;this.v=a.v;this.m31=a.m31;this.m32=a.m32;this.m33=a.m33;return this};f.reset=function(){this.A=1;this.D=this.Ka=this.H=this.G=0;this.m11=1;this.m21=this.B=this.m13=this.m12=0;this.m22=1;this.m32=this.m31=this.v=this.m23=0;this.m33=1;return this};
function Wc(a){Uc.prototype.reset.call(a)}f.translate=function(a,b,c){this.v+=a;this.m31+=b;this.m32+=c;return this};f.rotate=Uc.prototype.rotate;f.eh=Uc.prototype.eh;f.$g=Uc.prototype.$g;f.scale=Uc.prototype.scale;
f.Kg=function(a){function b(D,H,J,Z,U,ca,wa,aa,xa){return D*(U*xa-ca*aa)+H*(ca*wa-Z*xa)+J*(Z*aa-U*wa)}a||(a=this);var c=this.Bg();if(0==c)return a;var d=b(this.m11,this.m12,this.m13,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),e=-b(this.D,this.m12,this.m13,this.B,this.m22,this.m23,this.v,this.m32,this.m33),h=b(this.D,this.m11,this.m13,this.B,this.m21,this.m23,this.v,this.m31,this.m33),g=-b(this.D,this.m11,this.m12,this.B,this.m21,this.m22,this.v,this.m31,this.m32),k=-b(this.G,this.H,this.Ka,
this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),m=b(this.A,this.H,this.Ka,this.B,this.m22,this.m23,this.v,this.m32,this.m33),l=-b(this.A,this.G,this.Ka,this.B,this.m21,this.m23,this.v,this.m31,this.m33),n=b(this.A,this.G,this.H,this.B,this.m21,this.m22,this.v,this.m31,this.m32),v=b(this.G,this.H,this.Ka,this.m11,this.m12,this.m13,this.m31,this.m32,this.m33),r=-b(this.A,this.H,this.Ka,this.D,this.m12,this.m13,this.v,this.m32,this.m33),q=b(this.A,this.G,this.Ka,this.D,this.m11,this.m13,this.v,
this.m31,this.m33),t=-b(this.A,this.G,this.H,this.D,this.m11,this.m12,this.v,this.m31,this.m32),B=-b(this.G,this.H,this.Ka,this.m11,this.m12,this.m13,this.m21,this.m22,this.m23),y=b(this.A,this.H,this.Ka,this.D,this.m12,this.m13,this.B,this.m22,this.m23),C=-b(this.A,this.G,this.Ka,this.D,this.m11,this.m13,this.B,this.m21,this.m23),z=b(this.A,this.G,this.H,this.D,this.m11,this.m12,this.B,this.m21,this.m22);c=1/c;a.A=d*c;a.D=e*c;a.B=h*c;a.v=g*c;a.G=k*c;a.m11=m*c;a.m21=l*c;a.m31=n*c;a.H=v*c;a.m12=r*
c;a.m22=q*c;a.m32=t*c;a.Ka=B*c;a.m13=y*c;a.m23=C*c;a.m33=z*c;return a};
f.Bg=function(){var a=this.A*(this.m11*this.m22*this.m33+this.m12*this.m23*this.m31+this.m13*this.m21*this.m32-(this.m13*this.m22*this.m31+this.m11*this.m23*this.m32+this.m12*this.m21*this.m33));a-=this.G*(this.D*this.m22*this.m33+this.m12*this.m23*this.v+this.m13*this.B*this.m32-(this.m13*this.m22*this.v+this.D*this.m23*this.m32+this.m12*this.B*this.m33));a+=this.H*(this.D*this.m21*this.m33+this.m11*this.m23*this.v+this.m13*this.B*this.m31-(this.m13*this.m21*this.v+this.D*this.m23*this.m31+this.m11*
this.B*this.m33));return a-=this.Ka*(this.D*this.m21*this.m32+this.m11*this.m22*this.v+this.m12*this.B*this.m31-(this.m12*this.m21*this.v+this.D*this.m22*this.m31+this.m11*this.B*this.m32))};f.Hc=function(a){a||(a=new Float32Array(16));a[0]=this.A;a[1]=this.G;a[2]=this.H;a[3]=this.Ka;a[4]=this.D;a[5]=this.m11;a[6]=this.m12;a[7]=this.m13;a[8]=this.B;a[9]=this.m21;a[10]=this.m22;a[11]=this.m23;a[12]=this.v;a[13]=this.m31;a[14]=this.m32;a[15]=this.m33;return a};
function Xc(a,b,c){var d=a.G*b.A+a.m11*b.G+a.m21*b.H+a.m31*b.Ka,e=a.H*b.A+a.m12*b.G+a.m22*b.H+a.m32*b.Ka,h=a.Ka*b.A+a.m13*b.G+a.m23*b.H+a.m33*b.Ka,g=a.A*b.D+a.D*b.m11+a.B*b.m12+a.v*b.m13,k=a.G*b.D+a.m11*b.m11+a.m21*b.m12+a.m31*b.m13,m=a.H*b.D+a.m12*b.m11+a.m22*b.m12+a.m32*b.m13,l=a.Ka*b.D+a.m13*b.m11+a.m23*b.m12+a.m33*b.m13,n=a.A*b.B+a.D*b.m21+a.B*b.m22+a.v*b.m23,v=a.G*b.B+a.m11*b.m21+a.m21*b.m22+a.m31*b.m23,r=a.H*b.B+a.m12*b.m21+a.m22*b.m22+a.m32*b.m23,q=a.Ka*b.B+a.m13*b.m21+a.m23*b.m22+a.m33*b.m23,
t=a.A*b.v+a.D*b.m31+a.B*b.m32+a.v*b.m33,B=a.G*b.v+a.m11*b.m31+a.m21*b.m32+a.m31*b.m33,y=a.H*b.v+a.m12*b.m31+a.m22*b.m32+a.m32*b.m33,C=a.Ka*b.v+a.m13*b.m31+a.m23*b.m32+a.m33*b.m33;c.A=a.A*b.A+a.D*b.G+a.B*b.H+a.v*b.Ka;c.D=g;c.B=n;c.v=t;c.G=d;c.m11=k;c.m21=v;c.m31=B;c.H=e;c.m12=m;c.m22=r;c.m32=y;c.Ka=h;c.m13=l;c.m23=q;c.m33=C}
f.transform=function(a,b){return b.set(this.A*a.x+this.D*a.y+this.B*a.z+this.v*a.ca,this.G*a.x+this.m11*a.y+this.m21*a.z+this.m31*a.ca,this.H*a.x+this.m12*a.y+this.m22*a.z+this.m32*a.ca,this.Ka*a.x+this.m13*a.y+this.m23*a.z+this.m33*a.ca)};f.$a=function(a,b){return b.set(this.A*a.x+this.D*a.y+this.B*a.z+this.v,this.G*a.x+this.m11*a.y+this.m21*a.z+this.m31,this.H*a.x+this.m12*a.y+this.m22*a.z+this.m32)};
function Yc(a,b,c){c.set(a.A*b.x+a.D*b.y+a.B*b.z,a.G*b.x+a.m11*b.y+a.m21*b.z,a.H*b.x+a.m12*b.y+a.m22*b.z)}f.Jf=Uc.prototype.Jf;f.Kf=Uc.prototype.Kf;f.ke=Uc.prototype.ke;function Zc(a){return new G(a.v,a.m31,a.m32)}f.Zf=Uc.prototype.Zf;f.$f=Uc.prototype.$f;f.ag=Uc.prototype.ag;function $c(a,b){a.v=b.x;a.m31=b.y;a.m32=b.z}
f.save=function(a){var b=new Uint8Array((new Float32Array([this.A,this.G,this.H,this.Ka,this.D,this.m11,this.m12,this.m13,this.B,this.m21,this.m22,this.m23,this.v,this.m31,this.m32,this.m33])).buffer);a.set(b,a.position);a.position+=64};
f.load=function(a){a=a.slice(a.position,a.position+=64);a=new Float32Array(a.buffer);a=p(a);this.A=a.next().value;this.G=a.next().value;this.H=a.next().value;this.Ka=a.next().value;this.D=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.m13=a.next().value;this.B=a.next().value;this.m21=a.next().value;this.m22=a.next().value;this.m23=a.next().value;this.v=a.next().value;this.m31=a.next().value;this.m32=a.next().value;this.m33=a.next().value};var ad=new R;
function nc(){this.l=Number.POSITIVE_INFINITY;this.s=Number.NEGATIVE_INFINITY;this.a=Number.POSITIVE_INFINITY;this.f=Number.NEGATIVE_INFINITY}nc.prototype.xa=function(a,b){a<this.l&&(this.l=a);a>this.s&&(this.s=a);b<this.a&&(this.a=b);b>this.f&&(this.f=b);return this};nc.prototype.Th=function(a){this.xa(a.l,a.a);this.xa(a.s,a.f)};nc.prototype.$=function(){var a=new nc;a.l=this.l;a.s=this.s;a.a=this.a;a.f=this.f;return a};
nc.prototype.Bd=function(a,b){return a<=this.l||a>=this.s||b<=this.a||b>=this.f?!1:!0};function bd(){this.l=Number.POSITIVE_INFINITY;this.s=Number.NEGATIVE_INFINITY;this.a=Number.POSITIVE_INFINITY;this.f=Number.NEGATIVE_INFINITY;this.F=Number.POSITIVE_INFINITY;this.K=Number.NEGATIVE_INFINITY}bd.prototype.xa=function(a,b,c){a<this.l&&(this.l=a);a>this.s&&(this.s=a);b<this.a&&(this.a=b);b>this.f&&(this.f=b);c<this.F&&(this.F=c);c>this.K&&(this.K=c);return this};
bd.prototype.Th=function(a){this.xa(a.l,a.a,a.F);this.xa(a.s,a.f,a.K)};bd.prototype.$=function(){var a=new bd;a.l=this.l;a.s=this.s;a.a=this.a;a.f=this.f;a.F=this.F;a.K=this.K;return a};bd.prototype.Bd=function(a,b){return a<=this.l||a>=this.s||b<=this.a||b>=this.f||void 0<=this.F||void 0>=this.K?!1:!0};u.Node=function(a){this.name=a;this.children=this.parent=null;this.li=new Wa(this);this.Oa=1;this.U=u.U;this.Ma=-2147483648;return this};f=u.Node.prototype;f.create=function(){};f.remove=function(){W(this,null)};function cd(a,b){if(0!=b.call(a)&&a.children)for(a=a.children.first();null!=a.item;a=a.next)cd(a.item,b)}f.step=function(){};f.hi=function(){};f.La=function(){};function fd(a){cd(a,function(){if(!gd(this))return!1;this.La(void 0)})}function gd(a){return!a.Oa||a.U.Ma<u.m?!1:!0}
function W(a,b){if(a.parent)return a.parent=b,u.Yg.push(a),a;if(b)return a.parent=b,hd(a)}function hd(a){Xa(a.li);if(!a.parent)return a;a.parent.children||(a.parent.children=new Va);Ya(a.parent.children,a.li);return a}function id(a,b){a.U=b;if(a.children)for(a=a.children.first();null!=a.item;a=a.next)id(a.item,b)}
f.log=function(){this.name?console.group(this.constructor.name+": "+this.name):console.group(this.constructor.name);if(this.children)for(var a=this.children.first();null!=a.item;a=a.next)a.item.log();console.groupEnd()};u.ka=function(a){u.Node.call(this,a);this.transform=new R;this.la=null;this.I=new R};u.ka.prototype=Object.create(u.Node.prototype);u.ka.prototype.constructor=u.ka;function jd(a,b){var c=a.bg=new u.Od;c.U=a.U;c.Da=1.75*b;c.la=a.I;W(c,u.lf)}
u.ka.prototype.remove=function(){this.bg&&this.bg.remove();u.Node.prototype.remove.call(this)};u.ka.prototype.save=function(a){qb(a,"NG.Node3D");this.I.save()};u.ka.prototype.step=function(){this.la?Xc(this.la,this.transform,this.I):this.I.set(this.transform)};u.U={Ma:NaN,Qa:new G(1,1,1)};u.Yg=[];u.bh=new u.Node("schedule");u.Bc=W(new u.Node("scene"),u.bh);u.inputs=W(new u.Node("inputs"),u.bh);function kd(){this.Ya=new Ta(lb);this.Fb=new Ta(lb);this.ia=new Ta(lb);this.O=new Ta(lb);this.ea=new Ta(lb);return this}
kd.prototype.save=function(a){xb(a,this.Ya.elements.length);for(var b=0;b<this.Ya.elements.length;b++)this.Ya.elements[b].save(a);xb(a,this.Fb.elements.length);for(b=0;b<this.Fb.elements.length;b++)this.Fb.elements[b].save(a);xb(a,this.ia.elements.length);for(b=0;b<this.ia.elements.length;b++)this.ia.elements[b].save(a);xb(a,this.O.elements.length);for(b=0;b<this.O.elements.length;b++)this.O.elements[b].save(a);xb(a,this.ea.elements.length);for(b=0;b<this.ea.elements.length;b++)this.ea.elements[b].save(a)};
kd.prototype.load=function(a){var b=wb(a);for(var c=0;c<b;c++){var d=new ld;d.load(a);this.Ya.replace(d)}b=wb(a);for(c=0;c<b;c++)d=new md,d.load(a),this.Fb.replace(d);b=wb(a);if(this.ia.elements.length){for(c=0;c<b;c++)nb(a),sb(a),sb(a);b=p(this.ia.elements);for(c=b.next();!c.done;c=b.next())c.value.create()}else for(c=0;c<b;c++)d=new nd,d.load(a),this.ia.replace(d);this.kh=b=wb(a);for(c=0;c<b;c++)d=new u.Yc,d.Rh=this,d.load(a),this.O.replace(d);b=wb(a);for(c=0;c<b;c++)d=new u.Audio,d.load(a),this.ea.replace(d);
0==this.kh&&this.ready&&this.ready.call(this)};u.Cg=0;u.Gi=!1;u.Ne={};u.Ne.overflowX=document.body.style.overflowX;u.Ne.overflowY=document.body.style.overflowY;u.Ne.userSelect=document.body.style.userSelect;var od=document.getElementById("paneContainer");od.style.position="relative";od.style.flex="0 0 auto";od.style.zIndex=1;od.addEventListener("contextmenu",function(a){return a.preventDefault()});u.canvas=document.createElement("canvas");u.canvas.style.transformOrigin="top left";u.canvas.style.transform="scale(2.0, 2.0)";
u.canvas.style.imageRendering="pixelated";u.canvas.style.zIndex=-1;od.appendChild(u.canvas);w=u.canvas.getContext("webgl2",{alpha:!1,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1,lj:!0});console.log(w.getParameter(w.VENDOR),w.getParameter(w.VERSION));console.log(w.getParameter(w.RENDERER));u.zb={};u.m=0;u.Ig=1E3/60;u.Ma=-2147483648;u.ff=function(){2147483647==u.Ma&&(u.Ma=-2147483648);u.Ma++};u.vb=new P(0,0,0,0);u.i=new kd;u.w=null;u.jg=null;u.Gh=null;u.Ga=null;u.viewport=null;
u.Ti=function(){u.canvas.width=480;u.canvas.height=296;u.Ie=new bc(480,296,null);u.kf.width=480;u.kf.height=296;u.kf.create();od.style.width="960px";od.style.height="592px"};u.mf=function(a){w.viewport(a.x,a.y,a.ca,a.xc);u.viewport=a;u.zb.Zb.J("viewport",new O(a.ca,a.xc),!0);u.zb.Zb.upload()};u.mi=function(a){u.Ga=a};u.Ua=function(a){u.w!=a&&(u.w=a.bind())};u.rb=function(a){u.jg!=a&&(u.jg=a.bind())};u.rd=function(a){a&&u.Gh!=a&&(u.Gh=a.bind())};
u.Sb=function(a,b){w.activeTexture(w.TEXTURE0+a);b?(w.bindTexture(w.TEXTURE_2D,b.object),u.w.J("enableTexture"+a,1,!0)):(w.bindTexture(w.TEXTURE_2D,null),u.w.J("enableTexture"+a,0,!0))};u.gb=function(a){if(u.qa!=a){switch(a){case 0:w.disable(w.BLEND);break;case 1:w.enable(w.BLEND);w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA);break;case 2:w.enable(w.BLEND),w.blendFunc(w.SRC_ALPHA,w.ONE_MINUS_SRC_ALPHA)}u.qa=a}};
u.mb=function(a){if(u.depth!=a){switch(a){case 0:w.disable(w.DEPTH_TEST);break;case 1:w.enable(w.DEPTH_TEST);w.depthMask(!1);break;case 2:w.enable(w.DEPTH_TEST),w.depthMask(!0)}u.depth=a}};u.Rb=function(a){if(u.facing!=a){switch(a){case 0:w.disable(w.CULL_FACE);break;case 1:w.enable(w.CULL_FACE);w.frontFace(w.CCW);break;case 2:w.enable(w.CULL_FACE),w.frontFace(w.CW)}u.facing=a}};for(var pd=0;4>pd;pd++)w.enableVertexAttribArray(pd);w.clearColor(0,0,0,0);w.depthFunc(w.LEQUAL);
u.start=function(){u.zb.Zb.create(["u_eyeMatrix","u_viewMatrix","u_cameraPos","u_viewport"]);u.zb.gi.create([]);u.$h()};u.Ed={};u.Ed.time=0;u.Ed.Pb=0;u.Ed.Vh=0;u.Ed.Si=function(a){this.ej=a;a>=this.time+1E3&&(this.Vh=this.Pb=0,this.time+=1E3);this.Pb++};u.xg=!0;
u.loop=function(a){var b=(u.Lf-a)/u.Ig;if(.5<b)requestAnimationFrame(u.loop);else{-.5>b&&(u.Lf=a,u.Ed.Vh++);u.Lf+=u.Ig;u.Ed.Si(a);if(u.ni)u.ni--;else{cd(u.bh,function(){this.step()});a=p(u.Yg);for(b=a.next();!b.done;b=a.next())hd(b.value);u.Yg.length=0;u.m++}u.xg&&requestAnimationFrame(u.loop)}};u.pause=function(){u.xg=!1};u.resume=function(){u.xg=!0;requestAnimationFrame(function(a){u.Ed.time=a;u.Ed.ej=a;u.Lf=a;u.loop(a)})};u.$h=function(){u.resume()};
u.nj=function(a,b){for(var c=[],d=Math.floor(640/a);1920>=a*d;d++)c.push([a*d,b*d]);return c};u.qj=function(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()};document.addEventListener("fullscreenchange",function(){u.Gi=document.fullscreenElement?!0:!1});function qd(a,b){a=w.createShader(a);w.shaderSource(a,b);w.compileShader(a);if(w.getShaderParameter(a,w.COMPILE_STATUS))return a;console.log(b);console.log(w.getShaderInfoLog(a));w.deleteShader(a)}function nd(){this.name=void 0;this.za={};this.ig={}}f=nd.prototype;
f.create=function(){this.Yi=qd(w.VERTEX_SHADER,this.jh);this.Xi=qd(w.FRAGMENT_SHADER,this.ih);var a=this.Xi;var b=this.jj;var c=w.createProgram();w.attachShader(c,this.Yi);w.attachShader(c,a);if(b)for(a=0;a<b.length;a++)w.bindAttribLocation(c,a,b[a]);else w.bindAttribLocation(c,0,"a_position"),w.bindAttribLocation(c,1,"a_texture0"),w.bindAttribLocation(c,2,"a_color"),w.bindAttribLocation(c,3,"a_basisZ");w.linkProgram(c);w.getProgramParameter(c,w.LINK_STATUS)?b=c:(console.log(w.getProgramInfoLog(c)),
w.deleteShader(c),b=void 0);this.xe=b;u.Ua(this)};
f.J=function(a,b,c){a="u_"+a;this.za.hasOwnProperty(a)||(this.za[a]=w.getUniformLocation(this.xe,a));var d=this.ig[a];c?d!=b&&(this.ig[a]=b,w.uniform1i(this.za[a],b)):isNaN(b)?b instanceof Float32Array?w.uniform3fv(this.za[a],b):b instanceof R?w.uniformMatrix4fv(this.za[a],!1,b.Hc()):b instanceof P?(this.ig[a]=b,w.uniform4f(this.za[a],b.r/255,b.Ca/255,b.Y/255,b.pa/255)):b instanceof Tc?w.uniform4f(this.za[a],b.x,b.y,b.z,b.ca):b instanceof G?w.uniform3f(this.za[a],b.x,b.y,b.z):b instanceof O&&w.uniform2f(this.za[a],
b.x,b.y):d!=b&&(this.ig[a]=b,w.uniform1f(this.za[a],b))};f.bind=function(){w.useProgram(this.xe);return this};f.load=function(a){this.name=nb(a);this.jh=sb(a);this.ih=sb(a);this.create();delete this.jh;delete this.ih};f.save=function(a){qb(a,this.name);ub(a,this.jh);ub(a,this.ih)};function rd(){this.usage=this.target=null;this.Sh=w.createBuffer();this.buffer=null}rd.prototype.bind=function(){w.bindBuffer(this.target,this.Sh);return this};function sd(a,b){a.buffer=new ArrayBuffer(b);w.bufferData(a.target,a.buffer,a.usage)}rd.prototype.upload=function(){w.bufferSubData(this.target,0,this.buffer);return this};function td(){rd.call(this);this.target=w.ARRAY_BUFFER;this.usage=w.STATIC_DRAW;this.bb=32;u.jg=null;u.rb(this)}td.prototype=Object.create(rd.prototype);
td.prototype.constructor=td;td.prototype.bind=function(){rd.prototype.bind.call(this);w.vertexAttribPointer(0,3,w.FLOAT,!1,this.bb,0);w.vertexAttribPointer(1,2,w.FLOAT,!1,this.bb,12);w.vertexAttribPointer(2,4,w.UNSIGNED_BYTE,!0,this.bb,20);w.vertexAttribPointer(3,3,w.SHORT,!0,this.bb,24);return this};td.prototype.upload=function(a){this.write(a);rd.prototype.upload.call(this);return this};
function ud(a){var b=u.jg;b.buffer=new ArrayBuffer(a.length*b.bb);b.write(a);w.bufferData(b.target,b.buffer,b.usage)}
td.prototype.write=function(a,b){b*=this.bb;var c=new Float32Array(this.buffer,b),d=new Int16Array(this.buffer,b);b=new Uint8Array(this.buffer,b);for(var e=0;e<a.length;e++){var h=a[e];var g=c;var k=e*this.bb>>>2;g[k]=h.x;g[k+1]=h.y;g[k+2]=h.z;k=e*this.bb+12>>>2;g[k]=h.Vb;g[k+1]=h.Wb;g=b;k=e*this.bb+20;g[k]=h.X;g[k+1]=h.uc;g[k+2]=h.tc;g[k+3]=h.ja;g=d;k=e*this.bb+24>>>1;g[k]=h.Cb;g[k+1]=h.Ob;g[k+2]=h.Db}return this};
function vd(){rd.call(this);this.target=w.ELEMENT_ARRAY_BUFFER;this.usage=w.STATIC_DRAW;u.rd(this)}vd.prototype=Object.create(rd.prototype);vd.prototype.constructor=vd;vd.prototype.upload=function(a){(new Uint16Array(this.buffer)).set(a);return rd.prototype.upload.call(this)};function wd(){rd.call(this);this.target=w.UNIFORM_BUFFER;this.usage=w.DYNAMIC_DRAW;this.tg=null;this.eg=this.zf=0;this.za={};rd.prototype.bind.call(this)}wd.prototype=Object.create(rd.prototype);wd.prototype.constructor=wd;
wd.prototype.create=function(a){w.bindBufferBase(this.target,this.zf,this.Sh);for(var b=0;b<u.i.ia.elements.length;b++){var c=u.i.ia.elements[b];u.Ua(c);w.uniformBlockBinding(c.xe,w.getUniformBlockIndex(c.xe,this.tg),this.zf)}b=w.getUniformIndices(u.w.xe,a);c=p(b);for(var d=c.next();!d.done;d=c.next())if(d.value==w.INVALID_INDEX)return console.log("uniform not found ",this),this;b=w.getActiveUniforms(u.w.xe,b,w.UNIFORM_OFFSET);for(c=0;c<a.length;c++)this.za[a[c]]=b[c];return this};
wd.prototype.J=function(a,b,c){a="u_"+a;b instanceof R?b.Hc(new Float32Array(this.buffer,this.za[a],16)):b instanceof P||(b instanceof Tc?b.Hc(new Float32Array(this.buffer,this.za[a],4)):b instanceof G||b instanceof O&&(c?b.Hc(new Uint32Array(this.buffer,this.za[a],2)):b.Hc(new Float32Array(this.buffer,this.za[a],2))))};wd.prototype.upload=function(){rd.prototype.bind.call(this);w.bufferData(this.target,this.buffer.byteLength,this.usage);w.bufferSubData(this.target,0,this.buffer);return this};
var xd,yd=xd=new td;yd.usage=w.STATIC_DRAW;yd.qf=[];var zd,Ad=zd=new vd;Ad.usage=w.STATIC_DRAW;Ad.elements=[];var Bd=u.zb.Zb=new wd;Bd.tg="Common";Bd.zf=0;Bd.eg=160;sd(Bd,Bd.eg);var Cd=u.zb.gi=new wd;Cd.tg="PortalLights";Cd.zf=1;Cd.eg=48;sd(Cd,3072);function ld(){this.name="defaultMaterial";this.Kc=new P(255,255,255,255);this.Cc=new P(255,255,255,51);this.Dc=4;this.Ec=1;this.hd=new P(0,0,0,0);this.qa=0;return this}function Dd(a,b){if(a.name<b.name)return-1;if(a.name>b.name)return 1;var c=xc(a.Kc,b.Kc);if(0!=c)return c;c=xc(a.Cc,b.Cc);if(0!=c)return c;c=xc(a.hd,b.hd);return 0!=c?c:a.Dc<b.Dc?-1:a.Dc>b.Dc?1:a.Ec<b.Ec?-1:a.Ec>b.Ec?1:a.qa<b.qa?-1:a.qa>b.qa?1:0}
ld.prototype.$=function(){var a=new ld;a.Kc=this.Kc;a.Cc=this.Cc;a.Dc=this.Dc;a.Ec=this.Ec;a.hd=this.hd;a.qa=this.qa;return a};ld.prototype.bind=function(){u.w.J("color",this.Kc);u.w.J("specularColor",this.Cc);u.w.J("specularExponent",this.Dc);u.w.J("specularSheen",this.Ec);u.w.J("emissiveColor",this.hd)};ld.prototype.save=function(a){qb(a,this.name);this.Kc.save(a);this.Cc.save(a);xb(a,Math.floor(1024*this.Dc));rb(a,Math.floor(255*this.Ec));this.hd.save(a);rb(a,this.qa);return a};
ld.prototype.load=function(a){this.name=nb(a);this.Kc=yc(a);this.Cc=yc(a);this.Dc=wb(a)/1024;this.Ec=pb(a)/255;this.hd=yc(a);this.qa=pb(a)};var Ed=u.i,Fd=new ld;Ed.Ya.replace(Fd);u.Yc=function(){this.Pf=w.RGBA8;this.height=this.width=2;this.border=0;this.format=w.RGBA;this.type=w.UNSIGNED_BYTE;this.data=null;this.Fd=u.Yc.Fd;this.te=u.Yc.te;this.qh=this.ph=w.CLAMP_TO_EDGE};u.Yc.Fd=w.NEAREST;u.Yc.te=w.NEAREST;
u.Yc.prototype.create=function(){if(this.Rh){var a=this.Rh;a.kh--;0<a.kh||a.ready&&a.ready.call(a)}w.activeTexture(w.TEXTURE0);this.object=w.createTexture();w.bindTexture(w.TEXTURE_2D,this.object);w.texImage2D(w.TEXTURE_2D,0,this.Pf,this.width,this.height,this.border,this.format,this.type,this.data);w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,this.Fd);w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,this.te);w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,this.ph);w.texParameteri(w.TEXTURE_2D,
w.TEXTURE_WRAP_T,this.qh);9984<=this.Fd&&9987>=this.Fd&&w.generateMipmap(w.TEXTURE_2D)};
u.Yc.prototype.load=function(a){this.name=nb(a);this.Pf=wb(a);this.width=wb(a);this.height=wb(a);this.border=wb(a);this.format=wb(a);this.type=wb(a);this.Fd=wb(a);this.te=wb(a);this.ph=wb(a);this.qh=wb(a);this.Ic=new P(pb(a),pb(a),pb(a),pb(a));var b=tb(a);a=a.slice(a.position,a.position+=b);a=new Blob([a],{type:"image/png"});this.data=new Image;this.data.parent=this;this.data.onload=function(){this.parent.width=this.width;this.parent.height=this.height;this.parent.create()};this.data.src=URL.createObjectURL(a)};
u.Yc.prototype.save=function(a){qb(a,this.name);xb(a,this.Pf);xb(a,this.width);xb(a,this.height);xb(a,this.border);xb(a,this.format);xb(a,this.type);xb(a,this.Fd);xb(a,this.te);xb(a,this.ph);xb(a,this.qh);rb(a,this.Ic.r);rb(a,this.Ic.Ca);rb(a,this.Ic.Y);rb(a,this.Ic.pa);vb(a,this.Se.length);a.set(this.Se,a.position);a.position+=this.Se.length};
u.Jg=function(a){a.Ph=[];a.Qh=[];for(var b=0,c=0,d=0;d<a.Cd.length;d++)b+a.Cd[d]+1>a.width&&(b=0,c+=a.Wd+1),a.Ph.push(b/a.width),a.Qh.push(c/a.width),b+=a.Cd[d]+1,a.Cd[d]/=a.width,a.Ze[d]/=a.width,a.$e[d]/=a.width;a.Wd/=a.height;a.Hi=function(e){switch(e){case "0":return 0;case "1":return 1;case "2":return 2;case "3":return 3;case "4":return 4;case "5":return 5;case "6":return 6;case "7":return 7;case "8":return 8;case "9":return 9;case ",":return 10}return-1}};
u.Mh=function(a,b,c){for(var d=[],e=0,h=0;h<b.length;h++){var g=a.Hi(b.charAt(h)),k=a.Ph[g],m=a.Qh[g],l=a.Cd[g],n=a.Wd;e+=a.Ze[g];c&&(m+=.5);d.push(Oc(new Fc(e,0+n,0),k,m));d.push(Oc(new Fc(e,0,0),k,m+n));d.push(Oc(new Fc(e+l,0,0),k+l,m+n));d.push(Oc(new Fc(e+l,0,0),k+l,m+n));d.push(Oc(new Fc(e+l,0+n,0),k+l,m));d.push(Oc(new Fc(e,0+n,0),k,m));e+=l;e+=a.$e[g]}d.width=e;d.height=a.Wd;d.ri=a;return d};var X=new u.Node("mouse");X.lock=!1;X.d={};X.p={};document.addEventListener("mousedown",function(a){X.p[a.button]=!0;X.d[a.button]=!0});X.r={};document.addEventListener("mouseup",function(a){X.r[a.button]=!0;X.d[a.button]=!1});X.ca=0;document.addEventListener("wheel",function(a){X.ca=0<a.deltaY?1:-1});X.b=new O(0,0);X.Ib=new O(0,0);document.addEventListener("mousemove",function(a){X.b.set(a.clientX,a.clientY);X.Ib.x+=a.movementX;X.Ib.y+=a.movementY});
X.step=function(){u.Node.prototype.step.call(this);this.Ib.set(0,0);var a=Object.getOwnPropertyNames(this.p);var b=p(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=p(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;this.ca=0};
X.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=p(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=p(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=p(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1;X.ca=0;X.b.set(0,0);X.Ib.set(0,0)};W(X,u.inputs);
X.Wi=function(){try{document.documentElement.requestPointerLock({unadjustedMovement:!0})}catch(a){console.log("Failed to acquire unadjusted movement in pointer lock."),document.documentElement.requestPointerLock()}};
document.addEventListener("pointerlockchange",function(){if(document.pointerLockElement)X.lock=!0,document.body.style.overflowX="hidden",document.body.style.overflowY="hidden",document.body.style.userSelect="none";else{X.lock=!1;for(var a=p(Object.getOwnPropertyNames(u.Ne)),b=a.next();!b.done;b=a.next())b=b.value,document.body.style[b]=u.Ne[b]}});var Gd=new u.Node("keyboard");Gd.d={};Gd.p={};document.addEventListener("keypress",function(a){Gd.d[a.code]||(Gd.p[a.code]=!0);Gd.d[a.code]=!0});Gd.r={};document.addEventListener("keyup",function(a){Gd.r[a.code]=!0;Gd.d[a.code]=!1});Gd.step=function(){u.Node.prototype.step.call(this);var a=Object.getOwnPropertyNames(this.p);var b=p(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=p(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1};
Gd.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=p(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=p(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=p(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1};W(Gd,u.inputs);u.Audio=function(){this.buffer=null;return this};u.Audio.N=new AudioContext;var Hd=u.Audio.lb=u.Audio.N.createGain();Hd.gain.value=.5;Hd.connect(u.Audio.N.destination);var Id=u.Audio.Za=u.Audio.N.createGain(),Jd=window.localStorage.getItem("musicVolume");null!=Jd?Id.gain.value=Jd:Id.gain.value=0;Id.connect(u.Audio.N.destination);u.Audio.tf=function(a){u.Audio.lb.gain.value=a};u.Audio.uf=function(a){u.Audio.Za.gain.value=a};
u.Audio.prototype.play=function(a){a?(void 0===a.gain&&(a.gain=1),void 0===a.pitch&&(a.pitch=1),void 0===a.Wf&&(a.Wf=0),void 0===a.delay&&(a.delay=0)):a={gain:1,pitch:1,Wf:0,delay:0};var b=u.Audio.N.createGain();b.gain.value=a.gain;b.connect(u.Audio.lb);var c=new AudioBufferSourceNode(u.Audio.N);c.connect(b);a.loop?c.loop=!0:c.onended=function(){b.disconnect(u.Audio.lb)};c.N=b;c.playbackRate.value=(1-a.Wf+Math.random()*a.Wf*2)*a.pitch;c.buffer=this.buffer;void 0===a.time?c.start(u.Audio.N.currentTime+
a.delay):c.start(a.time+a.delay);return c};u.Audio.prototype.load=function(a){this.name=nb(a);var b=tb(a);a=a.slice(a.position,a.position+=b);var c=this;u.Audio.N.decodeAudioData(a.buffer).then(function(d){c.buffer=d})};u.Audio.prototype.save=function(a){qb(a,this.name);vb(a,this.Se.length);a.set(this.Se,a.position);a.position+=this.Se.length};var Sd,Td=new Ta(bb),Ud=new Va,ab=new Va,Vd=new R;Vd.scale(.99609375,.99609375,.99609375);var Wd=[];function Xd(a){var b=Td.get(a);if(b)return b;b=new Yd(a);Td.push(b);return b}function Zd(a){a=$d(a);return new O(a.x-4096<<19,a.y-4096<<19)}function ae(a,b){function c(d){d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;return(d|d<<1)&1431655765}return c(a)<<1|c(b)}
function $d(a){function b(c){c=(c|c>>1)&858993459;c=(c|c>>2)&252645135;c=(c|c>>4)&16711935;return(c|c>>8)&65535}a=new O(a>>>1&1431655765,a>>>0&1431655765);a.x=b(a.x);a.y=b(a.y);return a}
function be(a,b){isNaN(a)&&(a=0);isNaN(b)&&(b=Td.elements.length-1);if(a==b)return Td.elements[a];for(var c=Td.elements[a].index,d=c^Td.elements[b].index,e=0;d>>=1;)e++;var h=1<<e,g=(2<<e)-1,k=a,m=b+1;for(d=Math.floor(k/2+m/2);k<m;){var l=Td.elements[d].index&g;if(h<l)m=d,d=Math.floor(k/2+m/2);else if(h>l)k=d+1,d=Math.floor(k/2+m/2);else break}c=e&1?new ce($d(c&~g|h).x):new de($d(c&~g|h).y);c.value-=4096;c.value<<=19;c.Rd=be(a,d-1);c.Sd=be(d,b);return c}function ce(a){this.value=a}
function de(a){this.value=a}function ee(a,b,c){this.start=a;this.Ib=b;this.Da=c;this.Lb=[new fe(Sd,0,1)];this.t=0}function fe(a,b,c){this.node=a;this.ob=b;this.fc=c}ee.prototype.next=function(){for(;this.Lb.length;){var a=this.Lb.shift();this.t=a.ob;if(a.node instanceof Yd)return a;this.ic(a)}return null};
ee.prototype.ic=function(a){var b=a.node;if(b instanceof ce){var c=this.start.z;var d=this.Ib.z}else c=this.start.x,d=this.Ib.x;if(0<d){var e=new fe(b.Sd,(b.value-this.Da-c)/d,a.fc);e.ob<=a.fc&&e.fc>=a.ob&&this.Lb.unshift(e);c=new fe(b.Rd,a.ob,(b.value+this.Da-c)/d);c.ob<=a.fc&&c.fc>=a.ob&&this.Lb.unshift(c)}else 0>d?(e=new fe(b.Rd,(b.value+this.Da-c)/d,a.fc),e.ob<=a.fc&&e.fc>=a.ob&&this.Lb.unshift(e),c=new fe(b.Sd,a.ob,(b.value-this.Da-c)/d),c.ob<=a.fc&&c.fc>=a.ob&&this.Lb.unshift(c)):(c>=b.value-
this.Da&&this.Lb.unshift(new fe(b.Sd,a.ob,a.fc)),c<=b.value+this.Da&&this.Lb.unshift(new fe(b.Rd,a.ob,a.fc)))};
function ge(a,b,c){if(0==Td.elements.length)return null;for(var d=b.length(),e=new ee(a,b,0),h,g=null,k=1;(h=e.next())&&!(h.t>k);){h=p(h.node.wa);for(var m=h.next();!m.done;m=h.next())!(m=m.value.fe(a,0,0,b))||m.t>k||(m.d=m.t*d,-1>m.d||(g=m,k=m.t))}if(c)return g;c=p(Wd);for(m=c.next();!m.done;m=c.next())e=m.value,!(h=e.fe(a,0,0,b))||h.t>k||(h.d=h.t*d,-1>h.d||(h.item=e.item,g=h,k=h.t));return g}
function he(a,b){if(0==Td.elements.length)return null;for(var c=new ee(a,new G(240*b.x,0,240*b.z),0),d,e=null,h=240;(d=c.next())&&!(240*d.t>h);){d=p(d.node.wa);for(var g=d.next();!g.done;g=d.next())!(g=g.value.nh(a,b))||g.t>h||(e=g,h=g.t)}return e}function ie(a,b){return je(a.z-b,a.x-b,a.z+b,a.x+b,void 0)}
function je(a,b,c,d,e){e||(e=[]);for(var h=[Sd];h.length;){var g=h.shift();g instanceof ce?(a<=g.value&&h.push(g.Rd),c>=g.value&&h.push(g.Sd)):g instanceof de?(b<=g.value&&h.push(g.Rd),d>=g.value&&h.push(g.Sd)):e.push(g)}return e};var ke,le,me;function ne(){for(var a=0,b=u.zb.gi,c=p(oe),d=c.next();!d.done;d=c.next()){d=d.value;d.jf=a&255|d.Ac.length<<16;d=p(d.Ac);for(var e=d.next();!e.done;e=d.next())e=e.value,e.Hc(new Float32Array(b.buffer,a*b.eg,12)),e.index=a,a++}b.upload()}function pe(){this.Yd=this.bf=null;this.Mb=0;this.Xf=null}function qe(a,b,c){this.Ta=a;this.n=new O(a.c-a.j,a.u-a.h);this.n.x/=a.length;this.n.y/=a.length;this.bi=this.Ta.h*this.n.x+this.Ta.c*this.n.y;this.a=b;this.f=c;this.height=c-b}
qe.prototype.Hc=function(a){var b=0,c=re(this);a[b++]=c.x;a[b++]=c.y;a[b++]=c.z;a[b++]=this.bi;a[b++]=this.Ta.h;a[b++]=this.Ta.c;a[b++]=this.Ta.u;a[b++]=this.Ta.j;a[b++]=this.n.x;a[b++]=this.n.y;a[b++]=this.a;a[b++]=this.f;return a};function re(a){return Rc(oe[a.Z].U.Qa,oe[a.pd.Z].U.Qa,.5)}
function se(a,b){function c(h,g){return Math.acos(Pa((h.x*g.x+h.y*g.y)/Math.sqrt((h.x*h.x+h.y*h.y)*(g.x*g.x+g.y*g.y)),-1,1))/Math.PI}var d=b.z*a.n.x+b.x*a.n.y-a.bi;if(0>=d)return 0;var e=c(new O(a.Ta.u-b.z,a.Ta.j-b.x),new O(a.Ta.h-b.z,a.Ta.c-b.x));a=c(new O(d,a.f-b.y),new O(d,a.a-b.y));return Pa(e*a*2,0,1)}function te(a){return a.Ta.length/1E5*((a.f-a.a)/1E5)}function ue(a){return a.Ta.length/1E5*((a.height-(a.f-a.a))/1E5)}
function ve(a,b,c){c.set(0,0,0);for(var d=1,e=p(b.Ac),h=e.next();!h.done;h=e.next()){var g=h.value;h=se(g,a);d-=h;g=re(g);c.x+=g.x*h;c.y+=g.y*h;c.z+=g.z*h}0<d&&(a=b.U.Qa,c.x+=a.x*d,c.y+=a.y*d,c.z+=a.z*d)};function we(a){u.ka.call(this,a);this.Tg=new R;this.wc=45*Math.PI/180;this.ef=1E4;this.Re=1E9;this.rect=null;this.Gf=new R;this.vi=new R}we.prototype=Object.create(u.ka.prototype);we.prototype.constructor=we;we.yb=Math.tan(Nb(30));we.og=function(a,b,c,d){d.A=2/a.ca;d.G=0;d.H=0;d.Ka=0;d.D=0;d.m11=2/a.xc;d.m12=0;d.m13=0;d.B=0;d.m21=0;d.m22=-2/(c-b);d.m23=0;d.v=0;d.m31=0;d.m32=-(c+b)/(c-b);d.m33=1};we.mg=function(a,b,c){c=Math.tan(c)*a;var d=c*u.viewport.ratio;return{n:a,mj:b,t:c,Y:2*-c+c,r:d,Li:-d}};
we.uf=function(a,b,c,d,e,h,g){g.A=2*a/(d-c);g.G=0;g.H=0;g.Ka=0;g.D=0;g.m11=2*a/(e-h);g.m12=0;g.m13=0;g.B=(d+c)/(d-c);g.m21=(e+h)/(e-h);g.m22=(b+a)/(a-b);g.m23=-1;g.v=0;g.m31=0;g.m32=2*b*a/(a-b);g.m33=0};we.hj=function(a,b,c,d,e){var h=b*we.yb;c*=we.yb;d=Math.tan(d);b=h/d;c/=d;e.A=b/(h*a.ratio);e.G=0;e.H=0;e.Ka=0;e.D=0;e.m11=b/h;e.m12=0;e.m13=0;e.B=0;e.m21=0;e.m22=-(c+b)/(c-b);e.m23=-1;e.v=0;e.m31=0;e.m32=-(2*c*b)/(c-b);e.m33=0;return e};we.prototype.step=function(){u.ka.prototype.step.call(this)};
function xe(a){if(a.rect)we.og(a.rect,a.ef,a.Re,a.Tg);else{var b=we.mg(a.ef,a.Re,a.wc);we.uf(a.ef,a.Re,b.Li,b.r,b.t,b.Y,a.Tg)}a.I.Kg(a.Gf);Xc(a.Tg,a.Gf,a.vi);u.zb.Zb.J("eyeMatrix",a.Gf);u.zb.Zb.J("viewMatrix",a.vi);u.zb.Zb.J("cameraPos",new Tc(a.I.v,a.I.m31,a.I.m32,a.I.m33));u.zb.Zb.upload()}
function ye(){function a(d){u.mi(d);xe(d);we.yi(d);fd(u.Bc)}var b=u.o.Ga;if(b.dj){var c=new bc(b.rect.ca/2,b.rect.xc,null);c.x=u.Ie.x;c.y=u.Ie.y;u.mf(c);a(b.wh);c=new bc(b.rect.ca/2,b.rect.xc,null);c.x=u.Ie.x+c.ca;c.y=u.Ie.y;u.mf(c);a(b.vh)}else u.mf(u.Ie),a(b)}
we.yi=function(a){function b(l,n){function v(t){function B(D){y.xa(Math.atan2(D.x,-D.z),Math.atan2(D.y,-D.z),D.z)}var y=new bd;t=[new G(t.Ta.j,t.a,t.Ta.u),new G(t.Ta.c,t.a,t.Ta.h),new G(t.Ta.c,t.f,t.Ta.h),new G(t.Ta.j,t.f,t.Ta.u)];for(var C=p(t),z=C.next();!z.done;z=C.next())z=z.value,a.Gf.$a(z,z);C=t[3];t=p(t);for(z=t.next();!z.done;z=t.next())z=z.value,0>=z.z&&B(z),2==Math.abs(Math.sign(z.z)-Math.sign(C.z))&&B(Rc(C,z,C.z/(C.z-z.z))),C=z;return y}if((!u.rj||n!=m)&&n.U.Ma!=u.m){n.U.Ma=u.m;for(var r=
p(n.cells.elements),q=r.next();!q.done;q=r.next())if(q=q.value,q.rf!=u.m)for(q.rf<u.m-1&&$a(q.gj),q.rf=u.m,q=q.Ug.first();null!=q.item;q=q.next)q.item.U.Ma=u.m}n=p(n.Ac);for(r=n.next();!r.done;r=n.next())r=r.value,r.f<=r.a||0>=L(r.Ta,c.z,c.x)||(q=e.get(r),q||(q=v(r),q.index=r.index,e.push(q)),q.F>=l.F||(q=q.$(),q.l<l.l&&(q.l=l.l),q.s>l.s&&(q.s=l.s),q.a<l.a&&(q.a=l.a),q.f>l.f&&(q.f=l.f),q.l>=q.s||q.a>=q.f||b(q,oe[r.pd.Z])))}var c=new G(a.I.v,a.I.m31,a.I.m32),d=ge(c,new G(0,-4294967295,0),!0);if(d){var e=
new Ta(function(l,n){return l.index<n.index?-1:l.index>n.index?1:0}),h=a.wc,g=Math.atan(Math.tan(h)*u.viewport.ratio),k=new bd;k.l=-g;k.s=g;k.a=-h;k.f=h;k.F=0;k.K=0;var m=oe[d.item.Z];b(k,m,!0)}};function md(){this.name=null;this.gc=[]}md.prototype.save=function(a){qb(a,this.name);xb(a,Math.ceil(this.ib/1E3));rb(a,this.gc.length);for(var b=p(this.gc),c=b.next();!c.done;c=b.next())c.value.save(a)};md.prototype.load=function(a){this.name=nb(a);this.ib=1E3*wb(a);for(var b=pb(a),c=0;c<b;c++){var d=new Ee;d.load(a);this.gc.push(d)}};function Ee(){this.T=u.i.Ya.get("defaultMaterial");this.eb=[];this.hb=[];this.Jb=[]}
Ee.prototype.compile=function(){this.oh=xd.qf.length;xd.qf=xd.qf.concat(this.eb);for(var a=0;a<this.hb.length;a++)this.hb[a]+=this.oh;for(a=0;a<this.Jb.length;a++)this.Jb[a]+=this.oh;this.fj=zd.elements.length;zd.elements=zd.elements.concat(this.hb);this.Fh=zd.elements.length;zd.elements=zd.elements.concat(this.Jb)};Ee.prototype.$=function(){var a=new Ee;a.eb=this.eb;a.Ea=this.Ea;a.hb=this.hb;a.Mc=this.Mc;a.Jb=this.Jb;a.Lc=this.Lc;return a};
Ee.prototype.save=function(a){qb(a,this.T.name);xb(a,this.eb.length);for(var b=p(this.eb),c=b.next();!c.done;c=b.next())c=c.value,Gb(a,c.x),Gb(a,c.y),Gb(a,c.z);b=p(this.eb);for(c=b.next();!c.done;c=b.next())c=c.value,Eb(a,c.Cb),Eb(a,c.Ob),Eb(a,c.Db);b=p(this.eb);for(c=b.next();!c.done;c=b.next())c=c.value,Ib(a,c.Vb),Ib(a,c.Wb);xb(a,this.hb.length);b=p(this.hb);for(c=b.next();!c.done;c=b.next())xb(a,c.value);xb(a,this.Jb.length);b=p(this.Jb);for(c=b.next();!c.done;c=b.next())xb(a,c.value);xb(a,this.Gd);
return a};Ee.prototype.load=function(a){this.T=u.i.Ya.get(nb(a));for(var b=wb(a),c=0;c<b;c++){var d=new Fc(Fb(a),Fb(a),Fb(a));this.eb.push(d)}for(c=0;c<b;c++)d=this.eb[c],d.Cb=Db(a),d.Ob=Db(a),d.Db=Db(a);for(c=0;c<b;c++)d=this.eb[c],d.Vb=Hb(a),d.Wb=Hb(a);b=wb(a);for(c=0;c<b;c++)this.hb.push(wb(a));b=wb(a);for(c=0;c<b;c++)this.Jb.push(wb(a));this.Gd=wb(a);this.compile()};
function Fe(){function a(r,q){return r.y<q.y?-1:r.y>q.y?1:0}function b(r,q){return r.z<q.z?-1:r.z>q.z?1:r.x<q.x?-1:r.x>q.x?1:0}var c=Ge,d=[];d.cmp=b;for(var e=p(c),h=e.next();!h.done;h=e.next()){var g=h.value;h=g[g.length-1];g=p(g);for(var k=g.next();!k.done;k=g.next()){k=k.value;if(0==b(h,k)){var m=[];m.cmp=a;m.z=h.z;m.x=h.x;m=He(d,m);He(m,h);He(m,k)}h=k}}c=p(c);for(h=c.next();!h.done;h=c.next())for(e=h.value,k=e.length-1,k=e[k],h=0;h<e.length;h++){g=e[h];if(0==b(k,g))if(m=Ie(d,k),k.y<g.y){var l=
Je(m,k),n=Je(m,g);for(l+=1;l<m.length&&!(l>=n);){var v=Hc(k,g,(m[l].y-k.y)/(g.y-k.y));v.y=m[l].y;e.splice(h++,0,v);l++}}else for(l=Je(m,k),n=Je(m,g),--l;0<=l&&!(l<=n);)v=Hc(k,g,(m[l].y-k.y)/(g.y-k.y)),v.y=m[l].y,e.splice(h++,0,v),l--;k=h;k=g}}function Ke(){Ee.call(this);this.kd=[];this.Ea=new td;this.Lc=this.Mc=null;this.Gd=0}Ke.prototype=Object.create(Ee.prototype);Ke.prototype.constructor=Ke;
Ke.prototype.compile=function(){this.hb=[];for(var a=p(this.kd),b=a.next();!b.done;b=a.next()){b=b.value;for(var c=2;c<b.length;c++)this.hb.push(b[0]),this.hb.push(b[c-1]),this.hb.push(b[c])}u.rb(this.Ea);sd(this.Ea,this.eb.length*this.Ea.bb);this.Ea.upload(this.eb);this.hb.length?(this.Mc||(this.Mc=new vd),u.rd(this.Mc),sd(this.Mc,2*this.hb.length),this.Mc.upload(this.hb)):this.Mc=null;this.Jb.length?(this.Lc||(this.Lc=new vd),u.rd(this.Lc),sd(this.Lc,2*this.Jb.length),this.Lc.upload(this.Jb)):this.Lc=
null};function Le(a,b){b||(b=a.name);u.ka.call(this,b);this.src=a}Le.prototype=Object.create(u.ka.prototype);Le.prototype.constructor=Le;Le.prototype.create=function(){this.gc=[];for(var a=p(this.src.gc),b=a.next();!b.done;b=a.next())b=b.value,b=b instanceof Ke?new Me(b):new Ne(b),this.gc.push(b),this.ld&&(b.ld=!0),b.la=this.I,W(b,this)};function Ne(a,b){u.ka.call(this,b);this.src=a;this.$i=this.Zi=!1}Ne.prototype=Object.create(u.ka.prototype);Ne.prototype.constructor=Ne;
function Oe(a){var b=null;a.parent&&(b=a.parent.w);b||(b=a.w);b||(b=a.src.w);b||(b=u.i.ia.get("physical"));return b}function Pe(a){var b=null;a.parent&&(b=a.parent.T);b||(b=a.T);b||(b=a.src.T);b||(b=u.i.Ya.get("defaultMaterial"));return b}function Qe(a){var b=null;a.parent&&(b=a.parent.fa);b||(b=a.fa);b||(b=a.src.fa);return b}
Ne.prototype.La=function(){u.rb(xd);u.Ua(Oe(this));u.w.J("modelMatrix",this.I);u.Sb(0,Qe(this));var a=Pe(this);a.bind();this.yf?u.w.J("architectureLighting",1,!0):u.w.J("architectureLighting",0,!0);u.w.J("ambientLight",this.U.Qa,!1);if(this.za)for(var b=0;b<this.za.length;b+=3)u.w.J(this.za[b],this.za[b+1],this.za[b+2]);u.gb(a.qa);u.mb(a.qa?1:2);u.Rb(this.ld?2:1);this.src.hb.length?(u.rd(zd),w.drawElements(w.TRIANGLES,this.src.hb.length,w.UNSIGNED_SHORT,2*this.src.fj)):w.drawArrays(w.TRIANGLES,this.src.oh,
this.src.eb.length);this.src.Jb.length&&(this.Zi&&this.Dh(),this.$i&&this.Eh())};
Ne.prototype.Dh=function(){u.gb(1);u.mb(1);u.Ua(u.i.ia.get("edge"));u.w.J("toonMinDist",Infinity,!1);u.w.J("modelMatrix",this.I);var a=new G(this.I.A,this.I.G,this.I.H),b=new G(this.I.D,this.I.m11,this.I.m12),c=new G(this.I.B,this.I.m21,this.I.m22);a.na(1);b.na(1);c.na(1);var d=new G(u.Ga.I.v-this.I.v,u.Ga.I.m31-this.I.m31,u.Ga.I.m32-this.I.m32);a=Rb(a,d);b=Rb(b,d);c=Rb(c,d);u.w.J("eyeVector",new G(a,b,c));w.drawElements(w.LINES,this.src.Jb.length-this.src.Gd,w.UNSIGNED_SHORT,2*this.src.Fh+2*this.src.Gd)};
Ne.prototype.Eh=function(){u.gb(1);u.mb(1);u.Ua(u.i.ia.get("toon"));u.w.J("toonMinDist",Infinity,!1);u.w.J("modelMatrix",this.I);w.drawElements(w.LINES,this.src.Gd,w.UNSIGNED_SHORT,2*this.src.Fh)};function Me(a,b){Ne.call(this,a,b)}Me.prototype=Object.create(Ne.prototype);f=Me.prototype;f.constructor=Me;f.step=function(){Ne.prototype.step.call(this)};
f.La=function(){u.rb(this.src.Ea);u.Ua(Oe(this));u.w.J("modelMatrix",this.I);u.Sb(0,Qe(this));var a=Pe(this);a.bind();this.yf?u.w.J("architectureLighting",1,!0):u.w.J("architectureLighting",0,!0);u.w.J("ambientLight",this.U.Qa,!1);if(this.za)for(var b=0;b<this.za.length;b+=3)u.w.J(this.za[b],this.za[b+1],this.za[b+2]);u.gb(a.qa);u.mb(a.qa?1:2);u.Rb(this.ld?2:1);this.src.hb.length?(u.rd(this.src.Mc),w.drawElements(w.TRIANGLES,this.src.hb.length,w.UNSIGNED_SHORT,0)):w.drawArrays(w.TRIANGLES,0,this.src.eb.length)};
f.Dh=function(){u.gb(1);u.mb(1);u.Ua(u.i.ia.get("edge"));u.w.J("toonMinDist",Math.pow(5E5,2),!1);u.w.J("modelMatrix",this.I);var a=new G(this.I.A,this.I.G,this.I.H),b=new G(this.I.D,this.I.m11,this.I.m12),c=new G(this.I.B,this.I.m21,this.I.m22);a.na(1);b.na(1);c.na(1);var d=new G(u.Ga.I.v-this.I.v,u.Ga.I.m31-this.I.m31,u.Ga.I.m32-this.I.m32);a=Rb(a,d);b=Rb(b,d);c=Rb(c,d);u.w.J("eyeVector",new G(a,b,c));a=this.src.Jb.length-this.src.Gd;b=2*this.src.Gd;u.rd(this.src.Lc);w.drawElements(w.LINES,a,w.UNSIGNED_SHORT,
b)};f.Eh=function(){u.gb(1);u.mb(1);u.Ua(u.i.ia.get("toon"));u.w.J("toonMinDist",Math.pow(5E5,2),!1);u.w.J("modelMatrix",this.I);var a=this.src.Gd;u.rd(this.src.Lc);w.drawElements(w.LINES,a,w.UNSIGNED_SHORT,0)};function Re(){this.scale=1;this.Da=25E3;this.Gb=0;this.ld=!1;this.frame=0;this.Pb=1}function Se(a){a.A=u.Ga.I.A;a.G=u.Ga.I.G;a.H=u.Ga.I.H;a.D=u.Ga.I.D;a.m11=u.Ga.I.m11;a.m12=u.Ga.I.m12;a.B=u.Ga.I.B;a.m21=u.Ga.I.m21;a.m22=u.Ga.I.m22;var b=this.scale*this.Da,c=this.ld?-b:b,d=Math.cos(this.Gb),e=Math.sin(this.Gb),h=new R;h.A=d*c;h.G=e*c;h.D=-e*b;h.m11=d*b;Vc(a,h,a)}
function Te(){0>this.frame||(Se.call(this,this.I),u.rb(Ue),u.Ua(this.w),u.Sb(0,this.fa),this.T.bind(),u.w.J("ambientLight",this.U.Qa,!1),u.gb(this.T.qa),u.mb(this.T.qa?1:2),u.Rb(0),u.w.J("modelMatrix",this.I),u.w.J("color",this.color),w.drawArrays(w.TRIANGLE_FAN,Ve(this.frame,this.Pb),4))}
for(var We=[],Xe=0;4>Xe;Xe++)for(var Ye=1<<Xe,Ze=Ye<<Xe,$e=1/Ye,af=0;af<Ze;af++){var bf=af%Ye,cf=af/Ye|0;bf*=$e;cf*=$e;We.push(Oc(new Fc(-1,-1,0),bf,cf));We.push(Oc(new Fc(1,-1,0),bf+$e,cf));We.push(Oc(new Fc(1,1,0),bf+$e,cf+$e));We.push(Oc(new Fc(-1,1,0),bf,cf+$e))}var Ue=new td;sd(Ue,We.length*Ue.bb);Ue.upload(We);function df(a,b){for(var c=0;b>Math.pow(1<<c,2);)c++;var d=1<<c;b=1/d;c=a%d*b;a=(a/d|0)*b;return[c,a,c+b,a+b]}
function Ve(a,b){switch(b){default:return 4*a;case 4:return 4+4*a;case 16:return 20+4*a;case 64:return 84+4*a}};function ef(){this.color=this.fa=this.w=null;this.qa=NaN;this.Jc=[];this.Lb=[];this.Lb.cmp=ff;this.Pi=64}ef.prototype.clear=function(){this.Jc.length=0;this.Lb.length=0};ef.prototype.La=function(){u.Ua(this.w);u.w.J("modelMatrix",Vd);u.Sb(0,this.fa);u.w.J("color",this.color);u.gb(this.qa);u.mb(1);u.Rb(0);for(var a=p(this.Lb),b=a.next();!b.done;b=a.next())b.value.La()};
function gf(a,b,c,d,e,h,g){a.Jc.length==a.Pi&&a.Jc.shift().remove();var k=[];k.cmp=ff;var m=new G,l=new G;Wb(c,m,l);var n=new R;n.A=m.x;n.D=l.x;n.B=c.x;n.v=b.x;n.G=m.y;n.m11=l.y;n.m21=c.y;n.m31=b.y;n.H=m.z;n.m12=l.z;n.m22=c.z;n.m32=b.z;m=new R;l=Math.cos(d)*e;d=Math.sin(d)*e;m.A=l;m.D=-d;m.G=d;m.m11=l;m.m22=e;Xc(n,m,n);var v=n.Kg(new R),r=df(h,g);e*=1.733;g=ie(b,e);h={};g=p(g);for(d=g.next();!d.done;h={sf:h.sf},d=g.next())for(h.sf=d.value,d={},m=p(h.sf.wa),l=m.next();!l.done;d={Bb:d.Bb,ta:d.ta},l=
m.next()){d.ta=l.value;l=function(B,y){return function(){function C(U,ca){var wa=[],aa=U[U.length-1],xa=ca(aa);U=p(U);for(var ea=U.next();!ea.done;ea=U.next()){ea=ea.value;var Ac=ca(ea);2==Math.abs(Math.sign(Ac)-Math.sign(xa))&&wa.push(Rc(aa,ea,xa/(xa-Ac)));0<=Ac&&wa.push(ea);xa=Ac;aa=ea}return 3>wa.length?null:wa}for(var z=p(B.Bb),D=z.next();!D.done;D=z.next())D=D.value,v.$a(D,D);z=p([function(U){return 1-U.x},function(U){return 1+U.x},function(U){return 1-U.y},function(U){return 1+U.y},function(U){return 1-
U.z},function(U){return 1+U.z}]);for(D=z.next();!D.done;D=z.next())if(B.Bb=C(B.Bb,D.value),!B.Bb)return;for(z=0;z<B.Bb.length;z++){D=B.Bb[z];var H=.5*D.x+.5,J=.5*D.y+.5;n.$a(D,D);var Z=new Fc;Z.x=D.x;Z.y=D.y;Z.z=D.z;Z.Vb=r[0]*(1-H)+r[2]*H;Z.Wb=r[1]*(1-J)+r[3]*J;B.Bb[z]=Z}z=[];z.Z=B.ta.Z;z.cellIndex=y.sf.index;z=He(k,z);for(D=2;D<B.Bb.length;D++)z.push(B.Bb[0]),z.push(B.Bb[D-1]),z.push(B.Bb[D])}}(d,h);d.Bb=[];if(d.ta instanceof hf){if(d.ta.f<b.y-e)continue;if(d.ta.a>b.y+e)continue;var q=L(d.ta.L,b.z,
b.x);if(q<-e)continue;if(q>e)continue;q=d.ta.L.getParameter(b.z,b.x);if(q<-e)continue;if(q>d.ta.L.length+e)continue;if(.707107>Rb(new G((d.ta.L.u-d.ta.L.h)/d.ta.L.length,0,(d.ta.L.c-d.ta.L.j)/d.ta.L.length),c))continue;d.Bb.push(new G(d.ta.L.j,d.ta.a,d.ta.L.u),new G(d.ta.L.c,d.ta.a,d.ta.L.h),new G(d.ta.L.c,d.ta.f,d.ta.L.h),new G(d.ta.L.j,d.ta.f,d.ta.L.u))}else{if(d.ta.y<b.y-e)continue;if(d.ta.y>b.y+e)continue;var t=p(d.ta.V);for(q=t.next();!q.done;q=t.next());if(d.ta instanceof jf){if(.707107>c.y)continue}else if(-.707107<
c.y)continue;t=p(d.ta.V);for(q=t.next();!q.done;q=t.next())q=q.value,d.Bb.push(new G(q.j,d.ta.y,q.u));d.ta instanceof kf&&d.Bb.reverse()}l()}b=new lf;c=p(k);for(e=c.next();!e.done;e=c.next())e=e.value,h=Ie(a.Lb,e),h||(h=new mf(a),h.Z=e.Z,h.cellIndex=e.cellIndex,h.U=oe[h.Z].U,h.create(),He(a.Lb,h)),nf(h,e),b.ii.push({node:h,Xb:e.length});a.Jc.push(b)}function mf(a){this.Bi=a;this.cellIndex=this.Z=NaN;this.U=null;this.Xb=this.Vc=0}
function ff(a,b){return a.Z<b.Z?-1:a.Z>b.Z?1:a.cellIndex<b.cellIndex?-1:a.cellIndex>b.cellIndex?1:0}mf.prototype.create=function(){this.Ea=new td;this.Ea.usage=w.DYNAMIC_DRAW;sd(this.Ea,48*this.Ea.bb)};
function of(a,b){var c=a.Xb+b;if(0>=c)b=a.Bi.Lb,c=Je(b,a),b[c]&&0==b.cmp(b[c],a)&&b.splice(c,1);else{c*=a.Ea.bb;if((a.Vc+a.Xb+b)*a.Ea.bb>a.Ea.buffer.byteLength)b=new ArrayBuffer(c<<1);else if(48<=a.Vc)b=a.Ea.buffer;else return;c=new Uint8Array(a.Ea.buffer,a.Vc*a.Ea.bb,a.Xb*a.Ea.bb);(new Uint8Array(b)).set(c);a.Ea.buffer=b;a.Ea.bind();w.bufferData(a.Ea.target,a.Ea.buffer,a.Ea.usage);a.Vc=0}}
function nf(a,b){of(a,b.length);a.Ea.bind();a.Ea.write(b,a.Vc+a.Xb);w.bufferSubData(a.Ea.target,(a.Vc+a.Xb)*a.Ea.bb,new Uint8Array(a.Ea.buffer,(a.Vc+a.Xb)*a.Ea.bb,b.length*a.Ea.bb));a.Xb+=b.length}mf.prototype.La=function(){if(this.U.Ma<u.m)return!1;u.rb(this.Ea);u.w.J("ambientLight",this.U.Qa);w.drawArrays(w.TRIANGLES,this.Vc,this.Xb)};function lf(){this.ii=[]}lf.prototype.remove=function(){for(var a=p(this.ii),b=a.next();!b.done;b=a.next())b=b.value,b.node.Vc+=b.Xb,b.node.Xb-=b.Xb,of(b.node,0)};var pf={},oe,qf,rf,sf,tf,uf,vf,wf,xf,yf,zf,Af,Bf,Cf,Df,Ef,Ff;function Gf(a,b,c,d){a=void 0===a?NaN:a;b=void 0===b?NaN:b;c=void 0===c?NaN:c;d=void 0===d?NaN:d;this.F=a;this.K=b;this.l=c;this.s=d}function Hf(a,b,c){this.d=a;this.R=b;this.W=c}function If(a,b,c){this.d=-a;this.R=b;this.W=c}function Jf(a,b,c){this.d=-a;this.R=-b;this.W=-c}function Kf(a,b,c){this.d=a;this.R=-b;this.W=-c}f=Gf.prototype;f.Bd=function(a,b){return a<=this.F||a>=this.K||b<=this.l||b>=this.s?!1:!0};
function Lf(a,b){b.F>=a.F||(a.F=b.F);b.K<=a.K||(a.K=b.K);b.l>=a.l||(a.l=b.l);b.s<=a.s||(a.s=b.s)}f.oe=function(a,b){a-=.5*this.K+.5*this.F;b-=.5*this.s+.5*this.l;return 1E5/Math.sqrt(a*a+b*b)};f.expand=function(a,b){return this.$(this.F-a,this.K+a,this.l-b,this.s+b)};function Mf(a,b){var c=new Hf(a.l,a.F,a.K);c.source=a;b.push(c);c=new If(a.K,a.l,a.s);c.source=a;b.push(c);c=new Jf(a.s,a.K,a.F);c.source=a;b.push(c);c=new Kf(a.F,a.s,a.l);c.source=a;b.push(c)}
f.$=function(a,b,c,d){a=new Gf(a,b,c,d);this.zh&&(a.zh=this.zh);this.platform&&(a.platform=this.platform);this.ya&&(a.ya=this.ya);void 0!==this.direction&&(a.direction=this.direction);void 0!==this.type&&(a.type=this.type);return a};
f.Ae=function(a,b){if(!Nf(this,a))return!1;var c=this.l,d=this.s;this.s>a.s&&(b.push(this.$(this.F,this.K,a.s,this.s)),d=a.s);this.l<a.l&&(b.push(this.$(this.F,this.K,this.l,a.l)),c=a.l);this.K>a.K&&b.push(this.$(a.K,this.K,c,d));this.F<a.F&&b.push(this.$(this.F,a.F,c,d));return!0};function Of(a,b){return a.$(a.F+b.F,a.K+b.K,a.l+b.l,a.s+b.s)}
f.rotate=function(a){switch(a){case 0:return this.$(this.F,this.K,this.l,this.s);case 1:return this.$(-this.s,-this.l,this.F,this.K);case 2:return this.$(-this.K,-this.F,-this.s,-this.l);case 3:return this.$(this.l,this.s,-this.K,-this.F)}};f.De=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return this.$(this.F+a,this.K+a,this.l+b,this.s+b)};function Nf(a,b){return a.F>=b.K||a.K<=b.F||a.l>=b.s||a.s<=b.l?!1:!0}function Pf(a,b){return!Nf(a,b)||a.a>=b.f||a.f<=b.a?!1:!0}
function Qf(a,b,c){var d=0;a=p(a);for(var e=a.next();!e.done;e=a.next())d+=e.value.oe(b,c);return d}f=Hf.prototype;f.Ye=function(){return 0};f.Xe=function(){return this.R};f.We=function(){return this.d};f.Ue=function(){return this.W};f.Te=function(){return this.d};f.raw=function(a,b,c){this.d=a;this.R=b;this.W=c;return this};f.Td=function(){return new cc(this.Xe(),this.We(),this.Ue(),this.Te())};f.$=function(a,b,c){a=new Hf(a,b,c);a.source=this.source;return a};
f.Ve=function(a,b,c){if(!this.hh){var d=new O(this.R+a,this.d-b);d.source=this;c.push(d)}this.Fg||(a=new O(this.W-a,this.d-b),a.source=this,c.push(a))};f.me=function(a,b){return new O(this.R+a,this.d+b)};f.Bd=function(a,b){return b>this.d||b<this.d||a<this.R||a>=this.W?!1:!0};f.Ae=function(a,b){if(this.d>a.s||this.d<=a.l||this.R>=a.K||this.W<=a.F)return!1;this.R<a.F&&b.push(this.$(this.d,this.R,a.F));this.W>a.K&&b.push(this.$(this.d,a.K,this.W));return!0};
f.hg=function(){return new Gf(this.R,this.W,this.d,this.d)};f.rotate=function(a){switch(a){case 0:return(new Hf).raw(this.d,this.R,this.W);case 1:return(new If).raw(this.d,this.R,this.W);case 2:return(new Jf).raw(this.d,this.R,this.W);case 3:return(new Kf).raw(this.d,this.R,this.W)}};f.De=function(a){return this.rotate((4-a)%4)};f=If.prototype;f.Ye=function(){return 1};f.Xe=function(){return-this.d};f.We=function(){return this.R};f.Ue=function(){return-this.d};f.Te=function(){return this.W};
f.raw=Hf.prototype.raw;f.Td=Hf.prototype.Td;f.$=function(a,b,c){a=new If(-a,b,c);a.source=this.source;return a};f.Ve=function(a,b,c){if(!this.hh){var d=new O(-this.d+a,this.R+b);d.source=this;c.push(d)}this.Fg||(a=new O(-this.d+a,this.W-b),a.source=this,c.push(a))};f.me=function(a,b){return new O(-this.d-b,this.R+a)};f.Bd=function(a,b){return a>-this.d||a<-this.d||b<this.R||b>=this.W?!1:!0};
f.Ae=function(a,b){if(-this.d>=a.K||-this.d<a.F||this.R>=a.s||this.W<=a.l)return!1;this.R<a.l&&b.push(this.$(this.d,this.R,a.l));this.W>a.s&&b.push(this.$(this.d,a.s,this.W));return!0};f.hg=function(){return new Gf(-this.d,-this.d,this.R,this.W)};f.rotate=function(a){switch(a){case 0:return(new If).raw(this.d,this.R,this.W);case 1:return(new Jf).raw(this.d,this.R,this.W);case 2:return(new Kf).raw(this.d,this.R,this.W);case 3:return(new Hf).raw(this.d,this.R,this.W)}};
f.De=function(a){return this.rotate((4-a)%4)};f=Jf.prototype;f.Ye=function(){return 2};f.Xe=function(){return-this.R};f.We=function(){return-this.d};f.Ue=function(){return-this.W};f.Te=function(){return-this.d};f.raw=Hf.prototype.raw;f.Td=Hf.prototype.Td;f.$=function(a,b,c){a=new Jf(-a,-b,-c);a.source=this.source;return a};f.Ve=function(a,b,c){if(!this.hh){var d=new O(-this.R-a,-this.d+b);d.source=this;c.push(d)}this.Fg||(a=new O(-this.W+a,-this.d+b),a.source=this,c.push(a))};
f.me=function(a,b){return new O(-this.R-a,-this.d-b)};f.Bd=function(a,b){return b>-this.d||b<-this.d||a>-this.R||a<=-this.W?!1:!0};f.Ae=function(a,b){if(-this.d>=a.s||-this.d<a.l||-this.W>=a.K||-this.R<=a.F)return!1;-this.W<a.F&&b.push(this.$(this.d,-a.F,this.W));-this.R>a.K&&b.push(this.$(this.d,this.R,-a.K));return!0};f.hg=function(){return new Gf(-this.W,-this.R,-this.d,-this.d)};
f.rotate=function(a){switch(a){case 0:return(new Jf).raw(this.d,this.R,this.W);case 1:return(new Kf).raw(this.d,this.R,this.W);case 2:return(new Hf).raw(this.d,this.R,this.W);case 3:return(new If).raw(this.d,this.R,this.W)}};f.De=function(a){return this.rotate((4-a)%4)};f=Kf.prototype;f.Ye=function(){return 3};f.Xe=function(){return this.d};f.We=function(){return-this.R};f.Ue=function(){return this.d};f.Te=function(){return-this.W};f.raw=Hf.prototype.raw;f.Td=Hf.prototype.Td;
f.$=function(a,b,c){a=new Kf(a,-b,-c);a.source=this.source;return a};f.Ve=function(a,b,c){if(!this.hh){var d=new O(this.d-a,-this.R-b);d.source=this;c.push(d)}this.Fg||(a=new O(this.d-a,-this.W+b),a.source=this,c.push(a))};f.me=function(a,b){return new O(this.d+b,-this.R-a)};f.Bd=function(a,b){return a>this.d||a<this.d||b>-this.R||b<=-this.W?!1:!0};
f.Ae=function(a,b){if(this.d>a.K||this.d<=a.F||-this.W>=a.s||-this.R<=a.l)return!1;-this.W<a.l&&b.push(this.$(this.d,-a.l,this.W));-this.R>a.s&&b.push(this.$(this.d,this.R,-a.s));return!0};f.hg=function(){return new Gf(this.d,this.d,-this.W,-this.R)};f.rotate=function(a){switch(a){case 0:return(new Kf).raw(this.d,this.R,this.W);case 1:return(new Hf).raw(this.d,this.R,this.W);case 2:return(new If).raw(this.d,this.R,this.W);case 3:return(new Jf).raw(this.d,this.R,this.W)}};
f.De=function(a){return this.rotate((4-a)%4)};function Je(a,b){for(var c=0,d=a.length,e=c+(d-c>>1);c<d;){var h=a.cmp.call(null,b,a[e]);if(0>h)d=e,e=c+(d-c>>1);else if(0<h)c=e+1,e=c+(d-c>>1);else break}return e}function Ie(a,b){var c=Je(a,b);return a[c]&&0==a.cmp(a[c],b)?a[c]:null}function He(a,b){var c=Je(a,b);if(a[c]&&0==a.cmp(a[c],b))return a[c];a.splice(c,0,b);return b}var Rf=1,Sf,bg=Sf=new ld;Sf.name="concrete";Sf.Cc=new P(255,255,255,3.984375);Sf.Dc=4;Sf.Ec=1;Sf.qa=0;var cg=Sf=new ld;
Sf.name="paint";Sf.Cc=new P(255,255,255,63.75);Sf.Dc=16;Sf.Ec=1;Sf.qa=0;function dg(){this.floor.fa=u.i.O.get("concr01");this.floor.T=bg;this.floor.color=eg;this.ha.fa=u.i.O.get("concr01");this.ha.T=bg;this.ha.color=fg;var a=[],b=this.ze,c=this.f;a:{var d=-1;if(!(b>=c)&&(0>d&&(d=c-b),b+d>c&&(d=c-b),0!=d)){b=new gg(b,b+d);a.push(b);break a}b=void 0}b&&(b.ga.fa=u.i.O.get("brick01"),b.ga.T=bg,b.ga.color=hg);return a}
function ig(){function a(h){if(!(c>=d)&&(0>h&&(h=d-c),c+h>d&&(h=d-c),0!=h)){var g=new gg(c,c+h);b.push(g);c+=h;return g}}this.floor.fa=u.i.O.get("concr01");this.floor.T=bg;this.floor.color=eg;this.ha.fa=u.i.O.get("concr01");this.ha.T=bg;this.ha.color=fg;var b=[],c=this.ze,d=this.f,e;if(e=a(25E3))e.ga.fa=u.i.O.get("brick01"),e.ga.T=cg,e.ga.color=jg;if(e=a(this.nb))e.ga.fa=u.i.O.get("brick01"),e.ga.T=cg,e.ga.color=this.color;if(e=a(-1))e.ga.fa=u.i.O.get("brick01"),e.ga.T=bg,e.ga.color=hg;return b}
function kg(){qf=u.m;rf=9;sf=0;tf=[];uf=[];oe=[];vf=[];wf=null;xf=1;yf=[];zf=[];Af=[];Af.index=oe.length;oe.push(Af);Bf=[];Bf.index=uf.length;uf.push(Bf);Bf.Vf=0;Bf.y=-4E5;Bf.ya=Af;Af.push(Bf);var a=25E3*(fb(8)+10),b=25E3*(fb(8)+10);a=new Gf(-a,+a,-b,+b);a.platform=Bf;Bf.push(a);tf.push(a)}
function lg(){function a(e,h){var g=25E3*Math.floor((fb(8)+10)*xf),k=25E3*Math.floor((fb(8)+10)*xf),m=[];var l=mg(e,g+h,k+h);var n=ng(l);l=tf;l=mg(l,g+h,k+h);n=og(n,l);l=p(n);for(n=l.next();!n.done;n=l.next())n.value.Ve(0,0,m);if(!m.length)return null;l=[];l.cmp=function(v,r){return v.oe>r.oe?-1:v.oe<r.oe?1:v.x<r.x?-1:v.x>r.x?1:v.z<r.z?-1:v.z>r.z?1:0};m=p(m);for(n=m.next();!n.done;n=m.next())n=n.value,n.oe=0==h?Qf(e,n.x,n.y):Qf(tf,n.x,n.y),He(l,n);e=l[0];return new Gf(e.x-g,e.x+g,e.y-k,e.y+k)}if(!(sf>
(u.m-qf)*Rf)){sf++;if(Bf.Vf){var b=Bf.length?a(Bf,0):a(wf,fb(4)?0:325E3);if(!b)return kg(),lg();b.platform=Bf;Bf.push(b);tf.push(b);Bf.Vf--;return lg()}if(wf){b=wf;var c=Bf;pg();var d=qg(b,c);d||(d=rg(b,c));if(!d)return rf+=Bf.length,tf.splice(sg(Bf[0]),Bf.length),Bf.length=0,Bf.Vf=fb(3)+2,lg()}if(sf>=rf)tg();else return wf=Bf,Bf=[],Bf.index=uf.length,uf.push(Bf),Bf.Vf=fb(3)+2,xf=gb([1]),fb(3)&&(Af=[],Af.ha=-Infinity,Af.index=oe.length,oe.push(Af)),Bf.y=wf.y-5E4*hb(0,1,2,3,4),Bf.y=Math.min(Bf.y,-4E5),
Bf.ya=Af,Af.push(Bf),lg()}}
function qg(a,b){var c=[];if(a.y!=b.y){if(a.ac)for(var d,e=p(a.ac),h=e.next();!h.done;h=e.next())h=h.value,h.target==b&&(d||(d=ug(a)),c=c.concat(vg(a,b,d,h.direction)));if(b.ac){var g;d=p(b.ac);for(h=d.next();!h.done;h=d.next())h=h.value,h.target==a&&(g||(g=ug(b)),c=c.concat(vg(b,a,g,h.direction)))}a.ac||b.ac||(c=c.concat(wg(a,b)),c=c.concat(wg(b,a)))}else if(a.ya!=b.ya)c=xg(a,b);else return null;jb(c);b=p(c);for(h=b.next();!h.done;h=b.next())if(a=h.value,yg(a))return vf.push(a),a.Wh&&(b=a,c=b.Wh,
g=[],g.index=uf.length,uf.push(g),g.y=b.wb.y,g.ya=b.Pa.ya,g.ya.push(g),c.platform=g,g.push(c),h=sg(b.Pa[0]),tf.splice(h,b.Pa.length),og(b.Pa,[c]),tf.splice.apply(tf,[h,0].concat(fa(b.Pa))),tf.push(c),pg(),qg(g,b.wb)),a;return null}
function rg(a,b){function c(B,y,C){-y.d<=B.R||-y.d>B.W||y.R>=B.d||y.W<B.d||(C=[(new Hf).raw(B.d,B.R,-y.d).rotate(C),(new Kf).raw(-y.d,-B.d,-y.R).rotate(C)],C.cg=B.source,C.Qe=y.source,C.Dg=C[0].W-C[0].R+(C[1].W-C[1].R),He(h,C))}function d(B,y,C){B.d!=-y.d||-y.R<=B.R||-y.W>B.W||(C=[(new Hf).raw(B.d,B.R,-y.R).rotate(C)],C.cg=B.source,C.Qe=y.source,C.Dg=C[0].W-C[0].R,He(h,C))}var e=mg(tf,162500,162500),h=[];h.cmp=function(B,y){return B.Dg<y.Dg?-1:1};if(a==b){var g=zg(a);a=[[],[],[],[]];for(var k=0;4>
k;k++){var m=Ag(e,k),l=p(g);for(b=l.next();!b.done;b=l.next()){var n=b.value;b=n.source.source;n=Bg(n,(4-k)%4);var v=n.y,r=n.x;n=Cg(n.x,n.y,m);n<=r||(v=new Hf(v,r,n),v.source=b,a[k].push(v))}}for(e=0;4>e;e++){g=void 0;g=(e+1)%4;k=p(a[e]);for(b=k.next();!b.done;b=k.next())for(m=b.value,l=p(a[g]),b=l.next();!b.done;b=l.next())c(m,b.value,e,g);if(!(2<=e))for(g=e+2,k=p(a[e]),b=k.next();!b.done;b=k.next())for(m=b.value,l=p(a[g]),b=l.next();!b.done;b=l.next())d(m,b.value,e,g)}}else{k=zg(a);m=zg(b);a=[[],
[],[],[]];g=[[],[],[],[]];for(l=0;4>l;l++){v=Ag(e,l);r=p(k);for(b=r.next();!b.done;b=r.next()){var q=b.value;b=q.source.source;q=Bg(q,(4-l)%4);n=q.y;var t=q.x;q=Cg(q.x,q.y,v);q<=t||(n=new Hf(n,t,q),n.source=b,a[l].push(n))}r=p(m);for(b=r.next();!b.done;b=r.next())q=b.value,b=q.source.source,q=Bg(q,(4-l)%4),n=q.y,t=q.x,q=Cg(q.x,q.y,v),q<=t||(n=new Hf(n,t,q),n.source=b,g[l].push(n))}for(e=1;4>e;e++){k=void 0;k=(e+1)%4;m=p(a[e]);for(b=m.next();!b.done;b=m.next())for(l=b.value,v=p(g[k]),b=v.next();!b.done;b=
v.next())c(l,b.value,e,k);m=p(g[e]);for(b=m.next();!b.done;b=m.next())for(l=b.value,v=p(a[k]),b=v.next();!b.done;b=v.next())c(l,b.value,e,k);k=(e+2)%4;m=p(a[e]);for(b=m.next();!b.done;b=m.next())for(l=b.value,v=p(g[k]),b=v.next();!b.done;b=v.next())d(l,b.value,e,k)}}for(e=0;e<h.length;e++){b=h[e];a=b[0];g=b[b.length-1];k=b.cg.platform;m=b.Qe.platform;l=Math.min(k.y,m.y);v=Math.max(k.y,m.y);if(a==g){if(r=25E3*(Math.floor((a.W-a.R-325E3)/5E4)-1),0>r&&(r=0),Math.abs(m.y-k.y)>r){h.splice(e--,1);continue}}else if(r=
25E3*(Math.floor((a.W-a.R-325E3)/5E4)-1),0>r&&(r=0),l=Math.max(l,k.y-r),v=Math.min(v,k.y+r),r=25E3*(Math.floor((g.W-g.R-325E3)/5E4)-1),0>r&&(r=0),l=Math.max(l,m.y-r),v=Math.min(v,m.y+r),l>v){h.splice(e--,1);continue}b.y=hb(l,v);b.ac=[];Math.abs(k.y-b.y)/25E3&&b.ac.push({direction:(a.Ye()+2+3)%4,target:k});Math.abs(m.y-b.y)/25E3&&b.ac.push({direction:(g.Ye()+3)%4,target:m});b.ac.length||delete b.ac}e=h[fb(h.length/10)];if(!e)return!1;a=[];a.index=oe.length;oe.push(a);b=[];b.index=uf.length;uf.push(b);
b.y=e.y;e.ac&&(b.ac=e.ac);b.ya=a;a.push(b);a=p(e);for(g=a.next();!g.done;g=a.next())g=g.value.hg().expand(162500,162500),g.platform=b,b.push(g),tf.push(g);pg();b.y==e.Qe.platform.y?(qg(e.cg.platform,b),qg(b,e.Qe.platform)):(qg(b,e.Qe.platform),qg(e.cg.platform,b));return e}function sg(a){for(var b=tf.length-1;0<=b;b--)if(tf[b]==a)return b;return-1}function Dg(a,b,c){var d=[];a=p(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.translate(b,c));return d}
function Ag(a,b){var c=[];a=p(a);for(var d=a.next();!d.done;d=a.next())c.push(d.value.De(b));return c}function Bg(a,b){switch(b){case 0:return new O(a.x,a.y);case 1:return new O(-a.y,a.x);case 2:return new O(-a.x,-a.y);case 3:return new O(a.y,-a.x)}}function mg(a,b,c){var d=[];a=p(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.expand(b,c));return d}function Eg(a,b){var c=[];a=p(a);for(var d=a.next();!d.done;d=a.next())c.push(Of(d.value,b));return c}
function og(a,b){b=p(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=a.length,e=0;e<d;e++)a[e].Ae(c,a)&&(a.splice(e--,1),d--)}return a}function Fg(a,b){for(var c=new Gf,d=p(a),e=d.next();!e.done;e=d.next())Lf(c,e.value);d=p(b);for(e=d.next();!e.done;e=d.next())Lf(c,e.value);c=[c];og(c,b);return og(a.slice(),c)}function Gg(a){var b=[];a=p(a);for(var c=a.next();!c.done;c=a.next()){c=c.value;for(var d=b.length,e=0;e<d;e++)b[e].Ae(c,b)&&(b.splice(e--,1),d--);b.push(c)}return b}
function Hg(a,b){b=void 0===b?0:b;for(var c=new Gf,d=p(a),e=d.next();!e.done;e=d.next())Lf(c,e.value);b=[c.expand(b,b)];og(b,a);return b}function Cg(a,b,c){var d=Infinity;c=p(c);for(var e=c.next();!e.done;e=c.next())if(e=e.value,!(e.l>=b||e.s<=b||e.K<=a||e.F>=d)){if(e.F<a){d=a;break}d=e.F}return d}function ng(a){for(var b=[],c=p(a),d=c.next();!d.done;d=c.next())Mf(d.value,b);og(b,a);return b}function Ig(a){a.bound=new nc;for(var b=0;b<a.length;b++){var c=a[b].Td();a.bound.xa(c.u,c.j);a[b]=c}}
function zg(a){var b=162500,c=162500;b=void 0===b?0:b;c=void 0===c?0:c;var d=ng(a);a=[];d=p(d);for(var e=d.next();!e.done;e=d.next())e.value.Ve(b,c,a);d=p(tf);for(e=d.next();!e.done;e=d.next()){e=e.value;for(var h=0;h<a.length;h++)e.expand(b,c).Bd(a[h].x,a[h].y)&&a.splice(h--,1)}return a}
function xg(a,b){a.gd=Jg(a);b.gd=Jg(b);var c=[],d=[],e=Dg(a.gd,162500,0),h=Dg(b.gd,-162500,0);h=Fg(e,h);var g=p(h);for(e=g.next();!e.done;e=g.next())e.value.direction=0;d=d.concat(h);e=Dg(a.gd,0,162500);h=Dg(b.gd,0,-162500);h=Fg(e,h);g=p(h);for(e=g.next();!e.done;e=g.next())e.value.direction=1;d=d.concat(h);e=Dg(a.gd,-162500,0);h=Dg(b.gd,162500,0);h=Fg(e,h);g=p(h);for(e=g.next();!e.done;e=g.next())e.value.direction=2;d=d.concat(h);e=Dg(a.gd,0,-162500);h=Dg(b.gd,0,162500);h=Fg(e,h);g=p(h);for(e=g.next();!e.done;e=
g.next())e.value.direction=3;d=d.concat(h);jb(d);e=new Gf(-12500,12500,-112500,112500);d=p(d);for(h=d.next();!h.done;h=d.next()){h=h.value;g=e.De(h.direction);for(var k=p([{z:h.F,x:h.l},{z:h.K-1,x:h.s-1}]),m=k.next();!m.done;m=k.next())m=m.value,m=g.translate(m.z,m.x),m.y=a.y,m.direction=h.direction,c.push(new Kg(m,a,b))}return c}function Jg(a){var b=162500;var c=Eg(a,new Gf(0,1,0,1));a=Hg(c,1);a=Eg(a,new Gf(-b,b,-b,b));og(c,a);return c}
function wg(a,b){for(var c=ug(a),d=[],e=0;4>e;e++)d=d.concat(vg(a,b,c,e));return d}
function vg(a,b,c,d){var e=25E3*Math.ceil(Math.abs(b.y-a.y)/25E3),h=a.ya!=b.ya?325E3:0,g=function(m,l,n){function v(B){for(var y=0;y<B.length;y++)for(var C=B[y],z=y+1;z<B.length;z++){var D=B[z];if(C.F==D.F&&C.K==D.K){if(D.s==C.l){B.splice(z--,1);C.l=D.l;y--;break}if(D.l==C.s){B.splice(z--,1);C.s=D.s;y--;break}}}B=p(B);for(y=B.next();!y.done;y=B.next())y=y.value,y.l=y.s-1,y.direction=d}var r=Hg(m,1);r=Eg(r,new Gf(-162499,162500,-e-h+1,e+162500+162500));m=r=Hg(r,0);r=Eg(n,new Gf(0,0,-e-h+1,e));r=Hg(r,
1);r=Eg(r,new Gf(-162500,162501,0,0));m=r=Fg(m,r);r=Hg(l,1);r=Eg(r,new Gf(-162499,162500,-162499,162500));r=Hg(r,0);n=[];l=Fg(m,Dg(r,0,-e-h-162500));v(l);for(var q=p(l),t=q.next();!t.done;t=q.next())t.value.type=1;n=n.concat(l);if(0!=h){l=Fg(m,Dg(r,-325E3,-e-162500));v(l);q=p(l);for(t=q.next();!t.done;t=q.next())t.value.type=0;n=n.concat(l);l=Fg(m,Dg(r,325E3,-e-162500));v(l);m=p(l);for(t=m.next();!t.done;t=m.next())t.value.type=2;n=n.concat(l)}return n}(Ag(a,d),Ag(b,d),Ag(c,d));c=[];g=p(g);for(var k=
g.next();!k.done;k=g.next())c.push(new Lg(k.value,e,h,a,b));return c}function ug(a){for(var b=a.slice(),c=p(a.zd),d=c.next();!d.done;d=c.next())d=d.value,d=d.pa.platform!=a?d.pa.platform:d.Y.platform,d.ya==a.ya&&(b=b.concat(d));return b}
function pg(){for(var a=tf,b=p(uf),c=b.next();!c.done;c=b.next())c.value.zd=[];b=p(a);for(c=b.next();!c.done;c=b.next())c.value.zd=[];for(c=0;c<a.length;c++){b=a[c];for(var d=c+1;d<a.length;d++){var e=a[d];var h=new Gf(Math.max(b.F,e.F),Math.min(b.K,e.K),Math.max(b.l,e.l),Math.min(b.s,e.s));if(h=h.K<h.F||h.s<h.l?null:h)h.pa=b,h.Y=e,b.zd.push(h),e.zd.push(h),b.platform!=e.platform&&(b.platform.zd.push(h),e.platform.zd.push(h))}}}
function tg(){pg();for(var a=0;a<tf.length;a++)tf[a].index=a;a=p(oe);for(var b=a.next();!b.done;b=a.next()){b=p(b.value);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=p(c.zd),e=d.next();!e.done;e=d.next()){e=e.value;var h=e.pa.platform!=c?e.pa.platform:e.Y.platform;if(!(c.index>=h.index)&&c.ya!=h.ya){e=xg(c,h);jb(e);var g=p(e);for(e=g.next();!e.done;e=g.next())if(e=e.value,yg(e)){e.re=!0;c.ya.ha=Math.max(c.ya.ha,e.y+75E3+15E4);h.ya.ha=Math.max(h.ya.ha,e.y+75E3+15E4);vf.push(e);break}}}}}a=
p(vf);for(e=a.next();!e.done;e=a.next())e.value.wi();Cf=[];a=p(oe);for(e=a.next();!e.done;e=a.next()){b=[];c=p(e.value);for(d=c.next();!d.done;d=c.next())b=b.concat(d.value);Cf=Cf.concat(ng(b))}Df=[];a=p(uf);for(e=a.next();!e.done;e=a.next())Df=Df.concat(ng(e.value))}
function Kg(a,b,c){this.sb=a;this.direction=a.direction;this.ca=112500;this.Pa=b;this.wb=c;this.z=.5*a.F+.5*a.K;this.x=.5*a.l+.5*a.s;this.y=Math.max(b.y,c.y);this.Uc=[];this.Pe=[];this.od=[];this.nd=[];b=new Gf(a.F,a.K,a.l,a.s);b.a=a.y;b.f=b.a+225E3;this.od.push(b);this.Pe.push(b);b=new Gf(-225E3,225E3,-112500,112500);b=b.rotate(this.direction);b=b.translate(this.z,this.x);b.f=a.y;b.a=b.f-25E3;this.od.push(b);b=new Gf(b.F,b.K,b.l,b.s);b.a=a.y;b.f=b.a+225E3;this.nd.push(b)}Kg.prototype.wi=function(){zf.push(this.sb)};
Kg.prototype.uh=function(){zf.push(this.sb);var a=new Hf(0,0,1);a=a.rotate(this.direction);this.ma=new cc(a.Xe()+this.z,a.We()+this.x,a.Ue()+this.z,a.Te()+this.x);a=new Mg;a.add=!0;a.nb=0;a.color=hg;this.re?(a.a=this.y+75E3,a.f=a.a+15E4):(a.a=this.y,a.f=this.y+225E3);for(var b=[new O(0,-this.ca),new O(0,this.ca),new O(-12500,this.ca),new O(-12500,-this.ca)],c=[new O(0,this.ca),new O(0,-this.ca),new O(12500,-this.ca),new O(12500,this.ca)],d=0;d<b.length;d++)b[d]=this.ma.$a(b[d].x,b[d].y);for(d=0;d<
c.length;d++)c[d]=this.ma.$a(c[d].x,c[d].y);a.Z=this.Pa.ya.index+1;Ng(a,b);a.stroke();a=a.$();a.Z=this.wb.ya.index+1;Ng(a,c);a.stroke();d=this.Pa.ya;var e=this.wb.ya;b=new qe(new cc(b[0].x,b[0].y,b[1].x,b[1].y),a.a,a.f);a=new qe(new cc(c[0].x,c[0].y,c[1].x,c[1].y),a.a,a.f);b.pd=a;a.pd=b;b.Z=d.index;a.Z=e.index;d.Ac.push(b);e.Ac.push(a);b.re=this.re;(a.re=this.re)||d.sd!=e.sd&&new Og(this.ma,this.y,b,a,d,e)};
function Lg(a,b,c,d,e){this.sb=a;this.direction=a.direction;this.type=a.type;this.Md=162500;this.qe=b;this.Pa=d;this.wb=e;var h=Math.min(d.y,e.y),g=Math.max(d.y,e.y);this.Uc=[];this.Pe=[];this.od=[];this.nd=[];var k=new Gf(-162500,162500,-b,b);k=k.translate(a.F,a.l);k=k.rotate(this.direction);k.a=h-25E3;k.f=g;this.Uc.push(k);this.Pe.push(k);k=new Gf(k.F,k.K,k.l,k.s);k.a=h;k.f=g+2E5;this.nd.push(k);k=new Gf(-162500,162500,-b-162500-162500,-b);k=k.translate(a.F,a.l);k=k.rotate(this.direction);k.a=d.y;
k.f=g+2E5;this.nd.push(k);k=new Gf(k.F,k.K,k.l,k.s);k.a=h-25E3;k.f=d.y;this.Uc.push(k);this.od.push(k);if(c){d=new Gf(-162500,162500,b,b+c);d=d.translate(a.F,a.l);d=d.rotate(this.direction);d.a=e.y;d.f=g+2E5;this.nd.push(d);d=new Gf(d.F,d.K,d.l,d.s);d.a=h-25E3;d.f=e.y;this.Uc.push(d);this.od.push(d);this.Wh=d;var m;0==this.type?m=new Gf(162500,487500,b,b+c):1==this.type?m=new Gf(-162500,162500,b+c,b+c+325E3):2==this.type&&(m=new Gf(-487500,-162500,b,b+c));m=m.translate(a.F,a.l);m=m.rotate(this.direction);
m.a=e.y;m.f=g+2E5;this.nd.push(m);m=new Gf(m.F,m.K,m.l,m.s);m.a=h-25E3;m.f=e.y;this.Uc.push(m);this.od.push(m)}else b=new Gf(-162500,162500,b,b+162500),b=b.translate(a.F,a.l),b=b.rotate(this.direction),b.a=e.y,b.f=g+2E5,this.nd.push(b),b=new Gf(b.F,b.K,b.l,b.s),b.a=h-25E3,b.f=e.y,this.Uc.push(b),this.od.push(b)}
Lg.prototype.wi=function(){var a=(this.wb.y-this.Pa.y)/25E3;if(this.wb.y>this.Pa.y)for(var b=0;b<=a;b++){var c=new Hf(this.sb.l-this.qe+5E4*b,this.sb.F-this.Md,this.sb.F+this.Md);c=c.rotate(this.direction);c.y=this.Pa.y+25E3*b;yf.push(c)}else for(a=-a,b=0;b<=a;b++)c=new Hf(this.sb.l-this.qe+5E4*b,this.sb.F-this.Md,this.sb.F+this.Md),c=c.rotate(this.direction),c.y=this.Pa.y-25E3*b,yf.push(c)};
Lg.prototype.uh=function(){function a(h){return 1==h.Hf?!0:!1}var b=this.Pa.ya,c=(this.wb.y-this.Pa.y)/25E3;if(this.wb.y>this.Pa.y){var d=new Mg;d.add=!1;d.Hf=1;d.Z=this.Pa.ya.index+1;d.Dd=a;d.color=hg;d.a=this.Pa.y;d.f=this.wb.y;b=this.Uc[0];Ng(d,[new O(b.F,b.l),new O(b.K,b.l),new O(b.K,b.s),new O(b.F,b.s)]);d.stroke();for(d=1;d<c;d++){b=new Gf(this.sb.F-this.Md,this.sb.F+this.Md,this.sb.l-this.qe+5E4*(d-1),this.sb.l-this.qe+5E4*d);b=b.rotate(this.direction);b=[new O(b.F,b.l),new O(b.K,b.l),new O(b.K,
b.s),new O(b.F,b.s)];var e=new Mg;e.add=!0;e.Z=this.Pa.ya.index+1;e.Dd=a;e.nb=0;e.color=hg;e.a=this.Pa.y+25E3*d;e.f=this.wb.y;Ng(e,b);e.stroke()}}else for(c=-c,d=new Mg,d.add=!0,d.Hf=1,d.Z=this.Pa.ya.index+1,d.Dd=a,d.je=ig,d.nb=b.nb,d.ze=b.a,d.color=b.be,d.a=this.wb.y,d.f=this.Pa.y,b=this.Uc[0],Ng(d,[new O(b.F,b.l),new O(b.K,b.l),new O(b.K,b.s),new O(b.F,b.s)]),d.stroke(),d=0;d<c;d++)b=new Gf(this.sb.F-this.Md,this.sb.F+this.Md,this.sb.l-this.qe+5E4*d,this.sb.l-this.qe+5E4*(d+1)),b=b.rotate(this.direction),
b=[new O(b.F,b.l),new O(b.K,b.l),new O(b.K,b.s),new O(b.F,b.s)],e=new Mg,e.add=!1,e.Z=this.Pa.ya.index+1,e.Dd=a,e.nb=0,e.color=hg,e.a=this.wb.y,e.f=this.Pa.y-25E3*d,Ng(e,b),e.stroke()};
function Pg(a,b){for(var c=p(a.od),d=c.next();!d.done;d=c.next()){var e=d.value,h=p(b.Pe);for(d=h.next();!d.done;d=h.next())if(Pf(e,d.value))return!1}c=p(a.Pe);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=p(b.od),d=h.next();!d.done;d=h.next())if(Pf(e,d.value))return!1;c=p(a.nd);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=p(b.Uc),d=h.next();!d.done;d=h.next())if(Pf(e,d.value))return!1;a=p(a.Uc);for(d=a.next();!d.done;d=a.next())for(c=d.value,e=p(b.nd),d=e.next();!d.done;d=e.next())if(Pf(c,
d.value))return!1;return!0}function yg(a){for(var b=p(vf),c=b.next();!c.done;c=b.next())if(!Pg(a,c.value))return!1;return!0}
function Qg(a){function b(k){return k.add?k.Z==this.Z?!0:!1:!1}a.be=hb(new P(255,0,64,255),new P(255,255,64,255),new P(0,96,255,255));a.sd?a.nb=75E3:fb(2)?a.nb=75E3:a.nb=a.ha-a.a-75E3;if(a.sd){var c=new Mg;c.add=!0;c.Z=a.index+1;c.Dd=function(k){return isNaN(k.index)?!0:!1};c.nb=a.nb;c.color=a.be;c.je=function(){return[]};c.ze=0;c.a=0;c.f=2147483647;var d=[new O(a.bound.F,a.bound.l),new O(a.bound.K,a.bound.l),new O(a.bound.K,a.bound.s),new O(a.bound.F,a.bound.s)];c.ha=null;Ng(c,d);c.stroke()}if(!a.sd)for(c=
p(a.Jh),d=c.next();!d.done;d=c.next()){d=d.value;var e=new Mg;e.add=!1;e.Z=a.index+1;e.nb=a.nb;e.color=a.be;e.je=dg;e.ze=a.a-25E3;e.a=a.a-25E3;e.f=a.ha+25E3;Ng(e,vc(d));e.stroke()}c=p(a.Kh);for(d=c.next();!d.done;d=c.next())d=d.value,e=new Mg,e.add=!0,e.Hf=1,e.Z=a.index+1,e.nb=a.nb,e.color=a.be,e.je=ig,e.ze=a.a,e.a=a.a,e.f=a.ha,Ng(e,vc(d)),e.stroke();c=p(a);for(d=c.next();!d.done;d=c.next())if(e=d.value,!(e.y<=a.a)){var h=p(e.Ih);for(d=h.next();!d.done;d=h.next()){d=d.value;var g=new Mg;g.add=!1;
g.Hf=1;g.Z=a.index+1;g.Dd=b;g.nb=a.nb;g.color=a.be;g.je=ig;g.ze=a.floor;g.a=a.a;g.f=e.y;Ng(g,vc(d));g.stroke()}}}
function Rg(){function a(m,l){l.y<m.a&&(m.a=l.y)}function b(m,l){l.y+2E5>m.ha&&(m.ha=l.y+2E5)}Ef=new bd;for(var c=p(tf),d=c.next();!d.done;d=c.next())d=d.value,d.z=.5*d.F+.5*d.K,d.x=.5*d.l+.5*d.s,d.y=d.platform.y,d.F<Ef.F&&(Ef.F=d.F),d.K>Ef.K&&(Ef.K=d.K),d.l<Ef.l&&(Ef.l=d.l),d.s>Ef.s&&(Ef.s=d.s);c=p(uf);for(var e=c.next();!e.done;e=c.next()){d=e.value;d.Ih=[];e=p(d);for(var h=e.next();!h.done;h=e.next()){var g=[];Mf(h.value,g);Ig(g);d.Ih.push(g)}}Ef.F-=1E5;Ef.K+=1E5;Ef.l-=1E5;Ef.s+=1E5;for(c=0;c<
oe.length;c++)d=oe[c],d.index=c,c%2||(d.sd=!0);c=p(oe);for(d=c.next();!d.done;d=c.next()){d=d.value;d.U={};d.U.Ma=-2147483648;d.U.Qa=new G(1,1,1);d.Mb=0;d.Va=new G;d.cells=new Ta(bb);d.sd?d.Nc=new G(1,1,1):(h=hb(.0125,.0625,.1125,.175),d.Nc=new G(h,h,h));d.Ac=[];d.zd=[];d.bound=new bd;d.floor=NaN;d.a=NaN;h=p(d);for(e=h.next();!e.done;e=h.next())for(e=e.value,e.y>=d.a||(d.a=e.y),e.y>=d.floor||(d.floor=e.y),e.y+3E5<=d.ha||(d.ha=e.y+3E5),e=p(e),g=e.next();!g.done;g=e.next())g=g.value,g.F<d.bound.F&&
(d.bound.F=g.F),g.K>d.bound.K&&(d.bound.K=g.K),g.l<d.bound.l&&(d.bound.l=g.l),g.s>d.bound.s&&(d.bound.s=g.s);d.ha=Math.max(d.ha,d.floor+25E3*gb([10]));d.bound.F-=1E5;d.bound.K+=1E5;d.bound.l-=1E5;d.bound.s+=1E5;d.sd&&(d.ha=0);d.ha>Ef.f&&(Ef.f=d.ha);d.floor<Ef.a&&(Ef.a=d.floor);e=[];h=p(d);for(g=h.next();!g.done;g=h.next())e.push.apply(e,fa(g.value));h=e;h=mg(h,12500,12500);h=Gg(h);d.Jh=[];g=p(h);for(h=g.next();!h.done;h=g.next()){var k=[];Mf(h.value,k);Ig(k);d.Jh.push(k)}h=e;h=Hg(h,1);h=mg(h,12500,
12500);h=Hg(h,0);d.Kh=[];e=p(h);for(h=e.next();!h.done;h=e.next())g=[],Mf(h.value,g),Ig(g),d.Kh.push(g)}c=p(vf);for(d=c.next();!d.done;d=c.next())d=d.value,!d instanceof Lg||d.Pa.ya!=d.wb.ya&&(d.Pa.y<d.wb.y?b(d.Pa.ya,d.wb):a(d.Pa.ya,d.wb));Ef.a-=1E5;Ef.f+=1E5;c=p(oe);for(d=c.next();!d.done;d=c.next())Qg(d.value);c=p(vf);for(d=c.next();!d.done;d=c.next())d.value.uh();ne();Sg();Sd=be();Tg();Ff=(new Date).getTime();console.log("world generated: "+(Ff-pf.pj)/1E3+" seconds");c=p(u.Vg.elements);for(d=c.next();!d.done;d=
c.next())Ug(d.value)};function Vg(a,b){function c(){for(var n=new Ta(dc),v=p(a),r=v.next();!r.done;r=v.next())r=r.value,n.add(r),n.add(r.ba);v=p(a);for(r=v.next();!r.done;r=v.next())if(r=r.value,!r.remove){var q=n.get(r);q!=r&&(r.replace([q]),r.ba.replace([q.ba]))}return n.elements}function d(){for(var n=p(l),v=n.next();!v.done;v=n.next()){v=v.value;var r=v.x&-524288,q=v.y&-524288,t=!1;v.x<=r+256?(v.x=r,t=!0):v.x>=r+524288-256&&(v.x=r+524288,t=!0);v.y<=q+256?(v.y=q,t=!0):v.y>=q+524288-256&&(v.y=q+524288,t=!0);if(t){q=
p(v.inputs);for(r=q.next();!r.done;r=q.next())r.value.Ke=!0;v=p(v.outputs);for(r=v.next();!r.done;r=v.next())r.value.Ke=!0}}}function e(n,v,r){var q=L(v,n.h,n.c),t=L(v,n.u,n.j),B=L(n,v.h,v.c),y=L(n,v.u,v.j);if(-256>B&&256<y&&(-256>q&&256<t||256<q&&-256>t)||256<B&&-256>y&&(-256>q&&256<t||256<q&&-256>t)){q/=q-t;t=1-q;y=new O(Math.round(n.h*t+n.u*q),Math.round(n.c*t+n.j*q));q=n.Ia(n.h,n.c,y.x,y.y);t=n.Ia(y.x,y.y,n.u,n.j);B=v.Ia(v.h,v.c,y.x,y.y);y=v.Ia(y.x,y.y,v.u,v.j);var C=tc(q),z=tc(t),D=tc(B),H=tc(y);
n.replace([q,t]);n.ba.replace([z,C]);v.replace([B,y]);v.ba.replace([H,D]);r.push(q,t,B,y);r.push(C,z,D,H);n=!0}else n=!1;return n}function h(n,v){if(!n.remove){for(var r=p(l),q=r.next();!q.done;q=r.next())if(q=q.value,q.x!=n.h||q.y!=n.c)if(q.x!=n.u||q.y!=n.j){var t=n.me(q.x,q.y);if(!(0>=t.x||t.x>=n.length||-256>t.y||256<t.y)){r=n.Ia(n.h,n.c,q.x,q.y);q=n.Ia(q.x,q.y,n.u,n.j);t=n.Ia(r.u,r.j,r.h,r.c);var B=n.Ia(q.u,q.j,q.h,q.c);r.ba=t;t.ba=r;q.ba=B;B.ba=q;n.replace([r,q]);n.ba.replace([B,t]);h(r,v);h(q,
v);h(t,v);h(B,v);return}}v.push(n)}}for(var g=[],k=p(a),m=k.next();!m.done;m=k.next())m=m.value,m.remove||g.push(m);a=g;a=c();b&&(a=Wg(null,a,e));var l=new Ta(Pc);b=p(a);for(m=b.next();!m.done;m=b.next())g=m.value,k=new O(g.h,g.c),k.inputs=[],k.outputs=[],k.ca=1,g.pa=l.xa(k),g.pa.outputs.push(g),g.pa.ca++,k=new O(g.u,g.j),k.inputs=[],k.outputs=[],k.ca=1,g.Y=l.xa(k),g.Y.inputs.push(g),g.Y.ca++;l=l.elements;d();l=Wg(null,l,function(n,v,r){if(256>(Math.abs(v.x-n.x)+Math.abs(v.y-n.y))*Math.SQRT1_2){var q=
new O(n.x*n.ca+v.x*v.ca,n.y*n.ca+v.y*v.ca);q.ca=n.ca+v.ca;q.x/=q.ca;q.y/=q.ca;q.round();q.inputs=n.inputs.concat(v.inputs);q.outputs=n.outputs.concat(v.outputs);n=p(q.inputs);for(v=n.next();!v.done;v=n.next())v=v.value,v.Y=q,v.Ke=!0;n=p(q.outputs);for(v=n.next();!v.done;v=n.next())v=v.value,v.pa=q,v.Ke=!0;r.push(q);r=!0}else r=!1;return r});d();for(b=0;b<a.length;b++)g=a[b],g.remove?a.splice(b--,1):g.pa==g.Y?(g.replace([]),g.ba.replace([]),a.splice(b--,1)):g.Ke&&(k=g.Ia(g.pa.x,g.pa.y,g.Y.x,g.Y.y),
m=tc(k),g.replace([k]),g.ba.replace([m]),a.splice(b++,1,k,m)),delete g.pa,delete g.Y,delete g.Ke;(function(){for(var n=[],v=p(a),r=v.next();!r.done;r=v.next())h(r.value,n);a=n})();return a=c()}
function Wg(a,b,c){var d=[];if(a)for(var e=0;e<a.length;e++){var h=a[e];if(h.remove)a.splice(e--,1);else for(var g=0;g<b.length;g++){var k=b[g];if(k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);a.splice(e--,1);break}}}for(e=0;e<b.length;e++)if(h=b[e],h.remove)b.splice(e--,1);else for(g=e+1;g<b.length;g++)if(k=b[g],k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);b.splice(e--,1);break}a&&(b=a.concat(b));return d.length?Wg(b,d,c):b};var Ge,Xg=new cc(0,0,1,0),Yg=4095/741455.429632,Zg=new Ta(function(a,b){return a.y<b.y?-1:a.y>b.y?1:a.Z<b.Z?-1:a.Z>b.Z?1:a.fa.name<b.fa.name?-1:a.fa.name>b.fa.name?1:Dd(a.T,b.T)});function $g(a,b){return a.y>b.y?-1:a.y<b.y?1:0}var ah=[];function bh(a,b,c,d){var e=new Ke;e.y=a;e.Z=b;e.fa=c;e.T=d;e.kd=[];return Zg.xa(e)}
function Sg(){for(var a=p(Td.elements),b=a.next();!b.done;b=a.next())ch(b.value);u.ff();a=p(Td.elements);for(b=a.next();!b.done;b=a.next()){b=b.value;for(var c=0;4>c;c++){var d=dh(b,c);if(d&&d.Ma!=u.Ma)for(var e=b,h=c,g=0,k=0;g<e.td.length&&k<d.td.length;){var m=e.td[g],l=d.td[k];if(m.f<l.a)g++;else if(l.f<m.a)k++;else{var n=[];switch(h){case 0:var v=Zd(e.index);var r=v.x+512;for(var q=p(m.V),t=q.next();!t.done;t=q.next())t=t.value,(t.h<=r||t.u<=r)&&n.push(t);r=v.x-512;v=p(l.V);for(t=v.next();!t.done;t=
v.next())t=t.value,(t.h>=r||t.u>=r)&&n.push(t);break;case 1:v=Zd(e.index);r=v.y+512;q=p(m.V);for(t=q.next();!t.done;t=q.next())t=t.value,(t.c<=r||t.j<=r)&&n.push(t);r=v.y-512;v=p(l.V);for(t=v.next();!t.done;t=v.next())t=t.value,(t.c>=r||t.j>=r)&&n.push(t);break;case 2:v=Zd(d.index);r=v.x+512;q=p(l.V);for(t=q.next();!t.done;t=q.next())t=t.value,(t.h<=r||t.u<=r)&&n.push(t);r=v.x-512;v=p(m.V);for(t=v.next();!t.done;t=v.next())t=t.value,(t.h>=r||t.u>=r)&&n.push(t);break;case 3:v=Zd(d.index);r=v.y+512;
q=p(l.V);for(t=q.next();!t.done;t=q.next())t=t.value,(t.c<=r||t.j<=r)&&n.push(t);r=v.y-512;v=p(m.V);for(t=v.next();!t.done;t=v.next())t=t.value,(t.c>=r||t.j>=r)&&n.push(t)}Vg(n,!1);m.f<=l.f&&g++;l.f<=m.f&&k++}}}b.Ma=u.Ma}a=p(Td.elements);for(b=a.next();!b.done;b=a.next())b.value.evaluate();a=p(Td.elements);for(b=a.next();!b.done;b=a.next()){b=b.value;c=p(b.td);for(e=c.next();!e.done;e=c.next())for(e=p(e.value.lc),d=e.next();!d.done;d=e.next())d.value.evaluate();eh(b)}Ge=[];a=p(Td.elements);for(b=
a.next();!b.done;b=a.next())fh(b.value);Fe()}function gh(a,b){var c=new Ta(Pc);a=p(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var e=new Ta(uc);e.x=d.h;e.y=d.c;e=c.xa(e);e.add(d);b&&(d=tc(d),e=new Ta(uc),e.x=d.h,e.y=d.c,e=c.xa(e),e.add(d))}return c}
function hh(a){var b=[];b.bound=new nc;var c=0,d=a.elements[c],e=d.elements.pop();d.elements.length||a.elements.splice(c,1);if(!e)return null;for(;;){b.push(e);b.bound.xa(e.u,e.j);if(e.u==b[0].h&&e.j==b[0].c)return b;c=a.contains(new O(e.u,e.j));if(0>c)return null;d=a.elements[c];e=Ua(d,sc(e))-1;0>e&&(e+=d.elements.length);e=d.elements.splice(e,1)[0];d.elements.length||a.elements.splice(c,1)}}
function ih(a){for(var b=[],c=a[a.length-1],d=0;d<a.length;d++){var e=a[d];b.push(ec(c,e));c=e}a.rg=b;a.ye=[];a.lh=0;b=p(a.rg);for(c=b.next();!c.done;c=b.next())c=c.value,0>c?(a.lh-=c,a.ye.push(-c)):a.ye.push(0)}
function jh(a,b){var c=null;b=p(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.l<=d.bound.l||a.bound.a<=d.bound.a||a.bound.s>=d.bound.s||a.bound.f>=d.bound.f)){if(c){if(d.bound.l<=c.bound.l)continue;if(d.bound.a<=c.bound.a)continue;if(d.bound.s>=c.bound.s)continue;if(d.bound.f>=c.bound.f)continue}0>=kc(a[0].u,a[0].j,d)||(c=d)}c&&c.Xa.push(a)}
function kh(a){if(0==a.Xa.length)return a;var b=[a].concat(a.Xa),c={};c.Id=Number.NEGATIVE_INFINITY;for(var d=0;d<b.length;d++)for(var e=b[d],h=d+1;h<b.length;h++)for(var g=b[h],k=0;k<e.length;k++)for(var m=(k+1)%e.length,l=0;l<g.length;l++)c=lh(e,k,m,g,l,(l+1)%g.length,c,b);if(0>c.Id)return console.log("could not solve holes"),a.Xa=[],a;e=c.zc[c.Y].Ia(c.zc[c.Y].h,c.zc[c.Y].c,c.Qc[c.d].h,c.Qc[c.d].c);d=e.Ia(e.u,e.j,e.h,e.c);e.ba=d;d.ba=e;b=[];for(h=0;h<c.Y;h++)b.push(c.zc[h]);b.push(e);e=c.d;for(h=
0;h<c.Qc.length;h++)b.push(c.Qc[e]),++e==c.Qc.length&&(e=0);b.push(d);for(d=c.Y;d<c.zc.length;d++)b.push(c.zc[d]);if(c.zc==a)return a.Xa.splice(a.Xa.indexOf(c.Qc),1),b.Xa=a.Xa,ih(b),kh(b);a.Xa.splice(a.Xa.indexOf(c.zc),1,b);a.Xa.splice(a.Xa.indexOf(c.Qc),1);ih(b);return kh(a)}
function lh(a,b,c,d,e,h,g,k){function m(r,q){function t(D,H,J){if(H==D.h&&J==D.c||H==D.u&&J==D.j)return!1;H=D.me(H,J);return 0>=H.x||H.x>=D.length||-256>H.y||256<H.y?!1:!0}var B=L(q,r.h,r.c),y=L(q,r.u,r.j),C=L(r,q.h,q.c),z=L(r,q.u,q.j);if(-256>C&&256<z&&(-256>B&&256<y||256<B&&-256>y)||256<C&&-256>z&&(-256>B&&256<y||256<B&&-256>y)||t(r,q.h,q.c)||t(r,q.u,q.j)||t(q,r.h,r.c)||t(q,r.u,r.j))return!0}var l=a[c],n=d[h];l=new cc(l.h,l.c,n.h,n.c);if(0==a.ye[c]){if(0>=L(a[b],l.u,l.j)||0>=L(a[c],l.u,l.j))return g}else if(0>=
L(a[b],l.u,l.j)&&0>=L(a[c],l.u,l.j))return g;if(0==d.ye[h]){if(0>=L(d[e],l.h,l.c)||0>=L(d[h],l.h,l.c))return g}else if(0>=L(d[e],l.h,l.c)&&0>=L(d[h],l.h,l.c))return g;if(k)for(k=p(k),n=k.next();!n.done;n=k.next()){var v=p(n.value);for(n=v.next();!n.done;n=v.next())if(m(l,n.value))return g}else for(k=p(a),n=k.next();!n.done;n=k.next())if(m(l,n.value))return g;k={};k.zc=a;k.pa=b;k.Y=c;k.Qc=d;k.kj=e;k.d=h;k.Ta=l;mh(k);return k.Id>g.Id?k:g}
function mh(a){a.Id=4095-a.Ta.length*Yg;var b=ec(a.zc[a.pa],a.Ta),c=b-a.zc.rg[a.Y],d=ec(a.Ta,a.Qc[a.d]),e=d-a.Qc.rg[a.d];a.Id+=.5/Math.PI*(a.zc.ye[a.Y]-(0>b?-b:0)-(0>c?-c:0)+(a.Qc.ye[a.d]-(0>d?-d:0)-(0>e?-e:0)))*1048575}
function nh(a){if(3>a.length)return[];ih(a);if(0>=a.lh)return[a];for(var b={Id:Number.NEGATIVE_INFINITY},c=a.length-1,d=0;d<a.length;d++){for(var e=d+1,h=e+1;h<a.length;h++)b=lh(a,c,d,a,e,h,b),e=h;c=d}if(0>b.Id)return console.log("could not convex path"),[a];h=new oh(a[b.Y].h,a[b.Y].c,a[b.d].h,a[b.d].c);c=new oh(a[b.d].h,a[b.d].c,a[b.Y].h,a[b.Y].c);h.ba=c;c.ba=h;d=[];e=[];for(var g=0;g<b.Y;g++)d.push(a[g]);d.push(h);for(h=b.d;h<a.length;h++)d.push(a[h]);for(h=b.Y;h<b.d;h++)e.push(a[h]);e.push(c);
return nh(d).concat(nh(e))}function ph(a){this.V=null;this.a=Number.POSITIVE_INFINITY;this.f=Number.NEGATIVE_INFINITY;this.ha=this.floor=null;this.P=a}ph.prototype.ie=function(a,b){if(this.f<=a.a||this.a>=a.f)b.push(this);else{if(this.a<a.a){var c=new ph(this.P);c.a=this.a;c.f=a.a;c.floor=this.floor;c.ha=a.ha;b.push(c)}this.f>a.f&&(c=new ph(this.P),c.a=a.f,c.f=this.f,c.floor=a.floor,c.ha=this.ha,b.push(c))}};function hf(a,b,c){this.L=a;this.a=b;this.f=c}function jf(a,b){this.V=a;this.y=b}
function kf(a,b){this.V=a;this.y=b};function Yd(a){this.index=a;this.rf=this.Ma=-2147483648;this.gj=new Wa(this);this.mc=new Ta(bb);this.td=[];this.wa=[];this.Ug=new Va}Yd.prototype.qg=function(a){this.mc.add(a)};function dh(a,b){a=$d(a.index);switch(b){case 0:if(0==a.x)break;return Td.get(ae(a.x-1,a.y));case 1:if(0==a.y)break;return Td.get(ae(a.x,a.y-1));case 2:if(8191==a.x)break;return Td.get(ae(a.x+1,a.y));case 3:if(8191!=a.y)return Td.get(ae(a.x,a.y+1))}return null}
function ch(a){for(var b=new Ta(function(h,g){return h.P.a<g.P.a?-1:h.P.a>g.P.a?1:h.index<g.index?-1:h.index>g.index?1:0}),c=p(a.mc.elements),d=c.next();!d.done;d=c.next())b.add(d.value);a.td=[];c=Number.NEGATIVE_INFINITY;b=p(b.elements);for(d=b.next();!d.done;d=b.next()){d=d.value;if(d.P.a>c){var e=new qh(d,a);e.Qd=a;a.td.push(e)}else e.qg(d);c=e.f}a=p(a.td);for(d=a.next();!d.done;d=a.next())rh(d.value)}
Yd.prototype.evaluate=function(){this.Wg=[];this.Xg=[];for(var a=p(this.td),b=a.next();!b.done;b=a.next())b.value.evaluate()};
function eh(a){function b(t,B){return t.nc<B.nc?-1:t.nc>B.nc?1:t.P.Z<B.P.Z?-1:t.P.Z>B.P.Z?1:mi(t.ga,B.ga)}function c(t,B){var y=Nb(1/60);var C=-1;for(var z=1;z<t.length;z++){var D=Math.abs(ec(t[z-1].L,t[z].L));D<y&&(y=D,C=z)}if(0>C)B.push.apply(B,fa(t));else{y=t[C-1];z=t[C];D=y.L.Ia(y.L.h,y.L.c,z.L.u,z.L.j);var H=tc(D);y.dc&&(0>y.dc.nc?y.dc.splice(y.dc.indexOf(y.L),2,D):y.dc.splice(y.dc.indexOf(z.L.ba),2,H));y.bc&&(0<y.bc.nc?y.bc.splice(y.bc.indexOf(y.L),2,D):y.bc.splice(y.bc.indexOf(z.L.ba),2,H));
y.L=D;t.splice(C,1);c(t,B)}}function d(t){var B=Nb(1/60);var y=-1;for(var C=1;C<t.length;C++){var z=Math.abs(ec(t[C-1],t[C]));z<B&&(B=z,y=C)}if(!(0>y)){B=t[y-1];C=t[y];z=B.Ia(B.h,B.c,C.u,C.j);var D=tc(z);z.$b=B.$b;B.$b.splice(B.$b.indexOf(B),2,z);C.ba&&(D.$b=C.ba.$b,C.ba.$b.splice(C.ba.$b.indexOf(C.ba),2,D));t.splice(y-1,2,z);d(t)}}for(var e=0,h=new Ta(function(t,B){return t.y<B.y?-1:t.y>B.y?1:0}),g=p(a.Wg),k=g.next();!k.done;k=g.next()){var m=k.value,l=new Ta(b);l.y=m.y;l=h.xa(l);k=[];k.nc=m.nc;
k.P=m.P;k.ga=m.ga;k=l.xa(k);k.push(m)}g=p(h.elements);for(m=g.next();!m.done;m=g.next()){m=m.value;l=p(m.elements);for(k=l.next();!k.done;k=l.next()){var n=k.value,v=new Ta(dc),r=p(n);for(k=r.next();!k.done;k=r.next()){var q=p(k.value);for(k=q.next();!k.done;k=q.next())k=k.value,v.remove(sc(k))||v.push(k)}n.length=0;for(v=gh(v.elements);v.elements.length;){r=hh(v);if(!r)break;r.y=m.y;r.nc=n.nc;r.P=n.P;r.ga=n.ga;r.index=e++;q=p(r);for(k=q.next();!k.done;k=q.next())k.value.$b=r;n.push(r)}}m.Eg=new Ta(dc);
l=p(m.elements);for(k=l.next();!k.done;k=l.next())for(n=p(k.value),k=n.next();!k.done;k=n.next())for(v=p(k.value),k=v.next();!k.done;k=v.next())k=k.value,(r=m.Eg.remove(sc(k)))?(k.ba=r,r.ba=k):m.Eg.push(k)}e=p(a.Xg);for(g=e.next();!g.done;g=e.next())g=g.value,m=function(t,B){B=h.get({y:B});if(!B)return null;B=B.Eg.remove(t);if(!B)return null;B.$b.splice(B.$b.indexOf(B),1,t);return B.$b},l=g.L,k=tc(l),g.bc=m(l,g.a)||m(k,g.a),g.dc=m(l,g.f)||m(k,g.f);g=function(t){var B=[],y=new Ta(function(H,J){H=H[0];
J=J[0];if(H.a<J.a)return-1;if(H.a>J.a)return 1;if(H.f<J.f)return-1;if(H.f>J.f)return 1;if(H.bc)if(J.bc){if(H.bc.index<J.bc.index)return-1;if(H.bc.index>J.bc.index)return 1}else return 1;else if(J.bc)return-1;if(H.dc)if(J.dc){if(H.dc.index<J.dc.index)return-1;if(H.dc.index>J.dc.index)return 1}else return 1;else if(J.dc)return-1;if(H.length<J.length)return-1;if(H.length>J.length)return 1;for(var Z=0;Z<H.length;Z++){var U=H[Z],ca=J[Z];if(U.a<ca.a)return-1;if(U.a>ca.a)return 1;if(U.f<ca.f)return-1;if(U.f>
ca.f)return 1;U=mi(U.ga,ca.ga);if(0!=U)return U}return 0});t=p(t);for(var C=t.next();!C.done;C=t.next()){C=C.value;var z=[C],D=y.xa(z);D!=z&&D.push(C)}t={};y=p(y.elements);for(C=y.next();!C.done;t={yd:t.yd},C=y.next())for(t.yd=C.value,C={};t.yd.length;)C.Ee=function(H,J){return function(Z,U,ca){for(var wa=0;wa<H.yd.length;wa++){var aa=H.yd[wa];if(aa.L.h==ca.u&&aa.L.c==ca.j)return H.yd.splice(wa,1),Z.push(aa),aa.L.kc=Z,aa.L.ba.kc=Z,J.Ee(Z,U,aa.L);if(aa.L.u==U.h&&aa.L.j==U.c)return H.yd.splice(wa,1),
Z.unshift(aa),aa.L.kc=Z,aa.L.ba.kc=Z,J.Ee(Z,aa.L,ca)}return Z}}(t,C),z=t.yd.shift(),D=[z],z.L.kc=D,z.L.ba.kc=D,B.push(C.Ee(D,z.L,z.L)),C={Ee:C.Ee};return B}(a.Xg);e=function(){for(var t=[],B=p(h.elements),y=B.next();!y.done;y=B.next()){y=p(y.value.elements);for(var C=y.next();!C.done;C=y.next()){C=p(C.value);for(var z=C.next();!z.done;z=C.next()){z=z.value;for(var D=function(wa,aa){return wa.kc||aa.kc?!1:wa.ba?aa.ba?wa.ba.$b==aa.ba.$b:!1:aa.ba?!1:!0},H=0,J=z[z.length-1],Z=z[0];H<z.length&&(Z=z[H],
D(J,Z));H++,J=Z);if(H==z.length){D=[];J=p(z);for(z=J.next();!z.done;z=J.next())z=z.value,z.kc=D,z.ba&&(z.ba.kc=D),D.push(z);t.push(D)}else{z.unshift.apply(z,fa(z.splice(H)));H=[];var U=null;J=z[0];H.push(U=[]);U.push(J);for(var ca=1;ca<z.length;ca++,J=Z)Z=z[ca],D(J,Z)||H.push(U=[]),U.push(Z);D=p(H);for(z=D.next();!z.done;z=D.next())if(J=z.value,!J[0].kc){Z=p(J);for(z=Z.next();!z.done;z=Z.next())z=z.value,z.kc=J,z.ba&&(z.ba.kc=J);t.push(J)}}}}}return t}();a.ei=[];m=p(g);for(g=m.next();!g.done;g=m.next())c(g.value,
a.ei);a.di=[];e=p(e);for(g=e.next();!g.done;g=e.next())d(g.value);e=p(h.elements);for(m=e.next();!m.done;m=e.next())for(g=p(m.value.elements),k=g.next();!k.done;k=g.next())for(m=p(k.value),k=m.next();!k.done;k=m.next())l=k.value,l.fi=nh(l),a.di.push(l)}
function fh(a){function b(v,r,q){var t=[],B=new jf(r,v.y);B.Z=v.P.Z-1;h.push(B);for(B=0;B<r.length;B++){var y=new Fc(r[B].c,v.y,r[B].h);Nc(y,v.ga.color);Oc(y,y.z/4E5,y.x/4E5);y.Ob=32767;t.push(y)}q.kd.push(t);Ge.push(t);e(oe[v.P.Z-1],t,v.ga)}function c(v,r,q){var t=[],B=new kf(r,v.y);B.Z=v.P.Z-1;h.push(B);for(B=r.length-1;0<=B;B--){var y=new Fc(r[B].j,v.y,r[B].u);Nc(y,v.ga.color);Oc(y,-y.z/4E5,y.x/4E5);y.Ob=-32767;t.push(y)}q.kd.push(t);Ge.push(t);e(oe[v.P.Z-1],t,v.ga)}function d(v,r,q){var t=bh(Infinity,
v.P.Z,r.ga.fa,r.ga.T),B=[],y=v.L.h/4E5+v.L.c/4E5,C=v.L.u/4E5+v.L.j/4E5;var z=new Fc(v.L.j,r.a,v.L.u);Nc(z,r.ga.color);Oc(z,C,-z.y/4E5);z.Db=q.x;z.Cb=q.y;B.push(z);z=new Fc(v.L.c,r.a,v.L.h);Nc(z,r.ga.color);Oc(z,y,-z.y/4E5);z.Db=q.x;z.Cb=q.y;B.push(z);z=new Fc(v.L.c,r.f,v.L.h);Nc(z,r.ga.color);Oc(z,y,-z.y/4E5);z.Db=q.x;z.Cb=q.y;B.push(z);z=new Fc(v.L.j,r.f,v.L.u);Nc(z,r.ga.color);Oc(z,C,-z.y/4E5);z.Db=q.x;z.Cb=q.y;B.push(z);t.kd.push(B);Ge.push(B);e(oe[v.P.Z-1],B,r.ga)}function e(v,r,q){var t=0,B=
r[0],y=Qc(r[1],B,new G(0,0,0));y.x/=1E5;y.y/=1E5;y.z/=1E5;for(var C=2;C<r.length;C++){var z=Qc(r[C],B,new G(0,0,0));z.x/=1E5;z.y/=1E5;z.z/=1E5;t+=Xb(y,z,new G(0,0,0)).length();y=z}r=.5*t;t=q.fa;q=q.color;B=(t.Ic.r-t.Ic.Ca)/255;q=new P(q.r*B+t.Ic.Ca,q.Ca*B+t.Ic.Ca,q.Y*B+t.Ic.Ca,t.Ic.pa);v.Va.x+=q.r*r;v.Va.y+=q.Ca*r;v.Va.z+=q.Y*r;v.Mb+=r}a.wa=[];for(var h=a.wa,g=p(a.di),k=g.next();!k.done;k=g.next())if(k=k.value,0<k.nc){for(var m=bh(k.y,k.P.Z,k.ga.fa,k.ga.T),l=p(k.fi),n=l.next();!n.done;n=l.next())b(k,
n.value,m);oe[k.P.Z-1].cells.push(a)}else for(m=bh(Infinity,k.P.Z,k.ga.fa,k.ga.T),l=p(k.fi),n=l.next();!n.done;n=l.next())c(k,n.value,m);a=p(a.ei);for(k=a.next();!k.done;k=a.next())for(g=k.value,k=new hf(g.L,g.a,g.f),k.Z=g[0].P.Z-1,h.push(k),k=new O(g.L.c-g.L.j,g.L.u-g.L.h),k.na(32767),n=p(g),m=n.next();!m.done;m=n.next())d(g,m.value,k)}function qh(a,b){this.mc=[a];this.a=a.P.a;this.f=a.P.f;this.Qd=b;this.lc=[];this.V=[]}qh.prototype.qg=function(a){a.P.f>this.f&&(this.f=a.P.f);this.mc.push(a)};
function rh(a){function b(g,k){return g.P.index<k.P.index?-1:g.P.index>k.P.index?1:0}for(var c=p(a.mc),d=c.next();!d.done;d=c.next()){d=p(d.value.V);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=e.$();tc(h);e.nf&&(h.qb=[e]);h.Pc=[a.V];a.V.push(h)}}Vg(a.V.slice(),!0);a=p(a.V);for(e=a.next();!e.done;e=a.next())c=e.value,c.qb&&kb(c.qb,b),c.ba.qb&&kb(c.ba.qb,b)}
qh.prototype.evaluate=function(){for(var a=gh(this.V,!0),b=[],c=[];a.elements.length;){var d=hh(a);d&&(hc(d)?c.push(d):(d.Xa=[],b.push(d)))}a=p(c);for(c=a.next();!c.done;c=a.next())jh(c.value,b);a=[];b=p(b);for(c=b.next();!c.done;c=b.next())if(d=c.value,0==d.Xa.length)a.push(d);else{ih(d);var e=p(d.Xa);for(c=e.next();!c.done;c=e.next())ih(c.value);a.push(kh(d))}b=[];a=p(a);for(c=a.next();!c.done;c=a.next())b=b.concat(nh(c.value));this.lc=[];a=p(b);for(c=a.next();!c.done;c=a.next())this.lc.push(new ni(c.value,
this))};
function ni(a,b){this.index=oi++;this.V=a;this.ae=b;a=new Ta(pi);for(var c=new O(0,0),d=1/this.V.length,e=p(this.V),h=e.next();!h.done;h=e.next())h=h.value,h.lc=[this],c.x+=h.u*d,c.y+=h.j*d;b=p(b.mc);for(d=b.next();!d.done;d=b.next())d=d.value,0>=kc(c.x,c.y,d.V)||a.add(d);this.mc=a.elements;qi(this);this.ai=[];a=Number.NEGATIVE_INFINITY;c=p(this.qd);for(b=c.next();!b.done;b=c.next())if(b=b.value,b.P.add){if(b.a>a){var g=new ph(b.P);g.a=b.a;g.f=b.f;g.floor=b.floor;g.ha=b.ha;g.V=this.V;this.ai.push(g)}else g.f=b.f,
g.ha=b.ha;a=g.f}}var oi=-2147483648;
function qi(a){var b=new ph;b.a=-2147483648;b.f=2147483647;b.P={};a.qd=[b];b=p(a.mc);for(var c=b.next();!c.done;c=b.next()){c=c.value;var d=new ph(c.P);d.a=c.P.a;d.f=c.P.f;d.floor=c.P.floor;d.ha=c.P.ha;c=[d];d=p(a.qd);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=[];c=p(c);for(var g=c.next();!g.done;g=c.next())g=g.value,g.P.Dd(e.P)?h.push(g):g.ie(e,h);c=h}d=p(c);for(g=d.next();!g.done;g=d.next()){h=g.value;g=[];var k=p(a.qd);for(e=k.next();!e.done;e=k.next())e.value.ie(h,g);a.qd=g}a.qd.push.apply(a.qd,
fa(c))}kb(a.qd,function(m,l){return m.a<l.a?-1:m.a>l.a?1:0})}
ni.prototype.evaluate=function(){for(var a=p(this.ai),b=a.next();!b.done;b=a.next()){b=b.value;if(b.floor){for(var c=[],d=p(this.V),e=d.next();!e.done;e=d.next())e=e.value,e=e.$(),c.push(e);c.y=b.a;c.ga=b.floor;c.nc=1;c.P=b.P;this.ae.Qd.Wg.push(c)}if(b.ha){c=[];d=p(this.V);for(e=d.next();!e.done;e=d.next())e=e.value,e=e.$(),c.push(e);c.y=b.f;c.ga=b.ha;c.nc=-1;c.P=b.P;this.ae.Qd.Wg.push(c)}}a=[];b=[];e=p(this.qd);for(var h=e.next();!h.done;h=e.next())c=h.value,(c.P.add?a:b).push(c);b=p(this.V);for(e=
b.next();!e.done;e=b.next()){e=e.value;d=function(q,t){var B=[];q=p(q);for(var y=q.next();!y.done;y=q.next()){var C=y.value,z=p(t);for(y=z.next();!y.done;y=z.next()){var D=y.value,H=[];C.xa(D.a,D.f,H);var J=p(H);for(y=J.next();!y.done;y=J.next())y.value.P=D.P;B.push.apply(B,fa(H))}}return B};var g=function(q,t){t=p(t);for(var B=t.next();!B.done;B=t.next()){B=B.value;var y=[];q=p(q);for(var C=q.next();!C.done;C=q.next())C.value.ie(B.a,B.f,y);q=y}return q};h=function(q,t,B){var y=[];if(!q.qb)return y;
t=p(t);for(var C=t.next();!C.done;C=t.next()){C=C.value;var z=q.qb;var D=C,H=pi,J=ib(z,D,H);if(z=J==z.length||0!=H.call(null,D,z[J])?null:z[J]){C=[new gg(C.P.a,C.P.f,z)];z=p(y);for(D=z.next();!D.done;D=z.next()){D=D.value;H=[];C=p(C);for(J=C.next();!J.done;J=C.next())J=J.value,J.Be.P.Dd(D.Be.P)?H.push(J):J.ie(D.a,D.f,H);C=H}z=p(C);for(J=z.next();!J.done;J=z.next()){H=J.value;J=[];y=p(y);for(D=y.next();!D.done;D=y.next())D.value.ie(H.a,H.f,J);y=J}y.push.apply(y,fa(C))}}for(q=0;q<y.length;q++)y[q].Be.P.add!=
B&&y.splice(q--,1);return y};c=function(q){for(var t=q[0],B=1;B<q.length;B++)if(mi(t.ga,q[B].ga))t=q[B];else{var y=t.$(t.a,q[B].f);q.splice(--B,2,y)}};var k=h(e,this.mc,!0),m=[],l=[],n=[];if(e.ba.lc)for(var v=p(e.ba.lc),r=v.next();!r.done;r=v.next())if(r=r.value,r.ae.f>this.ae.a&&r.ae.a<this.ae.f){m=h(e.ba,r.mc,!1);v=p(r.qd);for(h=v.next();!h.done;h=v.next())h=h.value,(h.P.add?l:n).push(h);break}k=g(k,l);m=g(m,l);k=d(k,a);m=d(m,a);m=g(m,k);g=m.concat(k);if(g.length){d=[];k=p(g);for(g=k.next();!g.done;g=
k.next())if(m=g.value,m.Be.nf){l=[];n=p(m.Be.nf);for(g=n.next();!g.done;g=n.next())g.value.xa(m.a,m.f,l);n=p(l);for(g=n.next();!g.done;g=n.next())g.value.P=m.P;d.push.apply(d,fa(l))}kb(d,function(q,t){return q.a<t.a?-1:q.a>t.a?1:0});k=void 0;m=Number.NEGATIVE_INFINITY;d=p(d);for(g=d.next();!g.done;g=d.next())g=g.value,g.a>m?(k&&c(k),k=[g],k.L=e.$(),k.P=g.P,k.a=g.a,k.f=g.f,this.ae.Qd.Xg.push(k)):(k.push(g),k.f=g.f),m=g.f;k&&c(k)}}};
function oh(a,b,c,d){cc.call(this,a,b,c,d);this.index=oh.index++;this.ba=null}oh.index=-2147483648;oh.prototype=Object.create(cc.prototype);oh.prototype.constructor=oh;oh.prototype.Ia=function(a,b,c,d){return new oh(a,b,c,d)};
oh.prototype.replace=function(a){cc.prototype.replace.call(this,a);if(this.lc)for(var b=0;b<a.length;b++){var c=a[b],d=this.lc;if(c.lc)for(var e=0;e<d.length;e++){var h=d[e];0>c.lc.indexOf(h)&&c.lc.push(h)}else c.lc=d.slice()}if(this.qb)for(a=p(a),b=a.next();!b.done;b=a.next())if(b=b.value,b.qb)for(c=p(this.qb),d=c.next();!d.done;d=c.next())d=d.value,0<=b.qb.indexOf(d)||b.qb.push(d);else b.qb=this.qb.slice()};function gg(a,b,c){this.ga=new ri;this.a=a;this.f=b;this.Be=c;this.P=null}
gg.prototype.$=function(a,b){a=new gg(a,b,this.Be);a.ga=this.ga;a.P=this.P;return a};gg.prototype.ie=function(a,b,c){this.f<=a||this.a>=b?c.push(this):(this.a<a&&c.push(this.$(this.a,a)),this.f>b&&c.push(this.$(b,this.f)))};gg.prototype.xa=function(a,b,c){this.f<=a||this.a>=b||(this.f<=b&&this.a>=a?c.push(this):(b=b<this.f?b:this.f,a=a>this.a?a:this.a,c.push(this.$(a,b))))};function ri(){this.fa=u.i.O.get("concr01");this.T=bg;this.color=Bc;this.y=this.x=0}
function mi(a,b){if(a.fa.name<b.fa.name)return-1;if(a.fa.name>b.fa.name)return 1;var c=Dd(a.T,b.T);return 0!=c?c:a.color.r<b.color.r?-1:a.color.r>b.color.r?1:a.color.Ca<b.color.Ca?-1:a.color.Ca>b.color.Ca?1:a.color.Y<b.color.Y?-1:a.color.Y>b.color.Y?1:a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0};function Mg(){this.index=si++;this.add=!0;this.V=null;this.a=Number.POSITIVE_INFINITY;this.f=Number.NEGATIVE_INFINITY;this.floor=new ri;this.ha=new ri;this.color=Bc;this.nb=-1;this.mc=[]}var si=-2147483648,eg=new P(192,192,192,255),jg=new P(64,64,64,255),hg=new P(160,160,160,255),fg=new P(160,160,160,255);
function Ng(a,b){a.floor&&(a.floor.color=eg);a.ha&&(a.ha.color=fg);a.V=[];for(var c=[],d=0;d<b.length;d++)c.push(Xg.$a(b[d].x,b[d].y));b=c;var e=b[b.length-1];for(c=0;c<b.length;c++)d=b[c],e=new oh(e.x,e.y,d.x,d.y),e.P=a,e.nf=a.je(),a.V.push(e),e=d}Mg.prototype.je=function(){var a=new gg(this.a,this.f);a.ga.color=this.color;return[a]};
Mg.prototype.stroke=function(){if(hc(this.V)){console.trace();debugger}if(this.f<=this.a){console.trace();debugger}for(var a=[],b=p(this.V),c=b.next();!c.done;c=b.next()){c=c.value;var d=c.$();d.qb=[c.nf];a.push(d);tc(d);delete d.ba.qb}b=new nc;c=p(a);for(d=c.next();!d.done;d=c.next())d=d.value,b.xa(d.u,d.j);d=b.l&-524288;c=b.a&-524288;d+=524288;for(c+=524288;d<b.s;){var e=new oh(d,b.a,d,b.f);tc(e);a.push(e);d+=524288}for(;c<b.f;)d=new oh(b.l,c,b.s,c),tc(d),a.push(d),c+=524288;a=Vg(a.slice(),!0);
a=gh(a);for(b={};a.elements.length;){a:if(c=function(g){return function(){for(var k=p(g.Wc),m=k.next();!m.done;m=k.next())if(m.value.qb)return!0;return!1}}(b),b.Wc=hh(a),b.Wc&&!hc(b.Wc)){if(!c()&&(c=mc(b.Wc),0>=kc(c.x,c.y,this.V)))break a;d=new ti(this);e=p(b.Wc);for(c=e.next();!c.done;c=e.next()){c=c.value;var h=c.$();tc(h);h.P=this;c.qb&&(h.nf=c.qb[0]);d.V.push(h)}d.stroke(Xd(ae(b.Wc.bound.l+2147483648>>>19,b.Wc.bound.a+2147483648>>>19)))}b={Wc:b.Wc}}};
Mg.prototype.$=function(){var a=new Mg;a.add=this.add;a.a=this.a;a.f=this.f;a.floor=this.floor;a.ha=this.ha;a.color=this.color;a.nb=this.nb;return a};Mg.prototype.Dd=function(){return!0};function ti(a){this.index=ui++;this.P=a;this.V=[];this.Qd=null}var ui=-2147483648;function pi(a,b){return a.P.index<b.P.index?-1:a.P.index>b.P.index?1:0}ti.prototype.stroke=function(a){if(hc(this.V)){console.trace();debugger}this.P.mc.push(this);this.Qd=a;this.Qd.qg(this)};var vi;
function Tg(){function a(A,F){if(A.ma.S<F.ma.S)return-1;if(A.ma.S>F.ma.S)return 1;if(A.ma.M<F.ma.M)return-1;if(A.ma.M>F.ma.M)return 1;A=L(F.ma,A.ma.h,A.ma.c);return 0>A?-1:0<A?1:0}function b(A,F){A=A[0];F=F[0];return A.y<F.y?-1:A.y>F.y?1:0}function c(A){if(!(2>A.length)){var F=2.197265625E7;var I=-1;for(var E,K,M=1;M<A.length;M++)E=A[M-1],K=A[M],E=new cc(E.h,E.c,K.u,K.j),K=(E.length>>3)*(L(E,K.h,K.c)>>3),K>=F||-2E3>=K||(F=K,I=M);0>I||(E=A[I-1],K=A[I],F=K.Ia(E.h,E.c,K.u,K.j),M=K.length/(E.length+K.length),
F.weight=E.weight*(1-M)+K.weight*M,A.splice(I-1,2,F),c(A))}}function d(A){if(!(2>A.length)){var F=2.197265625E7;var I=-1;for(var E=A[A.length-1],K,M=0;M<A.length;M++,E=K)K=A[M],E=new cc(E.h,E.c,K.u,K.j),E=(E.length>>3)*(L(E,K.h,K.c)>>3),E>=F||-2E3>=E||(F=E,I=M);0>I||(A.unshift.apply(A,fa(A.splice(I))),E=A.pop(),K=A.shift(),F=K.Ia(E.h,E.c,K.u,K.j),I=K.length/(E.length+K.length),F.weight=E.weight*(1-I)+K.weight*I,A.unshift(F),d(A))}}function e(A){function F(N,Q){var Ba=qc(N),V=qc(Q),Fa=-ec(N,Q)+Math.PI;
if(Fa<Nb(165)){var S=new O(N.u,N.j);S.round();S.X=N.weight;S.ja=255;E.push(S);var Ga=new O(N.u-Ba.y,N.j+Ba.x);Ga.round();Ga.X=S.X;Ga.ja=0;K.push(Ga);I(N);var sa=new O(Q.h,Q.c);sa.round();sa.X=Q.weight;sa.ja=255;E.push(sa);var yb=new O(Q.h-V.y,Q.c+V.x);yb.round();yb.X=sa.X;yb.ja=0;K.push(yb);Fa<=Nb(90)||(N=new O(N.u+Ba.x,N.j+Ba.y),N.round(),N.X=S.X,N.ja=0,M.push([Ga,S,N]),Q=new O(Q.h-V.x,Q.c-V.y),Q.round(),Q.X=sa.X,Q.ja=0,M.push([Q,sa,yb]))}else sa=new O(Q.h,Q.c),sa.X=(N.weight+Q.weight)*(1-Fa/Math.Fe),
sa.ja=255,E.push(sa),Fa<=Nb(195)?(V=new O(-Ba.y-V.y,Ba.x+V.x),V.scale(5E9/V.se()),V.x+=Q.h,V.y+=Q.c,V.round(),V.X=sa.X,V.ja=0,K.push(V),I(N)):(yb=new O(N.u-Ba.y,N.j+Ba.x),yb.round(),yb.X=sa.X,yb.ja=0,K.push(yb),I(N),Q=new O(Q.h-V.y,Q.c+V.x),Q.round(),Q.X=sa.X,Q.ja=0,K.push(Q),M.push([yb,sa,Q]))}function I(N){if(T)T=!1;else{var Q=K[K.length-2],Ba=E[E.length-2],V=E[E.length-1],Fa=K[K.length-1];if(Ba.X!=N.weight&&V.X!=N.weight)if(1E5<N.length){var S=N.$a(5E4,0);S.round();S.X=N.weight;S.ja=255;var Ga=
N.$a(N.length-5E4,0);Ga.round();Ga.X=N.weight;Ga.ja=255;M.push([Q,Ba,S]);M.push([Q,S,Ga,Fa]);M.push([Ga,V,Fa])}else if(S=new O(N.h+N.u>>1,N.c+N.j>>1),S.round(),1E5>N.length){var sa=5E4/N.length-.5;Ga=N.length/1E5;S.X=.5*(Ba.X+V.X)*(1-Ga)+N.weight*Ga;S.ja=255;sa=new O(S.x+(N.c-N.j)*sa,S.y+(N.u-N.h)*sa);sa.X=S.X;sa.ja=N.weight*Ga*255;sa.round();M.push([Q,Ba,S,sa]);M.push([Q,sa,Fa]);M.push([sa,S,V,Fa])}else S.X=N.weight,S.ja=255,M.push([Q,Ba,S]),M.push([Q,S,Fa]),M.push([S,V,Fa]);else Ba.X!=N.weight?
5E4<N.length?(S=N.$a(5E4,0),S.round(),S.X=N.weight,S.ja=255,M.push([Q,Ba,S]),M.push([Q,S,V,Fa])):M.push([Q,Ba,V,Fa]):V.X!=N.weight?5E4<N.length?(S=N.$a(N.length-5E4,0),S.round(),S.X=N.weight,S.ja=255,M.push([Q,Ba,S,Fa]),M.push([S,V,Fa])):M.push([Ba,V,Fa,Q]):M.push([Q,Ba,V,Fa])}}var E=[],K=[],M=[],T=!1;if(A[0].h==A[A.length-1].u&&A[0].c==A[A.length-1].j){T=!0;F(A[A.length-1],A[0]);M=[];for(var Y=1;Y<A.length;Y++)F(A[Y-1],A[Y]);F(A[A.length-1],A[0])}else{var da=A[0],qa=qc(da);Y=new O(da.h,da.c);Y.round();
Y.X=da.weight;Y.ja=255;E.push(Y);da=new O(da.h-qa.y,da.c+qa.x);da.round();da.X=Y.X;da.ja=0;K.push(da);for(Y=1;Y<A.length;Y++)F(A[Y-1],A[Y]);A=A[A.length-1];da=qc(A);Y=new O(A.u,A.j);Y.round();Y.X=A.weight;Y.ja=255;E.push(Y);da=new O(A.u-da.y,A.j+da.x);da.round();da.X=Y.X;da.ja=0;K.push(da);I(A)}return M}function h(A){var F=new Ta(bb);A=p(A);for(var I=A.next();!I.done;I=A.next())I=I.value,je(I.bound.F-5E4,I.bound.l-5E4,I.bound.K+5E4,I.bound.s+5E4,F);return F.elements}function g(A){var F=new Ta(dc);
A=p(A);for(var I=A.next();!I.done;I=A.next())I=I.value,F.remove(sc(I))||F.add(I);return F.elements}function k(A){var F=gh(A,!1);A=[];for(var I=[];F.elements.length;){var E=hh(F);E?hc(E)?I.push(E):(E.Xa=[],A.push(E)):console.log("failed circuit")}I=p(I);for(F=I.next();!F.done;F=I.next())jh(F.value,A);I=[];A=p(A);for(F=A.next();!F.done;F=A.next())if(E=F.value,0==E.Xa.length)I.push(E);else{ih(E);var K=p(E.Xa);for(F=K.next();!F.done;F=K.next())ih(F.value);I.push(kh(E))}return I}function m(A,F,I){var E=
gh(A,!1);A=[];for(var K=new Ta(Pc);E.elements.length;){a:{var M=E;var T=[];T.bound=new nc;var Y=0,da=M.elements[Y],qa=da.elements.pop();da.elements.length||M.elements.splice(Y,1);if(qa)for(T.bound.xa(qa.h,qa.c);;){T.push(qa);T.bound.xa(qa.u,qa.j);if(qa.u==T[0].h&&qa.j==T[0].c)break a;Y=M.contains(new O(qa.u,qa.j));if(0>Y)break a;da=M.elements[Y];qa=Ua(da,sc(qa))-1;0>qa&&(qa+=da.elements.length);qa=da.elements.splice(qa,1)[0];da.elements.length||M.elements.splice(Y,1)}else T=null}A.push(T);if(T[0].h!=
T[T.length-1].u||T[0].c!=T[T.length-1].j)M=T[0],M.Yf=T,T=new Ta(uc),T.x=M.h,T.y=M.c,T=K.xa(T),T.add(M)}for(E=0;E<A.length;E++)if(M=A[E],M[0].h!=M[M.length-1].u||M[0].c!=M[M.length-1].j)T=M[M.length-1],Y=K.contains(new O(T.u,T.j)),0>Y||(da=K.elements[Y],T=Ua(da,sc(T))-1,0>T&&(T+=da.elements.length),T=da.elements.splice(T,1)[0],da.elements.length||K.elements.splice(Y,1),Y=A.indexOf(T.Yf),A.splice(Y,1),Y<E&&E--,M.push.apply(M,fa(T.Yf)),M.bound.Th(T.Yf.bound),E--);K=p(A);for(E=K.next();!E.done;E=K.next())delete E.value.Yf;
K=p(A);for(E=K.next();!E.done;E=K.next())E=E.value,E[0].h==E[E.length-1].u&&E[0].c==E[E.length-1].j?d(E):c(E);K=[];A=p(A);for(E=A.next();!E.done;E=A.next())K=K.concat(e(E.value));A=[];K=p(K);for(E=K.next();!E.done;E=K.next())for(E=E.value,M=p(F),Y=M.next();!Y.done;Y=M.next()){a:for(T=E,Y=p(Y.value),da=Y.next();!da.done;da=Y.next()){da=da.value;qa=[];for(var N=T[T.length-1],Q=L(da,N.x,N.y),Ba=0;Ba<T.length;Ba++){var V=T[Ba],Fa=L(da,V.x,V.y);if(0<Fa){if(0>Q){Q/=Q-Fa;var S=1-Q,Ga=new O(N.x*S+V.x*Q,N.y*
S+V.y*Q);Ga.X=N.X*S+V.X*Q;Ga.ja=N.ja*S+V.ja*Q;qa.push(Ga)}qa.push(V)}else 0>Fa?0<Q&&(Q/=Q-Fa,S=1-Q,Ga=new O(N.x*S+V.x*Q,N.y*S+V.y*Q),Ga.X=N.X*S+V.X*Q,Ga.ja=N.ja*S+V.ja*Q,qa.push(Ga)):qa.push(V);N=V;Q=Fa}if(3>qa.length){T=null;break a}T=qa}T&&A.push(T)}F=p(A);for(E=F.next();!E.done;E=F.next()){A=E.value;for(K=0;K<A.length;K++)E=A[K],E.index?A[K]=E.index:(E.index=vi.eb.length,A[K]=E.index,M=I(E),M.X=225*E.X,M.ja=E.ja,vi.eb.push(M));l+=3*(A.length-2);vi.kd.push(A)}}vi=new Ke;vi.T=new ld;vi.T.name="creaseShading";
vi.T.qa=1;vi.T.Kc=new P(0,0,0,127.5);vi.w=u.i.ia.get("creaseShading");for(var l=0,n={},v=p(Td.elements),r=v.next();!r.done;n={Nd:n.Nd},r=v.next()){var q=r.value;q.yg=l;n.Nd=new Ta(a);for(var t=new Ta(b),B=new Ta(b),y={},C=p(q.wa),z=C.next();!z.done;y={Yb:y.Yb,pc:y.pc,lg:y.lg},z=C.next())if(y.pc=z.value,y.pc instanceof hf){y.lg=function(A){return function(F){var I=F.ma,E=Math.atan2(I.M,I.S)-Math.atan2(A.Yb.M,A.Yb.S);if(Math.abs(E>Math.PI?E-Math.Fe:E<-Math.PI?E+Math.Fe:E)>Nb(5))return!1;E=I.weight/
(I.weight+1);var K=1-E;E=I.Ia(Math.round(I.h*E+A.Yb.h*K),Math.round(I.c*E+A.Yb.c*K),Math.round(I.u*E+A.Yb.u*K),Math.round(I.j*E+A.Yb.j*K));if(500<=Math.abs(L(E,A.Yb.h,A.Yb.c))||500<=Math.abs(L(E,A.Yb.u,A.Yb.j))||500<=Math.abs(L(E,I.h,I.c))||500<=Math.abs(L(E,I.u,I.j)))return!1;F.ma=E;E.weight=I.weight+1;F.push(A.pc);return!0}}(y);var D=function(A,F){return function(){for(var I=p(A.Nd.elements),E=I.next();!E.done;E=I.next())if(F.lg(E.value))return!0;return!1}}(n,y);y.Yb=sc(y.pc.L);if(!D()){var H=[y.pc];
H.ma=y.Yb;H.ma.weight=1;var J=n.Nd.xa(H);J!=H&&J.push(y.pc)}}else{var Z=[y.pc],U=void 0;y.pc instanceof jf?U=t.xa(Z):y.pc instanceof kf&&(U=B.xa(Z));U!=Z&&U.push(y.pc)}n.Nd=n.Nd.elements;t=t.elements;B=B.elements;for(var ca={},wa=p(n.Nd),aa=wa.next();!aa.done;ca={Ab:ca.Ab,xd:ca.xd},aa=wa.next()){var xa=aa.value;ca.xd=rc(xa.ma,-1E3);xa.ma=xa.ma.Ia(xa.ma.h+ca.xd.x,xa.ma.c+ca.xd.y,xa.ma.u+ca.xd.x,xa.ma.j+ca.xd.y);ca.Ab=xa.ma;var ea=[[],[],[],[]],Ac=[],sh=p(xa);for(z=sh.next();!z.done;z=sh.next()){var dd=
z.value,th=function(A,F,I){A.h<F.l||A.h>F.s||A.j>F.f||A.c<F.a?I.push(A):(A.j<F.a&&I.push(A.Ia(A.h,F.a,A.u,A.j)),A.c>F.f&&I.push(A.Ia(A.h,A.c,A.u,F.f)))},uh=function(A,F,I){A.c<F.a||A.c>F.f||A.u>F.s||A.h<F.l?I.push(A):(A.u<F.l&&I.push(A.Ia(F.l,A.c,A.u,A.j)),A.h>F.s&&I.push(A.Ia(A.h,A.c,F.s,A.j)))},vh=function(A,F,I){A.h<F.l||A.h>F.s||A.c>F.f||A.j<F.a?I.push(A):(A.c<F.a&&I.push(A.Ia(A.h,A.c,A.u,F.a)),A.j>F.f&&I.push(A.Ia(A.h,F.f,A.u,A.j)))},wh=function(A,F,I){A.c<F.a||A.c>F.f||A.h>F.s||A.u<F.l?I.push(A):
(A.h<F.l&&I.push(A.Ia(A.h,A.c,F.l,A.j)),A.u>F.s&&I.push(A.Ia(F.s,A.c,A.u,A.j)))},ta=new nc;ta.l=Math.round(ca.Ab.getParameter(dd.L.u,dd.L.j));ta.s=Math.round(ca.Ab.getParameter(dd.L.h,dd.L.c));ta.a=dd.a;ta.f=dd.f;for(var zb=[[],[],[],[]],xh=p(ea[0]),na=xh.next();!na.done;na=xh.next())wh(na.value,ta,zb[0]);var yh=p(ea[1]);for(na=yh.next();!na.done;na=yh.next())vh(na.value,ta,zb[1]);var zh=p(ea[2]);for(na=zh.next();!na.done;na=zh.next())uh(na.value,ta,zb[2]);var Ah=p(ea[3]);for(na=Ah.next();!na.done;na=
Ah.next())th(na.value,ta,zb[3]);ea=zb;for(var Sb=[[new cc(ta.l,ta.a,ta.s,ta.a)],[new cc(ta.s,ta.a,ta.s,ta.f)],[new cc(ta.s,ta.f,ta.l,ta.f)],[new cc(ta.l,ta.f,ta.l,ta.a)]],Bh=p(Ac),Tf=Bh.next();!Tf.done;Tf=Bh.next()){var ze=Tf.value;zb=[[],[],[],[]];var Ch=p(Sb[0]);for(na=Ch.next();!na.done;na=Ch.next())wh(na.value,ze,zb[0]);var Dh=p(Sb[1]);for(na=Dh.next();!na.done;na=Dh.next())vh(na.value,ze,zb[1]);var Eh=p(Sb[2]);for(na=Eh.next();!na.done;na=Eh.next())uh(na.value,ze,zb[2]);var Fh=p(Sb[3]);for(na=
Fh.next();!na.done;na=Fh.next())th(na.value,ze,zb[3]);Sb=zb}ea[0].push.apply(ea[0],fa(Sb[0]));ea[1].push.apply(ea[1],fa(Sb[1]));ea[2].push.apply(ea[2],fa(Sb[2]));ea[3].push.apply(ea[3],fa(Sb[3]));Ac.push(ta)}ea=ea[0].concat(ea[1].concat(ea[2].concat(ea[3])));xa.length=0;for(var pj=k(ea),Uf=[],Gh=p(pj),Ab=Gh.next();!Ab.done;Ab=Gh.next()){for(var Hh=Ab.value,Kd=Hh.slice(),Ld=new nc,Ih=p(Hh),Bb=Ih.next();!Bb.done;Bb=Ih.next()){var Jh=Bb.value;Ld.xa(Jh.u,Jh.j)}var Kh=ca.Ab.$a(Ld.l,0),Lh=ca.Ab.$a(Ld.s,
0);Kd.bound=new bd;Kd.bound.xa(Kh.y,Ld.a,Kh.x);Kd.bound.xa(Lh.y,Ld.f,Lh.x);Uf.push.apply(Uf,fa(nh(Kd)));xa.push(Kd)}var qj=h(xa);ea=[];var Mh=p(qj);for(r=Mh.next();!r.done;r=Mh.next())for(var Nh=p(r.value.wa),Cb=Nh.next();!Cb.done;Cb=Nh.next()){var ob=Cb.value;if(ob instanceof kf){var Ic=pc(ca.Ab,ob.V);if(Ic){Ic[0]=Math.round(Ic[0]);Ic[1]=Math.round(Ic[1]);var Oh=new cc(Ic[1],ob.y,Ic[0],ob.y);Oh.weight=1;ea.push(Oh)}}else if(ob instanceof jf){var Jc=pc(ca.Ab,ob.V);if(Jc){Jc[0]=Math.round(Jc[0]);Jc[1]=
Math.round(Jc[1]);var Ph=new cc(Jc[0],ob.y,Jc[1],ob.y);Ph.weight=1;ea.push(Ph)}}else{var Ae=ca.Ab,ic=ob.L,Tb=L(Ae,ic.h,ic.c),Kc=L(Ae,ic.u,ic.j),Vf=Ae.getParameter(ic.h,ic.c),Wf=Ae.getParameter(ic.u,ic.j);if(Tb<Kc){if(!(-256>Kc||256<Tb)){var Qh=Tb/(Tb-Kc),Xf=Math.round(Vf*(1-Qh)+Wf*Qh),Rh=Math.atan2(-Tb,Vf-Xf);if(!(Rh<Nb(15))){var Be=new cc(Xf,ob.a,Xf,ob.f);Be.weight=(180*Rh/Math.PI-15)/75;1<Be.weight&&(Be.weight=1);ea.push(Be)}}}else if(Tb>Kc&&!(-256>Tb)&&!(256<Kc)){var Sh=Tb/(Tb-Kc),Yf=Math.round(Vf*
(1-Sh)+Wf*Sh),Th=Math.atan2(-Kc,Yf-Wf);if(!(Th<Nb(15))){var Ce=new cc(Yf,ob.f,Yf,ob.a);Ce.weight=(180*Th/Math.PI-15)/75;1<Ce.weight&&(Ce.weight=1);ea.push(Ce)}}}}m(ea,Uf,function(A){return function(F){var I=Math.round(F.x);F=Math.round(F.y);I/=A.Ab.length;return new Fc(Math.round(A.Ab.c+(A.Ab.j-A.Ab.c)*I)-A.xd.y,F,Math.round(A.Ab.h+(A.Ab.u-A.Ab.h)*I)-A.xd.x)}}(ca))}var Lc={},Uh=p(t);for(aa=Uh.next();!aa.done;Lc={de:Lc.de},aa=Uh.next()){var Md=aa.value;Lc.de=Md[0].y;var ed=[],Vh=p(Md);for(z=Vh.next();!z.done;z=
Vh.next())ed.push.apply(ed,fa(z.value.V));Md.length=0;var rj=k(g(ed)),Zf=[],Wh=p(rj);for(Ab=Wh.next();!Ab.done;Ab=Wh.next()){var Xh=Ab.value,Ub=Xh.slice(),Nd=new nc,Yh=p(Xh);for(Bb=Yh.next();!Bb.done;Bb=Yh.next()){var Zh=Bb.value;Nd.xa(Zh.u,Zh.j)}Ub.bound=new bd;Ub.bound.F=Nd.l;Ub.bound.K=Nd.s;Ub.bound.l=Nd.a;Ub.bound.s=Nd.f;Ub.bound.a=Ub.bound.f=Lc.de;Zf.push.apply(Zf,fa(nh(Ub)));Md.push(Ub)}var sj=h(Md);ed=[];var $h=p(sj);for(r=$h.next();!r.done;r=$h.next()){var ai=p(r.value.wa);for(Cb=ai.next();!Cb.done;Cb=
ai.next()){var De=Cb.value;if(De instanceof hf&&!(De.a>Lc.de||De.f<=Lc.de)){var bi=De.L.$();bi.weight=1;ed.push(bi)}}}m(ed,Zf,function(A){return function(F){return new Fc(Math.round(F.y),A.de,Math.round(F.x))}}(Lc))}var Mc={},ci=p(B);for(aa=ci.next();!aa.done;Mc={ee:Mc.ee},aa=ci.next()){var Od=aa.value;Mc.ee=Od[0].y;var Pd=[],di=p(Od);for(z=di.next();!z.done;z=di.next())for(var ei=p(z.value.V),$f=ei.next();!$f.done;$f=ei.next()){var Qd=$f.value;Pd.push(Qd.Ia(-Qd.u,Qd.j,-Qd.h,Qd.c))}Od.length=0;var tj=
k(g(Pd)),ag=[],fi=p(tj);for(Ab=fi.next();!Ab.done;Ab=fi.next()){var gi=Ab.value,Vb=gi.slice(),Rd=new nc,hi=p(gi);for(Bb=hi.next();!Bb.done;Bb=hi.next()){var ii=Bb.value;Rd.xa(ii.u,ii.j)}Vb.bound=new bd;Vb.bound.F=-Rd.s;Vb.bound.K=-Rd.l;Vb.bound.l=Rd.a;Vb.bound.s=Rd.f;Vb.bound.a=Vb.bound.f=Mc.ee;ag.push.apply(ag,fa(nh(Vb)));Od.push(Vb)}var uj=h(Od);Pd=[];var ji=p(uj);for(r=ji.next();!r.done;r=ji.next()){var ki=p(r.value.wa);for(Cb=ki.next();!Cb.done;Cb=ki.next()){var jc=Cb.value;if(jc instanceof hf&&
!(jc.a>=Mc.ee||jc.f<Mc.ee)){var li=jc.L.Ia(-jc.L.u,jc.L.j,-jc.L.h,jc.L.c);li.weight=1;Pd.push(li)}}}m(Pd,ag,function(A){return function(F){return new Fc(Math.round(F.y),A.ee,-Math.round(F.x))}}(Mc))}q.Bh=l-q.yg}vi.compile()};u.ua=function(a){u.ka.call(this,a);this.b=new G(0,0,0);this.ib=0;this.U={Ma:-2147483648,Qa:new G(1,1,1)};this.yh=new Va;this.Je=new nc};u.ua.prototype=Object.create(u.ka.prototype);u.ua.prototype.constructor=u.ua;u.ua.index=-2147483648;u.ua.prototype.create=function(){this.index=u.ua.index++;u.Vg.push(this);u.ka.prototype.create.call(this)};u.ua.prototype.remove=function(){for(var a=this.yh.first();null!=a.item;){var b=a.next;Xa(a);Xa(a.pd);a=b}u.Vg.remove(this);u.ka.prototype.remove.call(this)};
u.ua.prototype.step=function(){this.Je.Bd(this.b.z,this.b.x)||Ug(this);var a=ge(this.b,new G(0,-1E8,0),!0);a&&ve(this.b,oe[a.item.Z],this.U.Qa);u.ka.prototype.step.call(this)};
function Ug(a){for(var b=a.b.z-a.ib,c=a.b.z+a.ib,d=a.b.x-a.ib,e=a.b.x+a.ib,h=a.yh.first(),g=[Sd];g.length;){var k=g.shift();if(k instanceof ce)b<=k.value&&g.push(k.Rd),c>=k.value&&g.push(k.Sd);else if(k instanceof de)d<=k.value&&g.push(k.Rd),e>=k.value&&g.push(k.Sd);else{for(;null!=h.item&&!(h.item.index>=k.index);){var m=h.next;Xa(h);Xa(h.pd);h=m}if(h.item==k)h=h.next;else{m=new Wa(k);var l=new Wa(a);m.pd=l;l.pd=m;Za(m,h);Ya(k.Ug,l)}}}for(;null!=h.item;)g=h.next,Xa(h),Xa(h.pd),h=g;a.Je.l=(b>>19<<
19)+a.ib;a.Je.s=((c>>19)+1<<19)-a.ib;a.Je.a=(d>>19<<19)+a.ib;a.Je.f=((e>>19)+1<<19)-a.ib}u.Vg=new Ta(bb);u.Od=function(a){u.Node.call(this,a);this.Da=1E5};u.Od.prototype=Object.create(u.Node.prototype);u.Od.prototype.constructor=u.Od;u.Od.color=new P(0,0,0,64);
u.Od.prototype.La=function(){var a=new R;a.A=0;a.G=0;a.H=this.Da;a.D=this.Da;a.m11=0;a.m12=0;a.B=0;a.m21=1;a.m22=0;a.v=this.la.v;a.m31=this.la.m31+500;a.m32=this.la.m32;var b=ge(new G(this.la.v,this.la.m31,this.la.m32),new G(0,-1E8,0));b&&(a.m31-=b.d);u.w.J("modelMatrix",a);w.drawArrays(w.TRIANGLE_FAN,0,4);u.Node.prototype.La.call(this)};var wi,xi=980700/3600*2,yi=new G(0,-xi,0),zi=new Ta(bb),Ai=new u.Node("physProcessor");
Ai.step=function(){wi=new Jb;for(var a=p(zi.elements),b=a.next();!b.done;b=a.next()){b=b.value;b.jd=0;b.t=0;b.zi=Bi(b.b,b.Ba,b.jb);var c=b.ti();b.input();0<b.ve&&(b.g.x+=yi.x,b.g.y+=yi.y,b.g.z+=yi.z);b.g.scale(b.Qi);var d=Qc(b.g,b.Na,new G(0,0,0));if(0<b.hf){for(var e=b,h=b.zi,g=new G(0,0,0),k=0;k<h.length;k++){var m=h[k],l=-Rb(d,m);if(!(0>=l)){l*=e.hf;var n=Rb(e.g,m);m=new G(e.g.x-m.x*n,e.g.y-m.y*n,e.g.z-m.z*n);l/=m.length();1<l&&(l=1);g.x-=m.x*l;g.y-=m.y*l;g.z-=m.z*l}}e.g.add(g)}b.Fa.set(.5*b.Na.x+
.5*b.g.x,.5*b.Na.y+.5*b.g.y,.5*b.Na.z+.5*b.g.z);b.Fa.y+=c;b.Fa.round();b.bound=Ci(b.b,b.Ba,b.jb,b.Fa)}a=p(zi.elements);for(b=a.next();!b.done;b=a.next())b.value.handleEvent();for(a=0;!wi.Qf();){b=wi.pop();if(10<++a)break;b.target?(c=b.source,e=b.target,c.jd==b.Hh&&e.jd==b.Ei&&(c.jd++,e.jd++,Di(c,b),Di(e,b),c.handleEvent(),e.handleEvent())):(c=b.source,c.jd==b.Hh&&(c.jd++,Di(c,b),c.handleEvent()))}a=p(zi.elements);for(b=a.next();!b.done;b=a.next())b=b.value,b.b.x+=b.Fa.x,b.b.y+=b.Fa.y,b.b.z+=b.Fa.z,
b.Na.set(b.g.x,b.g.y,b.g.z),b.transform.v=b.b.x,b.transform.m31=b.b.y,b.transform.m32=b.b.z};function Ei(a){u.ua.call(this,a);this.g=new G(0,0,0);this.Na=new G(0,0,0);this.jb=this.Ba=0;this.ve=1;this.hf=0;this.Qi=1;this.gf=0;this.Ah=new Ta(bb);this.t=this.jd=0;this.Fa=new G(0,0,0)}Ei.prototype=Object.create(u.ua.prototype);f=Ei.prototype;f.constructor=Ei;f.create=function(){u.ua.prototype.create.call(this);zi.add(this)};f.remove=function(){u.ua.prototype.remove.call(this);zi.remove(this)};f.ti=function(){return 0};
function Di(a,b){var c=(b.t-a.t)/(1-a.t);c=new G(a.Fa.x*c,a.Fa.y*c,a.Fa.z*c);c.round();a.b.add(c);a.Fa.sub(c);a.t=b.t}
f.handleEvent=function(){for(var a=new G(this.g.x,this.g.y,this.g.z),b=Bi(this.b,this.Ba,this.jb),c=[],d=0;d<b.length;d++){var e=b[d],h=!1,g=-Rb(this.g,e);0<g&&(2E3<g*this.gf&&(h=!0,g*=1+this.gf),this.g.x+=e.x*g,this.g.y+=e.y*g,this.g.z+=e.z*g);g=-Rb(this.Fa,e);0<g&&(h&&(g*=1+this.gf),this.Fa.x+=e.x*g,this.Fa.y+=e.y*g,this.Fa.z+=e.z*g)}for(d=0;d<c.length;d++){h=function(l,n){var v=Rb(l,e),r=Rb(n,e);var q=k.ve;var t=m.ve;v>=r?q=[v,r]:(q=(q*v+t*r)/(q+t),q=[q+(q-v)*k.gf,q+(q-r)*m.gf]);v=q[0]-v;r=q[1]-
r;l.x+=e.x*v;l.y+=e.y*v;l.z+=e.z*v;n.x+=e.x*r;n.y+=e.y*r;n.z+=e.z*r};e=c[d];var k=this,m=e.source;m.index<k.index||(h(k.Fa,m.Fa),h(k.g,m.g))}Yb(this.Fa,b);Yb(this.g,b);0<b.length+c.length&&(Qc(this.g,a,a),a.na(1));this.bound=Ci(this.b,this.Ba,this.jb,this.Fa);if(this.Fa.Lg())return null;u.ff();b=p(b);for(a=b.next();!a.done;a=b.next())a.value.source.Ma=u.Ma;c=p(c);for(a=c.next();!a.done;a=c.next())a.value.source.Ma=u.Ma;0>=this.Ba||!(c=Fi(this,this.b,this.Ba,this.jb,this.Fa,!1))||(c.source=this,c.Hh=
this.jd,c.target&&(c.Ei=c.target.jd),wi.add(c,c.t))};
function Fi(a,b,c,d,e,h){for(var g=new ee(b,e,c),k=null,m=1,l=g.next();l&&!(l.t>m);){l=p(l.node.wa);for(var n=l.next();!n.done;n=l.next())if(n=n.value,n.Ma!=u.Ma&&(n=n.fe(b,c,d,e)))n.d=n.t*e.length(),-1>n.d||(n.t=a.t+n.t*(1-a.t),n.t>=m||(k=n,m=n.t));l=g.next()}g=p(Wd);for(n=g.next();!n.done;n=g.next())if(l=n.value,l.Ma!=u.Ma&&(l=l.fe(b,c,d,e)))l.d=l.t*e.length(),-1>l.d||(l.t=a.t+l.t*(1-a.t),l.t>=m||(k=l,m=l.t));if(!h)return k;for(b=0;b<zi.elements.length;b++){c=zi.elements[b];if(d=a!=c)if(d=c.Ma!=
u.Ma)if(d=!a.Ah.get(c))if(d=!c.Ah.get(a))d=a.bound,e=c.bound,d=d.l>=e.s||d.s<=e.l||d.a>=e.f||d.f<=e.a||d.F>=e.K||d.K<=e.F?!1:!0;if(d){d=a.t>c.t?a.t:c.t;e=Gi(a,d);h=Gi(c,d);a:{var v=e.ci,r=e.r,q=e.xc,t=e.oc;n=h.ci;g=h.r;var B=h.xc;l=h.oc;if(0==q&&0==B)q=v,B=Qc(q,n,new G(0,0,0)),v=Qc(t,l,new G(0,0,0)),0==v.length()?g=null:(B=Qb(B,v,r+g))?(t=new G(q.x+t.x*B.ra,q.y+t.y*B.ra,q.z+t.z*B.ra),l=new G(n.x+l.x*B.ra,n.y+l.y*B.ra,n.z+l.z*B.ra),n=new Hi,n.t=B.ra,r=g/(g+r),q=1-r,n.p=(new G(l.x*q+t.x*r,l.y*q+t.y*
r,l.z*q+t.z*r)).round(),n.n=new G((n.p.x-l.x)/g,(n.p.y-l.y)/g,(n.p.z-l.z)/g),g=n):g=null;else{var y=new G(v.x-n.x,0,v.z-n.z),C=new G(t.x-l.x,0,t.z-l.z);if(0==C.length())g=null;else if(y=Qb(y,C,r+g)){var z=new G(v.x+t.x*y.ra,v.y+t.y*y.ra,v.z+t.z*y.ra);C=new G(n.x+l.x*y.ra,n.y+l.y*y.ra,n.z+l.z*y.ra);var D=g/(g+r),H=1-D;z=new G(C.x*H+z.x*D,C.y*H+z.y*D,C.z*H+z.z*D);z.round();if(z.y>C.y+B){y=new G(v.x-n.x,v.y-q-(n.y+B),v.z-n.z);C=Qc(t,l,new G(0,0,0));y=Qb(y,C,r+g);if(!y){g=null;break a}z=new G(v.x+t.x*
y.ra,v.y-q+t.y*y.ra,v.z+t.z*y.ra);C=new G(n.x+l.x*y.ra,n.y+B+l.y*y.ra,n.z+l.z*y.ra);l=new Hi;l.t=y.ra;D=g/(g+r);H=1-D;l.p=(new G(C.x*H+z.x*D,(C.y+B)*H+(z.y-q)*D,C.z*H+z.z*D)).round();l.n=new G((l.p.x-C.x)/g,(l.p.y-(C.y+B))/g,(l.p.z-C.z)/g)}else if(z.y<C.y-B){y=new G(v.x-n.x,v.y+q-(n.y-B),v.z-n.z);C=Qc(t,l,new G(0,0,0));y=Qb(y,C,r+g);if(!y){g=null;break a}z=new G(v.x+t.x*y.ra,v.y+q+t.y*y.ra,v.z+t.z*y.ra);C=new G(n.x+l.x*y.ra,n.y-B+l.y*y.ra,n.z+l.z*y.ra);l=new Hi;l.t=y.ra;D=g/(g+r);H=1-D;l.p=(new G(C.x*
H+z.x*D,(C.y-B)*H+(z.y+q)*D,C.z*H+z.z*D)).round();l.n=new G((l.p.x-C.x)/g,(l.p.y-(C.y-B))/g,(l.p.z-C.z)/g)}else l=new Hi,l.t=y.ra,l.p=z,l.n=new G((l.p.x-C.x)/g,0,(l.p.z-C.z)/g);g=l}else g=null}}g&&(g.d=g.t*Qc(e.oc,h.oc,new G(0,0,0)).length(),-1>g.d||(g.t=d+g.t*(1-d),g.t>=m||(g.target=c,k=g,m=g.t)))}}return k}
function Gi(a,b){b=(b-a.t)/(1-a.t);b=new G(a.Fa.x*b,a.Fa.y*b,a.Fa.z*b);b.round();var c={};c.ci=(new G(a.b.x,a.b.y,a.b.z)).add(b);c.r=a.Ba;c.xc=a.jb;c.oc=(new G(a.Fa.x,a.Fa.y,a.Fa.z)).sub(b);return c}function Bi(a,b,c){var d=ie(a,b),e=[];u.ff();d=p(d);for(var h=d.next();!h.done;h=d.next()){var g=p(h.value.wa);for(h=g.next();!h.done;h=g.next())h.value.Bf(a,b,c,e)}d=p(Wd);for(h=d.next();!h.done;h=d.next())h.value.Bf(a,b,c,e);return e}f.input=function(){};
function Ii(a){Ei.call(this,a);this.mh=this.zg=this.Gc=this.Rf=this.ue=this.yc=0;this.Mg=this.Kd=Number.NEGATIVE_INFINITY;this.Ai=this.cf=!1;this.Vd=0;this.If=18}Ii.prototype=Object.create(Ei.prototype);Ii.prototype.constructor=Ii;Ii.qc=function(a){return Math.sqrt(2*a*xi)};
Ii.prototype.ti=function(){var a=0,b=this.Ai?this.zg:this.Gc,c=new G(this.b.x,this.b.y-this.jb,this.b.z);0>=this.g.y&&(this.cf=!1);if(!(this.Kd<u.m-1)){this.cf=!1;var d=0;u.ff();var e=this.mh;if(e=Fi(this,c,this.Ba,0,new G(0,-e,0)))d=e.d;c.y-=d;c=Bi(c,this.Ba,0);e=Number.NEGATIVE_INFINITY;for(var h=0;h<c.length;h++){var g=c[h];g.y>e&&(e=g.y)}0<e&&(this.Kd=u.m,a=b-2*(this.Ba+this.jb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}else if(!this.cf){d=0;u.ff();e=this.Gc-2*this.jb-this.Ba;if(e=Fi(this,c,this.Ba,
0,new G(0,-e,0)))d=e.d;c.y-=d;c=Bi(c,this.Ba,0);e=Number.NEGATIVE_INFINITY;for(h=0;h<c.length;h++)g=c[h],g.y>e&&(e=g.y);0<e&&(this.Kd=u.m,a=b-2*(this.Ba+this.jb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}return a};Ii.prototype.Oh=function(){return new G(0,0,0)};Ii.prototype.Nh=function(){};
Ii.prototype.input=function(){Ei.prototype.input.call(this);if(u.o.Ha==this){this.Nh();var a=this.Oh(),b=this.transform;a.set(b.A*a.x+b.B*a.z,0,b.H*a.x+b.m22*a.z);b=a.na(1);0==b&&(this.Vd=0);if(this.Kd<u.m-1){b=.25*this.ue;var c=new O(this.g.z,this.g.x),d=c.length(),e=Rb(this.g,a);0>e&&(e=0);e>this.yc&&(e=this.yc);b=this.yc/(this.yc+b)*(e+b)-e;d>this.yc&&c.scale(Math.max(0,d-b)/d);c.x+=a.z*b;c.y+=a.x*b;this.g.z=c.x;this.g.x=c.y}else 0<b&&(this.g.x+=a.x*this.ue,this.g.z+=a.z*this.ue,this.Vd>=2*this.If&&
(this.Vd=0),0==this.Vd?u.i.ea.get("stepConcrete01").play({gain:1/6}):this.Vd==this.If&&u.i.ea.get("stepConcrete02").play({gain:1/6}),this.Vd++),this.g.scale(this.yc/(this.yc+this.ue));this.Mg<u.m-6||this.Kd<u.m-15||(this.g.y=Math.min(this.Rf,this.g.y+this.Rf),this.Mg=this.Kd=Number.NEGATIVE_INFINITY,this.cf=!0)}};function Hi(){this.index=Ji++;this.t=NaN;this.n=this.p=null;this.ob=!0}var Ji=-2147483648;function Ci(a,b,c,d){var e=new bd,h=a.z-b;h<e.F&&(e.F=h);h=a.z+b;h>e.K&&(e.K=h);h=a.z+d.z-b;h<e.F&&(e.F=h);h=a.z+d.z+b;h>e.K&&(e.K=h);h=a.x-b;h<e.l&&(e.l=h);h=a.x+b;h>e.s&&(e.s=h);h=a.x+d.x-b;h<e.l&&(e.l=h);h=a.x+d.x+b;h>e.s&&(e.s=h);b+=c;c=a.y-b;c<e.a&&(e.a=c);c=a.y+b;c>e.f&&(e.f=c);c=a.y+d.y-b;c<e.a&&(e.a=c);c=a.y+d.y+b;c>e.f&&(e.f=c);return e}
function Ki(a,b,c,d,e){var h=Qb(new G(a.x-c.x,0,a.z-c.z),new G(b.x,0,b.z),d);if(!h)return null;d=new Hi;d.t=h.ra;d.p=new G(a.x+b.x*d.t,a.y+b.y*d.t,a.z+b.z*d.t);d.n=new G(d.p.x-c.x,0,d.p.z-c.z);d.n.na(1);var g=new Hi;g.t=h.hc;g.p=new G(a.x+b.x*g.t,a.y+b.y*g.t,a.z+b.z*g.t);g.n=new G(g.p.x-c.x,0,g.p.z-c.z);g.n.na(1);if(0<b.y){h=(c.y-e-a.y)/b.y;var k=(c.y+e-a.y)/b.y;h>d.t&&(d=new Hi,d.t=h,d.p=new G(a.x+b.x*d.t,c.y-e,a.z+b.z*d.t),d.n=new G(0,-1,0));k<g.t&&(g=new Hi,g.t=k,g.p=new G(a.x+b.x*g.t,c.y+e,a.z+
b.z*g.t),g.n=new G(0,1,0))}else if(0>b.y)h=(c.y+e-a.y)/b.y,k=(c.y-e-a.y)/b.y,h>d.t&&(d=new Hi,d.t=h,d.p=new G(a.x+b.x*d.t,c.y+e,a.z+b.z*d.t),d.n=new G(0,1,0)),k<g.t&&(g=new Hi,g.t=k,g.p=new G(a.x+b.x*g.t,c.y-e,a.z+b.z*g.t),g.n=new G(0,-1,0));else if(a.y>c.y+e||a.y<c.y-e)return null;if(d.t>g.t)return null;d.ob=!0;g.ob=!1;return d}
function Li(a,b,c,d){b=Pb(d,c,a,b);if(!b)return null;var e=new Hi;e.t=-b.hc;e.p=d;e.n=(new G(a.x-(d.x+c.x*b.hc),a.y-(d.y+c.y*b.hc),a.z-(d.z+c.z*b.hc))).round();e.n.na(1);e.ob=!0;return e}
function Mi(a,b,c,d,e){var h=Rb(c,e);c=new G(c.x-e.x*h,c.y-e.y*h,c.z-e.z*h);d=new G(d.x-a.x,d.y-a.y,d.z-a.z);var g=Rb(d,e);d.set(d.x-e.x*g,d.y-e.y*g,d.z-e.z*g);b=Qb(d,c,b);if(!b)return null;g=new Hi;g.t=-b.hc;g.p=(new G(a.x+d.x+e.x*h*g.t,a.y+d.y+e.y*h*g.t,a.z+d.z+e.z*h*g.t)).round();g.n=new G(-(d.x+c.x*b.hc),-(d.y+c.y*b.hc),-(d.z+c.z*b.hc));g.n.na(1);g.ob=!0;return g}
jf.prototype.fe=function(a,b,c,d){c=this.y+c;if(0<=d.y)var e=null;else{var h=new Hi;h.t=-(a.y-c-b)/d.y;h.p=(new G(a.x+d.x*h.t,a.y-b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new G(0,1,0);e=h}if(!e)return null;if(0==fc(e.p.z,e.p.x,this.V).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,m=0;m<this.V.length;m++){var l=this.V[m];e=new G(l.c,c,l.h);var n=new G(l.j-l.c,0,l.u-l.h);n.scale(1/l.length);(e=Mi(a,b,d,e,n))?(n=l.getParameter(e.p.z,e.p.x),!(0>n||n>l.length)&&
e.t<k&&(k=e.t,g=e)):h=0==m?h|(1<<this.V.length-1)+1:h|3<<m-1}for(m=0;m<this.V.length;m++)h&1<<m||(l=this.V[m],(e=Li(a,b,d,new G(l.j,c,l.u)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
kf.prototype.fe=function(a,b,c,d){c=this.y-c;if(0>=d.y)var e=null;else{var h=new Hi;h.t=-(c-a.y-b)/-d.y;h.p=(new G(a.x+d.x*h.t,a.y+b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new G(0,-1,0);e=h}if(!e)return null;if(0==fc(e.p.z,e.p.x,this.V).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,m=0;m<this.V.length;m++){var l=this.V[m];e=new G(l.c,c,l.h);var n=new G(l.j-l.c,0,l.u-l.h);n.scale(1/l.length);(e=Mi(a,b,d,e,n))?(n=l.getParameter(e.p.z,e.p.x),!(0>n||n>l.length)&&
e.t<k&&(k=e.t,g=e)):h=0==m?h|(1<<this.V.length-1)+1:h|3<<m-1}for(m=0;m<this.V.length;m++)h&1<<m||(l=this.V[m],(e=Li(a,b,d,new G(l.j,c,l.u)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
hf.prototype.fe=function(a,b,c,d){var e=this.L,h=this.a-c;c=this.f+c;if(0<=L(e,e.h+d.z,e.c+d.x))var g=null;else{var k=new G(e.u-e.h,0,e.c-e.j);k.scale(1/e.length);var m=Rb(d,k),l=new Hi;l.t=-(L(e,a.z,a.x)-b)/m;l.p=(new G(a.x-k.x*b+d.x*l.t,a.y-k.y*b+d.y*l.t,a.z-k.z*b+d.z*l.t)).round();l.n=k;g=l}if(!g)return null;k=0;var n=e.getParameter(g.p.z,g.p.x);0>n&&(k|=1);g.p.y>c&&(k|=2);n>e.length&&(k|=4);g.p.y<h&&(k|=8);if(0==k)return g.item=this,g;if(0==b)return null;k=0;m=null;l=Number.POSITIVE_INFINITY;
g=new G(e.c,h,e.h);n=new G(0,1,0);g=Mi(a,b,d,g,n);g?!(g.p.y<h||g.p.y>c)&&g.t<l&&(l=g.t,m=g):k|=9;g=new G(e.c,c,e.h);n=new G(e.j-e.c,0,e.u-e.h);n.scale(1/e.length);(g=Mi(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<l&&(l=g.t,m=g)):k|=3;g=new G(e.j,c,e.u);n=new G(0,-1,0);g=Mi(a,b,d,g,n);g?!(g.p.y>c||g.p.y<h)&&g.t<l&&(l=g.t,m=g):k|=6;g=new G(e.j,h,e.u);n=new G(e.c-e.j,0,e.h-e.u);n.scale(1/e.length);(g=Mi(a,b,d,g,n))?(n=e.getParameter(g.p.z,g.p.x),!(0>n||n>e.length)&&g.t<l&&(l=g.t,
m=g)):k|=18;0==(k&1)&&(g=new G(e.c,c,e.h),(g=Li(a,b,d,g))&&g.t<l&&(l=g.t,m=g));0==(k&2)&&(g=new G(e.j,c,e.u),(g=Li(a,b,d,g))&&g.t<l&&(l=g.t,m=g));0==(k&4)&&(g=new G(e.j,h,e.u),(g=Li(a,b,d,g))&&g.t<l&&(l=g.t,m=g));0==(k&8)&&(g=new G(e.c,h,e.h),(g=Li(a,b,d,g))&&g.t<l&&(m=g));return m?(m.item=this,m):null};
jf.prototype.Bf=function(a,b,c,d){c=this.y+c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.V.length;k++){e=this.V[k];var m=L(e,a.z,a.x);m<g&&(g=m,h=e)}e=h;0<=g?e=new G(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new G(e.c,c,e.h):h>e.length?e=new G(e.j,c,e.u):(h/=e.length,g=1-h,e=new G(e.c*g+e.j*h,c,e.h*g+e.u*h),e.round()));c=new G(a.x-e.x,a.y-e.y,a.z-e.z);c.na(1);c.d=Rb(e,c)+b;a=Rb(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
kf.prototype.Bf=function(a,b,c,d){c=this.y-c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.V.length;k++){e=this.V[k];var m=L(e,a.z,a.x);m<g&&(g=m,h=e)}e=h;0<=g?e=new G(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new G(e.c,c,e.h):h>e.length?e=new G(e.j,c,e.u):(h/=e.length,g=1-h,e=new G(e.c*g+e.j*h,c,e.h*g+e.u*h),e.round()));c=new G(a.x-e.x,a.y-e.y,a.z-e.z);c.na(1);c.d=Rb(e,c)+b;a=Rb(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
hf.prototype.Bf=function(a,b,c,d){var e=this.a-c,h=this.f+c;c=null;var g=this.L;var k=g.getParameter(a.z,a.x);if(0>k)k=new G(g.c,a.y,g.h),k.y>h?k.y=h:k.y<e&&(k.y=e);else if(k>g.length)k=new G(g.j,a.y,g.u),k.y>h?k.y=h:k.y<e&&(k.y=e);else{k/=g.length;var m=1-k;k=new G(g.c*m+g.j*k,a.y,g.h*m+g.u*k);k.y>h?k.y=h:k.y<e?k.y=e:(c=new G(g.u-g.h,0,g.c-g.j),c.scale(1/g.length));k.round()}null==c&&(c=new G(a.x-k.x,a.y-k.y,a.z-k.z),c.na(1));c.d=Rb(k,c)+b;a=Rb(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
jf.prototype.nh=function(a,b){var c=Sa(.5*yi.y,b.y,a.y-this.y);if(!c)return null;var d=new Hi;d.t=c.hc;if(0>d.t)return null;d.p=(new G(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=p(this.V);for(b=a.next();!b.done;b=a.next())if(0>L(b.value,d.p.z,d.p.x))return null;d.n=new G(0,1,0);return d};
kf.prototype.nh=function(a,b){if(a.y>=this.y)return null;var c=Sa(.5*yi.y,b.y,a.y-this.y);if(!c)return null;var d=new Hi;d.t=c.ra;if(0>d.t)return null;d.p=(new G(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=p(this.V);for(b=a.next();!b.done;b=a.next())if(0>L(b.value,d.p.z,d.p.x))return null;d.n=new G(0,-1,0);return d};
hf.prototype.nh=function(a,b){var c=L(this.L,a.z,a.x);if(0>c)return null;var d=rc(this.L,1),e=d.x*b.z+d.y*b.x;if(0<=e)return null;var h=new Hi;h.t=-c/e;if(0>h.t)return null;h.p=(new G(a.x+b.x*h.t,a.y+.5*(2*b.y+yi.y*h.t)*h.t,a.z+b.z*h.t)).round();if(h.p.y>=this.f||h.p.y<this.a)return null;a=this.L.getParameter(h.p.z,h.p.x);if(0>a||a>=this.L.length)return null;h.n=new G(d.y,0,d.x);return h};function Ni(){this.height=this.width=2;this.depth=this.color=null}
Ni.prototype.create=function(){this.object=w.createFramebuffer();w.bindFramebuffer(w.FRAMEBUFFER,this.object);var a=this.color=new u.Yc;a.width=this.width;a.height=this.height;a.Pf=w.RGBA8;a.format=w.RGBA;a.type=w.UNSIGNED_BYTE;a.Fd=w.NEAREST;a.te=w.NEAREST;a.create();w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,a.object,0);a=this.depth=w.createRenderbuffer();w.bindRenderbuffer(w.RENDERBUFFER,a);w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH24_STENCIL8,this.width,this.height);
w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_STENCIL_ATTACHMENT,w.RENDERBUFFER,a)};function Oi(a){we.call(this,a);this.la=new R;this.pitch=this.heading=0;this.Oe=112;this.wc=Nb(40);this.dj=!1;this.dg=8E3}Oi.prototype=Object.create(we.prototype);Oi.prototype.constructor=Oi;Oi.prototype.create=function(){var a=this.vh=new we;a.la=this.I;W(a,this);a=this.wh=new we;a.la=this.I;W(a,this);return this};
Oi.prototype.step=function(){this.Oe+=X.ca;0>this.Oe&&(this.Oe=0);this.transform.m32=Math.pow(1.125,this.Oe);X.d[2]&&(this.heading-=4E6*X.Ib.x,this.pitch+=4E6*X.Ib.y);var a=Ob(this.heading),b=Ob(this.pitch);Wc(this.la);this.la.rotate(a,b,0);a=this.la.Jf();var c=this.la.Kf();b=this.la.ke();if(X.d[1]){var d=2*Math.tan(this.wc)*this.transform.m32/u.canvas.height,e=-X.Ib.x*d;d*=X.Ib.y;this.la.v+=e*a.x+d*c.x;this.la.m31+=e*a.y+d*c.y;this.la.m32+=e*a.z+d*c.z}c=new G(0,0,0);Gd.d.KeyW&&--c.z;Gd.d.KeyS&&(c.z+=
1);Gd.d.KeyA&&--c.x;Gd.d.KeyD&&(c.x+=1);if(e=c.length())c.scale(this.transform.m32/(60*e)),this.la.v+=c.x*a.x+c.z*b.x,this.la.m31+=c.x*a.y+c.z*b.y,this.la.m32+=c.x*a.z+c.z*b.z;a=this.vh;Wc(a.transform);a.transform.v=-this.dg;a.transform.rotate(Math.atan(.5*-this.dg/this.transform.m32),0,0);a.wc=this.wc;a=this.wh;Wc(a.transform);a.transform.v=this.dg;a.transform.rotate(Math.atan(.5*this.dg/this.transform.m32),0,0);a.wc=this.wc;we.prototype.step.call(this);return this};u.Animation=function(){u.Node.call(this);this.length=0;this.sa=NaN;this.Le={}};u.Animation.prototype=Object.create(Node.prototype);f=u.Animation.prototype;f.constructor=u.Animation;f.step=function(){Node.prototype.step.call(this)};f.play=function(){this.sa=u.m};f.key=function(a,b,c){var d=this.Le[a];d||(d=this.Le[a]=new Pi);return d.key(b,c)};f.print=function(){console.log("{");console.log("let a = new NG.Animation();");for(var a in this.Le)this.Le.hasOwnProperty(a)&&this.Le[a].print(a);console.log("}")};
u.Animation.N=function(a,b){b.reset();b.translate(a[0],a[1],a[2]);b.rotate(a[3],a[4],a[5]);return b};function Pi(){this.keys=new Ta(Qi)}Pi.prototype.key=function(a,b){var c=this.keys.get(a);c||(c=new Ri,c.t=a,this.keys.add(c));c.oc=b;return c};Pi.prototype.print=function(a){for(var b=0;b<this.keys.elements.length;b++){var c=this.keys.elements[b];console.log("a.key('"+a+"', "+c.t+", "+c.oc+");")}};function Ri(){this.oc=this.t=0}
function Qi(a,b){return isNaN(a)?a.t<b.t?-1:a.t>b.t?1:0:a<b.t?-1:a>b.t?1:0};function Og(a,b,c,d,e,h){u.Node.call(this);this.b=new G(a.c,b+112500,a.h);this.Pd=-Infinity;this.wf=NaN;this.open=this.state=0;W(this,u.Zd);var g=new Le(u.i.Fb.get("bayDoor01"));g.transform.v=this.b.x;g.transform.m31=this.b.y;g.transform.m32=this.b.z;g.transform.A=-a.S;g.transform.H=a.M;g.transform.B=-a.M;g.transform.m22=-a.S;W(g,u.Zd);g.create();id(g,e.U);var k=p(g.gc);for(b=k.next();!b.done;b=k.next())b=b.value,b.yf=!0,b.w=u.i.ia.get("physical"),b.fa=u.i.O.get("BayDoor01"),b.T=cg,b.za=["portalLightIndex",
e.jf,!0,"color",Bc,!1];this.Uf=g;this.Rg=c;this.ki=e;c=new Le(u.i.Fb.get("bayDoor01"));c.transform.v=this.b.x;c.transform.m31=this.b.y;c.transform.m32=this.b.z;c.transform.A=a.S;c.transform.H=-a.M;c.transform.B=a.M;c.transform.m22=a.S;W(c,u.Zd);c.create();id(c,h.U);e=p(c.gc);for(b=e.next();!b.done;b=e.next())b=b.value,b.yf=!0,b.w=u.i.ia.get("physical"),b.fa=u.i.O.get("BayDoor01"),b.T=cg,b.za=["portalLightIndex",h.jf,!0,"color",Bc,!1];this.Tf=c;this.Ri=d;this.ji=h;this.wa=[];h=[new O(-6250,-112500),
new O(6250,-112500),new O(6250,112500),new O(-6250,112500)];for(d=0;d<h.length;d++)h[d]=a.$a(h[d].x,h[d].y);a=[];d=h[h.length-1];h=p(h);for(c=h.next();!c.done;c=h.next())c=c.value,a.push(new cc(d.x,d.y,c.x,c.y)),d=c;this.wa.push(new kf(a,this.b.y-112500));this.wa.push(new hf(tc(a[0]),this.b.y-112500,this.b.y+112500),new hf(tc(a[2]),this.b.y-112500,this.b.y+112500));a=p(this.wa);for(d=a.next();!d.done;d=a.next())d.value.item=this;Wd.push.apply(Wd,fa(this.wa));this.update()}Og.prototype=Object.create(u.Node.prototype);
f=Og.prototype;f.constructor=Og;f.step=function(){if(!(u.m%4)){1==this.state&&6E5<=Math.abs(u.o.Ha.b.x-this.b.x)+Math.abs(u.o.Ha.b.y-this.b.y)+Math.abs(u.o.Ha.b.z-this.b.z)&&(isNaN(this.wf)&&(this.wf=u.m),60<=u.m-this.wf&&(this.state=0,this.Pd=u.m));var a=(u.m-this.Pd)/36;1<a||(0==this.state?this.open=1-Math.pow(a,2):1==this.state&&(this.open=Math.pow(a,2)),this.update())}};
f.update=function(){var a=this.Rg.a+(this.Rg.height-12500)*this.open;this.Rg.f=this.Ri.f=this.wa[0].y=this.wa[1].a=this.wa[2].a=a;this.Uf.transform.m31=this.Tf.transform.m31=a+112500;this.Uf.gc[0].za[1]=this.ki.jf;this.Tf.gc[0].za[1]=this.ji.jf;this.Uf.gc[0].za[4]=this.ki.be;this.Tf.gc[0].za[4]=this.ji.be};f.La=function(){u.w.J("clipY",this.b.y+225E3,!1)};f.remove=function(){this.Uf.remove();this.Tf.remove();u.Node.prototype.remove.call(this)};
function Si(a,b,c){u.ua.call(this,"crate");this.Eb=240;this.b.x=a;this.b.y=b+5E4;this.b.z=c;$c(this.transform,this.b);a=[new G(-5E4,0,-5E4),new G(-5E4,0,5E4),new G(5E4,0,5E4),new G(5E4,0,-5E4)];b=p(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.$a(c,c),c.round();a=[new cc(a[0].z,a[0].x,a[1].z,a[1].x),new cc(a[1].z,a[1].x,a[2].z,a[2].x),new cc(a[2].z,a[2].x,a[3].z,a[3].x),new cc(a[3].z,a[3].x,a[0].z,a[0].x)];this.wa=[];this.wa.push(new jf(a,this.b.y+5E4),new kf(a,this.b.y-5E4));a=wc(a);
this.wa.push(new hf(a[0],this.b.y-5E4,this.b.y+5E4),new hf(a[1],this.b.y-5E4,this.b.y+5E4),new hf(a[2],this.b.y-5E4,this.b.y+5E4),new hf(a[3],this.b.y-5E4,this.b.y+5E4));a=p(this.wa);for(b=a.next();!b.done;b=a.next())b.value.item=this;Wd.push.apply(Wd,fa(this.wa))}Si.prototype=Object.create(u.ua.prototype);f=Si.prototype;f.constructor=Si;
f.create=function(){var a=this.Sa=new Le(u.i.Fb.get("lootBox"));a.la=this.I;W(a,this);a.create();this.ib=a.src.ib;id(a,this.U);jd(a,6E4);u.o.Me.push(this);this.pe=15E4;Ti.push(this);u.ua.prototype.create.call(this)};
f.step=function(){if(u.o.Ha){var a=Qc(u.o.Ha.b,this.b,new G(0,0,0));a.y=0;a.na(1);this.transform.A=a.z;this.transform.H=-a.x;this.transform.B=a.x;this.transform.m22=a.z;this.transform.rotate(Nb(-15),0,0)}10==u.m-this.he&&this.ug();u.m==this.Tc+4?this.Sa.T=u.i.Ya.get("flashWhite"):u.m==this.Tc+6?this.Sa.T=u.i.Ya.get("flashRed"):u.m==this.Tc+8&&delete this.Sa.T;u.ua.prototype.step.call(this)};f.Ud=function(a){isNaN(this.he)&&(this.Tc=u.m,this.Eb-=a,0>=this.Eb&&(this.he=u.m))};
f.ug=function(){var a=Ui.ng();a=p(a);for(var b=a.next();!b.done;b=a.next())b=b.value,b.b.set(this.b.x,this.b.y,this.b.z),b.b.z+=5E4*(x()-.5),b.b.x+=5E4*(x()-.5),b.g.set(6E3*(x()-.5),9E3*(x()+1),6E3*(x()-.5)),W(b,u.dh),b.create();u.i.ea.get("hit02").play({gain:1});this.remove()};f.remove=function(){u.ua.prototype.remove.call(this);this.Sa.remove();u.o.Me.splice(u.o.Me.indexOf(this),1);Vi.call(this);Wd.splice(Wd.indexOf(this.wa[0]),this.wa.length)};
function Wi(a,b,c){u.ua.call(this,"barrel");this.Eb=160;this.b.x=a;this.b.y=b+65E3;this.b.z=c;$c(this.transform,this.b);a=[new G(-5E4,0,-5E4),new G(-5E4,0,5E4),new G(5E4,0,5E4),new G(5E4,0,-5E4)];b=p(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.$a(c,c),c.round();a=[new cc(a[0].z,a[0].x,a[1].z,a[1].x),new cc(a[1].z,a[1].x,a[2].z,a[2].x),new cc(a[2].z,a[2].x,a[3].z,a[3].x),new cc(a[3].z,a[3].x,a[0].z,a[0].x)];this.wa=[];this.wa.push(new jf(a,this.b.y+5E4),new kf(a,this.b.y-5E4));a=
wc(a);this.wa.push(new hf(a[0],this.b.y-5E4,this.b.y+5E4),new hf(a[1],this.b.y-5E4,this.b.y+5E4),new hf(a[2],this.b.y-5E4,this.b.y+5E4),new hf(a[3],this.b.y-5E4,this.b.y+5E4));a=p(this.wa);for(b=a.next();!b.done;b=a.next())b.value.item=this;Wd.push.apply(Wd,fa(this.wa))}Wi.prototype=Object.create(u.ua.prototype);f=Wi.prototype;f.constructor=Wi;
f.create=function(){var a=this.Sa=new Le(u.i.Fb.get("nitroBarrel"));a.la=this.I;W(a,this);a.create();this.ib=a.src.ib;id(a,this.U);jd(a,6E4);u.o.He.push(this);this.pe=15E4;Ti.push(this);u.ua.prototype.create.call(this)};
f.step=function(){if(isNaN(this.he)){if(u.o.Ha){var a=Qc(u.o.Ha.b,this.b,new G(0,0,0));a.y=0;a.na(1);this.transform.A=a.z;this.transform.H=-a.x;this.transform.B=a.x;this.transform.m22=a.z;this.transform.rotate(Nb(15),0,0)}a=1+.25*Math.sin(u.m*Math.PI/3)*(1-this.Eb/160);this.Eb=Math.min(this.Eb+2,160);Wc(this.Sa.transform);this.Sa.transform.scale(a,a,a);u.m==this.Tc+4?this.Sa.T=u.i.Ya.get("flashWhite"):u.m==this.Tc+6?this.Sa.T=u.i.Ya.get("flashRed"):u.m==this.Tc+8&&delete this.Sa.T;u.ua.prototype.step.call(this)}else{a=
u.m-this.he;var b=1+1/12*a;Wc(this.Sa.transform);this.Sa.transform.scale(b,b,b);6>a||(6==a&&this.ug(),u.o.Ha.Wa=Nb(10),16>a||this.remove())}};f.Ud=function(a){isNaN(this.he)&&(this.Tc=u.m,this.Eb-=a,0>=this.Eb&&(this.he=u.m))};f.ug=function(){this.Sa.remove();u.o.He.splice(u.o.He.indexOf(this),1);Vi.call(this);Wd.splice(Wd.indexOf(this.wa[0]),this.wa.length);Xi(this)};
function Xi(a){function b(e){var h=Qc(e.b,this.b,new G(0,0,0)),g=h.na(1);5E5<=g||(h.y+=1,e instanceof Yi&&(e.Eb=0,Zi(e)),e instanceof $i&&(e.Kd=Number.NEGATIVE_INFINITY,e.cf=!0),g=1E4,e.g.x+=h.x*g,e.g.y+=h.y*g,e.g.z+=h.z*g)}u.i.ea.get("explode01").play({gain:1});for(var c=p(u.o.Fc),d=c.next();!d.done;d=c.next())d=d.value,aj(d,a.b),b.call(a,d);c=p(u.o.He);for(d=c.next();!d.done;d=c.next())d=d.value,5E5>Qc(d.b,a.b,new G(0,0,0)).na(1)&&d.Ud(Number.POSITIVE_INFINITY);c=p(u.o.Me);for(d=c.next();!d.done;d=
c.next())d=d.value,5E5>Qc(d.b,a.b,new G(0,0,0)).na(1)&&d.Ud(Number.POSITIVE_INFINITY);b.call(a,u.o.Ha);d=new bj(1E5);d.transform.v=a.b.x;d.transform.m31=a.b.y;d.transform.m32=a.b.z;W(d,u.cc);d.create()}f.remove=function(){u.ua.prototype.remove.call(this)};function cj(a){u.Node.call(this,"GunManager "+a.name);this.aa=a;this.Of=[];this.C=null;this.action="ready";this.Ja=NaN;this.focus=0;this.Tb=!1;this.Ff=null;this.cb=this.Nb=0;this.kb=null;this.Ef=this.Df=0;this.xb=[];this.Ub=0}cj.prototype=Object.create(u.Node.prototype);f=cj.prototype;f.constructor=cj;
f.create=function(){var a=this.Oc=new u.ka("muzzleFlare");Re.call(a);a.La=Te;a.w=u.i.ia.get("image");a.fa=u.i.O.get("muzzleFlare01");a.T=new ld;a.T.qa=1;a.color=new P(255,255,255,0);a.Da=12500;a.Oa=0;a.la=this.aa.jc.I;W(a,u.Rc)};
f.step=function(){if(this.C){var a=this.aa;a.Ad=null;a.sh=!1;var b=a.ub.C.ah(a.ec.I);b&&(a.sh=b.sg,b.item instanceof Yi&&(a.Ad=b.item),b.item instanceof Si&&(a.Ad=b.item),b.item instanceof Wi&&(a.Ad=b.item))}--this.Ub;0>this.Ub&&(this.Ub=0);a=p(this.Of);b=a.next();a:for(;!b.done;b=a.next())if(b=b.value,b!=this.C)for(var c=p(b.Ng),d=c.next();!d.done;d=c.next())if(Gd.p[d.value]){this.Ff=b;break a}X.p[0]&&(this.cb=1);X.r[0]&&(this.cb=0);X.p[2]&&(this.Nb=1);X.r[2]&&(this.Nb=0);this.Nb||(this.focus-=1/
6,0>this.focus&&(this.focus=0));if(this.C)this.C[this.action].call(this);else for(dj(this),a=0;a<this.xb.length;a++)b=this.xb[a],0<b.alpha||(this.xb.splice(a--,1),W(b,null))};
f.La=function(){if(this.kb){u.zb.Zb.J("viewMatrix",ad);u.zb.Zb.upload();u.mb(0);u.Rb(0);u.gb(2);u.rb(Ue);u.Ua(u.i.ia.get("physicalCardThreshold"));u.w.J("color",Bc);u.w.J("ambientLight",u.o.Ha.U.Qa,!1);u.Sb(0,this.kb);var a=Math.round(this.Df),b=Math.round(this.Ef),c=new R;c.A=this.kb.width/u.canvas.width;c.m11=-this.kb.height/u.canvas.height;c.v=2*a/u.canvas.width;c.m31=-2*b/u.canvas.height;u.w.J("modelMatrix",c);w.drawArrays(w.TRIANGLE_FAN,0,4)}};
function dj(a){if(!a.Ff)return!1;a.Nb=0;a.cb=0;a.Ub=0;a.Tb=!1;a.C=a.Ff;u.o.Ld();a.action="equip";a.Ja=u.m+1;a.Ff=null;return!0}f.Kb=function(){var a=400*this.aa.md;a*=1-2/3*this.focus;this.Df=this.aa.Nf*a;this.Ef=this.aa.Kb*a};
cj.N=function(a,b,c,d,e,h){var g=new R;b*=1E5;c*=1E5;a*=1E5;g.rotate(Nb(h),Nb(e),Nb(d));g.scale(1,1,1);g.translate(b,c,a);d=g;e=new R;e.A=d.m22;e.G=d.B;e.H=d.m21;e.D=d.H;e.m11=d.A;e.m12=d.G;e.B=d.m12;e.m21=d.D;e.m22=d.m11;e.v=d.m32;e.m31=d.v;e.m32=d.m31;d=e;e=new R;e.A=d.A;e.G=d.G;e.H=d.H;e.D=d.B;e.m11=d.m21;e.m12=d.m22;e.B=-d.D;e.m21=-d.m11;e.m22=-d.m12;e.v=d.v;e.m31=d.m32;e.m32=-d.m31;return e};function ej(){this.actions={};this.Ra=this.oa=this.Aa=0;this.ed=this.sc=-1;this.Hg=2/3}
function fj(a){return a.Ra+a.oa+a.Aa}
function gj(a){var b=new G(a.v,a.m31,a.m32);a=new G(-a.B,-a.m21,-a.m22);var c=null,d=1E8,e=ge(b,new G(a.x*d,a.y*d,a.z*d));e&&(c=e,d=c.d);e=p(u.o.Fc);for(var h=e.next();!h.done;h=e.next())if(h=h.value,h.Hb||!(u.m>h.sa)){var g=Ki(b,a,h.b,h.Ba,h.jb+h.Ba);!g||0>g.t||g.t>=d||(g.item=h,c=g,g.oc=a,d=c.t)}if(c&&!isNaN(c.item.pe))return c;e=p(Ti);for(h=e.next();!h.done;h=e.next())if(h=h.value,g=Pb(b,a,h.b,h.pe)){var k=new Hi;k.t=g.ra;k.p=new G(b.x+a.x*k.t,b.y+a.y*k.t,b.z+a.z*k.t);k.n=new G(k.p.x-h.b.x,k.p.y-
h.b.y,k.p.z-h.b.z);k.n.na(1);0>k.t||k.t>=d||(k.item=h,k.sg=!0,c=k,d=c.t)}return c}
function hj(a,b,c){function d(l){l=new ij(l);l.transform.v=a.p.x;l.transform.m31=a.p.y;l.transform.m32=a.p.z;W(l,u.cc);l.create();l.step()}function e(){var l=new jj;l.Sf=120*(x()+.5);l.Da=2E4;l.transform.v=a.p.x;l.transform.m31=a.p.y;l.transform.m32=a.p.z;l.g.x=a.n.x;l.g.y=a.n.y;l.g.z=a.n.z;l.g.scale(2E4*x()+1E4);W(l,u.cc);l.create();l.step()}if(a.item instanceof Yi){var h=new R,g=new G,k=new G,m=a.oc.$();Wb(m,g,k);h.Zf(g);h.$f(k);h.ag(m);$c(h,a.p);kj(a.item,h,c);W(new lj,u.Ui);a.item.Ud(b)}else a.item instanceof
Wi?(d(31250),e(),a.item.Ud(b)):a.item instanceof Si?(d(31250),e(),a.item.Ud(b)):(d(12500),e(),gf(u.o.Ch,new G(2343.75*Math.round(a.p.x/2343.75),2343.75*Math.round(a.p.y/2343.75),2343.75*Math.round(a.p.z/2343.75)),a.n,Math.PI,18750,fb(16),16))}function mj(a){ej.call(this,a);this.sc=360;this.ed=30;this.Ra=1;this.oa=this.ed-this.Ra;this.Aa=this.sc-this.oa-this.Ra;this.Hg=1}mj.prototype=Object.create(ej.prototype);mj.prototype.constructor=mj;
mj.prototype.fire=function(){var a=u.m-this.Ja;this.Kb();if(0==a){u.i.ea.get("CarbineFire01").play({gain:.5,pitch:1.5});u.i.ea.get("CarbineFire02").play({gain:1,pitch:1.5});this.C.Ra=0;if(0>=this.C.oa){0>=this.C.Aa&&(this.C.Aa=this.C.sc-fj(this.C));var b=Math.min(this.C.ed-this.C.oa,this.C.Aa);this.C.oa+=b;this.C.Aa-=b}1<=this.C.oa&&(--this.C.oa,this.C.Ra=1);u.o.Ld();this.Ub+=35;this.pb=cj.N(.053697,.319573,-.058355,-.833,.006,-179.61);b=this.Oc;b.Oa=1;var c=255*(4*x()+1)/12&255;b.color.r=c;b.color.Ca=
c;b.color.Y=c;b.scale=x()+1;b.Gb=Ob(db());c=new R;c.translate(0,-35E3,0);Xc(this.pb,c,b.transform);b=(new R).rotate(0,Nb(2.5*x()),0);c=(new R).rotate(0,0,x()*Math.PI*2);var d=nj(this.aa);Xc(d,c,d);Xc(d,b,d);b=this.C.ic(d);b=p(b);for(c=b.next();!c.done;c=b.next())hj(c.value,120,1.2);b=new oj("CartridgeCarbineSpent");b.gh=Nb(6*(3*x()+1));b.transform.m31-=2100;c=new R;Xc(this.aa.jc.I,this.pb,c);Xc(c,b.transform,b.transform);b.g.x-=3E3*(2*x()+1);b.g.z=-b.g.x;Yc(c,b.g,b.g);b.b.set(b.transform.v,b.transform.m31,
b.transform.m32);b.g.add(this.aa.g);Sc(b.g,b.Na);W(b,u.Rc);b.create();180<=this.Ub&&(this.Ub-=180,b=new vj,b.Da=6E4,b.transform.m31-=45E3,c=new R,Xc(this.aa.jc.I,this.pb,c),Xc(c,b.transform,b.transform),b.g.y=-37500,Yc(c,b.g,b.g),b.g.add(this.aa.g),Sc(b.g,b.Na),b.U=this.aa.U,W(b,u.cc),b.create(),b.step(),this.xb.push(b));3<this.xb.length&&(W(this.xb[0],null),this.xb.splice(0,1))}1==a&&(this.Oc.Oa=0);2==a&&(this.aa.Wa+=Nb(1));if(3<=a){if(dj(this))return;if(!this.Nb&&this.cb){this.action="fire";this.Ja=
u.m+1;return}}4<=a?this.action="ready":(a=("00"+a).slice(-2),this.kb=u.i.O.get("CarbineFire"+a)||u.i.O.get("CarbineEquip13"))};
mj.prototype.aimFire=function(){var a=u.m-this.Ja;this.Kb();if(0==a){u.i.ea.get("CarbineFire01").play({gain:.5,pitch:1.5});u.i.ea.get("CarbineFire02").play({gain:1,pitch:1.5});this.C.Ra=0;if(0>=this.C.oa){0>=this.C.Aa&&(this.C.Aa=this.C.sc-fj(this.C));var b=Math.min(this.C.ed-this.C.oa,this.C.Aa);this.C.oa+=b;this.C.Aa-=b}1<=this.C.oa&&(--this.C.oa,this.C.Ra=1);u.o.Ld();this.Ub+=35;this.pb=cj.N(0,.270042,-.06106,0,0,180);b=this.Oc;b.Oa=1;var c=255*(4*x()+1)/12&255;b.color.r=c;b.color.Ca=c;b.color.Y=
c;b.scale=x()+1;b.Gb=Ob(db());c=new R;c.translate(0,-35E3,0);Xc(this.pb,c,b.transform);b=(new R).rotate(0,Nb(1*x()),0);c=(new R).rotate(0,0,x()*Math.PI*2);var d=nj(this.aa);Xc(d,c,d);Xc(d,b,d);b=this.C.ic(d);b=p(b);for(c=b.next();!c.done;c=b.next())hj(c.value,120,1.2);b=new oj("CartridgeCarbineSpent");b.gh=Nb(6*(3*x()+1));b.transform.m31-=2100;c=new R;Xc(this.aa.jc.I,this.pb,c);Xc(c,b.transform,b.transform);b.g.x-=3E3*(2*x()+1);b.g.z=-b.g.x;Yc(c,b.g,b.g);b.b.set(b.transform.v,b.transform.m31,b.transform.m32);
b.g.add(this.aa.g);Sc(b.g,b.Na);W(b,u.Rc);b.create();210<=this.Ub&&(this.Ub-=210,b=new vj,b.Da=4E4,b.scale=1,b.transform.m31-=45E3,c=new R,Xc(this.aa.jc.I,this.pb,c),Xc(c,b.transform,b.transform),b.g.y=-2E4,Yc(c,b.g,b.g),b.g.add(this.aa.g),Sc(b.g,b.Na),b.U=this.aa.U,W(b,u.cc),b.create(),b.step(),this.xb.push(b));3<this.xb.length&&(W(this.xb[0],null),this.xb.splice(0,1))}1==a&&(this.Oc.Oa=0);2==a&&(this.aa.Wa+=Nb(1));if(3<=a){if(dj(this))return;if(this.Nb&&this.cb){this.action="aimFire";this.Ja=u.m+
1;return}}4<=a?this.action="ready":(a=("00"+a).slice(-2),this.kb=u.i.O.get("CarbineAimFire"+a)||u.i.O.get("CarbineAim03"))};
mj.prototype.equip=function(){var a=u.m-this.Ja;9;if(!dj(this)){this.Tb=this.C.Ra;this.Ef=this.Df=0;9==a&&(this.aa.Wa+=Nb(1));a=Math.floor(a/3);if(9<=a)if(this.C.af.call(this),1==this.focus){if(this.cb){this.action="aimFire";this.Ja=u.m+1;return}}else if(0==this.focus&&this.cb){this.action="fire";this.Ja=u.m+1;return}14<=a?this.action="ready":0==this.focus&&(a=("00"+a).slice(-2),this.kb=u.i.O.get("CarbineEquip"+a))}};
mj.prototype.ready=function(){dj(this)||(this.Kb(),this.C.af.call(this),1==this.focus?this.cb&&(this.action="aimFire",this.Ja=u.m+1):0==this.focus&&this.cb&&(this.action="fire",this.Ja=u.m+1))};mj.prototype.af=function(){this.Nb?(this.focus+=1/6,1<this.focus&&(this.focus=1),this.Tb=!1):this.Tb=!0;if(0<this.focus){var a=Math.floor(3*this.focus);a=("00"+a).slice(-2);this.kb=u.i.O.get("CarbineAim"+a)||u.i.O.get("CarbineEquip13")}else this.kb=u.i.O.get("CarbineEquip13")};
mj.prototype.ah=function(a){var b=1E8,c=null,d=this.ic(a)[0];if(d){if(!isNaN(d.item.pe))return d;c=d;b=c.d}d=new G(a.v,a.m31,a.m32);var e=new G(-a.B,-a.m21,-a.m22);a=[];a.cmp=function(l,n){return l.t<n.t?-1:l.t>n.t?1:l.item.index<n.item.index?-1:l.item.index>n.item.index?1:0};for(var h=p(Ti),g=h.next();!g.done;g=h.next()){g=g.value;var k=Pb(d,e,g.b,g.pe);if(k){var m=new Hi;m.t=k.ra;m.p=new G(d.x+e.x*m.t,d.y+e.y*m.t,d.z+e.z*m.t);m.n=new G(m.p.x-g.b.x,m.p.y-g.b.y,m.p.z-g.b.z);m.n.na(1);0>m.t||m.t>=
b||(m.item=g,m.sg=!0,He(a,m))}}b=null;e=d=NaN;a=p(a);for(h=a.next();!h.done;h=a.next())h=h.value,h.item.Xd>d||h.item.Xd==d&&h.t>e||(b=h,d=h.item.Xd,e=h.t);return b?b:c};
mj.prototype.ic=function(a){var b=new G(a.v,a.m31,a.m32),c=new G(-a.B,-a.m21,-a.m22),d=1E8;if(a=ge(b,new G(c.x*d,c.y*d,c.z*d)))d=a.d;var e=[];e.cmp=function(m,l){return m.t<l.t?-1:m.t>l.t?1:m.item.index<l.item.index?-1:m.item.index>l.item.index?1:0};for(var h=p(u.o.Fc),g=h.next();!g.done;g=h.next())if(g=g.value,g.Hb||!(u.m>g.sa)){var k=Ki(b,c,g.b,g.Ba,g.jb+g.Ba);!k||0>k.t||k.t>=d||(k.item=g,k.oc=c,He(e,k))}b=null;d=c=NaN;e=p(e);for(h=e.next();!h.done;h=e.next())h=h.value,h.item.Xd>c||h.item.Xd==c&&
h.t>d||(b=h,c=h.item.Xd,d=h.t);e=[];b&&e.push(b);a&&e.push(a);return e};function wj(a){ej.call(this,a);this.sc=24;this.oa=this.Ra=this.ed=0;this.Aa=this.sc-this.Ra;this.fh=!1}wj.prototype=Object.create(ej.prototype);wj.prototype.constructor=wj;
wj.prototype.equip=function(){var a=u.m-this.Ja+9;dj(this)||(this.Tb=this.C.Ra,9==a&&(this.aa.Wa+=Nb(1)),a=Math.floor(a/3),9<=a&&this.cb&&this.C.Ra?(this.action="fire",this.Ja=u.m+1,this.cb=0):9<=a&&(this.Nb||0>=this.C.Ra&&0<this.C.Aa)?(this.action="cycleOpen",this.Ja=u.m+1-6):14<=a?this.action="ready":(a=("00"+a).slice(-2),this.kb=u.i.O.get("ShotgunEquip"+a),this.Ef=this.Df=0))};
wj.prototype.ready=function(){dj(this)||(this.Tb=this.C.Ra,this.cb&&this.C.Ra?(this.action="fire",this.Ja=u.m+1,this.cb=0):this.Nb?(this.action="cycleOpen",this.Ja=u.m+1,this.Tb=!1):(this.Kb(),this.kb=u.i.O.get("ShotgunEquip13")))};
wj.prototype.fire=function(){var a=u.m-this.Ja;this.Kb();this.Tb=!1;if(0==a){u.i.ea.get("ShotgunFire01").play({gain:1,pitch:.75});u.i.ea.get("explode01").play({gain:.5,pitch:1.5});this.C.Ra=0;this.C.fh=!0;u.o.Ld();this.pb=cj.N(.04499,.31957,-.038305,-.596,.007,-179.3);var b=this.Oc;b.Oa=1;var c=255*(x()+4)/5&255;b.color.r=c;b.color.Ca=c;b.color.Y=c;b.scale=x()+1;b.Gb=Ob(db());c=new R;c.translate(0,-4E4,0);Xc(this.pb,c,b.transform);b=nj(this.aa);var d=wj.lb.length;c=Array(d);for(var e=0;e<d;e++){var h=
fb(e+1);h!=e&&(c[e]=c[h]);c[h]=e}d=x()*Math.Fe;for(e=0;e<c.length;e++){h=(new R).rotate(0,wj.lb[c[e]],0);var g=(new R).rotate(0,0,d+e*Math.Fe/9),k=new R;Xc(b,g,k);Xc(k,h,k);h=this.C.ic(k);h=p(h);for(g=h.next();!g.done;g=h.next())hj(g.value,360,1.2)}b=new vj;b.Da=6E4;b.scale=1;b.transform.m31-=45E3;c=new R;Xc(this.aa.jc.I,this.pb,c);Xc(c,b.transform,b.transform);b.g.y=-37500;Yc(c,b.g,b.g);b.g.add(this.aa.g);Sc(b.g,b.Na);b.U=this.aa.U;W(b,u.cc);b.create();b.step();this.xb.push(b);3<this.xb.length&&
(W(this.xb[0],null),this.xb.splice(0,1))}1==a&&(this.Oc.Oa=0);2==a&&(this.aa.Wa+=Nb(8));4<=a&&this.Nb?(this.action="cycleOpen",this.Ja=u.m+1):12<=a?dj(this)||(this.action="ready"):(a=Math.floor(a/2),a=("00"+a).slice(-2),this.kb=u.i.O.get("ShotgunFire"+a)||u.i.O.get("ShotgunEquip13"))};
wj.prototype.cycleOpen=function(){var a=u.m-this.Ja;if(!dj(this)){this.Tb=!1;this.Kb();12==a&&u.i.ea.get("ShotgunOpen01").play({gain:1});if(21==a&&(this.aa.Wa+=Nb(1),this.C.Aa+=this.C.Ra,this.C.Ra=0,u.o.Ld(),this.pb=cj.N(-.018192,.25469,-.045699,-19.3,39.9,177),this.C.fh)){var b=new oj("CartridgeShotgunSpent");b.gh=Nb(24*(1*x()+1));b.transform.m31+=6E3;var c=new R;Xc(this.aa.jc.I,this.pb,c);Xc(c,b.transform,b.transform);b.g.x-=2E3*(2*x()+1);b.g.z=2*-b.g.x;Yc(c,b.g,b.g);b.b.set(b.transform.v,b.transform.m31,
b.transform.m32);b.g.add(this.aa.g);Sc(b.g,b.Na);W(b,u.Rc);b.create();this.C.fh=!1}a=Math.floor(a/3);if(9<=a&&(a=9,!this.Nb)){this.action="cycleShut";this.Ja=u.m+1-27;return}a=("00"+a).slice(-2);this.kb=u.i.O.get("ShotgunCycle"+a)||u.i.O.get("ShotgunEquip13")}};
wj.prototype.cycleShut=function(){var a=u.m-this.Ja;this.Kb();30==a&&(u.i.ea.get("ShotgunShut01").play({gain:1}),0>=this.C.Aa&&(this.C.Aa=this.C.sc),1<=this.C.Aa&&(--this.C.Aa,this.C.Ra=1),--this.Aa,u.o.Ld());a=Math.floor(a/3);13==a&&(this.Tb=this.C.Ra);13<=a&&dj(this)||(16<=a?this.action="ready":(a=("00"+a).slice(-2),this.kb=u.i.O.get("ShotgunCycle"+a)||u.i.O.get("ShotgunEquip13")))};wj.prototype.ah=function(a){if(a=gj(a))a.sg=!1;return a};
wj.prototype.ic=function(a){var b=new G(a.v,a.m31,a.m32);a=new G(-a.B,-a.m21,-a.m22);var c=1E8,d=ge(b,new G(a.x*c,a.y*c,a.z*c));d&&(c=d.d);var e=[];e.cmp=function(m,l){return m.t<l.t?-1:m.t>l.t?1:m.item.index<l.item.index?-1:m.item.index>l.item.index?1:0};for(var h=p(u.o.Fc),g=h.next();!g.done;g=h.next())if(g=g.value,g.Hb||!(u.m>g.sa)){var k=Ki(b,a,g.b,g.Ba,g.jb+g.Ba);!k||0>k.t||k.t>=c||(k.item=g,k.oc=a,He(e,k))}d&&e.push(d);return e};
function xj(a){ej.call(this,a);this.sc=72;this.ed=6;this.oa=this.ed-this.Ra;this.Aa=this.sc-this.oa-this.Ra}xj.prototype=Object.create(ej.prototype);xj.prototype.constructor=xj;
xj.prototype.equip=function(){var a=u.m-this.Ja;if(!dj(this)){this.Tb=!0;0==a&&(this.aa.Wa+=Nb(1));a=Math.floor(a/3);if(5<=a)if(this.C.af.call(this),1==this.focus){if(this.cb&&this.C.oa){this.action="aimFire";this.Ja=u.m+1;return}}else if(0==this.focus&&this.cb&&this.C.oa){this.action="fire";this.Ja=u.m+1;return}8<=a?this.action="ready":0==this.focus&&(a=("00"+a).slice(-2),this.kb=u.i.O.get("RevolverEquip"+a))}};
xj.prototype.ready=function(){if(!dj(this)){if(1==this.focus){if(this.cb&&this.C.oa){this.action="aimFire";this.Ja=u.m+1;return}}else if(0==this.focus&&this.cb&&this.C.oa){this.action="fire";this.Ja=u.m+1;return}this.Kb();this.C.af.call(this)}};
xj.prototype.fire=function(){var a=u.m-this.Ja;this.Kb();if(4==a){u.i.ea.get("CarbineFire01").play({gain:1});u.i.ea.get("ShotgunFire01").play({gain:1,pitch:2});this.cb=0;this.C.oa--;if(0>=this.C.oa){0>=this.C.Aa&&(this.C.Aa=this.C.sc-fj(this.C));var b=Math.min(this.C.ed-this.C.oa,this.C.Aa);this.C.oa+=b;this.C.Aa-=b}u.o.Ld();this.pb=cj.N(.032225,.49195,-.022213,.367,-.151,.525);b=this.Oc;b.Oa=1;var c=255*(x()+4)/5&255;b.color.r=c;b.color.Ca=c;b.color.Y=c;b.scale=x()+1;b.Gb=Ob(db());c=new R;c.translate(0,
-21E3,0);Xc(this.pb,c,b.transform);b=new vj;b.Da=6E4;b.scale=1;b.transform.m31-=45E3;c=new R;Xc(this.aa.jc.I,this.pb,c);Xc(c,b.transform,b.transform);b.g.y=-37500;Yc(c,b.g,b.g);b.g.add(this.aa.g);Sc(b.g,b.Na);b.U=this.aa.U;W(b,u.cc);b.create();b.step();this.xb.push(b);b=(new R).rotate(0,Nb(0*x()),0);c=(new R).rotate(0,0,x()*Math.PI*2);var d=nj(this.aa);Xc(d,c,d);Xc(d,b,d);b=this.C.ic(d);b=p(b);for(c=b.next();!c.done;c=b.next())hj(c.value,360,1.7)}5==a&&(this.Oc.Oa=0);7==a&&(this.aa.Wa+=Nb(4));7<=
a&&dj(this)||(8<=a&&(a=8+Math.floor((a-8)/2)),10<=a&&!this.Nb&&this.cb&&this.C.oa?(this.action="fire",this.Ja=u.m+1):16<=a?this.action="ready":(a=("00"+a).slice(-2),this.kb=u.i.O.get("RevolverFire"+a)||u.i.O.get("RevolverEquip07")))};
xj.prototype.aimFire=function(){var a=u.m-this.Ja;this.Kb();if(4==a){u.i.ea.get("CarbineFire01").play({gain:1});u.i.ea.get("ShotgunFire01").play({gain:1,pitch:2});this.cb=0;this.C.oa--;if(0>=this.C.oa){0>=this.C.Aa&&(this.C.Aa=this.C.sc-fj(this.C));var b=Math.min(this.C.ed-this.C.oa,this.C.Aa);this.C.oa+=b;this.C.Aa-=b}u.o.Ld();this.pb=cj.N(0,.49195,-.017475,-.713,0,0);b=this.Oc;b.Oa=1;var c=255*(x()+4)/5&255;b.color.r=c;b.color.Ca=c;b.color.Y=c;b.scale=x()+1;b.Gb=Ob(db());c=new R;c.translate(0,-21E3,
0);Xc(this.pb,c,b.transform);b=new vj;b.Da=6E4;b.scale=1;b.transform.m31-=45E3;c=new R;Xc(this.aa.jc.I,this.pb,c);Xc(c,b.transform,b.transform);b.g.y=-37500;Yc(c,b.g,b.g);b.g.add(this.aa.g);Sc(b.g,b.Na);b.U=this.aa.U;W(b,u.cc);b.create();b.step();this.xb.push(b);b=(new R).rotate(0,Nb(0*x()),0);c=(new R).rotate(0,0,x()*Math.PI*2);var d=nj(this.aa);Xc(d,c,d);Xc(d,b,d);b=this.C.ic(d);b=p(b);for(c=b.next();!c.done;c=b.next())hj(c.value,360,1.7)}5==a&&(this.Oc.Oa=0);7==a&&(this.aa.Wa+=Nb(2));7<=a&&dj(this)||
(8<=a&&(a=8+Math.floor((a-8)/2)),10<=a&&this.Nb&&this.cb&&this.C.oa?(this.action="aimFire",this.Ja=u.m+1):16<=a?this.action="ready":(a=("00"+a).slice(-2),this.kb=u.i.O.get("RevolverAimFire"+a)||u.i.O.get("RevolverAim03")))};xj.prototype.af=function(){this.Nb?(this.focus+=1/6,1<this.focus&&(this.focus=1),this.Tb=!1):this.Tb=!0;if(0<this.focus){var a=Math.floor(3*this.focus);a=("00"+a).slice(-2);this.kb=u.i.O.get("RevolverAim"+a)||u.i.O.get("RevolverEquip07")}else this.kb=u.i.O.get("RevolverEquip07")};
xj.prototype.ah=gj;xj.prototype.ic=function(a){var b=new G(a.v,a.m31,a.m32),c=new G(-a.B,-a.m21,-a.m22),d=1E8;if(a=ge(b,new G(c.x*d,c.y*d,c.z*d)))d=a.d;var e=[];e.cmp=function(m,l){return m.t<l.t?-1:m.t>l.t?1:m.item.index<l.item.index?-1:m.item.index>l.item.index?1:0};for(var h=p(u.o.Fc),g=h.next();!g.done;g=h.next())if(g=g.value,g.Hb||!(u.m>g.sa)){var k=Ki(b,c,g.b,g.Ba,g.jb+g.Ba);!k||0>k.t||k.t>=d||(k.item=g,k.oc=c,He(e,k))}b=[];e.length&&b.push(e[0]);a&&b.push(a);return b};
function oj(a){Ei.call(this,a);this.ib=12500;this.ve=1;this.start=u.m;this.pi=new G(x()-.5,x()-.5,x()-.5);this.pi.na(1)}oj.prototype=Object.create(Ei.prototype);oj.prototype.constructor=oj;oj.prototype.create=function(){Ei.prototype.create.call(this);var a=new Le(u.i.Fb.get(this.name));a.la=this.I;a.transform.scale(.1,.1,.1);a.transform.rotate(0,-90,0);W(a,this);a.create();id(a,this.U)};
oj.prototype.step=function(){this.transform.$g(this.pi,this.gh);30==u.m-this.start&&(u.i.ea.get("shellCasing0"+(fb(3)+1)).play({gain:.625}),this.remove());Ei.prototype.step.call(this)};function lj(a){u.Node.call(this,a);this.sa=u.m}lj.prototype=Object.create(u.Node.prototype);lj.prototype.constructor=lj;lj.prototype.step=function(){u.Node.prototype.step.call(this);var a=u.m-this.sa-6;0>a||(0==a&&u.i.ea.get(gb(["woodSnap01","woodSnap02","woodSnap03"])).play({gain:10/60}),5<=(1<=a?a-1:0)&&this.remove())};
var Ti=[];function Vi(){var a=Ti.indexOf(this);0>a||Ti.splice(a,1)};function $i(a){Ii.call(this,a);this.ve=82;this.hf=0;this.Ba=4E4;this.Gc=18E4;this.zg=9E4;this.jb=.5*(this.Gc-2*this.Ba-6E4);this.mh=12E4;this.yc=9E3;this.ue=2/3*this.yc;this.Rf=Ii.qc(125E3);this.ib=2E5;this.If=16;this.Mf=this.Nf=this.Kb=this.md=this.kg=this.Wa=this.Ge=this.xf=0;this.Eb=5;this.Xh=this.Mi=-Infinity;this.Yh=Number.NEGATIVE_INFINITY;this.Zh=4E5}$i.prototype=Object.create(Ii.prototype);f=$i.prototype;f.constructor=$i;
f.create=function(){Ei.prototype.create.call(this);var a=this.ec=new we("worldCamera");a.ef=2E4;a.Re=5E7;a.la=this.I;W(a,this);u.o.Ga=a;a=this.jc=new we("selfCamera");a.la=this.ec.I;W(a,u.Rc);a=this.ub=new cj(this);a.Oa=0;W(a,u.Rc);a.create();a=new xj(this.ub);a.Ng=["KeyQ","Digit1"];this.ub.Of.push(a);a=new mj(this.ub);a.Ng=["KeyE","Digit2"];this.ub.Of.push(a);a=new wj(this.ub);a.Ng=["KeyC","Digit3"];this.ub.Of.push(a)};
f.step=function(){Ii.prototype.step.call(this);if(X.lock){var a=1;this.ub.C&&(a=Qa(1,this.ub.C.Hg,this.ub.focus));a=76E4*a;this.xf-=X.Ib.x*a;this.Ge+=X.Ib.y*a}this.Ge=Pa(this.Ge,-1073741824,1073741824);a=Ob(this.xf);var b=Ob(this.Ge);Wc(this.transform);this.transform.rotate(a,0,0);Wc(this.ec.transform);this.ec.transform.rotate(0,b,0);u.ni||(this.ec.transform.rotate((x()-.5)*this.Wa,(x()-.5)*this.Wa,0),this.Wa*=.8125);0==(u.m&1)&&(this.Kd<u.m-1?(this.kg*=.75,this.Kb*=.75,this.Nf*=.75):(a=this.Vd*Math.PI/
this.If,this.kg=6E3*Math.abs(Math.sin(a)),this.Nf=Math.sin(a)*Math.PI/210,this.Kb=(1-Math.abs(Math.sin(a)))*Math.PI/210),this.Mf-=Nb(3),0>this.Mf&&(this.Mf=0));this.ec.transform.m31=this.jb+this.Ba-6E3-6E3+this.kg;a=1;this.ub.C&&(a=Qa(1,this.ub.C.Hg,this.ub.focus));this.jc.wc=Nb(24*a);this.ec.wc=Nb(30*a);a=this.ec.I;b=new G(-a.B,-a.m21,-a.m22);(a=ge(new G(a.v,a.m31,a.m32),new G(5E5*b.x,5E5*b.y,5E5*b.z)))&&a.item instanceof Og&&0==a.item.state&&0==a.item.open&&(a.item.state=1,a.item.Pd=4*Math.floor(u.m/
4),a.item.wf=NaN);if(!(2>u.m-this.Yh)){a=this.Zh;a*=a;b=null;var c=ie(this.b,this.Zh);c=p(c);for(var d=c.next();!d.done;d=c.next())for(d=d.value.Ug.first();null!=d.item;d=d.next)if(d.item instanceof Ui&&!d.item.ne){var e=Qc(this.b,d.item.b,new G(0,0,0)).se();e<a&&(a=e,b=d.item)}b&&(a=b,a.Hb&&(a.Hb=!1,zi.remove(a)),a.ne=this,this.Yh=u.m)}};
f.Oh=function(){var a=new G(0,0,0);Gd.d.KeyW&&--a.z;Gd.d.KeyS&&(a.z+=1);Gd.d.KeyA&&--a.x;Gd.d.KeyD&&(a.x+=1);a.na(1)?(this.md+=1/6,1<this.md&&(this.md=1)):(this.md-=1/6,0>this.md&&(this.md=0));return a};f.Nh=function(){Gd.p.Space&&(this.Mg=u.m)};
function nj(a){if(!a.Ad||!a.sh){var b=new R;b.set(a.ec.I);return b}b=new G(a.Ad.b.x+2E4*(x()-.5),a.Ad.b.y+2E4*(x()-.5)+5E4,a.Ad.b.z+2E4*(x()-.5));b=Qc(Zc(a.ec.I),b,new G).normalize();var c=new G(b.z,0,-b.x),d=new G(0,1,0);Xb(b,c,d).na(1);Xb(d,b,c);var e=new R;e.A=c.x;e.G=c.y;e.H=c.z;e.D=d.x;e.m11=d.y;e.m12=d.z;e.B=b.x;e.m21=b.y;e.m22=b.z;e.v=a.ec.I.v;e.m31=a.ec.I.m31;e.m32=a.ec.I.m32;return e};function Yi(){Ii.call(this,"mantato");this.ve=82;this.hf=0;this.Ba=25E3;this.Gc=2E5;this.zg=2*this.Ba;this.jb=.5*this.Gc-this.Ba;this.mh=4*this.Ba;this.yc=1E4;this.ue=2/3*this.yc;this.Rf=Ii.qc(3E5);this.ib=2E5;this.sa=u.m+fb(30);this.Xd=-Infinity;this.Hb=!0;this.Eb=360;this.Xa=[];this.Jc=[];return this}Yi.prototype=Object.create(Ii.prototype);Yi.prototype.constructor=Yi;Yi.yb=12;Yi.va=NaN;
Yi.Xc=function(){Yi.T=u.i.Ya.get("defaultMaterial");var a=u.i.Ya.get("monsterSkin").$();a.name="monsterSplatter";a.qa=1;u.i.Ya.add(a);yj.w=u.i.ia.get("gib");yj.fa=u.i.O.get("spudGib01");a=[];var b=new R;b.A=1;b.G=0;b.H=-0;b.D=0;b.m11=1;b.m12=0;b.B=0;b.m21=-0;b.m22=1;b.v=0;b.m31=0;b.m32=-0;a.push(b);b=new R;b.A=.9916;b.G=-.1173;b.H=.055;b.D=.1259;b.m11=.9725;b.m12=-.1958;b.B=-.0305;b.m21=.201;b.m22=.9791;b.v=-3498;b.m31=3796;b.m32=6804;a.push(b);b=new R;b.A=.9749;b.G=-.1934;b.H=.1102;b.D=.2213;b.m11=
.8963;b.m12=-.3843;b.B=-.0244;b.m21=.399;b.m22=.9166;b.v=-6400;b.m31=-2683;b.m32=15101;a.push(b);b=new R;b.A=.9601;b.G=-.2246;b.H=.1669;b.D=.2797;b.m11=.7517;b.m12=-.5972;b.B=.0087;b.m21=.62;b.m22=.7845;b.v=-8393;b.m31=-17164;b.m32=25181;a.push(b);b=new R;b.A=.9541;b.G=-.2123;b.H=.2114;b.D=.2942;b.m11=.5306;b.m12=-.795;b.B=.0566;b.m21=.8206;b.m22=.5686;b.v=-9429;b.m31=-39030;b.m32=35202;a.push(b);b=new R;b.A=.9591;b.G=-.1521;b.H=.2388;b.D=.2712;b.m11=.2519;b.m12=-.929;b.B=.0811;b.m21=.9557;b.m22=
.2828;b.v=-9721;b.m31=-68375;b.m32=44142;a.push(b);b=new R;b.A=.9359;b.G=-.2158;b.H=.2785;b.D=.2565;b.m11=-.1246;b.m12=-.9585;b.B=.2415;b.m21=.9685;b.m22=-.0613;b.v=-7782;b.m31=-63561;b.m32=42925;a.push(b);b=new R;b.A=.9573;b.G=-.1734;b.H=.2312;b.D=.1975;b.m11=-.1913;b.m12=-.9614;b.B=.2109;b.m21=.9661;b.m22=-.1489;b.v=-4587;b.m31=-61424;b.m32=39511;a.push(b);b=new R;b.A=.9812;b.G=-.1297;b.H=.143;b.D=.1237;b.m11=-.1466;b.m12=-.9814;b.B=.1482;b.m21=.9807;b.m22=-.1278;b.v=-2376;b.m31=-62808;b.m32=37771;
a.push(b);b=new R;b.A=.9889;b.G=-.134;b.H=.0638;b.D=.053;b.m11=-.0825;b.m12=-.9952;b.B=.1386;b.m21=.9875;b.m22=-.0745;b.v=-104;b.m31=-64955;b.m32=38224;a.push(b);b=new R;b.A=.9803;b.G=-.1963;b.H=.0226;b.D=.0119;b.m11=-.0555;b.m12=-.9984;b.B=.1973;b.m21=.979;b.m22=-.0521;b.v=2290;b.m31=-66053;b.m32=39447;a.push(b);b=new R;b.A=.9587;b.G=-.2839;b.H=.017;b.D=.0035;b.m11=-.0481;b.m12=-.9988;b.B=.2843;b.m21=.9577;b.m22=-.0451;b.v=4830;b.m31=-66621;b.m32=39607;a.push(b);b=new R;b.A=.939;b.G=-.3438;b.H=.0072;
b.D=-.0041;b.m11=-.0323;b.m12=-.9995;b.B=.3439;b.m21=.9385;b.m22=-.0317;b.v=6758;b.m31=-66864;b.m32=40168;a.push(b);b=new R;b.A=.9324;b.G=-.3614;b.H=5E-4;b.D=-.0114;b.m11=-.0308;b.m12=-.9995;b.B=.3612;b.m21=.9319;b.m22=-.0328;b.v=7520;b.m31=-66863;b.m32=40232;a.push(b);Yi.qc=a};f=Yi.prototype;
f.create=function(){this.ab=new R;this.m=this.ui=0;this.Hd=new R;this.Cf=0;this.vg=.5*this.Gc;this.w=u.i.ia.get("physicalCardThreshold");this.fa=u.i.O.get("monster02");this.color=Bc;this.Pb=16;this.transform.rotate(x()*Math.PI*2,0,0);jd(this,37500);this.pe=18E4;Ti.push(this);Ii.prototype.create.call(this);u.o.Fc.push(this)};
f.step=function(){if(this.Hb)u.m==this.sa+30&&(this.sa=u.m,this.g.set(x()-.5,0,x()-.5),this.g.na(1),this.transform.A=-this.g.z,this.transform.H=this.g.x,this.transform.B=this.g.x,this.transform.m22=this.g.z,this.g.scale(3E3));else{var a=u.m-this.sa-4;0>a&&(a=0);this.m=Math.floor(a/4);13<this.m&&(this.m=13);6==a&&u.o.rh(1);20==a&&(this.Cf=.5*-this.vg);24==a&&u.i.ea.get(hb("bodyThud01","bodyThud02")).play({gain:.5});120<=a&&this.remove()}this.y=this.b.y+2E3-.5*this.Gc;Ii.prototype.step.call(this)};
f.hi=function(){var a=Zc(this.I),b=Qc(Zc(u.Ga.I),a,new G),c=b.na(1);c=Math.min(1,c/(2*this.Gc));var d=new G(0,1,0),e=Xb(d,b,new G).normalize();Xb(b,e,d);var h=u.Ga.I.Kf(),g=u.Ga.I.ke();this.ab.Zf(Rc(u.Ga.I.Jf(),e,c).normalize());this.ab.$f(Rc(h,d,c).normalize());this.ab.ag(Rc(g,b,c).normalize());$c(this.ab,a);this.th?this.Hd.set(this.th[this.m]):(this.m=this.ui=0,this.Hd.reset(),this.Hd.rotate(this.ui*Math.PI/4,0,0));Xc(this.ab,this.Hd,this.Hd);this.ab.v+=this.ab.D*this.Cf;this.ab.m31+=this.ab.m11*
this.Cf;this.ab.m32+=this.ab.m12*this.Cf};
f.La=function(){Yi.va+=2;255<Yi.va&&(w.clear(w.STENCIL_BUFFER_BIT),Yi.va=130);u.mb(1);w.colorMask(!1,!1,!1,!1);w.stencilFunc(w.ALWAYS,Yi.va-128,255);w.stencilOp(w.KEEP,w.KEEP,w.REPLACE);var a=this.ab.ke(),b=Rb(a,Zc(this.ab));u.rb(Ue);u.Ua(u.i.ia.get("monoThresholdEffect"));u.Sb(0,u.i.O.get("smokePuff01"));Yi.T.bind();u.gb(0);u.Rb(0);u.w.J("color",Bc);for(var c=p(this.Xa),d=c.next();!d.done;d=c.next()){var e=d.value;d=this.Hd.$a(e.b,new G);if(!(0>Rb(d,a)-b)){var h=4>u.m-e.sa?1.4:1;e=(new Uc).set(e.ma);
e.A*=h;e.G*=h;e.D*=h;e.m11*=h;e=Vc(this.ab,e,new R);$c(e,d);u.w.J("modelMatrix",e);w.drawArrays(w.TRIANGLE_FAN,Ve(0,1),4)}}u.mb(2);w.colorMask(!0,!0,!0,!0);w.stencilFunc(w.GEQUAL,Yi.va-1,127);w.stencilOp(w.KEEP,w.KEEP,w.REPLACE);u.m==this.Tc+1?this.w=u.i.ia.get("flashCardThreshold"):u.m==this.Tc+3&&(this.w=u.i.ia.get("physicalCardThreshold"));u.rb(Ue);u.Ua(this.w);this.fa=this.Hb?u.i.O.get("monster02"):u.i.O.get("monsterDeath01");this.Pb=16;u.Sb(0,this.fa);Yi.T.bind();u.w.J("ambientLight",this.U.Qa,
!1);u.gb(0);u.Rb(0);u.w.J("color",this.color);a=new R;a.set(this.ab);b=this.vg;a.A*=b;a.G*=b;a.H*=b;a.D*=-b;a.m11*=-b;a.m12*=-b;u.w.J("modelMatrix",a);w.drawArrays(w.TRIANGLE_FAN,Ve(this.m,this.Pb),4);if("flashCardThreshold"!=this.w.name)for(u.mb(0),w.stencilFunc(w.EQUAL,Yi.va-1,255),w.stencilOp(w.KEEP,w.KEEP,w.KEEP),a=this.ab.ke(),b=Rb(a,Zc(this.ab)),u.rb(Ue),u.Ua(u.i.ia.get("monoEffect")),u.Sb(0,u.i.O.get("splatter01")),u.i.Ya.get("monsterSplatter").bind(),u.gb(1),u.Rb(0),u.w.J("ambientLight",this.U.Qa,
!1),u.w.J("color",yj.vc),c=p(this.Jc),d=c.next();!d.done;d=c.next())e=d.value,d=this.Hd.$a(e.b,new G),0>Rb(d,a)-b||(h=4>u.m-e.sa?1.4:1,e=(new Uc).set(e.ma),e.A*=h,e.G*=h,e.D*=h,e.m11*=h,e=Vc(this.ab,e,new R),$c(e,d),u.w.J("modelMatrix",e),w.drawArrays(w.TRIANGLE_FAN,Ve(0,1),4))};f.Ud=function(a){this.Hb&&(this.Tc=u.m,this.g.x=0,this.g.z=0,this.sa=u.m+90,this.Eb-=a,0>=this.Eb&&Zi(this))};function Zi(a){a.Hb&&(a.sa=u.m,Vi.call(a),a.vg=42.5*a.Gc/80,a.th=Yi.qc,a.Hb=!1)}
f.remove=function(){this.bg&&this.bg.remove();var a=u.o.Fc.indexOf(this);0<=a&&u.o.Fc.splice(a,1);Ii.prototype.remove.call(this);this.Hb&&Vi.call(this)};function aj(a,b){b=Qc(b,a.b,new G(0,0,0));b.y=0;b.na(1);a.transform.A=b.z;a.transform.H=-b.x;a.transform.B=b.x;a.transform.m22=b.z}
function kj(a,b,c){a.Xd=u.m;var d=c*(x()+1),e=new yj;e.frame=fb(16);e.Da=12E3*(x()+1);e.Da*=c;e.b.set(0,0,5E4);b.$a(e.b,e.b);e.g.x=5E3*(2*x()-1);e.g.y=5E3*(2*x()-1);e.g.z=2E4*(x()+1);Yc(b,e.g,e.g);e.Jd=Nb(60*(.25+x()));fb(2)||(e.Jd=-e.Jd);W(e,u.Sc);e.create();e=new yj;e.frame=fb(16);e.Da=8E3*(x()+1);e.Da*=c;e.b.set(0,0,5E4);b.$a(e.b,e.b);e.g.x=5E3*(2*x()-1);e.g.y=5E3*(2*x()-1);e.g.z=2E4*(x()+1);Yc(b,e.g,e.g);e.ge=yj.vc;W(e,u.Sc);e.create();c=Math.sqrt(3*c)+x()-.5;for(e=0;e<c;e++){var h=new yj;h.Sf=
120;h.frame=fb(16);h.Da=12E3;h.b.set(0,0,5E4);b.$a(h.b,h.b);h.g.x=2*x()-1;h.g.y=2*x()-1;h.g.z=2*x();h.g.na(1E4*(x()+1));h.g.y+=6E3*x();Yc(b,h.g,h.g);h.Jd=Nb(60*(.25+x()));fb(2)||(h.Jd=-h.Jd);fb(2)||(h.ge=yj.vc);W(h,u.Sc);h.create()}b=Zc(b);c=a.Hd;e=new R;h=c.A*-c.v+c.G*-c.m31+c.H*-c.m32;var g=c.D*-c.v+c.m11*-c.m31+c.m12*-c.m32,k=c.B*-c.v+c.m21*-c.m31+c.m22*-c.m32,m=c.D,l=c.B,n=c.G,v=c.m11,r=c.m21,q=c.H,t=c.m12,B=c.m22;e.A=c.A;e.D=n;e.B=q;e.v=h;e.G=m;e.m11=v;e.m21=t;e.m31=g;e.H=l;e.m12=r;e.m22=B;e.m32=
k;e.$a(b,b);c={};c.b=b;c.sa=u.m+1;e=7E3*d;h=fb(2)?e:-e;k=db()*(180/2147483648);g=Math.cos(k);k=Math.sin(k);c.ma=new Uc;c.ma.A=g*h;c.ma.G=k*h;c.ma.D=-k*e;c.ma.m11=g*e;a.Xa.push(c);a.Xa.splice(0,a.Xa.length-Yi.yb);c={};c.b=b;c.sa=u.m+1;d=7E3*d+3500;b=fb(2)?d:-d;h=db()*(180/2147483648);e=Math.cos(h);h=Math.sin(h);c.ma=new Uc;c.ma.A=e*b;c.ma.G=h*b;c.ma.D=-h*d;c.ma.m11=e*d;a.Jc.push(c);a.Jc.splice(0,a.Jc.length-Yi.yb)}
function yj(){u.ua.call(this,"SpudGib");Re.call(this);this.Pb=16;this.frame=0;this.Da=25E3;this.scale=1;this.ld=!fb(2);this.Gb=Ob(db());this.Jd=0;this.ib=2*this.Da;this.Pd=this.sa=u.m+4;this.g=new G(0,0,0);this.Sf=600;this.ge=yj.ge;this.vc=yj.vc}yj.prototype=Object.create(u.ua.prototype);yj.prototype.constructor=yj;yj.ge=new P(158,158,95,255);yj.vc=new P(255,255,128,255);
yj.prototype.create=function(){this.ud=this.b.$();this.transform.v=this.b.x;this.transform.m31=this.b.y;this.transform.m32=this.b.z;u.ua.prototype.create.call(this);var a=he(this.ud,this.g);a?(this.Ce=a.p,this.pf=a.n,this.ce=a.t):this.ce=Number.POSITIVE_INFINITY};
yj.prototype.step=function(){var a=u.m-this.Pd;0>a||(a<this.ce?this.aj?(this.b.y=this.ud.y+this.g.y*a,this.transform.m31=this.b.y):(this.b.set(this.ud.x+this.g.x*a,this.ud.y+.5*(2*this.g.y+yi.y*a)*a,this.ud.z+this.g.z*a),this.transform.v=this.b.x,this.transform.m31=this.b.y,this.transform.m32=this.b.z,u.m%3||(this.Gb+=this.Jd)):a==Math.ceil(this.ce)&&(this.b.set(this.Ce.x,this.Ce.y,this.Ce.z),this.transform.v=this.b.x,this.transform.m31=this.b.y,this.transform.m32=this.b.z,this.ge==this.vc&&(gf(u.o.Ag,
this.Ce,this.pf,Ob(db()),this.Da*this.scale*2.5,fb(4),4),this.remove()),-1==this.pf.y?(this.ud=this.b.$(),this.Pd=u.m+180+fb(360),this.g.set(0,0,0),this.Jd=0,(a=he(this.ud,this.g))?(this.Ce=a.p,this.pf=a.n,this.ce=a.t):this.ce=Number.POSITIVE_INFINITY):0==this.pf.y&&(this.ud=this.b.$(),this.Pd=u.m+180+fb(360),this.g.set(0,-500,0),this.aj=!0,(a=ge(this.ud,this.g,!0))?(this.Ce=a.p,this.pf=a.n,this.ce=a.t):this.ce=Number.POSITIVE_INFINITY)));u.m-this.sa>this.Sf&&this.remove();u.ua.prototype.step.call(this)};
yj.prototype.La=function(){Se.call(this,this.I);u.rb(Ue);u.Ua(yj.w);u.Sb(0,yj.fa);u.gb(0);u.mb(2);u.Rb(0);u.w.J("modelMatrix",this.I);u.w.J("color1",this.ge);u.w.J("color2",this.vc);u.w.J("ambientLight",this.U.Qa);w.drawArrays(w.TRIANGLE_FAN,Ve(this.frame,this.Pb),4);u.ua.prototype.La.call(this)};function Ui(a){Ei.call(this,"loot");a?this.species=a:this.species=gb(Ui.Za);this.Ba=37500;this.jb=0;this.hf=.8;this.sa=u.m+fb(600);this.Hb=!0}Ui.prototype=Object.create(Ei.prototype);Ui.prototype.constructor=Ui;
Ui.tf=function(){var a=[u.i.ea.get("coinPurse01"),u.i.ea.get("coinPurse02"),u.i.ea.get("coinPurse03"),u.i.ea.get("coinPurse04")],b=[u.i.ea.get("ingot01"),u.i.ea.get("ingot02")],c=[u.i.ea.get("gem01"),u.i.ea.get("gem02"),u.i.ea.get("gem03")],d=[u.i.ea.get("crumplePaper01"),u.i.ea.get("crumplePaper02")],e={Sa:u.i.Fb.get("moneyNugget"),value:1,ea:c};a={Sa:u.i.Fb.get("moneyCoin"),value:5,ea:a};d={Sa:u.i.Fb.get("moneyBundle"),value:25,ea:d};b={Sa:u.i.Fb.get("moneyBar"),value:125,ea:b};var h={Sa:u.i.Fb.get("gemRuby"),
value:2,ea:c},g={Sa:u.i.Fb.get("gemEmerald"),value:10,ea:c};c={Sa:u.i.Fb.get("gemSapphire"),value:50,ea:c};Ui.Za=[e,h,a,a,a,a,a,g,d,c,b]};Ui.ng=function(){for(var a=fb(200),b=[];a;){for(var c=0;c<Ui.Za.length&&!(Ui.Za[c].value>a);)c++;var d=1.75;d=1<=d?2-d:1/d;c=Math.floor(Math.pow(x(),d)*c);c=Ui.Za[c];a-=c.value;b.push(new Ui(c))}return b};
Ui.prototype.create=function(){this.transform.scale(1,1,1);var a=this.Sa=new Le(this.species.Sa);a.la=this.I;W(a,this);a.create();this.ib=1*a.src.ib;id(a,this.U);jd(a,18E3);Ei.prototype.create.call(this)};
Ui.prototype.step=function(){var a=u.m-this.sa;a=3*Math.floor(a/3);Wc(this.Sa.transform);this.Sa.transform.rotate((a+.5*Math.sin(a))/6,Math.PI/4,0);this.Hb?(60==u.m-this.sa&&(this.Hb=!1,zi.remove(this)),Ei.prototype.step.call(this)):(this.ne&&(a=Qc(new G(this.ne.b.x,this.ne.b.y,this.ne.b.z),this.b,new G(0,0,0)),a.se()<Math.pow(5E4,2)?(a=this.ne,gb(this.species.ea).play({gain:1}),a.Xh=u.m,this.remove()):(a.y*=5,a.na(1),this.b.x+=37500*a.x,this.b.y+=37500*a.y,this.b.z+=37500*a.z),this.transform.v=this.b.x,
this.transform.m31=this.b.y,this.transform.m32=this.b.z),u.ua.prototype.step.call(this));Ui.Xc(this)};Ui.prototype.remove=function(){u.ua.prototype.remove.call(this);zi.remove(this);this.Sa.remove()};Ui.Xc=function(a){a=a.U.Qa;a.x=Math.min(1,3*a.x);a.y=Math.min(1,3*a.y);a.z=Math.min(1,3*a.z)};function vj(a){u.ka.call(this,a);Re.call(this);this.w=u.i.ia.get("physicalCard");this.fa=u.i.O.get("smokePuff02");this.T=vj.T;this.color=new P(vj.color.r,vj.color.Ca,vj.color.Y,255);this.frame=0;this.Pb=16;this.g=new G;this.Na=new G;this.scale=1;this.Gb=Ob(db());this.sa=u.m}vj.prototype=Object.create(u.ka.prototype);vj.prototype.constructor=vj;vj.T=new ld;vj.T.qa=2;vj.color=new P(144,144,144,255);
vj.prototype.step=function(){var a=u.m-this.sa;a=Math.pow(a/540,.625);this.frame=Math.floor(9*a);this.alpha=.25*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.pa=this.alpha*vj.color.pa&255;this.transform.m31+=200;this.g.scale(.8125);a=new G(.5*this.Na.x+.5*this.g.x,.5*this.Na.y+.5*this.g.y,.5*this.Na.z+.5*this.g.z);this.transform.v+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.Na.set(this.g.x,this.g.y,this.g.z);u.ka.prototype.step.call(this)};
vj.prototype.La=function(){Te.call(this);u.ka.prototype.La.call(this)};function jj(a){u.ka.call(this,a);Re.call(this);this.w=u.i.ia.get("physicalCard");this.fa=u.i.O.get("smokePuff02");this.T=vj.T;this.color=new P(jj.color.r,jj.color.Ca,jj.color.Y,255);this.frame=0;this.Pb=16;this.g=new G;this.Na=new G;this.scale=1;this.Gb=Ob(db());this.U={Ma:4294967295,Qa:new G(1,1,1)};this.sa=u.m}jj.prototype=Object.create(u.ka.prototype);jj.prototype.constructor=jj;jj.color=new P(212,212,212,255);
jj.prototype.step=function(){var a=u.m-this.sa;a/=this.Sf;a=Math.pow(a,.75);this.frame=Math.floor(9*a);this.alpha=.375*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.pa=this.alpha*jj.color.pa&255;this.g.scale(.8125);var b=new G(.5*this.Na.x+.5*this.g.x,.5*this.Na.y+.5*this.g.y,.5*this.Na.z+.5*this.g.z);this.transform.v+=b.x;this.transform.m31+=b.y;this.transform.m32+=b.z;this.Na.set(this.g.x,this.g.y,this.g.z);if(0==a||0==u.m%4)a=Zc(this.transform),(b=ge(a,new G(0,-1E8,0),!0))&&ve(a,oe[b.item.Z],
this.U.Qa);u.ka.prototype.step.call(this)};jj.prototype.La=function(){Te.call(this);u.ka.prototype.La.call(this)};function zj(a){u.ka.call(this,a);Re.call(this);this.w=u.i.ia.get("spray");this.fa=u.i.O.get("spray01");this.T=zj.T;this.color=new P(yj.vc.r,yj.vc.Ca,yj.vc.Y,255);this.g=new G;this.Na=new G;this.scale=1;this.Gb=Ob(db());this.sa=u.m}zj.prototype=Object.create(u.ka.prototype);zj.prototype.constructor=zj;zj.T=new ld;zj.T.qa=0;
zj.prototype.step=function(){var a=u.m-this.sa;a/=this.oj;this.scale=15*a;1<=a&&this.remove();this.color.pa=254*(a+1)&255;this.g.add(yi);a=new G(.5*this.Na.x+.5*this.g.x,.5*this.Na.y+.5*this.g.y,.5*this.Na.z+.5*this.g.z);this.transform.v+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.Na.set(this.g.x,this.g.y,this.g.z);u.ka.prototype.step.call(this)};zj.prototype.La=function(){Te.call(this);u.ka.prototype.La.call(this)};
function bj(a,b){u.ka.call(this,b);Re.call(this);this.w=u.i.ia.get("image");this.fa=u.i.O.get("explode");this.T=bj.T;this.color=new P(255,255,255,255);this.scale=1;this.Da=a;this.ld=!fb(2);this.Gb=Ob(db());this.sa=u.m+1;this.Pb=16}bj.prototype=Object.create(u.ka.prototype);bj.prototype.constructor=bj;bj.T=new ld;bj.T.qa=1;
bj.prototype.step=function(){var a=u.m-this.sa;50<=a&&this.remove();this.scale+=.02;this.transform.m31+=3E3*(1-a/50);this.frame=Math.floor(16*(1-Math.pow(.9375,a)));a=255*(1-(a-15)/35);255<a&&(a=255);a&=255;this.color.r=a;this.color.Ca=a;this.color.Y=a;this.color.pa=a;u.ka.prototype.step.call(this)};bj.prototype.La=function(){Te.call(this);u.ka.prototype.La.call(this)};
function ij(a,b){u.ka.call(this,b);Re.call(this);this.w=u.i.ia.get("image");this.fa=u.i.O.get("bulletFlare01");this.T=ij.T;this.color=new P(255,255,255,0);this.scale=1;this.Da=a;this.ld=!fb(2);this.Gb=Ob(db());this.sa=u.m+1;this.Pb=4}ij.prototype=Object.create(u.ka.prototype);ij.prototype.constructor=ij;ij.T=new ld;ij.T.qa=1;ij.prototype.step=function(){var a=u.m-this.sa;0<=a&&(3<=a&&this.remove(),this.scale+=.25);this.frame=Math.floor(a);u.ka.prototype.step.call(this)};
ij.prototype.La=function(){Te.call(this);u.ka.prototype.La.call(this)};function Aj(){u.ua.call(this);this.dir=new G(0,0,0);this.speed=12500;return this}Aj.prototype=Object.create(u.ua.prototype);Aj.prototype.constructor=Aj;Aj.color=new P(255,255,255,192);
Aj.prototype.create=function(){var a=this.xh=new Re;a.w=u.i.ia.get("imageThreshold");a.fa=u.i.O.get("fireball");a.T=u.i.Ya.get("defaultMaterial");a.color=Aj.color;a.scale=1;a.Da=31250;a.ld=!1;a.Gb=Nb(180);a.Pb=4;a.la=this.I;W(a,u.cc);a.create();this.sa=u.m+1;u.ua.prototype.create.call(this)};
Aj.prototype.step=function(){var a=u.m-this.sa;this.xh.frame=a>>2&3;180<=a&&this.remove();(a=Aj.ic(this.b,this.dir,this.speed))?(this.b.set(a.p.x,a.p.y,a.p.z),this.remove()):(this.b.x+=this.dir.x*this.speed,this.b.y+=this.dir.y*this.speed,this.b.z+=this.dir.z*this.speed,this.b.round());this.transform.v=this.b.x;this.transform.m31=this.b.y;this.transform.m32=this.b.z;u.ua.prototype.step.call(this)};
Aj.ic=function(a,b,c){var d=null,e=ge(a,new G(b.x*c,b.y*c,b.z*c));e&&(d=e,c=d.d);e=u.o.Ha;!(a=Ki(a,b,e.b,e.Ba,e.jb+e.Ba))||0>a.t||a.t>=c||(a.item=e,d=a);return d};Aj.prototype.remove=function(){this.xh.remove();u.ua.prototype.remove.call(this)};u.o=new u.Node("game");u.Lh=new u.Node("gameDraw");u.o.si=0;u.o.Pg=0;u.o.Oi=2;u.o.Ni=1;u.o.Fc=[];u.o.Me=[];u.o.He=[];u.o.Og=0;u.o.df=0;u.o.Uh=NaN;u.o.rc=[];u.o.vf=!0;u.o.Ld=function(){var a=u.o.Ha.ub.C,b=-146,c=119;a instanceof mj&&(b+=6,c-=10);var d=fj(a).toLocaleString("en-US");var e=u.i.O.get("HUDNumerals24Bold");d=u.Mh(e,d,0);d.color=Bc;d.x=b;d.y=c;d.x-=d.width*d.ri.width;a.pg=d;u.o.vf=!0};u.o.rh=function(a){u.o.Og+=a;u.o.df+=a};
u.o.Ii=function(){0>=u.o.df||u.m<u.o.Uh+2||(u.o.df--,u.o.Uh=u.m,u.i.ea.get("hit02").play({gain:1}),u.o.rc=u.Mh(u.i.O.get("HUDNumerals24Bold"),(u.o.Og-u.o.df).toLocaleString("en-US"),1),u.o.rc.Gg=u.m,u.o.vf=!0)};
u.i.ready=function(){var a=u.i.O.get("HUDNumerals10");a.Cd=[7,5,7,7,8,7,7,7,7,7,3];a.Wd=10;a.Ze=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.$e=[0,1,0,0,-1,0,0,0,0,0,0];u.Jg(a);a=u.i.O.get("HUDNumerals14Bold");a.Cd=[9,6,9,9,9,9,9,9,9,9,4];a.Wd=14;a.Ze=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.$e=[0,1,0,0,0,0,0,0,0,0,0];u.Jg(a);a=u.i.O.get("HUDNumerals24Bold");a.Cd=[13,9,13,13,14,13,13,13,13,13,5];a.Wd=23;a.Ze=[0,1,0,0,-1,0,0,0,0,0,0];a.$e=[0,3,0,0,0,0,0,0,0,0,0];u.Jg(a);u.Sc=W(new u.Node("scnWorld"),u.Bc);u.dh=W(new u.Node("scnLoot"),
u.Sc);u.Zd=W(new u.Node("scnDoors"),u.Sc);u.Zd.Oa=0;u.$d=W(new u.Node("scnSpuds"),u.Bc);u.$d.Oa=0;u.lf=W(new u.Node("scnShadows"),u.Bc);u.lf.Oa=0;u.cc=W(new u.Node("scnEffects"),u.Bc);u.cc.Oa=0;u.Rc=W(new u.Node("scnSelf"),u.Bc);u.Rc.Oa=0;u.Ui=W(new u.Node("scnHUD"),u.Bc);W(Ai,u.Bc);W(u.o,u.Bc);u.Ig=1E3/60;u.kf=new Ni;u.Ti();a=[new G(135/255,223/255,206/255),new G(230/255,230/255,172/255),new G(135/255,223/255,206/255),new G(135/255,223/255,206/255),new G(0,213/255,1),new G(135/255,223/255,206/255)];
u.o.ij=a;for(var b=new Float32Array(36),c=0;c<a.length;c++)a[c].x=.1*a[c].x+.65,a[c].y=.1*a[c].y+.65,a[c].z=.1*a[c].z+.65,a[c].scale(.75),b[3*c]=a[c].x,b[3*c+1]=a[c].y,b[3*c+2]=a[c].z;u.Ua(u.i.ia.get("physical"));u.w.J("ambient",b);u.w.J("clipY",Infinity,!1);u.Ua(u.i.ia.get("imageContrast"));u.w.J("contrastOffset",0);u.w.J("contrastScale",1.0625);u.rb(xd);sd(xd,xd.qf.length*xd.bb);xd.upload(xd.qf);u.rd(zd);sd(zd,2*zd.elements.length);zd.upload(zd.elements);u.i.Ya.get("gemRuby").qa=0;u.i.Ya.get("gemEmerald").qa=
0;u.i.Ya.get("gemSapphire").qa=0;u.i.Ya.get("bulbGreen").qa=0;Yi.Xc();a=Nb(5);wj.lb=[];for(b=0;9>b;b++)c=b,c*=1/9,c=Math.pow(c,.5),wj.lb[b]=c*a;mj.Zg=u.i.O.get("HUDReticleCarbine");mj.va=u.i.O.get("HUDItemCarbine");mj.va.offsetY=-12;wj.Zg=u.i.O.get("HUDReticleShotgun");wj.va=u.i.O.get("HUDItemShotgun");wj.va.offsetY=-10;xj.Zg=u.i.O.get("HUDReticleRevolver");xj.va=u.i.O.get("HUDItemRevolver");xj.va.offsetY=-9;Ui.tf();a=u.o.Ag=new ef;a.w=u.i.ia.get("splatter");a.fa=u.i.O.get("splatter02");a.color=yj.vc;
a.qa=1;a=u.o.Ch=new ef;a.w=u.i.ia.get("image");a.fa=u.i.O.get("bulletPock01");a.color=new P(255,255,255,128);a.qa=2;a=new ld;a.name="flashWhite";a.Kc=Cc;a.Cc=zc;a.hd=Bc;a.qa=0;u.i.Ya.add(a);a=new ld;a.name="flashRed";a.Kc=Cc;a.Cc=zc;a.hd=Dc;a.qa=0;u.i.Ya.add(a);u.o.Ji();u.o.si?(a=new Oi("devCamera"),W(a,u.Bc),a.create(),u.o.Ga=a):(a=tf[0],b=u.o.Ha=new $i("player"),b.xf=Math.floor(2147483648/180*90),b.b.y=a.y+.5*b.Gc,b.b.z=a.z,b.b.x=a.x,W(b,u.Sc),b.create());u.o.rh(0);W(u.Lh,u.Bc);u.start()};
u.o.Ji=function(){Zg.clear();for(var a=p(ah),b=a.next();!b.done;b=a.next())W(b.value,null);ah.length=0;a=u.o.Fc.splice(0);a=p(a);for(b=a.next();!b.done;b=a.next())b.value.remove();kg();Rf=Number.POSITIVE_INFINITY;lg();Rg();u.o.Pg=tf.length;a=p(Zg.elements);for(b=a.next();!b.done;b=a.next()){var c=b=b.value;c.eb.cmp=Gc;for(var d=p(c.kd),e=d.next();!e.done;e=d.next()){e=e.value;for(var h=0;h<e.length;h++)e[h]=He(c.eb,e[h])}for(d=0;d<c.eb.length;d++)c.eb[d].index=d;d=p(c.kd);for(e=d.next();!e.done;e=
d.next())for(e=e.value,h=0;h<e.length;h++)e[h]=e[h].index;delete c.eb.cmp;b.compile();delete b.kd;c=oe[b.Z-1];d=new Me(b,"worldMesh");d.U=c.U;ah.push(d);d.yf=!0;Infinity!=b.y?(d.y=b.y,W(d,u.$d)):W(d,u.Sc);delete b.y;d.za=["portalLightIndex",c.jf,!0]}ke=[];le=[[Array(oe.length),Array(oe.length),Array(oe.length)],[Array(oe.length),Array(oe.length),Array(oe.length)]];me=0;a=p(oe);for(b=a.next();!b.done;b=a.next()){b=b.value;b.Va.x/=b.Mb;b.Va.y/=b.Mb;b.Va.z/=b.Mb;b.Va.x/=255;b.Va.y/=255;b.Va.z/=255;b.U.Qa.x*=
b.Va.x;b.U.Qa.y*=b.Va.y;b.U.Qa.z*=b.Va.z;b.sd||(c=new pe,c.bf=b,c.Yd=b,c.Mb=b.Mb,c.Xf=[Qa(.05,.95,b.Va.x),Qa(.05,.95,b.Va.y),Qa(.05,.95,b.Va.z)],ke.push(c));c=p(b.Ac);for(d=c.next();!d.done;d=c.next())b.Mb+=te(d.value);for(c=0;c<b.Ac.length;c++)d=new pe,d.bf=b,d.Yd=oe[b.Ac[c].pd.Z],d.we=b.Ac[c],d.Mb=te(d.we),d.Xf=[1,1,1],ke.push(d),d=new pe,d.bf=b,d.Yd=b,d.we=b.Ac[c],d.Mb=ue(d.we),d.Xf=[.625,.625,.625],ke.push(d)}for(a=0;a<u.o.Pg;a++)u.o.oi();if(u.dh.children)for(;;){a=u.dh.children.first().item;
if(!a)break;a.remove()}};u.o.oi=function(){if(!(u.o.Fc.length>=u.o.Pg)){var a=gb(tf);a=new G(a.x,a.y+15E4,a.z);if(u.o.Ha){var b=Qc(u.o.Ha.b,a,new G);b=ge(a,b)?!0:!1}else b=!0;b&&(b=new Yi,b.b.x=a.x,b.b.y=a.y,b.b.z=a.z,$c(b.transform,b.b),W(b,u.$d),b.create())}};u.o.cj=function(){if(!(this.Me.length>=u.o.Oi)){var a=gb(tf);a=new G(a.x+25E3*(fb(9)-5),a.y+1E5,a.z+25E3*(fb(9)-5));if(u.o.Ha){var b=Qc(u.o.Ha.b,a,new G);b=ge(a,b)?!0:!1}else b=!0;b&&(a=new Si(a.x,a.y-1E5,a.z),W(a,u.Sc),a.create())}};
u.o.bj=function(){if(!(this.He.length>=u.o.Ni)){var a=gb(tf);a=new G(a.x+25E3*(fb(9)-5),a.y+1E5,a.z+25E3*(fb(9)-5));if(u.o.Ha){var b=Qc(u.o.Ha.b,a,new G);b=ge(a,b)?!0:!1}else b=!0;b&&(a=new Wi(a.x,a.y-1E5,a.z),W(a,u.Sc),a.create())}};
u.o.step=function(){u.Cg&&Gd.p.KeyM&&(u.Audio.Za.gain.value=1-u.Audio.Za.gain.value,window.localStorage.setItem("musicVolume",u.Audio.Za.gain.value));if(u.Cg&&Gd.p.KeyT){u.o.Ag.clear();for(var a=p(u.o.Fc),b=a.next();!b.done;b=a.next())b=b.value,b.Xa.length=0,b.Jc.length=0;for(a=u.Sc.children.first();null!=a.item;a=a.next)a.item instanceof yj&&a.item.remove()}u.o.si||0!=u.m%5||(this.oi(),this.cj(),this.bj());for(b=0;4>b;b++){me=1-me;a=le[me];var c=le[1-me];for(var d=0;3>d;d++)for(var e=p(ke),h=e.next();!h.done;h=
e.next()){h=h.value;var g=h.Mb*a[d][h.bf.index];g*=h.Xf[d];c[d][h.Yd.index]+=g/h.Yd.Mb}d=p(oe);for(e=d.next();!e.done;e=d.next())e=e.value,e.sd?(a[0][e.index]=e.Nc.x,a[1][e.index]=e.Nc.y,a[2][e.index]=e.Nc.z,c[0][e.index]=e.Nc.x,c[1][e.index]=e.Nc.y,c[2][e.index]=e.Nc.z):(a[0][e.index]=e.Nc.x,a[1][e.index]=e.Nc.y,a[2][e.index]=e.Nc.z)}if(0==u.m%4){a=p(oe);for(e=a.next();!e.done;e=a.next())b=e.value,b.U.Qa.x=c[0][b.index],b.U.Qa.y=c[1][b.index],b.U.Qa.z=c[2][b.index],c[0][b.index]=0,c[1][b.index]=
0,c[2][b.index]=0;c=p(ke);for(h=c.next();!h.done;h=c.next())a=h.value,a.we&&(a.Mb=a.bf==a.Yd?ue(a.we):te(a.we));ne()}u.o.Ii()};
u.Lh.step=function(){u.vb.r=0;u.vb.Ca=0;u.vb.Y=0;u.vb.pa=0;4>u.m-u.o.Ha.Xh&&(u.vb.r+=24,u.vb.Ca+=24,u.vb.Y+=24,u.vb.pa+=24);var a=u.m-u.o.Ha.Mi;a=1.5-a/6;0>a&&(a=0);1<a&&(a=1);u.vb.r+=170*a;u.vb.pa+=170*a;w.bindFramebuffer(w.FRAMEBUFFER,u.kf.object);u.mb(2);w.clear(w.DEPTH_BUFFER_BIT|w.STENCIL_BUFFER_BIT);ye();u.Ua(u.i.ia.get("physical"));u.Zd.Oa=1;fd(u.Zd);u.Zd.Oa=0;u.w.J("clipY",Infinity,!1);var b=ab.first();for(a=Ud.first();b.item;){if(a.item){if(a.item.rf<u.m){var c=a.next;Xa(a);a=c;continue}if(0<
bb(b.item,a.item)){a=a.next;continue}}c=b.next;Xa(b);Za(b,a);b=c}for(;a.item;)b=a.next,a.item.rf<u.m&&Xa(a),a=b;Vd.v=.00390625*u.Ga.I.v;Vd.m31=.00390625*u.Ga.I.m31;Vd.m32=.00390625*u.Ga.I.m32;u.rb(Ue);u.Ua(u.i.ia.get("sky"));u.Sb(0,u.i.O.get("concr01"));u.w.J("texture1",1,!0);u.Sb(1,u.i.O.get("sky01"));u.gb(0);u.mb(1);u.Rb(0);a=new R;b=(.5*u.Ga.ef+.5*u.Ga.Re)*we.yb;a.scale(b*u.viewport.ratio,b,1);a.m32=-b/Math.tan(u.Ga.wc);Xc(u.Ga.I,a,a);u.w.J("modelMatrix",a);w.drawArrays(w.TRIANGLE_FAN,0,4);if(u.$d.children){u.$d.children.sort($g);
Yi.va=128;for(a=u.$d.children.first();a.item;a=a.next)gd(a.item)&&a.item instanceof Yi&&a.item.hi();w.enable(w.STENCIL_TEST);for(a=u.$d.children.first();a.item;a=a.next)gd(a.item)&&(a.item instanceof Yi||(w.stencilFunc(w.GEQUAL,128,255),w.stencilOp(w.KEEP,w.KEEP,w.KEEP)),a.item.La());w.disable(w.STENCIL_TEST)}u.o.Ag.La();u.o.Ch.La();u.Ua(vi.w);u.w.J("modelMatrix",Vd);vi.T.bind();u.gb(1);u.mb(1);u.Rb(1);u.rb(vi.Ea);u.rd(vi.Mc);b=a=0;for(c=Ud.first();c.item;c=c.next)c.item.yg==a+b?b+=c.item.Bh:(b&&
w.drawElements(w.TRIANGLES,b,w.UNSIGNED_SHORT,2*a),a=c.item.yg,b=c.item.Bh);b&&w.drawElements(w.TRIANGLES,b,w.UNSIGNED_SHORT,2*a);u.cc.Oa=1;fd(u.cc);u.cc.Oa=0;u.gb(1);u.mb(1);u.Rb(0);u.Ua(u.i.ia.get("monoEffect"));u.rb(Ue);w.activeTexture(w.TEXTURE0);w.bindTexture(w.TEXTURE_2D,u.i.O.get("shadow").object);u.w.J("enableTexture0",1,!0);u.w.J("color",u.Od.color);u.lf.Oa=1;fd(u.lf);u.lf.Oa=0;u.o.Ha&&(u.mi(u.o.Ha.jc),xe(u.o.Ha.jc),u.Rc.Oa=1,fd(u.Rc),u.Rc.Oa=0);u.o.Ha&&(a=u.o.Ha.ub,a.Oa=1,a.La(),a.Oa=0);
u.gb(0);u.mb(0);u.Rb(0);w.bindFramebuffer(w.FRAMEBUFFER,null);u.zb.Zb.J("viewMatrix",ad);u.zb.Zb.upload();u.rb(Ue);u.mf(new bc(u.canvas.width,u.canvas.height));u.Ua(u.i.ia.get("imageContrast"));w.activeTexture(w.TEXTURE0);w.bindTexture(w.TEXTURE_2D,u.kf.color.object);u.w.J("texture0",0,!0);u.w.J("enableTexture0",1,!0);u.w.J("modelMatrix",ad);u.w.J("color",Bc);u.w.J("fadeColor",u.vb);w.drawArrays(w.TRIANGLE_FAN,0,4);u.o.Ha&&u.o.Di()};
u.o.Di=function(){function a(){t.A=l*C.width/r;t.m11=n*C.height/q;t.v=B/r;t.m31=-y/q;u.w.J("modelMatrix",t)}function b(z,D,H,J,Z,U,ca){u.Sb(0,z);var wa=u.canvas.width>>1,aa=u.canvas.height>>1,xa=.5*z.width,ea=.5*z.height;0==k?D-=wa:1==k&&(D+=wa);2==m?H-=aa:3==m&&(H+=aa);0==h?D+=xa:1==h&&(D-=xa);2==g?H+=ea:3==g&&(H-=ea);D=Math.round(D);H=Math.round(H);void 0===J?w.scissor(0,0,u.canvas.width,u.canvas.height):w.scissor(D+wa-xa+J,-H+aa-ea+Z,U,ca);J=new R;J.A=z.width/u.canvas.width*l;J.m11=-z.height/u.canvas.height*
n;J.v=2*D/u.canvas.width;J.m31=-2*H/u.canvas.height;u.w.J("modelMatrix",J);w.drawArrays(w.TRIANGLE_FAN,0,4)}function c(z){z=u.m-z.Gg;return 60<z?1:1+.25*Math.pow(.9375,z)}var d=u.o.Ha.ub.C;if(u.o.vf){u.o.xi=new td;var e=[];d&&(e=e.concat(d.pg));e=e.concat(u.o.rc);ud(e);u.o.vf=!1}u.mf(new bc(u.canvas.width,u.canvas.height));u.zb.Zb.J("viewMatrix",ad);u.zb.Zb.upload();u.mb(0);u.Rb(0);var h=0,g=2,k=0,m=2,l=1,n=1;u.gb(2);w.enable(w.SCISSOR_TEST);u.rb(Ue);u.Ua(u.i.ia.get("image"));u.w.J("color",Bc);if(d)if(d instanceof
xj){var v=d.oa;h=0;g=3;k=4;m=5;e=u.i.O.get("HUDMagRevolver");b(e,-134-34*v,123,34*v,0,34,34);g=2;e=u.i.O.get("HUDAmmo2");u.w.J("color",new P(0,0,0,48));b(e,-177,91);u.w.J("color",Bc)}else d instanceof mj?(v=d.oa+d.Ra,h=0,g=3,k=4,m=5,e=u.i.O.get("HUDMagCarbine"),b(e,-184,124+13*v,0,13*v,97,13),g=2,e=u.i.O.get("HUDAmmo3"),u.w.J("color",new P(0,0,0,48)),b(e,-184,81),u.w.J("color",Bc)):d instanceof wj&&(v=d.Ra,h=0,g=3,k=4,m=5,e=u.i.O.get("HUDMagShotgun"),b(e,-126-18*v,123,18*v,0,18,34),g=2,e=u.i.O.get("HUDAmmo2"),
u.w.J("color",new P(0,0,0,48)),b(e,-177,91),u.w.J("color",Bc));d&&u.o.Ha.ub.Tb&&(u.gb(1),u.Ua(u.i.ia.get("monoEffect")),u.o.Ha.Ad?u.w.J("color",new P(255,0,0,255)):u.w.J("color",new P(0,128,255,255)),u.w.J("ambientLight",new G(1,1,1)),h=4,g=5,k=4,m=5,(e=d.constructor.Zg)&&b(e,0,0),u.gb(2),u.Ua(u.i.ia.get("image")),u.w.J("color",Bc));w.disable(w.SCISSOR_TEST);u.rb(u.o.xi);v=e=0;var r=u.canvas.width>>1,q=u.canvas.height>>1,t=new R;if(d&&d.pg){d=d.pg;var B=d.x;var y=d.y;var C=d.ri;u.Sb(0,C);a();u.w.J("color",
d.color);v=d.length;w.drawArrays(w.TRIANGLES,e,v);e+=v}C=u.i.O.get("HUDNumerals24Bold");u.Sb(0,C);B=180;y=-134;d=u.m-u.o.rc.Gg;60>d?(l=n=1.5*(1+.25*Math.pow(.9375,d)),B=0,B-=u.o.rc.width*C.width*l*.5,y+=30-.5*d,y+=u.o.rc.height*C.height*n):(l=n=c(u.o.rc),B-=u.o.rc.width*C.width*l,y+=u.o.rc.height*C.height*n);B+=1;y+=2;a();v=u.o.rc.length;u.w.J("color",Cc);w.drawArrays(w.TRIANGLES,e,v);--B;y-=2;a();u.w.J("color",2>u.m-u.o.rc.Gg?Bc:Ec);w.drawArrays(w.TRIANGLES,e,v);e+=v;l=n=1};
u.$h=function(){var a=u.Qg=document.createElement("div");a.style.position="absolute";a.style.backgroundColor="rgba(0,0,0,0.8)";a.style.left=0;a.style.top=0;a.style.right=0;a.style.bottom=0;a.style.userSelect="none";od.appendChild(a);a=document.createElement("div");a.style.position="absolute";a.style.left="50%";a.style.top="50%";u.Qg.appendChild(a);var b=document.createElement("button");b.style.position="relative";b.style.left="-50%";b.style.top="-1em";b.style.zIndex=2;b.style.margin="0px";b.style.padding=
"16px";b.style.background="none";b.style.color="white";b.style.fontFamily="'Arial', sans-serif";b.style.fontSize="2em";b.style.fontWeight="bold";b.style.border="0px";b.style.cursor="pointer";b.title="play";b.innerHTML="Play";b.onclick=function(){X.Wi()};a.appendChild(b)};document.addEventListener("pointerlockchange",function(){document.pointerLockElement?(od.removeChild(u.Qg),Gd.clear(),X.clear(),u.resume()):(od.appendChild(u.Qg),u.pause())});
(function(){var a,b,c,d,e,h,g,k,m,l,n;return Ea(new Da(new ya(function(v){if(1==v.N){a="q7oa0bzc5";b=(new Date).getTime();c=window.localStorage.getItem("resourceVersion");if(!u.Cg&&c==a){d=window.localStorage.getItem("resources");e=new Uint8Array(d.length);for(h=0;h<d.length;h++)e[h]=d.charCodeAt(h);e.position=0;mb(e);u.i.load(e);console.log("Resources loaded from local storage in",(new Date).getTime()-b,"ms.");v.N=0;return}var r=fetch("resources.gob");v.N=3;return{value:r}}if(4!=v.N)return g=v.yb,
k=Uint8Array,r=g.arrayBuffer(),v.N=4,{value:r};m=new k(v.yb);l="";for(n=0;n<m.length;n++)l+=String.fromCharCode(m[n]);try{window.localStorage.setItem("resources",l),window.localStorage.setItem("resourceVersion",a)}catch(q){}m.position=0;mb(m);u.i.load(m);console.log("Resources loaded from URL in",(new Date).getTime()-b,"ms.");v.N=0})))})();
