var f;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function n(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function ba(a){if(!(a instanceof Array)){a=n(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
var da="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ea="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function fa(a,b){if(b){var c=da;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ea(c,a,{configurable:!0,writable:!0,value:b})}}
fa("Promise",function(a){function b(g){this.Ma=0;this.Jb=void 0;this.S=[];var k=this.qb();try{g(k.resolve,k.reject)}catch(l){k.reject(l)}}function c(){this.S=null}function d(g){return g instanceof b?g:new b(function(k){k(g)})}if(a)return a;c.prototype.Ma=function(g){if(null==this.S){this.S=[];var k=this;this.qb(function(){k.Jb()})}this.S.push(g)};var e=da.setTimeout;c.prototype.qb=function(g){e(g,0)};c.prototype.Jb=function(){for(;this.S&&this.S.length;){var g=this.S;this.S=[];for(var k=0;k<g.length;++k){var l=
g[k];g[k]=null;try{l()}catch(m){this.wb(m)}}}this.S=null};c.prototype.wb=function(g){this.qb(function(){throw g;})};b.prototype.qb=function(){function g(m){return function(p){l||(l=!0,m.call(k,p))}}var k=this,l=!1;return{resolve:g(this.tf),reject:g(this.wb)}};b.prototype.tf=function(g){if(g===this)this.wb(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.vf(g);else{a:switch(typeof g){case "object":var k=null!=g;break a;case "function":k=!0;break a;default:k=!1}k?this.ze(g):
this.vc(g)}};b.prototype.ze=function(g){var k=void 0;try{k=g.then}catch(l){this.wb(l);return}"function"==typeof k?this.Cg(k,g):this.vc(g)};b.prototype.wb=function(g){this.Rc(2,g)};b.prototype.vc=function(g){this.Rc(1,g)};b.prototype.Rc=function(g,k){if(0!=this.Ma)throw Error("Cannot settle("+g+", "+k+"): Promise already settled in state"+this.Ma);this.Ma=g;this.Jb=k;this.ge()};b.prototype.ge=function(){if(null!=this.S){for(var g=0;g<this.S.length;++g)h.Ma(this.S[g]);this.S=null}};var h=new c;b.prototype.vf=
function(g){var k=this.qb();g.oi(k.resolve,k.reject)};b.prototype.Cg=function(g,k){var l=this.qb();try{g.call(k,l.resolve,l.reject)}catch(m){l.reject(m)}};b.prototype.then=function(g,k){function l(q,v){return"function"==typeof q?function(z){try{m(q(z))}catch(y){p(y)}}:v}var m,p,r=new b(function(q,v){m=q;p=v});this.oi(l(g,m),l(k,p));return r};b.prototype.catch=function(g){return this.then(void 0,g)};b.prototype.oi=function(g,k){function l(){switch(m.Ma){case 1:g(m.Jb);break;case 2:k(m.Jb);break;default:throw Error("Unexpected state: "+
m.Ma);}}var m=this;null==this.S?h.Ma(l):this.S.push(l)};b.resolve=d;b.reject=function(g){return new b(function(k,l){l(g)})};b.race=function(g){return new b(function(k,l){for(var m=n(g),p=m.next();!p.done;p=m.next())d(p.value).oi(k,l)})};b.all=function(g){var k=n(g),l=k.next();return l.done?d([]):new b(function(m,p){function r(z){return function(y){q[z]=y;v--;0==v&&m(q)}}var q=[],v=0;do q.push(void 0),v++,d(l.value).oi(r(q.length-1),p),l=k.next();while(!l.done)})};return b});
function ha(){ha=function(){};da.Symbol||(da.Symbol=ka)}function la(a,b){this.S=a;ea(this,"description",{configurable:!0,writable:!0,value:b})}la.prototype.toString=function(){return this.S};var ka=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new la("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function oa(){ha();var a=da.Symbol.iterator;a||(a=da.Symbol.iterator=da.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ea(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return qa(aa(this))}});oa=function(){}}function qa(a){oa();a={next:a};a[da.Symbol.iterator]=function(){return this};return a}function ra(){this.wb=!1;this.Ma=null;this.Jb=void 0;this.S=1;this.Rc=0;this.qb=null}function ua(a){if(a.wb)throw new TypeError("Generator is already running");a.wb=!0}
ra.prototype.vc=function(a){this.Jb=a};function wa(a,b){a.qb={gm:b,um:!0};a.S=a.Rc}ra.prototype.return=function(a){this.qb={return:a};this.S=this.Rc};function xa(a){this.S=new ra;this.Ma=a}function ya(a,b){ua(a.S);var c=a.S.Ma;if(c)return Ba(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.S.return);a.S.return(b);return Da(a)}
function Ba(a,b,c,d){try{var e=b.call(a.S.Ma,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.S.wb=!1,e;var h=e.value}catch(g){return a.S.Ma=null,wa(a.S,g),Da(a)}a.S.Ma=null;d.call(a.S,h);return Da(a)}
function Da(a){for(;a.S.S;)try{var b=a.Ma(a.S);if(b)return a.S.wb=!1,{value:b.value,done:!1}}catch(c){a.S.Jb=void 0,wa(a.S,c)}a.S.wb=!1;if(a.S.qb){b=a.S.qb;a.S.qb=null;if(b.um)throw b.gm;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function Ga(a){this.next=function(b){ua(a.S);a.S.Ma?b=Ba(a,a.S.Ma.next,b,a.S.vc):(a.S.vc(b),b=Da(a));return b};this.throw=function(b){ua(a.S);a.S.Ma?b=Ba(a,a.S.Ma["throw"],b,a.S.vc):(wa(a.S,b),b=Da(a));return b};this.return=function(b){return ya(a,b)};oa();this[Symbol.iterator]=function(){return this}}
function Ha(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function h(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(h,e)}h(a.next())})}fa("Math.sign",function(a){return a?a:function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1}});
function Ja(a,b){oa();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}fa("Array.prototype.keys",function(a){return a?a:function(){return Ja(this,function(b){return b})}});var t={},u;t.canvas=document.createElement("canvas");t.canvas.width=480;t.canvas.height=296;var Ka=document.body;Ka.style.position="relative";
Ka.style.left=(window.innerWidth-t.canvas.width>>1)+"px";Ka.style.width=t.canvas.width+"px";Ka.style.margin="0px";Ka.style.marginBottom="20px";Ka.style.padding="0px";Ka.style.display="flex";Ka.style.flexFlow="column nowrap";Ka.style.justifyContent="flex-start";Ka.style.alignItems="center";Ka.style.alignContent="flex-start";Ka.style.backgroundColor="#404040";Ka.style.fontFamily="sans-serif";Ka.style.fontSize="12pt";Ka.style.color="white";Ka.style.imageRendering="pixelated";
Ka.style.transformOrigin="top center";var La=document.createElement("img");La.width=320;La.height=44;La.src="WebsiteBanner_230507_01.png";La.style.margin="0 auto";document.body.appendChild(La);var Na=t.ee=document.createElement("div");Na.style.position="relative";Na.style.width=t.canvas.width+"px";Na.style.height=t.canvas.height+"px";Na.style.margin="6px 0";Na.style.outline="5px solid black";Na.style.backgroundColor="black";Na.oncontextmenu=function(a){return a.preventDefault()};document.body.appendChild(Na);
t.ee.appendChild(t.canvas);function Pa(a,b){for(var c=0,d=a.length,e=c+(d-c>>1);c<d;){var h=a.cmp.call(null,b,a[e]);if(0>h)d=e,e=c+(d-c>>1);else if(0<h)c=e+1,e=c+(d-c>>1);else break}return e}function Qa(a,b){var c=Pa(a,b);return a[c]&&0==a.cmp(a[c],b)?a[c]:null}function Sa(a,b){var c=Pa(a,b);if(a[c]&&0==a.cmp(a[c],b))return a[c];a.splice(c,0,b);return b}function Ta(a,b){var c=Pa(a,b);a[c]&&0==a.cmp(a[c],b)&&a.splice(c,1)};for(var Ua=new Uint8Array(256),Va=0;256>Va;Va++)Ua[Va]=Ua[Va>>>1]+(Va&1);function Wa(a,b,c){return a<b?b:a>c?c:a}function Xa(a,b,c){return a*(1-c)+b*c}function Ya(a,b){return a==b?a:0==a?b:0==b?a:0==(a&1)?0==(b&1)?Ya(a>>1,b>>1)<<1:Ya(a>>1,b):0==(b&1)?Ya(a,b>>1):a>=b?Ya(a-b>>1,b):Ya(b-a>>1,a)}function $a(a,b,c){var d=b*b-4*a*c;if(0<d){c={};d=Math.sqrt(d);a=2*a;var e=(-b+d)/a;a=(-b-d)/a;a>e?(c.Oa=e,c.Nc=a):(c.Oa=a,c.Nc=e);return c}return 0==d?(c={},c.Oa=-b/(2*a),c.Nc=c.Oa,c):null}
function ab(a){this.cmp=a;this.elements=[]}f=ab.prototype;f.get=function(a){var b=bb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements[b]};f.contains=function(a){var b=bb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?-1:b};f.add=function(a){return this.push(a)};f.push=function(a){var b=bb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return!1;this.elements.splice(b,0,a);return!0};
f.replace=function(a){var b=bb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b]=a,!0;this.elements.splice(b,0,a);return!0};f.Ka=function(a){var b=bb(this,a);if(b<this.elements.length&&0==this.cmp.call(this,a,this.elements[b]))return this.elements[b];this.elements.splice(b,0,a);return a};f.remove=function(a){var b=bb(this,a);return b==this.elements.length||0!=this.cmp.call(this,a,this.elements[b])?null:this.elements.splice(b,1)[0]};
function bb(a,b){for(var c=0,d=a.elements.length,e=Math.floor(c/2+d/2);c<d;){var h=a.cmp.call(a,b,a.elements[e]);if(0>h)d=e,e=Math.floor(c/2+d/2);else if(0<h)c=e+1,e=Math.floor(c/2+d/2);else break}return e}f.clear=function(){this.elements.length=0};f.Hi=function(){return 0==this.elements.length};function cb(){this.start=new db(null);return this}f=cb.prototype;f.Hi=function(){return!this.first().item};f.size=function(){for(var a=0,b=this.first();b.item;b=b.next)a++;return a};f.first=function(){return this.start.next};
f.clear=function(){eb(this.start);return this};function fb(a,b){gb(b,a.start);return a}f.add=function(a){return fb(this,new db(a))};function ib(a){for(var b=jb,c=kb,d=b.first();d.item;d=d.next)if(0>c.call(null,a.item,d.item)){gb(a,d);return}gb(a,b.start)}f.get=function(a){for(var b=this.first();b.item;b=b.next)if(b.item==a)return b;return null};f.remove=function(a){a=this.get(a);if(null==a)return null;eb(a);return this};
f.sort=function(a){for(var b,c=this.first();c.item;c=b){b=c.next;var d=c;for(var e=d.pb;e.item&&!(0<=a(d.item,e.item));)e=e.pb;d=e;d!=c.pb&&(eb(c),c.pb=d,c.next=d.next,c.pb.next=c,c.next.pb=c)}};function db(a){this.item=a;this.pb=this;this.next=this;return this}function gb(a,b){a.next=b;a.pb=b.pb;a.next.pb=a;a.pb.next=a}function eb(a){a.pb.next=a.next;a.next.pb=a.pb;a.next=a.pb=a};function lb(){var a;isNaN(a)&&(a=(new Date).getTime()|0);this.r=a+643709624|0}lb.prototype.next=function(){this.r^=this.r<<13;this.r^=this.r>>17;this.r^=this.r<<5;this.r>>>=0};function mb(){var a=nb;a.next();return a.r}function ob(a){a.next();return a.r/4294967295}var nb=new lb;function pb(a){return Math.floor(ob(nb)*a)}function rb(a){return 1>ob(nb)*a}function sb(a){return a[pb(a.length)]}function wb(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return sb(b)};function xb(a,b,c){for(var d=0,e=a.length,h=d+(e-d>>1);d<e;){var g=c.call(null,b,a[h]);if(0>g)e=h,h=d+(e-d>>1);else if(0<g)d=h+1,h=d+(e-d>>1);else break}return h}function yb(a,b){var c=a.splice(0);c=n(c);for(var d=c.next();!d.done;d=c.next())d=d.value,a.splice(xb(a,d,b),0,d)}function kb(a,b){return isNaN(a)?a.index<b.index?-1:a.index>b.index?1:0:a<b.index?-1:a>b.index?1:0}function zb(a,b){return"string"==typeof a?a<b.name?-1:a>b.name?1:0:a.name<b.name?-1:a.name>b.name?1:0};function Ab(a){var b=Bb(a);a=a.slice(a.position,a.position+=b);return String.fromCharCode.apply(null,a)}function Cb(a,b){Fb(a,b.length);for(var c=0;c<b.length;c++)a[a.position++]=b.charCodeAt(c)}function Gb(a){var b=Hb(a);a=a.slice(a.position,a.position+=b);var c;void 0==c&&(c=0);if(void 0==d)var d=a.length;b=53;for(var e=c;e<c+d;e++){var h=a[e];a[e]=a[e]-193*b-53&255;b=h}return String.fromCharCode.apply(null,a)}
function Ib(a,b){Jb(a,b.length);for(var c=a.position,d=0;d<b.length;d++)a[a.position++]=b.charCodeAt(d);b=b.length;void 0==c&&(c=0);void 0==b&&(b=a.length);d=53;for(var e=c;e<c+b;e++)a[e]=a[e]+193*d+53&255,d=a[e]}function Bb(a){return a[a.position++]}function Fb(a,b){a[a.position++]=b&255}function Kb(a){var b=0|a[a.position++]<<0;return b|=a[a.position++]<<8}function Lb(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}
function Nb(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;return(b>>>0)-32768}function Rb(a,b){b+=32768;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255}function Hb(a){var b=a[a.position++]<<0;b+=a[a.position++]<<8;b+=a[a.position++]<<16;return b+=a[a.position++]<<24}function Jb(a,b){a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}
function Tb(a){var b=0|a[a.position++]<<0;b|=a[a.position++]<<8;b|=a[a.position++]<<16;b|=a[a.position++]<<24;return(b>>>0)-2147483648}function ac(a,b){b+=2147483648;a[a.position++]=b>>>0&255;a[a.position++]=b>>>8&255;a[a.position++]=b>>>16&255;a[a.position++]=b>>>24&255}function bc(a){var b=new Uint8Array(4);b[0]=a[a.position++];b[1]=a[a.position++];b[2]=a[a.position++];b[3]=a[a.position++];return(new Float32Array(b.buffer))[0]}
function cc(a,b){var c=new Float32Array(1);c[0]=b;c=new Uint8Array(c.buffer);a[a.position++]=c[0];a[a.position++]=c[1];a[a.position++]=c[2];a[a.position++]=c[3]};function dc(){this.size=0;this.root=new ec;this.root.update=function(){};this.oc=null}dc.prototype.Hi=function(){return 0==this.size};dc.prototype.pop=function(){if(this.Hi())return null;var a=this.root.Le.Mg(),b=a.value;this.remove(a);return b};
dc.prototype.add=function(a,b){this.oc=new fc;if(0==this.size)this.root.Le=this.oc,this.oc.parent=this.root;else{var c=this.root;var d=this.size;d=Ua[d>>>0&255]+Ua[d>>>8&255]+Ua[d>>>16&255]+Ua[d>>>24];for(var e=0;e<d;e++)c=c.Le;d=new ec;d.parent=c.parent;c.parent.Le=d;d.pj=c;c.parent=d;d.Le=this.oc;this.oc.parent=d}c=this.oc;c.value=a;c.key=b;c.parent.update();this.size++;return this.oc};
dc.prototype.remove=function(a){if(a==this.oc)1==this.size?this.root.Le=this.oc=null:hc(this);else{var b=this.oc.value,c=this.oc.key;hc(this);a.value=b;a.key=c;a.parent.update()}this.size--};function hc(a){var b=a.oc.parent,c=b.pj;a.oc=c.oc();c.parent=b.parent;c.parent.Le=c;c.parent.update()}function ec(){}ec.prototype.Mg=function(){return this.first};ec.prototype.oc=function(){return this.Le.oc()};
ec.prototype.update=function(){this.first=this.Le.Mg().key<this.pj.Mg().key?this.Le.Mg():this.pj.Mg();this.parent.update()};function fc(){}fc.prototype.Mg=function(){return this};fc.prototype.oc=function(){return this};Math.jh=2*Math.PI;function kc(a){return a*Math.PI/180}function lc(a){return Math.PI/2147483648*a}function mc(a,b,c,d){return nc(new w(a.x-c.x,a.y-c.y,a.z-c.z),b,d)}function nc(a,b,c){return $a(oc(b,b),2*oc(a,b),oc(a,a)-c*c)}function pc(a,b,c){.7071>a.y&&-.7071<a.y?(b.set(a.z,0,-a.x),qc(a,b,c).pa(1),qc(c,a,b)):(c.set(0,a.z,-a.y),qc(c,a,b).pa(1),qc(a,b,c))}function rc(a){var b=ob(nb)*Math.PI*2;void 0==a&&(a=2*ob(nb)-1);var c=Math.sqrt(1-a*a);return new w(Math.sin(b)*c,a,Math.cos(b)*c)}
function sc(a,b){var c;c||(c=new tc);for(var d=[],e=0;;){for(var h=-1,g=null,k=Number.POSITIVE_INFINITY,l=0;l<b.length;l++)if(!(e&1<<l)){var m=b[l],p=oc(m,a);p<k&&(h=l,g=m,k=p)}if(0<=k)break;c=c.Qj(a,g,k);d.push(g);e|=1<<h;if(!c)break}a.round()}function tc(){}tc.prototype.Qj=function(a,b,c){a.x-=b.x*c;a.y-=b.y*c;a.z-=b.z*c;return new uc(b)};function uc(a){this.n=a}uc.prototype.Qj=function(a,b){b=qc(this.n,b,new w(0,0,0));if(0==b.pa(1))return null;var c=oc(a,b);a.x=b.x*c;a.y=b.y*c;a.z=b.z*c;return new Ac(b)};
function Ac(a){this.n=a}Ac.prototype.Qj=function(a,b,c){b=c/oc(this.n,b);if(!isFinite(b))return null;a.x-=this.n.x*b;a.y-=this.n.y*b;a.z-=this.n.z*b;return null};function Bc(a,b,c){null==a?(this.a=b*c,this.b=b,this.ratio=c):null==b?(this.a=a,this.b=a/c,this.ratio=c):null==c?(this.a=a,this.b=b,this.ratio=a/b):(this.a=a,this.b=b,this.ratio=c);this.y=this.x=0;a=a>b?a:b;for(this.bufferSize=8;this.bufferSize<a;this.bufferSize*=2);}
function Cc(a,b,c,d,e){a=Math.round(a);b=Math.round(b);c=Math.round(c);d=Math.round(d);this.m=a;this.l=b;this.C=c;this.w=d;if(!e)return this.fa=c-a,this.aa=d-b,this.Wb=this.Aa=NaN,this.length=Math.sqrt(this.fa*this.fa+this.aa*this.aa),a=this.fa,b=this.aa,0>a?0>b?-a<-b?(this.type=9,this.Aa=-a/b,this.Wb=-b/this.length,a=Ya(-a,-b),this.fa/=a,this.aa/=a):-a>-b?(this.type=7,this.Aa=b/a,this.Wb=-a/this.length,a=Ya(-a,-b),this.fa/=a,this.aa/=a):(this.type=8,this.Aa=this.aa=this.fa=-1,this.Wb=Math.SQRT1_2):
0<b?-a<b?(this.type=3,this.Aa=-a/b,this.Wb=b/this.length,a=Ya(-a,b),this.fa/=a,this.aa/=a):-a>b?(this.type=5,this.Aa=b/a,this.Wb=-a/this.length,a=Ya(-a,b),this.fa/=a,this.aa/=a):(this.type=4,this.fa=-1,this.aa=1,this.Aa=-1,this.Wb=Math.SQRT1_2):(this.type=6,this.fa=-1):0<a?0>b?a<-b?(this.type=11,this.Aa=-a/b,this.Wb=-b/this.length,a=Ya(a,-b),this.fa/=a,this.aa/=a):a>-b?(this.type=13,this.Aa=b/a,this.Wb=a/this.length,a=Ya(a,-b),this.fa/=a,this.aa/=a):(this.type=12,this.fa=1,this.Aa=this.aa=-1,this.Wb=
Math.SQRT1_2):0<b?a<b?(this.type=1,this.Aa=-a/b,this.Wb=b/this.length,a=Ya(a,b),this.fa/=a,this.aa/=a):a>b?(this.type=15,this.Aa=b/a,this.Wb=a/this.length,a=Ya(a,b),this.fa/=a,this.aa/=a):(this.type=0,this.aa=this.fa=1,this.Aa=-1,this.Wb=Math.SQRT1_2):(this.type=14,this.fa=1):a<b?(this.type=2,this.aa=1):a>b&&(this.type=10,this.aa=-1),this}function Dc(a,b){return a.m<b.m?-1:a.m>b.m?1:a.l<b.l?-1:a.l>b.l?1:a.C<b.C?-1:a.C>b.C?1:a.w<b.w?-1:a.w>b.w?1:0}f=Cc.prototype;
f.replace=function(a){this.remove=!0;if(this.se){a=n(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b.se){var c=n(this.se);for(d=c.next();!d.done;d=c.next())d=d.value,0<=b.se.indexOf(d)||(b.se.push(d),d.push(b))}else{b.se=this.se.slice();c=n(b.se);for(var d=c.next();!d.done;d=c.next())d.value.push(b)}a=n(this.se);for(d=a.next();!d.done;d=a.next())b=d.value,b.splice(b.indexOf(this),1);delete this.se}};
function Ec(a,b){var c=a.m+b.fa;b=a.l+b.aa;return Math.atan2(Hc(a,c,b),a.getParameter(c,b))}function Ic(a,b,c){for(var d={cm:[],code:0},e=0;e<c.length;e++)d.cm.push(Hc(c[e],a,b)),1==Jc(c[e],a,b)&&(d.code+=1<<e);return d}
function Nc(a){var b;var c=Number.NEGATIVE_INFINITY;var d=Number.POSITIVE_INFINITY;var e=b=null;var h=a[a.length-1];a=n(a);for(var g=a.next();!g.done;g=a.next()){g=g.value;var k=g.m-g.l;k>c?(c=k,d=g.l,b=h,e=g):k==c&&g.l<d&&(d=g.l,b=h,e=g);h=g}c=b.type&7;d=e.type;return c<d?!0:c>d?!1:b.Aa<e.Aa?!0:b.Aa>e.Aa?!1:!0}
function Oc(a,b,c){var d=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,h=null,g=null;c=n(c);for(var k=c.next();!k.done;k=c.next()){k=k.value;var l=Pc(k,a,b);0>l?(l=-l,l<d&&(d=l,h=k)):0<l&&l<e&&(e=l,g=k)}--d;--e;return 0==d||0==e?0:h&&g?d<e?-1:d>e||h.C<g.m?1:-1:g?1:-1}
function Qc(a){var b=a.bound;if(!b){b=new Rc;for(var c=n(a),d=c.next();!d.done;d=c.next()){var e=d.value;b.Ka(e.C,e.w)}}b=b.o+(b.v-b.o>>1);e=c=Number.POSITIVE_INFINITY;a=n(a);for(d=a.next();!d.done;d=a.next())d=d.value,0<d.aa?(d=Sc(d,b),d<e&&(e=d)):0>d.aa&&(d=Sc(d,b),d<c&&(c=d));return new E(c+(e-c>>1),b)}
function Tc(a,b){var c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;b=n(b);for(var e=b.next();!e.done;e=b.next()){var h=e.value,g=Hc(a,h.m,h.l),k=Hc(a,h.C,h.w);e=a.getParameter(h.m,h.l);h=a.getParameter(h.C,h.w);if(g<k)g/=g-k,e=e*(1-g)+h*g,e<d&&(d=e);else if(g>k)g/=g-k,e=e*(1-g)+h*g,e>c&&(c=e);else if(0>g){if(e>h)return null}else if(0<g&&e<h)return null}return!isFinite(c)||!isFinite(d)||c>=d?null:[c,d]}
function Jc(a,b,c){if(void 0==a.type)return 0;switch(a.type){case 0:case 1:case 3:var d=0;a=(c-a.l)*-a.Aa+a.m;b<=a&&(d+=2);b>=a&&(d+=1);return d;case 2:return d=0,b<=a.m&&(d+=2),b>=a.m&&(d+=1),d;case 4:case 5:case 7:return d=0,a=(b-a.m)*a.Aa+a.l,c<=a&&(d+=2),c>=a&&(d+=1),d;case 6:return d=0,c<=a.l&&(d+=2),c>=a.l&&(d+=1),d;case 8:case 9:case 11:return d=0,a=(c-a.l)*-a.Aa+a.m,b<=a&&(d+=1),b>=a&&(d+=2),d;case 10:return d=0,b<=a.m&&(d+=1),b>=a.m&&(d+=2),d;case 12:case 13:case 15:return d=0,a=(b-a.m)*
a.Aa+a.l,c<=a&&(d+=1),c>=a&&(d+=2),d;case 14:return d=0,c<=a.l&&(d+=1),c>=a.l&&(d+=2),d}}
function Hc(a,b,c){switch(a.type){case 0:case 1:case 3:b-=a.m;c-=a.l;var d=Math.floor(c/a.aa);b-=d*a.fa;c-=d*a.aa;return(c*-a.Aa-b)*a.Wb;case 2:return a.m-b;case 4:case 5:case 7:return b-=a.m,c-=a.l,d=Math.floor(b/-a.fa),b+=d*a.fa,c+=d*a.aa,(b*a.Aa-c)*a.Wb;case 6:return a.l-c;case 8:case 9:case 11:return b-=a.m,c-=a.l,d=Math.floor(c/-a.aa),b+=d*a.fa,c+=d*a.aa,(b-c*-a.Aa)*a.Wb;case 10:return b-a.m;case 12:case 13:case 15:return b-=a.m,c-=a.l,d=Math.floor(b/a.fa),b-=d*a.fa,c-=d*a.aa,(c-b*a.Aa)*a.Wb;
case 14:return c-a.l}return NaN}f.getParameter=function(a,b){var c=this.type,d=this.fa,e=this.aa;this.type=(c+12)%16;this.fa=e;this.aa=-d;a=Hc(this,a,b);this.type=c;this.fa=d;this.aa=e;return a};f.evaluate=function(a){a/=this.length;return(new E(this.m+(this.C-this.m)*a,this.l+(this.w-this.l)*a)).round()};f.vb=function(a,b){var c=(this.C-this.m)/this.length,d=(this.w-this.l)/this.length;return(new E(this.m+c*a-d*b,this.l+d*a+c*b)).round()};
f.Af=function(a,b){return(new E(this.getParameter(a,b),Hc(this,a,b))).round()};function Uc(a){return(new E(a.C-a.m,a.w-a.l)).scale(5E4/a.length)}function Vc(a,b){return(new E(a.l-a.w,a.C-a.m)).scale(b/a.length)}f.Wg=function(a,b){a=this.getParameter(a,b);a/=this.length;return 0>=a?new E(this.m,this.l):1<=a?new E(this.C,this.w):(new E(this.m+(this.C-this.m)*a,this.l+(this.w-this.l)*a)).round()};
function Sc(a,b){var c=0;switch(a.type){case 0:case 1:case 3:if(b<a.l)break;if(b>=a.w)break;c-=a.m;b-=a.l;var d=Math.floor(b/a.aa);c-=d*a.fa;b-=d*a.aa;return b*-a.Aa-c;case 2:if(b<a.l)break;if(b>=a.w)break;return a.m-c;case 4:case 5:if(b<a.l)break;if(b>=a.w)break;c-=a.m;b-=a.l;d=Math.floor(b/a.aa);c-=d*a.fa;b-=d*a.aa;return b/a.Aa-c;case 7:if(b<a.w)break;if(b>=a.l)break;c-=a.m;b-=a.l;d=Math.floor(b/-a.aa);c+=d*a.fa;b+=d*a.aa;return b/a.Aa-c;case 8:case 9:case 11:if(b<a.w)break;if(b>=a.l)break;c-=
a.m;b-=a.l;d=Math.floor(b/-a.aa);c+=d*a.fa;b+=d*a.aa;return b*-a.Aa-c;case 10:if(b<a.w)break;if(b>=a.l)break;return a.m-c;case 12:case 13:if(b<a.w)break;if(b>=a.l)break;c-=a.m;b-=a.l;d=Math.floor(b/-a.aa);c+=d*a.fa;b+=d*a.aa;return b/a.Aa-c;case 15:if(!(b<a.l||b>=a.w))return c-=a.m,b-=a.l,d=Math.floor(b/a.aa),c-=d*a.fa,b-=d*a.aa,b/a.Aa-c}return NaN}
function Pc(a,b,c){switch(a.type){case 0:case 1:case 3:if(c<a.l)break;if(c>=a.w)break;b-=a.m;c-=a.l;var d=Math.floor(c/a.aa);b-=d*a.fa;c-=d*a.aa;a=c*-a.Aa-b;if(0>a)break;return a+1;case 2:if(c<a.l)break;if(c>=a.w)break;a=a.m-b;if(0>a)break;return a+1;case 4:case 5:if(c<a.l)break;if(c>=a.w)break;b-=a.m;c-=a.l;d=Math.floor(c/a.aa);b-=d*a.fa;c-=d*a.aa;a=c/a.Aa-b;if(0>a)break;return a+1;case 7:if(c<a.w)break;if(c>=a.l)break;b-=a.m;c-=a.l;d=Math.floor(c/-a.aa);b+=d*a.fa;c+=d*a.aa;a=c/a.Aa-b;if(0>a)break;
return-a-1;case 8:case 9:case 11:if(c<a.w)break;if(c>=a.l)break;b-=a.m;c-=a.l;d=Math.floor(c/-a.aa);b+=d*a.fa;c+=d*a.aa;a=c*-a.Aa-b;if(0>a)break;return-a-1;case 10:if(c<a.w)break;if(c>=a.l)break;a=a.m-b;if(0>a)break;return-a-1;case 12:case 13:if(c<a.w)break;if(c>=a.l)break;b-=a.m;c-=a.l;d=Math.floor(c/-a.aa);b+=d*a.fa;c+=d*a.aa;a=c/a.Aa-b;if(0>a)break;return-a-1;case 15:if(!(c<a.l||c>=a.w||(b-=a.m,c-=a.l,d=Math.floor(c/a.aa),b-=d*a.fa,c-=d*a.aa,a=c/a.Aa-b,0>a)))return a+1}return NaN}
f.log=function(){console.log(this.m+" "+this.l+" "+this.fa+" "+this.aa+" type: "+this.type+" slope: "+this.Aa)};f.ca=function(){var a=this.ib(this.m,this.l,this.C,this.w);a.type=this.type;a.Aa=this.Aa;a.Wb=this.Wb;a.length=this.length;a.fa=this.fa;a.aa=this.aa;return a};function Wc(a){var b=a.ib(a.C,a.w,a.m,a.l);b.type=(a.type+8)%16;b.Aa=a.Aa;b.Wb=a.Wb;b.length=a.length;b.fa=-a.fa;b.aa=-a.aa;return b}f.ib=function(a,b,c,d){return new Cc(a,b,c,d)};
function Xc(a){if(a.da)return a.da;var b=Wc(a);b.da=a;return a.da=b}function Yc(a,b){return a.type<b.type?-1:a.type>b.type?1:a.Aa<b.Aa?-1:a.Aa>b.Aa?1:0}function cd(a){var b=[];a=n(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(new E(c.m,c.l));return b}function dd(a){var b=[];a.bound&&(b.bound=a.bound);a=n(a);for(var c=a.next();!c.done;c=a.next())b.unshift(Xc(c.value));return b}
function G(a,b,c,d){this.set(void 0===a?255:a,void 0===b?255:b,void 0===c?255:c,void 0===d?255:d);return this}function ed(a,b){return a.r<b.r?-1:a.r>b.r?1:a.kb<b.kb?-1:a.kb>b.kb?1:a.ra<b.ra?-1:a.ra>b.ra?1:a.Qa<b.Qa?-1:a.Qa>b.Qa?1:0}G.prototype.set=function(a,b,c,d){255<a&&(a=255);0>a&&(a=0);255<b&&(b=255);0>b&&(b=0);255<c&&(c=255);0>c&&(c=0);255<d&&(d=255);0>d&&(d=0);this.r=a;this.kb=b;this.ra=c;this.Qa=d;return this};
G.prototype.scale=function(a){this.r=Math.round(this.r*a);this.kb=Math.round(this.kb*a);this.ra=Math.round(this.ra*a);return this};G.prototype.save=function(a){Fb(a,this.r);Fb(a,this.kb);Fb(a,this.ra);Fb(a,this.Qa);return this};function fd(a){return new G(Bb(a),Bb(a),Bb(a),Bb(a))}new G(0,0,0,0);var gd=new G(255,255,255,255),hd=new G(0,0,0,255),id=new G(255,0,0,255);new G(255,255,0,255);new G(0,255,0,255);new G(0,255,255,255);new G(0,0,255,255);new G(255,0,255,255);
function jd(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.$i=this.Zi=this.mf=this.lf=this.ed=this.dd=this.Cb=this.Sc=this.wc=this.Ke=this.Je=this.Ie=this.He=this.Ge=this.Fe=0;this.Ea=this.Od=this.Pd=this.ka=255;return this}
function kd(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:a.z<b.z?-1:a.z>b.z?1:a.Fe<b.Fe?-1:a.Fe>b.Fe?1:a.Ge<b.Ge?-1:a.Ge>b.Ge?1:a.He<b.He?-1:a.He>b.He?1:a.Ie<b.Ie?-1:a.Ie>b.Ie?1:a.Je<b.Je?-1:a.Je>b.Je?1:a.Ke<b.Ke?-1:a.Ke>b.Ke?1:a.wc<b.wc?-1:a.wc>b.wc?1:a.Sc<b.Sc?-1:a.Sc>b.Sc?1:a.Cb<b.Cb?-1:a.Cb>b.Cb?1:a.dd<b.dd?-1:a.dd>b.dd?1:a.ed<b.ed?-1:a.ed>b.ed?1:a.lf<b.lf?-1:a.lf>b.lf?1:a.mf<b.mf?-1:a.mf>b.mf?1:a.Zi<b.Zi?-1:a.Zi>b.Zi?1:a.$i<b.$i?-1:a.$i>b.$i?1:a.ka<b.ka?-1:a.ka>b.ka?1:a.Pd<b.Pd?-1:a.Pd>
b.Pd?1:a.Od<b.Od?-1:a.Od>b.Od?1:a.Ea<b.Ea?-1:a.Ea>b.Ea?1:0}function ld(a,b,c){var d=1-c,e=new jd(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c);e.Fe=a.Fe*d+b.Fe*c;e.Ge=a.Ge*d+b.Ge*c;e.He=a.He*d+b.He*c;e.Ie=a.Ie*d+b.Ie*c;e.Je=a.Je*d+b.Je*c;e.Ke=a.Ke*d+b.Ke*c;e.wc=a.wc*d+b.wc*c;e.Sc=a.Sc*d+b.Sc*c;e.Cb=a.Cb*d+b.Cb*c;e.dd=a.dd*d+b.dd*c;e.ed=a.ed*d+b.ed*c;e.lf=a.lf*d+b.lf*c;e.mf=a.mf*d+b.mf*c;e.ka=a.ka*d+b.ka*c;e.Pd=a.Pd*d+b.Pd*c;e.Od=a.Od*d+b.Od*c;e.Ea=a.Ea*d+b.Ea*c;return e}
jd.prototype.ca=function(){var a=new jd(this.x,this.y,this.z);a.Fe=this.Fe;a.Ge=this.Ge;a.He=this.He;a.Ie=this.Ie;a.Je=this.Je;a.Ke=this.Ke;a.wc=this.wc;a.Sc=this.Sc;a.Cb=this.Cb;a.dd=this.dd;a.ed=this.ed;a.lf=this.lf;a.mf=this.mf;a.ka=this.ka;a.Pd=this.Pd;a.Od=this.Od;a.Ea=this.Ea;return a};function pd(a,b){a.ka=b.r;a.Pd=b.kb;a.Od=b.ra;a.Ea=b.Qa}function qd(a,b,c){a.dd=b;a.ed=c;return a};function E(a,b){this.x=void 0===a?0:a;this.y=void 0===b?0:b;return this}f=E.prototype;f.set=function(a,b){this.x=a;this.y=b;return this};f.qc=function(){return this.x*this.x+this.y*this.y};f.length=function(){return Math.sqrt(this.qc())};f.pa=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.pa(1);return this};f.scale=function(a){this.x*=a;this.y*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.sub=function(a){this.x=this.x-a.x;this.y=this.y-a.y;return this};f.ca=function(){return new E(this.x,this.y)};f.ce=function(a){a||(a=new Float32Array(2));a[0]=this.x;a[1]=this.y;return a};function rd(a,b){return a.x*b.x+a.y*b.y}function sd(a,b){return a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0}f.Fj=function(){return 0!=this.x||0!=this.y?!1:!0};function w(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;return this}
function oc(a,b){return a.x*b.x+a.y*b.y+a.z*b.z}function qc(a,b,c){c.x=a.y*b.z-a.z*b.y;c.y=b.x*a.z-b.z*a.x;c.z=a.x*b.y-a.y*b.x;return c}function td(a,b,c){c.x=a.x-b.x;c.y=a.y-b.y;c.z=a.z-b.z;return c}function ud(a,b,c){var d=1-c;return new w(a.x*d+b.x*c,a.y*d+b.y*c,a.z*d+b.z*c)}function vd(a,b){b.x=a.x;b.y=a.y;b.z=a.z}f=w.prototype;f.ca=function(){return new w(this.x,this.y,this.z)};f.set=function(a,b,c){this.x=a;this.y=b;this.z=c;return this};
f.qc=function(){return this.x*this.x+this.y*this.y+this.z*this.z};f.length=function(){return Math.sqrt(this.qc())};f.pa=function(a){var b=this.length();if(0==b)return 0;this.scale(a/b);return b};f.normalize=function(){this.pa(1);return this};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.sub=function(a){return td(this,a,this)};f.ce=function(a){a||(a=new Float32Array(3));a[0]=this.x;a[1]=this.y;a[2]=this.z;return a};f.Fj=function(){return 0!=this.x||0!=this.y||0!=this.z?!1:!0};function wd(a,b,c,d){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.a=void 0===d?0:d;return this}wd.prototype.set=function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.a=d;return this};
wd.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.a=Math.round(this.a);return this};wd.prototype.ce=function(a){a||(a=new Float32Array(4));a[0]=this.x;a[1]=this.y;a[2]=this.z;a[3]=this.a;return a};wd.prototype.Fj=function(){return 0!=this.x||0!=this.y||0!=this.z||0!=this.a?!1:!0};function xd(){this.reset();return this}f=xd.prototype;
f.set=function(a){this.F=a.F;this.L=a.L;this.N=a.N;this.I=a.I;this.m11=a.m11;this.m12=a.m12;this.O=a.O;this.m21=a.m21;this.m22=a.m22;return this};f.reset=function(){this.F=1;this.I=this.N=this.L=0;this.m11=1;this.m21=this.O=this.m12=0;this.m22=1;return this};
f.rotate=function(a,b,c){var d=Math.cos(c);c=Math.sin(c);var e=c*this.F+d*this.L,h=d*this.I-c*this.m11,g=c*this.I+d*this.m11,k=d*this.O-c*this.m21,l=c*this.O+d*this.m21;this.F=d*this.F-c*this.L;this.L=e;this.I=h;this.m11=g;this.O=k;this.m21=l;d=Math.cos(b);b=Math.sin(b);c=d*this.N-b*this.L;e=b*this.m12+d*this.m11;h=d*this.m12-b*this.m11;g=b*this.m22+d*this.m21;k=d*this.m22-b*this.m21;this.L=b*this.N+d*this.L;this.N=c;this.m11=e;this.m12=h;this.m21=g;this.m22=k;b=Math.cos(a);a=Math.sin(a);d=a*this.N+
b*this.F;c=b*this.m12-a*this.I;e=a*this.m12+b*this.I;h=b*this.m22-a*this.O;g=a*this.m22+b*this.O;this.N=b*this.N-a*this.F;this.F=d;this.m12=c;this.I=e;this.m22=h;this.O=g;return this};f.Zj=function(a,b){var c=Math.cos(b),d=Math.sin(b);b=1-c;var e=a.x*a.y,h=a.y*a.z,g=a.z*a.x,k=a.x*d,l=a.y*d;d*=a.z;this.F=a.x*a.x*b+c;this.L=e*b+d;this.N=g*b-l;this.I=e*b-d;this.m11=a.y*a.y*b+c;this.m12=h*b+k;this.O=g*b+l;this.m21=h*b-k;this.m22=a.z*a.z*b+c;return this};
f.Xj=function(a,b){a=(new xd).Zj(a,b);yd(a,this,this);return this};f.scale=function(a,b,c){this.F*=a;this.L*=a;this.N*=a;this.I*=b;this.m11*=b;this.m12*=b;this.O*=c;this.m21*=c;this.m22*=c;return this};
f.Ej=function(a){a||(a=this);var b=this.tj();if(0==b)return a;var c=-(this.I*this.m22+this.m12*-this.O),d=this.I*this.m21+this.m11*-this.O,e=-(this.L*this.m22+this.N*-this.m21),h=this.F*this.m22+this.N*-this.O,g=-(this.F*this.m21+this.L*-this.O),k=this.L*this.m12+this.N*-this.m11,l=-(this.F*this.m12+this.N*-this.I),m=this.F*this.m11+this.L*-this.I;b=1/b;a.F=(this.m11*this.m22+this.m12*-this.m21)*b;a.I=c*b;a.O=d*b;a.L=e*b;a.m11=h*b;a.m21=g*b;a.N=k*b;a.m12=l*b;a.m22=m*b;return a};
f.tj=function(){return this.F*(this.m11*this.m22-this.m12*this.m21)+this.L*(this.m12*this.O-this.I*this.m22)+this.N*(this.I*this.m21-this.m11*this.O)};f.ce=function(a){a||(a=new Float32Array(9));a[0]=this.F;a[1]=this.L;a[2]=this.N;a[3]=this.I;a[4]=this.m11;a[5]=this.m12;a[6]=this.O;a[7]=this.m21;a[8]=this.m22;return a};
function yd(a,b,c){var d=a.L*b.F+a.m11*b.L+a.m21*b.N,e=a.N*b.F+a.m12*b.L+a.m22*b.N,h=a.F*b.I+a.I*b.m11+a.O*b.m12,g=a.L*b.I+a.m11*b.m11+a.m21*b.m12,k=a.N*b.I+a.m12*b.m11+a.m22*b.m12,l=a.F*b.O+a.I*b.m21+a.O*b.m22,m=a.L*b.O+a.m11*b.m21+a.m21*b.m22,p=a.N*b.O+a.m12*b.m21+a.m22*b.m22;c.F=a.F*b.F+a.I*b.L+a.O*b.N;c.I=h;c.O=l;c.L=d;c.m11=g;c.m21=m;c.N=e;c.m12=k;c.m22=p;return c}
f.transform=function(a,b){return b.set(this.F*a.x+this.I*a.y+this.O*a.z,this.L*a.x+this.m11*a.y+this.m21*a.z,this.N*a.x+this.m12*a.y+this.m22*a.z)};f.Ve=function(){return new w(this.F,this.L,this.N)};f.We=function(){return new w(this.I,this.m11,this.m12)};f.Bd=function(){return new w(this.O,this.m21,this.m22)};f.cf=function(a){this.F=a.x;this.L=a.y;this.N=a.z;return this};f.df=function(a){this.I=a.x;this.m11=a.y;this.m12=a.z;return this};f.ef=function(a){this.O=a.x;this.m21=a.y;this.m22=a.z;return this};
f.save=function(a){var b=new Uint8Array((new Float32Array([this.F,this.L,this.N,this.I,this.m11,this.m12,this.O,this.m21,this.m22])).buffer);a.set(b,a.position);a.position+=36};f.load=function(a){a=a.slice(a.position,a.position+=36);a=new Float32Array(a.buffer);a=n(a);this.F=a.next().value;this.L=a.next().value;this.N=a.next().value;this.I=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.O=a.next().value;this.m21=a.next().value;this.m22=a.next().value};new xd;
function J(){this.reset();return this}f=J.prototype;f.set=function(a){this.F=a.F;this.L=a.L;this.N=a.N;this.lb=a.lb;this.I=a.I;this.m11=a.m11;this.m12=a.m12;this.m13=a.m13;this.O=a.O;this.m21=a.m21;this.m22=a.m22;this.m23=a.m23;this.G=a.G;this.m31=a.m31;this.m32=a.m32;this.m33=a.m33;return this};f.reset=function(){this.F=1;this.I=this.lb=this.N=this.L=0;this.m11=1;this.m21=this.O=this.m13=this.m12=0;this.m22=1;this.m32=this.m31=this.G=this.m23=0;this.m33=1;return this};
function zd(a){xd.prototype.reset.call(a)}f.translate=function(a,b,c){this.G+=a;this.m31+=b;this.m32+=c;return this};f.rotate=xd.prototype.rotate;f.Zj=xd.prototype.Zj;f.Xj=xd.prototype.Xj;f.scale=xd.prototype.scale;
f.Ej=function(a){function b(D,H,K,R,sa,ta,ia,ja,Mb){return D*(sa*Mb-ta*ja)+H*(ta*ia-R*Mb)+K*(R*ja-sa*ia)}a||(a=this);var c=this.tj();if(0==c)return a;var d=b(this.m11,this.m12,this.m13,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),e=-b(this.I,this.m12,this.m13,this.O,this.m22,this.m23,this.G,this.m32,this.m33),h=b(this.I,this.m11,this.m13,this.O,this.m21,this.m23,this.G,this.m31,this.m33),g=-b(this.I,this.m11,this.m12,this.O,this.m21,this.m22,this.G,this.m31,this.m32),k=-b(this.L,this.N,
this.lb,this.m21,this.m22,this.m23,this.m31,this.m32,this.m33),l=b(this.F,this.N,this.lb,this.O,this.m22,this.m23,this.G,this.m32,this.m33),m=-b(this.F,this.L,this.lb,this.O,this.m21,this.m23,this.G,this.m31,this.m33),p=b(this.F,this.L,this.N,this.O,this.m21,this.m22,this.G,this.m31,this.m32),r=b(this.L,this.N,this.lb,this.m11,this.m12,this.m13,this.m31,this.m32,this.m33),q=-b(this.F,this.N,this.lb,this.I,this.m12,this.m13,this.G,this.m32,this.m33),v=b(this.F,this.L,this.lb,this.I,this.m11,this.m13,
this.G,this.m31,this.m33),z=-b(this.F,this.L,this.N,this.I,this.m11,this.m12,this.G,this.m31,this.m32),y=-b(this.L,this.N,this.lb,this.m11,this.m12,this.m13,this.m21,this.m22,this.m23),x=b(this.F,this.N,this.lb,this.I,this.m12,this.m13,this.O,this.m22,this.m23),B=-b(this.F,this.L,this.lb,this.I,this.m11,this.m13,this.O,this.m21,this.m23),A=b(this.F,this.L,this.N,this.I,this.m11,this.m12,this.O,this.m21,this.m22);c=1/c;a.F=d*c;a.I=e*c;a.O=h*c;a.G=g*c;a.L=k*c;a.m11=l*c;a.m21=m*c;a.m31=p*c;a.N=r*c;a.m12=
q*c;a.m22=v*c;a.m32=z*c;a.lb=y*c;a.m13=x*c;a.m23=B*c;a.m33=A*c;return a};
f.tj=function(){var a=this.F*(this.m11*this.m22*this.m33+this.m12*this.m23*this.m31+this.m13*this.m21*this.m32-(this.m13*this.m22*this.m31+this.m11*this.m23*this.m32+this.m12*this.m21*this.m33));a-=this.L*(this.I*this.m22*this.m33+this.m12*this.m23*this.G+this.m13*this.O*this.m32-(this.m13*this.m22*this.G+this.I*this.m23*this.m32+this.m12*this.O*this.m33));a+=this.N*(this.I*this.m21*this.m33+this.m11*this.m23*this.G+this.m13*this.O*this.m31-(this.m13*this.m21*this.G+this.I*this.m23*this.m31+this.m11*
this.O*this.m33));return a-=this.lb*(this.I*this.m21*this.m32+this.m11*this.m22*this.G+this.m12*this.O*this.m31-(this.m12*this.m21*this.G+this.I*this.m22*this.m31+this.m11*this.O*this.m32))};f.ce=function(a){a||(a=new Float32Array(16));a[0]=this.F;a[1]=this.L;a[2]=this.N;a[3]=this.lb;a[4]=this.I;a[5]=this.m11;a[6]=this.m12;a[7]=this.m13;a[8]=this.O;a[9]=this.m21;a[10]=this.m22;a[11]=this.m23;a[12]=this.G;a[13]=this.m31;a[14]=this.m32;a[15]=this.m33;return a};
function Ad(a,b,c){var d=a.L*b.F+a.m11*b.L+a.m21*b.N+a.m31*b.lb,e=a.N*b.F+a.m12*b.L+a.m22*b.N+a.m32*b.lb,h=a.lb*b.F+a.m13*b.L+a.m23*b.N+a.m33*b.lb,g=a.F*b.I+a.I*b.m11+a.O*b.m12+a.G*b.m13,k=a.L*b.I+a.m11*b.m11+a.m21*b.m12+a.m31*b.m13,l=a.N*b.I+a.m12*b.m11+a.m22*b.m12+a.m32*b.m13,m=a.lb*b.I+a.m13*b.m11+a.m23*b.m12+a.m33*b.m13,p=a.F*b.O+a.I*b.m21+a.O*b.m22+a.G*b.m23,r=a.L*b.O+a.m11*b.m21+a.m21*b.m22+a.m31*b.m23,q=a.N*b.O+a.m12*b.m21+a.m22*b.m22+a.m32*b.m23,v=a.lb*b.O+a.m13*b.m21+a.m23*b.m22+a.m33*b.m23,
z=a.F*b.G+a.I*b.m31+a.O*b.m32+a.G*b.m33,y=a.L*b.G+a.m11*b.m31+a.m21*b.m32+a.m31*b.m33,x=a.N*b.G+a.m12*b.m31+a.m22*b.m32+a.m32*b.m33,B=a.lb*b.G+a.m13*b.m31+a.m23*b.m32+a.m33*b.m33;c.F=a.F*b.F+a.I*b.L+a.O*b.N+a.G*b.lb;c.I=g;c.O=p;c.G=z;c.L=d;c.m11=k;c.m21=r;c.m31=y;c.N=e;c.m12=l;c.m22=q;c.m32=x;c.lb=h;c.m13=m;c.m23=v;c.m33=B}
f.transform=function(a,b){return b.set(this.F*a.x+this.I*a.y+this.O*a.z+this.G*a.a,this.L*a.x+this.m11*a.y+this.m21*a.z+this.m31*a.a,this.N*a.x+this.m12*a.y+this.m22*a.z+this.m32*a.a,this.lb*a.x+this.m13*a.y+this.m23*a.z+this.m33*a.a)};f.vb=function(a,b){return b.set(this.F*a.x+this.I*a.y+this.O*a.z+this.G,this.L*a.x+this.m11*a.y+this.m21*a.z+this.m31,this.N*a.x+this.m12*a.y+this.m22*a.z+this.m32)};
function Bd(a,b,c){c.set(a.F*b.x+a.I*b.y+a.O*b.z,a.L*b.x+a.m11*b.y+a.m21*b.z,a.N*b.x+a.m12*b.y+a.m22*b.z)}f.Ve=xd.prototype.Ve;f.We=xd.prototype.We;f.Bd=xd.prototype.Bd;function Cd(a){return new w(a.G,a.m31,a.m32)}f.cf=xd.prototype.cf;f.df=xd.prototype.df;f.ef=xd.prototype.ef;function Dd(a,b){a.G=b.x;a.m31=b.y;a.m32=b.z}
f.save=function(a){var b=new Uint8Array((new Float32Array([this.F,this.L,this.N,this.lb,this.I,this.m11,this.m12,this.m13,this.O,this.m21,this.m22,this.m23,this.G,this.m31,this.m32,this.m33])).buffer);a.set(b,a.position);a.position+=64};
f.load=function(a){a=a.slice(a.position,a.position+=64);a=new Float32Array(a.buffer);a=n(a);this.F=a.next().value;this.L=a.next().value;this.N=a.next().value;this.lb=a.next().value;this.I=a.next().value;this.m11=a.next().value;this.m12=a.next().value;this.m13=a.next().value;this.O=a.next().value;this.m21=a.next().value;this.m22=a.next().value;this.m23=a.next().value;this.G=a.next().value;this.m31=a.next().value;this.m32=a.next().value;this.m33=a.next().value};var Nd=new J;
function Rc(){this.s=Number.POSITIVE_INFINITY;this.u=Number.NEGATIVE_INFINITY;this.o=Number.POSITIVE_INFINITY;this.v=Number.NEGATIVE_INFINITY}Rc.prototype.Ka=function(a,b){a<this.s&&(this.s=a);a>this.u&&(this.u=a);b<this.o&&(this.o=b);b>this.v&&(this.v=b);return this};Rc.prototype.cl=function(a){this.Ka(a.s,a.o);this.Ka(a.u,a.v)};Rc.prototype.ca=function(){var a=new Rc;a.s=this.s;a.u=this.u;a.o=this.o;a.v=this.v;return a};
Rc.prototype.yf=function(a,b){return a<=this.s||a>=this.u||b<=this.o||b>=this.v?!1:!0};function Od(){this.s=Number.POSITIVE_INFINITY;this.u=Number.NEGATIVE_INFINITY;this.o=Number.POSITIVE_INFINITY;this.v=Number.NEGATIVE_INFINITY;this.D=Number.POSITIVE_INFINITY;this.H=Number.NEGATIVE_INFINITY}Od.prototype.Ka=function(a,b,c){a<this.s&&(this.s=a);a>this.u&&(this.u=a);b<this.o&&(this.o=b);b>this.v&&(this.v=b);c<this.D&&(this.D=c);c>this.H&&(this.H=c);return this};
Od.prototype.cl=function(a){this.Ka(a.s,a.o,a.D);this.Ka(a.u,a.v,a.H)};Od.prototype.ca=function(){var a=new Od;a.s=this.s;a.u=this.u;a.o=this.o;a.v=this.v;a.D=this.D;a.H=this.H;return a};function Pd(a,b){return a.s>=b.u||a.u<=b.s||a.o>=b.v||a.v<=b.o||a.D>=b.H||a.H<=b.D?!1:!0}Od.prototype.yf=function(a,b){return a<=this.s||a>=this.u||b<=this.o||b>=this.v||void 0<=this.D||void 0>=this.H?!1:!0};t.Node=function(a){this.name=a;this.children=this.parent=null;this.xl=new db(this);this.Sa=1;this.ia=t.ia;this.qa=-2147483648;return this};f=t.Node.prototype;f.create=function(){};f.remove=function(){M(this,null)};function Qd(a,b){if(0!=b.call(a)&&a.children)for(a=a.children.first();null!=a.item;a=a.next)Qd(a.item,b)}f.step=function(){};f.Xc=function(){};f.ab=function(){};function Rd(a){Qd(a,function(){if(!this.$h())return!1;this.ab(void 0)})}f.$h=function(){return!this.Sa||this.ia.qa<t.j?!1:!0};
function M(a,b){if(a.parent)return a.parent=b,t.Wj.push(a),a;if(b)return a.parent=b,Sd(a)}function Sd(a){eb(a.xl);if(!a.parent)return a;a.parent.children||(a.parent.children=new cb);fb(a.parent.children,a.xl);return a}function Td(a,b){a.ia=b;if(a.children)for(a=a.children.first();null!=a.item;a=a.next)Td(a.item,b)}
f.log=function(){this.name?console.group(this.constructor.name+": "+this.name):console.group(this.constructor.name);if(this.children)for(var a=this.children.first();null!=a.item;a=a.next)a.item.log();console.groupEnd()};t.Ga=function(a){t.Node.call(this,a);this.transform=new J;this.Ja=null;this.M=new J};t.Ga.prototype=Object.create(t.Node.prototype);t.Ga.prototype.constructor=t.Ga;function Ud(a,b){var c=a.Zg=new t.Qf;c.ia=a.ia;c.nb=1.75*b;c.Ja=a.M;M(c,t.Yh)}
t.Ga.prototype.remove=function(){this.Zg&&this.Zg.remove();t.Node.prototype.remove.call(this)};t.Ga.prototype.save=function(a){Cb(a,"NG.Node3D");this.M.save()};t.Ga.prototype.step=function(){Vd(this)};function Vd(a){a.Ja?Ad(a.Ja,a.transform,a.M):a.M.set(a.transform)}t.ia={qa:NaN,mb:new w(1,1,1)};t.Wj=[];t.Yj=new t.Node("schedule");t.Zc=M(new t.Node("scene"),t.Yj);t.inputs=M(new t.Node("inputs"),t.Yj);function Wd(){this.Lb=new ab(zb);this.Ac=new ab(zb);this.va=new ab(zb);this.P=new ab(zb);this.X=new ab(zb);return this}
Wd.prototype.save=function(a){Lb(a,this.Lb.elements.length);for(var b=0;b<this.Lb.elements.length;b++)this.Lb.elements[b].save(a);Lb(a,this.Ac.elements.length);for(b=0;b<this.Ac.elements.length;b++)this.Ac.elements[b].save(a);Lb(a,this.va.elements.length);for(b=0;b<this.va.elements.length;b++)this.va.elements[b].save(a);Lb(a,this.P.elements.length);for(b=0;b<this.P.elements.length;b++)this.P.elements[b].save(a);Lb(a,this.X.elements.length);for(b=0;b<this.X.elements.length;b++)this.X.elements[b].save(a)};
Wd.prototype.load=function(a){this.Tf=0;var b=Kb(a);for(var c=0;c<b;c++){var d=new Xd;d.load(a);this.Lb.replace(d)}b=Kb(a);for(c=0;c<b;c++)d=new Yd,d.load(a),this.Ac.replace(d);b=Kb(a);if(this.va.elements.length){for(c=0;c<b;c++)Ab(a),Gb(a),Gb(a);b=n(this.va.elements);for(c=b.next();!c.done;c=b.next())c.value.create()}else for(c=0;c<b;c++)d=new Zd,d.load(a),this.va.replace(d);b=Kb(a);this.Tf+=b;for(c=0;c<b;c++)d=new t.Ae,d.Fh=this,d.load(a),this.P.replace(d);b=Kb(a);this.Tf+=b;for(c=0;c<b;c++)d=new t.Audio,
d.Fh=this,d.load(a),this.X.replace(d);0==this.Tf&&this.ready&&this.ready.call(this)};function $d(a){a.Tf--;0<a.Tf||a.ready&&a.ready.call(a)};t.Ca={musicEnabled:1,viewportFitWindow:1,viewportSize:16,lightingFancy:1,mouseRaw:1,mouseDPI:1600,mouseScale:3,wheelScale:1};
t.Im=function(){t.xa={MoveForwardKey:"KeyW",MoveForwardMouseButton:"",MoveBackwardKey:"KeyS",MoveBackwardMouseButton:"",MoveLeftKey:"KeyA",MoveLeftMouseButton:"",MoveRightKey:"KeyD",MoveRightMouseButton:"",JumpKey:"Space",JumpMouseButton:"",ReloadKey:"KeyR",ReloadMouseButton:"",MasherKey:"KeyF",MasherMouseButton:"1",RevolverKey:"KeyQ",RevolverMouseButton:"",CarbineKey:"KeyE",CarbineMouseButton:"",ShotgunKey:"KeyC",ShotgunMouseButton:"",GrenadeKey:"KeyG",GrenadeMouseButton:"3",NextGunKey:"",NextGunMouseButton:"",
PrevGunKey:"",PrevGunMouseButton:"",GunFireKey:"",GunFireMouseButton:"0",GunActionKey:"",GunActionMouseButton:"2"}};t.Im();
t.ue=function(a,b){0==a?(he.kd=null,N.kd=null,document.removeEventListener("keydown",he.Lk),document.removeEventListener("keydown",he.Ah),document.removeEventListener("mousedown",N.Ah),document.removeEventListener("wheel",N.Mk),document.addEventListener("keydown",he.Ok),document.addEventListener("keyup",he.Pk),document.addEventListener("mousedown",N.Qk),document.addEventListener("mouseup",N.Rk),document.addEventListener("wheel",N.Sk),t.kk&&t.kk.remove()):(document.removeEventListener("keydown",he.Ok),
document.removeEventListener("keyup",he.Pk),document.removeEventListener("mousedown",N.Qk),document.removeEventListener("mouseup",N.Rk),document.removeEventListener("wheel",N.Sk),1==a?(he.kd=b,document.addEventListener("keydown",he.Lk)):2==a&&(N.kd=b,document.addEventListener("keydown",he.Ah),document.addEventListener("mousedown",N.Ah),document.addEventListener("wheel",N.Mk)))};var ie=parseFloat(window.localStorage.getItem("version"));(isNaN(ie)||.011>ie)&&window.localStorage.clear();
window.localStorage.setItem("version",.018);for(var je in t.Ca){var ke=window.localStorage.getItem(je);null==ke?window.localStorage.setItem(je,t.Ca[je]):t.Ca[je]=parseFloat(ke)}for(var le in t.xa){var me=window.localStorage.getItem(le);null==me?window.localStorage.setItem(le,t.xa[le]):t.xa[le]=me}t.Si=function(){t.zm=4294967296/(t.Ca.mouseDPI*t.Ca.mouseScale)};t.Si();t.xh={};t.xh.overflowX=document.body.style.overflowX;t.xh.overflowY=document.body.style.overflowY;t.xh.userSelect=document.body.style.userSelect;
u=t.canvas.getContext("webgl2",{alpha:!1,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1,fn:!0});t.tc={};t.j=NaN;t.Ch=0;t.yi=1E3/60;t.qa=-2147483648;t.Ze=function(){2147483647==t.qa&&(t.qa=-2147483648);t.qa++};t.ic=new G(0,0,0,0);t.sm=new G(255,255,255,0);t.i=new Wd;t.A=null;t.cj=null;t.Jk=null;t.la=null;t.viewport=null;
t.Fm=function(){t.canvas.width=480;t.canvas.height=296;t.sh=new Bc(480,296,null);t.Uh.width=480;t.Uh.height=296;t.Uh.create();t.ee.style.width=t.canvas.width+"px";t.ee.style.height=t.canvas.height+"px";document.body.style.width=t.canvas.width+"px";t.wg()};t.ml=0;
t.wg=function(a){var b=Math.min(window.innerWidth/document.body.clientWidth,window.innerHeight/document.body.clientHeight);b=Math.floor(8*b);b=Math.max(b,12);var c=t.Ca.viewportFitWindow?b:t.Ca.viewportSize;a&&(c+=a,t.Ca.viewportFitWindow=0,t.Ph?t.Ph.checked=!1:window.localStorage.setItem("viewportFitWindow",0));b=t.ml=Math.max(t.ml,b);c=Wa(c,12,b);t.Ca.viewportSize=c;t.Ph||window.localStorage.setItem("viewportSize",c);document.body.style.transform="scale("+c/8+")"};
window.onresize=function(){document.body.style.left=(window.innerWidth-t.canvas.width>>1)+"px";t.wg()};t.Zh=function(a){u.viewport(a.x,a.y,a.a,a.b);t.viewport=a;t.tc.hd.J("viewport",new E(a.a,a.b),!0);t.tc.hd.upload()};t.zl=function(a){t.la=a};t.cb=function(a){t.A!=a&&(t.A=a.bind())};t.Ab=function(a){t.cj!=a&&(t.cj=a.bind())};t.ff=function(a){a&&t.Jk!=a&&(t.Jk=a.bind())};
t.Nb=function(a,b){u.activeTexture(u.TEXTURE0+a);b?(u.bindTexture(u.TEXTURE_2D,b.object),t.A.J("enableTexture"+a,1,!0)):(u.bindTexture(u.TEXTURE_2D,null),t.A.J("enableTexture"+a,0,!0))};t.rb=function(a){if(t.Ha!=a){switch(a){case 0:u.disable(u.BLEND);break;case 1:u.enable(u.BLEND);u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case 2:u.enable(u.BLEND),u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA)}t.Ha=a}};
t.bc=function(a){if(t.depth!=a){switch(a){case 0:u.disable(u.DEPTH_TEST);break;case 1:u.enable(u.DEPTH_TEST);u.depthMask(!1);break;case 2:u.enable(u.DEPTH_TEST),u.depthMask(!0)}t.depth=a}};t.Tb=function(a){if(t.facing!=a){switch(a){case 0:u.disable(u.CULL_FACE);break;case 1:u.enable(u.CULL_FACE);u.frontFace(u.CCW);break;case 2:u.enable(u.CULL_FACE),u.frontFace(u.CW)}t.facing=a}};for(var ne=0;4>ne;ne++)u.enableVertexAttribArray(ne);u.clearColor(0,0,0,0);u.depthFunc(u.LEQUAL);
t.start=function(){t.tc.hd.create(["u_eyeMatrix","u_viewMatrix","u_cameraPos","u_viewport"]);t.tc.ul.create([]);requestAnimationFrame(function(a){t.Df.time=a;t.Df.Um=a;t.Bi=a;t.loop(a)})};t.Df={};t.Df.time=0;t.Df.ub=0;t.Df.el=0;t.Df.Em=function(a){this.Um=a;a>=this.time+1E3&&(this.el=this.ub=0,this.time+=1E3);this.ub++};t.paused=!0;
t.loop=function(a){var b=(t.Bi-a)/t.yi;if(!(.5<b))if(-.5>b&&(t.Bi=a,t.Df.el++),t.Bi+=t.yi,2==t.Ui&&t.g.pause(),t.paused)t.g&&t.g.Sm(),t.Ch++;else{t.Df.Em(a);if(t.Bl){t.Bl--;requestAnimationFrame(t.loop);return}t.em=a+t.yi;Qd(t.Yj,function(){this.step()});a=n(t.Wj);for(b=a.next();!b.done;b=a.next())Sd(b.value);t.Wj.length=0;t.j++}requestAnimationFrame(t.loop)};t.ln=function(a,b){for(var c=[],d=Math.floor(640/a);1920>=a*d;d++)c.push([a*d,b*d]);return c};function oe(a,b){a=u.createShader(a);u.shaderSource(a,b);u.compileShader(a);if(u.getShaderParameter(a,u.COMPILE_STATUS))return a;console.log(b);console.log(u.getShaderInfoLog(a));u.deleteShader(a)}function Zd(){this.name=void 0;this.Fa={};this.bj={}}f=Zd.prototype;
f.create=function(){this.Lm=oe(u.VERTEX_SHADER,this.ek);this.Km=oe(u.FRAGMENT_SHADER,this.dk);var a=this.Km;var b=this.cn;var c=u.createProgram();u.attachShader(c,this.Lm);u.attachShader(c,a);if(b)for(a=0;a<b.length;a++)u.bindAttribLocation(c,a,b[a]);else u.bindAttribLocation(c,0,"a_position"),u.bindAttribLocation(c,1,"a_texture0"),u.bindAttribLocation(c,2,"a_color"),u.bindAttribLocation(c,3,"a_basisZ");u.linkProgram(c);u.getProgramParameter(c,u.LINK_STATUS)?b=c:(console.log(u.getProgramInfoLog(c)),
u.deleteShader(c),b=void 0);this.Xg=b;t.cb(this)};
f.J=function(a,b,c){a="u_"+a;this.Fa.hasOwnProperty(a)||(this.Fa[a]=u.getUniformLocation(this.Xg,a));var d=this.bj[a];c?d!=b&&(this.bj[a]=b,u.uniform1i(this.Fa[a],b)):isNaN(b)?b instanceof Float32Array?u.uniform3fv(this.Fa[a],b):b instanceof J?u.uniformMatrix4fv(this.Fa[a],!1,b.ce()):b instanceof G?(this.bj[a]=b,u.uniform4f(this.Fa[a],b.r/255,b.kb/255,b.ra/255,b.Qa/255)):b instanceof wd?u.uniform4f(this.Fa[a],b.x,b.y,b.z,b.a):b instanceof w?u.uniform3f(this.Fa[a],b.x,b.y,b.z):b instanceof E&&u.uniform2f(this.Fa[a],
b.x,b.y):d!=b&&(this.bj[a]=b,u.uniform1f(this.Fa[a],b))};f.bind=function(){u.useProgram(this.Xg);return this};f.load=function(a){this.name=Ab(a);this.ek=Gb(a);this.dk=Gb(a);this.create();delete this.ek;delete this.dk};f.save=function(a){Cb(a,this.name);Ib(a,this.ek);Ib(a,this.dk)};function pe(){this.usage=this.target=null;this.bl=u.createBuffer();this.buffer=null}pe.prototype.bind=function(){u.bindBuffer(this.target,this.bl);return this};function qe(a,b){a.buffer=new ArrayBuffer(b);u.bufferData(a.target,a.buffer,a.usage)}pe.prototype.upload=function(){u.bufferSubData(this.target,0,this.buffer);return this};function re(){pe.call(this);this.target=u.ARRAY_BUFFER;this.usage=u.STATIC_DRAW;this.Ob=32;t.cj=null;t.Ab(this)}re.prototype=Object.create(pe.prototype);
re.prototype.constructor=re;re.prototype.bind=function(){pe.prototype.bind.call(this);u.vertexAttribPointer(0,3,u.FLOAT,!1,this.Ob,0);u.vertexAttribPointer(1,2,u.FLOAT,!1,this.Ob,12);u.vertexAttribPointer(2,4,u.UNSIGNED_BYTE,!0,this.Ob,20);u.vertexAttribPointer(3,3,u.SHORT,!0,this.Ob,24);return this};re.prototype.upload=function(a){this.write(a);pe.prototype.upload.call(this);return this};
function se(a){var b=t.cj;b.buffer=new ArrayBuffer(a.length*b.Ob);b.write(a);u.bufferData(b.target,b.buffer,b.usage)}
re.prototype.write=function(a,b){b*=this.Ob;var c=new Float32Array(this.buffer,b),d=new Int16Array(this.buffer,b);b=new Uint8Array(this.buffer,b);for(var e=0;e<a.length;e++){var h=a[e];var g=c;var k=e*this.Ob>>>2;g[k]=h.x;g[k+1]=h.y;g[k+2]=h.z;k=e*this.Ob+12>>>2;g[k]=h.dd;g[k+1]=h.ed;g=b;k=e*this.Ob+20;g[k]=h.ka;g[k+1]=h.Pd;g[k+2]=h.Od;g[k+3]=h.Ea;g=d;k=e*this.Ob+24>>>1;g[k]=h.wc;g[k+1]=h.Sc;g[k+2]=h.Cb}return this};
function te(){pe.call(this);this.target=u.ELEMENT_ARRAY_BUFFER;this.usage=u.STATIC_DRAW;t.ff(this)}te.prototype=Object.create(pe.prototype);te.prototype.constructor=te;te.prototype.upload=function(a){(new Uint16Array(this.buffer)).set(a);return pe.prototype.upload.call(this)};function ue(){pe.call(this);this.target=u.UNIFORM_BUFFER;this.usage=u.DYNAMIC_DRAW;this.mj=null;this.di=this.ni=0;this.Fa={};pe.prototype.bind.call(this)}ue.prototype=Object.create(pe.prototype);ue.prototype.constructor=ue;
ue.prototype.create=function(a){u.bindBufferBase(this.target,this.ni,this.bl);for(var b=0;b<t.i.va.elements.length;b++){var c=t.i.va.elements[b];t.cb(c);u.uniformBlockBinding(c.Xg,u.getUniformBlockIndex(c.Xg,this.mj),this.ni)}b=u.getUniformIndices(t.A.Xg,a);c=n(b);for(var d=c.next();!d.done;d=c.next())if(d.value==u.INVALID_INDEX)return console.log("uniform not found ",this),this;b=u.getActiveUniforms(t.A.Xg,b,u.UNIFORM_OFFSET);for(c=0;c<a.length;c++)this.Fa[a[c]]=b[c];return this};
ue.prototype.J=function(a,b,c){a="u_"+a;b instanceof J?b.ce(new Float32Array(this.buffer,this.Fa[a],16)):b instanceof G||(b instanceof wd?b.ce(new Float32Array(this.buffer,this.Fa[a],4)):b instanceof w||b instanceof E&&(c?b.ce(new Uint32Array(this.buffer,this.Fa[a],2)):b.ce(new Float32Array(this.buffer,this.Fa[a],2))))};ue.prototype.upload=function(){pe.prototype.bind.call(this);u.bufferData(this.target,this.buffer.byteLength,this.usage);u.bufferSubData(this.target,0,this.buffer);return this};
var ve,we=ve=new re;we.usage=u.STATIC_DRAW;we.fi=[];var xe,ye=xe=new te;ye.usage=u.STATIC_DRAW;ye.elements=[];var ze=t.tc.hd=new ue;ze.mj="Common";ze.ni=0;ze.di=160;qe(ze,ze.di);var Ae=t.tc.ul=new ue;Ae.mj="PortalLights";Ae.ni=1;Ae.di=480;qe(Ae,64*Ae.di);function Xd(){this.name="defaultMaterial";this.je=new G(255,255,255,255);this.Id=new G(255,255,255,51);this.$c=4;this.ad=1;this.dg=new G(0,0,0,0);this.Ha=0;return this}function Le(a,b){if(a.name<b.name)return-1;if(a.name>b.name)return 1;var c=ed(a.je,b.je);if(0!=c)return c;c=ed(a.Id,b.Id);if(0!=c)return c;c=ed(a.dg,b.dg);return 0!=c?c:a.$c<b.$c?-1:a.$c>b.$c?1:a.ad<b.ad?-1:a.ad>b.ad?1:a.Ha<b.Ha?-1:a.Ha>b.Ha?1:0}
Xd.prototype.ca=function(){var a=new Xd;a.je=this.je;a.Id=this.Id;a.$c=this.$c;a.ad=this.ad;a.dg=this.dg;a.Ha=this.Ha;return a};Xd.prototype.bind=function(){t.A.J("color",this.je);t.A.J("specularColor",this.Id);t.A.J("specularExponent",this.$c);t.A.J("specularSheen",this.ad);t.A.J("emissiveColor",this.dg)};Xd.prototype.save=function(a){Cb(a,this.name);this.je.save(a);this.Id.save(a);Lb(a,Math.floor(1024*this.$c));Fb(a,Math.floor(255*this.ad));this.dg.save(a);Fb(a,this.Ha);return a};
Xd.prototype.load=function(a){this.name=Ab(a);this.je=fd(a);this.Id=fd(a);this.$c=Kb(a)/1024;this.ad=Bb(a)/255;this.dg=fd(a);this.Ha=Bb(a)};var Me=t.i,Ne=new Xd;Me.Lb.replace(Ne);t.Ae=function(){this.Gi=u.RGBA8;this.height=this.width=2;this.border=0;this.format=u.RGBA;this.type=u.UNSIGNED_BYTE;this.data=null;this.Ef=t.Ae.Ef;this.Qg=t.Ae.Qg;this.sk=this.rk=u.CLAMP_TO_EDGE};t.Ae.Ef=u.NEAREST;t.Ae.Qg=u.NEAREST;
t.Ae.prototype.create=function(){this.Fh&&$d(this.Fh);u.activeTexture(u.TEXTURE0);this.object=u.createTexture();u.bindTexture(u.TEXTURE_2D,this.object);u.texImage2D(u.TEXTURE_2D,0,this.Gi,this.width,this.height,this.border,this.format,this.type,this.data);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.Ef);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,this.Qg);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,this.rk);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,this.sk);9984<=this.Ef&&9987>=
this.Ef&&u.generateMipmap(u.TEXTURE_2D)};
t.Ae.prototype.load=function(a){this.name=Ab(a);this.Gi=Kb(a);this.width=Kb(a);this.height=Kb(a);this.border=Kb(a);this.format=Kb(a);this.type=Kb(a);this.Ef=Kb(a);this.Qg=Kb(a);this.rk=Kb(a);this.sk=Kb(a);this.he=new G(Bb(a),Bb(a),Bb(a),Bb(a));var b=Hb(a);a=a.slice(a.position,a.position+=b);a=new Blob([a],{type:"image/png"});this.data=new Image;this.data.parent=this;this.data.onload=function(){this.parent.width=this.width;this.parent.height=this.height;this.parent.create()};this.data.src=URL.createObjectURL(a)};
t.Ae.prototype.save=function(a){Cb(a,this.name);Lb(a,this.Gi);Lb(a,this.width);Lb(a,this.height);Lb(a,this.border);Lb(a,this.format);Lb(a,this.type);Lb(a,this.Ef);Lb(a,this.Qg);Lb(a,this.rk);Lb(a,this.sk);Fb(a,this.he.r);Fb(a,this.he.kb);Fb(a,this.he.ra);Fb(a,this.he.Qa);Jb(a,this.Bh.length);a.set(this.Bh,a.position);a.position+=this.Bh.length};
t.Fi=function(a){a.Zk=[];a.$k=[];for(var b=0,c=0,d=0;d<a.oe.length;d++)b+a.oe[d]+1>a.width&&(b=0,c+=a.Xe+1),a.Zk.push(b/a.width),a.$k.push(c/a.width),b+=a.oe[d]+1,a.oe[d]/=a.width,a.Ng[d]/=a.width,a.jg[d]/=a.width;a.Xe/=a.height;a.Xk=function(e){switch(e){case "0":return 0;case "1":return 1;case "2":return 2;case "3":return 3;case "4":return 4;case "5":return 5;case "6":return 6;case "7":return 7;case "8":return 8;case "9":return 9;case ",":return 10;case "/":return 11;case " ":return 12}return-1}};
t.zi=function(a,b,c){for(var d=[],e=0,h=0;h<b.length;h++){var g=a.Xk(b.charAt(h)),k=a.Zk[g],l=a.$k[g],m=a.oe[g],p=a.Xe;e+=a.Ng[g];c&&(l+=.5);d.push(qd(new jd(e,0+p,0),k,l));d.push(qd(new jd(e,0,0),k,l+p));d.push(qd(new jd(e+m,0,0),k+m,l+p));d.push(qd(new jd(e+m,0,0),k+m,l+p));d.push(qd(new jd(e+m,0+p,0),k+m,l));d.push(qd(new jd(e,0+p,0),k,l));e+=m;e+=a.jg[g]}d.width=e;d.height=a.Xe;d.xg=a;return d};var N=new t.Node("mouse");N.lock=!1;N.d={};N.p={};N.Ah=function(a){t.xa[N.kd.name+"MouseButton"]=a.button;N.kd.innerHTML=""+a.button;t.i.X.get("woodSnap02").play();t.ue(0)};N.Mk=function(a){a=0<a.deltaY?"WheelDown":"WheelUp";t.xa[N.kd.name+"MouseButton"]=a;N.kd.innerHTML=a;t.i.X.get("woodSnap02").play();t.ue(0)};N.Qk=function(a){document.pointerLockElement&&(a.preventDefault(),a.stopPropagation());N.p[a.button]=!0;N.d[a.button]=!0};N.r={};N.Rk=function(a){N.r[a.button]=!0;N.d[a.button]=!1};N.a=0;
N.Jl=-Infinity;N.Sk=function(a){var b=performance.now();375>b-N.Jl?1<Math.abs(Math.sign(a.deltaY)-Math.sign(N.a))&&(N.a=0):N.a=0;N.a+=a.deltaY;N.Jl=b;N.a<=-t.Ca.wheelScale?(N.p.WheelUp=!0,N.a=0):N.a>=t.Ca.wheelScale&&(N.p.WheelDown=!0,N.a=0)};N.h=new E(0,0);N.Hc=new E(0,0);document.addEventListener("mousemove",function(a){N.h.set(a.clientX,a.clientY);N.Hc.x+=a.movementX;N.Hc.y+=a.movementY});
N.step=function(){t.Node.prototype.step.call(this);N.Hc.set(0,0);var a=Object.getOwnPropertyNames(N.r);var b=n(a);for(a=b.next();!a.done;a=b.next())N.r[a.value]=!1;N.r.WheelDown=N.p.WheelDown;N.r.WheelUp=N.p.WheelUp;a=Object.getOwnPropertyNames(N.p);b=n(a);for(a=b.next();!a.done;a=b.next())N.p[a.value]=!1};
N.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=n(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=n(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=n(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1;N.a=0;N.h.set(0,0);N.Hc.set(0,0)};M(N,t.inputs);N.Jm=function(){document.documentElement.requestPointerLock({unadjustedMovement:t.Ca.mouseRaw})};
document.addEventListener("pointerlockchange",function(){if(document.pointerLockElement)N.lock=!0,document.body.style.overflowX="hidden",document.body.style.overflowY="hidden",document.body.style.userSelect="none";else{N.lock=!1;for(var a=n(Object.getOwnPropertyNames(t.xh)),b=a.next();!b.done;b=a.next())b=b.value,document.body.style[b]=t.xh[b]}});var he=new t.Node("keyboard");he.d={};he.p={};he.Lk=function(a){"Backspace"==a.code?(t.xa[he.kd.name+"Key"]="",he.kd.innerHTML="",t.i.X.get("woodSnap02").play(),t.ue(0)):"Escape"==a.code?t.ue(0):("Tab"==a.code&&(a.preventDefault(),a.stopPropagation()),"ControlLeft"!=a.code&&"ControlRight"!=a.code&&"ShiftLeft"!=a.code&&"ShiftRight"!=a.code&&(t.xa[he.kd.name+"Key"]=a.code,he.kd.innerHTML=""+a.code,t.i.X.get("woodSnap02").play(),t.ue(0)))};
he.Ah=function(a){"Backspace"==a.code?(t.xa[N.kd.name+"MouseButton"]="",N.kd.innerHTML="",t.i.X.get("woodSnap02").play(),t.ue(0)):"Escape"==a.code?t.ue(0):"Tab"==a.code&&(a.preventDefault(),a.stopPropagation())};
he.Ok=function(a){a.code&&(document.pointerLockElement&&"Tab"==a.code&&(a.preventDefault(),a.stopPropagation()),"ControlLeft"!=a.code&&"ControlRight"!=a.code&&"ShiftLeft"!=a.code&&"ShiftRight"!=a.code&&("Minus"==a.code?(t.i.X.get("hit02").play({gain:1,pitch:.875}),t.wg(-1)):"Equal"==a.code?(t.i.X.get("hit02").play({gain:1,pitch:1.125}),t.wg(1)):"KeyM"==a.code&&(t.Audio.Jb(1-t.Ca.musicEnabled),t.Ni?t.Ni.checked=t.Ca.musicEnabled:window.localStorage.setItem("musicEnabled",t.Ca.musicEnabled)),he.d[a.code]||
(he.p[a.code]=!0),he.d[a.code]=!0))};he.r={};he.Pk=function(a){a.code&&(he.r[a.code]=!0,he.d[a.code]=!1)};he.step=function(){t.Node.prototype.step.call(this);var a=Object.getOwnPropertyNames(this.p);var b=n(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=n(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1};
he.clear=function(){var a=Object.getOwnPropertyNames(this.p);var b=n(a);for(a=b.next();!a.done;a=b.next())this.p[a.value]=!1;a=Object.getOwnPropertyNames(this.r);b=n(a);for(a=b.next();!a.done;a=b.next())this.r[a.value]=!1;a=Object.getOwnPropertyNames(this.d);b=n(a);for(a=b.next();!a.done;a=b.next())this.d[a.value]=!1};M(he,t.inputs);t.Audio=function(){this.buffer=null;return this};t.Audio.S=new AudioContext;var Oe=t.Audio.Rc=t.Audio.S.createGain();Oe.gain.value=.5;Oe.connect(t.Audio.S.destination);var Pe=t.Audio.wb=t.Audio.S.createGain();Pe.gain.value=0;Pe.connect(t.Audio.S.destination);t.Audio.Cg=function(a){t.Audio.Rc.gain.value=a};t.Audio.Jb=function(a){t.Audio.wb.gain.value=a;t.Ca.musicEnabled=a};
t.Audio.prototype.play=function(a){a?(void 0===a.gain&&(a.gain=1),void 0===a.pitch&&(a.pitch=1),void 0===a.If&&(a.If=0),void 0===a.delay&&(a.delay=0)):a={gain:1,pitch:1,If:0,delay:0};var b=t.Audio.S.createGain();b.gain.value=a.gain;b.connect(t.Audio.Rc);var c=new AudioBufferSourceNode(t.Audio.S);c.connect(b);a.loop?c.loop=!0:c.onended=function(){b.disconnect(t.Audio.Rc)};c.ne=b;c.playbackRate.value=(1-a.If+Math.random()*a.If*2)*a.pitch;c.buffer=this.buffer;void 0===a.time?c.start(t.Audio.S.currentTime+
a.delay):c.start(a.time+a.delay);return c};t.Audio.prototype.load=function(a){this.name=Ab(a);var b=Hb(a);a=a.slice(a.position,a.position+=b);var c=this;t.Audio.S.decodeAudioData(a.buffer).then(function(d){c.buffer=d;c.Fh&&$d(c.Fh)})};t.Audio.prototype.save=function(a){Cb(a,this.name);Jb(a,this.Bh.length);a.set(this.Bh,a.position);a.position+=this.Bh.length};function Qe(){this.Uf=NaN;this.Dj=-1;this.Li=new BiquadFilterNode(t.Audio.S,{type:"lowpass",Q:12,frequency:140});this.Li.connect(t.Audio.wb);this.ne=t.Audio.S.createGain();this.ne.gain.value=1;this.ne.connect(this.Li)}
Qe.prototype.play=function(a){var b=this;if(a.audio){var c=new AudioBufferSourceNode(t.Audio.S);c.buffer=a.audio.buffer;c.connect(this.ne);this.Uf+=a.pn;c.start(this.Uf);setTimeout(function(){switch(b.Dj){case 2:t.g.mg=13;break;case 3:t.g.mg=13;break;case 4:t.g.mg=13;break;default:t.g.mg=0}},1E3*(this.Uf-t.Audio.S.currentTime));c.onended=function(){this.disconnect(this.ne)}}setTimeout(function(){b.play(a.kn())},1E3*(this.Uf-t.Audio.S.currentTime+a.duration)-100);this.Uf+=a.duration};var Re,Se=[],Te=0;function Ue(a){return Se[a-Te]}var Ve=new ab(kb),We=new cb,jb=new cb,Xe=new J;Xe.scale(.99609375,.99609375,.99609375);function Ye(a){var b=Ve.get(a);if(b)return b;b=new Ze(a);Ve.push(b);return b}function $e(a){a=af(a);return new E(a.x-4096<<19,a.y-4096<<19)}function bf(a,b){function c(d){d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;return(d|d<<1)&1431655765}return c(a)<<1|c(b)}
function af(a){function b(c){c=(c|c>>1)&858993459;c=(c|c>>2)&252645135;c=(c|c>>4)&16711935;return(c|c>>8)&65535}a=new E(a>>>1&1431655765,a>>>0&1431655765);a.x=b(a.x);a.y=b(a.y);return a}
function cf(a,b){isNaN(a)&&(a=0);isNaN(b)&&(b=Ve.elements.length-1);if(a==b)return Ve.elements[a];for(var c=Ve.elements[a].index,d=c^Ve.elements[b].index,e=0;d>>=1;)e++;var h=1<<e,g=(2<<e)-1,k=a,l=b+1;for(d=Math.floor(k/2+l/2);k<l;){var m=Ve.elements[d].index&g;if(h<m)l=d,d=Math.floor(k/2+l/2);else if(h>m)k=d+1,d=Math.floor(k/2+l/2);else break}c=e&1?new df(af(c&~g|h).x):new ef(af(c&~g|h).y);c.value-=4096;c.value<<=19;c.Me=cf(a,d-1);c.Ne=cf(d,b);return c}function df(a){this.value=a}
function ef(a){this.value=a}function ff(a,b,c){this.start=a;this.Hc=b;this.nb=c;this.Lc=[new gf(Re,0,1)];this.t=0}function gf(a,b,c){this.node=a;this.Wa=b;this.ld=c}ff.prototype.next=function(){for(;this.Lc.length;){var a=this.Lc.shift();this.t=a.Wa;if(a.node instanceof Ze)return a;this.Yc(a)}return null};
ff.prototype.Yc=function(a){var b=a.node;if(b instanceof df){var c=this.start.z;var d=this.Hc.z}else c=this.start.x,d=this.Hc.x;if(0<d){var e=new gf(b.Ne,(b.value-this.nb-c)/d,a.ld);e.Wa<=a.ld&&e.ld>=a.Wa&&this.Lc.unshift(e);c=new gf(b.Me,a.Wa,(b.value+this.nb-c)/d);c.Wa<=a.ld&&c.ld>=a.Wa&&this.Lc.unshift(c)}else 0>d?(e=new gf(b.Me,(b.value+this.nb-c)/d,a.ld),e.Wa<=a.ld&&e.ld>=a.Wa&&this.Lc.unshift(e),c=new gf(b.Ne,a.Wa,(b.value-this.nb-c)/d),c.Wa<=a.ld&&c.ld>=a.Wa&&this.Lc.unshift(c)):(c>=b.value-
this.nb&&this.Lc.unshift(new gf(b.Ne,a.Wa,a.ld)),c<=b.value+this.nb&&this.Lc.unshift(new gf(b.Me,a.Wa,a.ld)))};
function hf(a,b,c){c=void 0===c?jf:c;if(!Ve.elements.length)return null;for(var d=b.length(),e=new ff(a,b,0),h,g=null,k=1;(h=e.next())&&!(h.t>k);){for(var l=function(r){if(c(r.flags)){var q=r.Xf(a,0,0,b);!q||q.t>k||(q.d=q.t*d,-1>q.d||(r.item&&(q.item=r.item),g=q,k=q.t))}},m=n(h.node.wa),p=m.next();!p.done;p=m.next())l(p.value);h=n(h.node.zd);for(p=h.next();!p.done;p=h.next())l(p.value)}return g}
function kf(a,b){var c=void 0===c?jf:c;if(!Ve.elements.length)return null;var d=b.length(),e=new ff(a,b,0),h,g=[];for(g.cmp=lf;(h=e.next())&&!(1<h.t);){for(var k=function(r){if(c(r.flags)){var q=r.Xf(a,0,0,b);!q||1<q.t||(q.d=q.t*d,-1>q.d||(r.item&&(q.item=r.item),q.Wa=!0,Sa(g,q)))}},l=function(r){r=r.Eh();if(c(r.flags)){var q=r.Xf(a,0,0,b);!q||1<q.t||(q.d=q.t*d,-1>q.d||(r.item&&(q.item=r.item),q.Wa=!1,Sa(g,q)))}},m=n(h.node.wa),p=m.next();!p.done;p=m.next())k(p.value);m=n(h.node.zd);for(p=m.next();!p.done;p=
m.next())k(p.value);k=n(h.node.wa);for(p=k.next();!p.done;p=k.next())l(p.value);h=n(h.node.zd);for(p=h.next();!p.done;p=h.next())l(p.value)}return g}
function mf(a,b){var c=void 0===c?jf:c;if(0==Ve.elements.length)return null;for(var d=new ff(a,new w(240*b.x,0,240*b.z),0),e,h=null,g=240;(e=d.next())&&!(240*e.t>g);){for(var k=function(p){c(p.flags)&&(!(p=p.ik(a,b))||p.t>g||(h=p,g=p.t))},l=n(e.node.wa),m=l.next();!m.done;m=l.next())k(m.value);e=n(e.node.zd);for(m=e.next();!m.done;m=e.next())k(m.value)}return h}function nf(a,b){return of(a.z-b,a.x-b,a.z+b,a.x+b,void 0)}
function of(a,b,c,d,e){e||(e=[]);for(var h=[Re];h.length;){var g=h.shift();g instanceof df?(a<=g.value&&h.push(g.Me),c>=g.value&&h.push(g.Ne)):g instanceof ef?(b<=g.value&&h.push(g.Me),d>=g.value&&h.push(g.Ne)):e.push(g)}return e};var pf,qf,rf,sf;
function tf(){pf=!1;qf=[];var a=rf;rf=[[Array(Se.length),Array(Se.length),Array(Se.length)],[Array(Se.length),Array(Se.length),Array(Se.length)]];if(a)for(var b=n(Se),c=b.next();!c.done;c=b.next()){var d=c.value;c=d.index-Te;d=d.index-a.ba;for(var e=0;2>e;e++)rf[e][0][c]=a[e][0][d],rf[e][1][c]=a[e][1][d],rf[e][2][c]=a[e][2][d]}rf.ba=Te;sf=0;a=n(Se);for(c=a.next();!c.done;c=a.next()){b=c.value;b.Oc||(c=new uf,c.Jh=b,c.qg=b,c.cd=b.cd,c.Ri=[Xa(.05,.95,b.Ub.x),Xa(.05,.95,b.Ub.y),Xa(.05,.95,b.Ub.z)],qf.push(c));
b.fk=b.cd;c=n(b.Eb);for(d=c.next();!d.done;d=c.next())b.fk+=vf(d.value);for(c=0;c<b.Eb.length;c++)d=new uf,d.Jh=b,d.qg=Ue(b.Eb[c].qd.ba),d.Bc=b.Eb[c],d.cd=vf(d.Bc),d.Ri=[1,1,1],qf.push(d),d=new uf,d.Jh=b,d.qg=b,d.Bc=b.Eb[c],d.cd=wf(d.Bc),d.Ri=[.625,.625,.625],qf.push(d)}}function uf(){this.qg=this.Jh=null;this.cd=0;this.Ri=null}
function xf(a,b,c){this.Y=a;this.n=new E(a.l-a.w,a.C-a.m);this.n.x/=a.length;this.n.y/=a.length;this.ol=this.Y.m*this.n.x+this.Y.l*this.n.y;this.o=b;this.v=c;this.height=c-b}xf.prototype.ce=function(a){var b=0,c=yf(this);a[b++]=c.x;a[b++]=c.y;a[b++]=c.z;a[b++]=this.ol;a[b++]=this.Y.m;a[b++]=this.Y.l;a[b++]=this.Y.C;a[b++]=this.Y.w;a[b++]=this.n.x;a[b++]=this.n.y;a[b++]=this.o;a[b++]=this.v;return a};function yf(a){return ud(Yf[a.ba-Zf].ia.mb,Yf[a.qd.ba-Zf].ia.mb,.5)}
function $f(a,b){function c(h,g){return Math.acos(Wa(rd(h,g)/Math.sqrt(rd(h,h)*rd(g,g)),-1,1))/Math.PI}var d=b.z*a.n.x+b.x*a.n.y-a.ol;if(0>=d)return 0;var e=c(new E(a.Y.C-b.z,a.Y.w-b.x),new E(a.Y.m-b.z,a.Y.l-b.x));a=c(new E(d,a.v-b.y),new E(d,a.o-b.y));return Wa(e*a,0,1)}function vf(a){return a.Y.length/1E5*((a.v-a.o)/1E5)}function wf(a){return a.Y.length/1E5*((a.height-(a.v-a.o))/1E5)}
function ag(a,b,c){c.set(0,0,0);for(var d=1,e=n(b.Eb),h=e.next();!h.done;h=e.next()){var g=h.value;h=$f(g,a);d-=h;g=yf(g);c.x+=g.x*h;c.y+=g.y*h;c.z+=g.z*h}0<d&&(a=b.ia.mb,c.x+=a.x*d,c.y+=a.y*d,c.z+=a.z*d)};function bg(a){t.Ga.call(this,a);this.Rj=new J;this.Qd=45*Math.PI/180;this.pg=1E4;this.gg=1E9;this.rect=null;this.vi=new J;this.pk=new J}bg.prototype=Object.create(t.Ga.prototype);bg.prototype.constructor=bg;bg.ij=Math.tan(kc(30));bg.Pl=function(a,b,c,d){d.F=2/a.a;d.L=0;d.N=0;d.lb=0;d.I=0;d.m11=2/a.b;d.m12=0;d.m13=0;d.O=0;d.m21=0;d.m22=-2/(c-b);d.m23=0;d.G=0;d.m31=0;d.m32=-(c+b)/(c-b);d.m33=1};bg.Ol=function(a,b,c){c=Math.tan(c)*a;var d=c*t.viewport.ratio;return{n:a,hn:b,t:c,ra:2*-c+c,r:d,vm:-d}};
bg.Nl=function(a,b,c,d,e,h,g){g.F=2*a/(d-c);g.L=0;g.N=0;g.lb=0;g.I=0;g.m11=2*a/(e-h);g.m12=0;g.m13=0;g.O=(d+c)/(d-c);g.m21=(e+h)/(e-h);g.m22=(b+a)/(a-b);g.m23=-1;g.G=0;g.m31=0;g.m32=2*b*a/(a-b);g.m33=0};bg.Zm=function(a,b,c,d,e){var h=b*bg.ij;c*=bg.ij;d=Math.tan(d);b=h/d;c/=d;e.F=b/(h*a.ratio);e.L=0;e.N=0;e.lb=0;e.I=0;e.m11=b/h;e.m12=0;e.m13=0;e.O=0;e.m21=0;e.m22=-(c+b)/(c-b);e.m23=-1;e.G=0;e.m31=0;e.m32=-(2*c*b)/(c-b);e.m33=0;return e};bg.prototype.step=function(){t.Ga.prototype.step.call(this)};
function cg(a){if(a.rect)bg.Pl(a.rect,a.pg,a.gg,a.Rj);else{var b=bg.Ol(a.pg,a.gg,a.Qd);bg.Nl(a.pg,a.gg,b.vm,b.r,b.t,b.ra,a.Rj)}a.M.Ej(a.vi);Ad(a.Rj,a.vi,a.pk);t.tc.hd.J("eyeMatrix",a.vi);t.tc.hd.J("viewMatrix",a.pk);t.tc.hd.J("cameraPos",new wd(a.M.G,a.M.m31,a.M.m32,a.M.m33));t.tc.hd.upload()}
function dg(){function a(d){t.zl(d);cg(d);bg.Ql(d);Rd(t.Zc)}var b=t.g.la;if(b.Tm){var c=new Bc(b.rect.a/2,b.rect.b,null);c.x=t.sh.x;c.y=t.sh.y;t.Zh(c);a(b.yk);c=new Bc(b.rect.a/2,b.rect.b,null);c.x=t.sh.x+c.a;c.y=t.sh.y;t.Zh(c);a(b.xk)}else t.Zh(t.sh),a(b)}
bg.Ql=function(a){function b(m,p){function r(y){function x(H){B.Ka(Math.atan2(H.x,-H.z),Math.atan2(H.y,-H.z))}var B=new Rc;B.Bc=y;y=[new w(y.Y.w,y.o,y.Y.C),new w(y.Y.l,y.o,y.Y.m),new w(y.Y.l,y.v,y.Y.m),new w(y.Y.w,y.v,y.Y.C)];for(var A=n(y),D=A.next();!D.done;D=A.next())D=D.value,a.vi.vb(D,D);A=y[y.length-1];y=n(y);for(D=y.next();!D.done;D=y.next())D=D.value,0>=D.z&&x(D),2==Math.abs(Math.sign(D.z)-Math.sign(A.z))&&x(ud(A,D,A.z/(A.z-D.z))),A=D;return B}if((!t.tn||p!=a.Na)&&p.ia.qa!=t.j){p.ia.qa=t.j;
p.Il=l++;for(var q=n(p.cells.elements),v=q.next();!v.done;v=q.next())if(v=v.value,v.hi!=t.j)for(v.hi<t.j-1&&ib(v.Hl),v.hi=t.j,v=v.Qi.first();null!=v.item;v=v.next)v.item.ia.qa=t.j}p=n(p.Eb);for(q=p.next();!q.done;q=p.next())if(q=q.value,!(isNaN(q.index)||q.v<=q.o)){if(m.Bc){if(0<=Hc(m.Bc.Y,q.Y.m,q.Y.l)&&0<=Hc(m.Bc.Y,q.Y.C,q.Y.w))continue;if(0>=Hc(q.Y,m.Bc.Y.m,m.Bc.Y.l)&&0>=Hc(q.Y,m.Bc.Y.C,m.Bc.Y.w))continue}if(!(0>=Hc(q.Y,c.z,c.x))){(v=e[q.index])||(e[q.index]=v=r(q));var z=v.ca();z.Bc=v.Bc;z.s<m.s&&
(z.s=m.s);z.u>m.u&&(z.u=m.u);z.o<m.o&&(z.o=m.o);z.v>m.v&&(z.v=m.v);z.s>=z.u||z.o>=z.v||b(z,Ue(q.qd.ba))}}}var c=Cd(a.M),d=hf(c,new w(0,-4294967295,0),eg);if(d){var e={},h=a.Qd,g=Math.atan(Math.tan(h)*t.viewport.ratio),k=new Rc;k.s=-g;k.u=g;k.o=-h;k.v=h;var l=0;if(d=Ue(d.item.ba))a.Na=d,b(k,a.Na)}};function Yd(){this.name=null;this.Kc=[]}Yd.prototype.save=function(a){Cb(a,this.name);Lb(a,Math.ceil(this.Pb/1E3));Fb(a,this.Kc.length);for(var b=n(this.Kc),c=b.next();!c.done;c=b.next())c.value.save(a)};Yd.prototype.load=function(a){this.name=Ab(a);this.Pb=1E3*Kb(a);for(var b=Bb(a),c=0;c<b;c++){var d=new fg;d.load(a);this.Kc.push(d)}};function fg(){this.$=t.i.Lb.get("defaultMaterial");this.Vb=[];this.dc=[];this.Ic=[]}
fg.prototype.compile=function(){this.nk=ve.fi.length;ve.fi=ve.fi.concat(this.Vb);for(var a=0;a<this.dc.length;a++)this.dc[a]+=this.nk;for(a=0;a<this.Ic.length;a++)this.Ic[a]+=this.nk;this.Vm=xe.elements.length;xe.elements=xe.elements.concat(this.dc);this.Ik=xe.elements.length;xe.elements=xe.elements.concat(this.Ic)};fg.prototype.ca=function(){var a=new fg;a.Vb=this.Vb;a.Ia=this.Ia;a.dc=this.dc;a.le=this.le;a.Ic=this.Ic;a.ke=this.ke;return a};
fg.prototype.save=function(a){Cb(a,this.$.name);Lb(a,this.Vb.length);for(var b=n(this.Vb),c=b.next();!c.done;c=b.next())c=c.value,ac(a,c.x),ac(a,c.y),ac(a,c.z);b=n(this.Vb);for(c=b.next();!c.done;c=b.next())c=c.value,Rb(a,c.wc),Rb(a,c.Sc),Rb(a,c.Cb);b=n(this.Vb);for(c=b.next();!c.done;c=b.next())c=c.value,cc(a,c.dd),cc(a,c.ed);Lb(a,this.dc.length);b=n(this.dc);for(c=b.next();!c.done;c=b.next())Lb(a,c.value);Lb(a,this.Ic.length);b=n(this.Ic);for(c=b.next();!c.done;c=b.next())Lb(a,c.value);Lb(a,this.Gf);
return a};fg.prototype.load=function(a){this.$=t.i.Lb.get(Ab(a));for(var b=Kb(a),c=0;c<b;c++){var d=new jd(Tb(a),Tb(a),Tb(a));this.Vb.push(d)}for(c=0;c<b;c++)d=this.Vb[c],d.wc=Nb(a),d.Sc=Nb(a),d.Cb=Nb(a);for(c=0;c<b;c++)d=this.Vb[c],d.dd=bc(a),d.ed=bc(a);b=Kb(a);for(c=0;c<b;c++)this.dc.push(Kb(a));b=Kb(a);for(c=0;c<b;c++)this.Ic.push(Kb(a));this.Gf=Kb(a);this.compile()};
function gg(){function a(q,v){return q.y<v.y?-1:q.y>v.y?1:0}function b(q,v){return q.z<v.z?-1:q.z>v.z?1:q.x<v.x?-1:q.x>v.x?1:0}var c=hg,d=[];d.cmp=b;for(var e=n(c),h=e.next();!h.done;h=e.next()){var g=h.value;h=g[g.length-1];g=n(g);for(var k=g.next();!k.done;k=g.next()){k=k.value;if(0==b(h,k)){var l=[];l.cmp=a;l.z=h.z;l.x=h.x;l=Sa(d,l);Sa(l,h);Sa(l,k)}h=k}}c=n(c);for(h=c.next();!h.done;h=c.next())for(e=h.value,k=e.length-1,k=e[k],h=0;h<e.length;h++){g=e[h];if(0==b(k,g))if(l=Qa(d,k),k.y<g.y){var m=
Pa(l,k),p=Pa(l,g);for(m+=1;m<l.length&&!(m>=p);){var r=ld(k,g,(l[m].y-k.y)/(g.y-k.y));r.y=l[m].y;e.splice(h++,0,r);m++}}else for(m=Pa(l,k),p=Pa(l,g),--m;0<=m&&!(m<=p);)r=ld(k,g,(l[m].y-k.y)/(g.y-k.y)),r.y=l[m].y,e.splice(h++,0,r),m--;k=h;k=g}}function ig(){fg.call(this);this.me=[];this.Ia=new re;this.ke=this.le=null;this.Gf=0}ig.prototype=Object.create(fg.prototype);ig.prototype.constructor=ig;
ig.prototype.compile=function(){this.dc=[];for(var a=n(this.me),b=a.next();!b.done;b=a.next()){b=b.value;for(var c=2;c<b.length;c++)this.dc.push(b[0]),this.dc.push(b[c-1]),this.dc.push(b[c])}t.Ab(this.Ia);qe(this.Ia,this.Vb.length*this.Ia.Ob);this.Ia.upload(this.Vb);this.dc.length?(this.le||(this.le=new te),t.ff(this.le),qe(this.le,2*this.dc.length),this.le.upload(this.dc)):this.le=null;this.Ic.length?(this.ke||(this.ke=new te),t.ff(this.ke),qe(this.ke,2*this.Ic.length),this.ke.upload(this.Ic)):this.ke=
null};function jg(a,b){b||(b=a.name);t.Ga.call(this,b);this.src=a}jg.prototype=Object.create(t.Ga.prototype);jg.prototype.constructor=jg;jg.prototype.create=function(){this.Kc=[];for(var a=n(this.src.Kc),b=a.next();!b.done;b=a.next())b=b.value,b=b instanceof ig?new kg(b):new lg(b),this.Kc.push(b),this.hg&&(b.hg=this.hg),b.Ja=this.M,M(b,this)};function lg(a,b){t.Ga.call(this,b);this.src=a;this.facing=1;this.Nm=this.Mm=!1}lg.prototype=Object.create(t.Ga.prototype);lg.prototype.constructor=lg;
function mg(a){var b=null;a.parent&&(b=a.parent.A);b||(b=a.A);b||(b=a.src.A);b||(b=t.i.va.get("physical"));return b}function ng(a){var b=null;a.parent&&(b=a.parent.$);b||(b=a.$);b||(b=a.src.$);b||(b=t.i.Lb.get("defaultMaterial"));return b}function og(a){var b=null;a.parent&&(b=a.parent.ha);b||(b=a.ha);b||(b=a.src.ha);return b}
lg.prototype.ab=function(){t.Ab(ve);t.cb(mg(this));t.A.J("modelMatrix",this.M);t.Nb(0,og(this));var a=ng(this);a.bind();t.A.J("lightingFancy",t.Ca.lightingFancy,!0);this.mi?t.A.J("architectureLighting",1,!0):t.A.J("architectureLighting",0,!0);t.A.J("ambientLight",this.ia.mb,!1);if(this.Fa)for(var b=0;b<this.Fa.length;b+=3)t.A.J(this.Fa[b],this.Fa[b+1],this.Fa[b+2]);t.rb(a.Ha);t.bc(a.Ha?1:2);t.Tb(this.facing);this.src.dc.length?(t.ff(xe),u.drawElements(u.TRIANGLES,this.src.dc.length,u.UNSIGNED_SHORT,
2*this.src.Vm)):u.drawArrays(u.TRIANGLES,this.src.nk,this.src.Vb.length);this.src.Ic.length&&(this.Mm&&this.Gk(),this.Nm&&this.Hk())};
lg.prototype.Gk=function(){t.rb(1);t.bc(1);t.cb(t.i.va.get("edge"));t.A.J("toonMinDist",Infinity,!1);t.A.J("modelMatrix",this.M);var a=new w(this.M.F,this.M.L,this.M.N),b=new w(this.M.I,this.M.m11,this.M.m12),c=new w(this.M.O,this.M.m21,this.M.m22);a.pa(1);b.pa(1);c.pa(1);var d=new w(t.la.M.G-this.M.G,t.la.M.m31-this.M.m31,t.la.M.m32-this.M.m32);a=oc(a,d);b=oc(b,d);c=oc(c,d);t.A.J("eyeVector",new w(a,b,c));u.drawElements(u.LINES,this.src.Ic.length-this.src.Gf,u.UNSIGNED_SHORT,2*this.src.Ik+2*this.src.Gf)};
lg.prototype.Hk=function(){t.rb(1);t.bc(1);t.cb(t.i.va.get("toon"));t.A.J("toonMinDist",Infinity,!1);t.A.J("modelMatrix",this.M);u.drawElements(u.LINES,this.src.Gf,u.UNSIGNED_SHORT,2*this.src.Ik)};function kg(a,b){lg.call(this,a,b)}kg.prototype=Object.create(lg.prototype);f=kg.prototype;f.constructor=kg;f.step=function(){lg.prototype.step.call(this)};
f.ab=function(){t.Ab(this.src.Ia);t.cb(mg(this));t.A.J("modelMatrix",this.M);t.Nb(0,og(this));var a=ng(this);a.bind();t.A.J("lightingFancy",t.Ca.lightingFancy,!0);this.mi?t.A.J("architectureLighting",1,!0):t.A.J("architectureLighting",0,!0);t.A.J("ambientLight",this.ia.mb,!1);if(this.Fa)for(var b=0;b<this.Fa.length;b+=3)t.A.J(this.Fa[b],this.Fa[b+1],this.Fa[b+2]);t.rb(a.Ha);t.bc(a.Ha?1:2);t.Tb(this.facing);this.src.dc.length?(t.ff(this.src.le),u.drawElements(u.TRIANGLES,this.src.dc.length,u.UNSIGNED_SHORT,
0)):u.drawArrays(u.TRIANGLES,0,this.src.Vb.length)};
f.Gk=function(){t.rb(1);t.bc(1);t.cb(t.i.va.get("edge"));t.A.J("toonMinDist",Math.pow(5E5,2),!1);t.A.J("modelMatrix",this.M);var a=new w(this.M.F,this.M.L,this.M.N),b=new w(this.M.I,this.M.m11,this.M.m12),c=new w(this.M.O,this.M.m21,this.M.m22);a.pa(1);b.pa(1);c.pa(1);var d=new w(t.la.M.G-this.M.G,t.la.M.m31-this.M.m31,t.la.M.m32-this.M.m32);a=oc(a,d);b=oc(b,d);c=oc(c,d);t.A.J("eyeVector",new w(a,b,c));a=this.src.Ic.length-this.src.Gf;b=2*this.src.Gf;t.ff(this.src.ke);u.drawElements(u.LINES,a,u.UNSIGNED_SHORT,
b)};f.Hk=function(){t.rb(1);t.bc(1);t.cb(t.i.va.get("toon"));t.A.J("toonMinDist",Math.pow(5E5,2),!1);t.A.J("modelMatrix",this.M);var a=this.src.Gf;t.ff(this.src.ke);u.drawElements(u.LINES,a,u.UNSIGNED_SHORT,0)};function pg(){this.scale=1;this.nb=25E3;this.Jd=0;this.hg=!1;this.frame=0;this.ub=1}function qg(a){a.F=t.la.M.F;a.L=t.la.M.L;a.N=t.la.M.N;a.I=t.la.M.I;a.m11=t.la.M.m11;a.m12=t.la.M.m12;a.O=t.la.M.O;a.m21=t.la.M.m21;a.m22=t.la.M.m22;var b=this.scale*this.nb,c=this.hg?-b:b,d=Math.cos(this.Jd),e=Math.sin(this.Jd),h=new J;h.F=d*c;h.L=e*c;h.I=-e*b;h.m11=d*b;yd(a,h,a)}
function rg(){0>this.frame||(qg.call(this,this.M),t.Ab(sg),t.cb(this.A),t.Nb(0,this.ha),this.$.bind(),t.A.J("ambientLight",this.ia.mb,!1),t.rb(this.$.Ha),t.bc(this.$.Ha?1:2),t.Tb(0),t.A.J("modelMatrix",this.M),t.A.J("color",this.color),u.drawArrays(u.TRIANGLE_FAN,tg(this.frame,this.ub),4))}
for(var ug=[],vg=0;4>vg;vg++)for(var wg=1<<vg,xg=wg<<vg,yg=1/wg,zg=0;zg<xg;zg++){var Ag=zg%wg,Bg=zg/wg|0;Ag*=yg;Bg*=yg;var Cg=void 0;Cg=new jd(-1,-1,0);qd(Cg,Ag,Bg);Cg.Cb=32767;ug.push(Cg);Cg=new jd(1,-1,0);qd(Cg,Ag+yg,Bg);Cg.Cb=32767;ug.push(Cg);Cg=new jd(1,1,0);qd(Cg,Ag+yg,Bg+yg);Cg.Cb=32767;ug.push(Cg);Cg=new jd(-1,1,0);qd(Cg,Ag,Bg+yg);Cg.Cb=32767;ug.push(Cg)}var sg=new re;qe(sg,ug.length*sg.Ob);sg.upload(ug);
function Dg(a,b){for(var c=0;b>Math.pow(1<<c,2);)c++;var d=1<<c;b=1/d;c=a%d*b;a=(a/d|0)*b;return[c,a,c+b,a+b]}function tg(a,b){switch(b){default:return 4*a;case 4:return 4+4*a;case 16:return 20+4*a;case 64:return 84+4*a}};function Eg(){this.color=this.ha=this.A=null;this.Ha=NaN;this.Oe=[];this.Lc=[];this.Lc.cmp=Fg;this.xm=64}Eg.prototype.clear=function(){this.Oe.length=0;this.Lc.length=0};Eg.prototype.ab=function(){t.cb(this.A);t.A.J("modelMatrix",Xe);t.Nb(0,this.ha);t.A.J("color",this.color);t.rb(this.Ha);t.bc(1);t.Tb(0);for(var a=n(this.Lc),b=a.next();!b.done;b=a.next())b.value.ab()};
function Gg(a,b,c,d,e,h,g){function k(y,x){if(jf(x)&&Ue(x.ba)){var B=[];if(x instanceof Hg){if(x.v<b.y-z||x.o>b.y+z)return;var A=Hc(x.W,b.z,b.x);if(A<-z||A>z)return;A=x.W.getParameter(b.z,b.x);if(A<-z||A>x.W.length+z||.707107>oc(new w((x.W.C-x.W.m)/x.W.length,0,(x.W.l-x.W.w)/x.W.length),c))return;B.push(new w(x.W.w,x.o,x.W.C),new w(x.W.l,x.o,x.W.m),new w(x.W.l,x.v,x.W.m),new w(x.W.w,x.v,x.W.C))}else{if(x.y<b.y-z||x.y>b.y+z)return;var D=n(x.ga);for(A=D.next();!A.done;A=D.next())if(Hc(A.value,b.z,b.x)<
-z)return;if(x instanceof Ig){if(.707107>c.y)return}else if(-.707107<c.y)return;D=n(x.ga);for(A=D.next();!A.done;A=D.next())A=A.value,B.push(new w(A.w,x.y,A.C));x instanceof Jg&&B.reverse()}(function(){function H(ja,Mb){var qb=[],gc=ja[ja.length-1],Fc=Mb(gc);ja=n(ja);for(var Sb=ja.next();!Sb.done;Sb=ja.next()){Sb=Sb.value;var Gc=Mb(Sb);2==Math.abs(Math.sign(Gc)-Math.sign(Fc))&&qb.push(ud(gc,Sb,Fc/(Fc-Gc)));0<=Gc&&qb.push(Sb);Fc=Gc;gc=Sb}return 3>qb.length?null:qb}for(var K=n(B),R=K.next();!R.done;R=
K.next())R=R.value,q.vb(R,R);K=n([function(ja){return 1-ja.x},function(ja){return 1+ja.x},function(ja){return 1-ja.y},function(ja){return 1+ja.y},function(ja){return 1-ja.z},function(ja){return 1+ja.z}]);for(R=K.next();!R.done;R=K.next())if(B=H(B,R.value),!B)return;for(K=0;K<B.length;K++){R=B[K];var sa=.5*R.x+.5,ta=.5*R.y+.5;r.vb(R,R);var ia=new jd;ia.x=R.x;ia.y=R.y;ia.z=R.z;ia.dd=v[0]*(1-sa)+v[2]*sa;ia.ed=v[1]*(1-ta)+v[3]*ta;B[K]=ia}K=[];K.ba=x.ba;K.cellIndex=y.index;K=Sa(l,K);for(R=2;R<B.length;R++)K.push(B[0]),
K.push(B[R-1]),K.push(B[R])})()}}a.Oe.length==a.xm&&a.Oe.shift().remove();var l=[];l.cmp=Fg;var m=new w,p=new w;pc(c,m,p);var r=new J;r.F=m.x;r.I=p.x;r.O=c.x;r.G=b.x;r.L=m.y;r.m11=p.y;r.m21=c.y;r.m31=b.y;r.N=m.z;r.m12=p.z;r.m22=c.z;r.m32=b.z;m=new J;p=Math.cos(d)*e;d=Math.sin(d)*e;m.F=p;m.I=-d;m.L=d;m.m11=p;m.m22=e;Ad(r,m,r);var q=r.Ej(new J),v=Dg(h,g),z=1.733*e;e=nf(b,z);e=n(e);for(h=e.next();!h.done;h=e.next())for(h=h.value,g=n(h.wa),d=g.next();!d.done;d=g.next())k(h,d.value);e=new Lg;h=n(l);for(g=
h.next();!g.done;g=h.next())g=g.value,d=Qa(a.Lc,g),d||(d=new Mg(a),d.ba=g.ba,d.cellIndex=g.cellIndex,d.ia=Ue(d.ba).ia,d.create(),Sa(a.Lc,d)),Ng(d,g),e.wl.push({node:d,fd:g.length});a.Oe.push(e)}function Mg(a){this.bm=a;this.cellIndex=this.ba=NaN;this.ia=null;this.fd=this.vd=0}function Fg(a,b){return a.ba<b.ba?-1:a.ba>b.ba?1:a.cellIndex<b.cellIndex?-1:a.cellIndex>b.cellIndex?1:0}Mg.prototype.create=function(){this.Ia=new re;this.Ia.usage=u.DYNAMIC_DRAW;qe(this.Ia,48*this.Ia.Ob)};
function Og(a,b){var c=a.fd+b;if(0>=c)Ta(a.bm.Lc,a);else{c*=a.Ia.Ob;if((a.vd+a.fd+b)*a.Ia.Ob>a.Ia.buffer.byteLength)b=new ArrayBuffer(c<<1);else if(48<=a.vd)b=a.Ia.buffer;else return;c=new Uint8Array(a.Ia.buffer,a.vd*a.Ia.Ob,a.fd*a.Ia.Ob);(new Uint8Array(b)).set(c);a.Ia.buffer=b;a.Ia.bind();u.bufferData(a.Ia.target,a.Ia.buffer,a.Ia.usage);a.vd=0}}
function Ng(a,b){Og(a,b.length);a.Ia.bind();a.Ia.write(b,a.vd+a.fd);u.bufferSubData(a.Ia.target,(a.vd+a.fd)*a.Ia.Ob,new Uint8Array(a.Ia.buffer,(a.vd+a.fd)*a.Ia.Ob,b.length*a.Ia.Ob));a.fd+=b.length}Mg.prototype.ab=function(){if(this.ia.qa<t.j)return!1;t.Ab(this.Ia);t.A.J("ambientLight",this.ia.mb);u.drawArrays(u.TRIANGLES,this.vd,this.fd)};function Lg(){this.wl=[]}Lg.prototype.remove=function(){for(var a=n(this.wl),b=a.next();!b.done;b=a.next())b=b.value,b.node.vd+=b.fd,b.node.fd-=b.fd,Og(b.node,0)};var Pg={},Qg,Rg,Sg,Tg,P,U,V,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch=new G(192,192,192,255),dh=new G(64,64,64,255),eh=new G(160,160,160,255),fh=new G(160,160,160,255),gh=new G(144,144,144,255),hh,ih=hh=new Xd;hh.name="concrete";hh.Id=new G(255,255,255,3.984375);hh.$c=4;hh.ad=1;hh.Ha=0;var jh=hh=new Xd;hh.name="paint";hh.Id=new G(255,255,255,31.875);hh.$c=128;hh.ad=1;hh.Ha=0;var kh=hh=new Xd;hh.name="plaster";hh.Id=new G(255,255,255,15.9375);hh.$c=32;hh.ad=1;hh.Ha=0;var lh=hh=new Xd;hh.name="metal";
hh.Id=new G(255,255,255,95.625);hh.$c=64;hh.ad=1;hh.Ha=0;var mh=hh=new Xd;hh.name="glass";hh.Id=new G(255,255,255,63.75);hh.$c=256;hh.ad=1;hh.Ha=1;
function nh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new oh(c,c+h);b.push(g);c+=h;return g}}this.floor.ha=t.i.P.get("concr01");this.floor.$=ih;this.floor.color=ch;this.sa.ha=t.i.P.get("concr01");this.sa.$=ih;this.sa.color=fh;var b=[],c=this.Mf,d=this.v,e;if(e=a(25E3))e.Z.ha=t.i.P.get("brick01"),e.Z.$=jh,e.Z.color=dh;if(e=a(this.Za))e.Z.ha=t.i.P.get("brick01"),e.Z.$=jh,e.Z.color=this.color;if(e=a(0))e.Z.ha=t.i.P.get("brick01"),e.Z.$=ih,e.Z.color=eh;return b}
function ph(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new oh(c,c+h);b.push(g);c+=h;return g}}this.floor.ha=t.i.P.get("concr01");this.floor.$=ih;this.floor.color=ch;this.sa.ha=t.i.P.get("concr01");this.sa.$=ih;this.sa.color=fh;var b=[],c=this.Mf,d=this.v,e;if(e=a(25E3))e.Z.ha=t.i.P.get("brick01"),e.Z.$=jh,e.Z.color=dh;if(e=a(this.Za))e.Z.ha=t.i.P.get("brick01"),e.Z.$=jh,e.Z.color=this.color;if(e=a(-25E3))e.Z.ha=t.i.P.get("brick01"),e.Z.$=ih,e.Z.color=eh;if(e=a(0))e.Z.ha=
t.i.P.get("concr01"),e.Z.$=ih,e.Z.color=gh;return b}
function qh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new oh(c,c+h);b.push(g);c+=h;return g}}this.floor.ha=t.i.P.get("concr01");this.floor.$=ih;this.floor.color=ch;this.sa.ha=t.i.P.get("concr01");this.sa.$=ih;this.sa.color=fh;var b=[],c=this.Mf,d=this.v,e;if(e=a(25E3))e.Z.ha=t.i.P.get("metal01"),e.Z.$=lh,e.Z.color=dh;if(e=a(this.Za))e.Z.ha=t.i.P.get("metal01"),e.Z.$=jh,e.Z.color=this.color;if(e=a(0))e.Z.ha=t.i.P.get("metal01"),e.Z.$=lh,e.Z.color=eh;return b}
function rh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new oh(c,c+h);b.push(g);c+=h;return g}}this.floor.ha=t.i.P.get("concr01");this.floor.$=ih;this.floor.color=ch;this.sa.ha=t.i.P.get("concr01");this.sa.$=ih;this.sa.color=fh;var b=[],c=this.Mf,d=this.v,e;if(e=a(25E3))e.Z.ha=t.i.P.get("metal01"),e.Z.$=lh,e.Z.color=dh;if(e=a(this.Za))e.Z.ha=t.i.P.get("metal01"),e.Z.$=jh,e.Z.color=this.color;if(e=a(-25E3))e.Z.ha=t.i.P.get("metal01"),e.Z.$=lh,e.Z.color=eh;if(e=a(0))e.Z.ha=
t.i.P.get("concr01"),e.Z.$=ih,e.Z.color=gh;return b}
function sh(){function a(h){if(!(c>=d)&&(0>=h&&(h=d-c+h),c+h>d&&(h=d-c),0!=h)){var g=new oh(c,c+h);b.push(g);c+=h;return g}}this.floor.ha=t.i.P.get("concr01");this.floor.$=ih;this.floor.color=ch;this.sa.ha=t.i.P.get("concr01");this.sa.$=ih;this.sa.color=fh;var b=[],c=this.Mf,d=this.v,e;if(e=a(25E3))e.Z.ha=t.i.P.get("plaster01"),e.Z.$=jh,e.Z.color=dh;if(e=a(this.Za))e.Z.ha=t.i.P.get("plaster01"),e.Z.$=kh,e.Z.color=this.color;if(e=a(0))e.Z.ha=t.i.P.get("plaster01"),e.Z.$=kh,e.Z.color=new G(248,248,
248,255);return b}var th=new lb;function uh(a){return Math.floor(ob(th)*a)}function vh(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return b[uh(b.length)]}function wh(a){for(var b=0;b<a.length;b++){var c=uh(a.length-b),d=a[b];a[b]=a[c];a[c]=d}}function xh(){for(var a=[],b=n(Yf),c=b.next();!c.done;c=b.next()){c=n(c.value);for(var d=c.next();!d.done;d=c.next())a=a.concat(d.value)}return a}
function yh(){for(var a=[],b=n(Yf),c=b.next();!c.done;c=b.next()){c=n(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;for(var e=n(d.xb),h=e.next();!h.done;h=e.next())h=h.value,h.ua==d&&a.push(h)}}return a}function zh(a,b,c){var d=[];a=n(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.translate(b,c));return d}function Ah(a,b){var c=[];a=n(a);for(var d=a.next();!d.done;d=a.next())c.push(d.value.zg(b));return c}
function Bh(a,b,c){a:{switch((4-c)%4){case 0:a=new E(a,b);break a;case 1:a=new E(-b,a);break a;case 2:a=new E(-a,-b);break a;case 3:a=new E(b,-a);break a}a=void 0}return a}function Ch(a,b,c){var d=[];a=n(a);for(var e=a.next();!e.done;e=a.next())d.push(e.value.expand(b,c));return d}function Dh(a,b){var c=[];a=n(a);for(var d=a.next();!d.done;d=a.next())c.push(Eh(d.value,b));return c}
function Fh(a,b){b=n(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=a.length,e=0;e<d;e++)a[e].bh(c,a)&&(a.splice(e--,1),d--)}return a}function Gh(a,b){for(var c=new Hh,d=n(a),e=d.next();!e.done;e=d.next())Ih(c,e.value);d=n(b);for(e=d.next();!e.done;e=d.next())Ih(c,e.value);c=[c];Fh(c,b);return Fh(a.slice(),c)}function Jh(a,b){b=void 0===b?0:b;for(var c=new Hh,d=n(a),e=d.next();!e.done;e=d.next())Ih(c,e.value);b=[c.expand(b,b)];Fh(b,a);return b}
function Kh(a){var b=[];b.cmp=function(h,g){return h.s<g.s?-1:h.s>g.s?1:h.D<g.D?-1:h.D>g.D?1:0};a=n(a);for(var c=a.next();!c.done;c=a.next())Sa(b,c.value);for(a=0;a<b.length;a++){c=b[a];var d=Pa(b,{s:c.u,D:c.D}),e=b[d];e&&e.s==c.u&&e.D==c.D&&e.H==c.H&&(b.splice(d,1),b[a--]=c.ca(c.D,c.H,c.s,e.u))}return b}function Lh(a,b,c){var d=Infinity;c=n(c);for(var e=c.next();!e.done;e=c.next())if(e=e.value,!(e.s>=b||e.u<=b||e.H<=a||e.D>=d)){if(e.D<a){d=a;break}d=e.D}return d}
function Mh(a){for(var b=[],c=n(a),d=c.next();!d.done;d=c.next())Nh(d.value,b);Fh(b,a);return b}function Oh(a){a.bound=new Rc;for(var b=0;b<a.length;b++){var c=a[b].Zf();a.bound.Ka(c.C,c.w);a[b]=c}}
function Ph(a){var b=[];b.cmp=function(m,p){return m.x<p.x?-1:m.x>p.x?1:m.y<p.y?-1:m.y>p.y?1:m.type<p.type?-1:m.type>p.type?1:0};a=n(a);for(var c=a.next();!c.done;c=a.next())c=c.value,Sa(b,{x:c.yc(),y:c.xc(),type:c.sb(),Y:c});a=[];c=[];for(var d={};b.length;){var e=!1;d.wd=[];d.wd.bound=new Hh;d.Ec=null;d.mc=null;var h=function(m){return function(p){p.Y.sb()==m.mc.sb()?m.mc.T+=p.Y.T-p.Y.R:((m.mc.sb()+3&3)==p.Y.sb()&&(m.mc.zh=!0,p.Y.ci=!0),m.wd.push(p.Y),m.mc=p.Y);m.Ec=new E(m.mc.Yb(),m.mc.Xb());m.Ec.type=
-1;Qh(m.wd.bound,m.Ec.x,m.Ec.y)}}(d);d.mc=b.shift().Y;d.mc.sb()&&(e=!0,d.mc.ci=!0);d.wd.push(d.mc);d.Ec=new E(d.mc.Yb(),d.mc.Xb());d.Ec.type=-1;for(Qh(d.wd.bound,d.Ec.x,d.Ec.y);;){var g=[],k=Pa(b,d.Ec),l=b[k];if(!l)break;if(l.x!=d.Ec.x)break;if(l.y!=d.Ec.y)break;g[0]=k;g[1]=k;k++;(l=b[k])&&l.x==d.Ec.x&&l.y==d.Ec.y&&(g[1]=k);switch(d.mc.sb()){case 0:k=g[0];break;case 1:k=g[1];break;case 2:k=g[1];break;case 3:k=g[0]}h(b.splice(k,1)[0])}e?(d.wd[d.wd.length-1].zh=!0,c.push(d.wd)):(d.wd.tb=[],a.push(d.wd));
d={mc:d.mc,wd:d.wd,Ec:d.Ec}}b=n(c);for(c=b.next();!c.done;c=b.next())Rh(c.value,a);return a}function Sh(a,b){b||(b=[]);a=n(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b.push(c),c.tb&&Sh(c.tb,b);return b}
function Rh(a,b){var c=null;b=n(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.D<=d.bound.D||a.bound.s<=d.bound.s||a.bound.H>=d.bound.H||a.bound.u>=d.bound.u)){if(c){if(d.bound.D<=c.bound.D)continue;if(d.bound.s<=c.bound.s)continue;if(d.bound.H>=c.bound.H)continue;if(d.bound.u>=c.bound.u)continue}c=d}c&&c.tb.push(a)}
function Th(a){var b=162500,c=162500;b=void 0===b?0:b;c=void 0===c?0:c;var d=Mh(a);a=[];d=n(d);for(var e=d.next();!e.done;e=d.next())e.value.Ai(b,c,a);d=xh();d=n(d);for(e=d.next();!e.done;e=d.next()){e=e.value;for(var h=0;h<a.length;h++)e.expand(b,c).yf(a[h].x,a[h].y)&&a.splice(h--,1)}return a}var Uh=-1,Vh=-1,Wh=0,Xh=1,Yh=0,Zh=[],Yf=[],Zf=0;
function $h(){if(!Qg){var a=Qg={};Rg=1;Qg.Gh=2;Sg=Rg;a.si=Xh;a.zf=NaN;a.td=NaN;a.Dd=[];Tg=Zh;Zh=[]}if(!P){if(!Sg){ai();xh();Qg=null;Uh++;if(Uh<Wh+2)return!0;bi();return!0}P=[];P.Mb=Qg;P.og=3;P.bd=new G(233,234,85,255);P.Za=-75E3;P.parent=null;P.children=[];P.ui=1;P.Nd=0;Zh.push(P);Sg--}if(!U){if(!P.og){if(P.parent){a=P.parent;a.children.push(P);do a.ui++,P.Nd++,a=a.parent;while(a)}P=null;return!0}U=[];ci.call(U);U.index=Yf.length+Zf;U.Hb=P;U.ng=vh(1,2);1==U.index&&(U.Oc=!0);U.style={};U.style.height=
225E3+5E4*uh(4);U.style.bd=P.bd;U.Oc?(U.style.Jc=vh(ph,rh),U.style.Za=1E5):(U.style.Jc=vh(nh,qh),U.style.Za=P.Za);P.push(U);Yf.push(U);P.og--}if(!V){if(!U.ng)return di(),U=null,!0;V=[];V.index=ei++;V.xb=[];V.fc=vh(1,2)}if(!V.fc){if(Ug){ai();a=V;var b=Ug,c=fi([b],[a]);c||b.U.Hb!=a.U.Hb&&(c=gi([b],[a]));if(!c)return V.length=0,V.fc=vh(1,2),U.pop(),!0}Vg=V=Ug=null;U.ng--;return!0}if(V.length)return(a=hi([V],0))?(a.platform=V,V.push(a),V.fc--):(V.length=0,V.fc=vh(1,2),U.pop()),!0;if(U.length)return a=
U,Vg||(Vg={}),(a=hi(a,0,Vg))?(Ug=a.$d,V.y=Ug.y+5E4*vh(-2,-1,1,2),V.y=Math.min(V.y,-4E5),V.U=U,U.push(V),a.platform=V,V.push(a),V.fc--):(Vg=V=null,U.ng=0),!0;if(1<P.length){b=[];c=n(P);for(a=c.next();!a.done;a=c.next())b.push.apply(b,ba(a.value));Vg||(Vg={});(a=hi(b,0,Vg))?(Ug=a.$d,V.y=Ug.y,V.U=U,U.push(V),a.platform=V,V.push(a),V.fc--):(P.pop(),Yf.pop(),Vg=V=U=null,P.og=0);return!0}if(1<Zh.length){b=[];c=n(Zh);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length)){var d=n(a);for(a=
d.next();!a.done;a=d.next())b.push.apply(b,ba(a.value))}Vg||(Vg={});if(a=hi(b,6E5,Vg))Ug=a.$d,P.parent=Ug.U.Hb,V.y=Ug.y+5E4*vh(-2,-1,0,0,0,1,2),V.y=Math.min(V.y,-4E5),V.U=U,U.push(V),a.platform=V,V.push(a),V.fc--;else{for(;;){a=Yf[Yf.length-1];if(a.na<=Uh)break;b=n(a);for(a=b.next();!a.done;a=b.next())for(c=n(a.value.xb),a=c.next();!a.done;a=c.next())ii(a.value);Yf.pop()}P=null;Zh.length=0;Sg=Rg;Vg=Ug=V=U=null}return!0}if(Tg.length){b=[];c=n(Tg);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=
a.children.length))for(d=n(a),a=d.next();!a.done;a=d.next())b.push.apply(b,ba(a.value));Vg||(Vg={cmp:function(e,h){return e.pc<h.pc?-1:e.pc>h.pc?1:e.x<h.x?-1:e.x>h.x?1:e.y<h.y?-1:e.y>h.y?1:0}});if(a=hi(b,0,Vg))Ug=a.$d,V.y=Ug.y+5E4*vh(-2,-1,0,0,0,1,2),V.y=Math.min(V.y,-4E5),V.U=U,U.push(V),a.platform=V,V.push(a),V.fc--;else{for(;;){a=Yf[Yf.length-1];if(a.na<=Uh)break;b=n(a);for(a=b.next();!a.done;a=b.next())for(c=n(a.value.xb),a=c.next();!a.done;a=c.next())ii(a.value);Yf.pop()}P=null;Zh.length=0;Sg=
Rg;Vg=Ug=V=U=null}return!0}a=hi(null,0);V.y=-4E5;V.U=U;U.push(V);a.platform=V;V.push(a);V.fc--;return!0}function ji(){if(!Qg){var a=Qg={};Sg=Rg=1;a.si=Xh;a.zf=NaN;a.td=NaN;a.Dd=[];Tg=Zh;Zh=[]}if(!P&&!Sg){ai();xh();Qg=null;Uh++;if(Uh<Wh+2)return!0;bi();return!0}return ki()}
function li(){if(!Qg){var a=Qg={};Xh++;3<Xh&&(Xh=3);0>=Yh?(Rg=2,Qg.Gh=2):1>=Yh?(Rg=3,Qg.Gh=3):3>=Yh?(Rg=3,Qg.Gh=4):(Rg=4,Qg.Gh=5);Yh++;Sg=Rg;a.si=Xh;a.zf=0;a.td=NaN;a.Dd=[];Tg=Zh;Zh=[];Wg=-1}if(0<=Wg){var b=Zh[Wg];if(!b){ai();xh();mi();Qg=null;Uh++;if(Uh<Wh+2)return!0;bi();return!0}if(2==b.children.length&&3<=b.ui){var c=function(g,k){if(!g)return k;for(var l=n(g),m=l.next();!m.done;m=l.next())k.push.apply(k,ba(m.value));c(g.children[0],k);c(g.children[1],k);return k};a=c(b.children[0],[]);b=c(b.children[1],
[]);var d=fi(a,b);d||(d=gi(a,b))}Wg++;return!0}if(!P&&!Sg){var e=[],h=function(g){g&&(g.index=e.length,e.push(g),h(g.children[0]),h(g.children[1]))};h(Zh[0]);Zh=e;Wg=0;return!0}return ki()}
function ki(){if(!P){P=[];P.Mb=Qg;P.og=vh(2,3);var a=[new G(233,234,85,255),new G(85,85,234,255),new G(234,85,85,255),new G(41,166,191,255)];P.bd=a[Zh.length%a.length];P.Za=-75E3;P.parent=null;P.children=[];P.ui=1;P.Nd=0;Zh.push(P);Sg--}if(!U){if(!P.og){if(P.parent){a=P.parent;a.children.push(P);do a.ui++,P.Nd++,a=a.parent;while(a)}P=null;return!0}U=[];ci.call(U);U.index=Yf.length+Zf;U.Hb=P;U.ng=vh(1,2);0==U.index%5&&(U.Oc=!0);U.style={};U.style.height=225E3;U.style.height+=5E4*uh(4);U.style.bd=P.bd;
U.Oc?(U.style.Jc=vh(ph,rh),U.style.Za=1E5):(U.style.Jc=vh(nh,qh),U.style.Za=P.Za);P.push(U);Yf.push(U);P.og--}if(!V){if(!U.ng)return di(),U=null,!0;V=[];V.index=ei++;V.xb=[];V.fc=vh(1,2)}if(!V.fc){if(Ug){ai();a=V;var b=Ug,c=fi([b],[a]);c||b.U.Hb!=a.U.Hb&&(c=gi([b],[a]));if(!c)return V.length=0,V.fc=vh(1,2),U.pop(),!0}Vg=V=Ug=null;U.ng--;return!0}if(V.length)return(a=hi([V],0))?(a.platform=V,V.push(a),V.fc--):(V.length=0,V.fc=vh(1,2),U.pop()),!0;if(U.length)return a=U,Vg||(Vg={}),(a=hi(a,0,Vg))?(Ug=
a.$d,V.y=Ug.y+5E4*vh(-2,-1,1,2),V.y=Math.min(V.y,-4E5),V.U=U,U.push(V),a.platform=V,V.push(a),V.fc--):(Vg=V=null,U.ng=0),!0;if(1<P.length){b=[];c=n(P);for(a=c.next();!a.done;a=c.next())b.push.apply(b,ba(a.value));Vg||(Vg={});(a=hi(b,0,Vg))?(Ug=a.$d,V.y=Ug.y,V.U=U,U.push(V),a.platform=V,V.push(a),V.fc--):(P.pop(),Yf.pop(),Vg=V=U=null,P.og=0);return!0}if(1<Zh.length){b=[];c=n(Zh);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length)){var d=n(a);for(a=d.next();!a.done;a=d.next())b.push.apply(b,
ba(a.value))}Vg||(Vg={});if(a=hi(b,6E5,Vg))Ug=a.$d,P.parent=Ug.U.Hb,V.y=Ug.y+5E4*vh(-2,-1,0,0,0,1,2),V.y=Math.min(V.y,-4E5),V.U=U,U.push(V),a.platform=V,V.push(a),V.fc--;else{for(;;){a=Yf[Yf.length-1];if(a.na<=Uh)break;b=n(a);for(a=b.next();!a.done;a=b.next())for(c=n(a.value.xb),a=c.next();!a.done;a=c.next())ii(a.value);Yf.pop()}P=null;Zh.length=0;Sg=Rg;Vg=Ug=V=U=null}return!0}if(Tg.length){b=[];c=n(Tg);for(a=c.next();!a.done;a=c.next())if(a=a.value,!(2<=a.children.length))for(d=n(a),a=d.next();!a.done;a=
d.next())b.push.apply(b,ba(a.value));Vg||(Vg={cmp:function(e,h){return e.pc<h.pc?-1:e.pc>h.pc?1:e.x<h.x?-1:e.x>h.x?1:e.y<h.y?-1:e.y>h.y?1:0}});if(a=hi(b,0,Vg))Ug=a.$d,V.y=Ug.y+5E4*vh(-2,-1,0,0,0,1,2),V.y=Math.min(V.y,-4E5),V.U=U,U.push(V),a.platform=V,V.push(a),V.fc--;else{for(;;){a=Yf[Yf.length-1];if(a.na<=Uh)break;b=n(a);for(a=b.next();!a.done;a=b.next())for(c=n(a.value.xb),a=c.next();!a.done;a=c.next())ii(a.value);Yf.pop()}P=null;Zh.length=0;Sg=Rg;Vg=Ug=V=U=null}return!0}a=hi(null,0);V.y=-4E5;
V.U=U;U.push(V);a.platform=V;V.push(a);V.fc--;return!0}
function hi(a,b,c){if(c){if(c.Xi)return ni(c)}else c={};c.cmp||(c.cmp=function(p,r){return p.Nd<r.Nd?-1:p.Nd>r.Nd?1:p.pc>r.pc?-1:p.pc<r.pc?1:p.x<r.x?-1:p.x>r.x?1:p.y<r.y?-1:p.y>r.y?1:0});c.Qb=5E4*Math.floor(uh(2)+4);c.qf=5E4*Math.floor(uh(2)+4);uh(12)||(c.Qb*=2,c.qf*=2);if(!a)return new Hh(-c.Qb,c.Qb,-c.qf,c.qf);c.from=a;c.margin=b;c.Tl=0;for(var d=xh(),e=[],h=n(a),g=h.next();!g.done;g=h.next()){g=g.value;for(var k=[],l=n(g),m=l.next();!m.done;m=l.next())oi(m.value,c.Qb,c.qf,b,k);l=d;l=Dh(l,new Hh(-c.Qb+
1,c.Qb,-c.qf+1,c.qf));k=Fh(k,l);k=n(k);for(l=k.next();!l.done;l=k.next())l=l.value,m=void 0,m=new E(l.D,l.s),m.$d=g,m.Nd=g.U.Hb.Nd,e.push(m),m=new E(l.H-1,l.u-1),m.$d=g,m.Nd=g.U.Hb.Nd,e.push(m)}if(!e.length)return null;c.Xi=[];c.Xi.cmp=c.cmp;b=[];a=n(a);for(d=a.next();!d.done;d=a.next())b.push.apply(b,ba(d.value));e=n(e);for(a=e.next();!a.done;a=e.next())a=a.value,a.pc=pi(b,a.x,a.y),Sa(c.Xi,a);return ni(c)}
function ni(a){var b=a.Xi[a.Tl++];if(!b)return null;a=new Hh(b.x-a.Qb,b.x+a.Qb,b.y-a.qf,b.y+a.qf);a.$d=b.$d;return a}
function bi(){Xg=yh();if(Pg.gn){for(var a=n(Xg),b=a.next();!b.done;b=a.next())b.value.qk();Yg=[];Zg=[];$g=[];a=n(Zh);for(b=a.next();!b.done;b=a.next()){for(var c=[],d=n(b.value),e=d.next();!e.done;e=d.next()){var h=[];e=n(e.value);for(b=e.next();!b.done;b=e.next())b=b.value,h=h.concat(b),$g=$g.concat(Mh(b));c=c.concat(h);Zg=Zg.concat(Mh(h))}Yg=Yg.concat(Mh(c))}for(;Yf.length&&!(Yf[0].na>=Wh);)Yf.shift(),Zf++;Vh=Wh+1;qi=0}else{b=n(Yf);for(e=b.next();!e.done;e=b.next()){a=e.value;if(a.na>=Wh)break;
a.bg=!0;e=n(a.Bb);for(c=e.next();!c.done;c=e.next())ri(c.value);a=n(a);for(e=a.next();!e.done;e=a.next())for(e=n(e.value.xb),c=e.next();!c.done;c=e.next())c.value.sj()}a=n(Yf);for(e=a.next();!e.done;e=a.next())if(e=e.value,!(e.na<=Vh)){if(e.na>Wh+1)break;e.bound.D-=1E5;e.bound.H+=1E5;e.bound.s-=1E5;e.bound.u+=1E5;c=n(e);for(b=c.next();!b.done;b=c.next())b=b.value,b.y<e.floor&&(e.floor=b.y),b.y>e.sa&&(e.sa=b.y);e.sa+=e.style.height;e.o=e.floor;e.hb||(e.hb=e.Oc?new w(.1,.1,.1):new w);c=n(e);for(b=c.next();!b.done;b=
c.next())for(b=b.value,b.Tk=[],d=n(b),h=d.next();!h.done;h=d.next()){h=h.value;var g=[];Nh(h,g);Oh(g);b.Tk.push(g);h.z=.5*h.D+.5*h.H;h.x=.5*h.s+.5*h.u;h.y=h.platform.y;h.D<e.bound.D&&(e.bound.D=h.D);h.H>e.bound.H&&(e.bound.H=h.H);h.s<e.bound.s&&(e.bound.s=h.s);h.u>e.bound.u&&(e.bound.u=h.u)}}a=n(Yf);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.na<=Vh)){if(b.na>Wh+1)break;e=n(b);for(b=e.next();!b.done;b=e.next())for(c=n(b.value.xb),b=c.next();!b.done;b=c.next())b.value.qj()}a=n(Yf);for(e=a.next();!e.done;e=
a.next())if(e=e.value,!(e.na<=Vh)){if(e.na>Wh+1)break;e.sa=e.Oc?0:Math.min(-18750,e.sa);c=[];d=n(e);for(b=d.next();!b.done;b=d.next())c.push.apply(c,ba(b.value));d=c;d=Ch(d,9375,9375);b=[];d=n(d);for(h=d.next();!h.done;h=d.next()){h=h.value;g=b.length;for(var k=0;k<g;k++)b[k].bh(h,b)&&(b.splice(k--,1),g--);b.push(h)}d=b;e.hm=[];d=n(d);for(b=d.next();!b.done;b=d.next())h=[],Nh(b.value,h),Oh(h),e.hm.push(h);b=c;b=Jh(b,1);b=Ch(b,9375,9375);b=Jh(b,0);e.Uk=[];c=n(b);for(b=c.next();!b.done;b=c.next())d=
[],Nh(b.value,d),Oh(d),e.Uk.push(d)}b=n(Yf);for(e=b.next();!e.done;e=b.next())if(a=e.value,!(a.na<=Vh)){if(a.na>Wh+1)break;si(a);c=a;a=ti(!1,Infinity,c.index,t.i.P.get("HandRail01"),jh);a.facing=0;a.Ha=2;e=c.style.bd;c=n(c.om);for(d=c.next();!d.done;d=c.next())for(d=d.value,h=n(d),g=h.next();!g.done;g=h.next()){g=g.value;var l=[];k=(g.T-g.R)/2E5;for(var m=Math.round(k),p=.5*(k-m);.125>p;)--m,p+=.5;if(!(0>m))for(l.push({Fb:.5,hh:0,length:p}),l.push({Fb:1,hh:0,length:k-2*p}),l.push({Fb:.5,hh:1-p,length:p}),
k=0,m=new E(g.yc(),g.xc()),l=n(l),p=l.next();!p.done;p=l.next()){p=p.value;k+=2E5*p.length;var r=g.Af(k,0),q=[];var v=new jd(m.y,d.y,m.x);qd(v,p.hh,p.Fb);pd(v,e);q.push(v);v=new jd(r.y,d.y,r.x);qd(v,p.hh+p.length,p.Fb);pd(v,e);q.push(v);v=new jd(r.y,d.y+112500,r.x);qd(v,p.hh+p.length,p.Fb-.5);pd(v,e);q.push(v);v=new jd(m.y,d.y+112500,m.x);qd(v,p.hh,p.Fb-.5);pd(v,e);q.push(v);a.me.push(q);m=r}}}a=n(Yf);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.na<=Vh)){if(b.na>Wh+1)break;e=n(b);for(b=e.next();!b.done;b=
e.next())for(c=n(b.value.xb),b=c.next();!b.done;b=c.next())b.value.nj()}b=n(Yf);for(e=b.next();!e.done;e=b.next())if(a=e.value,!(a.na<=Vh)){if(a.na>Wh+1)break;a=n(a.Bb);for(e=a.next();!e.done;e=a.next())e.value.stroke()}a=n(Yf);for(e=a.next();!e.done;e=a.next())if(b=e.value,!(b.na<=Vh)){if(b.na>Wh+1)break;e=n(b);for(b=e.next();!b.done;b=e.next())for(c=n(b.value.xb),b=c.next();!b.done;b=c.next())b.value.Vj()}qi++}}
function fi(a,b){Xg=yh();var c=[];c.length=0;for(var d=n(a),e=d.next();!e.done;e=d.next()){var h=e.value,g=n(b);for(e=g.next();!e.done;e=g.next()){var k=e.value,l=[];if(h.U==k.U&&h.y!=k.y){if(h.ec){var m=void 0,p=n(h.ec);for(e=p.next();!e.done;e=p.next())e=e.value,e.target==k&&(m||(m=ui(h)),l.push(vi(h,k,m,e.direction)))}if(k.ec)for(m=void 0,p=n(k.ec),e=p.next();!e.done;e=p.next())e=e.value,e.target==h&&(m||(m=ui(k)),l.push(vi(k,h,m,e.direction)));h.ec||k.ec||(l.push(wi(h,k)),l.push(wi(k,h)),!uh(2)&&
l.reverse());c=c.concat(l)}}}d=n(c);for(e=d.next();!e.done;e=d.next())for(e=e.value,wh(e),h=n(e),e=h.next();!e.done;e=h.next())if(e=e.value,xi(e))return e.ua.xb.push(e),e;c.length=0;d=n(a);for(e=d.next();!e.done;e=d.next())for(h=e.value,g=n(b),e=g.next();!e.done;e=g.next())e=e.value,h.U!=e.U&&h.y==e.y&&(c=h.U.na==e.U.na&&h.U.Hb==e.U.Hb?c.concat(yi(h,e)):c.concat(zi(h,e,112500)));wh(c);d=n(c);for(e=d.next();!e.done;e=d.next())if(e=e.value,xi(e))return e.ua.xb.push(e),e.Ya.xb.push(e),e;c.length=0;a=
n(a);for(e=a.next();!e.done;e=a.next())for(d=e.value,h=n(b),e=h.next();!e.done;e=h.next())if(g=e.value,k=[],d.U!=g.U&&d.y!=g.y){if(d.ec)for(l=void 0,m=n(d.ec),e=m.next();!e.done;e=m.next())e=e.value,e.target==g&&(l||(l=ui(d)),k.push(vi(d,g,l,e.direction)));if(g.ec)for(l=void 0,m=n(g.ec),e=m.next();!e.done;e=m.next())e=e.value,e.target==d&&(l||(l=ui(g)),k.push(vi(g,d,l,e.direction)));d.ec||g.ec||(k.push(wi(d,g)),k.push(wi(g,d)),!uh(2)&&k.reverse());c=c.concat(k)}b=n(c);for(e=b.next();!e.done;e=b.next())for(c=
e.value,wh(c),c=n(c),e=c.next();!e.done;e=c.next())if(a=e.value,xi(a)){a.ua.xb.push(a);if(e=a.fl)e=a,h=e.fl,g=[],g.index=ei++,g.xb=[],g.y=e.Ya.y,g.U=e.ua.U,g.U.push(g),h.platform=g,g.push(h),d=e.ua.slice(),Fh(e.ua,[h]),ai(),h=fi([g],[e.Ya]),h||(e.ua.length=0,e.ua.push.apply(e.ua,ba(d)),e.ua.U.pop(),ei--),e=!h;if(e)a.ua.xb.pop();else return a}}
function gi(a,b){function c(y,x,B){-x.d<=y.R||-x.d>y.T||x.R>=y.d||x.T<y.d||(B=[(new Ai).raw(y.d,y.R,-x.d).rotate(B),(new Bi).raw(-x.d,-y.d,-x.R).rotate(B)],B.ah=y.source,B.fg=x.source,B.Ua=B[0].T-B[0].R+(B[1].T-B[1].R),14E5>=B.Ua&&Sa(h,B))}function d(y,x,B){y.d!=-x.d||-x.R<=y.R||-x.T>y.T||(B=[(new Ai).raw(y.d,y.R,-x.R).rotate(B)],B.ah=y.source,B.fg=x.source,B.Ua=B[0].T-B[0].R,14E5>=B.Ua&&Sa(h,B))}var e=Ch(xh(),162500,162500),h=[];h.cmp=function(y,x){return y.Ua<x.Ua?-1:1};var g=[],k=[];a=n(a);for(var l=
a.next();!l.done;l=a.next())g=g.concat(Th(l.value));b=n(b);for(a=b.next();!a.done;a=b.next())k=k.concat(Th(a.value));b=[[],[],[],[]];a=[[],[],[],[]];for(l=0;4>l;l++){for(var m=Ah(e,l),p=n(g),r=p.next();!r.done;r=p.next()){var q=r.value;r=q.source.source;q=Bh(q.x,q.y,l);var v=q.y,z=q.x;q=Lh(q.x,q.y,m);q<=z||(v=new Ai(v,z,q),v.source=r,b[l].push(v))}p=n(k);for(r=p.next();!r.done;r=p.next())q=r.value,r=q.source.source,q=Bh(q.x,q.y,l),v=q.y,z=q.x,q=Lh(q.x,q.y,m),q<=z||(v=new Ai(v,z,q),v.source=r,a[l].push(v))}for(e=
1;4>e;e++){g=void 0;g=(e+1)%4;k=n(b[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=n(a[g]),r=m.next();!r.done;r=m.next())c(l,r.value,e,g);k=n(a[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=n(b[g]),r=m.next();!r.done;r=m.next())c(l,r.value,e,g);g=(e+2)%4;k=n(b[e]);for(l=k.next();!l.done;l=k.next())for(l=l.value,m=n(a[g]),r=m.next();!r.done;r=m.next())d(l,r.value,e,g)}for(b=0;b<h.length;b++){a=h[b];e=a[0];g=a[a.length-1];k=a.ah.platform;l=a.fg.platform;m=Math.min(k.y,l.y);r=Math.max(k.y,
l.y);if(e==g){if(p=25E3*(Math.floor((e.T-e.R-325E3)/5E4)-1),0>p&&(p=0),Math.abs(l.y-k.y)>p){h.splice(b--,1);continue}}else if(p=25E3*(Math.floor((e.T-e.R-325E3)/5E4)-1),0>p&&(p=0),m=Math.max(m,k.y-p),r=Math.min(r,k.y+p),p=25E3*(Math.floor((g.T-g.R-325E3)/5E4)-1),0>p&&(p=0),m=Math.max(m,l.y-p),r=Math.min(r,l.y+p),m>r){h.splice(b--,1);continue}a.y=vh(m,r);a.ec=[];Math.abs(k.y-a.y)/25E3&&a.ec.push({direction:(e.sb()+2+3)%4,target:k});Math.abs(l.y-a.y)/25E3&&a.ec.push({direction:(g.sb()+3)%4,target:l});
a.ec.length||delete a.ec}for(b=0;4>b;b++){a=h[b];if(!a)break;g=a.ah.platform;k=a.fg.platform;e=[];ci.call(e);e.index=Yf.length+Zf;e.Hb=g.U.na>k.U.na?g.U.Hb:k.U.Hb;e.Hb.push(e);Yf.push(e);0==e.index%5&&(e.Oc=!0);e.style={};e.style.height=225E3;e.style.height+=5E4*uh(4);e.style.bd=e.Hb.bd;e.Oc?(e.style.Jc=vh(ph,rh),e.style.Za=1E5):(e.style.Jc=vh(nh,qh,sh),e.style.Za=e.Hb.Za);g=[];g.index=ei++;g.xb=[];g.y=a.y;a.ec&&(g.ec=a.ec);g.U=e;e.push(g);k=n(a);for(l=k.next();!l.done;l=k.next())l=l.value.fh().expand(162500,
162500),l.platform=g,g.push(l);ai();k=k=void 0;if(g.y==a.fg.platform.y){if(k=fi([a.ah.platform],[g])){if(k=fi([g],[a.fg.platform]))return a;a.ah.platform.xb.pop()}}else if(k=fi([g],[a.fg.platform])){if(k=fi([a.ah.platform],[g]))return a;a.fg.platform.xb.pop()}Yf.pop();e.Hb.pop()}return!1}
function zi(a,b,c){a.Pe=Ci(a,c);b.Pe=Ci(b,c);var d=[],e=[],h=c+37500,g=zh(a.Pe,h,0),k=zh(b.Pe,-h,0);k=Gh(g,k);var l=n(k);for(g=l.next();!g.done;g=l.next())g.value.direction=0;e=e.concat(k);g=zh(a.Pe,0,h);k=zh(b.Pe,0,-h);k=Gh(g,k);l=n(k);for(g=l.next();!g.done;g=l.next())g.value.direction=1;e=e.concat(k);g=zh(a.Pe,-h,0);k=zh(b.Pe,h,0);k=Gh(g,k);l=n(k);for(g=l.next();!g.done;g=l.next())g.value.direction=2;e=e.concat(k);g=zh(a.Pe,0,-h);h=zh(b.Pe,0,h);h=Gh(g,h);k=n(h);for(g=k.next();!g.done;g=k.next())g.value.direction=
3;e=e.concat(h);wh(e);h=new Hh(-9375,9375,-c,c);e=n(e);for(g=e.next();!g.done;g=e.next()){g=g.value;k=h.zg(g.direction);l=n([{z:g.D,x:g.s},{z:g.H-1,x:g.u-1}]);for(var m=l.next();!m.done;m=l.next())m=m.value,m=k.translate(m.z,m.x),m.y=a.y,m.direction=g.direction,d.push(new Di(m,c,a,b))}return d}function Ci(a,b){b+=37500;var c=Dh(a,new Hh(0,1,0,1));a=Jh(c,1);a=Dh(a,new Hh(-b,b,-b,b));Fh(c,a);return c}
function yi(a,b){for(var c=[],d=n(a),e=d.next();!e.done;e=d.next())Nh(e.value,c);d=[];c=n(c);for(e=c.next();!e.done;e=c.next()){e=e.value;for(var h=n(b),g=h.next();!g.done;g=h.next())e.Kh(g.value,d)}for(c=[];d.length;){e=d.pop();for(h=0;h<d.length;h++)g=d[h],e.sb()==g.sb()&&e.d==g.d&&(e.T==g.R?(d.splice(h,1),e.T=g.T,h=-1):e.R==g.T&&(d.splice(h,1),e.R=g.R,h=-1));225E3>e.T-e.R||c.push(e)}d=[];c=n(c);for(e=c.next();!e.done;e=c.next())d.push(new Ei(e.value,a,b));return d}
function di(){var a=U;if(!a.Oc){for(var b=new Hh,c=n(a),d=c.next();!d.done;d=c.next()){var e=n(d.value);for(d=e.next();!d.done;d=e.next())Ih(b,d.value)}var h=b.H-b.D-2E5-2E5-30625-30625;d=b.u-b.s-2E5-2E5-30625-30625;c=Math.round(h/625E3);e=Math.round(d/625E3);h=b.D+2E5+30625+.5*(h-625E3*(c-1));b=b.s+2E5+30625+.5*(d-625E3*(e-1));var g=[],k=n(a);for(d=k.next();!d.done;d=k.next())g=g.concat(d.value);g=Jh(g,1);g=Ch(g,2E5,2E5);for(k=0;k<c;k++){for(var l=b,m={},p=0;p<e;m={ii:m.ii},p++){d=function(q){return function(){for(var v=
n(g),z=v.next();!z.done;z=v.next())if(Fi(q.ii,z.value))return!1;return!0}}(m);m.ii=new Hh(h-30625,h+30625,l-30625,l+30625);if(d()){var r=n(a);for(d=r.next();!d.done;d=r.next())Fh(d.value,[m.ii])}l+=625E3}h+=625E3}}}function wi(a,b){for(var c=ui(a),d=[],e=0;4>e;e++)d=d.concat(vi(a,b,c,e));return d}
function vi(a,b,c,d){var e=25E3*Math.ceil(Math.abs(b.y-a.y)/25E3),h=a.U!=b.U?325E3:0,g=function(l,m,p){function r(y){for(var x=0;x<y.length;x++)for(var B=y[x],A=x+1;A<y.length;A++){var D=y[A];if(B.D==D.D&&B.H==D.H){if(D.u==B.s){y.splice(A--,1);B.s=D.s;x--;break}if(D.s==B.u){y.splice(A--,1);B.u=D.u;x--;break}}}y=n(y);for(x=y.next();!x.done;x=y.next())x=x.value,x.s=x.u-1,x.direction=d}var q=Jh(l,1);q=Dh(q,new Hh(-162499,162500,-e-h+1,e+162500+162500));l=q=Jh(q,0);q=Dh(p,new Hh(0,0,-e-h+1,e));q=Jh(q,
1);q=Dh(q,new Hh(-162500,162501,0,0));l=q=Gh(l,q);q=Jh(m,1);q=Dh(q,new Hh(-162499,162500,-162499,162500));q=Jh(q,0);p=[];m=Gh(l,zh(q,0,-e-h-162500));r(m);for(var v=n(m),z=v.next();!z.done;z=v.next())z.value.type=1;p=p.concat(m);if(0!=h){m=Gh(l,zh(q,-325E3,-e-162500));r(m);v=n(m);for(z=v.next();!z.done;z=v.next())z.value.type=0;p=p.concat(m);m=Gh(l,zh(q,325E3,-e-162500));r(m);l=n(m);for(z=l.next();!z.done;z=l.next())z.value.type=2;p=p.concat(m)}return p}(Ah(a,d),Ah(b,d),Ah(c,d));c=[];g=n(g);for(var k=
g.next();!k.done;k=g.next())c.push(new Gi(k.value,e,h,a,b));return c}function ui(a){for(var b=a.slice(),c=n(a.Rf),d=c.next();!d.done;d=c.next())d=d.value,d=d.Qa.platform!=a?d.Qa.platform:d.ra.platform,d.U==a.U&&(b=b.concat(d));return b}
function ai(){for(var a=[],b=n(Yf),c=b.next();!c.done;c=b.next()){c=n(c.value);for(var d=c.next();!d.done;d=c.next()){d=d.value;d.Rf=[];for(var e=n(d),h=e.next();!h.done;h=e.next())h.value.Rf=[];a=a.concat(d)}}for(b=0;b<a.length;b++)for(c=a[b],d=b+1;d<a.length;d++)if(e=a[d],h=Hi(c,e))h.Qa=c,h.ra=e,c.Rf.push(h),e.Rf.push(h),c.platform!=e.platform&&(c.platform.Rf.push(h),e.platform.Rf.push(h))}
function mi(){Xg=yh();var a=n(Yf),b=a.next();a:for(;!b.done;b=a.next())if(b=b.value,!b.Wm){b.Wm=!0;b=n(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;for(var d=n(c.Rf),e=d.next();!e.done;e=d.next())if(e=e.value,e=e.Qa.platform!=c?e.Qa.platform:e.ra.platform,c.U.na==e.U.na&&!(c.index<=e.index)&&c.U!=e.U){var h=zi(c,e,87500);wh(h);h=n(h);for(var g=h.next();!g.done;g=h.next())if(g=g.value,xi(g)){g.nd=!0;c.xb.push(g);e.xb.push(g);continue a}}}}}
function ci(){this.na=Uh+1;this.om=[];this.Bb=[];this.Eb=[];this.bound=new Od;this.sa=-Infinity;this.floor=Infinity;this.o=-Infinity;this.ia={};this.ia.qa=-2147483648;this.ia.mb=new w(1,1,1);this.cd=0;this.Ub=new w;this.cells=new ab(kb)}var ei=0;
function Di(a,b,c,d){this.Ta=a;this.direction=a.direction;this.a=b;this.ua=c;this.Ya=d;this.z=.5*a.D+.5*a.H;this.x=.5*a.s+.5*a.u;this.y=Math.max(c.y,d.y);this.lc=[];this.eg=[];this.Fd=[];this.Ud=[];this.Bb=[];c=new Hh(a.D,a.H,a.s,a.u);c.o=a.y;c.v=c.o+225E3;this.Fd.push(c);this.eg.push(c);b=new Hh(2*-b,2*b,-b,b);b=b.rotate(this.direction);b=b.translate(this.z,this.x);b.v=a.y;b.o=b.v-18750;this.Fd.push(b);b=new Hh(b.D,b.H,b.s,b.u);b.o=a.y;b.v=b.o+225E3;this.Ud.push(b)}f=Di.prototype;f.qk=function(){Pg.Vl.push(this.Ta)};
f.translate=function(a,b){this.z+=a;this.x+=b};
f.nj=function(){if(!this.Bb.length){this.rd=0;var a=new Ai(0,0,1);a=a.rotate(this.direction);this.Ba=new Cc(a.yc()+this.z,a.xc()+this.x,a.Yb()+this.z,a.Xb()+this.x);a=new Ii;a.add=!0;a.Za=0;a.color=eh;this.nd?(a.o=this.y+87500,a.v=a.o+125E3):(a.o=this.y,a.v=this.y+225E3);for(var b=[new E(0,-this.a),new E(0,this.a),new E(-9375,this.a),new E(-9375,-this.a)],c=[new E(0,this.a),new E(0,-this.a),new E(9375,-this.a),new E(9375,this.a)],d=0;d<b.length;d++)b[d]=this.Ba.vb(b[d].x,b[d].y);for(d=0;d<c.length;d++)c[d]=
this.Ba.vb(c[d].x,c[d].y);a.ba=this.ua.U.index;Ji(a,b);this.Bb.push(a);a=a.ca();a.ba=this.Ya.U.index;Ji(a,c);this.Bb.push(a);this.Cc=new xf(new Cc(b[0].x,b[0].y,b[1].x,b[1].y),a.o,a.v);this.Wc=new xf(new Cc(c[0].x,c[0].y,c[1].x,c[1].y),a.o,a.v);this.Cc.qd=this.Wc;this.Wc.qd=this.Cc;this.Cc.ba=this.ua.U.index;this.Wc.ba=this.Ya.U.index;this.Cc.nd=this.nd;this.Wc.nd=this.nd}};
f.Vj=function(){if(0==this.rd){for(var a=n(this.Bb),b=a.next();!b.done;b=a.next())b.value.stroke();this.rd=1}1!=this.rd||this.ua.U.na>Wh+1||this.Ya.U.na>Wh+1||(this.ua.U.Eb.push(this.Cc),this.Ya.U.Eb.push(this.Wc),this.rd=2)};f.create=function(){if(this.zj)this.zj.update();else if(0<this.rd)if(this.nd)this.zj=new Ki(this.Ba,this.y+87500,this.ua.U,this.Ya.U);else if(this.ua.U.na!=this.Ya.U.na||this.ua.U.Oc!=this.Ya.U.Oc)this.zj=new Li(this.Ba,this.y,this.Cc,this.Wc,this.ua.U,this.Ya.U)};
f.sj=function(){if(!this.bg){for(var a=n(this.Bb),b=a.next();!b.done;b=a.next())ri(b.value);this.bg=!0}};function ii(a){var b=a.ua.xb,c=b.indexOf(a);0>c||b.splice(c,1);b=a.Ya.xb;a=b.indexOf(a);0>a||b.splice(a,1)}f.qj=function(){if(this.nd){var a=this.y+87500;var b=a+125E3}else a=this.y,b=this.y+225E3;this.ua.U.sa=Math.max(this.ua.U.sa,b);this.Ya.U.sa=Math.max(this.Ya.U.sa,b);this.ua.U.o=Math.min(this.ua.U.o,a);this.Ya.U.o=Math.min(this.Ya.U.o,a)};
function Ei(a,b,c){var d=.5*(a.T-a.R)-9375,e=a.fh();this.direction=(a.sb()+3)%4;this.a=d;this.Ta=e;this.ua=b;this.Ya=c;this.z=.5*e.D+.5*e.H;this.x=.5*e.s+.5*e.u;this.y=Math.max(b.y,c.y);e.y=this.y;this.lc=[];this.eg=[];this.Fd=[];this.Ud=[];this.Bb=[];a=new Hh(e.D,e.H,e.s,e.u);a.o=e.y;a.v=a.o+225E3;this.Fd.push(a);this.eg.push(a);d=new Hh(-225E3,225E3,-d,d);d=d.rotate(this.direction);d=d.translate(this.z,this.x);d.v=e.y;d.o=d.v-18750;this.Fd.push(d);d=new Hh(d.D,d.H,d.s,d.u);d.o=e.y;d.v=d.o+225E3;
this.Ud.push(d)}f=Ei.prototype;f.qk=function(){Pg.Vl.push(this.Ta)};f.translate=function(a,b){this.z+=a;this.x+=b};
f.nj=function(){if(!this.Bb.length){this.rd=0;var a=new Ai(0,0,1);a=a.rotate(this.direction);this.Ba=new Cc(a.yc()+this.z,a.xc()+this.x,a.Yb()+this.z,a.Xb()+this.x);a=new Ii;a.add=!0;a.Za=0;a.color=eh;this.nd?(a.o=this.y+87500,a.v=a.o+125E3):(a.o=this.y,a.v=Math.min(this.ua.U.sa,this.Ya.U.sa));for(var b=[new E(0,-this.a),new E(0,this.a),new E(-9375,this.a),new E(-9375,-this.a)],c=[new E(0,this.a),new E(0,-this.a),new E(9375,-this.a),new E(9375,this.a)],d=0;d<b.length;d++)b[d]=this.Ba.vb(b[d].x,b[d].y);
for(d=0;d<c.length;d++)c[d]=this.Ba.vb(c[d].x,c[d].y);a.ba=this.ua.U.index;Ji(a,b);this.Bb.push(a);a=a.ca();a.ba=this.Ya.U.index;Ji(a,c);this.Bb.push(a);this.Cc=new xf(new Cc(b[0].x,b[0].y,b[1].x,b[1].y),a.o,a.v);this.Wc=new xf(new Cc(c[0].x,c[0].y,c[1].x,c[1].y),a.o,a.v);this.Cc.qd=this.Wc;this.Wc.qd=this.Cc;this.Cc.ba=this.ua.U.index;this.Wc.ba=this.Ya.U.index;this.Cc.nd=this.nd;this.Wc.nd=this.nd}};
f.Vj=function(){if(0==this.rd){for(var a=n(this.Bb),b=a.next();!b.done;b=a.next())b.value.stroke();this.rd=1}1!=this.rd||this.ua.U.na>Wh+1||this.Ya.U.na>Wh+1||(this.ua.U.Eb.push(this.Cc),this.Ya.U.Eb.push(this.Wc),this.rd=2)};f.create=function(){};f.sj=function(){if(!this.bg){for(var a=n(this.Bb),b=a.next();!b.done;b=a.next())ri(b.value);this.bg=!0}};f.qj=function(){};
function Gi(a,b,c,d,e){this.Ta=a;this.direction=a.direction;this.type=a.type;this.Qb=162500;this.qe=b;this.ua=d;this.Ya=e;var h=Math.min(d.y,e.y),g=Math.max(d.y,e.y);this.lc=[];this.eg=[];this.Fd=[];this.Ud=[];this.Bb=[];var k=new Hh(-162500,162500,-b,b);k=k.translate(a.D,a.s);k=k.rotate(this.direction);k.o=h-18750;k.v=g;this.lc.push(k);this.eg.push(k);k=new Hh(k.D,k.H,k.s,k.u);k.o=h;k.v=g+2E5;this.Ud.push(k);k=new Hh(-162500,162500,-b-162500-162500,-b);k=k.translate(a.D,a.s);k=k.rotate(this.direction);
k.o=d.y;k.v=g+2E5;this.Ud.push(k);k=new Hh(k.D,k.H,k.s,k.u);k.o=h-18750;k.v=d.y;this.lc.push(k);this.Fd.push(k);if(c){d=new Hh(-162500,162500,b,b+c);d=d.translate(a.D,a.s);d=d.rotate(this.direction);d.o=e.y;d.v=g+2E5;this.Ud.push(d);d=new Hh(d.D,d.H,d.s,d.u);d.o=h-18750;d.v=e.y;this.lc.push(d);this.Fd.push(d);this.fl=d;var l;0==this.type?l=new Hh(162500,487500,b,b+c):1==this.type?l=new Hh(-162500,162500,b+c,b+c+325E3):2==this.type&&(l=new Hh(-487500,-162500,b,b+c));l=l.translate(a.D,a.s);l=l.rotate(this.direction);
l.o=e.y;l.v=g+2E5;this.Ud.push(l);l=new Hh(l.D,l.H,l.s,l.u);l.o=h-18750;l.v=e.y;this.lc.push(l);this.Fd.push(l)}else b=new Hh(-162500,162500,b,b+162500),b=b.translate(a.D,a.s),b=b.rotate(this.direction),b.o=e.y,b.v=g+2E5,this.Ud.push(b),b=new Hh(b.D,b.H,b.s,b.u),b.o=h-18750,b.v=e.y,this.lc.push(b),this.Fd.push(b)}f=Gi.prototype;
f.qk=function(){var a=(this.Ya.y-this.ua.y)/25E3;if(this.Ya.y>this.ua.y)for(var b=0;b<=a;b++){var c=new Ai(this.Ta.s-this.qe+5E4*b,this.Ta.D-this.Qb,this.Ta.D+this.Qb);c=c.rotate(this.direction);c.y=this.ua.y+25E3*b;Pg.Hm.push(c)}else for(a=-a,b=0;b<=a;b++)c=new Ai(this.Ta.s-this.qe+5E4*b,this.Ta.D-this.Qb,this.Ta.D+this.Qb),c=c.rotate(this.direction),c.y=this.ua.y-25E3*b,Pg.Hm.push(c)};
f.translate=function(a,b){this.z+=a;this.x+=b;this.Ta=this.Ta.rotate(this.direction);this.Ta.D+=a;this.Ta.H+=a;this.Ta.s+=b;this.Ta.u+=b;this.Ta=this.Ta.zg(this.direction);this.lc[0].D+=a;this.lc[0].H+=a;this.lc[0].s+=b;this.lc[0].u+=b};
f.nj=function(){if(!this.Bb.length){this.rd=0;var a=this.ua.U,b=(this.Ya.y-this.ua.y)/25E3,c=function(h){return 1!=h.wi?!1:!0};if(this.Ya.y>this.ua.y)for(c=0;c<b;c++){var d=new Hh(this.Ta.D-this.Qb,this.Ta.D+this.Qb,this.Ta.s-this.qe+5E4*c,this.Ta.s-this.qe+5E4*(c+1));d=d.rotate(this.direction);d=[new E(d.D,d.s),new E(d.H,d.s),new E(d.H,d.u),new E(d.D,d.u)];a=new Ii;a.add=!1;a.ba=this.ua.U.index;a.Za=0;a.color=eh;a.o=this.ua.y;a.v=this.ua.y+25E3*(c+1);Ji(a,d);this.Bb.push(a)}else for(b=-b,d=new Ii,
d.add=!0,d.wi=1,d.ba=this.ua.U.index,d.Lh=c,d.Jc=a.style.Jc,d.Za=a.style.Za,d.Mf=a.o,d.color=a.style.bd,d.o=this.Ya.y,d.v=this.ua.y,a=this.lc[0],Ji(d,[new E(a.D,a.s),new E(a.H,a.s),new E(a.H,a.u),new E(a.D,a.u)]),this.Bb.push(d),d=0;d<b;d++){a=new Hh(this.Ta.D-this.Qb,this.Ta.D+this.Qb,this.Ta.s-this.qe+5E4*d,this.Ta.s-this.qe+5E4*(d+1));a=a.rotate(this.direction);a=[new E(a.D,a.s),new E(a.H,a.s),new E(a.H,a.u),new E(a.D,a.u)];var e=new Ii;e.add=!1;e.ba=this.ua.U.index;e.Lh=c;e.Za=0;e.color=eh;e.o=
this.Ya.y;e.v=this.ua.y-25E3*d;Ji(e,a);this.Bb.push(e)}}};f.Vj=function(){if(0==this.rd){for(var a=n(this.Bb),b=a.next();!b.done;b=a.next())b.value.stroke();this.rd=2}};f.create=function(){};f.sj=function(){if(!this.bg){for(var a=n(this.Bb),b=a.next();!b.done;b=a.next())ri(b.value);this.bg=!0}};f.qj=function(){this.ua.U.o=Math.min(this.ua.U.o,this.Ya.y);this.Ya.U.o=Math.min(this.Ya.U.o,this.ua.y)};
function Mi(a,b){for(var c=n(a.Fd),d=c.next();!d.done;d=c.next()){var e=d.value,h=n(b.eg);for(d=h.next();!d.done;d=h.next())if(Ni(e,d.value))return!1}c=n(a.eg);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=n(b.Fd),d=h.next();!d.done;d=h.next())if(Ni(e,d.value))return!1;c=n(a.Ud);for(d=c.next();!d.done;d=c.next())for(e=d.value,h=n(b.lc),d=h.next();!d.done;d=h.next())if(Ni(e,d.value))return!1;a=n(a.lc);for(d=a.next();!d.done;d=a.next())for(c=d.value,e=n(b.Ud),d=e.next();!d.done;d=e.next())if(Ni(c,
d.value))return!1;return!0}function xi(a){for(var b=n(Xg),c=b.next();!c.done;c=b.next())if(!Mi(a,c.value))return!1;return!0}
function si(a){function b(k){return k.add&&k.ba==this.ba?!0:!1}0>a.style.Za&&(a.style.Za+=a.sa-a.floor);for(var c=n(a.Uk),d=c.next();!d.done;d=c.next()){d=d.value;var e=new Ii;e.add=!0;e.wi=1;e.ba=a.index;e.Za=a.style.Za;e.color=a.style.bd;e.Jc=a.style.Jc;e.Mf=a.o;e.o=a.o;e.v=a.sa;Ji(e,cd(d));a.Bb.push(e);a.Oc&&(e.sa=null)}if(a.im)for(c=n(a.im),d=c.next();!d.done;d=c.next())d=d.value,e=new Ii,e.add=!0,e.wi=1,e.ba=a.index,e.Za=a.style.Za,e.color=a.style.bd,e.Jc=a.style.Jc,e.Mf=a.o,e.o=a.o,e.v=a.sa,
Ji(e,cd(d)),a.Bb.push(e);c=n(a);for(d=c.next();!d.done;d=c.next())if(e=d.value,!(e.y<=a.o)){var h=n(e.Tk);for(d=h.next();!d.done;d=h.next()){d=d.value;var g=new Ii;g.add=!1;g.wi=1;g.ba=a.index;g.Lh=b;g.Za=a.style.Za;g.color=a.style.bd;g.Jc=a.style.Jc;g.Mf=a.floor;g.o=a.o;g.v=e.y;Ji(g,cd(d));a.Bb.push(g)}}};function Hh(a,b,c,d){a=void 0===a?NaN:a;b=void 0===b?NaN:b;c=void 0===c?NaN:c;d=void 0===d?NaN:d;this.D=a;this.H=b;this.s=c;this.u=d}f=Hh.prototype;f.yf=function(a,b){return a<=this.D||a>=this.H||b<=this.s||b>=this.u?!1:!0};f.Wg=function(a,b){a<this.D?a=this.D:a>this.H&&(a=this.H);b<this.s?b=this.s:b>this.u&&(b=this.u);return new E(a,b)};function Oi(a,b,c){var d=0;b<a.D?d+=a.D-b:b>a.H&&(d+=b-a.H);c<a.s?d+=a.s-c:c>a.u&&(d+=c-a.u);return d}
function Qh(a,b,c){b>=a.D||(a.D=b);b<=a.H||(a.H=b);c>=a.s||(a.s=c);c<=a.u||(a.u=c)}function Ih(a,b){b.D>=a.D||(a.D=b.D);b.H<=a.H||(a.H=b.H);b.s>=a.s||(a.s=b.s);b.u<=a.u||(a.u=b.u)}f.pc=function(a,b){a-=.5*this.H+.5*this.D;b-=.5*this.u+.5*this.s;return 1E5/Math.sqrt(a*a+b*b)};f.expand=function(a,b){return this.ca(this.D-a,this.H+a,this.s-b,this.u+b)};
function Nh(a,b){var c=new Ai(a.s,a.D,a.H);c.source=a;b.push(c);c=new Pi(a.H,a.s,a.u);c.source=a;b.push(c);c=new Qi(a.u,a.H,a.D);c.source=a;b.push(c);c=new Bi(a.D,a.u,a.s);c.source=a;b.push(c)}
function oi(a,b,c,d,e){var h=new Hh(a.H+b+d,a.H+b+d,Math.min(a.s+c,a.u-c)-d,Math.max(a.s+c,a.u-c)+d);h.H+=1;h.u+=1;e.push(h);h=new Hh(Math.min(a.D+b,a.H-b)-d,Math.max(a.D+b,a.H-b)+d,a.u+c,a.u+c+d);h.H+=1;h.u+=1;e.push(h);h=new Hh(a.D-b-d,a.D-b-d,Math.min(a.s+c,a.u-c)-d,Math.max(a.s+c,a.u-c)+d);h.H+=1;h.u+=1;e.push(h);h=new Hh(Math.min(a.D+b,a.H-b)-d,Math.max(a.D+b,a.H-b)+d,a.s-c-d,a.s-c-d);h.H+=1;h.u+=1;e.push(h)}
f.ca=function(a,b,c,d){a=new Hh(a,b,c,d);this.Ak&&(a.Ak=this.Ak);this.platform&&(a.platform=this.platform);this.U&&(a.U=this.U);void 0!==this.direction&&(a.direction=this.direction);void 0!==this.type&&(a.type=this.type);return a};
f.bh=function(a,b){if(!Fi(this,a))return!1;var c=this.s,d=this.u;this.u>a.u&&(b.push(this.ca(this.D,this.H,a.u,this.u)),d=a.u);this.s<a.s&&(b.push(this.ca(this.D,this.H,this.s,a.s)),c=a.s);this.H>a.H&&b.push(this.ca(a.H,this.H,c,d));this.D<a.D&&b.push(this.ca(this.D,a.D,c,d));return!0};f.Kh=function(a,b){a=this.ca(Math.max(this.D,a.D),Math.min(this.H,a.H),Math.max(this.s,a.s),Math.min(this.u,a.u));a.H<=a.D||a.u<=a.s||b.push(a)};function Eh(a,b){return a.ca(a.D+b.D,a.H+b.H,a.s+b.s,a.u+b.u)}
f.rotate=function(a){switch(a){case 0:return this.ca(this.D,this.H,this.s,this.u);case 1:return this.ca(-this.u,-this.s,this.D,this.H);case 2:return this.ca(-this.H,-this.D,-this.u,-this.s);case 3:return this.ca(this.s,this.u,-this.H,-this.D)}};f.zg=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return this.ca(this.D+a,this.H+a,this.s+b,this.u+b)};function Hi(a,b){a=new Hh(Math.max(a.D,b.D),Math.min(a.H,b.H),Math.max(a.s,b.s),Math.min(a.u,b.u));return a.H<a.D||a.u<a.s?null:a}
function Fi(a,b){return a.D>=b.H||a.H<=b.D||a.s>=b.u||a.u<=b.s?!1:!0}function Ni(a,b){return!Fi(a,b)||a.o>=b.v||a.v<=b.o?!1:!0}function pi(a,b,c){var d=0;a=n(a);for(var e=a.next();!e.done;e=a.next())d+=e.value.pc(b,c);return d}function Ai(a,b,c){this.d=a;this.R=b;this.T=c}function Pi(a,b,c){this.d=-a;this.R=b;this.T=c}function Qi(a,b,c){this.d=-a;this.R=-b;this.T=-c}function Bi(a,b,c){this.d=a;this.R=-b;this.T=-c}f=Ai.prototype;f.sb=function(){return 0};f.yc=function(){return this.R};f.xc=function(){return this.d};
f.Yb=function(){return this.T};f.Xb=function(){return this.d};f.raw=function(a,b,c){this.d=a;this.R=b;this.T=c;return this};f.Zf=function(){return new Cc(this.yc(),this.xc(),this.Yb(),this.Xb())};f.ca=function(a,b,c){a=new Ai(a,b,c);a.source=this.source;return a};f.Ai=function(a,b,c){if(!this.ci){var d=new E(this.R+a,this.d-b);d.source=this;c.push(d)}this.zh||(a=new E(this.T-a,this.d-b),a.source=this,c.push(a))};f.Af=function(a,b){return new E(this.R+a,this.d+b)};
f.yf=function(a,b){return b>this.d||b<this.d||a<this.R||a>=this.T?!1:!0};f.Wg=function(a){return a<this.R?new E(this.R,this.d):a>this.T?new E(this.T,this.d):new E(a,this.d)};f.bh=function(a,b){if(this.d>a.u||this.d<=a.s||this.R>=a.H||this.T<=a.D)return!1;this.R<a.D&&b.push(this.ca(this.d,this.R,a.D));this.T>a.H&&b.push(this.ca(this.d,a.H,this.T));return!0};f.Kh=function(a,b){this.d>a.u||this.d<=a.s||this.R>=a.H||this.T<=a.D||b.push(this.ca(this.d,Math.max(this.R,a.D),Math.min(this.T,a.H)))};
f.fh=function(){return new Hh(this.R,this.T,this.d,this.d)};f.rotate=function(a){switch(a){case 0:return(new Ai).raw(this.d,this.R,this.T);case 1:return(new Pi).raw(this.d,this.R,this.T);case 2:return(new Qi).raw(this.d,this.R,this.T);case 3:return(new Bi).raw(this.d,this.R,this.T)}};f.zg=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Ai).raw(this.d+b,this.R+a,this.T+a)};f=Pi.prototype;f.sb=function(){return 1};f.yc=function(){return-this.d};f.xc=function(){return this.R};
f.Yb=function(){return-this.d};f.Xb=function(){return this.T};f.raw=Ai.prototype.raw;f.Zf=Ai.prototype.Zf;f.ca=function(a,b,c){a=new Pi(-a,b,c);a.source=this.source;return a};f.Ai=function(a,b,c){if(!this.ci){var d=new E(-this.d+a,this.R+b);d.source=this;c.push(d)}this.zh||(a=new E(-this.d+a,this.T-b),a.source=this,c.push(a))};f.Af=function(a,b){return new E(-this.d-b,this.R+a)};f.yf=function(a,b){return a>-this.d||a<-this.d||b<this.R||b>=this.T?!1:!0};
f.Wg=function(a,b){return b<this.R?new E(-this.d,this.R):b>this.T?new E(-this.d,this.T):new E(-this.d,b)};f.bh=function(a,b){if(-this.d>=a.H||-this.d<a.D||this.R>=a.u||this.T<=a.s)return!1;this.R<a.s&&b.push(this.ca(this.d,this.R,a.s));this.T>a.u&&b.push(this.ca(this.d,a.u,this.T));return!0};f.Kh=function(a,b){-this.d>=a.H||-this.d<a.D||this.R>=a.u||this.T<=a.s||b.push(this.ca(this.d,Math.max(this.R,a.s),Math.min(this.T,a.u)))};f.fh=function(){return new Hh(-this.d,-this.d,this.R,this.T)};
f.rotate=function(a){switch(a){case 0:return(new Pi).raw(this.d,this.R,this.T);case 1:return(new Qi).raw(this.d,this.R,this.T);case 2:return(new Bi).raw(this.d,this.R,this.T);case 3:return(new Ai).raw(this.d,this.R,this.T)}};f.zg=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Pi).raw(this.d-a,this.R+b,this.T+b)};f=Qi.prototype;f.sb=function(){return 2};f.yc=function(){return-this.R};f.xc=function(){return-this.d};f.Yb=function(){return-this.T};f.Xb=function(){return-this.d};
f.raw=Ai.prototype.raw;f.Zf=Ai.prototype.Zf;f.ca=function(a,b,c){a=new Qi(-a,-b,-c);a.source=this.source;return a};f.Ai=function(a,b,c){if(!this.ci){var d=new E(-this.R-a,-this.d+b);d.source=this;c.push(d)}this.zh||(a=new E(-this.T+a,-this.d+b),a.source=this,c.push(a))};f.Af=function(a,b){return new E(-this.R-a,-this.d-b)};f.yf=function(a,b){return b>-this.d||b<-this.d||a>-this.R||a<=-this.T?!1:!0};f.Wg=function(a){return a<-this.T?new E(-this.T,-this.d):a>-this.R?new E(-this.R,-this.d):new E(a,-this.d)};
f.bh=function(a,b){if(-this.d>=a.u||-this.d<a.s||-this.T>=a.H||-this.R<=a.D)return!1;-this.T<a.D&&b.push(this.ca(this.d,-a.D,this.T));-this.R>a.H&&b.push(this.ca(this.d,this.R,-a.H));return!0};f.Kh=function(a,b){-this.d>=a.u||-this.d<a.s||-this.T>=a.H||-this.R<=a.D||b.push(this.ca(this.d,Math.max(this.R,-a.H),Math.min(this.T,-a.D)))};f.fh=function(){return new Hh(-this.T,-this.R,-this.d,-this.d)};
f.rotate=function(a){switch(a){case 0:return(new Qi).raw(this.d,this.R,this.T);case 1:return(new Bi).raw(this.d,this.R,this.T);case 2:return(new Ai).raw(this.d,this.R,this.T);case 3:return(new Pi).raw(this.d,this.R,this.T)}};f.zg=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Qi).raw(this.d-b,this.R-a,this.T-a)};f=Bi.prototype;f.sb=function(){return 3};f.yc=function(){return this.d};f.xc=function(){return-this.R};f.Yb=function(){return this.d};f.Xb=function(){return-this.T};
f.raw=Ai.prototype.raw;f.Zf=Ai.prototype.Zf;f.ca=function(a,b,c){a=new Bi(a,-b,-c);a.source=this.source;return a};f.Ai=function(a,b,c){if(!this.ci){var d=new E(this.d-a,-this.R-b);d.source=this;c.push(d)}this.zh||(a=new E(this.d-a,-this.T+b),a.source=this,c.push(a))};f.Af=function(a,b){return new E(this.d+b,-this.R-a)};f.yf=function(a,b){return a>this.d||a<this.d||b>-this.R||b<=-this.T?!1:!0};f.Wg=function(a,b){return b<-this.T?new E(this.d,-this.T):b>-this.R?new E(this.d,-this.R):new E(this.d,b)};
f.bh=function(a,b){if(this.d>a.H||this.d<=a.D||-this.T>=a.u||-this.R<=a.s)return!1;-this.T<a.s&&b.push(this.ca(this.d,-a.s,this.T));-this.R>a.u&&b.push(this.ca(this.d,this.R,-a.u));return!0};f.Kh=function(a,b){this.d>a.H||this.d<=a.D||-this.T>=a.u||-this.R<=a.s||b.push(this.ca(this.d,Math.max(this.R,-a.u),Math.min(this.T,-a.s)))};f.fh=function(){return new Hh(this.d,this.d,-this.T,-this.R)};
f.rotate=function(a){switch(a){case 0:return(new Bi).raw(this.d,this.R,this.T);case 1:return(new Ai).raw(this.d,this.R,this.T);case 2:return(new Pi).raw(this.d,this.R,this.T);case 3:return(new Qi).raw(this.d,this.R,this.T)}};f.zg=function(a){return this.rotate((4-a)%4)};f.translate=function(a,b){return(new Bi).raw(this.d+a,this.R-b,this.T-b)};
function Ri(a,b){function c(){for(var p=new ab(Dc),r=n(a),q=r.next();!q.done;q=r.next())q=q.value,p.add(q),p.add(q.da);r=n(a);for(q=r.next();!q.done;q=r.next())if(q=q.value,!q.remove){var v=p.get(q);v!=q&&(q.replace([v]),q.da.replace([v.da]))}return p.elements}function d(){for(var p=n(m),r=p.next();!r.done;r=p.next()){r=r.value;var q=r.x&-524288,v=r.y&-524288,z=!1;r.x<=q+256?(r.x=q,z=!0):r.x>=q+524288-256&&(r.x=q+524288,z=!0);r.y<=v+256?(r.y=v,z=!0):r.y>=v+524288-256&&(r.y=v+524288,z=!0);if(z){v=
n(r.inputs);for(q=v.next();!q.done;q=v.next())q.value.uh=!0;r=n(r.outputs);for(q=r.next();!q.done;q=r.next())q.value.uh=!0}}}function e(p,r,q){var v=Hc(r,p.m,p.l),z=Hc(r,p.C,p.w),y=Hc(p,r.m,r.l),x=Hc(p,r.C,r.w);if(-256>y&&256<x&&(-256>v&&256<z||256<v&&-256>z)||256<y&&-256>x&&(-256>v&&256<z||256<v&&-256>z)){v/=v-z;z=1-v;x=new E(Math.round(p.m*z+p.C*v),Math.round(p.l*z+p.w*v));v=p.ib(p.m,p.l,x.x,x.y);z=p.ib(x.x,x.y,p.C,p.w);y=r.ib(r.m,r.l,x.x,x.y);x=r.ib(x.x,x.y,r.C,r.w);var B=Xc(v),A=Xc(z),D=Xc(y),
H=Xc(x);p.replace([v,z]);p.da.replace([A,B]);r.replace([y,x]);r.da.replace([H,D]);q.push(v,z,y,x);q.push(B,A,D,H);p=!0}else p=!1;return p}function h(p,r){if(!p.remove){for(var q=n(m),v=q.next();!v.done;v=q.next())if(v=v.value,v.x!=p.m||v.y!=p.l)if(v.x!=p.C||v.y!=p.w){var z=p.Af(v.x,v.y);if(!(0>=z.x||z.x>=p.length||-256>z.y||256<z.y)){q=p.ib(p.m,p.l,v.x,v.y);v=p.ib(v.x,v.y,p.C,p.w);z=p.ib(q.C,q.w,q.m,q.l);var y=p.ib(v.C,v.w,v.m,v.l);q.da=z;z.da=q;v.da=y;y.da=v;p.replace([q,v]);p.da.replace([y,z]);
h(q,r);h(v,r);h(z,r);h(y,r);return}}r.push(p)}}for(var g=[],k=n(a),l=k.next();!l.done;l=k.next())l=l.value,l.remove||g.push(l);a=g;a=c();b&&(a=Si(null,a,e));var m=new ab(sd);b=n(a);for(l=b.next();!l.done;l=b.next())g=l.value,k=new E(g.m,g.l),k.inputs=[],k.outputs=[],k.a=1,g.Qa=m.Ka(k),g.Qa.outputs.push(g),g.Qa.a++,k=new E(g.C,g.w),k.inputs=[],k.outputs=[],k.a=1,g.ra=m.Ka(k),g.ra.inputs.push(g),g.ra.a++;m=m.elements;d();m=Si(null,m,function(p,r,q){if(256>(Math.abs(r.x-p.x)+Math.abs(r.y-p.y))*Math.SQRT1_2){var v=
new E(p.x*p.a+r.x*r.a,p.y*p.a+r.y*r.a);v.a=p.a+r.a;v.x/=v.a;v.y/=v.a;v.round();v.inputs=p.inputs.concat(r.inputs);v.outputs=p.outputs.concat(r.outputs);p=n(v.inputs);for(r=p.next();!r.done;r=p.next())r=r.value,r.ra=v,r.uh=!0;p=n(v.outputs);for(r=p.next();!r.done;r=p.next())r=r.value,r.Qa=v,r.uh=!0;q.push(v);q=!0}else q=!1;return q});d();for(b=0;b<a.length;b++)g=a[b],g.remove?a.splice(b--,1):g.Qa==g.ra?(g.replace([]),g.da.replace([]),a.splice(b--,1)):g.uh&&(k=g.ib(g.Qa.x,g.Qa.y,g.ra.x,g.ra.y),l=Xc(k),
g.replace([k]),g.da.replace([l]),a.splice(b++,1,k,l)),delete g.Qa,delete g.ra,delete g.uh;(function(){for(var p=[],r=n(a),q=r.next();!q.done;q=r.next())h(q.value,p);a=p})();return a=c()}
function Si(a,b,c){var d=[];if(a)for(var e=0;e<a.length;e++){var h=a[e];if(h.remove)a.splice(e--,1);else for(var g=0;g<b.length;g++){var k=b[g];if(k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);a.splice(e--,1);break}}}for(e=0;e<b.length;e++)if(h=b[e],h.remove)b.splice(e--,1);else for(g=e+1;g<b.length;g++)if(k=b[g],k.remove)b.splice(g--,1);else if(c(h,k,d)){b.splice(g--,1);b.splice(e--,1);break}a&&(b=a.concat(b));return d.length?Si(b,d,c):b};var Ti,Ui,Vi,Wi,Xi,Yi=0;
function Zi(){function a(c){function d(x,B,A){return Bh(B,A,x.sb()).y>=x.d}function e(x){x.Ua=0;var B=x.m,A=x.l;if(1==x.action)if(x.zb.length){var D=x.zb[0],H=D.yc()-B;D=D.xc()-A;x.Ua+=Math.sqrt(H*H+D*D);H=n(x.zb);for(D=H.next();!D.done;D=H.next())A=D.value,x.Ua+=A.T-A.R,B=A.Yb(),A=A.Xb()}else H=x.Y.Yb(),D=x.Y.Xb(),B=H-B,A=D-A,x.Ua+=Math.sqrt(B*B+A*A),B=H,A=D;else if(2==x.action)if(x.zb.length)for(D=x.zb[0],H=D.Yb()-B,D=D.Xb()-A,x.Ua+=Math.sqrt(H*H+D*D),H=n(x.zb),D=H.next();!D.done;D=H.next())A=D.value,
x.Ua+=A.T-A.R,B=A.yc(),A=A.xc();else H=x.Y.Yb(),D=x.Y.Xb(),B=H-B,A=D-A,x.Ua+=Math.sqrt(B*B+A*A),B=H,A=D;B=x.C-B;A=x.w-A;x.Ua+=Math.sqrt(B*B+A*A)}function h(x){x.sc=0;for(var B=n(x),A=B.next();!A.done;A=B.next())A=A.value,x.sc=A.complete?x.sc+.5*A.Ua:x.sc+A.Ua}for(var g=null,k=0,l=0;l<c.length;l++)if(!c[l].complete){k=l;g=c[l];break}if(!g)return!0;if(1==g.action){g.Y=g.Y.next;l=g.Y.Yb();var m=g.Y.Xb();if(l==g.m&&m==g.l||l==g.C&&m==g.w)return!1;for(var p=g.Y,r=g.Y.next;0<k;){var q=c[k-1],v=Hc(q,l,m);
if(1==q.yb&&0<=v||2==q.yb&&0>=v)q=new Cc(q.m,q.l,g.C,g.w),q.action=g.action,q.complete=g.complete,q.yb=g.yb,q.Y=g.Y,q.zb=g.zb,q.max=q,c=c.slice(),c.splice(--k,2,q),Sa(Vi,c),g=q;else break}q=!d(p,g.C,g.w)&&d(r,g.C,g.w);if(g.zb.length){if(Bh(r.Yb(),r.Xb(),p.sb()).y>p.d||q){l=[];m=g.zb[0];m=new Cc(g.m,g.l,m.yc(),m.xc());m.Ua=m.length;m.action=0;m.yb=g.action;l.push(m);m=n(g.zb);for(p=m.next();!p.done;p=m.next())p=p.value,p=new Cc(p.yc(),p.xc(),p.Yb(),p.Xb()),p.Ua=p.length,p.complete=1,p.action=0,p.yb=
g.action,l.push(p);m=g.zb[g.zb.length-1];m=new Cc(m.Yb(),m.Xb(),g.C,g.w);m.Ua=m.length;m.action=0;m.yb=g.yb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(ba(l)));e(g);h(c);Sa(Vi,c)==c&&Sa(Ti,c);return!1}g.zb.push(r)}else{v=r.Yb();var z=r.Xb();if(0<=Hc(g.max,l,m)&&(g.max=new Cc(g.m,g.l,l,m),Bh(v,z,p.sb()).y<p.d&&!d(r,g.m,g.l))){if(q)return p=[],r=new Cc(g.m,g.l,l,m),r.Ua=r.length,r.action=0,r.yb=g.action,p.push(r),l=new Cc(l,m,g.C,g.w),l.Ua=l.length,l.action=0,l.yb=g.yb,p.push(l),c=c.slice(),
c.splice.apply(c,[k,1].concat(ba(p))),e(g),h(c),Sa(Vi,c)==c&&Sa(Ti,c),!1;g.zb.push(r)}}e(g);h(c);Sa(Ti,c)}else if(2==g.action){g.Y=g.Y.pb;l=g.Y.Yb();m=g.Y.Xb();if(l==g.m&&m==g.l||l==g.C&&m==g.w)return!1;p=g.Y.next;for(r=g.Y;0<k;)if(q=c[k-1],v=Hc(q,l,m),1==q.yb&&0<=v||2==q.yb&&0>=v)q=new Cc(q.m,q.l,g.C,g.w),q.action=g.action,q.complete=g.complete,q.yb=g.yb,q.Y=g.Y,q.zb=g.zb,q.max=q,c=c.slice(),c.splice(--k,2,q),Sa(Vi,c),g=q;else break;q=!d(p,g.C,g.w)&&d(r,g.C,g.w);if(g.zb.length){if(Bh(r.yc(),r.xc(),
p.sb()).y>p.d||q){l=[];m=g.zb[0];m=new Cc(g.m,g.l,m.Yb(),m.Xb());m.Ua=m.length;m.action=0;m.yb=g.action;l.push(m);m=n(g.zb);for(p=m.next();!p.done;p=m.next())p=p.value,p=new Cc(p.Yb(),p.Xb(),p.yc(),p.xc()),p.Ua=p.length,p.complete=1,p.action=0,p.yb=g.action,l.push(p);m=g.zb[g.zb.length-1];m=new Cc(m.yc(),m.xc(),g.C,g.w);m.Ua=m.length;m.action=0;m.yb=g.yb;l.push(m);c=c.slice();c.splice.apply(c,[k,1].concat(ba(l)));e(g);h(c);Sa(Vi,c)==c&&Sa(Ti,c);return!1}g.zb.push(r)}else if(v=r.yc(),z=r.xc(),0>=Hc(g.max,
l,m)&&(g.max=new Cc(g.m,g.l,l,m),Bh(v,z,p.sb()).y<p.d&&!d(r,g.m,g.l))){if(q)return p=[],r=new Cc(g.m,g.l,l,m),r.Ua=r.length,r.action=0,r.yb=g.action,p.push(r),l=new Cc(l,m,g.C,g.w),l.Ua=l.length,l.action=0,l.yb=g.yb,p.push(l),c=c.slice(),c.splice.apply(c,[k,1].concat(ba(p))),e(g),h(c),Sa(Vi,c)==c&&Sa(Ti,c),!1;g.zb.push(r)}e(g);h(c);Sa(Ti,c)}else{var y=[];y.cmp=function(x,B){return x.t<B.t?-1:x.t>B.t?1:x.Cf<B.Cf?-1:x.Cf>B.Cf?1:x.Y.next==B.Y?-x.Cf:x.Y.pb==B.Y?x.Cf:0};l=function(x){if(!x.disabled){var B=
Bh(g.m,g.l,x.sb()),A=Bh(g.C,g.w,x.sb());if(A.y==B.y){if(A.y==x.d){if(A.x>B.x){var D=Math.max(B.x,x.R);var H=Math.min(A.x,x.T);var K=1}else if(A.x<B.x)D=Math.max(A.x,x.R),H=Math.min(B.x,x.T),K=-1;else return;D>=H||(D=Math.round(.5*D+.5*H),Sa(y,{t:(D-B.x)/(A.x-B.x),rh:-1,Cf:K,Y:x,x:D,y:x.d}))}}else K=A.x<B.x?-1:1,D=(x.d-B.y)/(A.y-B.y),0>D||1<D||(H=Math.round(B.x+(A.x-B.x)*D),A.y<B.y?H<x.R||H>x.T||Sa(y,{t:D,rh:0,Cf:K,Y:x,x:H,y:x.d}):A.y>B.y&&!(H<x.R||H>x.T)&&Sa(y,{t:D,rh:1,Cf:K,Y:x,x:H,y:x.d}))}};t.Ze();
for(m=new ff(new w(g.l,0,g.m),new w(g.w-g.l,0,g.C-g.m),0);(p=m.next())&&!(1<p.t);)if(p.node.bb)for(p=n(p.node.bb),r=p.next();!r.done;r=p.next())r=r.value,r.qa!=t.qa&&(r.qa=t.qa,l(r));l=null;for(m=1;m<y.length;m++)if(p=y[m-1],r=y[m],0==p.rh&&1==r.rh&&p.t<r.t){l=p;break}if(!l)return g.complete=1,Sa(Ti,c),!1;m=g.ca();m.action=1;m.max=m;m.yb=g.yb;m.Y=l.x==l.Y.T?l.Y:l.Y.pb;m.zb=[];p=c.slice();p[k]=m;p.sc=0;Sa(Vi,p)==p&&Sa(Ti,p);m=g.ca();m.action=2;m.max=m;m.yb=g.yb;m.Y=l.x==l.Y.R?l.Y.pb:l.Y;m.zb=[];c=
c.slice();c[k]=m;c.sc=0;Sa(Vi,c)==c&&Sa(Ti,c)}return!1}for(;Yi&&Ti.length;){Ui++;Yi--;var b=Ti.shift();if(a(b))return Ti=null,b}if(0==Ti.length)return Ti=null}
function $i(a,b,c,d){Vi=[];Vi.cmp=function(e,h){if(e.length<h.length)return-1;if(e.length>h.length)return 1;for(var g=0;g<e.length;g++){var k=e[g],l=h[g];if(k.m<l.m)return-1;if(k.m>l.m)return 1;if(k.l<l.l)return-1;if(k.l>l.l)return 1;if(k.C<l.C)return-1;if(k.C>l.C)return 1;if(k.w<l.w)return-1;if(k.w>l.w)return 1;if(k.action<l.action)return-1;if(k.action>l.action)return 1}return 0};a=(new E(a,b)).round();c=(new E(c,d)).round();a=aj(a);c=aj(c);Ui=0;Ti=[];Ti.cmp=function(e,h){return e.sc<h.sc?-1:1};
c=new Cc(a.x,a.y,c.x,c.y);c.Ua=c.length;c.action=0;c=[c];c.sc=0;Sa(Ti,c);return Zi()}
function aj(a){t.Ze();var b=null,c=NaN,d=[{n:Re,d:0}];d.cmp=function(k,l){return k.d<l.d?-1:1};for(var e;(e=d.shift())&&!(e.d>b);)if(e.n instanceof df){var h=a.x-e.n.value;Sa(d,{n:e.n.Ne,d:Math.max(0,-h)});Sa(d,{n:e.n.Me,d:Math.max(0,h)})}else if(e.n instanceof ef)h=a.y-e.n.value,Sa(d,{n:e.n.Ne,d:Math.max(0,-h)}),Sa(d,{n:e.n.Me,d:Math.max(0,h)});else if(e.n.Lj)for(e=n(e.n.Lj),h=e.next();!h.done;h=e.next())if(h=h.value,h.qa!=t.qa){h.qa=t.qa;var g=Oi(h,a.x,a.y);g>=c||(c=g,b=h)}return b?b.Wg(a.x,a.y):
a}function bj(){for(var a=n(Wi.Am),b=a.next();!b.done;b=a.next()){b=b.value;var c=b.width;b.pl&&(c-=15E4);var d=Math.floor(c/15E4-1);c=.5*(c-15E4*(d-1));for(var e=0;e<d;e++){var h=b.Y.Af(c+15E4*e,15E4);h=new w(h.y,0,h.x);var g=hf(h,new w(0,-1E8,0),eg);g&&(h.U=Ue(g.item.ba),h.U.Hb.Mb!=t.g.Mb&&(h.y=g.p.y+1E5,h.ratio=b.ratio,g=h.U.Hb.Mb.Dd,g.cmp=function(k,l){return k.ratio<l.ratio?-1:1},Sa(g,h)))}}};var hg,cj,dj,ej,fj=new Cc(0,0,1,0),gj=4095/741455.429632,hj=[];hj.cmp=function(a,b){return a.index-b.index};var ij=new ab(function(a,b){return a.Og<b.Og?-1:a.Og>b.Og?1:a.y<b.y?-1:a.y>b.y?1:a.ba<b.ba?-1:a.ba>b.ba?1:a.ha.name<b.ha.name?-1:a.ha.name>b.ha.name?1:Le(a.$,b.$)});function jj(a,b){return a.y>b.y?-1:a.y<b.y?1:0}function kj(a,b){a=Ue(a.src.ba).Il;b=Ue(b.src.ba).Il;return a-b}function ti(a,b,c,d,e){var h=new ig;h.Og=a;h.y=b;h.ba=c;h.ha=d;h.$=e;h.me=[];return ij.Ka(h)}var qi=0;
function lj(){if(0==qi){if(Uh>=Wh+2)var a=!1;else{var b=[li,ji];a=0>Uh?$h():b[Uh%b.length].call()}return a}if(1==qi){var c=hj.slice();t.Ze();for(var d=n(c),e=d.next();!e.done;e=d.next())e.value.qa=t.qa;var h=n(c);for(e=h.next();!e.done;e=h.next())for(var g=e.value,k=0;4>k;k++){var l=mj(g,k);l&&l.qa!=t.qa&&(l.qa=t.qa,Sa(hj,l))}hg=[];qi++;cj=0;return!0}if(2==qi){var m=hj[cj];if(m)return nj(m),cj++,!0;qi++;cj=0}if(3==qi){t.Ze();dj=t.qa;var p=hj[cj];if(p){for(var r=0;4>r;r++){var q=mj(p,r);if(q&&q.qa!=
dj){var v=p,z=q,y=[];switch(r){case 0:var x=$e(v.index);var B=x.x+512;for(var A=n(v.ga),D=A.next();!D.done;D=A.next()){var H=D.value;(H.m<=B||H.C<=B)&&y.push(H)}B=x.x-512;var K=n(z.ga);for(D=K.next();!D.done;D=K.next()){var R=D.value;(R.m>=B||R.C>=B)&&y.push(R)}break;case 1:x=$e(v.index);B=x.y+512;var sa=n(v.ga);for(D=sa.next();!D.done;D=sa.next()){var ta=D.value;(ta.l<=B||ta.w<=B)&&y.push(ta)}B=x.y-512;var ia=n(z.ga);for(D=ia.next();!D.done;D=ia.next()){var ja=D.value;(ja.l>=B||ja.w>=B)&&y.push(ja)}break;
case 2:x=$e(z.index);B=x.x+512;var Mb=n(z.ga);for(D=Mb.next();!D.done;D=Mb.next()){var qb=D.value;(qb.m<=B||qb.C<=B)&&y.push(qb)}B=x.x-512;var gc=n(v.ga);for(D=gc.next();!D.done;D=gc.next()){var Fc=D.value;(Fc.m>=B||Fc.C>=B)&&y.push(Fc)}break;case 3:x=$e(z.index);B=x.y+512;var Sb=n(z.ga);for(D=Sb.next();!D.done;D=Sb.next()){var Gc=D.value;(Gc.l<=B||Gc.w<=B)&&y.push(Gc)}B=x.y-512;var Ia=n(v.ga);for(D=Ia.next();!D.done;D=Ia.next()){var Ob=D.value;(Ob.l>=B||Ob.w>=B)&&y.push(Ob)}}Ri(y,!1)}}p.qa=dj;cj++;
return!0}qi++;cj=0}if(4==qi){var zf=hj[cj];if(zf)return zf.evaluate(),cj++,!0;qi++;cj=0}if(5==qi){var va=hj[cj];if(va){for(var Af=n(va.Al),Be=Af.next();!Be.done;Be=Af.next())Be.value.evaluate();cj++;return!0}qi++;cj=0}if(6==qi){var Bf=hj[cj];if(Bf)return oj(Bf),cj++,!0;qi++;cj=0}if(7==qi){var vc=hj[cj];if(vc)return pj(vc),cj++,!0;qi++;cj=0}if(8==qi)return gg(),qi++,!0;if(9==qi)return Re=cf(),qj.re=new ig,qj.re.$=new Xd,qj.re.$.name="creaseShading",qj.re.$.Ha=1,qj.re.$.je=new G(0,0,0,127.5),qj.re.A=
t.i.va.get("creaseShading"),rj=0,qj.cg=Array(Ve.elements.length),sj=0,qi++,!0;if(10==qi){if(tj())return!0;qi++;return!0}if(11==qi){if(ej&&0!=t.j%1)return!1;for(;Yf.length&&Yf[0].bg;)Yf.shift(),Zf++;Se.length=0;Te=Zf;for(var Cf=n(Yf),tb=Cf.next();!tb.done;tb=Cf.next()){var ae=tb.value;if(ae.na>Wh+1)break;Se.push(ae)}var Df=n(Se);for(tb=Df.next();!tb.done;tb=Df.next())for(var Ce=tb.value,be=0;be<Ce.Eb.length;be++)Ce.Eb[be].qd.ba>=Te||Ce.Eb.splice(be--,1);for(var ce=0;ce<ij.elements.length;ce++){var Ef=
ij.elements[ce];Ef.ba<Zf&&(ij.elements.splice(ce--,1),Ef.md.parent=null,Sd(Ef.md))}var De=n(Se);for(tb=De.next();!tb.done;tb=De.next()){var ub=tb.value;ub.na<=Vh||(ub.Ub.x/=ub.cd,ub.Ub.y/=ub.cd,ub.Ub.z/=ub.cd,ub.Ub.x/=255,ub.Ub.y/=255,ub.Ub.z/=255)}var Ub=n(Se);for(tb=Ub.next();!tb.done;tb=Ub.next()){var Ff=tb.value;if(!(Ff.na<=Vh))for(var Ed=n(Ff),md=Ed.next();!md.done;md=Ed.next())for(var Gf=n(md.value.xb),Pb=Gf.next();!Pb.done;Pb=Gf.next())Pb.value.create()}qf?pf=!0:tf();Vh=Wh+1;for(var Hf=n(t.Sj.elements),
Ee=Hf.next();!Ee.done;Ee=Hf.next())uj(Ee.value);for(var If=n(ij.elements),Jf=If.next();!Jf.done;Jf=If.next()){var Za=Jf.value;if(!Za.md){var Db=Ue(Za.ba);if(Db&&!(Db.na>Vh)){var Zc=Za;Zc.Vb.cmp=kd;for(var Vb=n(Zc.me),hb=Vb.next();!hb.done;hb=Vb.next())for(var Kc=hb.value,de=0;de<Kc.length;de++)Kc[de]=Sa(Zc.Vb,Kc[de]);for(var wc=0;wc<Zc.Vb.length;wc++)Zc.Vb[wc].index=wc;var Kf=n(Zc.me);for(hb=Kf.next();!hb.done;hb=Kf.next())for(var Fd=hb.value,ic=0;ic<Fd.length;ic++)Fd[ic]=Fd[ic].index;delete Zc.Vb.cmp;
Za.compile();delete Za.me;Za.md=new kg(Za,"worldMesh");isNaN(Za.facing)||(Za.md.facing=Za.facing);Za.md.ia=Db.ia;Za.md.mi=!0;Za.md.Fa=["portalLightIndex",Db.$e,!0,"numPortals",Db.Eb.length,!0];Za.Og?(Za.md.y=Za.y,M(Za.md,t.Kf)):M(Za.md,t.yl);delete Za.Og;delete Za.y}}}qi++;return!0}if(12==qi){for(var xc=n(Ve.elements),vb=xc.next();!vb.done;vb=xc.next()){var Fe=vb.value;Fe.bb=[];Fe.Lj=[]}for(var za=[],Lf=n(Se),Lc=Lf.next();!Lc.done;Lc=Lf.next())for(var Mf=n(Lc.value),yc=Mf.next();!yc.done;yc=Mf.next())za=
za.concat(yc.value);var Nf=[],Gd=[],Of=[],ee=[],$c=n(Se);for(Lc=$c.next();!Lc.done;Lc=$c.next()){var Pf=n(Lc.value);for(yc=Pf.next();!yc.done;yc=Pf.next())for(var Hd=n(yc.value.xb),Wb=Hd.next();!Wb.done;Wb=Hd.next()){var Id=Wb.value;if(Id instanceof Gi){if(!Ue(Id.ua.U.index))continue}else{if(!Ue(Id.ua.U.index))continue;if(!Ue(Id.Ya.U.index))continue}ee.push(Id)}}var Kg=n(ee);for(Wb=Kg.next();!Wb.done;Wb=Kg.next()){var ma=Wb.value;if(ma instanceof Di){if(!ma.nd){var Ra=new Hh(-40675,40675,-ma.a+40675,
ma.a-40675);ma.bb=[];var Ca=new Pi(Ra.D,Ra.s,Ra.u);Ca=Ca.rotate(ma.direction);Ca=Ca.translate(ma.z,ma.x);Ca.source=Ra;ma.bb.push(Ca);Ca=new Ai(Ra.s,Ra.D,Ra.H);Ca=Ca.rotate(ma.direction);Ca=Ca.translate(ma.z,ma.x);Ca.source=Ra;ma.bb.push(Ca);Ca=new Bi(Ra.H,Ra.u,Ra.s);Ca=Ca.rotate(ma.direction);Ca=Ca.translate(ma.z,ma.x);Ca.source=Ra;ma.bb.push(Ca);Ca=new Qi(Ra.u,Ra.H,Ra.D);Ca=Ca.rotate(ma.direction);Ca=Ca.translate(ma.z,ma.x);Ca.source=Ra;ma.bb.push(Ca);Ra=Ra.rotate(ma.direction);Ra=Ra.translate(ma.z,
ma.x);Ra.vj=ma;Gd.push(Ra)}}else if(ma instanceof Ei){var Qb=new Hh(-40675,40675,-ma.a-9375+40675,ma.a+9375-40675);Qb=Qb.rotate(ma.direction);Qb=Qb.translate(ma.z,ma.x);Of.push(Qb)}else if(ma instanceof Gi){var Mc=new Hh(-ma.Qb+40675,ma.Qb-40675,-ma.qe-40675,ma.qe+40675);Mc=Mc.translate(ma.Ta.D,ma.Ta.s);Mc=Mc.rotate(ma.direction);Nf.push(Mc);var Jd=new Hh(-ma.Qb,ma.Qb,-ma.qe,ma.qe);Jd=Jd.translate(ma.Ta.D,ma.Ta.s);Jd=Jd.rotate(ma.direction);za=Fh(za,[Jd])}}for(var Qf=[],Ge=0;Ge<za.length;Ge++)for(var He=
za[Ge],Ie=Ge+1;Ie<za.length;Ie++){var Kd=za[Ie];if(He.platform.U!=Kd.platform.U||25E3<Math.abs(Kd.platform.y-He.platform.y)){var Rf=Hi(He,Kd);Rf&&Qf.push(Rf)}}za=Jh(za,1);za=za.concat(Qf);za=Ch(za,40675,40675);za=Jh(za);za=Kh(za);za=za.concat(Nf);za=za.concat(Of);for(var zc=[],Sf=n(za),Eb=Sf.next();!Eb.done;Eb=Sf.next())Nh(Eb.value,zc);var Ld=n(Gd);for(Eb=Ld.next();!Eb.done;Eb=Ld.next()){var Tf=Eb.value;zc.push(Tf.vj.bb[1],Tf.vj.bb[3])}za=za.concat(Gd);Fh(zc,za);for(var Xb=Sh(Ph(zc)),Uf=0,Md=n(Xb),
nd=Md.next();!nd.done;nd=Md.next())for(var fe=nd.value,Je=fe[fe.length-1],Vf=n(fe),jc=Vf.next();!jc.done;jc=Vf.next()){var ad=jc.value;ad.index=Uf++;Je.next=ad;ad.pb=Je;Je=ad}var Wf=[],Xf=n(Xb);for(nd=Xf.next();!nd.done;nd=Xf.next()){var od=nd.value;if(!(3>od.length))for(var ge=od[od.length-2],Yb=od[od.length-1],Zb,Ke=0;Ke<od.length;Ke++,ge=Yb,Yb=Zb)if(Zb=od[Ke],(ge.sb()+1)%4==Yb.sb()&&(Yb.sb()+1)%4==Zb.sb()){var bd=Math.min(ge.T-ge.R,Zb.T-Zb.R);if(!(1E5>bd)){var C=Yb.T-Yb.R,I=C/bd;if(!(2<=I)){var L=
{};L.Y=Yb;L.width=C;L.depth=bd;L.ratio=I;Wf.push(L);Yb.Nj=L;Yb.pb.Nj&&(Yb.pb.Nj.pl=!0);Yb.next.Nj&&(L.pl=!0)}}}}for(var F=[],O=n(Xb),Q=O.next();!Q.done;Q=O.next())F=F.concat(Q.value);Xb=F;Xb.sl=za;Xb.Am=Wf;var na=n(Gd);for(Eb=na.next();!Eb.done;Eb=na.next()){var Y=Eb.value.vj;Y.Ed=[Y.bb[1].pb,Y.bb[1].next,Y.bb[3].pb,Y.bb[3].next];Y.bb[0].pb=Y.Ed[0];Y.bb[0].next=Y.Ed[3];Y.bb[2].pb=Y.Ed[2];Y.bb[2].next=Y.Ed[1];Xb.push(Y.bb[0]);Xb.push(Y.bb[2]);var W=Y;W.Ed[0]&&W.Ed[1]&&W.Ed[2]&&W.Ed[3]&&(W.Ed[0].next=
W.bb[1],W.Ed[1].pb=W.bb[1],W.Ed[2].next=W.bb[3],W.Ed[3].pb=W.bb[3],W.bb[0].disabled=!0,W.bb[1].disabled=!1,W.bb[2].disabled=!0,W.bb[3].disabled=!1,W.bb[0].y=-5E4,W.bb[1].y=0,W.bb[2].y=-5E4,W.bb[3].y=0)}for(var Ea=n(Xb),S=Ea.next();!S.done;S=Ea.next()){var T=S.value,Fa=T.fh(),pa=[];of(Fa.D,Fa.s,Fa.H,Fa.u,pa);var Oa=n(pa);for(vb=Oa.next();!vb.done;vb=Oa.next())vb.value.bb.push(T)}for(var ca=n(Xb.sl),Ma=ca.next();!Ma.done;Ma=ca.next()){var Aa=Ma.value,$b=[];of(Aa.D,Aa.s,Aa.H,Aa.u,$b);var Aj=n($b);for(vb=
Aj.next();!vb.done;vb=Aj.next())vb.value.Lj.push(Aa)}Wi=Xb;qi++;return!0}13==qi&&(t.g.Dd=bj(),qi=0);return!1}function vj(a,b){var c=new ab(sd);a=n(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var e=new ab(Yc);e.x=d.m;e.y=d.l;e=c.Ka(e);e.add(d);b&&(d=Xc(d),e=new ab(Yc),e.x=d.m,e.y=d.l,e=c.Ka(e),e.add(d))}return c}
function wj(a){var b=[];b.bound=new Rc;var c=0,d=a.elements[c],e=d.elements.pop();d.elements.length||a.elements.splice(c,1);if(!e)return null;for(;;){b.push(e);b.bound.Ka(e.C,e.w);if(e.C==b[0].m&&e.w==b[0].l)return b;c=a.contains(new E(e.C,e.w));if(0>c)return null;d=a.elements[c];e=bb(d,Wc(e))-1;0>e&&(e+=d.elements.length);e=d.elements.splice(e,1)[0];d.elements.length||a.elements.splice(c,1)}}
function xj(a){for(var b=[],c=a[a.length-1],d=0;d<a.length;d++){var e=a[d];b.push(Ec(c,e));c=e}a.jj=b;a.Yg=[];a.gk=0;b=n(a.jj);for(c=b.next();!c.done;c=b.next())c=c.value,0>c?(a.gk-=c,a.Yg.push(-c)):a.Yg.push(0)}
function yj(a,b){var c=null;b=n(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,!(a.bound.s<=d.bound.s||a.bound.o<=d.bound.o||a.bound.u>=d.bound.u||a.bound.v>=d.bound.v)){if(c){if(d.bound.s<=c.bound.s)continue;if(d.bound.o<=c.bound.o)continue;if(d.bound.u>=c.bound.u)continue;if(d.bound.v>=c.bound.v)continue}0>=Oc(a[0].C,a[0].w,d)||(c=d)}c&&c.tb.push(a)}
function zj(a){if(0==a.tb.length)return a;var b=[a].concat(a.tb),c={};c.sc=Number.NEGATIVE_INFINITY;for(var d=0;d<b.length;d++)for(var e=b[d],h=d+1;h<b.length;h++)for(var g=b[h],k=0;k<e.length;k++)for(var l=(k+1)%e.length,m=0;m<g.length;m++)c=Bj(e,k,l,g,m,(m+1)%g.length,c,b);if(0>c.sc)return console.log("could not solve holes"),a.tb=[],a;e=c.Vd[c.ra].ib(c.Vd[c.ra].m,c.Vd[c.ra].l,c.te[c.d].m,c.te[c.d].l);d=e.ib(e.C,e.w,e.m,e.l);e.da=d;d.da=e;b=[];for(h=0;h<c.ra;h++)b.push(c.Vd[h]);b.push(e);e=c.d;
for(h=0;h<c.te.length;h++)b.push(c.te[e]),++e==c.te.length&&(e=0);b.push(d);for(d=c.ra;d<c.Vd.length;d++)b.push(c.Vd[d]);if(c.Vd==a)return a.tb.splice(a.tb.indexOf(c.te),1),b.tb=a.tb,xj(b),zj(b);a.tb.splice(a.tb.indexOf(c.Vd),1,b);a.tb.splice(a.tb.indexOf(c.te),1);xj(b);return zj(a)}
function Bj(a,b,c,d,e,h,g,k){function l(q,v){function z(D,H,K){if(H==D.m&&K==D.l||H==D.C&&K==D.w)return!1;H=D.Af(H,K);return 0>=H.x||H.x>=D.length||-256>H.y||256<H.y?!1:!0}var y=Hc(v,q.m,q.l),x=Hc(v,q.C,q.w),B=Hc(q,v.m,v.l),A=Hc(q,v.C,v.w);if(-256>B&&256<A&&(-256>y&&256<x||256<y&&-256>x)||256<B&&-256>A&&(-256>y&&256<x||256<y&&-256>x)||z(q,v.m,v.l)||z(q,v.C,v.w)||z(v,q.m,q.l)||z(v,q.C,q.w))return!0}var m=a[c],p=d[h];m=new Cc(m.m,m.l,p.m,p.l);if(0==a.Yg[c]){if(0>=Hc(a[b],m.C,m.w)||0>=Hc(a[c],m.C,m.w))return g}else if(0>=
Hc(a[b],m.C,m.w)&&0>=Hc(a[c],m.C,m.w))return g;if(0==d.Yg[h]){if(0>=Hc(d[e],m.m,m.l)||0>=Hc(d[h],m.m,m.l))return g}else if(0>=Hc(d[e],m.m,m.l)&&0>=Hc(d[h],m.m,m.l))return g;if(k)for(k=n(k),p=k.next();!p.done;p=k.next()){var r=n(p.value);for(p=r.next();!p.done;p=r.next())if(l(m,p.value))return g}else for(k=n(a),p=k.next();!p.done;p=k.next())if(l(m,p.value))return g;k={};k.Vd=a;k.Qa=b;k.ra=c;k.te=d;k.rh=e;k.d=h;k.Y=m;Cj(k);return k.sc>g.sc?k:g}
function Cj(a){a.sc=4095-a.Y.length*gj;var b=Ec(a.Vd[a.Qa],a.Y),c=b-a.Vd.jj[a.ra],d=Ec(a.Y,a.te[a.d]),e=d-a.te.jj[a.d];a.sc+=.5/Math.PI*(a.Vd.Yg[a.ra]-(0>b?-b:0)-(0>c?-c:0)+(a.te.Yg[a.d]-(0>d?-d:0)-(0>e?-e:0)))*1048575}
function Dj(a){if(3>a.length)return[];xj(a);if(0>=a.gk)return[a];for(var b={sc:Number.NEGATIVE_INFINITY},c=a.length-1,d=0;d<a.length;d++){for(var e=d+1,h=e+1;h<a.length;h++)b=Bj(a,c,d,a,e,h,b),e=h;c=d}if(0>b.sc)return[a];h=new Ej(a[b.ra].m,a[b.ra].l,a[b.d].m,a[b.d].l);c=new Ej(a[b.d].m,a[b.d].l,a[b.ra].m,a[b.ra].l);h.da=c;c.da=h;d=[];e=[];for(var g=0;g<b.ra;g++)d.push(a[g]);d.push(h);for(h=b.d;h<a.length;h++)d.push(a[h]);for(h=b.ra;h<b.d;h++)e.push(a[h]);e.push(c);return Dj(d).concat(Dj(e))}
function Fj(a){this.ga=null;this.o=Number.POSITIVE_INFINITY;this.v=Number.NEGATIVE_INFINITY;this.sa=this.floor=null;this.ea=a}Fj.prototype.Kg=function(a,b){if(this.v<=a.o||this.o>=a.v)b.push(this);else{if(this.o<a.o){var c=new Fj(this.ea);c.o=this.o;c.v=a.o;c.floor=this.floor;c.sa=a.sa;b.push(c)}this.v>a.v&&(c=new Fj(this.ea),c.o=a.v,c.v=this.v,c.floor=a.floor,c.sa=this.sa,b.push(c))}};function Hg(a,b,c){this.W=a;this.o=b;this.v=c;this.flags=0}function Ig(a,b){this.ga=a;this.y=b;this.flags=0}
function Jg(a,b){this.ga=a;this.y=b;this.flags=0}Ig.prototype.Eh=function(){if(this.da)return this.da;this.da=new Jg(this.ga,this.y);this.da.flags=this.flags;return this.da};Jg.prototype.Eh=function(){if(this.da)return this.da;this.da=new Ig(this.ga,this.y);this.da.flags=this.flags;return this.da};Hg.prototype.Eh=function(){if(this.da)return this.da;this.da=new Hg(Xc(this.W),this.o,this.v);this.da.flags=this.flags;return this.da};function Ze(a){this.index=a;this.hi=this.qa=-2147483648;this.Hl=new db(this);this.sd=new ab(kb);this.zd=[];this.Qi=new cb}function mj(a,b){a=af(a.index);switch(b){case 0:if(0==a.x)break;return Ve.get(bf(a.x-1,a.y));case 1:if(0==a.y)break;return Ve.get(bf(a.x,a.y-1));case 2:if(8191==a.x)break;return Ve.get(bf(a.x+1,a.y));case 3:if(8191!=a.y)return Ve.get(bf(a.x,a.y+1))}return null}
function nj(a){function b(g,k){return g.ea.index<k.ea.index?-1:g.ea.index>k.ea.index?1:0}a.Al=[];a.ga=[];for(var c=n(a.sd.elements),d=c.next();!d.done;d=c.next()){d=n(d.value.ga);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=e.ca();Xc(h);e.ai&&(h.jc=[e]);h.se=[a.ga];a.ga.push(h)}}Ri(a.ga.slice(),!0);a=n(a.ga);for(e=a.next();!e.done;e=a.next())c=e.value,c.jc&&yb(c.jc,b),c.da.jc&&yb(c.da.jc,b)}
Ze.prototype.evaluate=function(){this.Tj=[];this.Uj=[];for(var a=vj(this.ga,!0),b=[],c=[];a.elements.length;){var d=wj(a);d&&(Nc(d)?c.push(d):(d.tb=[],b.push(d)))}a=n(c);for(c=a.next();!c.done;c=a.next())yj(c.value,b);a=[];b=n(b);for(c=b.next();!c.done;c=b.next())if(d=c.value,0==d.tb.length)a.push(d);else{xj(d);var e=n(d.tb);for(c=e.next();!c.done;c=e.next())xj(c.value);a.push(zj(d))}b=[];a=n(a);for(c=a.next();!c.done;c=a.next())b=b.concat(Dj(c.value));a=n(b);for(c=a.next();!c.done;c=a.next())this.Al.push(new Gj(c.value,
this))};
function oj(a){function b(z,y){return z.Kd<y.Kd?-1:z.Kd>y.Kd?1:z.ea.ba<y.ea.ba?-1:z.ea.ba>y.ea.ba?1:Hj(z.Z,y.Z)}function c(z,y){var x=kc(1/60);var B=-1;for(var A=1;A<z.length;A++){var D=Math.abs(Ec(z[A-1].W,z[A].W));D<x&&(x=D,B=A)}if(0>B)y.push.apply(y,ba(z));else{x=z[B-1];A=z[B];D=x.W.ib(x.W.m,x.W.l,A.W.C,A.W.w);var H=Xc(D);x.ud&&(0>x.ud.Kd?x.ud.splice(x.ud.indexOf(x.W),2,D):x.ud.splice(x.ud.indexOf(A.W.da),2,H));x.pd&&(0<x.pd.Kd?x.pd.splice(x.pd.indexOf(x.W),2,D):x.pd.splice(x.pd.indexOf(A.W.da),2,
H));x.W=D;z.splice(B,1);c(z,y)}}function d(z){var y=kc(1/60);var x=-1;for(var B=1;B<z.length;B++){var A=Math.abs(Ec(z[B-1],z[B]));A<y&&(y=A,x=B)}if(!(0>x)){y=z[x-1];B=z[x];A=y.ib(y.m,y.l,B.C,B.w);var D=Xc(A);A.jd=y.jd;y.jd.splice(y.jd.indexOf(y),2,A);B.da&&(D.jd=B.da.jd,B.da.jd.splice(B.da.jd.indexOf(B.da),2,D));z.splice(x-1,2,A);d(z)}}for(var e=0,h=new ab(function(z,y){return z.y<y.y?-1:z.y>y.y?1:0}),g=n(a.Tj),k=g.next();!k.done;k=g.next()){var l=k.value,m=new ab(b);m.y=l.y;m=h.Ka(m);k=[];k.Kd=l.Kd;
k.ea=l.ea;k.Z=l.Z;k=m.Ka(k);k.push(l)}g=n(h.elements);for(l=g.next();!l.done;l=g.next()){l=l.value;m=n(l.elements);for(k=m.next();!k.done;k=m.next()){var p=k.value,r=new ab(Dc),q=n(p);for(k=q.next();!k.done;k=q.next()){var v=n(k.value);for(k=v.next();!k.done;k=v.next())k=k.value,r.remove(Wc(k))||r.push(k)}p.length=0;for(r=vj(r.elements);r.elements.length;){q=wj(r);if(!q)break;q.y=l.y;q.Kd=p.Kd;q.ea=p.ea;q.Z=p.Z;q.index=e++;v=n(q);for(k=v.next();!k.done;k=v.next())k.value.jd=q;p.push(q)}}l.wj=new ab(Dc);
m=n(l.elements);for(k=m.next();!k.done;k=m.next())for(p=n(k.value),k=p.next();!k.done;k=p.next())for(r=n(k.value),k=r.next();!k.done;k=r.next())k=k.value,(q=l.wj.remove(Wc(k)))?(k.da=q,q.da=k):l.wj.push(k)}e=n(a.Uj);for(g=e.next();!g.done;g=e.next())g=g.value,l=function(z,y){y=h.get({y:y});if(!y)return null;y=y.wj.remove(z);if(!y)return null;y.jd.splice(y.jd.indexOf(y),1,z);return y.jd},m=g.W,k=Xc(m),g.pd=l(m,g.o)||l(k,g.o),g.ud=l(m,g.v)||l(k,g.v);g=function(z){var y=[],x=new ab(function(H,K){H=H[0];
K=K[0];if(H.o<K.o)return-1;if(H.o>K.o)return 1;if(H.v<K.v)return-1;if(H.v>K.v)return 1;if(H.pd)if(K.pd){if(H.pd.index<K.pd.index)return-1;if(H.pd.index>K.pd.index)return 1}else return 1;else if(K.pd)return-1;if(H.ud)if(K.ud){if(H.ud.index<K.ud.index)return-1;if(H.ud.index>K.ud.index)return 1}else return 1;else if(K.ud)return-1;if(H.length<K.length)return-1;if(H.length>K.length)return 1;for(var R=0;R<H.length;R++){var sa=H[R],ta=K[R];if(sa.o<ta.o)return-1;if(sa.o>ta.o)return 1;if(sa.v<ta.v)return-1;
if(sa.v>ta.v)return 1;sa=Hj(sa.Z,ta.Z);if(0!=sa)return sa}return 0});z=n(z);for(var B=z.next();!B.done;B=z.next()){B=B.value;var A=[B],D=x.Ka(A);D!=A&&D.push(B)}z={};x=n(x.elements);for(B=x.next();!B.done;z={sf:z.sf},B=x.next())for(z.sf=B.value,B={};z.sf.length;)B.ih=function(H,K){return function(R,sa,ta){for(var ia=0;ia<H.sf.length;ia++){var ja=H.sf[ia];if(ja.W.m==ta.C&&ja.W.l==ta.w)return H.sf.splice(ia,1),R.push(ja),ja.W.Gd=R,ja.W.da.Gd=R,K.ih(R,sa,ja.W);if(ja.W.C==sa.m&&ja.W.w==sa.l)return H.sf.splice(ia,
1),R.unshift(ja),ja.W.Gd=R,ja.W.da.Gd=R,K.ih(R,ja.W,ta)}return R}}(z,B),A=z.sf.shift(),D=[A],A.W.Gd=D,A.W.da.Gd=D,y.push(B.ih(D,A.W,A.W)),B={ih:B.ih};return y}(a.Uj);e=function(){for(var z=[],y=n(h.elements),x=y.next();!x.done;x=y.next()){x=n(x.value.elements);for(var B=x.next();!B.done;B=x.next()){B=n(B.value);for(var A=B.next();!A.done;A=B.next()){A=A.value;for(var D=function(ia,ja){return ia.Gd||ja.Gd?!1:ia.da?ja.da?ia.da.jd==ja.da.jd:!1:ja.da?!1:!0},H=0,K=A[A.length-1],R=A[0];H<A.length&&(R=A[H],
D(K,R));H++,K=R);if(H==A.length){D=[];K=n(A);for(A=K.next();!A.done;A=K.next())A=A.value,A.Gd=D,A.da&&(A.da.Gd=D),D.push(A);z.push(D)}else{A.unshift.apply(A,ba(A.splice(H)));H=[];var sa=null;K=A[0];H.push(sa=[]);sa.push(K);for(var ta=1;ta<A.length;ta++,K=R)R=A[ta],D(K,R)||H.push(sa=[]),sa.push(R);D=n(H);for(A=D.next();!A.done;A=D.next())if(K=A.value,!K[0].Gd){R=n(K);for(A=R.next();!A.done;A=R.next())A=A.value,A.Gd=K,A.da&&(A.da.Gd=K);z.push(K)}}}}}return z}();a.rl=[];l=n(g);for(g=l.next();!g.done;g=
l.next())c(g.value,a.rl);a.ql=[];e=n(e);for(g=e.next();!g.done;g=e.next())d(g.value);e=n(h.elements);for(l=e.next();!l.done;l=e.next())for(g=n(l.value.elements),k=g.next();!k.done;k=g.next())for(l=n(k.value),k=l.next();!k.done;k=l.next())m=k.value,m.tl=Dj(m),a.ql.push(m)}
function pj(a){function b(r,q,v){var z=[],y=new Ig(q,r.y);y.flags|=Ij;y.ba=r.ea.ba;h.push(y);if((y=Yf[v.ba-Zf])&&!(y.na<=Vh||y.na>Wh+1)){for(y=0;y<q.length;y++){var x=new jd(q[y].l,r.y,q[y].m);pd(x,r.Z.color);qd(x,x.z/4E5,x.x/4E5);x.Sc=32767;z.push(x)}v.me.push(z);hg.push(z);e(Yf[r.ea.ba-Zf],z,r.Z)}}function c(r,q,v){var z=[],y=new Jg(q,r.y);y.flags|=Ij;y.ba=r.ea.ba;h.push(y);if((y=Yf[v.ba-Zf])&&!(y.na<=Vh||y.na>Wh+1)){for(y=q.length-1;0<=y;y--){var x=new jd(q[y].w,r.y,q[y].C);pd(x,r.Z.color);qd(x,
-x.z/4E5,x.x/4E5);x.Sc=-32767;z.push(x)}v.me.push(z);hg.push(z);e(Yf[r.ea.ba-Zf],z,r.Z)}}function d(r,q,v){var z=ti(!1,Infinity,r.ea.ba,q.Z.ha,q.Z.$),y=Yf[z.ba-Zf];if(y&&!(y.na<=Vh||y.na>Wh+1)){y=[];var x=r.W.m/4E5+r.W.l/4E5,B=r.W.C/4E5+r.W.w/4E5;var A=new jd(r.W.w,q.o,r.W.C);pd(A,q.Z.color);qd(A,B,-A.y/4E5);A.Cb=v.x;A.wc=v.y;y.push(A);A=new jd(r.W.l,q.o,r.W.m);pd(A,q.Z.color);qd(A,x,-A.y/4E5);A.Cb=v.x;A.wc=v.y;y.push(A);A=new jd(r.W.l,q.v,r.W.m);pd(A,q.Z.color);qd(A,x,-A.y/4E5);A.Cb=v.x;A.wc=v.y;
y.push(A);A=new jd(r.W.w,q.v,r.W.C);pd(A,q.Z.color);qd(A,B,-A.y/4E5);A.Cb=v.x;A.wc=v.y;y.push(A);z.me.push(y);hg.push(y);e(Yf[r.ea.ba-Zf],y,q.Z)}}function e(r,q,v){var z=0,y=q[0],x=td(q[1],y,new w);x.scale(1E-5);for(var B=2;B<q.length;B++){var A=td(q[B],y,new w);A.scale(1E-5);z+=qc(x,A,new w).length();x=A}q=.5*z;z=v.ha;v=v.color;y=(z.he.r-z.he.kb)/255;v=new G(v.r*y+z.he.kb,v.kb*y+z.he.kb,v.ra*y+z.he.kb,z.he.Qa);r.Ub.x+=v.r*q;r.Ub.y+=v.kb*q;r.Ub.z+=v.ra*q;r.cd+=q}a.wa=[];for(var h=a.wa,g=n(a.ql),k=
g.next();!k.done;k=g.next())if(k=k.value,0<k.Kd){for(var l=ti(!0,k.y,k.ea.ba,k.Z.ha,k.Z.$),m=n(k.tl),p=m.next();!p.done;p=m.next())b(k,p.value,l);(k=Yf[k.ea.ba-Zf])&&(k.na>Wh+1||k.cells.push(a))}else if(k.Z)for(l=ti(!1,k.y,k.ea.ba,k.Z.ha,k.Z.$),m=n(k.tl),p=m.next();!p.done;p=m.next())c(k,p.value,l);a=n(a.rl);for(k=a.next();!k.done;k=a.next())for(g=k.value,k=new Hg(g.W,g.o,g.v),k.flags|=Ij,k.ba=g[0].ea.ba,h.push(k),k=new E(g.W.l-g.W.w,g.W.C-g.W.m),k.pa(32767),p=n(g),l=p.next();!l.done;l=p.next())d(g,
l.value,k)}
function Gj(a,b){this.index=Jj++;this.ga=a;this.Yf=b;a=new ab(Kj);for(var c=new E(0,0),d=1/this.ga.length,e=n(this.ga),h=e.next();!h.done;h=e.next())h=h.value,h.$g=this,c.x+=h.C*d,c.y+=h.w*d;b=n(b.sd.elements);for(d=b.next();!d.done;d=b.next())d=d.value,0>=Oc(c.x,c.y,d.ga)||a.add(d);this.sd=a.elements;Lj(this);this.nl=[];a=Number.NEGATIVE_INFINITY;c=n(this.af);for(b=c.next();!b.done;b=c.next())if(b=b.value,b.ea.add){if(b.o>a){var g=new Fj(b.ea);g.o=b.o;g.v=b.v;g.floor=b.floor;g.sa=b.sa;g.ga=this.ga;
this.nl.push(g)}else g.v=b.v,g.sa=b.sa;a=g.v}}var Jj=-2147483648;
function Lj(a){var b=new Fj;b.o=-2147483648;b.v=2147483647;b.ea={};a.af=[b];b=n(a.sd);for(var c=b.next();!c.done;c=b.next()){c=c.value;var d=new Fj(c.ea);d.o=c.ea.o;d.v=c.ea.v;d.floor=c.ea.floor;d.sa=c.ea.sa;c=[d];d=n(a.af);for(var e=d.next();!e.done;e=d.next()){e=e.value;var h=[];c=n(c);for(var g=c.next();!g.done;g=c.next())g=g.value,g.ea.Lh(e.ea)?h.push(g):g.Kg(e,h);c=h}d=n(c);for(g=d.next();!g.done;g=d.next()){h=g.value;g=[];var k=n(a.af);for(e=k.next();!e.done;e=k.next())e.value.Kg(h,g);a.af=
g}a.af.push.apply(a.af,ba(c))}yb(a.af,function(l,m){return l.o<m.o?-1:l.o>m.o?1:0})}
Gj.prototype.evaluate=function(){for(var a=n(this.nl),b=a.next();!b.done;b=a.next()){b=b.value;if(b.floor){for(var c=[],d=n(this.ga),e=d.next();!e.done;e=d.next())e=e.value,e=e.ca(),c.push(e);c.y=b.o;c.Z=b.floor;c.Kd=1;c.ea=b.ea;this.Yf.Tj.push(c)}if(b.sa){c=[];d=n(this.ga);for(e=d.next();!e.done;e=d.next())e=e.value,e=e.ca(),c.push(e);c.y=b.v;c.Z=b.sa;c.Kd=-1;c.ea=b.ea;this.Yf.Tj.push(c)}}a=[];b=[];e=n(this.af);for(d=e.next();!d.done;d=e.next())c=d.value,(c.ea.add?a:b).push(c);b=n(this.ga);for(e=
b.next();!e.done;e=b.next()){e=e.value;var h=function(q,v){var z=[];q=n(q);for(var y=q.next();!y.done;y=q.next()){var x=y.value,B=n(v);for(y=B.next();!y.done;y=B.next()){var A=y.value,D=[];x.Ka(A.o,A.v,D);var H=n(D);for(y=H.next();!y.done;y=H.next())y.value.ea=A.ea;z.push.apply(z,ba(D))}}return z},g=function(q,v){v=n(v);for(var z=v.next();!z.done;z=v.next()){z=z.value;var y=[];q=n(q);for(var x=q.next();!x.done;x=q.next())x.value.Kg(z.o,z.v,y);q=y}return q};c=function(q){for(var v=q[0],z=1;z<q.length;z++)if(Hj(v.Z,
q[z].Z))v=q[z];else{var y=v.ca(v.o,q[z].v);q.splice(--z,2,y)}};d=function(q,v,z){var y=[];if(!q.jc)return y;v=n(v);for(var x=v.next();!x.done;x=v.next()){x=x.value;var B=q.jc;var A=x,D=Kj,H=xb(B,A,D);(B=H==B.length||0!=D.call(null,A,B[H])?null:B[H])&&B.ea.add==z&&y.push(new oh(x.ea.o,x.ea.v,B))}return y};var k=d(e,this.sd,!0),l=[],m=[],p=[];if(e.da.$g){l=d(e.da,e.da.$g.sd,!1);var r=n(e.da.$g.af);for(d=r.next();!d.done;d=r.next())d=d.value,(d.ea.add?m:p).push(d)}k=g(k,m);l=g(l,m);k=h(k,a);l=h(l,a);
h=function(q){yb(q,function(D,H){return D.yg.ea.index-H.yg.ea.index});var v=[];q=n(q);for(var z=q.next();!z.done;z=q.next()){z=[z.value];for(var y=n(v),x=y.next();!x.done;x=y.next()){x=x.value;var B=[];z=n(z);for(var A=z.next();!A.done;A=z.next())A=A.value,A.yg.ea.Lh(x.yg.ea)?B.push(A):A.Kg(x.o,x.v,B);z=B}y=n(z);for(A=y.next();!A.done;A=y.next()){B=A.value;A=[];v=n(v);for(x=v.next();!x.done;x=v.next())x.value.Kg(B.o,B.v,A);v=A}v.push.apply(v,ba(z))}return v}(l.concat(k));if(h.length){d=[];g=n(h);
for(h=g.next();!h.done;h=g.next())if(k=h.value,k.yg.ai){l=[];m=n(k.yg.ai);for(h=m.next();!h.done;h=m.next())h.value.Ka(k.o,k.v,l);m=n(l);for(h=m.next();!h.done;h=m.next())h.value.ea=k.ea;d.push.apply(d,ba(l))}yb(d,function(q,v){return q.o<v.o?-1:q.o>v.o?1:0});g=void 0;k=Number.NEGATIVE_INFINITY;d=n(d);for(h=d.next();!h.done;h=d.next())h=h.value,h.o>k?(g&&c(g),g=[h],g.W=e.ca(),g.ea=h.ea,g.o=h.o,g.v=h.v,this.Yf.Uj.push(g)):(g.push(h),g.v=h.v),k=h.v;g&&c(g)}}};
function Ej(a,b,c,d){Cc.call(this,a,b,c,d);this.index=Ej.index++;this.da=null}Ej.index=-2147483648;Ej.prototype=Object.create(Cc.prototype);Ej.prototype.constructor=Ej;Ej.prototype.ib=function(a,b,c,d){return new Ej(a,b,c,d)};
Ej.prototype.replace=function(a){Cc.prototype.replace.call(this,a);if(this.$g)for(var b=0;b<a.length;b++)a[b].$g=this.$g;if(this.jc)for(a=n(a),b=a.next();!b.done;b=a.next())if(b=b.value,b.jc)for(var c=n(this.jc),d=c.next();!d.done;d=c.next())d=d.value,0<=b.jc.indexOf(d)||b.jc.push(d);else b.jc=this.jc.slice()};function oh(a,b,c){this.Z=new Mj;this.o=a;this.v=b;this.yg=c;this.ea=null}oh.prototype.ca=function(a,b){a=new oh(a,b,this.yg);a.Z=this.Z;a.ea=this.ea;return a};
oh.prototype.Kg=function(a,b,c){this.v<=a||this.o>=b?c.push(this):(this.o<a&&c.push(this.ca(this.o,a)),this.v>b&&c.push(this.ca(b,this.v)))};oh.prototype.Ka=function(a,b,c){this.v<=a||this.o>=b||(this.v<=b&&this.o>=a?c.push(this):(b=b<this.v?b:this.v,a=a>this.o?a:this.o,c.push(this.ca(a,b))))};function Mj(){this.ha=t.i.P.get("concr01");this.$=ih;this.color=gd;this.y=this.x=0}
function Hj(a,b){if(a.ha.name<b.ha.name)return-1;if(a.ha.name>b.ha.name)return 1;var c=Le(a.$,b.$);return 0!=c?c:a.color.r<b.color.r?-1:a.color.r>b.color.r?1:a.color.kb<b.color.kb?-1:a.color.kb>b.color.kb?1:a.color.ra<b.color.ra?-1:a.color.ra>b.color.ra?1:a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:a.y>b.y?1:0};function Ii(){this.index=Nj++;this.add=!0;this.ga=null;this.o=Number.POSITIVE_INFINITY;this.v=Number.NEGATIVE_INFINITY;this.floor=new Mj;this.sa=new Mj;this.color=gd;this.Za=-1;this.sd=[]}var Nj=-2147483648;function Ji(a,b){a.floor&&(a.floor.color=ch);a.sa&&(a.sa.color=fh);a.ga=[];for(var c=[],d=0;d<b.length;d++)c.push(fj.vb(b[d].x,b[d].y));b=c;var e=b[b.length-1];for(c=0;c<b.length;c++)d=b[c],e=new Ej(e.x,e.y,d.x,d.y),e.ea=a,e.ai=a.Jc(),a.ga.push(e),e=d}
Ii.prototype.Jc=function(){var a=new oh(this.o,this.v);a.Z.color=this.color;return[a]};
Ii.prototype.stroke=function(){if(Nc(this.ga)){console.trace();debugger}if(this.v<=this.o){console.trace();debugger}for(var a=[],b=n(this.ga),c=b.next();!c.done;c=b.next()){c=c.value;var d=c.ca();d.jc=[c.ai];a.push(d);Xc(d);delete d.da.jc}b=new Rc;c=n(a);for(d=c.next();!d.done;d=c.next())d=d.value,b.Ka(d.C,d.w);d=b.s&-524288;c=b.o&-524288;d+=524288;for(c+=524288;d<b.u;){var e=new Ej(d,b.o,d,b.v);Xc(e);a.push(e);d+=524288}for(;c<b.v;)d=new Ej(b.s,c,b.u,c),Xc(d),a.push(d),c+=524288;a=Ri(a.slice(),!0);
a=vj(a);for(b={};a.elements.length;){a:if(c=function(g){return function(){for(var k=n(g.xe),l=k.next();!l.done;l=k.next())if(l.value.jc)return!0;return!1}}(b),b.xe=wj(a),b.xe&&!Nc(b.xe)){if(!c()&&(c=Qc(b.xe),0>=Oc(c.x,c.y,this.ga)))break a;d=new Oj(this);e=n(b.xe);for(c=e.next();!c.done;c=e.next()){c=c.value;var h=c.ca();Xc(h);h.ea=this;c.jc&&(h.ai=c.jc[0]);d.ga.push(h)}d.stroke(Ye(bf(b.xe.bound.s+2147483648>>>19,b.xe.bound.o+2147483648>>>19)))}b={xe:b.xe}}};
function ri(a){for(var b=n(a.sd),c=b.next();!c.done;c=b.next())c.value.remove();a.sd.length=0}Ii.prototype.ca=function(){var a=new Ii;a.add=this.add;a.o=this.o;a.v=this.v;a.floor=this.floor;a.sa=this.sa;a.color=this.color;a.Za=this.Za;return a};Ii.prototype.Lh=function(){return!0};function Oj(a){this.index=Pj++;this.ea=a;this.ga=[];this.Yf=null}var Pj=-2147483648;function Kj(a,b){return a.ea.index<b.ea.index?-1:a.ea.index>b.ea.index?1:0}
Oj.prototype.stroke=function(a){if(Nc(this.ga)){console.trace();debugger}this.ea.sd.push(this);a=this.Yf=a;a.sd.add(this);Sa(hj,a)};Oj.prototype.remove=function(){var a=this.Yf;a.sd.remove(this);if(a.sd.elements.length)Sa(hj,a);else{for(var b=a.Qi.first();null!=b.item;){var c=b.next;eb(b);eb(b.qd);b=c}eb(a.Hl);Ve.remove(a);Ta(hj,a)}};var qj={},rj,Qj,sj=-1;qj.cg=[];
function tj(){function a(C,I){if(C.Ba.fa<I.Ba.fa)return-1;if(C.Ba.fa>I.Ba.fa)return 1;if(C.Ba.aa<I.Ba.aa)return-1;if(C.Ba.aa>I.Ba.aa)return 1;C=Hc(I.Ba,C.Ba.m,C.Ba.l);return 0>C?-1:0<C?1:0}function b(C,I){C=C[0];I=I[0];return C.y<I.y?-1:C.y>I.y?1:0}function c(C){if(!(2>C.length)){var I=2.197265625E7;var L=-1;for(var F,O,Q=1;Q<C.length;Q++)F=C[Q-1],O=C[Q],F=new Cc(F.m,F.l,O.C,O.w),O=(F.length>>3)*(Hc(F,O.m,O.l)>>3),O>=I||-2E3>=O||(I=O,L=Q);0>L||(F=C[L-1],O=C[L],I=O.ib(F.m,F.l,O.C,O.w),Q=O.length/(F.length+
O.length),I.weight=F.weight*(1-Q)+O.weight*Q,C.splice(L-1,2,I),c(C))}}function d(C){if(!(2>C.length)){var I=2.197265625E7;var L=-1;for(var F=C[C.length-1],O,Q=0;Q<C.length;Q++,F=O)O=C[Q],F=new Cc(F.m,F.l,O.C,O.w),F=(F.length>>3)*(Hc(F,O.m,O.l)>>3),F>=I||-2E3>=F||(I=F,L=Q);0>L||(C.unshift.apply(C,ba(C.splice(L))),F=C.pop(),O=C.shift(),I=O.ib(F.m,F.l,O.C,O.w),L=O.length/(F.length+O.length),I.weight=F.weight*(1-L)+O.weight*L,C.unshift(I),d(C))}}function e(C){function I(S,T){var Fa=Uc(S),pa=Uc(T),Oa=
-Ec(S,T)+Math.PI;if(Oa<kc(165)){var ca=new E(S.C,S.w);ca.round();ca.ka=S.weight;ca.Ea=255;F.push(ca);var Ma=new E(S.C-Fa.y,S.w+Fa.x);Ma.round();Ma.ka=ca.ka;Ma.Ea=0;O.push(Ma);L(S);var Aa=new E(T.m,T.l);Aa.round();Aa.ka=T.weight;Aa.Ea=255;F.push(Aa);var $b=new E(T.m-pa.y,T.l+pa.x);$b.round();$b.ka=Aa.ka;$b.Ea=0;O.push($b);Oa<=kc(90)||(S=new E(S.C+Fa.x,S.w+Fa.y),S.round(),S.ka=ca.ka,S.Ea=0,Q.push([Ma,ca,S]),T=new E(T.m-pa.x,T.l-pa.y),T.round(),T.ka=Aa.ka,T.Ea=0,Q.push([T,Aa,$b]))}else Aa=new E(T.m,
T.l),Aa.ka=(S.weight+T.weight)*(1-Oa/Math.jh),Aa.Ea=255,F.push(Aa),Oa<=kc(195)?(pa=new E(-Fa.y-pa.y,Fa.x+pa.x),pa.scale(5E9/pa.qc()),pa.x+=T.m,pa.y+=T.l,pa.round(),pa.ka=Aa.ka,pa.Ea=0,O.push(pa),L(S)):($b=new E(S.C-Fa.y,S.w+Fa.x),$b.round(),$b.ka=Aa.ka,$b.Ea=0,O.push($b),L(S),T=new E(T.m-pa.y,T.l+pa.x),T.round(),T.ka=Aa.ka,T.Ea=0,O.push(T),Q.push([$b,Aa,T]))}function L(S){if(na)na=!1;else{var T=O[O.length-2],Fa=F[F.length-2],pa=F[F.length-1],Oa=O[O.length-1];if(Fa.ka!=S.weight&&pa.ka!=S.weight)if(1E5<
S.length){var ca=S.vb(5E4,0);ca.round();ca.ka=S.weight;ca.Ea=255;var Ma=S.vb(S.length-5E4,0);Ma.round();Ma.ka=S.weight;Ma.Ea=255;Q.push([T,Fa,ca]);Q.push([T,ca,Ma,Oa]);Q.push([Ma,pa,Oa])}else if(ca=new E(S.m+S.C>>1,S.l+S.w>>1),ca.round(),1E5>S.length){var Aa=5E4/S.length-.5;Ma=S.length/1E5;ca.ka=.5*(Fa.ka+pa.ka)*(1-Ma)+S.weight*Ma;ca.Ea=255;Aa=new E(ca.x+(S.l-S.w)*Aa,ca.y+(S.C-S.m)*Aa);Aa.ka=ca.ka;Aa.Ea=S.weight*Ma*255;Aa.round();Q.push([T,Fa,ca,Aa]);Q.push([T,Aa,Oa]);Q.push([Aa,ca,pa,Oa])}else ca.ka=
S.weight,ca.Ea=255,Q.push([T,Fa,ca]),Q.push([T,ca,Oa]),Q.push([ca,pa,Oa]);else Fa.ka!=S.weight?5E4<S.length?(ca=S.vb(5E4,0),ca.round(),ca.ka=S.weight,ca.Ea=255,Q.push([T,Fa,ca]),Q.push([T,ca,pa,Oa])):Q.push([T,Fa,pa,Oa]):pa.ka!=S.weight?5E4<S.length?(ca=S.vb(S.length-5E4,0),ca.round(),ca.ka=S.weight,ca.Ea=255,Q.push([T,Fa,ca,Oa]),Q.push([ca,pa,Oa])):Q.push([Fa,pa,Oa,T]):Q.push([T,Fa,pa,Oa])}}var F=[],O=[],Q=[],na=!1;if(C[0].m==C[C.length-1].C&&C[0].l==C[C.length-1].w){na=!0;I(C[C.length-1],C[0]);
Q=[];for(var Y=1;Y<C.length;Y++)I(C[Y-1],C[Y]);I(C[C.length-1],C[0])}else{var W=C[0],Ea=Uc(W);Y=new E(W.m,W.l);Y.round();Y.ka=W.weight;Y.Ea=255;F.push(Y);W=new E(W.m-Ea.y,W.l+Ea.x);W.round();W.ka=Y.ka;W.Ea=0;O.push(W);for(Y=1;Y<C.length;Y++)I(C[Y-1],C[Y]);C=C[C.length-1];W=Uc(C);Y=new E(C.C,C.w);Y.round();Y.ka=C.weight;Y.Ea=255;F.push(Y);W=new E(C.C-W.y,C.w+W.x);W.round();W.ka=Y.ka;W.Ea=0;O.push(W);L(C)}return Q}function h(C){var I=new ab(kb);C=n(C);for(var L=C.next();!L.done;L=C.next())L=L.value,
of(L.bound.D-5E4,L.bound.s-5E4,L.bound.H+5E4,L.bound.u+5E4,I);return I.elements}function g(C){var I=new ab(Dc);C=n(C);for(var L=C.next();!L.done;L=C.next())L=L.value,I.remove(Wc(L))||I.add(L);return I.elements}function k(C){var I=vj(C,!1);C=[];for(var L=[];I.elements.length;){var F=wj(I);F?Nc(F)?L.push(F):(F.tb=[],C.push(F)):console.log("failed circuit")}L=n(L);for(I=L.next();!I.done;I=L.next())yj(I.value,C);L=[];C=n(C);for(I=C.next();!I.done;I=C.next())if(F=I.value,0==F.tb.length)L.push(F);else{xj(F);
var O=n(F.tb);for(I=O.next();!I.done;I=O.next())xj(I.value);L.push(zj(F))}return L}function l(C,I,L){var F=vj(C,!1);C=[];for(var O=new ab(sd);F.elements.length;){a:{var Q=F;var na=[];na.bound=new Rc;var Y=0,W=Q.elements[Y],Ea=W.elements.pop();W.elements.length||Q.elements.splice(Y,1);if(Ea)for(na.bound.Ka(Ea.m,Ea.l);;){na.push(Ea);na.bound.Ka(Ea.C,Ea.w);if(Ea.C==na[0].m&&Ea.w==na[0].l)break a;Y=Q.contains(new E(Ea.C,Ea.w));if(0>Y)break a;W=Q.elements[Y];Ea=bb(W,Wc(Ea))-1;0>Ea&&(Ea+=W.elements.length);
Ea=W.elements.splice(Ea,1)[0];W.elements.length||Q.elements.splice(Y,1)}else na=null}C.push(na);if(na[0].m!=na[na.length-1].C||na[0].l!=na[na.length-1].w)Q=na[0],Q.Ti=na,na=new ab(Yc),na.x=Q.m,na.y=Q.l,na=O.Ka(na),na.add(Q)}for(F=0;F<C.length;F++)if(Q=C[F],Q[0].m!=Q[Q.length-1].C||Q[0].l!=Q[Q.length-1].w)na=Q[Q.length-1],Y=O.contains(new E(na.C,na.w)),0>Y||(W=O.elements[Y],na=bb(W,Wc(na))-1,0>na&&(na+=W.elements.length),na=W.elements.splice(na,1)[0],W.elements.length||O.elements.splice(Y,1),Y=C.indexOf(na.Ti),
C.splice(Y,1),Y<F&&F--,Q.push.apply(Q,ba(na.Ti)),Q.bound.cl(na.Ti.bound),F--);O=n(C);for(F=O.next();!F.done;F=O.next())delete F.value.Ti;O=n(C);for(F=O.next();!F.done;F=O.next())F=F.value,F[0].m==F[F.length-1].C&&F[0].l==F[F.length-1].w?d(F):c(F);O=[];C=n(C);for(F=C.next();!F.done;F=C.next())O=O.concat(e(F.value));C=[];O=n(O);for(F=O.next();!F.done;F=O.next())for(F=F.value,Q=n(I),Y=Q.next();!Y.done;Y=Q.next()){a:for(na=F,Y=n(Y.value),W=Y.next();!W.done;W=Y.next()){W=W.value;Ea=[];for(var S=na[na.length-
1],T=Hc(W,S.x,S.y),Fa=0;Fa<na.length;Fa++){var pa=na[Fa],Oa=Hc(W,pa.x,pa.y);if(0<Oa){if(0>T){T/=T-Oa;var ca=1-T,Ma=new E(S.x*ca+pa.x*T,S.y*ca+pa.y*T);Ma.ka=S.ka*ca+pa.ka*T;Ma.Ea=S.Ea*ca+pa.Ea*T;Ea.push(Ma)}Ea.push(pa)}else 0>Oa?0<T&&(T/=T-Oa,ca=1-T,Ma=new E(S.x*ca+pa.x*T,S.y*ca+pa.y*T),Ma.ka=S.ka*ca+pa.ka*T,Ma.Ea=S.Ea*ca+pa.Ea*T,Ea.push(Ma)):Ea.push(pa);S=pa;T=Oa}if(3>Ea.length){na=null;break a}na=Ea}na&&C.push(na)}I=n(C);for(F=I.next();!F.done;F=I.next()){C=F.value;for(O=0;O<C.length;O++)F=C[O],
F.index?C[O]=F.index:(F.index=qj.re.Vb.length,C[O]=F.index,Q=L(F),Q.ka=225*F.ka,Q.Ea=F.Ea,qj.re.Vb.push(Q));rj+=3*(C.length-2);qj.re.me.push(C)}}var m=Ve.elements[sj];if(m){qj.cg[2*sj]=rj;for(var p=new ab(a),r=new ab(b),q=new ab(b),v={},z=n(m.wa),y=z.next();!y.done;v={gd:v.gd,Ld:v.Ld,fj:v.fj},y=z.next())if(v.Ld=y.value,v.Ld instanceof Hg){v.fj=function(C){return function(I){var L=I.Ba,F=Math.atan2(L.aa,L.fa)-Math.atan2(C.gd.aa,C.gd.fa);if(Math.abs(F>Math.PI?F-Math.jh:F<-Math.PI?F+Math.jh:F)>kc(5))return!1;
F=L.weight/(L.weight+1);var O=1-F;F=L.ib(Math.round(L.m*F+C.gd.m*O),Math.round(L.l*F+C.gd.l*O),Math.round(L.C*F+C.gd.C*O),Math.round(L.w*F+C.gd.w*O));if(500<=Math.abs(Hc(F,C.gd.m,C.gd.l))||500<=Math.abs(Hc(F,C.gd.C,C.gd.w))||500<=Math.abs(Hc(F,L.m,L.l))||500<=Math.abs(Hc(F,L.C,L.w)))return!1;I.Ba=F;F.weight=L.weight+1;I.push(C.Ld);return!0}}(v);var x=function(C){return function(){for(var I=n(p.elements),L=I.next();!L.done;L=I.next())if(C.fj(L.value))return!0;return!1}}(v);v.gd=Wc(v.Ld.W);if(!x()){var B=
[v.Ld];B.Ba=v.gd;B.Ba.weight=1;var A=p.Ka(B);A!=B&&A.push(v.Ld)}}else{var D=[v.Ld],H=void 0;v.Ld instanceof Ig?H=r.Ka(D):v.Ld instanceof Jg&&(H=q.Ka(D));H!=D&&H.push(v.Ld)}p=p.elements;r=r.elements;q=q.elements;for(var K={},R=n(p),sa=R.next();!sa.done;K={uc:K.uc,rf:K.rf},sa=R.next()){var ta=sa.value;K.rf=Vc(ta.Ba,-1E3);ta.Ba=ta.Ba.ib(ta.Ba.m+K.rf.x,ta.Ba.l+K.rf.y,ta.Ba.C+K.rf.x,ta.Ba.w+K.rf.y);K.uc=ta.Ba;var ia=[[],[],[],[]],ja=[],Mb=n(ta);for(y=Mb.next();!y.done;y=Mb.next()){var qb=y.value,gc=function(C,
I,L){C.m<I.s||C.m>I.u||C.w>I.v||C.l<I.o?L.push(C):(C.w<I.o&&L.push(C.ib(C.m,I.o,C.C,C.w)),C.l>I.v&&L.push(C.ib(C.m,C.l,C.C,I.v)))},Fc=function(C,I,L){C.l<I.o||C.l>I.v||C.C>I.u||C.m<I.s?L.push(C):(C.C<I.s&&L.push(C.ib(I.s,C.l,C.C,C.w)),C.m>I.u&&L.push(C.ib(C.m,C.l,I.u,C.w)))},Sb=function(C,I,L){C.m<I.s||C.m>I.u||C.l>I.v||C.w<I.o?L.push(C):(C.l<I.o&&L.push(C.ib(C.m,C.l,C.C,I.o)),C.w>I.v&&L.push(C.ib(C.m,I.v,C.C,C.w)))},Gc=function(C,I,L){C.l<I.o||C.l>I.v||C.m>I.u||C.C<I.s?L.push(C):(C.m<I.s&&L.push(C.ib(C.m,
C.l,I.s,C.w)),C.C>I.u&&L.push(C.ib(I.u,C.l,C.C,C.w)))},Ia=new Rc;Ia.s=Math.round(K.uc.getParameter(qb.W.C,qb.W.w));Ia.u=Math.round(K.uc.getParameter(qb.W.m,qb.W.l));Ia.o=qb.o;Ia.v=qb.v;for(var Ob=[[],[],[],[]],zf=n(ia[0]),va=zf.next();!va.done;va=zf.next())Gc(va.value,Ia,Ob[0]);var Af=n(ia[1]);for(va=Af.next();!va.done;va=Af.next())Sb(va.value,Ia,Ob[1]);var Be=n(ia[2]);for(va=Be.next();!va.done;va=Be.next())Fc(va.value,Ia,Ob[2]);var Bf=n(ia[3]);for(va=Bf.next();!va.done;va=Bf.next())gc(va.value,Ia,
Ob[3]);ia=Ob;for(var vc=[[new Cc(Ia.s,Ia.o,Ia.u,Ia.o)],[new Cc(Ia.u,Ia.o,Ia.u,Ia.v)],[new Cc(Ia.u,Ia.v,Ia.s,Ia.v)],[new Cc(Ia.s,Ia.v,Ia.s,Ia.o)]],Cf=n(ja),tb=Cf.next();!tb.done;tb=Cf.next()){var ae=tb.value;Ob=[[],[],[],[]];var Df=n(vc[0]);for(va=Df.next();!va.done;va=Df.next())Gc(va.value,ae,Ob[0]);var Ce=n(vc[1]);for(va=Ce.next();!va.done;va=Ce.next())Sb(va.value,ae,Ob[1]);var be=n(vc[2]);for(va=be.next();!va.done;va=be.next())Fc(va.value,ae,Ob[2]);var ce=n(vc[3]);for(va=ce.next();!va.done;va=ce.next())gc(va.value,
ae,Ob[3]);vc=Ob}ia[0].push.apply(ia[0],ba(vc[0]));ia[1].push.apply(ia[1],ba(vc[1]));ia[2].push.apply(ia[2],ba(vc[2]));ia[3].push.apply(ia[3],ba(vc[3]));ja.push(Ia)}ia=ia[0].concat(ia[1].concat(ia[2].concat(ia[3])));ta.length=0;for(var Ef=k(ia),De=[],ub=n(Ef),Ub=ub.next();!Ub.done;Ub=ub.next()){for(var Ff=Ub.value,Ed=Ff.slice(),md=new Rc,Gf=n(Ff),Pb=Gf.next();!Pb.done;Pb=Gf.next()){var Hf=Pb.value;md.Ka(Hf.C,Hf.w)}var Ee=K.uc.vb(md.s,0),If=K.uc.vb(md.u,0);Ed.bound=new Od;Ed.bound.Ka(Ee.y,md.o,Ee.x);
Ed.bound.Ka(If.y,md.v,If.x);De.push.apply(De,ba(Dj(Ed)));ta.push(Ed)}var Jf=h(ta);ia=[];for(var Za=n(Jf),Db=Za.next();!Db.done;Db=Za.next())for(var Zc=n(Db.value.wa),Vb=Zc.next();!Vb.done;Vb=Zc.next()){var hb=Vb.value;if(hb instanceof Jg){var Kc=Tc(K.uc,hb.ga);if(Kc){Kc[0]=Math.round(Kc[0]);Kc[1]=Math.round(Kc[1]);var de=new Cc(Kc[1],hb.y,Kc[0],hb.y);de.weight=1;ia.push(de)}}else if(hb instanceof Ig){var wc=Tc(K.uc,hb.ga);if(wc){wc[0]=Math.round(wc[0]);wc[1]=Math.round(wc[1]);var Kf=new Cc(wc[0],
hb.y,wc[1],hb.y);Kf.weight=1;ia.push(Kf)}}else{var Fd=K.uc,ic=hb.W,xc=Hc(Fd,ic.m,ic.l),vb=Hc(Fd,ic.C,ic.w),Fe=Fd.getParameter(ic.m,ic.l),za=Fd.getParameter(ic.C,ic.w);if(xc<vb){if(!(-256>vb||256<xc)){var Lf=xc/(xc-vb),Lc=Math.round(Fe*(1-Lf)+za*Lf),Mf=Math.atan2(-xc,Fe-Lc);if(!(Mf<kc(15))){var yc=new Cc(Lc,hb.o,Lc,hb.v);yc.weight=(180*Mf/Math.PI-15)/75;1<yc.weight&&(yc.weight=1);ia.push(yc)}}}else if(xc>vb&&!(-256>xc)&&!(256<vb)){var Nf=xc/(xc-vb),Gd=Math.round(Fe*(1-Nf)+za*Nf),Of=Math.atan2(-vb,
Gd-za);if(!(Of<kc(15))){var ee=new Cc(Gd,hb.v,Gd,hb.o);ee.weight=(180*Of/Math.PI-15)/75;1<ee.weight&&(ee.weight=1);ia.push(ee)}}}}l(ia,De,function(C){return function(I){var L=Math.round(I.x);I=Math.round(I.y);L/=C.uc.length;return new jd(Math.round(C.uc.l+(C.uc.w-C.uc.l)*L)-C.rf.y,I,Math.round(C.uc.m+(C.uc.C-C.uc.m)*L)-C.rf.x)}}(K))}var $c={},Pf=n(r);for(sa=Pf.next();!sa.done;$c={Ag:$c.Ag},sa=Pf.next()){var Hd=sa.value;$c.Ag=Hd[0].y;var Wb=[],Id=n(Hd);for(y=Id.next();!y.done;y=Id.next())Wb.push.apply(Wb,
ba(y.value.ga));Hd.length=0;var Kg=k(g(Wb)),ma=[],Ra=n(Kg);for(Ub=Ra.next();!Ub.done;Ub=Ra.next()){var Ca=Ub.value,Qb=Ca.slice(),Mc=new Rc,Jd=n(Ca);for(Pb=Jd.next();!Pb.done;Pb=Jd.next()){var Qf=Pb.value;Mc.Ka(Qf.C,Qf.w)}Qb.bound=new Od;Qb.bound.D=Mc.s;Qb.bound.H=Mc.u;Qb.bound.s=Mc.o;Qb.bound.u=Mc.v;Qb.bound.o=Qb.bound.v=$c.Ag;ma.push.apply(ma,ba(Dj(Qb)));Hd.push(Qb)}var Ge=h(Hd);Wb=[];var He=n(Ge);for(Db=He.next();!Db.done;Db=He.next()){var Ie=n(Db.value.wa);for(Vb=Ie.next();!Vb.done;Vb=Ie.next()){var Kd=
Vb.value;if(Kd instanceof Hg&&!(Kd.o>$c.Ag||Kd.v<=$c.Ag)){var Rf=Kd.W.ca();Rf.weight=1;Wb.push(Rf)}}}l(Wb,ma,function(C){return function(I){return new jd(Math.round(I.y),C.Ag,Math.round(I.x))}}($c))}var zc={},Sf=n(q);for(sa=Sf.next();!sa.done;zc={Bg:zc.Bg},sa=Sf.next()){var Eb=sa.value;zc.Bg=Eb[0].y;var Ld=[],Tf=n(Eb);for(y=Tf.next();!y.done;y=Tf.next())for(var Xb=n(y.value.ga),Uf=Xb.next();!Uf.done;Uf=Xb.next()){var Md=Uf.value;Ld.push(Md.ib(-Md.C,Md.w,-Md.m,Md.l))}Eb.length=0;var nd=k(g(Ld)),fe=
[],Je=n(nd);for(Ub=Je.next();!Ub.done;Ub=Je.next()){var Vf=Ub.value,jc=Vf.slice(),ad=new Rc,Wf=n(Vf);for(Pb=Wf.next();!Pb.done;Pb=Wf.next()){var Xf=Pb.value;ad.Ka(Xf.C,Xf.w)}jc.bound=new Od;jc.bound.D=-ad.u;jc.bound.H=-ad.s;jc.bound.s=ad.o;jc.bound.u=ad.v;jc.bound.o=jc.bound.v=zc.Bg;fe.push.apply(fe,ba(Dj(jc)));Eb.push(jc)}var od=h(Eb);Ld=[];var ge=n(od);for(Db=ge.next();!Db.done;Db=ge.next()){var Yb=n(Db.value.wa);for(Vb=Yb.next();!Vb.done;Vb=Yb.next()){var Zb=Vb.value;if(Zb instanceof Hg&&!(Zb.o>=
zc.Bg||Zb.v<zc.Bg)){var Ke=Zb.W.ib(-Zb.W.C,Zb.W.w,-Zb.W.m,Zb.W.l);Ke.weight=1;Ld.push(Ke)}}}l(Ld,fe,function(C){return function(I){return new jd(Math.round(I.y),C.Bg,-Math.round(I.x))}}(zc))}qj.cg[2*sj+1]=rj-qj.cg[2*sj];sj++;return!0}Qj=qj.re;delete qj.re;for(var bd=0;bd<Ve.elements.length;bd++)Ve.elements[bd].Ck=qj.cg[2*bd],Ve.elements[bd].Bk=qj.cg[2*bd+1];delete qj.cg;sj=-1;Qj.compile();return!1};t.Pa=function(a){t.Ga.call(this,a);this.h=new w(0,0,0);this.Na=null;this.Kj=NaN;this.Pb=0;this.ia={qa:-2147483648,mb:new w(1,1,1)};this.zk=new cb;this.th=new Rc};t.Pa.prototype=Object.create(t.Ga.prototype);t.Pa.prototype.constructor=t.Pa;t.Pa.index=-2147483648;t.Pa.prototype.create=function(){this.index=t.Pa.index++;t.Sj.push(this);t.Ga.prototype.create.call(this)};t.Pa.prototype.remove=function(){for(var a=this.zk.first();null!=a.item;){var b=a.next;eb(a);eb(a.qd);a=b}t.Sj.remove(this);t.Ga.prototype.remove.call(this)};
t.Pa.prototype.step=function(){this.th.yf(this.h.z,this.h.x)||uj(this);var a=null,b=hf(this.h,new w(0,-1E8,0),eg);b&&(a=Ue(b.item.ba));a?(a!=this.Na&&(this.Kj=t.j),this.Na=a,ag(this.h,a,this.ia.mb)):this.Oj();t.Ga.prototype.step.call(this)};t.Pa.prototype.Oj=function(){this.remove()};
function uj(a){for(var b=a.h.z-a.Pb,c=a.h.z+a.Pb,d=a.h.x-a.Pb,e=a.h.x+a.Pb,h=a.zk.first(),g=[Re];g.length;){var k=g.shift();if(k instanceof df)b<=k.value&&g.push(k.Me),c>=k.value&&g.push(k.Ne);else if(k instanceof ef)d<=k.value&&g.push(k.Me),e>=k.value&&g.push(k.Ne);else{for(;null!=h.item&&!(h.item.index>=k.index);){var l=h.next;eb(h);eb(h.qd);h=l}if(h.item==k)h=h.next;else{l=new db(k);var m=new db(a);l.qd=m;m.qd=l;gb(l,h);fb(k.Qi,m)}}}for(;null!=h.item;)g=h.next,eb(h),eb(h.qd),h=g;a.th.s=(b>>19<<
19)+a.Pb;a.th.u=((c>>19)+1<<19)-a.Pb;a.th.o=(d>>19<<19)+a.Pb;a.th.v=((e>>19)+1<<19)-a.Pb}t.Sj=new ab(kb);t.Qf=function(a){t.Node.call(this,a);this.nb=1E5};t.Qf.prototype=Object.create(t.Node.prototype);t.Qf.prototype.constructor=t.Qf;t.Qf.color=new G(0,0,0,64);
t.Qf.prototype.ab=function(){var a=new J;a.F=0;a.L=0;a.N=this.nb;a.I=this.nb;a.m11=0;a.m12=0;a.O=0;a.m21=1;a.m22=0;a.G=this.Ja.G;a.m31=this.Ja.m31+500;a.m32=this.Ja.m32;var b=hf(new w(this.Ja.G,this.Ja.m31,this.Ja.m32),new w(0,-1E8,0));b&&(a.m31-=b.d);t.A.J("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,0,4);t.Node.prototype.ab.call(this)};var Rj,Sj=980700/3600*2,Tj=new w(0,-Sj,0),Uj=new ab(kb),Vj=new t.Node("physProcessor");
Vj.step=function(){Rj=new dc;for(var a=n(Uj.elements),b=a.next();!b.done;b=a.next()){b=b.value;b.Te=0;b.t=0;b.Wl=b.wh(b.h,b.ta,b.eb);var c=b.Fl();b.input();b.pc&&!b.Hh()&&0<b.Hf&&(b.B.x+=Tj.x,b.B.y+=Tj.y,b.B.z+=Tj.z);b.B.scale(b.Dm);var d=td(b.B,b.Ib,new w(0,0,0));if(0<b.sg){for(var e=b,h=b.Wl,g=new w(0,0,0),k=0;k<h.length;k++){var l=h[k],m=-oc(d,l);if(!(0>=m)){m*=e.sg;var p=oc(e.B,l);l=new w(e.B.x-l.x*p,e.B.y-l.y*p,e.B.z-l.z*p);m/=l.length();1<m&&(m=1);g.x-=l.x*m;g.y-=l.y*m;g.z-=l.z*m}}e.B.add(g)}b.fb.set(.5*
b.Ib.x+.5*b.B.x,.5*b.Ib.y+.5*b.B.y,.5*b.Ib.z+.5*b.B.z);b.fb.y+=c;b.fb.round();b.bound=Wj(b.h,b.ta,b.eb,b.fb)}a=n(Uj.elements);for(b=a.next();!b.done;b=a.next())b.value.handleEvent();for(a=0;!Rj.Hi();){b=Rj.pop();if(10<++a)break;b.target?(c=b.source,e=b.target,c.Te==b.Nk&&e.Te==b.fm&&(c.Te++,e.Te++,Xj(c,b),Xj(e,b),c.handleEvent(),e.handleEvent(),c.Pj(e),e.Pj(c))):(c=b.source,c.Te==b.Nk&&(c.Te++,Xj(c,b),c.handleEvent()))}a=n(Uj.elements);for(b=a.next();!b.done;b=a.next())b=b.value,b.h.x+=b.fb.x,b.h.y+=
b.fb.y,b.h.z+=b.fb.z,b.Ib.set(b.B.x,b.B.y,b.B.z),b.transform.G=b.h.x,b.transform.m31=b.h.y,b.transform.m32=b.h.z};function Yj(a){t.Pa.call(this,a);this.B=new w(0,0,0);this.Ib=new w(0,0,0);this.eb=this.ta=0;this.Hf=1;this.sg=0;this.Dm=1;this.rg=0;this.ie=new ab(kb);this.t=this.Te=0;this.fb=new w(0,0,0);this.pc=!0}Yj.prototype=Object.create(t.Pa.prototype);f=Yj.prototype;f.constructor=Yj;f.create=function(){t.Pa.prototype.create.call(this);Uj.add(this)};
f.remove=function(){t.Pa.prototype.remove.call(this);Uj.remove(this)};f.Fl=function(){return 0};function Xj(a,b){var c=(b.t-a.t)/(1-a.t);c=new w(a.fb.x*c,a.fb.y*c,a.fb.z*c);c.round();a.h.add(c);a.fb.sub(c);a.t=b.t}
f.handleEvent=function(){for(var a=new w(this.B.x,this.B.y,this.B.z),b=this.wh(this.h,this.ta,this.eb),c=Zj(this),d=0;d<b.length;d++){var e=b[d],h=!1,g=-oc(this.B,e);0<g&&(2E3<g*this.rg&&(h=!0,g*=1+this.rg),this.B.x+=e.x*g,this.B.y+=e.y*g,this.B.z+=e.z*g);g=-oc(this.fb,e);0<g&&(h&&(g*=1+this.rg),this.fb.x+=e.x*g,this.fb.y+=e.y*g,this.fb.z+=e.z*g)}for(d=0;d<c.length;d++){h=function(m,p){var r=oc(m,e),q=oc(p,e);var v=k.Hf;var z=l.Hf;r>=q?v=[r,q]:(v=(v*r+z*q)/(v+z),v=[v+(v-r)*k.rg,v+(v-q)*l.rg]);r=v[0]-
r;q=v[1]-q;m.x+=e.x*r;m.y+=e.y*r;m.z+=e.z*r;p.x+=e.x*q;p.y+=e.y*q;p.z+=e.z*q};e=c[d];var k=this,l=e.source;l.index<k.index||(h(k.fb,l.fb),h(k.B,l.B))}sc(this.fb,b);sc(this.B,b);0<b.length+c.length&&(td(this.B,a,a),a.pa(1),this.Pi());this.bound=Wj(this.h,this.ta,this.eb,this.fb);if(this.fb.Fj())return null;t.Ze();b=n(b);for(a=b.next();!a.done;a=b.next())a.value.source.qa=t.qa;c=n(c);for(a=c.next();!a.done;a=c.next())a.value.source.qa=t.qa;0>=this.ta||!(c=this.ri(this.h,this.ta,this.eb,this.fb,!0))||
(c.source=this,c.Nk=this.Te,c.target&&(c.fm=c.target.Te),Rj.add(c,c.t))};
f.ri=function(a,b,c,d,e){for(var h=this,g=new ff(a,d,b),k=null,l=1,m=g.next();m&&!(m.t>l);){for(var p=function(v){v.qa!=t.qa&&(v=v.Xf(a,b,c,d))&&(v.d=v.t*d.length(),-1>v.d||(v.t=h.t+v.t*(1-h.t),v.t>=l||(k=v,l=v.t)))},r=n(m.node.wa),q=r.next();!q.done;q=r.next())p(q.value);m=n(m.node.zd);for(q=m.next();!q.done;q=m.next())p(q.value);m=g.next()}if(!e)return k;for(e=0;e<Uj.elements.length;e++)if(g=Uj.elements[e],this!=g&&g.qa!=t.qa&&!this.ie.get(g)&&!g.ie.get(this)&&Pd(this.bound,g.bound)&&(p=this.t>
g.t?this.t:g.t,q=ak(this,p),m=ak(g,p),r=bk(q.Oi,q.r,q.b,q.Fb,m.Oi,m.r,m.b,m.Fb)))r.d=r.t*td(q.Fb,m.Fb,new w(0,0,0)).length(),-1>r.d||(r.t=p+r.t*(1-p),r.t>=l||(r.target=g,k=r,l=r.t));return k};function ak(a,b){b=(b-a.t)/(1-a.t);b=new w(a.fb.x*b,a.fb.y*b,a.fb.z*b);b.round();var c={};c.Oi=(new w(a.h.x,a.h.y,a.h.z)).add(b);c.r=a.ta;c.b=a.eb;c.Fb=(new w(a.fb.x,a.fb.y,a.fb.z)).sub(b);return c}
f.wh=function(a,b,c){var d=nf(a,b),e=[];t.Ze();d=n(d);for(var h=d.next();!h.done;h=d.next()){h=h.value;for(var g=n(h.wa),k=g.next();!k.done;k=g.next())k=k.value,k.qa!=t.qa&&k.Fg(a,b,c,e);h=n(h.zd);for(k=h.next();!k.done;k=h.next())g=k.value,g.qa!=t.qa&&g.Fg(a,b,c,e)}return e};
function Zj(a){for(var b=[],c=0;c<Uj.elements.length;c++){var d=Uj.elements[c];if(a!=d&&!a.ie.get(d)&&!d.ie.get(a)){var e=a.h;var h=a.ta,g=a.eb,k=d.h,l=d.ta,m=d.eb;if(0==g&&0==m){e=new w(e.x-k.x,e.y-k.y,e.z-k.z);var p=e.pa(1);e.d=oc(new w(k.x+e.x*l,k.y+e.y*l,k.z+e.z*l),e)+h;p-=h+l;e=2<p||p<-h?null:e}else{if(e.y-g>k.y+m){p=new w(e.x-k.x,e.y-g-(k.y+m),e.z-k.z);var r=p.pa(1);e=new w(k.x+p.x*l,k.y+p.y*l,k.z+p.z*l)}else e.y+g<k.y-m?(p=new w(e.x-k.x,e.y+g-(k.y-m),e.z-k.z),r=p.pa(1),e=new w(k.x+p.x*l,k.y+
p.y*l,k.z+p.z*l)):(p=new w(e.x-k.x,0,e.z-k.z),r=p.pa(1),e=new w(k.x+p.x*l,(e.y*m+k.y*g)/(g+m),k.z+p.z*l));p.d=oc(e,p)+h;r-=h+l;e=2<r||r<-h?null:p}e&&(e.source=d,b.push(e))}}return b}f.Pi=function(){};f.Pj=function(){};f.input=function(){};f.Hh=function(){return!1};function ck(a){Yj.call(this,a);this.hk=this.rj=this.ae=this.Gj=this.Ug=this.Vc=0;this.Ii=this.gh=Number.NEGATIVE_INFINITY;this.am=this.Mh=!1;this.Ue=0;this.xi=18}ck.prototype=Object.create(Yj.prototype);ck.prototype.constructor=ck;
ck.prototype.ri=function(a,b,c,d,e){for(var h=this,g=new ff(a,d,b),k=null,l=1,m=g.next();m&&!(m.t>l);){for(var p=function(v){v.qa==t.qa||v.flags&1||!(v=v.Xf(a,b,c,d))||(v.d=v.t*d.length(),-1>v.d||(v.t=h.t+v.t*(1-h.t),v.t>=l||(k=v,l=v.t)))},r=n(m.node.wa),q=r.next();!q.done;q=r.next())p(q.value);m=n(m.node.zd);for(q=m.next();!q.done;q=m.next())p(q.value);m=g.next()}if(!e)return k;for(e=0;e<Uj.elements.length;e++)if(g=Uj.elements[e],this!=g&&g.qa!=t.qa&&!this.ie.get(g)&&!g.ie.get(this)&&Pd(this.bound,
g.bound)&&(p=this.t>g.t?this.t:g.t,q=ak(this,p),m=ak(g,p),r=bk(q.Oi,q.r,q.b,q.Fb,m.Oi,m.r,m.b,m.Fb)))r.d=r.t*td(q.Fb,m.Fb,new w(0,0,0)).length(),-1>r.d||(r.t=p+r.t*(1-p),r.t>=l||(r.target=g,k=r,l=r.t));return k};
Yj.prototype.wh=function(a,b,c){var d=nf(a,b),e=[];t.Ze();d=n(d);for(var h=d.next();!h.done;h=d.next()){h=h.value;for(var g=n(h.wa),k=g.next();!k.done;k=g.next())k=k.value,k.qa==t.qa||k.flags&1||k.Fg(a,b,c,e);h=n(h.zd);for(k=h.next();!k.done;k=h.next())g=k.value,g.qa==t.qa||g.flags&1||g.Fg(a,b,c,e)}return e};ck.vk=function(a){return Math.sqrt(2*a*Sj)};f=ck.prototype;f.Hh=function(){return this.gh<t.j-1?!1:!0};
f.Fl=function(){var a=0,b=this.am?this.rj:this.ae,c=new w(this.h.x,this.h.y-this.eb-.5*this.ta,this.h.z);0>=this.B.y&&(this.Mh=!1);if(this.Hh()){this.Mh=!1;var d=0;t.Ze();var e=this.hk;if(e=this.ri(c,.5*this.ta,0,new w(0,-e,0)))d=e.d;c.y+=.5*this.ta;c.y-=d;c=this.wh(c,this.ta,0);e=Number.NEGATIVE_INFINITY;for(var h=0;h<c.length;h++){var g=c[h];g.y>e&&(e=g.y)}0<e&&(this.gh=t.j,a=b-2*(this.ta+this.eb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}else if(!this.Mh){d=0;t.Ze();e=this.ae-2*this.eb-this.ta;if(e=
this.ri(c,.5*this.ta,0,new w(0,-e,0)))d=e.d;c.y+=.5*this.ta;c.y-=d;c=this.wh(c,this.ta,0);e=Number.NEGATIVE_INFINITY;for(h=0;h<c.length;h++)g=c[h],g.y>e&&(e=g.y);0<e&&(this.gh=t.j,a=b-2*(this.ta+this.eb)-d,a/=6,6E3<a&&(a=6E3),-6E3>a&&(a=-6E3))}return a};f.Aj=function(){return new w(0,0,0)};f.Yk=function(){};
f.input=function(){Yj.prototype.input.call(this);this.Yk();var a=this.Aj();if(t.g.ma==this){var b=this.transform;a.set(b.F*a.x+b.O*a.z,0,b.N*a.x+b.m22*a.z)}b=a.pa(1);0==b&&(this.Ue=0);if(this.Hh())0<b&&(this.B.x+=a.x*this.Ug,this.B.z+=a.z*this.Ug,this==t.g.ma&&(this.Ue>=2*this.xi&&(this.Ue=0),0==this.Ue?t.i.X.get("stepConcrete01").play({gain:.5}):this.Ue==this.xi&&t.i.X.get("stepConcrete02").play({gain:.5})),this.Ue=this.Ra&&.5<this.Ra.focus?this.Ue+.5:this.Ue+1),this.B.scale(this.Vc/(this.Vc+this.Ug));
else{b=.25*this.Ug;var c=new E(this.B.z,this.B.x),d=c.length(),e=oc(this.B,a);0>e&&(e=0);e>this.Vc&&(e=this.Vc);b=this.Vc/(this.Vc+b)*(e+b)-e;d>this.Vc&&c.scale(Math.max(0,d-b)/d);c.x+=a.z*b;c.y+=a.x*b;this.B.z=c.x;this.B.x=c.y}this.Ii<t.j||this.gh<t.j-15||(this.B.y=this.Gj,this.Ii=this.gh=Number.NEGATIVE_INFINITY,this.Mh=!0)};var dk=2,ek=4,Ij=8;function fk(a){return a&dk||a&ek?!1:!0}function jf(a){return a&ek?!1:!0}function eg(a){return a&Ij?!0:!1}function gk(){this.index=hk++;this.t=NaN;this.n=this.p=null;this.Wa=!0}var hk=-2147483648;function lf(a,b){return a.t<b.t?-1:a.t>b.t?1:1==a.Wa&&0==b.Wa?-1:0==a.Wa&&1==b.Wa?1:a.index<b.index?-1:a.index>b.index?1:0}
function Wj(a,b,c,d){var e=new Od,h=a.z-b;h<e.D&&(e.D=h);h=a.z+b;h>e.H&&(e.H=h);h=a.z+d.z-b;h<e.D&&(e.D=h);h=a.z+d.z+b;h>e.H&&(e.H=h);h=a.x-b;h<e.s&&(e.s=h);h=a.x+b;h>e.u&&(e.u=h);h=a.x+d.x-b;h<e.s&&(e.s=h);h=a.x+d.x+b;h>e.u&&(e.u=h);b+=c;c=a.y-b;c<e.o&&(e.o=c);c=a.y+b;c>e.v&&(e.v=c);c=a.y+d.y-b;c<e.o&&(e.o=c);c=a.y+d.y+b;c>e.v&&(e.v=c);return e}
function ik(a,b,c,d,e){var h=nc(new w(a.x-c.x,0,a.z-c.z),new w(b.x,0,b.z),d);if(!h)return null;d=new gk;d.t=h.Oa;d.p=new w(a.x+b.x*d.t,a.y+b.y*d.t,a.z+b.z*d.t);d.n=new w(d.p.x-c.x,0,d.p.z-c.z);d.n.pa(1);var g=new gk;g.t=h.Nc;g.p=new w(a.x+b.x*g.t,a.y+b.y*g.t,a.z+b.z*g.t);g.n=new w(g.p.x-c.x,0,g.p.z-c.z);g.n.pa(1);if(0<b.y){h=(c.y-e-a.y)/b.y;var k=(c.y+e-a.y)/b.y;h>d.t&&(d=new gk,d.t=h,d.p=new w(a.x+b.x*d.t,c.y-e,a.z+b.z*d.t),d.n=new w(0,-1,0));k<g.t&&(g=new gk,g.t=k,g.p=new w(a.x+b.x*g.t,c.y+e,a.z+
b.z*g.t),g.n=new w(0,1,0))}else if(0>b.y)h=(c.y+e-a.y)/b.y,k=(c.y-e-a.y)/b.y,h>d.t&&(d=new gk,d.t=h,d.p=new w(a.x+b.x*d.t,c.y+e,a.z+b.z*d.t),d.n=new w(0,1,0)),k<g.t&&(g=new gk,g.t=k,g.p=new w(a.x+b.x*g.t,c.y-e,a.z+b.z*g.t),g.n=new w(0,-1,0));else if(a.y>c.y+e||a.y<c.y-e)return null;if(d.t>g.t)return null;d.Wa=!0;g.Wa=!1;return d}
function jk(a,b,c,d,e){var h=new w(c.x,NaN,c.z),g=new w,k=new w,l=new E(c.z-a.z,c.x-a.x);var m=new E(b.z,b.x);var p=m.pa(1);l=rd(l,m);h.y=a.y+b.y/p*l;h.y>c.y+e?(h.y=c.y+e,m=oc((new w(c.x,c.y+e,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):h.y<c.y-e?(h.y=c.y-e,m=oc((new w(c.x,c.y-e,c.z)).sub(a),b),g.set(a.x+b.x*m,a.y+b.y*m,a.z+b.z*m)):g.set(a.x+m.y*l,h.y,a.z+m.x*l);td(h,g,k);m=k.pa(1);if(m<d){l=p=null;var r=nc(new w(a.x-c.x,0,a.z-c.z),new w(b.x,0,b.z),d);if(r){var q=new gk;q.t=r.Oa;q.p=new w(a.x+
b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t);q.p.y<=c.y+e&&q.p.y>=c.y-e&&(q.n=new w(q.p.x-c.x,0,q.p.z-c.z),q.n.pa(1),q.Wa=!0,p=q);q=new gk;q.t=r.Nc;q.p=new w(a.x+b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t);q.p.y<=c.y+e&&q.p.y>=c.y-e&&(q.n=new w(q.p.x-c.x,0,q.p.z-c.z),q.n.pa(1),q.Wa=!1,l=q)}if(!p||!l)if(r=mc(a,b,new w(c.x,c.y+e,c.z),d))p||(q=new gk,q.t=r.Oa,q.p=new w(a.x+b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t),q.p.y>c.y+e&&(q.n=new w(q.p.x-c.x,q.p.y-(c.y+e),q.p.z-c.z),q.n.pa(1),q.Wa=!0,p=q)),l||(q=new gk,q.t=r.Nc,q.p=new w(a.x+
b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t),q.p.y>c.y+e&&(q.n=new w(q.p.x-c.x,q.p.y-(c.y+e),q.p.z-c.z),q.n.pa(1),q.Wa=!1,l=q));if(!p||!l)if(r=mc(a,b,new w(c.x,c.y-e,c.z),d))p||(q=new gk,q.t=r.Oa,q.p=new w(a.x+b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t),q.p.y<c.y-e&&(q.n=new w(q.p.x-c.x,q.p.y-(c.y-e),q.p.z-c.z),q.n.pa(1),q.Wa=!0,p=q)),l||(q=new gk,q.t=r.Nc,q.p=new w(a.x+b.x*q.t,a.y+b.y*q.t,a.z+b.z*q.t),q.p.y<c.y-e&&(q.n=new w(q.p.x-c.x,q.p.y-(c.y-e),q.p.z-c.z),q.n.pa(1),q.Wa=!1,l=q));if(p&&l)return{Se:p,ld:l}}return{Th:g,
en:h,De:k,kj:m,dn:d}}function kk(a,b,c,d){b=mc(d,c,a,b);if(!b)return null;var e=new gk;e.t=-b.Nc;e.p=d;e.n=(new w(a.x-(d.x+c.x*b.Nc),a.y-(d.y+c.y*b.Nc),a.z-(d.z+c.z*b.Nc))).round();e.n.pa(1);e.Wa=!0;return e}
function lk(a,b,c,d,e){var h=oc(c,e);c=new w(c.x-e.x*h,c.y-e.y*h,c.z-e.z*h);d=new w(d.x-a.x,d.y-a.y,d.z-a.z);var g=oc(d,e);d.set(d.x-e.x*g,d.y-e.y*g,d.z-e.z*g);b=nc(d,c,b);if(!b)return null;g=new gk;g.t=-b.Nc;g.p=(new w(a.x+d.x+e.x*h*g.t,a.y+d.y+e.y*h*g.t,a.z+d.z+e.z*h*g.t)).round();g.n=new w(-(d.x+c.x*b.Nc),-(d.y+c.y*b.Nc),-(d.z+c.z*b.Nc));g.n.pa(1);g.Wa=!0;return g}
function bk(a,b,c,d,e,h,g,k){if(0==c&&0==g)return c=td(a,e,new w(0,0,0)),g=td(d,k,new w(0,0,0)),0==g.length()?h=null:(c=nc(c,g,b+h))?(a=new w(a.x+d.x*c.Oa,a.y+d.y*c.Oa,a.z+d.z*c.Oa),e=new w(e.x+k.x*c.Oa,e.y+k.y*c.Oa,e.z+k.z*c.Oa),k=new gk,k.t=c.Oa,b=h/(h+b),d=1-b,k.p=(new w(e.x*d+a.x*b,e.y*d+a.y*b,e.z*d+a.z*b)).round(),k.n=new w((k.p.x-e.x)/h,(k.p.y-e.y)/h,(k.p.z-e.z)/h),h=k):h=null,h;var l=new w(a.x-e.x,0,a.z-e.z),m=new w(d.x-k.x,0,d.z-k.z);if(0==m.length())return null;l=nc(l,m,b+h);if(!l)return null;
var p=new w(a.x+d.x*l.Oa,a.y+d.y*l.Oa,a.z+d.z*l.Oa);m=new w(e.x+k.x*l.Oa,e.y+k.y*l.Oa,e.z+k.z*l.Oa);var r=h/(h+b),q=1-r;p=new w(m.x*q+p.x*r,m.y*q+p.y*r,m.z*q+p.z*r);p.round();if(p.y>m.y+g){l=new w(a.x-e.x,a.y-c-(e.y+g),a.z-e.z);m=td(d,k,new w(0,0,0));l=nc(l,m,b+h);if(!l)return null;p=new w(a.x+d.x*l.Oa,a.y-c+d.y*l.Oa,a.z+d.z*l.Oa);m=new w(e.x+k.x*l.Oa,e.y+g+k.y*l.Oa,e.z+k.z*l.Oa);e=new gk;e.t=l.Oa;r=h/(h+b);q=1-r;e.p=(new w(m.x*q+p.x*r,(m.y+g)*q+(p.y-c)*r,m.z*q+p.z*r)).round();e.n=new w((e.p.x-m.x)/
h,(e.p.y-(m.y+g))/h,(e.p.z-m.z)/h)}else if(p.y<m.y-g){l=new w(a.x-e.x,a.y+c-(e.y-g),a.z-e.z);m=td(d,k,new w(0,0,0));l=nc(l,m,b+h);if(!l)return null;p=new w(a.x+d.x*l.Oa,a.y+c+d.y*l.Oa,a.z+d.z*l.Oa);m=new w(e.x+k.x*l.Oa,e.y-g+k.y*l.Oa,e.z+k.z*l.Oa);e=new gk;e.t=l.Oa;r=h/(h+b);q=1-r;e.p=(new w(m.x*q+p.x*r,(m.y-g)*q+(p.y+c)*r,m.z*q+p.z*r)).round();e.n=new w((e.p.x-m.x)/h,(e.p.y-(m.y-g))/h,(e.p.z-m.z)/h)}else e=new gk,e.t=l.Oa,e.p=p,e.n=new w((e.p.x-m.x)/h,0,(e.p.z-m.z)/h);return e}
Ig.prototype.Xf=function(a,b,c,d){c=this.y+c;if(0<=d.y)var e=null;else{var h=new gk;h.t=-(a.y-c-b)/d.y;h.p=(new w(a.x+d.x*h.t,a.y-b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new w(0,1,0);e=h}if(!e)return null;if(0==Ic(e.p.z,e.p.x,this.ga).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ga.length;l++){var m=this.ga[l];e=new w(m.l,c,m.m);var p=new w(m.w-m.l,0,m.C-m.m);p.scale(1/m.length);(e=lk(a,b,d,e,p))?(p=m.getParameter(e.p.z,e.p.x),!(0>p||p>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.ga.length-1)+1:h|3<<l-1}for(l=0;l<this.ga.length;l++)h&1<<l||(m=this.ga[l],(e=kk(a,b,d,new w(m.w,c,m.C)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
Jg.prototype.Xf=function(a,b,c,d){c=this.y-c;if(0>=d.y)var e=null;else{var h=new gk;h.t=-(c-a.y-b)/-d.y;h.p=(new w(a.x+d.x*h.t,a.y+b+d.y*h.t,a.z+d.z*h.t)).round();h.n=new w(0,-1,0);e=h}if(!e)return null;if(0==Ic(e.p.z,e.p.x,this.ga).code)return e.item=this,e;if(0==b)return null;h=0;for(var g=null,k=Number.POSITIVE_INFINITY,l=0;l<this.ga.length;l++){var m=this.ga[l];e=new w(m.l,c,m.m);var p=new w(m.w-m.l,0,m.C-m.m);p.scale(1/m.length);(e=lk(a,b,d,e,p))?(p=m.getParameter(e.p.z,e.p.x),!(0>p||p>m.length)&&
e.t<k&&(k=e.t,g=e)):h=0==l?h|(1<<this.ga.length-1)+1:h|3<<l-1}for(l=0;l<this.ga.length;l++)h&1<<l||(m=this.ga[l],(e=kk(a,b,d,new w(m.w,c,m.C)))&&e.t<k&&(k=e.t,g=e));return g?(g.item=this,g):null};
Hg.prototype.Xf=function(a,b,c,d){var e=this.W,h=this.o-c;c=this.v+c;if(0<=Hc(e,e.m+d.z,e.l+d.x))var g=null;else{var k=new w(e.C-e.m,0,e.l-e.w);k.scale(1/e.length);var l=oc(d,k),m=new gk;m.t=-(Hc(e,a.z,a.x)-b)/l;m.p=(new w(a.x-k.x*b+d.x*m.t,a.y-k.y*b+d.y*m.t,a.z-k.z*b+d.z*m.t)).round();m.n=k;g=m}if(!g)return null;k=0;var p=e.getParameter(g.p.z,g.p.x);0>p&&(k|=1);g.p.y>c&&(k|=2);p>e.length&&(k|=4);g.p.y<h&&(k|=8);if(0==k)return g.item=this,g;if(0==b)return null;k=0;l=null;m=Number.POSITIVE_INFINITY;
g=new w(e.l,h,e.m);p=new w(0,1,0);g=lk(a,b,d,g,p);g?!(g.p.y<h||g.p.y>c)&&g.t<m&&(m=g.t,l=g):k|=9;g=new w(e.l,c,e.m);p=new w(e.w-e.l,0,e.C-e.m);p.scale(1/e.length);(g=lk(a,b,d,g,p))?(p=e.getParameter(g.p.z,g.p.x),!(0>p||p>e.length)&&g.t<m&&(m=g.t,l=g)):k|=3;g=new w(e.w,c,e.C);p=new w(0,-1,0);g=lk(a,b,d,g,p);g?!(g.p.y>c||g.p.y<h)&&g.t<m&&(m=g.t,l=g):k|=6;g=new w(e.w,h,e.C);p=new w(e.l-e.w,0,e.m-e.C);p.scale(1/e.length);(g=lk(a,b,d,g,p))?(p=e.getParameter(g.p.z,g.p.x),!(0>p||p>e.length)&&g.t<m&&(m=g.t,
l=g)):k|=18;0==(k&1)&&(g=new w(e.l,c,e.m),(g=kk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&2)&&(g=new w(e.w,c,e.C),(g=kk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&4)&&(g=new w(e.w,h,e.C),(g=kk(a,b,d,g))&&g.t<m&&(m=g.t,l=g));0==(k&8)&&(g=new w(e.l,h,e.m),(g=kk(a,b,d,g))&&g.t<m&&(l=g));return l?(l.item=this,l):null};
Ig.prototype.Fg=function(a,b,c,d){c=this.y+c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ga.length;k++){e=this.ga[k];var l=Hc(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new w(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new w(e.l,c,e.m):h>e.length?e=new w(e.w,c,e.C):(h/=e.length,g=1-h,e=new w(e.l*g+e.w*h,c,e.m*g+e.C*h),e.round()));c=new w(a.x-e.x,a.y-e.y,a.z-e.z);c.pa(1);c.d=oc(e,c)+b;a=oc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Jg.prototype.Fg=function(a,b,c,d){c=this.y-c;for(var e,h=null,g=Number.POSITIVE_INFINITY,k=0;k<this.ga.length;k++){e=this.ga[k];var l=Hc(e,a.z,a.x);l<g&&(g=l,h=e)}e=h;0<=g?e=new w(a.x,c,a.z):(h=e.getParameter(a.z,a.x),0>h?e=new w(e.l,c,e.m):h>e.length?e=new w(e.w,c,e.C):(h/=e.length,g=1-h,e=new w(e.l*g+e.w*h,c,e.m*g+e.C*h),e.round()));c=new w(a.x-e.x,a.y-e.y,a.z-e.z);c.pa(1);c.d=oc(e,c)+b;a=oc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Hg.prototype.Fg=function(a,b,c,d){var e=this.o-c,h=this.v+c;c=null;var g=this.W;var k=g.getParameter(a.z,a.x);if(0>k)k=new w(g.l,a.y,g.m),k.y>h?k.y=h:k.y<e&&(k.y=e);else if(k>g.length)k=new w(g.w,a.y,g.C),k.y>h?k.y=h:k.y<e&&(k.y=e);else{k/=g.length;var l=1-k;k=new w(g.l*l+g.w*k,a.y,g.m*l+g.C*k);k.y>h?k.y=h:k.y<e?k.y=e:(c=new w(g.C-g.m,0,g.l-g.w),c.scale(1/g.length));k.round()}null==c&&(c=new w(a.x-k.x,a.y-k.y,a.z-k.z),c.pa(1));c.d=oc(k,c)+b;a=oc(a,c)-c.d;2<a||a<-b||(c.source=this,d&&d.push(c))};
Ig.prototype.ik=function(a,b){var c=$a(.5*Tj.y,b.y,a.y-this.y);if(!c)return null;var d=new gk;d.t=c.Nc;if(0>d.t)return null;d.p=(new w(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=n(this.ga);for(b=a.next();!b.done;b=a.next())if(0>Hc(b.value,d.p.z,d.p.x))return null;d.item=this;d.n=new w(0,1,0);return d};
Jg.prototype.ik=function(a,b){if(a.y>=this.y)return null;var c=$a(.5*Tj.y,b.y,a.y-this.y);if(!c)return null;var d=new gk;d.t=c.Oa;if(0>d.t)return null;d.p=(new w(a.x+b.x*d.t,this.y,a.z+b.z*d.t)).round();a=n(this.ga);for(b=a.next();!b.done;b=a.next())if(0>Hc(b.value,d.p.z,d.p.x))return null;d.item=this;d.n=new w(0,-1,0);return d};
Hg.prototype.ik=function(a,b){var c=Hc(this.W,a.z,a.x);if(0>c)return null;var d=Vc(this.W,1),e=d.x*b.z+d.y*b.x;if(0<=e)return null;var h=new gk;h.t=-c/e;if(0>h.t)return null;h.p=(new w(a.x+b.x*h.t,a.y+.5*(2*b.y+Tj.y*h.t)*h.t,a.z+b.z*h.t)).round();if(h.p.y>=this.v||h.p.y<this.o)return null;a=this.W.getParameter(h.p.z,h.p.x);if(0>a||a>=this.W.length)return null;h.item=this;h.n=new w(d.y,0,d.x);return h};
Ig.prototype.xj=function(a){for(var b=n(this.ga),c=b.next();!c.done;c=b.next())c=c.value,a.Ka(c.w,this.y,c.C)};Jg.prototype.xj=function(a){for(var b=n(this.ga),c=b.next();!c.done;c=b.next())c=c.value,a.Ka(c.w,this.y,c.C)};Hg.prototype.xj=function(a){a.Ka(this.W.l,this.o,this.W.m);a.Ka(this.W.w,this.v,this.W.C)};
function mk(){if(this.wa){for(var a=new Od,b=n(this.wa),c=b.next();!c.done;c=b.next())c.value.xj(a);this.pi=of(a.D,a.s,a.H,a.u);a=n(this.pi);for(b=a.next();!b.done;b=a.next())b=b.value,b.zd.push.apply(b.zd,ba(this.wa))}}function nk(){if(this.pi){for(var a=n(this.pi),b=a.next();!b.done;b=a.next())b=b.value,b.zd.splice(b.zd.indexOf(this.wa[0]),this.wa.length);delete this.pi}};function ok(){this.height=this.width=2;this.depth=this.color=null}
ok.prototype.create=function(){this.object=u.createFramebuffer();u.bindFramebuffer(u.FRAMEBUFFER,this.object);var a=this.color=new t.Ae;a.width=this.width;a.height=this.height;a.Gi=u.RGBA8;a.format=u.RGBA;a.type=u.UNSIGNED_BYTE;a.Ef=u.NEAREST;a.Qg=u.NEAREST;a.create();u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,a.object,0);a=this.depth=u.createRenderbuffer();u.bindRenderbuffer(u.RENDERBUFFER,a);u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH24_STENCIL8,this.width,this.height);
u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,a)};function pk(a){bg.call(this,a);this.Ja=new J;this.pitch=this.heading=0;this.yh=112;this.Qd=kc(40);this.Tm=!1;this.Yi=8E3}pk.prototype=Object.create(bg.prototype);pk.prototype.constructor=pk;pk.prototype.create=function(){var a=this.xk=new bg;a.Ja=this.M;M(a,this);a=this.yk=new bg;a.Ja=this.M;M(a,this);return this};
pk.prototype.step=function(){this.yh+=N.a;0>this.yh&&(this.yh=0);this.transform.m32=Math.pow(1.125,this.yh);N.d[2]&&(this.heading-=4E6*N.Hc.x,this.pitch+=4E6*N.Hc.y);var a=lc(this.heading),b=lc(this.pitch);zd(this.Ja);this.Ja.rotate(a,b,0);a=this.Ja.Ve();var c=this.Ja.We();b=this.Ja.Bd();if(N.d[1]){var d=2*Math.tan(this.Qd)*this.transform.m32/t.canvas.height,e=-N.Hc.x*d;d*=N.Hc.y;this.Ja.G+=e*a.x+d*c.x;this.Ja.m31+=e*a.y+d*c.y;this.Ja.m32+=e*a.z+d*c.z}c=new w(0,0,0);he.d.KeyW&&--c.z;he.d.KeyS&&(c.z+=
1);he.d.KeyA&&--c.x;he.d.KeyD&&(c.x+=1);if(e=c.length())c.scale(this.transform.m32/(60*e)),this.Ja.G+=c.x*a.x+c.z*b.x,this.Ja.m31+=c.x*a.y+c.z*b.y,this.Ja.m32+=c.x*a.z+c.z*b.z;a=this.xk;zd(a.transform);a.transform.G=-this.Yi;a.transform.rotate(Math.atan(.5*-this.Yi/this.transform.m32),0,0);a.Qd=this.Qd;a=this.yk;zd(a.transform);a.transform.G=this.Yi;a.transform.rotate(Math.atan(.5*this.Yi/this.transform.m32),0,0);a.Qd=this.Qd;bg.prototype.step.call(this);return this};t.Animation=function(){t.Node.call(this);this.length=0;this.hc=NaN;this.vh={}};t.Animation.prototype=Object.create(Node.prototype);f=t.Animation.prototype;f.constructor=t.Animation;f.step=function(){Node.prototype.step.call(this)};f.play=function(){this.hc=t.j};f.key=function(a,b,c){var d=this.vh[a];d||(d=this.vh[a]=new qk);return d.key(b,c)};f.print=function(){console.log("{");console.log("let a = new NG.Animation();");for(var a in this.vh)this.vh.hasOwnProperty(a)&&this.vh[a].print(a);console.log("}")};
t.Animation.S=function(a,b){b.reset();b.translate(a[0],a[1],a[2]);b.rotate(a[3],a[4],a[5]);return b};function qk(){this.keys=new ab(rk)}qk.prototype.key=function(a,b){var c=this.keys.get(a);c||(c=new sk,c.t=a,this.keys.add(c));c.Fb=b;return c};qk.prototype.print=function(a){for(var b=0;b<this.keys.elements.length;b++){var c=this.keys.elements[b];console.log("a.key('"+a+"', "+c.t+", "+c.Fb+");")}};function sk(){this.Fb=this.t=0}
function rk(a,b){return isNaN(a)?a.t<b.t?-1:a.t>b.t?1:0:a<b.t?-1:a>b.t?1:0};function Li(a,b,c,d,e,h){t.Node.call(this);this.h=new w(a.l,b+112500,a.m);this.yd=-Infinity;this.kh=NaN;this.open=this.state=0;e.na!=h.na&&(this.Tg=Math.max(e.na,h.na));M(this,t.ug);var g=new jg(t.i.Ac.get("bayDoor01"));g.transform.G=this.h.x;g.transform.m31=this.h.y;g.transform.m32=this.h.z;g.transform.F=-a.fa;g.transform.N=a.aa;g.transform.O=-a.aa;g.transform.m22=-a.fa;M(g,t.ug);g.create();Td(g,e.ia);var k=n(g.Kc);for(b=k.next();!b.done;b=k.next())b=b.value,b.mi=!0,b.A=t.i.va.get("physical"),b.ha=
t.i.P.get("BayDoor01"),b.$=lh,b.Fa=["portalLightIndex",e.$e,!0,"numPortals",e.Eb.length,!0,"color",gd,!1];this.Rh=g;this.Cc=c;this.Xd=e;e.ig||(e.ig=[]);e.ig.push(g);c=new jg(t.i.Ac.get("bayDoor01"));c.transform.G=this.h.x;c.transform.m31=this.h.y;c.transform.m32=this.h.z;c.transform.F=a.fa;c.transform.N=-a.aa;c.transform.O=a.aa;c.transform.m22=a.fa;M(c,t.ug);c.create();Td(c,h.ia);e=n(c.Kc);for(b=e.next();!b.done;b=e.next())b=b.value,b.mi=!0,b.A=t.i.va.get("physical"),b.ha=t.i.P.get("BayDoor01"),b.$=
lh,b.Fa=["portalLightIndex",h.$e,!0,"numPortals",h.Eb.length,!0,"color",gd,!1];this.Qh=c;this.Wc=d;this.Wd=h;h.ig||(h.ig=[]);h.ig.push(c);this.wa=[];h=[new E(-6250,-112500),new E(6250,-112500),new E(6250,112500),new E(-6250,112500)];for(d=0;d<h.length;d++)h[d]=a.vb(h[d].x,h[d].y);a=[];d=h[h.length-1];h=n(h);for(c=h.next();!c.done;c=h.next())c=c.value,a.push(new Cc(d.x,d.y,c.x,c.y)),d=c;this.wa.push(new Jg(a,this.h.y-112500));this.wa.push(new Hg(Xc(a[0]),this.h.y-112500,this.h.y+112500),new Hg(Xc(a[2]),
this.h.y-112500,this.h.y+112500));a=n(this.wa);for(d=a.next();!d.done;d=a.next())d=d.value,d.item=this,d.Eh();mk.call(this);this.update()}Li.prototype=Object.create(t.Node.prototype);f=Li.prototype;f.constructor=Li;
f.step=function(){if(!(t.j%4)){var a=Infinity,b=0;this.Xd.na<=Vh&&this.Xd.na>=Wh&&b++;this.Wd.na<=Vh&&this.Wd.na>=Wh&&b++;b||this.remove();for(var c=n(t.g.Dc),d=c.next();!d.done;d=c.next())d=d.value,d.gb&&(d=Math.abs(d.h.x-this.h.x)+Math.abs(d.h.y-this.h.y)+Math.abs(d.h.z-this.h.z),d<a&&(a=d));if(t.g.ma){var e=t.g.ma;c=e=Math.abs(e.h.x-this.h.x)+Math.abs(e.h.y-this.h.y)+Math.abs(e.h.z-this.h.z);c<a&&(a=c)}if(0==this.state&&0==this.open)5E5>a&&(isNaN(this.Tg)?(this.state=1,this.yd=4*Math.floor(t.j/
4),this.kh=NaN):t.g.td||(2==b?(this.state=1,this.yd=4*Math.floor(t.j/4),this.kh=NaN):5E5>e&&t.g.ma.Na.na<this.Tg&&(ah=t.j)));else if(1==this.state&&1==this.open)if(isNaN(this.Tg))1E6<=a&&(isNaN(this.kh)&&(this.kh=t.j),0<=t.j-this.kh&&(this.state=0,this.yd=t.j));else if(1E6<=a||t.g.ma.Na.na==this.Tg)this.state=0,this.yd=t.j;a=(t.j-this.yd)/36;if(!(1<a)){0==this.state?(this.open=1-Math.pow(a,2),1==a&&t.g.ma.Na.na==this.Tg&&(Wh=this.Tg,bh=t.j,ah=NaN)):1==this.state&&(this.open=Math.pow(a,2));a=n(this.wa);
for(b=a.next();!b.done;b=a.next())b.value.yd=t.j;this.update()}}};f.update=function(){var a=this.Cc.o+(this.Cc.height-12500)*this.open;this.Cc.v=this.Wc.v=this.wa[0].y=this.wa[1].o=this.wa[2].o=a;this.wa[0].da.y=this.wa[1].da.o=this.wa[2].da.o=a;this.Rh.transform.m31=this.Qh.transform.m31=a+112500;this.Rh.Kc[0].Fa[1]=this.Xd.$e;this.Qh.Kc[0].Fa[1]=this.Wd.$e;this.Rh.Kc[0].Fa[4]=this.Xd.Eb.length;this.Qh.Kc[0].Fa[4]=this.Wd.Eb.length;this.Rh.Kc[0].Fa[7]=this.Xd.style.bd;this.Qh.Kc[0].Fa[7]=this.Wd.style.bd};
f.ab=function(){t.A.J("clipY",this.h.y+225E3,!1)};f.remove=function(){this.Rh.remove();this.Qh.remove();nk.call(this);for(var a=n(this.wa),b=a.next();!b.done;b=a.next())b.value.yd=t.j;t.Node.prototype.remove.call(this)};
function Ki(a,b,c,d){t.Ga.call(this);this.h=new w(a.l,b+62500,a.m);this.transform.G=this.h.x;this.transform.m31=this.h.y;this.transform.m32=this.h.z;this.transform.F=-a.fa;this.transform.N=a.aa;this.transform.O=-a.aa;this.transform.m22=-a.fa;this.transform.F*=87500;this.transform.L*=87500;this.transform.N*=87500;this.transform.I*=62500;this.transform.m11*=62500;this.transform.m12*=62500;M(this,t.Lf);this.Xd=c;this.Wd=d;this.wa=[];b=[new E(-625,-87500),new E(625,-87500),new E(625,87500),new E(-625,
87500)];for(c=0;c<b.length;c++)b[c]=a.vb(b[c].x,b[c].y);c=[];d=b[b.length-1];var e=n(b);for(b=e.next();!b.done;b=e.next())b=b.value,c.push(new Cc(d.x,d.y,b.x,b.y)),d=b;this.wa.push(new Hg(Xc(c[0]),this.h.y-112500,this.h.y+112500),new Hg(Xc(c[2]),this.h.y-112500,this.h.y+112500));for(b=0;2>b;b++)c=this.wa[b],c.item=this,c.flags|=dk,c.Eh();this.wa[0].ba=this.Xd.index;this.wa[1].ba=this.Wd.index;b=[new E(-9375,-87500),new E(9375,-87500),new E(9375,87500),new E(-9375,87500)];for(c=0;c<b.length;c++)b[c]=
a.vb(b[c].x,b[c].y);a=[];c=b[b.length-1];d=n(b);for(b=d.next();!b.done;b=d.next())b=b.value,a.push(new Cc(c.x,c.y,b.x,b.y)),c=b;this.wa.push(new Hg(Xc(a[0]),this.h.y-112500,this.h.y+112500),new Hg(Xc(a[2]),this.h.y-112500,this.h.y+112500));for(a=2;4>a;a++)this.wa[a].flags|=ek;mk.call(this)}Ki.prototype=Object.create(t.Ga.prototype);Ki.prototype.constructor=Ki;Ki.S=function(a,b){return a.depth-b.depth};Ki.prototype.update=function(){};
Ki.prototype.$h=function(){return!this.Sa||this.Xd.ia.qa<t.j&&this.Wd.ia.qa<t.j?!1:!0};Ki.Xc=function(){t.Ab(sg);t.cb(t.i.va.get("physical"));t.Nb(0,t.i.P.get("Window01"));mh.bind();t.rb(1);t.Tb(1);t.A.J("color",gd);t.A.J("architectureLighting",1,!0);t.A.J("lightingFancy",t.Ca.lightingFancy,!0)};
Ki.prototype.ab=function(){t.A.J("modelMatrix",this.M);t.A.J("portalLightIndex",this.Xd.$e,!0);t.A.J("numPortals",this.Xd.Eb.length,!0);t.A.J("ambientLight",this.Xd.ia.mb,!1);u.drawArrays(u.TRIANGLE_FAN,tg(0,1),4);var a=(new J).set(this.M);a.F=-a.F;a.L=-a.L;a.N=-a.N;a.O=-a.O;a.m21=-a.m21;a.m22=-a.m22;t.A.J("modelMatrix",a);t.A.J("portalLightIndex",this.Wd.$e,!0);t.A.J("numPortals",this.Wd.Eb.length,!0);t.A.J("ambientLight",this.Wd.ia.mb,!1);u.drawArrays(u.TRIANGLE_FAN,tg(0,1),4)};
Ki.prototype.remove=function(){nk.call(this);for(var a=n(this.wa),b=a.next();!b.done;b=a.next())b.value.yd=t.j;t.Ga.prototype.remove.call(this)};
function tk(a,b,c){t.Pa.call(this,"crate");this.Gb=120;this.h.x=a;this.h.y=b+5E4;this.h.z=c;Dd(this.transform,this.h);a=[new w(-5E4,0,-5E4),new w(-5E4,0,5E4),new w(5E4,0,5E4),new w(5E4,0,-5E4)];b=n(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.vb(c,c),c.round();a=[new Cc(a[0].z,a[0].x,a[1].z,a[1].x),new Cc(a[1].z,a[1].x,a[2].z,a[2].x),new Cc(a[2].z,a[2].x,a[3].z,a[3].x),new Cc(a[3].z,a[3].x,a[0].z,a[0].x)];this.wa=[];this.wa.push(new Ig(a,this.h.y+5E4),new Jg(a,this.h.y-5E4));a=dd(a);
this.wa.push(new Hg(a[0],this.h.y-5E4,this.h.y+5E4),new Hg(a[1],this.h.y-5E4,this.h.y+5E4),new Hg(a[2],this.h.y-5E4,this.h.y+5E4),new Hg(a[3],this.h.y-5E4,this.h.y+5E4));a=n(this.wa);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;mk.call(this)}tk.prototype=Object.create(t.Pa.prototype);f=tk.prototype;f.constructor=tk;
f.create=function(){var a=this.Xa=new jg(t.i.Ac.get("lootBox"));a.Ja=this.M;M(a,this);a.create();this.Pb=a.src.Pb;Td(a,this.ia);Ud(a,6E4);t.g.Hg.push(this);uk.push(this);a=n(this.Jj);for(var b=a.next();!b.done;b=a.next())b=b.value,b.Kb&&(t.g.od[b.Kb.nc]+=b.ya);t.Pa.prototype.create.call(this)};
f.step=function(){if(t.g.ma){var a=td(t.g.ma.h,this.h,new w(0,0,0));a.y=0;a.pa(1);this.transform.F=a.z;this.transform.N=-a.x;this.transform.O=a.x;this.transform.m22=a.z;this.transform.rotate(kc(-15),0,0)}10==t.j-this.ag&&this.qh();t.j==this.gf+4?(this.Xa.A=t.i.va.get("flash"),this.Xa.$=t.i.Lb.get("flashWhite")):t.j==this.gf+6?this.Xa.$=t.i.Lb.get("flashRed"):t.j==this.gf+8&&(delete this.Xa.$,delete this.Xa.A);t.Pa.prototype.step.call(this)};
f.$f=function(a){isNaN(this.ag)&&(this.gf=t.j,this.Gb-=a,0>=this.Gb&&(this.ag=t.j))};f.qh=function(){for(var a=n(this.Jj),b=a.next();!b.done;b=a.next())b=b.value,b=new X(b),b.h.set(this.h.x,this.h.y,this.h.z),b.h.z+=5E4*(ob(nb)-.5),b.h.x+=5E4*(ob(nb)-.5),b.B.set(6E3*(ob(nb)-.5),9E3*(ob(nb)+1),6E3*(ob(nb)-.5)),M(b,t.Vi),b.create();t.i.X.get("hit02").play({gain:1});this.remove()};
f.remove=function(){t.Pa.prototype.remove.call(this);this.Xa.remove();t.g.Hg.splice(t.g.Hg.indexOf(this),1);vk.call(this);if(isNaN(this.ag))for(var a=n(this.Jj),b=a.next();!b.done;b=a.next())b=b.value,b.Kb&&(t.g.od[b.Kb.nc]-=b.ya);this.Hd.Pg=null;this.Hd.Jg=t.j;this.Hd=null;nk.call(this);a=n(this.wa);for(b=a.next();!b.done;b=a.next())b.value.yd=t.j};
function wk(a,b,c){t.Pa.call(this,"barrel");this.Gb=120;this.Rb=5E5;this.h.x=a;this.h.y=b+65E3;this.h.z=c;Dd(this.transform,this.h);a=[new w(-5E4,0,-5E4),new w(-5E4,0,5E4),new w(5E4,0,5E4),new w(5E4,0,-5E4)];b=n(a);for(c=b.next();!c.done;c=b.next())c=c.value,this.transform.vb(c,c),c.round();a=[new Cc(a[0].z,a[0].x,a[1].z,a[1].x),new Cc(a[1].z,a[1].x,a[2].z,a[2].x),new Cc(a[2].z,a[2].x,a[3].z,a[3].x),new Cc(a[3].z,a[3].x,a[0].z,a[0].x)];this.wa=[];this.wa.push(new Ig(a,this.h.y+5E4),new Jg(a,this.h.y-
5E4));a=dd(a);this.wa.push(new Hg(a[0],this.h.y-5E4,this.h.y+5E4),new Hg(a[1],this.h.y-5E4,this.h.y+5E4),new Hg(a[2],this.h.y-5E4,this.h.y+5E4),new Hg(a[3],this.h.y-5E4,this.h.y+5E4));a=n(this.wa);for(b=a.next();!b.done;b=a.next())b=b.value,b.item=this,b.flags|=1;mk.call(this)}wk.prototype=Object.create(t.Pa.prototype);f=wk.prototype;f.constructor=wk;
f.create=function(){var a=this.Xa=new jg(t.i.Ac.get("nitroBarrel"));a.Ja=this.M;M(a,this);a.create();this.Pb=a.src.Pb;Td(a,this.ia);Ud(a,6E4);t.g.Eg.push(this);uk.push(this);t.Pa.prototype.create.call(this)};
f.step=function(){if(isNaN(this.ag)){if(t.g.ma){var a=td(t.g.ma.h,this.h,new w(0,0,0));a.y=0;a.pa(1);this.transform.F=a.z;this.transform.N=-a.x;this.transform.O=a.x;this.transform.m22=a.z;this.transform.rotate(kc(15),0,0)}a=1+.25*Math.sin(t.j*Math.PI/3)*(1-this.Gb/120);this.Gb=Math.min(this.Gb+2,120);zd(this.Xa.transform);this.Xa.transform.scale(a,a,a);t.j==this.gf+4?(this.Xa.A=t.i.va.get("flash"),this.Xa.$=t.i.Lb.get("flashWhite")):t.j==this.gf+6?this.Xa.$=t.i.Lb.get("flashRed"):t.j==this.gf+8&&
(delete this.Xa.$,delete this.Xa.A);t.Pa.prototype.step.call(this)}else{a=t.j-this.ag;var b=1+1/12*a;zd(this.Xa.transform);this.Xa.transform.scale(b,b,b);6==a&&this.qh()}};f.$f=function(a){isNaN(this.ag)&&(this.gf=t.j,this.Gb-=a,0>=this.Gb&&(this.ag=t.j))};
f.qh=function(){function a(e){var h=td(e.h,b.h,new w),g=h.qc();hf(b.h,h,eg)||(h=b.Rb*b.Rb/g*360,1<=h&&e.$f(h))}var b=this;t.i.X.get("explode01").play({gain:1});if(t.g.ma){var c=t.g.ma,d=td(c.h,this.h,new w);d=this.Rb*this.Rb/d.qc();d=Math.min(5,d);c.Da+=kc(5)*d}d=n(t.g.Eg);for(c=d.next();!c.done;c=d.next())a(c.value);d=n(t.g.Hg);for(c=d.next();!c.done;c=d.next())a(c.value);d=n(t.g.Dc);for(c=d.next();!c.done;c=d.next())a(c.value);this.Na&&(c=new xk(1E5,this.Na),c.transform.G=this.h.x,c.transform.m31=
this.h.y,c.transform.m32=this.h.z,M(c,t.Yd),c.create());this.remove()};f.remove=function(){t.Pa.prototype.remove.call(this);this.Xa.remove();t.g.Eg.splice(t.g.Eg.indexOf(this),1);vk.call(this);nk.call(this);for(var a=n(this.wa),b=a.next();!b.done;b=a.next())b.value.yd=t.j};function yk(a){t.Node.call(this,"GunManager "+a.name);this.ja=a;this.ob=[];this.Ce=0;this.K=null;this.action="ready";this.V=NaN;this.focus=0;this.cc=!1;this.Td=this.Ad=null;this.Sb=this.Cd=this.de=this.Be=0;this.Va=null;this.Re=this.Qe=0;this.jf=[];this.hf=0}yk.prototype=Object.create(t.Node.prototype);f=yk.prototype;f.constructor=yk;
f.create=function(){var a=this.Vg=new t.Ga("muzzleFlare");pg.call(a);a.ab=rg;a.A=t.i.va.get("image");a.ha=t.i.P.get("muzzleFlare01");a.$=new Xd;a.$.Ha=1;a.color=new G(255,255,255,0);a.nb=12500;a.Sa=0;a.Ja=this.ja.Zd.M;M(a,t.bf)};
f.step=function(){t.j==this.jm+1&&(this.Lg.hb.x-=this.Vk,this.Lg.hb.y-=this.Vk,this.Lg.hb.z-=this.Vk,this.jm=NaN,this.Lg=null);if(this.K){var a=this.ja;a.lh=null;zk(a.Qc.M);var b=a.Ra.K.Wh(a.Qc.M);b&&(a.lh=b)}--this.hf;0>this.hf&&(this.hf=0);if((he.p[t.xa.NextGunKey]||N.p[t.xa.NextGunMouseButton])&&this.ob.length){a=this.ob.length-1;for(b=0;b<this.ob.length;b++)if(this.ob[b]==this.K){a=b;break}for(b=0;b<this.ob.length;b++){a++;a%=this.ob.length;var c=this.ob[a];if(c&&c!=this.K&&!(c instanceof Ak)){this.Ad=
c;break}}}if((he.p[t.xa.PrevGunKey]||N.p[t.xa.PrevGunMouseButton])&&this.ob.length){a=this.ob.length-1;for(b=0;b<this.ob.length;b++)if(this.ob[b]==this.K){a=b;break}for(b=0;b<this.ob.length;b++)if(a--,0>a&&(a=this.ob.length-1),(c=this.ob[a])&&c!=this.K&&!(c instanceof Ak)){this.Ad=c;break}}a=n(this.ob);b=a.next();a:for(;!b.done;b=a.next())if((b=b.value)&&(!(b instanceof Ak)||b.$a))if(c=b.constructor.nc+"MouseButton",b==this.K){if(N.p[t.xa[c]]&&(this.Cd=1),N.r[t.xa[c]]&&(this.Cd=0),this.Td&&he.p[t.xa[b.constructor.nc+
"Key"]]){this.Td=this.Ad=null;this.Cd=0;break a}}else{if(N.p[t.xa[c]]){this.Ad=b;this.Td=c;this.Cd=1;break a}if(he.p[t.xa[b.constructor.nc+"Key"]]){this.Ad=b;this.Td=null;this.Cd=0;break a}}N.r[t.xa[this.Td]]&&(this.Cd=0);if(he.p[t.xa.GunFireKey]||N.p[t.xa.GunFireMouseButton])this.de=1;if(he.r[t.xa.GunFireKey]||N.r[t.xa.GunFireMouseButton])this.de=0;if(he.p[t.xa.GunActionKey]||N.p[t.xa.GunActionMouseButton])this.Be=1;if(he.r[t.xa.GunActionKey]||N.r[t.xa.GunActionMouseButton])this.Be=0;if(this.K&&
this.K instanceof Bk){if(he.p[t.xa.ReloadKey]||N.p[t.xa.ReloadMouseButton])this.Sb=1;if(he.r[t.xa.ReloadKey]||N.r[t.xa.ReloadMouseButton])this.Sb=0}else if(he.p[t.xa.ReloadKey]||N.p[t.xa.ReloadMouseButton])this.Sb=1;this.Be||(this.focus-=1/6,0>this.focus&&(this.focus=0));this.K?this.K[this.action].call(this):Ck(this)};
f.ab=function(){if(this.Va){u.enable(u.SCISSOR_TEST);t.tc.hd.J("viewMatrix",Nd);t.tc.hd.upload();t.bc(0);t.Tb(0);t.rb(2);t.Ab(sg);t.cb(t.i.va.get("physicalCardThreshold"));t.A.J("color",gd);t.A.J("ambientLight",this.ja.ia.mb,!1);var a=this.K.constructor.gi;t.Nb(0,a);var b=Math.round(a.width/2-this.Va.x+this.Va.c+this.Qe),c=Math.round(a.height/2-this.Va.y+this.Va.f+this.Re);u.scissor(this.Va.c+Math.round(this.Qe),-this.Va.f-Math.round(this.Re)+t.canvas.height-this.Va.b,this.Va.a,this.Va.b);var d=new J;
d.F=a.width/t.canvas.width;d.m11=-a.height/t.canvas.height;d.G=-1+2*b/t.canvas.width;d.m31=1-2*c/t.canvas.height;t.A.J("modelMatrix",d);u.drawArrays(u.TRIANGLE_FAN,0,4);u.disable(u.SCISSOR_TEST)}};function Ck(a){if(!a.Ad)return!1;a.Va=null;a.focus=0;a.Sb=0;a.hf=0;a.cc=!1;a.vl=a.K;a.K=a.Ad;t.g.pf();a.action="equip";a.V=t.j+1;a.Ad=null;return!0}f.Zb=function(){var a=400*this.ja.Ye;a*=1-2/3*this.focus;this.Qe=this.ja.Di*a;this.Re=this.ja.Zb*a};
yk.Jb=function(a,b,c,d,e,h){var g=new J;b*=1E5;c*=1E5;a*=1E5;g.rotate(kc(h),kc(e),kc(d));g.scale(1,1,1);g.translate(b,c,a);d=g;e=new J;e.F=d.m22;e.L=d.O;e.N=d.m21;e.I=d.N;e.m11=d.F;e.m12=d.L;e.O=d.m12;e.m21=d.I;e.m22=d.m11;e.G=d.m32;e.m31=d.G;e.m32=d.m31;d=e;e=new J;e.F=d.F;e.L=d.L;e.N=d.N;e.I=d.O;e.m11=d.m21;e.m12=d.m22;e.O=-d.I;e.m21=-d.m11;e.m22=-d.m12;e.G=d.G;e.m31=d.m32;e.m32=-d.m31;return e};yk.prototype.kc=function(a){this.K instanceof Bk||this.K.kc(a)};
function Dk(a){this.Ij=a;this.actions={};this.Gc=this.jb=this.$a=0;this.Wf=this.Vf=-1;this.yj=2/3;this.Sf=this.rc=0;this.Rb=1E8;this.oh=this.Rg=0}function Ek(a){return a.Gc+a.jb+a.$a}Dk.prototype.ej=function(){return!1};Dk.prototype.Of=function(){return!1};
function zk(a){var b=new w(a.G,a.m31,a.m32);a=new w(-a.O,-a.m21,-a.m22);for(var c=this.Rb,d=n(t.g.Dc),e=d.next();!e.done;e=d.next()){e=e.value;var h=jk(b,a,e.h,e.ta,e.eb);if(h.Se){h=h.Se;if(0>h.t)continue;if(h.t>=c)continue;h=td(h.p,b,new w)}else{var g=h.Th.ca(),k=h.kj-e.ta;g.x+=h.De.x*k;g.y+=h.De.y*k;g.z+=h.De.z*k;h=td(g,b,new w);if(0>=oc(h,a))continue}hf(b,h,fk)||(e.Mi=t.j)}}
function Fk(a){var b=new w(a.G,a.m31,a.m32);a=new w(-a.O,-a.m21,-a.m22);var c=this.Rb,d=[];d.cmp=function(p,r){return p.kg>r.kg?-1:1};for(var e=n(t.g.Dc),h=e.next();!h.done;h=e.next())if(h=h.value,h.gb||!(t.j>h.V)){var g=jk(b,a,h.h,h.ta-this.oh,h.eb);if(g.Se){var k=g.Se;0>k.t||k.t>=c||(k.p.kg=c-k.t,k.p.item=h,Sa(d,k.p))}else{k=g.Th.ca();var l=g.kj-(h.ta-this.oh);k.x+=g.De.x*l;k.y+=g.De.y*l;k.z+=g.De.z*l;l=td(g.Th,b,new w);g=l.pa(1);if(!(g>this.Rb)){var m=td(k,b,new w);0>=oc(m,a)||(m.normalize(),l=
oc(l,m),m=this.Rg,5E5<g&&(m=Math.atan(5E5*Math.tan(m)/g)),Math.acos(l)>=m||(k.kg=l-1,k.item=h,Sa(d,k)))}}}a=n(d);for(c=a.next();!c.done;c=a.next())if(c=c.value,!hf(b,td(c,b,new w)))return c;return null}
function Gk(a,b,c){function d(m){m=new Hk(m);m.transform.G=a.p.x;m.transform.m31=a.p.y;m.transform.m32=a.p.z;M(m,t.Yd);m.create();m.step()}function e(){var m=new Ik;m.Ji=120*(ob(nb)+.5);m.nb=2E4;m.transform.G=a.p.x;m.transform.m31=a.p.y;m.transform.m32=a.p.z;m.B.x=a.n.x;m.B.y=a.n.y;m.B.z=a.n.z;m.B.scale(2E4*ob(nb)+1E4);M(m,t.Yd);m.create();m.step()}if(a.item instanceof Z){var h=new J,g=new w,k=new w,l=a.Fb.ca();pc(l,g,k);h.cf(g);h.df(k);h.ef(l);Dd(h,a.p);Jk(a.item,h,c);M(new Kk,t.Gm);a.item.$f(b)}else a.item instanceof
wk?(d(31250),e(),a.item.$f(b)):a.item instanceof tk?(d(31250),e(),a.item.$f(b)):(d(12500),e(),Gg(t.g.Ek,new w(2343.75*Math.round(a.p.x/2343.75),2343.75*Math.round(a.p.y/2343.75),2343.75*Math.round(a.p.z/2343.75)),a.n,Math.PI,18750,pb(16),16))}Dk.prototype.tg=function(){var a=this.Wf-this.jb;a=Math.min(a,this.$a);return a*this.ve-this.rc};Dk.prototype.kc=function(a){this.rc+=Math.min(a,this.tg());a=Math.floor(this.rc/this.ve);this.jb+=a;this.$a-=a;t.g.pf();this.rc-=a*this.ve};
function Lk(a){Dk.call(this,a);this.Vf=360;this.Wf=30;this.jb=0;this.$a=2*this.Wf;this.yj=1;this.Rg=kc(4);this.oh=8E3;this.ve=5.2;a.ob[this.constructor.Fc]=this;a.Ce++}Lk.prototype=Object.create(Dk.prototype);Lk.prototype.constructor=Lk;
Lk.La={CarbineEquip02:{c:291,f:265,x:1204,y:1548,a:189,b:31},CarbineEquip03:{c:90,f:191,x:814,y:1548,a:390,b:105},CarbineEquip04:{c:126,f:152,x:0,y:1548,a:354,b:144},CarbineEquip05:{c:46,f:96,x:1012,y:255,a:434,b:200},CarbineEquip06:{c:92,f:68,x:1281,y:0,a:356,b:228},CarbineEquip07:{c:106,f:65,x:960,y:0,a:321,b:231},CarbineEquip08:{c:129,f:76,x:0,y:255,a:282,b:220},CarbineEquip09:{c:145,f:91,x:282,y:255,a:250,b:205},CarbineEquip10:{c:163,f:109,x:1231,y:670,a:220,b:187},CarbineEquip11:{c:184,f:125,
x:292,y:1047,a:220,b:171},CarbineEquip12:{c:198,f:133,x:1541,y:1047,a:253,b:163},CarbineEquip13:{c:207,f:132,x:1296,y:1047,a:245,b:164},CarbineAim01:{c:194,f:133,x:0,y:1225,a:229,b:163},CarbineAim02:{c:170,f:136,x:1247,y:1225,a:187,b:160},CarbineAim03:{c:157,f:137,x:184,y:1388,a:174,b:159},CarbineFire01:{c:209,f:131,x:1030,y:1047,a:266,b:165},CarbineFire02:{c:213,f:128,x:512,y:1047,a:246,b:168},CarbineFire03:{c:212,f:133,x:229,y:1225,a:248,b:163},CarbineAimFire01:{c:147,f:136,x:1434,y:1225,a:193,
b:160},CarbineAimFire02:{c:152,f:136,x:0,y:1388,a:184,b:160},CarbineAimFire03:{c:155,f:134,x:730,y:1225,a:178,b:162},CarbineReload01:{c:185,f:133,x:477,y:1225,a:253,b:163},CarbineReload02:{c:101,f:134,x:908,y:1225,a:339,b:162},CarbineReload03:{c:14,f:144,x:838,y:1388,a:432,b:152},CarbineReload04:{c:0,f:153,x:354,y:1548,a:460,b:143},CarbineReload05:{c:0,f:149,x:1270,y:1388,a:480,b:147},CarbineReload06:{c:0,f:139,x:358,y:1388,a:480,b:157},CarbineReload07:{c:0,f:107,x:271,y:670,a:480,b:189},CarbineReload08:{c:0,
f:41,x:0,y:0,a:480,b:255},CarbineReload09:{c:0,f:47,x:480,y:0,a:480,b:249},CarbineReload10:{c:0,f:95,x:532,y:255,a:480,b:201},CarbineReload11:{c:0,f:107,x:751,y:670,a:480,b:189},CarbineReload12:{c:0,f:111,x:311,y:860,a:480,b:185},CarbineReload13:{c:0,f:114,x:791,y:860,a:480,b:182},CarbineReload14:{c:59,f:115,x:1271,y:860,a:421,b:181},CarbineReload15:{c:200,f:109,x:1451,y:670,a:280,b:187},CarbineReload16:{c:235,f:103,x:309,y:475,a:245,b:193},CarbineReload17:{c:246,f:104,x:838,y:475,a:234,b:192},CarbineReload18:{c:241,
f:105,x:1072,y:475,a:239,b:191},CarbineReload19:{c:209,f:106,x:0,y:670,a:271,b:190},CarbineReload20:{c:172,f:99,x:1446,y:255,a:308,b:197},CarbineReload21:{c:171,f:101,x:0,y:475,a:309,b:195},CarbineReload22:{c:196,f:103,x:554,y:475,a:284,b:193},CarbineReload23:{c:164,f:105,x:1311,y:475,a:316,b:191},CarbineReload24:{c:158,f:109,x:0,y:860,a:311,b:187},CarbineReload25:{c:173,f:118,x:0,y:1047,a:292,b:178},CarbineReload26:{c:175,f:128,x:758,y:1047,a:272,b:168}};
Lk.prototype.equip=function(){var a=t.j-this.V;a+=5;var b=Math.floor(a/2.5);this.Va=this.K.constructor.La["CarbineEquip"+("00"+b).slice(-2)];this.Re=this.Qe=0;this.cc=this.K.jb;Ck(this)||(0==this.K.jb&&10<=this.K.$a&&(this.Sb=!0),this.Sb?(this.action="reload",this.V=t.j+1):9==a?this.ja.Da+=kc(1):9<=b&&(this.K.Bf.call(this,!0),this.K.Sd.call(this)||(this.kc(1),32.5<=a+1&&(this.action="ready"))))};
Lk.prototype.ready=function(){this.Va=this.K.constructor.La.CarbineEquip13;this.Zb();this.cc=this.K.jb;Ck(this)||(this.Sb?(this.action="reload",this.V=t.j+1):(this.K.Bf.call(this,!0),this.K.Sd.call(this)||this.kc(1)))};
Lk.prototype.fire=function(){var a=t.j-this.V,b=("00"+Math.floor(a)).slice(-2);this.Va=this.focus?this.K.constructor.La["CarbineAimFire"+b]||this.K.constructor.La.CarbineAim03:this.K.constructor.La["CarbineFire"+b]||this.K.constructor.La.CarbineEquip13;this.Zb();if(0==a){t.i.X.get("CarbineFire01").play({gain:.375,pitch:1.5});t.i.X.get("CarbineFire02").play({gain:.75,pitch:1.5});--this.K.jb;t.g.pf();!this.K.jb&&this.K.$a&&(this.Sb=1);this.hf+=35;this.Rd=this.focus?yk.Jb(0,.270042,-.06106,0,0,180):
yk.Jb(.053697,.319573,-.058355,-.833,.006,-179.61);a=this.Vg;a.Sa=1;b=255*(8*ob(nb)+1)/12&255;a.color.r=b;a.color.kb=b;a.color.ra=b;a.scale=ob(nb)+1;a.Jd=lc(mb());b=new J;b.translate(0,-35E3,0);Ad(this.Rd,b,a.transform);a=(new J).rotate(0,kc(2.5*ob(nb)),0);b=(new J).rotate(0,0,ob(nb)*Math.PI*2);var c=Mk(this.ja);Ad(c,b,c);Ad(c,a,c);a=this.K.Yc(c);a=n(a);for(b=a.next();!b.done;b=a.next())Gk(b.value,72,1.2);a=new Nk("CartridgeCarbineSpent");a.Dl=kc(6*(3*ob(nb)+1));a.transform.G-=2E3;a.transform.m31+=
2100;b=new J;Ad(this.ja.Zd.M,this.Rd,b);Ad(b,a.transform,a.transform);a.B.x-=3E3*(2*ob(nb)+1);a.B.z=-a.B.x;Bd(b,a.B,a.B);a.h.set(a.transform.G,a.transform.m31,a.transform.m32);a.B.add(this.ja.B);vd(a.B,a.Ib);M(a,t.bf);a.create();180<=this.hf&&(this.hf-=180,a=new Ok,a.nb=6E4,a.transform.m31-=45E3,b=new J,Ad(this.ja.Zd.M,this.Rd,b),Ad(b,a.transform,a.transform),a.B.y=-37500,Bd(b,a.B,a.B),a.B.add(this.ja.B),vd(a.B,a.Ib),a.ia=this.ja.ia,M(a,t.Yd),a.create(),a.step(),this.jf.push(a));3<this.jf.length&&
(M(this.jf[0],null),this.jf.splice(0,1))}else 1==a?this.Vg.Sa=0:2==a?this.ja.Da+=this.focus?kc(.5):kc(1):3<=a&&!Ck(this)&&(this.K.Bf.call(this,!1),this.K.Sd.call(this)||(this.kc(1),this.action="ready"))};
Lk.prototype.reload=function(){var a=t.j-this.V;a+=3;this.Va=this.K.constructor.La["CarbineReload"+("00"+Math.floor(a/3)).slice(-2)];this.Zb();this.cc=!1;this.Sb=0;Ck(this)||(this.focus-=1/6,0>this.focus&&(this.focus=0),3==a?(this.K.$a+=this.K.jb,this.K.jb=0,t.g.pf(),t.i.X.get("CarbineMagOut02").play({gain:1,pitch:1})):42==a?t.i.X.get("CarbineMagIn02").play({gain:1,pitch:1}):60==a?(this.ja.Da+=kc(1),this.K.kc(this.K.tg())):81<=a+1&&(this.action="ready"))};f=Lk.prototype;
f.Bf=function(a){this.Be&&(this.focus+=1/6,1<this.focus&&(this.focus=1));a&&this.focus&&(this.Va=this.K.constructor.La["CarbineAim"+("00"+Math.floor(3*this.focus)).slice(-2)]||this.K.constructor.La.CarbineEquip13)};f.Sd=function(){if(!this.de||1!=this.focus&&0!=this.focus)return!1;if(!this.K.jb)return this.K.$a&&(this.Sb=1),!1;this.action="fire";this.V=t.j+1;return!0};f.Wh=Fk;
f.Yc=function(a){var b=new w(a.G,a.m31,a.m32),c=new w(-a.O,-a.m21,-a.m22),d=this.Rb;if(a=hf(b,new w(c.x*d,c.y*d,c.z*d)))d=a.d;var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=n(t.g.Dc),g=h.next();!g.done;g=h.next())if(g=g.value,g.gb||!(t.j>g.V)){var k=jk(b,c,g.h,g.ta,g.eb).Se;!k||0>k.t||k.t>=d||(k.item=g,k.Fb=c,Sa(e,k))}b=null;d=c=NaN;e=n(e);for(h=e.next();!h.done;h=e.next())h=h.value,h.item.Ei>c||h.item.Ei==c&&h.t>d||(b=
h,c=h.item.Ei,d=h.t);e=[];b&&e.push(b);a&&e.push(a);return e};f.ej=function(){return 0>=this.$a||"reload"==this.Ij.action||6<this.jb?!1:!0};f.Of=function(){var a=Ek(this);return 0>=a?2:30>a?1:0};function Bk(a){Dk.call(this,a);this.Vf=12;this.Gc=this.Wf=0;this.$a=8;this.$j=!1;this.Rg=kc(0);this.ve=96;a.ob[this.constructor.Fc]=this;a.Ce++}Bk.prototype=Object.create(Dk.prototype);Bk.prototype.constructor=Bk;
Bk.La={ShotgunEquip01:{c:170,f:185,x:874,y:1644,a:310,b:111},ShotgunEquip02:{c:183,f:151,x:569,y:1351,a:297,b:145},ShotgunEquip03:{c:331,f:128,x:1175,y:704,a:149,b:168},ShotgunEquip04:{c:111,f:20,x:871,y:0,a:369,b:276},ShotgunEquip05:{c:140,f:0,x:0,y:0,a:340,b:296},ShotgunEquip06:{c:158,f:0,x:340,y:0,a:277,b:296},ShotgunEquip07:{c:173,f:0,x:617,y:0,a:254,b:296},ShotgunEquip08:{c:188,f:100,x:0,y:508,a:257,b:196},ShotgunEquip09:{c:195,f:152,x:1432,y:1351,a:258,b:144},ShotgunEquip10:{c:199,f:159,x:0,
y:1644,a:257,b:137},ShotgunEquip11:{c:201,f:160,x:257,y:1644,a:253,b:136},ShotgunEquip12:{c:197,f:156,x:1248,y:1500,a:254,b:140},ShotgunEquip13:{c:195,f:152,x:0,y:1500,a:254,b:144},ShotgunFire01:{c:202,f:152,x:254,y:1500,a:278,b:144},ShotgunFire02:{c:181,f:147,x:0,y:1351,a:299,b:149},ShotgunFire03:{c:175,f:133,x:0,y:884,a:305,b:163},ShotgunFire04:{c:177,f:118,x:299,y:704,a:303,b:178},ShotgunFire05:{c:182,f:112,x:651,y:508,a:298,b:184},ShotgunFire06:{c:184,f:112,x:949,y:508,a:296,b:184},ShotgunFire07:{c:183,
f:113,x:1245,y:508,a:297,b:183},ShotgunFire08:{c:181,f:116,x:0,y:704,a:299,b:180},ShotgunFire09:{c:187,f:120,x:602,y:704,a:293,b:176},ShotgunFire10:{c:200,f:125,x:895,y:704,a:280,b:171},ShotgunFire11:{c:211,f:132,x:1324,y:704,a:269,b:164},ShotgunFire12:{c:215,f:139,x:305,y:884,a:265,b:157},ShotgunFire13:{c:212,f:145,x:1320,y:1199,a:268,b:151},ShotgunFire14:{c:203,f:149,x:299,y:1351,a:270,b:147},ShotgunFire15:{c:196,f:152,x:532,y:1500,a:256,b:144},ShotgunCycle01:{c:187,f:139,x:570,y:884,a:209,b:157},
ShotgunCycle02:{c:162,f:109,x:475,y:508,a:176,b:187},ShotgunCycle03:{c:123,f:88,x:1399,y:296,a:176,b:208},ShotgunCycle04:{c:101,f:84,x:0,y:296,a:176,b:212},ShotgunCycle05:{c:103,f:84,x:176,y:296,a:174,b:212},ShotgunCycle06:{c:126,f:84,x:350,y:296,a:173,b:212},ShotgunCycle07:{c:126,f:86,x:1220,y:296,a:179,b:210},ShotgunCycle08:{c:127,f:85,x:1045,y:296,a:175,b:211},ShotgunCycle09:{c:126,f:84,x:523,y:296,a:173,b:212},ShotgunCycle10:{c:123,f:84,x:696,y:296,a:173,b:212},ShotgunCycle11:{c:101,f:84,x:869,
y:296,a:176,b:212},ShotgunCycle12:{c:97,f:82,x:1240,y:0,a:181,b:214},ShotgunCycle13:{c:93,f:83,x:1421,y:0,a:192,b:213},ShotgunCycle14:{c:114,f:108,x:257,y:508,a:218,b:188},ShotgunCycle15:{c:166,f:139,x:779,y:884,a:250,b:157},ShotgunReload01:{c:196,f:153,x:788,y:1500,a:230,b:143},ShotgunReload02:{c:209,f:156,x:1502,y:1500,a:158,b:140},ShotgunReload03:{c:183,f:164,x:510,y:1644,a:182,b:132},ShotgunReload04:{c:150,f:151,x:866,y:1351,a:283,b:145},ShotgunReload05:{c:124,f:144,x:1029,y:884,a:356,b:152},
ShotgunReload06:{c:108,f:144,x:1385,y:884,a:372,b:152},ShotgunReload07:{c:108,f:144,x:0,y:1047,a:372,b:152},ShotgunReload08:{c:108,f:144,x:372,y:1047,a:308,b:152},ShotgunReload09:{c:108,f:144,x:680,y:1047,a:262,b:152},ShotgunReload10:{c:108,f:144,x:942,y:1047,a:262,b:152},ShotgunReload11:{c:107,f:144,x:1204,y:1047,a:373,b:152},ShotgunReload12:{c:108,f:144,x:0,y:1199,a:262,b:152},ShotgunReload13:{c:108,f:144,x:262,y:1199,a:262,b:152},ShotgunReload14:{c:108,f:144,x:524,y:1199,a:262,b:152},ShotgunReload15:{c:108,
f:144,x:786,y:1199,a:262,b:152},ShotgunReload16:{c:124,f:144,x:1048,y:1199,a:272,b:152},ShotgunReload17:{c:150,f:151,x:1149,y:1351,a:283,b:145},ShotgunReload18:{c:183,f:164,x:692,y:1644,a:182,b:132},ShotgunReload19:{c:209,f:156,x:1588,y:1199,a:158,b:140},ShotgunReload20:{c:196,f:153,x:1018,y:1500,a:230,b:143}};
Bk.prototype.equip=function(){var a=t.j-this.V;a+=2;this.Va=this.K.constructor.La["ShotgunEquip"+("00"+Math.floor(a/2.5)).slice(-2)];this.Zb();this.cc=this.K.Gc;Ck(this)||(9==a?this.ja.Da+=kc(1):22<=a+1&&!this.K.Sd.call(this)&&(this.Be||this.Sb||!this.K.Gc&&this.K.$a?(this.action="cycleOpen",this.V=t.j+1-6):(this.kc(1),35<=a+1&&(this.action="ready"))))};
Bk.prototype.ready=function(){this.Va=this.K.constructor.La.ShotgunEquip13;this.Zb();this.cc=this.K.Gc;Ck(this)||this.K.Sd.call(this)||(this.Be||this.Sb?(this.action="cycleOpen",this.V=t.j+1,this.cc=!1):this.kc(1))};
Bk.prototype.fire=function(){var a=t.j-this.V;this.Va=this.K.constructor.La["ShotgunFire"+("00"+(7>a?Math.floor(a):Math.floor((a-7)/4)+7)).slice(-2)]||this.K.constructor.La.ShotgunEquip13;this.Zb();this.cc=!1;if(0==a){t.i.X.get("ShotgunFire01").play({gain:.9375,pitch:.75});t.i.X.get("explode01").play({gain:.9375,pitch:1.5});this.K.Gc=0;this.K.$j=!0;t.g.pf();this.Rd=yk.Jb(.04499,.31957,-.038305,-.596,.007,-179.3);a=this.Vg;a.Sa=1;var b=255*(ob(nb)+4)/5&255;a.color.r=b;a.color.kb=b;a.color.ra=b;a.scale=
ob(nb)+1;a.Jd=lc(mb());b=new J;b.translate(0,-4E4,0);Ad(this.Rd,b,a.transform);a=Mk(this.ja);var c=Bk.hj.length;b=Array(c);for(var d=0;d<c;d++){var e=pb(d+1);e!=d&&(b[d]=b[e]);b[e]=d}c=ob(nb)*Math.jh;for(d=0;d<b.length;d++){e=(new J).rotate(0,Bk.hj[8-d],0);var h=(new J).rotate(0,0,c+b[d]*Math.jh/9),g=new J;Ad(a,h,g);Ad(g,e,g);h=this.K.Yc(g);e=270;h=n(h);for(g=h.next();!g.done;g=h.next()){g=g.value;var k=e;g.item instanceof Z&&(k=Math.min(e,g.item.Gb));Gk(g,k,1.2);e-=k;if(0>=e)break}}a=new Ok;a.nb=
6E4;a.scale=1;a.transform.m31-=45E3;b=new J;Ad(this.ja.Zd.M,this.Rd,b);Ad(b,a.transform,a.transform);a.B.y=-37500;Bd(b,a.B,a.B);a.B.add(this.ja.B);vd(a.B,a.Ib);a.ia=this.ja.ia;M(a,t.Yd);a.create();a.step();this.jf.push(a);3<this.jf.length&&(M(this.jf[0],null),this.jf.splice(0,1));this.ja.Da+=kc(2)}else 1==a?this.Vg.Sa=0:3==a?this.ja.Da+=kc(4):4<=a&&!Ck(this)&&(this.Be||this.Sb?(this.action="cycleOpen",this.V=t.j+1):(this.kc(1),43<=a+1&&(this.action="ready")))};
Bk.prototype.cycleOpen=function(){var a=t.j-this.V;a=Math.min(a,27);this.Va=this.K.constructor.La["ShotgunCycle"+("00"+Math.floor(a/3)).slice(-2)]||this.K.constructor.La.ShotgunEquip13;this.Zb();this.cc=!1;if(!Ck(this))if(12==a)t.i.X.get("ShotgunOpen01").play({gain:1,pitch:.8125});else if(21==a){this.ja.Da+=kc(1);this.K.$a+=this.K.Gc;this.Rd=yk.Jb(-.018192,.25469,-.045699,-19.3,39.9,177);if(this.K.$j||this.K.Gc){a=new Nk("CartridgeShotgunSpent");a.wk=.65;a.Dl=kc(24*(1*ob(nb)+1));a.transform.m31+=
6E3;var b=new J;Ad(this.ja.Zd.M,this.Rd,b);Ad(b,a.transform,a.transform);a.B.x=-3E3;a.B.z=-a.B.x;Bd(b,a.B,a.B);a.h.set(a.transform.G,a.transform.m31,a.transform.m32);a.B.add(this.ja.B);vd(a.B,a.Ib);M(a,t.bf);a.create();this.K.$j=!1}this.K.Gc=0}else 27<=a&&(this.Be||this.Sb?this.kc(1):(this.action="cycleShut",this.V=t.j+1-27))};
Bk.prototype.cycleShut=function(){var a=t.j-this.V;this.Va=this.K.constructor.La["ShotgunCycle"+("00"+Math.floor(a/3)).slice(-2)]||this.K.constructor.La.ShotgunEquip13;this.Zb();this.cc=!1;Ck(this)||(30==a?(t.i.X.get("ShotgunShut01").play({gain:1,pitch:.8125}),this.K.kc(this.K.tg())):39<=a&&(this.cc=this.K.Gc,!Ck(this)&&48<=a+1&&(this.action="ready")))};f=Bk.prototype;f.Sd=function(){if(!this.de||!this.K.Gc)return!1;this.action="fire";this.V=t.j+1;return!0};f.Wh=Fk;
f.Yc=function(a){var b=new w(a.G,a.m31,a.m32);a=new w(-a.O,-a.m21,-a.m22);var c=this.Rb,d=hf(b,new w(a.x*c,a.y*c,a.z*c));d&&(c=d.d);var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=n(t.g.Dc),g=h.next();!g.done;g=h.next())if(g=g.value,g.gb||!(t.j>g.V)){var k=ik(b,a,g.h,g.ta,g.eb+g.ta);!k||0>k.t||k.t>=c||(k.item=g,k.Fb=a,Sa(e,k))}d&&e.push(d);return e};f.ej=function(){return!1};
f.Of=function(){var a=Ek(this);return 0>=a?2:5>a?1:0};f.tg=function(){var a=1-this.Gc;a=Math.min(a,this.$a);return a*this.ve-this.rc};f.kc=function(a){this.rc+=Math.min(a,this.tg());a=Math.floor(this.rc/this.ve);this.Gc+=a;this.$a-=a;this.rc-=a*this.ve};function Pk(a){Dk.call(this,a);this.Vf=24;this.Wf=6;this.jb=0;this.$a=2*this.Wf;this.Rg=kc(4);this.bi=0;this.ve=56;a.ob[this.constructor.Fc]=this;a.Ce++}Pk.prototype=Object.create(Dk.prototype);Pk.prototype.constructor=Pk;
Pk.La={RevolverEquip00:{c:0,f:255,x:1099,y:1692,a:480,b:41},RevolverEquip01:{c:32,f:246,x:651,y:1692,a:448,b:50},RevolverEquip02:{c:129,f:224,x:300,y:1692,a:351,b:72},RevolverEquip03:{c:180,f:199,x:0,y:1692,a:300,b:97},RevolverEquip04:{c:193,f:176,x:858,y:1443,a:287,b:120},RevolverEquip05:{c:194,f:157,x:1382,y:1296,a:249,b:139},RevolverEquip06:{c:184,f:144,x:343,y:845,a:232,b:152},RevolverEquip07:{c:172,f:148,x:258,y:999,a:255,b:148},RevolverAim01:{c:178,f:152,x:808,y:1296,a:226,b:144},RevolverAim02:{c:150,
f:150,x:341,y:1296,a:214,b:146},RevolverAim03:{c:133,f:148,x:513,y:999,a:208,b:148},RevolverFire01:{c:184,f:149,x:208,y:1148,a:238,b:147},RevolverFire02:{c:184,f:149,x:446,y:1148,a:238,b:147},RevolverFire03:{c:184,f:149,x:684,y:1148,a:238,b:147},RevolverFire04:{c:184,f:149,x:922,y:1148,a:238,b:147},RevolverFire05:{c:195,f:149,x:1160,y:1148,a:217,b:147},RevolverFire06:{c:201,f:111,x:1563,y:269,a:148,b:185},RevolverFire07:{c:197,f:71,x:0,y:269,a:144,b:225},RevolverFire08:{c:212,f:100,x:660,y:269,a:192,
b:196},RevolverFire09:{c:173,f:114,x:486,y:494,a:253,b:182},RevolverFire10:{c:180,f:111,x:0,y:494,a:242,b:185},RevolverFire11:{c:176,f:113,x:242,y:494,a:244,b:183},RevolverFire12:{c:169,f:126,x:1548,y:494,a:266,b:170},RevolverFire13:{c:171,f:139,x:759,y:679,a:269,b:157},RevolverFire14:{c:171,f:147,x:0,y:999,a:258,b:149},RevolverFire15:{c:185,f:149,x:1377,y:1148,a:237,b:147},RevolverAimFire01:{c:133,f:148,x:721,y:999,a:208,b:148},RevolverAimFire02:{c:133,f:148,x:929,y:999,a:208,b:148},RevolverAimFire03:{c:133,
f:148,x:1137,y:999,a:208,b:148},RevolverAimFire04:{c:133,f:148,x:1345,y:999,a:208,b:148},RevolverAimFire05:{c:138,f:148,x:1553,y:999,a:200,b:148},RevolverAimFire06:{c:144,f:119,x:739,y:494,a:168,b:177},RevolverAimFire07:{c:140,f:87,x:338,y:269,a:146,b:209},RevolverAimFire08:{c:153,f:110,x:1370,y:269,a:193,b:186},RevolverAimFire09:{c:126,f:121,x:1329,y:494,a:219,b:175},RevolverAimFire10:{c:135,f:119,x:907,y:494,a:211,b:177},RevolverAimFire11:{c:130,f:120,x:1118,y:494,a:211,b:176},RevolverAimFire12:{c:126,
f:130,x:0,y:679,a:219,b:166},RevolverAimFire13:{c:127,f:141,x:1028,y:679,a:219,b:155},RevolverAimFire14:{c:131,f:146,x:922,y:845,a:212,b:150},RevolverAimFire15:{c:133,f:148,x:0,y:1148,a:208,b:148},RevolverReload01:{c:181,f:136,x:560,y:679,a:199,b:160},RevolverReload02:{c:171,f:107,x:1194,y:269,a:176,b:189},RevolverReload03:{c:141,f:71,x:144,y:269,a:194,b:225},RevolverReload04:{c:113,f:40,x:1337,y:0,a:216,b:256},RevolverReload05:{c:95,f:28,x:503,y:0,a:222,b:268},RevolverReload06:{c:91,f:27,x:0,y:0,
a:238,b:269},RevolverReload07:{c:90,f:27,x:238,y:0,a:265,b:269},RevolverReload08:{c:107,f:35,x:725,y:0,a:204,b:261},RevolverReload09:{c:107,f:36,x:929,y:0,a:204,b:260},RevolverReload10:{c:107,f:36,x:1133,y:0,a:204,b:260},RevolverReload11:{c:117,f:51,x:1553,y:0,a:193,b:245},RevolverReload12:{c:135,f:90,x:484,y:269,a:176,b:206},RevolverReload13:{c:141,f:141,x:1247,y:679,a:175,b:155},RevolverReload14:{c:139,f:149,x:0,y:1296,a:341,b:147},RevolverReload15:{c:137,f:142,x:0,y:845,a:343,b:154},RevolverReload16:{c:138,
f:103,x:852,y:269,a:342,b:193},RevolverReload17:{c:139,f:130,x:219,y:679,a:341,b:166},RevolverReload18:{c:139,f:141,x:1422,y:679,a:341,b:155},RevolverReload19:{c:133,f:145,x:575,y:845,a:347,b:151},RevolverReload20:{c:132,f:146,x:1134,y:845,a:348,b:150},RevolverReload21:{c:132,f:146,x:1482,y:845,a:348,b:150},RevolverReload22:{c:132,f:152,x:1034,y:1296,a:348,b:144},RevolverReload23:{c:139,f:174,x:517,y:1443,a:341,b:122},RevolverReload24:{c:153,f:184,x:0,y:1580,a:327,b:112},RevolverReload25:{c:163,f:187,
x:985,y:1580,a:317,b:109},RevolverReload26:{c:155,f:187,x:1302,y:1580,a:325,b:109},RevolverReload27:{c:142,f:186,x:647,y:1580,a:338,b:110},RevolverReload28:{c:156,f:185,x:327,y:1580,a:320,b:111},RevolverReload29:{c:144,f:182,x:1424,y:1443,a:293,b:114},RevolverReload30:{c:128,f:177,x:1145,y:1443,a:279,b:119},RevolverReload31:{c:136,f:169,x:256,y:1443,a:261,b:127},RevolverReload32:{c:150,f:159,x:0,y:1443,a:256,b:137},RevolverReload33:{c:167,f:151,x:555,y:1296,a:253,b:145}};
Pk.prototype.equip=function(){var a=t.j-this.V,b=Math.floor(a/2.5);this.Va=this.K.constructor.La["RevolverEquip"+("00"+b).slice(-2)];this.Re=this.Qe=0;this.cc=this.K.jb;Ck(this)||(0==this.K.jb&&2<=this.K.$a&&(this.Sb=!0),this.Sb?(this.action="reload",this.V=t.j+1):0==a?this.ja.Da+=kc(1):5<=b&&(this.K.Bf.call(this,!0),this.K.Sd.call(this)||(this.kc(1),20<=a+1&&(this.action="ready"))))};
Pk.prototype.ready=function(){this.Va=this.K.constructor.La.RevolverEquip07;this.Zb();this.cc=this.K.jb;Ck(this)||(this.Sb?(this.action="reload",this.V=t.j+1):(this.K.Bf.call(this,!0),this.K.Sd.call(this)||this.kc(1)))};
Pk.prototype.fire=function(){var a=t.j-this.V,b=("00"+(7>a?Math.floor(a):Math.floor((a-7)/3)+7)).slice(-2);this.Va=this.focus?this.K.constructor.La["RevolverAimFire"+b]||this.K.constructor.La.RevolverAim03:this.K.constructor.La["RevolverFire"+b]||this.K.constructor.La.RevolverEquip07;this.Zb();if(4==a){t.i.X.get("CarbineFire01").play({gain:1,pitch:1});t.i.X.get("ShotgunFire01").play({gain:.5,pitch:1.5});this.de=0;this.K.jb--;t.g.pf();this.K.bi++;!this.K.jb&&this.K.$a&&(this.Sb=1);this.Rd=this.focus?
yk.Jb(0,.49195,-.017475,-.713,0,0):yk.Jb(.032225,.49195,-.022213,.367,-.151,.525);b=this.Vg;b.Sa=1;var c=255*(ob(nb)+4)/5&255;b.color.r=c;b.color.kb=c;b.color.ra=c;b.scale=ob(nb)+1;b.Jd=lc(mb());c=new J;c.translate(0,-21E3,0);Ad(this.Rd,c,b.transform);b=new Ok;b.nb=6E4;b.scale=1;b.transform.m31-=45E3;c=new J;Ad(this.ja.Zd.M,this.Rd,c);Ad(c,b.transform,b.transform);b.B.y=-37500;Bd(c,b.B,b.B);b.B.add(this.ja.B);vd(b.B,b.Ib);b.ia=this.ja.ia;M(b,t.Yd);b.create();b.step();this.jf.push(b);b=(new J).rotate(0,
kc(0*ob(nb)),0);c=(new J).rotate(0,0,ob(nb)*Math.PI*2);var d=Mk(this.ja);Ad(d,c,d);Ad(d,b,d);b=this.K.Yc(d);b=n(b);for(c=b.next();!c.done;c=b.next()){c=c.value;d=c.item instanceof Z?3:1;for(var e=0;e<d;e++)Gk(c,360,1.7)}}else if(5==a)this.Vg.Sa=0;else if(7==a)this.ja.Da+=kc(3);else if(10<=a){if(Ck(this))return;if(this.Sb){this.action="reload";this.V=t.j+1;return}this.K.Bf.call(this,!1);if(this.K.Sd.call(this))return;this.kc(1)}34<=a+1&&(this.action="ready")};
Pk.prototype.reload=function(){var a=t.j-this.V;a+=3;this.Va=this.K.constructor.La["RevolverReload"+("00"+Math.floor(a/3)).slice(-2)];this.Zb();this.Sb=0;84>a&&(this.cc=!1,this.focus-=1/6,0>this.focus&&(this.focus=0));if(!Ck(this))if(21==a)t.i.X.get("RevolverSpin01").play({gain:1,pitch:1}),t.i.X.get("RevolverEjectorUp").play({gain:2/3,pitch:1});else if(24==a){this.ja.Da+=kc(.5);for(a=0;a<this.K.bi;a++)t.i.X.get("shellCasing0"+(pb(3)+1)).play({gain:.625,pitch:.65,delay:.125+.15*a});this.K.bi=0;this.K.$a+=
this.K.jb;this.K.jb=0;t.g.pf()}else 54==a?t.i.X.get("RevolverSlap01").play({gain:1,pitch:1}):57==a?(this.ja.Da+=kc(1),this.K.kc(this.K.tg())):78==a?t.i.X.get("RevolverSpin01").play({gain:1,pitch:1}):81==a?t.i.X.get("RevolverSlap02").play({gain:1,pitch:1}):84<=a&&(this.cc=this.K.jb,this.K.Bf.call(this,!0),this.K.Sd.call(this)||(this.kc(1),102<=a+1&&(this.action="ready")))};f=Pk.prototype;
f.Bf=function(a){this.Be&&(this.focus+=1/6,1<this.focus&&(this.focus=1));a&&this.focus&&(this.Va=this.K.constructor.La["RevolverAim"+("00"+Math.floor(3*this.focus)).slice(-2)]||this.K.constructor.La.RevolverEquip07)};f.Sd=function(){if(!this.de||1!=this.focus&&0!=this.focus)return!1;if(!this.K.jb)return this.K.$a&&(this.Sb=1),!1;this.action="fire";this.V=t.j+1;return!0};f.Wh=function(a){return.5<this.Ij.focus?Qk(this,a):Fk.call(this,a)};
function Qk(a,b){function c(r){var q=td(r,d,new w);r=q.length();var v=26512.5/r;q=kf(d,q);for(var z=0,y=!0;;){var x=q.shift();if(!x){if(!y){z+=v;break}z=1;break}if(!y){y=x.t-z;if(y>v){z+=v;break}v-=y}z=x.t;y=!x.Wa}return z*r>=r-1E3}var d=new w(b.G,b.m31,b.m32),e=new w(-b.O,-b.m21,-b.m22),h=a.Rb;b=[];b.cmp=function(r,q){return r.kg>q.kg?-1:1};for(var g=n(t.g.Dc),k=g.next();!k.done;k=g.next())if(k=k.value,(k.gb||!(t.j>k.V))&&600>t.j-k.Mi){var l=jk(d,e,k.h,k.ta-a.oh,k.eb);if(l.Se){var m=l.Se;0>m.t||
m.t>=h||(m.p.kg=h-m.t,m.p.item=k,Sa(b,m.p))}else{m=l.Th.ca();var p=l.kj-(k.ta-a.oh);m.x+=l.De.x*p;m.y+=l.De.y*p;m.z+=l.De.z*p;l=td(l.Th,d,new w).normalize();p=td(m,d,new w).normalize();0>=oc(p,e)||(l=oc(l,p),m.kg=l-1,m.item=k,Sa(b,m),Math.acos(l)>=a.Rg&&(m.Bm=!0))}}a=null;b=n(b);for(e=b.next();!e.done;e=b.next())e=e.value,c(e)&&(e.item.rm=t.j,e.Bm||a||(a=e));return a}
f.Yc=function(a){var b=new w(a.G,a.m31,a.m32),c=new w(-a.O,-a.m21,-a.m22),d=this.Rb;a=[];for(var e=kf(b,new w(c.x*d,c.y*d,c.z*d)),h=26512.5/d,g=0,k=!0;;){var l=e.shift();if(!l){k||(d*=g+h);break}if(!k){k=l.t-g;if(k>h){d*=g+h;break}h-=k}g=l.t;l.Wa&&a.push(l);k=!l.Wa}e=[];e.cmp=function(m,p){return m.t<p.t?-1:m.t>p.t?1:m.item.index<p.item.index?-1:m.item.index>p.item.index?1:0};h=n(t.g.Dc);for(g=h.next();!g.done;g=h.next())g=g.value,!g.gb&&t.j>g.V||!(l=ik(b,c,g.h,g.ta,g.eb+g.ta))||0>l.t||l.t>=d||(l.item=
g,l.Fb=c,Sa(e,l));b=[];e.length&&b.push(e[0]);b.push.apply(b,ba(a));return b};f.ej=function(){return 0>=this.$a||"reload"==this.Ij.action||2<this.jb?!1:!0};f.Of=function(){var a=Ek(this);return 0>=a?2:6>a?1:0};f.kc=function(a){this.rc+=Math.min(a,this.tg());a=Math.floor(this.rc/this.ve);this.jb+=a;this.$a-=a;this.bi=Math.max(0,this.bi-a);this.rc-=a*this.ve};function Ak(a){Dk.call(this,a);this.Vf=6;this.$a=this.Wf=0;a.ob[this.constructor.Fc]=this;a.Ce++}Ak.prototype=Object.create(Dk.prototype);
Ak.prototype.constructor=Ak;
Ak.La={GrenadeThrow00:{c:0,f:271,x:324,y:1067,a:461,b:25},GrenadeThrow01:{c:0,f:252,x:625,y:1E3,a:467,b:44},GrenadeThrow02:{c:0,f:229,x:0,y:1E3,a:478,b:67},GrenadeThrow03:{c:0,f:200,x:725,y:888,a:480,b:96},GrenadeThrow04:{c:0,f:172,x:480,y:756,a:480,b:124},GrenadeThrow05:{c:0,f:156,x:740,y:333,a:480,b:140},GrenadeThrow06:{c:0,f:150,x:0,y:187,a:480,b:146},GrenadeThrow07:{c:0,f:150,x:480,y:187,a:480,b:146},GrenadeThrow08:{c:0,f:157,x:476,y:477,a:480,b:139},GrenadeThrow09:{c:0,f:164,x:0,y:756,a:480,
b:132},GrenadeThrow10:{c:0,f:152,x:0,y:333,a:478,b:144},GrenadeThrow11:{c:0,f:156,x:0,y:477,a:476,b:140},GrenadeThrow12:{c:0,f:159,x:480,y:617,a:474,b:137},GrenadeThrow13:{c:0,f:157,x:0,y:617,a:480,b:139},GrenadeThrow14:{c:0,f:184,x:0,y:888,a:480,b:112},GrenadeThrow16:{c:58,f:243,x:478,y:1E3,a:147,b:53},GrenadeThrow17:{c:14,f:214,x:960,y:756,a:233,b:82},GrenadeThrow18:{c:0,f:189,x:480,y:888,a:245,b:107},GrenadeThrow19:{c:0,f:226,x:954,y:617,a:194,b:70},GrenadeThrow20:{c:392,f:46,x:0,y:0,a:88,b:187},
GrenadeThrow21:{c:297,f:89,x:305,y:0,a:183,b:165},GrenadeThrow22:{c:263,f:111,x:88,y:0,a:217,b:185},GrenadeThrow23:{c:216,f:155,x:478,y:333,a:262,b:141},GrenadeThrow24:{c:131,f:147,x:851,y:0,a:326,b:149},GrenadeThrow25:{c:63,f:135,x:488,y:0,a:363,b:161},GrenadeThrow26:{c:48,f:269,x:0,y:1067,a:324,b:27}};
Ak.prototype.equip=function(){var a=t.j-this.V;a+=5;37.5<=a?(a=45>a?37.5:a-7.5,this.Zb()):this.Re=this.Qe=0;a=Math.min(a,45);this.Va=this.K.constructor.La["GrenadeThrow"+("00"+Math.floor(a/2.5)).slice(-2)];this.cc=!1;if(!Ck(this)){if(33==a)this.ja.Da+=kc(1),t.i.X.get("RevolverEjectorDown").play({gain:1,pitch:1});else if(35<=a&&(this.de||this.Cd||this.Td)){this.action="throw";this.V=t.j+1;return}45<=a+1&&(this.action="ready")}};
Ak.prototype.ready=function(){this.Va=this.K.constructor.La["GrenadeThrow"+"0018".slice(-2)];this.Zb();this.cc=!1;Ck(this)||!this.de&&!this.Cd||(this.action="throw",this.V=t.j+1)};
Ak.prototype["throw"]=function(){var a=t.j-this.V;a+=47;this.Va=this.K.constructor.La["GrenadeThrow"+("00"+Math.floor(a/2.5)).slice(-2)];this.Re=this.Qe=0;this.cc=!1;this.Cd=0;if(!Ck(this)){if(58==a)t.i.X.get("MasherSwing01").play({gain:1,pitch:1});else if(60==a)this.ja.Da+=kc(1);else if(61==a){this.K.$a--;t.g.pf();var b;var c=b=new Rk;c.transform.G+=6E3;c.transform.m31-=6E3;c.transform.m32-=12E4;var d=this.ja.Zd.M;Ad(d,c.transform,c.transform);c.h.x=c.transform.G;c.h.y=c.transform.m31;c.h.z=c.transform.m32;
c.B.y=1;c.B.z=-6;c.B.scale(6E3);Bd(d,c.B,c.B);c.h.x-=3*c.B.x;c.h.y-=3*c.B.y;c.h.z-=3*c.B.z;c.B.add(this.ja.B);vd(c.B,c.Ib);M(c,t.Vi);c.create();d=c=new Sk;d.transform.G+=28E3;d.transform.m31-=13E3;d.transform.m32-=12E4;var e=this.ja.Zd.M;Ad(e,d.transform,d.transform);d.h.x=d.transform.G;d.h.y=d.transform.m31;d.h.z=d.transform.m32;d.B.x=1E4;d.B.y=8E3;d.B.z=-3E4;d.B.scale(.8);Bd(e,d.B,d.B);d.h.x-=3*d.B.x;d.h.y-=3*d.B.y;d.h.z-=3*d.B.z;d.B.add(this.ja.B);vd(d.B,d.Ib);M(d,t.Vi);d.create();b.ie.push(c);
c.ie.push(b);b.ie.push(this.ja);c.ie.push(this.ja)}70<=a+1&&(this.Td=null,this.Ad=this.vl,Ck(this))}};Ak.prototype.Yc=function(){return null};Ak.prototype.Wh=Ak.prototype.Yc;Ak.prototype.Of=function(){var a=Ek(this);return 0>=a?2:2>a?1:0};function Rk(){Yj.call(this,"grenade");this.oa=new J;this.j=3;this.Dg=.5;this.ub=16;this.ta=8750;this.eb=0;this.sg=3;this.rg=.15;this.Hf=.4;this.A=t.i.va.get("physicalCardThreshold");this.V=t.j;this.Sa=0;this.Dh=NaN;this.Rb=6E5}Rk.prototype=Object.create(Yj.prototype);
f=Rk.prototype;f.constructor=Rk;f.step=function(){t.j==this.V+3&&(this.Sa=-1);this.j+=this.Dg;this.j%=8;0<=t.j-this.Dh&&this.qh();isNaN(this.Dh)&&25E4>this.B.qc()&&(this.Dh=t.j+5);Yj.prototype.step.call(this)};f.Pi=function(){this.Dg=this.j=0};f.Pj=function(a){a instanceof Z&&isNaN(this.Dh)&&(this.Dh=t.j+5)};f.create=function(){Ud(this,13125);Yj.prototype.create.call(this)};
f.qh=function(){function a(k){var l=td(k.h,b.h,new w),m=l.qc();hf(b.h,l,eg)||(l=b.Rb*b.Rb/m*360,1<=l&&k.$f(l))}var b=this;t.i.X.get("explode01").play({gain:1,pitch:1.2});if(t.g.ma){var c=t.g.ma,d=td(c.h,this.h,new w);d=this.Rb*this.Rb/d.qc();d=Math.min(5,d);c.Da+=kc(5)*d}c=n(t.g.Eg);for(d=c.next();!d.done;d=c.next())a(d.value);c=n(t.g.Hg);for(d=c.next();!d.done;d=c.next())a(d.value);c=n(t.g.Dc);for(d=c.next();!d.done;d=c.next())if(d=d.value,d.gb&&(d=td(d.h,this.h,new w),!(d.pa(1)>this.Rb+1E5))){var e=
this.Yc(d);d=720;e=n(e);for(var h=e.next();!h.done;h=e.next()){h=h.value;var g=d;h.item instanceof Z&&(g=Math.min(d,h.item.Gb));Gk(h,g,1.2);d-=g;if(0>=d)break}}for(c=0;14>c;c++)for(d=1.342*ob(nb)-.342,d=this.Yc(rc(d)),d=n(d),h=d.next();!h.done;h=d.next())e=h.value,e.item instanceof Z||(t.i.X.get("MasherSlap01").play({If:.05}),Gk(e,720,1));this.Na&&(c=new xk(1E5,this.Na),c.transform.G=this.h.x,c.transform.m31=this.h.y,c.transform.m32=this.h.z,M(c,t.Yd),c.create());this.remove()};
f.Yc=function(a){var b=this.h.ca(),c=this.Rb,d=hf(b,new w(a.x*c,a.y*c,a.z*c));d&&(c=d.d);var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=n(t.g.Dc),g=h.next();!g.done;g=h.next())if(g=g.value,g.gb||!(t.j>g.V)){var k=jk(b,a,g.h,g.ta,g.eb).Se;!k||0>k.t||k.t>=c||(k.item=g,k.Fb=a,Sa(e,k))}d&&e.push(d);return e};
f.Xc=function(){var a=Cd(this.M),b=td(Cd(t.la.M),a,new w),c=b.pa(1);c=Math.min(1,c/(4*this.ta));var d=new w(0,1,0),e=qc(d,b,new w).normalize();qc(b,e,d);var h=t.la.M.We(),g=t.la.M.Bd();this.oa.cf(ud(t.la.M.Ve(),e,c).normalize());this.oa.df(ud(h,d,c).normalize());this.oa.ef(ud(g,b,c).normalize());Dd(this.oa,a)};
f.ab=function(){this.Xc();t.Ab(sg);t.cb(this.A);t.Nb(0,t.i.P.get("Grenade"));Z.$.bind();t.A.J("ambientLight",this.ia.mb,!1);t.rb(0);t.Tb(0);t.A.J("color",gd);var a=new J;a.set(this.oa);a.F*=17500;a.L*=17500;a.N*=17500;a.I*=-17500;a.m11*=-17500;a.m12*=-17500;t.A.J("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,tg(Math.floor(this.j),this.ub),4)};
function Sk(){Yj.call(this,"grenade spoon");this.oa=new J;this.j=2;this.Dg=8-1/3;this.ub=16;this.ta=8750;this.eb=0;this.sg=.5;this.rg=.1;this.Hf=.002;this.A=t.i.va.get("physicalCardThreshold");this.V=t.j}Sk.prototype=Object.create(Yj.prototype);f=Sk.prototype;f.constructor=Sk;f.step=function(){var a=t.j-this.V;this.j+=this.Dg;this.j%=8;120<=a&&this.remove();Yj.prototype.step.call(this)};f.Pi=function(){this.j=0;this.Dg=.5*(this.Dg-8)+8};
f.Xc=function(){var a=Cd(this.M),b=td(Cd(t.la.M),a,new w),c=b.pa(1);c=Math.min(1,c/(4*this.ta));var d=new w(0,1,0),e=qc(d,b,new w).normalize();qc(b,e,d);var h=t.la.M.We(),g=t.la.M.Bd();this.oa.cf(ud(t.la.M.Ve(),e,c).normalize());this.oa.df(ud(h,d,c).normalize());this.oa.ef(ud(g,b,c).normalize());Dd(this.oa,a)};
f.ab=function(){this.Xc();t.Ab(sg);t.cb(this.A);t.Nb(0,t.i.P.get("Grenade"));Z.$.bind();t.A.J("ambientLight",this.ia.mb,!1);t.rb(0);t.Tb(0);t.A.J("color",gd);var a=new J;a.set(this.oa);a.F*=17500;a.L*=17500;a.N*=17500;a.I*=-17500;a.m11*=-17500;a.m12*=-17500;t.A.J("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,tg(Math.floor(this.j)+8,this.ub),4)};function Tk(a){Dk.call(this,a);this.Rb=25E4;this.Rg=kc(30);a.ob[this.constructor.Fc]=this;a.Ce++}Tk.prototype=Object.create(Dk.prototype);
Tk.prototype.constructor=Tk;
Tk.La={MasherStrike00:{c:33,f:251,x:341,y:944,a:353,b:45},MasherStrike01:{c:82,f:233,x:0,y:944,a:341,b:63},MasherStrike02:{c:0,f:203,x:0,y:851,a:471,b:93},MasherStrike03:{c:65,f:168,x:0,y:723,a:415,b:128},MasherStrike04:{c:118,f:98,x:0,y:525,a:362,b:198},MasherStrike05:{c:188,f:87,x:426,y:282,a:292,b:209},MasherStrike06:{c:220,f:73,x:193,y:282,a:233,b:223},MasherStrike07:{c:227,f:53,x:0,y:282,a:193,b:243},MasherStrike08:{c:234,f:29,x:512,y:0,a:165,b:267},MasherStrike09:{c:261,f:17,x:174,y:0,a:156,
b:279},MasherStrike10:{c:266,f:14,x:0,y:0,a:174,b:282},MasherStrike11:{c:229,f:147,x:771,y:525,a:251,b:149},MasherStrike12:{c:224,f:136,x:596,y:525,a:175,b:160},MasherStrike13:{c:224,f:159,x:718,y:282,a:188,b:137},MasherStrike14:{c:218,f:184,x:673,y:723,a:262,b:112},MasherStrike15:{c:217,f:205,x:471,y:851,a:263,b:91},MasherStrike16:{c:215,f:208,x:734,y:851,a:265,b:88},MasherStrike17:{c:222,f:171,x:415,y:723,a:258,b:125},MasherStrike18:{c:246,f:110,x:362,y:525,a:234,b:186},MasherStrike19:{c:261,f:52,
x:677,y:0,a:219,b:244},MasherStrike20:{c:264,f:21,x:330,y:0,a:182,b:275}};Tk.prototype.equip=function(){var a=t.j-this.V;25<=a&&(a=25);this.Va=this.K.constructor.La["MasherStrike"+("00"+Math.floor(a/2.5)).slice(-2)];this.Zb();this.cc=!1;Ck(this)||(this.de||this.Cd||this.Td?(this.action="strike",this.V=t.j+1,this.Va=this.K.constructor.La.MasherStrike11,this.Re=this.Qe=0):25<=a+1&&(this.action="ready"))};
Tk.prototype.ready=function(){this.Va=this.K.constructor.La["MasherStrike"+"0010".slice(-2)];this.Zb();Ck(this)||!this.de&&!this.Cd||(this.action="strike",this.V=t.j+1)};
Tk.prototype.strike=function(){var a=t.j-this.V;a+=33;this.Va=this.K.constructor.La["MasherStrike"+("00"+Math.floor(a/3)).slice(-2)];this.Re=this.Qe=0;if(!Ck(this))if(33==a)t.i.X.get("MasherSwing01").play({If:.05});else if(36==a){this.ja.Da+=kc(2);a=Mk(this.ja);a=this.K.Yc(a);a=n(a);for(var b=a.next();!b.done;b=a.next())b=b.value,t.i.X.get("MasherSlap01").play({If:.05}),b.item instanceof Z&&t.i.X.get("MasherSquish"+wb("01","02","03")).play({gain:2/3,If:.05}),Gk(b,120,1),this.ja.Da+=kc(2)}else 48<=
a&&(b=this.Cd,this.Td||(b|=this.de),b?(this.action="strike",this.V=t.j+1):63<=a+1&&(this.Td?(this.Td=null,this.Ad=this.vl,Ck(this)):this.action="ready"))};
Tk.prototype.Yc=function(a){var b=new w(a.G,a.m31,a.m32),c=new w(-a.O,-a.m21,-a.m22),d=this.Rb;if(a=hf(b,new w(c.x*d,c.y*d,c.z*d)))d=a.d;var e=[];e.cmp=function(l,m){return l.t<m.t?-1:l.t>m.t?1:l.item.index<m.item.index?-1:l.item.index>m.item.index?1:0};for(var h=n(t.g.Dc),g=h.next();!g.done;g=h.next())if(g=g.value,g.gb||!(t.j>g.V)){var k=jk(b,c,g.h,g.ta,g.eb).Se;!k||0>k.t||k.t>=d||(k.item=g,k.Fb=c,Sa(e,k))}b=[];e.length&&b.push(e[0]);a&&b.push(a);return b};Tk.prototype.Wh=Fk;
function Nk(a){Yj.call(this,a);this.Pb=12500;this.Hf=1;this.start=t.j;this.Cl=new w(ob(nb)-.5,ob(nb)-.5,ob(nb)-.5);this.Cl.pa(1);this.wk=1}Nk.prototype=Object.create(Yj.prototype);Nk.prototype.constructor=Nk;Nk.prototype.create=function(){Yj.prototype.create.call(this);var a=new jg(t.i.Ac.get(this.name));a.Ja=this.M;a.transform.scale(.1,.1,.1);a.transform.rotate(0,-90,0);M(a,this);a.create();Td(a,this.ia)};
Nk.prototype.step=function(){this.transform.Xj(this.Cl,this.Dl);30<=t.j-this.start&&this.remove();Yj.prototype.step.call(this)};Nk.prototype.remove=function(){t.i.X.get("shellCasing0"+(pb(3)+1)).play({gain:.625,pitch:this.wk});Yj.prototype.remove.call(this)};function Kk(a){t.Node.call(this,a);this.hc=t.j}Kk.prototype=Object.create(t.Node.prototype);Kk.prototype.constructor=Kk;
Kk.prototype.step=function(){t.Node.prototype.step.call(this);var a=t.j-this.hc-6;0>a||(0==a&&t.i.X.get(wb("woodSnap01","woodSnap02","woodSnap03")).play({gain:10/60}),5<=(1<=a?a-1:0)&&this.remove())};var uk=[];function vk(){var a=uk.indexOf(this);0>a||uk.splice(a,1)};function Uk(a){ck.call(this,a);this.Hf=100;this.sg=0;this.ta=4E4;this.ae=18E4;this.rj=9E4;this.eb=.5*(this.ae-2*this.ta-6E4);this.hk=12E4;this.Vc=12500;this.Ug=2/3*this.Vc;this.Gj=ck.vk(125E3);this.Pb=2E5;this.xi=16;this.Ci=this.Di=this.Zb=this.Ye=this.Bj=this.Cj=this.dj=this.Da=this.mh=this.ki=0;this.Gb=Infinity;this.Oh=[];this.gl=-Infinity;this.gb=!0;this.Ih=0;this.hl=-Infinity;this.il=Number.NEGATIVE_INFINITY;this.jl=4E5;this.be={}}Uk.prototype=Object.create(ck.prototype);f=Uk.prototype;
f.constructor=Uk;f.create=function(){Yj.prototype.create.call(this);var a=this.Qc=new bg("worldCamera");a.pg=6E3;a.gg=5E7;a.Ja=this.M;M(a,this);t.g.la=a;a=this.Zd=new bg("selfCamera");a.pg=this.Qc.pg;a.gg=this.Qc.gg;a.Ja=this.Qc.M;M(a,t.bf);a=this.Ra=new yk(this);a.Sa=0;M(a,t.bf);a.create();new Tk(this.Ra);this.Ra.Ad=this.Ra.ob[0]};
f.step=function(){ck.prototype.step.call(this);if(!(this.Na.Oc||this.Na.wm||10>t.j-this.Kj)){var a=this.Na.ia.mb;.028<.2126*a.x+.7152*a.y+.0722*a.z||(a=wb(.1125,.175),this.Na.hb=new w(a,a,a),this.Na.wm=!0,t.i.X.get("hit02").play({gain:.5,pitch:2}))}a=this.Na.Hb.Mb;if(t.g.Mb!=a){t.g.Mb=a;var b=t.g.Ff;b.Dj=a.si;2<=b.Dj&&(t.g.mg=Math.round(3+10*t.g.ma.Ra.Ce/5));t.g.td=a.td;t.g.jk();t.g.zf=a.zf;t.g.Kk=a.zf}if(this.gb){for(a=0;a<this.Oh.length;a++){b=this.Oh[a];var c=t.j-30-b.Jg;0>c||(0<b.ya?(b=b.ya-2*
c,0>=b&&this.Oh.splice(a--,1)):0>b.ya&&(b=b.ya+2*c,0<=b&&this.Oh.splice(a--,1)))}this.gb&&(N.lock&&(a=1,this.Ra.K&&(a=Xa(1,this.Ra.K.yj,this.Ra.focus)),a=t.zm*a,this.ki-=N.Hc.x*a,this.mh+=N.Hc.y*a),this.mh=Wa(this.mh,-1073741824,1073741824));a=lc(this.ki);b=lc(this.mh)+kc(1.5*this.Bj);c=kc(1.5*this.Cj);zd(this.transform);this.transform.rotate(a,0,0);zd(this.Qc.transform);this.Qc.transform.rotate(0,b,c);t.Bl||(this.Qc.transform.rotate((ob(nb)-.5)*this.Da,(ob(nb)-.5)*this.Da,0),this.Da*=.8125);0==(t.j&
1)&&(this.Hh()?(a=this.Ue*Math.PI/this.xi,this.dj=6E3*Math.abs(Math.sin(a)),this.Di=Math.sin(a)*Math.PI/210,this.Zb=(1-Math.abs(Math.sin(a)))*Math.PI/210):(this.dj*=.75,this.Zb*=.75,this.Di*=.75),this.Ci-=kc(3),0>this.Ci&&(this.Ci=0));this.Qc.transform.m31=this.eb+this.ta-6E3-6E3+this.dj;a=1;this.Ra.K&&(a=Xa(1,this.Ra.K.yj,this.Ra.focus));this.Vc=11E3*Xa(1,2/3,this.Ra.focus);this.Zd.Qd=kc(24*a);this.Qc.Qd=kc(30*a);this.Na&&(a=this.Na.sa-this.eb-this.ta,this.h.y>a&&(this.h.y=a,this.B.y=Math.min(this.B.y,
0)));a=this.jl;a*=a;for(var d in this.be)b=this.be[d],td(this.h,b.h,new w(0,0,0)).qc()>=a?Vk(b):(b.species.zc.call(b,this),b.ya||b.remove());if(!(2>t.j-this.il)){d=a;a=null;b=nf(this.h,this.jl);b=n(b);for(c=b.next();!c.done;c=b.next())for(c=c.value.Qi.first();null!=c.item;c=c.next)if(c.item instanceof Wk){if(225E8>td(this.h,c.item.h,new w).qc()){a=c.item;break}}else if(c.item instanceof X&&!c.item.pe&&!(c.item.be||0>=c.item.species.Pc.call(c.item,this))){var e=td(this.h,c.item.h,new w(0,0,0)).qc();
e<d&&(d=e,a=c.item)}a&&(a.al(this),this.il=t.j)}}};function Xk(a,b){b.pe=null;b.species.zc.call(b,a);sb(b.species.X).play();a.hl=t.j;b.ya?(b.be=a,a.be[b.index]=b,vd(b.mm,b.h),b.nm&&(b.hc=t.j,b.gb=!0,b.B.set(0,0,0),b.Ib.set(0,0,0),Uj.add(b)),b.Sa=0,b.Zg.Sa=0):b.remove()}
f.Aj=function(){var a=new w(0,0,0);if(!this.gb)return a;(he.d[t.xa.MoveForwardKey]||N.d[t.xa.MoveForwardMouseButton])&&--a.z;if(he.d[t.xa.MoveBackwardKey]||N.d[t.xa.MoveBackwardMouseButton])a.z+=1;(he.d[t.xa.MoveLeftKey]||N.d[t.xa.MoveLeftMouseButton])&&--a.x;if(he.d[t.xa.MoveRightKey]||N.d[t.xa.MoveRightMouseButton])a.x+=1;a.pa(1)?(this.Ye+=1/6,1<this.Ye&&(this.Ye=1)):(this.Ye-=1/6,0>this.Ye&&(this.Ye=0));this.Cj=(5*this.Cj-a.x)/6;this.Bj=(5*this.Bj-a.z)/6;return a};
f.Yk=function(){this.gb&&(he.p[t.xa.JumpKey]||N.p[t.xa.JumpMouseButton])&&(this.Ii=t.j)};function Mk(a){if(!a.lh){var b=new J;b.set(a.Qc.M);return b}b=td(Cd(a.Qc.M),a.lh,new w).normalize();var c=new w(b.z,0,-b.x),d=new w(0,1,0);qc(b,c,d).pa(1);qc(d,b,c);var e=new J;e.F=c.x;e.L=c.y;e.N=c.z;e.I=d.x;e.m11=d.y;e.m12=d.z;e.O=b.x;e.m21=b.y;e.m22=b.z;e.G=a.Qc.M.G;e.m31=a.Qc.M.m31;e.m32=a.Qc.M.m32;return e}
function Yk(a,b){0>b&&(a.gl=t.j);b=Wa(a.Gb+b,0,360)-a.Gb;a.Oh.push({Jg:t.j,ya:b});a.Gb+=b;0>=a.Gb&&a.uj()}f.uj=function(){if(this.gb){this.gb=!1;for(var a=n(t.g.Dc),b=a.next();!b.done;b=a.next())b=b.value,b.gb&&(b.action.length=0,b.action.unshift("idle"),b.V=NaN,b.path=null);this.Ra.remove();this.Ra=null;t.g.ma=null}};
f.Oj=function(){var a=aj(new E(this.h.z,this.h.x));this.h.z=a.x;this.h.x=a.y;a=null;var b=hf(new w(this.h.x,-1E3,this.h.z),new w(0,-1E8,0),eg);b&&(this.h.y=b.p.y+this.ae-this.eb-this.ta,a=Ue(b.item.ba));a&&(a!=this.Na&&(this.Kj=t.j),this.Na=a,ag(this.h,a,this.ia.mb))};function Z(){ck.call(this,"mantato");this.Hf=150;this.sg=0;this.ta=30800;this.ae=189200;this.rj=86E3;this.eb=.5*(this.ae-2*this.ta-6E4);this.hk=12E4;this.Vc=1/3*14887;this.Ug=2/3*this.Vc;this.Gj=ck.vk(3E5);this.Pb=2E5;this.Ei=-Infinity;this.gb=!0;this.Gb=360;this.tb=[];this.Oe=[];this.oa=new J;this.gc="MantatoWalk";this.j=this.aj=this.nf=0;this.Jf=new J;this.oj=0;this.Tc=22E4/96;this.ph=0;this.A=t.i.va.get("physicalCardThreshold");this.ha=t.i.P.get("Mantato");this.color=gd;this.action=["idle"];this.V=
NaN;this.rm=this.Mi=-Infinity;this.nh=1;this.lj=15E4;return this}Z.prototype=Object.create(ck.prototype);Z.prototype.constructor=Z;Z.ze=12;Z.Ma=NaN;
Z.vf=function(){Z.$=t.i.Lb.get("defaultMaterial");var a=t.i.Lb.get("monsterSkin").ca();a.name="monsterSplatter";a.Ha=1;t.i.Lb.add(a);Zk.A=t.i.va.get("gib");Zk.ha=t.i.P.get("spudGib01");a=t.i.P.get("Mantato");Z.Ia=new re;var b=[];for(l in Z.vc){var c=Z.vc[l];c.vd=b.length;var d=c.x/a.width,e=c.y/a.height,h=c.a/a.width,g=c.b/a.height;var k=new jd(c.c,c.f,0);qd(k,d,e);k.Cb=32767;b.push(k);k=new jd(c.c+c.a,c.f,0);qd(k,d+h,e);k.Cb=32767;b.push(k);k=new jd(c.c+c.a,c.f+c.b,0);qd(k,d+h,e+g);k.Cb=32767;b.push(k);
k=new jd(c.c,c.f+c.b,0);qd(k,d,e+g);k.Cb=32767;b.push(k)}qe(Z.Ia,b.length*Z.Ia.Ob);Z.Ia.upload(b);var l=[];l.length=5;a=new J;a.F=1;a.L=0;a.N=-0;a.I=0;a.m11=1;a.m12=0;a.O=0;a.m21=-0;a.m22=1;a.G=0;a.m31=0;a.m32=-0;l.push(a);a=new J;a.F=.9916;a.L=-.1173;a.N=.055;a.I=.1259;a.m11=.9725;a.m12=-.1958;a.O=-.0305;a.m21=.201;a.m22=.9791;a.G=-3498;a.m31=3796;a.m32=6804;l.push(a);a=new J;a.F=.9749;a.L=-.1934;a.N=.1102;a.I=.2213;a.m11=.8963;a.m12=-.3843;a.O=-.0244;a.m21=.399;a.m22=.9166;a.G=-6400;a.m31=-2683;
a.m32=15101;l.push(a);a=new J;a.F=.9601;a.L=-.2246;a.N=.1669;a.I=.2797;a.m11=.7517;a.m12=-.5972;a.O=.0087;a.m21=.62;a.m22=.7845;a.G=-8393;a.m31=-17164;a.m32=25181;l.push(a);a=new J;a.F=.9541;a.L=-.2123;a.N=.2114;a.I=.2942;a.m11=.5306;a.m12=-.795;a.O=.0566;a.m21=.8206;a.m22=.5686;a.G=-9429;a.m31=-39030;a.m32=35202;l.push(a);a=new J;a.F=.9591;a.L=-.1521;a.N=.2388;a.I=.2712;a.m11=.2519;a.m12=-.929;a.O=.0811;a.m21=.9557;a.m22=.2828;a.G=-9721;a.m31=-68375;a.m32=44142;l.push(a);a=new J;a.F=.9359;a.L=-.2158;
a.N=.2785;a.I=.2565;a.m11=-.1246;a.m12=-.9585;a.O=.2415;a.m21=.9685;a.m22=-.0613;a.G=-7782;a.m31=-63561;a.m32=42925;l.push(a);a=new J;a.F=.9573;a.L=-.1734;a.N=.2312;a.I=.1975;a.m11=-.1913;a.m12=-.9614;a.O=.2109;a.m21=.9661;a.m22=-.1489;a.G=-4587;a.m31=-61424;a.m32=39511;l.push(a);a=new J;a.F=.9812;a.L=-.1297;a.N=.143;a.I=.1237;a.m11=-.1466;a.m12=-.9814;a.O=.1482;a.m21=.9807;a.m22=-.1278;a.G=-2376;a.m31=-62808;a.m32=37771;l.push(a);a=new J;a.F=.9889;a.L=-.134;a.N=.0638;a.I=.053;a.m11=-.0825;a.m12=
-.9952;a.O=.1386;a.m21=.9875;a.m22=-.0745;a.G=-104;a.m31=-64955;a.m32=38224;l.push(a);a=new J;a.F=.9803;a.L=-.1963;a.N=.0226;a.I=.0119;a.m11=-.0555;a.m12=-.9984;a.O=.1973;a.m21=.979;a.m22=-.0521;a.G=2290;a.m31=-66053;a.m32=39447;l.push(a);a=new J;a.F=.9587;a.L=-.2839;a.N=.017;a.I=.0035;a.m11=-.0481;a.m12=-.9988;a.O=.2843;a.m21=.9577;a.m22=-.0451;a.G=4830;a.m31=-66621;a.m32=39607;l.push(a);a=new J;a.F=.939;a.L=-.3438;a.N=.0072;a.I=-.0041;a.m11=-.0323;a.m12=-.9995;a.O=.3439;a.m21=.9385;a.m22=-.0317;
a.G=6758;a.m31=-66864;a.m32=40168;l.push(a);a=new J;a.F=.9324;a.L=-.3614;a.N=5E-4;a.I=-.0114;a.m11=-.0308;a.m12=-.9995;a.O=.3612;a.m21=.9319;a.m22=-.0328;a.G=7520;a.m31=-66863;a.m32=40232;l.push(a);Z.tf=l;l=[];a=new J;a.F=1;a.L=0;a.N=-0;a.I=0;a.m11=1;a.m12=-0;a.O=0;a.m21=0;a.m22=1;a.G=0;a.m31=-0;a.m32=0;l.push(a);a=new J;a.F=.9927;a.L=-.0183;a.N=-.119;a.I=.0277;a.m11=.9966;a.m12=.0773;a.O=.1171;a.m21=-.0801;a.m22=.9899;a.G=70;a.m31=-3027;a.m32=-619;l.push(a);a=new J;a.F=.9816;a.L=-.0289;a.N=-.1886;
a.I=.022;a.m11=.999;a.m12=-.0389;a.O=.1895;a.m21=.034;a.m22=.9813;a.G=288;a.m31=-5629;a.m32=253;l.push(a);a=new J;a.F=.9973;a.L=.0022;a.N=.074;a.I=.0054;a.m11=.9948;a.m12=-.1019;a.O=-.0738;a.m21=.1021;a.m22=.992;a.G=-219;a.m31=-2573;a.m32=764;l.push(a);a=new J;a.F=.9877;a.L=-.0202;a.N=-.155;a.I=.0055;a.m11=.9955;a.m12=-.0949;a.O=.1562;a.m21=.0929;a.m22=.9833;a.G=335;a.m31=259;a.m32=689;l.push(a);a=new J;a.F=.9986;a.L=.0123;a.N=-.0519;a.I=-.0065;a.m11=.9937;a.m12=.1115;a.O=.053;a.m21=-.111;a.m22=.9924;
a.G=178;a.m31=-3079;a.m32=-875;l.push(a);a=new J;a.F=.9996;a.L=.007;a.N=-.0256;a.I=-.0062;a.m11=.9994;a.m12=.0327;a.O=.0258;a.m21=-.0326;a.m22=.9991;a.G=110;a.m31=-5793;a.m32=-254;l.push(a);a=new J;a.F=.9893;a.L=-.0894;a.N=.1151;a.I=.0859;a.m11=.9957;a.m12=.0348;a.O=-.1177;a.m21=-.0245;a.m22=.9928;a.G=-944;a.m31=-2885;a.m32=-285;l.push(a);Z.qb=l};
Z.vc={MantatoWalk00:{c:-44,f:-41,x:210,y:0,a:82,b:88},MantatoWalk01:{c:-40,f:-39,x:548,y:177,a:76,b:85},MantatoWalk02:{c:-30,f:-39,x:430,y:89,a:67,b:86},MantatoWalk03:{c:-26,f:-41,x:0,y:0,a:62,b:89},MantatoWalk04:{c:-22,f:-41,x:62,y:0,a:58,b:89},MantatoWalk05:{c:-28,f:-38,x:377,y:263,a:57,b:84},MantatoWalk06:{c:-38,f:-38,x:497,y:89,a:65,b:86},MantatoWalk07:{c:-40,f:-40,x:292,y:0,a:73,b:88},MantatoWalk08:{c:-31,f:-40,x:0,y:177,a:66,b:86},MantatoWalk09:{c:-19,f:-38,x:367,y:348,a:60,b:83},MantatoWalk10:{c:-16,
f:-39,x:154,y:89,a:56,b:87},MantatoWalk11:{c:-18,f:-40,x:365,y:0,a:56,b:88},MantatoWalk12:{c:-15,f:-41,x:120,y:0,a:39,b:89},MantatoWalk13:{c:-15,f:-38,x:562,y:89,a:40,b:85},MantatoWalk14:{c:-19,f:-38,x:0,y:263,a:45,b:85},MantatoWalk15:{c:-28,f:-40,x:210,y:89,a:49,b:87},MantatoWalk16:{c:-14,f:-40,x:45,y:263,a:37,b:85},MantatoWalk17:{c:-13,f:-37,x:228,y:432,a:40,b:82},MantatoWalk18:{c:-19,f:-38,x:82,y:263,a:46,b:85},MantatoWalk19:{c:-19,f:-39,x:259,y:89,a:42,b:87},MantatoWalk20:{c:-18,f:-40,x:421,y:0,
a:39,b:88},MantatoWalk21:{c:-20,f:-37,x:128,y:263,a:47,b:85},MantatoWalk22:{c:-22,f:-36,x:427,y:348,a:49,b:83},MantatoWalk23:{c:-19,f:-39,x:434,y:263,a:39,b:84},MantatoWalk24:{c:-18,f:-39,x:473,y:263,a:54,b:84},MantatoWalk25:{c:-16,f:-36,x:268,y:432,a:56,b:82},MantatoWalk26:{c:-19,f:-36,x:476,y:348,a:57,b:83},MantatoWalk27:{c:-20,f:-39,x:175,y:263,a:44,b:85},MantatoWalk28:{c:-28,f:-40,x:301,y:89,a:55,b:87},MantatoWalk29:{c:-35,f:-36,x:533,y:348,a:71,b:83},MantatoWalk30:{c:-35,f:-36,x:527,y:263,a:75,
b:84},MantatoWalk31:{c:-28,f:-37,x:324,y:432,a:62,b:82},MantatoWalk32:{c:-36,f:-38,x:0,y:348,a:79,b:84},MantatoWalk33:{c:-32,f:-36,x:0,y:432,a:68,b:83},MantatoWalk34:{c:-32,f:-37,x:219,y:263,a:59,b:85},MantatoWalk35:{c:-32,f:-39,x:79,y:348,a:58,b:84},MantatoWalk36:{c:-37,f:-40,x:66,y:177,a:57,b:86},MantatoWalk37:{c:-32,f:-35,x:386,y:432,a:57,b:82},MantatoWalk38:{c:-30,f:-36,x:137,y:348,a:63,b:84},MantatoWalk39:{c:-34,f:-37,x:443,y:432,a:73,b:82},MantatoWalk40:{c:-38,f:-39,x:123,y:177,a:64,b:86},MantatoWalk41:{c:-41,
f:-37,x:200,y:348,a:58,b:84},MantatoWalk42:{c:-42,f:-37,x:278,y:263,a:57,b:85},MantatoWalk43:{c:-40,f:-39,x:258,y:348,a:56,b:84},MantatoWalk44:{c:-28,f:-40,x:335,y:263,a:42,b:85},MantatoWalk45:{c:-24,f:-36,x:516,y:432,a:38,b:82},MantatoWalk46:{c:-26,f:-36,x:68,y:432,a:45,b:83},MantatoWalk47:{c:-24,f:-37,x:113,y:432,a:45,b:83},MantatoWalk48:{c:-20,f:-40,x:356,y:89,a:36,b:87},MantatoWalk49:{c:-32,f:-38,x:187,y:177,a:46,b:86},MantatoWalk50:{c:-30,f:-38,x:233,y:177,a:49,b:86},MantatoWalk51:{c:-28,f:-40,
x:282,y:177,a:47,b:86},MantatoWalk52:{c:-20,f:-41,x:329,y:177,a:39,b:86},MantatoWalk53:{c:-26,f:-37,x:554,y:432,a:50,b:82},MantatoWalk54:{c:-27,f:-37,x:314,y:348,a:53,b:84},MantatoWalk55:{c:-20,f:-39,x:392,y:89,a:38,b:87},MantatoWalk56:{c:-31,f:-41,x:159,y:0,a:51,b:89},MantatoWalk57:{c:-37,f:-39,x:368,y:177,a:53,b:86},MantatoWalk58:{c:-37,f:-39,x:421,y:177,a:56,b:86},MantatoWalk59:{c:-23,f:-41,x:460,y:0,a:42,b:88},MantatoWalk60:{c:-26,f:-42,x:502,y:0,a:58,b:88},MantatoWalk61:{c:-35,f:-38,x:158,y:432,
a:70,b:83},MantatoWalk62:{c:-36,f:-38,x:477,y:177,a:71,b:86},MantatoWalk63:{c:-31,f:-40,x:560,y:0,a:62,b:88},MantatoDeath0105:{c:-36,f:-41,x:0,y:89,a:74,b:88},MantatoDeath0106:{c:-37,f:-45,x:74,y:89,a:80,b:88},MantatoDeath0107:{c:-36,f:-41,x:0,y:515,a:80,b:75},MantatoDeath0108:{c:-40,f:-31,x:80,y:515,a:86,b:60},MantatoDeath0109:{c:-42,f:-15,x:166,y:515,a:88,b:50},MantatoDeath0110:{c:-40,f:7,x:254,y:515,a:83,b:41},MantatoDeath0111:{c:-44,f:20,x:334,y:590,a:89,b:30},MantatoDeath0112:{c:-45,f:20,x:337,
y:515,a:89,b:36},MantatoDeath0113:{c:-43,f:19,x:426,y:515,a:89,b:36},MantatoDeath0114:{c:-40,f:19,x:515,y:515,a:86,b:36},MantatoDeath0115:{c:-40,f:19,x:0,y:590,a:85,b:36},MantatoDeath0116:{c:-38,f:20,x:85,y:590,a:83,b:35},MantatoDeath0117:{c:-37,f:20,x:168,y:590,a:83,b:35},MantatoDeath0118:{c:-37,f:20,x:251,y:590,a:83,b:35}};Z.prototype.create=function(){this.transform.rotate(ob(nb)*Math.PI*2,0,0);Ud(this,37500);uk.push(this);ck.prototype.create.call(this);t.g.Dc.push(this)};
Z.prototype.step=function(){Z.prototype[this.action[0]].call(this);this.y=this.h.y+this.eb+this.ta-this.ae+12500;ck.prototype.step.call(this)};
Z.prototype.Xc=function(){var a=Cd(this.M);a.y+=this.eb+this.ta-this.ae+103400;var b=td(Cd(t.la.M),a,new w),c=b.pa(1);c=Math.min(1,c/(2*this.ae));var d=new w(0,1,0),e=qc(d,b,new w).normalize();qc(b,e,d);var h=t.la.M.We(),g=t.la.M.Bd();this.oa.cf(ud(t.la.M.Ve(),e,c).normalize());this.oa.df(ud(h,d,c).normalize());this.oa.ef(ud(g,b,c).normalize());Dd(this.oa,a);this.Ee?this.Jf.set(this.Ee[this.j%this.Ee.length]):this.Jf.reset();this.gb&&(a=this.M,a=Math.round(4*(Math.atan2(a.O,a.m22)-Math.atan2(t.la.M.G-
a.G,t.la.M.m32-a.m32))/Math.PI),0>a&&(a+=8),8<=a&&(a-=8),this.aj=a,this.Jf.rotate(this.aj*Math.PI/4,0,0));Ad(this.oa,this.Jf,this.Jf);this.oa.G+=this.oa.I*this.oj;this.oa.m31+=this.oa.m11*this.oj;this.oa.m32+=this.oa.m12*this.oj;a=1+this.ph;this.oa.scale(a,a,a);if(this.Sh){a=n(this.Sh);for(b=a.next();!b.done;b=a.next()){c=b.value;c.lg.G+=this.h.x;c.lg.m31+=this.h.y;c.lg.m32+=this.h.z;b=c.Ul;c=Cd(c.lg);d=this.Jf;e=new J;h=d.F*-d.G+d.L*-d.m31+d.N*-d.m32;g=d.I*-d.G+d.m11*-d.m31+d.m12*-d.m32;var k=d.O*
-d.G+d.m21*-d.m31+d.m22*-d.m32,l=d.I,m=d.O,p=d.L,r=d.m11,q=d.m21,v=d.N,z=d.m12,y=d.m22;e.F=d.F;e.I=p;e.O=v;e.G=h;e.L=l;e.m11=r;e.m21=z;e.m31=g;e.N=m;e.m12=q;e.m22=y;e.m32=k;e.vb(c,c);d={};d.h=c;d.hc=t.j+1;e=7E3*b;h=rb(2)?-e:e;k=mb()*(180/2147483648);g=Math.cos(k);k=Math.sin(k);d.Ba=new xd;d.Ba.F=g*h;d.Ba.L=k*h;d.Ba.I=-k*e;d.Ba.m11=g*e;this.tb.push(d);this.tb.length>Z.ze&&this.tb.shift();d={};d.h=c;d.hc=t.j+1;b=7E3*b+3500;c=rb(2)?-b:b;h=mb()*(180/2147483648);e=Math.cos(h);h=Math.sin(h);d.Ba=new xd;
d.Ba.F=e*c;d.Ba.L=h*c;d.Ba.I=-h*b;d.Ba.m11=e*b;this.Oe.push(d);this.Oe.length>Z.ze&&this.Oe.shift()}delete this.Sh}};
Z.prototype.ab=function(){Z.Ma+=2;255<Z.Ma&&(u.clear(u.STENCIL_BUFFER_BIT),Z.Ma=130);t.bc(1);u.colorMask(!1,!1,!1,!1);u.stencilFunc(u.ALWAYS,Z.Ma-128,255);u.stencilOp(u.KEEP,u.KEEP,u.REPLACE);var a=this.oa.Bd(),b=oc(a,Cd(this.oa));t.Ab(sg);t.cb(t.i.va.get("monoThresholdEffect"));t.Nb(0,t.i.P.get("smokePuff01"));Z.$.bind();t.rb(0);t.Tb(0);t.A.J("color",gd);for(var c=n(this.tb),d=c.next();!d.done;d=c.next()){var e=d.value;d=this.Jf.vb(e.h,new w);if(!(0>oc(d,a)-b)){var h=4>t.j-e.hc?1.4:1;e=(new xd).set(e.Ba);
e.F*=h;e.L*=h;e.I*=h;e.m11*=h;e=yd(this.oa,e,new J);Dd(e,d);t.A.J("modelMatrix",e);u.drawArrays(u.TRIANGLE_FAN,tg(0,1),4)}}t.bc(2);u.colorMask(!0,!0,!0,!0);u.stencilFunc(u.GEQUAL,Z.Ma-1,127);u.stencilOp(u.KEEP,u.KEEP,u.REPLACE);this.A=t.j==this.gf+1?t.i.va.get("flashCardThreshold"):t.i.va.get("physicalCardThreshold");t.Ab(Z.Ia);t.cb(this.A);t.Nb(0,this.ha);Z.$.bind();t.A.J("ambientLight",this.ia.mb,!1);t.rb(0);t.Tb(0);t.A.J("color",this.color);a=new J;a.set(this.oa);b=this.Tc;a.F*=b;a.L*=b;a.N*=b;
a.I*=-b;a.m11*=-b;a.m12*=-b;t.A.J("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,Z.vc[this.gc+("00"+(this.aj*this.nf+this.j)).slice(-2)].vd,4);this.ph*=.75;if("flashCardThreshold"!=this.A.name)for(t.bc(0),u.stencilFunc(u.EQUAL,Z.Ma-1,255),u.stencilOp(u.KEEP,u.KEEP,u.KEEP),a=this.oa.Bd(),b=oc(a,Cd(this.oa)),t.Ab(sg),t.cb(t.i.va.get("monoEffect")),t.Nb(0,t.i.P.get("splatter01")),t.i.Lb.get("monsterSplatter").bind(),t.rb(1),t.Tb(0),t.A.J("ambientLight",this.ia.mb,!1),t.A.J("color",Zk.xf),c=n(this.Oe),
d=c.next();!d.done;d=c.next())e=d.value,d=this.Jf.vb(e.h,new w),0>oc(d,a)-b||(h=4>t.j-e.hc?1.4:1,e=(new xd).set(e.Ba),e.F*=h,e.L*=h,e.I*=h,e.m11*=h,e=yd(this.oa,e,new J),Dd(e,d),t.A.J("modelMatrix",e),u.drawArrays(u.TRIANGLE_FAN,tg(0,1),4))};
Z.prototype.idle=function(){isNaN(this.V)&&(this.V=t.j,this.gc="MantatoWalk",this.ub=64,this.nf=8,this.Ee=Z.qb);var a=t.j-this.V;this.j=0;0==a%30&&($k(this,t.g.ma.h),this.action[0]="rush",this.action.unshift("alert"),this.V=NaN,this.path=null);this.j=(Math.floor(a/8)%3+6)%8};
Z.prototype.wander=function(){isNaN(this.V)&&(this.V=t.j,this.gc="MantatoWalk",this.ub=64,this.nf=8,this.Ee=Z.qb,this.Vc=1/3*14887);var a=t.j-this.V;if(!this.path){var b=sb(Wi.sl),c=pb(b.H-b.D)+b.D;b=pb(b.u-b.s)+b.s;al(this,c,b)}0==a%30&&($k(this,t.g.ma.h),this.action[0]="rush",this.action.unshift("alert"),this.V=NaN,this.path=null);this.j=Math.floor(a/3)%8};
Z.prototype.alert=function(){isNaN(this.V)&&(this.V=t.j,this.gc="MantatoWalk",this.ub=64,this.nf=8,this.Ee=Z.qb);var a=t.j-this.V;this.j=0;18==a&&(this.action.shift(),this.nh&&bl(this)&&(this.action.unshift("attack"),this.V=NaN))};Z.prototype.hit=function(){isNaN(this.V)&&(this.V=t.j,this.gc="MantatoWalk",this.ub=64,this.nf=8,this.Ee=Z.qb,this.km=pb(8));var a=t.j-this.V;this.j=(this.km+Math.floor(a/2))%8;240==a&&(this.action.shift(),this.V=NaN)};
Z.prototype.attack=function(){isNaN(this.V)&&(this.V=t.j,this.gc="MantatoWalk",this.ub=64,this.nf=8,this.Ee=Z.qb,$k(this,t.g.ma.h));var a=t.j-this.V;this.j=Math.floor(a/3)%8;0==a&&t.i.X.get("MasherSwing01").play({gain:1,pitch:1.2});if(6==a){var b=td(t.g.ma.h,this.h,new w);if(b.pa(1)<this.lj){b.y=0;b.pa(1);b.y=1;b.pa(9E3);var c=t.g.ma;c.B.add(b);c.gh=Number.NEGATIVE_INFINITY;c.Ii=Number.NEGATIVE_INFINITY;c.Mh=!0;Yk(c,-1);c.Da+=kc(15);t.i.X.get("MasherSlap01").play({gain:1,pitch:1})}}45==a&&(this.action.shift(),
this.V=NaN)};Z.prototype.rush=function(){isNaN(this.V)&&(this.V=t.j,this.gc="MantatoWalk",this.ub=64,this.nf=8,this.Ee=Z.qb,this.Vc=7443.5);var a=t.j-this.V;t.j<this.lm+12||al(this,t.g.ma.h.z,t.g.ma.h.x);0<a&&0==a%6&&this.nh&&bl(this)&&(this.action.unshift("attack"),this.V=NaN);this.j=Math.floor(a/2)%8};
Z.prototype.death=function(){isNaN(this.V)&&(this.V=t.j,this.gc="MantatoDeath01",this.ub=16,this.nf=0,this.Ee=Z.tf);var a=t.j-this.V;4<=a&&(a-=4);this.j=Math.floor(a/4);13<this.j&&(this.j=13);this.j+=5;6==a&&t.g.Rl();24==a&&t.i.X.get(wb("bodyThud01","bodyThud02")).play({gain:.5});720<=a&&this.remove()};function bl(a){return td(t.g.ma.h,a.h,new w).qc()<a.lj*a.lj}function al(a,b,c){t.j!=Xi&&(Xi=a.lm=t.j,Yi=300,a.path=$i(a.h.z,a.h.x,b,c))}
Z.prototype.Aj=function(){var a=new w;if(!this.path||"alert"==this.action[0]||"hit"==this.action[0]||"attack"==this.action[0])return a;for(var b,c;;){b=this.path[0];c=b.getParameter(this.h.z,this.h.x);if(c<b.length)break;this.path.shift();if(!this.path.length)return this.path=null,a}b=b.evaluate(c+1E5);a.z=b.x-this.h.z;a.x=b.y-this.h.x;$k(this,new w(b.y,0,b.x));return a};Z.prototype.$f=function(a){this.gb&&(this.gf=t.j,this.B.x=0,this.B.z=0,this.Gb-=a,0>=this.Gb&&this.uj())};
Z.prototype.uj=function(){this.gb&&(this.gb=!1,this.action=["death"],this.V=NaN,t.g.zf--,this.path=null,vk.call(this),Uj.remove(this))};Z.prototype.remove=function(){this.Zg&&this.Zg.remove();var a=t.g.Dc.indexOf(this);0<=a&&t.g.Dc.splice(a,1);ck.prototype.remove.call(this);this.gb&&(vk.call(this),t.g.zf--)};function $k(a,b){b=td(b,a.h,new w(0,0,0));b.y=0;b.pa(1);a.transform.F=b.z;a.transform.N=-b.x;a.transform.O=b.x;a.transform.m22=b.z}
function Jk(a,b,c){a.gb&&("attack"==a.action[0]&&a.action.shift(),"hit"!=a.action[0]&&a.action.unshift("hit"),a.V=NaN,a.Ei=t.j);var d=c*(ob(nb)+1),e=new Zk;e.frame=pb(16);e.nb=12E3*(ob(nb)+1);e.nb*=c;e.h.set(0,0,5E4);b.vb(e.h,e.h);e.B.x=5E3*(2*ob(nb)-1);e.B.y=5E3*(2*ob(nb)-1);e.B.z=2E4*(ob(nb)+1);Bd(b,e.B,e.B);e.kf=kc(60*(.25+ob(nb)));rb(2)&&(e.kf=-e.kf);M(e,t.vg);e.create();e=new Zk;e.frame=pb(16);e.nb=8E3*(ob(nb)+1);e.nb*=c;e.h.set(0,0,5E4);b.vb(e.h,e.h);e.B.x=5E3*(2*ob(nb)-1);e.B.y=5E3*(2*ob(nb)-
1);e.B.z=2E4*(ob(nb)+1);Bd(b,e.B,e.B);e.Gg=Zk.xf;M(e,t.vg);e.create();c=Math.sqrt(3*c)+ob(nb)-.5;for(e=0;e<c;e++){var h=new Zk;h.Ji=120;h.frame=pb(16);h.nb=12E3;h.h.set(0,0,5E4);b.vb(h.h,h.h);h.B.x=2*ob(nb)-1;h.B.y=2*ob(nb)-1;h.B.z=2*ob(nb);h.B.pa(1E4*(ob(nb)+1));h.B.y+=6E3*ob(nb);Bd(b,h.B,h.B);h.kf=kc(60*(.25+ob(nb)));rb(2)&&(h.kf=-h.kf);rb(2)&&(h.Gg=Zk.xf);M(h,t.vg);h.create()}$k(a,Cd(t.la.M));Vd(a);a.Sh||(a.Sh=[]);b.G-=a.h.x;b.m31-=a.h.y;b.m32-=a.h.z;a.Sh.push({lg:b,Ul:d});a.ph=Math.min(a.ph+.2,
.25)}function cl(){Yj.call(this,"potato");this.Pb=1E5;this.ta=12500;this.eb=0;this.pc=!1;return this}cl.prototype=Object.create(Yj.prototype);f=cl.prototype;f.constructor=cl;f.create=function(){this.V=t.j;this.oa=new J;this.j=0;this.ub=16;this.Tc=25E3;this.A=t.i.va.get("physicalCardThreshold");this.ha=t.i.P.get("Potato");Ud(this,18750);Yj.prototype.create.call(this)};f.Pi=function(){this.remove()};
f.Xc=function(){var a=Cd(this.M),b=td(Cd(t.la.M),a,new w),c=b.pa(1);c=Math.min(1,c/(4*this.ta));var d=new w(0,1,0),e=qc(d,b,new w).normalize();qc(b,e,d);var h=t.la.M.We(),g=t.la.M.Bd();this.oa.cf(ud(t.la.M.Ve(),e,c).normalize());this.oa.df(ud(h,d,c).normalize());this.oa.ef(ud(g,b,c).normalize());Dd(this.oa,a);a=t.j-this.V;this.j=3*Math.floor(a/2);this.j%=this.ub;0==Math.floor(a/2)%13?(this.A=t.i.va.get("flashCardThreshold"),this.color=gd):1==Math.floor(a/2)%13?(this.A=t.i.va.get("flashCardThreshold"),
this.color=hd):(this.A=t.i.va.get("physicalCardThreshold"),this.color=gd)};f.ab=function(){this.Xc();t.Ab(sg);t.cb(this.A);t.Nb(0,this.ha);Z.$.bind();t.A.J("ambientLight",this.ia.mb,!1);t.rb(0);t.Tb(0);t.A.J("color",this.color);var a=new J;a.set(this.oa);var b=this.Tc;a.F*=b;a.L*=b;a.N*=b;a.I*=-b;a.m11*=-b;a.m12*=-b;t.A.J("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,tg(this.j,this.ub),4)};f.remove=function(){this.Cm.nh+=1;Yj.prototype.remove.call(this)};
function Zk(){t.Pa.call(this,"SpudGib");pg.call(this);this.ub=16;this.frame=0;this.nb=25E3;this.scale=1;this.hg=rb(2);this.Jd=lc(mb());this.kf=0;this.Pb=2*this.nb;this.V=this.bk=t.j+4;this.B=new w(0,0,0);this.Ji=600;this.Gg=Zk.Gg;this.xf=Zk.xf}Zk.prototype=Object.create(t.Pa.prototype);Zk.prototype.constructor=Zk;Zk.Gg=new G(214,164,93,255);Zk.xf=new G(255,255,144,255);
Zk.prototype.create=function(){this.transform.G=this.h.x;this.transform.m31=this.h.y;this.transform.m32=this.h.z;t.Pa.prototype.create.call(this);dl(this)};function dl(a){a.Xh=t.j;a.we=a.h.ca();var b=mf(a.we,a.B);b?(a.dh=b.p,a.ei=b.n,a.Nf=Math.ceil(t.j+b.t),a.eh=b.item):a.Nf=Number.POSITIVE_INFINITY}
Zk.prototype.step=function(){this.eh&&this.eh.yd>this.Xh&&dl(this);if(t.j<this.Nf){this.ck&&this.ck.yd>this.Xh&&(this.ck=null,this.V=t.j,this.B.set(0,0,0),this.Wi=!1,dl(this));var a=t.j-this.V;0>a||(this.Wi?(this.h.y=this.we.y+this.B.y*a,this.transform.m31=this.h.y):(this.h.set(this.we.x+this.B.x*a,this.we.y+.5*(2*this.B.y+Tj.y*a)*a,this.we.z+this.B.z*a),this.transform.G=this.h.x,this.transform.m31=this.h.y,this.transform.m32=this.h.z,t.j%3||(this.Jd+=this.kf)))}else t.j==this.Nf&&(this.h.set(this.dh.x,
this.dh.y,this.dh.z),this.ck=this.eh,this.transform.G=this.h.x,this.transform.m31=this.h.y,this.transform.m32=this.h.z,this.Gg==this.xf&&(Gg(t.g.Fk,this.dh,this.ei,lc(mb()),this.nb*this.scale*2.5,pb(4),4),this.remove()),-1==this.ei.y?(this.we=this.h.ca(),this.V=t.j+180+pb(360),this.B.set(0,0,0),this.kf=0,this.Wi=!1,this.Xh=t.j,(a=hf(this.we,this.B))?(this.dh=a.p,this.ei=a.n,this.Nf=Math.ceil(t.j+a.t),this.eh=a.item):this.Nf=Number.POSITIVE_INFINITY):0==this.ei.y?(this.we=this.h.ca(),this.V=t.j+180+
pb(360),this.B.set(0,-500,0),this.Wi=!0,this.Xh=t.j,(a=hf(this.we,this.B))?(this.dh=a.p,this.ei=a.n,this.Nf=Math.ceil(t.j+a.t),this.eh=a.item):this.Nf=Number.POSITIVE_INFINITY):(this.we=this.h.ca(),this.V=Number.POSITIVE_INFINITY,this.B.set(0,0,0),this.kf=0,this.Wi=!1,this.Xh=t.j,this.Nf=Number.POSITIVE_INFINITY,this.eh=null));t.j-this.bk>this.Ji&&this.remove();t.Pa.prototype.step.call(this)};
Zk.prototype.ab=function(){qg.call(this,this.M);t.Ab(sg);t.cb(Zk.A);t.Nb(0,Zk.ha);t.rb(0);t.bc(2);t.Tb(0);t.A.J("modelMatrix",this.M);t.A.J("color1",this.Gg);t.A.J("color2",this.xf);t.A.J("ambientLight",this.ia.mb);u.drawArrays(u.TRIANGLE_FAN,tg(this.frame,this.ub),4);t.Pa.prototype.ab.call(this)};function X(a){Yj.call(this,"loot");this.species=a;this.ya=a.ya;this.ta=37500;this.eb=0;this.sg=.8;this.hc=t.j+pb(600);this.gb=!0}X.prototype=Object.create(Yj.prototype);X.prototype.constructor=X;
X.Ml=function(){var a=[t.i.X.get("coinPurse01"),t.i.X.get("coinPurse02"),t.i.X.get("coinPurse03"),t.i.X.get("coinPurse04")],b=[t.i.X.get("ingot01"),t.i.X.get("ingot02")],c=[t.i.X.get("gem01"),t.i.X.get("gem02"),t.i.X.get("gem03")],d=[t.i.X.get("crumplePaper01"),t.i.X.get("crumplePaper02")],e={Xa:t.i.Ac.get("moneyNugget"),ya:1,X:c,Pc:X.wb,Mc:X.qb,zc:X.Ma};a={Xa:t.i.Ac.get("moneyCoin"),ya:5,X:a,Pc:X.wb,Mc:X.qb,zc:X.Ma};d={Xa:t.i.Ac.get("moneyBundle"),ya:25,X:d,Pc:X.wb,Mc:X.qb,zc:X.Ma};b={Xa:t.i.Ac.get("moneyBar"),
ya:125,X:b,Pc:X.wb,Mc:X.qb,zc:X.Ma};var h={Xa:t.i.Ac.get("gemRuby"),ya:2,X:c,Pc:X.wb,Mc:X.qb,zc:X.Ma},g={Xa:t.i.Ac.get("gemEmerald"),ya:10,X:c,Pc:X.wb,Mc:X.qb,zc:X.Ma};c={Xa:t.i.Ac.get("gemSapphire"),ya:50,X:c,Pc:X.wb,Mc:X.qb,zc:X.Ma};X.Cg=[e,h,a,a,a,a,a,g,d,c,b]};X.Xm=function(a,b,c){for(;a;){for(var d=0;d<X.Cg.length&&!(X.Cg[d].ya>a);)d++;if(1==b)--d;else if(0==b)d=Math.floor(ob(nb)*d);else{var e=2*b;e=1<=e?2-e:1/e;d=Math.floor(Math.pow(ob(nb),e)*d)}d=X.Cg[d];a-=d.ya;c.push(new X(d))}};f=X.prototype;
f.create=function(){this.V=t.j;this.oa=new J;this.j=0;this.ub=16;this.A=t.i.va.get("physicalCardThreshold");if(this.species.Xa){var a=this.Xa=new jg(this.species.Xa);a.Ja=this.M;M(a,this);a.create();this.Pb=a.src.Pb;Td(a,this.ia)}Ud(this,18E3);Yj.prototype.create.call(this)};
f.step=function(){if(this.Xa){var a=t.j-this.hc;a=3*Math.floor(a/3);zd(this.Xa.transform);this.Xa.transform.rotate((a+.5*Math.sin(a))/6,Math.PI/4,0)}this.be?t.Pa.prototype.step.call(this):(this.gb?(60==t.j-this.hc&&(this.gb=!1,Uj.remove(this)),Yj.prototype.step.call(this)):(this.pe&&(a=td(new w(this.pe.h.x,this.pe.h.y,this.pe.h.z),this.h,new w(0,0,0)),a.qc()<Math.pow(5E4,2)?Xk(this.pe,this):(a.y*=5,a.pa(25E3),this.h.x+=a.x,this.h.y+=a.y,this.h.z+=a.z),this.transform.G=this.h.x,this.transform.m31=
this.h.y,this.transform.m32=this.h.z),t.Pa.prototype.step.call(this)),this.Xa&&X.Ll(this))};f.al=function(a){this.pe=a;this.mm=this.h.ca();if(this.nm=this.gb)this.gb=!1,Uj.remove(this);this.species.Mc.call(this,this.pe);this.V=t.j};f.remove=function(){this.be&&Vk(this);t.Pa.prototype.remove.call(this);Uj.remove(this);this.species.Kb&&(t.g.od[this.species.Kb.nc]-=this.ya);this.Xa&&this.Xa.remove();this.Hd&&(this.Hd.Pg=null,this.Hd.Jg=t.j,this.Hd=null)};f.Oj=function(){this.pe||this.remove()};
X.Ll=function(a){a=a.ia.mb;a.x=Math.min(1,a.x+.01);a.y=Math.min(1,a.y+.01);a.z=Math.min(1,a.z+.01)};
X.prototype.Xc=function(){var a=Cd(this.M);this.ya<this.species.ya&&(a.y-=21875);var b=td(Cd(t.la.M),a,new w),c=b.pa(1);c=Math.min(1,c/(4*this.ta));var d=new w(0,1,0),e=qc(d,b,new w).normalize();qc(b,e,d);var h=t.la.M.We(),g=t.la.M.Bd();this.oa.cf(ud(t.la.M.Ve(),e,c).normalize());this.oa.df(ud(h,d,c).normalize());this.oa.ef(ud(g,b,c).normalize());Dd(this.oa,a);this.j=this.pe?Math.floor(Math.min(15,(t.j-this.V)/2+8)):this.ya<this.species.ya?12:Math.floor((t.j-this.V)/3)%8};
X.prototype.ab=function(){this.Xc();t.Ab(sg);t.cb(this.A);t.Nb(0,this.species.gc);Z.$.bind();t.A.J("ambientLight",this.ia.mb,!1);t.rb(0);t.Tb(0);t.A.J("color",gd);var a=new J;a.set(this.oa);var b=this.species.Tc;a.F*=b;a.L*=b;a.N*=b;a.I*=-b;a.m11*=-b;a.m12*=-b;t.A.J("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,tg(this.j,this.ub),4)};X.vf=function(a){return(a=a.Ra.ob[this.species.Kb.Fc])?Math.min(a.Vf-Ek(a)-a.Sf,this.ya):0};X.tf=function(a){if(a=a.Ra.ob[this.species.Kb.Fc])a.Sf+=this.ya};
X.ge=function(a){if(a=a.Ra.ob[this.species.Kb.Fc]){var b=Math.min(this.ya,a.Vf-Ek(a));a.$a+=b;a.Sf-=b;this.ya-=b;t.g.od[a.constructor.nc]-=b;t.g.Sl(this.species,b);t.g.pf()}};X.wb=function(){return this.ya};X.qb=function(){};X.Ma=function(){t.g.td-=this.ya;this.ya=0;0>t.g.td&&(t.g.td=0);t.g.jk()};function Vk(a){var b=a.be.Ra.ob[a.species.Kb.Fc];b&&(b.Sf-=a.ya);a.Sa=-1;a.Zg.Sa=-1;delete a.be.be[a.index];a.be=null}X.an=function(a){return Math.min(360-a.Gb-a.Ih,this.ya)};X.$m=function(a){a.Ih+=this.species.ya};
X.Ym=function(a){Yk(a,this.species.ya);a.Ih-=this.species.ya};function Wk(a){t.Pa.call(this,"LootGun");this.species=a;this.ta=37500;this.Pb=87500}Wk.prototype=Object.create(t.Pa.prototype);f=Wk.prototype;f.constructor=Wk;f.create=function(){this.transform.G=this.h.x;this.transform.m31=this.h.y;this.transform.m32=this.h.z;this.oa=new J;this.A=t.i.va.get("physicalCardThreshold");Ud(this,37500);t.Pa.prototype.create.call(this)};f.al=function(a){Xk(a,this)};
f.remove=function(){this.Hd&&(this.Hd.Pg=null,this.Hd.Jg=t.j,this.Hd=null);--t.g.od.gun;t.Pa.prototype.remove.call(this)};f.Xc=function(){var a=Cd(this.M);a.y+=6250*Math.sin(t.j*Math.PI/30);var b=td(Cd(t.la.M),a,new w),c=b.pa(1);c=Math.min(1,c/(4*this.ta));var d=new w(0,1,0),e=qc(d,b,new w).normalize();qc(b,e,d);var h=t.la.M.We(),g=t.la.M.Bd();this.oa.cf(ud(t.la.M.Ve(),e,c).normalize());this.oa.df(ud(h,d,c).normalize());this.oa.ef(ud(g,b,c).normalize());Dd(this.oa,a)};
f.ab=function(){this.Xc();t.Ab(sg);t.cb(this.A);t.Nb(0,this.species.gc);Z.$.bind();var a=this.ia.mb.ca();a.x+=.1;a.y+=.1;a.z+=.1;t.A.J("ambientLight",a,!1);t.rb(0);t.Tb(0);t.A.J("color",gd);a=new J;a.set(this.oa);var b=this.species.Tc;a.F*=b;a.L*=b;a.N*=b;a.I*=-b;a.m11*=-b;a.m12*=-b;t.A.J("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,tg(0,1),4)};Wk.vc=function(a){return a.Ra.ob[this.species.Kb.Fc]?0:1};Wk.ze=function(){};Wk.Rc=function(a){t.g.mn=t.g.Mb;var b=new this.species.Kb(a.Ra);a.Ra.Ad=b};function Ok(a){t.Ga.call(this,a);pg.call(this);this.A=t.i.va.get("physicalCard");this.ha=t.i.P.get("smokePuff02");this.$=Ok.$;this.color=new G(Ok.color.r,Ok.color.kb,Ok.color.ra,255);this.frame=0;this.ub=16;this.B=new w;this.Ib=new w;this.scale=1;this.Jd=lc(mb());this.hc=t.j}Ok.prototype=Object.create(t.Ga.prototype);Ok.prototype.constructor=Ok;Ok.$=new Xd;Ok.$.Ha=2;Ok.color=new G(144,144,144,255);
Ok.prototype.step=function(){var a=t.j-this.hc;a=Math.pow(a/540,.625);this.frame=Math.floor(9*a);this.alpha=.25*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.Qa=this.alpha*Ok.color.Qa&255;this.transform.m31+=200;this.B.scale(.8125);a=new w(.5*this.Ib.x+.5*this.B.x,.5*this.Ib.y+.5*this.B.y,.5*this.Ib.z+.5*this.B.z);this.transform.G+=a.x;this.transform.m31+=a.y;this.transform.m32+=a.z;this.Ib.set(this.B.x,this.B.y,this.B.z);t.Ga.prototype.step.call(this)};
Ok.prototype.ab=function(){rg.call(this);t.Ga.prototype.ab.call(this)};function Ik(a){t.Ga.call(this,a);pg.call(this);this.A=t.i.va.get("physicalCard");this.ha=t.i.P.get("smokePuff02");this.$=Ok.$;this.color=new G(Ik.color.r,Ik.color.kb,Ik.color.ra,255);this.frame=0;this.ub=16;this.B=new w;this.Ib=new w;this.scale=1;this.Jd=lc(mb());this.ia={qa:4294967295,mb:new w(1,1,1)};this.hc=t.j}Ik.prototype=Object.create(t.Ga.prototype);Ik.prototype.constructor=Ik;Ik.color=new G(212,212,212,255);
Ik.prototype.step=function(){var a=t.j-this.hc;a/=this.Ji;a=Math.pow(a,.75);this.frame=Math.floor(9*a);this.alpha=.375*(1-a);this.scale=1+3*a;1<=a&&this.remove();this.color.Qa=this.alpha*Ik.color.Qa&255;this.B.scale(.8125);var b=new w(.5*this.Ib.x+.5*this.B.x,.5*this.Ib.y+.5*this.B.y,.5*this.Ib.z+.5*this.B.z);this.transform.G+=b.x;this.transform.m31+=b.y;this.transform.m32+=b.z;this.Ib.set(this.B.x,this.B.y,this.B.z);if(0==a||0==t.j%4)a=Cd(this.transform),(b=hf(a,new w(0,-1E8,0),eg))&&(b=Ue(b.item.ba))&&
ag(a,b,this.ia.mb);t.Ga.prototype.step.call(this)};Ik.prototype.ab=function(){rg.call(this);t.Ga.prototype.ab.call(this)};function xk(a,b){t.Ga.call(this,"ExplodePuff");pg.call(this);this.A=t.i.va.get("image");this.ha=t.i.P.get("explode");this.$=xk.$;this.color=new G(255,255,255,255);this.scale=1;this.nb=a;this.hg=rb(2);this.Jd=lc(mb());this.hc=t.j+1;this.ub=16;this.Na=b}xk.prototype=Object.create(t.Ga.prototype);xk.prototype.constructor=xk;xk.$=new Xd;xk.$.Ha=1;
xk.prototype.step=function(){var a=t.j-this.hc;50<=a&&this.remove();this.scale+=.02;this.transform.m31+=3E3*(1-a/50);this.frame=Math.floor(16*(1-Math.pow(.9375,a)));var b=255*(1-(a-15)/35);255<b&&(b=255);b&=255;this.color.r=b;this.color.kb=b;this.color.ra=b;this.color.Qa=b;b=10/this.Na.cd;0==a?(this.Na.hb.x+=b,this.Na.hb.y+=b,this.Na.hb.z+=b):10==a&&(this.Na.hb.x-=b,this.Na.hb.y-=b,this.Na.hb.z-=b);t.Ga.prototype.step.call(this)};xk.prototype.ab=function(){rg.call(this);t.Ga.prototype.ab.call(this)};
function Hk(a,b){t.Ga.call(this,b);pg.call(this);this.A=t.i.va.get("image");this.ha=t.i.P.get("bulletFlare01");this.$=Hk.$;this.color=new G(255,255,255,0);this.scale=1;this.nb=a;this.hg=rb(2);this.Jd=lc(mb());this.hc=t.j+1;this.ub=4}Hk.prototype=Object.create(t.Ga.prototype);Hk.prototype.constructor=Hk;Hk.$=new Xd;Hk.$.Ha=1;Hk.prototype.step=function(){var a=t.j-this.hc;0<=a&&(3<=a&&this.remove(),this.scale+=.25);this.frame=Math.floor(a);t.Ga.prototype.step.call(this)};
Hk.prototype.ab=function(){rg.call(this);t.Ga.prototype.ab.call(this)};t.g=new t.Node("game");t.Wk=new t.Node("gameDraw");t.g.El=0;t.g.Mb=null;t.g.mg=0;t.g.ll=0;t.g.kl=0;t.g.ak=null;t.g.Dc=[];t.g.Hg=[];t.g.Eg=[];t.g.Hj=0;t.g.Nh=0;t.g.dl=NaN;t.g.td=Infinity;t.g.zf=NaN;t.g.Kk=0;t.g.od={nh:0};t.g.uk=[];t.g.Pf=!0;t.g.pf=function(){var a=t.g.ma.Ra.K,b=-170,c=119;!(a instanceof Pk)&&a instanceof Lk&&(b+=6,c-=10);var d=Ek(a).toLocaleString("en-US");var e=t.i.P.get("HUDNumerals24Bold");d=t.zi(e,d,0);d.color=hd;d.x=b;d.y=c;d.x-=d.width*d.xg.width;a.gj=d;t.g.Pf=!0};
t.g.jk=function(){var a=t.g.td;var b=t.i.P.get("HUDNumeralsSilverAndGold");if(a)a=t.zi(b,a.toLocaleString("en-US"),0);else{a=[];var c=b.Xk("1");a.width=b.oe[c]+b.jg[c];a.height=b.Xe;a.xg=b}a.color=gd;a.x=209;a.y=-127;a.x-=a.width*a.xg.width;t.g.ji=a;t.g.Pf=!0};t.g.sn=function(){};
t.g.Sl=function(a,b){if(b){for(var c=null,d=0,e=n(t.g.uf),h=e.next();!h.done;h=e.next())if(h=h.value,h.species!=a)d=h.y+h.species.xd.height;else{c=h;break}c||(c={},c.species=a,c.ya=0,c.y=d,t.g.uf.push(c));c.ya+=b;c.V=t.j;a=t.i.P.get("HUDNumerals14Bold");c.tk=t.zi(a,c.ya.toLocaleString("en-US"),0);t.g.Pf=!0}};t.g.qm=function(){for(var a=0,b=0;b<t.g.uf.length;b++){var c=t.g.uf[b];240<=t.j-c.V?(t.g.uf.splice(b--,1),t.g.Pf=!0):(c.y=Math.max(c.y-.5,a),a+=c.species.xd.height)}};
t.g.Rl=function(){t.g.Hj+=1;t.g.Nh+=1};t.g.pm=function(){0>=t.g.Nh||t.j<t.g.dl+2||(t.g.Nh--,t.g.dl=t.j,t.i.X.get("hit02").play({gain:1}),t.g.uk=t.zi(t.i.P.get("HUDNumerals24Bold"),(t.g.Hj-t.g.Nh).toLocaleString("en-US"),1),t.g.uk.jn=t.j,t.g.Pf=!0)};t.g.bn=function(a){var b=document.createElement("div");b.style.position="relative";b.style.padding="8px";b.style.marginTop="4px";b.style.fontSize="14pt";b.style.background="#2c80fd";b.style.boxShadow="-2px 5px 0px black";b.innerHTML=a;b.bk=t.j;t.g.Gl.appendChild(b)};
t.g.rn=function(a){t.g.Gl.removeChild(a)};
t.i.ready=function(){t.g.Gl=document.getElementById("tutorialDiv");var a=t.i.P.get("HUDNumerals10");a.oe=[7,5,7,7,8,7,7,7,7,7,3];a.Xe=10;a.Ng=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.jg=[0,1,0,0,-1,0,0,0,0,0,0];t.Fi(a);a=t.i.P.get("HUDNumerals14Bold");a.oe=[9,6,9,9,9,9,9,9,9,9,4];a.Xe=14;a.Ng=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0];a.jg=[0,1,0,0,0,0,0,0,0,0,0];t.Fi(a);a=t.i.P.get("HUDNumerals24Bold");a.oe=[13,9,13,13,14,13,13,13,13,13,5];a.Xe=23;a.Ng=[0,1,0,0,-1,0,0,0,0,0,0];a.jg=[0,3,0,0,0,0,0,0,0,0,0];t.Fi(a);
a=t.i.P.get("HUDNumeralsSilverAndGold");a.oe=[9,6,9,9,9,9,9,9,9,9,4,6,0];a.Xe=14;a.Ng=[-1,0,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,0];a.jg=[0,1,0,0,0,0,0,0,0,0,0,-1,4];t.Fi(a);t.yl=M(new t.Node("scnBuilderMeshes"),t.Zc);t.vg=M(new t.Node("scnWorld"),t.Zc);t.ug=M(new t.Node("scnDoors"),t.vg);t.ug.Sa=0;t.Kf=M(new t.Node("scnSpuds"),t.Zc);t.Kf.Sa=0;t.Vi=M(new t.Node("scnLoot"),t.Zc);t.Yh=M(new t.Node("scnShadows"),t.Zc);t.Yh.Sa=0;t.Lf=M(new t.Node("scnWindowPanes"),t.Zc);t.Lf.Sa=0;t.Yd=M(new t.Node("scnEffects"),
t.Zc);t.Yd.Sa=0;t.bf=M(new t.Node("scnSelf"),t.Zc);t.bf.Sa=0;t.Gm=M(new t.Node("scnHUD"),t.Zc);M(Vj,t.Zc);M(t.g,t.Zc);t.yi=1E3/60;t.j=0;t.cb(t.i.va.get("physical"));t.A.J("clipY",Infinity,!1);t.cb(t.i.va.get("imageContrast"));t.A.J("contrastOffset",0);t.A.J("contrastScale",1.0625);t.Ab(ve);qe(ve,ve.fi.length*ve.Ob);ve.upload(ve.fi);t.ff(xe);qe(xe,2*xe.elements.length);xe.upload(xe.elements);t.g.Ff=new Qe;t.i.Lb.get("gemRuby").Ha=0;t.i.Lb.get("gemEmerald").Ha=0;t.i.Lb.get("gemSapphire").Ha=0;t.i.Lb.get("bulbGreen").Ha=
0;Z.vf();a=kc(5);Bk.hj=[];for(var b=0;9>b;b++){var c=b;c*=1/9;c=Math.pow(c,.5);Bk.hj[b]=c*a}a=0;Tk.nc="Masher";Tk.Fc=a++;Pk.nc="Revolver";Pk.Fc=a++;Lk.nc="Carbine";Lk.Fc=a++;Bk.nc="Shotgun";Bk.Fc=a++;Ak.nc="Grenade";Ak.Fc=a++;Lk.gi=t.i.P.get("ViewCarbine");Lk.Vh=t.i.P.get("HUDReticleCarbine");Lk.S=t.i.P.get("HUDItemCarbine");Lk.S.offsetY=-12;Bk.gi=t.i.P.get("ViewShotgun");Bk.Vh=t.i.P.get("HUDReticleShotgun");Bk.S=t.i.P.get("HUDItemShotgun");Bk.S.offsetY=-10;Pk.gi=t.i.P.get("ViewRevolver");Pk.Vh=t.i.P.get("HUDReticleRevolver");
Pk.S=t.i.P.get("HUDItemRevolver");Pk.S.offsetY=-9;Ak.gi=t.i.P.get("ViewGrenade");Ak.Vh=t.i.P.get("HUDReticleCarbine");Ak.S=t.i.P.get("HUDItemCarbine");Ak.S.offsetY=-12;Tk.gi=t.i.P.get("ViewMasher");Tk.Vh=t.i.P.get("HUDReticleCarbine");Tk.S=t.i.P.get("HUDItemCarbine");Tk.S.offsetY=-12;a=[t.i.X.get("ShotgunShut01")];Tk.Ki={gc:t.i.P.get("LootMasher"),xd:t.i.P.get("HUDItemMasher"),Tc:75E3/172*99,X:a,Pc:Wk.vc,Mc:Wk.ze,zc:Wk.Rc,Kb:Tk,ya:1};Lk.Ki={gc:t.i.P.get("LootCarbine"),xd:t.i.P.get("HUDItemCarbine"),
Tc:75E3/172*172,X:a,Pc:Wk.vc,Mc:Wk.ze,zc:Wk.Rc,Kb:Lk,ya:1};Bk.Ki={gc:t.i.P.get("LootShotgun"),xd:t.i.P.get("HUDItemShotgun"),Tc:75E3/172*176,X:a,Pc:Wk.vc,Mc:Wk.ze,zc:Wk.Rc,Kb:Bk,ya:1};Pk.Ki={gc:t.i.P.get("LootRevolver"),xd:t.i.P.get("HUDItemRevolver"),Tc:75E3/172*103.2,X:a,Pc:Wk.vc,Mc:Wk.ze,zc:Wk.Rc,Kb:Pk,ya:1};Lk.li={gc:t.i.P.get("CarbineMag"),xd:t.i.P.get("HUDCartridgeCarbine"),Tc:5E4,X:a,Pc:X.vf,Mc:X.tf,zc:X.ge,Kb:Lk,ya:30};Bk.li={gc:t.i.P.get("ShotshellBox"),xd:t.i.P.get("HUDCartridgeShotgun"),
Tc:5E4,X:a,Pc:X.vf,Mc:X.tf,zc:X.ge,Kb:Bk,ya:8};Pk.li={gc:t.i.P.get("RevolverLoader"),xd:t.i.P.get("HUDCartridgeRevolver"),Tc:25E3,X:a,Pc:X.vf,Mc:X.tf,zc:X.ge,Kb:Pk,ya:6};Ak.li={gc:t.i.P.get("LootGrenade"),xd:t.i.P.get("HUDGrenade"),Tc:26E3,X:a,Pc:X.vf,Mc:X.tf,zc:X.ge,Kb:Ak,ya:1};X.Ml();a=t.g.Fk=new Eg;a.A=t.i.va.get("splatter");a.ha=t.i.P.get("splatter02");a.color=Zk.xf;a.Ha=1;a=t.g.Ek=new Eg;a.A=t.i.va.get("image");a.ha=t.i.P.get("bulletPock01");a.color=new G(255,255,255,128);a.Ha=2;a=new Xd;a.name=
"flashWhite";a.je=gd;a.Ha=0;t.i.Lb.add(a);a=new Xd;a.name="flashRed";a.je=id;a.Ha=0;t.i.Lb.add(a);t.g.tm();t.g.jk();t.g.uf=[];M(t.Wk,t.Zc);t.start()};
t.g.tm=function(){var a=performance.now();for(t.za.insertAdjacentHTML("beforeend","Generating world... ");lj(););ej=!0;t.za.insertAdjacentHTML("beforeend","done ("+t.za.Mj.format(performance.now()-a)+" ms).<br />");t.za.insertAdjacentHTML("beforeend","<br />Ready. Click to play!<br />");t.g.mg=0;t.g.kl=3;t.g.ll=5;if(t.g.El)a=new pk("devCamera"),M(a,t.Zc),a.create(),t.g.la=a;else{a=Ue(0)[0][0];var b=t.g.ma=new Uk("player");b.ki=Math.floor(2147483648/180*90);b.h.y=a.y+.5*b.ae;b.h.z=a.z;b.h.x=a.x;M(b,
t.vg);b.create()}t.g.$l()};
t.g.Qm=function(){if(t.g.ma.Ra.Ce<t.g.Mb.Gh&&!t.g.od.gun){var a=null;0==t.g.ma.Ra.Ce?a=Tk:5>t.g.ma.Ra.Ce&&(a=sb([Ak,Lk,Pk,Bk]));if(a&&!t.g.ma.Ra.ob[a.Fc])if(a==Ak)new Ak(t.g.ma.Ra);else for(var b={},c=0;c<t.g.Mb.Dd.length;b={Md:b.Md},c++){var d=function(e){return function(){return t.g.ma?16E10>td(t.g.ma.h,e.Md,new w).qc()?!1:!0:!0}}(b);b.Md=t.g.Mb.Dd[c];if(!(b.Md.Pg||600>t.j-b.Md.Jg)&&d()){t.g.Mb.Dd.splice(c,1);t.g.Mb.Dd.push(b.Md);a=new Wk(a.Ki);a.h.set(b.Md.x,b.Md.y,b.Md.z);M(a,t.Vi);a.create();
a.Hd=b.Md;b.Md.Pg=a;t.g.od.gun=1;break}}}};
t.g.Pm=function(){if(!(this.Hg.length>=t.g.ll)){for(var a=[],b=n(t.g.ma.Ra.ob),c=b.next();!c.done;c=b.next())if(c=c.value){var d=c.constructor,e=d.li;if(e){var h=t.g.od[d.nc];isNaN(h)&&(h=t.g.od[d.nc]=0);h+=Ek(c);h>=c.Vf||a.push(e)}}if(a.length)for(b={},c=0;c<t.g.Mb.Dd.length;b={fe:b.fe},c++)if(b.fe=t.g.Mb.Dd[c],!(b.fe.Pg||600>t.j-b.fe.Jg)){t.g.Mb.Dd.splice(c,1);t.g.Mb.Dd.push(b.fe);c=new tk(b.fe.x,b.fe.y-1E5,b.fe.z);M(c,t.vg);c.Hd=b.fe;b.fe.Pg=c;c.Jj=a;c.create();break}}};
t.g.Rm=function(){if(!(t.g.Dc.length>=t.g.mg)){var a=t.g.ak;a||(a=sb(Se));if(a.Hb.Mb!=t.g.Mb||rb(3))t.g.ak=null;else{var b=sb(a);b=sb(b);var c=b.H-b.D-5E4-5E4;a=new w(pb(b.u-b.s-5E4-5E4)+b.s+5E4,a.sa-1E3,pb(c)+b.D+5E4);if(b=hf(a,new w(0,-1E8,0),eg))a.y=b.p.y+1E5,t.g.ma?(b=td(t.g.ma.h,a,new w),b=1E12>b.qc()||!hf(a,b,fk)?!1:!0):b=!0,b?(b=new Z,b.h.x=a.x,b.h.y=a.y,b.h.z=a.z,Dd(b.transform,b.h),M(b,t.Kf),b.create(),t.g.Kk--):t.g.ak=null}}};
t.g.Om=function(){if(!(this.Eg.length>=t.g.kl*Se.length/20)){var a=sb(Se);if(a.Hb.Mb==t.g.Mb){var b=sb(a);b=sb(b);var c=b.H-b.D-5E4-5E4;a=new w(pb(b.u-b.s-5E4-5E4)+b.s+5E4,a.sa-1E3,pb(c)+b.D+5E4);if(b=hf(a,new w(0,-1E8,0),eg))a.y=b.p.y+1E5,t.g.ma?(b=td(t.g.ma.h,a,new w),b=1E12>b.qc()||!hf(a,b,fk)?!1:!0):b=!0,b&&(a=new wk(a.x,a.y-1E5,a.z),M(a,t.vg),a.create())}}};
t.g.step=function(){for(var a,b,c=0;16>c;c++){sf=1-sf;a=rf[sf];b=rf[1-sf];for(var d=n(Se),e=d.next();!e.done;e=d.next()){e=e.value;var h=e.index-rf.ba;5==t.g.si?(b[0][h]=.2*e.hb.x+.8*e.hb.x*(e.Oc?1:Math.max(0,Math.cos(t.j/30*Math.PI))),b[1][h]=.2*e.hb.y,b[2][h]=.2*e.hb.z):(b[0][h]=e.hb.x,b[1][h]=e.hb.y,b[2][h]=e.hb.z)}for(d=0;3>d;d++)for(e=n(qf),h=e.next();!h.done;h=e.next()){h=h.value;var g=h.cd*a[d][h.Jh.index-rf.ba];g*=h.Ri[d];b[d][h.qg.index-rf.ba]+=g/h.qg.fk}a=n(Se);for(e=a.next();!e.done;e=
a.next())d=e.value,d.Oc&&(e=d.index-rf.ba,b[0][e]=d.hb.x,b[1][e]=d.hb.y,b[2][e]=d.hb.z)}if(0==t.j%1){c=n(Se);for(e=c.next();!e.done;e=c.next())a=e.value,d=a.index-rf.ba,a.ia.mb.x=b[0][d],a.ia.mb.y=b[1][d],a.ia.mb.z=b[2][d],b[0][d]=0,b[1][d]=0,b[2][d]=0;b=n(qf);for(h=b.next();!h.done;h=b.next())c=h.value,c.Bc&&(c.cd=c.Jh==c.qg?wf(c.Bc):vf(c.Bc));b=t.tc.ul;for(a=c=0;64>a;a++){d=Se[a];if(!d)break;d.$e=a;for(e=0;10>e;e++){h=d.Eb[e];if(!h)break;h.index=c++;h.ce(new Float32Array(b.buffer,a*b.di+48*e,12))}if(d.ig)for(e=
n(d.ig),h=e.next();!h.done;h=e.next())for(h=n(h.value.Kc),g=h.next();!g.done;g=h.next())g=g.value,g.Fa[1]=d.$e,g.Fa[4]=d.Eb.length}b.upload();b=n(ij.elements);for(c=b.next();!c.done;c=b.next())c=c.value,(a=Ue(c.ba))&&c.md&&(c.md.Fa[1]=a.$e,c.md.Fa[4]=a.Eb.length);pf&&tf()}t.g.El||0!=t.j%5||(this.Qm(),this.Pm(),this.Rm(),this.Om());t.g.pm();t.g.qm();for(b=!(t.j>=bh+300&&ah>=bh);!(b&&performance.now()>=t.em-3)&&lj(););};
t.Wk.step=function(){t.ic.r=0;t.ic.kb=0;t.ic.ra=0;t.ic.Qa=0;t.g.ma&&4>t.j-t.g.ma.hl&&(t.ic.r+=24,t.ic.kb+=24,t.ic.ra+=24,t.ic.Qa+=24);if(t.g.ma){var a=t.j-t.g.ma.gl;a=1.5-a/6;0>a&&(a=0);1<a&&(a=1);t.ic.r+=170*a;t.ic.Qa+=170*a}a=1-t.j/180;0<=a&&(t.ic.Qa=255*a,t.g.Ff.ne.gain.value=1-a);u.bindFramebuffer(u.FRAMEBUFFER,t.Uh.object);t.bc(2);u.clear(u.DEPTH_BUFFER_BIT|u.STENCIL_BUFFER_BIT);0==t.j%60&&t.yl.children.sort(kj);dg();t.cb(t.i.va.get("physical"));t.ug.Sa=1;Rd(t.ug);t.ug.Sa=0;t.A.J("clipY",Infinity,
!1);var b=jb.first();for(a=We.first();b.item;){if(a.item){if(a.item.hi<t.j){var c=a.next;eb(a);a=c;continue}if(0<kb(b.item,a.item)){a=a.next;continue}}c=b.next;eb(b);gb(b,a);b=c}for(;a.item;)b=a.next,a.item.hi<t.j&&eb(a),a=b;Xe.G=.00390625*t.la.M.G;Xe.m31=.00390625*t.la.M.m31;Xe.m32=.00390625*t.la.M.m32;t.Ab(sg);t.cb(t.i.va.get("sky"));t.Nb(0,t.i.P.get("concr01"));t.A.J("texture1",1,!0);t.Nb(1,t.i.P.get("sky01"));t.A.J("color",new G(96,96,128,255));t.rb(0);t.bc(1);t.Tb(0);a=new J;b=(.5*t.la.pg+.5*
t.la.gg)*bg.ij;a.scale(b*t.viewport.ratio,b,1);a.m32=-b/Math.tan(t.la.Qd);Ad(t.la.M,a,a);t.A.J("modelMatrix",a);u.drawArrays(u.TRIANGLE_FAN,0,4);if(t.Kf.children){t.Kf.children.sort(jj);Z.Ma=128;for(a=t.Kf.children.first();a.item;a=a.next)a.item.$h()&&a.item instanceof Z&&a.item.Xc();u.enable(u.STENCIL_TEST);for(a=t.Kf.children.first();a.item;a=a.next)a.item.$h()&&(a.item instanceof Z||(u.stencilFunc(u.GEQUAL,128,255),u.stencilOp(u.KEEP,u.KEEP,u.KEEP)),a.item.ab());u.disable(u.STENCIL_TEST)}if(t.g.ma&&
t.g.ma.Ra.K instanceof Pk&&.5<t.g.ma.Ra.focus){t.cb(t.i.va.get("flashCardThreshold"));t.rb(1);t.bc(1);u.depthFunc(u.GREATER);for(a=t.Kf.children.first();a.item;a=a.next)if(a.item instanceof Z&&a.item.Sa&&600>t.j-a.item.Mi){t.A.J("color",new G(0,0,0,32*(1-(t.j-a.item.Mi)/600)));b=a.item;t.Ab(Z.Ia);t.Nb(0,b.ha);t.Tb(0);c=new J;c.set(b.oa);var d=b.Tc;c.F*=d;c.L*=d;c.N*=d;c.I*=-d;c.m11*=-d;c.m12*=-d;t.A.J("modelMatrix",c);u.drawArrays(u.TRIANGLE_FAN,Z.vc[b.gc+("00"+(b.aj*b.nf+b.j)).slice(-2)].vd,4)}t.A.J("color",
gd);u.depthFunc(u.LEQUAL)}t.g.Fk.ab();t.g.Ek.ab();t.cb(Qj.A);t.A.J("modelMatrix",Xe);Qj.$.bind();t.rb(1);t.bc(1);t.Tb(1);t.Ab(Qj.Ia);t.ff(Qj.le);b=a=0;for(c=We.first();c.item;c=c.next)c.item.Ck==a+b?b+=c.item.Bk:(b&&u.drawElements(u.TRIANGLES,b,u.UNSIGNED_SHORT,2*a),a=c.item.Ck,b=c.item.Bk);b&&u.drawElements(u.TRIANGLES,b,u.UNSIGNED_SHORT,2*a);t.rb(1);t.bc(1);t.Tb(0);t.cb(t.i.va.get("monoEffect"));t.Ab(sg);u.activeTexture(u.TEXTURE0);u.bindTexture(u.TEXTURE_2D,t.i.P.get("shadow").object);t.A.J("enableTexture0",
1,!0);t.A.J("color",t.Qf.color);t.Yh.Sa=1;Rd(t.Yh);t.Yh.Sa=0;if(t.Lf.children){a=t.la.M.Bd();for(b=t.Lf.children.first();b.item;b=b.next)b.item.$h()&&(b.item.depth=oc(a,b.item.h));t.Lf.children.sort(Ki.S);Ki.Xc();t.Lf.Sa=1;Rd(t.Lf);t.Lf.Sa=0}t.Yd.Sa=1;Rd(t.Yd);t.Yd.Sa=0;t.g.ma&&(t.zl(t.g.ma.Zd),cg(t.g.ma.Zd),t.bf.Sa=1,Rd(t.bf),t.bf.Sa=0);t.g.ma&&(a=t.g.ma.Ra,a.Sa=1,a.ab(),a.Sa=0);t.rb(0);t.bc(0);t.Tb(0);u.bindFramebuffer(u.FRAMEBUFFER,null);t.tc.hd.J("viewMatrix",Nd);t.tc.hd.upload();t.Ab(sg);t.Zh(new Bc(t.canvas.width,
t.canvas.height));t.cb(t.i.va.get("imageContrast"));u.activeTexture(u.TEXTURE0);u.bindTexture(u.TEXTURE_2D,t.Uh.color.object);t.A.J("texture0",0,!0);t.A.J("enableTexture0",1,!0);t.A.J("modelMatrix",Nd);t.A.J("color",gd);t.A.J("imageAdd",t.ic);t.A.J("imageSub",t.sm);u.drawArrays(u.TRIANGLE_FAN,0,4);t.g.ma&&t.g.dm()};
t.g.dm=function(){function a(D,H,K,R,sa,ta,ia){t.Nb(0,D);var ja=t.canvas.width>>1,Mb=t.canvas.height>>1,qb=.5*D.width,gc=.5*D.height;0==k?H-=ja:1==k&&(H+=ja);2==l?K-=Mb:3==l&&(K+=Mb);0==h?H+=qb:1==h&&(H-=qb);2==g?K+=gc:3==g&&(K-=gc);H=Math.round(H);K=Math.round(K);a.S&&(void 0===R?u.scissor(0,0,t.canvas.width,t.canvas.height):u.scissor(H+ja-qb+R,-K+Mb-gc+sa,ta,ia));R=new J;R.F=D.width/t.canvas.width*m;R.m11=-D.height/t.canvas.height*p;R.G=2*H/t.canvas.width;R.m31=-2*K/t.canvas.height;t.A.J("modelMatrix",
R);u.drawArrays(u.TRIANGLE_FAN,0,4)}if(1==t.Ui)t.Ui=2;else{var b=t.g.ma.Ra.K;if(t.g.Pf){t.g.Kl=new re;var c=[];b&&(c=c.concat(b.gj));c=c.concat(t.g.ji);for(var d=n(t.g.uf),e=d.next();!e.done;e=d.next())c=c.concat(e.value.tk);se(c);t.g.Pf=!1}t.Zh(new Bc(t.canvas.width,t.canvas.height));t.tc.hd.J("viewMatrix",Nd);t.tc.hd.upload();t.bc(0);t.Tb(0);var h=0,g=2,k=0,l=2,m=1,p=1;t.rb(2);u.enable(u.SCISSOR_TEST);a.S=!0;t.Ab(sg);t.cb(t.i.va.get("image"));t.A.J("color",gd);a.S=!1;h=1;g=2;k=4;l=5;c=n(t.g.uf);
for(e=c.next();!e.done;e=c.next()){d=e.value;e=d.species.xd.height;var r=Wa(-3+(t.j-d.V)/60,0,1)*e*.5;u.scissor(0,(t.canvas.height>>1)-44+d.y-e+r,t.canvas.width,t.canvas.height);a(d.species.xd,-189,44-d.y+r)}a.S=!0;u.scissor(0,0,t.canvas.width,t.canvas.height);b&&(b.ej()&&(h=4,g=2,k=4,l=5,c=Math.cos(60*t.j/Math.PI),c=Wa(c,0,1),t.A.J("color",new G(255,255*c,255*c,127+128*c)),c=t.i.P.get("HUDWarnReload"),a(c,0,30),t.A.J("color",gd)),d=[gd,new G(255,255,64,255),new G(208,0,0,255)],b instanceof Pk?(e=
b.jb,h=0,g=3,k=4,l=5,c=t.i.P.get("HUDMagRevolver"),a(c,-158-34*e,123,34*e,0,34,34),g=2,c=t.i.P.get("HUDAmmo2"),t.A.J("color",d[b.Of()]),a(c,-201,91),t.A.J("color",gd)):b instanceof Lk?(e=b.jb,h=0,g=3,k=4,l=5,c=t.i.P.get("HUDMagCarbine"),a(c,-208,124+13*e,0,13*e,97,13),g=2,c=t.i.P.get("HUDAmmo3"),t.A.J("color",d[b.Of()]),a(c,-208,81),t.A.J("color",gd)):b instanceof Bk?(e=b.Gc,h=0,g=3,k=4,l=5,c=t.i.P.get("HUDMagShotgun"),a(c,-150-18*e,123,18*e,0,18,34),g=2,c=t.i.P.get("HUDAmmo2"),t.A.J("color",d[b.Of()]),
a(c,-201,91),t.A.J("color",gd)):b instanceof Ak&&(h=0,g=2,k=4,l=5,c=t.i.P.get("HUDAmmo2"),t.A.J("color",d[b.Of()]),a(c,-201,91),t.A.J("color",gd)));isNaN(t.g.td)||(h=1,g=2,k=4,l=5,c=t.g.ji,c=209-c.width*c.xg.width,d=t.i.P.get("HUDTreasure"),a(d,c,-146),t.g.td||(d=t.i.P.get("HUDChecked"),t.A.J("color",new G(90,145,255,255)),a(d,c+14,-142),t.A.J("color",gd)));b&&t.g.ma.Ra.cc&&(t.rb(1),t.cb(t.i.va.get("monoEffect")),c=new wd,t.g.ma.lh?(t.A.J("color",new G(255,0,0,255)),d=t.g.ma.lh,t.g.la.pk.transform(new wd(d.x,
d.y,d.z,1),c),c.x/=2*c.a,c.y/=2*c.a):t.A.J("color",new G(0,128,255,255)),t.A.J("ambientLight",new w(1,1,1)),h=4,g=5,k=4,l=5,(d=b.constructor.Vh)&&a(d,Math.round(c.x*t.canvas.width),Math.round(-c.y*t.canvas.height)),t.rb(2),t.cb(t.i.va.get("image")),t.A.J("color",gd));u.disable(u.SCISSOR_TEST);t.Ab(t.g.Kl);c=function(){z.F=m*B.width/q;z.m11=p*B.height/v;z.G=y/q;z.m31=-x/v;t.A.J("modelMatrix",z)};e=d=0;var q=t.canvas.width>>1,v=t.canvas.height>>1,z=new J;if(b&&b.gj){r=b.gj;e=r.length;if(!(b instanceof
Tk)){var y=r.x;var x=r.y;var B=r.xg;t.Nb(0,B);c();t.A.J("color",r.color);u.drawArrays(u.TRIANGLES,d,e)}d+=e}t.g.ji&&(b=t.g.ji,B=b.xg,t.Nb(0,B),e=b.length,y=b.x+1,x=b.y+2,c(),t.A.J("color",hd),u.drawArrays(u.TRIANGLES,d,e),y=b.x,x=b.y,c(),t.A.J("color",b.color),u.drawArrays(u.TRIANGLES,d,e),d+=e);u.enable(u.SCISSOR_TEST);b=n(t.g.uf);for(e=b.next();!e.done;e=b.next()){r=e.value;y=-188;x=44;e=r.species.xd.height;var A=Wa(-3+(t.j-r.V)/60,0,1)*e*.5;u.scissor(0,(t.canvas.height>>1)-x+r.y-e+A,t.canvas.width,
t.canvas.height);e=r.tk;B=e.xg;t.Nb(0,B);e=e.length;x+=-r.y+19;x+=A;--y;x+=2;c();t.A.J("color",hd);u.drawArrays(u.TRIANGLES,d,e);y+=1;x-=2;c();t.A.J("color",gd);u.drawArrays(u.TRIANGLES,d,e);d+=e}u.scissor(0,0,t.canvas.width,t.canvas.height);u.disable(u.SCISSOR_TEST)}};
t.g.Sm=function(){if(t.g.Uc)for(var a=n(t.g.Uc),b=a.next();!b.done;b=a.next()){b=b.value;var c=b.$b,d=b.ac,e=1-(t.Ch-b.wf)/20;0<e?(c-=240*e*e,b.style.left=c+"px",b.style.top=d+"px"):0!=t.Ch%4||b.Db||(c+=Math.floor(2*Math.random()),d+=Math.floor(2*Math.random()),b.style.left=c+"px",b.style.top=d+"px")}t.g.Sg&&(t.g.Sg.style.backgroundPosition="0px "+256*-Math.floor(t.Ch/4)+"px")};
t.g.Dk=function(){var a=t.ym=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor="#2c80fd";a.style.mixBlendMode="color";t.ee.appendChild(a)};
t.g.ti=function(){t.za&&t.ee.removeChild(t.za);var a=t.za=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor=0==t.j?"#2c80fdff":"#2c80fd40";a.style.overflow="hidden";t.ee.appendChild(a);t.g.Uc=[];t.Ch=0};
t.g.Ig=function(){function a(){t.i.X.get("hit02").play({gain:.5})}function b(){t.i.X.get("woodSnap02").play()}t.g.ti();if(0==t.j){var c=document.createElement("div");c.style.width="256px";c.style.height="256px";c.style.position="absolute";c.style.top="20px";c.style.right="20px";c.style.background='url("'+t.i.P.get("MenuMantato").data.src+'")';c.style.backgroundPosition="0px 0px";t.za.appendChild(c);t.g.Sg=c}c=62;var d=0,e=document.createElement("button");e.style.zIndex=2;e.style.width="134px";e.style.height=
"44px";e.style.position="absolute";e.ac=c;c+=44;e.$b=29;e.wf=d;d+=6;t.g.Uc.push(e);e.style.border="none";e.style.background='url("'+t.i.P.get("MenuButtonPlay").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -44px";delete t.g.Sg;N.Jm()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.Db=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.Db=1;
this.style.left=this.$b+"px";this.style.top=this.ac+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.Db=0};t.nn=e;t.za.appendChild(e);e=document.createElement("button");e.style.zIndex=2;e.style.width="133px";e.style.height="42px";e.style.position="absolute";e.ac=c;c+=44;e.$b=29;e.wf=d;d+=6;t.g.Uc.push(e);e.style.border="none";e.style.background='url("'+t.i.P.get("MenuButtonOptions").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=
function(){this.style.backgroundPosition="0px -44px";delete t.g.Sg;t.g.Yl()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.Db=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.Db=1;this.style.left=this.$b+"px";this.style.top=this.ac+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.Db=0};t.za.appendChild(e);e=document.createElement("button");e.style.zIndex=2;e.style.width="133px";e.style.height=
"42px";e.style.position="absolute";e.ac=c;c+=44;e.$b=29;e.wf=d;d+=6;t.g.Uc.push(e);e.style.border="none";e.style.background='url("'+t.i.P.get("MenuButtonReadme").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -44px";delete t.g.Sg;t.g.Zl()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.Db=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.Db=
1;this.style.left=this.$b+"px";this.style.top=this.ac+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.Db=0};t.za.appendChild(e);e=document.createElement("button");e.style.zIndex=2;e.style.width="133px";e.style.height="42px";e.style.position="absolute";e.ac=c;c+=44;e.$b=29;e.wf=d;d+=6;t.g.Uc.push(e);e.style.border="none";e.style.background='url("'+t.i.P.get("MenuButtonDonate").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition=
"0px -44px";delete t.g.Sg;t.g.Xl()};e.onmousedown=function(h){h.preventDefault();this.style.backgroundPosition="0px -88px";this.Db=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -44px";this.Db=1;this.style.left=this.$b+"px";this.style.top=this.ac+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.Db=0};t.za.appendChild(e);c=n(t.g.Uc);for(d=c.next();!d.done;d=c.next())d=d.value,d.style.left=d.$b+"px",d.style.top=d.ac+"px"};
t.g.Yl=function(){function a(){t.i.X.get("hit02").play({gain:.5})}function b(){t.i.X.get("woodSnap02").play()}t.g.ti();t.mk={};for(var c in t.Ca)t.mk[c]=t.Ca[c];t.lk={};for(var d in t.xa)t.lk[d]=t.xa[d];d=document.createElement("div");d.style.height="100%";d.style.fontSize="6pt";d.style.lineHeight="1.5em";d.style.overflowY="scroll";d.style.padding="0";d.style.background="#505050";d.style.userSelect="none";t.za.appendChild(d);c=t.za.S=document.createElement("div");c.style.position="absolute";c.style.top=
"40px";c.style.right="56px";c.style.width="240px";c.style.fontSize="6pt";c.style.lineHeight="1.5em";t.za.appendChild(c);c=document.createElement("div");c.style.padding="5px 102px 5px 20px";d.appendChild(c);c.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Options</h2>\n\t\t');d=document.createElement("input");d.id="inputCheckbox_musicEnabled";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Ca.musicEnabled;d.oninput=function(k){b();t.Ca.musicEnabled=
k.target.checked?1:0;t.Audio.Jb(t.Ca.musicEnabled)};d.style.marginTop="8px";t.Ni=d;var e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Music";d.onmouseenter=e.onmouseenter=function(){t.za.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Music</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tBoots and Pants and Boots and Pants.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tYou can also press <b>M</b> to toggle the music at any time.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputCheckbox_viewportFitWindow";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Ca.viewportFitWindow;d.oninput=function(k){b();t.Ca.viewportFitWindow=k.target.checked?1:0;t.wg()};d.style.marginTop="8px";t.Ph=d;e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Fit window";d.onmouseenter=e.onmouseenter=function(){t.za.S.innerHTML=
'\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Fit Window</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tHave the game display as big as possible inside the browser window.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tYou can also use the <b>-</b> and <b>+</b> keys to adjust the size at any time.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");
d.id="inputCheckbox_lightingFancy";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Ca.lightingFancy;d.oninput=function(k){b();t.Ca.lightingFancy=k.target.checked?1:0};d.style.marginTop="8px";e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Illumination Sampling";d.onmouseenter=e.onmouseenter=function(){t.za.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Illumination Sampling</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tAllow global illumination sampling in the fragment shader, for a realistic-looking world.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDisabling this might improve your framerate.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");c.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t<h3 style="color:#FFFF00; text-shadow:-1px 2px black;">Mouse</h3>\n\t\t');d=document.createElement("input");d.id="inputCheckbox_mouseRaw";d.name="mouseRaw";d.type="checkbox";d.style.fontSize="7pt";d.checked=t.Ca.mouseRaw;d.oninput=function(k){b();t.Ca.mouseRaw=k.target.checked?1:0};d.style.marginTop="8px";e=document.createElement("label");
e.setAttribute("for",d.id);e.innerHTML="Raw mouse input";d.onmouseenter=e.onmouseenter=function(){t.za.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Raw Mouse Input</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tEnable unadjusted hardware mouse input.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tThis will make your aiming rotation based on the movement of your mouse, regardless of how fast you move it, which is recommended for first-person gaming.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tCurrently supported only in Chrome, Edge, Opera, and <em>not</em> available in Firefox, Safari, or Linux.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: ON\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(d);c.insertAdjacentHTML("beforeend"," ");c.appendChild(e);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputNumber_mouseDPI";d.name="mouseDPI";d.type="number";d.min=100;d.step=100;d.style.fontSize="7pt";d.value=t.Ca.mouseDPI;d.oninput=function(k){k.target.checkValidity()&&(t.Ca.mouseDPI=parseFloat(k.target.value),t.Si())};d.style.marginTop="8px";d.style.width="5em";e=document.createElement("label");e.setAttribute("for",d.id);e.innerHTML="Mouse DPI:";
d.onmouseenter=e.onmouseenter=function(){t.za.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Mouse DPI</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tFor gamers: if you know the DPI of your mouse, enter it here.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tOtherwise, just leave this value at its default.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: 1600\n\t\t\t\t\t</p>\n\t\t\t\t\t';a()};c.appendChild(e);c.insertAdjacentHTML("beforeend"," ");c.appendChild(d);c.insertAdjacentHTML("beforeend","<br />");d=
document.createElement("input");d.id="inputNumber_mouseScale";d.name="mouseScale";d.type="number";d.min=.125;d.step=.125;d.style.fontSize="7pt";d.value=t.Ca.mouseScale;d.oninput=function(k){k.target.checkValidity()&&(t.Ca.mouseScale=parseFloat(k.target.value),t.Si())};d.style.marginTop="8px";d.style.width="5em";e=document.createElement("label");e.setAttribute("for",d.id);e.title=" ";e.innerHTML="Mouse scale:";d.onmouseenter=e.onmouseenter=function(){t.za.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Mouse Scale</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tInches of mouse movement at the given DPI to perform a 360\u00b0 rotation in the game.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tLower values will increase the aiming sensitivity.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: 3\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(e);c.insertAdjacentHTML("beforeend"," ");c.appendChild(d);c.insertAdjacentHTML("beforeend","<br />");d=document.createElement("input");d.id="inputNumber_wheelScale";d.name="wheelScale";d.type="number";d.min=1;d.step=1;d.style.fontSize="7pt";d.value=t.Ca.wheelScale;d.oninput=function(k){k.target.checkValidity()&&(t.Ca.wheelScale=parseFloat(k.target.value))};d.style.marginTop="8px";d.style.width="5em";e=document.createElement("label");e.setAttribute("for",d.id);e.title=" ";e.innerHTML=
"Wheel scale:";d.onmouseenter=e.onmouseenter=function(){t.za.S.innerHTML='\n\t\t\t\t\t<h3 style="color:#FFFF80; text-shadow:0px 1px black">Wheel Scale</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\tUnits of mouse wheel delta to trigger a mouse wheel event. This only matters if you have assigned controls to the mouse wheel.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tIf you have a notched mouse wheel, the recommended value is 1. For smooth-spinning wheels, however, you may wish to use a greater value to make it less sensitive.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tThe delta units are not standardized, and vary by browser, OS, and  hardware. You will have to experiment to find what works for you.\n\t\t\t\t\t</p><p>\n\t\t\t\t\tDefault: 1\n\t\t\t\t\t</p>\n\t\t\t\t\t';
a()};c.appendChild(e);c.insertAdjacentHTML("beforeend"," ");c.appendChild(d);c.insertAdjacentHTML("beforeend","<br />");c.insertAdjacentHTML("beforeend",'\n\t\t\t\t<br />\n\t\t\t\t<h3 style="color:#FFFF00; text-shadow:-1px 2px black;">Controls</h3>\n\t\t\t');d=e=document.createElement("div");d.style.display="flex";d.style.flexFlow="row nowrap";c.appendChild(d);d=[];for(var h=0;3>h;h++){var g=document.createElement("div");g.style.paddingRight="16px";g.style.display="flex";g.style.flexFlow="column nowrap";
d.push(g);e.appendChild(g)}e=document.createElement("div");e.innerHTML="Action";e.style.height="20px";e.style.fontWeight="bold";d[0].appendChild(e);e=document.createElement("div");e.innerHTML="Key";e.style.height="20px";e.style.fontWeight="bold";d[1].appendChild(e);e=document.createElement("div");e.innerHTML="Mouse";e.style.height="20px";e.style.fontWeight="bold";d[2].appendChild(e);e={};h=n("Masher Grenade Revolver Carbine Shotgun GunFire GunAction Reload MoveForward MoveBackward MoveLeft MoveRight Jump NextGun PrevGun".split(" "));
for(g=h.next();!g.done;e={ye:e.ye},g=h.next())e.ye=g.value,g=document.createElement("div"),g.innerHTML=e.ye,g.style.height="16px",g.style.marginBottom="2px",g.style.padding="0 2px 0 0",d[0].appendChild(g),g=document.createElement("div"),g.innerHTML=""+t.xa[e.ye+"Key"],g.style.height="16px",g.style.marginBottom="2px",g.style.padding="0 2px",g.style.color="#000000",g.style.backgroundColor="#e0e0e0",g.style.fontWeight="bold",g.name=e.ye,g.onmouseenter=function(){t.za.S.innerHTML="";this.style.backgroundColor=
"#ffffff";a()},g.onmouseleave=function(){this.style.backgroundColor="#e0e0e0"},g.onclick=function(k){return function(){var l=t.kk=document.createElement("div");l.style.position="absolute";l.style.width=t.canvas.width+"px";l.style.height=t.canvas.height+"px";l.style.left=0;l.style.top=0;l.style.zIndex=3;l.style.userSelect="none";l.style.display="flex";l.style.alignItems="center";l.style.justifyContent="center";l.style.backgroundColor="#000000c0";t.ee.appendChild(l);var m=document.createElement("div");
m.style.textAlign="center";m.style.fontSize="7pt";m.style.lineHeight="1.5em";m.innerHTML='Press a key for:<br />\n\t\t\t\t\t\t\t\t<p style="font-size: 9pt"><b>'+k.ye+"</b></p>\n\t\t\t\t\t\t\t\tPress <b>Backspace</b> to unassign.<br />\n\t\t\t\t\t\t\t\tPress <b>Escape</b> to cancel.<br />";l.appendChild(m);t.ue(1,this)}}(e),d[1].appendChild(g),g=document.createElement("div"),g.innerHTML=""+t.xa[e.ye+"MouseButton"],g.style.height="16px",g.style.marginBottom="2px",g.style.padding="0 2px",g.style.color=
"#000000",g.style.backgroundColor="#e0e0e0",g.style.fontWeight="bold",g.name=e.ye,g.onmouseenter=function(){t.za.S.innerHTML="";this.style.backgroundColor="#ffffff";a()},g.onmouseleave=function(){this.style.backgroundColor="#e0e0e0"},g.onclick=function(k){return function(){var l=t.kk=document.createElement("div");l.style.position="absolute";l.style.width=t.canvas.width+"px";l.style.height=t.canvas.height+"px";l.style.left=0;l.style.top=0;l.style.zIndex=3;l.style.userSelect="none";l.style.display=
"flex";l.style.alignItems="center";l.style.justifyContent="center";l.style.backgroundColor="#000000c0";t.ee.appendChild(l);var m=document.createElement("div");m.style.textAlign="center";m.style.fontSize="7pt";m.style.lineHeight="1.5em";m.innerHTML='Click a mouse button for:<br />\n\t\t\t\t\t\t\t\t<p style="font-size: 9pt"><b>'+k.ye+"</b></p>\n\t\t\t\t\t\t\t\tPress <b>Backspace</b> to unassign.<br />\n\t\t\t\t\t\t\t\tPress <b>Escape</b> to cancel.<br />";l.appendChild(m);t.ue(2,this)}}(e),d[2].appendChild(g);
c.insertAdjacentHTML("beforeend","<br />");c=293;d=0;e=document.createElement("button");e.style.zIndex=2;e.style.width="76px";e.style.height="34px";e.style.position="absolute";e.ac=250;e.$b=c;c+=80;e.wf=d;d+=6;t.g.Uc.push(e);e.style.border="none";e.style.background='url("'+t.i.P.get("MenuButtonCancel").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -36px";delete t.za.S;delete t.Ni;delete t.Ph;for(var k in t.Ca)t.Ca[k]=
t.mk[k];for(var l in t.xa)t.xa[l]=t.lk[l];delete t.mk;delete t.lk;t.wg();t.Si();t.Audio.Jb(t.Ca.musicEnabled);t.g.Ig()};e.onmousedown=function(k){k.preventDefault();this.style.backgroundPosition="0px -72px";this.Db=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.Db=1;this.style.left=this.$b+"px";this.style.top=this.ac+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.Db=0};t.za.appendChild(e);e=document.createElement("button");e.style.zIndex=
2;e.style.width="76px";e.style.height="34px";e.style.position="absolute";e.ac=250;e.$b=c;c+=80;e.wf=d;d+=6;t.g.Uc.push(e);e.style.border="none";e.style.background='url("'+t.i.P.get("MenuButtonOK").data.src+'")';e.style.backgroundPosition="0px 0px";e.style.cursor="pointer";e.onclick=function(){this.style.backgroundPosition="0px -36px";delete t.za.S;delete t.Ni;delete t.Ph;for(var k in t.Ca)window.localStorage.setItem(k,t.Ca[k]);for(var l in t.xa)window.localStorage.setItem(l,t.xa[l]);t.wg();t.g.Ig()};
e.onmousedown=function(k){k.preventDefault();this.style.backgroundPosition="0px -72px";this.Db=2;b()};e.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.Db=1;this.style.left=this.$b+"px";this.style.top=this.ac+"px";a()};e.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.Db=0};t.za.appendChild(e);c=n(t.g.Uc);for(d=c.next();!d.done;d=c.next())d=d.value,d.style.left=d.$b+"px",d.style.top=d.ac+"px"};
t.g.Zl=function(){t.g.ti();var a=document.createElement("div");a.style.height="100%";a.style.fontSize="6pt";a.style.lineHeight="1.5em";a.style.overflowY="scroll";a.style.padding="0";a.style.background="#505050";a.style.userSelect="auto";t.za.appendChild(a);var b=document.createElement("div");b.style.padding="5px 102px 5px 20px";a.appendChild(b);b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">How to Play</h2>\n\t\t\t\u2022 Use <b>W,A,S,D</b> and <b>Space</b> to move and jump.<br />\n\t\t\t\u2022 Use the <b>Mouse</b> to aim and shoot.<br />\n\t\t\t<br />\n\t\t');
a=document.createElement("img");a.src=t.i.P.get("HUDItemCarbine").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">E</span> to equip the <b>Carbine</b>.<br />\n\t\t\tIt\'s a short-barreled assault rifle with <em>lots of ammo</em> and a <em>high rate of fire</em>.<br />\n\t\t\tBullets will juggle-strike all the targets in your line-of-fire!<br />\n\t\t\t\u2022 Hold the <b>Right Mouse Button</b> to improve accuracy.<br />\n\t\t\t\u2022 Press <b>R</b> to reload.<br />\n\t\t\t<br />\n\t\t');
a=document.createElement("img");a.src=t.i.P.get("HUDItemShotgun").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">C</span> to equip the <b>Shotgun</b>.<br />\n\t\t\tIt\'s a pump-action 12-gauge with great <em>multi-damage</em> stopping power.<br />\n\t\t\tPellets will continually dig through enemies until their full damage has been delivered!<br />\n\t\t\t\u2022 Press the <b>Right Mouse Button</b> to cycle it.<br />\n\t\t\tYou must cycle the shotgun before each shot.<br />\n\t\t\t<br />\n\t\t');
a=document.createElement("img");a.src=t.i.P.get("HUDItemRevolver").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend","\n\t\t\t<br />\n\t\t\t\u2022 Press <span style=\"color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;\">Q</span> to equip the <b>Revolver</b>.<br />\n\t\t\tIt's a six-shot double-action with great <em>accuracy</em> and <em>reach</em>.<br />\n\t\t\tBullets will go through walls, if not too thick!<br />\n\t\t\t\u2022 Hold the <b>Right Mouse Button</b> to track enemies you've glimpsed.<br />\n\t\t\t\u2022 Press <b>R</b> to reload.<br />\n\t\t\t<br />\n\t\t");
a=document.createElement("img");a.src=t.i.P.get("HUDItemMasher").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">F</span> to equip the <b>Masher</b>.<br />\n\t\t\t\u2022 Or, strike instantly using the <b>Middle Mouse Button</b>.<br />\n\t\t\tAs useful in self-defense as it is in meal preparation.<br />\n\t\t\t<br />\n\t\t');a=document.createElement("img");a.src=
t.i.P.get("HUDItemGrenade").data.src;b.appendChild(a);b.insertAdjacentHTML("beforeend",'\n\t\t\t<br />\n\t\t\t\u2022 Press <span style="color:#FFFF00; text-shadow:-1px 2px black; font-size:9pt; font-weight:bold;">G</span> to equip a <b>Grenade</b>.<br />\n\t\t\t\u2022 Or, throw instantly using the <b>Side Mouse Button</b> (if you\'ve got one).<br />\n\t\t\tBoom.<br />\n\t\t');b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Contact</h2>\n\t\t\t<p>\n\t\t\tThis game is a preview of a work in progress.<br />\n\t\t\tPlease email me about any technical problems so I can fix them!<br />\n\t\t\tchad.chisholm@protonmail.com<br />\n\t\t\t</p>\n\t\t');
b=373;a=0;var c=document.createElement("button");c.style.zIndex=2;c.style.width="76px";c.style.height="34px";c.style.position="absolute";c.ac=250;c.$b=b;b+=80;c.wf=a;a+=6;t.g.Uc.push(c);c.style.border="none";c.style.background='url("'+t.i.P.get("MenuButtonOK").data.src+'")';c.style.backgroundPosition="0px 0px";c.style.cursor="pointer";c.onclick=function(){this.style.backgroundPosition="0px -36px";t.g.Ig()};c.onmousedown=function(d){d.preventDefault();this.style.backgroundPosition="0px -72px";this.Db=
2;t.i.X.get("woodSnap02").play()};c.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.Db=1;this.style.left=this.$b+"px";this.style.top=this.ac+"px";t.i.X.get("hit02").play({gain:.5})};c.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.Db=0};t.za.appendChild(c);b=n(t.g.Uc);for(a=b.next();!a.done;a=b.next())a=a.value,a.style.left=a.$b+"px",a.style.top=a.ac+"px"};
t.g.Xl=function(){t.g.ti();var a=document.createElement("div");a.style.height="100%";a.style.fontSize="6pt";a.style.lineHeight="1.5em";a.style.overflowY="scroll";a.style.padding="0";a.style.background="#505050";a.style.userSelect="auto";t.za.appendChild(a);var b=document.createElement("div");b.style.padding="5px 102px 5px 20px";a.appendChild(b);b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Support the Developer</h2>\n\t\t\t<p>\n\t\t\t<b>ShootPotato.com</b> is a <em>FREE</em> game for everyone. If you like it, please consider making a donation to represent a purchase. Donations are my only source of income, and I can only continue development with support from players like you.\n\t\t\t<br />\n\t\t\t</p><p>\n\t\t');
b.insertAdjacentHTML("beforeend",'\n\t\t\t<form action="https://www.paypal.com/donate" method="post" target="_blank">\n\t\t\t<input type="hidden" name="hosted_button_id" value="8X4ZJS35NSYYJ" />\n\t\t\t<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />\n\t\t\t<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />\n\t\t\t</form>\n\t\t');
b.insertAdjacentHTML("beforeend","\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t<b>Chad Chisholm</b><br />\n\t\t\tchad.chisholm@protonmail.com<br />\n\t\t\t</p>\n\t\t");b.insertAdjacentHTML("beforeend",'\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Coming Soon...</h2>\n\t\t\t<p>\n\t\t\t\u2022 dynamic combat music<br />\n\t\t\t\u2022 enemy NPC hit, attack, and various death animations<br />\n\t\t\t\u2022 enemy NPC tactics and AI<br />\n\t\t\t\u2022 player death, score<br />\n\t\t\t\u2022 architectural art assets, textures, variation<br />\n\t\t\t\u2022 ambient sound effects<br />\n\t\t\t\u2022 breakable glass<br />\n\t\t\t\u2022 more/better character and action sounds<br />\n\t\t\t\u2022 more...<br />\n\t\t\t</p>\n\t\t\t<h2 style="color:#FFFF00; text-shadow:-1px 2px black;">Past Updates</h2>\n\t\t\t<p>\n\t\t\t<b>June 15th, 2023:</b><br />\n\t\t\t\u2022 melee weapon<br />\n\t\t\t\u2022 grenades!<br />\n\t\t\t\u2022 collectible weapons, with randomized order<br />\n\t\t\t\u2022 organized loot spawning<br />\n\t\t\t\u2022 configurable keyboard and mouse controls<br />\n\t\t\t\u2022 enemy NPC attacks<br />\n\t\t\t\u2022 weapon reload sounds<br />\n\t\t\t</p><p>\n\t\t\t<b>May 28th, 2023:</b><br />\n\t\t\t\u2022 app loading console<br />\n\t\t\t\u2022 window resizing<br />\n\t\t\t\u2022 main menu<br />\n\t\t\t\u2022 main menu music<br />\n\t\t\t\u2022 options menu<br />\n\t\t\t\u2022 readme page with pictures<br />\n\t\t\t\u2022 donation via PayPal<br />\n\t\t\t\u2022 large rooms with pillars<br />\n\t\t\t\u2022 improved color palette<br />\n\t\t\t</p><p>\n\t\t\t<b>May 7th, 2023:</b><br />\n\t\t\t\u2022 maze world generator<br />\n\t\t\t\u2022 global illumination at 60 FPS<br />\n\t\t\t\u2022 room lights switching on<br />\n\t\t\t\u2022 improved performance of collision scans<br />\n\t\t\t\u2022 gibs colliding with props<br />\n\t\t\t\u2022 HUD cards for ammo collection<br />\n\t\t\t</p><p>\n\t\t\t<b>Dec 18th, 2022:</b><br />\n\t\t\t\u2022 endless world generation<br />\n\t\t\t\u2022 user settings panel<br />\n\t\t\t\u2022 weapons reloading<br />\n\t\t\t\u2022 ammo collectibles<br />\n\t\t\t</p><p>\n\t\t\t<b>Oct 30th, 2022:</b><br />\n\t\t\t\u2022 NPC navigation graph<br />\n\t\t\t</p><p>\n\t\t\t<b>Oct 11th, 2022:</b><br />\n\t\t\t\u2022 website launched<br />\n\t\t\t</p><p>\n\t\t');
a=373;b=0;var c=document.createElement("button");c.style.zIndex=2;c.style.width="76px";c.style.height="34px";c.style.position="absolute";c.ac=250;c.$b=a;a+=80;c.wf=b;b+=6;t.g.Uc.push(c);c.style.border="none";c.style.background='url("'+t.i.P.get("MenuButtonOK").data.src+'")';c.style.backgroundPosition="0px 0px";c.style.cursor="pointer";c.onclick=function(){this.style.backgroundPosition="0px -36px";t.g.Ig()};c.onmousedown=function(d){d.preventDefault();this.style.backgroundPosition="0px -72px";this.Db=
2;t.i.X.get("woodSnap02").play()};c.onmouseenter=function(){this.style.backgroundPosition="0px -36px";this.Db=1;this.style.left=this.$b+"px";this.style.top=this.ac+"px";t.i.X.get("hit02").play({gain:.5})};c.onmouseleave=function(){this.style.backgroundPosition="0px 0px";this.Db=0};t.za.appendChild(c);a=n(t.g.Uc);for(b=a.next();!b.done;b=a.next())b=b.value,b.style.left=b.$b+"px",b.style.top=b.ac+"px"};
t.g.$l=function(){var a=document.createElement("button");a.style.zIndex=2;a.style.position="absolute";a.style.width="64px";a.style.height="64px";a.style.left=(t.canvas.width-64>>1)+"px";a.style.top=(t.canvas.height-64>>1)+"px";a.style.border="none";a.style.background='url("WebsitePlay_230507_01.png")';a.style.backgroundSize="64px 64px";a.style.backgroundPosition="center";a.style.backgroundRepeat="no-repeat";a.style.opacity="75%";a.style.cursor="pointer";a.onclick=function(){t.i.X.get("woodSnap02").play();
t.on=!0;t.ue(0);t.g.Dk();t.g.Ig();t.Audio.Jb(t.Ca.musicEnabled);var b=t.i.X.get("MusicFactoryBeat01");t.Audio.ge&&t.Audio.ge.stop();var c=t.Audio.S.createGain();c.gain.value=1;c.connect(t.Audio.wb);var d=new AudioBufferSourceNode(t.Audio.S);d.connect(c);d.loop=!0;d.buffer=b.buffer;d.start();t.Audio.ge=d};a.onmouseenter=function(){this.style.opacity="100%"};a.onmouseleave=function(){this.style.opacity="75%"};t.za.appendChild(a)};
document.addEventListener("pointerlockchange",function(){document.pointerLockElement?(t.ee.removeChild(t.ym),t.ee.removeChild(t.za),t.za=null,t.Audio.ge.stop(),he.clear(),N.clear(),t.paused=!1,t.g.Ff.ne.disconnect(t.g.Ff.Li),t.g.Ff.ne.connect(t.Audio.wb)):(t.Ui=1,t.g.qn=performance.now(),t.g.Ff.ne.disconnect(t.Audio.wb),t.g.Ff.ne.connect(t.g.Ff.Li))});t.g.pause=function(){t.Ui=0;t.paused=!0;t.g.Dk();t.g.Ig()};
(function(){var a,b,c,d,e,h;return Ha(new Ga(new xa(function(g){if(1==g.S){t.Uh=new ok;t.Fm();a=t.za=document.createElement("div");a.style.position="absolute";a.style.width=t.canvas.width+"px";a.style.height=t.canvas.height+"px";a.style.left=0;a.style.top=0;a.style.backgroundColor="black";a.style.overflow="hidden";a.style.fontFamily="monospace";a.style.fontSize="8pt";a.style.color="white";t.ee.appendChild(a);t.za.Mj=new Intl.NumberFormat("en-US",{maximumFractionDigits:2});t.za.insertAdjacentHTML("beforeend",
"\n\t----------------------------------------------------------------------------<br />\n\tThis game is a preview of a work in progress.<br />\n\tPlease email me about any technical problems so I can fix them!<br />\n\tchad.chisholm@protonmail.com<br />\n\t----------------------------------------------------------------------------<br />\n\t<br />\n\t");t.za.insertAdjacentHTML("beforeend","ShootPotato v0.018<br />");t.za.insertAdjacentHTML("beforeend","June 28, 2023<br />");t.za.insertAdjacentHTML("beforeend",
"GL Vendor: "+u.getParameter(u.VENDOR)+"<br />");t.za.insertAdjacentHTML("beforeend","GL Version: "+u.getParameter(u.VERSION)+"<br />");t.za.insertAdjacentHTML("beforeend","GL Renderer: "+u.getParameter(u.RENDERER)+"<br />");t.za.insertAdjacentHTML("beforeend","Fetching resources... ");c=b=performance.now();var k=fetch("resources_230625_01.gob");g.S=2;return{value:k}}if(3!=g.S)return d=g.Jb,c=performance.now(),t.za.insertAdjacentHTML("beforeend","done ("+t.za.Mj.format(c-b)+" ms).<br />"),b=c,t.za.insertAdjacentHTML("beforeend",
"Unpacking resources... "),e=Uint8Array,k=d.arrayBuffer(),g.S=3,{value:k};h=new e(g.Jb);h.position=0;t.i.load(h);c=performance.now();t.za.insertAdjacentHTML("beforeend","done ("+t.za.Mj.format(c-b)+" ms).<br />");g.S=0})))})();
